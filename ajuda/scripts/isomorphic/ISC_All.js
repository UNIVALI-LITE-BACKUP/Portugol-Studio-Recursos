/*
 * Isomorphic SmartClient
 * Version v9.1p_2014-06-27 (2014-06-27)
 * Copyright(c) 1998 and beyond Isomorphic Software, Inc. All rights reserved.
 * "SmartClient" is a trademark of Isomorphic Software, Inc.
 *
 * licensing@smartclient.com
 *
 * http://smartclient.com/license
 */

 // ISC_Core.js
 
var isc=window.isc?window.isc:{};if(window.isc&&!window.isc.module_Core){isc.module_Core=1;isc._moduleStart=isc._Core_start=(isc.timestamp?isc.timestamp():new Date().getTime());if(isc._moduleEnd&&(!isc.Log||(isc.Log&&isc.Log.logIsDebugEnabled('loadTime')))){isc._pTM={message:'Core load/parse time: '+(isc._moduleStart-isc._moduleEnd)+'ms',category:'loadTime'};if(isc.Log&&isc.Log.logDebug)isc.Log.logDebug(isc._pTM.message,'loadTime');else if(isc._preLog)isc._preLog[isc._preLog.length]=isc._pTM;else isc._preLog=[isc._pTM]}isc.definingFramework=true;var isc=window.isc?window.isc:{};isc.$d=new Date().getTime();isc.version="v9.1p_2014-06-27/LGPL Deployment";isc.versionNumber="v9.1p_2014-06-27";isc.buildDate="2014-06-27";isc.expirationDate="";isc.licenseType="LGPL";isc.licenseCompany="Isomorphic Software";isc.licenseSerialNumber="ISC_LGPL_NIGHTLY";isc.licensingPage="http://smartclient.com/product/";isc.$1142="debugModules";isc.$1143="nonDebugModules";isc.checkForDebugAndNonDebugModules=function(){if(isc.checkForDebugAndNonDebugModules.$75z)return;var _1=isc['_'+this.$1142],_2=_1!=null&&_1.length>0,_3=isc['_'+this.$1143],_4=_3!=null&&_3.length>0;if(_2&&_4){isc.logWarn("Both Debug and non-Debug modules were loaded; the Debug versions of '"+_1.join("', '")+"' and the non-Debug versions of '"+_3.join("', '")+"' were loaded. Mixing Debug and non-Debug modules is not supported and may lead to JavaScript errors and/or unpredictable behavior. To fix, ensure that only modules in the modules/ folder or the modules-debug/ folder are loaded and clear the browser cache. If using Smart GWT, also clear the GWT unit cache and recompile.");isc.checkForDebugAndNonDebugModules.$75z=true}};isc.$41r={SCServer:{present:"false",name:"SmartClient Server",serverOnly:true,isPro:true},Drawing:{present:"true",name:"Drawing Module"},PluginBridges:{present:"true",name:"PluginBridges Module"},RichTextEditor:{present:"true",name:"RichTextEditor Module"},Calendar:{present:"true",name:"Calendar Module"},Analytics:{present:"false",name:"Analytics Module"},Charts:{present:"false",name:"Charts Module"},Tools:{present:"${includeTools}",name:"Portal and Tools Module"},NetworkPerformance:{present:"false",name:"Network Performance Module"},FileLoader:{present:"false",name:"Network Performance Module"},RealtimeMessaging:{present:"false",name:"RealtimeMessaging Module"},serverCriteria:{present:"false",name:"Server Advanced Filtering",serverOnly:true,isFeature:true},customSQL:{present:"false",name:"SQL Templating",serverOnly:true,isFeature:true},chaining:{present:"false",name:"Transaction Chaining",serverOnly:true,isFeature:true},batchDSGenerator:{present:"false",name:"Batch DS-Generator",serverOnly:true,isFeature:true},batchUploader:{present:"false",name:"Batch Uploader",serverOnly:true,isFeature:true},transactions:{present:"false",name:"Automatic Transaction Management",serverOnly:true,isFeature:true}};isc.canonicalizeModules=function(_1){if(!_1)return null;if(isc.isA.String(_1)){if(_1.indexOf(",")!=-1){_1=_1.split(",");var _2=/^\s+/,_3=/\s+$/;for(var i=0;i<_1.length;i++){_1[i]=_1[i].replace(_2,"").replace(_3,"")}}else _1=[_1]}
return _1};isc.hasOptionalModules=function(_1){if(!_1)return true;_1=isc.canonicalizeModules(_1);for(var i=0;i<_1.length;i++)if(!isc.hasOptionalModule(_1[i]))return false;return true};isc.getMissingModules=function(_1){var _2=[];_1=isc.canonicalizeModules(_1);for(var i=0;i<_1.length;i++){var _4=_1[i];if(!isc.hasOptionalModule(_4))_2.add(isc.$41r[_4])}
return _2};isc.hasOptionalModule=function(_1){var v=isc.$41r[_1];if(!v){if(isc.Log)isc.Log.logWarn("isc.hasOptionalModule - unknown module: "+_1);return false}
return v.present=="true"||v.present.charAt(0)=="$"};isc.getOptionalModule=function(_1){return isc.$41r[_1]};isc.$a=window.isc_useSimpleNames;if(isc.$a==null)isc.$a=true;if(window.OpenAjax){isc.$b=isc.versionNumber.replace(/[a-zA-Z_]+/,".0");OpenAjax.registerLibrary("SmartClient","http://smartclient.com/SmartClient",isc.$b,{namespacedMode:!isc.$a,iscVersion:isc.version,buildDate:isc.buildDate,licenseType:isc.licenseType,licenseCompany:isc.licenseCompany,licenseSerialNumber:isc.licenseSerialNumber});OpenAjax.registerGlobals("SmartClient",["isc"])}
isc.$e=window.isc_useLongDOMIDs;isc.$f="isc.";isc.addGlobal=function(_1,_2){if(_1.indexOf(isc.$f)==0)_1=_1.substring(4);isc[_1]=_2;if(isc.$a)window[_1]=_2}
isc.onLine=true;isc.isOffline=function(){return!isc.onLine};isc.goOffline=function(){isc.onLine=false};isc.goOnline=function(){isc.onLine=true};if(window.addEventListener){window.addEventListener("online",isc.goOnline,false);window.addEventListener("offline",isc.goOffline,false)}
if(typeof isc.Packager!="object"){}
isc.addGlobal("Browser",{isSupported:false});isc.Browser.isOpera=(navigator.appName=="Opera"||navigator.userAgent.indexOf("Opera")!=-1);isc.Browser.isNS=(navigator.appName=="Netscape"&&!isc.Browser.isOpera);isc.Browser.isIE=(navigator.appName=="Microsoft Internet Explorer"&&!isc.Browser.isOpera)||navigator.userAgent.indexOf("Trident/")!=-1;isc.Browser.isMSN=(isc.Browser.isIE&&navigator.userAgent.indexOf("MSN")!=-1);isc.Browser.isMoz=(navigator.userAgent.indexOf("Gecko")!=-1)&&(navigator.userAgent.indexOf("Safari")==-1)&&(navigator.userAgent.indexOf("AppleWebKit")==-1)&&!isc.Browser.isIE;isc.Browser.isCamino=(isc.Browser.isMoz&&navigator.userAgent.indexOf("Camino/")!=-1);isc.Browser.isFirefox=(isc.Browser.isMoz&&navigator.userAgent.indexOf("Firefox/")!=-1);isc.Browser.isAIR=(navigator.userAgent.indexOf("AdobeAIR")!=-1);isc.Browser.isWebKit=navigator.userAgent.indexOf("WebKit")!=-1;isc.Browser.isSafari=isc.Browser.isAIR||navigator.userAgent.indexOf("Safari")!=-1||navigator.userAgent.indexOf("AppleWebKit")!=-1;isc.Browser.isChrome=isc.Browser.isSafari&&(navigator.userAgent.indexOf("Chrome/")!=-1);if(!isc.Browser.isIE&&!isc.Browser.isOpera&&!isc.Browser.isMoz&&!isc.Browser.isAIR&&!isc.Browser.isWebkit&&!isc.Browser.isSafari)
{if(navigator.appVersion.indexOf("MSIE")!=-1){isc.Browser.isIE=true}}
if(navigator.userAgent.indexOf("Trident/")>=0&&navigator.userAgent.lastIndexOf("rv:")>=0)
{isc.Browser.minorVersion=parseFloat(navigator.userAgent.substring(navigator.userAgent.lastIndexOf("rv:")+"rv:".length))}else{isc.Browser.minorVersion=parseFloat(isc.Browser.isIE?navigator.appVersion.substring(navigator.appVersion.indexOf("MSIE")+5):navigator.appVersion)}
if(isc.Browser.isIE){if(document.documentMode!=null){isc.Browser.minorVersion=Math.max(isc.Browser.minorVersion,document.documentMode)}}else(function(){var _1,_2;if(navigator.appVersion){_1="Version/";_2=navigator.appVersion.indexOf(_1);if(_2>=0){isc.Browser.minorVersion=parseFloat(navigator.appVersion.substring(_2+_1.length));return}}
var _3=navigator.userAgent;_1="Chrome/";_2=_3.indexOf(_1);if(_2>=0){isc.Browser.minorVersion=parseFloat(_3.substring(_2+_1.length));return}
_1="Camino/";_2=_3.indexOf(_1);if(_2>=0){isc.Browser.minorVersion=parseFloat(_3.substring(_2+_1.length));return}
_1="Firefox/";_2=_3.indexOf(_1);if(_2>=0){isc.Browser.minorVersion=parseFloat(_3.substring(_2+_1.length));return}
if(_3.indexOf("Opera/")>=0){_1="Version/";_2=_3.indexOf(_1);if(_2>=0){isc.Browser.minorVersion=parseFloat(_3.substring(_2+_1.length));return}else{_1="Opera/";_2=_3.indexOf(_1);isc.Browser.minorVersion=parseFloat(_3.substring(_2+_1.length));return}}})();isc.Browser.version=parseInt(isc.Browser.minorVersion);isc.Browser.isIE6=isc.Browser.isIE&&isc.Browser.version<=6;if(isc.Browser.isCamino){isc.Browser.caminoVersion=navigator.userAgent.substring(navigator.userAgent.indexOf("Camino/")+7)}
if(isc.Browser.isFirefox){var userAgent=navigator.userAgent,firefoxVersion=userAgent.substring(userAgent.indexOf("Firefox/")+8),majorMinorVersion=firefoxVersion.replace(/([^.]+\.[^.]+)\..*/,"$1");isc.Browser.firefoxVersion=firefoxVersion;isc.Browser.firefoxMajorMinorNumber=parseFloat(majorMinorVersion)}
if(isc.Browser.isMoz){isc.Browser.$g=navigator.userAgent.indexOf("Gecko/")+6;isc.Browser.geckoVersion=parseInt(navigator.userAgent.substring(isc.Browser.$g,isc.Browser.$g+8));if(isc.Browser.isFirefox){if(isc.Browser.firefoxVersion.match(/^1\.0/))isc.Browser.geckoVersion=20050915;else if(isc.Browser.firefoxVersion.match(/^2\.0/))isc.Browser.geckoVersion=20071108}
if(isc.Browser.version>=17)isc.Browser.geckoVersion=20121121}
isc.Browser.isStrict=document.compatMode=="CSS1Compat";if(isc.Browser.isStrict&&isc.Browser.isMoz){isc.Browser.$51p=document.doctype.publicId;isc.Browser.$51q=document.doctype.systemId}
isc.Browser.isTransitional=/.*(Transitional|Frameset)/.test((document.all&&document.all[0]&&document.all[0].nodeValue)||(document.doctype&&document.doctype.publicId));isc.Browser.isIE7=isc.Browser.isIE&&isc.Browser.version==7;isc.Browser.isIE8=isc.Browser.isIE&&isc.Browser.version>=8&&document.documentMode==8;isc.Browser.isIE8Strict=isc.Browser.isIE&&(isc.Browser.isStrict&&document.documentMode==8)||document.documentMode>8;isc.Browser.isIE9=isc.Browser.isIE&&isc.Browser.version>=9&&document.documentMode>=9;isc.Browser.isIE10=isc.Browser.isIE&&isc.Browser.version>=10;isc.Browser.isIE11=isc.Browser.isIE&&isc.Browser.version>=11;isc.Browser.AIRVersion=(isc.Browser.isAIR?navigator.userAgent.substring(navigator.userAgent.indexOf("AdobeAir/")+9):null);if(isc.Browser.isSafari){if(isc.Browser.isAIR){isc.Browser.safariVersion=530}else{if(navigator.userAgent.indexOf("Safari/")!=-1){isc.Browser.rawSafariVersion=navigator.userAgent.substring(navigator.userAgent.indexOf("Safari/")+7)}else if(navigator.userAgent.indexOf("AppleWebKit/")!=-1){isc.Browser.rawSafariVersion=navigator.userAgent.substring(navigator.userAgent.indexOf("AppleWebKit/")+12)}else{isc.Browser.rawSafariVersion="530"}
isc.Browser.safariVersion=(function(){var _1=isc.Browser.rawSafariVersion,_2=_1.indexOf(".");if(_2==-1)return parseInt(_1);var _3=_1.substring(0,_2+1),_4;while(_2!=-1){_2+=1;_4=_1.indexOf(".",_2);_3+=_1.substring(_2,(_4==-1?_1.length:_4));_2=_4}
return parseFloat(_3)})()}}
isc.Browser.isWin=navigator.platform.toLowerCase().indexOf("win")>-1;isc.Browser.isWin2k=navigator.userAgent.match(/NT 5.01?/)!=null;isc.Browser.isMac=navigator.platform.toLowerCase().indexOf("mac")>-1;isc.Browser.isUnix=(!isc.Browser.isMac&&!isc.Browser.isWin);isc.Browser.isAndroid=navigator.userAgent.indexOf("Android")>-1;if(isc.Browser.isAndroid){var pos=navigator.userAgent.indexOf("Android");if(pos>=0){isc.Browser.androidMinorVersion=parseFloat(navigator.userAgent.substring(pos+"Android".length));if(window.isNaN(isc.Browser.androidMinorVersion))delete isc.Browser.androidMinorVersion}
isc.Browser.isAndroidWebView=navigator.userAgent.indexOf("Version/")>=0}
isc.Browser.isRIM=isc.Browser.isBlackBerry=navigator.userAgent.indexOf("BlackBerry")>-1||navigator.userAgent.indexOf("PlayBook")>-1;isc.Browser.isMobileFirefox=isc.Browser.isFirefox&&(navigator.userAgent.indexOf("Mobile")>-1||navigator.userAgent.indexOf("Tablet")>-1);isc.Browser.isMobileWebkit=(isc.Browser.isSafari&&navigator.userAgent.indexOf(" Mobile/")>-1||isc.Browser.isAndroid||isc.Browser.isBlackBerry)&&!isc.Browser.isFirefox;isc.Browser.isMobile=(isc.Browser.isMobileFirefox||isc.Browser.isMobileWebkit);isc.Browser.isTouch=(isc.Browser.isMobileFirefox||isc.Browser.isMobileWebkit);isc.Browser.setIsTouch=function(_1){_1=isc.Browser.isTouch=!!_1;if(isc.Browser.isDesktop){isc.Browser.isHandset=false;isc.Browser.isTablet=false}else{isc.Browser.isHandset=_1&&!isc.Browser.isTablet;isc.Browser.isTablet=!isc.Browser.isHandset}
isc.Browser.hasNativeDrag=!_1&&"draggable"in document.documentElement&&!isc.Browser.isIE;isc.Browser.nativeMouseMoveOnCanvasScroll=!_1&&(isc.Browser.isSafari||isc.Browser.isChrome)};isc.Browser.isIPhone=(isc.Browser.isMobileWebkit&&(navigator.userAgent.indexOf("iPhone")>-1||navigator.userAgent.indexOf("iPad")>-1));if(isc.Browser.isIPhone){var match=navigator.userAgent.match(/CPU\s+(?:iPhone\s+)?OS\s*([0-9_]+)/i);if(match!=null){isc.Browser.iOSMinorVersion=window.parseFloat(match[1].replace('_','.'));isc.Browser.iOSVersion=isc.Browser.iOSMinorVersion<<0}
isc.Browser.isUIWebView=navigator.userAgent.indexOf("Safari")<0;isc.Browser.isMobileSafari=!isc.Browser.isUIWebView&&navigator.userAgent.indexOf("CriOS/")<0}
isc.Browser.isIPad=(isc.Browser.isIPhone&&navigator.userAgent.indexOf("iPad")>-1);if(isc.Browser.isIPad&&isc.Browser.isMobileSafari&&isc.Browser.iOSVersion==7){var iOS7IPadStyleSheetID="isc_iOS7IPadStyleSheet";if(document.getElementById(iOS7IPadStyleSheetID)==null){var styleElement=document.createElement("style");styleElement.id=iOS7IPadStyleSheetID;document.head.appendChild(styleElement);var s=styleElement.sheet;s.insertRule("\n@media (orientation:landscape) {\nhtml {position: fixed;bottom: 0px;width: 100%;height: 672px;}body {position: fixed;top: 0px;margin: 0px;padding: 0px;width: 100%;height: 672px;}\n}\n",0)}
(function(){var _1=function(_7){if(_7==null)return false;var _2=_7.tagName;return(_2==="INPUT"||_2==="SELECT"||_2==="TEXTAREA")};var _3=null;window.addEventListener("scroll",function(){var _4=document.body.scrollTop;if(_4==0)return;var _5=document.activeElement;if(_1(_5)){var _6=function onBlur(_7){_5.removeEventListener("blur",_6,true);if(_3!=null)clearTimeout(_3);_3=setTimeout(function(){_3=null;_5=document.activeElement;if(_5!==_7.target&&_1(_5)){_5.addEventListener("blur",_6,true)}else{document.body.scrollTop=0}},1)};_5.addEventListener("blur",_6,true)}else{document.body.scrollTop=0}},false)})()}
if(window.isc_isTablet!=null){isc.Browser.isTablet=!!window.isc_isTablet}else{isc.Browser.isTablet=isc.Browser.isIPad||(isc.Browser.isRIM&&navigator.userAgent.indexOf("Tablet")>-1)||(isc.Browser.isAndroid&&navigator.userAgent.indexOf("Mobile")==-1)}
isc.Browser.$138e=isc.Browser.isTablet;isc.Browser.setIsTablet=function(_1){_1=isc.Browser.isTablet=!!_1;isc.Browser.isHandset=(isc.Browser.isTouch&&!isc.Browser.isTablet);isc.Browser.isDesktop=(!isc.Browser.isTablet&&!isc.Browser.isHandset)};isc.Browser.isHandset=(isc.Browser.isTouch&&!isc.Browser.isTablet);isc.Browser.setIsHandset=function(_1){_1=isc.Browser.isHandset=!!_1;isc.Browser.isTablet=(isc.Browser.isTouch&&!isc.Browser.isHandset);isc.Browser.isDesktop=(!isc.Browser.isTablet&&!isc.Browser.isHandset)};isc.Browser.isDesktop=(!isc.Browser.isTablet&&!isc.Browser.isHandset);isc.Browser.setIsDesktop=function(_1){_1=isc.Browser.isDesktop=!!_1;if(_1){isc.Browser.isHandset=false;isc.Browser.isTablet=false}else{isc.Browser.isTablet=isc.Browser.$138e;isc.Browser.isHandset=!isc.Browser.isTablet}};isc.Browser.isBorderBox=(isc.Browser.isIE&&!isc.Browser.isStrict);isc.Browser.lineFeed=(isc.Browser.isWin?"\r\n":"\r");isc.Browser.$h=false;isc.Browser.isDOM=(isc.Browser.isMoz||isc.Browser.isOpera||isc.Browser.isSafari||(isc.Browser.isIE&&isc.Browser.version>=5));isc.Browser.isSupported=((isc.Browser.isIE&&isc.Browser.minorVersion>=5.5&&isc.Browser.isWin)||isc.Browser.isMoz||isc.Browser.isOpera||isc.Browser.isSafari||isc.Browser.isAIR);isc.Browser.nativeMouseMoveOnCanvasScroll=!isc.Browser.isTouch&&(isc.Browser.isSafari||isc.Browser.isChrome);isc.Browser.seleniumPresent=(function(){var _1=location.href.match(/[?&](?:sc_selenium)=([^&#]*)/);return _1&&_1.length>1&&"true"==_1[1]})();isc.Browser.SHOWCASE="showcase";isc.Browser.RUNNER="runner";isc.Browser.autotest=(function(){var _1=location.href.match(/[?&](?:autotest)=([^&#]*)/);return _1&&_1.length>1?_1[1]:null})();isc.Browser.allowsXSXHR=((isc.Browser.isFirefox&&isc.Browser.firefoxMajorMinorNumber>=3.5)||(isc.Browser.isChrome)||(isc.Browser.isSafari&&isc.Browser.safariVersion>=531));var isc_useGradientsPreIE9=window.isc_useGradientsPreIE9;isc.Browser.useCSSFilters=!isc.Browser.isIE||isc.Browser.isIE9||isc_useGradientsPreIE9!=false;var isc_css3Mode=window.isc_css3Mode;if(isc_css3Mode=="on"){isc.Browser.useCSS3=true}else if(isc_css3Mode=="off"){isc.Browser.useCSS3=false}else if(isc_css3Mode=="supported"||isc_css3Mode=="partialSupport"||isc_css3Mode===undefined)
{isc.Browser.useCSS3=isc.Browser.isWebKit||isc.Browser.isFirefox||(isc.Browser.isIE&&(isc.Browser.isIE9||isc.Browser.version>=10))}else{isc.Browser.useCSS3=false}
var isc_spriting=window.isc_spriting;if(isc_spriting=="off"){isc.Browser.useSpriting=false}else{isc.Browser.useSpriting=(!isc.Browser.isIE||isc.Browser.version>=7)}
isc.Browser.useInsertAdjacentHTML=!!document.documentElement.insertAdjacentHTML;isc.Browser.hasNativeGetRect=(!isc.Browser.isIE&&(!isc.Browser.isSafari||!isc.Browser.isMac||isc.Browser.version>=6)&&!!document.createRange&&!!(document.createRange().getBoundingClientRect));isc.Browser.$113k=!((isc.Browser.isIE&&isc.Browser.version<10&&!isc.Browser.isIE9)||(isc.Browser.isWebKit&&!(parseFloat(isc.Browser.rawSafariVersion)>=532.3)));isc.Browser.useClipDiv=isc.Browser.$113k;isc.Browser.useCreateContextualFragment=!!document.createRange&&!!document.createRange().createContextualFragment;isc.Browser.hasTextOverflowEllipsis=(!isc.Browser.isMoz||isc.Browser.version>=7)&&(!isc.Browser.isOpera||isc.Browser.version>=9);isc.Browser.$114w=(!isc.Browser.isOpera||isc.Browser.version>=11?"text-overflow":"-o-text-overflow");isc.Browser.$117b=!isc.Browser.isSafari||isc.Browser.version>=4;isc.Browser.hasNativeDrag=!isc.Browser.isTouch&&"draggable"in document.documentElement&&!isc.Browser.isIE;isc.Browser.$120h=!!(window.getSelection&&document.createRange&&window.Range);isc.Browser.$124v="backgroundSize"in document.documentElement.style;isc.Browser.$139c=("transition"in document.documentElement.style||"WebkitTransition"in document.documentElement.style||"OTransition"in document.documentElement.style)&&!isc.Browser.isMoz;isc.Browser.$139y=("WebkitTransition"in document.documentElement.style?"webkitTransitionEnd":("OTransition"in document.documentElement.style?(isc.Browser.isOpera&&isc.Browser.version>=12?"otransitionend":"oTransitionEnd"):"transitionend"))
isc.noOp=function isc_noOp(){};isc.emptyObject={};isc.$ac=[];isc.emptyString=isc.$ad="";isc.space=" ";isc.dot=".";isc.semi=";";isc.colon=":";isc.slash="/";isc.star="*";isc.auto="auto";isc.px="px";isc.nbsp="&nbsp;";isc.xnbsp="&amp;nbsp;";isc.$ae="false";isc.$af="FALSE";isc.$ag="_";isc.$75g="$";isc.$ah="_$observed_";isc.$ai="_$SuperProto_";isc.gwtRef="__ref";isc.gwtModule="__module";isc.logWarn=function isc_logWarn(_1,_2){isc.Log.logWarn(_1,_2)};isc.echo=function isc_echo(_1){return isc.Log.echo(_1)};isc.echoAll=function isc_echoAll(_1){return isc.Log.echoAll(_1)};isc.echoLeaf=function isc_echoLeaf(_1){return isc.Log.echoLeaf(_1)};isc.echoFull=function isc_echoFull(_1){return isc.Log.echoFull(_1)};isc.logEcho=function isc_logEcho(_1,_2){if(_2)_2+=": ";isc.Log.logWarn((_2||isc.$ad)+isc.echo(_1))}
isc.logEchoAll=function isc_logEchoAll(_1,_2){if(_2)_2+=": ";isc.Log.logWarn((_2||isc.$ad)+isc.echoAll(_1))}
isc.$aq=function isc__makeFunction(_1,_2){var _3=_2||_1;var _4;if(_2==null){_4=new Function(_3);_4.$123y=isc.$ad}else{_4=new Function(_1,_3)}
return _4};isc.doEval=function isc_doEval(_1){if(isc.Browser.isMoz)return isc.$as(_1);if(!isc.$at)isc.$at=[];isc.$at[isc.$at.length]=_1;return null}
isc.finalEval=function isc_finalEval(){if(isc.$at){if(isc.Browser.isMoz){for(var i=0;i<isc.$at.length;i++){isc.eval(isc.$at[i])}}
var _2=isc.$at.join("");if(isc.Browser.isSafari)_2=isc.$as(_2);if(isc.Browser.isIE){if(window.execScript!=null){window.execScript(_2,"javascript")}else{window.eval(_2)}}else{isc.eval(_2)}}
isc.$at=null}
isc.$au="//$0";isc.$av="//$1";isc.$aw=0;isc.$ax=true;isc.$as=function isc__transformCode(_1){isc.$ar=true;var _2=isc.timeStamp?isc.timeStamp():new Date().getTime();var _3=isc.$aj,_4=isc.$ay;if(isc.$ax)_3=isc.$an+_3;var _5=_1.split(isc.$az),_6=[];var _5=_1.split(isc.$au);_1=_5.join(_3);_5=_1.split(isc.$av);_1=_5.join(_4);if(isc.$ax){_5=_1.split("//$2");_1=_5.join(isc.$ap)}
var _7=isc.timeStamp?isc.timeStamp():new Date().getTime();isc.$aw+=(_7-_2);return _1}
isc.$ay="}catch($al){isc.eval(isc.$a0(";isc.$a0=function isc__handleError(_1){var _2="var _ = {";if(_1!=""){var _3=_1.split(",");for(var i=0;i<_3.length;i++){var _5=_3[i];_2+=_5+":"+_5;if(i<_3.length-1)_2+=","}}
_2+="};";_2+="if(isc.Log)isc.Log.$am($al,arguments,this,_);throw $al;";return _2}
isc.fillList=function isc_fillList(_1,_2,_3,_4,_5,_6,_7,_8,_9,_10,_11,_12,_13,_14,_15,_16,_17,_18,_19,_20,_21,_22,_23,_24,_25,_26,_27){if(_1==null)_1=[];else _1.length=0;var _28;if(_25===_28&&_26===_28&&_27===_28){_1[0]=_2;_1[1]=_3;_1[2]=_4;_1[3]=_5;_1[4]=_6;_1[5]=_7;_1[6]=_8;_1[7]=_9;_1[8]=_10;_1[9]=_11;_1[10]=_12;_1[11]=_13;_1[12]=_14;_1[13]=_15;_1[14]=_16;_1[15]=_17;_1[16]=_18;_1[17]=_19;_1[18]=_20;_1[19]=_21;_1[20]=_22;_1[21]=_23;_1[22]=_24}else{for(var i=1;i<arguments.length;i++){_1[i-1]=arguments[i]}}
return _1}
isc.$a1=[];isc.addGlobal("addProperties",function isc_addProperties(_1,_2,_3,_4,_5,_6,_7,_8,_9,_10,_11,_12,_13,_14,_15,_16,_17,_18,_19,_20,_21,_22,_23,_24,_25,_26,_27){var _28,_29=isc.$a1;if(_25===_28&&_26===_28&&_27===_28){isc.fillList(_29,_2,_3,_4,_5,_6,_7,_8,_9,_10,_11,_12,_13,_14,_15,_16,_17,_18,_19,_20,_21,_22,_23,_24,_25,_26,_27)}else{_29.length=0;for(var i=1;i<arguments.length;i++){_29[i-1]=arguments[i]}}
var _31=isc.addPropertyList(_1,_29);_29.length=0;return _31});isc.$a2={};isc.$a3={};isc.$a4=function isc__getInterfaceProps(_1){var _2=_1.Class,_3;if(isc.isA.ClassObject(_1)){_3=isc.$a3[_2]=isc.$a3[_2]||[]}else if(isc.isAn.InstancePrototype(_1)){_3=isc.$a2[_2]=isc.$a2[_2]||[]}
return _3}
isc.addPropertyList=function isc_addPropertyList(_1,_2){if(_1==null){if(isc.Log)isc.Log.logWarn("Attempt to add properties to a null object. Creating a new object for the list of properties.");_1={}}
var _3,_4=(isc.isA!=null),_5=(isc.isAn&&isc.isAn.Instance(_1)?_1.getClass()._stringMethodRegistry:_1._stringMethodRegistry);if(_5==null)_5=isc.emptyObject;var _6=_1.$a5?isc.$a4(_1):null;var _7;for(var i=0,l=_2.length;i<l;i++){var _10=_2[i];if(_10==null)continue;for(var _11 in _10){var _12=_10[_11];var _13=_4&&isc.isA.Function(_12);if(_5[_11]!==_7||_13)
{if(_3==null)_3={};_3[_11]=_12}else{if(_6!=null)_6[_6.length]=_11;var _14=_1[_11];if(!_13&&_14!=null&&isc.isA.Function(_14)&&!isc.$1025)
{if(isc.Log!=null){isc.Log.logWarn("method "+_11+" on "+_1+" overridden with non-function: '"+_12+"'")}}
_1[_11]=_12}}}
if(_3!=null)isc.addMethods(_1,_3);return _1}
isc.$a6="string";isc.$a7="function";isc.$a8="constructor";isc.$bl="object";isc.addGlobal("addMethods",function isc_addMethods(_1,_2){if(!_1||!_2)return _1;var _3=_1.$a5?isc.$a4(_1):null;if(!isc.$a9)isc.$a9={};for(var _4 in _2){if(_3!=null)_3[_3.length]=_4;var _5=_2[_4];if(isc.isA.instanceMethodsAdded&&_5!=null&&(typeof _5==isc.$a6||typeof _5==isc.$bl))
{var _6=(isc.isAn.Instance(_1)?(_1.getClass!=null?_1.getClass()._stringMethodRegistry:null):_1._stringMethodRegistry);var _7;if(_6&&!(_6[_4]===_7)&&_4!=isc.$a8)
{_5=isc.Func.expressionToFunction(_6[_4],_2[_4])}}
var _8=_1.$ba,_9=(_8!=null&&_8[_4]!=null?isc.$ah+_4:_4);if(_5!==_1[_9]){if(_5!=null){this.$bb(_5,_4,_1)}
_1[_9]=_5;if(_5!=null){if(isc.$a9[_4]){var _10=(_1.$ba!=null&&_1.$ba[isc.$a9[_4]]!=null?isc.$ah+isc.$a9[_4]:isc.$a9[_4]);_1[_10]=_5}}}}
return _1});isc._allFuncs=[]
isc._allFuncs._maxIndex=0;isc._funcClasses=new Array(5000);isc.$bb=function isc__nameMethod(_1,_2,_3){if(typeof _1!=isc.$a7)return;if(_3.Class==null)return _1.$bc=_2;if(isc.isA!=null&&isc.isA.instanceMethodsAdded&&(isc.isAn.InstancePrototype(_3)||isc.isA.ClassObject(_3)))
{var _4=isc._allFuncs;_4[_4._maxIndex]=_1;isc._funcClasses[_4._maxIndex]=_3.Class;_4._maxIndex++;return}
var _5=(_3==isc.isA?"isA":_3.Class);_1.$bd=_5;if(isc[_3.Class]==null)_1.$bc=_2;if(isc.isA!=null&&isc.isA.instanceMethodsAdded&&isc.isAn.Instance(_3)&&!isc.isAn.InstancePrototype(_3))
{_1.$bc=_2;_1.$be=true;if(_3[_2]!=null)_1.$bf=true}}
isc.addGlobal("getKeys",function isc_getKeys(_1){var _2=[];if(_1!=null){for(var _3 in _1){_2[_2.length]=_3}}
return _2});isc.addGlobal("firstKey",function isc_firstKey(_1){for(var _2 in _1)return _2});isc.addGlobal("getValues",function isc_getValues(_1){var _2=[];if(_1!=null){for(var _3 in _1){_2[_2.length]=_1[_3]}}
return _2});isc.addGlobal("sortObject",function isc_sortObject(_1,_2){if(!isc.isA.Object(_1))return _1;if(isc.isAn.Array(_1)){if(_2!=null)return _1.sort(_2);return _1.sort()}
var _3=isc.getKeys(_1);_3=(_2==null?_3.sort():_3.sort(_2));var _4={};for(var i=0;i<_3.length;i++){_4[_3[i]]=_1[_3[i]]}
return _4});isc.addGlobal("sortObjectByProperties",function isc_sortObjectByProperties(_1,_2){if(!isc.isA.Object(_1))return _1;if(isc.isAn.Array(_1)){if(_2!=null)return _1.sort(_2);return _1.sort()}
var _3=isc.getValues(_1);_3=(_2==null?_3.sort():_3.sort(_2));var _4={};for(var i=0;i<_3.length;i++){var _6=_3[i];for(var _7 in _1){if(_1[_7]===_6){_4[_7]=_1[_7];continue}}}
return _4});isc.addGlobal("addDefaults",function isc_addDefaults(_1,_2){if(_1==null)return;var _3;for(var _4 in _2){if(_1[_4]===_3)_1[_4]=_2[_4]}
return _1});isc.addGlobal("propertyDefined",function isc_propertyDefined(_1,_2){if(_1==null)return false;var _3;if(_1[_2]!==_3)return true;var _4=isc.getKeys(_1);return(_4.contains(_2))});isc.addGlobal("objectsAreEqual",function isc_objectsAreEqual(_1,_2){if(_1===_2)return true;else if(isc.isAn.Object(_1)&&isc.isAn.Object(_2)){if(isc.isA.Date(_1)){return isc.isA.Date(_2)&&(Date.compareDates(_1,_2)==0)}else if(isc.isAn.Array(_1)){if(isc.isAn.Array(_2)&&_1.length==_2.length){for(var i=0;i<_1.length;i++){if(!isc.objectsAreEqual(_1[i],_2[i]))return false}
return true}
return false}else{if(isc.isAn.Array(_2))return false;var _4=0;for(var _5 in _1){if(_5==isc.gwtRef||_5==isc.gwtModule)continue;if(!isc.objectsAreEqual(_1[_5],_2[_5]))return false;_4++}
var _6=0;for(var _7 in _2){if(_5==isc.gwtRef||_5==isc.gwtModule)continue;_6++;if(_6>_4)return false}
if(_6!=_4)return false;return true}}else{return false}});isc.addGlobal("combineObjects",function isc_combineObjects(_1,_2){if(_1==null||!isc.isAn.Object(_1))return _2;if(_2==null||!isc.isAn.Object(_2))return _1;for(var _3 in _2){var _4=_1[_3],_5=_2[_3];if(isc.isAn.Object(_4)&&!isc.isAn.Array(_4)&&!isc.isA.Date(_4)&&isc.isAn.Object(_5)&&!isc.isAn.Array(_5)&&!isc.isA.Date(_5))
{isc.combineObjects(_4,_5)}else{_1[_3]=_5}}});isc.applyMask=function isc_applyMask(_1,_2){var _3={};if(_1==null)return _3;if(_2==null){return isc.addProperties(_3,_1)}
var _4=false;if(!isc.isAn.Array(_1)){_4=true;_1=[_1]}
if(!isc.isAn.Array(_2))_2=isc.getKeys(_2);var _3=[],_5,_6,_7,_8;for(var i=0;i<_1.length;i++){_5=_1[i];_6=_3[i]={};for(var j=0;j<_2.length;j++){_7=_2[j];if(_5[_7]===_8)continue;_6[_7]=_5[_7]}}
return(_4?_3[0]:_3)}
isc.getProperties=function isc_getProperties(_1,_2){if(_1==null)return null;var _3={};if(_2==null)return _3;for(var i=0;i<_2.length;i++){var _5=_2[i];_3[_5]=_1[_5]}
return _3}
isc.$bg={};isc.$bh=Math.floor;isc.$bi="-";for(isc.$bj=0;isc.$bj<10;isc.$bj++)
isc.$bg[isc.$bj]=isc.$bj.toString();isc.$bk=function isc__fillNumber(_1,_2,_3,_4,_5){var _6=_3+_4-1,_7=_2,_8=false,_9;if(_2<0){_9=true;_2=-_2;_1[_3]=this.$bi;_3+=1;_4-=1}
while(_2>9){var _10=this.$bh(_2/10),_11=_2-(_10*10);_1[_6]=this.$bg[_11];_2=_10;if(_6==(_3+1)&&_2>9){isc.Log.logWarn("fillNumber: number too large: "+_7+isc.Log.getStackTrace());_8=true;break}
_6-=1}
if(_8){_6=_3+_4-1
_1[_6--]=(!_9?_7:-_7)}else{_1[_6--]=this.$bg[_2]}
for(var i=_6;i>=_3;i--){_1[i]=null}};if(!isc.Browser.isIE||isc.Browser.version>7){isc.$bk=function isc__fillNumber(_1,_2,_3,_4,_5){_1[_3]=_2;if(_5){var _6=_3+_4;for(var i=_3+1;i<_6;++i){_1[i]=null}}}}
isc.booleanValue=function isc_booleanValue(_1,_2){if(_1==null)return _2;if(isc.isA.String(_1))return _1!=isc.$ae&&_1!=isc.$af;return _1?true:false}
isc.iscToLocaleString=function isc_iscToLocaleString(_1){if(_1!=null){return _1.iscToLocaleString?_1.iscToLocaleString():(_1.toLocaleString?_1.toLocaleString():(_1.toString?_1.toString():isc.emptyString+_1))}
return isc.emptyString+_1}
isc.$101g=["ToolSkin","ToolSkinNative"];isc.setCurrentSkin=function isc_setCurrentSkin(_1){if(isc.currentSkin&&!isc.$101g.contains(_1)){isc.logWarn("Detected loading of more than one skin - '"+_1+"' was loaded when '"+isc.currentSkin+"' was already loaded.  See the QuickStart Guide for instructions on correctly changing the current skin")}
isc.currentSkin=_1}
isc.addGlobal("isA",{});isc.addGlobal("isAn",isc.isA);isc.addGlobal("is",isc.isA);isc.isA.Class="isA";isc.isA.isc=isc.isA;Function.$k=1;Array.$k=2;Date.$k=3;String.$k=4;Number.$k=5;Boolean.$k=6;RegExp.$k=7;Object.$k=8;Function.prototype.$k=1;isc.A=isc.isA;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.useTypeOf=isc.Browser.isMoz||isc.Browser.isSafari;isc.A.$bl="object";isc.A.$73x="String";isc.A.$a7="function";isc.A.$bm="text/xml";isc.A.$58k={SelectItem:true,Time:true};isc.B.push(isc.A.emptyString=function isc_isA_emptyString(_1){return isc.isA.String(_1)&&_1==isc.emptyString},isc.A.nonemptyString=function isc_isA_nonemptyString(_1){return isc.isA.String(_1)&&_1!=isc.emptyString},isc.A.Object=function isc_isA_Object(_1){if(_1==null)return false;if(isc.Browser.isIE&&typeof _1==this.$a7)return false;if(this.useTypeOf){var _2=typeof _1;return(_2=="object"||_2=="array"||_2=="date"||(isc.Browser.isMoz&&_2=="function"&&isc.isA.RegularExpression(_1)))}
if(_1.constructor&&_1.constructor.$k!=null){var _3=_1.constructor.$k;if(_3==1){}else{return(_3==8||_3==7||_3==3||_3==2)}}
if(_1.Class!=null&&_1.Class==this.$73x)return false;if(typeof _1==this.$bl){if(isc.Browser.isIE&&isc.isA.Function(_1))return false;else return true}else return false},isc.A.emptyObject=function isc_isA_emptyObject(_1){if(!isc.isAn.Object(_1))return false;for(var i in _1){return false}
return true},isc.A.emptyArray=function isc_isA_emptyArray(_1){return isc.isAn.Array(_1)&&_1.length==0},isc.A.String=function isc_isA_String(_1){if(_1==null)return false;if(this.useTypeOf){return typeof _1=="string"||(_1.Class!=null&&_1.Class==this.$73x)}
if(_1.constructor&&_1.constructor.$k!=null){return _1.constructor.$k==4}
if(_1.Class!=null&&_1.Class==this.$73x)return true;return typeof _1=="string"},isc.A.Array=function isc_isA_Array(_1){if(_1==null)return false;if(this.useTypeOf&&typeof _1=="array")return true;if(typeof _1==this.$a7)return false;if(_1.constructor&&_1.constructor.$k!=null){return _1.constructor.$k==2}
if(isc.Browser.isSafari){var _2=""+_1.splice;return(_2=="function splice() {\n    [native code]\n}"||_2=="(Internal function)")}
return""+_1.constructor==""+Array},isc.A.Function=function isc_isA_Function(_1){if(_1==null)return false;if(isc.Browser.isIE&&typeof _1==this.$a7)return true;if(isc.Browser.isIE&&((_1==window)||(_1.document!=null&&(_1.toString!=null)&&_1.toString().contains("Window"))))
{return false}
var _2=_1.constructor;if(_2&&_2.$k!=null){if(_2.$k!=1)return false;if(_2===Function)return true}
return isc.Browser.isIE?(isc.emptyString+_1.constructor==Function.toString()):(typeof _1==this.$a7)},isc.A.Number=function isc_isA_Number(_1){if(_1==null)return false;if(this.useTypeOf&&typeof _1=="number"){return!isNaN(_1)&&_1!=Number.POSITIVE_INFINITY&&_1!=Number.NEGATIVE_INFINITY}
if(_1.constructor&&_1.constructor.$k!=null){if(_1.constructor.$k!=5)return false}else{if(typeof _1!="number")return false}
return!isNaN(_1)&&_1!=Number.POSITIVE_INFINITY&&_1!=Number.NEGATIVE_INFINITY},isc.A.SpecialNumber=function isc_isA_SpecialNumber(_1){if(_1==null)return false;if(_1.constructor&&_1.constructor.$k!=null){if(_1.constructor.$k!=5)return false}else{if(typeof _1!="number")return false}
return(isNaN(_1)||_1==Number.POSITIVE_INFINITY||_1==Number.NEGATIVE_INFINITY)},isc.A.Boolean=function isc_isA_Boolean(_1){if(_1==null)return false;if(_1.constructor&&_1.constructor.$k!=null){return _1.constructor.$k==6}
return typeof _1=="boolean"},isc.A.Date=function isc_isA_Date(_1){if(_1==null)return false;if(_1.constructor&&_1.constructor.$k!=null){return _1.constructor.$k==3}
return(""+_1.constructor)==(""+Date)&&_1.getDate&&isc.isA.Number(_1.getDate())},isc.A.RegularExpression=function isc_isA_RegularExpression(_1){if(_1==null)return false;if(_1.constructor&&_1.constructor.$k!=null){return _1.constructor.$k==7}
return(""+_1.constructor)==(""+RegExp)},isc.A.XMLNode=function isc_isA_XMLNode(_1){if(_1==null)return false;if(isc.Browser.isIE){return _1.specified!=null&&_1.parsed!=null&&_1.nodeType!=null&&_1.hasChildNodes!=null}
var _2=_1.ownerDocument;if(_2==null)return false;return _2.contentType==this.$bm},isc.A.AlphaChar=function isc_isA_AlphaChar(_1){var _2=_1.charCodeAt(0);return((_2>=65&&_2<=90)||(_2>=97&&_2<=122))},isc.A.NumChar=function isc_isA_NumChar(_1){var _2=_1.charCodeAt(0)
return(_2>=48&&_2<=57)},isc.A.AlphaNumericChar=function isc_isA_AlphaNumericChar(_1){return(isc.isA.AlphaChar(_1)||isc.isA.NumChar(_1))},isc.A.WhitespaceChar=function isc_isA_WhitespaceChar(_1){var _2=_1.charCodeAt(0)
return(_2>=0&&_2<=32)},isc.A.color=function isc_isA_color(_1){if(!isc.isA.String(_1))return false;if(!this.$bn){this.$bn=new RegExp("^(#([\\dA-F]{2}){3}|rgb\\((\\s*[\\d]{1,3}\\s*,\\s*){2}\\s*[\\d]{1,3}\\s*\\)|[a-z]+)$","i")}
return this.$bn.test(_1)},isc.A.ResultSet=function isc_isA_ResultSet(_1){return false},isc.A.ResultTree=function isc_isA_ResultTree(_1){return false},isc.A.SelectItem=function isc_isA_SelectItem(_1){if(!_1||!isc.isA.FormItem(_1))return false;var _2=_1.getClass();return(_2==isc.SelectItem||_2==isc.NativeSelectItem)},isc.A.SelectOtherItem=function isc_isA_SelectOtherItem(_1){if(!_1||!isc.isA.FormItem(_1))return false;var _2=_1.getClass();return((_2==isc.SelectItem||_2==isc.NativeSelectItem)&&_1.isSelectOther)},isc.A.Time=function isc_isA_Time(_1){return isc.isA.Date(_1)});isc.B._maxIndex=isc.C+24;if(Array.isArray){isc.A=isc.isA;isc.A.Array=Array.isArray}
isc.addGlobal("ClassFactory",{});isc.ClassFactory.Class="ClassFactory";isc.A=isc.isA;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.Instance=function isc_isA_Instance(_1){return(_1!=null&&_1.$76y!=null)},isc.A.ClassObject=function isc_isA_ClassObject(_1){return(_1!=null&&_1.$bp==true)},isc.A.Interface=function isc_isA_Interface(_1){return(_1!=null&&_1.$a5==true)},isc.A.InstancePrototype=function isc_isA_InstancePrototype(_1){return(isc.isAn.Instance(_1)&&_1.$76y==_1)});isc.B._maxIndex=isc.C+4;isc.isA.instanceMethodsAdded=true;isc.A=isc.ClassFactory;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$f="isc.";isc.A.$bq="Window";isc.A.$br="Selection";isc.A.$bs={};isc.A._reservedWords={toolbar:true,parent:true,window:true,top:true,opener:true,event:true};isc.A._$isc_OID_="isc_OID_";isc.A._$isc_="isc_";isc.A.$bv="_";isc.A.$bw=[];isc.A.$75m={};isc.A.reuseGlobalIDs=true;isc.A.globalIDClassPoolSize=1000;isc.A.$63v={};isc.A.$bx=0;isc.A._$isc_="isc_";isc.A.$by=[null,"_",null];isc.A.reuseDOMIDs=false;isc.A.DOMIDPoolSize=10000;isc.A.$63w=[];isc.A.$bz=["0","1","2","3","4","5","6","7","8","9","A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z"];isc.A.$b0=[];isc.A.$100p="initInterface";isc.A.$101h="destroyInterface";isc.A.$b1="a,b,c,d,e,f,g,h,i,j,k,l,m,n,o,p";isc.B.push(isc.A.defineClass=function isc_ClassFactory_defineClass(_1,_2,_3,_4){return this.$b2(_1,_2,_3,null,_4)},isc.A.overwriteClass=function isc_ClassFactory_overwriteClass(_1,_2,_3,_4){return this.$b2(_1,_2,_3,null,_4,true)},isc.A.defineInterface=function isc_ClassFactory_defineInterface(_1,_2){return this.$b2(_1,_2,null,true)},isc.A.defineRootClass=function isc_ClassFactory_defineRootClass(_1){return this.$b3(_1,null)},isc.A.$b2=function isc_ClassFactory__defineNonRootClass(_1,_2,_3,_4,_5,_6){_2=(_2||isc.ClassFactory.defaultSuperClass);if(!_2){isc.Log.logWarn("isc.ClassFactory.defineClass("+_1+") called with null superClass and no ClassFactory.defaultRootClass is defined.");return null}
isc.overridingFrameworkClass=isc.isA.ClassObject(_2)&&_2.isFrameworkClass;return this.$b3(_1,_2,_3,_4,_5,_6)},isc.A.$b3=function isc_ClassFactory__defineClass(_1,_2,_3,_4,_5,_6){_2=this.getClass(_2);var _7=(isc.definingFramework==true||isc.overridingFrameworkClass==true);if(!_7&&_2&&_2.$1226&&!isc.isVisualBuilderSDK){var _8=!!(isc.ClassFactory.defaultSuperClass);var _9="The framework class "+_2.getClassName()+" is only available for subclassing if isc.licenseType is \"Enterprise\" or \"Eval\".  "+(_8?"Continuing with the default super class.":"Returning null as there is no ClassFactory.defaultSuperClass specified.");isc.logWarn(_9);if(!_2.$1228){_2.$1228=true;isc.warn(_9)}
if(_8){_2=this.getClass(isc.ClassFactory.defaultSuperClass)}else{return null}}
var _10=(isc.Browser.isMoz||isc.Browser.isChrome)&&(_1==this.$bq||_1==this.$br)||(isc.Browser.isChrome||isc.Browser.isSafari||isc.Browser.isFirefox)&&_1=="DataView";var _11,_12,_13=(isc.$a&&!_5);_11=isc[_1];if(_11!=null)_12=true
else if(_13&&!_10){_11=window[_1]}
if(_11!=null&&_1!="IButton"&&_6!=true)
{var _14="New Class ID: '"+_1+"' collides with ID of existing "+(isc.isA&&isc.isA.Function(isc.isA.Class)&&isc.isA.Class(_11)?"Class object '":"object with value '")+_11+"'.  Existing object will be replaced.";if(!_12)_14+="\nThis conflict would be avoided by disabling ISC Simple Names mode.  See documentation for further information."
if(window.isc.Log)isc.Log.logWarn(_14)}
var _15=(_2?new _2.$b4.$b5():{});var _16=this.$b6(_2);_15.$b5=this.$b7(_15);_16.Class=_1;_16.$bp=true;if(_7)_16.isFrameworkClass=true;else _16.isFrameworkClass=false;if(!_16.isFrameworkClass){var _17=_2;while(_17&&!_17.isFrameworkClass){_17=_17.getSuperClass()}
if(_17)_16.$75y=_17.Class}
if(!_16.$75y)_16.$75y=_16.Class;_16.$a5=_15.$a5=!!_4;_16.$b8=_2;_16.$b4=_15;_15.Class=_1;_15.$b9=_16;_15.$76y=_15;_15.isFrameworkClass=_16.isFrameworkClass;_15.$75y=_16.$75y;isc[_1]=_16;if(_13)window[_1]=_16;this.classList[this.classList.length]=_1
if(!(isc.isA.$58k[_1]&&isc.isA[_1])){isc.isA[_1]=this.makeIsAFunc(_1)}
if(_3!=null){if(!isc.isAn.Array(_3))_3=[_3];for(var i=0;i<_3.length;i++){this.mixInInterface(_1,_3[i])}}
return _16},isc.A.makeIsAFunc=function isc_ClassFactory_makeIsAFunc(_1){if(this.isFirefox2==null){this.isFirefox2=(isc.Browser.isFirefox&&isc.Browser.geckoVersion>=20061010)}
if(this.isFirefox2){return function(_2){if(_2==null||_2.isA==null||_2.isA==isc.isA)return false;return _2.isA(_1)}}else{return function(_2){if(_2==null||_2.isA==null||_2.isA==isc.isA){return false}
return _2.isA(isc[_1])}}},isc.A.$b6=function isc_ClassFactory__makeSubClass(_1){if(!_1)return{};var _2=_1.$b8,_3=_1.$ca;if(!
(_3&&(_2==null||_3!==_2.$ca)))
{_3=_1.$ca=this.$b7(_1)}
return new _3()},isc.A.getClass=function isc_ClassFactory_getClass(_1){if(isc.isA.String(_1)){var _2=isc[_1];if(_2){if(isc.isA.ClassObject(_2))return _2;if(isc.isA.SGWTFactoryObject&&isc.isA.SGWTFactoryObject(_2))return _2}}
if(isc.isA.ClassObject(_1))return _1;if(isc.isA.SGWTFactoryObject&&isc.isA.SGWTFactoryObject(_1))return _1;if(isc.isAn.Instance(_1))return _1.$b9;return null},isc.A.newInstance=function isc_ClassFactory_newInstance(_1,_2,_3,_4,_5,_6){var _7=this.getClass(_1);if(_7==null&&isc.isAn.Object(_1)){var _8;for(var i=0;i<arguments.length;i++){var _10=arguments[i];if(_10!=null&&_10._constructor!=null)
{_8=_10._constructor}}
_6=_5;_5=_4;_4=_3;_3=_2;_2=_1;_1=_8;if(isc.isA.String(_2.constructor)){if(_1==null)_1=_2.constructor;isc.Log.logWarn("ClassFactory.newInstance() passed an object with illegal 'constructor' property - removing this property from the final object. To avoid seeing this message in the future, specify the object's class using '_constructor'.","ClassFactory");_2.constructor=null}
_7=this.getClass(_8)}
if(_7==null){isc.Log.logWarn("newInstance("+_1+"): class not found","ClassFactory");if(isc.isA.String(_1)&&_1.contains(".")){isc.Log.logWarn("Did you make the SmartGWT class reflectable? See http://www.smartclient.com/smartgwt/javadoc/com/smartgwt/client/docs/Reflection.html","ClassFactory")}
return null}
return _7.newInstance(_2,_3,_4,_5,_6)},isc.A.$b7=function isc_ClassFactory__getConstructorFunction(_1){var _2;if(isc.Browser.isSafari){_2=function(){}}else{_2=new Function()}
_2.prototype=_1;return _2},isc.A.addGlobalID=function isc_ClassFactory_addGlobalID(_1,_2,_3){_1.ID=_2||_1.ID;var _4=this.getWindow();if(isc.keepGlobals&&_1.ID!=null){if(!isc.keepGlobals.contains(_1.ID)&&!(isc.DataSource&&isc.isA.DataSource(_1)))
{var _5=_1.ID;_1.ID=null;isc.globalsSnapshot[_5]=_4[_5];_4[_5]=_1;if(_1._autoAssignedID)isc.autoAssignedTempGlobals[_5]=_1.Class}}
if(_1.ID==null){_1.ID=this.getNextGlobalID(_1);_1._autoAssignedID=true}
var _6,_7;if(_4[_1.ID]!=null){var _8=isc.isA.Canvas(_4[_1.ID]);if(!_3){isc.Log.logWarn("ClassFactory.addGlobalID: ID:'"+_1.ID+"' for object '"+_1+"' collides with ID of existing object '"+_4[_1.ID]+"'."+(_8?" The pre-existing widget will be destroyed.":" The global reference to this object will be replaced"))}
if(_8)_4[_1.ID].destroy();if(!_8){if(this._reservedWords[_2])_6=true;else _7=true}}
if(!_6){if(_7){try{_4[_1.ID]=_1}catch(e){_6=true}
if(_4[_1.ID]!=_1){_6=true}}else{_4[_1.ID]=_1}}
if(isc.globalsSnapshot){if(isc.isAn.Array(isc.globalsSnapshot)){isc.globalsSnapshot.add(_1.ID)}else{isc.globalsSnapshot[_1.ID]=_4[_1.ID]}}
if(_6){var _9=this.getNextGlobalID(_1);isc.logWarn("ClassFactory.addGlobalID: ID specified as:"+_1.ID+". This is a reserved word in Javascript or a native property of the browser window object and can not be used as an ID. Setting ID to "+_9+" instead.");_1.ID=_9;_1._autoAssignedID=true;_4[_1.ID]=_1}},isc.A.getNextGlobalID=function isc_ClassFactory_getNextGlobalID(_1){var _2=_1!=null&&isc.isA.String(_1.Class)?_1.Class:null;return this.getNextGlobalIDForClass(_2)},isc.A.getNextGlobalIDForClass=function isc_ClassFactory_getNextGlobalIDForClass(_1){if(_1){var _2=this.$63v[_1]
if(_2&&_2.length>0){var _3=_2[_2.length-1];_2.length=_2.length-1;return _3}
var _4;if(this.$75m[_1]==null)this.$75m[_1]=0;_4=this.$75m[_1]++;var _5=this.$bw;_5[0]=this._$isc_;_5[1]=_1;_5[2]=this.$bv;isc.$bk(_5,_4,3,5);var _6=_5.join(isc.emptyString);return _6}
return this._$isc_OID_+this.$cb++},isc.A.dereferenceGlobalID=function isc_ClassFactory_dereferenceGlobalID(_1){if(window[_1.ID]==_1){window[_1.ID]=null;if(_1.Class!=null&&_1._autoAssignedID){this.releaseGlobalID(_1.Class,_1.ID)}}},isc.A.releaseGlobalID=function isc_ClassFactory_releaseGlobalID(_1,_2){if(!this.reuseGlobalIDs)return;var _3=this.$63v[_1];if(!_3)this.$63v[_1]=[_2];else if(_3.length<=this.globalIDClassPoolSize){if(!_3.contains(_2))_3[_3.length]=_2}},isc.A.releaseDOMID=function isc_ClassFactory_releaseDOMID(_1){if(!this.reuseDOMIDs||this.$63w.length>this.DOMIDPoolSize)return;this.$63w[this.$63w.length]=_1},isc.A.getDOMID=function isc_ClassFactory_getDOMID(_1,_2){if(!isc.$e||!_1||!_2){var _3=this.$63w.length
if(_3>0){var _1=this.$63w[_3-1];this.$63w.length=_3-1;return _1}
var _4=this.$bx++;return this.$cc(_4,this._$isc_)}
this.$by[0]=_1;this.$by[2]=_2;return this.$by.join(isc.emptyString)},isc.A.$cc=function isc_ClassFactory__convertToBase36(_1,_2){var _3=this.$bz,_4=this.$b0;_4.length=0;if(_2)_4[0]=_2;var _5=3;if(_1>46655){while(Math.pow(36,_5)<=_1)_5+=1}
while(_1>=36){var _6=_1%36;_4[_5-(_2?0:1)]=_3[_6];_5-=1;_1=Math.floor(_1/36)}
_4[_5-(_2?0:1)]=_3[_1];return _4.join(isc.emptyString)},isc.A.mixInInterface=function isc_ClassFactory_mixInInterface(_1,_2){var _3=this.getClass(_2),_4=this.getClass(_1);if(!_3||!_4)return null;if(!_3.$a5){isc.Log.logWarn("ClassFactory.mixInInterface asked to mixin a class which was not declared as an Interface: "+_2+" onto "+_1);return}
if(!_4.$cd)_4.$cd=[];else _4.$cd=_4.$cd.duplicate();while(_3){this.$ce(_3,_4,true);this.$ce(_3,_4);_4.$cd[_4.$cd.length]=_2;_3=_3.getSuperClass();if(_3&&!_3.$a5)break}},isc.A.$ce=function isc_ClassFactory__mixInProperties(_1,_2,_3){var _4,_5=_2;if(_3){_4=isc.$a3[_1.Class]}else{_4=isc.$a2[_1.Class];_1=_1.getPrototype();_2=_2.getPrototype()}
if(_4==null)return;for(var i=0;i<_4.length;i++){var _7=_4[i];if(_2[_7]!=null)continue;var _8=_1[_7];if(isc.isA.String(_8)&&_8==this.TARGET_IMPLEMENTS){var _9=(_3?"Class":"Instance")+" method "+_7+" of Interface "+_1.Class+" must be implemented by class "+_2.Class;_2[_7]=function(){this.logError(_9)}}else if(_7==this.$100p&&!_3){if(_5.$100q==null)_5.$100q=[];_5.$100q[_5.$100q.length]=_8}else if(_7==this.$101h&&!_3){if(_5.$101i==null)_5.$101i=[];_5.$101i[_5.$101i.length]=_8}else{_2[_7]=_8}}},isc.A.makePassthroughMethods=function isc_ClassFactory_makePassthroughMethods(_1,_2,_3,_4,_5){if(!_2)_2="parentElement";var _6;if(!_3){_6=this.$cf;if(_6==null){_6=this.$cf=["return this.",,".",,"("+this.$b1+")"]}}else{_6=this.$89q;if(_6==null){_6=this.$89q=["if(this.",,"==null){\n",,"return}\n",,"return this.",,".",,"("+this.$b1+")"]}}
var _7={};for(var i=0;i<_1.length;i++){var _9=_1[i];if(_3){_6[1]=_2;if(_4!=null){var _10={methodName:_9,propName:_2};var _11=_4.evalDynamicString(this,_10);_6[3]="isc.logWarn(\""+_11+"\");"}
if(_5!=null){_6[5]="this."+_2+"."+_5+"=this."+_5+";\n"}
_6[7]=_2;_6[9]=_9}else{_6[1]=_2;_6[3]=_9}
_7[_9]=isc.$aq(this.$b1,_6.join(isc.emptyString))}
return _7},isc.A.writePassthroughFunctions=function isc_ClassFactory_writePassthroughFunctions(_1,_2,_3){var _4=this.makePassthroughMethods(_3,_2);_1.addMethods(_4)});isc.B._maxIndex=isc.C+23;isc.A=isc.ClassFactory;isc.A.TARGET_IMPLEMENTS="TARGET_IMPLEMENTS";isc.A.$cb=0;isc.A.classList=[];isc.defineClass=function(_1,_2,_3,_4){return isc.ClassFactory.defineClass(_1,_2,_3,_4)}
isc.overwriteClass=function(_1,_2,_3,_4){return isc.ClassFactory.overwriteClass(_1,_2,_3,_4)}
isc.defineInterface=function(_1,_2){return isc.ClassFactory.defineInterface(_1,_2)}
isc.defer=function(_1){var _2=isc.ClassFactory.getClass(isc.ClassFactory.classList.last()),_3=_2.$cg;isc.Log.logDebug("deferred code being placed on class: "+_2);if(!_3)_2.$cg=[_1];else _3.add(_1)}
if(!isc.Browser.isSafari){isc.$ch=window;isc.$ci=window.document}
if(window.isc_enableCrossWindowCallbacks&&isc.Browser.isIE){isc.enableCrossWindowCallbacks=true;Object.$ch=window}
isc.ClassFactory.defineRootClass('Class');isc.ClassFactory.defaultSuperClass=isc.Class;isc.A=isc.Class;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.addClassMethods=function isc_Class_addClassMethods(){for(var i=0;i<arguments.length;i++)
isc.addMethods(this,arguments[i])});isc.B._maxIndex=isc.C+1;isc.A=isc.Class;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$cj={};isc.A.dontDup={StringBuffer:true,Action:true,MathFunction:true,JSONEncoder:true};isc.A.$1360=new RegExp("(\\$?)\\$(class|method)","g");isc.A.$105h=/[\u0000\u00ad\u0600-\u0604\u070f\u17b4\u17b5\u200c-\u200f\u2028-\u202f\u2060-\u206f\ufeff\ufff0-\uffff]/g;isc.A.useHiddenFrameInJSONParseFunction=true;isc.A.evalFrameResetInterval=100;isc.A.evalFrameDefaults={useHtmlfile:false,doEval:function(_1,_2){this.evalCount++;return this.getHandle().doEval(_1,_2)}};isc.A.evalFrameHTML=["<html><body><script>var nativeObjTypes = ['Array', 'String', 'Date'];","for (var i = 0; i < nativeObjTypes.length; i++) {var proto = window[nativeObjTypes[i]].prototype,sourceProto = window.parent[nativeObjTypes[i]].prototype;for (var attr in sourceProto) {proto[attr] = sourceProto[attr];}}window.isc = window.parent.isc;function doEval(exp, args) {try{if (args) {with (args) { return eval(exp);}} else {return eval(exp);}} catch (e) {window.parent.isc.Log.logInfo('Attempt to evaluate in eval-frame threw error:' + e + '. Attempting eval in main window.','iframeEval');if (args) {with (args) { return window.parent.eval(exp);}} else {return window.parent.eval(exp);}}}</script></body></html>"];isc.A.$ck={};isc.A.fireOnPauseDelay=200;isc.A.$cl="$cm";isc.A.$cn={};isc.A.$co={};isc.A.useFastEvalWithVars=isc.Browser.isMoz&&isc.Browser.geckoVersion>=20061010;isc.A.$cp="ID";isc.A.getWindow=(isc.Browser.isSafari?function(){return window}:function(){return this.ns.$ch});isc.A.getDocument=(isc.Browser.isSafari?function(){return window.document}:function(){return this.ns.$ci});isc.A.$123z={};isc.B.push(isc.A.create=function isc_c_Class_create(_1,_2,_3,_4,_5,_6,_7,_8,_9,_10,_11,_12,_13){var _14=this.createRaw();if(_14!=null){_14=_14.completeCreation(_1,_2,_3,_4,_5,_6,_7,_8,_9,_10,_11,_12,_13)}
return _14},isc.A.createRaw=function isc_c_Class_createRaw(){if(this.$1226&&!isc.isVisualBuilderSDK){var _1="Attempt to create "+this.getClassName()+".  This class requires the Dashboards & Tools framework which is only included with Enterprise licenses.";isc.logWarn(_1);if(!this.$1228){this.$1228=true;isc.warn(_1)}
return null}
if(!this.initialized())this.init();var _2=new this.$b4.$b5();_2.ns=this.ns;return _2},isc.A.init=function isc_c_Class_init(){var _1=this.getSuperClass();if(_1&&!_1.initialized())_1.init();var _2=this.$cg;if(_2){this.$cg=null;_2.map(function(_3){isc.eval(_3)})}
if(this.autoDupMethods){isc.Class.duplicateMethods(this,this.autoDupMethods)}
this.$cj[this.Class]=true},isc.A.modifyFrameworkStart=function isc_c_Class_modifyFrameworkStart(){isc.definingFramework=true},isc.A.modifyFrameworkDone=function isc_c_Class_modifyFrameworkDone(){isc.definingFramework=false},isc.A.duplicateMethods=function isc_c_Class_duplicateMethods(_1,_2){if(_1.Class&&this.dontDup[_1.Class])return;for(var i=0;i<_2.length;i++){var _4=_2[i];this.duplicateMethod(_4,_1)}},isc.A.duplicateMethod=function(methodName,target){if(!target)target=this;var method=target[methodName];if(method==null)return;if(method.$761){while(method.$761)method=method.$761}
var dup;if(method.toSource==null){dup=eval("dup = "+method.toString())}else{dup=eval(method.toSource())}
if(!method.$dx)isc.Func.getName(method,true);dup.$dx=method.$dx+"[d]";dup.$761=method;target[methodName]=dup;return dup},isc.A.$1361=function isc_c_Class__createUnsupportedMethodImpl(_1,_2){var _3={};var _4=function(){var _5=this.getClassName();if(_3[_5])return;var _6=_1.replace(this.getClass().$1360,function(_8,_9,_10,_11,_1){if(_9==="$")return"$"+_10;else if(_10==="class")return _5;else if(_10==="method")return _2});this.logWarn(_6);_3[_5]=true};_4.$1362=true;var _7=this.$b4[_2];if(isc.isA.Function(_7)){_4.$123y=isc.Func.getArgString(_7)}
return _4},isc.A.markUnsupportedMethods=function isc_c_Class_markUnsupportedMethods(_1,_2){if(_1==null)_1="$class does not support the $method() method.";for(var i=0;i<_2.length;++i){var _4=_2[i];this.$b4[_4]=this.$1361(_1,_4)}},isc.A.isMethodSupported=function isc_c_Class_isMethodSupported(_1){var _2=this.$b4[_1];return _2!=null&&!_2.$1362},isc.A.isMethodUnsupported=function isc_c_Class_isMethodUnsupported(_1){return!this.isMethodSupported(_1)},isc.A.initialized=function isc_c_Class_initialized(){return this.$cj[this.Class]},isc.A.getClassName=function isc_c_Class_getClassName(){return this.Class},isc.A.getScClassName=function isc_c_Class_getScClassName(){return this.isFrameworkClass?this.Class:this.$75y},isc.A.getSuperClass=function isc_c_Class_getSuperClass(){return this.$b8},isc.A.getPrototype=function isc_c_Class_getPrototype(){return this.$b4},isc.A.addMethods=function isc_c_Class_addMethods(){if(this.$a5){this.logWarn("Use addInterfaceMethods() to add methods to interface "+this)}
for(var i=0;i<arguments.length;i++)
isc.addMethods(this.$b4,arguments[i]);return this.$b4},isc.A.addInterfaceMethods=function isc_c_Class_addInterfaceMethods(){for(var i=0;i<arguments.length;i++)
isc.addMethods(this.$b4,arguments[i])},isc.A.addInterfaceProperties=function isc_c_Class_addInterfaceProperties(){isc.addPropertyList(this.$b4,arguments)},isc.A.registerStringMethods=function isc_c_Class_registerStringMethods(_1,_2){var _3=this._stringMethodRegistry;if(!this.isOverridden("_stringMethodRegistry")){var _4={},_5=_4.$cq=(_3.$cq?_3.$cq.duplicate():[]);for(var i=0;i<_5.length;i++){_4[_5[i]]=_3[_5[i]]}
this._stringMethodRegistry=_3=_4}
if(!isc.isA.String(_1)){var _7=_1;if(!isc.isAn.Object(_7)){this.logWarn("registerStringMethods() called with a bad argument: "+_1);return false}
for(var _1 in _7){_3[_1]=_7[_1]
_3.$cq.add(_1)}}else{if(_2==null)_2=null;_3[_1]=_2;_3.$cq.add(_1)}
return true},isc.A.registerDupProperties=function isc_c_Class_registerDupProperties(_1,_2){if(this.$769==null||this.$769.$bd!=this.getClassName()){if(this.$769!=null){var _3=this.$769;this.$769=this.$769.duplicate();if(_3.$77a!=null){this.$769.$77a=isc.shallowClone(_3.$77a)}}else{this.$769=[]}
this.$769.$bd=this.getClassName()}
if(!this.$769.contains(_1)){this.$769.add(_1)}
if(_2!=null){var _4=this.$769.$77a||{};_4[_1]=_2;this.$769.$77a=_4}},isc.A.isDupProperty=function isc_c_Class_isDupProperty(_1){return this.$769!=null&&this.$769.contains(_1)},isc.A.cloneDupPropertyValue=function isc_c_Class_cloneDupPropertyValue(_1,_2){if(isc.isA.Array(_2)){var _3=[];for(var i=0;i<_2.length;i++){_3[i]=this.cloneDupPropertyValue(_1,_2[i])}
return _3}
if(isc.Canvas&&isc.isA.Canvas(_2)){this.logWarn("Default value for property '"+_1+"' is set to a live Canvas (with ID '"+_2.getID()+"') at the Class or AutoChild-defaults level. SmartClient cannot clone a live widget, so each instance of this class may end up pointing to the same live component. To avoid unpredictable behavior and suppress this warning, use the AutoChild subsystem to set up re-usable default properties for sub-components.");return _2}
var _5=isc.shallowClone(_2);var _6=this.$769;if(_6.$77a!=null&&_6.$77a[_1]!=null&&_5!=null)
{for(var i=0;i<_6.$77a[_1].length;i++){var _7=_6.$77a[_1][i];if(_5[_7]!=null){_5[_7]=isc.shallowClone(_5[_7])}}}
return _5},isc.A.evaluate=function isc_c_Class_evaluate(_1,_2,_3,_4,_5,_6){if(_5){return this.parseStrictJSON(_1,_6)}
if(!isc.$611)isc.$611=0;isc.$611++;var _7;if(_4&&isc.Browser.isIE&&!_3&&isc.Page.isLoaded()){_7=this.evalInIFrame(_1,_2)}else{if(_2){with(_2){if(_3)_7=window.eval(_1)
else _7=eval(_1)}}else{if(_3)_7=window.eval(_1)
else _7=eval(_1)}}
if(isc.$611!=null)isc.$611--;if(isc.$611==0)delete isc.$611;return _7},isc.A.parseStrictJSON=function isc_c_Class_parseStrictJSON(_1,_2,_3,_4){var _5;if(_3||_4||window.JSON==null||window.JSON.parse==null)
{_5=this.getJSONParseFunc()}else{_5=window.JSON.parse}
return _5(_1,_2,_4)},isc.A.getJSONParseFunc=function isc_c_Class_getJSONParseFunc(){if(this.$105i)return this.$105i;this.logInfo("No native JSON.parse() available in this browser. Creating strict JSON parsing function.","jsonEval");var _1=this,_2=this.$105h;this.$105y=function(_12,_13,_14,_15,_9){var k,v,_5=_12[_13];if(_5&&typeof _5==='object'&&_5!=window&&_5!=window.isc&&!isc.isA.Class(_5)&&!isc.isAn.Instance(_5))
{var _6=false;var _7=isc.JSONEncoder.$zl(_15,_5);if(_7!=null&&_9.contains(_7)){var _8=_9.substring(_7.length,_7.length+1);if(_8=="."||_8=="["||_8=="]"){_6=true}}
if(!_6){isc.JSONEncoder.$zm(_15,_5,_9);for(k in _5){if(Object.prototype.hasOwnProperty.call(_5,k)){var _9=isc.JSONEncoder.$zp(_9,k);v=_1.$105y(_5,k,_14,_15,_9);if(v!==undefined){_5[k]=v}else{delete _5[k]}}}}}
return _14.call(_12,_13,_5)};this.$105i=function(_12,_13,_14){var j;var _11=false;if(_14==null)_14=isc.Class.$105j;if(!_14){_12=String(_12);_2.lastIndex=0;if(_2.test(_12)){_12=_12.replace(_2,function(_15){return'\\u'+('0000'+_15.charCodeAt(0).toString(16)).slice(-4)})}
if(!(/^[\],:{}\s]*$/.test(_12.replace(/\\(?:["\\\/bfnrt]|u[0-9a-fA-F]{4})/g,'@').replace(/"[^"\\\n\r]*"|true|false|null|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?/g,']').replace(/(?:^|:|,)(?:\s*\[)+/g,''))))
{_11=true}}
if(_11){throw new SyntaxError('JSON.parse error')}
j=isc.eval('('+_12+')',!_14&&isc.Class.useHiddenFrameInJSONParseFunction);return typeof _13==='function'?_1.$105y({'':j},'',_13,{obj:[],path:[]},""):j}
return this.$105i},isc.A.evalInIFrame=function isc_c_Class_evalInIFrame(_1,_2){if(this.logIsDebugEnabled("iframeEval")){this.logDebug("Using iframe for evaluation:\n"+_1,"iframeEval")}
if(this.evalFrame==null||this.$104k!=document.domain){this.makeEvalFrame()}
if(this.evalFrame.evalCount>this.evalFrameResetInterval||this.evalFrame.frame==null){this.resetEvalFrame()}
if(this.evalFrame.frame==null)this.logInfo("Temporarily unable to evaluate in a HiddenFrame for domain "+document.domain+"; falling back to a simpler evaluate that may leak memory");return this.evalFrame.frame==null?this.evaluate(_1,_2):this.evalFrame.doEval(_1,_2)},isc.A.makeEvalFrame=function isc_c_Class_makeEvalFrame(){this.evalFrame=isc.HiddenFrame.create(this.evalFrameDefaults);this.$104k=document.domain;this.evalFrame.draw();if(document.domain==location.hostname&&this.evalFrame.getFrameDocument()==null)
{var _1=isc.addProperties({location:isc.Page.getURL("[HELPERS]empty.html")},this.evalFrameDefaults);this.evalFrame=isc.HiddenFrame.create(_1);this.evalFrame.draw()}},isc.A.resetEvalFrame=function isc_c_Class_resetEvalFrame(){if(this.logIsInfoEnabled("iframeEval")){this.logInfo("Using iframe for evaluation - resetting iframe.","iframeEval")}
this.evalFrame.evalCount=0;var _1=this.evalFrame.frame=this.evalFrame.getFrameDocument();if(_1!=null){_1.open();var _2=this.evalFrame.$104k?"document.domain = '"+this.evalFrame.$104k+"';":"";_1.write(this.evalFrameHTML[0]+_2+this.evalFrameHTML[1]);_1.close()}else{this.evalFrame.$104k=document.domain}},isc.A.addClassProperties=function isc_c_Class_addClassProperties(){isc.addPropertyList(this,arguments);return this},isc.A.markAsFrameworkClass=function isc_c_Class_markAsFrameworkClass(){this.isFrameworkClass=true;this.$b4.isFrameworkClass=true;this.$75y=this.Class;this.$b4.$75y=this.Class},isc.A.addProperties=function isc_c_Class_addProperties(){if(this.$a5){this.logWarn("Use addInterfaceProperties() to add methods to interface "+this)}
isc.addPropertyList(this.$b4,arguments);return this},isc.A.addPropertyList=function isc_c_Class_addPropertyList(_1){isc.addPropertyList(this.$b4,_1);return this},isc.A.changeDefaults=function isc_c_Class_changeDefaults(_1,_2){var _3=this.$cr(_1),_4=false;var _5=this.getSuperClass();if(_5){var _6=_5.$cr(_1);if(_6!=null&&_6==_3){_3=isc.addProperties({},_3);_4=true}}
if(_3==null){_3=_2||{};_4=true}else{isc.addProperties(_3,_2)}
if(_4){var _7={};_7[_1]=_3;this.addProperties(_7)}},isc.A.$cr=function isc_c_Class__getDefaults(_1){var _2=this.$ck[this.Class],_3=this.getInstanceProperty(_1)||(_2?_2[_1]:null);return _3},isc.A.replaceDefaults=function isc_c_Class_replaceDefaults(_1,_2){this.changeDefaults(_1,_2)},isc.A.setProperties=function isc_c_Class_setProperties(){var _1;if(arguments.length==1){_1=arguments[0]}else{_1={};for(var i=0;i<arguments.length;i++){isc.addProperties(_1,arguments[i])}}
this.$b4.setProperties(_1)},isc.A.isOverridden=function isc_c_Class_isOverridden(_1){return(!(this[_1]===this.$b8[_1]))},isc.A.isA=function isc_c_Class_isA(_1){if(_1==null)return false;if(!isc.isA.String(_1)){_1=_1.Class;if(!isc.isA.String(_1))return false}
if(isc.startsWith(_1,isc.ClassFactory.$f)){_1=_1.substring(4)}
var _2=this;while(_2){if(_2.Class==_1)return true;_2=_2.$b8}
if(this.$cd){for(var i=0;i<this.$cd.length;i++){var _4=isc.ClassFactory.getClass(this.$cd[i]);while(_4){if(_4.Class==_1)return true;_4=_4.$b8}}}
return false},isc.A.$cs=function isc_c_Class__getNextImplementingSuper(_1,_2,_3,_4){var _5;for(;;){if(_2==null){_5=null;break}
var _5=isc.Class.$ct(_3,_2);if(_5==null)break;if(_1!=_5){break}
if(_4){_2=_2.$b8}else{_2=_2.$b9.$b8.$b4}}
if(_5!=null)return _2;return null},isc.A.Super=function isc_c_Class_Super(_1,_2,_3){if(isc.$cv)arguments.$cw=this;if(this.autoDupMethods&&isc.isAn.Instance(this)){this.duplicateMethod("Super")}
if(_2!=null&&(_2.length==null||isc.isA.String(_2)))_2=[_2];if(_2==null)_2=isc.$ac;this.$cx=_3||_2;this.$85s=_2;this.$cy=isc.Class.$cz(_1,this);this.$c0=true;return this.invokeSuper(null,_1)},isc.A.$116f=function isc_c_Class__delayedSuper(_1,_2,_3,_4,_5){if(_2!=null&&(_2.length==null||isc.isA.String(_2)))_2=[_2];if(_2==null)_2=isc.$ac;_3=_3||_2;var _6=_2;var _7=isc.Class.$cz(_1,this);var _8=this;return isc.Timer.setTimeout(function(){if(isc.$cv)arguments.$cw=_8;if(_8.autoDupMethods&&isc.isAn.Instance(_8)){_8.duplicateMethod("Super")}
_8.$cx=_3;_8.$85s=_6;_8.$cy=_7;_8.$c0=true;_8.invokeSuper(null,_1)},_4,_5)},isc.A.$ct=function isc_c_Class__getOriginalMethod(_1,_2){var _3=_2[_1];while(_3!=null&&_3.$c1){_3=_2[_3.$c1]}
if(_3!=null&&_3.$761!=null)_3=_3.$761;return _3},isc.A.invokeSuper=function isc_c_Class_invokeSuper(_1,_2,_3,_4,_5,_6,_7,_8,_9,_10,_11,_12,_13){if(this.autoDupMethods&&isc.isAn.Instance(this)){this.duplicateMethod("invokeSuper")}
var _14=this.$bp;var _15=this.$c0;this.$c0=null;var _16=this.$cx;this.$cx=null;var _17=this.$85s;this.$85s=null;var _18;if(_15){_18=this.$cy;this.$cy==null}else{if(_1!=null){_18=_14?_1:_1.$b4}}
var _19,_20;if(_18==null){_19=isc.Class.$ct(_2,this);_20=_14?this:this.getPrototype()}else{_19=isc.Class.$ct(_2,_18);if(_14){_20=_18.$b8}else{_20=_18.$b9.$b8.$b4}
if(_16&&_16.callee!=null&&_16.callee!=_19)
{_19=isc.Class.$ct(_2,this);_20=_14?this:this.getPrototype()}}
_20=isc.Class.$cs(_19,_20,_2,_14);if(_20==null){if(isc.Log)isc.Log.logWarn("Call to Super for method: "+_2+" failed on: "+this+": couldn't find a superclass implementation of : "+(_18?_18.Class:this.Class)+"."+_2+this.getStackTrace());return null}
var _21=_20[_2];isc.Class.$c2(_2,_20,this);var _22;if(_15){if(_17!=null||_16!=null){_22=_21.apply(this,_17==null?_16:_17)}else{_22=_21.apply(this)}}else{_22=_21.call(this,_3,_4,_5,_6,_7,_8,_9,_10,_11,_12)}
isc.Class.$c3(_2,this);return _22},isc.A.$cz=function isc_c_Class__getLastProto(_1,_2){var _3=_2.$c4,_4=_3==null?null:_3[_1];if(isc.isAn.Array(_4))return _4.last();return _4},isc.A.$c3=function isc_c_Class__clearLastProto(_1,_2){var _3=_2.$c4,_4=_3[_1];if(_4==null){return}
if(!_4.$81d){_3[_1]=null}else{_4.length=Math.max(0,_4.length-1);if(_4.length==0)_3[_1]=null}},isc.A.$c2=function isc_c_Class__addProto(_1,_2,_3){var _4=_3.$c4=_3.$c4||{},_5=_4[_1];if(_5==null){_4[_1]=_2}else{if(isc.isAn.Array(_5))_5.add(_2);else{_4[_1]=[_5,_2];_4[_1].$81d=true}}},isc.A.map=function isc_c_Class_map(_1,_2,_3,_4,_5,_6,_7){if(_1==null)return _2;var _8=[];for(var i=0;i<_2.length;i++){_8.add(this[_1](_2[i],_3,_4,_5,_6,_7))}
return _8},isc.A.getInstanceProperty=function isc_c_Class_getInstanceProperty(_1){var _2=this.$b4[_1];return _2},isc.A.setInstanceProperty=function isc_c_Class_setInstanceProperty(_1,_2){this.$b4[_1]=_2},isc.A.getArgString=function isc_c_Class_getArgString(_1){var _2=this._stringMethodRegistry[_1];var _3;if(_2!==_3)return _2||isc.emptyString;var _4=this.getInstanceProperty(_1);if(_4==null)return"";return isc.Func.getArgString(_4)},isc.A.fireCallback=function isc_c_Class_fireCallback(_1,_2,_3,_4,_5){arguments.$cw=this;if(_1==null)return;var _6;if(_2==null)_2=_6;var _7=_1;if(isc.isA.String(_1)){if(_4!=null&&isc.isA.Function(_4[_1]))_7=_4[_1];else _7=this.$c5(_1,_2)}else if(isc.isAn.Object(_1)&&!isc.isA.Function(_1)){if(_1.caller!=null)_4=_1.caller;else if(_1.target!=null)_4=_1.target;if(_1.args)_3=_1.args;if(_1.argNames)_2=_1.argNames;if(_1.method)_7=_1.method;else if(_1.methodName&&_4!=null)_7=_4[_1.methodName];else if(_1.action)
_7=this.$c5(_1.action,_2)}
if(!isc.isA.Function(_7)){this.logWarn("fireCallback() unable to convert callback: "+this.echo(_1)+" to a function.  target: "+_4+", argNames: "+_2+", args: "+_3);return}
if(_4==null)_4=window;else if(_4.destroyed){if(this.logIsInfoEnabled("callbacks")){this.logInfo("aborting attempt to fire callback on destroyed target:"+_4+". Callback:"+isc.Log.echo(_1)+",\n stack:"+this.getStackTrace())}
return}
_7.$c6=true;if(_3==null)_3=[];if(isc.enableCrossWindowCallbacks&&isc.Browser.isIE){var _8=_4.constructor?_4.constructor.$ch:_4;if(_8&&_8!=window&&_8.isc){var _9=_8.Array.newInstance();for(var i=0;i<_3.length;i++)_9[i]=_3[i];_3=_9}}
var _11;if(!_5||isc.Log.supportsOnError){_11=_7.apply(_4,_3)}else{try{_11=_7.apply(_4,_3)}catch(e){isc.Log.$am(e);throw e;}}
return _11},isc.A.delayCall=function isc_c_Class_delayCall(_1,_2,_3,_4){if(_4==null)_4=this;if(_3==null)_3=0;return isc.Timer.setTimeout({target:_4,methodName:_1,args:_2},_3)},isc.A.$c5=function isc_c_Class__makeCallbackFunction(_1,_2){if(_2==null){var _3;_2=_3}
var _4=isc.$aq(_2,_1);_4.$c7=true;return _4},isc.A.fireOnPause=function isc_c_Class_fireOnPause(_1,_2,_3,_4,_5){if(!_1)return;if(!_3)_3=this.fireOnPauseDelay;return isc.Class.$134i(_1,_2,_3,_4,_5)},isc.A.$134i=function isc_c_Class__fireOnPause(_1,_2,_3,_4,_5){if(_5==null)_5=this.getClassName();if(!this.$cn[_1]){this.$cn[_1]={}}
this.$cn[_1][_5]={fireTime:_3,callback:_2,target:_4};var _6=isc.timeStamp(),_7=this.$c8?_6-this.$c8:null;this.$c8=_6;if(!this.$926&&_7&&this.$c9!=null&&_3>=(this.$c9-_7))
{return}
if(this.$da)isc.Timer.clearTimeout(this.$da);this.$da=this.delayCall(this.$cl,null,_3);this.$c9=_3},isc.A.$cm=function isc_c_Class__fireActionsOnPause(){this.$926=true;var _1;var _2=isc.timeStamp()-this.$c8,_1;for(var _3 in this.$cn){var _4=this.$cn[_3];var _5=isc.getKeys(_4);for(var i=0;i<_5.length;i++){var _7=_5[i];var _8=_4[_7];if(_8.fireTime<=_2){delete this.$cn[_3][_7];this.fireCallback(_8.callback,null,null,_8.target)}else{_8.fireTime-=_2;if(_1==null)_1=_8.fireTime;else _1=Math.min(_1,_8.fireTime)}}
if(isc.isAn.emptyObject(this.$cn[_3]))delete this.$cn[_3]}
if(_1!=null){this.$c9=_1;this.$c8=isc.timeStamp();this.delayCall(this.$cl,null,_1)}else{this.$c9=null;this.$c8=null}
this.$926=null},isc.A.evalWithVars=function isc_c_Class_evalWithVars(_1,_2,_3){if(!_3)_3=window;if(this.useFastEvalWithVars){return this.evaluate.call(_3,_1,_2)}
var _4="_1";while(_2&&isc.propertyDefined(_2,_4)){_4+="1"}
var _5=[_4];var _6=[_1];if(_2){for(var _7 in _2){_5.push(_7);_6.push(_2[_7])}}
var _8=isc.$aq(_5.join(","),"return eval("+_4+")");return _8.apply(_3,_6)},isc.A.evalWithCapture=function isc_c_Class_evalWithCapture(_1,_2,_3){var _4=isc.globalsSnapshot=[];this.evalWithVars(_1,_2,_3);isc.globalsSnapshot=null;return _4},isc.A.destroyGlobals=function isc_c_Class_destroyGlobals(_1){if(!isc.isAn.Array(_1))_1=[_1];for(var i=0;i<_1.length;i++){var _3=_1[i];if(window[_3]&&isc.isA.Function(window[_3].destroy))window[_3].destroy();else window[_3]=null}},isc.A.globalEvalWithCapture=function isc_c_Class_globalEvalWithCapture(_1,_2,_3,_4){if(_4==null)_4=true;this.$db=_3;this.$dc=_2;this.$dd();var _5;try{if(isc.Browser.isIE){if(window.execScript!=null){window.execScript(_1,"javascript")}else{window.eval(_1)}}else{isc.Class.evaluate(_1,null,true)}}catch(e){if(_4)isc.Log.$am(e,null,null,null,"Problem during global eval()");_5=e}
return this.$de(_5)},isc.A.$dd=function isc_c_Class__globalEvalWithCaptureStart(_1,_2){var _3,_1=this.$db;this.$df={};if(_1){for(var _4 in _1){var _5=window[_4];if(_5!==_3)this.$df[_4]=_5;window[_4]=_1[_4]}}
isc.autoAssignedTempGlobals={};isc.globalsSnapshot=isc.keepGlobals?{}:[]},isc.A.$de=function isc_c_Class__globalEvalWithCaptureEnd(_1,_2){if(_1!=null&&_2)isc.Log.$am(_1,null,null,null,"Problem during global eval()");var _3,_4=this.$db;if(_4){for(var _5 in _4){var _6=this.$df[_5];if(_6!==_3)window[_5]=this.$df[_5];else window[_5]=_3}}
var _7=this.$dc,_8=isc.globalsSnapshot,_9=isc.autoAssignedTempGlobals;isc.globalsSnapshot=this.$dc=this.$db=this.$df=window.$98f=isc.autoAssignedTempGlobals=null;this.fireCallback(_7,"globals,error,idsToFree",[_8,_1,_9]);return{globals:_8,error:_1}},isc.A.globalEvalAndRestore=function isc_c_Class_globalEvalAndRestore(_1,_2,_3,_4,_5,_6){if(_2==null)_2=[];isc.keepGlobals=_2;return this.globalEvalWithCapture(_1,function(_12,_13,_14){isc.keepGlobals=null;var _7={},_8=isc.Canvas.$112q(_12);for(var _9 in _12){if(_2.contains(_9))continue;_7[_9]=window[_9];if(_6){var _10=window[_9];if(_10&&isc.isA.Canvas(_10)){if(_8){if(!_8.$112o){_8.$112o={}}
_8.$112o[_9]=_10;_10.setProperty("$112p",_8)}else{if(_10.topElement||_10.masterElement){isc.logWarn("Cannot find top level of "+_10)}}}}
var _11=_14[_9];if(_11){delete _14[_9];isc.ClassFactory.releaseGlobalID(_11,_9)}
window[_9]=_12[_9]}
isc.Class.fireCallback(_3,"globals,error,suppressedGlobals",[_12,_13,_7])},_4,_5)},isc.A.$dg=function isc_c_Class__notifyFunctionComplete(_1,_2,_3){_3.$dh-=1;if(_3.$dh)return;for(var i=0;i<_3.length;i++){var q=_3[i];if(q.$di){_3.removeItem(i);i--;continue}
if(q.$dj){delete q.$dj}}
if(_3.length==0){var _6=isc.$ah+_2;_1[_2]=_1[_6];delete _1[_6];delete _1.$ba[_2]}},isc.A.getArrayItem=function isc_c_Class_getArrayItem(_1,_2,_3){if(_2==null)return null;if(isc.isA.Number(_1))return _2[_1];if(isc.isAn.Object(_1))return _1;if(isc.isA.String(_1))return _2.find(_3||this.$cp,_1);return null},isc.A.getArrayItemIndex=function isc_c_Class_getArrayItemIndex(_1,_2,_3){if(isc.isA.Number(_1))return _1;var _4=isc.Class.getArrayItem(_1,_2,_3);return _2.indexOf(_4)},isc.A.getDocumentBody=function isc_c_Class_getDocumentBody(_1){var _2=(!_1&&isc.Browser.isIE&&isc.Browser.isStrict);var _3=(_2?this.ns.$dl:this.ns.$dm);if(_3!=null)return _3;var _4=this.getDocument();if(_2){this.ns.$dl=_4.documentElement;return this.ns.$dl}
if(isc.Browser.isIE){_3=_4.body}else{if(_4.body!=null)_3=_4.body;else{var _5=_4.documentElement.namespaceURI;_3=_4.getElementsByTagNameNS(_5,"body")[0];if(_3==null){_3=_4.documentElement.childNodes[1];if(_3!=null&&_3.tagName!="body")_3=null}
if(!_3)return null}}
this.ns.$dm=_3;return _3},isc.A.getActiveElement=function isc_c_Class_getActiveElement(){try{return this.getDocument().activeElement}catch(e){this.logWarn("error accessing activeElement: "+e.message)}
return null},isc.A.$dk=function isc_c_Class__makeNotifyFunction(_1){var _2=function observation(){if(isc.$cv)arguments.$cw=this;var _3=this[arguments.callee.$c1].apply(this,arguments);var _4=this.$ba[_1];if(!_4)return _3;_4.$dh=_4.$dh?_4.$dh+1:1;var q,_6;for(var i=0,_8=_4.length;i<_8;++i){q=_4[i];if(q.$dj)continue;_6=q.action;_6.$f0=q.target;_6.$1230=this;_6.$1233=_3;try{_6.apply(q.target,arguments)}finally{_6.$f0=null;_6.$1230=null;_6.$1233=null}}
if(isc.Browser.isSafari){arguments.callee.$dv.Class.$dg(this,_1,_4)}else{isc.Class.$dg(this,_1,_4)}
return _3};_2.$dw=true;_2.$dx=_1+"Observation";_2.$c1=isc.$ah+_1;if(isc.Browser.isSafari)_2.$dv=isc;return _2});isc.evalBoundary;isc.B.push(isc.A.$1231=function isc_c_Class__makeThunkFunction(_1,_2){if(_1==null)_1=isc.$ad;var _3="var observer = arguments.callee.caller.$f0, it = observer, observed = this, returnVal = arguments.callee.caller.$1233;\n";_3+=_2;var _4=isc.Class.$123z[_1];if(_4==null)_4=isc.Class.$123z[_1]={};var _5=_4[_2];if(_5==null){_5=_4[_2]=isc.$aq(_1,_3);_5.$123y=_1}
return function thunk(){_5.apply(arguments.callee.$1230,arguments)}},isc.A.$102q=function isc_c_Class__assert(_1,_2){if(!_1){throw(_2||"assertion failed")}});isc.B._maxIndex=isc.C+72;isc.A=isc.Class;isc.A.newInstance=isc.Class.create;isc.Class.ns=isc;isc.A=isc.ClassFactory;isc.A.ns=isc;isc.A.getWindow=isc.Class.getWindow;isc.A.getDocument=isc.Class.getDocument;isc.A=isc.Class.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.getWindow=(isc.Browser.isSafari?function(){return window}:function(){return this.ns.$ch});isc.A.getDocument=(isc.Browser.isSafari?function(){return window.document}:function(){return this.ns.$ci});isc.A.$dn="_autoMaker";isc.A.$58e="creator";isc.A.$do="show";isc.A.$dp="Constructor";isc.A.$dq="Defaults";isc.A.$dr="Properties";isc.A.$90j="spacer:";isc.A.map=isc.Class.map;isc.A.Super=isc.Class.Super;isc.A.$116f=isc.Class.$116f;isc.A.invokeSuper=isc.Class.invokeSuper;isc.A.$102q=isc.Class.$102q;isc.B.push(isc.A.init=function isc_Class_init(){},isc.A.destroy=function isc_Class_destroy(_1,_2,_3,_4,_5,_6,_7,_8,_9,_10,_11,_12,_13){var _14=this.getClass();if(_14.$101i){for(var i=0;i<_14.$101i.length;i++){_14.$101i[i].call(this,_1,_2,_3,_4,_5,_6,_7,_8,_9,_10,_11,_12,_13)}}
var _16=this.__sgwtDestroy;if(_16){delete this.__sgwtDestroy;_16.apply(this)}},isc.A.completeCreation=function isc_Class_completeCreation(_1,_2,_3,_4,_5,_6,_7,_8,_9,_10,_11,_12,_13){if(this.addPropertiesOnCreate!=false){if(isc.captureDefaults){var _14={type:this.Class,defaults:isc.addProperties({},_1,_2,_3,_4,_5,_6,_7,_8,_9,_10,_11,_12,_13)}
if(!isc.capturedComponents)isc.capturedComponents=[];isc.capturedComponents.add(_14);if(_14.defaults.ID){isc.ClassFactory.addGlobalID(_14,_14.defaults.ID)}
return _14}
isc.addProperties(this,_1,_2,_3,_4,_5,_6,_7,_8,_9,_10,_11,_12,_13)}
var _15=this.getClass(),_16=_15.$769;if(_16!=null){for(var i=0;i<_16.length;i++){var _18=_16[i];if(this[_18]==_15.$b4[_18]){this[_18]=_15.cloneDupPropertyValue(_18,this[_18])}}}
if(_15.$100q){for(var i=0;i<_15.$100q.length;i++){_15.$100q[i].call(this,_1,_2,_3,_4,_5,_6,_7,_8,_9,_10,_11,_12,_13)}}
this.init(_1,_2,_3,_4,_5,_6,_7,_8,_9,_10,_11,_12,_13);if(this.autoDupMethods){isc.Class.duplicateMethods(this,this.autoDupMethods)}
return this},isc.A.duplicateMethod=function isc_Class_duplicateMethod(_1){isc.Class.duplicateMethod(_1,this)},isc.A.getUniqueProperties=function isc_Class_getUniqueProperties(_1){if(_1==null)_1={};var _2=this.getPrototype();for(var _3 in this){if(_3.startsWith("_"))continue;if(_3=="ns")continue;if(_3=="ID"&&this.ID.startsWith("isc_OID_"))continue;var _4=this[_3];if(isc.isA.Function(_4))continue;if(_4!=_2[_3]){_1[_3]=this[_3]}}
return _1},isc.A.clone=function isc_Class_clone(){return this.getClass().create(this.getUniqueProperties())},isc.A.serialize=function isc_Class_serialize(_1){return isc.Comm.serialize(this,_1)},isc.A.xmlSerialize=function isc_Class_xmlSerialize(_1){return isc.Comm.xmlSerialize(this.getClassName(),this,_1)},isc.A.getSerializeableFields=function isc_Class_getSerializeableFields(_1,_2){var _3=isc.DS?isc.DS.getNearestSchema(this):null;var _4=this.getUniqueProperties();if(_3==null){this.logDebug("No schema available for class"+this.getClassName());return _4}else{this.logDebug("Constraining serializeable fields for class: "+this.getClassName()+" with schema : "+_3.ID)}
var _5=isc.applyMask(_4,_3.getFields());_1=_1||[];_2=_2||[];_1.map(function(_7){delete _5[_7]});for(var i=0;i<_2.length;i++){_5[_2[i]]=this[_2[i]]}
return _5},isc.A.getID=function isc_Class_getID(){return this.ID},isc.A.getClass=function isc_Class_getClass(){return this.$b9},isc.A.getSuperClass=function isc_Class_getSuperClass(){return this.$b9.$b8},isc.A.getClassName=function isc_Class_getClassName(){return this.getClass().getClassName()},isc.A.getScClassName=function isc_Class_getScClassName(){return this.getClass().getScClassName()},isc.A.getPrototype=function isc_Class_getPrototype(){return this.$76y},isc.A.getGlobalReference=function isc_Class_getGlobalReference(_1){if(typeof _1=="string")return this.evaluate(_1);return _1},isc.A.addMethods=function isc_Class_addMethods(){for(var i=0;i<arguments.length;i++){return isc.addMethods(this,arguments[i])}},isc.A.addProperties=function isc_Class_addProperties(){return isc.addPropertyList(this,arguments)},isc.A.addPropertyList=function isc_Class_addPropertyList(_1){return isc.addPropertyList(this,_1)},isc.A.$ds=function isc_Class__getSetter(_1){var _2="set"+_1.substring(0,1).toUpperCase()+_1.substring(1);return(isc.isA.Function(this[_2])?_2:null)},isc.A.$dt=function isc_Class__getGetter(_1){var _2="get"+_1.substring(0,1).toUpperCase()+_1.substring(1);return(isc.isA.Function(this[_2])?_2:null)},isc.A.setProperty=function isc_Class_setProperty(_1,_2){var _3={};_3[_1]=_2;this.setProperties(_3)},isc.A.setProperties=function isc_Class_setProperties(){var _1=isc.isA,_2,_3={};if(arguments.length<1)return;if(arguments.length==1){_2=arguments[0];if(_2==null)return}else{_2={};for(var i=0;i<arguments.length;i++){isc.addProperties(_2,arguments[i])}}
for(var _5 in _2){var _6=_2[_5],_7=this.$ds(_5);if(isc.isA.StringMethod(_6))_6=_6.getValue();if(_7){this[_7](_6);if(this.propertyChanged)this.propertyChanged(_5,_6)}else{_3[_5]=_6}}
this.addProperties(_3)
if(this.propertyChanged){for(var _5 in _3){this.propertyChanged(_5,_3[_5])}}
if(this.doneSettingProperties)this.doneSettingProperties(_2)},isc.A.getProperty=function isc_Class_getProperty(_1){var _2=this.$dt(_1);if(_2)return this[_2]();return this[_1]},isc.A.getPropertyValue=function isc_Class_getPropertyValue(_1){var _2=this.$dt(_1);if(_2)return this[_2]();return this[_1]},isc.A.$du=function isc_Class__firstNonNull(_1,_2,_3,_4,_5,_6){return _1!=null?_1:(_2!=null?_2:(_3!=null?_3:(_4!=null?_4:(_5!=null?_5:_6))))},isc.A.isA=function isc_Class_isA(_1){if(this.getClass().isA(_1)){return true}else{if(this.getSGWTFactory){var _2=this.getSGWTFactory();if(_2)return _2.isA(_1)}}
return false},isc.A.observe=function isc_Class_observe(_1,_2,_3){if(_1==null){this.logWarn("Invalid observation: Target is not an object.  target: "+_1+", methodName: "+_2+", action: '"+_3+"'");return false}
if(!isc.Func.convertToMethod(_1,_2)){this.logWarn("Invalid observation: property: '"+_2+"' is not a method on "+_1);return false}
var _4=isc.$a9[_2];if(_1[_4])this.observe(_1,_4,_3)
var _5=_1[_2],_6;if(isc.isAn.Instance(_1)&&_1.getClass().getInstanceProperty(_2)){_6=_1.getClass().getArgString(_2)}else{_6=isc.Func.getArgString(_5)}
var _7=_6.split(",");if(_3==null||isc.is.emptyString(_3)){if(!this[_2]||!this.convertToMethod(_2)){this.logWarn("Invalid Observation - no action specified, and observer: "+this+" has no method '"+_2+"', ignoring");return false}
_3="it."+_2+"("+_6+")"}
if(!isc.isA.Function(_3)){_3=isc.Class.$1231(_6,_3)}
_3.$123y=_6;if(!_1.$ba)_1.$ba={};if(!_1.$ba[_2]){var _8=_1.$ba[_2]=[];if(_7.length>0){_8.argStr=_6}}else{var _8=_1.$ba[_2];for(var i=0,_10=_8.length;i<_10;i++){var q=_8[i];if(q.target==this){if(q.$di&&!q.$dj)
{q.$di=false;q.$dj=true;q.action=_3;return true}
this.logWarn("Observer: "+this+" is already observing method '"+_2+"' on object '"+_1+"', ignoring");return false}}}
var _12=!!_8.$dh;var q={target:this,action:_3,$dj:_12};_8.add(q);var _13=isc.$ah+_2;if(_1[_13]==null){_1[_13]=_5}else if(!_1[_2].$dw){this.logWarn("Observation error: method "+_2+" is being observed on object "+_1+" but the function appears to have been directly overridden. This may lead to unexpected behavior - to avoid seeing this message in the future, ensure the addMethods() or addProperties() API is used to modify methods on live SmartClient instances, rather than simply reassigning the method name to a new function instance.");_1[_13]=_1[_2]}
if(!_12&&!_1[_2].$dw){_1[_2]=isc.Class.$dk(_2)}
return true},isc.A.ignore=function isc_Class_ignore(_1,_2){var _3;var _4=isc.$a9[_2];if(_4!==_3&&_1[_4])this.ignore(_1,_4);var _5=isc.$ah+_2;if(!_1[_5]||!_1.$ba)return false;var _6=_1.$ba[_2],_7=_6.$dh;var q;for(var i=0,_10=_6.length;i<_10;i++){q=_6[i];if(q.target==this){if(_7){q.$di=true}else{_6.removeAt(i)}
break}}
if(!_1[_2]||!_1[_2].$dw){this.logWarn("Observation error caught in ignore(): Method "+_2+" was being observed on object "+_1+" but the function appears to have been directly overridden. This may lead to unexpected behavior - to avoid seeing this message in the future, ensure the addMethods() or addProperties() API is used to modify methods on live SmartClient instances, rather than simply reassigning the method name to a new function instance.");_1[_5]=_1[_2]}
if(_6.length==0){_1[_2]=_1[_5];delete _1[_5];delete _1.$ba[_2]}
return true},isc.A.getObserversOf=function isc_Class_getObserversOf(_1){if(!this.$ba||!this.$ba[_1])return null;var _2=this.$ba[_1];for(var _3=[],i=0;i<_2.length;i++){_3[i]=(_2[i]?_2[i].target:null)}
return _3},isc.A.isObserving=function isc_Class_isObserving(_1,_2){if(!_1.$ba)return false;var _3=_1.$ba[_2];if(!_3)return false;for(var i=0;i<_3.length;i++){if(_3[i].target==this)return true}
return false},isc.A.convertToMethod=function isc_Class_convertToMethod(_1){return isc.Func.convertToMethod(this,_1)},isc.A.evaluate=function isc_Class_evaluate(_1,_2){return isc.Class.evaluate.apply(this,[_1,_2])},isc.A.fireCallback=function isc_Class_fireCallback(_1,_2,_3,_4){return this.getClass().fireCallback(_1,_2,_3,this,_4)},isc.A.delayCall=function isc_Class_delayCall(_1,_2,_3){return this.getClass().delayCall(_1,_2,_3,this)},isc.A.fireOnPause=function isc_Class_fireOnPause(_1,_2,_3){return this.getClass().fireOnPause(_1,_2,_3,this,this.getID())},isc.A.pendingActionOnPause=function isc_Class_pendingActionOnPause(_1){var _2=this.getClass().$cn[_1];return _2?!!_2[this.getID()]:false},isc.A.evalWithVars=function isc_Class_evalWithVars(_1,_2){return isc.Class.evalWithVars(_1,_2,this)},isc.A.getDocumentBody=function isc_Class_getDocumentBody(){return isc.Class.getDocumentBody()},isc.A.getActiveElement=function isc_Class_getActiveElement(){return isc.Class.getActiveElement()},isc.A.addAutoChildren=function isc_Class_addAutoChildren(_1,_2,_3){if(_1==null)return;if(!isc.isAn.Array(_1))_1=[_1];for(var i=0;i<_1.length;i++){var _5=_1[i];if(isc.isA.Canvas(_5)){_2=_2||this;this.$dy(_5,_2,_3);continue}
this.addAutoChild(_5,null,null,_2,_3)}},isc.A.addAutoChild=function isc_Class_addAutoChild(_1,_2,_3,_4,_5){var _6=this[_1];if(isc.isAn.Instance(_6))return _6;if(isc.isAn.Object(_1)&&_1.autoChildName){_2=_1;_3=_2._constructor||_3;_1=_2.autoChildName}
if(isc.isA.String(_6)&&window[_6]){this[_1]=window[_6];return this[_1]}
if(_1!=null&&!this.shouldCreateChild(_1))return;var _7,_8=_1+this.$dn;if(_1!=null&&this[_8])_7=this[_8](_2);else{_7=this.createAutoChild(_1,_2,_3,true)}
if(!_7)return;if(_7.$120w!==false)this[_1]=_7;this.$dz(_1,_7,_4,_5);return _7},isc.A.$dz=function isc_Class__addToParent(_1,_2,_3,_4){if(_3==null){_3=_2.autoParent||this.getAutoChildParent(_1)}
if(isc.isA.String(_3)){if(_3==isc.Canvas.NONE){if(this.isDrawn())_2.draw();return}
var _5=this[_3]||window[_3]||_3;if(!isc.isA.Canvas(_5)){this.logWarn("no valid parent could be found for String '"+_3+"'")}else _3=_5}
if(!isc.isA.Canvas(_2)||!isc.isA.Canvas(_3))return;this.$dy(_2,_3,_4)},isc.A.$dy=function isc_Class__addAutoChildToParent(_1,_2,_3){if(_1.addAsPeer||_1.snapEdge)_2.addPeer(_1);else if(isc.isA.Layout(_2)&&!_1.addAsChild&&!_1.snapTo)_2.addMember(_1,_3);else if(isc.TileLayout&&isc.isA.TileLayout(_2)&&!_1.addAsChild&&!_1.snapTo)_2.addTile(_1,_3);else _2.addChild(_1)},isc.A.shouldCreateChild=function isc_Class_shouldCreateChild(_1){var _2=this.$do+_1.charAt(0).toUpperCase()+_1.substring(1);if(this[_2]!=null&&this[_2]==false)return false;var _3=this.$d0(_1);if(_3==null)return true;return(this.shouldCreateChild(_3))},isc.A.getAutoChildClass=function isc_Class_getAutoChildClass(_1,_2,_3,_4,_5){_4=_4||this.$d1(_1);var _6=this[_4];_5=_5||this.$543(_1);var _7=this[_5];return this[_1+this.$dp]||(_2?_2._constructor:null)||(_7?_7._constructor:null)||(_6?_6._constructor:null)||_3||isc.Canvas},isc.A.applyBaseDefaults=function isc_Class_applyBaseDefaults(_1,_2,_3){_1.autoDraw=false;_1._generated=true;_1.creator=this;var _4=this.creatorName;if(_4)_1[_4]=this;var _5;if(_3==null||_3.ID===_5){_1.ID=this.getID()+isc.$ag+_2;if(window[_1.ID]){_1.ID=_1.ID+isc.$ag+isc.ClassFactory.getNextGlobalID()}}},isc.A.getDynamicDefaults=function isc_Class_getDynamicDefaults(){},isc.A.$d1=function isc_Class__getDefaultsName(_1){var _2=isc.Class.$d2;if(!_2)isc.Class.$d2=_2={};if(_2[_1])return _2[_1];var _3=_1+this.$dq;if(this[_3])_2[_1]=_3;return _3},isc.A.$543=function isc_Class__getPropertiesName(_1){var _2=isc.Class.$544;if(!_2)isc.Class.$544=_2={};if(_2[_1])return _2[_1];var _3=_1+this.$dr;if(this[_3])_2[_1]=_3;return _3},isc.A.createAutoChild=function isc_Class_createAutoChild(_1,_2,_3,_4){if(isc.startsWith(_1,this.$90j)){var _5=_1.substring(this.$90j.length);var _6="width";if(this.orientation==isc.Layout.VERTICAL)_6="height";var _7={autoDraw:false,$120w:false};_7[_6]=_5;return isc.LayoutSpacer.create(_7)}
var _8=this.getDynamicDefaults(_1);if(_8!=null&&_2!=null){_8=isc.addProperties({},_8,_2)}else{_8=_2||_8}
var _9=this.$d1(_1),_10=this[_9],_11=this.$543(_1),_12=this[_11],_13=this.getAutoChildClass(_1,_8,_3,_9,_11),_14=isc.ClassFactory.getClass(_13);if(_14==null){this.logWarn("Unable to create autoChild '"+_1+"' of type '"+_13+"' - no such class in runtime.");if(isc.isA.String(_13)&&_13.contains(".")){this.logWarn("Did you make the SmartGWT class reflectable? See http://www.smartclient.com/smartgwt/javadoc/com/smartgwt/client/docs/Reflection.html")}
return null}
_8=this.applyDuplicateAutoChildDefaults(_14,_9,_8);var _15=_14.createRaw();var _16=this.autoPassthroughs,_17,_18;if(_16){for(var _19 in _16){var _20=_16[_19];if(_1==_20&&this[_19]!==_18){_15[_19]=this[_19]}}}
this.applyBaseDefaults(_15,_1,_2);isc.addProperties(_15,this.autoChildDefaults,_10,_17,_8);if(_4)this[_1]=_15;if(_15.autoConfigure)_15.autoConfigure(this,_1);if(this.configureAutoChild)this.configureAutoChild(_15,_1);isc.addProperties(_15,this[_11]);if(_14.$100q){for(var i=0;i<_14.$100q.length;i++){_14.$100q[i].call(_15)}}
_15.init();_15=isc.SGWTFactory.extractFromConfigBlock(_15);if(_4)this[_1]=_15;if(!this.$542)this.$542={};var _22=_15.getID?_15.getID():null;if(_22!=null){if(!isc.isAn.Array(this.$542[_1])){if(this.$542[_1]!=null){isc.logWarn(this+".createAutoChild(): Creating auto child named:"+_1+" appears to be replacing autoChild with same name...")}
this.$542[_1]=[_22]}else{this.$542[_1].add(_22)}}
return _15},isc.A.applyDuplicateAutoChildDefaults=function isc_Class_applyDuplicateAutoChildDefaults(_1,_2,_3){var _4=_1.$769;if(_4&&_4.length>0){var _5=this[_2];if(_5!=null||this.autoChildDefaults!=null){for(var i=0;i<_4.length;i++){var _7=_4[i],_8;if(_5!=null&&_5[_7]!=null){if(_3==null)_3={};if(_3[_7]===_8){_3[_7]=_1.cloneDupPropertyValue(_7,_5[_7])}}else if(this.autoChildDefaults!=null&&this.autoChildDefaults[_7]!=null)
{if(_3==null)_3={};if(_3[_7]===_8){_3[_7]=_1.cloneDupPropertyValue(_7,this.autoChildDefaults[_7])}}}}}
return _3},isc.A.$d3=function isc_Class__completeCreationWithDefaults(_1,_2,_3){this.applyBaseDefaults(_2,_1,_3);var _4=this.$d1(_1),_5=this.$543(_1);var _6=_2.getClass();_3=this.applyDuplicateAutoChildDefaults(_6,_4,_3);_2.completeCreation(this.autoChildDefaults,this[_4],_3,this[_5])},isc.A.$d0=function isc_Class__getAutoChildParentName(_1){var _2=this.autoChildParentMap;if(_2)return _2[_1]},isc.A.getAutoChildParent=function isc_Class_getAutoChildParent(_1){var _2=this.$d0(_1);if(_2)return this[_2];return this},isc.A.setAutoChild=function isc_Class_setAutoChild(_1,_2){if(!this.shouldCreateChild(_1)){if(this[_1])this[_1].destroy();delete this[_1]}else{if(isc.isA.Canvas(_2)){var _3=_2;if(this[_1])this[_1].destroy();this[_1]=_3;this.$dz(_1,_3);return}
return this.addAutoChild(_1,_2)}});isc.B._maxIndex=isc.C+56;isc.Class.toString=function(){return"[Class "+this.Class+"]"}
isc.Class.getPrototype().toString=function(){return"["+this.Class+" ID:"+this.ID+"]"}
isc.A=isc.Class;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.ns=isc;isc.A._stringMethodRegistry={};isc.A.useChromeAPIToPrepareStackTrace=true;isc.B.push(isc.A.NO_OP=function isc_c_Class_NO_OP(){},isc.A.RET_TRUE=function isc_c_Class_RET_TRUE(){return true});isc.B._maxIndex=isc.C+2;isc.A=isc.ClassFactory;isc.A.observe=isc.Class.getPrototype().observe;isc.A.ignore=isc.Class.getPrototype().ignore;isc.eval=function(_1,_2){return isc.Class.evaluate(_1,null,false,_2)}
Function.prototype.Class="Function";isc.ClassFactory.defineClass("Func");isc.A=isc.Func;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$d5=new RegExp("function\\s+([\\w$]+)\\s*\\(");isc.B.push(isc.A.parseFunctionName=function isc_c_Func_parseFunctionName(_1){var _2=isc.Func.$d5.exec(_1.toString());if(_2)return _2[1];else return"anonymous"},isc.A.getName=function isc_c_Func_getName(_1,_2){if(_1==Function.prototype.apply)return"Function.apply";if(_1==Function.prototype.call)return"Function.call";if(!_1){if(!arguments.callee||arguments.callee.caller===undefined)return"unknown";if(!arguments.callee.caller)return"none";_1=arguments.callee.caller}
if(_1.$dx==null){if(_1.$bd==null&&isc._allFuncs){var _3=isc._allFuncs.indexOf(_1);if(_3!=-1){for(var _4=isc._funcClasses[_3];_4==null;_3--){_4=isc._funcClasses[_3]}
_1.$bd=_4}else{var _5=this.parseFunctionName(_1);var _6;if(_5.startsWith("isc_c_")){_5=_5.substring(6);_6=true}else{_5=_5.substring(4)}
_4=_5.substring(0,_5.indexOf("_"));_12=_5.substring(_4.length+1);var _7=isc.ClassFactory.getClass(_4),_8=null;if(_7){_8=_6?_7[_12]:_7.getInstanceProperty(_12)}}}
var _9=_1.$bc,_6;if(_9==null&&_1.$bd!=null){var _10;var _11=isc.ClassFactory.getClass(_1.$bd);if(_11==null){_11=isc[_1.$bd]||window[_1.$bd]}else{_10=_11.getPrototype()}
if(_10!=null){for(var _12 in _10){if(_10[_12]===_1){_9=_12;break}}}
if(_9==null&&_11!=null){for(var _12 in _11){if(_11[_12]===_1){_9=_12;_6=true;break}}
if(_9==null&&!isc.isA.Class(_11)&&_11.prototype!=null){for(var _12 in _11.prototype){if(_11.prototype[_12]===_1){_9=_12;break}}}}}
if(_9!=null){_1.$dx=(_1.$be?(_1.$bf?"[o]":"[a]"):isc.$ad)+(_6?"[c]":isc.$ad)+(_1.$bd?_1.$bd+isc.dot:isc.$ad)+_9}else{if(_1.$c6)_1.$dx="callback";else{_1.$dx=isc.Func.parseFunctionName(_1)}}}
return _1.$dx},isc.A.getArgs=function isc_c_Func_getArgs(_1){var _2=isc.Func.getArgString(_1);if(_2=="")return[];return _2.split(",")},isc.A.getArgString=function isc_c_Func_getArgString(_1){if(_1.$123y!=null)return _1.$123y;var _2=_1.toString(),_3=_2.indexOf("(")+1,_4=_2.substring(_3,_2.indexOf(")",_3));_4=_4.replace(/\/\*.*?\*\/|\/\/.*$/gm,isc.space);_4=_4.replace(/\s+/g,isc.emptyString);_1.$123y=_4;return _4},isc.A.getBody=function isc_c_Func_getBody(_1){var _2=_1.toString();return _2.substring(_2.indexOf("{")+1,_2.lastIndexOf("}"))},isc.A.getShortBody=function isc_c_Func_getShortBody(_1){var _2=_1.toString();return _2.substring(_2.indexOf("{")+1,_2.lastIndexOf("}")).replace(/[\r\n\t]*/g,"")});isc.B._maxIndex=isc.C+6;if(!Function.prototype.apply){isc.A=Function.prototype;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.apply=function(targetObject,args){if(targetObject==null)targetObject=window;var tempFunctionName="__TEMPF_"+Function.prototype.$d6++;var returnValue;targetObject[tempFunctionName]=this;if(!args)args=[];if(args.length<=10){returnValue=targetObject[tempFunctionName](args[0],args[1],args[2],args[3],args[4],args[5],args[6],args[7],args[8],args[9])}else{var functionString='targetObject[tempFunctionName](';for(var i=0;i<args.length;i++){functionString+="args"+'['+i+']';if(i+1<args.length){functionString+=','}}
functionString+=');';isc.eval('returnValue ='+functionString)}
delete targetObject[tempFunctionName];return returnValue});isc.B._maxIndex=isc.C+1;Function.prototype.$d6=0}
isc.A=isc.Func;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$d7=[["//","\n"],["//","\\n"],["/*","*/"]];isc.A.$d8=["\"","\'"];isc.A.$d9=["switch","while","if","return","for","var"];isc.A.$ea=["(",")","[","]","{","}",":","?","!","+","-","/","*","=",">","<","|","&",",","\\"];isc.B.push(isc.A.expressionToFunction=function isc_c_Func_expressionToFunction(_1,_2,_3){var _4=this.$eb(_1,_2,_3);return _4},isc.A.$eb=function isc_c_Func__expressionToFunction(_1,_2,_3){if(_2==null){isc.Log.logInfo("makeFunctionExpression() called with empty expression");_2=""}
if(isc.isAn.Object(_2)){if(isc.isA.StringMethod(_2))_2=_2.getValue();else if(_2.Action&&!_2.target)_2=_2.Action;var _4=_1;if(isc.isA.String(_4))_4=_1.split(",");else if(isc.isAn.Array(_4)){_1=_4.join()}
if(!isc.isAn.Array(_4))_4=[];var _5=["if (!window.",,"){var message='Component ID \"",,"\", target of action \"",,"\" does not exist';isc.Log.logWarn(message);if(isc.designTime)isc.say(message)}",,".",,"(",,")"];_5[1]=_5[3]=_5[7]=_2.target;_5[9]=_2.name;if(_2.title)_5[5]=_2.title;else _5[5]="[No title specified]"
var _6=_2.mapping||[];if(!isc.isAn.Array(_6))_6=[];_5[11]=_6.join();var _7=_5.join(isc.emptyString);var _8;try{_8=isc.$aq(_1,_7)}catch(e){this.logWarn("invalid code: "+_7+" generated from action: "+this.echo(_2));_8=function(){}}
_8.iscAction=_2;return _8}
var _9="swirfv";if(isc.isAn.Array(_1)){_1=_1.join()}
var _10=true;var i=0;var _12=this.$d7;var _13=this.$d8;var _14=this.$d9;var _15=this.$ea;var _16=false;var _17=isc.$ad,_18=isc.slash,_19="\n",_20="\\",_21="+",_22=isc.semi;var _23=_17;var _24=_17;while(i<_2.length){var _25=_2.charAt(i);if(_25==_18){for(var j=0;j<_12.length;j++){var _27=_12[j],_28=_27[0],_29=_27[1];if(_2.indexOf(_28,i)==i){var k=i+_28.length;while(k<_2.length){if(_2.substring(k,k+_29.length)==_29){k=k+_29.length;break}
k++}
i=k;_23=_17;_24=this.$ec(_2,i)}}}
if(_16){if(_24==_17){break}else{if(isc.isA.WhitespaceChar(_25)){i++;continue}else{_10=false;break}}}
for(var j=0;j<_13.length;j++){var _31=_13[j]
if(_25==_31){var k=i+1;while(k<_2.length){if(_2.charAt(k)==_20)k=k+2;if(_2.charAt(k)==_31){k++;break}
k++}
i=k;_23=_31.charAt(0);_24=this.$ec(_2,i)}}
if(_25==_19){var _32=false;for(var j=0;j<_15.length;j++){if(_23==_15[j]){_32=true;break}}
if(_32||_24==_21){_23=_17}else{_10=false;break}}
if(_25==_22){_16=true}
if(_9.indexOf(_25)!=-1){for(var j=0;j<_14.length;j++){var _33=_14[j],_34=_33.length;if((i+_34<=_2.length)&&(_2.substring(i,i+_34)==_33)&&(i+_34==_2.length||!isc.isA.AlphaNumericChar(_2.charAt(i+_34)))&&(i==0||!isc.isA.AlphaNumericChar(_2.charAt(i-1)))){_10=false;break}}}
if(!isc.isA.WhitespaceChar(_25))_23=_25;i++;_24=this.$ec(_2,i)}
if(_10){_2="return "+_2}
if(_3)_2="//"+_3+"\r\n"+_2;var _8=isc.$aq(_1,_2);return _8},isc.A.$ec=function isc_c_Func__getNextNonWhitespaceChar(_1,_2){var _3=isc.$ad;for(var j=(_2+1);j<_1.length;j++){if(!isc.isA.WhitespaceChar(_1.charAt(j))){_3=_1.charAt(j);break}}
if(j>=_1.length)_3=isc.$ad;return _3},isc.A.convertToMethod=function isc_c_Func_convertToMethod(_1,_2){if(!isc.isAn.Object(_1)||!isc.isA.nonemptyString(_2)){isc.Log.logWarn("convertToMethod() called with bad parameters.  Cannot convert  property '"+_2+"' on object "+_1+" to a function.  Returning false.");return false}
if(_1[_2]&&isc.isA.Function(_1[_2]))return true;var _3=(isc.isAn.Instance(_1)?_1.getClass()._stringMethodRegistry:_1._stringMethodRegistry);if(_3==null)return false;var _4;var _5=_3[_2];if(_5===_4)return false;isc.Func.replaceWithMethod(_1,_2,_5);return true},isc.A.replaceWithMethod=function isc_c_Func_replaceWithMethod(_1,_2,_3,_4){if(_1[_2]==null){_1[_2]=isc.is.emptyString(_3)?isc.Class.NO_OP:isc.$aq(_3,isc.$ad)}
var _5=_1[_2];if(isc.isA.Function(_5))return;var _6;if(isc.isA.String(_5)||isc.isA.Object(_5)){_6=isc.Func.expressionToFunction(_3,_5,_4)}else{isc.Log.logWarn("Property '"+_2+"' on object "+_1+" is of type "+typeof _5+".  This can not be converted to a method.","Function");return}
var _7={};_7[_2]=_6;isc.addMethods(_1,_7)});isc.B._maxIndex=isc.C+5;Array.prototype.Class="Array";Array.newInstance=function(){var _1=[];isc.addPropertyList(_1,arguments);return _1}
Array.create=Array.newInstance;Array.LOADING="loading";Array.isLoading=function(_1){return _1!=null&&!isc.isAn.XMLNode(_1)&&(_1===Array.LOADING)}
Array.CASE_INSENSITIVE=function(_1,_2,_3){return(_1==_2||(isc.isA.String(_1)&&isc.isA.String(_2)&&_1.toLowerCase()==_2.toLowerCase()))};Array.DATE_VALUES=function(_1,_2,_3){return(_1==_2||(isc.isA.Date(_1)&&isc.isA.Date(_2)&&Date.compareLogicalDates(_1,_2)==0))};Array.DATETIME_VALUES=function(_1,_2,_3){return(_1==_2||(isc.isA.Date(_1)&&isc.isA.Date(_2)&&Date.compareDates(_1,_2)==0))};if(!Array.prototype.localeStringFormatter)
Array.prototype.localeStringFormatter="toString";isc.A=Array.prototype;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.newInstance=Array.newInstance;isc.A.create=Array.newInstance;isc.A.nativeIndexOf=Array.prototype.indexOf;isc.A.nativeLastIndexOf=Array.prototype.lastIndexOf;isc.A.$1187=true;isc.A.slice=(Array.prototype.slice?Array.prototype.slice:function(_1,_2){if(_2==null)_2=this.length;for(var _3=[],l=this.length;_1<_2&&_1<l;_1++)
_3[_3.length]=this[_1];return _3});isc.A.observe=isc.Class.getPrototype().observe;isc.A.ignore=isc.Class.getPrototype().ignore;isc.B.push(isc.A.iscToLocaleString=function isc_Arra_iscToLocaleString(){return this[this.localeStringFormatter]()},isc.A.getPrototype=function isc_Arra_getPrototype(){return Array.prototype},isc.A.get=function isc_Arra_get(_1){return this[_1]},isc.A.getLength=function isc_Arra_getLength(){return this.length},isc.A.isEmpty=function isc_Arra_isEmpty(){return this.getLength()==0},isc.A.first=function isc_Arra_first(){return this[0]},isc.A.last=function isc_Arra_last(){return this[this.length-1]},isc.A.indexOf=function isc_Arra_indexOf(_1,_2,_3,_4){if(_2==null)_2=0;if(_3==null)_3=this.length-1;var _5=(_4!=null);for(var i=_2;i<=_3;i++){if(_5?_4(this[i],_1):this[i]==_1){return i}}
return-1},isc.A.lastIndexOf=function isc_Arra_lastIndexOf(_1,_2,_3,_4){if(_2==null)_2=this.length-1;if(_3==null)_3=0;var _5=(_4!=null);for(var i=_2;i>=_3;i--){if(_5?_4(this[i],_1):this[i]==_1){return i}}
return-1},isc.A.contains=function isc_Arra_contains(_1,_2,_3){return(this.indexOf(_1,_2,null,_3)!=-1)},isc.A.containsSubstring=function isc_Arra_containsSubstring(_1,_2,_3,_4,_5){if(_1==null)return true;if(_5==null)_5="substring";var _6=this.indexOf(_1,_2,_3,function(_10,_11){var _7=_11==null?null:(isc.isA.String(_11)?_11:_11.toString()),_8=_10==null?null:(isc.isA.String(_10)?_10:_10.toString());if(_4){if(_7!=null)_7=_7.toLowerCase();if(_8!=null)_8=_8.toLowerCase()}
var r=false;if(_8!=null&&_7!=null){if(_8==_7){r=true}else if(_5=="substring"&&_8&&_8.contains&&_8.contains(_7))
{r=true}else if(_5=="startsWith"&&_8&&_8.startsWith&&_8.startsWith(_7))
{r=true}}
return r});return _6>=0},isc.A.containsAll=function isc_Arra_containsAll(_1){if(_1==null)return true;var _2=_1.getLength();for(var i=0;i<_2;i++){if(!this.contains(_1.get(i)))return false}
return true},isc.A.containsAllSubstring=function isc_Arra_containsAllSubstring(_1,_2){if(_1==null)return true;var _3=_1.getLength();for(var i=0;i<_3;i++){if(!this.containsSubstring(_1.get(i),null,null,_2))return false}
return true},isc.A.intersect=function isc_Arra_intersect(){var _1=[];for(var i=0;i<this.length;i++){var _3=this.get(i),_4=true;if(_3==null)continue;for(var a=0;a<arguments.length;a++){if(!arguments[a].contains(_3)){_4=false;break}}
if(_4)_1.add(_3)}
return _1},isc.A.intersectDates=function isc_Arra_intersectDates(){var _1=[];for(var i=0;i<this.length;i++){var _3=this.get(i),_4=true;if(_3==null)continue;var _5=_3.logicalDate;for(var a=0;a<arguments.length;a++){var _7=arguments[a];var _8=false;if(!_7)continue;for(var b=0;b<_7.length;b++){var _10=_7[b];if(!_10)continue;if(_5){if(Date.compareLogicalDates(_3,_10)==0){_8=true;break}}else{if(Date.compareDates(_3,_10)==0){_8=true;break}}}
if(!_8){_4=false;break}}
if(_4)_1.add(_3)}
return _1},isc.A.intersectSubstring=function isc_Arra_intersectSubstring(_1,_2,_3){if(!isc.isAn.Array(_1))_1=[_1];if(!isc.isAn.Array(_1[0]))_1=[_1];var _4=[];if(_2==null)_2=this.$1187;;for(var i=0;i<this.length;i++){var _6=this.get(i),_7=true;if(!_6)continue;for(var a=0;a<_1.length;a++){var _9=_1[a];if(!_9)continue;if(!_9.containsSubstring(_6,null,null,_2,_3)){_7=false;break}}
if(_7)_4.add(_6)}
return _4},isc.A.equals=function isc_Arra_equals(_1){if(_1==null||!isc.isA.List(_1))return false;var _2=_1.getLength();if(_2!=this.getLength())return false;for(var i=0;i<_2;i++){if(_1.get(i)!=this.get(i))return false}
return true},isc.A.getItems=function isc_Arra_getItems(_1){var _2=[],_3=_1.getLength();for(var i=0;i<_3;i++){_2[i]=this.get(_1.get(i))}
return _2},isc.A.getRange=function isc_Arra_getRange(_1,_2){if(_2==null)_2=this.length-1;return this.slice(_1,_2)},isc.A.duplicate=function isc_Arra_duplicate(){return isc.$ac.concat(this)},isc.A.set=function isc_Arra_set(_1,_2){this[_1]=_2;this.dataChanged()},isc.A.addAt=function isc_Arra_addAt(_1,_2){if(_2==null)_2=0;this.splice(_2,0,_1);this.dataChanged();return _1},isc.A.removeAt=function isc_Arra_removeAt(_1){var _2=this.length;if(_1>=_2||_1<0)return null;var _3=this.splice(_1,1);this.dataChanged();return _3[0]},isc.A.add=function isc_Arra_add(_1,_2,_3){var _4;if(_2!==_4){return this.addAt(_1,_2)}
var _5;if(this.sortUnique){_5=this.indexOf(_1);if(_5==-1)_5=this.length}else{_5=this.length}
this[_5]=_1;if(this.sortProps&&this.sortProps.length>0){this.sortByProperties(this.sortProps,this.sortDirections,this.sortNormalizers,_4,_4,false,_3)}
this.dataChanged();return _1},isc.A.addList=function isc_Arra_addList(_1,_2,_3){if(_1==null)return null;this.$ed();if(_2==null)_2=0;if(_3==null)_3=_1.getLength();for(var _4=_2;_4<_3;_4++){this.add(_1.get(_4))}
this.$ee();return _1},isc.A.setLength=function isc_Arra_setLength(_1){this.length=_1},isc.A.addListAt=function isc_Arra_addListAt(_1,_2){if(_1==null)return null;var _3=this.splice(_2,this.length-_2);this.push.apply(this,_1);this.push.apply(this,_3);this.dataChanged();return _1},isc.A.remove=function isc_Arra_remove(_1){var _2=this.indexOf(_1);if(_2==-1)return false;this.removeAt(_2);return true},isc.A.removeList=function isc_Arra_removeList(_1){if(_1==null)return null;for(var _2=[],i=0,l=this.length;i<l;i++){if(!_1.contains(this[i]))_2.add(this[i])}
this.setArray(_2);return _1},isc.A.removeEvery=function isc_Arra_removeEvery(_1){this.removeList([_1]);return this},isc.A.$ed=function isc_Arra__startChangingData(){var _1;if(this.$ef===_1)this.$ef=0;this.$ef++},isc.A.$ee=function isc_Arra__doneChangingData(){if(--this.$ef==0)this.dataChanged()},isc.A.dataChanged=function isc_Arra_dataChanged(){if(this.onDataChanged)this.onDataChanged()},isc.A.$52z=function isc_Arra__isChangingData(){return(this.$ef!=null&&this.$ef>0)},isc.A.setArray=function isc_Arra_setArray(_1){this.setLength(0);this.push.apply(this,_1);this.dataChanged()},isc.A.addAsList=function isc_Arra_addAsList(_1){if(!isc.isAn.Array(_1))_1=[_1];return this.addList(_1)},isc.A.removeRange=function isc_Arra_removeRange(_1,_2){var _3;if(_1===_3)return this;if(!isc.isA.Number(_1))_1=0;if(!isc.isA.Number(_2))_2=this.length;return this.splice(_1,_2-_1)},isc.A.removeWhere=function isc_Arra_removeWhere(_1,_2){for(var i=0,_4=[];i<this.length;i++){if(!this[i]||this[i][_1]!=_2){_4.add(this[i])}}
this.setArray(_4)},isc.A.removeUnless=function isc_Arra_removeUnless(_1,_2){for(var i=0,_4=[];i<this.length;i++){if(this[i]&&this[i][_1]==_2){_4.add(this[i])}}
this.setArray(_4)},isc.A.removeEmpty=function isc_Arra_removeEmpty(_1,_2){for(var i=0,_4=[];i<this.length;i++){if(this[i]!=null){_4.add(this[i])}}
this.setArray(_4)},isc.A.getProperty=function isc_Arra_getProperty(_1){for(var _2=[],i=0,l=this.length;i<l;i++)
_2[_2.length]=(this[i]?this[i][_1]:null);return _2},isc.A.getValueMap=function isc_Arra_getValueMap(_1,_2){var _3={},_4=this.getLength();if(isc.isA.ResultSet(this)&&!this.lengthIsKnown()&&this.initialData){_4=this.initialData.getLength()}
for(var i=0,l=_4;i<l;i++){var _7=this.get(i);if(!isc.isAn.Object(_7))continue;if(_7&&_7[_1]!=null){_3[_7[_1]]=_7[_2]}}
return _3},isc.A.map=function isc_Arra_map(_1,_2,_3,_4,_5,_6){var _7=isc.isA.Function(_1),_8=[],_9=this.getLength();var _10,_11=_7&&(_2===_10||isc.isAn.Object(_2))&&_3===_10&&_4===_10&&_5===_10&&_6===_10;for(var i=0;i<_9;i++){var _13=this.get(i);if(_11){if(_2==null)_8[i]=_1(_13,i,this);else{_2.$838=_1;_8[i]=_2.$838(_13,i,this);delete _2.$838}}else if(_7){_8[i]=_1(_13,_2,_3,_4,_5,_6)}else{_8[i]=(_13&&_13[_1]!=null?_13[_1](_2,_3,_4,_5,_6):null)}}
return _8},isc.A.setProperty=function isc_Arra_setProperty(_1,_2){for(var i=0,l=this.length;i<l;i++)
if(this[i])this[i][_1]=_2},isc.A.clearProperty=function isc_Arra_clearProperty(_1){var _2=false,_3;for(var i=0,l=this.length;i<l;i++){_2=_2||this[i]!==_3;if(this[i])delete this[i][_1]}
return _2},isc.A.$120z=function isc_Arra__extractProperty(_1){var _2=false,_3=[];for(var i=0,l=this.length;i<l;++i){var _6=this[i];_2=_2||(_6!==undefined);if(_6){_3[_3.length]=_6[_1];delete _6[_1]}else{_3[_3.length]=null}}
return(_2?_3:null)},isc.A.getProperties=function isc_Arra_getProperties(_1){return isc.applyMask(this,_1)},isc.A.getUniqueItems=function isc_Arra_getUniqueItems(){for(var _1=[],i=0,l=this.length;i<l;i++){if(!_1.contains(this[i]))_1[_1.length]=this[i]}
return _1},isc.A.findIndex=function isc_Arra_findIndex(_1,_2,_3){return this.findNextIndex(0,_1,_2,null,_3)},isc.A.findNextIndex=function isc_Arra_findNextIndex(_1,_2,_3,_4,_5){if(_1==null)_1=0;else if(_1>=this.length)return-1;if(_4==null)_4=this.length-1;if(_2==null)return-1;var _6=_4>=_1;if(isc.isA.String(_2)){if(_5){for(var i=_1;(_6?i<=_4:i>=_4);(_6?i++:i--)){if(this[i]&&_5(this[i][_2],_3,_2))return i}}else{for(var i=_1;(_6?i<=_4:i>=_4);(_6?i++:i--)){if(this[i]&&this[i][_2]==_3)return i}}
return-1}else if(isc.isA.Function(_2)){for(var i=_1;(_6?i<=_4:i>=_4);(_6?i++:i--)){if(_2(this[i]))return i}
return-1}else{return this.findNextMatch(_2,_1,_4,_5)}},isc.A.findAllIndices=function isc_Arra_findAllIndices(_1,_2,_3){var _4=[];var _5=0;var _6;do{_6=this.findNextIndex(_5,_1,_2,null,_3);if(_6!=-1){_4.add(_6);_5=_6+1}}while(_6!=-1);return _4},isc.A.findNextMatch=function isc_Arra_findNextMatch(_1,_2,_3,_4){if(_1._constructor=="AdvancedCriteria"){if(isc.DataSource==null){isc.warn("DataBinding module not loaded, AdvancedCriteria not supported for find()/findAll()");return-1}
var _5=this.dataSource||isc.DataSource;var _6=_5.applyFilter(this.getRange(_2,_3+1),_1);if(_6.size()!=0)return this.findIndex(_6.get(0));else return-1}
var _7=isc.getKeys(_1),_8=_3>=_2;if(_4){for(var i=_2;(_8?i<=_3:i>=_3);(_8?i++:i--)){var _10=this.get(i);if(!_10)continue;var _11=true;for(var j=0;j<_7.length;j++){var _13=_7[j];if(!_4(_10[_13],_1[_13],_13)){_11=false;break}}
if(_11)return i}}else{for(var i=_2;(_8?i<=_3:i>=_3);(_8?i++:i--)){var _10=this.get(i);if(!_10)continue;var _11=true;for(var j=0;j<_7.length;j++){var _13=_7[j];if(_10[_13]!=_1[_13]){_11=false;break}}
if(_11)return i}}
return-1},isc.A.find=function isc_Arra_find(_1,_2,_3){var _4=this.findIndex(_1,_2,_3);return(_4!=-1)?this.get(_4):null},isc.A.findByKeys=function isc_Arra_findByKeys(_1,_2,_3,_4){if(_1==null){isc.Log.logWarn("findByKeys: passed null record");return-1}
var _5={},_6=_2.getPrimaryKeyFields(),_7=false;for(var _8 in _6){_7=true;if(_1[_8]==null){isc.Log.logWarn("findByKeys: passed record does not have a value for key field '"+_8+"'");return-1}
_5[_8]=_1[_8]}
if(!_7){isc.Log.logWarn("findByKeys: dataSource '"+_2.ID+"' does not have primary keys declared, can't find record");return-1}
return this.findNextIndex(_3,_5,null,_4)},isc.A.containsProperty=function isc_Arra_containsProperty(_1,_2){var _3=this.findIndex(_1,_2);return(_3!=-1)},isc.A.findAll=function isc_Arra_findAll(_1,_2,_3){if(_1==null)return null;if(isc.isA.String(_1)){var _4=null,l=this.length;var _6=isc.isAn.Array(_2),_7=(_3!=null);for(var i=0;i<l;i++){var _9=this[i];if(_9&&(_6?_2.contains(_9[_1],null,_3):(_7?_3(_9[_1],_2):_9[_1]==_2)))
{if(_4==null)_4=[];_4.add(_9)}}
return _4}else if(isc.isA.Function(_1)){var _4=null,l=this.length,_10=_1,_11=_2;for(var i=0;i<l;i++){var _9=this[i];if(_10(_9,_11)){if(_4==null)_4=[];_4.add(_9)}}
return _4}else{return this.findAllMatches(_1,_3)}},isc.A.findAllMatches=function isc_Arra_findAllMatches(_1,_2){var l=this.getLength(),_4=isc.getKeys(_1),_5=null,_6=(_2!=null),_7=(_6&&!isc.isAn.Object(_2)&&_2);if(_1._constructor=="AdvancedCriteria"){if(isc.DataSource==null){isc.warn("DataBinding module not loaded, AdvancedCriteria not supported for find()/findAll()");return-1}
var _8=this.dataSource||isc.DataSource;return _8.applyFilter(this.getRange(0,this.getLength()+1),_1)}
for(var i=0;i<l;i++){var _10=this.get(i);if(!_10)continue;var _11=true;for(var j=0;j<_4.length;j++){var _13=_4[j],_14=(_6&&(_7||_2[_13])),_15=_10[_13],_16=_1[_13];if(_14?!_14(_15,_16):(_15!=_16))
{_11=false;break}}
if(_11){if(_5==null)_5=[];_5.add(_10)}}
return _5},isc.A.slide=function isc_Arra_slide(_1,_2){this.slideRange(_1,_1+1,_2)},isc.A.slideRange=function isc_Arra_slideRange(_1,_2,_3){if(_1==_3)return;var _4=this.splice(_1,_2-_1);this.addListAt(_4,_3)},isc.A.slideList=function isc_Arra_slideList(_1,_2){var _3=[],i;if(_2<0)_2=0;for(i=0;i<_2;i++)
if(!_1.contains(this[i]))
_3.add(this[i]);for(i=0;i<_1.length;i++)
_3.add(_1[i]);for(i=_2;i<this.length;i++)
if(!_1.contains(this[i]))
_3.add(this[i]);this.setArray(_3)},isc.A.makeIndex=function isc_Arra_makeIndex(_1,_2,_3){var _4={};var _5=(_2==-1);_2=(_2!=null&&_2!=0);for(var i=0;i<this.length;i++){var _7=this[i],_8=_7[_1];if(_8==null){if(!_3)continue;_8=i}
if(_5){_4[_8]=_7;continue}
var _9=_4[_8];if(_9==null){if(_2){_4[_8]=[_7]}else{_4[_8]=_7}}else{if(_2){_4[_8].add(_7)}else{if(isc.isAn.Array(_9)){_4[_8].add(_7)}else{_4[_8]=[_9,_7]}}}}
return _4},isc.A.arraysToObjects=function isc_Arra_arraysToObjects(_1){var _2=_1.length;for(var _3=[],i=0,l=this.length;i<l;i++){var _6=_3[i]={};for(var p=0;p<_2;p++){var _8=_1[p];_6[_8]=this[i][p]}}
return _3},isc.A.objectsToArrays=function isc_Arra_objectsToArrays(_1){var _2=_1.length;for(var _3=[],i=0,l=this.length;i<l;i++){var _6=_3[i]=[];for(var p=0;p<_2;p++){var _8=_1[p];_6[p]=this[i][_8]}}
return _3},isc.A.spliceArray=function isc_Arra_spliceArray(_1,_2,_3){var _4;if(_1===_4)return this.splice();if(_2===_4)return this.splice(_1);if(_3===_4)return this.splice(_1,_2);if(!isc.isAn.Array(_3)){isc.Log.logWarn("spliceArray() method passed a non-array third parameter. Ignoring...","Array");return this.splice(_1,_2)}
return this.splice.apply(this,[_1,_2].concat(_3))},isc.A.peek=function isc_Arra_peek(){var _1=this.pop();this.push(_1);return _1},isc.A.getCachedRow=function isc_Arra_getCachedRow(_1){return this[_1]},isc.A.removeItem=function isc_Arra_removeItem(_1){return this.removeAt(_1)},isc.A.getItem=function isc_Arra_getItem(_1){return this.get(_1)},isc.A.setItem=function isc_Arra_setItem(_1){return this.set(_1)},isc.A.clearAll=function isc_Arra_clearAll(_1){return this.removeList(this)},isc.A.size=function isc_Arra_size(){return this.getLength()},isc.A.subList=function isc_Arra_subList(_1,_2){return this.getRange(_1,_2)},isc.A.addAll=function isc_Arra_addAll(_1){return this.addList(_1)},isc.A.removeAll=function isc_Arra_removeAll(_1){var _2=this.getLength();this.removeList(_1);return this.getLength()!=_2},isc.A.clear=function isc_Arra_clear(){this.setLength(0)},isc.A.toArray=function isc_Arra_toArray(){return this.duplicate()});isc.B._maxIndex=isc.C+76;if(!isc.Browser.isIE||isc.Browser.isIE8Strict){Array.prototype.duplicate=Array.prototype.slice}
if(Array.prototype.nativeIndexOf!=null){Array.prototype.indexOf=function(_1,_2,_3,_4){if(_2==null)_2=0;if(_3==null)_3=this.length-1;var i;if(_4!=null){for(i=_2;i<=_3;++i){if(_4(this[i],_1))return i}}else{if(isc.isAn.Instance(_1)){i=this.nativeIndexOf(_1,_2);if(i>_3)i=-1;return i}
for(i=_2;i<=_3;++i){if(this[i]==_1)return i}}
return-1}}
if(Array.prototype.filter==null){isc.A=Array.prototype;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.filter=function isc_Arra_filter(_1,_2){var _3=[],_4=this.length;for(var i=0;i<_4;i++){if(i in this&&_1.call(_2,this[i])){_3.add(this[i])}}
return _3});isc.B._maxIndex=isc.C+1}
isc.defineClass("NumberUtil");isc.A=isc.NumberUtil;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$eh=".";isc.A.decimalSymbol=".";isc.A.groupingSymbol=",";isc.A.negativeSymbol="-";isc.A.currencySymbol="$";isc.A.negativeFormat=1;isc.A.groupingFormat=1;isc.A._1zero="0";isc.A._2zero="00";isc.A._3zero="000";isc.A._4zero="0000";isc.A.useAccurateRounding=false;isc.B.push(isc.A.setStandardFormatter=function isc_c_NumberUtil_setStandardFormatter(_1){if(isc.isA.Function(isc.NumberUtil[_1]))
isc.NumberUtil.formatter=_1},isc.A.setStandardLocaleStringFormatter=function isc_c_NumberUtil_setStandardLocaleStringFormatter(_1){if(isc.isA.Function(isc.NumberUtil[_1]))
isc.NumberUtil.localeStringFormatter=_1},isc.A.$eg=function isc_c_NumberUtil__getZeroString(_1){if(_1<=0)return;var _2=isc.NumberUtil,_3;while(_1>4){if(_3==null)_3=_2._4zero;else _3+=_2._4zero;_1-=4}
var _4;switch(_1){case 4:_4=_2._4zero;break;case 3:_4=_2._3zero;break;case 2:_4=_2._2zero;break;case 1:_4=_2._1zero;break}
if(_3==null)return _4;return _3+_4},isc.A.$109c=function isc_c_NumberUtil__expandExponent(_1){return _1.replace(/^([+-])?(\d+).?(\d*)[eE]([-+]?\d+)$/,function(_9,_10,_11,_12,_13){var _2=+_13<0,_3=_11.length+(+_13),_4=(_2?_11:_12).length;_13=Math.abs(_13);var _5=_13>=_4?_13-_4+_2:0,_6=_5>0?isc.NumberUtil.$eg(_5):"";var _7=_11+_12;if(_2)_7=_6+_7;else _7+=_6;if(_2)_3+=_6.length;var _8=(_10||"")+_7.substr(0,_3);if(_3<_7.length){_8+="."+_7.substr(_3)}
return _8})},isc.A.stringify=function isc_c_NumberUtil_stringify(_1,_2,_3){if(!isc.isA.Number(_1))return"";return isc.NumberUtil.$117c(_2,_3,_1)},isc.A.$117c=function isc_c_NumberUtil__stringify(_1,_2,_3){if(_3==null)_3=this;if(!_1)_1=2;var _4=_3.toString(),_5=_1-_4.length;if(_2){var _6=_4.indexOf(isc.dot);if(_6!=-1){_5+=(_4.length-_6)}}
var _7=isc.NumberUtil.$eg(_5);if(_7==null)return _4;return _7+_4},isc.A.toCurrencyString=function isc_c_NumberUtil_toCurrencyString(_1,_2,_3,_4,_5){if(!isc.isA.Number(_1))return"";return isc.NumberUtil.$117d(_2,_3,_4,_5,_1)},isc.A.$117d=function isc_c_NumberUtil__toCurrencyString(_1,_2,_3,_4,_5){if(_5==null)_5=this;var _6=_5<0,_7=_5<0?Math.ceil(_5):Math.floor(_5),_8=Math.abs(Math.round((_5-_7)*100)),_9=isc.StringBuffer.create();_7=Math.abs(_7);_1=_1||isc.NumberUtil.currencySymbol||"$";_2=_2||isc.NumberUtil.decimalSymbol||".";if(_3==null)_3=true;if(_6)_9.append(isc.NumberUtil.negativeSymbol||"-");if(_4!=true)_9.append(_1);_9.append(_7.stringify(1));if(_3){_9.append(_2);_9.append(_8.stringify(2))}else if(_8!=0){_9.append(_2);if(_8%10==0)_9.append(_8/10);else _9.append(_8.stringify(2))}
if(_4==true)_9.append(_1);return _9.toString()},isc.A.toLocalizedString=function isc_c_NumberUtil_toLocalizedString(_1,_2,_3,_4,_5){if(!isc.isA.Number(_1))return"";var _6=!_2?_1:Math.round(_1*Math.pow(10,_2))/Math.pow(10,_2);var _7=Math.abs(_6),_8=Math.floor(_7),_9,_10,_11=[];if(_2){var _12=Math.round((_7-_8)*Math.pow(10,_2));_10=isc.NumberUtil.$117c(_2,null,_12)}else if(_2==0){_8=Math.round(_7)}else{if(_7-_8>0){var _13=_7.toString();_10=_13.substring(_13.indexOf(isc.NumberUtil.$eh)+1)}}
_9=_8.toString();var _14=_9.length;var _15=Math.floor(_14/3);if(_14%3){_11[0]=_9.substr(0,_14%3)}
for(var i=0;i<_15;i++){_11[_11.length]=_9.substr(_14%3+i*3,3)}
var _17=_11.join(_4||isc.NumberUtil.groupingSymbol);if(_10)_17=_17+(_3||isc.NumberUtil.decimalSymbol)+_10;if(_6<0)_17=(_5||isc.NumberUtil.negativeSymbol)+_17;return _17},isc.A.floatValueToLocalizedString=function isc_c_NumberUtil_floatValueToLocalizedString(_1,_2,_3){if(!isc.isA.Number(_1))return"";if(!_3)_3=0;var _4=isc.NumberUtil.toLocalizedString(_1,_2);var _5=_4.indexOf(isc.NumberUtil.decimalSymbol);var _6=0;if(_5<0){if(_3==0)return _4;_6=_3;_4+=isc.NumberUtil.decimalSymbol}else{_6=_3-(_4.length-_5-1)}
if(_6>0){_4+=new Array(_6+1).join('0')}else if(_6<0){for(var i=(_4.length-1);i>(_5+_3);i--){if(_4[i]!='0'&&_4[i]!=isc.NumberUtil.decimalSymbol)break}
if(_4[i]==isc.NumberUtil.decimalSymbol)i--;_4=_4.substr(0,i+1)}
return _4},isc.A.toUSString=function isc_c_NumberUtil_toUSString(_1,_2){if(!isc.isA.Number(_1))return"";return isc.NumberUtil.toLocalizedString(_1,_2,".",",","-")},isc.A.toUSCurrencyString=function isc_c_NumberUtil_toUSCurrencyString(_1,_2){if(!isc.isA.Number(_1))return"";var _3=isc.NumberUtil;return"$"+_3.toLocalizedString(_1,_2,".",",","-")},isc.A.iscToLocaleString=function isc_c_NumberUtil_iscToLocaleString(_1){var f=isc.NumberUtil.localeStringFormatter;var _3=isc.isA.Function(f)?f:isc.NumberUtil[f];return _3?_3(_1):_1.toString()},isc.A.toFormattedString=function isc_c_NumberUtil_toFormattedString(_1,_2){var f=_2||isc.NumberUtil.formatter;var _4=isc.isA.Function(f)?f:isc.NumberUtil[f];return _4?_4(_1):_1.toString()},isc.A.parseInt=function isc_c_NumberUtil_parseInt(_1){_1=_1.replace(new RegExp("["+this.groupingSymbol+"|"+this.currencySymbol+"]","g"),"");return parseInt(_1)},isc.A.parseFloat=function isc_c_NumberUtil_parseFloat(_1){_1=_1.replace(new RegExp("["+this.groupingSymbol+"|"+this.currencySymbol+"]","g"),"");if(this.decimalSymbol!="."){_1=_1.replace(new RegExp("["+this.decimalSymbol+"]","g"),".")}
return parseFloat(_1)},isc.A.parseLocaleFloat=function isc_c_NumberUtil_parseLocaleFloat(_1,_2,_3){if(_1==null)return Number.NaN;if(!_2)_2=isc.NumberUtil.decimalSymbol;if(!_3)_3=isc.NumberUtil.groupingSymbol;var _4="";var _5=-1;var _6=false;var _7=true;var _8=_1.contains(_3);for(var i=0;i<_1.length;i++){if(i==0){if(_1[i]=="-"){_7=false;continue}else if(_1[i]=="+"){continue}}
var _10=!_6&&_8;if(_10){if(_5!=-1){_10=(i-_5)==4}else{_10=(i==3)||(_1[i]==_3)}}
if(_1[i]==_3){if(!_10){return Number.NaN}
_5=i;continue}else if(_10&&_1[i]!=_2){return Number.NaN}else if(_1[i]==_2){if(_6)return Number.NaN;if(_8&&(i-_5)!=4)return Number.NaN;_6=true;_4+=".";continue}
if(_1[i]<"0"||_1[i]>"9")return Number.NaN;_4+=_1[i]}
if(!_6&&_8&&((i-_5)!=4)){return Number.NaN}
return parseFloat(_4)},isc.A.parseLocaleInt=function isc_c_NumberUtil_parseLocaleInt(_1,_2){if(_1==null)return Number.NaN;if(!_2)_2=isc.NumberUtil.groupingSymbol;var _3="";var _4=-1;var _5=true;var _6=_1.contains(_2);for(var i=0;i<_1.length;i++){if(i==0){if(_1[i]=="-"){_5=false;continue}else if(_1[i]=="+"){continue}}
var _8=_6;if(_8){if(_4!=-1){_8=(i-_4)==4}else{_8=(i==3)||(_1[i]==_2)}}
if(_1[i]==_2){if(!_8){return Number.NaN}
_4=i;continue}else if(_8){return Number.NaN}
if(_1[i]<"0"||_1[i]>"9")return Number.NaN;_3+=_1[i]}
if(_6&&((i-_4)!=4)){return Number.NaN}
return parseInt(_3)},isc.A.parseLocaleCurrency=function isc_c_NumberUtil_parseLocaleCurrency(_1,_2,_3,_4){if(_1==null)return Number.NaN;if(!_2)_2=isc.NumberUtil.currencySymbol;if(_1.startsWith(_2)){_1=_1.substring(_2.length)}else if(_1.endsWith(_2)){_1=_1.substring(0,_1.length-_2.length)}
return this.parseLocaleFloat(_1)},isc.A.parseIfNumeric=function isc_c_NumberUtil_parseIfNumeric(_1){if(isc.isA.Number(_1)){return _1}else if(isc.isA.nonemptyString(_1)){if(isNaN(_1)){return _1}else{return parseInt(_1,10)}}else{return _1}},isc.A.format=function isc_c_NumberUtil_format(_1,_2){if(!isc.isA.Number(_1)){this.logWarn("Cannot format '"+_1+"' - not a Number");return _1}
if(!isc.isA.String(_2)){this.logWarn("Cannot use format '"+_2+"' - not a String");return _1}
if(_2==""){return _1.toString()}
var _3=_2+"",n=_1+0,_5=n<0,_6=Math.abs(_1),_7,_8=_6.toString().split('.'),_9=_8[0],_10=_8[1];if(_5){if(_3.indexOf(";")!=-1){_3=_7=_3.substring(_3.indexOf(";")+1)}else{_3=_3.indexOf(";")==-1?_3:_3.substring(0,_3.indexOf(";"))}}else{_3=_3.indexOf(";")==-1?_3:_3.substring(0,_3.indexOf(";"))}
var _11=_3.indexOf("'"),_12=[],_13=[];while(_11!=-1){var _14=_11,_15=_3.indexOf("'",_14+1);if(_15==-1){var _16="Invalid format string \""+_2+"\" - contains mismatched quotes"
this.logWarn(_16);return _16}
var _17=_3.substring(_14+1,_15);if(_17==="")_17="'";_12.push(_17);_13.push(_14);_3=_3.substring(0,_14)+_3.substring(_15+1);_11=_3.indexOf("'")}
var _18=_3.indexOf(",");if(_18>-1){_3=_3.replace(/,/g,'')}
var _19=_3.indexOf("0"),_20=_3.indexOf("#"),_21=_3.indexOf("."),_22=Math.min(_19==-1?999:_19,_20==-1?999:_20,_21==-1?999:_21),_23=_3.length-1,_24=false,_25=false,_26=0;for(var i=_3.length-1;i>_22;i--){var _28=_3.charAt(i);if(_28=='0'||_28=='#'||_28=='.')break;if(_28=='%')_24=true;if(_28=='\u2030')_25=true;_23--}
if(_22==999||_23<0||_22>_23){_8=Math.abs(n).toString().split('.');_9=_8[0];_10="";var _29=_3;if(_13){for(var i=_13.length-1;i>=0;i--){_29=_29.substring(0,_13[i])+_12[i]+_29.substring(_13[i])}}
if(_5&&!_7)_29="-"+_29;var _30="",_31=""}else{if(_19!=-1&&_20!=-1&&_21!=-1){if(_19<_20&&_20<_21){var _16="Invalid format string \""+_2+"\" - cannot specify '0' to the left of '#' in the integer part"
this.logWarn(_16);return _16}}
var _32=_3.indexOf("\u00a4");while(_32!=-1){_3=_3.substring(0,_32)+isc.NumberUtil.currencySymbol+_3.substring(_32+1);_32=_3.indexOf("\u00a4")}
var _29=_3.substring(0,_22);var _30=_3.substring(_23+1);for(var i=_13.length-1;i>=0;i--){if(_13[i]>_22&&_13[i]<_23){this.logWarn("Format string \""+_2+"\" contains quoted characters within the actual number area - these will be ignored")}else if(_13[i]<=_22){_29=_29.substring(0,_13[i])+_12[i]+_29.substring(_13[i])}else{_13[i]-=(_23+1);_30=_30.substring(0,_13[i])+_12[i]+_30.substring(_13[i])}}
if(_19!=-1&&(_21==-1||_19<_21)){_26=(_21==-1?_23+1:_21)-_19}
if(_24)n=n*100;else if(_25)n=n*1000;var _33="";if(_21!=-1)_33=_3.substring(_21+1,_23+1);n=this.$124q(n,_33.length,_10?_10.length:0);_8=Math.abs(n).toString().split('.');_9=_8[0];_10=_8[1]||"";if(_10.length<_33.length){var c=_10.length;while(_33[c]==="0"&&c++<_33.length)_10+="0"}
if(_9=="0"){_9="0000000000000000000000000000000000000000".substring(0,_26)}else if(_26>_9.length){_9="0000000000000000000000000000000000000000".substring(_9.length,_26)+_9}
if(_18>-1){_9=_9.replace(/(\d)(?=(\d{3})+(?!\d))/g,'$1'+isc.NumberUtil.groupingSymbol)}
if(_5&&!_7){_29=_29?"-"+_29:"-"}
var _31=_10&&_10.length>0?isc.NumberUtil.decimalSymbol:""}
return _29+_9+_31+_10+_30},isc.A.$124q=function isc_c_NumberUtil__roundDecimalForFormatting(_1,_2,_3){if(_3<=_2)return _1;var _4=_1<0;if(_4)_1=0-_1;var _5=_1;var m=Math.pow(10,_2);_1=_1*m;if(isc.NumberUtil.useAccurateRounding){var e=Math.pow(10,_3*-1);_1+=e}
_1=Math.round(_1)
_1=_1/m;var _8=(Math.round(_1*m)/m).toFixed(_2);if(_1!=_8){alert("Round "+_5+" to "+_2+"dp.  My way gives "+_1+", numeral.js gives "+_8)}
return _4?0-_1:_1});isc.B._maxIndex=isc.C+22;isc.NumberUtil.toString=function(_1){if(_1==null)return"";if(isc.isA.Class(_1))return _1.valueOf().toString();return _1.toString()};if(!isc.NumberUtil.formatter)isc.NumberUtil.formatter="toString";if(!isc.NumberUtil.localeStringFormatter)
isc.NumberUtil.localeStringFormatter="toString";Number.prototype.Class="Number";isc.A=Number;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.setStandardFormatter=function isc_Number_setStandardFormatter(_1){isc.NumberUtil.setStandardFormatter(_1)},isc.A.setStandardLocaleStringFormatter=function isc_Number_setStandardLocaleStringFormatter(_1){isc.NumberUtil.setStandardLocaleStringFormatter(_1)});isc.B._maxIndex=isc.C+2;isc.A=Number.prototype;isc.A.stringify=isc.NumberUtil.$117c;isc.A.toCurrencyString=isc.NumberUtil.$117d;isc.A=Number.prototype;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.iscToLocaleString=function isc_Numbe_iscToLocaleString(){var _1=isc.NumberUtil.iscToLocaleString(this);return _1},isc.A.toFormattedString=function isc_Numbe_toFormattedString(_1){var _2=isc.NumberUtil.toFormattedString(this,_1)
return _2},isc.A.toLocalizedString=function isc_Numbe_toLocalizedString(_1,_2,_3,_4){var _5=isc.NumberUtil.toLocalizedString(this,_1,_2,_3,_4);return _5},isc.A.toUSString=function isc_Numbe_toUSString(_1){var _2=isc.NumberUtil.toUSString(this,_1);return _2},isc.A.toUSDollarString=function isc_Numbe_toUSDollarString(_1){return isc.NumberUtil.toUSCurrencyString(this,_1)},isc.A.toUSCurrencyString=function isc_Numbe_toUSCurrencyString(_1){var _2=isc.NumberUtil.toUSCurrencyString(this,_1);return _2});isc.B._maxIndex=isc.C+6;isc.defineClass("Format");isc.A=isc.Format;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.toUSString=function isc_c_Format_toUSString(_1,_2){if(!isc.isA.Number(_1))return _1;return isc.NumberUtil.toUSString(_1,_2)},isc.A.toUSCurrencyString=function isc_c_Format_toUSCurrencyString(_1,_2){if(!isc.isA.Number(_1))return _1;return isc.NumberUtil.toUSCurrencyString(_1,_2)},isc.A.toUSDollarString=function isc_c_Format_toUSDollarString(_1,_2){if(!isc.isA.Number(_1))return _1;return isc.NumberUtil.toUSCurrencyString(_1,_2)},isc.A.toCurrencyString=function isc_c_Format_toCurrencyString(_1,_2,_3,_4,_5){if(!isc.isA.Number(_1))return _1;return isc.NumberUtil.$117d(_2,_3,_4,_5,_1)});isc.B._maxIndex=isc.C+4;isc.Math={random:function(_1,_2){if(_2==null){return Math.floor(Math.random()*(_1+1))}else{return Math.floor(Math.random()*(_2-_1+1))+_1}},$119q:function(_1,_2){var _3=_1.toString(16);if(_3.length<_2)_3=isc.NumberUtil.$eg(_2-_3.length)+_3;return _3},randomUUID:function(){var _1;if(window.Uint16Array&&window.crypto&&window.crypto.getRandomValues){_1=new window.Uint16Array(8);window.crypto.getRandomValues(_1)}else{_1=new Array(8);var _2=new Date().getTime();for(var i=0;i<_1.length;++i){_1[i]=(_2^(Math.random()*65536))&0xFFFF}}
_1[3]=(_1[3]&0x0FFF)|0x4000;_1[4]=(_1[4]&0xBFFF)|0x8000;return(this.$119q(_1[0],4)+this.$119q(_1[1],4)+"-"+this.$119q(_1[2],4)+"-"+this.$119q(_1[3],4)+"-"+this.$119q(_1[4],4)+"-"+this.$119q(_1[5],4)+this.$119q(_1[6],4)+this.$119q(_1[7],4)).toUpperCase()},randomString:function(_1,_2){var _3=new Array(_1);var _4;if(isc.isA.Number(_2)){_4=_2;_2="0123456789abcdefghijklmnopqrstuvwxyz".substring(0,_4)}else{_4=_2.length}
for(var i=0;i<_1;++i){_3[i]=_2[this.random(_4-1)]}
return _3.join("")},$101j:function(_1){return(_1<0?-1:(_1>0?1:0))},$101k:function(_1,_2){_1=Math.abs(_1);_2=Math.abs(_2);if(_1>_2){return _1*Math.sqrt(1+_2*_2/_1/_1)}else if(_2!=0){return _2*Math.sqrt(1+_1*_1/_2/_2)}else{return _1}},euclideanDistanceToLine:function(_1,_2,_3,_4,_5,_6){var _7=_3-_1,_8=_4-_2;var _9=_7*_7+_8*_8;if(_9<=0.00001){return this.euclideanDistance(_1,_2,_5,_6)}
var u=((_5-_1)*(_3-_1)+(_6-_2)*(_4-_2))/_9;if(u<0){return this.euclideanDistance(_1,_2,_5,_6)}else if(u>1){return this.euclideanDistance(_3,_4,_5,_6)}else{var x=_1+u*_7,y=_2+u*_8;return this.euclideanDistance(x,y,_5,_6)}},euclideanDistance:function(_1,_2,_3,_4){if(arguments.length==2){var _5=_1,_6=_2;_1=_5[0];_2=_5[1];_3=_6[0];_4=_6[1]}
return this.$101k((_1-_3),(_2-_4))},$125w:Math.PI/180,toRadians:function(_1){return _1*this.$125w},cosdeg:function(_1){return Math.cos(_1*this.$125w)},sindeg:function(_1){return Math.sin(_1*this.$125w)},$fr:function(_1,_2){var _3=0;for(var i=0;i<_1.length;++i){_3+=_1[i]*_2[i]}
return _3},$101l:function(_1){var m=_1.length,n=_1[0].length,_4=new Array(n);for(var i=n;i--;){_4[i]=new Array(n)}
for(var i=n;i--;){var _6=_4[i];for(var j=i;j<n;++j){var _8=0;for(var k=m;k--;){var _10=_1[k];_8+=_10[i]*_10[j]}
_6[j]=_4[j][i]=_8}}
return _4},$101m:function(_1,_2){if(_1.length!=_2.length){return null}
var m=_1[0].length,n=_2.length,_5=new Array(m);for(var i=m;i--;){var _7=0;for(var j=n;j--;){_7+=_1[j][i]*_2[j]}
_5[i]=_7}
return _5},$101n:function(_1){if(_1.length!=_1[0].length){return null}
var n=_1.length,L=isc.Math.$101o(n,n);for(var j=0;j<n;++j){var _5=L[j],_6=0;for(var k=0;k<j;++k){var _8=_5[k];_6+=_8*_8}
if(_1[j][j]-_6<0){return null}
var _9=_5[j]=Math.sqrt(_1[j][j]-_6);for(var i=j+1;i<n;++i){var _11=L[i],_6=0;for(var k=0;k<j;++k){_6+=_11[k]*_5[k]}
_11[j]=(_1[i][j]-_6)/_9}}
return L},$101p:function(_1){var m=_1.length,n=_1[0].length,_4=new Array(n);for(var i=n;i--;){_4[i]=new Array(m)}
for(var i=n;i--;){var _6=_4[i];for(var j=m;j--;){_6[j]=_1[j][i]}}
return _4},$101o:function(_1,_2){var A=new Array(_1);for(var i=_1;i--;){A[i]=new Array(_2)}
return A},$101q:function(_1,_2){var A=new Array(_1);for(var i=_1;i--;){var _5=A[i]=new Array(_2);for(var j=_2;j--;){_5[j]=0}}
return A},$101r:function(_1){var v=new Array(_1);for(var i=_1;i--;){v[i]=0}
return v},$101s:function(_1){var m=_1.length,n=_1[0].length,B=new Array(m);for(var i=m;i--;){var _6=_1[i],_7=B[i]=new Array(n);for(var j=n;j--;){_7[j]=_6[j]}}
return B},$101t:function(_1,_2){var _3=isc.Math.$101u(_1,_2,true,true);if(_3!=null){var s=_3.s,m=s.length;for(var i=m;i--;){s[i]=(s[i]==0?0:(1/s[i]))}
return isc.Math.$101v(_3.V,s,_3.U)}else{return null}},$101u:function(_1,_2,_3,_4,_5){if(_2==null){_2=50}
if(_3==null){_3=true}
if(_4==null){_4=true}
var _6=2.220446049250313e-16;var _7=Number.MIN_VALUE;var m=_1.length,n=_1[0].length;if(m<n){var _10=isc.Math.$101u(isc.Math.$101p(_1),_2,_4,_3);if(_10!=null){var _11=_10.U;_10.U=_10.V;_10.V=_11}
return _10}
var _12=isc.Math.$101k,_13=Math.min(m,n),q=(_5?_13:m),p=Math.min(n,m+1),_16=Math.min(m-1,n),_17=Math.max(0,Math.min(n-2,m)),_1=isc.Math.$101s(_1),s=new Array(p),U=isc.Math.$101q(m,q),V=isc.Math.$101q(n,n),e=isc.Math.$101r(n),_22=isc.Math.$101r(m);for(var k=0,_24=Math.max(_16,_17);k<_24;++k){if(k<_16){s[k]=0;for(var i=k;i<m;++i){s[k]=_12(s[k],_1[i][k])}
if(s[k]!=0){if(_1[k][k]<0){s[k]=-s[k]}
for(var i=k;i<m;++i){_1[i][k]/=s[k]}
_1[k][k]+=1}
s[k]=-s[k]}
for(var j=k+1;j<n;++j){if(k<_16&&s[k]!=0){var t=0;for(var i=k;i<m;++i){t+=_1[i][k]*_1[i][j]}
t=-t/_1[k][k];for(var i=k;i<m;++i){_1[i][j]+=t*_1[i][k]}}
e[j]=_1[k][j]}
if(_3&&k<_16){for(var i=k;i<m;++i){U[i][k]=_1[i][k]}}
if(k<_17){e[k]=0;for(var i=k+1;i<n;++i){e[k]=_12(e[k],e[i])}
if(e[k]!=0){if(e[k+1]<0){e[k]=-e[k]}
for(var i=k+1;i<n;++i){e[i]/=e[k]}
e[k+1]+=1}
e[k]=-e[k];if(k+1<m&&e[k]!=0){for(var i=k+1;i<m;++i){_22[i]=0}
for(var j=k+1;j<n;++j){for(var i=k+1;i<m;++i){_22[i]+=e[j]*_1[i][j]}}
for(var j=k+1;j<n;++j){var t=-e[j]/e[k+1];for(var i=k+1;i<m;++i){_1[i][j]+=t*_22[i]}}}
if(_4){for(var i=k+1;i<n;++i){V[i][k]=e[i]}}}}
if(_16<n){s[_16]=_1[_16][_16]}
if(m<p){s[p-1]=0}
if(_17+1<p){e[_17]=_1[_17][p-1]}
e[p-1]=0;if(_3){for(var j=_16;j<q;++j){for(var i=0;i<m;++i){U[i][j]=0}
U[j][j]=1}
for(var k=_16-1;k>=0;--k){if(s[k]!=0){for(var j=k+1;j<q;++j){var t=0;for(var i=k;i<m;++i){t+=U[i][k]*U[i][j]}
t=-t/U[k][k];for(var i=k;i<m;++i){U[i][j]+=t*U[i][k]}}
for(var i=k;i<m;++i){U[i][k]=-U[i][k]}
U[k][k]+=1;for(var i=0;i<k-1;++i){U[i][k]=0}}else{for(var i=0;i<m;++i){U[i][k]=0}
U[k][k]=1}}}
if(_4){for(var k=n-1;k>=0;--k){if(k<_17&&e[k]!=0){for(var j=k+1;j<_13;++j){var t=0;for(var i=k+1;i<n;++i){t+=V[i][k]*V[i][j]}
t=-t/V[k+1][k];for(var i=k+1;i<n;++i){V[i][j]+=t*V[i][k]}}}
for(var i=0;i<n;++i){V[i][k]=0}
V[k][k]=1}}
var _28=p-1,_29=0;while(p>0){if(_29>_2){return null}
var k,_30;for(k=p-2;k>=-1;--k){if(k==-1){break}
if(Math.abs(e[k])<=_7+_6*(Math.abs(s[k])+Math.abs(s[k+1]))){e[k]=0;break}}
if(k==p-2){_30=4}else{var _31;for(_31=p-1;_31>=k;--_31){if(_31==k){break}
var t=(_31!=p?Math.abs(e[_31]):0)+(_31!=k+1?Math.abs(e[_31-1]):0);if(Math.abs(s[_31])<=_7+_6*t){s[_31]=0;break}}
if(_31==k){_30=3}else if(_31==p-1){_30=1}else{_30=2;k=_31}}
++k;switch(_30){case 1:var f=e[p-2];e[p-2]=0;for(var j=p-2;j>=k;--j){var t=_12(s[j],f),_33=s[j]/t,_34=f/t;s[j]=t;if(j!=k){f=-_34*e[j-1];e[j-1]=_33*e[j-1]}
if(_4){for(var i=0;i<n;++i){t=_33*V[i][j]+_34*V[i][p-1];V[i][p-1]=-_34*V[i][j]+_33*V[i][p-1];V[i][j]=t}}}
break;case 2:var f=e[k-1];e[k-1]=0;for(var j=k;j<p;++j){var t=_12(s[j],f),_33=s[j]/t,_34=f/t;s[j]=t;f=-_34*e[j];e[j]=_33*e[j];if(_3){for(var i=0;i<m;++i){t=_33*U[i][j]+_34*U[i][k-1];U[i][k-1]=-_34*U[i][j]+_33*U[i][k-1];U[i][j]=t}}}
break;case 3:var _35=Math.max(Math.abs(s[p-1]),Math.abs(s[p-2]),Math.abs(e[p-2]),Math.abs(s[k]),Math.abs(e[k])),_36=s[p-1]/_35,_37=s[p-2]/_35,_38=e[p-2]/_35,_39=s[k]/_35,_40=e[k]/_35,b=((_37+_36)*(_37-_36)+_38*_38)/2,c=_36*_38*_36*_38,_43=0;if(!(b==0&&c==0)){_43=Math.sqrt(b*b+c);if(b<0){_43=-_43}
_43=c/(b+_43)}
var f=(_39+_36)*(_39-_36)+_43,g=_39*_40;for(var j=k;j<p-1;++j){var t=_12(f,g),_33=f/t,_34=g/t;if(j!=k){e[j-1]=t}
f=_33*s[j]+_34*e[j];e[j]=_33*e[j]-_34*s[j];g=_34*s[j+1];s[j+1]=_33*s[j+1];if(_4){for(var i=0;i<n;++i){t=_33*V[i][j]+_34*V[i][j+1];V[i][j+1]=-_34*V[i][j]+_33*V[i][j+1];V[i][j]=t}}
t=_12(f,g);_33=f/t;_34=g/t;s[j]=t;f=_33*e[j]+_34*s[j+1];s[j+1]=-_34*e[j]+_33*s[j+1];g=_34*e[j+1];e[j+1]=_33*e[j+1];if(_3&&j<m-1){for(var i=0;i<m;++i){t=_33*U[i][j]+_34*U[i][j+1];U[i][j+1]=-_34*U[i][j]+_33*U[i][j+1];U[i][j]=t}}}
e[p-2]=f;++_29;break;case 4:if(s[k]<=0){s[k]=-s[k];if(_4){for(var i=0;i<=_28;++i){V[i][k]=-V[i][k]}}}
for(;k<_28;++k){if(s[k]>=s[k+1]){break}
var t=s[k];s[k]=s[k+1];s[k+1]=t;if(_4&&k<n-1){for(var i=0;i<n;++i){t=V[i][k+1];V[i][k+1]=V[i][k];V[i][k]=t}}
if(_3&&k<m-1){for(var i=0;i<m;++i){t=U[i][k+1];U[i][k+1]=U[i][k];U[i][k]=t}}}
_29=0;--p;break}}
return{U:U,s:s,V:V}},$101v:function(_1,_2,_3){var m=_1.length,n=_3.length,l=Math.min(m,n),A=isc.Math.$101o(m,n);for(var i=m;i--;){var _9=_1[i],_10=A[i];for(var j=n;j--;){var _12=0,_13=_3[j];for(var k=l;k--;){_12+=_9[k]*_2[k]*_13[k]}
_10[j]=_12}}
return A}};isc.defineClass("AffineTransform").addClassProperties({getRotateTransform:function(_1,_2,_3){var c=isc.Math.cosdeg(_1),s=isc.Math.sindeg(_1);return isc.AffineTransform.create({m00:c,m01:-s,m02:-c*_2+s*_3+_2,m10:s,m11:c,m12:-s*_2-c*_3+_3})},getTranslateTransform:function(_1,_2){return isc.AffineTransform.create({m00:1,m01:0,m02:_1,m10:0,m11:1,m12:_2})}});isc.A=isc.AffineTransform.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.m00=1;isc.A.m01=0;isc.A.m02=0;isc.A.m10=0;isc.A.m11=1;isc.A.m12=0;isc.B.push(isc.A.duplicate=function isc_AffineTransform_duplicate(){return isc.AffineTransform.create({m00:this.m00,m01:this.m01,m02:this.m02,m10:this.m10,m11:this.m11,m12:this.m12})},isc.A.getDeterminant=function isc_AffineTransform_getDeterminant(){return this.m00*this.m11-this.m10*this.m01},isc.A.getInverse=function isc_AffineTransform_getInverse(){var _1=this.getDeterminant(),_2=isc.isA.Number(_1)&&_1!=0;if(!_2)return null;return isc.AffineTransform.create({m00:this.m11/_1,m10:-this.m10/_1,m01:-this.m01/_1,m11:this.m00/_1,m02:(this.m01*this.m12-this.m11*this.m02)/_1,m12:(this.m10*this.m02-this.m00*this.m12)/_1})},isc.A.leftMultiply=function isc_AffineTransform_leftMultiply(_1){var _2=this.m00,_3=this.m10;this.m00=_1.m00*_2+_1.m01*_3;this.m10=_1.m10*_2+_1.m11*_3;_2=this.m01;_3=this.m11;this.m01=_1.m00*_2+_1.m01*_3;this.m11=_1.m10*_2+_1.m11*_3;_2=this.m02;_3=this.m12;this.m02=_1.m00*_2+_1.m01*_3+_1.m02;this.m12=_1.m10*_2+_1.m11*_3+_1.m12;return this},isc.A.rightMultiply=function isc_AffineTransform_rightMultiply(_1){var _2=this.m00,_3=this.m01;this.m00=_2*_1.m00+_3*_1.m10;this.m01=_2*_1.m01+_3*_1.m11;this.m02=_2*_1.m02+_3*_1.m12+this.m02;_2=this.m10;_3=this.m11;this.m10=_2*_1.m00+_3*_1.m10;this.m11=_2*_1.m01+_3*_1.m11;this.m12=_2*_1.m02+_3*_1.m12+this.m12;return this},isc.A.preRotate=function isc_AffineTransform_preRotate(_1,_2,_3){return this.leftMultiply(isc.AffineTransform.getRotateTransform(_1,_2,_3))},isc.A.rotate=function isc_AffineTransform_rotate(_1,_2,_3){return this.rightMultiply(isc.AffineTransform.getRotateTransform(_1,_2,_3))},isc.A.preScale=function isc_AffineTransform_preScale(_1,_2){this.m00*=_1;this.m01*=_1;this.m02*=_1;this.m10*=_2;this.m11*=_2;this.m12*=_2;return this},isc.A.scale=function isc_AffineTransform_scale(_1,_2){this.m00*=_1;this.m01*=_2;this.m10*=_1;this.m11*=_2;return this},isc.A.preTranslate=function isc_AffineTransform_preTranslate(_1,_2){this.m02+=_1;this.m12+=_2;return this},isc.A.translate=function isc_AffineTransform_translate(_1,_2){this.m02+=this.m00*_1+this.m01*_2;this.m12+=this.m10*_1+this.m11*_2;return this},isc.A.transform=function isc_AffineTransform_transform(_1,_2){return{v0:this.m00*_1+this.m01*_2+this.m02,v1:this.m10*_1+this.m11*_2+this.m12}});isc.B._maxIndex=isc.C+12;isc.AffineTransform.getPrototype().toString=function(){return"["+this.m00+" , "+this.m01+" , "+this.m02+"]\n["+this.m10+" , "+this.m11+" , "+this.m12+"]"};isc.defineClass("DateUtil");isc.A=isc.DateUtil;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.$1329=function isc_c_DateUtil__min(_1,_2){return(_1.getTime()<_2.getTime()?_1:_2)},isc.A.$133a=function isc_c_DateUtil__max(_1,_2){return(_1.getTime()<_2.getTime()?_2:_1)},isc.A.format=function isc_c_DateUtil_format(_1,_2){if(!isc.isA.String(_2)){isc.logWarn("Cannot use Date format '"+_2+"' - not a String");return _1.toString()}
var p=function p(_4){return(_4.toString().length==1)?"0"+_4:_4};return _2?_2.replace(/dd?d?d?|EE?E?E?|MM?M?M?|yy?y?y?|YY?Y?Y?|LL?L?L?|ww?|CC?|cc?|DD?|hh?|HH?|mm?|ss?|a|u/g,function(_2){switch(_2){case"hh":return p(_1.getHours()<13?_1.getHours():(_1.getHours()-12));case"h":return _1.getHours()<13?_1.getHours():(_1.getHours()-12);case"HH":return p(_1.getHours());case"H":return _1.getHours();case"mm":return p(_1.getMinutes());case"m":return _1.getMinutes();case"ss":return p(_1.getSeconds());case"s":return _1.getSeconds();case"yyyy":return _1.getFullYear();case"yy":return _1.getFullYear().toString().substring(2,4);case"YYYY":return isc.DateUtil.getWeekNumber(_1)[0];case"YY":return isc.DateUtil.getWeekNumber(_1)[0].toString().substring(2,4);case"dddd":case"EEEE":return _1.getDayName();case"ddd":case"E":case"EE":case"EEE":return _1.getShortDayName();case"dd":return p(_1.getDate());case"d":return _1.getDate().toString();case"DD":return p(isc.DateUtil.getDayNumber(_1));case"D":return isc.DateUtil.getDayNumber(_1).toString();case"u":return(_1.getDay()||7)+"";case"MMMM":return _1.getMonthName();case"MMM":return _1.getShortMonthName();case"MM":return p((_1.getMonth()+1));case"M":return _1.getMonth()+1;case"w":return isc.DateUtil.getWeekNumber(_1)[1];case"ww":return p(isc.DateUtil.getWeekNumber(_1)[1]);case"a":return _1.getHours()<13?isc.Time.AMIndicator:isc.Time.PMIndicator;default:return""}}):""},isc.A.getWeekNumber=function isc_c_DateUtil_getWeekNumber(_1){var d=new Date(_1);d.setHours(0,0,0);d.setDate(d.getDate()+4-(d.getDay()||7));var _3=new Date(d.getFullYear(),0,1);var _4=Math.ceil((((d-_3)/86400000)+1)/7);return[d.getFullYear(),_4]},isc.A.getDayNumber=function isc_c_DateUtil_getDayNumber(_1){var d=new Date(_1);d.setHours(0,0,0);var _3=new Date(d.getFullYear(),0,1);return Math.ceil(((d-_3)/86400000)+1)},isc.A.createLogicalDate=function isc_c_DateUtil_createLogicalDate(_1,_2,_3,_4){var d=new Date();d.setHours(12,0,0,0);_1=(_1!=null?_1:d.getFullYear());_2=(_2!=null?_2:d.getMonth());_3=(_3!=null?_3:d.getDate());d.setFullYear(_1,_2,_3);if(_4){var _6=(d.getFullYear()==_1&&d.getMonth()==_2&&d.getDate()==_3);if(!_6)return null}
d.logicalDate=true;return d});isc.B._maxIndex=isc.C+6;isc.addGlobal("timeStamp",function(){return new Date().getTime()});isc.addGlobal("timestamp",isc.timeStamp);Date.prototype.Class="Date";Date.Class="Date";isc.Date=Date;isc.A=Date;isc.A.INVALID_DATE_STRING="Invalid date format";isc.A=Date;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$64g={toUSShortDate:"MDY",toUSShortDateTime:"MDY",toUSShortDatetime:"MDY",toEuropeanShortDate:"DMY",toEuropeanShortDateTime:"DMY",toEuropeanShortDatetime:"DMY",toJapanShortDate:"YMD",toJapanShortDateTime:"YMD",toJapanShortDatetime:"YMD"};isc.A.$100d=(1000*60*60*24);isc.A.$100s=0;isc.A.dayNames=["Sunday","Monday","Tuesday","Wednesday","Thursday","Friday","Saturday","Sunday"];isc.A.monthNames=["January","February","March","April","May","June","July","August","September","October","November","December"];isc.B.push(isc.A.newInstance=function isc_Date_newInstance(_1,_2,_3,_4,_5,_6,_7){return new Date(_1,_2,_3,_4,_5,_6,_7)},isc.A.create=function isc_Date_create(_1,_2,_3,_4,_5,_6,_7){var _8;if(_1===_8)return new Date();if(_2===_8)return new Date(_1);if(_3===_8)_3=0;if(_4===_8)_4=0;if(_5===_8)_5=0;if(_6===_8)_6=0;if(_7===_8)_7=0;return new Date(_1,_2,_3,_4,_5,_6,_7)},isc.A.createLogicalDate=function isc_Date_createLogicalDate(_1,_2,_3,_4){return isc.DateUtil.createLogicalDate(_1,_2,_3,_4)},isc.A.createLogicalTime=function isc_Date_createLogicalTime(_1,_2,_3,_4){return isc.Time.createLogicalTime(_1,_2,_3,_4)},isc.A.createDatetime=function isc_Date_createDatetime(_1,_2,_3,_4,_5,_6,_7,_8){var _9=_4!=null,_10=_5!=null,_11=_6!=null;if(isc.isA.String(_4))_4=parseInt(_4||12,10);if(isc.isA.String(_5))_5=parseInt(_5||0,10);if(isc.isA.String(_6))_6=parseInt(_6||0,10);var _12;if(!isc.Time.$854){_12=new Date(_1,_2,_3);if(_9){if(_7!=null)_12.setHours(_4,_5,_6,_7);else if(_11)_12.setHours(_4,_5,_6);else if(_10)_12.setHours(_4,_5);else _12.setHours(_4)}
if(!_8)return _12;var _13=(_12.getFullYear()==_1&&_12.getMonth()==_2&&_12.getDate()==_3&&(!_9||_12.getHours()==_4)&&(!_10||_12.getMinutes()==_5)&&(!_11||_12.getSeconds()==_6));return(_13?_12:null)}else{if(_4==null)_4=0;if(_5==null)_5=0;if(_6==null)_6=0;if(_7==null)_7=0;_12=new Date(Date.UTC(_1,_2,_3,_4,_5,_6,_7));if(_8){var _13=(_12.getUTCFullYear()==_1&&_12.getUTCMonth()==_2&&_12.getUTCDate()==_3&&(!_9||_12.getUTCHours()==_4)&&(!_10||_12.getUTCMinutes()==_5)&&(!_11||_12.getUTCSeconds()==_6));if(!_13)_12=null}
if(_12!=null){_12.$68d(-isc.Time.UTCHoursDisplayOffset,-isc.Time.UTCMinutesDisplayOffset);_12.$68d(-isc.Time.getUTCHoursDisplayOffset(_12,0),-isc.Time.getUTCMinutesDisplayOffset(_12,0))}
return _12}},isc.A.getLogicalDateOnly=function isc_Date_getLogicalDateOnly(_1){if(!isc.isA.Date(_1)){isc.logWarn("getLogicalDateOnly() passed invalid value:"+_1+". Returning null.");return null}
var _2,_3,_4;if(_1.logicalDate){_2=_1.getFullYear();_3=_1.getMonth();_4=_1.getDate()}else{var _5=_1.$68g(isc.Time.getUTCHoursDisplayOffset(_1),isc.Time.getUTCMinutesDisplayOffset(_1));_5.$68d(0,_5.getTimezoneOffset());_3=_5.getMonth();_4=_5.getDate();_2=_5.getFullYear()}
return this.createLogicalDate(_2,_3,_4)},isc.A.getLogicalTimeOnly=function isc_Date_getLogicalTimeOnly(_1){if(!isc.isA.Date(_1)){isc.logWarn("getLogicalTimeOnly() passed invalid value:"+_1+". Returning null.");return null}
var _2=0,_3=0;if(!_1.logicalTime){_2=isc.Time.getUTCHoursDisplayOffset(_1);_3=isc.Time.getUTCMinutesDisplayOffset(_1)+_1.getTimezoneOffset()}
return this.createLogicalTime(_1.getHours()+_2,_1.getMinutes()+_3,_1.getSeconds(),_1.getMilliseconds())},isc.A.combineLogicalDateAndTime=function isc_Date_combineLogicalDateAndTime(_1,_2){var _3=isc.isA.Date(_1),_4=isc.isA.Date(_2);if(!_3||!_4){if(_3){return this.createDatetime(_1.getFullYear(),_1.getMonth(),_1.getDate(),0,0,0)}else if(_4){return _2.duplicate()}else{isc.logWarn("combineLogicalDateAndTime passed invalid parameters:"+_1+" and "+_2+". Returning null.");return null}}
var _5=_2.getHours(),_6=_2.getMinutes();return this.createDatetime(_1.getFullYear(),_1.getMonth(),_1.getDate(),_5,_6,_2.getSeconds(),_2.getMilliseconds())},isc.A.compareDates=function isc_Date_compareDates(_1,_2){if(_1==_2)return 0;var _3=(isc.isA.Date(_1)?_1.getTime():0),_4=(isc.isA.Date(_2)?_2.getTime():0);return _3>_4?-1:(_4>_3?1:0)},isc.A.compareLogicalDates=function isc_Date_compareLogicalDates(_1,_2){if(_1==_2)return 0;if(!isc.isA.Date(_1)||!isc.isA.Date(_2))return false;var _3=_1.getFullYear(),_4=_1.getMonth(),_5=_1.getDate(),_6=_2.getFullYear(),_7=_2.getMonth(),_8=_2.getDate();var _9=_3*10000+_4*100+_5,_10=_6*10000+_7*100+_8;return _9>_10?-1:(_10>_9?1:0)},isc.A.getJulianDayNumber=function isc_Date_getJulianDayNumber(_1,_2,_3){var y=_1,m=_2+1,d=_3;if(m<=2){--y;m+=12}
var a=parseInt(y/100),b=parseInt(a/4),c=2-a+b,e=parseInt(365.25*(y+4716)),f=parseInt(30.6001*(m+1))
return c+d+e+f-1524},isc.A.$1091=function isc_Date__getWeekdayCounts(){var _1=isc.Date.getWeekendDays();var _2=_1.$1092;if(!_2){var _3={},_4=0;for(var i=0;i<_1.length;++i){if(!_3[_1[i]]){++_4;_3[_1[i]]=true}}
_2=[];for(var d=0;d<=6;++d){var _7=0;var _8=[0];for(var _9=1;_9<7;++_9){if(!_3[(d+_9-1)%7])++_7;_8.push(_7)}
_2[d]=_8}
_2.$1093=_4;_1.$1092=_2}
return _2},isc.A.$1094=function isc_Date__getDayDiff(_1,_2,_3,_4){var _5,_6;var _7=isc.Date.compareDates(_1,_2);var _8=(_7>0?1:-1);if(_7>=0){if(_4!==false){_5=isc.Date.getLogicalDateOnly(_1);_6=isc.Date.getLogicalDateOnly(_2)}else{_5=_1;_6=_2}}else{if(_4!==false){_5=isc.Date.getLogicalDateOnly(_2);_6=isc.Date.getLogicalDateOnly(_1)}else{_5=_2;_6=_1}}
var _9=isc.Date.getJulianDayNumber(_5.getFullYear(),_5.getMonth(),_5.getDate()),_10=isc.Date.getJulianDayNumber(_6.getFullYear(),_6.getMonth(),_6.getDate());if(_3){var _11=_10-_9;var _12=isc.Date.$1091();return _8*(parseInt(_11/7)*(7-_12.$1093)+_12[_5.getDay()][_11%7])}else{return _8*(_10-_9)}},isc.A.setInputFormat=function isc_Date_setInputFormat(_1){this.$ei=_1},isc.A.getInputFormat=function isc_Date_getInputFormat(){if(this.$ei!=null)return this.$ei;return this.mapDisplayFormatToInputFormat("toShortDate")},isc.A.mapDisplayFormatToInputFormat=function isc_Date_mapDisplayFormatToInputFormat(_1){if(_1==null||_1=="toShortDate"){_1=Date.prototype.$el}else if(_1=="toNormalDate"){_1=Date.prototype.formatter}
if(isc.isA.Function(_1)){isc.Log.logInfo("Unable to determine input format associated with display format function - returning default input format","Date");return this.$ei||"MDY"}
var _2=this.$64g[_1];if(_2!=null&&isc.isA.String(_2))return _2;if(_1=="toSerializeableDate")return this.parseSchemaDate;isc.Log.logInfo("Unable to determine input format associated with display format "+_1+" - returning default input format","Date");return this.$ei||"MDY"},isc.A.parseInput=function isc_Date_parseInput(_1,_2,_3,_4,_5){var _6=(_5==false);if(isc.isA.Date(_1))return _1;if(!isc.isA.String(_1)||isc.isAn.emptyString(_1)){return null}
var _7=_1;_1=_1.trim();if(_1.startsWith("$$DATESTAMP$$:")){return new Date(parseInt(_1.substring(14)))}
if(_1.startsWith("$$DATE$$:")){_1=_1.substring(9).trimLeft()}
if(_2==null)_2=this.getInputFormat();if(isc.isA.Function(Date[_2]))_2=Date[_2];if(isc.isA.Function(_2)){return _2(_7,_3,_4)}
var _8=this.$ej(_1,_2);if(_8!=null){var _9=_8[0],_10=_9&&_9.contains("-");if(_9&&_10)_9=_9.replaceAll("-","");if(_9){if(_9.length<=2){_9=parseInt(_9,10);if(_3!=null){if(_9<_3)_9+=2000;else _9+=1900}
_8[0]=_9}else if(_9.length==3){_8[0]="0"+_9.toString()}else{_8[0]=_9}
if(_10)_8[0]="-"+_8[0]}
if(_6){return Date.createLogicalDate(_8[0],_8[1],_8[2],_4)}else{return Date.createDatetime(_8[0],_8[1],_8[2],_8[3],_8[4],_8[5],null,_4)}}else{return null}},isc.A.isDatetimeString=function isc_Date_isDatetimeString(_1,_2){_2=_2||isc.Date.getInputFormat();if(!isc.isA.Function(_2)){var _3=this.$ej(_1,_2,false);if(_3==null)return false;return(_3[3]!=null&&!isc.isA.emptyString(_3[3]))&&(_3[4]!=null&&!isc.isA.emptyString(_3[4]))}
if(!_1.contains(" "))return false;var _4=_1.lastIndexOf(":");if(_4<1)return false;if(isNaN(_1.substring(_4-1,_4))||isNaN(_1.substring(_4+1,_4+2)))
{return false}
return true},isc.A.parseSchemaDate=function isc_Date_parseSchemaDate(_1){if(isc.isA.Date(_1))return _1;if(!isc.isA.String(_1))_1=(_1.toString?_1.toString():_1+"");var _2=_1.match(/(\d{4})[\/-](\d{2})[\/-](\d{2})([T ](\d{2}):(\d{2})(:(\d{2}))?)?(\.(\d+))?([+-]\d\d?:\d{2}|Z)?/);var _3=8;var _4=10;var _5=11;if(_2==null)return null;_1=_1.trim();var _6;if(!_2[4]){if(_1.length>10&&_1.contains(" "))return null;_6=Date.createLogicalDate(_2[1],_2[2]-1,_2[3])}else if(!_2[_4]){_6=new Date(Date.UTC(_2[1],_2[2]-1,_2[3],_2[5],_2[6],_2[_3]||0))}else{var _7=_2[_4];if(_7.length!=3){var _8=Math.pow(10,3-_7.length);_7=Math.round(parseInt(_7,10)*_8)}
_6=new Date(Date.UTC(_2[1],_2[2]-1,_2[3],_2[5],_2[6],_2[_3]||0,_7))}
if(_2[_5]&&_2[_5].toLowerCase()!="z"){var _9=_2[_5].split(":"),H=_9[0],_11=H&&H.startsWith("-"),M=_9[1];H=parseInt(H,10);M=parseInt(M,10);var _13=_6.getTime();if(isc.isA.Number(H))_13-=(3600000*H);if(isc.isA.Number(M))_13-=(60000*M*(_11?-1:1));_6.setTime(_13)}
return _6},isc.A.parseDate=function isc_Date_parseDate(_1,_2,_3,_4){return this.parseInput(_1,_2,_3,_4)},isc.A.parseDateTime=function isc_Date_parseDateTime(_1,_2,_3,_4){return this.parseDatetime(_1,_2,_3,_4)},isc.A.parseDatetime=function isc_Date_parseDatetime(_1,_2,_3,_4){return this.parseInput(_1,_2,_3,_4)},isc.A.parseServerDate=function isc_Date_parseServerDate(_1,_2,_3){return Date.createLogicalDate(_1,_2,_3)},isc.A.parseServerTime=function isc_Date_parseServerTime(_1,_2,_3){return Date.createLogicalTime(_1,_2,_3)},isc.A.$ej=function isc_Date__splitDateString(_1,_2,_3){var _4=isc.isA.Function(_2);if(_3==null)_3=true;var _5,_6,_7,_8,_9,_10;var _11=_2&&!_4?_2.indexOf("M"):0,_12=_2&&!_4?_2.indexOf("D"):1,_13=_2&&!_4?_2.indexOf("Y"):2;if(isc.Browser.isSafari&&isc.Browser.safariVersion<=312){var _14=this.$ek(_1,_11,_12,_13,_3);_7=_14[0];_5=_14[1];_6=_14[2];_8=_14[3];_9=_14[4];_10=_14[5]}else{var _15=new RegExp(/^\s*(-?\d{1,4})[^\d](-?\d{1,4})[^\d](-?\d{1,4})([^\d](\d{1,2})[^\d](\d\d)[^\d]?(\d\d)?)?\s*$/),_16=_1.match(_15);if(_16==null)return null;_5=_16[_11+1]-1;_6=_16[_12+1];_7=_16[_13+1];_8=_16[5];if(_3&&_8==null)_8=0;_9=_16[6];if(_3&&_16[6]==null)_9=0;_10=_16[7];if(_3&&_16[7]==null)_10=0}
var _17=_3?isc.isA.Number(_7-_5-_6-_8-_9-_10):isc.isA.Number(_7-_5-_6);if(_17){return([_7,_5,_6,_8!=null?_8%24:null,_9,_10])}
else return null},isc.A.setNormalDisplayFormat=function isc_Date_setNormalDisplayFormat(_1){if(isc.isA.Function(Date.prototype[_1])||isc.isA.Function(_1)||isc.isA.String(_1))
{Date.prototype.formatter=_1}},isc.A.setNormalDateDisplayFormat=function isc_Date_setNormalDateDisplayFormat(_1){this.setNormalDisplayFormat(_1)},isc.A.setNormalDatetimeDisplayFormat=function isc_Date_setNormalDatetimeDisplayFormat(_1){if(isc.isA.Function(Date.prototype[_1])||isc.isA.Function(_1)||isc.isA.String(_1))
{Date.prototype.datetimeFormatter=_1}},isc.A.setShortDisplayFormat=function isc_Date_setShortDisplayFormat(_1){if(isc.isA.Function(Date.prototype[_1])||isc.isA.Function(_1)||isc.isA.String(_1))
{Date.prototype.$el=_1}},isc.A.setDefaultDateSeparator=function isc_Date_setDefaultDateSeparator(_1){Date.prototype.$em=[,,,,_1,,,,,_1,,,,null];Date.prototype.$665=_1},isc.A.getDefaultDateSeparator=function isc_Date_getDefaultDateSeparator(_1){if(Date.prototype.$665)return Date.prototype.$665;else return"/"},isc.A.setShortDatetimeDisplayFormat=function isc_Date_setShortDatetimeDisplayFormat(_1){if(isc.isA.Function(Date.prototype[_1])||isc.isA.Function(_1)||isc.isA.String(_1))
{Date.prototype.$68e=_1}},isc.A.setFiscalCalendar=function isc_Date_setFiscalCalendar(_1){if(!_1.fiscalYears)_1.fiscalYears=[];Date.prototype.fiscalCalendar=_1;Date.$100e(new Date())},isc.A.getFiscalCalendar=function isc_Date_getFiscalCalendar(){if(!Date.prototype.fiscalCalendar.fiscalYears){Date.prototype.fiscalCalendar.fiscalYears=[]}
return Date.prototype.fiscalCalendar},isc.A.getFiscalStartDate=function isc_Date_getFiscalStartDate(_1,_2){var _3=Date.$100e(_1,_2);return new Date(_3.year,_3.month,_3.date)},isc.A.getFiscalEndDate=function isc_Date_getFiscalEndDate(_1,_2){var _3=Date.$100e(_1,_2),_4=Date.getFiscalYear(_3.fiscalYear+1);if(_4.year<_3.fiscalYear)_4=Date.getFiscalYear(_4.fiscalYear+1);var _5=new Date(_4.startDate.getTime()-1);return _5},isc.A.$100e=function isc_Date__getFiscalYearObjectForDate(_1,_2){_2=_2||Date.getFiscalCalendar();if(!_2.fiscalYears)_2.fiscalYears=[];var _3=_2.fiscalYears;var _4=_2.defaultDate,_5=_2.defaultMonth;if(_4==null)_4=1;if(_5==null)_5=0;var _6=true;for(var i=0;i<_3.length;i++){if(_3[i].startDate==null||_3[i].endDate==null){_6=false;_3[i].startDate=Date.createDatetime(_3[i].year,_3[i].month,_3[i].date)}}
_3.setSort({property:"startDate",direction:"ascending"});if(!_6){for(var i=0;i<_3.length;i++){var _8;var _9=_3[i],_10=_3[i+1];if(_10&&(_10.year==_9.year||(_10.year==_9.year+1))){_9.endDate=new Date(_10.startDate.getTime()-1)}else{_9.endDate=Date.createDatetime(_9.year+1,_5,_4);_9.endDate.setTime(_9.endDate.getTime()-1)}}}
if(!isc.isA.Date(_1)){var _11=_3.find("fiscalYear",_1);if(_11!=null){return _11}
var _12=_1;if(_2.defaultYearMode!="start"&&(_5!=0||_4!=1))
{_12-=1}
var _13={year:_12,fiscalYear:_1,month:_5,date:_4,startDate:isc.DateUtil.getStartOf(new Date(_12,_5,_4))};return _13}else{var _14=_1.getTime();_3.sortByProperty("startDate",Array.ASCENDING);for(var i=0;i<_3.length;i++){if(_14<_3[i].startDate.getTime())break;if(_14<=_3[i].endDate.getTime()){return _3[i]}}
var _15=_1.getFullYear(),_16=Date.createDatetime(_15,_5,_4);if(_16.getTime()>_14){_15-=1;_16=Date.createDatetime(_15,_5,_4)}
var _8=Date.createDatetime(_15+1,_5,_4);_8.setTime(_8.getTime()-1);var _17=_8.getTime();for(var i=0;i<_3.length;i++){if(_17<_3[i].endDate.getTime()){continue}else{if(_17>_3[i].startDate.getTime()){_8=new Date(_3[i].startDate.getTime()-1)}else break}}
var _18=_15;if(_8.getFullYear()!=_16.getFullYear()&&_2.defaultYearMode!="start")
{if(_8.getFullYear()<_1.getFullYear()){_18=_1.getFullYear();var _19=new Date(_18,_5,_4);if(_1.getTime()>_19.getTime()){_18++}}else{_18=_8.getFullYear()}}
return{year:_15,fiscalYear:_18,date:_4,month:_5}}},isc.A.setShowChooserFiscalYearPickers=function isc_Date_setShowChooserFiscalYearPickers(_1){isc.DateItem.addProperties({showChooserFiscalYearPicker:_1});isc.DateChooser.addProperties({showFiscalYearChooser:_1})},isc.A.setShowChooserWeekPickers=function isc_Date_setShowChooserWeekPickers(_1){isc.DateItem.addProperties({showChooserWeekPicker:_1});isc.DateChooser.addProperties({showWeekChooser:_1})},isc.A.setFirstDayOfWeek=function isc_Date_setFirstDayOfWeek(_1){if(isc.DateChooser){if(_1==null||_1<0||_1>6)
_1=0;isc.DateChooser.addProperties({firstDayOfWeek:_1})}},isc.A.getFirstDayOfWeek=function isc_Date_getFirstDayOfWeek(){if(isc.DateChooser){return isc.DateChooser.getInstanceProperty("firstDayOfWeek")}
return 0},isc.A.getFiscalYear=function isc_Date_getFiscalYear(_1,_2){return Date.$100e(_1,_2)},isc.A.getFiscalWeek=function isc_Date_getFiscalWeek(_1,_2,_3){_2=_2||Date.getFiscalCalendar();var _4=Date.getFiscalStartDate(_1,_2),_5=Date.getLogicalDateOnly(_4),_6=_1.logicalDate?_1:Date.getLogicalDateOnly(_1);return this.$100t(_6,_5,_3)},isc.A.$100t=function isc_Date__getWeekOffset(_1,_2,_3){var _4=Math.round((_1-_2)/86400000);var _5=0;if(_3==null){_3=isc.DateChooser.getInstanceProperty("firstDayOfWeek")}
if(_3!=null){_5=_2.getDay()-_3;if(_5<0)_5+=7}
return Math.ceil((_4+_5)/7)},isc.A.setFormatter=function isc_Date_setFormatter(_1){Date.setNormalDisplayFormat(_1)},isc.A.setLocaleStringFormatter=function isc_Date_setLocaleStringFormatter(_1){if(isc.isA.Function(Date.prototype[_1])||isc.isA.Function(_1))
Date.prototype.localeStringFormatter=_1},isc.A.getShortMonthNames=function isc_Date_getShortMonthNames(_1){_1=_1||3;var _2=Date.shortMonthNames;if(_2==null)_2=Date.$41t;if(_2==null){var _3=Date.$41t=[];for(var i=0;i<12;i++){var _5=Date.createLogicalDate(2000,i,2);_3[i]=_5.deriveShortMonthName()}
_2=Date.$41t}
var _6=[];for(var i=0;i<12;i++){_6[i]=_2[i].substring(0,_1)}
return _6},isc.A.getMonthNames=function isc_Date_getMonthNames(){var _1=Date.monthNames;if(_1==null)_1=Date.$124r;if(_1==null){var _2=Date.$124r=[];for(var i=0;i<12;i++){var _4=Date.createLogicalDate(2000,i,2);_2[i]=_4.deriveMonthName()}
_1=Date.$124r}
return _1},isc.A.getShortDayNames=function isc_Date_getShortDayNames(_1){_1=_1||3;var _2=Date.shortDayNames;if(_2==null)_2=Date.$41s;if(_2==null){Date.$41s=[];var _3=new Date();_3.setDate(1);if(_3.getDay()>0)_3.setDate(_3.getDate()+(7-_3.getDay()));var _4=_3.getDate();for(var i=0;i<7;i++){_3.setDate(_4+i);Date.$41s[i]=_3.deriveShortDayName()}
_2=Date.$41s}
var _6=[];for(var i=0;i<7;i++){_6[i]=_2[i].substring(0,_1)}
return _6},isc.A.getDayNames=function isc_Date_getDayNames(){var _1=Date.dayNames;if(_1==null)_1=Date.$124s;if(_1==null){Date.$124s=[];var _2=new Date();_2.setDate(1);if(_2.getDay()>0)_2.setDate(_2.getDate()+(7-_2.getDay()));var _3=_2.getDate();for(var i=0;i<7;i++){_2.setDate(_3+i);Date.$41s[i]=_2.deriveDayName()}
_1=Date.$124s}
var _5=[];for(var i=0;i<7;i++){_5[i]=_1[i]}
return _5},isc.A.setWeekendDays=function isc_Date_setWeekendDays(_1){Date.weekendDays=_1},isc.A.getWeekendDays=function isc_Date_getWeekendDays(){var _1=Date.weekendDays;if(_1==null)_1=Date.$54i;if(_1==null){_1=Date.$54i=[0,6]}
return _1},isc.A.getFormattedDateRangeString=function isc_Date_getFormattedDateRangeString(_1,_2){if(_1!=null&&!isc.isA.Date(_1)){_1=null}
if(_2!=null&&!isc.isA.Date(_2)){_2=null}
var _3=_1?_1.getMonth():null,_4=_1?_1.getShortMonthName():null,_5=_1?_1.getFullYear():null,_6=_1?_1.getDate():null,_7=_2?_2.getMonth():null,_8=_2?_2.getShortMonthName():null,_9=_2?_2.getFullYear():null,_10=_2?_2.getDate():null,_11="";if(_1&&_2){if(_5==_9){if(_3==_7){if(_6==_10){_11=_4+" "+_1.getDate()+", "+_5}else{_11=_4+" "+_1.getDate()+" - "+_2.getDate()+", "+_5}}else{_11=_4+" "+_1.getDate()+" - "+_8+" "+_2.getDate()+", "+_5}}else{_11=_4+" "+_1.getDate()+", "+_5+" - "+_8+" "+_2.getDate()+", "+_9}}else if(_1){_11=_4+" "+_1.getDate()+", "+_5}else if(_2){_11=_8+" "+_2.getDate()+", "+_9}
return _11});isc.B._maxIndex=isc.C+53;isc.A=Date.prototype;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$em=[,,,,"/",,,,,"/",,,,null];isc.A.$en="MDY";isc.A.$eo="DMY";isc.A.$ep="YMD";isc.A.$en="MDY";isc.A.$w0="0";isc.A.$68f=[null,null];isc.B.push(isc.A.duplicate=function isc_Dat_duplicate(){var _1=new Date();_1.setTime(this.getTime());_1.logicalDate=this.logicalDate;_1.logicalTime=this.logicalTime;_1.$84l=this.$84l;_1.$84n=this.$84n
return _1},isc.A.clearTimeFields=function isc_Dat_clearTimeFields(){this.setHours(0);this.setMinutes(0);this.setSeconds(0);this.setMilliseconds(0);return this},isc.A.deriveShortDayName=function isc_Dat_deriveShortDayName(_1){var _2=this.toString();if(_1==null||_1<=0||_1>3)_1=3;return _2.substring(0,_1)},isc.A.deriveDayName=function isc_Dat_deriveDayName(){var _1=this.toString();var _2=_1.indexOf(" ");return _1.substring(0,_2)},isc.A.getShortDayName=function isc_Dat_getShortDayName(){return Date.getShortDayNames()[this.getDay()]},isc.A.getDayName=function isc_Dat_getDayName(){return Date.getDayNames()[this.getDay()]},isc.A.deriveShortMonthName=function isc_Dat_deriveShortMonthName(_1){var _2=this.toUTCString();var _3=8;if(_1==null||_1<0||_1>3)_1=3;if(_2.substring(6,7)==' '){_3=7}
return _2.substring(_3,(_3+_1))},isc.A.deriveMonthName=function isc_Dat_deriveMonthName(){var _1=this.toUTCString();var _2=8;if(_1.substring(6,7)==' '){_2=7}
var _3=_1.indexOf(" ",_2);return _1.substring(_2,(_2+_3))},isc.A.getShortMonthName=function isc_Dat_getShortMonthName(){return Date.getShortMonthNames()[this.getMonth()]},isc.A.getMonthName=function isc_Dat_getMonthName(){return Date.getMonthNames()[this.getMonth()]},isc.A.getShortYear=function isc_Dat_getShortYear(){var _1=this.getFullYear();return(_1%100).stringify(2)},isc.A.getWeek=function isc_Dat_getWeek(_1){var _2=this;if(!this.logicalDate){_2=Date.getLogicalDateOnly(this)}
var _3=Date.createLogicalDate(this.getFullYear(),0,1);return Date.$100t(_2,_3,_1)},isc.A.getFiscalCalendar=function isc_Dat_getFiscalCalendar(){return Date.getFiscalCalendar()},isc.A.getFiscalYear=function isc_Dat_getFiscalYear(_1){return Date.getFiscalYear(this,_1)},isc.A.getFiscalWeek=function isc_Dat_getFiscalWeek(_1,_2){return Date.getFiscalWeek(this,_1,_2)},isc.A.toDateStamp=function isc_Dat_toDateStamp(){return this.getUTCFullYear()+(this.getUTCMonth()+1).stringify()+this.getUTCDate().stringify()+"T"+this.getUTCHours().stringify()+this.getUTCMinutes().stringify()+this.getUTCSeconds().stringify()+"Z"},isc.A.toNormalDate=function isc_Dat_toNormalDate(_1,_2){if(!_1)_1=this.formatter;if(isc.isA.Function(_1)){return _1.apply(this,[_2])}else if(this[_1]){return this[_1](_2)}else if(isc.isA.String(_1)){return isc.DateUtil.format(this,_1)}},isc.A.toNormalDateTime=function isc_Dat_toNormalDateTime(_1,_2){return this.toNormalDatetime(_1,_2)},isc.A.toNormalDatetime=function isc_Dat_toNormalDatetime(_1,_2){if(!_1)_1=this.datetimeFormatter;return this.toNormalDate(_1,_2)},isc.A.toShortDate=function isc_Dat_toShortDate(_1,_2){if(!_1)_1=this.$el;if(isc.isA.Function(_1))return _1.apply(this,[_2]);else if(isc.isA.Function(this[_1])){if(_1=="toSerializeableDate")return this[_1]();return this[_1](_2)}else if(isc.isA.String(_1)){return isc.DateUtil.format(this,_1)}
isc.logWarn("Date.toShortDate() specified formatter not understood:"+_1);return this.toUSShortDate()},isc.A.toShortDateTime=function isc_Dat_toShortDateTime(_1,_2){return this.toShortDatetime(_1,_2)},isc.A.toShortDatetime=function isc_Dat_toShortDatetime(_1,_2){if(!_1)_1=this.$68e;return this.toShortDate(_1,_2)},isc.A.setDefaultDateSeparator=function isc_Dat_setDefaultDateSeparator(_1){this.$em=[,,,,_1,,,,,_1,,,,null];this.$665=_1},isc.A.getDefaultDateSeperator=function isc_Dat_getDefaultDateSeperator(_1){if(this.$665)return this.$665;else return"/"},isc.A.$68d=function isc_Dat__applyTimezoneOffset(_1,_2,_3){if(_3==null)_3=this.getTime();if(isc.isA.Number(_1))_3+=(3600000*_1);if(isc.isA.Number(_2))_3+=(60000*_2);this.setTime(_3)},isc.A.$68g=function isc_Dat__getTimezoneOffsetDate(_1,_2){var _3=Date.$68h;if(_3==null)_3=Date.$68h=new Date();_3.$68d(_1,_2,this.getTime());return _3},isc.A.$es=function isc_Dat__toShortDate(_1,_2){if(_2==null){_2=!this.logicalDate}
var _3=this.$em,_4,_5,_6;if(!_2||!isc.Time.$854){_4=this.getMonth()+1;_5=this.getDate();_6=this.getFullYear()}else{var _7=this.$68g(isc.Time.getUTCHoursDisplayOffset(this),isc.Time.getUTCMinutesDisplayOffset(this));_4=_7.getUTCMonth()+1;_5=_7.getUTCDate();_6=_7.getUTCFullYear()}
var _8,_9,_10;if(_1==this.$en){_8=0;_9=5;_10=10}else if(_1==this.$eo){_9=0;_8=5;_10=10}else if(_1==this.$ep){_10=0;_8=5;_9=10}else{_9=_1.indexOf("D")*5;_10=_1.indexOf("Y")*5;_8=_1.indexOf("M")*5}
_3[_9]=_5<10?this.$w0:null
isc.$bk(_3,_5,_9+1,3);_3[_8]=_4<10?this.$w0:null
isc.$bk(_3,_4,_8+1,3);_3[_10+1]=null;isc.$bk(_3,_6,_10,4);return _3.join(isc.emptyString)},isc.A.toUSShortDate=function isc_Dat_toUSShortDate(_1){return this.$es(this.$en,_1)},isc.A.$68i=function isc_Dat__toShortTime(_1){return isc.Time.toShortTime(this,"toShortPadded24HourTime")},isc.A.toUSShortDateTime=function isc_Dat_toUSShortDateTime(_1){return this.toUSShortDatetime(_1)},isc.A.toUSShortDatetime=function isc_Dat_toUSShortDatetime(_1){return this.toUSShortDate(_1)+" "+this.$68i(_1)},isc.A.toEuropeanShortDate=function isc_Dat_toEuropeanShortDate(_1){return this.$es(this.$eo,_1)},isc.A.toEuropeanShortDateTime=function isc_Dat_toEuropeanShortDateTime(_1){return this.toEuropeanShortDatetime()},isc.A.toEuropeanShortDatetime=function isc_Dat_toEuropeanShortDatetime(_1){return this.toEuropeanShortDate(_1)+" "+this.$68i(_1)},isc.A.toJapanShortDate=function isc_Dat_toJapanShortDate(_1){return this.$es(this.$ep,_1)},isc.A.toJapanShortDateTime=function isc_Dat_toJapanShortDateTime(_1){return this.toJapanShortDatetime(_1)},isc.A.toJapanShortDatetime=function isc_Dat_toJapanShortDatetime(_1){return this.toJapanShortDate(_1)+" "+this.$68i(_1)},isc.A.$eu=function isc_Dat__serialize(){if(isc.Comm.$ev){return isc.SB.concat('"'+this.toDBDate(),'"')}else{return isc.SB.concat("new Date(",this.getTime(),")")}},isc.A.$ew=function isc_Dat__xmlSerialize(_1,_2,_3,_4){return isc.Comm.$ex(_1,this.toSchemaDate(null,isc.Comm.$136q),_2||(this.logicalDate?"date":(this.logicalTime&&!isc.DataSource.serializeTimeAsDatetime?"time":"datetime")),_3,_4)},isc.A.toSchemaDate=function isc_Dat_toSchemaDate(_1,_2){if((_1=="date")||this.logicalDate){return isc.SB.concat(this.getFullYear().stringify(4),"-",(this.getMonth()+1).stringify(2),"-",this.getDate().stringify(2))};if((!isc.DataSource||!isc.DataSource.serializeTimeAsDatetime)&&(_1=="time"||this.logicalTime))
{var _3=isc.SB.concat(this.getHours().stringify(2),":",this.getMinutes().stringify(2),":",this.getSeconds().stringify(2));if(_2!==true){_3+="."+this.getUTCMilliseconds().stringify(3)};return _3}
var _3=isc.SB.concat(this.getUTCFullYear().stringify(4),"-",(this.getUTCMonth()+1).stringify(2),"-",this.getUTCDate().stringify(2),"T",this.getUTCHours().stringify(2),":",this.getUTCMinutes().stringify(2),":",this.getUTCSeconds().stringify(2));if(_2!==true){_3+="."+this.getUTCMilliseconds().stringify(3)};return _3},isc.A.toSerializeableDate=function isc_Dat_toSerializeableDate(_1){var _2=isc.SB.create();_2.append(this.getFullYear().stringify(4),"-",(this.getMonth()+1).stringify(2),"-",this.getDate().stringify(2));_2.append(isc.Comm.xmlSchemaMode?"T":" ",isc.Time.toShortTime(this,"toPadded24HourTime"));return _2.toString()},isc.A.toDBDate=function isc_Dat_toDBDate(){return isc.StringBuffer.concat("$$DATE$$:",this.toSerializeableDate())},isc.A.toDBDateTime=function isc_Dat_toDBDateTime(){return this.toDBDate()},isc.A.setFormatter=function isc_Dat_setFormatter(_1){this.setNormalDisplayFormat(_1)},isc.A.setLocaleStringFormatter=function isc_Dat_setLocaleStringFormatter(_1){if(isc.isA.Function(this[_1])||isc.isA.Function(_1))
this.localeStringFormatter=_1},isc.A.isBeforeToday=function isc_Dat_isBeforeToday(_1){var _2=new Date(this.getFullYear(),this.getMonth(),this.getDate(),0).getTime();if(_1.getTime()<_2)return true;else return false},isc.A.isToday=function isc_Dat_isToday(_1){if(this.getFullYear()==_1.getFullYear()&&this.getMonth()==_1.getMonth()&&this.getDate()==_1.getDate())
return true;else return false},isc.A.isTomorrow=function isc_Dat_isTomorrow(_1){var _2=new Date(this.getFullYear(),this.getMonth(),this.getDate()+1,0);var _3=new Date(this.getFullYear(),this.getMonth(),this.getDate()+1,23);var _4=_1.getTime();if(_4>=_2.getTime()&&_4<=_3.getTime()){return true}else{return false}},isc.A.isThisWeek=function isc_Dat_isThisWeek(_1){var _2=new Date(this.getFullYear(),this.getMonth(),this.getDate()-this.getDay(),0);var _3=new Date(this.getFullYear(),this.getMonth(),this.getDate()+(7-this.getDay()),23);var _4=_1.getTime();if(_4>=_2.getTime()&&_4<=_3.getTime()){return true}else{return false}},isc.A.isNextWeek=function isc_Dat_isNextWeek(_1){var _2=new Date(this.getFullYear(),this.getMonth(),(this.getDate()-this.getDay())+7,0);var _3=new Date(this.getFullYear(),this.getMonth(),(this.getDate()-this.getDay())+14,23);var _4=_1.getTime();if(_4>=_2.getTime()&&_4<=_3.getTime()){return true}else{return false}},isc.A.isNextMonth=function isc_Dat_isNextMonth(_1){var _2=new Date(this.getFullYear(),this.getMonth());_2.setMonth(_2.getMonth()+1);if(_2.getFullYear()==_1.getFullYear()&&_2.getMonth()==_1.getMonth()){return true}else{return false}});isc.B._maxIndex=isc.C+51;Date.prototype.toBrowserString=Date.prototype.toString;Date.prototype.toBrowserLocaleString=Date.prototype.toLocaleString;Date.prototype.fiscalCalendar={defaultMonth:0,defaultDate:1,fiscalYears:[]};if(!Date.prototype.formatter)Date.setNormalDateDisplayFormat("toLocaleString");if(!Date.prototype.datetimeFormatter)Date.setNormalDatetimeDisplayFormat("toLocaleString");if(!Date.prototype.$el)Date.setShortDisplayFormat("toUSShortDate");if(!Date.prototype.$68e)Date.setShortDatetimeDisplayFormat("toUSShortDatetime");Date.prototype.iscToLocaleString=function(){var _1=this.localeStringFormatter;if(isc.isA.Function(_1))return _1.apply(this);else if(this[_1])return this[_1]()}
if(!Date.prototype.localeStringFormatter)
Date.prototype.localeStringFormatter="toLocaleString";isc.A=Date;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.$ek=function isc_Date__splitDateViaSubstring(_1,_2,_3,_4){var _5=_4*3,_6=_1.substring(_5,_5+4);var _7=_6.length;var _8=0,_9=0;if(_2>_3)_8+=3;else _9+=3;if(_2>_4)_8+=_7+1;if(_3>_4)_9+=_7+1;var _10=_1.substring(_8,_8+2)-1;var _11=_1.substring(_9,_9+2);var _12=7+_7,_13=(_1.substring(_12,_12+2)||0),_14=(_1.substring(_12+3,_12+5)||0),_15=(_1.substring(_12+6,_12+8)||0);return[_6,_10,_11,_13,_14,_15]});isc.B._maxIndex=isc.C+1;isc.A=Date.prototype;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.toPrettyString=function isc_Dat_toPrettyString(){return this.toUSShortDatetime()});isc.B._maxIndex=isc.C+1;isc.A=Date;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.parseStandardDate=function isc_Date_parseStandardDate(_1){if(!isc.isA.String(_1))return null;var _2=_1.substring(0,4),_3=_1.substring(5,7)-1,_4=_1.substring(8,10),_5=_1.substring(11,13),_6=_1.substring(14,16),_7=_1.substring(17,19);if(_1.length<19){if(!isc.isA.Number(_2-_3-_4))return null}else{if(!isc.isA.Number(_2-_3-_4-_5-_6-_7))return null}
return new Date(_2,_3,_4,_5,_6,_7)},isc.A.parseSerializeableDate=function isc_Date_parseSerializeableDate(_1){return this.parseStandardDate(_1)},isc.A.parseDBDate=function isc_Date_parseDBDate(_1){if(isc.isA.String(_1)&&_1.startsWith("$$DATE$$:")){_1=_1.substring(9)
return this.parseStandardDate(_1)}
return null},isc.A.parseDateStamp=function isc_Date_parseDateStamp(_1){if(_1==null||isc.isA.Date(_1))return _1;var _2=new Date(Date.UTC(_1.substring(0,4),parseInt(_1.substring(4,6),10)-1,_1.substring(6,8),_1.substring(9,11),_1.substring(11,13),_1.substring(13,15)));if(isc.isA.Date(_2))return _2;else return null},isc.A.parseShortDate=function isc_Date_parseShortDate(_1,_2){return this.parseInput(_1,"MDY",_2)},isc.A.parseShortDateTime=function isc_Date_parseShortDateTime(_1,_2){return this.parseShortDate(_1,_2)},isc.A.parsePrettyString=function isc_Date_parsePrettyString(_1,_2){return this.parseShortDate(_1,_2)},isc.A.parseEuropeanShortDate=function isc_Date_parseEuropeanShortDate(_1,_2){return this.parseInput(_1,"DMY",_2)},isc.A.parseEuropeanShortDateTime=function isc_Date_parseEuropeanShortDateTime(_1,_2){return this.parseInput(_1,"DMY",_2)},isc.A.setToZeroTime=function isc_Date_setToZeroTime(_1){if(_1==null||!isc.isA.Date(_1))return _1;var _2=_1.logicalDate;_1.logicalDate=false;var _3=_1.getTime();var _4=isc.Time.getUTCHoursDisplayOffset(_1),_5=isc.Time.getUTCMinutesDisplayOffset(_1);if(_2){var _6=new Date(_1);_6.setHours(0);_6.setMinutes(0);var _7=isc.Time.getUTCHoursDisplayOffset(_6);if(_4!=_7){_4=_7}}
var _8=_4>0?24-_4:0-_4,_9=60-_5;if(_9>=60){_9-=60}else if(_9!=0){_8-=1}
var _10;if(_2){_10=_1.getDate()}else{var _11=_1.$68g(_4,_5);_10=_11.getUTCDate()}
_1.setUTCHours(_8);_1.setUTCMinutes(_9);var _12=_1.$68g(_4,_5),_13=_12.getUTCDate(),_14=_8;if(_13!=_10){var _15=_1.getTime()<_3;_14+=_15?24:-24;_1.setUTCHours(_14)}
if(_1.getUTCHours()!=_8){_1.setTime(_3);_1.setUTCHours(_14+1);if(_1.getUTCHours()!=_8+1){_1.setTime(_3);_1.setUTCHours(_14+2)}}});isc.B._maxIndex=isc.C+10;isc.A=isc.DateUtil;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$86v={s:true,S:true,mn:true,MN:true,h:true,H:true,d:true,D:true};isc.A.$85j={ms:"millisecond",s:"second",mn:"minute",h:"hour",d:"day",w:"week",m:"month",q:"quarter",y:"year",dc:"decade",c:"century"};isc.B.push(isc.A.mapRelativeDateShortcut=function isc_c_DateUtil_mapRelativeDateShortcut(_1,_2){switch(_1){case"$now":return"+0MS";case"$today":if(_2=="end"){return"+0D"}else{return"-0D"}
case"$startOfToday":return"-0D";case"$endOfToday":return"+0D";case"$yesterday":if(_2=="end"){return"-1d[+0D]"}else{return"-1D"}
case"$startOfYesterday":return"-1D";case"$endOfYesterday":return"-1d[+0D]";case"$tomorrow":if(_2=="end"){return"+1D"}else{return"+1d[-0D]"}
case"$startOfTomorrow":return"+1d[-0D]";case"$endOfTomorrow":return"+1D";case"$startOfWeek":return"-0W";case"$endOfWeek":return"+0W";case"$startOfMonth":return"-0M";case"$endOfMonth":return"+0M";case"$startOfYear":return"-0Y";case"$endOfYear":return"+0Y";case"$weekFromNow":if(_2=="end"){return"+1w[+0D]"}else{return"+1w[-0D]"}
case"$weekAgo":if(_2=="end"){return"-1w[+0D]"}else{return"-1w[-0D]"}
case"$monthFromNow":if(_2=="end"){return"+1m[+0D]"}else{return"+1m[-0D]"}
case"$monthAgo":if(_2=="end"){return"-1m[+0D]"}else{return"-1m[-0D]"}}
return _1},isc.A.getAbsoluteDate=function isc_c_DateUtil_getAbsoluteDate(_1,_2,_3,_4){if(this.isRelativeDate(_1)){if(!_3)_3=_1.rangePosition;_1=_1.value}
if(_1.startsWith("$")){_1=this.mapRelativeDateShortcut(_1,_3)}
var _5=_1,_6=_4?Date.createLogicalDate():new Date();if(_2!=null)_6.setTime(_2.getTime());var _7=this.getRelativeDateParts(_5);if(_7.qualifier){_7.qualifier=_7.qualifier.toUpperCase();var _8=this.getRelativeDateParts(_7.qualifier);var _9=["S","MN","H","D","W","M","Q","Y"];if(_9.contains(_8.period)){_6=this.dateAdd(_6,_8.period,_8.countValue,(_8.direction=="+"?1:-1),_4)}else{isc.logWarn("Invalid date-offset qualifier provided: "+_8.period+".  Valid options are: S, MN, H, D, W, M, Q and Y.")}}
var _10=this.dateAdd(_6,_7.period,_7.countValue,(_7.direction=="+"?1:-1),_4);if(_4)_10.isLogicalDate=true;return _10},isc.A.isRelativeDate=function isc_c_DateUtil_isRelativeDate(_1){if(isc.isA.Date(_1))return false;if(isc.isAn.Object(_1)&&_1._constructor=="RelativeDate")return true;return false},isc.A.getRelativeDateParts=function isc_c_DateUtil_getRelativeDateParts(_1){var _2=_1,_3=_2.substring(0,1),_4=_2.indexOf("["),_5=(_4>0?_2.substring(_4):null),_6=(_5!=null?_2.substring(1,_4):_2.substring(1)),_7=parseInt(_6),_8=_6.replace(_7,"");return{direction:(_3=="+"||_3=="-"?_3:"+"),qualifier:_5?_5.replace("[","").replace("]","").replace(",",""):null,countValue:isc.isA.Number(_7)?_7:0,period:_8?_8:_3}},isc.A.dateAdd=function isc_c_DateUtil_dateAdd(_1,_2,_3,_4,_5){var _6=false;if(_2==null)_2="d";if(_3==null)_3=1;if(_4==null)_4=1;if(_5==null)_5=_1.logicalDate;if(_2.length>2)_2=isc.DateUtil.getTimeUnitKey(_2);switch(_2){case"MS":case"ms":_1.setMilliseconds(_1.getMilliseconds()+(_3*_4));break;case"S":_6=true;case"s":_1.setSeconds(_1.getSeconds()+(_3*_4));break;case"MN":_6=true;case"mn":_1.setMinutes(_1.getMinutes()+(_3*_4));break;case"H":_6=true;case"h":_1.setHours(_1.getHours()+(_3*_4));break;case"D":_6=true;case"d":_1.setDate(_1.getDate()+(_3*_4));break;case"W":_6=true;case"w":_1.setDate(_1.getDate()+((_3*7)*_4));break;case"M":_6=true;case"m":var _7=isc.Date.createLogicalDate(_1.getFullYear(),_1.getMonth(),1);_7.setMonth(_7.getMonth()+(_3*_4));_7=isc.DateUtil.getEndOf(_7,_2,true);if(_7.getDate()<_1.getDate())_1.setDate(_7.getDate());_1.setMonth(_7.getMonth());_1.setFullYear(_7.getFullYear());break;case"Q":_6=true;case"q":_1.setMonth(_1.getMonth()+((_3*3)*_4));break;case"Y":_6=true;case"y":_1.setFullYear(_1.getFullYear()+(_3*_4));break;case"DC":_6=true;case"dc":_1.setFullYear(_1.getFullYear()+((_3*10)*_4));break;case"C":_6=true;case"c":_1.setFullYear(_1.getFullYear()+((_3*100)*_4));break}
if(_6){if(_4>0){_1=this.getEndOf(_1,_2,_5)}else{_1=this.getStartOf(_1,_2,_5)}}
return _1},isc.A.getStartOf=function isc_c_DateUtil_getStartOf(_1,_2,_3,_4){var _5,_6,_7,_8,_9,_10,_11;if(_3==null)_3=_1.logicalDate;if(_4==null&&isc.DateChooser)
_4=isc.DateChooser.getInstanceProperty("firstDayOfWeek");if(_3&&this.$86v[_2]==true){this.logInfo("DateUtil.getStartOf() passed period:"+_2+" for logical date. Ignoring");var _12=new Date(_1.getTime());_12.logicalDate=true;return _12}
if(!isc.Time.$854||_3){_6=_1.getMonth();_7=_1.getDate();_5=_1.getFullYear();_8=_1.getHours();_9=_1.getMinutes();_10=_1.getSeconds();_11=_1.getDay()}else{var _13=_1.$68g(isc.Time.getUTCHoursDisplayOffset(_1),isc.Time.getUTCMinutesDisplayOffset(_1));_6=_13.getUTCMonth();_7=_13.getUTCDate();_5=_13.getUTCFullYear();_8=_13.getUTCHours();_9=_13.getUTCMinutes();_10=_13.getUTCSeconds();_11=_13.getDay()}
switch(_2){case"s":case"S":return Date.createDatetime(_5,_6,_7,_8,_9,_10,0);case"mn":case"MN":return Date.createDatetime(_5,_6,_7,_8,_9,0,0);case"h":case"H":return Date.createDatetime(_5,_6,_7,_8,0,0,0);case"d":case"D":if(_3){return Date.createLogicalDate(_5,_6,_7)}else{return Date.createDatetime(_5,_6,_7,0,0,0,0)}
case"w":case"W":if(_3){return Date.createLogicalDate(_5,_6,(_7-(_11-_4)))}else{return Date.createDatetime(_5,_6,(_7-(_11-_4)),0,0,0,0)}
case"m":case"M":if(_3){return Date.createLogicalDate(_5,_6,1)}else{return Date.createDatetime(_5,_6,1,0,0,0,0)}
case"q":case"Q":var _14=_6-(_6%3);if(_3){return Date.createLogicalDate(_5,_14,1)}else{return Date.createDatetime(_5,_14,1,0,0,0,0)}
case"y":case"Y":if(_3){return Date.createLogicalDate(_5,0,1)}else{return Date.createDatetime(_5,0,1,0,0,0,0)}
case"dc":case"DC":var _15=_5-(_5%10);if(_3){return Date.createLogicalDate(_15,0,1)}else{return Date.createDatetime(_15,0,1,0,0,0,0)}
case"c":case"C":var _16=_5-(_5%100);if(_3){return Date.createLogicalDate(_16,0,1)}else{return Date.createDatetime(_16,0,1,0,0,0,0)}}
return _1.duplicate()},isc.A.getEndOf=function isc_c_DateUtil_getEndOf(_1,_2,_3,_4){var _5,_6,_7,_8,_9,_10,_11;if(_3==null)_3=_1.logicalDate;if(_4==null&&isc.DateChooser)
_4=isc.DateChooser.getInstanceProperty("firstDayOfWeek");if(_3&&this.$86v[_2]==true){this.logInfo("DateUtil.getEndOf() passed period:"+_2+" for logical date. Ignoring");var _12=new Date(_1.getTime());_12.logicalDate=true;return _12}
if(!isc.Time.$854||_3){_6=_1.getMonth();_7=_1.getDate();_5=_1.getFullYear();_8=_1.getHours();_9=_1.getMinutes();_10=_1.getSeconds();_11=_1.getDay()}else{var _13=_1.$68g(isc.Time.getUTCHoursDisplayOffset(_1),isc.Time.getUTCMinutesDisplayOffset(_1));_6=_13.getUTCMonth();_7=_13.getUTCDate();_5=_13.getUTCFullYear();_8=_13.getUTCHours();_9=_13.getUTCMinutes();_10=_13.getUTCSeconds();_11=_13.getDay()}
switch(_2){case"s":case"S":return Date.createDatetime(_5,_6,_7,_8,_9,_10,999);case"mn":case"MN":return Date.createDatetime(_5,_6,_7,_8,_9,59,999);case"h":case"H":return Date.createDatetime(_5,_6,_7,_8,59,59,999);case"d":case"D":if(_3){return Date.createLogicalDate(_5,_6,_7)}else{return Date.createDatetime(_5,_6,_7,23,59,59,999)}
case"w":case"W":var _14=_7+(6-(_11-_4));if(_3){return Date.createLogicalDate(_5,_6,_14)}else{return Date.createDatetime(_5,_6,_14,23,59,59,999)}
case"m":case"M":var _12;if(_3){_12=Date.createLogicalDate(_5,_6+1,1);_12.setTime(_12.getTime()-(24*60*60*1000))}else{_12=Date.createDatetime(_5,_6+1,1,0,0,0,0);_12.setTime(_12.getTime()-1)}
return _12;case"q":case"Q":var _15=_6+3-(_6%3),_12;if(_3){_12=Date.createLogicalDate(_5,_15,1);_12.setDate(_12.getDate()-1)}else{_12=Date.createDatetime(_5,_15,1,0,0,0,0);_12.setTime(_12.getTime()-1)}
return _12;case"y":case"Y":if(_3){return Date.createLogicalDate(_5,11,31)}else{return Date.createDatetime(_5,11,31,23,59,59,999)}
case"dc":case"DC":var _16=_5+10-(_5%10);if(_3){return Date.createLogicalDate(_16,11,31)}else{return Date.createDatetime(_16,11,31,23,59,59,999)}
case"c":case"C":var _17=_5+100-(_5%100);if(_3){return Date.createLogicalDate(_17,11,31)}else{return Date.createDatetime(_17,11,31,23,59,59,999)}}
return _1.duplicate()},isc.A.getTimeUnitName=function isc_c_DateUtil_getTimeUnitName(_1){var _2=_1.toLowerCase();return this.$85j[_2]||_2},isc.A.getTimeUnitKey=function isc_c_DateUtil_getTimeUnitKey(_1){if(this.$85k==null){this.$85k=isc.makeReverseMap(this.$85j)}
var _2=_1.toLowerCase();return this.$85k[_2]||_2},isc.A.compareTimeUnits=function isc_c_DateUtil_compareTimeUnits(_1,_2){var _3=this.getTimeUnitMilliseconds(_1),_4=this.getTimeUnitMilliseconds(_2);if(_3<=_4)return-1;if(_3==_4)return 0;return 1},isc.A.getTimeUnitMilliseconds=function isc_c_DateUtil_getTimeUnitMilliseconds(_1){var _2=this.getTimeUnitName(_1),l={millisecond:1,second:1000};l.minute=l.second*60;l.hour=l.minute*60;l.day=l.hour*24;l.week=l.day*7;l.month=l.day*30;l.quarter=l.month*3;l.year=l.day*365;l.decade=l.year*10;l.century=l.decade*10;return l[_2]},isc.A.convertPeriodUnit=function isc_c_DateUtil_convertPeriodUnit(_1,_2,_3){if(_2==_3)return _1;var _4=isc.DateUtil.getTimeUnitKey(_2),_5=isc.DateUtil.getTimeUnitKey(_3),_6=(_4=="ms"?_1:_1*isc.DateUtil.getTimeUnitMilliseconds(_4)),_7=_6/isc.DateUtil.getTimeUnitMilliseconds(_5);return _7},isc.A.getTimeUnitTitle=function isc_c_DateUtil_getTimeUnitTitle(_1){return isc.DateUtil.getTimeUnitName(_1)},isc.A.getPeriodLength=function isc_c_DateUtil_getPeriodLength(_1,_2,_3,_4){var _5=(_2.getTime()-_1.getTime());if(_3)_5=isc.DateUtil.convertPeriodUnit(_5,"ms",_3);return _5});isc.B._maxIndex=isc.C+14;String.prototype.Class="String";isc.$ey=function(){var _1=[Array,Number,Date].getProperty("prototype");for(var i=0;i<_1.length;i++){var _3=_1[i];if(_3.toLocaleString==null){_3.toLocaleString=_3.toString}}
var _4=String.prototype;if(!_4.toLocaleUpperCase){_4.toLocaleUpperCase=_4.toUpperCase;_4.toLocaleLowerCase=_4.toLowerCase}
if(isc.Browser.isMoz){var _5="x",_6=_5.toLocaleString();if(_6!=_5){_4.toBrowserLocaleString=_4.toLocaleString;_4.toLocaleString=_4.toString}
_5=true;_6=_5.toLocaleString();if(_6!=_5+""){Boolean.prototype.toBrowserLocaleString=Boolean.prototype.toLocaleString;Boolean.prototype.toLocaleString=Boolean.prototype.toString}}}
isc.$ey();isc.A=String;isc.A.$ez=new RegExp("'","g");isc.A.$e0=new RegExp("\"","g");isc.A=String.prototype;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.replaceAll=function isc_Strin_replaceAll(_1,_2){return isc.replaceAll(this,_1,_2)},isc.A.contains=function isc_Strin_contains(_1){if(_1&&!isc.isA.String(_1))_1=_1.toString();return isc.contains(this,_1)},isc.A.startsWith=function isc_Strin_startsWith(_1){if(_1&&!isc.isA.String(_1))_1=_1.toString();return isc.startsWith(this,_1)},isc.A.endsWith=function isc_Strin_endsWith(_1){if(_1&&!isc.isA.String(_1))_1=_1.toString();return isc.endsWith(this,_1)},isc.A.trim=function isc_Strin_trim(_1){var _2=_1||" \t\n\r",l=this.length,_4=0,_5=l-1,i=0;while(_4<l&&_2.contains(this.charAt(i++)))_4++;i=l-1;while(_5>=0&&_5>=_4&&_2.contains(this.charAt(i--)))_5--;return this.substring(_4,_5+1)},isc.A.convertTags=function isc_Strin_convertTags(_1,_2){return(_1?_1:"")+this.replace(/</g,"&lt;").replace(/>/g,"&gt;")+(_2?_2:"")},isc.A.asHTML=function isc_Strin_asHTML(_1){var s=this.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/(\r\n|\r|\n) /g,"<BR>&nbsp;").replace(/(\r\n|\r|\n)/g,"<BR>").replace(/\t/g,"&nbsp;&nbsp;&nbsp;&nbsp;");return(_1?s.replace(/ /g,"&nbsp;"):s.replace(/  /g," &nbsp;"))},isc.A.asAttValue=function isc_Strin_asAttValue(_1,_2){return String.asAttValue(this,_1,_2)},isc.A.unescapeHTML=function isc_Strin_unescapeHTML(){return this.replace(/&nbsp;/g," ").replace(/<BR>/gi,"\n").replace(/&gt;/g,">").replace(/&lt;/g,"<").replace(/&amp;/g,"&")},isc.A.toInitialCaps=function isc_Strin_toInitialCaps(){var _1=this.toLowerCase().split(" ");for(var i=0;i<_1.length;i++){_1[i]=_1[i].substring(0,1).toLocaleUpperCase()+_1[i].substring(1)}
return _1.join(" ")},isc.A.evalDynamicString=function isc_Strin_evalDynamicString(_1,_2){if(this.indexOf("${")<0)return this.toString();var _3=this,_4,_5,_6,_7;var _8=isc.StringBuffer.create();while((_5=_3.indexOf("${"))!=-1){_6=_3.indexOf("}",_5+1);if(_6==-1)break;if(_3.charAt(_5-1)=='\\'){_8.append(_3.slice(0,_5-1),_3.slice(_5,_6+1));_3=_3.substring(_6+1,_3.length);continue}
var _7=_3.slice(_5+2,_6);var _9;if(_2!=null&&_2[_7]){_9=_2[_7]}else{try{_9=isc.Class.evalWithVars(_7,_2,_1)}catch(e){var _10=_1?_1:isc.Log;_10.logWarn("dynamicContents eval error - returning empty string for block -->${"+_7+"}<-- error was: "+isc.Log.echo(e));_9=isc.emptyString}}
_8.append(_3.slice(0,_5),_9);_3=_3.substring(_6+1,_3.length)}
_8.append(_3);_3=_8.toString();return _3},isc.A.asSource=function isc_Strin_asSource(_1){return String.asSource(this,_1)},isc.A.cssToCamelCaps=function isc_Strin_cssToCamelCaps(){return this.replace(/-([^a-z]*)([a-z])/g,function(_1,_2,_3,_4,_5){return _2+_3.toUpperCase()})});isc.B._maxIndex=isc.C+13;String.$101w="[\u0041-\u005a\u0061-\u007a\u00aa\u00b5\u00ba\u00c0-\u00d6\u00d8-\u00f6\u00f8-\u02c1\u02c6-\u02d1\u02e0-\u02e4\u02ec\u02ee\u0370-\u0374\u0376\u0377\u037a-\u037d\u0386\u0388-\u038a\u038c\u038e-\u03a1\u03a3-\u03f5\u03f7-\u0481\u048a-\u0527\u0531-\u0556\u0559\u0561-\u0587\u05d0-\u05ea\u05f0-\u05f2\u0620-\u064a\u066e\u066f\u0671-\u06d3\u06d5\u06e5\u06e6\u06ee\u06ef\u06fa-\u06fc\u06ff\u0710\u0712-\u072f\u074d-\u07a5\u07b1\u07ca-\u07ea\u07f4\u07f5\u07fa\u0800-\u0815\u081a\u0824\u0828\u0840-\u0858\u08a0\u08a2-\u08ac\u0904-\u0939\u093d\u0950\u0958-\u0961\u0971-\u0977\u0979-\u097f\u0985-\u098c\u098f\u0990\u0993-\u09a8\u09aa-\u09b0\u09b2\u09b6-\u09b9\u09bd\u09ce\u09dc\u09dd\u09df-\u09e1\u09f0\u09f1\u0a05-\u0a0a\u0a0f\u0a10\u0a13-\u0a28\u0a2a-\u0a30\u0a32\u0a33\u0a35\u0a36\u0a38\u0a39\u0a59-\u0a5c\u0a5e\u0a72-\u0a74\u0a85-\u0a8d\u0a8f-\u0a91\u0a93-\u0aa8\u0aaa-\u0ab0\u0ab2\u0ab3\u0ab5-\u0ab9\u0abd\u0ad0\u0ae0\u0ae1\u0b05-\u0b0c\u0b0f\u0b10\u0b13-\u0b28\u0b2a-\u0b30\u0b32\u0b33\u0b35-\u0b39\u0b3d\u0b5c\u0b5d\u0b5f-\u0b61\u0b71\u0b83\u0b85-\u0b8a\u0b8e-\u0b90\u0b92-\u0b95\u0b99\u0b9a\u0b9c\u0b9e\u0b9f\u0ba3\u0ba4\u0ba8-\u0baa\u0bae-\u0bb9\u0bd0\u0c05-\u0c0c\u0c0e-\u0c10\u0c12-\u0c28\u0c2a-\u0c33\u0c35-\u0c39\u0c3d\u0c58\u0c59\u0c60\u0c61\u0c85-\u0c8c\u0c8e-\u0c90\u0c92-\u0ca8\u0caa-\u0cb3\u0cb5-\u0cb9\u0cbd\u0cde\u0ce0\u0ce1\u0cf1\u0cf2\u0d05-\u0d0c\u0d0e-\u0d10\u0d12-\u0d3a\u0d3d\u0d4e\u0d60\u0d61\u0d7a-\u0d7f\u0d85-\u0d96\u0d9a-\u0db1\u0db3-\u0dbb\u0dbd\u0dc0-\u0dc6\u0e01-\u0e30\u0e32\u0e33\u0e40-\u0e46\u0e81\u0e82\u0e84\u0e87\u0e88\u0e8a\u0e8d\u0e94-\u0e97\u0e99-\u0e9f\u0ea1-\u0ea3\u0ea5\u0ea7\u0eaa\u0eab\u0ead-\u0eb0\u0eb2\u0eb3\u0ebd\u0ec0-\u0ec4\u0ec6\u0edc-\u0edf\u0f00\u0f40-\u0f47\u0f49-\u0f6c\u0f88-\u0f8c\u1000-\u102a\u103f\u1050-\u1055\u105a-\u105d\u1061\u1065\u1066\u106e-\u1070\u1075-\u1081\u108e\u10a0-\u10c5\u10c7\u10cd\u10d0-\u10fa\u10fc-\u1248\u124a-\u124d\u1250-\u1256\u1258\u125a-\u125d\u1260-\u1288\u128a-\u128d\u1290-\u12b0\u12b2-\u12b5\u12b8-\u12be\u12c0\u12c2-\u12c5\u12c8-\u12d6\u12d8-\u1310\u1312-\u1315\u1318-\u135a\u1380-\u138f\u13a0-\u13f4\u1401-\u166c\u166f-\u167f\u1681-\u169a\u16a0-\u16ea\u1700-\u170c\u170e-\u1711\u1720-\u1731\u1740-\u1751\u1760-\u176c\u176e-\u1770\u1780-\u17b3\u17d7\u17dc\u1820-\u1877\u1880-\u18a8\u18aa\u18b0-\u18f5\u1900-\u191c\u1950-\u196d\u1970-\u1974\u1980-\u19ab\u19c1-\u19c7\u1a00-\u1a16\u1a20-\u1a54\u1aa7\u1b05-\u1b33\u1b45-\u1b4b\u1b83-\u1ba0\u1bae\u1baf\u1bba-\u1be5\u1c00-\u1c23\u1c4d-\u1c4f\u1c5a-\u1c7d\u1ce9-\u1cec\u1cee-\u1cf1\u1cf5\u1cf6\u1d00-\u1dbf\u1e00-\u1f15\u1f18-\u1f1d\u1f20-\u1f45\u1f48-\u1f4d\u1f50-\u1f57\u1f59\u1f5b\u1f5d\u1f5f-\u1f7d\u1f80-\u1fb4\u1fb6-\u1fbc\u1fbe\u1fc2-\u1fc4\u1fc6-\u1fcc\u1fd0-\u1fd3\u1fd6-\u1fdb\u1fe0-\u1fec\u1ff2-\u1ff4\u1ff6-\u1ffc\u2071\u207f\u2090-\u209c\u2102\u2107\u210a-\u2113\u2115\u2119-\u211d\u2124\u2126\u2128\u212a-\u212d\u212f-\u2139\u213c-\u213f\u2145-\u2149\u214e\u2183\u2184\u2c00-\u2c2e\u2c30-\u2c5e\u2c60-\u2ce4\u2ceb-\u2cee\u2cf2\u2cf3\u2d00-\u2d25\u2d27\u2d2d\u2d30-\u2d67\u2d6f\u2d80-\u2d96\u2da0-\u2da6\u2da8-\u2dae\u2db0-\u2db6\u2db8-\u2dbe\u2dc0-\u2dc6\u2dc8-\u2dce\u2dd0-\u2dd6\u2dd8-\u2dde\u2e2f\u3005\u3006\u3031-\u3035\u303b\u303c\u3041-\u3096\u309d-\u309f\u30a1-\u30fa\u30fc-\u30ff\u3105-\u312d\u3131-\u318e\u31a0-\u31ba\u31f0-\u31ff\u3400-\u4db5\u4e00-\u9fcc\ua000-\ua48c\ua4d0-\ua4fd\ua500-\ua60c\ua610-\ua61f\ua62a\ua62b\ua640-\ua66e\ua67f-\ua697\ua6a0-\ua6e5\ua717-\ua71f\ua722-\ua788\ua78b-\ua78e\ua790-\ua793\ua7a0-\ua7aa\ua7f8-\ua801\ua803-\ua805\ua807-\ua80a\ua80c-\ua822\ua840-\ua873\ua882-\ua8b3\ua8f2-\ua8f7\ua8fb\ua90a-\ua925\ua930-\ua946\ua960-\ua97c\ua984-\ua9b2\ua9cf\uaa00-\uaa28\uaa40-\uaa42\uaa44-\uaa4b\uaa60-\uaa76\uaa7a\uaa80-\uaaaf\uaab1\uaab5\uaab6\uaab9-\uaabd\uaac0\uaac2\uaadb-\uaadd\uaae0-\uaaea\uaaf2-\uaaf4\uab01-\uab06\uab09-\uab0e\uab11-\uab16\uab20-\uab26\uab28-\uab2e\uabc0-\uabe2\uac00-\ud7a3\ud7b0-\ud7c6\ud7cb-\ud7fb\uf900-\ufa6d\ufa70-\ufad9\ufb00-\ufb06\ufb13-\ufb17\ufb1d\ufb1f-\ufb28\ufb2a-\ufb36\ufb38-\ufb3c\ufb3e\ufb40\ufb41\ufb43\ufb44\ufb46-\ufbb1\ufbd3-\ufd3d\ufd50-\ufd8f\ufd92-\ufdc7\ufdf0-\ufdfb\ufe70-\ufe74\ufe76-\ufefc\uff21-\uff3a\uff41-\uff5a\uff66-\uffbe\uffc2-\uffc7\uffca-\uffcf\uffd2-\uffd7\uffda-\uffdc]";String.$101x="[\u16ee-\u16f0\u2160-\u2182\u2185-\u2188\u3007\u3021-\u3029\u3038-\u303a\ua6e6-\ua6ef]";String.$101y="[\u0300-\u036f\u0483-\u0487\u0591-\u05bd\u05bf\u05c1\u05c2\u05c4\u05c5\u05c7\u0610-\u061a\u064b-\u065f\u0670\u06d6-\u06dc\u06df-\u06e4\u06e7\u06e8\u06ea-\u06ed\u0711\u0730-\u074a\u07a6-\u07b0\u07eb-\u07f3\u0816-\u0819\u081b-\u0823\u0825-\u0827\u0829-\u082d\u0859-\u085b\u08e4-\u08fe\u0900-\u0902\u093a\u093c\u0941-\u0948\u094d\u0951-\u0957\u0962\u0963\u0981\u09bc\u09c1-\u09c4\u09cd\u09e2\u09e3\u0a01\u0a02\u0a3c\u0a41\u0a42\u0a47\u0a48\u0a4b-\u0a4d\u0a51\u0a70\u0a71\u0a75\u0a81\u0a82\u0abc\u0ac1-\u0ac5\u0ac7\u0ac8\u0acd\u0ae2\u0ae3\u0b01\u0b3c\u0b3f\u0b41-\u0b44\u0b4d\u0b56\u0b62\u0b63\u0b82\u0bc0\u0bcd\u0c3e-\u0c40\u0c46-\u0c48\u0c4a-\u0c4d\u0c55\u0c56\u0c62\u0c63\u0cbc\u0cbf\u0cc6\u0ccc\u0ccd\u0ce2\u0ce3\u0d41-\u0d44\u0d4d\u0d62\u0d63\u0dca\u0dd2-\u0dd4\u0dd6\u0e31\u0e34-\u0e3a\u0e47-\u0e4e\u0eb1\u0eb4-\u0eb9\u0ebb\u0ebc\u0ec8-\u0ecd\u0f18\u0f19\u0f35\u0f37\u0f39\u0f71-\u0f7e\u0f80-\u0f84\u0f86\u0f87\u0f8d-\u0f97\u0f99-\u0fbc\u0fc6\u102d-\u1030\u1032-\u1037\u1039\u103a\u103d\u103e\u1058\u1059\u105e-\u1060\u1071-\u1074\u1082\u1085\u1086\u108d\u109d\u135d-\u135f\u1712-\u1714\u1732-\u1734\u1752\u1753\u1772\u1773\u17b4\u17b5\u17b7-\u17bd\u17c6\u17c9-\u17d3\u17dd\u180b-\u180d\u18a9\u1920-\u1922\u1927\u1928\u1932\u1939-\u193b\u1a17\u1a18\u1a56\u1a58-\u1a5e\u1a60\u1a62\u1a65-\u1a6c\u1a73-\u1a7c\u1a7f\u1b00-\u1b03\u1b34\u1b36-\u1b3a\u1b3c\u1b42\u1b6b-\u1b73\u1b80\u1b81\u1ba2-\u1ba5\u1ba8\u1ba9\u1bab\u1be6\u1be8\u1be9\u1bed\u1bef-\u1bf1\u1c2c-\u1c33\u1c36\u1c37\u1cd0-\u1cd2\u1cd4-\u1ce0\u1ce2-\u1ce8\u1ced\u1cf4\u1dc0-\u1de6\u1dfc-\u1dff\u20d0-\u20dc\u20e1\u20e5-\u20f0\u2cef-\u2cf1\u2d7f\u2de0-\u2dff\u302a-\u302d\u3099\u309a\ua66f\ua674-\ua67d\ua69f\ua6f0\ua6f1\ua802\ua806\ua80b\ua825\ua826\ua8c4\ua8e0-\ua8f1\ua926-\ua92d\ua947-\ua951\ua980-\ua982\ua9b3\ua9b6-\ua9b9\ua9bc\uaa29-\uaa2e\uaa31\uaa32\uaa35\uaa36\uaa43\uaa4c\uaab0\uaab2-\uaab4\uaab7\uaab8\uaabe\uaabf\uaac1\uaaec\uaaed\uaaf6\uabe5\uabe8\uabed\ufb1e\ufe00-\ufe0f\ufe20-\ufe26]";String.$101z="[\u0903\u093b\u093e-\u0940\u0949-\u094c\u094e\u094f\u0982\u0983\u09be-\u09c0\u09c7\u09c8\u09cb\u09cc\u09d7\u0a03\u0a3e-\u0a40\u0a83\u0abe-\u0ac0\u0ac9\u0acb\u0acc\u0b02\u0b03\u0b3e\u0b40\u0b47\u0b48\u0b4b\u0b4c\u0b57\u0bbe\u0bbf\u0bc1\u0bc2\u0bc6-\u0bc8\u0bca-\u0bcc\u0bd7\u0c01-\u0c03\u0c41-\u0c44\u0c82\u0c83\u0cbe\u0cc0-\u0cc4\u0cc7\u0cc8\u0cca\u0ccb\u0cd5\u0cd6\u0d02\u0d03\u0d3e-\u0d40\u0d46-\u0d48\u0d4a-\u0d4c\u0d57\u0d82\u0d83\u0dcf-\u0dd1\u0dd8-\u0ddf\u0df2\u0df3\u0f3e\u0f3f\u0f7f\u102b\u102c\u1031\u1038\u103b\u103c\u1056\u1057\u1062-\u1064\u1067-\u106d\u1083\u1084\u1087-\u108c\u108f\u109a-\u109c\u17b6\u17be-\u17c5\u17c7\u17c8\u1923-\u1926\u1929-\u192b\u1930\u1931\u1933-\u1938\u19b0-\u19c0\u19c8\u19c9\u1a19-\u1a1b\u1a55\u1a57\u1a61\u1a63\u1a64\u1a6d-\u1a72\u1b04\u1b35\u1b3b\u1b3d-\u1b41\u1b43\u1b44\u1b82\u1ba1\u1ba6\u1ba7\u1baa\u1bac\u1bad\u1be7\u1bea-\u1bec\u1bee\u1bf2\u1bf3\u1c24-\u1c2b\u1c34\u1c35\u1ce1\u1cf2\u1cf3\u302e\u302f\ua823\ua824\ua827\ua880\ua881\ua8b4-\ua8c3\ua952\ua953\ua983\ua9b4\ua9b5\ua9ba\ua9bb\ua9bd-\ua9c0\uaa2f\uaa30\uaa33\uaa34\uaa4d\uaa7b\uaaeb\uaaee\uaaef\uaaf5\uabe3\uabe4\uabe6\uabe7\uabe9\uabea\uabec]";String.$1010="[\u0030-\u0039\u0660-\u0669\u06f0-\u06f9\u07c0-\u07c9\u0966-\u096f\u09e6-\u09ef\u0a66-\u0a6f\u0ae6-\u0aef\u0b66-\u0b6f\u0be6-\u0bef\u0c66-\u0c6f\u0ce6-\u0cef\u0d66-\u0d6f\u0e50-\u0e59\u0ed0-\u0ed9\u0f20-\u0f29\u1040-\u1049\u1090-\u1099\u17e0-\u17e9\u1810-\u1819\u1946-\u194f\u19d0-\u19d9\u1a80-\u1a89\u1a90-\u1a99\u1b50-\u1b59\u1bb0-\u1bb9\u1c40-\u1c49\u1c50-\u1c59\ua620-\ua629\ua8d0-\ua8d9\ua900-\ua909\ua9d0-\ua9d9\uaa50-\uaa59\uabf0-\uabf9\uff10-\uff19]";String.$1011="[\u005f\u203f\u2040\u2054\ufe33\ufe34\ufe4d-\ufe4f\uff3f]";String.$1012="\\u[0-9A-Fa-f]{4}";String.$1013="(?:"+String.$101w+"|[$_]|"+String.$1012+")";String.$1014="(?:"+String.$101y+"|"+String.$101z+")";String.$1015=String.$1010;String.$1016=String.$1011;String.$1017="\u200c";String.$1018="\u200d";String.$1019="(?:"+String.$1013+"|"+String.$1014+"|"+String.$1015+"|"+String.$1016+"|"+String.$1017+"|"+String.$1018+")";String.$102a="^(?:"+String.$1013+String.$1019+"*)$";String.$102b=new RegExp(String.$102a);String.$102c="(?:break|case|catch|continue|debugger|default|delete|do|else|finally|for|function|if|in|instanceof|new|return|switch|this|throw|try|typeof|var|void|while|with)";String.$102d="(?:class|const|enum|export|extends|import|super)";String.$102e="(?:implements|interface|let|package|private|protected|public|static|yield)";String.$102f=new RegExp("^(?:"+String.$102c+"|"+String.$102d+"|"+String.$102e+"|null|true|false)$");isc.A=String;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$139h=new RegExp("[<&\"']","");isc.B.push(isc.A.asSource=function isc_String_asSource(_1,_2){if(!isc.isA.String(_1))_1=""+_1;var _3=_2?String.$ez:String.$e0,_4=_2?"'":'"';return _4+_1.replace(/\\/g,"\\\\").replace(_3,'\\'+_4).replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/\n/g,"\\n").replace(/\u2028/g,"\\u2028").replace(/\u2029/g,"\\u2029")+_4},isc.A.asAttValue=function isc_String_asAttValue(_1,_2,_3){if(_1==null)_1=isc.emptyString;else _1=String(_1);var _4;if(!this.$139h.test(_1)){_4=_1}else{var _5,_6;if(_2){_5=this.$e0;_6=isc.$94s}else{_5=this.$ez;_6=isc.$139i}
_4=_1.replace(isc.$94o,isc.$94p).replace(isc.$94q,isc.$36h).replace(_5,_6)}
if(_3){var _7=_2?"\"":"'";return _7+_4+_7}else{return _4}},isc.A.isValidID=function isc_String_isValidID(_1){if(!isc.isA.String(_1))return false;return(_1.search(String.$102b)!=-1&&_1.search(String.$102f)==-1)});isc.B._maxIndex=isc.C+3;isc.addMethods(isc,{replaceAll:function(_1,_2,_3){return _1.split(_2).join(_3)},contains:function(_1,_2){if(_1==null)return false;return _1.indexOf(_2)>-1},startsWith:function(_1,_2){if(_1==null)return false;return(_1.lastIndexOf(_2,0)==0)},endsWith:function(_1,_2){if(_1==null)return false;var _3=_1.length-_2.length;if(_3<0)return false;return(_1.indexOf(_2,_3)==_3)},makeXMLSafe:function(_1,_2,_3,_4,_5,_6,_7){if(_1==null)return isc.emptyString;else if(!isc.isA.String(_1))_1=_1.toString();if(_2!=false)_1=_1.replace(this.$94o,this.$94p);if(_3!=false)_1=_1.replace(this.$94q,this.$36h);if(_4!=false)_1=_1.replace(this.$94r,this.$36i);if(_5!=false)_1=_1.replace(String.$e0,this.$94s);if(_6!=false)_1=_1.replace(String.$ez,this.$94t);if(_7!=false)_1=_1.replace(this.$94u,this.$94v);return _1},$94p:"&amp;",$36h:"&lt;",$36i:"&gt;",$94s:"&quot;",$94t:"&apos;",$139i:"&#39;",$94v:"&#x000D;",$94o:/&/g,$94q:/</g,$94r:/>/g,$94u:/\r/g,makeCDATA:function(_1){return"<![CDATA["+_1.replace(/\]\]>/,"]]<![CDATA[>")+"]]>"}});isc.ClassFactory.defineClass("StringBuffer");isc.SB=isc.StringBuffer;isc.A=isc.StringBuffer;isc.A.$e1=[];isc.A.$e2=50;isc.A=isc.StringBuffer.getPrototype();isc.A.maxStreamLength=(isc.Browser.isIE6?1000:100000);isc.A.addPropertiesOnCreate=false;isc.A=isc.StringBuffer.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.init=function isc_StringBuffer_init(){this.$e3=[]},isc.A.append=function isc_StringBuffer_append(_1,_2,_3,_4,_5,_6,_7,_8,_9,_10,_11,_12,_13,_14,_15,_16,_17,_18,_19,_20,_21,_22,_23,_24,_25,_26,_27){var _28=this.$e3,_29,_30;if(_1!=null&&_1.constructor.$k==2){var _31=_1.length;if(_31<=30){var _31=_28.length;for(var i=0;i<_1.length;i++){_28[_31++]=_1[i]}}else{_28[_28.length]=_1.join(isc.emptyString)}}else{if(_27===_30&&_26===_30&&_25===_30){if(_1!=null)_28[_28.length]=_1;if(_2!=null)_28[_28.length]=_2
if(_3!=null)_28[_28.length]=_3
if(_4!=null)_28[_28.length]=_4
if(_5!=null)_28[_28.length]=_5
if(_6!=null)_28[_28.length]=_6
if(_7!=null)_28[_28.length]=_7
if(_8!=null)_28[_28.length]=_8
if(_9!=null)_28[_28.length]=_9
if(_10!=null)_28[_28.length]=_10
if(_11!=null)_28[_28.length]=_11
if(_12!=null)_28[_28.length]=_12
if(_13!=null)_28[_28.length]=_13
if(_14!=null)_28[_28.length]=_14
if(_15!=null)_28[_28.length]=_15
if(_16!=null)_28[_28.length]=_16
if(_17!=null)_28[_28.length]=_17
if(_18!=null)_28[_28.length]=_18
if(_19!=null)_28[_28.length]=_19
if(_20!=null)_28[_28.length]=_20
if(_21!=null)_28[_28.length]=_21
if(_22!=null)_28[_28.length]=_22
if(_23!=null)_28[_28.length]=_23
if(_24!=null)_28[_28.length]=_24}else{_29=arguments;for(var i=0,l=_29.length;i<l;i++){_28[_28.length]=_29[i]}}}
if(_28.length>this.maxStreamLength){_28[0]=_28.join(isc.emptyString);_28.length=1}
return this},isc.A.appendNumber=function isc_StringBuffer_appendNumber(_1,_2){var _3=this.$e3;if(_2==null){_2=5;var _4=_1;if(_4<0){_4=0-_4;_2+=1}
if(_4>=100000){_4=_4/100000;while(_4>=1){_2+=1;_4=_4/10}}}
isc.$bk(_3,_1,_3.length,_2)},isc.A.clear=function isc_StringBuffer_clear(){this.$e3.length=0},isc.A.release=function isc_StringBuffer_release(_1){var _2=isc.SB,_3=_2.$e1,_4=_1?null:this.toString();if(_3.length<_2.$e2){this.clear();_3[_3.length]=this}
if(!_1)return _4},isc.A.getArray=function isc_StringBuffer_getArray(){return this.$e3});isc.B._maxIndex=isc.C+6;isc.StringBuffer.getPrototype().toString=function(){return this.$e3.join(isc.emptyString)}
isc.StringBuffer.$e4=Array.prototype.join;isc.A=isc.StringBuffer;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$bw=[];isc.B.push(isc.A.create=function isc_c_StringBuffer_create(){var _1=this.$e1,_2=_1.length;if(_2>0){var _3=_1[_2-1];_1.length=_2-1;return _3}else{return isc.Class.create.apply(this)}},isc.A.concat=function isc_c_StringBuffer_concat(_1,_2,_3,_4,_5,_6,_7,_8,_9,_10,_11,_12,_13,_14,_15,_16,_17,_18,_19,_20,_21,_22,_23,_24,_25,_26,_27,_28,_29,_30,_31,_32,_33,_34,_35,_36,_37,_38,_39,_40,_41,_42,_43,_44,_45,_46,_47,_48,_49,_50,_51,_52){var _53,_54;if(isc.Browser.isIE&&_50===_53&&_51===_53&&_52===_53){var _55=this.$bw;_55.length=0;if(_1!=null)_55[_55.length]=_1;if(_2!=null)_55[_55.length]=_2;if(_3!=null)_55[_55.length]=_3;if(_4!=null)_55[_55.length]=_4;if(_5!=null)_55[_55.length]=_5;if(_6!=null)_55[_55.length]=_6;if(_7!=null)_55[_55.length]=_7;if(_8!=null)_55[_55.length]=_8;if(_9!=null)_55[_55.length]=_9;if(_10!=null)_55[_55.length]=_10;if(_11!=null)_55[_55.length]=_11;if(_12!=null)_55[_55.length]=_12;if(_13!=null)_55[_55.length]=_13;if(_14!=null)_55[_55.length]=_14;if(_15!=null)_55[_55.length]=_15;if(_16!=null)_55[_55.length]=_16;if(_17!=null)_55[_55.length]=_17;if(_18!=null)_55[_55.length]=_18;if(_19!=null)_55[_55.length]=_19;if(_20!=null)_55[_55.length]=_20;if(_21!=null)_55[_55.length]=_21;if(_22!=null)_55[_55.length]=_22;if(_23!=null)_55[_55.length]=_23;if(_24!=null)_55[_55.length]=_24;if(_25!=null)_55[_55.length]=_25;if(_26!=null)_55[_55.length]=_26;if(_27!=null)_55[_55.length]=_27;if(_28!=null)_55[_55.length]=_28;if(_29!=null)_55[_55.length]=_29;if(_30!=null)_55[_55.length]=_30;if(_31!=null)_55[_55.length]=_31;if(_32!=null)_55[_55.length]=_32;if(_33!=null)_55[_55.length]=_33;if(_34!=null)_55[_55.length]=_34;if(_35!=null)_55[_55.length]=_35;if(_36!=null)_55[_55.length]=_36;if(_37!=null)_55[_55.length]=_37;if(_38!=null)_55[_55.length]=_38;if(_39!=null)_55[_55.length]=_39;if(_40!=null)_55[_55.length]=_40;if(_41!=null)_55[_55.length]=_41;if(_42!=null)_55[_55.length]=_42;if(_43!=null)_55[_55.length]=_43;if(_44!=null)_55[_55.length]=_44;if(_45!=null)_55[_55.length]=_45;if(_46!=null)_55[_55.length]=_46;if(_47!=null)_55[_55.length]=_47;if(_48!=null)_55[_55.length]=_48;if(_49!=null)_55[_55.length]=_49;if(_50!=null)_55[_55.length]=_50;if(_51!=null)_55[_55.length]=_51;if(_52!=null)_55[_55.length]=_52;_54=_55.join(isc.emptyString)}else{arguments.join=this.$e4;_54=arguments.join(isc.emptyString)}
return _54});isc.B._maxIndex=isc.C+2;isc.defineClass("StringMethod");isc.A=isc.StringMethod.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.getValue=function isc_StringMethod_getValue(){return this.value},isc.A.getDisplayValue=function isc_StringMethod_getDisplayValue(){var _1=this.getValue();if(_1==null||isc.isA.String(_1))return _1;if(_1.title!=null)return"["+_1.title+"]"
return _1},isc.A.cdata=function isc_StringMethod_cdata(_1){var _2=_1.indexOf("]]>");if(_2==-1)return"<![CDATA["+_1+"]]>";return this.cdata(_1.slice(0,_2))+"]]&gt;"+this.cdata(_1.slice(_2+3))},isc.A.$ew=function isc_StringMethod__xmlSerialize(_1,_2,_3,_4,_5,_6){var _7=this.value;if(isc.isA.String(_7))return isc.Comm.$ex(_1,this.cdata(_7),_2||"stringMethod",_3,_4);else
return isc.StringMethod.$41u(_7,_1,_4,_5,_6)});isc.B._maxIndex=isc.C+4;isc.StringMethod.getPrototype().toString=function(){var _1=this.getValue();if(_1==null||isc.isA.String(_1))return _1;return _1.toString()},isc.A=isc.StringMethod;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$41v="Action";isc.B.push(isc.A.$41u=function isc_c_StringMethod__xmlSerializeAction(_1,_2,_3,_4,_5){var _6=isc.DataSource.get(this.$41v);if(!_6)return isc.Comm.$36t(_2,_1,_5,_4,_3);return[isc.Comm.$36u(_2),_6.xmlSerialize(_1,null,_3+"        ",this.$41v),"\n",_3,isc.Comm.$36v(_2)].join(isc.emptyString)});isc.B._maxIndex=isc.C+1;isc.defineClass("URIBuilder").addClassMethods({create:function(_1){if(isc.isA.String(_1))return this.Super("create",{uri:_1});else return this.Super("create",arguments)}});isc.A=isc.URIBuilder.getPrototype();isc.A.uri="";isc.A=isc.URIBuilder.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.init=function isc_URIBuilder_init(){this.Super("init",arguments);if(this.uri==null)this.uri="";else this.uri=String(this.uri);this.$109n=this.$109o()},isc.A.$109o=function isc_URIBuilder__getQsStartPos(){var _1=this.uri;var _2=_1.indexOf('#');if(_2==-1){return _1.indexOf('?')}else{var _3=_1.indexOf('?');if(_3>=_2){return-1}
return _3}},isc.A.appendPath=function isc_URIBuilder_appendPath(_1){if(_1==null||_1.length==0)return;var _2=encodeURI(_1).replace('?',encodeURIComponent('?')).replace('#',encodeURIComponent('#'));if(this.uri.length==0){this.uri=_2}else{var _3=this.$109n;if(_3==-1){_3=this.uri.indexOf('#')}
if(_3==-1){_3=this.uri.length}
var _4=this.uri.substring(0,_3);if(_3>0&&this.uri[_3-1]!='/'&&_1[0]!='/'){_4+='/'}
_4+=_2;_4+=this.uri.substring(_3);this.uri=_4;this.$109n=this.$109o()}},isc.A.$109p=function isc_URIBuilder__indexOfQueryParam(_1,_2){if(_2==null)_2=this.$109n;else _2=Math.max(this.$109n,_2);if(_2<0)return-1;var _3=this.uri.indexOf('#',this.$109n+1);var _4=_3==-1?this.uri.length:_3;for(;_2<_4&&(_2=this.uri.indexOf(_1,_2))!=-1;_2+=_1.length){if(this.uri[_2-1]=='&'||this.uri[_2-1]=='?'){var _5=_2+_1.length;if(_5<=_4&&(_5==_4||this.uri[_5]=='='||this.uri[_5]=='&'))
{return _2}}}
return-1},isc.A.containsQueryParam=function isc_URIBuilder_containsQueryParam(_1){return _1!=null&&this.$109p(encodeURIComponent(_1))!=-1},isc.A.$109q=function isc_URIBuilder__appendQueryParamHelper(_1,_2){if(_2==null)return;if(isc.isA.String(_2)){var _3=this.uri.indexOf('#',this.$109n==-1?0:this.$109n+1);if(_3==-1)_3=this.uri.length;var _4=this.uri.substring(0,_3);if(this.$109n==-1){this.$109n=_3;_4+='?'}else _4+='&';_4+=_1;_4+=encodeURIComponent(_2.toString());_4+=this.uri.substring(_3);this.uri=_4}else if(isc.isAn.Array(_2)){for(var i=0;i<_2.length;++i){this.$109q(_1,_2[i])}}else{this.$109q(_1,String(_2))}},isc.A.appendQueryParam=function isc_URIBuilder_appendQueryParam(_1,_2){if(_1==null)return;var _3=encodeURIComponent(_1);var _4=_3+'=';this.$109q(_4,_2)},isc.A.setQueryParam=function isc_URIBuilder_setQueryParam(_1,_2){var _3=encodeURIComponent(_1);var _4=_3+'=';if(this.$109n!=-1){var _5=this.uri.indexOf('#',this.$109n+1);var _6=_5==-1?this.uri.length:_5;var _7="";_7+=this.uri.substring(0,this.$109n);var _8=this.$109n,_9=this.$109n;while(_9<_6&&(_9=this.uri.indexOf(_4,_9))!=-1){var _10=this.uri.indexOf('&',_9+_4.length);if(this.uri[_9-1]=='&'||this.uri[_9-1]=='?'){_7+=this.uri.substring(_8,_9);if(_10!=-1&&_10<_6){_9=_10+1}else{_9=_6;_7=_7.substring(0,_7.length-1)}}else{_9=(_10!=-1&&_10<_6?_10+1:_6);_7+=this.uri.substring(_8,_9)}
_8=_9}
_7+=this.uri.substring(_8,this.uri.length);this.uri=_7;this.$109n=this.$109o()}
this.appendQueryParam(_1,_2)});isc.B._maxIndex=isc.C+8;isc.ClassFactory.defineClass("Cookie");isc.A=isc.Cookie;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.init=function isc_c_Cookie_init(){isc.Cookie.list={};if(document.cookie=="")return;var _1=(""+document.cookie).split("; ");for(var i=0,_3=_1.length,_4;_4=_1[i],i<_3;i++){var _5=_4.indexOf('='),_6=(_5==-1?_4:_4.substring(0,_5));isc.Cookie.list[_6]=(_5==-1?'':unescape(_4.substring(_5+1)))}},isc.A.get=function isc_c_Cookie_get(_1){isc.Cookie.init();return isc.Cookie.list[_1]},isc.A.set=function isc_c_Cookie_set(_1,_2,_3,_4,_5){isc.Cookie.init();document.cookie=_1+"="+escape(_2)+(_3?";path="+_3:"")+(_4?";domain="+_4:"")+(_5?";expires="+(isc.isA.String(_5)?_5:_5.toGMTString()):"")},isc.A.clear=function isc_c_Cookie_clear(_1,_2,_3){isc.Cookie.init();this.set(_1,"",_2,_3,"Thu, 01-Jan-70 00:00:01 GMT")},isc.A.getList=function isc_c_Cookie_getList(){isc.Cookie.init();return isc.getKeys(isc.Cookie.list)});isc.B._maxIndex=isc.C+5;isc.defineClass("StackTrace");isc.A=isc.StackTrace;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.fromNativeStack=function isc_c_StackTrace_fromNativeStack(_1){if(isc.Browser.isMoz){return isc.MozStackTrace.create({stack:_1})}else if(isc.Browser.isChrome){return isc.ChromeStackTrace.create({stack:_1})}else if(isc.Browser.isIE){return isc.IEStackTrace.create({stack:_1})}else{return isc.UnsupportedStackTrace.create({stack:_1})}},isc.A.getSourceLine=function isc_c_StackTrace_getSourceLine(_1,_2,_3){_2=_2||isc.Page.getAppDir();_3=_3||window.location.protocol+"//"+window.location.host;_1=_1.replace(/(\?|\&)?sc_selenium=true/,"");var _4=_1.indexOf("/system/modules/ISC_"),_5=_1.indexOf("/system/development/ISC_");if(_4!=-1){_1=_1.substring(_4+16)}else if(_5!=-1){_1=_1.substring(_5+20)+"[d]"}
if(_4!=-1||_5!=-1){if(!isc.Log.logIsDebugEnabled("traceLineNumbersCore"))return"";var _6=_1.indexOf("?isc_version");if(_6!=-1){_1=_1.substring(0,_6)+_1.substring(_1.indexOf(":"))}}
if(_1.startsWith(_2)){_1=_1.substring(_2.length)}else if(_1.startsWith(_3)){_1=_1.substring(_3.length)}
return" @ "+_1});isc.B._maxIndex=isc.C+2;isc.A=isc.StackTrace.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.stack=null;isc.A.preambleLines=0;isc.A.$83t="";isc.B.push(isc.A.init=function isc_StackTrace_init(){if(this.stack){this.$83u()}},isc.A.extractFunctionFromLine=function isc_StackTrace_extractFunctionFromLine(_1){this.logError("Should implement extractFunctionFromLine in subclass")},isc.A.extractArgumentsFromLine=function isc_StackTrace_extractArgumentsFromLine(_1){this.logError("Should implement extractArgumentsFromLine in subclass")},isc.A.extractSourceFromLine=function isc_StackTrace_extractSourceFromLine(_1){this.logError("Should implement extractSourceFromLine in subclass")},isc.A.$83u=function isc_StackTrace__parseStack(){try{var _1=this.stack.split("\n"),_2=isc.StringBuffer.create(),_3=isc.Page.getAppDir(),_4=window.location.protocol+"//"+window.location.host;for(var i=this.preambleLines;i<_1.length;i++){var _6=_1[i],_7=null,_8=null,_9=null;var _10=this.extractFunctionFromLine(_6);if(_10==""){_10="unnamed"}else if(_10.startsWith("isc_")){var _11;if(_10.startsWith("isc_c_")){_10=_10.substring(6);_11=true}else{_10=_10.substring(4)}
_8=_10.substring(0,_10.indexOf("_"));_9=_10.substring(_8.length+1);var _12=isc.ClassFactory.getClass(_8),_13=null;if(_12){_13=_11?_12[_9]:_12.getInstanceProperty(_9)}
if(_13!=null){_10=isc.Func.getName(_13,true);var _14;if(!_11){_14=_12.getArgString(_9)}else{_14=isc.Func.getArgString(_13)}
_7=_14.split(",")}else{_10=_10.replace(/_{1}/,".");_10=_10.replace(/_{2}/,"._")}}
_2.append("    ",_10,"(");var _14=this.extractArgumentsFromLine(_6);var _15=0;while(_14&&_14.length>0){if(_15>0)_2.append(", ");if(_7)_2.append(_7[_15]+"=>");var _16=_14.length;_14=this.$83v(_14,_2);if(_14.length==_16){isc.logWarn("failure to parse next arg at:\n"+_14);break}
_15++}
_2.append(")");var _17=_6.lastIndexOf("@");_2.append(isc.StackTrace.getSourceLine(this.extractSourceFromLine(_6),_3,_4));_2.append("\n")}
this.$83t=_2.toString()}
catch(e){this.$83t=this.stack}},isc.A.$83v=function isc_StackTrace__parseArgument(_1,_2){var _3=_1.charAt(0);if(_3=="\""){var _4=_1.search(/[^\\]"/);if(_4==-1)_4=_1.length;var _5=_1.substring(0,_4+2);if(_5.length>40){_5=_5.substring(0,40)+"...\"[ "+_5.length+"]"}
_2.append(_5);return _1.substring(_4+3)}else if(_3=="["){var _6=_1.substring(1).indexOf("]"),_7=_1.substring(0,_6+2);if(_7=="[object Object]")_7="{Obj}";_2.append(_7);return _1.substring(_6+3)}else if(_1.startsWith("(void 0)")){_2.append("undef");return _1.substring(9)}else if(_1.startsWith("undefined")){_2.append("undef");return _1.substring(10)}else if(_1.startsWith("(function ")){var _8=_1.substring(1,_1.indexOf("{"));if(_8.endsWith(" "))_8=_8.substring(0,_8.length-1);_2.append(_8);var _9=_1.indexOf("}),");if(_9==-1)return"";return _1.substring(_9+3)}else{var _10=_1.indexOf(",");if(_10==-1)_10=_1.length;_2.append(_1.substring(0,_10));return _1.substring(_10+1)}});isc.B._maxIndex=isc.C+6;isc.StackTrace.getPrototype().toString=function(){return this.$83t};isc.defineClass("MozStackTrace",isc.StackTrace);isc.A=isc.MozStackTrace.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.extractFunctionFromLine=function isc_MozStackTrace_extractFunctionFromLine(_1){var _2=isc.Browser.version>=14,_3=_1.indexOf(_2?"@":"(");return _1.substring(0,_3)},isc.A.extractArgumentsFromLine=function isc_MozStackTrace_extractArgumentsFromLine(_1){if(isc.Browser.version>=14)return"";var _2=_1.indexOf("(");var _3=_1.lastIndexOf("@");return _1.substring(_2+1,_3-1)},isc.A.extractSourceFromLine=function isc_MozStackTrace_extractSourceFromLine(_1){var _2=_1.lastIndexOf("@");if(_2>=0){return _1.substring(_2+1)}else{return""}});isc.B._maxIndex=isc.C+3;isc.defineClass("ChromeStackTrace",isc.StackTrace);isc.A=isc.ChromeStackTrace.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.preambleLines=1;isc.A.$83x=/at (Object\.)?([^ ]+)/;isc.A.$83y=/\((.+)\)/;isc.B.push(isc.A.extractFunctionFromLine=function isc_ChromeStackTrace_extractFunctionFromLine(_1){var _2=_1.match(this.$83x);return _2?_2[2]:""},isc.A.extractArgumentsFromLine=function isc_ChromeStackTrace_extractArgumentsFromLine(_1){return""},isc.A.extractSourceFromLine=function isc_ChromeStackTrace_extractSourceFromLine(_1){var _2=_1.match(this.$83y);return _2?_2[1]:""});isc.B._maxIndex=isc.C+3;isc.defineClass("IEStackTrace",isc.StackTrace);isc.A=isc.IEStackTrace.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.preambleLines=1;isc.A.$83x=/at ((?:[A-Za-z_$0-9]+ )+)/;isc.A.$83y=/\((.+)\)/;isc.B.push(isc.A.extractFunctionFromLine=function isc_IEStackTrace_extractFunctionFromLine(_1){var _2=_1.match(this.$83x);return _2?_2[1]:""},isc.A.extractArgumentsFromLine=function isc_IEStackTrace_extractArgumentsFromLine(_1){return""},isc.A.extractSourceFromLine=function isc_IEStackTrace_extractSourceFromLine(_1){var _2=_1.match(this.$83y);return _2?_2[1]:""});isc.B._maxIndex=isc.C+3;isc.defineClass("UnsupportedStackTrace",isc.StackTrace);isc.A=isc.UnsupportedStackTrace.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.$83u=function isc_UnsupportedStackTrace__parseStack(){});isc.B._maxIndex=isc.C+1;isc.UnsupportedStackTrace.getPrototype().toString=function(){return this.stack};if(isc.Browser.isChrome){isc.StackTrace.$123q=null;if(Error.prepareStackTrace!=null){isc.StackTrace.$123q=Error.prepareStackTrace}
Error.prepareStackTrace=function(_1,_2){isc.$122w=_2;if(_1.getStackTraceOnly){return isc.$ad}
var _3=null;if(isc.StackTrace.$123q!=null){_3=isc.StackTrace.$123q(_1,_2)}else{var _4=Error.prepareStackTrace;delete Error.prepareStackTrace;try{throw _1}catch(e){_3=e.stack}
Error.prepareStackTrace=_4}
return _3}};isc.$94b={};isc.A=isc.$94b;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$1050=40;isc.A.$fj={outerText:false,innerText:false,parentTextEdit:false,isTextEdit:false,parentTextEdit:false,contentEditable:false,canHaveHTML:true,isMultiLine:false,filters:false,canHaveChildren:false,behaviorUrns:false,sourceIndex:false,accelerator:false,textDecorationUnderline:false,textDecorationNone:false};isc.B.push(isc.A.getCallTrace=function isc__debug_getCallTrace(_1,_2,_3,_4,_5,_6){if(_1==null)_1=arguments.caller;if(_1==null)return"[getCallTrace(): Error: couldn't get arguments object]";var _7,_8=_1.callee;if(_8==null){_7="[args.callee == null]"}else if(!isc.Func){_7="[Func utility class not loaded]"}else{_7=isc.Func.getName(_8,true)}
_7+="(";_4=_4||(_8!=null?isc.Func.getArgs(_8):[]);_5=_5||_1;var _9=Math.max(_5.length,_4.length);for(var i=0;i<_9;i++){var _11=_4[i],_12=_5[i];if(i>0)_7+=", ";if(_11!=null){_7+=_11+"=>"}
_7+=this.echoLeaf(_12)}
_7+=")";_2=_2||_1.$cw;if(_2)_7+=" on "+this.echoLeaf(_2);var _13=false;if(_13||(!_3&&!_8.$c7))return _7;var _14=this.$e6(_8);if(!_8.$c7){var _15=_14.split(/[\r\n]+/);if(_15.length>1||_15[0].length>200)return _7}
_7+='\n        "'+_14+'"';return _7},isc.A.$e6=function isc__debug__getTrimmedMethodBody(_1){var _2=isc.Func.getBody(_1);return _2.trim()},isc.A.getStackTrace=function isc__debug_getStackTrace(_1,_2,_3,_4,_5){if(isc.Class.useChromeAPIToPrepareStackTrace&&isc.Browser.isChrome){var e=new Error;var _7=Error.prepareStackTrace;Error.prepareStackTrace=function(_10,_11){return _11};Error.captureStackTrace(e,arguments.callee);isc.$122w=e.stack;Error.prepareStackTrace=_7;return this.$122x(false)}
var _8="";if(!_2){_2=1}
_8+=this.$76x(_1,_2,_3);if(this.hasFireBug()&&!_4){isc.Log.$50m=isc.Log.$50m||0;var _9="FBugTrace"+isc.Log.$50m++;_8+="\r\n"+this.fireBugTrace(_9)}
return _8},isc.A.$122x=function isc__debug__getLastErrorCallSitesParsedStack(_1){var _2=isc.StringBuffer.create();if(isc.$122w){var _3=[];for(var i=0;i<isc.$122w.length;i++){var _5=isc.$122w[i];if(!_5.getThis()){continue}
var _6=_5.getTypeName(),_7=null;if(_5.getThis().getClassName){_7=_5.getThis().getClassName()}
var _8=_5.getFunctionName();var _9=_5.getFunction();if(!_8){_8="<anonymous>"}else{if(_8&&_8.startsWith("isc_")){if(_8.startsWith("isc_c_")){_8=_8.substring(6);var _10=_8.indexOf("_");_7=_8.substring(0,_10);_8=_8.substring(_10)}else{_8=_8.substring(_8.lastIndexOf("_")+1)}}else{_8=_8.substring(_8.lastIndexOf(".")+1)}}
var _11=this.$122y(_8,_7,_9);var _12=(_7!=null?_7:_6)+"."+_8;var _13="";if(_1&&_9.arguments==null){_13="(<no args: exited>) "}else if(_3.contains(_8)){_13="(<no args: recursion>) "}else{var _14=isc.Func.getArgs(_9);var _15=_9.arguments||[];if(_8!="<anonymous>")_3.add(_12);if(_14.length>0){for(var j=0;j<_14.length;j++){if(j!=0){_13+=", "}
_13+=_14[j]+"=>"+isc.echoLeaf(_15[j])}
_13="("+_13+") "}else{_13="() "}}
if(_7==null&&(_6=="Object"||_6=="Window")){_12=_8}
_2.append("\t",_11,_12,_13);var _17=_5.getFileName();if(_17){_17=_17.substring(_17.lastIndexOf("/")+1)
var _18=_17.lastIndexOf("?");if(_18>0){_17=_17.substring(0,_18)}
_2.append("@ ",_17)}else{_2.append("@ [no file]")}
_2.append(":",_5.getLineNumber(),":",_5.getColumnNumber(),"\n")}
delete isc.$122w}
return _2.toString()},isc.A.$122y=function isc__debug__getFunctionModifier(_1,_2,_3){if(_2==null)return"";var _4=isc.ClassFactory.getClass(_2);return(_3.$be?(_3.$bf?"[o]":"[a]"):isc.$ad)+((_4!=null&&_4[_1]===_3)?"[c]":isc.$ad)},isc.A.$76x=function isc__debug__getStackTraceFromArgs(_1,_2,_3,_4){if(!arguments||!arguments.callee||!arguments.callee.caller){return" [Stack trace not supported in this browser]"}
if(_1==null)_1=arguments.caller||arguments.callee.caller.arguments;var _5=[];var _6=_4||(isc.Browser.isIE&&isc.Browser.version<=5);if(_2!=null){for(var i=0;i<_2;i++){if(_1==null)break;if(!_6){_1=_1.callee.caller.arguments}else{_1=_1.caller}}}
if(_1==null){return""}
var _8=_1.callee;var _9=[];var _10=true;if(_3==null)_3=Number.MAX_VALUE;var _11=0;var _12="";while(_8!=null&&_1!=null&&_11<_3){if(_1.timerTrace){_5.add("\nStack trace for setTimeout() call:   "+_1.timerTrace);break}
if(!_6){if(_9.contains(_8)){_5.add("    ** recursed on "+isc.Func.getName(_8,true));break}
_9.add(_8)}
var _13=(_10||(_1.callee!=null&&_1.callee.caller==null));if(_4){}else{_5.add("    "+this.getCallTrace(_1,null,_13))}
if(_11==0||isc.showLocalsInTraces){var _14=_1.$e8;var _15=this.$e7(_14,_11!=0);if(_15)_5.add(_15)}
_8=_1.callee;if(!_6){_8=_8.caller;if(_8)_1=_8.arguments}else _1=_1.caller;_10=false;_11++;if(_4&&_1!=null&&_1.callee==null){_5.add("    [global scope]");break}}
if(_5.length==0)return"";return"\r\n"+_5.join("\r")+"\r"},isc.A.hasFireBug=function isc__debug_hasFireBug(){return(isc.Browser.isMoz&&window.console!=null&&(window.console.firebug!=null||(window.console.exception!=null&&(isc.Browser.version<=27||window.console.exception.toString().indexOf("[native code]")<0))))},isc.A.fireBugVersion=function isc__debug_fireBugVersion(){return this.hasFireBug()?window.console.firebug:null},isc.A.fireBugTrace=function isc__debug_fireBugTrace(_1){window.console.trace(_1);return" [Complete stack trace logged via Firebug: "+_1+"]"},isc.A.$e7=function isc__debug__getFrameLocals(_1,_2){var _3=isc.SB.create();var _4=true;for(var _5 in _1){var _6=_1[_5],_7;if(_6===_7)continue;if(isc.startsWith(_5,isc.$ag))continue;if(_2){if(!_4)_3.append(", ");else _3.append("\n        locals: ");_3.append(_5+"=>"+this.echoLeaf(_6));_4=false}else{_3.append("\n        "+_5+" = "+this.echoLeaf(_6))}}
return _3.toString()},isc.A.$am=function isc__debug__reportJSError(_1,_2,_3,_4,_5){if(_1.$fa)return;_1.$fa=true;var _6=(_5?_5+": ":"")+_1.toString();if(_1.stack){_6+="\nStack from error.stack:\n";if(isc.Class.useChromeAPIToPrepareStackTrace&&isc.Browser.isChrome){_6+=this.$122x(true)}else{_6+=isc.StackTrace.fromNativeStack(_1.stack).toString()}}else{_6+="  [No error.stack available]"}
this.$115i(_6)},isc.A.$115i=function isc__debug__reportJSErrorStack(_1){this.logWarn(_1)},isc.A.transformMozStackTrace=function isc__debug_transformMozStackTrace(_1){return isc.StackTrace.fromNativeStack(_1).toString()},isc.A.echoLeaf=function isc__debug_echoLeaf(_1,_2){var _3="",_4;if(_1===_4)return"undef";try{if(_1!=null&&isc.Browser.isSGWT&&window.SmartGWT.isNativeJavaObject(_1))
return _1.toString();if(isc.isA.Class(_1)){_3+=_1.toString()}else if(isc.isAn.Array(_1)){_3+="Array["+_1.length+"]"}else if(isc.isA.Date(_1)){_3+="Date("+_1.toShortDate()+")"}else if(isc.isA.Function(_1)){_3+=isc.Func.getName(_1,true)+"()"}else{switch(typeof _1){case"string":var _5=this.$1050;if(_1.length<=_5||_2){_3+='"'+_1+'"';break}
_3+='"'+_1.substring(0,_5)+'..."['+_1.length+']';_3=_3.replaceAll("\n","\\n").replaceAll("\r","\\r");break;case"object":if(_1==null){_3+="null";break}
if(_1.tagName!=null){_3+="["+_1.tagName+"Element]"+this.getIDText(_1);break}
var _6="[object]";try{_6=""+_1}catch(e){}
if(_6!=""&&_6!="[object Object]"&&_6!="[object]")
{_3+=_6;break}
_3+="Obj"+this.getIDText(_1);break;default:_3+=""+_1}}
return _3}catch(e){var _7="[Error in echoLeaf: "+e+"]";_3+=_7;this.logDebug(_7,"Log");return _3}},isc.A.getIDText=function isc__debug_getIDText(_1){var _2=_1.name||(isc.isAn.XMLNode(_1)?_1.getAttribute("name"):null);if(_2!=null&&!isc.isAn.emptyString(_2))return"{name:"+_2+"}";var _3=_1.ID!=null?_1.ID:_1.id!=null?_1.id:(isc.isAn.XMLNode(_1)?_1.getAttribute("id"):null);if(_3!=null&&!isc.isAn.emptyString(_3))return"{ID:"+_3+"}";if(_1.nodeName!=null&&!isc.isAn.emptyString(_1.nodeName)){return"{nodeName:"+_1.nodeName+"}"}
var _4=_1.title||(isc.isAn.XMLNode(_1)?_1.getAttribute("title"):null);if(_4!=null&&!isc.isAn.emptyString(_4))return"{title:"+_4+"}";var _5=_1.type||(isc.isAn.XMLNode(_1)?_1.getAttribute("type"):null);if(_5!=null&&!isc.isAn.emptyString(_5))return"{type:"+_5+"}";var _5=_1._constructor;if(_5!=null&&!isc.isAn.emptyString(_5))return"{_constructor:"+_5+"}";var _6=_1.label||(isc.isAn.XMLNode(_1)?_1.getAttribute("label"):null);if(_6!=null&&!isc.isAn.emptyString(_6))return"{label:"+_6+"}";var _5=_1.className;if(_5!=null&&!isc.isAn.emptyString(_5))return"{className:"+_5+"}";if(_1.length!=null)return"{length:"+_1.length+"}";return""},isc.A.echo=function isc__debug_echo(_1,_2,_3,_4){if(_1==null)return this.echoLeaf(_1);if(isc.Browser.isSGWT&&window.SmartGWT.isNativeJavaObject(_1))return _1.toString();if(_2==null)_2=true;if(_1.tagName)return this.echoDOM(_1);if(typeof _1!="object"||isc.isA.Date(_1))return this.echoLeaf(_1,true);if(isc.isAn.Array(_1)){var _5=(_3?"[\n":"[");for(var i=0;i<_1.length;i++){_5+=(_3?this.echo(_1[i],_2):this.echoLeaf(_1[i]));if(i+1<_1.length)_5+=(_3?",\n":", ")}
_5+="\n]";return _5}
var _5="{";if(_1.getUniqueProperties!=null){_5=_1.getClassName()+"{";_1=_1.getUniqueProperties();if(_4==null)_4=false}
if(_4==null)_4=true;var _7;try{_7=isc.getKeys(_1)}catch(e){return this.echoLeaf(_1)}
if(isc.Browser.isSafari){var _8=false,_9="[object CSSStyleDeclaration]";try{_8=(_1+""==_9)}catch(e){}
if(_8){_5=_9+"{\n[standard props only]\n";_7=isc.getKeys(isc.Canvas.$fi());_7.add("cssText")}}
for(var i=0;i<_7.length;i++){var _10=_7[i],_11;try{_11=_1[_10]}catch(e){_11="[error accessing property: "+e+"]"}
if(!_4&&isc.isA.Function(_11))continue;if(_10.startsWith("$"))continue;var _12;if(_10==isc.gwtRef){_12="{GWT Java Obj}"}else if(_10==isc.gwtModule){_12="{GWT Module Obj}"}else{_12=this.echoLeaf(_11)}
_5+=_10+": "+_12;if(i+1<_7.length)_5+=(_2?",\r":", ")}
_5+="}";return _5},isc.A.echoAll=function isc__debug_echoAll(_1,_2){return this.echo(_1,_2,true)},isc.A.echoFull=function isc__debug_echoFull(_1){return isc.JSON.encode(_1,{prettyPrint:true,showDebugOutput:true})},isc.A.echoShort=function isc__debug_echoShort(_1){return this.echo(_1,false,false)},isc.A.echoArray=function isc__debug_echoArray(_1){if(!isc.isAn.Array(_1))return this.echo(_1);if(_1.length==0)return"[empty array]";var _2=["["];for(var i=0;i<_1.length;i++){_2.addList([i,":",_1[i],"\n"])}
_2.add("]");return _2.join("")},isc.A.echoDOM=function isc__debug_echoDOM(_1){return this.echoDelta(_1,window.Node,_1.tagName+this.getIDText(_1))},isc.A.echoEvent=function isc__debug_echoEvent(_1){return this.echoDelta(_1,(isc.Browser.isMoz?window.KeyEvent:window.Event))},isc.A.echoDelta=function isc__debug_echoDelta(_1,_2,_3){if(_1==null)return null;if(isc.Browser.isIE&&isc.isAn.XMLNode(_1)){var _4="<"+_1.tagName+" [XMLNode] ";var _5=_1.attributes;for(var i=0;i<_5.length;i++){var _7=_5[i];if(i>0)_4+=" ";_4+=_7.name+"="+this.echoLeaf(_7.value)}
_4+=(i>0?" [":"")+_1.childNodes.length+" child nodes]>";return _4}
var _4=(_3||isc.emptyString)+"{",_8=isc.getKeys(_1);for(var i=0;i<_8.length;i++){var _9=_8[i];if(this.$fj[_9]!=null)continue;if(_2!=null&&_2[_9]!=null)continue;if(_9.length>3&&_9.toUpperCase()==_9)continue;try{var _10=_1[_9];if(_10==null||_10=="")continue;if(isc.isA.Function(_10))continue;_4+=_9+": "+this.echoLeaf(_1[_9])}catch(e){_4+=_9+": "+this.echoLeaf(e)}
if(i+1<_8.length)_4+=", "}
_4+="}";return _4},isc.A.echoElementSize=function isc__debug_echoElementSize(_1){var _2;return this.echo({scrollLeft:_1.scrollLeft,scrollTop:_1.scrollTop,scrollWidth:_1.scrollWidth,scrollHeight:_1.scrollHeight,clientWidth:_2,clientHeight:_2,offsetWidth:_1.offsetWidth,offsetHeight:_1.offsetHeight,styleLeft:_1.style.left,styleTop:_1.style.top,styleWidth:_1.style.width,styleHeight:_1.style.height,styleClip:_1.style.clip})});isc.B._maxIndex=isc.C+24;isc.Class.addProperties(isc.$94b)
isc.Class.addClassProperties(isc.$94b)
isc.$fk={logMessage:function(_1,_2,_3,_4){var _5=isc.Log;if(!_5)return;if(_1==null)_1=_5.defaultPriority;if(_1<=_5.stackTracePriority&&this.getStackTrace!=null){_2+="\nStack trace:\n"+this.getStackTrace(arguments,2)}
if(!_3)_3=this.Class;var _6=this.ID;if(isc.FormItem&&isc.isA.FormItem(this)&&this.name!=null){_6+="["+this.name+"]"}
_5.log(_1,_2,_3,_6,this,_4)},logDebug:function(_1,_2){return this.logMessage(isc.Log.DEBUG,_1,_2)},logInfo:function(_1,_2){return this.logMessage(isc.Log.INFO,_1,_2)},logWarn:function(_1,_2){return this.logMessage(isc.Log.WARN,_1,_2)},logError:function(_1,_2){return this.logMessage(isc.Log.ERROR,_1,_2)},logFatal:function(_1,_2){return this.logMessage(isc.Log.FATAL,_1,_2)},logIsEnabledFor:function(_1,_2){return(isc.Log.isEnabledFor&&isc.Log.isEnabledFor((_2?_2:this.Class),_1,this))},logIsDebugEnabled:function(_1){return this.logIsEnabledFor(isc.Log.DEBUG,_1)},logIsInfoEnabled:function(_1){return this.logIsEnabledFor(isc.Log.INFO,_1)},logIsWarnEnabled:function(_1){return this.logIsEnabledFor(isc.Log.WARN,_1)},logIsErrorEnabled:function(_1){return this.logIsEnabledFor(isc.Log.ERROR,_1)},setLogPriority:function(_1,_2){isc.Log.setPriority(_1,_2,this)},setDefaultLogPriority:function(_1){isc.Log.setDefaultPriority(_1,this)},getDefaultLogPriority:function(){return isc.Log.getDefaultPriority(this)},clearLogPriority:function(_1){isc.Log.clearPriority(_1,this)}};isc.Class.addMethods(isc.$fk)
isc.Class.addClassMethods(isc.$fk)
isc.ClassFactory.defineClass("Log");isc.A=isc.Log;isc.A.FATAL=1;isc.A.ERROR=2;isc.A.WARN=3;isc.A.INFO=4;isc.A.DEBUG=5;isc.A.PRIORITY_NAMES=["NONE","FATAL","ERROR","WARN","INFO","DEBUG"];isc.A=isc.Log;isc.A.defaultPriority=isc.Log.WARN;isc.A.stackTracePriority=isc.Log.ERROR;isc.A.$fl={};isc.A.$fm={};isc.A.$fn=1000;isc.A.$fo=0;isc.A.$fp=[];isc.A.$fq=":";isc.A.$fr=".";isc.A._allCategories="_allCategories";isc.A.$fs="$fs";isc.A=isc.Log;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A._1zero="0";isc.A._2zero="00";isc.A.showInlineLogs=false;isc.A.$ft="$T_";isc.A.$73n={};isc.A.$fu=["Timed ",,": ",,"ms"];isc.A.flashHiliteCount=7;isc.A.flashHilitePeriod=500;isc.B.push(isc.A.applyLogPriorities=function isc_c_Log_applyLogPriorities(_1){if(!this.$fl){this.$fl={}}
if(_1){isc.addProperties(this.$fl,_1)}},isc.A.getLogPriorities=function isc_c_Log_getLogPriorities(_1,_2){var _3;if(_1!=null){var _4=this.$fv(_1);_3=this.$fm[_4];if(_2){return isc.addProperties({},_3)}}
var _5=isc.addProperties({},this.$fl);if(_3)_5=isc.addProperties(_5,_3);return _5},isc.A.$fv=function isc_c_Log__getObjectID(_1){var _2;if(_1==null)_2=isc.emptyString;else _2=(_1.getID?_1.getID():_1.getClassName());return _2},isc.A.getPriority=function isc_c_Log_getPriority(_1,_2){if(_2!=null){var _3=this.$fv(_2),_4=this.$fm[_3];if(_4){if(_4._allCategories!=null)return _4._allCategories;if(_4[_1]!=null)return _4[_1];if(_4.$fs!=null)return _4.$fs}}
var _5=this.$fl;return _5[_1]||_5.$fs},isc.A.setPriority=function isc_c_Log_setPriority(_1,_2,_3){if(_3!=null){var _4=this.$fv(_3);if(this.$fm[_4]==null)
this.$fm[_4]={};if(!_1)_1=this._allCategories;this.$fm[_4][_1]=_2}else{this.$fl[_1]=_2}},isc.A.setDefaultPriority=function isc_c_Log_setDefaultPriority(_1,_2){if(!_2||_2==isc.Log)isc.Log.defaultPriority=_1;else isc.Log.setPriority("$fs",_1,_2)},isc.A.getDefaultPriority=function isc_c_Log_getDefaultPriority(_1){var _2;if(_1&&_1!=isc.Log)_2=this.getPriority("$fs",_1);return _2||isc.Log.defaultPriority},isc.A.clearPriority=function isc_c_Log_clearPriority(_1,_2){if(_2){var _3=this.$fv(_2);if(!_1)
delete this.$fm[_3];else if(this.$fm[_3])
delete this.$fm[_3][_1]}else{delete this.$fl[_1]}},isc.A.isEnabledFor=function isc_c_Log_isEnabledFor(_1,_2,_3){if(!_1)_1=isc.$ad;while(_1!=isc.$ad){var _4=this.getPriority(_1,_3);if(_4!=null){return _2<=_4}
var _5=_1.lastIndexOf(this.$fr);if(_5>0){_1=_1.substring(0,_5)}else{break}}
return _2<=isc.Log.defaultPriority},isc.A.log=function isc_c_Log_log(_1,_2,_3,_4,_5,_6){if(this.isEnabledFor(_3,_1,_5))
this.addLogMessage(_1,_2,_3,_4,_6);else if(this.reportSuppressedLogs){this.logWarn("suppressed log, category: "+_3+": "+_2)}},isc.A.getLogTimestamp=function isc_c_Log_getLogTimestamp(_1){var _2=this.$fw;if(_2==null){_2=this.$fw=[];_2[2]=this.$fq;_2[5]=this.$fq;_2[8]=this.$fr}
if(_1==null)_1=new Date();var _3=_1.getHours(),_4=_1.getMinutes(),_5=_1.getSeconds(),_6=_1.getMilliseconds();_2[1]=_3;if(_3<10)_2[0]=this._1zero;else _2[0]=null;_2[4]=_4;if(_4<10)_2[3]=this._1zero;else _2[3]=null;_2[7]=_5;if(_5<10)_2[6]=this._1zero;else _2[6]=null;_2[10]=_6;if(_6<10)_2[9]=this._2zero;else if(_6<100)_2[9]=this._1zero;else _2[9]=null;return _2.join(isc.$ad)},isc.A.getPriorityName=function isc_c_Log_getPriorityName(_1){if(_1==null)return isc.$ad;return this.PRIORITY_NAMES[_1]},isc.A.$fc=function isc_c_Log__makeLogMessage(_1,_2,_3,_4,_5){var _6=this.$fx;if(_6==null){_6=this.$fx=[]}
if(!_3)_3=this.category;_6[0]=this.getLogTimestamp(_5);_6[1]=this.$fq;if(this.ns.EH&&this.ns.EH.$lc!=null){_6[2]=this.ns.EH.$lc;_6[3]=this.$fq}
if(_1!=null){_6[4]=this.getPriorityName(_1);_6[5]=this.$fq}
_6[6]=_3;_6[7]=this.$fq;if(_4){_6[8]=_4
_6[9]=this.$fq}
_6[10]=_2;var _7=_6.join(isc.$ad);_6.length=0;return _7},isc.A.addLogMessage=function isc_c_Log_addLogMessage(_1,_2,_3,_4,_5){var _6=this.$fc(_1,_2,_3,_4,_5);this.addToMasterLog(_6);if(this.warningLogged!=null&&_1!=null&&_1<=this.WARN){this.warningLogged(_6)}
if(_1!=null&&_1<=this.ERROR){if(!isc.Browser.seleniumPresent)alert(_2)}},isc.A.addToMasterLog=function(message){this.$fp[this.$fo]=message;this.$fo++;if(this.$fo>this.$fn){this.$fo=0}
if(this.showInlineLogs){this.updateInlineLogResults()}},isc.A.updateInlineLogResults=function isc_c_Log_updateInlineLogResults(){if(isc.Canvas==null||this.$fp==null)return;if(!this.inlineLogCanvas){this.inlineLogCanvas=isc.Canvas.create({width:"50%",height:"100%",overflow:"auto",backgroundColor:"white",canDragReposition:true,autoDraw:true})}
this.inlineLogCanvas.setContents(this.$fp.join("<br>"));this.inlineLogCanvas.bringToFront()},isc.A.getMessages=function isc_c_Log_getMessages(){var _1=this.$fp,_2=this.$fo,_3=this.$fn;return _1.slice(_3-_2,_3).concat(_1.slice(0,_2))},isc.A.show=function isc_c_Log_show(_1,_2,_3,_4,_5){if(!this.logViewer)this.logViewer=isc.LogViewer.create();this.logViewer.showLog(_1,_2,_3,_4,_5)},isc.A.clear=function isc_c_Log_clear(){this.$fp=[];this.$fo=0;if(this.logViewer)this.logViewer.clear()},isc.A.evaluate=function isc_c_Log_evaluate(_1,_2){var _3=isc.timeStamp();var _4,_5;if(isc.Log.supportsOnError){_5=isc.Class.evalWithVars(_1,_2,this)}else{try{_5=isc.Class.evalWithVars(_1,_2,this)}catch(e){_4=e}}
var _6=isc.timeStamp(),_7=isc.Log.getLogTimestamp()+":";var _8=_1.split(/[\r\n]+/);if(_8.length>1)_1=_8[0]+"...";if(_1.length>200)_1=_1.substring(0,200)+"...";if(_4){if(!isc.Log.supportsOnError){isc.Log.$am(_4);return}
_7+="Evaluator: '"+_1+"' returned a script error: \r\n'"+_4+"'"}else{_7="Evaluator: result of '"+_1+"' ("+(_6-_3)+"ms):\r\n"+this.echo(_5)}
if(this.logViewer)this.logViewer.addToLog(_7,true)},isc.A.updateStats=function isc_c_Log_updateStats(_1){if(this.logViewer)this.logViewer.updateStats(_1)},isc.A.$fy=function isc_c_Log__logPrelogs(){var _1=isc.$j;if(!_1)return;for(var i=0;i<_1.length;i++){var _3=_1[i];if(isc.isA.String(_3))this.logDebug(_3);else this.logMessage(_3.priority||isc.Log.INFO,_3.message,_3.category,_3.timestamp)}
isc.$j=null},isc.A.traceMethod=function isc_c_Log_traceMethod(_1,_2,_3){var _4=this.validObservation(_1,_2);if(!_4)return;if(!this.$fz)this.$fz={};if(!this.$fz[_1])this.$fz[_1]=[];if(!this.$f0)this.$f0=isc.Class.create();var _5=this.$f0;if(_5.isObserving(_4,_2)&&this.$fz[_1].contains(_2))
{_5.ignore(_4,_2);this.logWarn("MethodTimer: Stopped logging stack traces for "+_2+" method on "+_1);this.$fz[_1].remove(_2)}else{var _6=_4.ID?_4.ID:(_4.Class?_4.Class:_4),_7="isc.Log.logWarn('"+_6+"."+_2+"() - trace:' +";if(_3){_7+="'\\n' + isc.Log.getCallTrace(arguments))"}else{_7+="isc.Log.getStackTrace())"}
this.logWarn("expression is: "+_7);_5.observe(_4,_2,_7);this.logWarn("MethodTimer: Logging traces whenever "+_2+" method on "+_1+" is called");this.$fz[_1].add(_2)}},isc.A.traceCall=function isc_c_Log_traceCall(_1,_2){this.traceMethod(_1,_2,true)},isc.A.timeMethod=function isc_c_Log_timeMethod(_1,_2,_3,_4,_5){var _6=this.validObservation(_1,_2);if(!_6)return;if(!this.$f1)this.$f1={};if(!this.$f1[_1])this.$f1[_1]=[];if(this.$f1[_1].contains(_2))return;var _7=isc.Log.$ft+_2,_8=isc.$ah+_2,_9=(_6[_8]?_8:_2);_6[_7]=_6[_9];_6[_9]=isc.Log.makeTimerFunction(_2,_6,_3,_4,_5);this.logWarn("MethodTimer: Timing "+_2+" method on "+_1);this.$f1[_1].add(_2)},isc.A.stopTimingMethod=function isc_c_Log_stopTimingMethod(_1,_2){var _3=this.validObservation(_1,_2);if(!_3)return;if(this.$f1[_1].contains(_2)){var _4=isc.Log.$ft+_2,_5=isc.$ah+_2,_6=(_3[_5]?_5:_2)
if(!_3[_4]){this.logWarn("Not timing method '"+_2+"' on object '"+_1+"'.");this.$f1[_1].remove(_2);return}
_3[_6]=_3[_4];delete _3[_4];this.logWarn("MethodTimer: "+_2+" method on "+_1+" is no longer being timed");this.$f1[_1].remove(_2);return}},isc.A.makeTimerFunction=function isc_c_Log_makeTimerFunction(_1,_2,_3,_4,_5){var _6=_2[_1],_7=isc.Func.getName(_6,true);var _8=function(_12,_13,_14,_15,_16,_17,_18,_19,_20,_21,_22){if(_5)isc.Log.$f2();var _9=isc.timeStamp();var _10=_6.call(this,_12,_13,_14,_15,_16,_17,_18,_19,_20,_21,_22);var _11=(isc.timeStamp()-_9);if(!_4)isc.Log.$f3(this,_7,_11);return _10}
_8.$dx=(_2.ID||_2.Class||"")+"_"+_1+"Timing";_8.$f4=true;_8.$c1=isc.Log.$ft+_1;return _8},isc.A.$f3=function isc_c_Log__logTimerResult(_1,_2,_3){if(this.deferTimerLogs)return this.$f5(_1,_2,_3);var _4=isc.Log.$fu;_4[1]=(_1.logWarn?_2:_2+" on "+this.echoLeaf(_1));_4[3]=_3.toFixed(3);var _5=_4.join(isc.emptyString);if(_1.logMessage)_1.logWarn(_5);else isc.Log.logWarn(_5)},isc.A.validObservation=function isc_c_Log_validObservation(_1,_2){if(isc.isAn.emptyString(_1)||isc.isAn.emptyString(_2))return false;var _3=_1;if(isc.isA.String(_1)){_3=isc.Class.evaluate(_1);if(!_3){this.logWarn("MethodTimer: "+_1+" is not an object.");return false}}
if(_2.indexOf("(")!=-1){_2=_2.slice(0,_2.indexOf("("))}
if(isc.isA.ClassObject(_3)){var _4=_3.getPrototype();if(isc.isA.Function(_4[_2]))return _4;if(!_3[_2]){this.logWarn("MethodTimer: "+_2+" could not be found as a static or instance property on "+_1);return false}}else if(!_3[_2]){this.logWarn("MethodTimer: "+_2+" is undefined or null on "+_1);return false}
if(!isc.Func.convertToMethod(_3,_2)){this.logWarn("MethodTimer: "+_2+" is not a method on "+_1);return false}
return _3},isc.A.hiliteCanvas=function isc_c_Log_hiliteCanvas(_1){var _2=_1;if(isc.isA.String(_1))_2=window[_1];if(!isc.isA.Canvas(_2)){this.logWarn("Unable to find specified canvas '"+_1+"'.");return}
this.showHiliteCanvas(_2.getPageRect())},isc.A.hiliteElement=function isc_c_Log_hiliteElement(_1){var _2=_1||this.elementToHilite;if(isc.isA.String(_1))_2=isc.Element.get(_1);if(_2==null){this.logWarn("Unable to find specified element '"+_1+"'.");return}
this.showHiliteCanvas(isc.Element.getElementRect(_2));this.elementToHilite=null},isc.A.showHiliteCanvas=function isc_c_Log_showHiliteCanvas(_1){var _2=this._hiliteCanvas;if(!_2){_2=this._hiliteCanvas=isc.Canvas.create({ID:"logHiliteCanvas",autoDraw:false,overflow:"hidden",hide:function(){this.Super("hide",arguments);this.resizeTo(1,1);this.setTop(-20)},border1:"2px dotted red",border2:"2px dotted white"})}
_2.setPageRect(_1);isc.Page.setEvent("click",_2.getID()+".hide()");_2.setBorder(_2.border1);_2.bringToFront();_2.show();this.$f6()},isc.A.hideHiliteCanvas=function isc_c_Log_hideHiliteCanvas(){if(this._hiliteCanvas)this._hiliteCanvas.hide()},isc.A.$f6=function isc_c_Log__flashHiliteCanvas(){var _1=[this._hiliteCanvas.border1,this._hiliteCanvas.border2];for(var i=0;i<this.flashHiliteCount;i++){isc.Timer.setTimeout({target:this._hiliteCanvas,methodName:"setBorder",args:[_1[i%2]]},(this.flashHilitePeriod*i))}});isc.B._maxIndex=isc.C+34;isc.ClassFactory.defineClass("LogViewer");isc.A=isc.LogViewer;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.getGlobalLogCookie=function isc_c_LogViewer_getGlobalLogCookie(){var _1=isc.Cookie.get("GLog");if(!_1)return null;try{var _2=isc.$aq("return "+_1);return _2()}catch(e){this.logWarn("bad log cookie: "+_1+this.getStackTrace())}},isc.A.getLogCookie=function isc_c_LogViewer_getLogCookie(){var _1=isc.Cookie.get("Log");if(!_1)return null;try{var _2=isc.$aq("return "+_1);return _2()}catch(e){this.logWarn("bad log cookie: "+_1+this.getStackTrace())}});isc.B._maxIndex=isc.C+2;isc.A=isc.LogViewer.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.showConsoleInline=isc.Browser.isTouch;isc.A.$891=0;isc.A.$f7=25;isc.A.$f8="count";isc.B.push(isc.A.logWindowLoaded=function isc_LogViewer_logWindowLoaded(){return(this._logWindowLoaded&&this._logWindow!=null&&!this._logWindow.closed)},isc.A.showLog=function isc_LogViewer_showLog(_1,_2,_3,_4,_5){if(_5==null)_5=this.showConsoleInline;if(_2)this._logWindow=_2;if(this.logWindowLoaded()){this._logWindow.setResultsValue(isc.Log.getMessages().join("\r"));if(!this.$892){this._logWindow.focus()}
return}
if(!isc.Log.logViewer)isc.Log.logViewer=this;if(this._logWindow&&!this._logWindow.closed){return}
var _6={},_7=(_3?null:isc.LogViewer.getGlobalLogCookie());if(_7!=null){_6=_7}else{_6.left=100;_6.top=100;_6.width=640;_6.height=480}
if(_5){if(this.inlineWindow==null){this.inlineWindow=isc.Window.create({title:"Inline Developer Console",src:isc.Page.getIsomorphicClientDir()+"helpers/Log.html",animateMinimize:false,width:"50%",height:Math.round(isc.Page.getHeight()*0.8),headerControls:["headerIcon","headerLabel",isc.Button.create({width:16,height:14,title:"TL",layoutAlign:"center",click:function(){isc.Log.logViewer.inlineWindow.moveTo(0,0)}}),isc.Button.create({width:16,height:14,title:"BL",layoutAlign:"center",click:function(){isc.Log.logViewer.inlineWindow.moveTo(0,isc.Page.getHeight()-isc.Log.logViewer.inlineWindow.getHeight())}}),isc.Button.create({width:16,height:14,title:"TR",layoutAlign:"center",click:function(){isc.Log.logViewer.inlineWindow.moveTo(isc.Page.getWidth()-isc.Log.logViewer.inlineWindow.getWidth(),0)}}),isc.Button.create({width:16,height:14,title:"BR",layoutAlign:"center",click:function(){isc.Log.logViewer.inlineWindow.moveTo(isc.Page.getWidth()-isc.Log.logViewer.inlineWindow.getWidth(),isc.Page.getHeight()-isc.Log.logViewer.inlineWindow.getHeight())}}),"minimizeButton","maximizeButton","closeButton"],showMaximizeButton:true,showMinimizeButton:true,canDragReposition:true,canDragResize:true})}
if(!this.inlineWindow.isDrawn()){this.inlineWindow.draw()}
this.$892=true}else{var _8="RESIZABLE,WIDTH="+_6.width+",HEIGHT="+_6.height;if(_7){if(isc.Browser.isIE){_8+=",left="+_6.left+",top="+_6.top}else{_8+=",screenX="+_6.left+",screenY="+_6.top}
if(_7.evals)this.$f9=_7.evals.length-1}
_4=_4||"_simpleLog";this._logWindow=window.open(isc.Page.getIsomorphicClientDir()+"helpers/Log.html",_4+(isc.version.contains("version")?"Dev":""),_8)}
this.$ga(_3)},isc.A.$ga=function isc_LogViewer__initLogWindow(_1){if(this._logWindow==null&&this.inlineWindow!=null){var _2=this.inlineWindow.body.$sk();if(_2){this._logWindow=this.inlineWindow.body.$sk().contentWindow}
if(this._logWindow==null){return}}
if(this._logWindow==null)return;if(isc.Browser.isIE){try{this._logWindow.$gb=true}catch(e){this.delayCall("$ga",[_1],this.$f7);return}}
if(isc.Browser.isIE||this.$892){this._logWindow.launchWindow=window;if(this.$892){this._logWindow.showingInline=true}}
if(_1)this._logWindow.dontSaveState=true;var _3=function(){if(isc.Log.logViewer){var _4=isc.Log.logViewer._logWindow;if(_4&&!_4.closed)_4.focus()}}
isc.Page.setEvent("idle",_3,isc.Page.FIRE_ONCE);if(this._logWindow.initializePage)this._logWindow.initializePage()},isc.A.addToLog=function isc_LogViewer_addToLog(_1,_2){if(this.logWindowLoaded()&&!this.$gc){this._logWindow.addToLog(_1,_2)}},isc.A.updateStats=function isc_LogViewer_updateStats(_1){if(isc.$gd)return;if(!this.logWindowLoaded())return;var _2=isc.Canvas,_3=this._logWindow.staticForm;if(_1==this.$f8){_3.setValue(_1,_2._canvasList.length-_2._iscInternalCount)}else{_3.setValue(_1,_2._stats[_1])}},isc.A.displayEventTarget=function isc_LogViewer_displayEventTarget(){var _1=isc.EH.lastTarget?isc.EH.lastTarget.getID():"";if(_1==this.$ge)return;this.$ge=_1;if(this.logWindowLoaded()){this._logWindow.staticForm.setValue("currentCanvas",_1)}
var _2=isc.EH.lastEvent.nativeTarget;var _3=(_2?(_2.id||_2.ID||_2.tagName):'none')
if(this.logWindowLoaded()){this._logWindow.staticForm.setValue("nativeTarget",_3)}},isc.A.displayFocusTarget=function isc_LogViewer_displayFocusTarget(){var _1=isc.EH.getFocusCanvas(),_2=_1?_1.getID():"";if(_2==this.$gf)return;this.$gf=_2;if(this.logWindowLoaded()){this._logWindow.staticForm.setValue("currentFocusCanvas",_2)}},isc.A.displayMouseDownTarget=function isc_LogViewer_displayMouseDownTarget(){var _1=isc.EH.mouseDownEvent.target,_2=_1?_1.getID():"";if(this.logWindowLoaded()){this._logWindow.staticForm.setValue("lastMouseDown",_2);if(isc.AutoTest!=null&&isc.Log.showLocatorOnMouseDown){var _3=isc.AutoTest.getLocator();this._logWindow.staticForm.setValue("autoTestLocator",_3||"none")}}},isc.A.updateRPC=function isc_LogViewer_updateRPC(){if(this.logWindowLoaded()&&this._logWindow.RPCTracker)
this._logWindow.RPCTracker.dataChanged()},isc.A.evaluate=function isc_LogViewer_evaluate(_1,_2){return isc.Log.evaluate(_1,_2)},isc.A.clear=function isc_LogViewer_clear(){if(this.logWindowLoaded())this._logWindow.clearResults()});isc.B._maxIndex=isc.C+11;isc.$gg=isc.LogViewer.getGlobalLogCookie();if(isc.$gg!=null){isc.Log.applyLogPriorities(isc.$gg.priorityDefaults)
if(isc.$gg.defaultPriority!=null)
isc.Log.defaultPriority=isc.$gg.defaultPriority}else{isc.Log.setPriority("Log",isc.Log.INFO)}
isc.showConsole=function(_1,_2,_3,_4){isc.showLog(_1,_2,_3,_4)}
isc.addGlobal("showLog",function(_1,_2,_3,_4){isc.Log.show(_1,_2,_3,_4)})
isc.addGlobal("showConsoleInline",function(){isc.Log.show(null,null,null,null,true)});isc.Log.logInfo("initialized");isc.Log.$fy();isc.Log.supportsOnError=(isc.Browser.isIE&&(isc.Browser.version<=9||isc.Browser.version>=11)||isc.Browser.isMoz&&isc.Browser.version>=31);isc.Log.fallThroughToOnError=isc.Browser.isChrome&&isc.Browser.version>=34;if((isc.Log.supportsOnError||isc.Log.fallThroughToOnError)&&!(window.isc_installOnError==false))
{window.onerror=function(_1,_2,_3,_4,_5){if(_5!=null){isc.Log.$am(_5)}else{var _6=arguments.caller,_7;if(_6==null&&arguments.callee.caller!=null){_7=arguments.callee.caller;_6=_7.arguments}
if(_6&&_6.$e9){return}
var _8="Error:\r\t'"+_1+"'\r\tin "+_2+"\r\tat line "+_3;if(_7!=null&&_6==null&&isc.Browser.isIE&&isc.Browser.version>=9)
{_8+="\r\n    crashed in:  "+isc.Func.getName(_7,true)+"()\r\n    Use a pre-9.0 Internet Explorer for best diagnostics, otherwise Firefox or Chrome"}else if(_6!=null){_8+=isc.Log.getStackTrace(_6)}
isc.Log.logWarn(_8)}
if(isc.Browser.isIE&&isc.useIEDebugger){if(confirm("Run debugger?\r\r"+_8)){debugger}}}}else if(isc.Browser.autotest==isc.Browser.RUNNER){window.onerror=function(_1,_2,_3){if(isc.TestRunner){isc.TestRunner.addUnassignedErrorDetails("Javascript Exception at "+_2+", line "+_3+": "+_1)}}}
isc.$63a=function(){return"["+this.Class+" ID:"+this.ID+(this.componentId!=null?" (created by: "+this.componentId+")":"(created directly)")+"]"}
isc.$63b=function(_1,_2,_3,_4){var _5=isc.Log;if(!_5)return;if(_1==null)_1=_5.defaultPriority;if(_1<=_5.stackTracePriority&&this.getStackTrace!=null){_2+="\nStack trace:\n"+this.getStackTrace(arguments,2)}
if(!_3)_3=this.Class;_5.log(_1,_2,_3,this.ID+" (created by: "+this.componentId+")",this,_4)}
isc.A=Array;isc.A.ASCENDING=true;isc.A.DESCENDING=false;isc.A=Array;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.shouldSortAscending=function isc_Array_shouldSortAscending(_1){if(_1==Array.ASCENDING)return true;if(_1==Array.DESCENDING)return false;if(isc.isA.String(_1)){if(_1.toLowerCase()=="ascending")return true;if(_1.toLowerCase()=="descending")return false}
return null});isc.B._maxIndex=isc.C+1;isc.A=Array.prototype;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.sortByProperty=function isc_Arra_sortByProperty(_1,_2,_3,_4){return this.sortByProperties({property:_1,direction:_2,normalizer:_3,context:_4})},isc.A.setSort=function isc_Arra_setSort(_1){var _2=_1.length,_3=new Array(_2),_4=new Array(_2),_5=new Array(_2),_6=new Array(_2),_7=new Array(_2);for(var i=0;i<_2;++i){var _9=_1[i];_3[i]=_9.property;_4[i]=Array.shouldSortAscending(_9.direction);_5[i]=_9.normalizer;_6[i]=_9.context;_7[i]=_9.$114u}
return this.sortByProperties(_3,_4,_5,_6,_7)},isc.A.sortByProperties=function isc_Arra_sortByProperties(){var _1=isc.$gh,_2=isc.$gi;var _3=false,_4=false;if(isc.isAn.Array(arguments[0])){this.sortProps=arguments[0];this.sortDirections=arguments[1]||[];this.normalizers=arguments[2]||[];this.contexts=arguments[3]||[];this.$135c=arguments[4]||[];_3=arguments[5]||false;_4=arguments[6]||false}else{if(!this.sortProps){this.sortProps=[];this.normalizers=[];this.sortDirections=[];this.contexts=[];this.$135c=[]}else{this.sortProps.clear();this.sortDirections.clear();this.normalizers.clear();this.contexts.clear();this.$135c.clear()}
for(var i=0,_6=arguments.length,_7=0;i<_6;++i){var _8=arguments[i];if(!isc.isAn.Object(_8)){if(_7==0){_3=_8||false}else if(_7==1){_4=_8||false}
++_7}else{this.sortProps[i]=_8.property;this.sortDirections[i]=_8.direction;this.normalizers[i]=_8.normalizer;this.contexts[i]=_8.context;this.$135c[i]=_8.$114u;_3=_4=false;_7=0}}}
if(this.sortProps==null||this.sortProps.length==0){return(_3?null:this)}
var _9=this.sortProps,_10=this.normalizers,_11=this.contexts;_1.length=_9.length;_2.length=_9.length;var _12=(_4&&isc.ResultSet!=null?isc.ResultSet.getLoadingMarker():undefined);var _13=Array.compareAscending,_14=Array.compareDescending;var _15=isc.timestamp();for(var i=0;i<_9.length;i++){var _16=isc.$506[i]=this.sortDirections[i];if(!isc.isA.Function(this.$135c[i])){this.$135c[i]=(_16?_13:_14)}
var _17=_9[i],_18=_10[i],_19=_11[i],l=this.length;_1[i]=new Array(l);_2[i]=new Array(l);if(isc.isA.Function(_18)){for(var _21=0;_21<l;++_21){var _22=this[_21];if(_22==null){isc.$gq=true;continue}else if(_22===_12){return(_3?null:this)}
_22.$gm=_21;var _23=_18(_22,this.sortProps[i],_19);_1[i][_21]=_23;if(_24!=null&&!Array.$gn(_22[this.sortProps[i]],_24)){_2[i][_21]=_22[this.sortProps[i]]}
if(isc.isA.SpecialNumber(_23)&&isNaN(_23)){_1[i][_21]=0-Number.MAX_VALUE}}}else{var _24=null;var _25=false;var _26=false;if(isc.isA.String(_18)){_24=_18}else if(_18!=null){_25=true}
if(_19&&_19.getField){var _27=_19.getField(_17);if(_27){if(_27.dataPath){_17=isc.Canvas.$840(_27.dataPath,_19);_26=true}else{_17=_27.name;_26=false}
if(_27.type&&_24==null){_24=_27.type}}else{_26=(_17.indexOf("/")>=0)}}
if(_24==null){_24=this.$gj(_9[i])}
var _28=isc.SimpleType.getType(_24);var _29=isc.SimpleType.getBaseType(_28);if(_29==null){_29=_24}
if(!_25){_18=Array.$gk(_29)}
if(_18==null)_18=Array.$gl;var _30=this.normalizers[i];for(var _21=0;_21<l;++_21){var _22=this[_21];if(_22==null){isc.$gq=true;continue}else if(_22===_12){return(_3?null:this)}
_22.$gm=_21;var _31=Array.$905(_22,_17,_26,_28);var _23=null;if(!_25){_23=_18(_31)}else{var _32=_18[_31];if(_32==null)_32=_31;_23=Array.$g7(_32)}
_1[i][_21]=_23;if(_24!=null&&!Array.$gn(_31,_29)){_2[i][_21]=_22[this.sortProps[i]]}}}}
if(isc.Browser.compensateForUnstableSort==null){isc.Browser.compensateForUnstableSort=isc.Browser.isWebKit||isc.Browser.isOpera||(isc.Browser.isIE&&isc.Browser.version>=9)}
if(isc.Browser.compensateForUnstableSort){var _33=_1.length;_1[_33]=new Array(this.length);for(var i=0;i<this.length;i++){_1[_33][i]=i}
var _34=_2.length;if(_34!=0){_2[_34]=new Array(this.length);for(var i=0;i<this.length;i++){_2[_34][i]=i}}
isc.$506[_33]=true;this.$135c[_33]=_13}
var _35=false;for(var i=0;i<isc.$gi.length;i++){if(isc.$gi[i].length>0){_35=true;break}}
isc.$752=_35;var _36=isc.$gh,_37=isc.$506,_35=isc.$752,_38=this.$135c;var _39=function(_49,_50){var _40=(_49!=null?_49.$gm:null),_41=(_50!=null?_50.$gm:null);for(var i=0;i<_36.length;i++){var _42=_36[i][_40],_43=_36[i][_41];if(_35&&_42!=null&&_43!=null){var _44=isc.$gi,_45=_44[i][_40],_46=_44[i][_41];if(_45!==undefined&&_46!==undefined){_42=_45;_43=_46}}
var _47=_38[i](_42,_43);if(_47!=0)return _47;else if(_35){if((_45!==undefined)!=(_46!==undefined)){return(_45!==undefined)==!!_37[i]?-1:1}}}
return 0};var _15=isc.timeStamp();this.sort(_39);if(isc.$gq){isc.Log.logWarn("Attempt to sort array by property hit null entry where a record should be. Array:"+isc.Log.echo(this));isc.$gq=null}
var _48=null;if(_3){_48=this.$120z("$gm")}else{this.clearProperty("$gm")}
_1.clear();_2.clear();isc.$506.clear();this.dataChanged();return(_3?_48:this)},isc.A.unsort=function isc_Arra_unsort(){if(this.sortProps)this.sortProps.clear();return true},isc.A.$gj=function isc_Arra__getSortDataType(_1,_2){var _3=(_2!=null?(isc.isAn.Array(_2)?_2:[_2]):this);for(var i=0;i<_3.length;i++){if(!isc.isAn.Object(_3[i]))continue;_2=_3[i][_1];if(_2==null)continue;var _5=Array.$gr(_2);if(_5!=null)return _5}
return null},isc.A.$gs=function isc_Arra__getNormalizer(_1,_2){var _3=this.$gj(_1,_2);var _4=Array.$gk(_3);return _4||Array.$gl},isc.A.normalize=function isc_Arra_normalize(_1,_2){var _3=(_2.indexOf("/")>=0);var _4=null;var _5;if(isc.isA.String(this.normalizer)){var _6=this.$gj(_2);_4=isc.SimpleType.getType(_6);var _7=isc.SimpleType.getBaseType(_4);_5=this.$gk(_7)}else{_5=this.normalizer}
var _8=Array.$905(_1,_2,_3,_4);return _5[_8]});isc.B._maxIndex=isc.C+7;isc.A=Array;isc.A.$gt="$gu";isc.A.$gv="$gw";isc.A=Array;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$a6="string";isc.A.$gx="text";isc.A.$gy="number";isc.A.$gz="integer";isc.A.$g0="float";isc.A.$g1="int";isc.A.$g2="boolean";isc.A._$Date_="Date";isc.A.$g3="Time";isc.A.$68l="datetime";isc.A.$89w="Datetime";isc.A.$g4="date";isc.A.$g5="time";isc.A.$bl="object";isc.A.$g6={"float":"number","int:":"number","integer":"number","text":"string","Date":"date","Time":"date","time":"date"};isc.B.push(isc.A.$gl=function isc_Array__normalizeObj(_1){return _1},isc.A.$905=function isc_Array__getAtomicValue(_1,_2,_3,_4){var _5=null;if(_3){_5=isc.Canvas.$70o(_2,null,_1,null,true)}else{_5=_1[_2]}
if(_4&&_4.getAtomicValue){isc.Func.replaceWithMethod(_4,"getAtomicValue","value");_5=_4.getAtomicValue(_5)}
return _5},isc.A.$g7=function isc_Array__normalizeStr(_1){return(isc.isA.String(_1)?_1.toLowerCase():isc.emptyString)},isc.A.$g8=function isc_Array__normalizeNum(_1){return isc.isA.Number(_1)?_1:(0-Number.MAX_VALUE)},isc.A.$g9=function isc_Array__normalizeBool(_1){if(_1==true)return 1;if(_1==false)return 0;if(_1==null)return-1;return-2},isc.A.$ha=function isc_Array__normalizeDate(_1){var _2=(_1&&isc.isA.Date(_1)?_1.getTime():new Date(_1).getTime())
if(isNaN(_2)||_1==null)return-8640000000000000;return _2},isc.A.$hb=function isc_Array__normalizeTime(_1){if(!isc.isA.Date(_1)&&_1!=null)_1=isc.Time.parseInput(_1);if(isc.isA.Date(_1))return _1.getTime();return 0},isc.A.textToNumericNormalizer=function isc_Array_textToNumericNormalizer(_1){var _2=parseInt(_1,10);if(isc.isA.Number(_2))return _2;else return 0},isc.A.$gk=function isc_Array__getNormalizerFromType(_1){if(!_1||!isc.isA.String(_1))return null;switch(_1){case this.$a6:case this.$gx:return Array.$g7;case this.$g2:return Array.$g9;case this._$Date_:case this.$g4:case this.$89w:case this.$68l:return Array.$ha;case this.$g3:case this.$g5:return Array.$hb;case this.$gy:case this.$gz:case this.$g1:case this.$g0:return Array.$g8}
return Array.$gl},isc.A.$gr=function isc_Array__getType(_1){var _2=typeof _1;if(_2==this.$bl){if(isc.isA.Date(_1))_2=this.$g4}
return _2},isc.A.$gn=function isc_Array__matchesType(_1,_2){var _3=this.$gr(_1);if(_3==_2)return true;return(this.$g6[_2]==_3)},isc.A.compareAscending=function isc_Array_compareAscending(_1,_2){if(_1!=null&&_1.localeCompare!=null){return _1.localeCompare(_2)}
if(_2!=null&&_2.localeCompare!=null){return-_2.localeCompare(_1)}
return(_2>_1?-1:_2<_1?1:0)},isc.A.compareDescending=function isc_Array_compareDescending(_1,_2){if(_1!=null&&_1.localeCompare!=null){return-_1.localeCompare(_2)}
if(_2!=null&&_2.localeCompare!=null){return _2.localeCompare(_1)}
return(_2<_1?-1:_2>_1?1:0)},isc.A.safariCompareAscending=function isc_Array_safariCompareAscending(_1,_2){if(_1!=null&&_1.localeCompare!=null){return(_1.localeCompare(_2)-2)}
if(_2!=null&&_2.localeCompare!=null){return-(_2.localeCompare(_1)-2)}
return(_2>_1?-1:_2<_1?1:0)},isc.A.safariCompareDescending=function isc_Array_safariCompareDescending(_1,_2){if(_1!=null&&_1.localeCompare!=null){return-(_1.localeCompare(_2)-2)}
if(_2!=null&&_2.localeCompare!=null){return(_2.localeCompare(_1)-2)}
return(_2<_1?-1:_2>_1?1:0)});isc.B._maxIndex=isc.C+15;isc.$gh=[];isc.$gi=[];isc.$506=[];(function(){if(isc.Browser.isSafari){var b="b";if(b.localeCompare("a")==3){Array.compareAscending=Array.safariCompareAscending;Array.compareDescending=Array.safariCompareDescending}}})();isc.A=Array.prototype;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.max=function isc_Arra_max(_1,_2){if(_1==null)_1=0;if(_2==null)_2=this.length;var _3=null;for(var i=_1;i<_2;i++){var _5=this[i];if(isc.isA.Number(_5)){if(_3==null)_3=_5;else _3=Math.max(_3,_5)}}
return _3},isc.A.min=function isc_Arra_min(_1,_2){if(_1==null)_1=0;if(_2==null)_2=this.length;var _3=null;for(var i=_1;i<_2;i++){var _5=this[i];if(isc.isA.Number(_5)){if(_3==null)_3=_5;else _3=Math.min(_3,_5)}}
return _3},isc.A.sum=function isc_Arra_sum(_1,_2){if(_1==null)_1=0;if(_2==null)_2=this.length;var _3=0;for(var i=_1;i<_2;i++)
if(isc.isA.Number(this[i]))_3+=this[i];return _3},isc.A.and=function isc_Arra_and(_1,_2){if(_1==null)_1=0;if(_2==null)_2=this.length;for(var i=_1;i<_2;i++)
if(!this[i])return false;return true},isc.A.or=function isc_Arra_or(_1,_2){if(_1==null)_1=0;if(_2==null)_2=this.length;var _3=0;for(var i=_1;i<_2;i++)
if(this[i])return true;return false});isc.B._maxIndex=isc.C+5;isc.getValueForKey=function(_1,_2,_3){if(_2&&_2[_1]!=null&&!isc.isAn.Array(_2))return _2[_1];return(arguments.length<3?_1:_3)}
isc.getKeyForValue=function(_1,_2,_3){if(_2){for(var _4 in _2){if(_2[_4]==_1)return _4}}
return(arguments.length<3?_1:_3)}
isc.makeReverseMap=function(_1){var _2={},_3;for(var _4 in _1){_3=_1[_4];_2[_3]=_4}
return _2}
isc.sortByKey=function(_1){var _2={},_3=isc.getKeys(_1).sort();for(var i=0;i<_3.length;i++){_2[_3[i]]=_1[_3[i]]}
return _2}
isc.sortByValue=function(_1){return isc.makeReverseMap(isc.sortByKey(isc.makeReverseMap(_1)))}
isc.ClassFactory.defineClass("Time");isc.A=isc.Time;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$he=[/^\s*(\d?\d)\s*[: ]\s*(\d?\d)\s*[: ]\s*(\d?\d)?\s*([AaPp][Mm]?)?\s*([+-]\d{2}:\d{2}|Z)?\s*$/,/^\s*(\d?\d)\s*[: ]\s*(\d?\d)(\s*)([AaPp][Mm]?)?\s*([+-]\d{2}:\d{2}|Z)?\s*$/,/^\s*(\d\d)(\d\d)(\d\d)?\s*([AaPp][Mm]?)?\s*([+-]\d{2}:\d{2}|Z)?\s*$/,/^\s*(\d)(\d\d)(\d\d)?\s*([AaPp][Mm]?)?\s*([+-]\d{2}:\d{2}|Z)?\s*$/,/^\s*(\d\d?)(\s)?(\s*)([AaPp][Mm]?)?\s*([+-]\d{2}:\d{2}|Z)?\s*$/];isc.A.$111p=/(?:(\d?\d)\s*[: ]\s*(\d?\d)\s*[: ]\s*(\d?\d)?|(\d?\d)\s*[: ]\s*(\d?\d)(\s*)|(\d\d)(\d\d)(\d\d)|(\d)(\d\d)(\d\d)?|(\d\d?)(\s)?(\s*))\s*([AaPp][Mm])?/g;isc.A.formatterMap={toTime:{showSeconds:true,padded:false,show24:false},to24HourTime:{showSeconds:true,padded:false,show24:true},toPaddedTime:{showSeconds:true,padded:true,show24:false},toPadded24HourTime:{showSeconds:true,padded:true,show24:true},toShortTime:{showSeconds:false,padded:false,show24:false},toShort24HourTime:{showSeconds:false,padded:false,show24:true},toShortPaddedTime:{showSeconds:false,padded:true,show24:false},toShortPadded24HourTime:{showSeconds:false,padded:true,show24:true},toTimestamp:{showSeconds:true,padded:true,show24:true,showMillis:true}};isc.A.displayFormat="toTime";isc.A.shortDisplayFormat="toShortTime";isc.A.AMIndicator=" am";isc.A.PMIndicator=" pm";isc.B.push(isc.A.setDefaultDisplayTimezone=function isc_c_Time_setDefaultDisplayTimezone(_1,_2){this.$854=!_2;if(_1==null)return;var _3,_4;if(isc.isA.Number(_1)){_1=-_1;_3=Math.floor(_1/60);_4=_1-(_3*60)}else if(isc.isA.String(_1)){var _5=_1.split(":");_3=_5[0];var _6=_3&&_3.startsWith("-");if(_6)_3=_3.substring(1);_4=_5[1];_3=(_6?-1:1)*parseInt(_3,10);_4=(_6?-1:1)*parseInt(_4,10)}
if(isc.isA.Number(_3)&&isc.isA.Number(_4)){this.UTCHoursDisplayOffset=_3;this.UTCMinutesDisplayOffset=_4}},isc.A.getDefaultDisplayTimezone=function isc_c_Time_getDefaultDisplayTimezone(){var H=this.UTCHoursDisplayOffset,M=this.UTCMinutesDisplayOffset,_3=H<0;return(!_3?"+":"-")+((_3?-1:1)*H).stringify(2)+":"+((_3?-1:1)*M).stringify(2)});isc.B._maxIndex=isc.C+2;isc.A=isc.Time;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$hf=[null,":",null,":"];isc.A.$hg=[null,":"];isc.B.push(isc.A.toTime=function isc_c_Time_toTime(_1,_2,_3){return this.format(_1,_2,false,_3)},isc.A.toShortTime=function isc_c_Time_toShortTime(_1,_2,_3){return this.format(_1,_2,true,_3)},isc.A.format=function isc_c_Time_format(_1,_2,_3,_4){if(!isc.isA.Date(_1))return _1;var _5=_2;if(!_2&&!isc.isA.String(_2)&&!isc.isA.Function(_2)){_2=_3?this.shortDisplayFormat:this.displayFormat}
if(isc.isA.Function(_2))return _2(_1,_4);if(isc.isA.String(_2))_2=this.formatterMap[_2];if(!isc.isAn.Object(_2)){this.logWarn("Invalid time formatter:"+_5+" - using 'toTime'");_2=this.formatterMap.toTime}
var _6=_2.showSeconds,_7=_2.padded,_8=_2.show24,_9=_2.showMillis;var _10;if(_4!=null)_10=!_4;else _10=!_1.logicalTime&&!_1.logicalDate;var _11,_12;if(!_10){_11=_1.getHours();_12=_1.getMinutes()}else{var _11=_1.getUTCHours(),_12=_1.getUTCMinutes();var _13=this.$68d(_11,_12,this.getUTCHoursDisplayOffset(_1),this.getUTCMinutesDisplayOffset(_1));_11=_13[0];_12=_13[1]}
var _14=_6?_1.getUTCSeconds():null,_15=_8?null:(_11>=12);if(!_8){if(_11>12)_11=_11-12;if(_11==0)_11=12}
if(_7)_11=_11.stringify(2);var _16=_6?this.$hf:this.$hg;_16[0]=_11;_16[2]=_12.stringify();if(_6)_16[4]=_14.stringify();if(!_8)_16[5]=(_15?this.PMIndicator:this.AMIndicator);else _16[5]=null;var _17=_16.join(isc.emptyString);if(_9){var _18=_1.getMilliseconds().stringify(3);_17+="."+_18}
return _17},isc.A.parseInput=function isc_c_Time_parseInput(_1,_2,_3,_4,_5){var _6=null,_7=null,_8=null,_9=null,_10;var _11,_12;if(isc.isA.Date(_1)){_3=true;_6=_1.getUTCHours();_7=_1.getUTCMinutes();_8=_1.getUTCSeconds();_9=_1.getUTCMilliseconds()}else if(_1!=null){for(var i=0;i<isc.Time.$he.length;i++){var _14=isc.Time.$he[i].exec(_1);if(_14)break}
if(_14){var _15,_16,_17;if(_5!=null){_17=_16=_15=null}else{_17=_16=_15=0}
_6=_14[1]?Math.min(parseInt(_14[1],10),23):_15;_7=_14[2]?Math.min(parseInt(_14[2],10),59):_16;_8=_14[3]?Math.min(parseInt(_14[3],10),59):_17;_10=_14[4];if(_10){if(!this.$hh)this.$hh={p:true,P:true,pm:true,PM:true,Pm:true};if(this.$hh[_10]==true){if(_6==null)_6=12;else if(_6<12)_6+=12}else if(_6==12)_6=0}
if(_4&&_14[5]!=null&&_14[5]!=""&&_14[5].toLowerCase()!="z"){var _18=_14[5].split(":"),H=_18[0],_20=H&&H.startsWith("-"),M=_18[1];_11=parseInt(H,10);_12=(_20?-1:1)*parseInt(M,10)}}else if(_2)return null}else if(_2)return null;var _22;if(_5!=null){_22=_5.duplicate()}else{_22=new Date(null);_22.setMilliseconds(0)}
if(_4||_3){if(_11==null){_11=_3?0:this.getUTCHoursDisplayOffset(_22)}
if(_12==null){_12=_3?0:this.getUTCMinutesDisplayOffset(_22)}
var _23=this.$68d(_6,_7,(0-_11),(0-_12));_6=_23[0];_7=_23[1];_22.setUTCHours(_6==null?_22.getUTCHours():_6,_7==null?_22.getUTCMinutes():_7,_8==null?_22.getUTCSeconds():_8,_9==null?_22.getUTCMilliseconds():_9)}else{_22.setHours(_6==null?_22.getHours():_6,_7==null?_22.getMinutes():_7,_8==null?_22.getSeconds():_8,_9==null?_22.getMilliseconds():_9)}
if(!_4)_22.logicalTime=true;return _22},isc.A.$111q=function isc_c_Time__prepForParseValueExpressions(_1){if(_1==null)return null;_1=String(_1);_1=_1.replace(this.$111p,function(_2,_3,_4,_5,_6,_7,_8,_9,_10,_11,_12,_13,_14,_15,_16,_17,_18){_3=parseInt(_3||_6||_9||_12||_15)||0;_4=parseInt(_4||_7||_10||_13||_16)||0;_5=(_5||_8||_11||_14||_17);if(_5){_5=":"+(parseInt(_5)||0).stringify(2)}else _5="";_18=(_18||"").trim();var _1=_3+":"+_4.stringify(2)+_5;if(_18){_1+=_18}
return _1+" "});return _1},isc.A.$68d=function isc_c_Time__applyTimezoneOffset(_1,_2,_3,_4){if(_2==null||_1==null){this.logWarn("applyTimezoneOffset passed null hours/minutes");return[_1,_2]}
if(_3==null)_3=0;if(_4==null)_3=0;if(_3==0&&_4==0)return[_1,_2,0];_1+=_3;_2+=_4;while(_2>=60){_2-=60;_1+=1}
while(_2<0){_2+=60;_1-=1}
var _5=0;while(_1>=24){_1-=24;_5+=1}
while(_1<0){_1+=24;_5-=1}
return[_1,_2,_5]},isc.A.createDate=function isc_c_Time_createDate(_1,_2,_3,_4,_5){return this.createLogicalTime(_1,_2,_3,_4,_5)},isc.A.createLogicalTime=function isc_c_Time_createLogicalTime(_1,_2,_3,_4,_5){var _6=new Date(null);if(_1==null)_1=0;if(_2==null)_2=0;if(_3==null)_3=0;if(_4==null)_4=0;if(_5){_6.setUTCHours(_1,_2,_3,_4)}else{_6.setHours(_1,_2,_3,_4)}
_6.logicalTime=true;return _6},isc.A.setShortDisplayFormat=function isc_c_Time_setShortDisplayFormat(_1){this.shortDisplayFormat=_1},isc.A.setNormalDisplayFormat=function isc_c_Time_setNormalDisplayFormat(_1){this.displayFormat=_1},isc.A.compareTimes=function isc_c_Time_compareTimes(_1,_2){if(isc.isA.String(_1))_1=isc.Time.parseInput(_1);if(isc.isA.String(_2))_2=isc.Time.parseInput(_2);if(_1==null&&_2==null)return true;if(!isc.isA.Date(_1)||!isc.isA.Date(_2))return false;return((_1.getUTCHours()==_2.getUTCHours())&&(_1.getUTCMinutes()==_2.getUTCMinutes())&&(_1.getUTCSeconds()==_2.getUTCSeconds()))},isc.A.compareLogicalTimes=function isc_c_Time_compareLogicalTimes(_1,_2){if(!isc.isA.Date(_1)||!isc.isA.Date(_2))return false;_1=isc.Date.getLogicalTimeOnly(_1);_2=isc.Date.getLogicalTimeOnly(_2);var _3=_1.getHours(),_4=_1.getMinutes(),_5=_1.getSeconds(),_6=_1.getMilliseconds();var _7=_2.getHours(),_8=_2.getMinutes(),_9=_2.getSeconds(),_10=_2.getMilliseconds();var _11=_6+1000*(_5+60*(_4+60*_3));var _12=_10+1000*(_9+60*(_8+60*_7));return _11>_12?-1:(_12>_11?1:0)},isc.A.$76r=function isc_c_Time__performDstInit(){var _1=new Date(),_2=new Date(0),_3=new Date(0);_2.setUTCFullYear(_1.getUTCFullYear());_2.setUTCMonth(0);_2.setUTCDate(1);_3.setUTCFullYear(_1.getUTCFullYear());_3.setUTCMonth(6);_3.setUTCDate(1);var _4=_1.getTimezoneOffset();this.januaryDstOffset=_2.getTimezoneOffset();var _5=_3.getTimezoneOffset();this.dstDeltaMinutes=this.januaryDstOffset-_5;if(this.dstDeltaMinutes>0){this.southernHemisphere=false;this.adjustForDST=true;if(_4==_5)this.currentlyInDST=true}else if(this.dstDeltaMinutes<0){this.southernHemisphere=true;this.adjustForDST=true;if(_4==this.januaryDstOffset)this.currentlyInDST=true}else{this.adjustForDST=false}
this.dstDeltaMinutes=Math.abs(this.dstDeltaMinutes);this.dstDeltaHours=Math.floor(this.dstDeltaMinutes/60);this.dstDeltaMinutes-=(this.dstDeltaHours*60)},isc.A.getUTCHoursDisplayOffset=function isc_c_Time_getUTCHoursDisplayOffset(_1,_2){var _3=this.currentlyInDST?-(this.dstDeltaHours):0;if(this.adjustForDST){if(_1.getTimezoneOffset()==this.januaryDstOffset){if(this.southernHemisphere){_3+=this.dstDeltaHours}}else{if(!this.southernHemisphere){_3+=this.dstDeltaHours}}}
return(_2!=null?_2:this.UTCHoursDisplayOffset)+(this.adjustForDST?_3:0)},isc.A.getUTCMinutesDisplayOffset=function isc_c_Time_getUTCMinutesDisplayOffset(_1,_2){var _3=this.currentlyInDST?-(this.dstDeltaMinutes):0;if(this.adjustForDST){if(_1.getTimezoneOffset()==this.januaryDstOffset){if(this.southernHemisphere){_3+=this.dstDeltaMinutes}}else{if(!this.southernHemisphere){_3+=this.dstDeltaMinutes}}}
return(_2!=null?_2:this.UTCMinutesDisplayOffset)+(this.adjustForDST?_3:0)});isc.B._maxIndex=isc.C+15;isc.Time.$76r();isc.Time.setDefaultDisplayTimezone(new Date().getTimezoneOffset(),true);isc.A=isc.Class.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.getSGWTInstance=function isc_Class_getSGWTInstance(){return this[isc.gwtRef]},isc.A.getSGWTModule=function isc_Class_getSGWTModule(){return this[isc.gwtModule]},isc.A.getSGWTFactory=function isc_Class_getSGWTFactory(){var _1=this.getSGWTModule();if(!_1)return null;var _2=this.getSGWTInstance();if(!_2)return null;return _1.getSGWTFactory(_2)},isc.A.getSGWTClassName=function isc_Class_getSGWTClassName(){var _1=this.getSGWTFactory();return _1?_1.getClassName():null},isc.A.setSGWTProperties=function isc_Class_setSGWTProperties(_1){var _2=this.getSGWTFactory();if(_2){_2.setSGWTProperties(this.getSGWTInstance(),_1)}else{this.setProperties(_1)}},isc.A.getSGWTAttributes=function isc_Class_getSGWTAttributes(){var _1=this.getSGWTFactory();if(_1){return _1.getSGWTAttributes()}else{var _2=[];for(var _3 in this){if(typeof this[_3]=="function")continue;if(_3.charAt(0)=="_")continue;if(_3==_3.toUpperCase())continue;_2[_2.length]=_3}
return _2}},isc.A.getSGWTProperty=function isc_Class_getSGWTProperty(_1){var _2=this.getSGWTModule();if(_2){return _2.getProperty(this.getSGWTInstance(),_1)}else{return this.getProperty(_1)}},isc.A.getSGWTPropertyAsString=function isc_Class_getSGWTPropertyAsString(_1){var _2=this.getSGWTModule();if(_2){return _2.getPropertyAsString(this.getSGWTInstance(),_1)}else{var _3=this.getProperty(_1);return _3?_3.toString():_3}});isc.B._maxIndex=isc.C+8;isc.defineClass("SGWTFactory");isc.A=isc.SGWTFactory;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.CONFIG_BLOCK="sgwtConfigBlock";isc.A.SC_INSTANCE="smartclientInstance";isc.A.BEAN_CLASS_PARTS="beanClassParts";isc.B.push(isc.A.getFactory=function isc_c_SGWTFactory_getFactory(_1){if(!_1)return null;var _2=isc[_1];if(_2&&isc.isA.SGWTFactoryObject(_2)){return _2}else{return null}},isc.A.extractFromConfigBlock=function isc_c_SGWTFactory_extractFromConfigBlock(_1){if(_1[isc.SGWTFactory.CONFIG_BLOCK]){return _1[isc.SGWTFactory.SC_INSTANCE]}else{return _1}});isc.B._maxIndex=isc.C+2;isc.A=isc.isA;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.SGWTFactoryObject=function isc_isA_SGWTFactoryObject(_1){return _1!=null&&_1.$1229==true});isc.B._maxIndex=isc.C+1;isc.A=isc.SGWTFactory.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$1229=true;isc.B.push(isc.A.getClassName=function isc_SGWTFactory_getClassName(){return this.beanClassName},isc.A.getSGWTClassName=function isc_SGWTFactory_getSGWTClassName(){return this.beanClassName},isc.A.getSuperClass=function isc_SGWTFactory_getSuperClass(){return this.$b8},isc.A.init=function isc_SGWTFactory_init(){this.Super("init",arguments);this.Class=this.beanClassName;this.isFrameworkClass=this.isSGWTFrameworkClass();if(!this.isFrameworkClass){var _1=this.getSGWTSuperClass();while(_1&&!_1.isFrameworkClass){_1=_1.getSGWTSuperClass()}
if(_1)this.$75y=_1.Class}
if(!this.$75y)this.$75y=this.Class;this.$b8=this.getSGWTSuperClass();isc.isA[this.beanClassName]=isc.ClassFactory.makeIsAFunc(this.beanClassName);if(this.isA("Canvas"))this._isA_Canvas=true},isc.A.registerClassName=function isc_SGWTFactory_registerClassName(){try{var _1=this;var _2=isc[this.beanClassName];if(_2){if(isc.isA.ClassObject(_2)){this.logWarn("beanClassName '"+this.beanClassName+"' collides with existing native SmartClient class with the same name. The bean will not be registered.");return}else if(isc.isA.SGWTFactoryObject(_2)){this.logWarn("beanClassName '"+this.beanClassName+"' has already been registered. The existing bean will be replaced.")}else{this.logWarn("beanClassName '"+this.beanClassName+"' collides with the ID of an existing object with value '"+this.echo(_2)+"'. The bean will not be registered.");return}}
var _3=this.beanClassName.split(".");if(_3.length>1){var _4=isc;var _5="isc";for(var i=0;i<_3.length-1;i++){var _7=_3[i]
var _2=_4[_7];_5=_5+"."+_7;if(_2){if(!_2[isc.SGWTFactory.BEAN_CLASS_PARTS]){this.logWarn("beanClassName '"+this.beanClassName+"' collides with existing object located at '"+_5+"' with value '"+this.echo(_2)+"'. The bean will not be registered.");return}}else{_4[_7]={};_4[_7][isc.SGWTFactory.BEAN_CLASS_PARTS]=true}
_4=_4[_7]}
var _8=_3[_3.length-1];_4[_8]=_1}
isc[this.beanClassName]=_1}
catch(e){this.logError(e.message)}},isc.A.create=function isc_SGWTFactory_create(_1,_2,_3,_4,_5,_6,_7,_8,_9,_10,_11,_12,_13){if(isc.captureDefaults){var _14={type:this.Class,defaults:isc.addProperties({},_1,_2,_3,_4,_5,_6,_7,_8,_9,_10,_11,_12,_13)}
delete _14.defaults._constructor;if(!isc.capturedComponents)isc.capturedComponents=[];isc.capturedComponents.add(_14);if(_14.defaults.ID){isc.ClassFactory.addGlobalID(_14,_14.defaults.ID)}
return _14}
var _15=this.sgwtModule.newInstance(this.beanClassName);var _16=isc.addProperties({},_1,_2,_3,_4,_5,_6,_7,_8,_9,_10,_11,_12,_13);delete _16._constructor;this.setSGWTProperties(_15,_16);return this.getOrCreateJsObj(_15)},isc.A.createRaw=function isc_SGWTFactory_createRaw(){var _1=this;var _2={getClass:function(){return isc[_1.beanClassName]},init:function(_4,_5,_6,_7,_8,_9,_10,_11,_12,_13,_14,_15,_16){isc.addProperties(this,_4,_5,_6,_7,_8,_9,_10,_11,_12,_13,_14,_15,_16);delete(this.init);delete(this.completeCreation);delete(this.getClass);delete(this[isc.SGWTFactory.CONFIG_BLOCK]);if(this[isc.gwtRef]===null)delete this[isc.gwtRef];if(isc.captureDefaults){var _3={type:_1.beanClassName,defaults:isc.addProperties({},this)}
if(!isc.capturedComponents)isc.capturedComponents=[];isc.capturedComponents.add(_3);if(_3.defaults.ID){isc.ClassFactory.addGlobalID(_3,_3.defaults.ID)}
this[isc.SGWTFactory.SC_INSTANCE]=_3;this[isc.SGWTFactory.CONFIG_BLOCK]=true;return}
this[isc.SGWTFactory.SC_INSTANCE]=_1.create(this);this[isc.SGWTFactory.CONFIG_BLOCK]=true},completeCreation:function(_4,_5,_6,_7,_8,_9,_10,_11,_12,_13,_14,_15,_16){this.init(_4,_5,_6,_7,_8,_9,_10,_11,_12,_13,_14,_15,_16);return this[isc.SGWTFactory.SC_INSTANCE]}}
_2[isc.SGWTFactory.CONFIG_BLOCK]=true;return _2},isc.A.setSGWTProperties=function isc_SGWTFactory_setSGWTProperties(_1,_2){if(_2){if(isc.isA.String(_2)){if(!(isc.startsWith(_2,'(')&&isc.endsWith(_2,')'))){_2='('+_2+')'}
_2=isc.Class.evaluate(_2)}
for(var _3 in _2){this.sgwtModule.setProperty(_1,_3,_2[_3])}}},isc.A.getSGWTAttributes=function isc_SGWTFactory_getSGWTAttributes(){return this.sgwtModule.getAttributes(this.beanClassName)},isc.A.getSGWTProperty=function isc_SGWTFactory_getSGWTProperty(_1,_2){return this.sgwtModule.getProperty(_1,_2)},isc.A.getSGWTPropertyAsString=function isc_SGWTFactory_getSGWTPropertyAsString(_1,_2){return this.sgwtModule.getPropertyAsString(_1,_2)},isc.A.getOrCreateJsObj=function isc_SGWTFactory_getOrCreateJsObj(_1){return this.sgwtModule.getOrCreateJsObj(_1)},isc.A.setJsObj=function isc_SGWTFactory_setJsObj(_1,_2){this.sgwtModule.setJsObj(_1,_2)},isc.A.getSGWTSuperClass=function isc_SGWTFactory_getSGWTSuperClass(){return this.sgwtModule.getSGWTSuperClass(this)},isc.A.isSGWTFrameworkClass=function isc_SGWTFactory_isSGWTFrameworkClass(){return this.sgwtModule.isSGWTFrameworkClass(this)},isc.A.getDefaultScClassName=function isc_SGWTFactory_getDefaultScClassName(){return this.sgwtModule.getDefaultScClassName(this)},isc.A.getDefaultScClass=function isc_SGWTFactory_getDefaultScClass(){return isc.ClassFactory.getClass(this.getDefaultScClassName())},isc.A.isA=function isc_SGWTFactory_isA(_1){if(_1==null)return false;var _2=this.getDefaultScClass();if(_2&&_2.isA(_1))return true;if(!isc.isA.String(_1)){if(_1.getSGWTClassName)_1=_1.getSGWTClassName();if(!isc.isA.String(_1))return false}
if(isc.startsWith(_1,isc.ClassFactory.$f)){_1=_1.substring(4)}
var _3=this;while(_3){if(_3.beanClassName==_1)return true;_3=_3.getSGWTSuperClass()}
return false});isc.B._maxIndex=isc.C+18;isc.A=isc.SGWTFactory.getPrototype();isc.A.newInstance=isc.SGWTFactory.getInstanceProperty("create");isc.ClassFactory.defineClass("Page");isc.A=isc.Page;isc.A.$hi=[];isc.A.$hj=false;isc.A.defaultUnsupportedBrowserURL="[SKIN]/unsupported_browser.html";isc.A.$hk={};isc.A.protocolURLs=window.isc_protocolURLs||["http://","https://","file://","mailto:","app-resource:","data:"];isc.A.textDirection=null;isc.A.LTR="ltr";isc.A.RTL="rtl";isc.A=isc.Page;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$hm="[SKIN]";isc.A.$hn="[SKIN]/";isc.A.$ho="[";isc.A.$hp="./";isc.A.$hq="..";isc.A.$880="body";isc.A.$55w="html";isc.A.$942="direction";isc.A.leaveScrollbarGap=isc.Browser.isMoz&&isc.Browser.geckoVersion<20051107;isc.A.getWidth=(isc.Browser.isNS?function(_1,_2){if(!_1)_1=window;_2=_2||(isc.Browser.isMoz&&isc.Browser.geckoVersion>=20080529);if(isc.Browser.isMoz&&_1==window&&!_2){if(this.width!=null){return this.width-(this.leaveScrollbarGap?(isc.Element?isc.Element.getNativeScrollbarSize():16):0)}
this.logInfo("NOTE: isc.Page.getWidth() unable to determine page width.  Returning 500","sizing");return 500}else{var _3=isc.Browser.geckoVersion!=null&&isc.Browser.geckoVersion<20051111;var _4=!isc.Browser.isAndroid&&!this.leaveScrollbarGap&&!_3&&_1.document.body!=null,_5;if(_4){var _6=isc.Browser.isStrict?_1.document.documentElement:_1.document.body;if(_6!=null)_5=_6.clientWidth}
if(_5==null||_5==0){_5=_1.innerWidth}
if(_1==window)this.width=_5;return _5}}:function(_1){if(!_1)_1=window;var _2=_1.document.body;if(isc.Browser.isStrict&&(!isc.Browser.isOpera||isc.Browser.minorVersion>=9.5))
_2=_1.document.documentElement;if(_2){return _2.clientWidth}else{if(!isc.Page.isLoaded()){isc.Page.setEvent("load","isc.EH.$hr()",isc.Page.FIRE_ONCE)}
this.logWarn("NOTE: isc.Page.getWidth() called before <BODY> tag was written out -- value cannot be determined.  Returning 500");return 500}});isc.A.getHeight=(isc.Browser.isNS?function(_1,_2){if(!_1)_1=window;_2=_2||(isc.Browser.isMoz&&isc.Browser.geckoVersion>=20080529);if(isc.Browser.isMoz&&_1==window&&!_2){if(this.height!=null)return this.height;return 500}else{var _3=!isc.Browser.isAndroid&&isc.Browser.isMobileWebkit||(!isc.Browser.isStrict&&isc.Browser.geckoVersion>=20051111)&&_1.document.body!=null,_4;if(_3){_4=(isc.Browser.isStrict?_1.document.documentElement:_1.document.body).clientHeight}
if(_4==null||_4==0){_4=_1.innerHeight}
if(isc.Browser.isIPad&&isc.Browser.isMobileSafari&&isc.Browser.iOSVersion==7){if(this.getOrientation()==="landscape"){var _5=this.$130f();_4=((692-20)/_5)<<0;document.body.style.height=_4+"px";document.documentElement.style.height=_4+"px"}else{document.body.style.height="";document.documentElement.style.height=""}}
if(isc.Browser.isTouch&&(isc.Browser.isAndroid||isc.Browser.isRIM)){if(this.$893==null){this.$893=_4;this.$26u=isc.Page.getWidth(_1,_2);this.$94e=this.getOrientation()}else{var _6=this.getOrientation();if(_4>this.$893||Math.abs(_4-this.$893)<=100||_6!=this.$94e)
{this.$94e=_6;this.$893=_4;this.$26u=isc.Page.getWidth(_1,_2)}else{_4=this.$893}}}
if(_1==window)this.height=_4;return _4}}:function(_1){if(!_1)_1=window;var _2=_1.document.body;if(isc.Browser.isStrict&&(!isc.Browser.isOpera||isc.Browser.minorVersion>=9.5))
_2=_1.document.documentElement;if(_2){return _2.clientHeight}else{this.logWarn("NOTE: isc.Page.getHeight() called before <BODY> tag was written out -- value cannot be determined.  Returning 500");return 500}});isc.A.getScrollLeft=(isc.Browser.isNS?function(_1){var _2=window.pageXOffset;if(isc.Page.isRTL()&&!_1){_2=isc.Canvas.$92y(_2,isc.Page.getScrollWidth(),isc.Page.getWidth(),false,true,false)}
return _2}:function(_1){if(document==null||document.body==null)return 0;var _2=(isc.Browser.isStrict?document.documentElement.scrollLeft:document.body.scrollLeft);if(isc.Page.isRTL()){var _3=isc.Browser.isIE9&&isc.Browser.isStrict;var _4=(_3||_1)?isc.Page.getScrollWidth():null,_5=(_3||_1)?isc.Page.getWidth():null;if(_3){_2=isc.Canvas.$92y(_2,_4,_5,false,!_3,_3)}
if(_1){_2=isc.Canvas.$92y(_2,_4,_5,true,true)}}
return _2});isc.A.getScrollTop=(isc.Browser.isNS?function(){return window.pageYOffset}:function(){if(document==null||document.body==null)return 0;return(isc.Browser.isStrict?document.documentElement.scrollTop:document.body.scrollTop)});isc.A.unsupportedBrowserAction="continue";isc.B.push(isc.A.finishedLoading=function isc_c_Page_finishedLoading(){isc.Page.$hj=true;isc.Log.logInfo("isc.Page is loaded");isc.EH.startIdleTimer();if(isc.Browser.isSafari)isc.Canvas.clearCSSCaches();if(!window.suppressAutoLogWindow){var _1=isc.LogViewer.getLogCookie();if(_1!=null&&_1.keepOpen){isc.Timer.setTimeout("isc.Log.show(true)",1000)}}
if(isc.Time&&isc.Time.UTCHoursOffset!=null){isc.logWarn("This application includes code to set the Time.UTCHoursOffset attribute. This property will be respected but has been deprecated in favor of the classMethod isc.Time.setDefaultDisplayTimezone().");isc.Time.setDefaultDisplayTimezone(isc.Time.UTCHoursOffset.stringify()+":00")}
if(isc.Page.pollPageSize){isc.EH.$hr()}else{isc.EH.delayCall("$hr",[true],200)}
if(isc.Browser.isIE){isc.Class.evaluate("1",null,false,true)}},isc.A.isLoaded=function isc_c_Page_isLoaded(){return this.$hj},isc.A.getBlankFrameURL=function isc_c_Page_getBlankFrameURL(){if(isc.Browser.isIE&&("https:"==window.location.protocol||document.domain!=location.hostname)){return this.getURL("[HELPERS]empty.html")}
return"about:blank"},isc.A.setTitle=function isc_c_Page_setTitle(_1){document.title=_1},isc.A.setDirectories=function isc_c_Page_setDirectories(_1){if(_1==null){_1={imgDir:window.imgDir,isomorphicDir:(window.isomorphicDir?window.isomorphicDir:window.IsomorphicDir),isomorphicClientDir:window.isomorphicClientDir,isomorphicDocsDir:window.isomorphicDocsDir,skinDir:window.skinDir,helperDir:window.helperDir}}
this.$hs();this.setIsomorphicDir(_1.isomorphicDir);this.setIsomorphicClientDir(_1.isomorphicClientDir);this.setIsomorphicDocsDir(_1.isomorphicDocsDir);this.setAppImgDir(_1.imgDir);this.setSkinDir(_1.skinDir);this.setHelperDir(_1.helperDir)},isc.A.$hs=function isc_c_Page__deriveAppDir(){var _1=window.location.href;if(_1.contains("?"))_1=_1.substring(0,_1.indexOf("?"));if(_1.contains("#"))_1=_1.substring(0,_1.indexOf("#"));if(_1.charAt(_1.length-1)!="/"){_1=_1.substring(0,_1.lastIndexOf("/")+1)}
this.$hk.APP=_1;if(this.logIsInfoEnabled()){this.logInfo("app dir is "+this.$hk.APP)}
this.setAppImgDir()},isc.A.getAppDir=function isc_c_Page_getAppDir(){return this.$hk.APP},isc.A.setAppImgDir=function isc_c_Page_setAppImgDir(_1){this.$hk.APPIMG=this.combineURLs(this.getAppDir(),_1!=null?_1:"[APP]images/")},isc.A.getAppImgDir=function isc_c_Page_getAppImgDir(_1){if(_1!=null&&(isc.startsWith(_1,isc.slash)||this.getProtocol(_1)!=isc.emptyString))
{return _1}
if(_1)return this.$hk.APPIMG+_1;else return this.$hk.APPIMG},isc.A.setAppFilesDir=function isc_c_Page_setAppFilesDir(_1){this.$hk.APPFILES=this.combineURLs(this.getAppDir(),_1)},isc.A.getAppFilesDir=function isc_c_Page_getAppFilesDir(_1){return this.$hk.APPFILES},isc.A.setIsomorphicDir=function isc_c_Page_setIsomorphicDir(_1){this.$hk.ISOMORPHIC=this.combineURLs(this.getAppDir(),_1!=null?_1:"../isomorphic/");this.setIsomorphicClientDir();this.setIsomorphicDocsDir()},isc.A.getIsomorphicDir=function isc_c_Page_getIsomorphicDir(){return this.$hk.ISOMORPHIC},isc.A.setSkinDir=function isc_c_Page_setSkinDir(_1){this.$hk.SKIN=this.combineURLs(this.getAppDir(),_1!=null?_1:"[ISOMORPHIC]/skins/standard/");this.$hk.SKINIMG=this.$hk.SKIN+"images/";if(isc.Canvas)isc.Canvas.$ht=isc.Canvas.$hu=null},isc.A.getSkinDir=function isc_c_Page_getSkinDir(){return this.$hk.SKIN},isc.A.getSkinImgDir=function isc_c_Page_getSkinImgDir(_1){if(_1==null)return this.$hk.SKINIMG;return this.combineURLs(this.$hk.SKIN,_1)},isc.A.setIsomorphicClientDir=function isc_c_Page_setIsomorphicClientDir(_1){this.$hk.ISOMORPHIC_CLIENT=this.combineURLs(this.getAppDir(),_1!=null?_1:"[ISOMORPHIC]/system/");this.setSkinDir();this.setHelperDir()},isc.A.getIsomorphicClientDir=function isc_c_Page_getIsomorphicClientDir(){return this.$hk.ISOMORPHIC_CLIENT},isc.A.setIsomorphicDocsDir=function isc_c_Page_setIsomorphicDocsDir(_1){this.$hk.ISOMORPHIC_DOCS=this.combineURLs(this.getAppDir(),_1!=null?_1:"[ISOMORPHIC]/system/reference/");this.setIsomorphicDocsSkinDir()},isc.A.getIsomorphicDocsDir=function isc_c_Page_getIsomorphicDocsDir(){return this.$hk.ISOMORPHIC_DOCS},isc.A.setIsomorphicDocsSkinDir=function isc_c_Page_setIsomorphicDocsSkinDir(_1){this.$hk.ISO_DOCS_SKIN=this.combineURLs(this.getIsomorphicDocsDir(),_1!=null?_1:"skin/")},isc.A.getIsomorphicDocsSkinDir=function isc_c_Page_getIsomorphicDocsSkinDir(){return this.$hk.ISO_DOCS_SKIN},isc.A.setHelperDir=function isc_c_Page_setHelperDir(_1){this.$hk.HELPERS=this.combineURLs(this.getAppDir(),_1!=null?_1:"[ISOMORPHIC_CLIENT]/helpers/")},isc.A.getHelperDir=function isc_c_Page_getHelperDir(){return isc.Page.$hk.HELPERS},isc.A.getImgURL=function isc_c_Page_getImgURL(_1,_2){var _3;if(isc.startsWith(_1,this.$hm)){_3=isc.Page.getSkinImgDir(_2);var _4=isc.startsWith(_1,this.$hn)?7:6;_1=_1.substring(_4)}else{_3=isc.Page.getAppImgDir(_2)}
return isc.Page.combineURLs(_3,_1)},isc.A.getURL=function isc_c_Page_getURL(_1){if(isc.startsWith(_1,this.$ho)){var _2=_1.indexOf("]");if(_2>0){var _3=_1.substring(1,_2).toUpperCase(),_4=isc.Page.$hk[_3];if(_4!=null){_1=isc.Page.combineURLs(_4,_1.substring(_2+(_1.charAt(_2+1)!="/"?1:2)))}else{this.logDebug("getURL("+_1+"): couldn't find cached directory "+_3)}}else{this.logDebug("getURL("+_1+"): didn't find matching ']' in URL")}}
return _1},isc.A.combineURLs=function isc_c_Page_combineURLs(_1,_2){if(!isc.isA.String(_2))return _1;if(isc.startsWith(_2,this.$ho)){return this.getURL(_2)}
var _3=isc.$ad;if(_1==null||_1==_3||isc.Page.getProtocol(_2)!=_3){return _2}
var _4=isc.slash;var _5=isc.Page.getProtocol(_1);if(isc.startsWith(_2,_4)){if(isc.isAn.emptyString(_5)){_1=isc.emptyString}else if(_1.indexOf(_4,_5.length)!=-1){_1=_1.substring(0,_1.indexOf(_4,_5.length))}}else if(_2.indexOf(this.$hp)>-1){_1=_1.substring(_5.length,_1.length-1);var _6=_1.split(_4),_7=_2.split(_4);var _8=_6[0];_6.shift();while(_7[0]==isc.dot||_7[0]==this.$hq){if(_7[0]==isc.dot){_7.shift();continue}
_7.shift();if(_6.length==0)break;_6.pop()}
_1=_5+_8+_4;if(_6.length>0)_1+=_6.join(_4)+_4;_2=_7.join(_4)}
return _1+_2},isc.A.getProtocol=function isc_c_Page_getProtocol(_1){for(var i=0;i<isc.Page.protocolURLs.length;i++){if(isc.startsWith(_1,isc.Page.protocolURLs[i]))return isc.Page.protocolURLs[i]}
return isc.$ad},isc.A.getLastSegment=function isc_c_Page_getLastSegment(_1){if(_1==null)return isc.emptyString;var _2=_1.lastIndexOf(isc.slash);if(_2==-1)return _1;return _1.substring(_2+1)},isc.A.isXHTML=function isc_c_Page_isXHTML(){if(this.$hv!=null)return this.$hv;if(isc.Browser.isIE)return false;var _1=this.getWindow();return(this.$hv=(this.getDocument().constructor==this.getWindow().XMLDocument))},isc.A.isRTL=function isc_c_Page_isRTL(){return this.getTextDirection()==isc.Canvas.RTL},isc.A.getTextDirection=function isc_c_Page_getTextDirection(){if(this.textDirection==null){var _1;var _2=document.getElementsByTagName(this.$880)[0]||document.getElementsByTagName(this.$55w)[0]
if(document.defaultView&&document.defaultView.getComputedStyle){var _3=document.defaultView.getComputedStyle(_2,isc.emptyString);_1=_3?_3.getPropertyValue(this.$942):null}else if(_2.currentStyle){_1=_2.currentStyle[this.$942]}
var _4;if(_1==null){_4=true;var _5=document.documentElement,_6=document.body;_1=(_6?_6.dir:null)||_5.dir}
if(_1==null||_1==isc.emptyString){_1=this.LTR}else{_1=_1.toLowerCase()}
if(!_4&&document.body!=null)this.textDirection=_1;return _1}
return this.textDirection},isc.A.loadStyleSheet=function isc_c_Page_loadStyleSheet(_1,_2,_3){var _4=isc.Page.getURL(_1);var _5="<link rel='stylesheet' type='text/css' href=\""+_4+"\"\/>";if(_2==null)_2=window;if(isc.Page.isLoaded()&&_2==window){if(isc.FileLoader){var _6=isc.FileLoader.$hw;if(_6!=null){for(var i=0;i<_6.length;i++){if(_4.indexOf(_6[i])!=-1){this.logDebug("skin "+_6[i]+" already loaded by FileLoader - not loading css file");return}}}
isc.FileLoader.loadCSSFile(_4,_3)}else{this.logWarn("isc.Page.loadStylesheet('"+_1+"') called after page load.  Stylesheet not loaded.")}}else{if(this.isXHTML()){var _8=this.getDocument(),_9=_8.documentElement.firstChild,_10=_8.createElementNS(_8.documentElement.namespaceURI,"link");_10.rel="stylesheet";_10.type="text/css";_10.href=_4;_9.appendChild(_10);this.logWarn("added stylesheet DOM style")}else{_2.document.write(_5)}}},isc.A.resizeTo=function isc_c_Page_resizeTo(_1,_2){window.resizeTo(_1,_2)},isc.A.moveTo=function isc_c_Page_moveTo(_1,_2){window.moveTo(_1,_2)},isc.A.scrollTo=function isc_c_Page_scrollTo(_1,_2){window.scroll(_1,_2)},isc.A.getBodyOverflow=function isc_c_Page_getBodyOverflow(){if(this.$943==null){var _1;var _2=document.body;if(_2&&_2.style){_1=_2.style.overflow}
this.$943=(_1==null||_1=="")?"auto":_1.toLowerCase()}
return this.$943},isc.A.getOrientation=function isc_c_Page_getOrientation(){var _1=this.getWidth();if(isc.EH!=null&&_1==isc.EH.$118t)return isc.EH.currentOrientation;var _2;if(isc.Browser.isIPhone||isc.Browser.isIPad){_2=window.orientation==0||window.orientation==180}else if("matchMedia"in window){var _3=window.matchMedia("(orientation: portrait)");_2=_3&&_3.matches}
if(_2==null){_2=this.getHeight()>=_1}
return _2?"portrait":"landscape"},isc.A.$130g=function isc_c_Page__getViewportTag(_1){var _2=document.head||document.getElementsByTagName("head")[0];if(_2==null){if(_1)return null;_2=document.createElement("head");var _3=document.body||document.getElementsByTagName("body")[0];_3.parentNode.insertBefore(_2,_3)}
var _4=_2.getElementsByTagName("meta"),_5=null;for(var i=0;i<_4.length;){if(_4[i].name=="viewport"){if(_5!=null){_5.parentNode.removeChild(_5);_5=_4[i-1]}else{_5=_4[i];++i}}else++i}
if(_5==null&&!_1){_5=document.createElement("meta");_5.name="viewport";_2.appendChild(_5)}
return _5},isc.A.$130h=function isc_c_Page__parseViewportOptions(_1){var _2={};if(isc.isA.String(_1)){var _3=_1.replace(/[\t\n\r ]+/g,"").split(/,|;/);for(var i=0,_5=_3.length;i<_5;++i){var _6=_3[i];var _7=_6.indexOf('=');if(_7<=0){_2[_6]=null}else{_2[_6.substring(0,_7).toLowerCase()]=_6.substring(_7+1)}}}
return _2},isc.A.updateViewport=function isc_c_Page_updateViewport(_1,_2,_3,_4,_5){var _6=this.$130g();var _7=isc.addProperties(this.$130h(_6.content),_5);if(_2==null)_2=_7["width"];if(_3==null)_3=_7["height"];if(_4==null)_4=_7["user-scalable"]!="no";if(_1!=null){if(isc.isA.Number(_1))_1=_1.toFixed(2);_7["initial-scale"]=_1}
if(_2!=null)_7["width"]=_2;if(_3!=null)_7["height"]=_3;if(_4!=null){_7["user-scalable"]=(_4==false?"no":"yes");if(_4==false&&_1!=null){_7["minimum-scale"]=_7["maximum-scale"]=_1}}
var _8=[];for(var _9 in _7){var _10=_7[_9];if(_10==null){_8.push(_9)}else{_8.push(_9+"="+_10)}}
_6.content=_8.join(", ")},isc.A.$130f=function isc_c_Page__getPageZoom(){if(isc.Browser.isTouch){var _1;var _2=window.screen.width,_3=window.screen.height;if(_2<=document.documentElement.clientWidth){if(this.getOrientation()==="portrait"){return Math.min(_2,_3)/window.innerWidth}else{return Math.max(_2,_3)/window.innerWidth}}else if((_1=this.$130g(true))!=null){var _4=this.$130h(_1.content);var _5=_4["user-scalable"]!="no";if(!_5){if(isc.Browser.isAndroidWebView&&isc.Browser.androidMinorVersion<4.4){return 1}else{var _6=parseFloat(_4["initial-scale"]);if(!window.isNaN(_6))return _6;_6=parseFloat(_4["minimum-scale"]);if(!window.isNaN(_6))return _6}}else{var _7;if("minimum-scale"in _4){_7=parseFloat(_4["minimum-scale"])}else{_7=parseFloat(_4["initial-scale"])}
if(!window.isNaN(_7))_7}}}
return 1},isc.A.getScrollWidth=function isc_c_Page_getScrollWidth(_1){var _1=_1||document;if(_1==null||_1.body==null)return 500;if(isc.Browser.isIE&&isc.Browser.version>=6){var _2=Math.max(Math.max(_1.body.scrollWidth,_1.documentElement.clientWidth))
if(isc.Browser.isStrict)_2=Math.max(_2,_1.documentElement.scrollWidth);return _2}
return _1.body.scrollWidth},isc.A.getScrollHeight=function isc_c_Page_getScrollHeight(_1){var _1=_1||document;if(_1==null||_1.body==null){return this.getHeight()}
var _2=_1.body.scrollHeight;if(isc.Browser.isStrict){var _3=_1.documentElement;if(_3){var _4=_3.scrollHeight;if(!isc.isA.Number(_3.scrollHeight)){_4=Math.max(_3.offsetHeight,_3.clientHeight)}
if(_4&&_4>_2){_2=_4}}}
return _2},isc.A.getScreenWidth=function isc_c_Page_getScreenWidth(){return screen.width},isc.A.getScreenHeight=function isc_c_Page_getScreenHeight(){return screen.height},isc.A.getWindowRect=function isc_c_Page_getWindowRect(_1){if(!_1)_1=window;return{left:(isc.Browser.isIE||isc.Browser.isOpera?_1.screenLeft:_1.screenX),top:(isc.Browser.isIE||isc.Browser.isOpera?_1.screenTop:_1.screenY),width:isc.Page.getWidth(_1),height:isc.Page.getHeight(_1)}},isc.A.setUnloadMessage=function isc_c_Page_setUnloadMessage(_1){if(_1==null)window.onbeforeunload=null;else window.onbeforeunload=function(){return _1}},isc.A.goBack=function isc_c_Page_goBack(){if(history.length==0&&window.opener){window.close()}else{history.back()}},isc.A.print=function isc_c_Page_print(_1){if(!_1)_1=window;if(_1.print){_1.print()}else{var _2=_1.document;if(!_2||!_2.body){this.logError("isc.Page.print() called on a window that doesn't have a document.body defined.  Exiting.");return}
if(isc.Browser.isWin){_2.body.insertAdjacentHTML('beforeEnd','<OBJECT ID="printControl" WIDTH=0 HEIGHT=0 CLASSID="CLSID:8856F961-340A-11D0-A96B-00C04FD705A2"></OBJECT>');var _3=_2.all.printControl;if(!_3){this.logError("isc.Page.print() couldn't create or find print control.  Exiting.");return}
_3.ExecWB(6,1);_3.outerHTML=""}else{alert("Choose 'Print...' from the File menu to print this page.")}}},isc.A.observe=function isc_c_Page_observe(_1,_2,_3){var _4=isc.Class.create();return _4.observe(_1,_2,_3)},isc.A.waitFor=function isc_c_Page_waitFor(_1,_2,_3,_4,_5){var _6=isc.Class.create({$545:_1,$546:_2,$547:_3,_fired:function(_8){if(this.$59i){isc.Timer.clear(this.$59i)}
this.ignore(this.$545,this.$546);this.fireCallback(this.$547,"observed",[_8]);this.destroy()},$59j:function(){this.ignore(this.$545,this.$546);this.fireCallback(this.$59k);this.destroy()}});isc.ClassFactory.addGlobalID(_6);var _7=_6.observe(_1,_2,function(){this._fired(_1)});if(!_7)_6.destroy();if(_4&&_5){_6.$59k=_5;_6.$59i=isc.Timer.setTimeout(function(){_6.$59j()},_4)}
return _7},isc.A.waitForMultiple=function isc_c_Page_waitForMultiple(_1,_2,_3,_4){var _5=true;var _6=isc.Class.create({$59l:_1,$59m:[],$547:_2,$59n:function(_9){this.$59m.remove(_9);if(this.$59m.isEmpty()){if(this.$59i){isc.Timer.clear(this.$59i)}
this.fireCallback(this.$547);this.destroy()}},$59j:function(){var _7=this.$59m;for(var i=0;i<_7.length;i++){_7[i].ignore(_7[i].$545,_7[i].$546);_7[i].destroy()}
this.fireCallback(this.$59k);this.destroy()}});for(var i=0;i<_1.length;i++){var _9=isc.Class.create({$545:_1[i].object,$546:_1[i].method,$59o:_6,_fired:function(_12){this.ignore(this.$545,this.$546);this.$59o.$59n(this);this.destroy()}});isc.ClassFactory.addGlobalID(_9);var _10=(function(_12){return function(){this._fired(_12)}})(_1[i].object);var _11=_9.observe(_1[i].object,_1[i].method,_10);if(_11){_6.$59m.add(_9)}else{_9.destroy();_5=false}}
if(_3&&_4){_6.$59k=_4;_6.$59i=isc.Timer.setTimeout(function(){_6.$59j()},_3)}
return _5},isc.A.checkBrowserAndRedirect=function isc_c_Page_checkBrowserAndRedirect(_1){if(!isc.Browser.isSupported){if(isc.Log){isc.Log.logWarn("Unsupported browser detected - userAgent:"+navigator.userAgent)}
if(this.unsupportedBrowserAction=="continue")return;var _2=this.unsupportedBrowserAction=="confirm"&&confirm(this.getUnsupportedBrowserPromptString())
if(_2)return;if(_1==null)_1=isc.Page.defaultUnsupportedBrowserURL;var _3=true;window.location.replace(isc.Page.getURL(_1))}},isc.A.getUnsupportedBrowserPromptString=function isc_c_Page_getUnsupportedBrowserPromptString(){var _1="This page uses the Isomorphic SmartClient web presentation layer (Version"+isc.version+" - "+isc.buildDate+"). The web browser you are using is not supported by this version of SmartClient and you may encounter errors on this page. Would you like to continue anyway?\n\n(Reported userAgent string for this browser:"+navigator.userAgent+")";return _1});isc.B._maxIndex=isc.C+55;if(isc.Page.isXHTML())isc.nbsp=isc.xnbsp;isc.Page.setDirectories();if(isc.Browser.isMoz){isc.Page.getWidth(null,true);isc.Page.getHeight(null,true)}
if(isc.Browser.isAndroid){isc.Page.pollPageSize=true}
isc.addGlobal("Params",function(_1){if(!_1)_1=window;var _2=isc.isA.String(_1)?_1:_1.location.href;var _3=_2.indexOf("?"),_4=_2.indexOf("#");if(_4<0||_4<_3)_4=_2.length;if(_3!=-1){var _5=_2.substring(_3+1,_4).split("&");for(var i=0,_7,_8;i<_5.length;i++){_7=_5[i];if(!_7)continue;_8=_7.indexOf("=");this[_7.substring(0,_8)]=unescape(_7.substring(_8+1))}}})
isc.params=new isc.Params();isc.getParams=function(_1){return new isc.Params(_1)}
isc.ClassFactory.defineClass("Comm");isc.A=isc.Comm;isc.A.sendMethod="POST";isc.A.$hz=0;isc.A=isc.Comm;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.xmlHttpConstructors=["MSXML2.XMLHTTP","Microsoft.XMLHTTP","MSXML.XMLHTTP","MSXML3.XMLHTTP"];isc.A.$50c=[];isc.B.push(isc.A.$h0=function isc_c_Comm__fireXMLCallback(_1,_2,_3){if(!_3)isc.EH.$h1("XRP");isc.Class.fireCallback(_2,"xmlHttpRequest",[_1],null,true);if(!_3)isc.EH.$h2()},isc.A.$h3=function isc_c_Comm__getStateChangeHandler(){return function(){var _1=arguments.callee.request;if(!_1)return;if(_1.readyState!=4)return;arguments.callee.request=null;isc.Timer.setTimeout({target:isc.Comm,methodName:"$h0",args:[_1,arguments.callee.callback,true]},0)}},isc.A.createXMLHttpRequest=function isc_c_Comm_createXMLHttpRequest(){if(isc.Browser.isIE){var _1;if(this.preferNativeXMLHttpRequest){_1=this.getNativeRequest();if(!_1)_1=this.getActiveXRequest()}else{_1=this.getActiveXRequest();if(!_1)_1=this.getNativeRequest()}
if(!_1)isc.rpc.logWarn("Couldn't create XMLHttpRequest");return _1}else{return new XMLHttpRequest()}},isc.A.getNativeRequest=function isc_c_Comm_getNativeRequest(){var _1;if(isc.Browser.version>=7){isc.rpc.logDebug("Using native XMLHttpRequest");_1=new XMLHttpRequest()}
return _1},isc.A.getActiveXRequest=function isc_c_Comm_getActiveXRequest(){var _1;if(!this.$h4){for(var i=0;i<this.xmlHttpConstructors.length;i++){try{var _3=this.xmlHttpConstructors[i];_1=new ActiveXObject(_3);if(_1){this.$h4=_3;break}}catch(e){}}}else{_1=new ActiveXObject(this.$h4)}
if(_1)isc.rpc.logDebug("Using ActiveX XMLHttpRequest via constructor: "+this.$h4);return _1},isc.A.sendScriptInclude=function isc_c_Comm_sendScriptInclude(_1){var _2=_1.URL,_3=_1.fields,_4=_1.data,_5=_1.callbackParam,_6=_1.transaction;var _7="_scriptIncludeReply_"+_6.transactionNum;this[_7]=function(){var _8=arguments.length==1?arguments[0]:[];if(arguments.length>1){for(var i=0;i<arguments.length;i++)_8[i]=arguments[i]}
isc.Comm.performScriptIncludeReply(_6.transactionNum,_8)}
var _10="isc.Comm."+_7;var _11={};_11[_5?_5:"callback"]=_10;_2=isc.rpc.addParamsToURL(_2,_3);_2=isc.rpc.addParamsToURL(_2,_11);if(_6)_6.mergedActionURL=_2;isc.rpc.logInfo("scriptInclude call to: "+_2);this.$50c[_6.transactionNum]=_6.callback;var _12=this.getDocument(),_13=this.getDocumentBody(),_14=_12.createElement("script");_14.src=_2;_13.appendChild(_14)},isc.A.performScriptIncludeReply=function isc_c_Comm_performScriptIncludeReply(_1,_2){delete this["_scriptIncludeReply_"+_1];var _3=this.$50c[_1];delete this.$50c[_1];this.logDebug("scriptInclude reply for transactionNum: "+_1+", data: "+this.echoLeaf(_2),"xmlBinding");this.fireCallback(_3,"transactionNum,results,wd",[_1,_2])},isc.A.sendXmlHttpRequest=function isc_c_Comm_sendXmlHttpRequest(_1){var _2=_1.URL,_3=_1.fields,_4=_1.httpMethod,_5=_1.contentType,_6=_1.httpHeaders,_7=_1.data,_8=_1.transaction,_9=_1.blocking!=null?_1.blocking:false;this.$50c[_8.transactionNum]=_8.callback;var _10="isc.Comm.performXmlTransactionReply("+_8.transactionNum+", xmlHttpRequest)";if(!_4)_4="POST";var _11=this.createXMLHttpRequest();var _12;if(isc.Browser.isIE){_12=this.$h3();_12.request=_11;_12.callback=_10}else{_12=function(){if(_11.readyState!=4)return;isc.Comm.$h0(_11,_10)}}
_11.onreadystatechange=_1.onreadystatechange||_12;if(isc.rpc.logIsDebugEnabled()){this.lastXmlHttpRequest=_11}
if(_4=="POST"||_4=="PUT"){if(_7){_5=_5||"text/xml";_2=isc.rpc.addParamsToURL(_2,_3)}else{_5=_5||"application/x-www-form-urlencoded; charset=UTF-8";_7=isc.SB.create();var _13=true;for(var _14 in _3){if(!_13)_7.append("&");var _15=_3[_14];_7.append(isc.rpc.encodeParameter(_14,_15));_13=false}
_7=_7.toString()}
if(isc.rpc.logIsDebugEnabled()){isc.rpc.logDebug("XMLHttpRequest POST to "+_2+" contentType: "+_5+" with body -->"+decodeURIComponent(_7)+"<--")}
_11.open(_4,_2,!_9);var _16=this.$h5(_11,_6);if(!_16){_5==_11.setRequestHeader("Content-Type",_5)}
if(_8){_8.xhrHeaders=_6;_8.xhrData=_7}
if(_7!=null&&!isc.isA.String(_7)){this.logWarn("Non-string data object passed to sendXML as request.data:"+this.echo(_7)+" attempting to convert to a string.");_7=_7.toString?_7.toString():""+_7}
_11.send(_7)}else{var _17=isc.rpc.addParamsToURL(_2,_3);_11.open(_4,_17,!_9);if(_1.bypassCache){_11.setRequestHeader("If-Modified-Since","Thu, 01 Jan 1970 00:00:00 GMT")}
this.$h5(_11,_6);if(isc.rpc.logIsDebugEnabled()){isc.rpc.logDebug("XMLHttpRequest GET from "+_2+" with fields: "+isc.Log.echoAll(_3)+" full URL string: "+_17)}
_11.send(null)}
return _11},isc.A.performXmlTransactionReply=function isc_c_Comm_performXmlTransactionReply(_1,_2){var _3=this.$50c[_1]
delete this.$50c[_1];this.fireCallback(_3,"transactionNum,results,wd",[_1,_2])},isc.A.$h5=function isc_c_Comm__setHttpHeaders(_1,_2){if(_2==null)return;var _3=false;for(var _4 in _2){var _5=_2[_4];if(_5!=null){_1.setRequestHeader(_4,_5);if(_4.toLowerCase()=="content-type")_3=true}}
return _3});isc.B._maxIndex=isc.C+10;isc.ClassFactory.defineClass("HiddenFrame");isc.A=isc.HiddenFrame;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A._stats={draws:0,destroys:0};isc.A.$h6=[];isc.B.push(isc.A.$h7=function isc_c_HiddenFrame__killLoadingIndicators(){if(isc.Browser.isMoz)this.delayCall("$h8")},isc.A.$h8=function isc_c_HiddenFrame__doKillLoadingIndicators(){var _1=isc.HiddenFrame.create();_1.draw();_1.destroy()});isc.B._maxIndex=isc.C+2;isc.A=isc.HiddenFrame.getPrototype();isc.A.text="&nbsp;";isc.A._generated=true;isc.A.$h9=[];isc.A.pollInterval=100;isc.A.useHtmlfile=false;isc.A=isc.HiddenFrame.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.init=function isc_HiddenFrame_init(){isc.ClassFactory.addGlobalID(this);isc.HiddenFrame.$h6.add(this)},isc.A.getID=function isc_HiddenFrame_getID(){return this.ID},isc.A.draw=function isc_HiddenFrame_draw(_1){if(this.isDrawn()){if(_1!=null)this.fireCallback(_1);return this}
if(!this.$ia()){if(!this.$ib){this.$83s=isc.Page.setEvent("load",this.getID()+".draw()",isc.Page.FIRE_ONCE);this.$ib=true}
if(_1!=null){this.$h9[this.$h9.length]=_1}}else{this.$ic();for(var i=0;i<this.$h9.length;i++){this.fireCallback(this.$h9[i])}
if(_1!=null)this.fireCallback(_1)}
return this},isc.A.$ic=function isc_HiddenFrame__draw(){if(this.$if)return this.$ie;this.frameHTML="<IFRAME ID="+this.getName()+" NAME="+this.getName()+" SRC=\""+(this.location?this.location:isc.Page.getBlankFrameURL())+"\" STYLE='position:absolute;visibility:hidden;top:-1000px'></IFRAME>";if(this.useHtmlfile){try{this.$1128=new ActiveXObject("htmlfile")}catch(e){this.useHtmlfile=false}}
if(!this.useHtmlfile){var _1=this.frameHTML;isc.Element.createAbsoluteElement(_1);if(!(isc.Browser.isIE&&isc.Browser.minorVersion<5.5)){this.$id=isc.Element.get(this.getName());if(!isc.Browser.isSafari)this.$ie=this.$id.contentWindow}
if(this.$ie==null){for(var i=0;i<window.frames.length;i++){var _3=window.frames[i];try{if(_3.name==this.getName()){this.$ie=_3;break}}catch(e){}}}}
this.$if=true;return this.$ie},isc.A.isDrawn=function isc_HiddenFrame_isDrawn(){return this.$if},isc.A.$ia=function isc_HiddenFrame__safeToDraw(){return isc.Page.isLoaded()||!isc.Browser.isMoz},isc.A.destroy=function isc_HiddenFrame_destroy(){if(isc.isA.Canvas(this.$ig)){this.$ig.destroy();delete this.$ig;isc.HiddenFrame._stats.destroys++}
if(window[this.ID])window[this.ID]=null;isc.HiddenFrame.$h6.remove(this);if(this.$ib){isc.Page.clearEvent("load",this.$83s)}
if(this.useHtmlfile){if(this.$1128){this.$1128.parentWindow.isc=null;this.$1128=null;delete this.$1128;CollectGarbage()}}else{var _1=this.getHandle();if(!_1)return;if(isc.Browser.isSafari)_1.location=isc.Page.getBlankFrameURL();var _2=this.evaluate("try{this.getHandle().name;true}catch(e){false}");if(!_2){this.logDebug("Can't dispose of "+this.ID+" - property access denied.");return}
if(isc.Browser.isIE){if(document.domain==location.hostname){_1.document.open();_1.document.write("");_1.document.close()}else{_1.document.location.href=isc.Page.getBlankFrameURL()}}
if(this.$id!=null){isc.Element.clear(this.$id);this.$id=null}
if(this.$ie!=null)this.$ie=null}
this.Super("destroy",arguments);this.logDebug("Destroyed "+this.ID)},isc.A.getHandle=function isc_HiddenFrame_getHandle(){return this.$ie},isc.A.getName=function isc_HiddenFrame_getName(){return this.getID()},isc.A.getFrameDocument=function isc_HiddenFrame_getFrameDocument(){if(this.useHtmlfile){return this.$1128}else{var _1=(isc.Browser.isSafari&&isc.Browser.safariVersion<523.129?this.$id:this.$ie);try{return _1.document}catch(e){return null}}},isc.A.getForm=function isc_HiddenFrame_getForm(_1){if(_1==null)_1=0;if(isc.Browser.isMoz){return this.getFrameDocument().getElementById(_1)}else{return this.getFrameDocument().forms[_1]}},isc.A.setInnerHTML=function isc_HiddenFrame_setInnerHTML(_1){if(_1)this.text=_1;var _2=this.getFrameDocument();if(isc.Browser.isMoz){var _3=_2.createRange();_3.setStartBefore(_2.body);var _4=_3.createContextualFragment(this.text);_2.body.appendChild(_4)}else{_2.open();_2.write(this.text);_2.close()}},isc.A.sendForm=function isc_HiddenFrame_sendForm(_1,_2,_3){if(_1!=null)this.formHTML=_1;if(_2!=null)this.formName=_2;if(_3!=null)this.fieldList=_3;if(!this.$ia()){this.logDebug("delaying comm until page load");isc.Page.setEvent("load",this.getID()+".sendForm()",isc.Page.FIRE_ONCE);return}
this.draw();this.sendData()},isc.A.sendData=function isc_HiddenFrame_sendData(_1){var _2=this.formHTML;if(_1){_2=_2.replace(/isc_rpc=1/g,"isc_rpc=1&isc_resubmit=1")}
if(this.getFrameDocument()==null)
{this.delayCall("sendData",[],10);this.logDebug(this.getID()+": sendData() - document not ready - deferring.");return}
var _3;if(this.useHtmlfile){var _4=this.$1128;_4.open();_4.write("<html><body>");_4.write(this.frameHTML);_4.write(_2);_4.write("</body></html>");_4.close();_4.parentWindow.isc=isc;_3=_4.getElementById(this.formName)}else{if(isc.isA.Canvas(this.$ig))this.$ig.destroy();this.$ig=isc.Canvas.create({autoDraw:true,ID:this.getID()+"$ig",visibility:"hidden",overflow:"ignore",top:-9999,width:1,height:1,contents:_2,_generated:true,$ih:true});isc.HiddenFrame._stats.draws++;_3=isc.Element.get(this.formName)}
if(!_3.acceptCharset){_3.acceptCharset="UTF-8"}
for(var _5 in this.fieldList){if(this.fieldList[_5]!=null)_3.elements[_5].value=this.fieldList[_5]}
if(_3){_3.submit();this.logInfo("Form submitted to server");if(this.callback){this.convertToMethod("callback");this.delayCall("checkLoaded",[],this.pollInterval)}}else{this.logWarn("couldn't get handle to comm form")}},isc.A.checkLoaded=function isc_HiddenFrame_checkLoaded(){var _1=this.getHandle();if(_1&&_1[this.resultVarName]){if(this.callback)this.callback(_1)}else{this.delayCall("checkLoaded",[],this.pollInterval)}});isc.B._maxIndex=isc.C+15;isc.HiddenFrame.registerStringMethods({callback:"frame"});isc.ClassFactory.defineClass("Timer");isc.A=isc.Timer;isc.A.$ii=null;isc.A.listEvent={action:null,iterationInterval:null,iterationsRemaining:0,$ij:null,$ik:null};isc.A.MSEC=1;isc.A.SEC=1000;isc.A.MIN=60000;isc.A.HOUR=3600000;isc.A.DEFAULT_TIMEOUT_LENGTH=100;isc.A.$il=null;isc.A=isc.Timer;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$im=["isc.Timer.$in('",null,"')"];isc.A.$io=0;isc.A.$ip={};isc.A.$iq="TMR";isc.A.$612=5000;isc.B.push(isc.A.setTimeout=function isc_c_Timer_setTimeout(_1,_2,_3,_4){if(_1==null)return;if(_1.action!=null){_2=_1.delay;_3=_1.units;_1=_1.action}
if(_3==null)_3=isc.Timer.MSEC;if(_2==null)_2=isc.Timer.DEFAULT_TIMEOUT_LENGTH;_2=_2*_3;if(isc.Browser.isMobileSafari){if(isc.isA.String(_1)||_1.$143n!=null)_1={$143o:_1};_1.$143n=_2+isc.timeStamp()}
var _5="$ir"+this.$io++;this.$im[1]=_5;this[_5]=_1;if(this.logIsDebugEnabled("traceTimers"))
{_1.timerTrace=this.getStackTrace(null,1,null,true)}
var _6=this.$im.join(isc.emptyString);var _7=setTimeout(_6,_2);this.$ip[_7]=_5;return _7},isc.A.$in=function isc_c_Timer__fireTimeout(_1){if(isc.$611!=null){if(this.logIsInfoEnabled()){this.logInfo("timer ID:"+_1+" fired during eval. Delaying until this thread completes")}
if(!this.$613)this.$613=isc.timeStamp();if((isc.timeStamp()-this.$613)>this.$612){this.logWarn("timer ID:"+_1+" fired during eval thread lasting more than "+this.$612+"ms. Thread may have caused an error and failed to complete. Allowing delayed action to fire.");delete isc.$611}else{this.$im[1]=_1;var _2=this.$im.join(isc.emptyString);var _3=setTimeout(_2,0);if(!this.$614)this.$614={};this.$614[_1]=_3;return}}
delete this.$613;var _4=this[_1];if(_4&&_4.$143o)_4=_4.$143o;delete this[_1];var _5=this.$ip;for(var i in _5){if(_5[i]=_1){delete _5[i];break}}
var _7=this.$614;if(_7){for(var i in _7){if(_7[i]=_1){delete _7[i];break}}}
if(_4==null)return;isc.EH.$h1(this.$iq);arguments.timerTrace=_4.timerTrace;this.fireCallback(_4,null,null,null,true);isc.EH.$h2()},isc.A.clear=function isc_c_Timer_clear(_1){if(isc.isAn.Array(_1))
for(var i=0;i<_1.length;i++)this.clear(_1[i]);else{var _3=this.$ip[_1];delete this[_3]
delete this.$ip[_1];if(this.$614&&this.$614[_3]){_1=this.$614[_3];delete this.$614[_3]}
clearTimeout(_1)}
return null},isc.A.clearTimeout=function isc_c_Timer_clearTimeout(_1){return this.clear(_1)},isc.A.$143p=function isc_c_Timer__getTimeoutFireTime(_1){var _2=this[_1]||{};return _2.$143n},isc.A.firePendingTimeouts=function isc_c_Timer_firePendingTimeouts(){var _1=this.$ip;for(var _2 in _1){var _3=_1[_2];if(_3==null)continue;var _4=this.$143p(_3);if(_4!=null&&_4<isc.timeStamp()){clearTimeout(_2);this.$in(_3)}}});isc.B._maxIndex=isc.C+6;isc.A=isc.Page;isc.A.$is={};isc.A.$it=0;isc.A.FIRE_ONCE="once";isc.A.$iu={};isc.A=isc.Page;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$cp="ID";isc.B.push(isc.A.setEvent=function isc_c_Page_setEvent(_1,_2,_3,_4){if(isc.isA.String(_2)){if(_1==isc.EH.LOAD||_1==isc.EH.IDLE||_1==isc.EH.RESIZE||_1==isc.EH.ORIENTATION_CHANGE)
{_2=isc.$aq("target,eventInfo",_2)}else{_2=isc.Func.expressionToFunction("target,eventInfo",_2)}}
if(this.logIsDebugEnabled()){this.logDebug("setEvent("+_1+"): action => "+(isc.isA.Function(_2)?isc.Func.getShortBody(_2):_2))}
var _5=isc.Page.$it++,_6={action:_2,functionName:_4,fireStyle:_3,ID:_5};var _7=this.$is;if(!isc.isAn.Array(_7[_1]))_7[_1]=[];_7[_1].add(_6);if(_1==isc.EH.IDLE){isc.EventHandler.startIdleTimer()}
return _5},isc.A.clearEvent=function isc_c_Page_clearEvent(_1,_2){var _3=this.$is;if(_2==null){_3[_1]=[]}else{if(this.$iv==_1){var _4=_3[_1],_5=isc.isA.Array(_4)?_4.findIndex(this.$cp,_2):-1;if(_5!=-1)_4[_5]=null}else{if(isc.isA.Array(_3[_1])){_3[_1].removeWhere(this.$cp,_2)}}}},isc.A.$iw=function isc_c_Page__getPageEventName(_1){var _2=this.$ix=this.$ix||{};if(!_2[_1]){_2[_1]="page"+_1.charAt(0).toUpperCase()+_1.substring(1)}
return _2[_1]},isc.A.handleEvent=function isc_c_Page_handleEvent(_1,_2,_3){if(_2==isc.EH.UNLOAD)isc.Canvas.$iy();var _4=isc.Page.$is[_2];if(!isc.isAn.Array(_4)||_4.length==0)return true;var _5=this.$iw(_2);var _6=true;this.$iv=_2;for(var i=0,_8=_4.length;_6&&(i<_8);i++){var _9=_4[i];if(!_9)continue;if(_9.fireStyle==isc.Page.FIRE_ONCE)_4[i]=null;if(this.logIsDebugEnabled()){this.logDebug("handleEvent("+_2+"): firing action => "+isc.Func.getShortBody(_9.action))}
if(isc.isA.Function(_9.action)){_6=(_9.action(_1,_3)!=false)}else{var _10=_9.action;if(!_10||_10.destroyed){_4[i]=null;continue}
var _11=_9.functionName||_5;if(isc.isA.Function(_10[_11])){_6=(_10[_11](_1,_3)!=false)}}}
this.$iv=null;this.$is[_2].removeEmpty();return _6},isc.A.actionsArePendingForEvent=function isc_c_Page_actionsArePendingForEvent(_1){return(isc.isAn.Array(this.$is[_1])&&this.$is[_1].length!=0)},isc.A.registerKey=function isc_c_Page_registerKey(_1,_2,_3){if(_1==null||_2==null)return;var _4=_1,_5,_6,_7,_8;if(isc.isAn.Object(_1)){_4=_1.keyName;_5=_1.ctrlKey;_6=_1.shiftKey;_7=_1.altKey;_8=_1.metaKey}
if(_4.length==1)_4=_4.toUpperCase();var _9=false;for(var i in isc.EH.$iz){if(isc.EH.$iz[i]==_4){_9=true;break}}
if(!_9){this.logWarn("Page.registerKey() passed unrecognized key name '"+_1+"'. Not registering","events");return}
var _11=this.$iu;if(!_11[_4])_11[_4]=[];_11[_4].add({target:_3,action:_2,ctrlKey:_5,shiftKey:_6,altKey:_7,metaKey:_8})},isc.A.unregisterKey=function isc_c_Page_unregisterKey(_1,_2){if(!this.$iu[_1]){isc.Log.logInfo("Page.unregisterKey(): No events registered for key "+isc.Log.echo(_1)+".","events");return false}
this.$iu[_1].removeWhere("target",_2)},isc.A.handleKeyPress=function isc_c_Page_handleKeyPress(){var _1=isc.EH,_2=_1.getKey(),_3=this.$iu;if(!_3[_2])return true;var _4=_3[_2],_5=_4.duplicate(),_6=_5.length,_7=true;for(var i=0;i<_6;i++){var _9=_5[i];if(!_4.contains(_9))continue;if(_9.ctrlKey!=null&&_9.ctrlKey!=_1.ctrlKeyDown())continue;if(_9.altKey!=null&&_9.altKey!=_1.altKeyDown())continue;if(_9.shiftKey!=null&&_9.shiftKey!=_1.shiftKeyDown())continue;if(_9.metaKey!=null&&_9.metaKey!=_1.metaKeyDown())continue;if(_9.action!=null&&!isc.isA.Function(_9.action)){isc.Func.replaceWithMethod(_9,"action","key,target")}
_7=((_9.action(_2,_9.target)!=false)&&_7)}
return _7});isc.B._maxIndex=isc.C+8;isc.ClassFactory.defineClass("EventHandler");isc.EH=isc.Event=isc.EventHandler;isc.A=isc.EventHandler;isc.A.lastEvent={};isc.A.$i0=[];isc.A.$i1=[];isc.A.passThroughEvents=true;isc.A.maskNativeTargets=true;isc.A.STILL_DOWN_DELAY=100;isc.A.DOUBLE_CLICK_DELAY=500;isc.A.IDLE_DELAY=10;isc.A.STOP_BUBBLING="***STOP***";isc.A.ALL_EDGES=["T","L","B","R","TL","TR","BL","BR"];isc.A.eventTypes={MOUSE_DOWN:"mouseDown",RIGHT_MOUSE_DOWN:"rightMouseDown",MOUSE_MOVE:"mouseMove",MOUSE_UP:"mouseUp",SHOW_CONTEXT_MENU:"showContextMenu",CLICK:"click",DOUBLE_CLICK:"doubleClick",MOUSE_OUT:"mouseOut",MOUSE_STILL_DOWN:"mouseStillDown",MOUSE_OVER:"mouseOver",POINTER_DOWN:"pointerDown",POINTER_MOVE:"pointerMove",POINTER_UP:"pointerUp",POINTER_CANCEL:"pointerCancel",TOUCH_START:"touchStart",TOUCH_MOVE:"touchMove",TOUCH_END:"touchEnd",TOUCH_CANCEL:"touchCancel",LONG_TOUCH:"longTouch",SET_DRAG_TRACKER:"setDragTracker",GET_DRAG_DATA:"getDragData",RELEASE_DRAG_DATA:"releaseDragData",DRAG_START:"dragStart",DRAG_STOP:"dragStop",DRAG_MOVE:"dragMove",DRAG_OUT:"dragOut",DRAG_REPOSITION_START:"dragRepositionStart",DRAG_REPOSITION_MOVE:"dragRepositionMove",DRAG_REPOSITION_STOP:"dragRepositionStop",DRAG_RESIZE_START:"dragResizeStart",DRAG_RESIZE_MOVE:"dragResizeMove",DRAG_RESIZE_STOP:"dragResizeStop",DROP_OVER:"dropOver",DROP_MOVE:"dropMove",DROP_OUT:"dropOut",DROP:"drop",TRANSITION_END:"transitionEnd",KEY_DOWN:"keyDown",KEY_UP:"keyUp",KEY_PRESS:"keyPress",MOUSE_WHEEL:"mouseWheel",SELECT_START:"selectStart",SELECTION_CHANGE:"selectionChange",FOCUS_IN:"focusIn",FOCUS_OUT:"focusOut",IDLE:"idle",LOAD:"load",UNLOAD:"unload",RESIZE:"resize",ORIENTATION_CHANGE:"orientationChange"};isc.A.$i2={mousemove:"mouseMove",mousedown:"mouseDown",mouseup:"mouseUp",contextmenu:"contextMenu",mousewheel:"mouseWheel",selectionchange:"selectionChange",DOMMouseScroll:"mouseWheel",mouseMove:"mouseMove",mouseDown:"mouseDown",mouseUp:"mouseUp",mouseWheel:"mouseWheel",pointerdown:"pointerDown",pointermove:"pointerMove",pointerup:"pointerUp",pointercancel:"pointerCancel",touchstart:"touchStart",touchmove:"touchMove",touchend:"touchEnd",touchStart:"touchStart",touchMove:"touchMove",touchEnd:"touchEnd",dragstart:"dragStart",drag:"drag",dragenter:"dragEnter",dragexit:"dragExit",dragleave:"dragLeave",dragover:"dragOver",drop:"drop",dragend:"dragEnd",selectionstart:"selectionStart",selectionStart:"selectionStart",selectionchange:"selectionChange",selectionChange:"selectionChange"};isc.A.$94w={READY_FOR_TOUCH:"ready",TOUCH_STARTED:"started",TOUCH_ENDING:"ending",TOUCH_COMPLETE:"complete"};isc.A.$i3="event,eventInfo";isc.A.DRAG_RESIZE="dragResize";isc.A.DRAG_REPOSITION="dragReposition";isc.A.DRAG_SCROLL="dragScroll";isc.A.DRAG_SELECT="dragSelect";isc.A.DRAG="drag";isc.A.NONE="none";isc.A.TRACKER="tracker";isc.A.TARGET="target";isc.A.OUTLINE="outline";isc.A.INTERSECT_WITH_MOUSE="mouse";isc.A.INTERSECT_WITH_RECT="rect";isc.A.artificialDragTargetDefaults={_constructor:"Canvas",canDrag:true,useNativeDrag:true,canDrop:true,dragAppearance:"none",cloneDragData:function(){return isc.EH.getNativeDragData()}};isc.A.dragTargetShadowDepth=10;isc.A.dragOffsetX=0;isc.A.dragOffsetY=0;isc.A.$i4={A:true,AREA:true};isc.A.$i5={INPUT:true,TEXTAREA:true,SELECT:true,OPTION:true};isc.A.$i6="LABEL";isc.A.$i7={keydown:"keyDown",keyup:"keyUp",keypress:"keyPress",contextmenu:"contextMenu"};isc.A.$i8={Backspace:8,Tab:9,Shift:16,Ctrl:17,Alt:18,Pause_Break:19,Caps_Lock:20,Page_Up:33,Page_Down:34,End:35,Home:36,Arrow_Left:37,Arrow_Up:38,Arrow_Right:39,Arrow_Down:40,Insert:45,Delete:46,Meta:91,f1:112,f2:113,f3:114,f4:115,f5:116,f6:117,f7:118,f8:119,f9:120,f10:121,f11:122,f12:123,Num_Lock:144,Scroll_Lock:145};isc.A.$944={A:true,C:true,D:true,R:true,V:true};isc.A.$90v={Backspace:true,Tab:true,Shift:true,Ctrl:true,Alt:true,Pause_Break:true,Caps_Lock:true,Escape:true,Page_Up:true,Page_Down:true,End:true,Home:true,Arrow_Left:true,Arrow_Up:true,Arrow_Right:true,Arrow_Down:true,Insert:true,Delete:true,Meta:true,Menu:true,f1:true,f2:true,f3:true,f4:true,f5:true,f6:true,f7:true,f8:true,f9:true,f10:true,f11:true,f12:true,Num_Lock:true,Scroll_Lock:true};isc.A.$iz={'0':'$i9','8':'Backspace','9':'Tab','13':'Enter','16':'Shift','17':'Ctrl','18':'Alt','19':'Pause_Break','20':'Caps_Lock','27':'Escape','32':'Space','33':'Page_Up','34':'Page_Down','35':'End','36':'Home','37':'Arrow_Left','38':'Arrow_Up','39':'Arrow_Right','40':'Arrow_Down','44':'Print_Screen','45':'Insert','46':'Delete','48':'0',"49":"1","50":"2","51":"3","52":"4","53":"5","54":"6","55":"7","56":"8","57":"9",'58':';','59':';','60':',','61':'=','62':"/",'65':'A','66':'B','67':'C','68':'D','69':'E','70':'F','71':'G','72':'H','73':'I','74':'J','75':'K','76':'L','77':'M','78':'N','79':'O','80':'P','81':'Q','82':'R','83':'S','84':'T','85':'U','86':'V','87':'W','88':'X','89':'Y','90':'Z','91':'Meta','92':'Meta','93':'Menu','96':'0','97':'1','98':'2','99':'3','100':'4','101':'5','102':'6','103':'7','104':'8','105':'9','106':'*','107':'+','109':'-','110':'.','111':'/','112':'f1','113':'f2','114':'f3','115':'f4','116':'f5','117':'f6','118':'f7','119':'f8','120':'f9','121':'f10','122':'f11','123':'f12','144':'Num_Lock','145':'Scroll_Lock','160':'Shift','161':'Shift','162':'Ctrl','163':'Ctrl','164':'Alt','165':'Alt','186':';','187':'=','188':',','189':'-','190':'.','191':'/','192':'`','219':'[','220':'\\','221':']','222':"'",'224':"Meta"};isc.A.$ja={'8':'Backspace','9':'Tab','13':'Enter','27':'Escape','32':'Space','33':'1','34':"'",'35':'3','36':'4','37':'5','38':'7','39':"'",'40':'9','41':'0','42':'8','43':'=','44':',','45':'-','46':'.','47':'/','48':'0','49':'1','50':'2','51':'3','52':'4','53':'5','54':'6','55':'7','56':'8','57':'9','58':';','59':';','60':',','61':'=','62':'.','63':'/','64':'2','65':'A','66':'B','67':'C','68':'D','69':'E','70':'F','71':'G','72':'H','73':'I','74':'J','75':'K','76':'L','77':'M','78':'N','79':'O','80':'P','81':'Q','82':'R','83':'S','84':'T','85':'U','86':'V','87':'W','88':'X','89':'Y','90':'Z','91':'[','92':'\\','93':']','94':'6','95':'-','96':'`','97':'A','98':'B','99':'C','100':'D','101':'E','102':'F','103':'G','104':'H','105':'I','106':'J','107':'K','108':'L','109':'M','110':'N','111':'O','112':'P','113':'Q','114':'R','115':'S','116':'T','117':'U','118':'V','119':'W','120':'X','121':'Y','122':'Z','123':'[','124':'\\','125':']','126':'`'};isc.A.$jb={'3':"Enter",'25':"Tab",'63232':"Arrow_Up",'63233':"Arrow_Down",'63234':"Arrow_Left",'63235':"Arrow_Right",'64236':"f1",'64237':"f2",'64238':"f3",'64239':"f4",'64240':"f5",'64241':"f6",'64242':"f7",'64243':"f8",'64244':"f9",'64245':"f10",'64246':"f11",'63247':"f12",'63273':"Home",'63275':"End",'63276':"Page_Up",'63277':"Page_Down"};isc.A.$jc={};isc.A.dynamicBackMask=false;isc.A.alwaysBackMask=false;isc.A.dragTrackerDefaults={ID:"isc_dragTracker",$119r:true,width:10,height:10,offsetX:-10,offsetY:-10,autoDraw:false,visibility:"hidden",overflow:"visible",cursor:"arrow"};isc.EventHandler.addClassProperties(isc.EventHandler.eventTypes)
isc.A=isc.EventHandler;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$je="f10";isc.A.$20w="Escape";isc.A.$85t=[];isc.A.$85z={};isc.A.$jf="Tab";isc.A.$70a={keydown:true,keyup:true,keypress:true};isc.A.$jg="IMG";isc.A.$jh="progid:DXImageTransform.Microsoft.AlphaImageLoader";isc.A.longTouchDelay=500;isc.A.$ji={};isc.A.$jj="BODY";isc.A.$jk="HTML";isc.A.$jl="eventProxy";isc.A.$945="eventpart";isc.A.$jm="[object Text]";isc.A.$jn={autoDraw:false,$jo:true,$jp:false,overflow:"hidden",visibility:"hidden",$jq:false,getTarget:function(){return this.$jr},show:function(){var _1=this.masterElement;this.moveAbove(_1);return this.Super("show",arguments)}};isc.A.$js=isc.Browser.isIE?isc.undef:true;isc.A.$jt="handleNativeEvents";isc.A.$49r="APPLET";isc.A.$ju={mouseMove:true,mouseOver:true,mouseOut:true};isc.A.$41z="selectionChange";isc.A.$120k="application/x-isc-dragtype";isc.A.$120l=0;isc.A.$120p="dyn.a";isc.A.$120m={"a":0,"b":1,"c":2,"d":3,"e":4,"f":5,"g":6,"h":7,"k":8,"m":9,"n":10,"p":11,"q":12,"r":13,"s":14,"t":15,"u":16,"v":17,"w":18,"x":19,"y":20,"z":21,"0":22,"1":23,"2":24,"3":25,"4":26,"5":27,"6":28,"7":29,"8":30,"9":31};isc.A.$119s="drop";isc.A.$119t={dateFormat:"xmlSchema",prettyPrint:false,skipInternalProperties:true,strictQuoting:true};isc.A.$119u="dragstart";isc.A.$120c={"none":"none","copy":"copy","copyLink":"copyLink","copylink":"copyLink","copyMove":"copyMove","copymove":"copyMove","link":"link","linkMove":"linkMove","linkmove":"linkMove","move":"move","all":"all","uninitialized":"uninitialized"};isc.A.$1197=isc.Browser.isMoz&&isc.Browser.version<10;isc.A.$119v=600;isc.A.$119w={"none":"none","copy":"copy","copyLink":"copy","copylink":"copy","copyMove":"copy","copymove":"copy","all":"copy","link":"link","linkMove":"link","linkmove":"link","move":"move"};isc.A.$27r="none";isc.A.currentOrientation=isc.Page.getOrientation();isc.A.$118t=isc.Page.getWidth();isc.A.$jv="$jw";isc.A.$jx=0;isc.A.$jy={load:"LOD",mousedown:"MDN",mouseup:"MUP",mousemove:"MMV",mouseout:"MOU",touchstart:"TDN",touchmove:"TMVP",touchend:"TUP",contextmenu:"CXT",keypress:"KPR",keydown:"KDN",keyup:"KUP",resize:"RSZ"};isc.A.$jz="nativeEvents";isc.A.$j0="event";isc.A.$j1="if (!isc.Browser.isIE && event == null) return;"+((isc.Browser.isMoz&&isc.Browser.version>=6)||isc.Browser.isChrome?"if(event.defaultPrevented)return;":(isc.Browser.isMoz?"if(event.getPreventDefault&&event.getPreventDefault())return;":isc.Browser.isSafari?"if(event.returnValue==false)return;":""))+"var returnVal=arguments.callee.$ch.isc.EH.dispatch(arguments.callee.$j2,event);"+(!isc.Browser.isIE&&isc.Browser.isDOM?"if(returnVal==false)event.preventDefault();else if(returnVal==isc.EH.STOP_BUBBLING)event.stopPropogation();":"")+"return returnVal;";isc.A.$j3={};isc.A.$j4={onmousedown:"mousedown",onmouseup:"mouseup",onclick:"click",ondblclick:"dblclick",oncontextmenu:"contextmenu",onmousewheel:"mousewheel",onmouseover:"mouseover",onmouseout:"mouseout",onmousemove:"mousemove",ondragstart:"dragstart",ondrag:"drag",ondragend:"dragend",ondragenter:"dragenter",ondragover:"dragover",ondragleave:"dragleave",ondrop:"drop",onresize:"resize",onload:"load",onunload:"unload",onselecttext:"selecttext",onselectionchanged:"selectionchanged",onkeydown:"keydown",onkeyup:"keyup",onkeypress:"keypress"};isc.A.$649={};isc.A.getMouseEventProperties=(isc.Browser.isIE?function(_1){var _2=this.lastEvent;if(!_1)_1=this.getWindow().event;_2.DOMevent=_1;_2.eventType=this.$i2[_1.type];_2.y=parseInt(_1.clientY)+this.ns.Page.getScrollTop();_2.x=parseInt(_1.clientX);if(!isc.Page.isRTL()){_2.x+=this.ns.Page.getScrollLeft()}else{if(isc.Browser.isIE&&isc.Browser.version<=7&&isc.Browser.isStrict&&isc.Page.getBodyOverflow()!=isc.Canvas.HIDDEN)
{if(!this.$946){if(isc.Browser.version<=6){this.$946=document.documentElement.offsetWidth-document.documentElement.clientWidth}else if(isc.Browser.version<=7){this.$946=document.documentElement.offsetWidth-document.body.offsetWidth}else{this.$946=document.body.offsetWidth-document.body.clientWidth}}
_2.x-=this.$946}}
_2.nativeTarget=_1.srcElement;var _3=_1.wheelDelta;if(_3!=null){_2.wheelDelta=-_3/120;_2.wheelDeltaY=_2.wheelDelta;_2.wheelDeltaX=0}else{_2.wheelDelta=null;_2.wheelDeltaX=null;_2.wheelDeltaY=null}
_2.screenX=_1.screenX;_2.screenY=_1.screenY;_2.buttonNum=(isc.Browser.isIE11?_1.buttons:_1.button);_2.shiftKey=(_1.shiftKey==true);_2.ctrlKey=(_1.ctrlKey==true);_2.altKey=(_1.altKey==true);_2.metaKey=(_1.metaKey==true);_2.target=this.getEventTargetCanvas(_1,_2.nativeTarget,_2);return _2}:function(_1){var _2=this.lastEvent;_2.DOMevent=_1;_2.eventType=this.$i2[_1.type];var _3=false;if(isc.Browser.isMobileWebkit){if(isc.startsWith(_2.eventType,"touch")){if(_2.eventType==isc.EH.TOUCH_END){_3=true}else if(_1.touches!=null&&_1.touches[0]!=null){var _4=_1.touches[0];_2.clientX=_4.clientX;_2.clientY=_4.clientY;_2.screenX=_4.screenX;_2.screenY=_4.screenY;_2.x=_4.pageX;_2.y=_4.pageY;if(isc.Browser.isIPad&&isc.Browser.isMobileSafari&&isc.Browser.iOSVersion==7&&isc.Page.getOrientation()==="landscape")
{var _5=this.getDocumentBody(),_6=_5.getBoundingClientRect();var _7=Math.max(0,(-_6.top)<<0);_2.screenY+=((-_5.scrollTop+_7)*isc.Page.$130f())<<0;_2.y+=-_5.scrollTop+_7}}}else if(isc.Browser.isAndroid&&_1.type==isc.EH.CLICK){_2.screenX=_1.screenX;_2.screenY=_1.screenY;_2.x=parseInt(_1.clientX)+isc.Page.getScrollLeft(true);_2.y=parseInt(_1.clientY)+isc.Page.getScrollTop()}}else{_2.screenX=_1.screenX;_2.screenY=_1.screenY;if(_2.eventType!=this.MOUSE_WHEEL){var _8=true;_2.x=parseInt(_1.clientX)+(_8?isc.Page.getScrollLeft(true):0);_2.y=parseInt(_1.clientY)+(_8?isc.Page.getScrollTop():0)}}
_2.nativeTarget=_1.target;_2.$j5=null;_2.target=this.getEventTargetCanvas(_1,_2.nativeTarget,_2);if(_2.eventType==this.MOUSE_WHEEL){var _9=_1.wheelDeltaY,_10=_1.wheelDeltaX,_11=_1.wheelDelta,_12=_11,_13=_1.detail,_14=_1.axis;if(_9!=null||_10!=null){_2.wheelDeltaX=_10==null?0:-_10/120;_2.wheelDeltaY=_9==null?0:-_9/120;_2.wheelDelta=_2.wheelDeltaY}else{if(_13==0||(_13==null&&_11!=null)){var _12=_1.wheelDelta;if(_12!=null){_2.wheelDelta=-_12/120;_2.wheelDeltaY=_2.wheelDelta;_2.wheelDeltaX=0}else{_2.wheelDelta=null;_2.wheelDeltaX=null;_2.wheelDeltaY=null}}else{if(isc.Canvas.useNativeWheelDelta&&_1.detail==_1.SCROLL_PAGE_UP){_2.wheelDelta=-Math.floor(_2.target.height/isc.Canvas.scrollWheelDelta)}else if(isc.Canvas.useNativeWheelDelta&&_1.detail==_1.SCROLL_PAGE_DOWN){_2.wheelDelta=Math.floor(_2.target.height/isc.Canvas.scrollWheelDelta)}else{var _15=_14==null||_14==2;var _12=_1.detail/3;if(!isc.isA.Number(_12))_12=0;if(_15){_2.wheelDelta=_12;_2.wheelDeltaY=_12;_2.wheelDeltaX=0}else{_2.wheelDelta=0;_2.wheelDeltaY=0;_2.wheelDeltaX=_12}}}}}else{_2.wheelDelta=null;_2.wheelDeltaX=null;_2.wheelDeltaY=null}
if(_2.eventType==isc.EH.MOUSE_MOVE||_2.eventType==isc.EH.TOUCH_MOVE){if(!this.$j6)_2.buttonNum=0}else if(isc.Browser.isTouch){if(_1.targetTouches&&_1.targetTouches.length>1){_2.buttonNum=2}else{_2.buttonNum=1}}else{_2.buttonNum=((_1.which==1||isc.Browser.isSafari&&_1.which==65536)?1:2)}
_2.shiftKey=(_1.shiftKey==true);_2.ctrlKey=(_1.ctrlKey==true);_2.altKey=(_1.altKey==true);_2.metaKey=(_1.metaKey==true);return _2});isc.A.$688="f1";isc.A.$689="help";isc.A.HARD="hard";isc.A.SOFT="soft";isc.A.SOFT_CANCEL="softCancel";isc.A.$j7=0;isc.A.clickMaskRegistry=[];isc.A.$cp='ID';isc.B.push(isc.A.handleSyntheticEvent=function isc_c_EventHandler_handleSyntheticEvent(_1){var _2=_1.target;_1.$49s=true;if(_2){_1.clientX+=_2.getPageLeft();_1.clientY+=_2.getPageTop();if(isc.Browser.isIE){_1.clientX+=_2.getLeftMargin()+_2.getLeftBorderSize()+_2.getLeftPadding()+2;_1.clientY+=_2.getTopMargin()+_2.getRightBorderSize()+_2.getTopPadding()+2}
switch(_1.type){case"mouseup":this.handleMouseUp(_1);break;case"mousedown":this.handleMouseDown(_1);break;case"mousemove":this.handleMouseMove(_1);break}}},isc.A.handleEvent=function isc_c_EventHandler_handleEvent(_1,_2,_3){this.$77e=_2;var _4=isc.EH;var _5;if(isc.Page.handleEvent(_1,_2,_3)==false){_5=false}else if(_4.targetIsEnabled(_1)&&_4.bubbleEvent(_1,_2,_3)==false){_5=false}else{_5=true}
delete this.$77e;return _5},isc.A.handleLoad=function isc_c_EventHandler_handleLoad(_1){if(isc.SA_Page)isc.SA_Page.$o();if(!isc.Browser.isMoz){if(isc.EH.$j8()&&document&&document.body){document.body.addEventListener("unload",isc.EH.handleUnload,false)}}
if(isc.Log.supportsOnError){return(isc.Page.handleEvent(null,isc.EH.LOAD)!=false)}else{try{return(isc.Page.handleEvent(null,isc.EH.LOAD)!=false)}catch(e){isc.Log.$am(e);throw e;}}},isc.A.handleUnload=function isc_c_EventHandler_handleUnload(_1){var _2=isc.EH;var _3=(isc.Page.handleEvent(null,_2.UNLOAD)!=false);if(_3==true){this.releaseEvents()}
return _3},isc.A.$j9=function isc_c_EventHandler__handleNativeKeyDown(_1,_2){if(!isc.Page.isLoaded())return false;var _3=isc.EH;var _4=_3.lastEvent;if(!_1)_1=_3.getWindow().event;_3.getKeyEventProperties(_1);if(isc.Browser.isIE&&_4.keyName==this.$688&&!_2){return}
var _5=true;var _6=_4.keyName,_7=_4.characterValue;var _8=_3.$85t.duplicate();for(var i=0;i<_8.length;i++){var _10=_8[i];if(_10==null||_10==_6)break;if(this.$90x(_10))continue;_4.characterValue=null;_4.keyName=_10;this.handleKeyPress();_3.$85z[_4.keyName]=true}
_4.keyName=_6;_4.characterValue=_7;var _11=this.$90x(_6);if(_3.$85t.indexOf(_4.keyName)!=-1){if(!_11){_5=_3.handleKeyPress();_3.$85z[_4.keyName]=true}}else{_5=_3.handleKeyDown(_1)}
if(_5!=false&&_4.keyName){_3.$85t[_3.$85t.length]=_4.keyName}
_3.$885=_4.ctrlKey;_3.$886=_4.altKey;if(_5!=false&&_11){_5=_3.handleKeyPress(_1);_3.$85z[_4.keyName]=true}
if(_5==false){this.cancelKeyEvent(_1)}
return _5},isc.A.$90x=function isc_c_EventHandler__fireKeypressOnKeyDown(_1){return false},isc.A.$947=function isc_c_EventHandler__mozFireKeypressOnKeyDown(_1){return _1==this.$je&&this.shiftKeyDown()},isc.A.$948=function isc_c_EventHandler__ieFireKeypressOnKeyDown(_1){var _2=isc.EH;if(_2.$i8[_1]!=null)return true;return _2.$949()},isc.A.$95a=function isc_c_EventHandler__safariFireKeypressOnKeyDown(_1){var _2=isc.EH;if(_2.$90v[_1]!=null)return true;return _2.$944[_1]!=null&&_2.$949()},isc.A.$949=function isc_c_EventHandler__modifierKeyDownOnly(_1){if(!_1)_1=this.lastEvent;if(isc.Browser.isMac)return _1.metaKey&&!_1.altKey&&!_1.shiftKey;else return(_1.ctrlKey&&!_1.metaKey&&!_1.altKey&&!_1.shiftKey)||(_1.altKey&&!_1.metaKey&&!_1.ctrlKey&&!_1.shiftKey)},isc.A.handleKeyDown=function isc_c_EventHandler_handleKeyDown(_1,_2){var _3=isc.EH,_4=_3.lastEvent,_5;var _6=_3.eventHandledNatively(_4.eventType,_4.nativeKeyTarget);if(_6)_5=_3.$js;if(_2!=null)isc.addProperties(_4,_2);if(!_6){var _7=[_4,_4.target,_4.keyName];var _8=_4.keyTarget;if(_8==null)_8=this.getEventTargetCanvas(_1,_4.nativeKeyTarget);if(_3.targetIsEnabled(_8)){_5=(_3.bubbleEvent(_8,_3.KEY_DOWN,_7)!=false)}}
return _5},isc.A.$kb=function isc_c_EventHandler__handleNativeKeyUp(_1){if(!isc.Page.isLoaded())return false;var _2=isc.EH,_3=_2.lastEvent;if(!_1)_1=_2.getWindow().event;_2.getKeyEventProperties(_1);_2.$885=_3.ctrlKey
_2.$886=_3.altKey
_2.$85z[_3.keyName]=null;if(_2.$85t.indexOf(_2.lastEvent.keyName)!=-1){if(_2.handleKeyPress(_1)==false){this.cancelKeyEvent(_1);return false}}
var _4=_2.handleKeyUp(_1)
return _4},isc.A.handleKeyUp=function isc_c_EventHandler_handleKeyUp(_1,_2){var _3=isc.EH,_4=_3.lastEvent,_5=[_4,_4.target,_4.keyName];if(_3.eventHandledNatively(_4.eventType,_4.nativeKeyTarget)){return _3.$js}
var _6=true;if(_2!=null){isc.addProperties(_4,_2)}
var _7=_4.keyTarget;if(_7==null)_7=this.getEventTargetCanvas(_1,_4.nativeKeyTarget);if(_3.targetIsEnabled(_7))
_6=(_3.bubbleEvent(_7,_3.KEY_UP,_5)!=false);if(!isc.Browser.isMac&&_4.keyName==_3.$je&&_3.shiftKeyDown()&&isc.Menu&&isc.Menu.$kc&&isc.Menu.$kc.length>0)
{_6=false}
_3.clearKeyEventProperties(_4.keyName);return _6},isc.A.$kd=function isc_c_EventHandler__handleNativeKeyPress(_1){if(!isc.Page.isLoaded())return false;var _2=isc.EH;var _3=_2.lastEvent,_4=_2.KEY_PRESS;if(!_1)_1=_2.getWindow().event;_2.getKeyEventProperties(_1);_3.eventType=_4;_3.ctrlKey=_2.$885;_3.altKey=_2.$886;if(_2.$85z[_3.keyName]==true){_2.$85z[_3.keyName]=null;return}
var _5=_2.handleKeyPress(_1);if(_5==false){this.cancelKeyEvent(_1)}
return _5},isc.A.cancelKeyEvent=function isc_c_EventHandler_cancelKeyEvent(_1){if(isc.Browser.isIE||isc.Browser.isSafari){if(this.$70a[_1.type]==true){try{_1.keyCode=0}catch(e){}}}},isc.A.handleKeyPress=function isc_c_EventHandler_handleKeyPress(_1,_2){var _3=isc.EH,_4=_3.lastEvent,_5=_3.KEY_PRESS;if(_2!=null){isc.addProperties(_4,_2)}
var _6={keyName:_4.keyName,characterValue:_4.characterValue};_4.eventType=_5;_3.$85t.removeAt(0);if(isc.Page.handleEvent(_4.keyTarget,_5)==false)return false;var _7=(_3.eventHandledNatively(_5,_4.nativeKeyTarget));if(_7!==false){_3.logDebug("keyPress handled natively");return _3.$js}else{_3.logDebug("keyPress not handled natively")}
var _8=_4.keyTarget;if(_8==null)_8=this.getEventTargetCanvas(_1,_4.nativeKeyTarget);if(_3.targetIsEnabled(_8)){var _9=_3.bubbleEvent(_8,_4.eventType,_6)
if(_9==false)return false}
if(_9!=_3.STOP_BUBBLING&&isc.Page.handleKeyPress()==false)return false;if(this.clickMaskUp()&&_4.keyName==this.$jf){var _10,_11=this.clickMaskRegistry;for(var i=_11.length-1;i>=0;i--){if(this.isHardMask(_11[i])){_10=_11[i];break}}
if(_10!=null){var _13=_3.$ke;if(_13!=null){this.logInfo("Telling focus canvas:"+_13+" to shift focus","syntheticTabIndex")
_13.$kf(!this.shiftKeyDown(),_10)}else{if(this.shiftKeyDown()){this.logInfo("Putting focus into last widget in response to Tab keydown","syntheticTabIndex")
this.$kg(_10)}else{this.logInfo("Putting focus into first widget in response to Tab keydown","syntheticTabIndex")
this.$kh(_10)}}
return false}}
if(_4.keyName==isc.EH.$je&&isc.EH.shiftKeyDown()){var _14=this.handleContextMenu(_1,true);if(isc.Browser.isIE&&_14){this.$ki=true}
return _14}
if(isc.Browser.isMoz&&isc.RPCManager&&isc.RPCManager.$410.length>0&&_4.keyName==isc.EH.$20w)
{return false}
return true},isc.A.$kh=function isc_c_EventHandler__focusInFirstWidget(_1){var _2=this.$kj;if(_2){if((!_1||!this.targetIsMasked(_2,_1))&&_2.isDrawn()&&_2.isVisible()&&!_2.isDisabled()&&_2.$kk())
{_2.focusAtEnd(true)}else{_2.$kf(true,_1)}}},isc.A.$kg=function isc_c_EventHandler__focusInLastWidget(_1){var _2=this.$kl;if(_2){if((!_1||!this.targetIsMasked(_2,_1))&&_2.isDrawn()&&_2.isVisible()&&!_2.isDisabled()&&_2.$kk())
{_2.focusAtEnd()}else{_2.$kf(false,_1)}}},isc.A.handleMouseDown=function isc_c_EventHandler_handleMouseDown(_1,_2){if((isc.Browser.isTouch||navigator.pointerEnabled)&&!_2)return;var _3=isc.EH;_3.$km=true;var _4=_3.doHandleMouseDown(_1,_2);_3.$km=false;return _4},isc.A.doHandleMouseDown=function isc_c_EventHandler_doHandleMouseDown(_1,_2){if(!isc.Page.isLoaded())return false;var _3=this;_3.$j6=true;_3.$94x=null;var _4=_2||_3.getMouseEventProperties(_1);var _5=_3.$ke,_6=_5!=null&&(_5!=_4.target)&&!_5._useNativeTabIndex&&!_5._useFocusProxy&&!(isc.isA.DynamicForm!=null&&isc.isA.DynamicForm(_5)&&_5.getFocusSubItem()&&_5.getFocusSubItem().hasFocus);if(_6){if(isc.Browser.isIE){var _7=_3.$ke.getID();if(_3.$ko==null)
_3.$ko=["if (",_7," && ",_7,".hasFocus)",_7,".blur();"]
else
_3.$ko[1]=_3.$ko[3]=_3.$ko[5]=_7;isc.Timer.setTimeout(_3.$ko.join(isc.emptyString),0)}else{_3.$ke.blur()}}
_3.mouseDownEvent=isc.addProperties({},_4);var _8=_4.target;var _9=(_3.clickMaskClick(_8)==false);if(_9){_3.$kp=true;if(isc.Browser.isChrome){var _10=isc.Element.getNativeScrollbarSize();var _11=isc.Page.getHeight(),_12=isc.Page.getWidth(),_13=isc.Page.getScrollWidth()>isc.Page.getWidth(),_14=isc.Page.getScrollHeight()>isc.Page.getHeight();if(_13&&isc.EH.getY()>(_11-_10)+isc.Page.getScrollTop()){return true}
if(_14&&isc.EH.getX()>_12+isc.Page.getScrollLeft()){return true}}
return false}else{_3.$kp=false}
var _15=_3.rightButtonDown()?_3.RIGHT_MOUSE_DOWN:_3.MOUSE_DOWN;if(isc.Page.handleEvent(_8,_15)==false){return false}
if(_3.eventHandledNatively(_15,_4.nativeTarget))
return _3.$js;if(!_3.targetIsEnabled(_8))return false;var _16;if(_8&&!_8.hasFocus){if(((isc.Browser.isMoz&&_8.canSelectText)||isc.Browser.isSafari)&&_8._useFocusProxy)
{_3.focusInCanvas(_8)}else if(!_8._useNativeTabIndex){_8.focus("focus on mousedown")}else if(isc.Browser.isMoz||isc.Browser.isSafari){_8.focus("focus on mousedown")}else if(isc.Browser.isIE){var _17=_4.nativeTarget;if(isc.Browser.isStrict){_16=_8}else{if(_17&&_17.tagName==this.$jg){var _18=_17.style,_19=_18?_18.filter:null;if(_19.contains(this.$jh)){_16=_8}}}}}
if(_8)_3.prepareForDragging(_8);var _20=_3.bubbleEvent(_8,_15,null,_9);if(_16!=null)_16.focus();if(_20==false){delete _3.dragTarget;delete _3.dragTargetLink}
if(_3.rightButtonDown()){if(!this.useSyntheticRightButtonEvents())return true;if(_8&&(_3.getBubbledProperty(_8,"contextMenu")||_3.getBubbledProperty(_8,"showContextMenu",true)!=isc.Canvas.getInstanceProperty("showContextMenu")))
{_4.returnValue=false;return false}
return true}
if(_20!=false){if(_3.hasEventHandler(_8,_3.MOUSE_STILL_DOWN)){_3.$kq()}}
var _21=_3.dragTarget!=null&&_3.dragOperation!=_3.DRAG_SELECT;var _22=(isc.Browser.hasNativeDrag&&_8.$120u())||(!_21&&(!(isc.Browser.isMoz||isc.Browser.isSafari)||!!_8.$kr(_4)));return _22},isc.A.stillWithinMouseDownTarget=function isc_c_EventHandler_stillWithinMouseDownTarget(){var _1=this.mouseDownTarget();if(!_1)return false;var _2=this.lastEvent;var _3=(_1==_2.target);if(!_3)return false;if(_2.$j5!=null)return _2.$j5;return _3},isc.A.handleMouseMove=function isc_c_EventHandler_handleMouseMove(_1){if(!isc.Page.isLoaded())return false;var _2=isc.EH;if(!_2.nativeDragging&&(isc.Browser.isTouch||navigator.pointerEnabled))return;if(_2.$km||_2.$ku)return;var _3=_2.getMouseEventProperties(_1);if((isc.Browser.isMoz||isc.Browser.isIE)&&!_2.immediateMouseMove&&!_2.nativeDragging){if(_2.delayedMouseMoveTimer==null){_2.delayedMouseMoveTimer=isc.Timer.setTimeout({target:_2,methodName:"$kv",args:[isc.timeStamp()]},0,true)}
return true}
var _4=_2.$kx(_1,_3);return _4},isc.A.$kv=function isc_c_EventHandler__delayedMouseMove(_1){this.delayedMouseMoveTimer=null;this.$kx(null,this.lastEvent)},isc.A.$kx=function isc_c_EventHandler__handleMouseMove(_1,_2){this.$ky=true;var _3=this.$kz(_1,_2);this.$ky=null;return _3},isc.A.$kz=function isc_c_EventHandler___handleMouseMove(_1,_2){var _3=this;var _4=_3.mouseIsDown();var _5=(_4&&_3.dragTarget&&(!isc.Browser.hasNativeDrag||!_3.dragTarget.$120u())&&!_3.dragging&&(!(isc.Menu&&isc.Menu.$kc&&isc.Menu.$kc.length>0)||_3.dragTarget.$131p||isc.isA.Menu(_3.dragTarget)));var _6;if(isc.Browser.isIE&&_2.originalType!==_3.POINTER_MOVE){var _7=_2.buttonNum;if(_4){if(!_5&&_7==0){if(_3.dragging){}else{_6=true}}}else if(_7==1&&_2.eventType==_3.MOUSE_MOVE){if(_3.$94x){}else{_2.eventType=_3.MOUSE_DOWN;_3.handleMouseDown(null,_2);_2.eventType=_3.MOUSE_MOVE}}}
var _8=_2.target,_9=_3.eventHandledNatively(_3.MOUSE_MOVE,_2.nativeTarget);if(_3.$k0){_3.handleMouseUp(_1,true)}else if(_6){_3.logInfo("sythesizing mouseUp "+(_3.$k1?"due to mouseUp outside window,":"[buttonNum cleared on mouseMove with no mouseUp event],")+" buttonNum: "+_2.buttonNum);_3.handleMouseUp(_1,true)}
delete _3.$k1;if(!_3.mouseIsDown()){_5=_4=false}
if(isc.Browser.isMoz&&(isc.Browser.geckoVersion<20100914)&&_4&&_2.target&&_2.target.$ks&&_2.target!=_3.mouseDownTarget())
{_2.nativeDraggingTarget=_2.nativeTarget;_2.nativeTarget=null;_8=_2.target=_3.mouseDownTarget()}
if(_5&&(Math.abs(_2.x-_3.mouseDownEvent.x)>_3.dragTarget.dragStartDistance||Math.abs(_2.y-_3.mouseDownEvent.y)>_3.dragTarget.dragStartDistance))
{_3.handleDragStart()}
if(_3.dragging){return _3.handleDragMove()}
if(_3.rightButtonDown()){if(!isc.Browser.isMac||!_3.ctrlKeyDown())return true}
if(_4){_8=_3.stillWithinMouseDownTarget()?_3.mouseDownTarget():null}else{_8=_2.target}
if(_8!=_3.lastMoveTarget){if(this.logIsDebugEnabled()){this.logDebug((_3.lastMoveTarget?"mousing out of "+_3.lastMoveTarget+"  ":"")+(_8?"mousing over "+_8:""))}
var _10=_3.lastMoveTarget,_11,_12=_3.lastHoverTarget;if(_10){delete _3.lastMoveTarget;_3.handleEvent(_10,_3.MOUSE_OUT)}
if(_8){var _13=_3.handleEvent(_8,_3.MOUSE_OVER);if(_13!=false)_11=_8.getHoverTarget(_2)}
if(_11!=_12){if(_12)_12.stopHover();if(_11)_11.startHover();_3.lastHoverTarget=_11}
_3.lastMoveTarget=_8}
if(isc.Page.handleEvent(_8,_3.MOUSE_MOVE)==false)return false;if(_9)return _3.$js;if(!_3.targetIsEnabled(_8))return false;_3.bubbleEvent(_8,_3.MOUSE_MOVE);if(_8)_8.$k2();return true},isc.A.getNativeMouseTarget=function isc_c_EventHandler_getNativeMouseTarget(_1){if(!this.nativeTargetWarningLogged){this.nativeTargetWarningLogged=true;this.logWarn("getNativeMouseTarget(). This method will return the DOM element the browser reports as the target or source of the current mouse event. Please note that SmartClient cannot guarantee that the same element will be reported in all browser/platform configurations for all event types. If you wish to make use of this value, we recommend testing your use case in all target browser configurations.")}
if(_1==null)_1=this.lastEvent;return _1.nativeTarget||_1.nativeDraggingTarget},isc.A.handleNativeMouseOut=function isc_c_EventHandler_handleNativeMouseOut(_1){if(isc.Browser==null)return;var _2=isc.EH;if(_2.$km||_2.$ku)return;var _3=(_1?_1:_2.getWindow().event),_4=(isc.Browser.isDOM?_3.target:_3.srcElement),_5=false;if(isc.Browser.isIE){_5=(_3.toElement==null)}else{_5=(_3.relatedTarget==null)}
if(_5)_2.$k1=true;var _6=_2.lastMoveTarget;if(_5&&_6){_2.$k3(_3);delete _2.lastMoveTarget;_2.handleEvent(_6,_2.MOUSE_OUT);if(_2.lastHoverTarget){_2.lastHoverTarget.stopHover();delete _2.lastHoverTarget}}},isc.A.$k3=function isc_c_EventHandler__updateMouseOutEventProperties(_1){var _2=isc.EH;var _3=_2.lastEvent;if(isc.Browser.isIE){_3.nativeTarget=_1.toElement}else{_3.nativeTarget=_1.relatedTarget}
if(_3.nativeTarget==null)_3.target=null
else _3.target=this.getEventTargetCanvas(_1,_3.nativeTarget)},isc.A.$kq=function isc_c_EventHandler__handleMouseStillDown(_1){if(!isc.Page.isLoaded())return false;var _2=this;_2.$k4=isc.Timer.clear(_2.$k4);if(!_2.mouseIsDown()||!_2.mouseDownTarget())return false;if(_2.bubbleEvent(_2.mouseDownTarget(),_2.MOUSE_STILL_DOWN)==false)return false;var _3=_2.mouseDownTarget(),_4=this.$km?_3.mouseStillDownInitialDelay:_3.mouseStillDownDelay;_2.$k4=this.delayCall("$kq",[],_4);return true},isc.A.handleMouseUp=function isc_c_EventHandler_handleMouseUp(_1,_2){var _3=isc.EH;if(!_3.nativeDragging&&(isc.Browser.isTouch||navigator.pointerEnabled)&&!_2)return;if(isc.Browser.isIE&&!_3.$j6){if(_3.$94x)return;var _4=_3.lastEvent;_4.eventType=_3.MOUSE_DOWN;_3.handleMouseDown(null,_3.lastEvent)}
_3.$94x=_2;if(!_2)_3.$ku=true;var _5=_3.$k5(_1,_2);_3.$ku=false;if(isc.Browser.isSafari)_5=true;return _5},isc.A.$k5=function isc_c_EventHandler__handleMouseUp(_1,_2){if(!isc.Page.isLoaded())return false;var _3=this,_4=(!_2?_3.getMouseEventProperties(_1):_3.lastEvent),_5=false;_3.$j6=false;delete _3.$k6;_3.$k4=isc.Timer.clear(_3.$k4);var _6=_3.$k7;if(_6){_6.focus();_3.$k7=null}
var _7=_3.$kp;_3.$kp=null;var _8;if(_7==null){_7=(_3.clickMaskClick(_4.target)==false);_8=_7}
if(_7==true){if(_3.logIsDebugEnabled())_3.logDebug("mouseUp cancelled by clickMask");return false}
var _9=false;if(_3.dragging){_9=_3.handleDragStop()}
if(_3.rightButtonDown(_4)){if(this.useSyntheticRightButtonEvents()){_3.handleContextMenu()}
_3.$k6=false}else{if(!_9){if(isc.Page.handleEvent(_4.target,_3.MOUSE_UP)!=false){var _10=true,x=this.lastEvent.x,y=this.lastEvent.y,_13=_3.mouseDownTarget();_5=_3.eventHandledNatively(_3.MOUSE_UP,_4.nativeTarget);if(!_5&&_3.targetIsEnabled(_13)){if(_13.visibleAtPoint(x,y)){_10=_3.bubbleEvent(_13,_3.MOUSE_UP,null,_8)}else if(_3.$94y==_3.$94w.TOUCH_ENDING||_13.containsPoint(x,y)){_10=_3.bubbleEvent(_13,_3.MOUSE_OUT,null,_8)}}
if(_10!=false){_3.$k6=_3.handleClick(_4.target)}}}}
delete _3.redrawnWhileDown;_3.clearDragProperties();if(_3.$k0)_3.$k0=false;var _14=_4.target,_15=isc.isA.DynamicForm!=null&&isc.isA.DynamicForm(_14);if(_5&&(_15||_3.$k6==true))
return _3.$js;return(_15&&_3.$k6==true)},isc.A.clearDragProperties=function isc_c_EventHandler_clearDragProperties(){var _1=this;_1.wasNativeDragging=false;_1.crossFrameDragging=_1.nativeDragging=_1.dragging=false;delete _1.$1198;if(_1.$119z!=null){isc.Timer.clear(_1.$119z);delete _1.$119z}
delete _1.dragTarget;delete _1.dragTargetStartRect;delete _1.dragTargetLink;delete _1.dragMoveTarget;delete _1.dragMoveAction;delete _1.dragOperation;delete _1.dragAppearance;delete _1.dropTarget;delete _1.lastDropTarget},isc.A.handleContextMenu=function isc_c_EventHandler_handleContextMenu(_1,_2){if(!isc.Page.isLoaded())return false;var _3=isc.EH;_3.$ku=true;var _4=_3.$k8(_1,_2);_3.$ku=false;return _4},isc.A.$k8=function isc_c_EventHandler__handleContextMenu(_1,_2){var _3=this.isMouseEvent(this.lastEvent.eventType);if(this.$ki){delete this.$ki;if(!_2){return true}}
if(_1)this.getMouseEventProperties(_1);var _4=this,_5=_4.lastEvent,_6=!_3?_5.keyTarget||_5.target:_5.target;_5.keyboardContextMenu=!_3;_5.eventType="contextMenu";if(!_3){_5.x=_6?_6.getPageLeft():0;_5.y=_6?_6.getPageTop():0}
if(isc.Browser.isSafari&&_4.clickMaskClick(_6)==false){return false}
if(isc.Page.handleEvent(_6,_4.SHOW_CONTEXT_MENU)==false){return false}
var _7=true;if(_4.targetIsEnabled(_6)){_7=_4.bubbleEvent(_6,_4.SHOW_CONTEXT_MENU)}
if(_7!=false){var _8=_4.lastMoveTarget;if(_8){delete _4.lastMoveTarget;_4.handleEvent(_8,_4.MOUSE_OUT)}}
return _7},isc.A.handleNativeClick=function isc_c_EventHandler_handleNativeClick(_1){var _2=isc.EH,_3=(_2.$k6!=false);delete _2.$k6;if(isc.Browser.isAndroid){_2.DOMevent=_1;var _4=_2.getMouseEventProperties(_1);switch(this.$94y){case _2.$94w.READY_FOR_TOUCH:_4.originalType=_2.CLICK;_4.eventType=_2.MOUSE_DOWN;_2.doHandleMouseDown(_1,_4);case _2.$94w.TOUCH_STARTED:_4.originalType=_2.CLICK;_4.eventType=_2.MOUSE_UP;_2.$k5(_1,true);break;case _2.$94w.TOUCH_COMPLETE:break}
this.$94y=_2.$94w.READY_FOR_TOUCH}
if(isc.Browser.isIE&&!isc.Browser.isIE10){_2.DOMevent=_1;var _4=_2.getMouseEventProperties(_1);if(_4.target&&_4.target.$120u())return false}},isc.A.handleClick=function isc_c_EventHandler_handleClick(_1,_2){if(!isc.Page.isLoaded())return false;var _3=this,_4=_3.lastEvent,_5;if(!_2)_2=(_3.isDoubleClick(_1)?_3.DOUBLE_CLICK:_3.CLICK);if(isc.Page.handleEvent(_1,_2)==false){_5=false}else if(_3.eventHandledNatively(_2,_4.nativeTarget)){_5=_3.$js}else if(!_3.targetIsEnabled(_1)){_5=false}else if(!_3.stillWithinMouseDownTarget()){_5=false}else{var _1=_3.mouseDownTarget();_5=_3.bubbleEvent(_1,_2)}
_3.$k9=isc.timeStamp();return _5});isc.evalBoundary;isc.B.push(isc.A.isDoubleClick=function isc_c_EventHandler_isDoubleClick(_1){var _2=this,_1=_1||_2.lastEvent.nativeTarget;var _3=_2.useNativeEventTime!=null?_2.useNativeEventTime:(isc.Browser.isMoz&&isc.Browser.isWin),_4,_5;if(_2._isSecondClick!=null){_5=_2._isSecondClick}else{if(_3){var _6=_2.lastEvent.DOMevent
_4=_6?_6.timeStamp:null;if(_4==0||!isc.isA.Number(_4)){this.logDebug("Unable to derive native 'timeStamp' attribute from DOM event");_4=isc.timeStamp()}
_5=((_4-_2.lastClickTime)<_2.DOUBLE_CLICK_DELAY)}else{_4=isc.timeStamp();_5=((_2.$k9-_2.lastClickTime)<_2.DOUBLE_CLICK_DELAY)?((_4-_2.lastClickTime)<_2.DOUBLE_CLICK_DELAY):((_4-_2.$k9)<100)}}
_2.lastClickTime=_4;if(!_5){delete _2.lastClickTarget}
var _7=false;if(_1==_2.lastClickTarget){_7=!_1.noDoubleClicks;if(_7){var _8=_1;while(_8.parentElement){_8=_8.parentElement;if(_8.noDoubleClicks){_7=false;break}}}}
_2.lastClickTarget=(_7?null:_1);return _7},isc.A.targetIsEnabled=function isc_c_EventHandler_targetIsEnabled(_1){if(!_1)return false;if(_1.destroyed)return false;if(isc.isA.Function(_1.isDisabled))return!_1.isDisabled();return true},isc.A.$149j=function isc_c_EventHandler__handlePointerDown(_1){var _2=isc.EH;if(_1.pointerType==="touch"){return _2.$77p(_1)}else{_2.DOMevent=_1;var _3=_2.getMouseEventProperties(_1);_3.originalType=_3.eventType;_3.eventType=_2.MOUSE_DOWN;return _2.doHandleMouseDown(_1,_3)}},isc.A.$149k=function isc_c_EventHandler__handlePointerMove(_1){var _2=isc.EH;if(_1.pointerType==="touch"){return _2.$77q(_1)}else{_2.DOMevent=_1;var _3=_2.getMouseEventProperties(_1);_3.originalType=_3.eventType;_3.eventType=_2.MOUSE_MOVE;return _2.$kx(_1,_3)}},isc.A.$149l=function isc_c_EventHandler__handlePointerUp(_1){var _2=isc.EH;if(_1.pointerType==="touch"){return _2.$77r(_1)}else{_2.DOMevent=_1;var _3=_2.getMouseEventProperties(_1);_3.originalType=_3.eventType;_3.eventType=_2.MOUSE_UP;return _2.$k5(_1,true)}},isc.A.$149m=function isc_c_EventHandler__handlePointerCancel(_1){var _2=isc.EH;if(_1.pointerType==="touch"){return _2.$86w(_1)}else{_2.DOMevent=_1;var _3=_2.getMouseEventProperties(_1);_3.originalType=_3.eventType;_3.eventType=_2.MOUSE_UP;return _2.$k5(_1,true)}},isc.A.$129k=function isc_c_EventHandler__handlingTouchEventSequence(){var _1=isc.EH;return(_1.$94y!=null&&_1.$94y!=_1.$94w.READY_FOR_TOUCH&&_1.$94y!=_1.$94w.TOUCH_COMPLETE)},isc.A.$77p=function isc_c_EventHandler__handleTouchStart(_1){var _2=isc.EH;_2.DOMevent=_1;var _3=_2.getMouseEventProperties(_1);delete _3.touchStartReturnValue;this.$94y=_2.$94w.TOUCH_STARTED;var _4=_2.handleEvent(_3.target,_2.TOUCH_START);if(_4!==false){_3.originalType=_2.TOUCH_START;_3.eventType=_2.MOUSE_MOVE;_2.$kx(_1,_3);_3.eventType=_2.MOUSE_DOWN;_4=_2.doHandleMouseDown(_1,_3);if(_2.$78m!=null)isc.Timer.clear(_2.$78m);_2.$78m=this.delayCall("$78n",[],_2.longTouchDelay)}
return _3.touchStartReturnValue},isc.A.$78n=function isc_c_EventHandler__handleLongTouch(){var _1=isc.EH;_1.$78m=null;if(_1.dragging)return;if(!_1.mouseIsDown()||!_1.mouseDownTarget()||!_1.stillWithinMouseDownTarget())return;_1.bubbleEvent(_1.mouseDownTarget(),_1.LONG_TOUCH)},isc.A.$77q=function isc_c_EventHandler__handleTouchMove(_1){var _2=isc.EH;_2.DOMevent=_1;var _3=_2.getMouseEventProperties(_1);var _4=_2.handleEvent(_3.target,_2.TOUCH_MOVE);if(_4!==false){_3.originalType=_2.TOUCH_MOVE;_3.eventType=_2.MOUSE_MOVE;_2.$kx(_1,_3);if(_2.dragging&&window.event!=null)window.event.preventDefault()}
if(_2.$78m!=null){isc.Timer.clear(_2.$78m);_2.$78m=null}},isc.A.$77r=function isc_c_EventHandler__handleTouchEnd(_1){var _2=isc.EH;_2.DOMevent=_1;var _3=_2.getMouseEventProperties(_1);if(_2.$94y==_2.$94w.TOUCH_STARTED){_2.$94y=_2.$94w.TOUCH_ENDING}
var _4=_2.handleEvent(_3.target,_2.TOUCH_END);if(_4!==false){_3.originalType=_2.TOUCH_END;_3.eventType=_2.MOUSE_UP;_2.$k5(_1,true)}
if(_2.$94y==_2.$94w.TOUCH_ENDING){_2.$94y=_2.$94w.TOUCH_COMPLETE}
if(_2.$78m!=null){isc.Timer.clear(_2.$78m);_2.$78m=null}},isc.A.$86w=function isc_c_EventHandler__handleTouchCancel(_1){var _2=isc.EH;_2.DOMevent=_1;var _3=_2.getMouseEventProperties(_1);if(_2.$94y==_2.$94w.TOUCH_STARTED){_2.$94y=_2.$94w.TOUCH_ENDING}
this.delayCall("$894",[_3,_1])},isc.A.$894=function isc_c_EventHandler__handleDelayedTouchCancel(_1,_2){var _3=isc.EH;var _4=_3.handleEvent(_1.target,_3.TOUCH_END);if(_4!==false){_1.originalType=_3.TOUCH_CANCEL
_1.eventType=_3.MOUSE_UP;_3.$k5(_2,true)}
if(_3.$94y==_3.$94w.TOUCH_ENDING){_3.$94y=_3.$94w.TOUCH_COMPLETE}
if(_3.$78m!=null){isc.Timer.clear(_3.$78m);_3.$78m=null}},isc.A.getFocusCanvas=function isc_c_EventHandler_getFocusCanvas(){return this.$ke},isc.A.$la=function isc_c_EventHandler__logFocus(_1,_2){if(!this.logIsDebugEnabled("nativeFocus"))return;this.logDebug((_2?"onfocus":"onblur")+" fired on: "+_1+this.$lb(),"nativeFocus")},isc.A.$lb=function isc_c_EventHandler__getActiveElementText(){if(!isc.Browser.isIE)return isc.$ad;var _1=this.getActiveElement();if(_1==null)return isc.$ad;return", activeElement: "+(_1.tagName)},isc.A.blurFocusCanvas=function isc_c_EventHandler_blurFocusCanvas(_1,_2){var _3=this.$lc;if(_2){this.$h1("BLR");this.$la(_1);isc.EH.$ld=null}
this.$le(_1,_2);if(_2)this.$lc=_3},isc.A.$le=function isc_c_EventHandler__blurFocusCanvas(_1,_2){if(this.$ke){var _3=this.$ke;if(_1!=null&&_3!=_1)return;this.$ke=null;_3.$lf(false)}},isc.A.focusInCanvas=function isc_c_EventHandler_focusInCanvas(_1,_2){var _3=this.$lc;if(_2){this.$h1("FCS");this.$la(_1,true);isc.EH.$lg=null}
if(isc.Browser.isMoz){if(_2&&(this.lastEvent.eventType!=this.KEY_DOWN&&this.lastEvent.eventType!=this.KEY_PRESS&&this.lastEvent.eventType!=this.KEY_UP))
{if(_1&&_1.showFocusOutline)_1.setShowFocusOutline(false,true)}else{if(_1&&_1.showFocusOutline)_1.setShowFocusOutline(true,true)}}
this._focusInCanvas(_1,_2);if(_2)this.$lc=_3},isc.A._focusInCanvas=function isc_c_EventHandler__focusInCanvas(_1,_2){if(!_1||_1.hasFocus||!_1.$kk()||_1.isDisabled())return;if(this.$ke==_1)return;this.checkMaskedFocus(_1);if(this.targetIsMasked(_1)&&!_1.$1196){var _3=this.clickMaskRegistry.last();this.setMaskedFocusCanvas(_1,_3)}
if(_2&&isc.Browser.isMoz){if(_1.parentElement)_1.parentElement.$lh(null,true)}
var _4=this.$ke;this.$ke=_1;if(_4)_4.$lf(false)
if(this.$ke!=_1)return;_1.$lf(true)},isc.A.setMaskedFocusCanvas=function isc_c_EventHandler_setMaskedFocusCanvas(_1,_2){if(!_2)return;_2.$li=_1},isc.A.getMaskedFocusCanvas=function isc_c_EventHandler_getMaskedFocusCanvas(_1){if(_1==null)_1=this.clickMaskRegistry.last();else _1=this.getClickMask(_1);if(_1)return _1.$li},isc.A.checkMaskedFocus=function isc_c_EventHandler_checkMaskedFocus(_1){if(isc.Browser.isIE||isc.Browser.seleniumPresent){var _2=this.getActiveElement();var _3=_1?_1.getHandle():null;if(!_3)return;var _4;while(_2&&_2.tagName){if(_2==_3){_4=true;break}
if(_2.eventProxy){_4=(_2.eventProxy==_1.getID());break}
_2=_2.parentElement}
if(!_4)return}
if(isc.Browser.isMobileWebkit){if(isc.EH.isMouseEvent(isc.EH.lastEvent.eventType)&&(isc.EH.mouseDownTarget()==_1))
{return}}
var _5=this.clickMaskRegistry;for(var i=_5.length-1;i>=0;i--){var _7=_5[i];if(!this.targetIsMasked(_1,_7))return;else{if(this.isHardMask(_7))return false;this.$lj(_7)}}},isc.A.prepareForDragging=function isc_c_EventHandler_prepareForDragging(_1){var _2=this;if(_2.dragging)_2.handleDragStop();delete _2.dragMoveAction;delete _2.dragTarget;_2.bubbleEvent(_1,"prepareForDragging");if(!_2.dragTarget){if(this.logIsDebugEnabled("dragDrop"))this.logDebug("No dragTarget, not dragging","dragDrop");return}
if(this.logIsInfoEnabled("dragDrop"))
this.logInfo("target is draggable with dragOperation: "+_2.dragOperation+", dragTarget is : "+_2.dragTarget+(_2.dragTarget!=_1?" (delegated from: "+_1+")":""),"dragDrop");_2.dragTargetStartRect=_2.dragTarget.getRect()},isc.A.handleDragStart=function isc_c_EventHandler_handleDragStart(_1){var _2=this,_3=_2.lastEvent;if(!_2.mouseIsDown()||!_2.dragTarget)return false;delete _2.dropTarget;delete _2.dragMoveTarget;_2.dragOffsetX=-10;_2.dragOffsetY=-10;_2.handleEvent(_2.lastMoveTarget,_2.MOUSE_OUT);if(_2.lastMoveTarget!=_2.mouseDownTarget()){_2.handleEvent(_2.mouseDownTarget(),_2.MOUSE_OUT)}
if(isc.Hover)isc.Hover.clear();_2.dragStartOffsetX=_2.mouseDownEvent.x-_2.dragTarget.getPageLeft();_2.dragStartOffsetY=_2.mouseDownEvent.y-_2.dragTarget.getPageTop();var _4=_2.dragOperation+"Start";if(_2.handleEvent(_2.dragTarget,_4)==false){this.logInfo("drag cancelled by false return from: "+_4+" on "+_2.dragTarget,"dragDrop");delete _2.dragTarget;delete _2.dragTargetLink;_2.handleEvent(_2.dragTarget,_2.MOUSE_OVER);return false}
delete _2.lastMoveTarget;var _5=_2.dragTarget.getDragAppearance(_2.dragOperation);if(_5!=_2.TRACKER)
{_2.dragOffsetX=_2.dragStartOffsetX;_2.dragOffsetY=_2.dragStartOffsetY}
if(_2.dragOperation==_2.DRAG_SCROLL||_1)
{_2.dragAppearance=_2.NONE}else{_2.dragAppearance=_2.dragTarget.getDragAppearance(_2.dragOperation)}
if(_2.dragAppearance==_2.TRACKER){_2.dragMoveTarget=_2.$lk();if(!_2.dragMoveAction)_2.dragMoveAction=_2.$ll;_2.dragTracker.setOverflow(isc.Canvas.VISIBLE);_2.bubbleEvent(_2.dragTarget,_2.SET_DRAG_TRACKER);_2.dragOffsetX=_2.dragTracker.offsetX;_2.dragOffsetY=_2.dragTracker.offsetY}else if(_2.dragAppearance==_2.OUTLINE){_2.dragMoveTarget=_2.getDragOutline(_2.dragTarget);if(!_2.dragMoveAction)_2.dragMoveAction=_2.$ll}else if(_2.dragAppearance==_2.TARGET){_2.dragMoveTarget=_2.dragTarget;if(!_2.dragMoveAction)_2.dragMoveAction=_2.$ll;if(_2.dragTarget.showDragShadow)this.$lm();if(_2.dragTarget.dragOpacity!=null)this.$ln()}else{}
if(_2.dragMoveTarget){if(_2.dragMoveTarget!=_2.dragTarget){_2.dragMoveTarget.dragIntersectStyle=_2.dragTarget.dragIntersectStyle}
_2.dragMoveTarget.show();_2.dragMoveTarget.bringToFront()}
var _6=_2.dragMoveTarget?_2.dragMoveTarget:_2.dragTarget;if((isc.Browser.isIE||isc.Browser.isMoz)&&_2.dragAppearance!=_2.OUTLINE&&!(_6.$lo||_6.neverBackMask))
{if(_2.alwaysBackMask){this.$lp(_6)}else{var _7=[];if(isc.BrowserPlugin){var _8=isc.BrowserPlugin.instances;for(var i=0;i<_8.length;i++){var _10=_8[i];if(_10.isVisible()&&(_6.parentElement==null||_6.parentElement.contains(_10,true)))
{_7.add({instance:_10,rect:_10.getPageRect()})}}}
if(isc.Browser.isIE&&isc.Browser.minorVersion>=5.5&&isc.NativeSelectItem){var _11=isc.NativeSelectItem.instances;for(var i=0;i<_11.length;i++){var _12=_11[i];if(_12.isVisible()&&(_6.parentElement==null||_6.parentElement.contains(_12.containerWidget,true)))
{_7.add({instance:_12,rect:_12.getPageRect()})}}}
if(_7.length>0&&_2.dynamicBackMask===false)
{this.$lp(_6)}else{_2.$lq=_7}}}
_2.showEventMasks((_2.dragOperation==_2.DRAG_RESIZE));_2.dragging=true;_2.nativeDragging=!!_1;_2.crossFrameDragging=false;if(_2.nativeDragging&&_2.delayedMouseMoveTimer!=null){isc.Timer.clear(_2.delayedMouseMoveTimer);_2.delayedMouseMoveTimer=null}
this.logInfo("Started dragOperation: "+_2.dragOperation+" with dragTarget: "+_2.dragTarget+" dragAppearance: "+_2.dragAppearance,"dragDrop");return true},isc.A.$lm=function isc_c_EventHandler__showTargetDragShadow(){var _1=isc.EH;var _2=_1.dragTarget;_1.$lr=(!_2.showShadow);_1.$ls=_2.shadowDepth;_2.shadowDepth=_1.dragTargetShadowDepth;_2.updateShadow();if(!_2.showShadow)_2.setShowShadow(true)},isc.A.$lt=function isc_c_EventHandler__hideTargetDragShadow(){var _1=isc.EH;var _2=_1.dragTarget;if(_1.$lr)_2.setShowShadow(false);_2.shadowDepth=_1.$ls;_2.updateShadow();delete _1.$lr;delete _1.$ls},isc.A.$ln=function isc_c_EventHandler__setTargetDragOpacity(){var _1=isc.EH;var _2=_1.dragTarget;_1.$lu=_2.opacity;_2.setOpacity(_2.dragOpacity)},isc.A.$lv=function isc_c_EventHandler__resetTargetDragOpacity(){var _1=isc.EH,_2=_1.dragTarget;_2.setOpacity(_1.$lw)},isc.A.$lp=function isc_c_EventHandler__showBackMask(_1){if(_1._backMask){if(!_1._backMask.isVisible())_1._backMask.show()}else{_1.makeBackMask({$lx:true})}},isc.A.$ly=function isc_c_EventHandler__hideBackMask(_1){if(_1._backMask&&_1._backMask.$lx&&_1._backMask.isVisible())
{_1._backMask.hide()}},isc.A.$lz=function isc_c_EventHandler__getDragMoveComponents(){var _1=this.dragMoveTarget;if(!_1)return;var _2=[_1];if(_1._backMask)_2.add(_1._backMask);if(_1.$l0)_2.add(_1.$l0);if(_1._shadow)_2.add(_1._shadow);return _2},isc.A.$l1=function isc_c_EventHandler__getDragMoveEventName(_1){var _2=this.$ji;if(!_2[_1]){_2[_1]=_1+"Move"}
return _2[_1]},isc.A.handleDragMove=function isc_c_EventHandler_handleDragMove(){var _1=this,_2=_1.lastEvent;isc.$54j=true;_1.dropTarget=_1.getDropTarget(_2);isc.$54j=false;if(_1.$lq&&_1.dynamicBackMask){var _3=false;var _4=_1.dragMoveTarget?_1.dragMoveTarget:_1.dragTarget;var _5=_4.getRect();for(var i=0;i<_1.$lq.length;i++){var _7=_1.$lq[i];if(isc.Canvas.rectsIntersect(_7.rect,_5))
{_1.$l2=_7.instance;_3=true;break}}
if(_1.$l2){if(_1.$l2.repaintIfRequired)_1.$l2.repaintIfRequired()}
if(_3){this.$lp(_4)}else{this.$ly(_4);delete _1.$l2}}else if(isc.BrowserPlugin){isc.BrowserPlugin.handleDragMoveNotify()}
if(_1.dragMoveAction)_1.dragMoveAction();if(_1.handleEvent(_1.dragTarget,this.$l1(_1.dragOperation))==false){delete _1.dropTarget;return false}
if(_1.dropTarget!=_1.lastDropTarget){this.logDebug("New drop target: "+_1.dropTarget,"dragDrop");if(_1.lastDropTarget){_1.handleEvent(_1.lastDropTarget,_1.DROP_OUT)}
if(_1.dropTarget){_1.handleEvent(_1.dropTarget,_1.DROP_OVER)}
_1.lastDropTarget=_1.dropTarget}
if(_1.dropTarget){_1.handleEvent(_1.dropTarget,_1.DROP_MOVE)}
isc.$54j=true;this.$l3();isc.$54j=false;if(this.dragOperation==_1.DRAG_SELECT)return true;return false},isc.A.$l3=function isc_c_EventHandler__handleDragScroll(){var _1=this,_2=_1.dragTarget;if(_1.dragOperation==_1.DRAG_SCROLL)return;var _3=[];var _4=(_1.dragOperation==_1.DRAG_SELECT)||_2.dragScrollType=="parentsOnly"?_2.getParentElements():isc.Canvas._canvasList;;if(_1.dragOperation==_1.DRAG_SELECT)_4.addAt(_2,0);if(_4==null||_4.length==0)return;for(var i=0;i<_4.length;i++){if(_4[i].isDrawn()&&_4[i].isVisible()&&_4[i].shouldDragScroll()){_3.add(_4[i])}}
var _6=_1.lastEvent,_7=_6.x,_8=_6.y,_9=[];for(var i=0;i<_3.length;i++){if(_3[i].visibleAtPoint(_7,_8,false,_1.$lz()))
_9.add(_3[i])}
if(_9.length>0){var _10;for(var i=0;i<_9.length;i++){if(_9[i].$l4(_2.dragScrollDirection)){if(_10==null||_10.contains(_9[i],true))
_10=_9[i]}}
if(_10!=null){_10.$l5(_2.dragScrollDirection,_1.dragOperation==_1.DRAG_SELECT)}}},isc.A.handleDragStop=function isc_c_EventHandler_handleDragStop(){var _1=this,_2=_1.lastEvent,_3=false;_1.wasNativeDragging=_1.nativeDragging;_1.crossFrameDragging=_1.nativeDragging=_1.dragging=false;this.logInfo("end of drag interaction","dragDrop");_1.dragOffsetX=_1.dragOffsetY=0;var _4=_1.dragTarget,_5=_1.dragMoveTarget,_6=_1.dragOperation;if(_5&&(_5==_1.dragTracker||_5==_1.dragOutline))
{_5.hide()}else{if(_4.showDragShadow)_1.$lt();if(_4.dragOpacity!=null)_1.$lv()}
if(this.dragTracker&&this.dragTracker.$l6){this.dragTracker.destroy();delete this.dragTracker}
var _7=_1.dragMoveTarget?_1.dragMoveTarget:_1.dragTarget;this.$ly(_7);if(_1.$lq)delete _1.$lq;var _8=_1.dropTarget;if(_8){_1.handleEvent(_1.dropTarget,_1.DROP_OUT);if(_8.willAcceptDrop())_1.handleEvent(_8,_1.DROP);_3=true}
var _9=(_4==_5);if(_1.handleEvent(_4,_6+"Stop")!=false){_3=true;if(_6==_1.DRAG_RESIZE){if(!_9){if(_5!=null&&this.dragAppearance!=this.TRACKER){_4.setPageRect(_5.getPageLeft(),_5.getPageTop(),_5.getWidth(),_5.getHeight(),true)}else{var _10=isc.EH.resizeEdge;if(_10!=null){var X=isc.EH.getX(),Y=isc.EH.getY(),_13=_10.contains("L")?X-_1.dragTargetStartRect[0]:0,_14=_10.contains("T")?Y-_1.dragTargetStartRect[1]:0;_4.setPageRect(_10.contains("L")?X:_1.dragTargetStartRect[0],_10.contains("T")?Y:_1.dragTargetStartRect[1],_10.contains("R")?X-_4.getPageLeft():_1.dragTargetStartRect[2]-_13,_10.contains("B")?isc.EH.getY()-_4.getPageTop():_1.dragTargetStartRect[3]-_14,true)}}}
var _15=_4.getVisibleWidth()-_1.dragTargetStartRect[2],_16=_4.getVisibleHeight()-_1.dragTargetStartRect[3];_4.dragResized(_15,_16)}else if(_6==_1.DRAG_REPOSITION){if(!_9){if(_5!=null){_4.setPageRect(_5.getPageLeft(),_5.getPageTop())}else{_4.setPageRect(isc.EH.getX(),isc.EH.getY())}
_4.bringToFront()}
_1.dragTarget.dragRepositioned()}}else{if(_6==_1.DRAG_RESIZE){if(_9){_4.setRect(_1.dragTargetStartRect)}}else if(_1.dragOperation==_1.DRAG_REPOSITION){if(_9){_4.moveTo(_1.dragTargetStartRect[0],_1.dragTargetStartRect[1])}}}
_1.clearDragProperties();_1.hideEventMasks();if(_1.$94y!=_1.$94w.TOUCH_ENDING){var _17=_1.lastEvent.target;if(_17)_1.handleEvent(_17,_1.MOUSE_OVER);_1.lastMoveTarget=_17}
return _3},isc.A.getEventTargetCanvas=function isc_c_EventHandler_getEventTargetCanvas(_1,_2,_3){if(_1==null)_1={};var _4=this,_5=this.getWindow();if(!_2)_2=(isc.Browser.isIE?_1.srcElement:_1.target);if(!_4.$l7(_2)){return _4.lastTarget}
if(_1&&_1.$49s)return _1.target;if(!_2||_2.tagName==this.$jj||_2.tagName==this.$jk){return(_4.lastTarget=null)}
if(_2&&_2.tagName&&_2.tagName==this.$49r){var _6=isc.Applet?isc.Applet.idForName(_2.name):null;return _6?window[_6]:_4.lastTarget}
if(isc.Browser.isIE&&_2.parentElement==null){_2=_4.lastTarget}else{var _7=this.$jl,_8=this.$945,_9=null,_10=null,_11=null;if(isc.Browser.isIE&&!isc.Browser.isIE9){while(_2!=null){if(_3!=null&&_10==null&&_2[_8]!=null){_9=_2;_10=_2.eventpart;_11=_2.id}
if(_2.eventProxy)break;_2=_2.parentElement}
if(_11==isc.emptyString)_11=null}else{while(_2!=null){var _12=(_2.hasAttribute!=null);if(_3!=null&&_10==null&&(_2.eventpart!=null||(_12&&_2.hasAttribute(_8))))
{_9=_2;_10=_2.getAttribute(_8);_11=_2.getAttribute("id")}
if(_2.eventProxy!=null||(_2.hasAttribute!=null&&_2.hasAttribute(_7)))break;_2=_2.parentNode}}
if(_3&&_2!=null){_3.eventPart=_10;_3.eventPartElement=_9;_3.eventPartID=_11}
if(!_2)return(_4.lastTarget=null);_2=_5[_2.getAttribute(_7)];while(_2&&_2.eventProxy){if(isc.isA.String(_2.eventProxy)){_2.eventProxy=_5[_2.eventProxy]}
_2=_2.eventProxy}
if(this.logIsInfoEnabled()&&!_1||(_1.type!="mousemove"&&_1.type!="selectstart"))
{if(_2!=null){this.logInfo("Target Canvas for event '"+_1.type+"': "+_2)}else{this.logDebug("No target Canvas for event '"+_1.type+"'")}}
if(_2==_4.dragTracker){_2=_4.lastTarget}
_4.lastTarget=_2}
if(isc.isA.Canvas(_2)){if(_3&&_2.getEventTarget){_2=_2.getEventTarget(_3)}
return _2}
return null},isc.A.$l7=function isc_c_EventHandler__canAccessNativeTargetProperties(_1){try{if(!(isc.Browser.isMoz&&_1==this.$jm))return true;_1.parentNode}catch(e){return false}
return true},isc.A.getDropTarget=function isc_c_EventHandler_getDropTarget(_1){var _2=this;if(!_2.dragTarget||!_2.dragTarget.canDrop||_2.dragOperation==_2.DRAG_RESIZE)return null;var _3=(_2.dragMoveTarget||_2.dragTarget),_4=_2.$i0,_5=[],i=0,_7=_4.length,_8=(_3.getDragAppearance(_2.dragOperation)!=isc.EH.TARGET);if(_3.dragIntersectStyle==_2.INTERSECT_WITH_MOUSE){if((_1.target!=this.mouseDownTarget()||(isc.Browser.isIE||(isc.Browser.isSafari&&!isc.Browser.isTouch)||(isc.Browser.isMoz&&isc.Browser.geckoVersion>20040616&&!this.mouseDownTarget().$ks))))
{var _9=_1.target;while(_9&&_9.dropTarget)_9=_9.dropTarget;if((_8||_9!=_3)&&(_4.contains(_9)))
{return _9}}
for(;i<_7;i++){var _10=_4[i];if(_10.canAcceptDrop&&!_10.isDisabled()&&(_10.visibleAtPoint(_1.x,_1.y,false,_2.$lz()))&&(_8||!_3.contains(_10,true)))
{_5.add(_10)}}}else{for(;i<_7;i++){var _10=_4[i];if(!_8&&_10==_3)continue;if(_10.intersects(_3)&&_10.canAcceptDrop&&!_10.isDisabled())
{_5.add(_10)}}}
if(_5.length<2)return _5[0];var _11=_5[0];for(var i=1;i<_5.length;i++){var _12=_5[i];if(_11.contains(_12,true)){_11=_12}else if(_3.dragIntersectStyle==_2.INTERSECT_WITH_RECT){var _13=null,_14=_11,_15=_12;while(_13==null){if(_14.parentElement==null){_13=true;_15=_12.topElement||_12}else if(_14.parentElement.contains(_12,true)){_13=_14.parentElement;while(_15.parentElement!=_13){_15=_15.parentElement}}else{_14=_14.parentElement}}
if(_15.getZIndex()>_14.getZIndex()){_11=_12}}}
return _11},isc.A.registerDroppableItem=function isc_c_EventHandler_registerDroppableItem(_1){if(!_1.$ma){this.$i0.add(_1);_1.$ma=true}},isc.A.unregisterDroppableItem=function isc_c_EventHandler_unregisterDroppableItem(_1){this.$i0.remove(_1);delete _1.$ma},isc.A.registerMaskableItem=function isc_c_EventHandler_registerMaskableItem(_1,_2){if(!this.$i1.contains(_1)&&(_1.$jr==null||!this.$i1.contains(_1.$jr))){this.$i1.add(_1);if(_1.dragMaskType=="iframe"){if(_2)this.makeEventFrame(_1,{eventProxy:_1})}else if(_1.dragMaskType=="hide"){}else if(_1.dragMaskType=="hidePlugin"){}else{if(_2)this.makeEventMask(_1,{eventProxy:_1})}}},isc.A.unregisterMaskableItem=function isc_c_EventHandler_unregisterMaskableItem(_1){this.$i1.remove(_1);if(_1._eventMask)_1._eventMask.destroy();delete _1._eventMask},isc.A.makeEventMask=function isc_c_EventHandler_makeEventMask(_1,_2,_3){if(isc.isA.Function(_1.makeEventMask))return _1.makeEventMask(_2,_3);var _4=this.$jn;if(!_4.contents)_4.contents=isc.Browser.isIE&&isc.Browser.version>6?isc.Canvas.blankImgHTML(3200,2400):isc.Canvas.spacerHTML(3200,2400);var _5=isc.Canvas.create({ID:_1.getID()+"_eventMask",cursor:_1.cursor,$jr:_1},_4,_2);_5.setRect(_3?_3:_1.getRect());_1._eventMask=_5;_1.addPeer(_5);return _5},isc.A.showEventMasks=function isc_c_EventHandler_showEventMasks(_1,_2){var _3=this,_4=_3.$i1;if(_1){if(!_3._eventMask)_3._eventMask=isc.ScreenSpan.create({ID:"isc_EH_eventMask",mouseDown:function(){this.hide()},pointersToThis:[{object:_3,property:"_eventMask"}]});_3._eventMask.show();_3._eventMask.bringToFront();if(isc.BrowserPlugin){_4.intersect(isc.BrowserPlugin.instances).map("$mb")}}else{for(var i=0;i<_4.length;i++){var _6=_4[i];if(_2&&_2[_6.getID()]){_6.$mc()}else{_6.$mb()}}}},isc.A.hideEventMasks=function isc_c_EventHandler_hideEventMasks(){var _1=this,_2=_1.$i1;if(_1._eventMask&&_1._eventMask.isVisible()){_1._eventMask.hide();if(isc.BrowserPlugin){_2.intersect(isc.BrowserPlugin.instances).map("$mc")}}else{for(var i=0;i<_2.length;i++){_2[i].$mc()}}},isc.A.eventHandledNatively=function isc_c_EventHandler_eventHandledNatively(_1,_2,_3){var _4=_1;if(!this.reverseEventTypes[_1]){if(this.$i2[_1])
_4=this.$i2[_1];else if(this.$i7[_1])
_4=this.$i7[_1]}
var _5=this.$md(_4,_2,_3);if(_5&&this.logIsDebugEnabled()&&_4!="mouseMove"){this.logDebug(_1+" event on "+(_3?" native target:"+_2:this.lastTarget)+" handled natively")}
return _5},isc.A.$md=function isc_c_EventHandler__eventHandledNatively(_1,_2,_3){_1=(_1||"");var _4=this,_5=_4.lastEvent;if(!_4.$l7(_2)){return true}
if(_2&&_2.tagName==this.$49r)return true;var _6=_4.isMouseEvent(_1),_7=_6?_5.target:_5.keyTarget;if(!_3&&_6&&_7==null)return true;if((this.logIsInfoEnabled()&&_1==_4.KEY_DOWN)||(this.logIsDebugEnabled()&&(_1==_4.KEY_UP||_1==_4.KEY_PRESS)))
{this.logInfo(_1+" event with Canvas target: "+this.lastEvent.keyTarget+", native target: "+this.echoLeaf(_2))}
if(_4.passThroughEvents&&_2){var _8=_2,_9=(_8.handleNativeEvents||(_8.getAttribute?_8.getAttribute(this.$jt):null)),_10=_8.tagName,_11;if(!_4.$me)_4.$me="false";if(_9==null){_11=(!_8.focusProxy&&((_8.form!=null&&_10!=_4.$i6)||_4.$i5[_10]!=null||(_8.isContentEditable&&!_8.getAttribute(this.$jl))));if(!_11&&(_1!=_4.MOUSE_WHEEL)&&(_1!=_4.MOUSE_MOVE)){while(_8&&_8.tagName!=_4.BODY_TAG&&_8.tagName!=this.$jk)
{if(_8.eventProxy!=null||(_8.hasAttribute!=null&&_8.hasAttribute(this.$jl)))break;if(_4.$i4[_8.tagName]!=null){var _12=(_8.handleNativeEvents||(_8.getAttribute?_8.getAttribute(this.$jt):null));if(_12!=null&&!isc.isA.emptyString(_12)){if(isc.isA.String(_12))
_12=(_12==isc.EH.$me?false:true)}
if(_12!=false){_11=true;break}}
_8=_8.parentNode}}}else{_11=_9;if(_11==_4.$me)_11=false}
if(_11){return true}else if(_9!=null){return false}}
if(!_3&&_6&&this.$mf(_7,_1,_5))
{return true}
return false},isc.A.isMouseEvent=function isc_c_EventHandler_isMouseEvent(_1){_1=_1||this.lastEvent.eventType;if(this.$mg==null){this.$mg={mouseOver:true,mouseover:true,mouseDown:true,mousedown:true,rightMouseDown:true,mouseMove:true,mousemove:true,mouseOut:true,mouseout:true,mouseUp:true,mouseup:true,DOMMouseScroll:true,mousewheel:true,mouseWheel:true,click:true,doubleClick:true,doubleclick:true,showContextMenu:true,showcontextmenu:true,selectStart:true,selectstart:true}}
if(this.$mg[_1]==true)return true;if(_1=="selectionChange"){return(this.lastEvent.keyName==null||this.lastEvent.keyName=="")}
if(_1=="contextMenu"||_1=="contextmenu"){return!this.lastEvent.keyboardContextMenu}
return false},isc.A.isKeyEvent=function isc_c_EventHandler_isKeyEvent(_1){_1=_1||this.lastEvent.eventType;if(this.$mh==null){this.$mh={};var _2=this.$mh;_2[this.KEY_DOWN]=true;_2[this.KEY_PRESS]=true;_2[this.KEY_UP]=true;var _3=this.$i7;for(var _4 in _3)_2[_4]=true}
if(this.$mh[_1]==true)return true;if(_1=="contextMenu"||_1=="contextmenu"){return!!this.lastEvent.keyboardContextMenu}
return false},isc.A.$mf=function isc_c_EventHandler__eventOverCSSScrollbar(_1,_2,_3){if(isc.Browser.isTouch)return false;var _4=this;if(!_1||_1.showCustomScrollbars||!(_1.vscrollOn||_1.hscrollOn))return false;var _5=isc.Element.getNativeScrollbarSize();if(_1.isRTL()){if((_1.vscrollOn&&(_3.x<_1.getPageLeft()+_5))||(_1.hscrollOn&&(_3.y>_1.getPageTop()+_1.getHeight()-_5)))
{if(_2==_4.MOUSE_DOWN)_4.$k0=true;return true}}else{if((_1.vscrollOn&&(_3.x>_1.getPageRight()-_5))||(_1.hscrollOn&&(_3.y>_1.getPageBottom()-_5)))
{if(_2==_4.MOUSE_DOWN)_4.$k0=true;return true}}
return false},isc.A.bubbleEvent=function isc_c_EventHandler_bubbleEvent(_1,_2,_3,_4){var _5=this,_6=_5.lastEvent;var _7=this.logIsDebugEnabled()&&!this.$ju[_2];var _8=this.isMouseEvent(_2);if(_8){if(_4==null){_4=this.targetIsMasked(_1,null)}
if(_4){if(_7){this.logDebug(_2+" on "+_1+" blocked by clickmask")}
return false}}
var _9=this.$mi(_2);var _10=null;while(_1){if(_1.destroyed)break;var _11=null;var _12=null;if(_1.mouseEventParent&&_2.startsWith("mouse")){_11=_1.mouseEventParent}else if(_1.keyEventParent&&_2.startsWith("key")){_11=_1.keyEventParent}else{_11=(_1.eventParent||_1.parentElement)}
if(_11&&_11.eventProxy)_11=_11.eventProxy;if(_1[_9]!=null){_12=_9}else if(_1[_2]!=null&&_1[_2]!=isc.Class.NO_OP&&!isc.is.emptyString(_1[_2])){_12=_2;if(isc.isA.String(_1[_2])){_1.convertToMethod(_2)}
if(_7){this.logDebug("Bubbling event '"+_2+"', target '"+_1+"' has handler: "+this.echoLeaf(_1[_2]))}}
if(_12!=null&&_1[_12]!=null){var _13;if(isc.DrawItem!=null&&isc.isA.DrawItem(_1)&&_12=="dragMove"){_13=_1[_12](_6,_3,_10)}else{_13=_1[_12](_6,_3)}
if(_13==false){if(_7){this.logDebug("Bubbling for event '"+_2+"' cancelled via false return value by target: "+_1)}
return false}
if(_13==_5.STOP_BUBBLING){if(_7){this.logDebug("Bubbling for event '"+_2+"' cancelled via STOP_BUBBLING return value by target: "+_1)}
return _5.STOP_BUBBLING}}
if(_1.bubbleEvents==false||(_1.bubbleMouseEvents==false&&_5.isMouseEvent(_2)))
{if(_7){this.logDebug("Bubbling for event '"+_2+"' stopped by '"+_1+"' which does not allow bubbling")}
return true}else if(isc.isAn.Array(_1.bubbleMouseEvents)){if(_1.bubbleMouseEvents.contains(_2)){if(_7){this.logDebug("Bubbling for event '"+_2+"' stopped by '"+_1+"' which does not allow bubbling")}
return true}}
_10=_1;_1=_11}
if(_7)this.logDebug("Event '"+_2+"' bubbled to top");return true});isc.evalBoundary;isc.B.push(isc.A.$mi=function isc_c_EventHandler__getInternalHandlerName(_1){if(!this.$jc[_1]){this.$jc[_1]="handle"+_1.charAt(0).toUpperCase()+_1.substring(1)}
return this.$jc[_1]},isc.A.hasEventHandler=function isc_c_EventHandler_hasEventHandler(_1,_2){if(!isc.isAn.Object(_1)||!isc.isA.String(_2)){isc.Log.logWarn("EventHandler.hasEventHandler() passed bad parameters ["+[_1,_2]+"]. returning null;","event");return null}
var _3=this.$mi(_2);if(this.getBubbledProperty(_1,_2,true,_3,true)!=null){return true}
return false},isc.A.getBubbledProperty=function isc_c_EventHandler_getBubbledProperty(_1,_2,_3,_4,_5){while(_1){var _6=_1[_2];if(_6&&(!_3||(_6!==this.NO_OP&&!isc.isAn.emptyString(_6))))
{return _6}
if(_4!=null){_6=_1[_4];if(_6&&(!_5||(_6!==this.NO_OP&&!isc.isAn.emptyString(_6))))
{return _6}}
_1=(_1.eventParent||_1.parentElement);if(_1&&_1.eventProxy)_1=_1.eventProxy}
return null},isc.A.handleSelectStart=function isc_c_EventHandler_handleSelectStart(){var _1=isc.EH;if(_1.$904)return true;var _2=_1.getWindow(),_3=_2.event?_2.event.srcElement:null,_4=_1.mouseDownEvent?_1.mouseDownEvent.nativeTarget:null;if(_3&&_4==_3&&_3.form&&!_1.dragging)
{return true}
if(isc.EH.$mj)return true;var _5=isc.EH.mouseIsDown()?_1.mouseDownTarget():null,_6=_1.getEventTargetCanvas(_2.event);var _7=(_1.dragging||_1.dragTarget)&&_1.dragOperation!=_1.DRAG_SELECT;var _8=!_7&&(_5!=null?_5.$kr():true)&&(_6!=null?_6.$kr():true);if(_8)return true;return _1.killEvent()},isc.A.handleSelectionChange=function isc_c_EventHandler_handleSelectionChange(_1){if(!_1)_1=window.event;var _2=isc.EH;var _3=_2.lastEvent;var _4=isc.Element.$mk(document);if(_4){var _5=_2.getEventTargetCanvas(_1,_4);_3.nativeKeyTarget=_4
_3.keyTarget=_5;_3.eventType=this.$41z;if(_5){_5.keyTarget=_5;_2.bubbleEvent(_3.keyTarget,"selectionChange")}}
return true},isc.A.handleNativeHelp=function isc_c_EventHandler_handleNativeHelp(){if(this.$69a){if(this.$69a()==false)return false}
if(this.$69b){if(this.$69b()==false)return false}
return isc.EH.$j9(window.event,true)},isc.A.setDragTrackerImage=function isc_c_EventHandler_setDragTrackerImage(_1,_2,_3){var _4=this.lastEvent,_5,_6;if(!isc.Browser.hasNativeDrag||_4==null||(_5=_4.DOMevent)==null||(_6=_5.dataTransfer)==null||_6.setDragImage==null||_5.type!=this.$119u||!this.dragTarget)
{return}
if(isc.Browser.isSafari&&!isc.Browser.isChrome)return;var _7=document.createElement("img");_7.src=this.dragTarget.getImgURL(_1==null?isc.Canvas.$wz:_1);_2=_2<<0;_3=_3<<0;_6.setDragImage(_7,_2,_3)},isc.A.encodeDragType=function isc_c_EventHandler_encodeDragType(_1){if(!_1)return this.$120k+this.$120l.toString(36);var _2=isc.SB.create(),_3=0,_4;_2.append(this.$120k,this.$120l.toString(36));for(var i=0,_4=_1.length;i<_4;){var _6=_1.charCodeAt(i++),_7=_6,_8=i;if(0xD800<=_6&&_6<=0xDBFF){var _9=_1.charCodeAt(i++);_7=((_6-0xD800)*0x400)+(_9-0xDC00)+0x10000}
if((0x30<=_7&&_7<=0x39)||(0x61<=_7&&_7<=0x7A))
{continue}
_2.append(_1.substring(_3,_8-1),'_',_7.toString(16),'_');_3=i}
_2.append(_1.substring(_3,_4));return _2.release()},isc.A.decodeDragDataItemTypeString=function isc_c_EventHandler_decodeDragDataItemTypeString(_1){if(!_1)return null;_1=_1.toLowerCase();if(_1.startsWith(this.$120p)){var _2=this.$120m,_3=[];var _4=0,_5=0;for(var i=this.$120p.length;i<_1.length;++i){var _7=_2[_1[i]];_7<<=3;_5|=_7>>>_4;_4+=5;if(_4>=8){_3.add(_5&255);_4-=8;if(_4>0)_5=(_7<<(5-_4))&255;else _5=0}}
_1=String.fromCharCode.apply(String,_3);var _8=_1.indexOf(this.$120k);if(_8<0)return null;var _9=_1.indexOf(':',_8+this.$120k.length);if(_9<0)_9=_1.length;_1=_1.substring(_8,_9)}else if(!_1.startsWith(this.$120k)){return null}
var _10=_1.substring(this.$120k.length),_11;if(!_10||(_11=parseInt(_10[0],36))>this.$120l)
{return null}
var _12=isc.SB.create();if(0==_11){var _13=0;for(var _14=_10.indexOf('_');_14>=0;_14=_10.indexOf('_',_13+1)){_12.append(_10.substring(_13+1,_14));_13=_10.indexOf('_',_14+1);if(_13<0)return null;var _15=parseInt(_10.substring(_14+1),16);if(isNaN(_15))continue;if(_15>=0x10000){var d=_15-0x10000,_17=(d>>10)+0xD800,_18=(d&0x3FF)+0xDC00;_12.append(String.fromCharCode(_17,_18))}else{if(0xD800<=_15&&_15<=0xDFFF)return null;_12.append(String.fromCharCode(_15))}}
_12.append(_10.substring(_13+1))}
return _12.release()},isc.A.$120q=function isc_c_EventHandler__getEncodedDragType(_1){var _2;if(_1==null||(_2=_1.types)==null)return null;var _3=_2.length;for(var i=0;i<_3;++i){var _5=_2[i];if(_5&&_5.startsWith(this.$120k)){return _5}}
for(var i=0;i<_3;++i){var _5=_2[i];if(_5&&_5.startsWith(this.$120p)){var _6=this.decodeDragDataItemTypeString(_5);if(_6!=null)return _5}}
return null},isc.A.$120r=function isc_c_EventHandler__getDragType(_1){var _2=this.$120q(_1);if(_2==null)return null;return this.decodeDragDataItemTypeString(_2)},isc.A.getNativeDragData=function isc_c_EventHandler_getNativeDragData(){var _1=this.lastEvent,_2;if(!isc.Browser.hasNativeDrag||_1==null||(_2=_1.DOMevent)==null||_2.dataTransfer==null||_2.type!=this.$119s)
{return null}
var _3=_2.dataTransfer,_4;if(isc.Browser.isIE){_4=_3.getData("Text")}else{var _5=this.$120q(_3);if(_5==null)return null;_4=_3.getData(_5)}
var _6=null;try{if(_4!=null)_6=isc.JSON.decode(_4)}catch(e){this.logWarn("Failed to decode as JSON: "+e)}
return _6==null?null:_6.data},isc.A.setNativeDragData=function isc_c_EventHandler_setNativeDragData(_1,_2,_3){var _4=this.lastEvent,_5;if(!isc.Browser.hasNativeDrag||_4==null||(_5=_4.DOMevent)==null||_5.dataTransfer==null||_5.type!=this.$119u||!this.dragTarget)
{return}
if(_3==null)_3=this.dragTarget.dragType;if(isc.$119x==null)isc.$119x=isc.Math.randomUUID();var _6={iscVersion:isc.version,iscVersionNumber:isc.versionNumber,windowUUID:isc.$119x,dragType:_3,data:_1};var _7=isc.JSON.encode(_6,this.$119t);var _8=_4.DOMevent.dataTransfer;if(isc.Browser.isIE){_8.setData("Text",_7)}else{_8.setData(this.encodeDragType(_3),_7);if(_2==null||(_2=String(_2).trim()).length==0)_2="\u00A0";_8.setData("Text",_2)}},isc.A.handleNativeDragStart=function isc_c_EventHandler_handleNativeDragStart(_1){if(isc.Browser.hasNativeDrag&&_1.dataTransfer){var _2=isc.EH,_3=_1.dataTransfer,_4=_2.getMouseEventProperties(_1),_5=_4.target;if(_5!=null&&(_5=_5.$120v())!=null){_4.target=_5;if(!_5.useNativeDrag)return false;if(isc.Browser.isIE){if(_5.dragType==null){this.logWarn("No dragType string is set on "+_5.getID()+". Canceling native drag...");return false}
var _6=isc.Canvas.getCrossFrameDragByDragType&&isc.Canvas.getCrossFrameDragByDragType(_5.dragType);if(_6==null){this.logWarn("No cross-frame drag settings have been registered for dragType:'"+_5.dragType+"'. Canvas.registerCrossFrameDrags() must be called to register cross-frame drag settings for this dragType. Canceling native drag...");return false}
_3.effectAllowed=_2.$120c[_6.effectAllowed]}else{_3.effectAllowed="copy"}
if(!(isc.isA.DataBoundComponent&&isc.isA.DataBoundComponent(_5))){_2.setNativeDragData(null,null,_5.dragType)}else{_2.setNativeDragData(_5.cloneDragData(),null,_5.dragType)}
_2.dragTarget=_5;_2.dragOperation="drag";var _7=_2.handleDragStart(true);_2.handleDragMove();return _7}}
if(isc.EH.dragTarget)return false;var _5=isc.EH.mouseDownTarget();if(_5)return!!(_5.$kr());if(this.$ml)return this.$ml();if(this.$mm)return this.$mm()},isc.A.$119y=function isc_c_EventHandler__setCrossFrameDragCleanupTimer(){var _1=this;if(_1.$119z!=null)isc.Timer.clear(_1.$119z);_1.$119z=isc.Timer.setTimeout(_1.$1190,_1.$119v)},isc.A.$1190=function isc_c_EventHandler__crossFrameDragCleanupAction(){var _1=isc.EH;delete _1.$119z;if(_1.crossFrameDragging){_1.artificialDragTarget.dragType=null;_1.$1191(_1.lastEvent.DOMevent)}else if(_1.nativeDragging){if(_1.dragMoveTarget)_1.dragMoveTarget.hide()}},isc.A.$1192=function isc_c_EventHandler__handleNativeDragOver(_1){var _2=_1.dataTransfer,_3=_2.dropEffect,_4=isc.EH;if(_2.files!=null&&_2.files.length>0)return;var _5=_2.types,_6=false;if(_5!=null){for(var _7=_5.length;_7>0;--_7){if(_5[_7-1]=="Files"){_6=true;break}}}
if(!_6)_2.dropEffect=_4.$27r;var _8;if(isc.Browser.isIE){try{_8=_4.$120c[_2.effectAllowed]}catch(e){_8=_3}}else{_8=_2.effectAllowed}
if(!_4.nativeDragging){var _9=null;if(isc.Browser.isIE){var _10=isc.Canvas.getCrossFrameDragByEffectAllowed(_8);if(_10==null){return}
_9=_10.dragType}else{_9=this.$120r(_2);if(_9==null)return}
_2.dropEffect=_4.$27r;if(_4.artificialDragTarget)_4.artificialDragTarget.destroy();var _11=_4.artificialDragTargetConstructor||_4.artificialDragTargetDefaults._constructor;_4.dragTarget=_4.artificialDragTarget=isc[_11].create({autoDraw:false,_generated:true},_4.artificialDragTargetDefaults,_4.artificialDragTargetProperties,{left:_1.pageX,top:_1.pageY,dragType:_9});var _12=_4.getMouseEventProperties(_1);_12.target=_4.dragTarget;_4.dragOperation="drag";_4.$j6=true;_4.mouseDownEvent=isc.addProperties({},_12);_4.handleDragStart(true);_4.crossFrameDragging=true;if(_4.$1197)_4.$119y()}else{if(_4.$1197)_4.$119y();_2.dropEffect=_4.$27r;var _13=_4.lastEvent;if(_13!=null&&_13.screenX==_1.screenX&&_13.screenY==_1.screenY)
{if(_13.$1193===false){_2.dropEffect=_4.$119w[_8]}
return _13.$1193}}
_4.handleMouseMove(_1);var _14,_15=_4.dropTarget;if(_15&&_15.canAcceptDrop&&_15.willAcceptDrop()){_14=false;_2.dropEffect=_4.$119w[_8]}
_4.lastEvent.$1193=_14;return _14},isc.A.$1199=function isc_c_EventHandler__handleNativeDragEnter(_1){var _2=isc.EH;_2.$1198=(_1.srcElement||_1.target);if(isc.Browser.isIE){_2.handleMouseMove(_1);var _3;if(_2.dropTarget&&_2.dropTarget.canAcceptDrop&&_2.dropTarget.willAcceptDrop()){if(_1.preventDefault)_1.preventDefault();_3=false}
_2.lastEvent.$1193=_3;return _3}},isc.A.$120a=function isc_c_EventHandler__handleNativeDragLeave(_1){var _2=isc.EH;if(_2.$1198==(_1.srcElement||_1.target)){_2.$1198=null;if(!_2.$1197){if(_2.crossFrameDragging){_2.artificialDragTarget.dragType=null;_2.$1191(_1)}else if(_2.nativeDragging){if(_2.dragMoveTarget)_2.dragMoveTarget.hide()}}}},isc.A.$1191=function isc_c_EventHandler__handleNativeDragEnd(_1){var _2=isc.EH;_2.handleMouseUp(_1)},isc.A.$1194=function isc_c_EventHandler__handleNativeDrop(_1){var _2=isc.EH,_3=_2.nativeDragging;_2.handleMouseUp(_1);if(_3)return false},isc.A.$139z=function isc_c_EventHandler__handleTransitionEnd(_1){var _2=isc.EH;var _3={DOMevent:_1,eventType:_2.TRANSITION_END,nativeTarget:_1.target,prefixedPropertyName:_1.propertyName,elapsedTime:_1.elapsedTime};if(_1.propertyName!=null&&_1.propertyName.startsWith(isc.Element.vendorCSSPrefix)){_3.propertyName=_1.propertyName.substring(isc.Element.vendorCSSPrefix.length)}
var _4=_3.target=_2.getEventTargetCanvas(_1,_3.nativeTarget,_3);return _2.handleEvent(_4,_2.TRANSITION_END,_3)},isc.A.handleResize=function isc_c_EventHandler_handleResize(_1){if(isc.EH.resizeTimer==null){isc.EH.resizeTimer=isc.Timer.setTimeout("isc.EH.$hr()",0)}
return true},isc.A.handleOrientationChange=function isc_c_EventHandler_handleOrientationChange(_1){this.$78p()},isc.A.$mn=function isc_c_EventHandler__pageResizePollMethod(){isc.EH.$hr(true)},isc.A.$hr=function isc_c_EventHandler__pageResize(_1){isc.EH.resizeTimer=null;var _2=isc.Page.getOrientation();if(!_1){this.$mo=isc.Page.getWidth(window,true);this.$mp=isc.Page.getHeight(window,true);if(this.resizingPollTimer!=null)isc.Timer.clearTimeout(this.resizingPollTimer);this.resizingPollTimer=isc.Timer.setTimeout(this.$mn,100)}else{var _3=isc.Page.getWidth(window,true),_4=isc.Page.getHeight(window,true),_5=(_2==this.currentOrientation)&&(_3==this.$mo&&_4==this.$mp)
if(isc.Page.pollPageSize){isc.Page.setEvent(isc.EH.IDLE,this.$mn,isc.Page.FIRE_ONCE)}
if(_5)return;this.$mo=_3;this.$mp=_4}
this.$78p(_2)},isc.A.$78p=function isc_c_EventHandler__fireResizeEvent(_1){isc.Page.handleEvent(null,isc.EH.RESIZE);var _2=isc.Page.getWidth();if(_2==this.$118t)return;if(_1==null)_1=isc.Page.getOrientation();if(_1!=this.currentOrientation){this.$118t=_2;this.currentOrientation=_1;isc.Page.handleEvent(null,isc.EH.ORIENTATION_CHANGE)}},isc.A.handleMouseWheel=function isc_c_EventHandler_handleMouseWheel(_1){var _2=isc.EH;if(!_1)_1=_2.getWindow().event;var _3=(_1.srcElement||_1.target);if(_2.eventHandledNatively(_1.type,_3))return _2.$js;_2.getMouseEventProperties(_1);var _4=_2.lastEvent.target;var _5;if(_2.targetIsEnabled(_4)){_5=_2.bubbleEvent(_4,_2.eventTypes.MOUSE_WHEEL)}
if(_5==false){if(_1.preventDefault)_1.preventDefault();return false}
return true},isc.A.getWheelDelta=function isc_c_EventHandler_getWheelDelta(_1){return(_1||this.lastEvent).wheelDelta},isc.A.getWheelDelta=function isc_c_EventHandler_getWheelDelta(_1){return(_1||this.lastEvent).wheelDelta},isc.A.getWheelDelta=function isc_c_EventHandler_getWheelDelta(_1){return(_1||this.lastEvent).wheelDelta},isc.A.handleDOMMouseScroll=function isc_c_EventHandler_handleDOMMouseScroll(_1){return isc.EH.handleMouseWheel(_1)},isc.A.handleScroll=function isc_c_EventHandler_handleScroll(_1){},isc.A.prepareForLinkDrag=function isc_c_EventHandler_prepareForLinkDrag(_1,_2){this.dragTarget=(isc.isA.String(_1)?this.getWindow()[_1]:_1);this.dragTargetLink=_2;return false},isc.A.setDragTracker=function isc_c_EventHandler_setDragTracker(_1,_2,_3,_4,_5,_6){var _7=this.$lk(_6);_2=_2||10;_3=_3||10;_7.resizeTo(_2,_3);_7.setContents(_1);_7.redrawIfDirty("setDragTracker");if(_4)_7.offsetX=_4;if(_5)_7.offsetY=_5;_7.$l6=true},isc.A.$lk=function isc_c_EventHandler__makeDragTracker(_1){if(!this.dragTracker){var _2=this.dragTrackerDefaults;_2.contents=isc.Canvas.imgHTML("[SKIN]black.gif",10,10);this.dragTracker=isc.Canvas.create(_2,_1)}else if(_1!=null)this.dragTracker.setProperties(_1);return this.dragTracker},isc.A.getDragOutline=function isc_c_EventHandler_getDragOutline(_1,_2,_3){if(!this.dragOutline){this.dragOutline=isc.Canvas.create({autoDraw:false,overflow:isc.Canvas.HIDDEN})
if(isc.Browser.isIE)this.dragOutline.setContents(isc.Canvas.spacerHTML(3200,2400))}
var _4=this.dragOutline;if(isc.Element.getStyleDeclaration(_1.dragOutlineStyle)){_4.setStyleName(_1.dragOutlineStyle)}else{_4.setBorder((_2||1)+"px solid "+(_3||"black"))}
_4.setPageRect(_1.getPageLeft(),_1.getPageTop(),_1.getVisibleWidth(),_1.getVisibleHeight());_4.minWidth=_1.minWidth;_4.minHeight=_1.minHeight;_4.maxWidth=_1.maxWidth;_4.maxHeight=_1.maxHeight;_4.keepInParentRect=_1.keepInParentRect;return _4},isc.A.getDragRect=function isc_c_EventHandler_getDragRect(){var _1=this.dragMoveTarget||this.dragTarget;if(!_1)return null;return _1.getPageRect()},isc.A.$ll=function isc_c_EventHandler__moveDragMoveTarget(){var _1=this;var _2=_1.dragMoveTarget;if(!_2)return true;var _3=(isc.Browser.isMoz&&isc.Browser.geckoVersion<20031007&&!_2.keepInParentRect);if(_3&&(_2.parentElement&&!_2.parentElement.containsPoint(_1.lastEvent.x,_1.lastEvent.y)))
{return true}
isc.$54j=true;_2.moveToEvent(_1.dragOffsetX,_1.dragOffsetY);isc.$54j=false;_2.show();return true},isc.A.$mq=function isc_c_EventHandler__resizeDragMoveTarget(){var _1=this;if(_1.dragMoveTarget)_1.dragMoveTarget.resizeToEvent(_1.resizeEdge);return true},isc.A.killEvent=function isc_c_EventHandler_killEvent(){isc.EH.getWindow().event.cancelBubble=true;return false},isc.A.stopBubbling=function isc_c_EventHandler_stopBubbling(){return isc.EH.STOP_BUBBLING},isc.A.startIdleTimer=function isc_c_EventHandler_startIdleTimer(){if(!isc.Page.isLoaded())return;if(!this.idleTimer){this.idleTimer=isc.Timer.setTimeout({target:isc.EH,methodName:this.$jv},this.IDLE_DELAY)}},isc.A.$jw=function isc_c_EventHandler__handleIdle(){this.idleTimer=null;var _1=isc.Page.handleEvent(null,this.IDLE);if(isc.Page.actionsArePendingForEvent(this.IDLE))this.startIdleTimer();return _1},isc.A.$h1=function isc_c_EventHandler__setThread(_1){var _2=_1+this.$jx++;if(this.$lc!=null)this.$90m=this.$lc;this.$lc=_2;if(isc.Log.logIsInfoEnabled("RpcTabTiming")){this.$117e=isc.timeStamp()}
if(this.$jx>9)this.$jx=0},isc.A.$h2=function isc_c_EventHandler__clearThread(){if(this.$mr!=null)this.runTeas();if(this.$90m){this.$lc==this.$90m;this.$90m=null}else{this.$lc=null}},isc.A.$ms=function isc_c_EventHandler__setThreadExitAction(_1){isc.Timer.setTimeout(_1,0);var _2=this.$mr;if(_2==null)_2=this.$mr=[];_2.add(_1)},isc.A.runTeas=function isc_c_EventHandler_runTeas(){this.$lc+="[E]";while(this.$mr!=null){var _1=this.$mr;this.$mr=null;if(this.logIsDebugEnabled()){this.logDebug("firing threadExitActions: "+this.echoAll(_1))}
for(var i=0;i<_1.length;i++){var _3=_1[i];if(isc.isA.String(_3))isc.eval(_3);else _3()}}},isc.A.dispatch=function isc_c_EventHandler_dispatch(_1,_2){if(isc.$611!=null){delete isc.$611}
if(isc.Browser.isIE)_2=this.getWindow().event;this.$h1(this.$jy[_2.type]||_2.type);if(isc.Log.supportsOnError){var _3=_1.call(this,_2)}else{try{var _3=_1.call(this,_2)}catch(e){isc.Log.$am(e);throw e;}}
this.$h2();if(_3!=false&&this.$j3[_2.type]){var _4=this.$j3[_2.type](_2);if(_4==false)_3=false}
return _3},isc.A.captureEvent=function isc_c_EventHandler_captureEvent(_1,_2,_3,_4){var _5=this.getWindow(),_6=this.$mt;var _7=isc.$aq(this.$j0,this.$j1);_7.$ch=_5;_7.$j2=_4;var _8;if(!_6){if(_1[_2]!=null){var _8=this.$j4[_2]||_2.substring(2);this.$j3[_8]=_1[_2]}
_1[_2]=_7}else{if(isc.Browser.isIE&&isc.Browser.version<11){_1.attachEvent(_2,_7)}else if(isc.Browser.isDOM){_8=this.$j4[_2]||_2.substring(2);_1.addEventListener(_8,_7,false)}else{this.logWarn("Unable to use event listeners in this browser");this.$mt=false;return this.captureEvent(_1,_2,_3,_4)}}
if(_1===_5.document){var _9=(!_6||isc.Browser.isIE)?_2:_8;this.$649[_9]=_7}},isc.A.captureEvents=function isc_c_EventHandler_captureEvents(_1){var _2=this;if(window.isc_useEventListeners!=null)_2.$mt=window.isc_useEventListeners;var _3=isc.makeReverseMap(_2.eventTypes);isc.addProperties(_2,{reverseEventTypes:_3});if(_1==null)_1=this.getWindow();var _4=_1.document;isc.Page.setEvent(_2.LOAD,isc.Page.finishedLoading);if(isc.Browser.isIE&&isc.Browser.version<11){_1.attachEvent("onload",_2.handleLoad)}else if(isc.Browser.isDOM&&!isc.Browser.isOpera){_1.addEventListener("load",_2.handleLoad,true)}else{this.captureEvent(_1,"onload",_2.LOAD,_2.handleLoad)}
if(!this.$j8()){this.captureEvent(_1,"onunload",_2.UNLOAD,_2.handleUnload)}
this.captureEvent(_1,"onresize",_2.RESIZE,_2.handleResize);this.captureEvent(_4,"onmousedown",_2.MOUSE_DOWN,_2.handleMouseDown);this.captureEvent(_4,"onmousemove",_2.MOUSE_MOVE,_2.handleMouseMove);this.captureEvent(_4,"onmouseup",_2.MOUSE_UP,_2.handleMouseUp);this.captureEvent(_4,"onclick",_2.CLICK,_2.handleNativeClick);this.captureEvent(_4,"ondblclick",_2.DOUBLE_CLICK,_2.handleNativeClick);this.captureEvent(_4,"onscroll","scroll",_2.handleScroll);this.captureEvent(_4,"onmousewheel",_2.MOUSE_WHEEL,_2.handleMouseWheel);if(isc.Browser.isMoz){_1.addEventListener("DOMMouseScroll",_2.handleDOMMouseScroll,true)}
this.captureEvent(_4,"onmouseout",_2.MOUSE_OUT,_2.handleNativeMouseOut);this.captureEvent(_4,"oncontextmenu",_2.SHOW_CONTEXT_MENU,_2.handleContextMenu);this.captureEvent(_4,"onselectstart",_2.SELECT_START,_2.handleSelectStart);this.captureEvent(_1,"onselectstart",_2.SELECT_START,_2.handleSelectStart);if(isc.Browser.isIE){this.captureEvent(_4,"onselectionchange",_2.SELECTION_CHANGE,_2.handleSelectionChange)}
if(_1.isc_captureKeyEvents!=false){this.captureEvent(_4,"onkeydown",_2.KEY_DOWN,_2.$j9);this.captureEvent(_4,"onkeypress",_2.KEY_PRESS,_2.$kd);this.captureEvent(_4,"onkeyup",_2.KEY_UP,_2.$kb)}
if(isc.Browser.hasNativeDrag||isc.Browser.isIE){this.$mm=_1.ondragstart;this.$ml=_4.ondragstart;_1.ondragstart=_4.ondragstart=null;this.captureEvent(_4,"ondragstart",_2.DRAG_START,_2.handleNativeDragStart)}
if(isc.Browser.hasNativeDrag){this.captureEvent(_4,"ondragend",_2.DRAG_STOP,_2.$1191);this.captureEvent(_4,"ondragenter",_2.DROP_OVER,_2.$1199);this.captureEvent(_4,"ondragover",_2.DROP_MOVE,_2.$1192);this.captureEvent(_4,"ondragleave",_2.DROP_OUT,_2.$120a);this.captureEvent(_4,"ondrop",_2.DROP,_2.$1194)}
if(isc.Browser.$139c){_4.addEventListener(isc.Browser.$139y,_2.$139z)}
if(isc.Browser.isIE){this.$69b=_1.onhelp;this.$69a=_4.onhelp;_4.onhelp=_1.onhelp=_2.handleNativeHelp}
if(isc.Browser.isTouch){this.$94y=_2.$94w.READY_FOR_TOUCH;this.captureEvent(_4,"ontouchstart",_2.TOUCH_START,_2.$77p);this.captureEvent(_4,"ontouchmove",_2.TOUCH_MOVE,_2.$77q);this.captureEvent(_4,"ontouchend",_2.TOUCH_END,_2.$77r);this.captureEvent(_4,"ontouchcancel",_2.TOUCH_CANCEL,_2.$86w)}else
if(navigator.pointerEnabled){this.captureEvent(_4,"onpointerdown",_2.POINTER_DOWN,_2.$149j);this.captureEvent(_4,"onpointermove",_2.POINTER_MOVE,_2.$149k);this.captureEvent(_4,"onpointerup",_2.POINTER_UP,_2.$149l);this.captureEvent(_4,"onpointercancel",_2.POINTER_CANCEL,_2.$149m)}
if(isc.Browser.isMobile){isc.Page.pollPageSize=true}
var _5=null;if(isc.Browser.isMoz)_5=isc.EH.$947;else if(isc.Browser.isIE)_5=isc.EH.$948;else if(isc.Browser.isSafari)_5=isc.EH.$95a;if(_5)isc.EH.addClassMethods({$90x:_5})},isc.A.$j8=function isc_c_EventHandler__useEventListenerForUnload(){return(isc.Browser.isSafari&&isc.Browser.safariVersion<=412)},isc.A.releaseEvents=function isc_c_EventHandler_releaseEvents(_1){var _2=this;if(_1==null)_1=this.getWindow();var _3=_1.document,_4=this.$649;for(var _5 in _4){if(!this.$mt){_3[_5]=null}else{if(isc.Browser.isIE&&isc.Browser.version<11){_3.detachEvent(_5,_4[_5])}else if(isc.Browser.isDOM){_3.removeEventListener(_5,_4[_5],false)}}}
if(isc.Browser.hasNativeDrag||isc.Browser.isIE){_3.ondragstart=_1.onhelp=null}
if(isc.Browser.isIE){_3.onhelp=_1.onhelp=null}
delete this.$649},isc.A.getLastEvent=function isc_c_EventHandler_getLastEvent(){return this.lastEvent},isc.A.getEventType=function isc_c_EventHandler_getEventType(_1){return(_1||this.lastEvent).eventType},isc.A.getTarget=function isc_c_EventHandler_getTarget(_1){return(_1||this.lastEvent).target},isc.A.getDragTarget=function isc_c_EventHandler_getDragTarget(){return this.dragTarget},isc.A.getX=function isc_c_EventHandler_getX(_1){return(_1||this.lastEvent).x},isc.A.getY=function isc_c_EventHandler_getY(_1){return(_1||this.lastEvent).y},isc.A.getScreenX=function isc_c_EventHandler_getScreenX(_1){return(_1||this.lastEvent).screenX},isc.A.getScreenY=function isc_c_EventHandler_getScreenY(_1){return(_1||this.lastEvent).screenY},isc.A.mouseIsDown=function isc_c_EventHandler_mouseIsDown(){return!!(this.$j6)},isc.A.mouseDownTarget=function isc_c_EventHandler_mouseDownTarget(){return(this.mouseDownEvent?this.mouseDownEvent.target:null)},isc.A.getButtonNum=function isc_c_EventHandler_getButtonNum(_1){return(_1||this.lastEvent).buttonNum},isc.A.leftButtonDown=function isc_c_EventHandler_leftButtonDown(_1){return((_1||this.lastEvent).buttonNum==1)},isc.A.rightButtonDown=function isc_c_EventHandler_rightButtonDown(_1){if(!_1)_1=this.lastEvent;return(_1.buttonNum==2)||(_1.button==2)||(isc.Browser.isMac&&_1.ctrlKey)||(isc.Browser.isOpera&&(_1.ctrlKey&&_1.shiftKey))||((isc.Browser.isSafari&&(isc.Browser.safariVersion<125))&&_1.altKey)},isc.A.useSyntheticRightButtonEvents=function isc_c_EventHandler_useSyntheticRightButtonEvents(){return isc.Browser.isOpera||(isc.Browser.isSafari&&(isc.Browser.safariVersion<125))},isc.A.getKeyEventCharacterValue=function isc_c_EventHandler_getKeyEventCharacterValue(_1){return(_1||this.lastEvent).characterValue},isc.A.getKeyEventCharacter=function isc_c_EventHandler_getKeyEventCharacter(_1){return String.fromCharCode(this.getKeyEventCharacterValue(_1))},isc.A.getKey=function isc_c_EventHandler_getKey(_1){return(_1||this.lastEvent).keyName||null},isc.A.getKeyName=function isc_c_EventHandler_getKeyName(_1){return this.getKey(_1)},isc.A.shiftKeyDown=function isc_c_EventHandler_shiftKeyDown(_1){return!!((_1||this.lastEvent).shiftKey)},isc.A.ctrlKeyDown=function isc_c_EventHandler_ctrlKeyDown(_1){return!!((_1||this.lastEvent).ctrlKey)},isc.A.altKeyDown=function isc_c_EventHandler_altKeyDown(_1){return!!((_1||this.lastEvent).altKey)},isc.A.metaKeyDown=function isc_c_EventHandler_metaKeyDown(_1){return!!((_1||this.lastEvent).metaKey)},isc.A.modifierKeyDown=function isc_c_EventHandler_modifierKeyDown(_1){if(isc.Browser.isMac)return!!((_1||this.lastEvent).metaKey);else return!!((_1||this.lastEvent).ctrlKey)},isc.A.getKeyEventProperties=function isc_c_EventHandler_getKeyEventProperties(_1){if(_1==null)_1=this.getWindow().event;var _2=this.lastEvent;_2.nativeKeyTarget=(_1.target||_1.srcElement);_2.keyTarget=this.$ke;if(isc.isA&&isc.DynamicForm&&isc.isA.DynamicForm(this.$ke)){var _3=isc.DynamicForm._getItemInfoFromElement(_2.nativeKeyTarget,_2.keyTarget);if(_3&&_3.item)_2.keyTarget=_3.item}
_2.eventType=this.getKeyEventType(_1.type);if(_2.eventType==this.KEY_PRESS){_2.characterValue=this.$mv(_1)}
var _4=this.determineEventKeyName(_1);if(_4!=null){_2.keyName=_4}else if(_2.eventType!=isc.EH.KEY_PRESS)delete _2.keyName;_2.nativeKeyCode=_1.keyCode;_2.shiftKey=(_1.shiftKey==true||(isc.Browser.isMoz&&_2.shiftKey));_2.ctrlKey=(_1.ctrlKey==true);_2.altKey=(_1.altKey==true);_2.metaKey=(_1.metaKey==true)},isc.A.getKeyEventType=function isc_c_EventHandler_getKeyEventType(_1){if(!_1)return;return this.$i7[_1]},isc.A.$mv=function isc_c_EventHandler__determineKeyEventCharacterValue(_1){if(isc.Browser.isIE)return(_1.keyCode||null);if(isc.Browser.isMoz){return(_1.which||null)}
return(_1.which||_1.keyCode||null)},isc.A.determineEventKeyName=function isc_c_EventHandler_determineEventKeyName(_1){if(_1==null)return;var _2=_1.keyCode,_3=_1.which,_4=isc.EH,_5=_4.getKeyEventType(_1.type),_6=this.getWindow().event;if(_1.type==this.$689)return this.$688;if(isc.Browser.isIE){if(_5==_4.KEY_DOWN||_5==_4.KEY_UP){return _4.$iz[_2]}
if(_5==_4.KEY_PRESS){var _7=_4.$85t[_4.$85t.length-1];if(_7!=null)return _7;var _8=_4.$ja[_2];if(!_8&&_6&&_6.ctrlKey){_8=isc.EH.$mw(_2)}
return _8}}else if(isc.Browser.isMoz){if(_5==_4.KEY_DOWN||_5==_4.KEY_UP){return _4.$iz[_2]}else if(_5==_4.KEY_PRESS){if(_3==0&&_2!=0)return _4.$iz[_2];var _7=_4.$85t[_4.$85t.length-1];if(_7!=null)return _7;if(_2==0){return _4.$ja[_3]}else{return _4.$iz[_3]}}}else if(isc.Browser.isSafari){if(_5==_4.KEY_DOWN||_5==_4.KEY_UP){return _4.$iz[_2]}
var _9=(_3!=null?_3:_2);if(_9!=null&&_9!=0){if(_6&&_6.ctrlKey){var _10=isc.EH.$ja[_9];if(_10==null){if((isc.Browser.isChrome&&isc.Browser.version<33)||(!isc.Browser.isChrome&&isc.Browser.version<6))
{if(_9==10)_10="Enter";else _10=isc.EH.$mw(_9)}else{_10=isc.EH.$mw(_9)}}
return _10}
var _10=isc.EH.$ja[_9];if(_10==null)_10=isc.EH.$jb[_9]
return _10}else if(_5==this.KEY_PRESS){return null}}else{var _9=_3;if(_9==null||(_9==0&&_2))_9=_2
if(_9!=null)return isc.EH.$ja[_9]}
isc.Log.logWarn("EventHandler.determineEventKeyName(): Unable to determine key for '"+_1.type+"' event. Returning null");return null});isc.evalBoundary;isc.B.push(isc.A.$mw=function isc_c_EventHandler__getKeyNameFromCtrlCharValue(_1){if(_1==30)return"6";if(_1==31)return"-";return String.fromCharCode(_1+64)},isc.A.clearKeyEventProperties=function isc_c_EventHandler_clearKeyEventProperties(_1){var _2=this.lastEvent;delete _2.eventType;delete _2.nativeKeyTarget;delete _2.characterValue;delete _2.keyName;delete _2.shiftKey;delete _2.ctrlKey;delete _2.altKey;delete _2.metaKey;this.$85t.remove(_1)},isc.A.canvasDestroyed=function isc_c_EventHandler_canvasDestroyed(_1){if(this.clickMaskUp())isc.EH.maskTarget(_1);if(_1.$rq)isc.Page.clearEvent(_1.$nx,_1.$rq);if(this.mouseDownEvent&&this.mouseDownEvent.target==_1)
this.mouseDownEvent.target=null;if(this.lastClickTarget==_1)this.lastClickTarget=null;if(this.lastEvent.target==_1)this.lastEvent.target=null;if(this.lastEvent.keyTarget==_1)this.lastEvent.keyTarget=null;if(this.$ke==_1)this.$ke=null;if(this.$k7==_1)this.$k7=null},isc.A.showClickMask=function isc_c_EventHandler_showClickMask(_1,_2,_3,_4){this.$118u=true;var _5;if(_2==true){_5=true;_2=isc.EH.SOFT}else if(_2==false||_2==null){_5=false;_2=isc.EH.HARD}else{_5=(_2!=isc.EH.HARD)}
if(_3==null)_3=[];else if(!isc.isAn.Array(_3))_3=[_3]
var _6=this,_7=_6.clickMaskRegistry,_8=_6.getFocusCanvas();if(this.logIsInfoEnabled("clickMask")){this.logInfo("showing click mask, action: "+_1+(_5?", autoHide true ":", autoHide false ")+(_4?", ID: "+_4:"")+", focusCanvas: "+_8,"clickMask")}
var _9=_6.lastMoveTarget;if(_9){delete _6.lastMoveTarget;_6.handleEvent(_9,_6.MOUSE_OUT)}
var _10={autoHide:_5,mode:_2,ID:(_4!=null?_4:"cm_"+_6.$j7++),$mx:{}};this.$my(_3,_10);var _11=_7.last();_7.add(_10);delete this.$118u;_10.clickAction=_1;if(_8!=null&&!_3.contains(_8)&&_8.$1196)
{_8.blur("showing clickMask");this.setMaskedFocusCanvas(_8,_10)}else if(_11!=null){this.setMaskedFocusCanvas(_11.$li,_10)}
var _12=this.isHardMask(_10);if(_12){var _13=isc.timeStamp();var _14;if(_7.length>1){var _15=false,_16=[];for(var i=_7.length-2;i>=0;i--){_16.add(_7[i]);if(this.isHardMask(_7[i])){_15=true;break}}
if(_15){for(var i=0;i<_16.length;i++){var _18=_16[i].$mx;if(_18){this.$mz(_18,_3,true,true)}}}else{_14=true;this.$mz(isc.Canvas._canvasList,_3,false,true)}}else{_14=true;this.$mz(isc.Canvas._canvasList,_3,false,true)}}
if(this.maskNativeTargets){if(_11==null){this.showScreenSpan(_10)}else if(_12){this.$m0(_10.$mx)}}
this.updateEventMasks();return _10.ID},isc.A.updateEventMasks=function isc_c_EventHandler_updateEventMasks(){var _1=this.clickMaskRegistry,_2=_1?_1[_1.length-1]:null;if(_2&&_2.autoHide){var _3={};isc.addProperties(_3,_2.$mx);this.showEventMasks(false,_3)}else{this.hideEventMasks()}},isc.A.$my=function isc_c_EventHandler__applyUnmaskedTargets(_1,_2){_1=this.$m1(_1,_2);for(var i=0;i<_1.length;i++){var _4=_1[i];if(_4==null)continue;_2.$mx[_4.getID()]=_4}},isc.A.$m1=function isc_c_EventHandler__getFullSetOfTargetsToUnmask(_1,_2){if(!_1||_1.length==0||!_2)return _1;for(var i=0;i<_1.length;i++)
_1[i]=this.$m2(_1[i]);var _4=_2.$mx;if(!_2.autoHide&&_1.length>0){var _5=_1.length;for(var i=0;i<_5;i++){var _6=_1[i];if(_6.topElement&&!_4[_6.topElement.getID()]&&!_1.contains(_6.topElement))
{this.logWarn("Attempting to unmask target canvas:"+_6.getID()+" with respect to a hard click mask. This is not a top level Canvas - all ancestors of this Canvas will also be unmasked.","clickMask");_1.add(_6.topElement)}}}
this.$m3(_1);this.$m4(_1);return _1},isc.A.$m4=function isc_c_EventHandler__combineDescendantsIntoList(_1){var _2=_1.length;for(var i=0;i<_2;i++){if(_1[i]==null)continue;this.$m5(_1[i],_1)}},isc.A.$m5=function isc_c_EventHandler__addDescendantsToList(_1,_2,_3){if(_3&&!_2.contains(_1))_2.add(_1);if(_1.children){for(var i=0;i<_1.children.length;i++){this.$m5(_1.children[i],_2,true)}}
if(isc.DynamicForm&&isc.CanvasItem&&isc.isA.DynamicForm(_1)){var _5=_1.getItems()||[];for(var i=0;i<_5.length;i++){if(_5[i].containerWidget==_1)continue;if(isc.isA.CanvasItem(_5[i])&&isc.isA.Canvas(_5[i].canvas)){this.$m5(_5[i].canvas,_2,true)}}}},isc.A.$m3=function isc_c_EventHandler__combineTopPeersIntoList(_1){for(var i=0,_3=_1.length;i<_3;i++){var t=_1[i];if(t.parentElement&&_1.contains(t.parentElement))continue;this.$m6(_1[i],_1)}},isc.A.$m6=function isc_c_EventHandler__addPeersToList(_1,_2,_3){if(_3&&!_2.contains(_1))_2.add(_1);var _4=_1.peers;if(_4){for(var i=0;i<_4.length;i++){this.$m6(_4[i],_2,true)}}
this.$m5(_1,_2)},isc.A.getClickMask=function isc_c_EventHandler_getClickMask(_1){var _2=this.clickMaskRegistry;if(isc.isAn.Object(_1)){return _2.contains(_1)?_1:null}
return _2.find(this.$cp,_1)},isc.A.changeClickMaskID=function isc_c_EventHandler_changeClickMaskID(_1,_2){var _3=this.getClickMask(_1);if(_3)_3.ID=_2},isc.A.isHardMask=function isc_c_EventHandler_isHardMask(_1){if(!isc.isAn.Object(_1))_1=this.getClickMask(_1);return _1==null?false:(_1.mode==isc.EH.HARD)},isc.A.getTopHardMask=function isc_c_EventHandler_getTopHardMask(){var _1=this.clickMaskRegistry;for(var i=_1.length-1;i>=0;i--){if(this.isHardMask(_1[i]))return _1[i]}
return null},isc.A.$mz=function isc_c_EventHandler__hardMaskTargets(_1,_2,_3,_4){if(!_1)return;if(_3){for(var _5 in _1){var _6=_1[_5];this.$m7(_6,_2,_4)}}else{for(var i=0;i<_1.length;i++){var _6=this.$m2(_1[i]);this.$m7(_6,_2,_4)}}},isc.A.$m7=function isc_c_EventHandler__hardMaskTarget(_1,_2,_3){if(!isc.isA.Canvas(_1)||_1.destroyed){isc.Log.logWarn("showClickMask - attempting to remove invalid object :"+isc.Log.echo(_1)+" from tab order","clickMask");return}
if(_2&&_2[_1.getID()])return;if(_1.isDrawn()){if(_1.getParentCanvas()==null){if(!_3&&this.$m8&&this.$m8.isDrawn()&&_1.getZIndex()>=this.$m8.getZIndex())
{this.logDebug("lowering zIndex of: "+_1,"clickMask");_1.setZIndex(isc.EH.$m8.getZIndex()-1)}}}
if(_1.accessKey!=null&&_1.isDrawn()){_1.$m9(null)}},isc.A.hideClickMask=function isc_c_EventHandler_hideClickMask(_1){if(this.logIsInfoEnabled("clickMask"))
this.logInfo("hideClickMask called with ID: "+_1,"clickMask");var _2=this.clickMaskRegistry;if(_2.length==0)return;if(_1==null){this.hideClickMask(_2[0].ID)
if(_2.length>0){this.hideClickMask()}else{this.logInfo("all clickmasks hidden","clickMask")}
return}
var _3=this.getClickMask(_1);if(_3==null)return;var _4=_2.indexOf(_3),_5=(_4==(_2.length-1)),_6=this.isHardMask(_3),_7=(_4>0?_2[_4-1]:null),_8,_9;if(this.logIsInfoEnabled("clickMask")){var _10="hiding clickMask ID: "+_1;if(_6)_10+="[autoHide:false]";else _10+="[autoHide:true]";if(_2.length<2){_10+=", all masks hidden"}else{_10+=" with index: "+_4+" of "+(_2.length-1)}
this.logInfo(_10,"clickMask")}
if(_6){_9=this.$na(_4,false);var _11=this.$na(_4,true);_8=(_11==null)}
var _12=_3.$li,_13=_3.$mx;_2.remove(_3);if(_7!=null){if(_13!=null){if(_7.$mx==null)_7.$mx={};isc.addProperties(_7.$mx,_13)}
if(_12&&!_7.$mx[_12.getID()]){this.setMaskedFocusCanvas(_12,_7)}}
if(this.$m8){if(_5&&_7==null){if(isc.Browser.isIE){isc.Timer.setTimeout({target:this.$m8,methodName:"hide"},0)}else{this.$m8.hide()}}else if(_8){if(_9){var _13=isc.addProperties({},_9.$mx);var _14=_2.length-1,_15=_2[_14];while(_15!=_9){isc.addProperties(_13,_15.$mx);_14--;_15=_2[_14]}
this.$m0(_13)}else this.$m8.sendToBack()}
if(_6){var _16;if(_9!=null){_16=[];for(var i=_4-1;i>=0;i--){var _18=_2[i];_16.addList(isc.getKeys(_18.$mx));if(_18==_9)break}}else{_16=isc.Canvas._canvasList}
this.$nb(_16,true)}
if(_12!=null&&!_12.destroyed&&!this.targetIsMasked(_12)){if(this.logIsInfoEnabled("clickMask")){this.logInfo("focusing in "+_12+" on clickMask hide with current focusCanvas: "+isc.EH.$ke,"clickMask")}
var _19=(isc.Browser.isIE&&this.lastEvent.eventType==this.MOUSE_DOWN)
if(_19){this.$k7=_12}else{try{_12.focus()}catch(e){}}}}
this.updateEventMasks()},isc.A.$na=function isc_c_EventHandler__getNextHardMask(_1,_2){var _3=this.clickMaskRegistry;if(_2){for(var i=_1+1;i<_3.length;i++){if(this.isHardMask(_3[i]))return _3[i]}}else{for(var i=_1-1;i>=0;i--){if(this.isHardMask(_3[i]))return _3[i]}}
return null},isc.A.$m2=function isc_c_EventHandler__getCanvas(_1){if(isc.isA.String(_1))return window[_1];return _1},isc.A.$nb=function isc_c_EventHandler__hardUnmaskTargets(_1,_2){if(!_1||_1.length==0)return;for(var i=0;i<_1.length;i++){var _4=this.$m2(_1[i]);if(!_4)continue;if(_4.accessKey!=null&&_4.isDrawn()){_4.$m9(_4.accessKey)}
if(!_4.isDrawn()&&isc.isA.DynamicForm&&isc.isA.DynamicForm(_4)&&_4.items&&_4.items.length>0)
{var _5=_4.items[0];if(_5.containerWidget!=_4)_4=_5.containerWidget}
if(!_2&&_4.getParentCanvas()==null&&_4.getZIndex()<=this.$m8.getZIndex()&&_4!=this.$m8)
{_4.setZIndex(this.$m8.getZIndex()+1);this.logDebug("raised above screenspan: "+_4,"clickMask")}}},isc.A.clickMaskUp=function isc_c_EventHandler_clickMaskUp(_1){var _2=this.clickMaskRegistry;if(_1==null)return(_2.length>0);else return(_2.find("ID",_1)!=null)},isc.A.getAllClickMaskIDs=function isc_c_EventHandler_getAllClickMaskIDs(){var _1=this.clickMaskRegistry;if(_1.length<1)return[];return _1.getProperty("ID")},isc.A.showScreenSpan=function isc_c_EventHandler_showScreenSpan(_1){if(!this.$m8){this.$m8=isc.ScreenSpan.create({ID:"isc_EH_screenSpan",pointersToThis:[{object:this,property:"$m8"}]},this.clickMaskProperties)}
var _2=this.$m8;_2.show();if(!this.isHardMask(_1)){_2.sendToBack()}else{this.$m0(_1.$mx)}},isc.A.$m0=function isc_c_EventHandler__adjustSpanZIndex(_1){this.$nc=true;var _2;for(var _3 in _1){var _4=this.$m2(_3);if(!_4||_4.destroyed||_4.getParentCanvas()!=null){continue}
if(_4.getMasterCanvas()&&_1[_4.getMasterCanvas().getID()])continue;_4.bringToFront();if(_2==null)_2=_4.getZIndex(true);if(_4.peers){for(var i=0;i<_4.peers.length;i++){if(!_4.peers[i].isDrawn())continue;_2=Math.min(_2,_4.peers[i].getZIndex(true))}}}
if(_2!=null)this.$m8.setZIndex(_2-1);else this.$m8.bringToFront();this.$nc=false},isc.A.maskTarget=function isc_c_EventHandler_maskTarget(_1,_2){return this.maskTargets(_1,_2)},isc.A.maskTargets=function isc_c_EventHandler_maskTargets(_1,_2,_3){var _4=this.clickMaskRegistry;if(_1==null||_4.length==0)return;if(!isc.isAn.Array(_1))_1=[_1];else if(_1.length==0)return;var _5=(_2==null?_4[0]:(isc.isA.String(_2)?this.getClickMask(_2):_2));if(_5==null){this.logInfo("maskTargets called with invalid maskID - returning.","event")
return}
var _6=_1.length
for(var i=0;i<_6;i++){var _8=_1[i];if(!_3&&_8.children!=null){this.$m5(_8,_1)}
var _9=_8.parentElement;while(_9!=null){if(!_1.contains(_9)){_1.add(_9);if(_3)this.$m6(_9,_1)}
_9=_9.parentElement}
if(_3||!_9){this.$m6(_8,_1)}
if(_9)this.$m6(_9,_1)}
var _10=_4.indexOf(_5);var _11;for(var i=_10;i<_4.length;i++){_14=_4[i];if(this.isHardMask(_14))_11=i}
var _12;if(_11!=null)_12=[];for(var n=0;n<_1.length;n++){var _8=_1[n];if(_8.hasFocus&&!_8.$1196)_8.blur();var _14,_11,_15=null;for(var i=_10;i<_4.length;i++){_14=_4[i];if(_14.$mx[_8.getID()]){_15=i;var _16=_14.$mx;if(_16[_8.getID()]===_8)delete _16[_8.getID()]}}
if(_11!=null&&_15!=null&&(_11<=_15)){_12.add(_8)}}
if(_11!=null)this.$mz(_12,null,false,false)},isc.A.addUnmaskedTarget=function isc_c_EventHandler_addUnmaskedTarget(_1,_2){return this.addUnmaskedTargets(_1,_2)},isc.A.addUnmaskedTargets=function isc_c_EventHandler_addUnmaskedTargets(_1,_2){if(isc.$nd&&this.$nc)return;var _3=this.clickMaskRegistry;if(_1==null||_3.length==0)return;if(!isc.isAn.Array(_1))_1=[_1];if(_1.length==0)return;var _4;if(_2==null){_4=_3.last()}else{if(isc.isA.String(_2))_4=this.getClickMask(_2);else _4=_2}
if(_4==null){this.logInfo("addUnmaskedTargets called with invalid maskID - returning.","clickMask")
return}
var _5=_4;while(_5&&!this.isHardMask(_5)){_5=_3[_3.indexOf(_5)-1]}
if(_5!=null){if(isc.$nd&&_1.length==1&&_1[0].topElement!=null){return}}
_1=this.$m1(_1,_4);if(this.logIsDebugEnabled("clickMask")){this.logDebug("Added unmasked targets:"+_1.getProperty("ID")+" [+ decendants] to clickMask with ID: "+_4.ID,"clickMask")}
var _6=false;for(var i=_3.indexOf(_4)+1;i<_3.length;i++){if(this.isHardMask(_3[i]))_6=true}
for(var n=0;n<_1.length;n++){var _9=_1[n];if(_4.$mx==null)_4.$mx={};_4.$mx[_9.getID()]=_9}
if(!_6){this.$nb(_1)}},isc.A.targetIsMasked=function isc_c_EventHandler_targetIsMasked(_1,_2,_3){var _4=this.clickMaskRegistry;if(_4.length==0)return false;if(_1==null)return true;var _5;if(_2==null)_5=_4.last();else if(isc.isA.String(_2))_5=_4.find("ID",_2);else _5=_2;if(!isc.isAn.Object(_5)){this.logWarn("EventHandler.targetIsMasked() passed invalid maskID:"+_2,"clickMask");return false}
var _6=_4.indexOf(_5);var _7=false;for(var i=_6;i<_4.length;i++){if(i!=_6)_5=_4[i];if(_3){if(_5.mode==isc.EH.HARD||_5.mode==isc.EH.SOFT_CANCEL){_7=true}else{continue}}
if(_5.$mx){if(_5.$mx[_1.getID()])return false;if(isc.DrawItem&&isc.isA.DrawItem(_1)){var _9=_1.drawPane;if(_9&&_9.getID&&_5.$mx[_9.getID()])return false}
if(isc.isA.DynamicForm!=null&&isc.isA.DynamicForm(_1)){var _10=_1.$ne(isc.EH.lastEvent);if(_10&&_10.item&&_10.item.form==_1&&_10.item.containerWidget!=_1&&_5.$mx[_10.item.containerWidget.getID()])return false}}}
return(_3&&!_7?false:true)},isc.A.clickMaskClick=function isc_c_EventHandler_clickMaskClick(_1){var _2=this.clickMaskRegistry.duplicate(),_3=_2.last();while(_3!=null&&(this.targetIsMasked(_1)||_1==this.$m8)){if(this.logIsInfoEnabled("clickMask")){this.logInfo("mouseDown on masked "+_1+(_3.clickAction!=null?" firing clickAction, ":"")+(_3.autoHide?"will hide mask"+(_3.mode==isc.EH.SOFT_CANCEL?" and block click":""):"will block click"))}
var _4=(_3.mode!=isc.EH.SOFT);this.$lj(_3)
if(_4)return false;_3=_2[_2.indexOf(_3)-1]}
return true},isc.A.$lj=function isc_c_EventHandler__clickMaskClick(_1){var _2=_1.autoHide,_3=_1.clickAction;if(_2==true)this.hideClickMask(_1.ID);if(_3!=null)this.fireCallback(_3)});isc.B._maxIndex=isc.C+200;isc.EventHandler.captureEvents();if(!("contains"in document.documentElement)&&window.Node){Node.prototype.contains=function(_1){for(;_1!=null;_1=_1.parentNode){if(this==_1)return true}
return false}}
isc.ClassFactory.defineClass("Element",null,null,true);isc.A=isc.Element;isc.A.vendorCSSPrefix=(isc.Browser.isMoz?"-moz-":isc.Browser.isChrome?"-webkit-":isc.Browser.isSafari?"-webkit-":isc.Browser.isOpera?"-o-":isc.Browser.isIE?"-ms-":"");isc.A.vendorStylePrefix=(isc.Browser.isMoz?"Moz":isc.Browser.isChrome?"Webkit":isc.Browser.isSafari?"Webkit":isc.Browser.isOpera?"O":isc.Browser.isIE?"ms":"");isc.A=isc.Element;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$wq=window.isc_insertAfterBodyStart;isc.A.$wr="isc_global_insertion_marker";isc.A.$n7="afterBegin";isc.A.$n9="afterEnd";isc.A.$n6="beforeBegin";isc.A.$n8="beforeEnd";isc.A.$1434=("boxSizing"in document.documentElement.style?"box-sizing":isc.Element.vendorCSSPrefix+"box-sizing");isc.A.$1435=("boxSizing"in document.documentElement.style?"boxSizing":isc.Element.vendorStylePrefix+"BoxSizing");isc.A.$84e=(isc.Browser.isIE&&!isc.Browser.isIE9)||isc.Browser.isOpera;isc.A.$w2="borderLeftWidth";isc.A.$w3="borderTopWidth";isc.A.$oi="marginLeft";isc.A.$ok="marginTop";isc.A.$27r="none";isc.A.$808="$808";isc.A.$809="$809";isc.A.$jj="BODY";isc.A.$jk="HTML";isc.A.$118s=!isc.Browser.isIE&&!isc.Browser.isOpera;isc.A.getBoundingClientRect=(isc.Browser.isIPhone?function(_1){return _1.getBoundingClientRect()}:function(_1){var _2=this.$118s,_3=isc.Browser.isIE&&!isc.Browser.isStrict;if(_1.tagName==this.$jj||(!_2&&_1.tagName==this.$jk))
{var _4=_1.ownerDocument,_5=_4.documentElement,_6=_4.defaultView||window;if(_2){return _5.getBoundingClientRect()}else if(_3&&isc.Browser.version==6){var _7=_1.getBoundingClientRect(),_8=-_4.body.scrollLeft+(_5.clientLeft||0),_9=-_4.body.scrollTop+(_5.clientTop||0),_10=Math.max(_5.offsetWidth,_7.right),_11=Math.max(_5.offsetHeight,_7.bottom);return{left:_8,top:_9,right:_8+_10,bottom:_9+_11,width:_10,height:_11}}else{var _7=_1.getBoundingClientRect(),_10=Math.max(_5.clientWidth,_7.right),_11=Math.max(_5.clientHeight,_7.bottom),_8=_5.clientLeft||0,_9=_5.clientTop||0;if(_3){_8-=_4.body.scrollLeft;_9-=_4.body.scrollTop}else{_8-=_6.pageXOffset||_5.scrollLeft;_9-=_6.pageYOffset||_5.scrollTop}
return{left:_8,top:_9,right:_8+_10,bottom:_9+_11,width:_10,height:_11}}}else if(_3&&isc.Browser.version==6){var _7=_1.getBoundingClientRect();return{left:_7.left,top:_7.top,right:_7.right,bottom:_7.bottom,width:_7.right-_7.left,height:_7.bottom-_7.top}}else{return _1.getBoundingClientRect()}});isc.A.cacheOffsetCoords=true;isc.A.$95b=(isc.Browser.isMoz||(isc.Browser.isIE&&isc.Browser.minorVersion<5.5));isc.A.$95c=(isc.Browser.isIE9&&isc.Browser.isStrict);isc.A.$nk={};isc.A.$419={border:"borderStyle",borderWidth:"borderStyle",borderLeft:"borderLeftStyle",borderRight:"borderRightStyle",borderTop:"borderTopStyle",borderBottom:"borderBottomStyle",borderLeftWidth:"borderLeftStyle",borderRightWidth:"borderRightStyle",borderBottomWidth:"borderBottomStyle",borderTopWidth:"borderTopStyle"};isc.A.$nl={};isc.A.$39=";";isc.A.$1387=(isc.Element.vendorStylePrefix+"Transform"in document.documentElement.style?isc.Element.vendorCSSPrefix+"transform":"transform");isc.A.$1388=(isc.Element.vendorStylePrefix+"TransformOrigin"in document.documentElement.style?isc.Element.vendorCSSPrefix+"transform-origin":"transform-origin");isc.A.$139a=(isc.Element.vendorStylePrefix+"Transform"in document.documentElement.style?isc.Element.vendorStylePrefix+"Transform":"transform");isc.A.$139b=(isc.Element.vendorStylePrefix+"TransformOrigin"in document.documentElement.style?isc.Element.vendorStylePrefix+"TransformOrigin":"transformOrigin");isc.B.push(isc.A.get=function isc_c_Element_get(_1,_2){_2=_2||this.getDocument();if(isc.Browser.isDOM)return _2.getElementById(_1)},isc.A.$mk=function isc_c_Element__getElementFromSelection(_1){if(!_1)_1=document;if(isc.Browser.$120h){var _2=_1.getSelection();if(!_2.rangeCount)return null;var _3=_2.getRangeAt(0).commonAncestorContainer;while(_3!=null&&_3.nodeType!=1){_3=_3.parentNode}
return _3}else if(isc.Browser.isIE){var _2=_1.selection;try{var _4=_2.type.toLowerCase()}catch(e){return null}
var _5=(_4=="text"||_4=="none");if(!_2)return null;if(_5){var _6;try{_6=_2.createRange()}catch(e){}
return _6?_6.parentElement():null}else{var _6=_2.createRange(),_7;for(var i=0;i<_6.length;i++){if(!_7){_7=_6(i).parentElement}else{while(!_7.contains(_6(i))){_7=_7.parentElement}}}
return _7}}},isc.A.hasClassName=function isc_c_Element_hasClassName(_1,_2){if(!_2)return false;var _3=_1.className,_4=_3.indexOf(_2);while(_4!=-1){if(_4==0||_3[_4-1]==' '){_4+=_2.length;if(_4==_3.length||_3[_4]==' '){return true}}else _4+=_2.length;if(_4>=_3.length)break;_4=_3.indexOf(_2,_4)}
return false},isc.A.forEachDescendantHavingClass=function isc_c_Element_forEachDescendantHavingClass(_1,_2,_3){if(_1==null||!_2)return;if(_1.querySelectorAll){var _4=_1.querySelectorAll("."+_2),_5=_4.length;for(var _6=_5;_6>0;--_6){_3(_4[_6-1])}}else{var _7=_1.childNodes,_5=_7.length;for(var _6=_5;_6>0;--_6){var _8=_7[_6-1];if(_8.nodeType!=1)continue;this.forEachDescendantHavingClass(_8,_2,_3);if(this.hasClassName(_8,_2))_3(_8)}}},isc.A.findAttribute=function isc_c_Element_findAttribute(_1,_2,_3){if(!_1)return null;if(_1[_2]==_3||(_1.getAttribute&&_1.getAttribute(_2)==_3)){return _1}
var _4=_1.childNodes;for(var i=0;i<_4.length;i++){var _6=this.findAttribute(_4[i],_2,_3);if(_6)return _6}
return null},isc.A.getInsertionMarkerHTML=function isc_c_Element_getInsertionMarkerHTML(){return"<span id='"+this.$wr+"' style='display:none'></span>"},isc.A.getInsertionMarker=function isc_c_Element_getInsertionMarker(){return document.getElementById(this.$wr)},isc.A.createAbsoluteElement=function isc_c_Element_createAbsoluteElement(_1,_2){var _3=_2||this.getWindow(),_4=this.getDocumentBody(true);if(_4==null&&!isc.Element.noBodyTagMessageShown){isc.Element.noBodyTagMessageShown=true;var _5="Error: Attempt to write content into a page outside the BODY tag.  Isomorphic SmartClient requires this tag be present and all widgets be written out inside it.\rPlease ensure your file has a BODY tag and any code to draw SmartClient widgets is enclosed in this tag.";this.logError(_5);return}
if(this.$wq){return isc.Element.insertAdjacentHTML(_4,this.$n7,_1,true)}
if(isc.Browser.isIE){if(!this.$w7){if(_4.childNodes.length<2){isc.Element.insertAdjacentHTML(_4,this.$n7,this.getInsertionMarkerHTML())}else{var _6=_4.lastChild;while(_6&&_6.nodeType==3)_6=_6.previousSibling;if(_6!=null){isc.Element.insertAdjacentHTML(_6,this.$n6,this.getInsertionMarkerHTML())}else{isc.Element.insertAdjacentHTML(_4,this.$n7,this.getInsertionMarkerHTML())}}
this.$w7=this.getInsertionMarker()}
return isc.Element.insertAdjacentHTML(this.$w7,this.$n9,_1,true)}else{return isc.Element.insertAdjacentHTML(_4,this.$n8,_1,true)}},isc.A.insertAdjacentHTML=function isc_c_Element_insertAdjacentHTML(_1,_2,_3,_4){_2=_2.toLowerCase();if(isc.isA.String(_1))_1=isc.Element.get(_1);if(!_1)this.logWarn("insertAdjacentHTML: element is null for where: '"+_2+"' with html: "+_3);if(isc.Browser.useInsertAdjacentHTML){try{_1.insertAdjacentHTML(_2,_3);if(_4){switch(_2){case"beforebegin":return _1.previousSibling;case"afterbegin":return _1.firstChild;case"beforeend":return _1.lastChild;case"afterend":return _1.nextSibling}}
return}catch(e){}}
var _5,_6=_1.ownerDocument;if(!_4&&isc.Browser.useCreateContextualFragment){var _7=_6.createRange();_7.setStartBefore(_1);_5=_7.createContextualFragment(_3)}else{var _8=_6.createElement("DIV");if(_1.tagName=="TR"&&isc.Browser.isIE){_8.innerHTML="<table><tbody><tr>"+_3+"</tr></tbody></table>";_8=_8.firstChild.firstChild.firstChild}else{_8.innerHTML=_3}
if(_4||_8.firstChild==_8.lastChild)_5=_8.firstChild;else{_5=_6.createDocumentFragment();var _9;while(_9=_8.firstChild){_5.appendChild(_9)}}}
switch(_2){case"beforebegin":_1.parentNode.insertBefore(_5,_1);break;case"afterbegin":_1.insertBefore(_5,_1.firstChild);break;case"beforeend":_1.appendChild(_5);break;case"afterend":if(_1.nextSibling)_1.parentNode.insertBefore(_5,_1.nextSibling);else _1.parentNode.appendChild(_5);break}
if(_4)return _5},isc.A.clear=function isc_c_Element_clear(_1,_2){if(_1==null)return;if(!_2&&isc.Page.isLoaded()&&isc.Browser.isIE&&_1.ownerDocument.documentElement.contains(_1))
{_1.outerHTML=isc.emptyString;return}
if(_1.parentNode!=null){_1.parentNode.removeChild(_1)}else{isc.Log.logWarn("element parentNode null");_1.innerHTML=""}},isc.A.isBorderBox=function isc_c_Element_isBorderBox(_1){if(!_1)return false;if(!isc.Browser.isMoz)return isc.Browser.isBorderBox;return(_1.style[this.$1435]==="border-box")},isc.A.getScrollHeight=function isc_c_Element_getScrollHeight(_1){if(_1==null)return 0;var _2=((_1.scrollHeight!=null&&_1.scrollHeight!="undefined")?_1.scrollHeight:_1.offsetHeight);var _3=this.$yq(_1);return _3>_2?_3:_2},isc.A.$yq=function isc_c_Element__getPositionedChildrenBottom(_1){if(_1.childNodes==null)return 0;var _2=0,_3=document.ELEMENT_NODE||1,_4=this.logIsDebugEnabled("sizing");for(var i=0;i<_1.childNodes.length;i++){var _6=_1.childNodes.item(i);if(_6.nodeType!=_3)continue;var _7=isc.Element.getComputedStyleAttribute(_6,"position");var _8=0;if(_7==isc.Canvas.ABSOLUTE||_7==isc.Canvas.RELATIVE){_8+=isc.Element.getOffsetTop(_6)}else{continue}
var _9=_6.getAttribute("eventProxy"),_10;if(_9!=null&&!isc.isAn.emptyString(_9)&&!window[_9].$s0&&isc.isA.Function(window[_9].getVisibleHeight))
{_10=window[_9].getVisibleHeight()}else{_10=isc.Element.getVisibleHeight(_6)}
var _11=_8+_10;if(_7==isc.Canvas.ABSOLUTE&&(_1.style.overflow==isc.Canvas.SCROLL||_1.style.overflow==isc.Canvas.AUTO||_1.style.overflow==isc.Canvas.HIDDEN))
_11-=isc.Element.getBottomMargin(_6);if(_11>_2)_2=_11}
return _2},isc.A.getScrollWidth=function isc_c_Element_getScrollWidth(_1){if(_1==null)return 0;var _2=((_1.scrollWidth!=null&&_1.scrollWidth!="undefined")?_1.scrollWidth:_1.offsetWidth);var _3=this.$yr(_1);return _3>_2?_3:_2},isc.A.$yr=function isc_c_Element__getPositionedChildrenRight(_1){if(_1.childNodes==null)return 0;var _2=0,_3=document.ELEMENT_NODE||1,_4=this.logIsDebugEnabled("sizing");for(var i=0;i<_1.childNodes.length;i++){var _6=_1.childNodes.item(i);if(_6.nodeType!=_3)continue;var _7=isc.Element.getComputedStyle(_6,["position","display","left"]);var _8=0;if(_7.position==isc.Canvas.ABSOLUTE||_7.position==isc.Canvas.RELATIVE)
{_8=isc.Element.getOffsetLeft(_6)}else{continue}
var _9=_6.getAttribute("eventProxy"),_10;if(_9!=null&&!isc.isAn.emptyString(_9)&&!window[_9].$sv&&isc.isA.Function(window[_9].getVisibleWidth))
{_10=window[_9].getVisibleWidth()}else{_10=isc.Element.getVisibleWidth(_6)}
var _11=_8+_10;if(_1.style.overflow==isc.Canvas.SCROLL||_1.style.overflow==isc.Canvas.HIDDEN||_1.style.overflow==isc.Canvas.AUTO){_11-=isc.Element.getRightMargin(_6)}
if(_11>_2)_2=_11;if(_4){this.logInfo("getChildNodesRight: child node "+i+" of "+_1.childNodes.length+" ("+this.echoLeaf(_6)+") left:"+_8+", width: "+_10+", right:"+_11,"sizing")}}
return _2},isc.A.getClientWidth=function isc_c_Element_getClientWidth(_1){if(isc.Browser.isIE&&(isc.Browser.isIE9||isc.Browser.version>=10)){var _2=window.getComputedStyle(_1,null),_3=parseFloat(_2.width)+parseFloat(_2.paddingRight)+parseFloat(_2.paddingLeft);return Math.ceil(_3)}else{return _1.clientWidth}},isc.A.getElementRect=function isc_c_Element_getElementRect(_1){var _2=this.getDocumentBody(),_3=this.getLeftOffset(_1,_2),_4=this.getTopOffset(_1,_2);var _5=0,_6=0;if(_1.style&&_1.style.overflow=="visible"){_5=this.getScrollWidth(_1);_6=this.getScrollHeight(_1)}
_5=Math.max(_1.offsetWidth,_1.clientWidth,_5);_6=Math.max(_1.offsetHeight,_1.clientHeight,_6);return[_3,_4,_5,_6]},isc.A.getInnerWidth=function isc_c_Element_getInnerWidth(_1){var _2=_1.style.width;if(_2!=null&&!isc.isAn.emptyString(_2)){_2=parseInt(_2);if(isc.isA.Number(_2))return _2}
var _3=_1.clientWidth,_4=parseInt(this.getComputedStyleAttribute("paddingLeft")),_5=parseInt(this.getComputedStyleAttribute("paddingRight")),_6=_4+_5;if(isc.isA.Number(_6))_3-=_6;return _3},isc.A.getInnerHeight=function isc_c_Element_getInnerHeight(_1){var _2=_1.style.height;if(_2!=null&&!isc.isAn.emptyString(_2)){_2=parseInt(_2);if(isc.isA.Number(_2))return _2}
var _3=_1.clientHeight,_4=parseInt(this.getComputedStyleAttribute("paddingTop")),_5=parseInt(this.getComputedStyleAttribute("paddingBottom")),_6=_4+_5;if(isc.isA.Number(_6))_3-=_6;return _3},isc.A.getNativeInnerWidth=function isc_c_Element_getNativeInnerWidth(_1){if(isc.Browser.isMoz)return this.getInnerWidth(_1);var _2=_1.offsetWidth;if(!_2)_2=this.getInnerWidth(_1);return _2},isc.A.getNativeInnerHeight=function isc_c_Element_getNativeInnerHeight(_1){if(isc.Browser.isMoz)return this.getInnerHeight(_1);var _2=_1.offsetHeight;if(!_2)_2=this.getInnerHeight(_1);return _2},isc.A.getTopMargin=function isc_c_Element_getTopMargin(_1){if(_1!=null){var _2;if(_1.style!=null)_2=parseInt(_1.style.marginTop);if(isc.isA.Number(_2))return _2;if(_1.className!=null)return isc.Element.$th(_1.className)}
return 0},isc.A.getBottomMargin=function isc_c_Element_getBottomMargin(_1){if(_1!=null){var _2;if(_1.style!=null)_2=parseInt(_1.style.marginBottom);if(isc.isA.Number(_2))return _2;if(_1.className!=null)return isc.Element.$ti(_1.className)}
return 0},isc.A.getLeftMargin=function isc_c_Element_getLeftMargin(_1){if(_1!=null){var _2;if(_1.style!=null)_2=parseInt(_1.style.marginLeft);if(isc.isA.Number(_2))return _2;if(_1.className!=null)return isc.Element.$tf(_1.className)}
return 0},isc.A.getRightMargin=function isc_c_Element_getRightMargin(_1){if(_1!=null){var _2;if(_1.style!=null)_2=parseInt(_1.style.marginRight);if(isc.isA.Number(_2))return _2;if(_1.className!=null)return isc.Element.$tg(_1.className)}
return 0},isc.A.getHMarginSize=function isc_c_Element_getHMarginSize(_1){return isc.Element.getLeftMargin(_1)+isc.Element.getRightMargin(_1)},isc.A.getVMarginSize=function isc_c_Element_getVMarginSize(_1){return isc.Element.getTopMargin(_1)+isc.Element.getBottomMargin(_1)},isc.A.getTopBorderSize=function isc_c_Element_getTopBorderSize(_1){if(_1==null)return 0;if(isc.Browser.isOpera&&_1.currentStyle.borderTopStyle==this.$27r)return 0;var _2=(this.$84e?parseInt(_1.currentStyle.borderTopWidth):parseInt(isc.Element.getComputedStyleAttribute(_1,"borderTopWidth")));return isNaN(_2)?0:_2},isc.A.getBottomBorderSize=function isc_c_Element_getBottomBorderSize(_1){if(_1==null)return 0;if(isc.Browser.isOpera&&_1.currentStyle.borderBottomStyle==this.$27r)return 0;var _2=(this.$84e?parseInt(_1.currentStyle.borderBottomWidth):parseInt(isc.Element.getComputedStyleAttribute(_1,"borderBottomWidth")));return isNaN(_2)?0:_2},isc.A.getLeftBorderSize=function isc_c_Element_getLeftBorderSize(_1){if(_1==null)return 0;if(isc.Browser.isOpera&&_1.currentStyle.borderLeftStyle==this.$27r)return 0;var _2=(this.$84e?parseInt(_1.currentStyle.borderLeftWidth):parseInt(isc.Element.getComputedStyleAttribute(_1,"borderLeftWidth")));return isNaN(_2)?0:_2},isc.A.getRightBorderSize=function isc_c_Element_getRightBorderSize(_1){if(_1==null)return 0;if(isc.Browser.isOpera&&_1.currentStyle.borderRightStyle==this.$27r)return 0;var _2=(this.$84e?parseInt(_1.currentStyle.borderRightWidth):parseInt(isc.Element.getComputedStyleAttribute(_1,"borderRightWidth")));return isNaN(_2)?0:_2},isc.A.getBorderSizes=function isc_c_Element_getBorderSizes(_1){var _2={top:isc.Element.getTopBorderSize(_1),bottom:isc.Element.getBottomBorderSize(_1),left:isc.Element.getLeftBorderSize(_1),right:isc.Element.getRightBorderSize(_1)};_2.Top=_2.top;_2.Bottom=_2.bottom;_2.Left=_2.left;_2.Right=_2.right;return _2},isc.A.getVBorderSize=function isc_c_Element_getVBorderSize(_1){return isc.Element.getTopBorderSize(_1)+isc.Element.getBottomBorderSize(_1)},isc.A.getHBorderSize=function isc_c_Element_getHBorderSize(_1){return isc.Element.getLeftBorderSize(_1)+isc.Element.getRightBorderSize(_1)},isc.A.getTopPaddingSize=function isc_c_Element_getTopPaddingSize(_1){if(_1==null)return 0;var _2=(this.$84e?parseInt(_1.currentStyle.paddingTop):parseInt(isc.Element.getComputedStyleAttribute(_1,"paddingTop")));return isNaN(_2)?0:_2},isc.A.getBottomPaddingSize=function isc_c_Element_getBottomPaddingSize(_1){if(_1==null)return 0;var _2=(this.$84e?parseInt(_1.currentStyle.paddingBottom):parseInt(isc.Element.getComputedStyleAttribute(_1,"paddingBottom")));return isNaN(_2)?0:_2},isc.A.getLeftPaddingSize=function isc_c_Element_getLeftPaddingSize(_1){if(_1==null)return 0;var _2=(this.$84e?parseInt(_1.currentStyle.paddingLeft):parseInt(isc.Element.getComputedStyleAttribute(_1,"paddingLeft")));return isNaN(_2)?0:_2},isc.A.getRightPaddingSize=function isc_c_Element_getRightPaddingSize(_1){if(_1==null)return 0;var _2=(this.$84e?parseInt(_1.currentStyle.paddingRight):parseInt(isc.Element.getComputedStyleAttribute(_1,"paddingRight")));return isNaN(_2)?0:_2},isc.A.getVPaddingSize=function isc_c_Element_getVPaddingSize(_1){return isc.Element.getTopPaddingSize(_1)+isc.Element.getBottomPaddingSize(_1)},isc.A.getHPaddingSize=function isc_c_Element_getHPaddingSize(_1){return isc.Element.getLeftPaddingSize(_1)+isc.Element.getRightPaddingSize(_1)},isc.A.getVisibleWidth=function isc_c_Element_getVisibleWidth(_1){if(_1==null)return 0;var _2=isc.Element.getComputedStyleAttribute(_1,"overflow"),_3;if(_2==isc.Canvas.VISIBLE||!isc.isA.Number(parseInt(_1.style.width))){_3=isc.Element.getScrollWidth(_1)+isc.Element.getHBorderSize(_1)}else{_3=parseInt(_1.style.width)}
return _3+isc.Element.getHMarginSize(_1)},isc.A.getVisibleHeight=function isc_c_Element_getVisibleHeight(_1){if(_1==null)return 0;var _2=isc.Element.getComputedStyleAttribute(_1,"overflow"),_3;if(_2==isc.Canvas.VISIBLE||!isc.isA.Number(parseInt(_1.style.height))){_3=isc.Element.getScrollHeight(_1)+isc.Element.getVBorderSize(_1)}else{_3=parseInt(_1.style.height)}
return _3+isc.Element.getVMarginSize(_1)},isc.A.getOffsetLeft=function isc_c_Element_getOffsetLeft(_1){if(_1==null){this.logWarn("getOffsetLeft: passed null element");return 0}
var _2=_1.offsetLeft;if(_1.$ys==_2){return _1.$yt}else{}
var _3=parseInt(isc.Element.getComputedStyleAttribute(_1,"marginLeft"));if(isc.isA.Number(_3)&&_3>0){_2-=_3}
var _4=this.getDocumentBody(),_5,_6="px",_7=_1.style.position;if(isc.Browser.isMoz){if(_1.offsetParent==null)return _2;if(_1.offsetParent!=_4){_5=this.ns.Element.getComputedStyle(_1.offsetParent,["borderLeftWidth","overflow"]);var _8=isc.Browser.geckoVersion,_9=_8<20100101&&((_5.overflow!="visible")&&(_8>=20051111||(_7==isc.Canvas.ABSOLUTE&&_5.overflow!="hidden"))),_10=(_8>20020826&&(_1.offsetParent.style[this.$1435]==="border-box"));if(isc.Browser.version<8&&_10!=_9){if(_10){_2-=(isc.isA.Number(parseInt(_5.borderLeftWidth))?parseInt(_5.borderLeftWidth):0)}
if(_9){_2+=(isc.isA.Number(parseInt(_5.borderLeftWidth))?parseInt(_5.borderLeftWidth):0)}}}}
if(isc.Browser.isIE8Strict&&!isc.Browser.isIE9){var _11=_1.offsetParent,_5=_11?_11.currentStyle:null,_12=_5?_5.borderLeftWidth:null;if(isc.isA.String(_12)&&_12.contains(_6)){_2-=parseInt(_12)}}else if(isc.Browser.isIE&&!isc.Browser.isIE9){var _11=_1.offsetParent,_5;if(_5!=_4)_5=_11.currentStyle;var _13=(_1.currentStyle.height!=isc.Canvas.AUTO||_1.currentStyle.width!=isc.Canvas.AUTO);var _14=true;while(_11!=_4){if(_5.position==isc.Canvas.ABSOLUTE)_14=false;if(_5.width==isc.Canvas.AUTO&&_5.height==isc.Canvas.AUTO&&_5.position==isc.Canvas.RELATIVE){if(_14&&isc.isA.String(_5.borderLeftWidth)&&_5.borderLeftWidth.contains(_6)){_2-=parseInt(_5.borderLeftWidth)}
if(_13){if(isc.isA.String(_5.marginLeft)&&_5.marginLeft.contains(_6))
{var _15=parseInt(_5.marginLeft);if(_15>0)_2-=_15}
if(_11.offsetParent!=_4){var _16=_11.offsetParent.currentStyle.padding;if(isc.isA.String(_16)&&_16.contains(_6)){_2-=parseInt(_16)}}else{_2-=(_4.leftMargin?parseInt(_4.leftMargin):0)}}}
_7=_11.style.position;_11=_11.offsetParent;if(_11!=document.body){_5=_11.currentStyle}}}
if(isc.Browser.isSafari&&isc.Browser.safariVersion<525.271){if(_1.offsetParent!=null&&_1.offsetParent!=_4){var _17=this.ns.Element.getComputedStyle(_1.offsetParent,["borderLeftWidth"]).borderLeftWidth;if(_17!=null)_17=parseInt(_17);if(isc.isA.Number(_17))_2-=_17}}else if(isc.Browser.isOpera&&isc.Browser.version>=12&&_1.offsetParent){if(_1.offsetParent.id.endsWith("_clipDiv")){var _18=_1.offsetParent.getBoundingClientRect(),_19=_1.getBoundingClientRect();_2=_19.left-_18.left}}
_1.$ys=_1.offsetLeft;_1.$yt=_2;return _2},isc.A.getOffsetTop=function isc_c_Element_getOffsetTop(_1){if(_1==null){this.logWarn("getOffsetTop: passed null element");return 0}
var _2=_1.offsetTop;if(isc.Browser.isFirefox&&isc.Browser.isStrict&&_2<0){var _3=_1.offsetParent;if(_3!=null){if(_3.getBoundingClientRect().top==_1.getBoundingClientRect().top)_2=0}}
if(_1.$yu==_2){return _1.$yv}else{}
var _4=parseInt(isc.Element.getComputedStyleAttribute(_1,"marginTop"));if(isc.isA.Number(_4)&&_4>0){_2-=_4}
var _5=this.getDocumentBody(),_6,_7="px",_8=_1.style.position;if(isc.Browser.isMoz){if(_1.offsetParent==null)return _2;if(_1.offsetParent!=_5){_6=this.ns.Element.getComputedStyle(_1.offsetParent,["overflow","borderTopWidth"]);var _9=isc.Browser.geckoVersion;var _10=_9<20100101&&((_6.overflow!="visible")&&(_9>=20051111||(_8==isc.Canvas.ABSOLUTE&&_6.overflow!="hidden"))),_11=(isc.Browser.geckoVersion>20020826&&_1.offsetParent.style[this.$1435]==="border-box");if(isc.Browser.version<8&&_11!=_10){if(_11){_2-=(isc.isA.Number(parseInt(_6.borderTopWidth))?parseInt(_6.borderTopWidth):0)}
if(_10){_2+=(isc.isA.Number(parseInt(_6.borderTopWidth))?parseInt(_6.borderTopWidth):0)}}}}
if(isc.Browser.isIE8Strict&&!isc.Browser.isIE9){var _12=_1.offsetParent,_6=_12?_12.currentStyle:null,_13=_6?_6.borderTopWidth:null;if(isc.isA.String(_13)&&_13.contains(_7)){_2-=parseInt(_13)}}else if(isc.Browser.isIE&&!isc.Browser.isIE9){if(_1.offsetParent&&_1.offsetParent!=_5){_6=_1.offsetParent.currentStyle;if(_6.position==isc.Canvas.RELATIVE&&_6.height==isc.Canvas.AUTO&&_6.width==isc.Canvas.AUTO&&isc.isA.String(_6.borderTopWidth)&&_6.borderTopWidth.contains(_7)){_2-=parseInt(_6.borderTopWidth)}}}
if(isc.Browser.isSafari&&isc.Browser.safariVersion<525.271){if(_1.offsetParent&&_1.offsetParent!=_5){var _14=this.ns.Element.getComputedStyle(_1.offsetParent,["borderTopWidth"]).borderTopWidth;if(_14!=null)_14=parseInt(_14);if(isc.isA.Number(_14))_2-=_14}}else if(isc.Browser.isOpera&&isc.Browser.version>=12&&_1.offsetParent){if(_1.offsetParent.id.endsWith("_clipDiv")){var _15=_1.offsetParent.getBoundingClientRect(),_16=_1.getBoundingClientRect();_2=_16.top-_15.top}}
_1.$yu=_1.offsetTop;_1.$yv=_2;return _2},isc.A.getLeftOffset=function isc_c_Element_getLeftOffset(_1,_2,_3,_4){return this.getOffset(isc.Canvas.LEFT,_1,_2,_3,_4)},isc.A.getTopOffset=function isc_c_Element_getTopOffset(_1,_2,_3){return this.getOffset(isc.Canvas.TOP,_1,_2,null,_3)},isc.A.getOffsets=function isc_c_Element_getOffsets(_1,_2,_3,_4){var _5=_4||isc.isA.Canvas(_1),_6=_4||_2==null||isc.isA.Canvas(_2);var _7=_5&&_6&&this.cacheOffsetCoords&&(_1.cacheOffsetCoords!=false),_8=_2?_2.ID:this.$27r;if(_7&&_1[this.$808]!=null&&_1[this.$809]!=null)
{var _9=_1[this.$808][_8],_10=_1[this.$809][_8];if(_9!=null&&_10!=null){return{left:_9,top:_10}}}
var _11=_5?_1.getClipHandle():_1;var _12;if(_2==null)_12=this.getDocumentBody();else if(_6)_12=_2.getHandle();else _12=_2;if(_12==null||_11==null){return{left:0,top:0}}
var _13;if(isc.Browser.$117b){var _14=this.getBoundingClientRect(_11),_15=this.getBoundingClientRect(_12);_13={left:(_14["left"]-_15["left"])<<0,top:(_14["top"]-_15["top"])<<0}}else{var _16=_11.offsetParent;if(isc.Browser.isMoz&&_16==null)return 0;var _17=_12.offsetParent,_18=_11;_13={left:0,top:0};if(_3==null)_3=isc.Page.isRTL();var _19=0;while(_16!=_12&&_16!=_17){this.$117h(_13,_18,_16,_3);_18=_16;_16=_18.offsetParent;_19++}
this.$117h(_13,_18,_16,_3);if(_16==_17){_13.left-=this.getOffsetLeft(_12);_13.top-=this.getOffsetTop(_12)}}
if(_7){var _20=_1[this.$808]=_1[this.$808]||{};_20[_8]=_13.left;_20=_1[this.$809]=_1[this.$809]||{};_20[_8]=_13.top}
return _13},isc.A.$117h=function isc_c_Element__adjustOffsets(_1,_2,_3,_4){_1.left+=this.getOffsetLeft(_2);_1.top+=this.getOffsetTop(_2);if(!_4){_1.left-=_3.scrollLeft||0}else{var _5=_3.scrollLeft;if(isc.isA.Number(_5)){var _6=_3.style?_3.style.overflow:isc.emptyString;if(_6!=isc.Canvas.VISIBLE&&_6!=isc.emptyString){var _7=this.$95b,_8=this.$95c;if(_8){_5=-_5;_7=true}
if(!_7){_5=isc.Canvas.$92y(_5,_3.scrollWidth,_3.clientWidth,true,true)}
_1.left-=_5}}}
_1.top-=_3.scrollTop||0;var _9,_10,_11,_12,_13;if(this.$84e){_9=_3.currentStyle;if(!isc.Browser.isOpera||_9.borderLeftStyle!=this.$27r){_10=parseInt(_9.borderLeftWidth);if(_10>0)_1.left+=_10}
if(!isc.Browser.isOpera||_9.borderTopStyle!=this.$27r){_11=parseInt(_9.borderTopWidth);if(_11>0)_1.top+=_11}
_12=parseInt(_9.marginLeft);if(_12>0)_1.left+=_12;_13=parseInt(_9.marginTop);if(_13>0)_1.left+=_12}else if(isc.Browser.isMoz){_9=window.getComputedStyle(_3,null);_1.left+=parseInt(_9.borderLeftWidth);_1.top+=parseInt(_9.borderTopWidth);_12=parseInt(_9.marginLeft);if(_12>0)_1.left+=_12;_13=parseInt(_9.marginTop);if(_13>0)_1.top+=_13}else{_10=parseInt(this.getComputedStyleAttribute(_3,this.$w2));if(_10>0)_1.left+=_10;_11=parseInt(this.getComputedStyleAttribute(_3,this.$w3));if(_11>0)_1.top+=_11;_12=parseInt(this.getComputedStyleAttribute(_3,this.$oi));if(_12>0)_1.left+=_12;_13=parseInt(this.getComputedStyleAttribute(_3,this.$ok));if(_13>0)_1.top+=_13}},isc.A.getOffset=function isc_c_Element_getOffset(_1,_2,_3,_4,_5){var _6=this.getOffsets(_2,_3,_4,_5);return _6[_1]},isc.A.getStyleEdges=function isc_c_Element_getStyleEdges(_1){if(isc.Browser.isSafari&&!isc.Element.$x1){isc.Browser.isStrict=isc.Element.$x2();isc.Element.$x1=true}
if(_1==null)return null;var _2;if(this.$nk[_1]!==_2)return this.$nk[_1];var _3=(isc.Browser.isMoz&&isc.Browser.geckoVersion<20040616),_4;if(_3){_4=this.getStyleDeclaration(_1)}else{var _5=isc.Browser.isIE?this.$x3:this.$x4;_4=this.$x5(_1,_5)}
this.$nk[_1]=_4;return _4},isc.A.$x2=function isc_c_Element__testForSafariStrictMode(){if(document.compatMode!=null){return document.compatMode=="CSS1Compat"}
var _1="<TABLE cellspacing=0 cellpadding=2 border=0><tr><td height=30>x</td></tr></TABLE>"
var _2=isc.Element.createAbsoluteElement(_1);var _3=_2.offsetHeight>30;isc.Element.clear(_2);return _3},isc.A.$x5=function isc_c_Element__deriveStyleProperties(_1,_2){var _3=(isc.Browser.isIE||isc.Browser.isOpera||isc.Browser.isSafari||(isc.Browser.isMoz&&isc.Browser.geckoVersion>=20080205));if(!this.$x6){this.createAbsoluteElement("<TABLE CELLPADDING=81 STYLE='position:absolute;left:0px;top:-2000px;'><TR><TD "+(isc.Browser.isIE8Strict?" ID=isc_cellStyleTester STYLE='border:0px;margin:0px'><DIV ID=isc_cellInnerStyleTester>"+isc.Canvas.blankImgHTML(30,30)+"</DIV></TD>":" ID='isc_cellStyleTester'>&nbsp;</TD><TD ID='isc_cellNoStyleTester'>&nbsp;</TD>")+"</TR></TABLE>");this.$x6=isc.Element.get("isc_cellStyleTester");if(isc.Browser.isIE8Strict){this.$62a=isc.Element.get("isc_cellInnerStyleTester")}
this.$x7="81px";if(isc.Browser.isSafari||isc.Browser.isChrome){var _4=isc.Element.get("isc_cellNoStyleTester");var _5=["paddingLeft"];var _6=this.getComputedStyle(_4,_5).paddingLeft;if(_6!=this.$x7){this.logDebug("Browser natively misreporting cell-padding (81px reported as:"+_6+"). This behavior is known to occur when the view is zoomed in certain browsers but is worked around by SmartClient and should have no visible effect on the application.","sizing");this.$x7=_6}}
this.$x8="-16384px";if(_3){this.createAbsoluteElement("<DIV ID=isc_styleTester STYLE='position:absolute;left:0px;top:-2000px;'>&nbsp;</DIV>");this.$x9=isc.Element.get("isc_styleTester");this.$ya=["marginLeft","marginTop","marginRight","marginBottom"];if(isc.Browser.isIE8Strict){this.$ya.addList(["borderLeftWidth","borderTopWidth","borderRightWidth","borderBottomWidth"])}}}
this.$x6.className=_1;var _7=this.getComputedStyle(this.$x6,_2);var _8=this.$x7;if(_7.paddingLeft==_8)_7.paddingLeft=null;if(_7.paddingTop==_8)_7.paddingTop=null;if(_7.paddingRight==_8)_7.paddingRight=null;if(_7.paddingBottom==_8)_7.paddingBottom=null;if(isc.Browser.isIE8Strict){var _9=this.$62a,_10=_9.offsetLeft,_11=_9.offsetTop;if(_10==81)_7.paddingLeft=null;if(_11==81)_7.paddingTop=null;if(this.$x6.offsetWidth-_10-30==81){_7.paddingRight=null}
if(this.$x6.offsetHeight-_11-30==81){_7.paddingBottom=null}}
if(isc.Browser.isSafari){if(isc.Browser.safariVersion<419.3){_8=isc.Canvas.AUTO;if(_7.paddingLeft==_8)_7.paddingLeft=null;if(_7.paddingTop==_8)_7.paddingTop=null;if(_7.paddingRight==_8)_7.paddingRight=null;if(_7.paddingBottom==_8)_7.paddingBottom=null}
_8=this.$x8;if(_7.marginTop==_8)_7.marginTop=null;if(_7.marginBottom==_8)_7.marginBottom=null}
if(_3){this.$x9.className=_1;var _12=this.getComputedStyle(this.$x9,this.$ya);_7.marginLeft=_12.marginLeft;_7.marginRight=_12.marginRight;_7.marginTop=_12.marginTop;_7.marginBottom=_12.marginBottom;if(isc.Browser.isIE8Strict){_7.borderLeftWidth=_12.borderLeftWidth;_7.borderRightWidth=_12.borderRightWidth;_7.borderTopWidth=_12.borderTopWidth;_7.borderBottomWidth=_12.borderBottomWidth}}
return _7});isc.evalBoundary;isc.B.push(isc.A.getComputedStyle=function isc_c_Element_getComputedStyle(_1,_2){var _3,_4,_5;if(isc.isA.String(_1)){_3=isc.Element.get(_1)}else{_3=_1}
if(_3==null||!isc.isAn.Object(_3)){this.logWarn("getComputedStyle: Unable to get to DOM element specified by '"+_1+"'."+this.getStackTrace());return null}
if(this.$84e){_4=_3.currentStyle;if(_2==null)_2=this.$yb;var _6=isc.applyMask(_4,_2);return _6}
if(_2==null){_2=this.$yc}else if(isc.isAn.Array(_2)){var _7={},_8=this.$yc;for(var i=0;i<_2.length;i++){_7[_2[i]]=_8[_2[i]]}
_2=_7}
var _10=isc.Browser.isSafari&&isc.Browser.safariVersion<312,_11;if(_10){_4=_3.style;_11=this.getStyleDeclaration(_3.className);_5={};for(var _12 in _2){_5[_12]=_4.getPropertyValue(_2[_12]);if(_5[_12]==null&&_11!=null&&_11[_12]!=null&&!isc.isAn.emptyString(_11[_12]))
{_5[_12]=_11[_12]}}}else{if(document.defaultView&&document.defaultView.getComputedStyle){_4=document.defaultView.getComputedStyle(_3,null)}
if(_4==null){_4={};this.logWarn("getComputedStyle() not natively available - can't guarantee accurate styling information for element:"+this.echoLeaf(_3));if(this.logIsDebugEnabled()){this.logDebug(this.getStackTrace())}}
_5={};for(var _12 in _2){_5[_12]=_4[_12]}}
return _5},isc.A.getComputedStyleAttribute=function isc_c_Element_getComputedStyleAttribute(_1,_2){if(_1==null||_2==null)return null;if(this.$84e){if(_1.currentStyle==null)return null;if(isc.Browser.isOpera&&this.$419[_2]!=null&&_1.currentStyle[this.$419[_2]]==this.$27r)return 0;return _1.currentStyle[_2]}
if(isc.Browser.isSafari&&isc.Browser.version<5){var _3=null;if(_1.style)_3=_1.style[_2];if((_3==null||isc.isAn.emptyString(_3))&&_1.className)
{var _4=isc.Element.getStyleEdges(_1.className);if(_4)_3=_4[_2]}
if(isc.isAn.emptyString(_3))return null;return _3}
var _5=this.$yc;var _6=this.$yd=this.$yd||document.defaultView;var _7=(_5[_2]||_2),_8=_6.getComputedStyle(_1,null);return _8.getPropertyValue(_7)},isc.A.$1101=function isc_c_Element__nonnativeRangeGetBoundingClientRectImpl(_1){var _2=_1.getBoundingClientRect();var _3=_2.top+isc.Element.getTopBorderSize(_1);var _4=_2.left+isc.Element.getLeftBorderSize(_1);_2={top:_3,right:_4,bottom:_3,left:_4};var _5=null;if(_1.firstChild){var _6=null,_7=null;if(_1.firstChild.tagName=="BR"){_1.insertAdjacentHTML("afterbegin","&nbsp;");_6=_1.firstChild}
if(_1.lastChild.tagName=="BR"&&((_6!=null&&_1.firstChild.nextSibling!=_1.lastChild)||(_6==null&&_1.firstChild!=_1.lastChild)))
{_1.insertAdjacentHTML("beforeend","&nbsp;");_7=_1.lastChild}
try{var _8=_1.childNodes,_9=_8.length;for(var i=0;i<_9;++i){var _11=_8[i];var _12;if(_11.nodeType==1){_12=_11.getBoundingClientRect();if(_12.top==0&&_12.left==0&&_12.width==0&&_12.height==0){continue}
var _13=isc.Element.getTopMargin(_11);var _14=isc.Element.getRightMargin(_11);var _15=isc.Element.getBottomMargin(_11);var _16=isc.Element.getLeftMargin(_11);_12.top-=_13;_12.right+=_14;_12.bottom+=_15;_12.left-=_16;_12.width+=_14+_16;_12.height+=_13+_15}else{if(_5==null)_5=_1.ownerDocument.createRange();_5.setStartBefore(_11);_5.setEndAfter(_11);_12=_5.getBoundingClientRect()}
_2.top=Math.min(_12.top,_2.top);_2.right=Math.max(_2.right,_12.right);_2.bottom=Math.max(_2.bottom,_12.bottom);_2.left=Math.min(_12.left,_2.left)}}finally{if(_7!=null){_1.removeChild(_7);_7=null}
if(_6!=null){_1.removeChild(_6);_6=null}}}
_2.width=_2.right-_2.left;_2.height=_2.bottom-_2.top;return _2},isc.A.$132f=function isc_c_Element__matchesSelector(_1,_2){try{if(isc.Browser.isIE9)return _1.msMatchesSelector(_2);else if(isc.Browser.isChrome||isc.Browser.isWebKit)return _1.webkitMatchesSelector(_2);else if(isc.Browser.isMoz)return _1.mozMatchesSelector(_2);else if(isc.Browser.isOpera)return _1.oMatchesSelector(_2)}catch(e){return false}
if(isc.isAn.emptyString(_1.className))return false;var _3="."+_1.className,_4=_2.split(/(?:,\s*)+/);for(var k=0;k<_4.length;k++){if(_4==_3)return true}
return false},isc.A.getStyleDeclaration=function isc_c_Element_getStyleDeclaration(_1,_2,_3){if(!_1)return null;if(_3==null){_3=this.$132g;if(_3==null){_3=this.$132g=document.createElement("div");_3.id="isc_getStyleDeclaration_defaultReferenceElement";_3.style.display="none";document.body.appendChild(_3)}
_3.className=_1}
if(!isc.allowDuplicateStyles)_2=false;var _4,_5=_2?[]:null;for(var i=document.styleSheets.length-1;i>=0;i--){var _7=this.$ye(document.styleSheets[i]);if(_7==null)continue;for(var j=_7.length-1;j>=0;j--){var _9=_7[j].selectorText;if(_9==null)continue;if(isc.Browser.isSafari&&530.17>isc.Browser.safariVersion&&isc.Browser.safariVersion>=312){_9+=", "+_9.toLowerCase()}
if(this.$132f(_3,_9)){var _4=_7[j].style;if(_2)_5[_5.length]=_4;else return _4}}}
if(_2&&_5.length>0)return _5;return null},isc.A.$ye=function isc_c_Element__getCSSRules(_1){if(!this.$yf){this.$yf=function(_2){try{return _2.rules||_2.cssRules}catch(e){isc.Page.$yh=true}}}
return this.$yf(_1)},isc.A.getStyleText=function isc_c_Element_getStyleText(_1,_2){if(!isc.allowDuplicateStyles)_2=false;var _3=this.$nl,_4=_3[_1];if(_4!=null)return _4;var _5=this.getStyleDeclaration(_1,_2);if(_5==null){if(!isc.Browser.isSafari||isc.Page.isLoaded())
this.$nl[_1]=isc.emptyString;return isc.emptyString}
if(_2){for(var i=_5.length-1;i>-1;i--){var _7=_5[i];var _8=_7.cssText;if(_8==null)continue;if(!isc.endsWith(_8,this.$39))_8+=this.$39;if(_4==null)_4=_8;else _4+=_8}
if(_4==null)_4=isc.$ad}else{_4=(_5.cssText||isc.$ad)}
if(!isc.endsWith(_4,isc.semi))_4+=isc.semi;return(_3[_1]=_4)},isc.A.$50f=function isc_c_Element__clearCSSCaches(){isc.Element.$nk={};isc.Element.$nl={};isc.Element.$yj=isc.Element.$yk=isc.Element.$yl=null},isc.A.$th=function isc_c_Element__getTopMargin(_1){return this.$sd(_1).top},isc.A.$ti=function isc_c_Element__getBottomMargin(_1){return this.$sd(_1).bottom},isc.A.$tf=function isc_c_Element__getLeftMargin(_1){return this.$sd(_1).left},isc.A.$tg=function isc_c_Element__getRightMargin(_1){return this.$sd(_1).right},isc.A.$sd=function isc_c_Element__calculateMargins(_1){if(this.$yk==null)this.$yk={};else if(this.$yk[_1]!=null){return this.$yk[_1]}
var _2={top:0,bottom:0,left:0,right:0},_3=isc.Element.getStyleEdges(_1);if(_3==null)return _2;var _4=_3.marginTop,_5=_3.marginBottom,_6=_3.marginLeft,_7=_3.marginRight,_8=isc.px;if(isc.isA.String(_4)&&isc.endsWith(_4,_8))
_2.top=parseInt(_4);if(isc.isA.String(_5)&&isc.endsWith(_5,_8))
_2.bottom=parseInt(_5);if(isc.isA.String(_6)&&isc.endsWith(_6,_8))
_2.left=parseInt(_6);if(isc.isA.String(_7)&&isc.endsWith(_7,_8))
_2.right=parseInt(_7);this.$yk[_1]=_2;return _2},isc.A.$tn=function isc_c_Element__getTopBorderSize(_1){return this.$tj(_1).top},isc.A.$to=function isc_c_Element__getBottomBorderSize(_1){return this.$tj(_1).bottom},isc.A.$tl=function isc_c_Element__getLeftBorderSize(_1){return this.$tj(_1).left},isc.A.$tm=function isc_c_Element__getRightBorderSize(_1){return this.$tj(_1).right},isc.A.$tj=function isc_c_Element__calculateBorderSize(_1){if(this.$yj==null)this.$yj={};else if(this.$yj[_1]!=null){return this.$yj[_1]}
var _2={top:0,bottom:0,left:0,right:0},_3=isc.Element.getStyleEdges(_1);if(_3==null)return _2;var _4=_3.borderTopWidth,_5=_3.borderBottomWidth,_6=_3.borderLeftWidth,_7=_3.borderRightWidth,_8=isc.px;if(isc.isA.String(_4)&&isc.endsWith(_4,_8))
_2.top=parseInt(_4);if(isc.isA.String(_5)&&isc.endsWith(_5,_8))
_2.bottom=parseInt(_5);if(isc.isA.String(_6)&&isc.endsWith(_6,_8))
_2.left=parseInt(_6);if(isc.isA.String(_7)&&isc.endsWith(_7,_8))
_2.right=parseInt(_7);this.$yj[_1]=_2;return _2},isc.A.$ym=function isc_c_Element__getVBorderSize(_1){return this.$tn(_1)+this.$to(_1)},isc.A.$yn=function isc_c_Element__getHBorderSize(_1){return this.$tl(_1)+this.$tm(_1)},isc.A.$tt=function isc_c_Element__getTopPadding(_1,_2){var _3=this.$tq(_1);if(_2&&_3.nullTop)return null;return _3.top},isc.A.$tu=function isc_c_Element__getBottomPadding(_1,_2){var _3=this.$tq(_1);if(_2&&_3.nullBottom)return null;return _3.bottom},isc.A.$tr=function isc_c_Element__getLeftPadding(_1,_2){var _3=this.$tq(_1);if(_2&&_3.nullLeft)return null;return _3.left},isc.A.$ts=function isc_c_Element__getRightPadding(_1,_2){var _3=this.$tq(_1);if(_2&&_3.nullRight)return null;return _3.right},isc.A.$tq=function isc_c_Element__calculatePadding(_1){if(this.$yl==null)this.$yl={};else if(this.$yl[_1]!=null){return this.$yl[_1]}
var _2={top:0,bottom:0,left:0,right:0},_3=isc.Element.getStyleEdges(_1);if(_3==null){_2.nullLeft=true;_2.nullRight=true;_2.nullTop=true;_2.nullBottom=true;return _2}
var _4=_3.paddingTop,_5=_3.paddingBottom,_6=_3.paddingLeft,_7=_3.paddingRight,_8=isc.px;_2.nullTop=(_4==null||_4==isc.emptyString);_2.nullBottom=(_5==null||_5==isc.emptyString)
_2.nullLeft=(_6==null||_6==isc.emptyString);_2.nullRight=(_7==null||_7==isc.emptyString);if(isc.isA.String(_4)&&isc.endsWith(_4,_8))
_2.top=parseInt(_4);if(isc.isA.String(_5)&&isc.endsWith(_5,_8))
_2.bottom=parseInt(_5);if(isc.isA.String(_6)&&isc.endsWith(_6,_8))
_2.left=parseInt(_6);if(isc.isA.String(_7)&&isc.endsWith(_7,_8))
_2.right=parseInt(_7);this.$yl[_1]=_2;return _2},isc.A.$s1=function isc_c_Element__getVPadding(_1){return this.$tt(_1)+this.$tu(_1)},isc.A.$sw=function isc_c_Element__getHPadding(_1){return this.$tr(_1)+this.$ts(_1)},isc.A.$yo=function isc_c_Element__getVBorderPad(_1){return this.$ym(_1)+this.$s1(_1)},isc.A.$yp=function isc_c_Element__getHBorderPad(_1){return this.$yn(_1)+this.$sw(_1)},isc.A.getNativeScrollbarSize=function isc_c_Element_getNativeScrollbarSize(){if(isc.Element.$yi==null){if(isc.Browser.isMobileWebkit){return(isc.Element.$yi=0)}
var _1="<div id=isc_ScrollbarTest style='position:absolute;top:-100px;border:0px;padding:0px;margin:0px;height:100px;width:100px;overflow:scroll;'>"+isc.nbsp+"</div>";this.createAbsoluteElement(_1);var _2=this.get('isc_ScrollbarTest');isc.Element.$yi=parseInt(_2.style.height)-_2.clientHeight;this.clear(_2)}
return isc.Element.$yi},isc.A.getRotationCSS=function isc_c_Element_getRotationCSS(_1,_2){_1=+_1;var _3=this.vendorCSSPrefix;var _4=this.$1387+": rotate("+_1.toFixed(3)+"deg);";if(_2!=null){_4+=this.$1388+": "+_2+";"}
return _4},isc.A.$136r=function isc_c_Element__updateTransformStyle(_1,_2,_3){var _4=_1.getClipHandle();if(_4==null)return;_1.$808=_1.$809=null;_1.$81b();if(!_2)_2="none";var _5=_4.style;_5[this.$139a]=_2;if(_3!=null){_5[this.$139b]=_3}});isc.B._maxIndex=isc.C+84;isc.Element.$50g=function(){var _1=this.$x4={borderLeftWidth:"border-left-width",borderRightWidth:"border-right-width",borderTopWidth:"border-top-width",borderBottomWidth:"border-bottom-width",marginLeft:"margin-left",marginRight:"margin-right",marginTop:"margin-top",marginBottom:"margin-bottom",paddingLeft:"padding-left",paddingRight:"padding-right",paddingTop:"padding-top",paddingBottom:"padding-bottom"}
var _2=this.$yc=isc.addProperties({position:"position",overflow:"overflow",top:"top",left:"left",width:"width",height:"height",display:"display"},_1);if(isc.Browser.isIE||isc.Browser.isOpera){this.$yb=isc.getKeys(_2);this.$x3=isc.getKeys(_1)}}
isc.Element.$50g();isc.ClassFactory.defineClass("Canvas");isc.isA.Canvas=function(_1){return(_1!=null&&_1._isA_Canvas)};isc.A=isc.Canvas;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A._isA_Canvas=true;isc.A.AUTO="auto";isc.A.ANYTHING="**anything**";isc.A.ABSOLUTE="absolute";isc.A.RELATIVE="relative";isc.A.INHERIT="inherit";isc.A.VISIBLE="visible";isc.A.HIDDEN="hidden";isc.A.COMPLETE="complete";isc.A.DRAWN="complete";isc.A.DRAWING_HANDLE="drawingHandle";isc.A.HANDLE_DRAWN="handleDrawn";isc.A.UNDRAWN="undrawn";isc.A.SCROLL="scroll";isc.A.CLIP_H="clip-h";isc.A.CLIP_V="clip-v";isc.A.IGNORE="ignore";isc.A.NATIVE="native";isc.A.CLIP="clip";isc.A.NESTED_DIV="nestedDiv";isc.A.CENTER="center";isc.A.LEFT="left";isc.A.RIGHT="right";isc.A.TOP="top";isc.A.BOTTOM="bottom";isc.A.UP="up";isc.A.DOWN="down";isc.A.BOTH="both";isc.A.NONE="none";isc.A.VERTICAL="vertical";isc.A.HORIZONTAL="horizontal";isc.A.MARKED="marked";isc.A.MIDDLE="middle";isc.A.ALL="all";isc.A.DEFAULT="default";isc.A.ARROW="default";isc.A.WAIT="wait";isc.A.HAND=(isc.Browser.isMoz||(isc.Browser.isSafari&&isc.Browser.isStrict)||(isc.Browser.isIE&&isc.Browser.version>=9&&isc.Browser.isStrict)?"pointer":"hand");isc.A.MOVE="move";isc.A.HELP="help";isc.A.TEXT="text";isc.A.CROSSHAIR="crosshair";isc.A.NOT_ALLOWED="not-allowed";isc.A.COL_RESIZE=(isc.Browser.isIE&&isc.Browser.version>=6?"col-resize":"e-resize");isc.A.ROW_RESIZE=(isc.Browser.isIE&&isc.Browser.version>=6?"row-resize":"n-resize");isc.A.TILE="tile";isc.A.STRETCH="stretch";isc.A.NORMAL="normal";isc.A.REPEAT="repeat";isc.A.NO_REPEAT="no-repeat";isc.A.REPEAT_X="repeat-x";isc.A.REPEAT_Y="repeat-y";isc.A.LTR="ltr";isc.A.RTL="rtl";isc.A.BEFORE="before";isc.A.AFTER="after";isc.A.NEAREST="nearest";isc.A._nextZIndex=200000;isc.A._SMALL_Z_INDEX=199950;isc.A._BIG_Z_INDEX=800000;isc.A.TAB_INDEX_GAP=50;isc.A.TAB_INDEX_FLOOR=1000;isc.A.TAB_INDEX_CEILING=32766;isc.A.$nj=[];isc.A.textStyleAttributes=["fontFamily","fontSize","color","backgroundColor","fontWeight","fontStyle","textDecoration","textAlign"];isc.A.$816=[];isc.A.allowExternalFilters=true;isc.A.$nm=[];isc.A._redrawQueueDelay=(0);isc.A.$nn=200;isc.A._canvasList=[];isc.A._iscInternalCount=0;isc.A._stats={redraws:0,clears:0,destroys:0,draws:0};isc.A.$no={};isc.A.$np={};isc.A.$nq=[];isc.A.useMozBackMasks=false;isc.A.useNativeWheelDelta=true;isc.A.scrollWheelDelta=50;isc.A.loadingImageSrc="[SKINIMG]loadingSmall.gif";isc.A.loadingImageSize=16;isc.B.push(isc.A.$814=function isc_c_Canvas__setDoublingStrings(){this.$42a=isc.Browser.isIE&&(!this.neverUseFilters||this.allowExternalFilters)?"margin:0px;border:0px;padding:0px;background-image:none;background-color:transparent;-webkit-box-shadow:none;box-shadow:none;filter:none;":"margin:0px;border:0px;padding:0px;background-image:none;background-color:transparent;-webkit-box-shadow:none;box-shadow:none;";isc.Canvas.addProperties({$4o:"' style='"+isc.Canvas.$42a});for(var i=0;i<this.$816.length;i++){var _2=this.$816[i];if(_2.target==null||_2.target.destroyed)continue;_2.target[_2.methodName](this.$42a)}},isc.A.setNeverUseFilters=function isc_c_Canvas_setNeverUseFilters(_1){this.neverUseFilters=_1;this.$814()},isc.A.setAllowExternalFilters=function isc_c_Canvas_setAllowExternalFilters(_1){this.allowExternalFilters=_1;this.$814()});isc.B._maxIndex=isc.C+3;isc.Canvas.$814();isc.A=isc.Canvas.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A._isA_Canvas=true;isc.A.autoDraw=true;isc.A.allowContentAndChildren=true;isc.A.htmlPosition="afterBegin";isc.A.position=null;isc.A.left=0;isc.A.top=0;isc.A.defaultWidth=100;isc.A.defaultHeight=100;isc.A.minWidth=10;isc.A.maxWidth=10000;isc.A.minHeight=10;isc.A.maxHeight=10000;isc.A.zIndex=isc.Canvas.AUTO;isc.A.shrinkElementOnHide=false;isc.A.autoShowParent=false;isc.A.visibility=isc.Canvas.INHERIT;isc.A.hideUsingDisplayNone=false;isc.A.styleName="normal";isc.A.contents=isc.nbsp;isc.A.backgroundRepeat=isc.Canvas.REPEAT;isc.A.mozOutlineOffset="-1px";isc.A.appImgDir="";isc.A.skinImgDir="images/";isc.A.cursor=isc.Canvas.DEFAULT;isc.A.disabledCursor=isc.Canvas.DEFAULT;isc.A.noDropCursor=isc.Canvas.NOT_ALLOWED;isc.A.$65q=(isc.Browser.isMoz&&isc.Browser.geckoVersion<20081201);isc.A.overflow=isc.Canvas.VISIBLE;isc.A.alwaysShowVScrollbar=false;isc.A.forceHandleOverflowHidden=false;isc.A.showCustomScrollbars=!((isc.Browser.isOpera||isc.Browser.isIE&&isc.Browser.version>4)||(isc.Browser.isUnix&&isc.Browser.isMoz&&isc.Browser.geckoVersion>=20020826&&isc.Browser.geckoVersion<=20031007));isc.A.scrollbarSize=16;isc.A.scrollbarConstructor="Scrollbar";isc.A.scrollLeft=0;isc.A.$1314=0;isc.A.scrollTop=0;isc.A.scrollDelta=20;isc.A.$nr="unset";isc.A.enabled="unset";isc.A.redrawOnDisable=false;isc.A.$jp=true;isc.A.$jo=true;isc.A.$ns=true;isc.A.$nt=true;isc.A.$jq=true;isc.A._redrawWithParent=true;isc.A.showFocusOutline=true;isc.A._useNativeTabIndex=(isc.Browser.isIE&&isc.Browser.version>=5)||isc.Browser.isSafari||(isc.Browser.isMoz&&isc.Browser.geckoVersion>=20051111);isc.A._useFocusProxy=(isc.Browser.isMoz&&isc.Browser.geckoVersion<20051111)||isc.Browser.isOpera;isc.A.contextMenuProperties={autoDraw:false,width:200,showIcons:true};isc.A.menuConstructor="Menu";isc.A.clippedCorners=["TL","TR","BL","BR"];isc.A.cornerClipColor="FFFFFF";isc.A.cornerClipImage="[SKIN]corner.gif";isc.A.cornerClipSize=10;isc.A.$nv={_generated:true,overflow:"hidden",$jp:false,$jo:false,autoDraw:false,skinImgDir:"images/corners/",draw:function(){this.Super("draw",arguments)}};isc.A.dragOutlineStyle="dragOutline";isc.A.dragStartDistance=5;isc.A.canDragScroll=true;isc.A.dragScrollDelay=100;isc.A.dragScrollThreshold="10%";isc.A.minDragScrollIncrement=1;isc.A.maxDragScrollIncrement="5%";isc.A.dragIntersectStyle=isc.EventHandler.INTERSECT_WITH_MOUSE;isc.A.dragRepositionCursor=isc.Canvas.MOVE;isc.A.dragScrollType="any";isc.A.useDragMask=false;isc.A.dragMaskType="div";isc.A.dragPlaceholderMessage="Dragging...";isc.A.dragPlaceholderStyle="normal";isc.A.hoverDelay=300;isc.A.showHover=true;isc.A.edgeMarginSize=5;isc.A.edgeCursorMap={"T":"n-resize","L":"w-resize","B":"s-resize","R":"e-resize","TL":"nw-resize","TR":"ne-resize","BL":"sw-resize","BR":"se-resize"};isc.A.dragAppearance=isc.EventHandler.OUTLINE;isc.A.dropTypes=isc.Canvas.ANYTHING;isc.A.mouseStillDownInitialDelay=400;isc.A.mouseStillDownDelay=100;isc.A.doubleClickDelay=250;isc.A.refreshVariable="refresh";isc.A.$ks=(isc.Browser.isMoz&&(!isc.Browser.isUnix||isc.Browser.geckoVersion>20031007));isc.A.$se=isc.Browser.isMoz&&isc.Browser.version>=18;isc.A.useClipDiv=isc.Browser.useClipDiv;isc.A.manageChildOverflow=true;isc.A.$nw={};isc.A.percentBox="visible";isc.A.$520="viewport";isc.A.snapHGap=20;isc.A.snapVGap=20;isc.A.snapHDirection=isc.Canvas.AFTER;isc.A.snapVDirection=isc.Canvas.AFTER;isc.A.snapAxis=isc.Canvas.BOTH;isc.A.snapOnDrop=true;isc.B.push(isc.A.$120u=function isc_Canvas__getUseNativeDrag(){var _1=this;while(_1!=null){if(_1.useNativeDrag!=null){return!!_1.canDrag&&_1.useNativeDrag}
_1=_1.getParentCanvas()}
return false},isc.A.$120v=function isc_Canvas__getNativeDragTarget(){var _1=this;while(_1!=null){if(_1.useNativeDrag!=null){if(!!_1.canDrag&&_1.useNativeDrag){return _1}}
_1=_1.getParentCanvas()}
return null},isc.A.getDragAppearance=function isc_Canvas_getDragAppearance(_1){if(_1==isc.EH.DRAG_RESIZE&&this.dragResizeAppearance!=null)
return this.dragResizeAppearance;if(_1==isc.EH.DRAG_REPOSITION&&this.dragRepositionAppearance!=null)
return this.dragRepositionAppearance;return this.dragAppearance});isc.B._maxIndex=isc.C+3;isc.A=isc.Canvas.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$nx="resize";isc.A.$ny="draw";isc.A.$nz="hidden";isc.A.$n0="redraw";isc.A.$n1="undefined";isc.A.$n2="draws";isc.A.$n3="drawing";isc.A.$n4="redraws";isc.A.$n5="autoDraw";isc.A.$n6="beforeBegin";isc.A.$n7="afterBegin";isc.A.$n8="beforeEnd";isc.A.$n9="afterEnd";isc.A.$oa=">";isc.A.$ob="'";isc.A.$77b='"';isc.A.$oc="initWidget";isc.A.iFrameHeightAdjustment=0;isc.A.$55w="html";isc.A.$54t=isc.nbsp;isc.A.$od="initial draw";isc.A.$oe="parentDrawn";isc.A.notifyAncestorsOnReflow=true;isc.A.$of="eventProxy";isc.A.reuseDOMIDs=false;isc.A.$og="canvas";isc.A.$oh="canvas_clipDiv";isc.A.clipHandleIsFocusHandle=true;isc.A.$129l=";outline-style:none";isc.A.$131k="<div id='";isc.A.$131l="<a href='#' id='";isc.A.$oi="MARGIN-LEFT:";isc.A.$oj="MARGIN-RIGHT:";isc.A.$ok="MARGIN-TOP:";isc.A.$ol="MARGIN-BOTTOM:";isc.A.$om="MARGIN:";isc.A.$on="</div>";isc.A.$131m="</a>";isc.A.$oo="</div></div>";isc.A.$op=[];isc.A.isBorderBox=(isc.Browser.isMoz||isc.Browser.isBorderBox);isc.A.$oq="isc.EH.focusInCanvas(";isc.A.$or="if(event.target!=this)return;isc.EH.focusInCanvas(";isc.A.$os="if(window.isc)isc.EH.blurFocusCanvas(";isc.A.$ot=",true);";isc.A.$ou="autoChild:";isc.A.$ov=["<DIV ID='",null,"'style='position:absolute;width:1px;height:1px;overflow:hidden;left:",null,"px;top:",null,"px;font-size:0px'>&nbsp;</DIV>"];isc.A.$ow="scrollSizeDiv";isc.A.$ox="enforceScrollSize";isc.A.$oy="-1px";isc.A.useClientRectAPI=false;isc.A.useBoxObjectAPI=false;isc.A.useBoxObjectAPISelectively=true;isc.A.$65h="0px";isc.A.$oz="left";isc.A.$o0="top";isc.A.$o1="right";isc.A.$o2="bottom";isc.A.$o3="center";isc.A.$o4="childMoved";isc.A.$o5="height";isc.A.$o6="width";isc.A.$oz="left";isc.A.$o0="top";isc.A.$o7="$o8";isc.A.$o9="%";isc.A.$pa="*";isc.A.$pb={height:"_percent_height",width:"_percent_width",left:"_percent_left",top:"_percent_top"};isc.A.$90f={height:"minHeight",width:"minWidth"};isc.A.$90u={height:"maxHeight",width:"maxWidth"};isc.A.$pc="resized";isc.A.$pd="childResized";isc.A.momentumScrolling=true;isc.A.momentumScrollTime=1500;isc.A.momentumScrollMinSpeed=200;isc.A.momentumScrollAcceleration="smoothStart";isc.A.hoopSelectorDefaults={_constructor:"Canvas",keepInParentRect:true,redrawOnResize:false,overflow:"hidden",border:"1px solid blue",opacity:10,backgroundColor:"blue"};isc.A.hoopSelectAxis="both";isc.A.shouldSetNoDropTracker=isc.Browser.isOpera;isc.A.noDropTracker="[SKIN]/shared/no_drop.png";isc.A.adjustOverflowWhileDirty=true;isc.A.$pe={hidden:true,visible:true,scroll:true,auto:true,"clip-v":true,"clip-h":true,ignore:true};isc.A.$pf="sizing";isc.A.$pg="overflow";isc.A.$148n=false;isc.A.$1390=false;isc.A.$1315="nativeScroll";isc.A.$ph="px";isc.A.$27r="none";isc.A.$411="relative";isc.A.$pi="disabled";isc.A.$27r="none";isc.A.$pj="styleName";isc.A.$pk="eventpart";isc.A.$f8="count";isc.A.$pl=["edgeImage","edgeColor","customEdges","shownEdges","edgeSize","edgeTop","edgeBottom","edgeLeft","edgeRight","edgeOffset","edgeOffsetTop","edgeOffsetBottom","edgeOffsetLeft","edgeOffsetRight","canDragResize","canDragReposition"];isc.A.shadowDepth=4;isc.A.dragResizeFromShadow=true;isc.A.$pm="shadow";isc.A.isGroup=false;isc.A.groupBorderCSS="2px solid black";isc.A.groupLabelPadding=10;isc.A.showGroupLabel=true;isc.A.groupLabelStyleName="groupLabel";isc.A.groupLabelDefaults={_constructor:"Label",overflow:"visible",height:1,width:1,$jo:false,wrap:false,vAlign:"center",align:"center",redraw:function(){var _1=this.Super("redraw",arguments);this.creator.$1332();return _1},handleParentMoved:function(){this.Super("handleParentMoved",arguments);this.creator.$1332()}};isc.B.push(isc.A.init=function isc_Canvas_init(_1,_2,_3,_4,_5,_6,_7,_8,_9,_10,_11,_12,_13){if(isc.$cv)arguments.$cw=this;if(!isc.Canvas.$80c){if(this.getDocumentBody(true)==null){isc.logWarn("Canvas created in a page outside the BODY tag. This is not supported. Isomorphic Software requires the tag to be present and all widgets be created and drawn inside it. Canvas details follow:\n"+isc.Log.echo(this))}
isc.Canvas.$80c=true}
this.ns.ClassFactory.addGlobalID(this);this._canvasList(true);if(this.position==null){this.position=this.htmlElement!=null?isc.Canvas.RELATIVE:isc.Canvas.ABSOLUTE}
if(this.className!=null&&this.logIsInfoEnabled(this.$pj)){this.logInfo("'className' property specified. This property has been deprecated in favor of 'styleName' as of SmartClient 5.5.",this.$pj)}
if(this.styleName!=null){if(this.className!=null){var _14=this.getPrototype(),_15=(this.styleName!=_14.styleName),_16=(this.className!=_14.className);if(_15)this.className=this.styleName;else if(_16)this.styleName=this.className;else this.styleName=this.className}else{this.className=this.styleName}}else if(this.className!=null){this.styleName=this.className}
if(this.size!=null)this.height=this.width=this.size;this.$pn=this.width=isc.NumberUtil.parseIfNumeric(this.width);this.$po=this.height=isc.NumberUtil.parseIfNumeric(this.height);if(this.width==null)this.width=this.defaultWidth;if(this.height==null)this.height=this.defaultHeight;this.$o8=this.height;if(isc.isA.String(this.margin)){var _17=parseInt(this.margin);if(isc.isA.Number(_17))this.margin=_17;else{this.logWarn("Invalid setting for this.margin:"+this.margin+". This should be a numeric value - ignoring");this.margin=null}}
if(isc.isA.String(this.padding)){var _18=parseInt(this.padding);if(isc.isA.Number(_18))this.padding=_18;else{this.logWarn("Invalid setting for this.padding:"+this.padding+". This should be set to a numeric value - ignoring");this.padding=null}}
if(this.border!=null&&!isc.isA.String(this.border)){this.border=this.$63e(this.border)}
if(this.borderRadius!=null&&!isc.isA.String(this.borderRadius)){this.borderRadius=this.$95d(this.borderRadius)}
if(this.percentSource)this.setPercentSource(this.percentSource,true);this.$pp=true;this.resizeTo(this.width,this.$o8,undefined,undefined,"init");this.moveTo(this.left,this.top);this.$pp=null;if(this.children&&!isc.isAn.Array(this.children))this.children=[this.children];if(this.peers&&!isc.isAn.Array(this.peers))this.peers=[this.peers];if(this.enabled!=this.$nr){this.logWarn("Widget initialized with explicitly specified 'enabled' property. This property has been deprecated - use 'disabled' instead.");this.disabled=!this.enabled}
if(this.redrawOnEnable!=null){this.logWarn("Widget initialized with deprecated 'redrawOnEnable' - use 'redrawOnDisable' instead.");this.redrawOnDisable=this.redrawOnEnable}
this.initWidget(_1,_2,_3,_4,_5,_6,_7,_8,_9,_10,_11,_12,_13);this.$pq();if(this.showShadow)this.$pr();if(this.clipCorners)this.$ps();if(this.shouldUseBackMask()){this.makeBackMask()}
if(this.isGroup){delete this.isGroup;this.setIsGroup(true)}
if(this.children)this.children.setProperty(this.$n5,false);if(this.peers)this.peers.setProperty(this.$n5,false);if(this.observes){var _19,_20,_21=this.observes,_22=_21.length;for(var i=0;i<_22;i++){var _19=_21[i];if(!_19)continue;if(isc.isA.String(_19.source))_20=this.getGlobalReference(_19.source);else _20=_19.source;if(_20){this.observe(_20,_19.message,_19.action)}}}
this.$pt();if(this.autoChildren)this.addAutoChildren(this.autoChildren);if(this.addOns)this.addAutoChildren(this.addOns);if(this._adjacentHandle&&!this.drawContext){this.drawContext={element:this._adjacentHandle}}
if(this.htmlElement){var _24=this.htmlElement;delete this.htmlElement;this.setHtmlElement(_24)}
if(this.eventProxy!=null){if(!isc.isA.Canvas(this.eventProxy)){this.logWarn("Canvas ID:'"+this.getID()+"' initialized with bad eventProxy. This property should be set to another Canvas instance. Clearing this property.")
delete this.eventProxy}else{if(this.eventProxy.$kt==null)this.eventProxy.$kt=[];this.eventProxy.$kt.add(this)}}
if(this.parentCanvas){this.parentElement=this.parentCanvas}
var _25=this.parentElement;if(_25){this.parentElement=null;if(isc.isA.String(_25))_25=window[_25];_25.addChild(this)}
if(this.autoFetchAsFilter!=null){var _26=this.autoFetchAsFilter?"substring":"exact";this.logWarn("This component has autoFetchAsFilter explicitly specified as:"+this.autoFetchAsFilter+". This attribute is deprecated in favor of this.autoFetchTextMatchStyle. Defaulting autoFetchTextMatchStyle to \""+_26+"\" based on this setting.");this.autoFetchTextMatchStyle=_26}
this.initializeValuesManager();if(this.showPanelHeader==true){if(this.setupPanelHeader)this.setupPanelHeader();if(this.refreshPanelControls)this.refreshPanelControls()}
if(this.autoDraw&&!this.parentElement&&!isc.noAutoDraw){if(isc.Browser.isSafari&&!isc.Browser.isChrome&&isc.deferAutoDraw&&!isc.Page.isLoaded()&&this.position!="relative")
{isc.Page.setEvent("load","if(window."+this.getID()+")"+this.getID()+".$77f()")}else{this.draw()}}},isc.A.$77f=function isc_Canvas__deferredAutoDraw(){if(this.destroyed||this.isDrawn())return;this.draw()},isc.A.initWidget=function isc_Canvas_initWidget(){},isc.A.setID=function isc_Canvas_setID(_1){var _2=this.pointersToThis=this.pointersToThis||[];_2.add({object:window,property:this.ID});this.ns.EH.changeClickMaskID(this.getID(),_1);this.ID=_1;window[_1]=this;this.clear();this.draw()},isc.A.clearIDs=function isc_Canvas_clearIDs(){this.clear();window[this.ID]=null;if(this.children){for(var i=0;i<this.children.length;i++){this.children[i].clearIDs()}}
if(this.peers){for(var i=0;i<this.peers.length;i++){this.peers[i].clearIDs()}}},isc.A.getByLocalId=function isc_Canvas_getByLocalId(_1){if(this.$112o){return this.$112o[_1]}else if(this.$112p&&this.$112p.$112o){return this.$112p.$112o[_1]}else{return null}},isc.A.getDrawnState=function isc_Canvas_getDrawnState(){if(this.$if==true)return isc.Canvas.COMPLETE;if(this.$pu==true)return isc.Canvas.HANDLE_DRAWN;if(this.$pv==true)return isc.Canvas.DRAWING_HANDLE;return isc.Canvas.UNDRAWN},isc.A.setDrawnState=function isc_Canvas_setDrawnState(_1){if(_1==isc.Canvas.COMPLETE)this.$if=true;else this.$if=false;if(_1==isc.Canvas.HANDLE_DRAWN)this.$pu=true;else this.$pu=false;if(_1==isc.Canvas.DRAWING_HANDLE)this.$pv=true;else this.$pv=false},isc.A.isDrawn=function isc_Canvas_isDrawn(){return!!this.$if},isc.A.handleDrawn=function isc_Canvas_handleDrawn(){return!!this.$pu},isc.A.getID=function isc_Canvas_getID(){if(this.ID==null)this.ns.ClassFactory.addGlobalID(this);return this.ID},isc.A.getAttribute=function isc_Canvas_getAttribute(_1){return this[_1]},isc.A.getInnerHTML=function isc_Canvas_getInnerHTML(_1){var _2;if(!this.containsIFrame())_2=this.getContents();else{var _3=this.getContentsURL();_3=isc.Page.getURL(_3);if(isc.rpc)_3=isc.rpc.addParamsToURL(_3,this.contentsURLParams);isc.EventHandler.registerMaskableItem(this,true);_2=this.getIFrameHTML(_3)}
return _2},isc.A.getIFrameHTML=function isc_Canvas_getIFrameHTML(_1){return"<iframe height='100%' width='100%' scrolling='"+(this.overflow==isc.Canvas.HIDDEN?"no'":"auto'")+(isc.Browser.isSafari?" id="+this.$qs("iframe"):"")+" frameborder='0' src=\""+_1+"\"></iframe>"},isc.A.$pw=function isc_Canvas__sizeIFrame(){var _1=this.getDrawnState();if(_1!=isc.Canvas.COMPLETE&&_1!=isc.Canvas.HANDLE_DRAWN)return;var _2=this.getHandle(),_3=_2?_2.firstChild:null;if(_3==null)return;_3.style.height=(this.getInnerContentHeight()-this.iFrameHeightAdjustment)+isc.px},isc.A.$px=function isc_Canvas__getInnerHTML(_1){if(isc.$cv)arguments.$cw=this;var _2=this;var _3=function completeInnerHTMLFun(_5){if(_2.$pz){var _4=_2.$pz.join(isc.emptyString);_5=(_5==null||_5==isc.nbsp?_4:_5+_4)}
if(_1!=null)_2.fireCallback(_1,"HTML",[_5]);return _5};var _5=this.getInnerHTML(_3);if(_5===false){return false}else{_1=null;return _3(_5)}},isc.A.setSnapOffsetLeft=function isc_Canvas_setSnapOffsetLeft(_1){var _2=this.snapOffsetLeft;this.snapOffsetLeft=_1;if(_2!=_1)this.$qw()},isc.A.readyToDraw=function isc_Canvas_readyToDraw(){var _1=this.getDrawnState();if(this.getDrawnState()!=isc.Canvas.UNDRAWN){var _1=this.getDrawnState();this.logWarn("draw() called on widget with current drawn state: "+_1+(_1==isc.Canvas.COMPLETE?", use redraw() instead.":", ignoring.")+this.getStackTrace(),"drawing");return false}
if(this.showIf!=null){this.convertToMethod("showIf");if(this.showIf(this)==false)return false}
if(this.getHeight()<=0||this.getWidth()<=0){if(this.$77g){this.$77h();return false}
this.logWarn("negative or zero area: height: "+this.getHeight()+", width: "+this.getWidth()+", refusing to draw"+this.getStackTrace(),"drawing");return false}
if(this.deferredDrawEvent!=null){this.logInfo("draw() called while object already pending a delayed draw - no action to take","drawing");return false}
if(this.parentElement!=null&&(!isc.isA.Canvas(this.parentElement)||this.parentElement.getDrawnState()==isc.Canvas.UNDRAWN))
{this.logWarn("Attempt to draw child of an undrawn parent - ignoring"+this.getStackTrace(),"drawing");return false}
if(isc.Browser.isSafari&&!isc.Page.isLoaded()){var _2=isc.Browser.safariVersion;if(parseInt(_2)<100){this.drawDeferred();return false}else{}}
return true},isc.A.$77h=function isc_Canvas__deferDrawForPageSize(){if(isc.Page.isLoaded())this.drawDeferred();else{isc.Page.setEvent("load",this.getID()+".$77i()")}},isc.A.$77i=function isc_Canvas__fireDeferredDrawForPageResize(){if(this.destroyed)return;if(isc.Page.getWidth()==0||isc.Page.getHeight()==0){this.delayCall("draw",null,100)}
else{this.draw()}},isc.A.$p2=function isc_Canvas__mustDocumentWrite(){return false},isc.A.$p4=function isc_Canvas__requestsDocumentWrite(){if(this.$p5)return true;var _1=this.parentElement;while(_1){if(_1.$p5)return true;_1=_1.parentElement}
if(this.children){for(var i=0;i<this.children.length;i++){if(this.children[i].$p2())return true}}
return false},isc.A.draw=function isc_Canvas_draw(_1){if(isc.$cv)arguments.$cw=this;if(!this.readyToDraw())return this;if(this.overflow==isc.Canvas.AUTO)this.getTabIndex();if(this.logIsInfoEnabled(this.$n2)){this.logInfo("draw(): drawing "+this.Class+(this.parentElement?" with parent: "+this.parentElement:"")+(!isc.Page.isLoaded()?" before page load":"")+(this.logIsDebugEnabled(this.$n2)?this.getStackTrace():""),this.$n2)}
this.$p6(this.$n2);var _2=this.doInitialFetch();if(this.peers!=null&&this.peers.getLength()>0){this.predrawPeers()}
var _3=(isc.Browser.isIE&&this.fixIEOpacity&&!this.masterElement),_4=isc.Element.cacheOffsetCoords,_5=this.parentElement!=null&&this.parentElement.$1390;if(this.position==isc.Canvas.RELATIVE){_4=false}
if(_3||_4){var _6=this.parentElement;while(_6!=null){if(_6.opacity!=null&&_6.opacity!=100){this.setOpacity(100,null,true);_3=false;if(!_4)break}
if(_6.position==isc.Canvas.RELATIVE){_4=false;if(!_3)break}
_6=_6.parentElement}}
if(_5){this.$808=this.$809=null;this.$1390=true;this.$1391=_4;this.cacheOffsetCoords=false}else{this.$1390=false;this.cacheOffsetCoords=_4;delete this.$1391}
if(this.htmlElement!=null&&this.matchElement){if(isc.isA.String(this.htmlElement))this.htmlElement=isc.Element.get(this.htmlElement);var _7=isc.Element.getNativeInnerWidth(this.htmlElement),_8=isc.Element.getNativeInnerHeight(this.htmlElement);this.setWidth(_7);this.setHeight(_8)}
var _9=this.parentElement;var _10=(!isc.Page.isLoaded()&&!this.drawContext&&(_9==null&&this.position==isc.Canvas.RELATIVE));_10=_10||this.$p2();var _11=this.separateContentInsertion;if(isc.Page.isLoaded()||!_10){this.$p8(!_11);if(_11)this.$p9();this.drawChildren();this.$qa()}else{var _6=this.parentElement;if((isc.Browser.isOpera||isc.Browser.isIE)&&this.getDocument().readyState=="complete")
{isc.Page.finishedLoading()}
this.$qb()}
if(_2)isc.RPCManager.sendQueue();if(this._useFocusProxy&&this.$kk())this.makeFocusProxy();if(this.accessKey!=null&&this.$qc()&&this.$kk()){this.$qd()}
if(this.$qe!=null)
this.enforceScrollSize(this.$qe[0],this.$qe[1]);if(this.$qf())isc.EH.$mz([this]);if(this.clipCorners)this.$qg();this.$806=this.isVisible();if(!_1&&this.$806)this.show();if(this.parentElement)this.parentElement.childDrawn(this);if(this.masterElement)this.masterElement.peerDrawn(this);if(this.parentElement==null&&isc.Page.isLoaded()&&!isc.Page.pollPageSize)
{if(this.getPageRight()>=isc.Page.getWidth()||this.getPageBottom()>=isc.Page.getHeight())
{isc.EH.fireOnPause("checkForBodyOverflowChange",{target:isc.Canvas,methodName:"checkForPageResize"},100)}}
if(this.parentElement==null&&this.position==this.$411){this.$412=this.getPageLeft();this.$413=this.getPageTop();isc.Page.setEvent("resize",this,isc.Page.FIRE_ONCE,"$414")}
if(this.useDragMask){isc.EH.registerMaskableItem(this,true)}
this.onDraw();if(!this.$qz&&this.overflow==isc.Canvas.VISIBLE){var _12=this.getVisibleWidth(),_13=this.getVisibleHeight(),w=this.getWidth(),h=this.getHeight();if(_12>w||_13>h){this.$5y(_12-w,_13-h,"Overflow on initial draw")}}
return this},isc.A.onDraw=function isc_Canvas_onDraw(){},isc.A.doInitialFetch=function isc_Canvas_doInitialFetch(){},isc.A.$qb=function isc_Canvas__writeHTML(){this.setDrawnState(isc.Canvas.DRAWING_HANDLE);var _1=this.getDocument(),_2=this.separateContentInsertion;if(this.children!=null&&this.$p2()){this.$p5=true;var _3=this.getTagStart(),_4=this.getTagEnd();_1.write(_2?_3:_3+this.$px())
this.drawChildren();_1.write(_2?this.$px()+_4:_4);this.setDrawnState(isc.Canvas.HANDLE_DRAWN)}else{_1.write(isc.SB.concat(this.getTagStart(),(_2?null:this.$px()),this.getTagEnd()));this.setDrawnState(isc.Canvas.HANDLE_DRAWN);if(_2)this.$p9();this.drawChildren()}
this.$qa();if(isc.Browser.isMoz&&this.getScrollingMechanism()==isc.Canvas.NATIVE)
this.checkNativeScroll();return this},isc.A.drawDeferred=function isc_Canvas_drawDeferred(){var _1=(isc.Page.isLoaded()?"idle":"load");if(this.deferredDrawEvent!=null){this.logInfo("drawDeferred() called when object is already pending drawing - No action to take.");return}
var _2=this.getID();this.deferredDrawEvent=isc.Page.setEvent(_1,"delete "+_2+".deferredDrawEvent;"+_2+".draw();",isc.Page.FIRE_ONCE)},isc.A.getPrintHTML=function(printProperties,callback){this.isPrinting=true;printProperties=isc.addProperties({},printProperties,this.printProperties);if(printProperties.topLevelCanvas==null){printProperties.topLevelCanvas=this;printProperties.isDrawn=this.isDrawn();printProperties.isVisible=this.isVisible()}
if(printProperties.omitControls==null)
printProperties.omitControls=isc.Canvas.printOmitControls;if(printProperties.includeControls==null)
printProperties.includeControls=isc.Canvas.printIncludeControls;var absPos=printProperties.absPos;this.currentPrintProperties=printProperties;var HTML=[this.getPrintTagStart(absPos),,,this.getPrintTagEnd(absPos)];var wentAsync=false;var self=this;var continuePrintHTMLFun=function continuePrintHTMLFun(printInnerHTML){HTML[1]=printInnerHTML;delete printProperties.inline;printProperties.absPos=self.printChildrenAbsolutelyPositioned;if(printProperties.omitComponents){var omitComponents=printProperties.omitComponents
for(var i=0;i<omitComponents.length;i++){if(isc.isA.String(omitComponents[i]))
omitComponents[i]=window[omitComponents[i]];if(!isc.isAn.Instance(omitComponents[i]))omitComponents[i]=[]}
omitComponents.removeEmpty()}
var children=self.getPrintChildren();var completePrintHTML=function completePrintHTML(childrenHTML){return self.completePrintHTMLCallback(childrenHTML,HTML,wentAsync,callback)};if(children!=null&&children.length>0){var childrenHTML=[],childCount=children.length,completedCount=0;var childHTMLComplete=function childHTMLComplete(childIndex,html){childrenHTML[childIndex]=html;++completedCount;if(completedCount==childCount){return completePrintHTML(childrenHTML)}};var thisHTML=null;for(var i=0;i<childCount;i++){var child=children[i];var func=(function(i){return function(html){return childHTMLComplete(i,html)}})(i);var childHTML=self.getChildPrintHTML(child,printProperties,func);if(childHTML!=null){thisHTML=childHTMLComplete(i,childHTML)}else{wentAsync=true}}
if(wentAsync||callback!=null){return null}else{return thisHTML}}else{return completePrintHTML()}};if(!this.children||this.children.length==0||this.allowContentAndChildren){var printInnerHTML=this.getPrintInnerHTML(continuePrintHTMLFun);if(printInnerHTML==null){wentAsync=true;return null}else{return continuePrintHTMLFun(printInnerHTML)}}else{return continuePrintHTMLFun()}},isc.A.getChildPrintHTML=function isc_Canvas_getChildPrintHTML(_1,_2,_3){return _1.getPrintHTML(_2,_3)},isc.A.completePrintHTMLCallback=function isc_Canvas_completePrintHTMLCallback(_1,_2,_3,_4){this.isPrinting=false;_2[2]=this.$134u(_1);_2=_2.join(isc.emptyString);delete this.currentPrintProperties.absPos;delete this.currentPrintProperties;if(_3||_4!=null){this.delayCall("fireCallback",[_4,"HTML,callback",[_2,_4]]);return null}else{if(!isc.Canvas.$1274){isc.logWarn("Expecting a direct return value from getPrintHTML() is deprecated. The recommended usage is to pass a callback always. See the documentation for more information on the reason for always passing a callback.");isc.Canvas.$1274=true}
return _2}},isc.A.$134u=function isc_Canvas__joinChildrenPrintHTML(_1){if(isc.isAn.Array(_1))_1=_1.join(isc.emptyString);return _1},isc.A.getPrintInnerHTML=function isc_Canvas_getPrintInnerHTML(_1){var _2=this;var _3=function completePrintInnerHTMLFun(_5){var _4=_2.children!=null&&_2.children.length>0;if(_4&&_5==_2.$54t)_5=isc.emptyString;if(_1!=null)_2.fireCallback(_1,"HTML",[_5]);return _5};var _5=this.$px(_3);if(_5===false){return null}else{_1=null;if(_5==null)_5=isc.emptyString;return _3(_5)}},isc.A.getPrintChildren=function isc_Canvas_getPrintChildren(){var _1=this.children;if(!_1||_1.length==0)return;var _2=[];for(var i=0;i<_1.length;i++){if(this.shouldPrintChild(_1[i]))_2.add(_1[i])}
return(_2.length>0)?_2:null},isc.A.shouldPrintChild=function isc_Canvas_shouldPrintChild(_1){if(_1.shouldPrint!=null)return _1.shouldPrint;if(_1.masterElement)return false;var _2=this.currentPrintProperties,_3=_2.omitControls,_4=_2.omitComponents;if(!isc.isAn.Instance(_1)||(_4&&_4.contains(_1)))
{return false}
if(_3){var _5=_2.includeControls;if(_5&&_5.length>0){for(var i=0;i<_5.length;i++){var _7=_5[i];if(isc.isA[_7]&&isc.isA[_7](_1))return true}}
for(var i=0;i<_3.length;i++){var _7=_3[i];if(isc.isA[_7]&&isc.isA[_7](_1)){return false}}}
if((!_1.isDrawn()&&_2.isDrawn)||(!_1.isVisible()&&_2.isVisible))return false;return true},isc.A.$xo=function isc_Canvas__fixPNG(){if(this.isPrinting)return false;return true},isc.A.getPrintStyleName=function isc_Canvas_getPrintStyleName(){return this.printStyleName||this.styleName},isc.A.getPrintTagStart=function isc_Canvas_getPrintTagStart(_1){var _2=this.currentPrintProperties,_3=_2.topLevelCanvas==this,_4=!_3&&!_1&&_2.inline,_5=this.getPrintStyleName();var _6;if(this.isGroup){_6=this.getPrintHTMLTagStart()}
return[_6,(_4?"<span ":"<div "),(_5?"class='"+_5+"' ":null),this.getPrintTagStartAttributes(_1),">"].join(isc.emptyString)},isc.A.getPrintHTMLTagStart=function isc_Canvas_getPrintHTMLTagStart(){var _1="<fieldset>";if(this.groupTitle!=null){_1+="<legend>"+this.groupTitle+"</legend>"}
return _1},isc.A.getPrintHTMLTagEnd=function isc_Canvas_getPrintHTMLTagEnd(){return"</fieldset>"},isc.A.getPrintTagStartAttributes=function isc_Canvas_getPrintTagStartAttributes(_1){if(_1){return" style='position:absolute;left:"+this.getLeft()+"px;top:"+this.getTop()+"px;width:"+this.getWidth()+"px;height:"+this.getHeight()+"px;' "}else if(this.printChildrenAbsolutelyPositioned){return" style='position:relative;width:"+this.getScrollWidth()+"px;height:"+this.getScrollHeight()+"px;background-color:lightblue;' "}
return null},isc.A.getPrintTagEnd=function isc_Canvas_getPrintTagEnd(_1){var _2=this.currentPrintProperties,_3=_2.topLevelCanvas==this,_4=!_3&&!_1&&_2.inline;var _5;if(this.isGroup){_5=this.getPrintHTMLTagEnd()}
var _6=(this.wrap==false)?"</div>":_4?"</span>":"</div>";if(this.isGroup)_6+=_5;return _6},isc.A.shouldUseBackMask=function isc_Canvas_shouldUseBackMask(){if(!this.useBackMask)return false;if(isc.Browser.isIE&&isc.Browser.minorVersion<5.5)return false;if(!isc.Canvas.useMozBackMasks&&isc.Browser.isMoz)return false;return true},isc.A.makeBackMask=function isc_Canvas_makeBackMask(_1){if(isc.Browser.isMoz&&!isc.Page.isLoaded()){this.$49t=_1;isc.Page.setEvent("load",this,isc.Page.FIRE_ONCE,"makeBackMask");return}
if(this.$49t){_1=this.$49t;delete this.$49t}
this._backMask=isc.BackMask.create(_1);this.addPeer(this._backMask);this._backMask.setZIndex(this.getZIndex(true)-2);this.$qi()},isc.A.makeFocusProxy=function isc_Canvas_makeFocusProxy(){if(!this._useFocusProxy||this.$qj||this.$qk||!this.isDrawn()||this.$ql!=null)return;this.$qk=true;this.$qm();this.$qk=null},isc.A.$qm=function isc_Canvas__makeFocusProxy(){if(!isc.Page.isLoaded()&&isc.Browser.isSafari){this.getTabIndex();this.$ql=isc.Page.setEvent("load",this,null,"delayedMakeFocusProxy");return}
var _1=this.getTabIndex();if(this.isDisabled())_1=-1;if(isc.Browser.isSafari&&_1==-1){return}
var _2=(isc.Browser.isSafari?1:this.getViewportWidth()),_3=(isc.Browser.isSafari?1:this.getViewportHeight());var _4=isc.Canvas.getFocusProxyString(this.getCanvasName(),true,this.getOffsetLeft()-1,this.getOffsetTop()-1,_2,_3,this.isVisible(),this.$kk(),_1,this.accessKey,false,this.$qn(),this.$qo());isc.Element.insertAdjacentHTML(this.getClipHandle(),"afterEnd",_4)
this.$qj=true},isc.A.delayedMakeFocusProxy=function isc_Canvas_delayedMakeFocusProxy(){this.$ql=null;this.makeFocusProxy()},isc.A.$qp=function isc_Canvas__clearFocusProxy(){if(!this._useFocusProxy)return;if(this.$ql!=null){isc.Page.clearEvent("load",this.$ql);this.$ql=null}
if(!this.$qj)return;var _1=this.$qq();if(_1!=null){if(isc.Browser.isDOM){if(_1.parentNode){_1.parentNode.removeChild(_1)}else{this.logWarn("Unable clear focusProxy for this widget - element has no parentNode.")}}
this.$qr=null}
this.$qj=null},isc.A.$qc=function isc_Canvas__useAccessKeyProxy(){var _1=(isc.Browser.isChrome||(isc.Browser.isMoz&&this._useNativeTabIndex));return _1},isc.A.$qd=function isc_Canvas__makeAccessKeyProxy(){var _1=this.accessKey;if(!_1||!this.isDrawn()||!this.$kk())return;var _2=this.$qs("focusProxy");var _3=isc.StringBuffer.concat("<a id='",_2,"' href='javascript:void(0)'",(isc.Browser.isChrome?"' onClick":"' onfocus"),"='var _0=window.",this.getID(),";if(_0){_0.focus()}' ","accessKey='"+_1+"'></a>");isc.Element.insertAdjacentHTML(this.getClipHandle(),"beforeEnd",_3);this.$qt=isc.Element.get(_2)},isc.A.$qu=function isc_Canvas__clearAccessKeyProxy(){var _1=this.$qt;delete this.$qt;if(_1)isc.Element.clear(_1)},isc.A.drawChildren=function isc_Canvas_drawChildren(){if(this.children==null)return true;if(this.isDrawn()){this.logWarn("drawChildren() is only safe to call BEFORE a canvas has been drawn"+this.getStackTrace());return}
if(this.children&&this.logIsInfoEnabled(this.$n3)){this.logInfo("drawChildren(): "+this.children.length+" children",this.$n3)}
this.$pt();this.layoutChildren(this.$od);if(this.manageChildOverflow)this.$qv=true;for(var i=0;i<this.children.length;i++){var _2=this.children[i];if(_2.masterElement)continue;if(!_2.isDrawn())_2.draw()}},isc.A.$qx=function isc_Canvas__completeChildOverflow(_1){if(!this.manageChildOverflow)return;this.$qv=null;this.$qy();var _2=0;for(var i=0;i<_1.length;i++){var _4=_1[i];if(_4!=null&&_4.$qz){_2++;_4.$qz=null;_4.adjustOverflow(this.$oe)}}},isc.A.predrawPeers=function isc_Canvas_predrawPeers(){if(!this.peers)return;for(var i=0;i<this.peers.getLength();i++){var _2=this.peers[i];if(_2.$q0==true){if(!isc.isA.Canvas(_2)||_2.masterElement!=this){this.peers.remove(_2);this.addPeer(_2)}
if(!_2.isDrawn())_2.draw()}}},isc.A.drawPeers=function isc_Canvas_drawPeers(){if(!this.peers)return true;if(this.logIsInfoEnabled(this.$n3)){this.logInfo("drawPeers(): "+this.peers.length+" peers","drawing")}
var _1=this.peers;this.peers=[];for(var i=0,_3;i<_1.length;i++){_3=_1[i];if(!isc.isA.Canvas(_3)||_3.masterElement!=this){this.addPeer(_3)}else{this.peers.add(_3)}}
for(i=0;i<this.peers.length;i++){var _3=this.peers[i];if(_3.snapTo||_3.snapEdge)_3.$qw();if(!_3.isDrawn())_3.draw()}},isc.A.$p8=function isc_Canvas__insertHTML(_1,_2){this.setDrawnState(isc.Canvas.DRAWING_HANDLE);var _3=_1?this.$px():null,_4=this.getTagStart(true),_5=isc.isAn.Array(_4),_6;if(_5){var _7=_4.length;_4[_4.length]=_3;_4[_4.length]=this.getTagEnd();_6=_4.join(isc.$ad);_4.length=_7}else{_6=isc.SB.concat(_4,_3,this.getTagEnd())}
var _8;var _9=this.logIsInfoEnabled(this.$n3);var _10=_2||this.drawContext;if(_10){var _11=_10.element,_12=_10.position||"beforeBegin";this.logInfo("$p8(): drawing with "+_12+" relative to element: "+this.echoLeaf(_11),"drawing");if(_12=="replace"){_12="beforeBegin";if(isc.isA.String(_11))_11=isc.Element.get(_11);_8=this.$q1(_11,_12,_6,true);_11.parentNode.removeChild(_11);this.drawContext=null;if(this.htmlElement)this.htmlElement=null}else{_8=this.$q1(_11,_12,_6,true)}}else if(this.masterElement&&(this.masterElement.getClipHandle()!=null)){if(_9){this.logInfo("inserting HTML next to master element: "+this.masterElement,"drawing")}
var _13=this.masterElement.getClipHandle();_8=this.$q1(_13,this.$n9,_6,true)}else if(this.parentElement){if(_9){this.logInfo("inserting HTML into parent: "+this.parentElement,"drawing")}
_10={element:this.parentElement.getHandle(),position:this.$n8};if(isc.screenReader&&this.parentElement.children){var _14=this.parentElement.children,i=_14.indexOf(this);for(var _16=i;_16>0;--_16){var _17=_14[_16-1];if(_17.handleDrawn()||_17.isDrawn()){_10.element=_17.getClipHandle();_10.position=this.$n9;break}}
if(_16==0){++i;for(var _18=_14.length;i<_18;++i){var _17=_14[i];if(_17.handleDrawn()||_17.isDrawn()){_10.element=_17.getClipHandle();_10.position=this.$n6;break}}}}
_8=this.$q1(_10.element,_10.position,_6,true)}else{if(_9){this.logDebug("inserting HTML at top level","drawing")}
_8=this.$q2(_6)}
if(_8!=null){if(this.$113l){this._clipDiv=_8;this.$q3=_8.firstChild}else{this.$q3=_8}}
this.setDrawnState(isc.Canvas.HANDLE_DRAWN)});isc.evalBoundary;isc.B.push(isc.A.$q2=function isc_Canvas__createAbsoluteElement(_1){return this.ns.Element.createAbsoluteElement(_1)},isc.A.$q1=function isc_Canvas__insertAdjacentHTML(_1,_2,_3,_4){return this.ns.Element.insertAdjacentHTML(_1,_2,_3,_4)},isc.A.$qa=function isc_Canvas__completeHTMLInit(){this.modifyContent();if((isc.Browser.isSafari||isc.Browser.isMoz)&&isc.Browser.isStrict&&this.containsIFrame())this.$pw();if(this.manageChildOverflow&&this.children!=null){this.$qx(this.children)}
this.setUpEvents();if(this.$q4){this.$q5(this.left,this.top,this.width,this.$o8);var _1=this.$q6;if(isc.isAn.Array(_1))this.setClip(_1)}
this.setDrawnState(isc.Canvas.COMPLETE);this.$q7=false;this.$ve();if(this.parentElement==null)isc.Canvas.$q8(this);if(this.parentElement!=null&&this.parentElement.$qv){this.$qz=true}else{this.adjustOverflow(this.$ny)}
this.drawPeers()},isc.A.setHtmlElement=function isc_Canvas_setHtmlElement(_1){if(this.htmlElement==_1)return;this.htmlElement=_1;if(!this.htmlPosition)this.htmlPosition="afterBegin";var _2=_1?{position:this.htmlPosition,element:this.htmlElement}:null;this.setDrawContext(_2)},isc.A.setHtmlPosition=function isc_Canvas_setHtmlPosition(_1){if(_1==null)_1="afterBegin";if(this.htmlPosition==_1)return;this.htmlPosition=_1;if(this.htmlElement==null)return;var _2={position:this.htmlPosition,element:this.htmlElement};this.setDrawContext(_2)},isc.A.isDirty=function isc_Canvas_isDirty(){return this.$q7==true},isc.A.markForRedraw=function isc_Canvas_markForRedraw(_1){if(isc.$cv)arguments.$cw=this;if(this.isDrawn()&&!this.isDirty()){this.$q9(_1);isc.Canvas.scheduleRedraw(this);this.$q7=true}},isc.A.readyToRedraw=function isc_Canvas_readyToRedraw(_1,_2){if(isc.$cv)arguments.$cw=this;if(!this.isDrawn()){return false}
var _3=this.ns.EH;if(_3.lastTarget==this&&(_3.$ku||_3.$km||(isc.Browser.isMobileWebkit&&_3.dragOperation==_3.DRAG_SCROLL)))
{if(_2){this.$q9(_1,true);this.priorityRedraw=true;this.$q7=false;this.markForRedraw(false)}
return false}
return true},isc.A.$q9=function isc_Canvas__logRedraw(_1,_2){if(_1==false||!this.logIsInfoEnabled(this.$n4))return;var _3=(!_1&&this.logIsDebugEnabled(this.$n4)||this.logIsDebugEnabled("redrawTrace"));var _4;if(_2==null)_4="Scheduling redraw ";else _4=(_2==true?"DEFERRED ":"")+"Immediate redraw ";this.logInfo(_4+(this.isDirty()&&_2!=null?"of dirty widget ":"")+(this.children&&this.children.length>0?"("+this.getChildCount()+" children) ":"")+"("+(_1?_1:"no reason provided")+")"+(_3?this.getStackTrace():""),this.$n4)},isc.A.redraw=function isc_Canvas_redraw(_1){if(isc.$cv)arguments.$cw=this;if(!this.readyToRedraw(_1,true))return this;this.$q9(_1,false);this.$p6(this.$n4);var _2=isc.timeStamp();this.$ra();this.$rb=isc.timeStamp()-_2;return this},isc.A.redrawIfDirty=function isc_Canvas_redrawIfDirty(_1){if(this.isDrawn()&&this.isDirty())return this.redraw(_1)},isc.A.$ra=function isc_Canvas__updateHTML(){var _1=this.logIsDebugEnabled(this.$n3),_2=this.logIsInfoEnabled(this.$n3),_3;if(_1)_3=isc.timeStamp();if(_2)this.logInfo("$ra(): redrawing","drawing");if(this.peers!=null&&this.peers.getLength()>0)this.redrawPredrawnPeers();var _4=this.children&&this.children.length>0,_5=this.allowContentAndChildren&&_4;if(_4&&!_5&&this.shouldRedrawOnResize()){_5=true}
if((!_4||_5)&&(this.getVisibleWidth()>this.getWidth()||this.getVisibleHeight()>this.getHeight()))
{if(this.notifyAncestorsOnReflow&&this.parentElement!=null){this.notifyAncestorsAboutToReflow()}
this.$q5(null,null,this.width,this.$o8)}
if(_4){if(_5)this.$p9();this.redrawChildren()}else{this.$rd()}
if(this.$qe&&!_4){delete this.$re;this.enforceScrollSize(this.$qe[0],this.$qe[1])}
this.modifyContent();this.setUpEvents();this.$q7=false;this.adjustOverflow(this.$n0,null,true);this.redrawPeers();if(_1){this.logDebug("Redraw() - Total time to redraw in DOM:"+(isc.timeStamp()-_3),"drawing")}
if(this.notifyAncestorsOnReflow&&this.parentElement!=null){this.notifyAncestorsReflowComplete()}
return this},isc.A.notifyAncestorsAboutToReflow=function isc_Canvas_notifyAncestorsAboutToReflow(){if(this.parentElement)this.parentElement.$86k(this)},isc.A.notifyAncestorsReflowComplete=function isc_Canvas_notifyAncestorsReflowComplete(){if(this.parentElement)this.parentElement.$86l(this)},isc.A.$86k=function isc_Canvas__childAboutToReflow(_1){if(this.overflow!=isc.Canvas.VISIBLE){this.$86m=this.getScrollTop();this.$86n=this.getScrollLeft();this.$417=true}else{if(this.parentElement)this.parentElement.$86k(_1)}},isc.A.$86l=function isc_Canvas__childReflowComplete(_1){if(this.overflow!=isc.Canvas.VISIBLE&&this.$417){delete this.$417;var _2=false,_3,_4;if(this.$86m!=null&&this.$86m!=this.getScrollTop()){_2=true;_4=this.$86m;delete this.$86m}
if(this.$86n!=null&&this.$86n!=this.getScrollLeft()){_2=true;_3=this.$86n;delete this.$86n}
if(_2){this.scrollTo(_3,_4,"Reset scroll position for child content reflow")}}else{if(this.parentElement)this.parentElement.$86l(_1)}},isc.A.$p9=function isc_Canvas__updateParentHTML(){var _1=this.$px(),_2=this.getHandle();while(_2.hasChildNodes()){var _3=_2.firstChild.getAttribute?_2.firstChild.getAttribute(this.$of):null;if(_3&&isc.isA.Canvas(window[_3]))break;_2.removeChild(_2.firstChild)}
isc.Element.insertAdjacentHTML(_2,this.$n7,_1)},isc.A.$rd=function isc_Canvas__updateInnerHTML(){var _1=this.isPrinting;this.isPrinting=false;var _2=this.$px();this.getHandle().innerHTML=_2;this.isPrinting=_1},isc.A.modifyContent=function isc_Canvas_modifyContent(){},isc.A.redrawChildren=function isc_Canvas_redrawChildren(){if(!this.children)return true;this.logInfo("redrawChildren(): "+this.children.length+" children","drawing");for(var _1=this.children,i=0;i<_1.length;i++){var _3=_1[i];if(!isc.isA.Canvas(_3))continue;if(_3._redrawWithParent){_3.redraw(false)}}},isc.A.redrawPredrawnPeers=function isc_Canvas_redrawPredrawnPeers(){if(!this.peers||this.peers.getLength<1)return;for(var _1=this.peers,i=0;i<_1.length;i++){if(_1[i]&&_1[i].$jp&&_1[i].$q0){_1[i].redraw("redrawPeers")}}},isc.A.redrawPeers=function isc_Canvas_redrawPeers(){if(!this.peers)return true;this.logInfo("redrawPeers(): "+this.peers.length+" peers","drawing");for(var _1=this.peers,i=0;i<_1.length;i++){if(_1[i]&&_1[i].$jp&&!_1[i].$q0){_1[i].redraw("redrawPeers")}}},isc.A.updateFromServer=function isc_Canvas_updateFromServer(_1){_1=isc.clone(_1);isc.addProperties(_1,{useXmlHttpRequest:true,evalResult:true,suppressAutoDraw:true});if(!_1.evalVars)_1.evalVars={};if(!_1.evalVars.targetComponent)_1.evalVars.targetComponent=this;isc.rpc.sendRequest(_1)},isc.A.refreshFromServer=function isc_Canvas_refreshFromServer(_1,_2,_3,_4){this.$rf("refresh",_1,_2,_3,_4)},isc.A.replaceFromServer=function isc_Canvas_replaceFromServer(_1,_2,_3,_4){this.$rf("replace",_1,_2,_3,_4)},isc.A.$rf=function isc_Canvas__refreshOrReplaceFromURL(_1,_2,_3,_4,_5){if(this.$rg){this.logWarn("Attempt to "+_1+" while "+this.$rh+" is in progress - ignoring.");return}
this.$rg=true;this.$rh=_1;this.$ri=_5;this.logDebug("Submitting to "+_1+" URL: "+_2+", with data: "+this.echo(_3));isc.Comm.sendFieldsToServer({URL:_2,fields:_3,prompt:_4,callback:this.getID()+".$rj(frame)",resultVarName:this.refreshVariable})},isc.A.$rj=function isc_Canvas__refreshReply(_1){this.$rg=false;var _2=this.$rh;var _3=_1[this.refreshVariable];if(!isc.isAn.Object(_3)){this.logError("Expected object literal for "+_2+", but got: "+isc.Log.echo(_3));return}
_3=isc.clone(_3);var _4=this;if(_2=="refresh")this.setProperties(_3);else{if(!_3._constructor)_3._constructor=this.getClassName();_4=this.replaceWith(_3)}
isc.clearPrompt();if(this.$ri){if(!isc.isA.Function(this.$ri)){this.$ri=isc.Func.expressionToFunction("canvas",this.$ri)}
if(!isc.isA.Function(this.$ri)){this.logError("Can't convert "+_2+" callback '"+this.$ri+" to a function - not firing callback!");return}
this.$ri(_4)}},isc.A.clear=function isc_Canvas_clear(_1){this.$66p=true;if(!_1&&this.logIsInfoEnabled("clears")){var _2="clear()"+(this.children&&this.children.length>0?" ("+this.getChildCount()+" children) ":"")+(this.logIsDebugEnabled("clears")?this.getStackTrace():"");this.logInfo(_2,"clears")}
this.$rk();if(this._eventMask)this.ns.EH.unregisterMaskableItem(this);if(this==isc.Canvas.$rl)isc.Canvas.hideResizeThumbs();if(this._useFocusProxy)this.$qp();if(this.children){for(var _3=this.children,i=0;i<_3.length;i++){var _5=_3[i];if(!isc.isA.Canvas(_5))continue;_5.$74w=true;_5.clear(true);_5.$74w=null}}
if(this.getHandle())this.clearHandle();if(this.parentElement)this.parentElement.childCleared(this);if(this.masterElement)this.masterElement.peerCleared(this);delete this.$re;delete this.$qt;if(this.deferredDrawEvent){isc.Page.clearEvent(this.deferredDrawEvent);delete this.deferredDrawEvent}
if(this.peers){for(var _3=this.peers,i=0;i<_3.length;i++){if(this.$74w)_3[i].$74w=true;_3[i].clear(true);_3[i].$74w=null}}
if(this.canAcceptDrop)this.ns.EH.unregisterDroppableItem(this);this.setDrawnState(isc.Canvas.UNDRAWN);delete this.$62u;delete this.$vh;this.$808=this.$809=null;delete this.$66p},isc.A.destroy=function isc_Canvas_destroy(_1,_2,_3,_4,_5){if(this.selectionComponent){this.ignore(this.selectionComponent,"selectionChanged");this.ignore(this.selectionComponent,"cellSelectionChanged")}
if(this.doNotDestroy){this.clear();return}
if(this.destroyed)return;this.destroying=true;if(this.$112p&&this.$112p.$112o){for(i in this.$112p.$112o){if(this.$112p.$112o[i]==this){delete this.$112p.$112o[i]}}}
if(this.$rm)isc.Timer.clearTimeout(this.$rn);this.hideClickMask();this.$75s(true,_1);if(isc.Hover.lastHoverCanvas==this)isc.Hover.hide();this.clear(true);if(this.masterElement)this.depeer();else if(this.parentElement)this.deparent();if(this.children){for(var _6=this.children.duplicate(),i=0;i<_6.length;i++){var _8=_6[i];if(!isc.isA.Canvas(_8))continue;if(_8.destroyWithParent===false)_8.deparent();else _8.destroy(true)}}
if(this.peers){for(var _6=this.peers.duplicate(),i=0;i<_6.length;i++){_6[i].destroy(true)}}
delete this.peers;delete this.children;if(this.hscrollbar&&!this.hscrollbar.destroyed){this.hscrollbar.destroy(true);delete this.hscrollbar}
if(this.vscrollbar&&!this.vscrollbar.destroyed){this.vscrollbar.destroy(true);delete this.vscrollbar}
if(this.$542){var _9=this.$542;for(var _10 in _9){var _11=_9[_10];for(var i=0;i<_11.length;i++){var _12=_11[i],_8=_12?window[_12]:null;if(_8&&!_8.destroyed&&_8.destroy&&!_8.dontAutoDestroy)
{_8.destroy()}}
delete this[_10]}}
if(this.eventProxy!=null)this.clearEventProxy();if(this.$kt!=null){for(var _6=this.$kt.duplicate(),i=0;i<_6.length;i++){_6[i].clearEventProxy()}}
if(this.locatorParent&&this.locatorParent.locatorChildDestroyed){this.locatorParent.locatorChildDestroyed(this)}
delete this.locatorParent;this._canvasList();isc.Canvas.$ro(this);this.$rp();isc.EH.canvasDestroyed(this);isc.ClassFactory.dereferenceGlobalID(this);if(this.pointersToThis!=null){for(var i=0;i<this.pointersToThis.length;i++){var _13=this.pointersToThis[i];if(_13.object&&(_13.object[_13.property]==this)){var _14;_13.object[_13.property]=_14}}
delete this.pointersToThis}
if(this.$rr){for(var _15 in this){delete this[_15]}}
this.$63x();this.destroyed=true;this.invokeSuper(isc.Canvas,"destroy",_1,_2,_3,_4,_5)},isc.A.markForDestroy=function isc_Canvas_markForDestroy(){if(isc.$cv)arguments.$cw=this;if(this.destroyed||this.destroying||this.isPendingDestroy())return;this.$65i=true;this.$75s(false,false);isc.Canvas.scheduleDestroy(this)},isc.A.isPendingDestroy=function isc_Canvas_isPendingDestroy(){return!this.destroyed&&!this.destroying&&(this.$65i==true)},isc.A.$75s=function isc_Canvas__logDestroy(_1,_2){if(this.$ih)return;if(_1)this.$p6("destroys");if(!_2&&this.logIsInfoEnabled("destroys")){this.logInfo((_1?"destroy()":"markForDestroy()")+(this.children&&this.children.length>0?" ("+this.getChildCount()+" children) ":"")+(this.logIsDebugEnabled("destroys")?this.getStackTrace():""),"destroys")}},isc.A.clearHandle=function isc_Canvas_clearHandle(){if(!this.getHandle())return;this.$p6("clears");this.getHandle().eventProxy=null;this.getClipHandle().eventProxy=null;var _1=this.getClipHandle();this.$q3=null;this.$rs=null;this._clipDiv=null;isc.Element.clear(_1,this._clearWithRemoveChild);_1.onscroll=null},isc.A.replaceWith=function isc_Canvas_replaceWith(_1){if(!isc.isAn.Object(_1))return;var _2;if(isc.Browser.isDOM){var _3=isc.ClassFactory.getNextGlobalID();isc.Element.insertAdjacentHTML(this.getClipHandle(),"afterEnd","<DIV ID="+_3+"></DIV>");var _2=this.getDocument().getElementById(_3);_1.drawContext={element:_2}}
var _4=this.parentElement,_5=this.masterElement,_6=(isc.isA.Layout(_4)&&_4.hasMember(this)),_7=(_6?_4.getMemberNumber(this):0);this.destroy();if(isc.isA.Canvas(_1)){_1.clear()}else{_1.autoDraw=false;_1=isc.ClassFactory.newInstance(_1);if(_1==null){this.logWarn("canvas.replaceWith(): Unable to create a widget instance from the argument passed in.  Returning.")
return}}
if(_6){_4.addMember(_1,_7)}else if(_4){_4.addChild(_1)}else if(_5){_5.addPeer(_1)}
if(!_1.isDrawn())_1.draw();if(isc.Browser.isDOM){if(_2.parentNode){_2.parentNode.removeChild(_2)}else{this.logWarn("unable to clear marker")}}
return _1},isc.A.setDrawContext=function isc_Canvas_setDrawContext(_1){var _2=this.isDrawn();this.deparent();if(_2)this.clear();this.drawContext=_1;if(_2)this.draw()},isc.A.$qs=function isc_Canvas__getDOMID(_1,_2,_3){if(_2){var _4=isc.ClassFactory.getDOMID(this.getID(),_1);if(this.reuseDOMIDs){if(!this.$63y)this.$63y=[];this.$63y[this.$63y.length]=_4}
return _4}
if(!this.$rt)this.$rt={};if(!this.$rt[_1])
this.$rt[_1]=isc.ClassFactory.getDOMID(this.getID(),_1);return this.$rt[_1]},isc.A.$557=function isc_Canvas__getDOMPartName(_1){if(!this.$rt)return null;for(var _2 in this.$rt){if(this.$rt[_2]==_1)return _2}},isc.A.$63x=function isc_Canvas__releaseDOMIDs(){if(!this.reuseDOMIDs)return;if(this.$63y){for(var i=0;i<this.$63y.length;i++){isc.ClassFactory.releaseDOMID(this.$63y[i])}}
if(this.$rt){for(var i in this.$rt){isc.ClassFactory.releaseDOMID(this.$rt[i])}}},isc.A.getCanvasName=function isc_Canvas_getCanvasName(){if(!this.$ru)this.$ru=this.$qs(this.$og,true);return this.$ru},isc.A.$rv=function isc_Canvas__getClipDivDOMID(){return this.$qs(this.$oh)},isc.A.getTransformCSS=function isc_Canvas_getTransformCSS(){if(this.rotation!=null)return";"+isc.Element.getRotationCSS(this.rotation,this.transformOrigin);return null},isc.A.getTagStart=function isc_Canvas_getTagStart(_1){var _2=isc.Canvas,_3=this.$rw();if(this.zIndex==_2.AUTO)this.zIndex=_2.getNextZIndex();var _4=(this.eventProxy?this.eventProxy.ID:this.ID);var _5=this.$1316();var _6=this.$rx(_5),_7=_6[0],_8=_6[1],_9=this.left,_10=this.top;if(this.showCustomScrollbars&&this.vscrollOn&&this.isRTL()){_9+=this.getScrollbarSize()}
if(!_2.$ry){_2.$ry=" onfocus=";_2.$rz=" onblur=";_2.$r0=" tabindex="
_2.$r1=" accessKey="}
var _11=isc.Browser.isMoz;var _12=this.opacity;if(!isc.Browser.isIE||isc.Browser.isIE9){if(_12!=null)_12=_12/100}
if(isc.Browser.isMoz){if(this.smoothFade&&(_12==1||_12==null))_12=0.9999}
var _13=isc.Browser.hasNativeDrag&&this.canDrag&&this.useNativeDrag;if(_5){var _14=this.getCurrentCursor(),_15,_16,_17=this._useNativeTabIndex;var _18=this.$95e()||"",_19=this.$95f()||"";if(this.clipHandleIsFocusHandle==false)_17=false;if(_17&&this.$kk()){_15=isc.SB.concat(_2.$ry,this.$qn(),_2.$rz,this.$qo(),!this.isDisabled()?_2.$r0+this.getTabIndex():null,(!this.$qc()&&this.accessKey!=null)?_2.$r1+this.accessKey:null);if(isc.Browser.isMoz){_16=isc.StringBuffer.concat((this.mozOutlineOffset!=null?";-moz-outline-offset:"+this.mozOutlineOffset:null),(this.mozOutlineColor!=null?";-moz-outline-color:"+this.mozOutlineColor:null),(!this.showFocusOutline?this.$129l:null))}else if(!this.showFocusOutline){_16=this.$129l}}
var _20=isc.StringBuffer.concat(this.$131k,this.$rv(),"' eventProxy=",_4,(this.ariaRole?" role='"+this.ariaRole+"'":""),(this.ariaState&&this.getAriaStateAttributes?this.getAriaStateAttributes():""),(this.className?" class='"+this.className+"'":""),_15," style='","POSITION:",this.position,";LEFT:",_9,"px;TOP:",_10,"px;WIDTH:",_7,"px;HEIGHT:",_8,"px;Z-INDEX:",this.zIndex,(this.visibility==_2.INHERIT?"":";VISIBILITY:"+this.visibility),(this.backgroundColor==null?"":";BACKGROUND-COLOR:"+this.backgroundColor),(this.backgroundImage==null?"":";BACKGROUND-IMAGE:url("+this.getImgURL(this.backgroundImage)+");BACKGROUND-REPEAT:"+this.backgroundRepeat+(this.backgroundPosition?";BACKGROUND-POSITION:"+this.backgroundPosition:"")),(this.textColor==null?"":";COLOR:"+this.textColor),_18,_19,(this.$1000()?";PADDING:0px":""),this.$r2(),(_12!=null?(this.$65q?";-moz-opacity:":";opacity:")+_12:""),(!this.isBorderBox?null:(_11?";-moz-box-sizing:border-box":";-webkit-box-sizing:border-box;box-sizing:border-box")),_16,this.getTransformCSS(),(isc.Browser.isTouch?(!this.canSelectText?";-webkit-user-select:none":";-webkit-user-select:text"):null),(isc.Browser.isTouch?";-webkit-tap-highlight-color:rgba(0,0,0,0)":null),(_13&&isc.Browser.isSafari?";-khtml-user-drag:element":null),";OVERFLOW:",_3,";' ONSCROLL='return "+_4+".$lh()'",(_13?" draggable='true'":null),">","<div id='",this.getCanvasName(),"' eventProxy='",_4,(this.textDirection!=null?"' dir='"+this.textDirection:""),"' style='POSITION:relative;",(!(this.padding>0||(this.topPadding>0&&this.bottomPadding>0))?(isc.Browser.isSafari?"-webkit-margin-collapse:separate separate;":(!(isc.Browser.isOpera&&isc.Browser.version<10)?"display:inline-block;-moz-box-sizing:border-box;box-sizing:border-box;width:100%;vertical-align:top;":"")):""),"VISIBILITY:inherit;Z-INDEX:",this.zIndex,(_14==_2.AUTO?"":";CURSOR:"+_14),(this.padding!=null?";PADDING:"+this.padding+"px":""),(this.topPadding!=null?";padding-top:"+this.topPadding+"px":""),(this.bottomPadding!=null?";padding-bottom:"+this.bottomPadding+"px":""),(this.leftPadding!=null?";padding-left:"+this.leftPadding+"px":""),(this.rightPadding!=null?";padding-right:"+this.rightPadding+"px":""),";'>")}else{var _21=65;if(!_2.$r4){_2.$r5=" style='POSITION:absolute;LEFT:";_2.$r6=" style='POSITION:relative;LEFT:";_2.$bd=" class='";_2.$416="'";_2.$r7=";VISIBILITY:";_2.$r8=";CURSOR:";var _22=_2.$r4=[];_22[2]="' eventProxy=";_22[15]="px;TOP:";_22[22]="px;WIDTH:";_22[28]="px;HEIGHT:";_22[34]="px;Z-INDEX:";_22[44]=";OVERFLOW:";_22[_21]="' ONSCROLL='return ";_22[_21+2]=".$lh()' "}
var _22=_2.$r4;_22[0]=(_13&&isc.Browser.isIE&&!isc.Browser.isIE10?this.$131l:this.$131k);_22[1]=this.getCanvasName();_22[3]=_4;if(this.className!=null){_22[4]=_2.$bd;_22[5]=this.className;_22[6]=_2.$416}else{_22[4]=_22[5]=_22[6]=null}
_22[7]=(this.textDirection!=null?" dir="+this.textDirection:null);_22[8]=(this.position==_2.RELATIVE?_2.$r6:_2.$r5);isc.$bk(_22,_9,9,6);isc.$bk(_22,_10,16,6);isc.$bk(_22,_7,23,5);isc.$bk(_22,_8,29,5);if(this.zIndex!=_2.AUTO)isc.$bk(_22,this.zIndex,35,9);else{_22[35]=this.zIndex;_22[36]=_22[37]=_22[38]=_22[39]=_22[40]=_22[41]=_22[42]=_22[43]=null}
_22[45]=_3;if(this.visibility!=_2.INHERIT){_22[46]=_2.$r7;_22[47]=this.visibility}else{_22[46]=_22[47]=null}
_22[48]=(this.backgroundColor==null?null:";BACKGROUND-COLOR:"+this.backgroundColor);_22[49]=(this.backgroundImage==null?null:";BACKGROUND-IMAGE:url("+this.getImgURL(this.backgroundImage)+");BACKGROUND-REPEAT:"+this.backgroundRepeat+(this.backgroundPosition?";BACKGROUND-POSITION:"+this.backgroundPosition:""));if(!this.isBorderBox){_22[50]=null}else{if(_11){_22[50]=";-moz-box-sizing:border-box"}else if(isc.Browser.isWebKit){_22[50]=";-webkit-box-sizing:border-box;box-sizing:border-box"}else{_22[50]=";box-sizing:border-box"}}
var _14=this.getCurrentCursor();if(_14==_2.AUTO){_22[51]=_22[52]=null}else{_22[51]=_2.$r8;_22[52]=_14}
_22[53]=this.$r2();_22[54]=(this.padding!=null?";PADDING:"+this.padding+isc.px:null);if(this.topPadding!=null)
_22[54]=(_22[54]||"")+";padding-top:"+this.topPadding+"px";if(this.bottomPadding!=null)
_22[54]=(_22[54]||"")+";padding-bottom:"+this.bottomPadding+"px";if(this.leftPadding!=null)
_22[54]=(_22[54]||"")+";padding-left:"+this.leftPadding+"px";if(this.rightPadding!=null)
_22[54]=(_22[54]||"")+";padding-right:"+this.rightPadding+"px";var _18=this.$95e()||"",_19=this.$95f()||"";_22[55]=_18+_19;if(isc.Browser.isIE&&!isc.Browser.isIE9){if(!isc.Browser.useCSSFilters&&isc.Img&&isc.isA.Img(this)){_22[56]=";filter:none;";_22[57]=null}else{if(!isc.Canvas.neverUseFilters||this.useOpacityFilter){_22[56]=(_12==null?null:";filter:progid:DXImageTransform.Microsoft.Alpha(opacity="+_12+")")}else{_22[56]=null}
if(!isc.Canvas.neverUseFilters){if(this.$r9){_22[57]=";filter:progid:DXImageTransform.Microsoft.iris(irisStyle=circle)"}else{_22[57]=null}}else{_22[57]=null}}}else{if(_12!=null){_22[56]=(this.$65q?";-moz-opacity:":";opacity:")+_12}else{_22[56]=null}}
_22[58]=this.getTransformCSS();if(isc.Browser.isWebKit){_22[59]=";-webkit-margin-collapse:collapse collapse"}else if(isc.Browser.$113k){_22[59]=";display:inline-block"}else{_22[59]=null}
if(isc.Browser.isTouch){_22[60]=!this.canSelectText?";-webkit-user-select:none":";-webkit-user-select:text";_22[61]=";-webkit-tap-highlight-color:rgba(0,0,0,0)"}else{_22[60]=null;_22[61]=null}
if(_13&&isc.Browser.isSafari){_22[62]=";-khtml-user-drag:element"}else{_22[62]=null}
if(!this.showFocusOutline){_22[63]=this.$129l}else{_22[63]=null}
if(_13&&isc.Browser.isIE&&!isc.Browser.isIE10){_22[64]=";display:block;text-decoration:none"}else{_22[64]=null}
_22[_21+1]=_4;var _23=_21+5;if(this.$kk()&&this._useNativeTabIndex&&this.clipHandleIsFocusHandle){_22[_23]=_2.$ry;_22[_23+1]=this.$qn();_22[_23+2]=_2.$rz;_22[_23+3]=this.$qo();if(!this.isDisabled()){_22[_23+4]=_2.$r0;isc.$bk(_22,this.getTabIndex(),_23+5,5,true);if(this.accessKey!=null){_22[_23+10]=_2.$r1;_22[_23+11]=this.accessKey;_23+=12}else _23+=10;if(isc.Browser.isIE&&!this.showFocusOutline){if(!_2.$sa)_2.$sa=" hideFocus=true";_22[_23++]=_2.$sa}}else _23+=4}
if(_13){_22[_23++]=" draggable='true'"}
if((this.ariaRole||this.ariaState)&&isc.Canvas.ariaEnabled()&&!isc.Canvas.useLiteAria())
{if(this.ariaRole){_22[_23++]=" role='";_22[_23++]=this.ariaRole;_22[_23++]="' "}
if(this.ariaState&&this.getAriaStateAttributes){_22[_23++]=this.getAriaStateAttributes()}}
_22.length=_23;_22[_23]=this.$oa;if(_1)_20=_22;else _20=_22.join(isc.emptyString)}
this.$113l=_5;return _20},isc.A.$r2=function isc_Canvas__getMarginHTML(){if(!this.$sb()&&this.$sc==null){if(this.margin==null)return null;return isc.SB.concat(isc.semi,this.$om,this.margin,isc.px)}
var _1=this.$sd(),_2=isc.SB.concat(isc.semi,this.$oi,_1.left,isc.px,isc.semi,this.$oj,_1.right,isc.px,isc.semi,this.$ok,_1.top,isc.px,isc.semi,this.$ol,_1.bottom,isc.px);return _2},isc.A.$95e=function isc_Canvas__getBorderHTML(){return this.border?";BORDER:"+this.border:null},isc.A.$95f=function isc_Canvas__getBorderRadiusHTML(){return this.borderRadius?";BORDER-RADIUS:"+this.borderRadius:null},isc.A.getTagEnd=function isc_Canvas_getTagEnd(){if(this.$113l)return this.$oo;var _1=isc.Browser.hasNativeDrag&&this.canDrag&&this.useNativeDrag;return(_1&&isc.Browser.isIE&&!isc.Browser.isIE10?this.$131m:this.$on)},isc.A.$rw=function isc_Canvas__getHandleOverflow(){if(this.containsIFrame()){return this.$nz}
var _1=this.overflow;var _2=(this.overflow==isc.Canvas.SCROLL||this.overflow==isc.Canvas.AUTO),_3=_2&&this.showCustomScrollbars,_4=_2&&!this.showCustomScrollbars;if(this.overflow==isc.Canvas.HIDDEN||_3)
{if(this.$ks){_1=this.$se?this.$nz:"-moz-scrollbars-none";this.$r3=true}else{_1=this.$nz}}else if(isc.Browser.isOpera&&this.overflow==isc.Canvas.VISIBLE){_1=this.$nz}else if(isc.Browser.isIE&&this.overflow==isc.Canvas.VISIBLE){if(this.forceHandleOverflowHidden)_1=this.$nz}else if(isc.Browser.isMoz){if(_4)this.$r3=true;else if(this.$ks){_1=this.$se?this.$nz:"-moz-scrollbars-none";this.$r3=true}}
if(this.$113l&&(this.overflow==isc.Canvas.CLIP_H||this.overflow==isc.Canvas.CLIP_V))
{_1=this.$nz}
return _1},isc.A.$rx=function isc_Canvas__getInitialHandleSize(_1){var _2=this.getInitialWidth(),_3=this.getInitialHeight();return this.$sf(_2,_3,_1)},isc.A.getInitialWidth=function isc_Canvas_getInitialWidth(){return this.getWidth()},isc.A.getInitialHeight=function isc_Canvas_getInitialHeight(){return this.getHeight()},isc.A.$sf=function isc_Canvas__adjustHandleSize(_1,_2,_3){var _4=this.$sd();if(_3==null)_3=this.$113l;if(_1!=null){if(this.showCustomScrollbars&&this.vscrollOn){_1-=this.getScrollbarSize()}
_1-=(_4.left+_4.right);if(this.isBorderBox){}else if(_3){if(!this.$1000(false,true)){_1-=this.getHBorderPad()}else{_1-=this.getHBorderSize()}}else{_1-=this.getHBorderPad()}}
if(_2!=null){if(this.showCustomScrollbars&&this.hscrollOn){_2-=this.getScrollbarSize()}
_2-=(_4.top+_4.bottom);if(this.isBorderBox){}else if(_3){if(!this.$1000(true,false)){_2-=this.getVBorderPad()}else{_2-=this.getVBorderSize()}}else{_2-=this.getVBorderPad()}}
if(_1!=null&&_1<1){this.logInfo("Specified width:"+this.getInitialWidth()+" adjusted for border, margin, and scrollbars would cause initial handle size to be less than or equal to zero, which is not supported. Clamping handle width to 1px.","sizing");_1=1}
if(_2!=null&&_2<1){this.logInfo("Specified height:"+this.getInitialHeight()+" adjusted for border, margin, and scrollbars would cause initial handle size to be less than or equal to zero, which is not supported. Clamping handle height to 1px.","sizing");_2=1}
var _5=this.$op;_5[0]=_1;_5[1]=_2;return _5},isc.A.$1000=function isc_Canvas__willSuppressOuterDivPadding(_1,_2){return(this.padding!=null||this.$415||(_1!=false?(this.topPadding!=null||this.bottomPadding!=null):false)||(_2!=false?(this.leftPadding!=null||this.rightPadding!=null):false))});isc.evalBoundary;isc.B.push(isc.A.$qn=function isc_Canvas__getNativeFocusHandlerString(_1){var _2=this.getID();var _3=_1?null:this.$ob;if(isc.Browser.isMoz)
return isc.SB.concat(_3,this.$or,_2,this.$ot,_3);return isc.SB.concat(_3,this.$oq,this.getID(),this.$ot,_3)},isc.A.$qo=function isc_Canvas__getNativeBlurHandlerString(_1){var _2=_1?null:this.$ob;return isc.SB.concat(_2,this.$os,this.getID(),this.$ot,_2)},isc.A.$sg=function isc_Canvas__getNativeFocusHandlerMethod(){if(!this.$sh){this.$sh=isc.$aq("event",this.$qn(true))}
return this.$sh},isc.A.$si=function isc_Canvas__getNativeBlurHandlerMethod(){if(!this.$sj){this.$sj=isc.$aq("event",this.$qo(true))}
return this.$sj},isc.A.getHandle=function isc_Canvas_getHandle(){if(isc.$cv)arguments.$cw=this;if(this.destroyed){this.logWarn("Attempt to access destroyed widget in the DOM - destroy() called at invalid time (eg: mid-draw) or invalid method called on destroy()d widget. Stack Trace:"+this.getStackTrace())}
if(!(this.$pu||this.$if))return null;if(this.$q3==null){var _1=this.getCanvasName();this.$q3=this.ns.Element.get(_1);if(this.$q3==null){this.logWarn("Unable to find handle for drawn Canvas, elementId: "+_1)}}
return this.$q3},isc.A.getClipHandle=function isc_Canvas_getClipHandle(){if(!this.$113l)return this.getHandle();if(!(this.$pu||this.$if))return null;if(this._clipDiv==null){var _1=this.$rv();this._clipDiv=this.ns.Element.get(_1);if(this._clipDiv==null){this.logWarn("Unable to find clipHandle for drawn Canvas, elementId: "+_1)}}
return this._clipDiv},isc.A.getOuterElement=function isc_Canvas_getOuterElement(){return this.getClipHandle()},isc.A.getContentElement=function isc_Canvas_getContentElement(){return this.getHandle()},isc.A.getScrollHandle=function isc_Canvas_getScrollHandle(){return this.getClipHandle()},isc.A.$sk=function isc_Canvas__getURLHandle(){if(!this.containsIFrame())return null;var _1=this.getHandle();if(!_1)return null;_1=_1.firstChild;if(_1&&_1.tagName&&(_1.tagName.toLowerCase()=="iframe"))return _1
return null},isc.A.$sl=function isc_Canvas__getFocusProxyHandle(){if(!this._useFocusProxy||!this.$qj)return null;if(!this.$qr){var _1=this.getCanvasName()+"__focusProxy";this.$qr=this.getDocument().getElementById(_1)}
return this.$qr},isc.A.$qq=function isc_Canvas__getFocusProxyParentHandle(){if(!this._useFocusProxy)return null;if(!this.$qr)this.$qr=this.$sl();return(this.$qr!=null?this.$qr.parentNode:null)},isc.A.getStyleHandle=function isc_Canvas_getStyleHandle(){if(!this.$rs){var _1=this.getClipHandle();this.$rs=(_1!=null?_1.style:null)}
return this.$rs},isc.A.setUpEvents=function isc_Canvas_setUpEvents(){if(this.canAcceptDrop)this.ns.EH.registerDroppableItem(this)},isc.A.$pt=function isc_Canvas__instantiateChildren(_1){if(!_1)_1=this.children;if(!_1)return;this.children=[];for(var i=0,_3;i<_1.length;i++){_3=_1[i];if(!_3)continue;if(!isc.isA.Canvas(_3)||_3.parentElement!=this){this.addChild(_3)}else{this.children.add(_3)}}},isc.A.$sm=function isc_Canvas__lazyAutoChildCreate(_1){_1=_1.substring(this.$ou.length);var _2=this.$d1(_1),_3=this.$543(_1);var _4=this[_2]||this[_3]?this:isc.isA.Canvas(this.creator)&&(this.creator[_2]||this.creator[_3])?this.creator:this;if(isc.isA.Canvas(_4[_1]))return _4[_1];return(_4[_1]=_4.createAutoChild(_1))},isc.A.createCanvas=function isc_Canvas_createCanvas(_1){if(isc.isA.Canvas(_1))return _1;if(_1==null)return;if(isc.isA.String(_1)){if(isc.startsWith(_1,this.$ou)){return this.$sm(_1)}
if(isc.startsWith(_1,this.$90j)){var _2=_1.substring(this.$90j.length);var _3="width";if(this.orientation==isc.Layout.VERTICAL)_3="height";var _4={autoDraw:false};_4[_3]=_2;return isc.LayoutSpacer.create(_4)}
return window[_1]}
var _5=_1.autoChildName;if(_5){return this[_5]=this.createAutoChild(_5,_1)}
var _6=_1._constructor;if(_6==null||isc.ClassFactory.getClass(_6)==null){this.logWarn("Unable to create canvas of type '"+_6+"' - no such class in runtime. Will default to Canvas.");if(isc.isA.String(_6)&&_6.contains(".")){this.logWarn("Did you make the SmartGWT class reflectable? See http://www.smartclient.com/smartgwt/javadoc/com/smartgwt/client/docs/Reflection.html")}
_6=isc.Canvas}
_1._constructor=null;_1.autoDraw=false;return isc.ClassFactory.newInstance(_6,_1)},isc.A.createCanvii=function isc_Canvas_createCanvii(_1){if(_1==null)return;for(var i=0;i<_1.length;i++){_1[i]=this.createCanvas(_1[i])}
return _1},isc.A.setEventProxy=function isc_Canvas_setEventProxy(_1){var _2=this.eventProxy;if(_2==_1)return;if(_2!=null){_2.$kt.remove(this);if(this.isDrawn()){if(this.getHandle()!=null)this.getHandle().eventProxy=null;if(this.getClipHandle()!=this.getHandle())this.getClipHandle().eventProxy=null}}
this.eventProxy=_1;if(_1!=null){if(!isc.isA.Canvas(_1)){this.logWarn("setEventProxy() passed invalid eventProxy - clearing this property");this.eventProxy=null}else{if(_1.$kt==null)_1.$kt=[];_1.$kt.add(this)}}
if(this.isDrawn())this.redraw("eventProxy updated")},isc.A.clearEventProxy=function isc_Canvas_clearEventProxy(){this.setEventProxy()},isc.A.addChild=function isc_Canvas_addChild(_1,_2,_3){if(isc.$cv)arguments.$cw=this;if(!_1)return null;if(_1==this){this.logWarn("Attempt to add a child to itself");return}
if(!isc.isAn.Instance(_1))_1=this.createCanvas(_1);if(!isc.isA.Canvas(_1)){this.logWarn("addChild(): trying to install a non-canvas as a child.  Returning.");return null}
if(_1.parentElement==this)return _1;var _4=_1.isDrawn();if(_1.parentElement)_1.deparent(_2);isc.Canvas.$ro(_1);if(_1.drawContext)_1.drawContext=null;if(_1.htmlElement)_1.htmlElement=null;_1.parentElement=this;_1.topElement=(this.topElement||this);_1.$sn();if(_2)this[_2]=_1;if(!this.children)this.children=[];if(!this.children.contains(_1))this.children.add(_1);var _5=_1.masterElement;if(_5&&_5.parentElement!=this){_5.peers.remove(_1);if(_5[_2]==_1)_5[_2]=null;_1.masterElement=null}
if(_1.peers){for(var i=0;i<_1.peers.length;i++)this.addChild(_1.peers[i])}
if(_1.isDrawn())_1.clear();if(_4&&!this.warnAboutClear&&!isc.Page.isLoaded()){this.logWarn("Adding already drawn widget:"+_1.getID()+" to new parent:"+this.getID()+". Child has been cleared so it can be drawn inside the new parent. This may be a result of autoDraw being enabled for the child.")}
if(this.isDrawn())_1.$qw();var _7=this.ns.EH;if(_7.clickMaskUp()){var _8=_7.getAllClickMaskIDs();for(var i=_8.length-1;i>=0;i--){var _9=_7.targetIsMasked(this,_8[i]);if(!_9){_7.addUnmaskedTarget(_1,_8[i]);break}else{var _10=_7.targetIsMasked(_1,_8[i]);if(!_10)_7.maskTarget(_1,_8[i])}}}
if(_3==false||_1.$so){_1.$so=null;return _1}
var _11=false,_12=(_1.$sp||!_1.tabIndex);if(isc.isA&&isc.isA.Layout&&_12&&(_1.$kk()||(_1.children!=null&&_1.children.length>0)))
{var _13=_1;while(_13.parentElement){if(isc.isA.Layout(_13.parentElement)&&_13.parentElement.isDrawn())
{_13.parentElement.updateMemberTabIndex(_13);if(_13.parentElement==this)_11=true}
_13=_13.parentElement}}
if(this.isDrawn()&&!_1.masterElement){if(this.logIsDebugEnabled(this.$n3)){this.logInfo("child added to already drawn parent: "+(isc.Page.isLoaded()?"page loaded, will draw immediately":"page not loaded, will defer child drawing"),"drawing")}
if(!_11&&_12){var _14;if(this.children.length>1){for(var i=this.children.length-2;i>=0;i--){if(this.children[i].$sp){_14=this.children[i];break}}}
if(_14==null&&this.$sp){_14=this}
if(_14!=null)_1.$sq(_14)}
_1.draw();this.adjustOverflow("addChild")}
return _1},isc.A.$sn=function isc_Canvas__updateChildrenTopElement(){if(this.dataPath)this.setDataPath(this.dataPath);var _1=this.children;if(!_1||_1.length==0)return;for(var i=0;i<_1.length;i++){var _3=_1[i];_3.topElement=this.topElement;_3.$sn()}},isc.A.reparent=function isc_Canvas_reparent(_1){if(this.getID()==_1.getID())return false;if((this.parentElement==_1.parentElement)&&this.getClipHandle()&&_1.getClipHandle()&&(this.getClipHandle().parentNode==_1.getClipHandle().parentNode)){return false}
this._adjacentHandle=_1.getClipHandle();if(_1.parentElement){_1.parentElement.addChild(this)}else{if(this.parentElement)this.deparent();else this.clear();this.draw()}
return true},isc.A.removePeer=function isc_Canvas_removePeer(_1,_2){if(_1==null)return;var _3=this.peers;if(_3==null){this.logWarn("Attempt to remove peer: "+_1+" from Canvas that does not have peers");return}
var _4=_3.indexOf(_1);if(_4<0){this.logWarn("Attempt to remove peer: "+_1+" from Canvas that is not its master");return}
if(this.parentElement){this.parentElement.removeChild(_1)}
_3.removeAt(_4);if(this[_2]==_1)this[_2]=null;_1.masterElement=null;if(_1.depeered)_1.depeered(this,_2);if(this.peerRemoved)this.peerRemoved(_1,_2)},isc.A.depeer=function isc_Canvas_depeer(_1){if(!this.masterElement)return;this.masterElement.removePeer(this,_1)},isc.A.deparent=function isc_Canvas_deparent(_1){if(!this.parentElement)return;this.parentElement.removeChild(this,_1)},isc.A.removeChild=function isc_Canvas_removeChild(_1,_2){if(isc.$cv)arguments.$cw=this;if(_1==null)return;var _3=this.children,_4;if(!_3||(_4=_3.indexOf(_1))==-1){this.logWarn("Attempt to remove child: "+_1+" from Canvas that is not its parent");return}
_3.removeAt(_4);if(this[_2]==_1)this[_2]=null;if(_1.isDrawn())_1.clear();delete _1.parentElement;delete _1.topElement;isc.Canvas.$q8(_1);if(_1.peers)_1.peers.map("deparent");if(_1.deparented)_1.deparented(this,_2);if(this.childRemoved)this.childRemoved(_1,_2)},isc.A.addPeer=function isc_Canvas_addPeer(_1,_2,_3,_4){if(!_1)return null;if(!isc.isAn.Instance(_1))_1=this.createCanvas(_1);if(_4==true)_1.$q0=true;if(_1.masterElement==this)return null;if(_1.masterElement)_1.depeer(_2);_1.masterElement=this;if(_2)this[_2]=_1;if(!this.peers)this.peers=[];if(!this.peers.contains(_1))this.peers.add(_1);if(this.parentElement){this.parentElement.addChild(_1,_2)}else if(_1.parentElement){_1.deparent()}
if(_1.$nt&&(_1.opacity!=this.opacity))
_1.setOpacity(this.opacity);if(_1.$jq&&(_1.visibility!=this.visibility)){_1.setVisibility(this.visibility)}
if(_1.snapTo||_1.snapEdge)_1.$qw();var _5=this.ns.EH;if(_5.clickMaskUp()){var _6=_5.getAllClickMaskIDs();for(var i=_6.length-1;i>=0;i--){var _8=_5.targetIsMasked(this,_6[i]);if(!_8){_5.addUnmaskedTarget(_1,_6[i]);break}else{var _9=_5.targetIsMasked(_1,_6[i]);if(!_9)_5.maskTarget(_1,_6[i])}}}
if(_3==false)return _1;if(this.isDrawn()&&!_1.isDrawn()){_1.draw();if(_1.$q0)this.redraw()}
return _1},isc.A.setSnapTo=function isc_Canvas_setSnapTo(_1){this.snapTo=_1;this.parentResized()},isc.A.getSnapTo=function isc_Canvas_getSnapTo(){return this.snapTo},isc.A.setSnapEdge=function isc_Canvas_setSnapEdge(_1){this.snapEdge=_1;this.parentResized()},isc.A.getSnapEdge=function isc_Canvas_getSnapEdge(){return this.snapEdge},isc.A.getFieldMethod=function isc_Canvas_getFieldMethod(_1,_2,_3){if(_2=="children"){if(_3=="add")return"addChild";if(_3=="remove")return"removeChild"}
return this.Super("getFieldMethod",arguments)},isc.A.getParentCanvas=function isc_Canvas_getParentCanvas(){return this.parentElement},isc.A.getMasterCanvas=function isc_Canvas_getMasterCanvas(){return this.masterElement},isc.A.getParentElements=function isc_Canvas_getParentElements(){var _1=[],_2=this.parentElement;while(_2){_1.add(_2);_2=_2.parentElement}
return _1},isc.A.contains=function isc_Canvas_contains(_1,_2){if(!_2&&_1&&_1.getParentCanvas)_1=_1.getParentCanvas();while(_1){if(_1==this)return true;if(!_1||!_1.getParentCanvas)break;_1=_1.getParentCanvas()}
return false},isc.A.$sr=function isc_Canvas__isVisibilityAncestorOf(_1){var _2=_1;while(_2){if(_2==this)return true;var _3=(_2.visibility==isc.Canvas.INHERIT);if(!_3)return false;_2=_2.parentElement}
return false},isc.A.getChildCount=function isc_Canvas_getChildCount(){if(this.children==null)return;return this.children.map("getChildCount").sum()+this.children.length},isc.A.showClickMask=function isc_Canvas_showClickMask(_1,_2,_3){var _4=this.getID();if(!this.ns.EH.clickMaskUp(_4)){return this.ns.EH.showClickMask(_1,_2,_3,_4)}},isc.A.hideClickMask=function isc_Canvas_hideClickMask(_1){if(_1==null)_1=this.getID();if(this.ns.EH.clickMaskUp(_1))this.ns.EH.hideClickMask(_1)},isc.A.clickMaskUp=function isc_Canvas_clickMaskUp(_1){if(_1==null)_1=this.getID();return this.ns.EH.clickMaskUp(_1)},isc.A.unmask=function isc_Canvas_unmask(_1){this.ns.EH.addUnmaskedTarget(this,_1)},isc.A.mask=function isc_Canvas_mask(_1){this.ns.EH.maskTarget(this,_1)},isc.A.isMasked=function isc_Canvas_isMasked(_1){return this.ns.EH.targetIsMasked(this,_1)},isc.A.$qf=function isc_Canvas__isHardMasked(){var _1=isc.EH.clickMaskRegistry;if(!_1||_1.length==0)return false;for(var i=_1.length-1;i>=0;i--){var _3=_1[i];if(!this.isMasked(_3))return false;if(isc.EH.isHardMask(_3))return true}
return false},isc.A.showComponentMask=function isc_Canvas_showComponentMask(_1){if(!this.componentMask){this.componentMask=this.addAutoChild("componentMask",isc.addProperties({},_1,{disabled:true,autoDraw:false,$nt:false}),isc.Canvas);this.componentMask.setRect(this.getOffsetLeft(),this.getOffsetTop(),this.getVisibleWidth(),this.getVisibleHeight());this.addPeer(this.componentMask)}else if(!this.componentMask.isDrawn())this.componentMask.draw();this.disableKeyboardEvents(true,true)},isc.A.hideComponentMask=function isc_Canvas_hideComponentMask(){if(this.componentMask)this.componentMask.clear();this.disableKeyboardEvents(false,true)},isc.A.setRect=function isc_Canvas_setRect(_1,_2,_3,_4,_5){if(isc.$cv)arguments.$cw=this;if(isc.isAn.Array(_1)){_2=_1[1];_3=_1[2];_4=_1[3];_1=_1[0]}else if(_1!=null&&_1.top!=null){_2=_1.top;_3=_1.width;_4=_1.height;_1=_1.left}
if(this.logIsDebugEnabled()){this.logDebug("setRect: "+this.echo({left:_1,top:_2,width:_3,height:_4}))}
var _6=this.resizeTo(_3,_4,_5,true);if(_6)this.$ss=true;this.moveTo(_1,_2,_5,true);this.$ss=null;return _6},isc.A.getRect=function isc_Canvas_getRect(){return[this.getLeft(),this.getTop(),this.getVisibleWidth(),this.getVisibleHeight()]},isc.A.getLeft=function isc_Canvas_getLeft(){var _1=this.getStyleHandle();if(_1==null)return this.left;var _2=(isc.Browser.isIE?_1.pixelLeft:parseInt(_1.left));if(this.vscrollOn&&this.showCustomScrollbars&&this.isRTL()){return _2-this.getScrollbarSize()}
return _2},isc.A.getOffsetLeft=function isc_Canvas_getOffsetLeft(){var _1=this.getClipHandle();if(isc.Browser.isMoz&&this.$st())_1=null;if(_1==null){if(this.logIsInfoEnabled()){this.logInfo("getOffsetLeft() called before widget is drawn - unable to calculate offset coordinates.  Returning specified coordinates")}
return this.left}
var _2=isc.Element.getOffsetLeft(_1);if(this.vscrollOn&&this.showCustomScrollbars&&this.isRTL()){_2-=this.getScrollbarSize()}
return _2},isc.A.setLeft=function isc_Canvas_setLeft(_1){this.moveTo(_1,null)},isc.A.getTop=function isc_Canvas_getTop(){var _1=this.getStyleHandle();if(_1==null)return this.top;var _2=(isc.Browser.isIE?_1.pixelTop:parseInt(_1.top));return _2},isc.A.getOffsetTop=function isc_Canvas_getOffsetTop(){var _1=this.getClipHandle();if(isc.Browser.isMoz&&this.$st())_1=null;if(_1==null)return this.top;var _2=isc.Element.getOffsetTop(_1);return _2},isc.A.setTop=function isc_Canvas_setTop(_1){this.moveTo(null,_1)},isc.A.getWidth=function isc_Canvas_getWidth(){return this.width},isc.A.setWidth=function isc_Canvas_setWidth(_1){this.resizeTo(_1)},isc.A.getHeight=function isc_Canvas_getHeight(){return this.$o8},isc.A.setHeight=function isc_Canvas_setHeight(_1){this.resizeTo(null,_1)},isc.A.getMinWidth=function isc_Canvas_getMinWidth(){return this.minWidth},isc.A.getMinHeight=function isc_Canvas_getMinHeight(){return this.minHeight},isc.A.getMaxWidth=function isc_Canvas_getMaxWidth(){return this.maxWidth},isc.A.getMaxHeight=function isc_Canvas_getMaxHeight(){return this.maxHeight},isc.A.getRight=function isc_Canvas_getRight(){return this.getLeft()+this.getVisibleWidth()},isc.A.setRight=function isc_Canvas_setRight(_1){if(isc.isA.Number(_1)){this.resizeTo(_1-this.getLeft(),null)}else{this.logWarn("setRight() expects an integer value")}},isc.A.getBottom=function isc_Canvas_getBottom(){return this.getTop()+this.getVisibleHeight()},isc.A.setBottom=function isc_Canvas_setBottom(_1){if(isc.isA.Number(_1)){this.resizeTo(null,_1-this.getTop())}else{this.logWarn("setBottom() expects an integer value")}},isc.A.enforceScrollSize=function isc_Canvas_enforceScrollSize(_1,_2){if(this.logIsDebugEnabled(this.$ox)){this.logDebug("enforcing scroll size:"+[_1,_2],"enforceScrollSize")}
if(!this.$pu&&!this.$if)return;if(_1==null)_1=0;if(_2==null)_2=0;if(isNaN(_1)||isNaN(_2)||(!isc.Page.isRTL()&&_1<0)||_2<0){this.logWarn("Invalid width or height in Canvas.enforceScrollSize() on component: "+this.getID()+" with sizes: "+[_1,_2]+this.getStackTrace());return}
if(this.$113l&&isc.Browser.isMoz){var _3=this.getHandle();_3.style.width=_1+isc.px;_3.style.height=_2+isc.px}else if(this.$re==null){var _4=this.$ov;var _5=this.$qs(this.$ow);_4[1]=_5;_4[3]=_1-1;_4[5]=_2-1;var _6=_4.join(isc.emptyString);this.$re=isc.Element.insertAdjacentHTML(this.getHandle(),this.$n8,_6,true);if(this.$re==null){this.$re=document.getElementById(_5)}}else if(!this.$qe||this.$qe[0]!=_1||this.$qe[1]!=_2)
{this.$re.style.left=(_1-1)+isc.px;this.$re.style.top=(_2-1)+isc.px}
this.$qe=[_1,_2]},isc.A.stopEnforcingScrollSize=function isc_Canvas_stopEnforcingScrollSize(){if(this.logIsDebugEnabled(this.$ox)){this.logDebug("stop enforcing scroll size","enforceScrollSize")}
delete this.$qe;if(!this.isDrawn())return;if(this.$113l&&isc.Browser.isMoz){var _1=this.getHandle();_1.style.removeProperty("width");_1.style.removeProperty("height")}else if(this.$re){this.$re.style.left=this.$oy;this.$re.style.top=this.$oy}},isc.A.getScrollWidth=function isc_Canvas_getScrollWidth(_1){if(isc.$cv)arguments.$cw=this;if(this.$qz){this.$qz=null;this.adjustOverflow("widthCheckWhileDeferred")}
if(this.containsIFrame()){return this.getInnerWidth()}
if(!_1&&this.$su!=null)return this.$su;var _2=0,_3=this.getClipHandle();if(_3==null){this.logDebug("No size info available from DOM, returning user-specified size");return this.getInnerWidth()}
if(this.allowNativeContentPositioning){this.$sv=true;if(isc.Browser.isSafari||(isc.Browser.isMoz&&((_3.scrollWidth||_3.offsetWidth)<=parseInt(_3.style.width))))
{_2=isc.Element.getScrollWidth(this.getHandle())}else{_2=isc.Element.getScrollWidth(_3)}
delete this.$sv}else if(isc.Browser.$113k&&this.$113l==false){_2=_3.scrollWidth}else{var _4=this.children,_5=_4&&_4.length>0,_6=0;if(!_5||this.allowContentAndChildren){if(isc.Browser.isSafari||(isc.Browser.isMoz&&isc.Browser.version>=21)||(isc.Browser.isIE&&this.$113l))
{_2=this.getHandle().scrollWidth;if(this.useClipDiv&&!this.$1000(false,true)){_2+=isc.Element.$sw(this.styleName)}}else if(isc.Browser.isMoz){var _7=this.getHandle();var _8=_3.scrollWidth,_9=_7.scrollWidth;if(_8>_9){_2=_8}else{var _10=_7.style.display;_7.style.display="inline-block";_2=_7.scrollWidth;_7.style.display=_10}}else{_6=(_3.scrollWidth||_3.offsetWidth);if(_6!=null&&_6!=this.$n1){_2=_6;if(isc.Browser.isOpera){_2-=(this.getLeftBorderSize()+this.getLeftPadding())}
if(isc.Browser.isMoz&&!this.isRTL()){_2-=this.$sx()}
if(isc.Browser.isMoz&&this.getScrollingMechanism()==isc.Canvas.NESTED_DIV)
{var _11=this.getHandle().offsetLeft;if(_11<0)_11=-_11;_2-=_11}}
if(isc.Browser.isSafari||(isc.Browser.isMoz&&_2<=parseInt(_3.style.width)))
{var _7=this.getHandle(),_12=_7.scrollWidth||_7.offsetWidth;if(_12>_2)_2=_12}}}
if(_5){var _13=this.$sy(this.children);_2=Math.max(_13,_2);if(this.$qe!=null){var _14=this.$qe[0];_2=Math.max(_2,_14)}}}
this.$su=_2;return _2},isc.A.$sy=function isc_Canvas__getWidthSpan(_1,_2){var _3=0,_4=0,_5=this.overflow==isc.Canvas.VISIBLE||this.overflow==isc.Canvas.CLIP_H,_6;var _7=this.isRTL()&&(this.overflow!=isc.Canvas.VISIBLE);if(_7)_4=this.getViewportWidth();for(var i=0;i<_1.length;i++){var _9=_1[i];if(!_9.isDrawn()&&!_9.$59d)continue;if(_2&&_9.visibility==isc.Canvas.HIDDEN)continue;var _10=(_9.position!=isc.Canvas.RELATIVE),_11=_9.getVisibleWidth(),_12=(_10?_9.getLeft():_9.getOffsetLeft());if(!_5&&_10)_11-=_9.getRightMargin();if(!_7&&(_12+_11>_4)){_4=_12+_11;_6=_9}
if(_12<_3)_3=_7?_12:Math.max(0,_12)}
return _4-_3},isc.A.getScrollHeight=function isc_Canvas_getScrollHeight(_1){if(isc.$cv)arguments.$cw=this;if(this.$qz){this.$qz=null;this.adjustOverflow("heightCheckWhileDeferred")}
if(this.containsIFrame()){return this.getInnerHeight()}
if(!_1&&this.$sz!=null)return this.$sz;var _2=0,_3=this.getScrollHandle();if(_3==null){this.logDebug("No size info available from DOM, returning user-specified size");return this.getInnerHeight()}
if(this.allowNativeContentPositioning){this.$s0=true;if(isc.Browser.isSafari||(isc.Browser.isMoz&&((_3.scrollHeight||_3.offsetHeight)<=parseInt(_3.style.height))))
{_2=isc.Element.getScrollHeight(this.getHandle())}else{_2=isc.Element.getScrollHeight(_3)}
delete this.$s0}else if(isc.Browser.$113k&&this.$113l==false){_2=_3.scrollHeight}else{var _4=(this.children&&this.children.length>0);if(!_4||this.allowContentAndChildren){if(isc.Browser.$113k){_2=this.getHandle().scrollHeight;if(!this.$1000(true,false)){_2+=isc.Element.$s1(this.styleName)}}else{var _5=(_3.scrollHeight||_3.offsetHeight);if(_5!=null&&_5!=this.$n1){_2=_5;if(isc.Browser.isMoz)_2-=this.$s2();if(this.$113l&&(isc.Browser.isSafari||(isc.Browser.isMoz&&_2<=parseInt(_3.style.height))))
{var _6=this.getHandle(),_7=_6.scrollHeight||_6.offsetHeight;if(_7>_2)_2=_7}}}}
if(_4){var _8=this.$s3(this.children);if(_8>_2){_2=_8}
if(this.$qe!=null){var _9=this.$qe[1];_2=Math.max(_2,_9)}}}
this.$sz=_2;return _2},isc.A.$s2=function isc_Canvas__offscreenChildrenHeight(){if(!isc.isAn.Array(this.children))return 0;var _1=0;for(var i=0;i<this.children.length;i++){var _3=this.children[i],_4=(_3.position==isc.Canvas.ABSOLUTE?_3.getTop():_3.getOffsetTop());if(_4<_1)_1=_4}
return-_1},isc.A.$sx=function isc_Canvas__offscreenChildrenWidth(){if(!isc.isAn.Array(this.children))return 0;if(!this.$113l)return 0;var _1=0;for(var i=0;i<this.children.length;i++){var _3=this.children[i],_4=(_3.position==isc.Canvas.ABSOLUTE?_3.getLeft():_3.getOffsetLeft());if(_4<_1)_1=_4}
return-_1},isc.A.$s3=function isc_Canvas__getHeightSpan(_1,_2){var _3=0,_4=0,_5=this.overflow==isc.Canvas.VISIBLE||this.overflow==isc.Canvas.CLIP_H;for(var i=0;i<_1.length;i++){var _7=_1[i];if(!_7.isDrawn()&&!_7.$59d)continue;if(_2&&_7.visibility==isc.Canvas.HIDDEN)continue;var _8=_7.position!=isc.Canvas.RELATIVE,_9=_7.getVisibleHeight(),_10=(_8?_7.getTop():_7.getOffsetTop());if(!_5&&_8)_9-=_7.getBottomMargin();if(_9+_10>_4)_4=_9+_10;if(_10<_3)_3=Math.max(0,_10)}
return _4-_3},isc.A.getScrollLeft=function isc_Canvas_getScrollLeft(){if(!this.isDrawn())return this.scrollLeft;var _1=this.getScrollingMechanism(),_2=this.scrollLeft;if(_1==isc.Canvas.NATIVE){_2=this.getScrollHandle().scrollLeft;if(this.isRTL()){_2=this.$92y(_2)}}else if(_1==isc.Canvas.NESTED_DIV&&this.isRTL()){_2+=this.getScrollRight()-this.$1314}
return _2},isc.A.getScrollTop=function isc_Canvas_getScrollTop(){if(!this.isDrawn()||this.getScrollingMechanism()!=isc.Canvas.NATIVE){return this.scrollTop}
return this.getScrollHandle().scrollTop},isc.A.setPageLeft=function isc_Canvas_setPageLeft(_1){this.moveBy(_1-this.getPageLeft(),0)},isc.A.setPageTop=function isc_Canvas_setPageTop(_1){this.moveBy(0,_1-this.getPageTop())},isc.A.getParentPageRect=function isc_Canvas_getParentPageRect(){if(this.parentElement){var _1=this.parentElement,_2=_1.getPageRect();var _3=_1.getLeftMargin(),_4=_1.getTopMargin();_2[0]+=_3;_2[1]+=_4;_2[2]-=(_3+_1.getRightMargin());_2[3]-=(_4+_1.getBottomMargin());var _5=_1.$tj();_2[0]+=_5.left;_2[1]+=_5.top;_2[2]-=_5.right+_5.left;_2[3]-=_5.bottom+_5.top;var _6=_1.getScrollbarSize();if(_1.vscrollOn)_2[2]-=_6;if(_1.hscrollOn)_2[3]-=_6;return this.$113b(_2)}
else return[0,0,isc.Page.getScrollWidth(),isc.Page.getScrollHeight()]},isc.A.$113b=function isc_Canvas__adjustParentPageRect(_1){if(this.peers&&this.peers.length>0){var _2=this.getPeerRect(),_3=this.getPageRect();_1[0]+=(_3[0]-_2[0]);_1[1]+=(_3[1]-_2[1]);_1[2]-=(_2[2]-_3[2]);_1[3]-=(_2[3]-_3[3])}
return _1},isc.A.setPageRect=function isc_Canvas_setPageRect(_1,_2,_3,_4,_5){if(isc.isAn.Array(_1)){_2=_1[1];_3=_1[2];_4=_1[3];_1=_1[0]}
if(this.keepInParentRect&&this.ns.EH.dragging&&this==this.ns.EH.dragMoveTarget){var _6=(_3==null&&_4==null);if(_3==null)_3=this.getVisibleWidth();if(_4==null)_4=this.getVisibleHeight();var _7=_1+_3,_8=_2+_4,_9;var _10=this.ns.EH,_11=_10.getDragTarget(_10.getLastEvent()),_12=_11.parentElement;var _13=isc.isAn.Array(this.keepInParentRect);if(_13){_9=this.keepInParentRect;if(_12){_9=_9.duplicate();_9[0]+=_12.getPageLeft();_9[1]+=_12.getPageTop()}}else{if(_12){_9=_11.$113b(_11.getParentPageRect())}else{_9=this.getParentPageRect()}}
var _14=_9[0],_15=_9[1],_16=_9[2],_17=_9[3],_18=_14+_16,_19=_15+_17;if(_12){var _20=_12.getScrollLeft(),_21=_12.getScrollWidth()-
_12.getViewportWidth()-_20,_22=_12.getScrollTop(),_23=_12.getScrollHeight()-
_12.getViewportHeight()-_22}else{var _20=isc.Page.getScrollLeft(),_21=isc.Page.getScrollWidth()-
isc.Page.getWidth()-_20,_22=isc.Page.getScrollTop(),_23=isc.Page.getScrollHeight()-
isc.Page.getHeight()-_22}
if(_21<0)_21=0;if(_23<0)_23=0;if(_6){if(_1<_14-_20){_1=_14-_20}
else if(_7>_18+_21){_1=_18+_21-_3}
if(_2<_15-_22){_2=_15-_22}
else if(_8>_19+_23){_2=_19+_23-_4}}else{if(_1<_14){_3=_3-(_14-_1);_1=_14}else if(_7>_18){_3=_3-(_7-_18)}
if(_2<_15){_4=_4-(_15-_2);_2=_15}else if(_8>_19){_4=_4-(_8-_19)}}}
this.moveBy(_1-this.getPageLeft(),_2-this.getPageTop());if(_5){var _24=this.getVisibleWidth(),_25=this.getVisibleHeight(),_26=_24-_3,_27=_25-_4;this.resizeTo(_3,_4);this.redrawIfDirty("setPageRect");var _28=(_24-this.getVisibleWidth()),_29=(_25-this.getVisibleHeight());if(_1>this.getPageLeft())_1-=(_26-_28);if(_2>this.getPageTop())_2-=(_27-_29)}else{this.resizeTo(_3,_4)}},isc.A.getCanvasOffsets=function isc_Canvas_getCanvasOffsets(_1){if(_1!=null){if(!_1.contains(this,false)){this.logWarn("getCanvasOffsets passed ancestor:"+_1+". This is not an ancestor of this component - ignoring");_1=this.parentElement}}else{_1=this.parentElement}
if(!this.isDrawn()||(isc.Browser.isMoz&&this.$st()))
{if(!this.isDrawn()&&this.position==isc.Canvas.RELATIVE){this.logWarn("getCanvasOffsets(): Called on undrawn relatively-positioned widget '"+this.getID()+"'.  The drawn coordinates can not be reliably calculated until the widget has been drawn - returning estimated position")}
var _2=this.left,_3=this.top,_4=this.parentElement;while(_1!=_4){_2+=_4.left;_3+=_4.top;_4=_4.parentElement}
return{left:_2,top:_3}}
var _5=this.getOffsets(_1);return _5},isc.A.getPageOffsets=function isc_Canvas_getPageOffsets(){if(isc.$cv)arguments.$cw=this;var _1=this.getClipHandle();if(_1&&isc.Browser.isMoz&&this.$st())_1=null;if(_1==null){if(!this.isDrawn()&&this.position==isc.Canvas.RELATIVE){this.logWarn("getPageOffsets(): Called on undrawn relatively-position widget '"+this.getID()+"'.  The page level coordinates can not be reliably calculated until the widget has been drawn - returning estimated position")}
var _2=this.parentElement;var _3,_4;if(_2){var _5=0;if(_2.hscrollOn){if(!this.isRTL())_5=_2.getScrollLeft();else{var _6=_2.getScrollWidth()-_2.getViewportWidth();_5=-1*(_6-_2.getScrollLeft())}}
var _7=_2.getPageOffsets();_3=this.getOffsetLeft()+_2.getLeftBorderSize()+_2.getLeftMargin()+_7.left-_5;_4=this.getOffsetTop()+_2.getTopBorderSize()+_2.getTopMargin()+_7.top-_2.getScrollTop()}else{_3=this.getOffsetLeft();_4=this.getOffsetTop()}
if(this.isRTL()&&this.vscrollOn&&this.showCustomScrollbars)_3-=this.getScrollbarSize();return{left:_3,top:_4}}
if(this.useClientRectAPI&&_1.getBoundingClientRect!=null){var _8=_1.getBoundingClientRect();var _3=_8.left;_3-=this.getLeftMargin();var _9=!isc.Browser.isIE9;if(_9){var _10=isc.Page.getScrollLeft(true);_3+=_10}
if(this.isRTL()){if(this.vscrollOn&&this.showCustomScrollbars){_3-=this.getScrollbarSize()}
if(isc.Browser.isIE&&(isc.Browser.version<9||!isc.Browser.isStrict)&&(isc.Page.getBodyOverflow()!=isc.Canvas.HIDDEN))
{if(isc.EH.$946==null){isc.EH.$946=(document.body.offsetWidth-
document.body.clientWidth)}
_3-=isc.EH.$946}}
var _4=_8.top;_4-=this.getTopMargin();_4+=isc.Page.getScrollTop();return{left:_3,top:_4}}
var _11=this.getOffsets(),_12=this.$sd();return{left:_11.left-_12.left,top:_11.top-_12.top}});isc.evalBoundary;isc.B.push(isc.A.getCanvasLeft=function isc_Canvas_getCanvasLeft(_1){return this.getCanvasOffsets(_1).left},isc.A.getPageLeft=function isc_Canvas_getPageLeft(){return this.getPageOffsets().left},isc.A.getOffsets=function isc_Canvas_getOffsets(_1){var _2=this.isRTL(),_3=this.ns.Element.getOffsets(this,_1,_2,true);if(_2&&this.vscrollOn&&this.showCustomScrollbars)_3.left-=this.getScrollbarSize();return _3},isc.A.getCanvasTop=function isc_Canvas_getCanvasTop(_1){return this.getCanvasOffsets(_1).top},isc.A.getPageTop=function isc_Canvas_getPageTop(){return this.getPageOffsets().top},isc.A.getPageRight=function isc_Canvas_getPageRight(_1){_1=_1||this.getPageOffsets();return _1.left+this.getVisibleWidth()},isc.A.getPageBottom=function isc_Canvas_getPageBottom(_1){_1=_1||this.getPageOffsets();return _1.top+this.getVisibleHeight()},isc.A.getPageRect=function isc_Canvas_getPageRect(){var _1=this.getPageOffsets();return[_1.left,_1.top,this.getVisibleWidth(),this.getVisibleHeight()]},isc.A.usingCSSScrollbars=function isc_Canvas_usingCSSScrollbars(){return!this.showCustomScrollbars&&(this.overflow==isc.Canvas.AUTO||this.overflow==isc.Canvas.SCROLL)},isc.A.getScrollingMechanism=function isc_Canvas_getScrollingMechanism(){if(!this.$s6){if(!this.showCustomScrollbars&&(this.overflow==isc.Canvas.AUTO||this.overflow==isc.Canvas.SCROLL))
{this.$s6=isc.Canvas.NATIVE}else{if(isc.Browser.isIE&&this.isRTL()&&(isc.Browser.version<=7||(isc.Browser.version==8&&!isc.Browser.isStrict)))
{this.$s6=isc.Canvas.NESTED_DIV}else{this.$s6=isc.Canvas.NATIVE}}}
return this.$s6},isc.A.setMargin=function isc_Canvas_setMargin(_1){this.$s7=null;this.$s8=null;if(_1==null){delete this.margin}else{var _2=_1;if(isc.isA.String(_1))_1=parseInt(_1);if(!isc.isA.Number(_1)){this.logWarn("setMargin() passed invalid margin:"+_2+", ignoring.");return}
this.margin=_1}
var _3=this.getStyleHandle();if(!_3)return;this.$883();this.adjustOverflow("setMargin");this.innerSizeChanged("Margin thickness changed")},isc.A.$883=function isc_Canvas__applyFullMargins(){var _1=this.getClipHandle();if(!_1)return;if(!this.$sb()&&this.$sc==null){_1.style.marginTop="";_1.style.marginBottom="";_1.style.marginLeft="";_1.style.marginRight="";if(this.margin==null)_1.style.margin=0;else _1.style.margin=this.margin+isc.px;return}
var _2=this.$sd();_1.style.marginTop=_2.top+isc.px;_1.style.marginLeft=_2.left+isc.px;_1.style.marginBottom=_2.bottom+isc.px;_1.style.marginRight=_2.right+isc.px},isc.A.getMargin=function isc_Canvas_getMargin(){return this.margin},isc.A.getTopMargin=function isc_Canvas_getTopMargin(){return this.$sd().top},isc.A.getLeftMargin=function isc_Canvas_getLeftMargin(){return this.$sd().left},isc.A.getBottomMargin=function isc_Canvas_getBottomMargin(){return this.$sd().bottom},isc.A.getRightMargin=function isc_Canvas_getRightMargin(){return this.$sd().right},isc.A.$88x=function isc_Canvas__removeDestroyedPeers(_1,_2){var _3=[];for(var i=0;i<_1.length;i++){if(_1[i].destroyed){_3[_3.length]={peer:_1[i],side:_2};_1[i]=null}}
_1.removeEmpty();return _3},isc.A.$sd=function isc_Canvas__calculateMargins(){var _1=this.$sc,_2=(_1!=null),_3,_4,_5,_6;if(_2){_3=_1.top;_6=_1.bottom;_4=_1.left;_5=_1.right;var _7=[];if(_3!=null)_7.addList(this.$88x(_3,"top"));if(_6!=null)_7.addList(this.$88x(_6,"bottom"));if(_4!=null)_7.addList(this.$88x(_4,"left"));if(_5!=null)_5.addList(this.$88x(_5,"right"));if(_7.length>0){for(var i=0;i<_7.length;i++){this.$wj(_7[i].peer,_7[i].side)}}
if((_3==null||_3.length==0)&&(_6==null||_6.length==0)&&(_4==null||_4.length==0)&&(_5==null||_5.length==0))_2=false}
if(!this.$sb()&&!_2)return this.$s9();var _9=this.$s8;if(_9)return _9;var _10=this.$ta();_9={left:_10.left,right:_10.right,top:_10.top,bottom:_10.bottom};if(_2){if(_3){for(var i=0;i<_3.length;i++){var _11=_3[i];_9.top+=_11.getVisibleHeight();if(_11.$55s!=null){_9.top-=_11.$55s}}}
if(_6){for(var i=0;i<_6.length;i++){var _12=_6[i];_9.bottom+=_12.getVisibleHeight();if(_12.$55s!=null){_9.bottom-=_12.$55s}}}
if(_4){for(var i=0;i<_4.length;i++){var _13=_4[i];_9.left+=_13.getVisibleWidth();if(_13.$55s!=null){_9.left-=_13.$55s}}}
if(_5){for(var i=0;i<_5.length;i++){var _14=_5[i];_9.right+=_14.getVisibleWidth();if(_14.$55s!=null){_9.right-=_14.$55s}}}}
if(this.$sb()){var _15=this.$pq();_9.left+=_15.$tb,_9.right+=_15.$tc,_9.top+=_15.$td,_9.bottom+=_15.$te}
return(this.$s8=_9)},isc.A.$ta=function isc_Canvas__getSpecifiedMargins(){var _1=this.$if;this.$if=false;var _2=this.$s9();this.$if=_1;return _2},isc.A.$s9=function isc_Canvas__calculateNormalMargins(){if(this.$s7!=null)return this.$s7;var _1={},_2=isc.px;if(!this.isDrawn()){var _3=this.margin;if(isc.isA.String(_3)){if(isc.endsWith(_3,_2)||parseInt(_3)+isc.emptyString==_3)
_3=parseInt(_3)}
if(isc.isA.Number(_3)){_1.top=_3;_1.bottom=_3;_1.left=_3;_1.right=_3;this.$s7=_1;return _1}}else{var _4=this.getStyleHandle(),_5=_4.marginLeft,_6=_4.marginRight,_7=_4.marginTop,_8=_4.marginBottom;if(isc.isA.String(_5)&&isc.endsWith(_5,_2))
_5=parseInt(_5);if(isc.isA.String(_6)&&isc.endsWith(_6,_2))
_6=parseInt(_6)
if(isc.isA.String(_7)&&isc.endsWith(_7,_2))
_7=parseInt(_7);if(isc.isA.String(_8)&&isc.endsWith(_8,_2))
_8=parseInt(_8)
if(isc.isA.Number(_5))_1.left=_5;if(isc.isA.Number(_6))_1.right=_6;if(isc.isA.Number(_7))_1.top=_7;if(isc.isA.Number(_8))_1.bottom=_8}
if(this.className){if(!isc.isA.Number(_1.left))
_1.left=isc.Element.$tf(this.className);if(!isc.isA.Number(_1.right))
_1.right=isc.Element.$tg(this.className);if(!isc.isA.Number(_1.top))
_1.top=isc.Element.$th(this.className);if(!isc.isA.Number(_1.bottom))
_1.bottom=isc.Element.$ti(this.className)}else{if(!isc.isA.Number(_1.left))
_1.left=0;if(!isc.isA.Number(_1.right))
_1.right=0;if(!isc.isA.Number(_1.top))
_1.top=0;if(!isc.isA.Number(_1.bottom))
_1.bottom=0}
return(this.$s7=_1)},isc.A.getTopBorderSize=function isc_Canvas_getTopBorderSize(){return this.$tj().top},isc.A.getBottomBorderSize=function isc_Canvas_getBottomBorderSize(){return this.$tj().bottom},isc.A.getLeftBorderSize=function isc_Canvas_getLeftBorderSize(){return this.$tj().left},isc.A.getRightBorderSize=function isc_Canvas_getRightBorderSize(){return this.$tj().right},isc.A.getHBorderSize=function isc_Canvas_getHBorderSize(){return(this.getLeftBorderSize()+this.getRightBorderSize())},isc.A.getVBorderSize=function isc_Canvas_getVBorderSize(){return this.getTopBorderSize()+this.getBottomBorderSize()},isc.A.$tj=function isc_Canvas__calculateBorderSize(){if(this.$tk!=null)return this.$tk;var _1={},_2=isc.px;if(!this.isDrawn()){var _3=this.border;if(_3!=null&&isc.contains(_3,_2)){var _4=_3.match(/\s*\d+px/g);if(isc.isAn.Array(_4))_4=parseInt(_4[0]);else _4=parseInt(_4);if(isc.isA.Number(_4)){this.$tk={left:_4,right:_4,top:_4,bottom:_4}
return this.$tk}}}else{var _5=this.getStyleHandle(),_6=_5.borderLeftWidth,_7=_5.borderRightWidth,_8=_5.borderTopWidth,_9=_5.borderBottomWidth;if(isc.isA.String(_6)&&isc.endsWith(_6,_2))
_6=parseInt(_6);if(isc.isA.String(_7)&&isc.endsWith(_7,_2))
_7=parseInt(_7)
if(isc.isA.String(_8)&&isc.endsWith(_8,_2))
_8=parseInt(_8);if(isc.isA.String(_9)&&isc.endsWith(_9,_2))
_9=parseInt(_9)
if(isc.isA.Number(_6))_1.left=_6;if(isc.isA.Number(_7))_1.right=_7;if(isc.isA.Number(_8))_1.top=_8;if(isc.isA.Number(_9))_1.bottom=_9}
var _10=this.$95g();if(_10){if(!isc.isA.Number(_1.left))
_1.left=isc.Element.$tl(_10);if(!isc.isA.Number(_1.right))
_1.right=isc.Element.$tm(_10);if(!isc.isA.Number(_1.top))
_1.top=isc.Element.$tn(_10);if(!isc.isA.Number(_1.bottom))
_1.bottom=isc.Element.$to(_10)}else{if(!isc.isA.Number(_1.left))
_1.left=0;if(!isc.isA.Number(_1.right))
_1.right=0;if(!isc.isA.Number(_1.top))
_1.top=0;if(!isc.isA.Number(_1.bottom))
_1.bottom=0}
return(this.$tk=_1)},isc.A.$95g=function isc_Canvas__getBorderClassName(){return this.className},isc.A.setTopPadding=function isc_Canvas_setTopPadding(_1){this.$tp=null;this.topPadding=_1;if(isc.isA.Number(_1))_1+="px";if(this.isDrawn()){var _2=this.$113l?this.getHandle().style:this.getStyleHandle();_2.paddingTop=_1}},isc.A.setLeftPadding=function isc_Canvas_setLeftPadding(_1){this.$tp=null;this.leftPadding=_1;if(isc.isA.Number(_1))_1+="px";if(this.isDrawn()){var _2=this.$113l?this.getHandle().style:this.getStyleHandle();_2.paddingLeft=_1}},isc.A.setRightPadding=function isc_Canvas_setRightPadding(_1){this.$tp=null;this.rightPadding=_1;if(isc.isA.Number(_1))_1+="px";if(this.isDrawn()){var _2=this.$113l?this.getHandle().style:this.getStyleHandle();_2.paddingRight=_1}},isc.A.setBottomPadding=function isc_Canvas_setBottomPadding(_1){this.$tp=null;this.bottomPadding=_1;if(isc.isA.Number(_1))_1+="px";if(this.isDrawn()){var _2=this.$113l?this.getHandle().style:this.getStyleHandle();_2.paddingBottom=_1}},isc.A.setPadding=function isc_Canvas_setPadding(_1){this.$tp=null;if(_1!=null){var _2=_1;if(isc.isA.String(_1))_1=parseInt(_1);if(!isc.isA.Number(_1)){this.logWarn("setPadding passed unrecognized value:"+_2+" - ignoring");return}}
this.padding=_1;var _3=isc.Browser.isDOM?this.getHandle():null;if(!_3){return}
if(_1==null){_3.style.padding=null;if(this.$113l)this.getClipHandle().style.padding=null}else{_3.style.padding=this.padding+isc.px;if(this.$113l)this.getClipHandle().style.padding=this.$65h}},isc.A.getPadding=function isc_Canvas_getPadding(){return this.padding},isc.A.getTopPadding=function isc_Canvas_getTopPadding(){return this.$tq().top},isc.A.getBottomPadding=function isc_Canvas_getBottomPadding(){return this.$tq().bottom},isc.A.getLeftPadding=function isc_Canvas_getLeftPadding(){return this.$tq().left},isc.A.getRightPadding=function isc_Canvas_getRightPadding(){return this.$tq().right},isc.A.getVPadding=function isc_Canvas_getVPadding(){return this.getTopPadding()+this.getBottomPadding()},isc.A.getHPadding=function isc_Canvas_getHPadding(){return this.getLeftPadding()+this.getRightPadding()},isc.A.$tq=function isc_Canvas__calculatePadding(){if(this.$tp!=null)return this.$tp;var _1={},_2=isc.px;if(this.isDrawn()&&this.getHandle()!=null){var _3=this.getHandle().style;if(_3.paddingTop!=null&&!isc.isAn.emptyString(_3.paddingTop)&&isc.endsWith(_3.paddingTop,_2)){_1.top=parseInt(_3.paddingTop)}
if(_3.paddingBottom!=null&&!isc.isAn.emptyString(_3.paddingBottom)&&isc.endsWith(_3.paddingBottom,_2)){_1.bottom=parseInt(_3.paddingBottom)}
if(_3.paddingLeft!=null&&!isc.isAn.emptyString(_3.paddingLeft)&&isc.endsWith(_3.paddingLeft,_2)){_1.left=parseInt(_3.paddingLeft)}
if(_3.paddingRight!=null&&!isc.isAn.emptyString(_3.paddingRight)&&isc.endsWith(_3.paddingRight,_2)){_1.right=parseInt(_3.paddingRight)}}else{if(this.topPadding!=null)_1.top=this.topPadding;if(this.leftPadding!=null)_1.left=this.leftPadding;if(this.rightPadding!=null)_1.right=this.rightPadding;if(this.bottomPadding!=null)_1.bottom=this.bottomPadding;if(this.padding!=null){var _4=parseInt(this.padding);if(_1.left==null)_1.left=_4;if(_1.top==null)_1.top=_4;if(_1.bottom==null)_1.bottom=_4;if(_1.right==null)_1.right=_4}}
if(this.className){if(!isc.isA.Number(_1.left))_1.left=isc.Element.$tr(this.className);if(!isc.isA.Number(_1.right))_1.right=isc.Element.$ts(this.className);if(!isc.isA.Number(_1.top))_1.top=isc.Element.$tt(this.className);if(!isc.isA.Number(_1.bottom))_1.bottom=isc.Element.$tu(this.className)}else{if(!isc.isA.Number(_1.left))_1.left=0;if(!isc.isA.Number(_1.right))_1.right=0;if(!isc.isA.Number(_1.top))_1.top=0;if(!isc.isA.Number(_1.bottom))_1.bottom=0}
return(this.$tp=_1)},isc.A.containsPoint=function isc_Canvas_containsPoint(_1,_2,_3){if(isc.$cv)arguments.$cw=this;if(!this.isVisible()||!this.isDrawn())return false;if(_3==null)_3=false;var _4=this.getPageLeft()+this.getLeftMargin();if(_1<_4){return false}
var _5=this.getPageTop()+this.getTopMargin();if(_2<_5){return false}
var _6=_3?this.getViewportWidth():(this.getVisibleWidth()-this.getHMarginSize());if(_1>_4+_6){return false}
var _7=_3?this.getViewportHeight():(this.getVisibleHeight()-this.getVMarginSize());if(_2>_5+_7){return false}
var _8=0,_9=0;var _10=this.$tv=this.$tv||[];_10.length=1;_10[0]=this;var i=1,_12=this;while(_12.parentElement!=null){_12=_12.parentElement
_10[i]=_12;i++}
var _13,_14;for(var j=_10.length-1;j>=0;j--){var _16=_10[j];var _17=_16.getCanvasOffsets();_8+=_17.left;_9+=_17.top;if(_16==this&&!_3){_13=_16.getVisibleWidth()-_16.getHMarginSize();_14=_16.getVisibleHeight()-_16.getVMarginSize()}else{_13=_16.getViewportWidth();_14=_16.getViewportHeight()}
if(!((_1>=_8)&&(_1<=_8+_13)&&(_2>=_9)&&(_2<=_9+_14)))
{return false}}
return true},isc.A.visibleAtPoint=function isc_Canvas_visibleAtPoint(_1,_2,_3,_4,_5){if(isc.$cv)arguments.$cw=this;if(!this.containsPoint(_1,_2,_3)){return false}
if(!isc.isAn.Array(_4))_4=[_4];var _6=this;while(_6!=null&&_6!=_5){var _7=(_6.parentElement!=null?_6.parentElement.children:isc.Canvas.$tw);for(var i=0;i<_7.length;i++){var _9=_7[i];if(_9==null||_9==_6||!_9.isDrawn()||!_9.isVisible()||_4.contains(_9)||_9.isMouseTransparent||(_9.getZIndex()<_6.getZIndex()))
{continue}
if(_9.$jr)continue;if(isc.isA.Scrollbar(_9)||isc.isA.ScrollThumb(_9))continue;if(isc.EdgedCanvas&&isc.isA.EdgedCanvas(_9)&&_9.masterElement&&_9.masterElement.$l0==_9)continue;if(isc.Layout&&isc.isA.Layout(_9.parentElement)&&_9.parentElement.hasMember(_9)&&_9.parentElement.hasMember(_6))
{continue}
if(isc.TabSet&&isc.isA.TabBar(_9)&&isc.isA.TabSet(_9.parentElement)&&_9.parentElement.paneContainer&&_9.parentElement.paneContainer.contains(this))
{continue}
if(_9.containsPoint(_1,_2,false)){return false}}
_6=_6.parentElement}
return true},isc.A.scrollIntoView=function isc_Canvas_scrollIntoView(_1,_2,_3,_4,_5,_6,_7,_8,_9,_10){if(_3==null)_3=0;if(_4==null)_4=0;if(_10==null){_10=this}
if(this.isRTL()){_1=this.$95h(_1,false)}
var _11=true;var _12,_13;if(this.overflow!=isc.Canvas.VISIBLE&&this.overflow!=isc.Canvas.IGNORE){if(_1!=null){var _14=this.getScrollLeft(),_15=this.getViewportWidth(),_16=_14+_15,_17=false,_18=false;if(_1+_3>_16){_17=true}
if(_1<_14){_18=true}
if(_17!=_18||_9){if(_5==this.$oz){_12=_1}else if(_5==this.$o1){_12=(_1+_3)-this.getViewportWidth()}else{_12=(_1+parseInt(_3/2))
-parseInt(this.getViewportWidth()/2)}}}
if(_2!=null){var _19=this.getScrollTop(),_20=_19+this.getViewportHeight(),_21=false,_22=false;if(_2+_4>_20)_22=true;if(_2<_19)_21=true;if(_21!=_22||_9){if(_6==this.$o0){_13=_2}else if(_6==this.$o2){_13=(_2+_4)-this.getViewportHeight()}else{_13=(_2+parseInt(_4/2))
-parseInt(this.getViewportHeight()/2)}}}
if(_12!=null||_13!=null){if(_7){this.animateScroll(_12,_13,_8);_11=false}else{this.scrollTo(_12,_13,"scrollIntoView")}}}
if(this.parentElement!=null){var _23=_1,_24=_2;if(_23!=null){_23-=(_12!=null?_12:this.getScrollLeft());_23+=this.getOffsetLeft()}
if(_24!=null){_24-=(_13!=null?_13:this.getScrollTop());_24+=this.getOffsetTop()}
this.parentElement.scrollIntoView(_23,_24,_3,_4,null,null,null,null,null,_10)}
if(_8&&_11)this.fireCallback(_8)},isc.A.intersects=function isc_Canvas_intersects(_1){var _2=_1.getPageLeft(),_3=_1.getVisibleWidth(),_4=_1.getPageTop(),_5=_1.getVisibleHeight();return this.intersectsRect(_2,_4,_3,_5)},isc.A.intersectsRect=function isc_Canvas_intersectsRect(_1,_2,_3,_4){var _5,_6=[];if(isc.isAn.Array(_1))_5=_1;else _5=[_1,_2,_3,_4];return isc.Canvas.rectsIntersect(_5,[this.getPageLeft(),this.getPageTop(),this.getVisibleWidth(),this.getVisibleHeight()])},isc.A.containsEvent=function isc_Canvas_containsEvent(){return this.containsPoint(this.ns.EH.getX(),this.ns.EH.getY())},isc.A.getEventEdge=function isc_Canvas_getEventEdge(_1,_2){var _3=this.ns.EH;if(!_1)_1=(this.resizeFrom||_3.ALL_EDGES);var _4=this.edgeMarginSize;if(!isc.isAn.Array(_1))_1=[_1];var _5=this.$ta(),_6=_5.left,_7=_5.right,_8=_5.top,_9=_5.bottom;var _10=this.getPageOffsets(),_11=_10.left+_6,_12=_10.top+_8,_13=(this.getPageRight(_10)-_7)+1,_14=(this.getPageBottom(_10)-_9)+1,_15="",_16="",x,y;if(_2){x=_2[0];y=_2[1]}else{x=_3.getX();y=_3.getY()}
if(y<_12||y>_14||x<_11||x>_13)return null;if(y>=(_14-_4)&&y<=_14)_16="B";else if(y>=_12&&y<=(_12+_4+1))_16="T";if(x>=(_13-_4)&&x<=_13)_15="R";else if(x>=_11&&x<=(_11+_4+1))_15="L";if(_15!=""||_16!=""){var _19=_16+_15;if(_1.contains(_19))return _19;else if(_15!=""&&_1.contains(_15))return _15;else if(_16!=""&&_1.contains(_16))return _16}
return null},isc.A.getOffsetX=function isc_Canvas_getOffsetX(){var _1=this.ns.EH.getX()
-(this.getPageLeft()+this.getLeftBorderSize())+this.getScrollLeft()
-(this.vscrollOn&&this.isRTL()?this.getScrollbarSize():0);return _1},isc.A.getOffsetY=function isc_Canvas_getOffsetY(){return this.ns.EH.getY()+this.getScrollTop()
-(this.getPageTop()+this.getTopBorderSize())},isc.A.setClip=function isc_Canvas_setClip(_1,_2,_3,_4){if(isc.isAn.Array(_1))
this.$q6=_1;else
this.$q6=[_1,_2,_3,_4];var _5=this.getClipHandle();if(_5!=null){var _6=this.$q6;_5.style.clip="rect("+_6.join("px ")+"px)"}},isc.A.getScrollbarSize=function isc_Canvas_getScrollbarSize(){if(this.showCustomScrollbars)return this.getCustomScrollbarSize();return isc.Element.getNativeScrollbarSize()},isc.A.getViewportWidth=function isc_Canvas_getViewportWidth(){return this.getVisibleWidth()-
(this.vscrollOn?this.getScrollbarSize():0)-
this.getHMarginBorder()},isc.A.getViewportHeight=function isc_Canvas_getViewportHeight(){return this.getVisibleHeight()-
(this.hscrollOn?this.getScrollbarSize():0)-
this.getVMarginBorder()},isc.A.getOuterViewportWidth=function isc_Canvas_getOuterViewportWidth(){return this.getVisibleWidth()-(this.vscrollOn?this.getScrollbarSize():0)-
this.getHMarginSize()},isc.A.getOuterViewportHeight=function isc_Canvas_getOuterViewportHeight(){return this.getVisibleHeight()-(this.hscrollOn?this.getScrollbarSize():0)-
this.getVMarginSize()},isc.A.getInnerHeight=function isc_Canvas_getInnerHeight(){return this.getHeight()
-((this.hscrollOn||this.overflow==isc.Canvas.SCROLL)?this.getScrollbarSize():0)
-this.getVMarginBorder()},isc.A.getInnerWidth=function isc_Canvas_getInnerWidth(){var _1=this.getWidth();if(this.vscrollOn||this.overflow==isc.Canvas.SCROLL||this.alwaysShowVScrollbar)
_1-=this.getScrollbarSize();return _1-this.getHMarginBorder()},isc.A.getInnerContentHeight=function isc_Canvas_getInnerContentHeight(){return Math.max(1,this.getHeight()
-(this.hscrollOn||this.overflow==isc.Canvas.SCROLL?this.getScrollbarSize():0)
-this.getVMarginBorderPad())},isc.A.getInnerContentWidth=function isc_Canvas_getInnerContentWidth(_1){var _2=_1?this.getVisibleWidth():this.getWidth();if(this.vscrollOn||this.overflow==isc.Canvas.SCROLL||this.alwaysShowVScrollbar)
_2-=this.getScrollbarSize();return Math.max(1,_2-this.getHMarginBorderPad())},isc.A.getVBorderPad=function isc_Canvas_getVBorderPad(){return this.getVBorderSize()+this.getVPadding()},isc.A.getHBorderPad=function isc_Canvas_getHBorderPad(){return this.getHBorderSize()+this.getHPadding()},isc.A.getHMarginSize=function isc_Canvas_getHMarginSize(){return this.getLeftMargin()+this.getRightMargin()},isc.A.getVMarginSize=function isc_Canvas_getVMarginSize(){return this.getTopMargin()+this.getBottomMargin()},isc.A.getVMarginBorder=function isc_Canvas_getVMarginBorder(){var _1=this.$sd(),_2=this.$tj();return _1.top+_1.bottom+_2.top+_2.bottom},isc.A.getHMarginBorder=function isc_Canvas_getHMarginBorder(){var _1=this.$sd(),_2=this.$tj();return _1.left+_1.right+_2.left+_2.right},isc.A.getVMarginBorderPad=function isc_Canvas_getVMarginBorderPad(){return this.getVMarginSize()+this.getVBorderPad()},isc.A.getHMarginBorderPad=function isc_Canvas_getHMarginBorderPad(){return this.getHMarginSize()+this.getHBorderPad()},isc.A.getClipWidth=function isc_Canvas_getClipWidth(){return this.getVisibleWidth()},isc.A.getClipHeight=function isc_Canvas_getClipHeight(){return this.getVisibleHeight()},isc.A.getVisibleWidth=function isc_Canvas_getVisibleWidth(_1){if((this.$if||this.$pu)&&(this.overflow==isc.Canvas.VISIBLE||this.overflow==isc.Canvas.CLIP_V)){return Math.max(this.width,(this.getScrollWidth(_1)+this.getHMarginBorder()))}else{var _2=this.isAnimating(this.$do)?this.$showAnimationInfo:this.isAnimating(this.$zb)?this.$hideAnimationInfo:null;if(_2!=null&&!_2.$1l&&this.vscrollOn){var _3=0;if(this.vscrollbar.visibility==isc.Canvas.HIDDEN){_3=this.getScrollbarSize()}else{_3=this.getScrollbarSize()-this.getScrollbarSize()}
return Math.max(this.getWidth()-_3,1)}
return this.getWidth()}},isc.A.getVisibleHeight=function isc_Canvas_getVisibleHeight(_1){if((this.$if||this.$pu)&&(this.overflow==isc.Canvas.VISIBLE||this.overflow==isc.Canvas.CLIP_H))
{return Math.max(this.getHeight(),(this.getScrollHeight(_1)+this.getVMarginBorder()))}else{if(this.isAnimating()){var _2=this.isAnimating(this.$do)?this.$showAnimationInfo:this.isAnimating(this.$zb)?this.$hideAnimationInfo:null;if(_2!=null&&_2.$1l&&this.hscrollOn){var _3=0;if(this.hscrollbar&&this.hscrollbar.visibility==isc.Canvas.HIDDEN){_3=this.getScrollbarSize()}else{_3=this.getScrollbarSize()-this.getScrollbarSize()}
return Math.max(this.getHeight()-_3,1)}}
return this.getHeight()}},isc.A.getPeerRect=function isc_Canvas_getPeerRect(){var _1=this.getPageRect();if(this.peers==null)return _1;for(var i=0;i<this.peers.length;i++){var _3=this.peers[i];if(!_3.isDrawn()||(this.isVisible()&&!_3.isVisible()))continue;if((!this.vscrollOn&&_3==this.vscrollbar)||(!this.hscrollOn&&_3==this.hscrollbar))continue;var _4=_3.getPageRect();if(_4[0]<_1[0])_1[0]=_4[0];if(_4[1]<_1[1])_1[1]=_4[1];var _5=_4[0]+_4[2];if(_5>_1[0]+_1[2])_1[2]=_5-_1[0];var _6=_4[1]+_4[3];if(_6>_1[1]+_1[3])_1[3]=_6-_1[1]}
return _1},isc.A.moveBy=function isc_Canvas_moveBy(_1,_2,_3,_4){var _5=_3&&_4;if(!_5&&this.rectAnimation)this.finishAnimation("rect");else if(!_3&&this.moveAnimation)this.finishAnimation("move");if(isc.$cv)arguments.$cw=this;if(isc.isA.Number(_1))
this.left+=_1;else
_1=0;if(isc.isA.Number(_2))
this.top+=_2;else
_2=0;var _6=(_1!=0||_2!=0);if(!_6&&!_4)return false;this.$tx=_1;this.$ty=_2;var _7=(_4&&this.$tz?this.width:null),_8=(_4&&this.$t0?this.$o8:null);this.$q5(this.left,this.top,_7,_8);if(_4)this.$t1();this.$t2();return _6},isc.A.$t2=function isc_Canvas__completeMoveBy(){var _1=(this.$tx||0),_2=(this.$ty||0),_3;this.$tx=_3;this.$ty=_3;if(!_1&&!_2)return;this.$t3(this,_1,_2);this.$t4(_1,_2);if(this.parentElement)this.parentElement.childMoved(this,_1,_2);if(this.masterElement)this.masterElement.peerMoved(this,_1,_2);if(this._useFocusProxy&&this.$qj){var _4=this.$qq();if(_4!=null){var _5=parseInt(_4.style.left)+_1,_6=parseInt(_4.style.top)+_2;_4.style.left=_5+"px";_4.style.top=_6+"px"}}
this.$808=this.$809=null;this.handleMoved(_1,_2)},isc.A.handleMoved=function isc_Canvas_handleMoved(_1,_2){if(!this.$832&&this.isDrawn()&&this.parentElement==null&&!isc.Page.pollPageSize)
{isc.EH.fireOnPause("checkForBodyOverflowChange",{target:isc.Canvas,methodName:"checkForPageResize"},100)}
this.moved(_1,_2)},isc.A.moved=function(deltaX,deltaY){},isc.A.parentMoved=function isc_Canvas_parentMoved(_1,_2,_3){},isc.A.handleParentMoved=function isc_Canvas_handleParentMoved(_1,_2,_3){this.$808=this.$809=null;this.parentMoved(_1,_2,_3);this.$t3(_1,_2,_3)},isc.A.$t3=function isc_Canvas__fireParentMoved(_1,_2,_3){var _4=this.children;if(_4!=null){for(var i=0;i<_4.length;i++){if(isc.isA.Canvas(_4[i])){_4[i].handleParentMoved(_1,_2,_3)}}}},isc.A.childMoved=function isc_Canvas_childMoved(_1,_2,_3){if(_1&&_1.masterElement!=null&&_1.containedPeer==true)return;if(this.allowContentAndChildren&&this.overflow==isc.Canvas.VISIBLE)
this.$t5=true;this.$t6(this.$o4)},isc.A.$t4=function isc_Canvas__fireMasterMoved(_1,_2){var _3=this.peers;if(_3==null)return;for(var i=0;i<_3.length;i++){if(_3[i])_3[i].masterMoved(_1,_2)}},isc.A.masterMoved=function isc_Canvas_masterMoved(_1,_2){if(this.$ns)this.moveBy(_1,_2)},isc.A.peerMoved=function isc_Canvas_peerMoved(_1,_2,_3){},isc.A.dragRepositioned=function isc_Canvas_dragRepositioned(){},isc.A.getDelta=function isc_Canvas_getDelta(_1,_2,_3){if(_2==null)return null;var _4=_1,_5=this.$pb[_1];if(_1==this.$o5)_4=this.$o7;if(isc.isA.Number(_2)){var _6=Math.round(_2);if(_6!=_2){this.logWarn(_1+" specified as fractional coordinate:"+_2+". Rounded to:"+_6);_2=_6}}else if(isc.isA.String(_2)&&isc.endsWith(_2,this.$o9)){this[_5]=_2;if(this.masterElement==null&&this.parentElement==null&&this.$rq==null){this.$rq=isc.Page.setEvent(this.$nx,this,isc.Page.FIRE_ONCE)}
if(this.$pp){_3=this[_4]=0;if(this.percentBox=="custom")this[_4]=1}
if(this.percentBox=="custom")return 0;var _7,_8,_9,_10=(_1==this.$oz||_1==this.$o6);if(this.percentSource||(this.snapTo&&this.masterElement)){_7=this.percentSource||this.masterElement;_9=(this.percentBox==this.$520),_8=_10?(_9?_7.getViewportWidth():_7.getVisibleWidth()):(_9?_7.getViewportHeight():_7.getVisibleHeight())}else{_7=this.parentElement;_8=(_10?(_7?_7.getInnerWidth():isc.Page.getWidth()):(_7?_7.getInnerHeight():isc.Page.getHeight()))}
if(isc.Browser.isIE&&!isc.Page.isLoaded()&&((isc.Page.getWidth()==0)||(isc.Page.getHeight()==0)))
{isc.Page.setEvent("load","if(window["+this.ID+"])"+this.ID+".pageResize()",isc.Page.FIRE_ONCE);this.$77g=true}
if(isc.Browser.isChrome&&(!isc.Page.isLoaded()||isc.EH.$77e=="load")&&(isc.Page.getWidth()==0||isc.Page.getHeight()==0))
{if(isc.Page.isLoaded()){isc.Page.setEvent("idle","if(window."+this.ID+")"+this.ID+".pageResize()",isc.Page.FIRE_ONCE)}else{isc.Page.setEvent("load","if(window."+this.ID+")"+this.ID+".delayCall('pageResize',[],100)",isc.Page.FIRE_ONCE)}
this.$77g=true}
_2=Math.round((parseInt(_2,10)/100)*_8);var _11=this[this.$90f[_1]];if(_11!=null&&_2<_11){_2=_11}
var _12=this[this.$90u[_1]];if(_12!=null&&_2>_12){_2=_12}
return _2-_3}
var _13=_2;if(!isc.isA.Number(_2)){_2=parseInt(_2);if(isc.isA.Number(_2)&&isc.isA.String(_3)){this[_4]=_3=_2}}
this[_5]=null;var _14=false;if(!isc.isA.Number(_2)||(_2<0&&(_1==this.$o6||_1==this.$o5)))
{if(_13!="*"){this.logWarn("ignoring bad or negative "+_1+": "+_13+(this.logIsDebugEnabled("sizing")?this.getStackTrace():" [enable 'sizing' log for stack trace]"))}else{_1==this.$o6?this.$pn="*":this.$po="*";var _7=this.parentElement;if(isc.isA.Layout(_7)&&_7.hasMember(this)){_7.reflow(this.getID()+" set "+_1+" to '*'");_14=true}}
if(!_14&&(_3==this[_1]||_3==this[_4]))
{_3=this.restoreDefaultSize(_1==this.$o5)}
this.adjustOverflow();return null}
return _2-_3},isc.A.restoreDefaultSize=function isc_Canvas_restoreDefaultSize(_1){var _2=_1?this.$o5:this.$o6,_3=this.getClass().getInstanceProperty(_2);if(!isc.isA.Number(_3)){if(_1)_3=this.defaultHeight;else _3=this.defaultWidth}
var _4=this[_2]=(isc.isA.Number(_3)?_3:0);if(_1)this.$o8=_4;return _4});isc.evalBoundary;isc.B.push(isc.A.pageResize=function isc_Canvas_pageResize(){this.$832=true;this.$rq=null;this.$77g=null;this.$qw();delete this.$832},isc.A.moveTo=function isc_Canvas_moveTo(_1,_2,_3,_4){if(!_4&&_1==null&&_2==null)return false;if(isc.$cv)arguments.$cw=this;if(_1!=null&&_1.top!=null){_2=_1.top;_1=_1.left}
var _5=this.getDelta(this.$oz,_1,this.getLeft()),_6=this.getDelta(this.$o0,_2,this.getTop());return this.moveBy(_5,_6,_3,_4)},isc.A.moveToEvent=function isc_Canvas_moveToEvent(_1,_2){var _3=this.ns.EH.getLastEvent(),x=_3.x,y=_3.y;if(isc.isA.Number(_1))x-=_1;if(isc.isA.Number(_2))y-=_2;var _6=this.ns.EH;var _7=_6.getDragTarget(_3);var _8;if(_6.getDragTarget().canDrop){_8=_6.getDropTarget(_3);if(_8){if(!_7.snapOnDrop||!_8.shouldSnapOnDrop(_7)){_8=null}}else{_8=_6.getDragTarget(_3).parentElement}}else{_8=_6.getDragTarget(_3).parentElement}
if(isc.isA.Canvas(_8)&&(_7.snapToGrid==true||(_7.snapToGrid==null&&_8.childrenSnapToGrid==true)))
{if(_8.noSnapDragOffset(this)){x=_3.x,y=_3.y}
if(_8.suppressHSnapOffset==true)x=_3.x;if(_8.suppressVSnapOffset==true)y=_3.y;if(_8.snapAxis==isc.Canvas.HORIZONTAL||_8.snapAxis==isc.Canvas.BOTH)
{var _9=(_8.getPageLeft()+_8.getLeftBorderSize()+_8.getLeftMargin()-_8.getScrollLeft());x-=_9;x=_8.getHSnapPosition(x)+_8.getHSnapOrigin(_7);x+=_9}
if(_8.snapAxis==isc.Canvas.VERTICAL||_8.snapAxis==isc.Canvas.BOTH)
{var _9=(_8.getPageTop()+_8.getTopBorderSize()+_8.getTopMargin()-_8.getScrollTop())
y-=_9;y=_8.getVSnapPosition(y)+_8.getVSnapOrigin(_7);y+=_9}}
this.setPageRect(x,y)},isc.A.getVSnapOrigin=function isc_Canvas_getVSnapOrigin(_1){return this.VSnapOrigin?this.VSnapOrigin:0},isc.A.getHSnapOrigin=function isc_Canvas_getHSnapOrigin(_1){return this.HSnapOrigin?this.HSnapOrigin:0},isc.A.placeNextTo=function isc_Canvas_placeNextTo(_1,_2,_3,_4){var _5=_1.getPeerRect(),_6=this.getPeerRect(),_7=isc.Canvas.$t7(_6[2],_6[3],_5,_2,_3,_4);this.setPageRect(_7[0],_7[1])},isc.A.showNextTo=function isc_Canvas_showNextTo(_1,_2,_3,_4){if(_2==null)_2="right";if(_3==null)_3=false;this.placeNextTo(_1,_2,_3);if(_4){if(!this.parentElement||this.parentElement.isDrawn()){this.draw()}
if(!this.isVisible())this.show()}else{this.animateShow("fade")}},isc.A.placeNear=function isc_Canvas_placeNear(_1,_2){if(isc.isAn.Array(_1)){_2=_1[1];_1=_1[0]}else if(isc.isAn.Object(_1)){_2=_1.top;_1=_1.left}
if(this.showShadow&&this._shadow)this.updateShadow();var _3=this.getPeerRect(),_4=isc.Canvas.$t7(_3[2],_3[3],{left:_1,top:_2});this.setPageRect(_4[0],_4[1])},isc.A.resizeBy=function isc_Canvas_resizeBy(_1,_2,_3,_4,_5){if(isc.$cv)arguments.$cw=this;var _6=_3&&_4;if(!_6&&this.rectAnimation)this.finishAnimation("rect");if(!_3){if(_6&&this.resizeAnimation)this.finishAnimation("resize");if(this.hideAnimation)this.finishAnimation("hide");if(this.showAnimation)this.finishAnimation("show")}
var _7=this.getWidth(),_8=this.getHeight();if(isc.isA.Number(_1)){this.width+=_1;if(!this.$pp)this.$t8=true}else{_1=0}
if(isc.isA.Number(_2)){this.height=this.$o8=_8+_2;if(!this.$pp)this.$t9=true}else{_2=0}
if(_1==0&&_2==0)return false;this.$tz=_1;this.$t0=_2;this.$ua=_3;if(this.isDrawn()&&this.logIsInfoEnabled(this.$nx)){this.logInfo("resize of drawn component: new width/height: "+[this.width,this.$o8]+", old width/height: "+[_7,_8]+", delta width/height: "+[_1,_2]+(this.logIsDebugEnabled(this.$nx)?this.getStackTrace():""),this.$nx)}
if(!_4){var _9=this.$q6;if(isc.isAn.Array(_9)){_9[1]+=_1;_9[2]+=_2}
var _10=this.getDrawnState();if(_10==isc.Canvas.COMPLETE){this.$q5(this.left,this.top,this.width,this.$o8);if(isc.isAn.Array(_9))this.setClip(_9)}else if(_10!=isc.Canvas.UNDRAWN){this.$q4=true}
this.$t1(_5)}
return true},isc.A.$t1=function isc_Canvas__completeResizeBy(_1){var _2=(this.$tz||0),_3=(this.$t0||0),_4=this.$ua,_5;this.$tz=_5;this.$t0=_5;this.$ua=_5;if(!_2&&!_3)return;var _6;if(this.isDrawn()){_6=this.shouldRedrawOnResize(_2,_3,_4);if(_6){this.markForRedraw(this.$nx)}}
if(!_4)this.layoutChildren(this.$pc,_2,_3)
if((isc.Browser.isMoz||isc.Browser.isSafari)&&this.containsIFrame())this.$pw();this.$ub(_2,_3);if(!_6)this.adjustOverflow(this.$nx);if(!_4&&this._useFocusProxy&&this.$qj){var _7=this.$sl();if(_7!=null){_7.style.width=this.getWidth()+isc.px;_7.style.height=this.getHeight()+isc.px}}
this.resizePeersBy(_2,_3);this.$5y(_2,_3,_1)},isc.A.shouldRedrawOnResize=function isc_Canvas_shouldRedrawOnResize(_1,_2){var _3=this.redrawOnResize;if(_3==null){_3=!((this.children!=null&&this.children.length>0&&!this.allowContentAndChildren)||(this.getInnerHTML==isc.Canvas.$b4.getInnerHTML&&!isc.isA.Function(this.contents)))}
return _3},isc.A.dragResizing=function isc_Canvas_dragResizing(){var _1=isc.EH;return(_1.dragging&&_1.dragOperation==_1.DRAG_RESIZE&&_1.dragTarget==this)},isc.A.$5y=function(deltaX,deltaY,reason){if(isc.$cv)arguments.$cw=this;if(this.snapTo)this.$qw(true);if(this.parentElement)this.parentElement.childResized(this,deltaX,deltaY,reason);if(this.masterElement)this.masterElement.peerResized(this,deltaX,deltaY,reason);var peers=this.peers;if(peers){for(var i=0;i<peers.length;i++){if(isc.isA.Canvas(peers[i]))peers[i].masterResized(deltaX,deltaY,reason)}}
if(this.clipCorners&&this.$uc){var clips=this.$uc;if(clips.TR)clips.TR.moveBy(deltaX,null);if(clips.BL)clips.BL.moveBy(null,deltaY);if(clips.BR)clips.BR.moveBy(deltaX,deltaY)}
if(this.$ud!=null)delete this.$ud;if(this.$ue!=null)delete this.$ue;this.resized(deltaX,deltaY,reason);if(!this.$832&&this.isDrawn()&&this.parentElement==null&&!isc.Page.pollPageSize)
{isc.EH.fireOnPause("checkForBodyOverflowChange",{target:isc.Canvas,methodName:"checkForPageResize"},100)}},isc.A.$ub=function isc_Canvas__handleResized(){},isc.A.resized=function isc_Canvas_resized(_1,_2){},isc.A.innerSizeChanged=function isc_Canvas_innerSizeChanged(_1){this.$81b();this.layoutChildren(_1);var _2=this.peers;if(_2){for(var i=0;i<_2.length;i++){if(!_2[i].percentSource&&_2[i].snapTo&&_2[i].percentBox==this.$520)
{_2[i].$qw()}}}},isc.A.setPercentSource=function isc_Canvas_setPercentSource(_1,_2){if(isc.isA.String(_1))_1=window[_1];if(!_2&&this.percentSource==_1)return;if(this.percentSource&&this.isObserving(this.percentSource,"innerSizeChanged")){this.ignore(this.percentSource,"innerSizeChanged");this.ignore(this.percentSource,"resized")}
if(!isc.isA.Canvas(_1)){this.percentSource=null;return}
this.percentSource=_1;this.observe(_1,"innerSizeChanged","observer.percentSourceInnerSizeChanged()");this.observe(_1,"resized","observer.$qw()")},isc.A.percentSourceInnerSizeChanged=function isc_Canvas_percentSourceInnerSizeChanged(){if(this.percentBox==this.$520)this.$qw()},isc.A.childResettingHandleForAdjustOverflow=function isc_Canvas_childResettingHandleForAdjustOverflow(){if(this.oveflow==isc.Canvas.VISIBLE){if(this.parentElement)this.parentElement.childResettingHandleForAdjustOverflow()}else{this.$1051=this.getScrollLeft();this.$1052=this.getScrollTop()}},isc.A.childResetHandleForAdjustOverflowComplete=function isc_Canvas_childResetHandleForAdjustOverflowComplete(){if(this.overflow!=isc.Canvas.VISIBLE){this.scrollTo(this.$1051,this.$1052);this.$1051=this.$1052=null}},isc.A.childResized=function isc_Canvas_childResized(_1,_2,_3,_4){if(this.allowContentAndChildren&&this.overflow==isc.Canvas.VISIBLE)
this.$t5=true;this.$t6(this.$pd)},isc.A.peerResized=function isc_Canvas_peerResized(_1,_2,_3,_4){},isc.A.masterResized=function isc_Canvas_masterResized(_1,_2,_3){this.$qw()},isc.A.dragResized=function isc_Canvas_dragResized(){},isc.A.resizePeersBy=function isc_Canvas_resizePeersBy(_1,_2){var _3=this.peers;if(_3){for(var i=0;i<_3.length;i++){if(_3[i]&&_3[i].masterElement==this&&_3[i].$jo){_3[i].resizeBy(_1,_2)}}}},isc.A.layoutChildren=function isc_Canvas_layoutChildren(_1,_2,_3){if(this.children)this.$uf()},isc.A.$uf=function isc_Canvas__resolveChildPercentSizes(){var _1=this.children;if(_1!=null&&_1.length>0){for(var i=0;i<_1.length;i++){if(isc.isA.Canvas(_1[i]))_1[i].parentResized()}}},isc.A.resizeTo=function isc_Canvas_resizeTo(_1,_2,_3,_4,_5){if(isc.$cv)arguments.$cw=this;if(_1==null&&_2==null)return false;var _6=this.getDelta(this.$o6,_1,this.getWidth()),_7=this.getDelta(this.$o5,_2,this.getHeight());return this.resizeBy(_6,_7,_3,_4,_5)},isc.A.resizeToEvent=function isc_Canvas_resizeToEvent(_1){var _2=this.ns.EH,_3=_2.getLastEvent(),x=_3.x,y=_3.y,_6=this.getPageLeft(),_7=this.getPageTop(),_8=this.getPageRight(),_9=this.getPageBottom();var _10=_2.getDragTarget(_3);var _11=_2.getDragTarget(_3).parentElement;if(_11){if(_10.snapResizeToGrid==true||(_10.snapResizeToGrid==null&&_10.snapToGrid==true)||(_10.snapResizeToGrid==null&&(_11.childrenSnapResizeToGrid==true||(_11.childrenSnapResizeToGrid==null&&_11.childrenSnapToGrid==true)))){if(_11.snapAxis==isc.Canvas.HORIZONTAL||_11.snapAxis==isc.Canvas.BOTH){var _12=(_11.getPageLeft()+_11.getLeftBorderSize()+_11.getLeftMargin()-_11.getScrollLeft());x-=_12;x=_11.getHSnapPosition(x)+_11.getHSnapOrigin(_10);x+=_12}
if(_11.snapAxis==isc.Canvas.VERTICAL||_11.snapAxis==isc.Canvas.BOTH){_12=(_11.getPageTop()+_11.getTopBorderSize()+_11.getTopMargin()-_11.getScrollTop());y-=_12;y=_11.getVSnapPosition(y)+_11.getVSnapOrigin(_10);y+=_12}}}
if(this.logIsDebugEnabled("dragResize")){this.logDebug("resizeToEvent: coords: "+isc.Log.echo({x:x,y:y,left:_6,top:_7,right:_8,bottom:_9}),"dragResize")}
_1=_1||_2.resizeEdge||"BR";if(_1.contains("T")){var _13=Math.min(this.maxHeight,Math.max(_9-y,this.minHeight));_7=_9-_13}else if(_1.contains("B")){var _13=Math.min(this.maxHeight,Math.max(y-_7,this.minHeight));_9=_7+_13}
if(_1.contains("L")){var _14=Math.min(this.maxWidth,Math.max(_8-x,this.minWidth));_6=_8-_14}else if(_1.contains("R")){var _14=Math.min(this.maxWidth,Math.max(x-_6,this.minWidth));_8=_6+_14}
var _15=_8-_6,_16=_9-_7;this.setPageRect(_6,_7,_15,_16,true);_2.dragResizeWidth=_15;_2.dragResizeHeight=_16;if(this==this.ns.EH.dragTracker)this.redrawIfDirty()},isc.A.resizeTarget=function isc_Canvas_resizeTarget(_1,_2,_3,_4,_5,_6,_7){_5=_5||0;_4=_4||0;if(_6==null)_6=_2?isc.EH.getY():isc.EH.getX();_6+=_4;if(this.parentElement){var _8=this.getParentPageRect(),_9=_2?(_8[1]+_8[3]):(_8[0]+_8[2]);_9-=_2?this.getVisibleHeight():this.getVisibleWidth();if(_6>_9)_6=_9}
_7=_7!=null?_7:!_2&&this.isRTL();var _10=_2?_1.getMinHeight():_1.getMinWidth(),_11=_2?_1.getMaxHeight():_1.getMaxWidth();var _12;if(_7){_12=(_2?_1.getPageBottom():_1.getPageRight())
-(_2?this.getVisibleHeight():this.getVisibleWidth())}else{_12=_2?_1.getPageTop():_1.getPageLeft()}
var _13=!_7?_6-_12-_5:_12-_6-_5;if(_13<_10){_13=_10}else if(_13>_11){_13=_11}
this.$ug=_13;_6=_12+_5+(_7?-_13:_13);if(_3){_2?_1.setHeight(this.$ug):_1.setWidth(this.$ug)}else{_2?this.setPageTop(_6):this.setPageLeft(_6)}},isc.A.finishTargetResize=function isc_Canvas_finishTargetResize(_1,_2,_3){if(_3)return;_2?_1.setHeight(this.$ug):_1.setWidth(this.$ug)},isc.A.parentResized=function isc_Canvas_parentResized(){if(isc.$cv)arguments.$cw=this;this.$qw()},isc.A.$qw=function isc_Canvas__resolvePercentageSize(_1){if(this.snapTo!=null&&this.percentBox!="custom"){if((this._percent_width||this._percent_height)&&!_1){this.resizeTo(this._percent_width,this._percent_height)}
var _2,_3,_4;_2=(this.masterElement?this.masterElement:this.parentElement);if(!_2)return;isc.Canvas.snapToEdge(_2,this.snapTo,this,this.snapEdge)}
if(this.snapTo==null&&!_1){if(this._percent_left||this._percent_top||this._percent_width||this._percent_height)
{this.setRect(this._percent_left,this._percent_top,this._percent_width,this._percent_height)}}},isc.A.prepareForDragging=function isc_Canvas_prepareForDragging(){var _1=this.ns.EH;if(_1.dragTarget)return;var _2=false,_3=this.dragOperation;if(isc.Browser.isTouch&&this.touchDragOperation&&_1.lastEvent.originalType==_1.TOUCH_START)
{_3=this.touchDragOperation}
if(_3){_2=true;_1.dragOperation=_3}else if(this.canDragResize){_1.resizeEdge=this.getEventEdge();if(_1.resizeEdge){_2=true;_1.dragOperation=_1.DRAG_RESIZE;var _4=this.getDragAppearance(_1.DRAG_RESIZE);_1.dragMoveAction=(_4=="tracker")?_1.$ll:_1.$mq}}
if(!_2){if(this.canDragReposition){_2=true;_1.dragOperation=_1.DRAG_REPOSITION;_1.dragMoveAction=_1.$ll}else if(isc.Browser.isTouch&&(this.hscrollOn||this.vscrollOn)&&!this.dragOperation)
{_2=true;_1.dragOperation=_1.DRAG_SCROLL}else if(this.canDrag){_2=true;_1.dragOperation=_1.DRAG}else if(this.canSelectText){_2=true;_1.dragOperation=_1.DRAG_SELECT;this.dragAppearance="none"}}
if(_2){var _5=this;if(_1.dragOperation!=_1.DRAG_SELECT&&this.dragTarget!=null){if(isc.isA.Canvas(this.dragTarget)){_5=this.dragTarget}else if(this.dragTarget=="top"&&this.topElement){_5=this.topElement}else if(this.dragTarget=="parent"&&this.parentElement){_5=this.parentElement}else if(this.dragTarget=="creator"&&this.creator){_5=this.creator}else if(isc.isA.String(this.dragTarget)&&isc.isA.Canvas(window[this.dragTarget]))
{_5=window[this.dragTarget]}else{this.logWarn('prepareForDragging():  target.dragTarget not understood : '+this.dragTarget)}}
_1.dragTarget=_5}},isc.A.dragScrollStart=function isc_Canvas_dragScrollStart(){var _1=this.dragScrollTarget||this;this.$77s=isc.EH.getX();this.$77t=isc.EH.getY();this.$77u=_1.scrollLeft||0;this.$77v=_1.scrollTop||0;this.$77w=this.$77x=isc.EH.getX();this.$77y=this.$77z=isc.EH.getY();this.$770=this.$771=isc.timestamp()},isc.A.dragScrollMove=function isc_Canvas_dragScrollMove(){var _1=this.dragScrollTarget||this;var _2=this.$77s-isc.EH.getX(),_3=this.$77t-isc.EH.getY();_1.scrollTo(this.$77u+_2,this.$77v+_3,"dragScrollMove");if(window.event)window.event.preventDefault();this.$77w=this.$77x;this.$77y=this.$77z;this.$770=this.$771;this.$77x=isc.EH.getX();this.$77z=isc.EH.getY();this.$771=isc.timestamp();return false},isc.A.dragScrollStop=function isc_Canvas_dragScrollStop(){if(!this.momentumScrolling)return;var _1=(this.$771-this.$770);if(_1==0)return;if(isc.timestamp()-this.$771>100)return;var _2=(this.$77x-this.$77w)/_1,_3=(this.$77z-this.$77y)/_1,_4=this,_5=this.dragScrollTarget||this;if(!(isc.isA.DrawPane&&isc.isA.DrawPane(_5))){if(!_5.hscrollOn)_2=0;if(!_5.vscrollOn)_3=0}
if(this.logIsDebugEnabled("dragScroll")){this.logDebug("dragScroll: x/y: "+[this.$77x,this.$77z]+", last: "+[this.$77w,this.$77y]+", elapsed: "+_1+", speed: "+[_2,_3],"dragScroll")}
var _6=this.momentumScrollMinSpeed/1000;if(Math.abs(_2)<_6&&Math.abs(_3)<_6)
{return}
var _7=this.$772=this.registerAnimation(function(_15){var _8=isc.timestamp(),_1=_8-_4.$771;_4.$771=_8;var _9=_2*(1-_15),_10=_3*(1-_15);var _11=Math.round(_9*_1),_12=Math.round(_10*_1);if(this.logIsDebugEnabled("dragScroll")){this.logDebug("animating: elapsed: "+_1+", frame speed: "+[_9,_10]+", distance: "+[_11,_12],"dragScroll")}
if(_11==0&&_12==0)_4.cancelAnimation(_7);var _13=_5.getScrollLeft(),_14=_5.getScrollTop();_5.scrollTo(_5.getScrollLeft()-_11,_5.getScrollTop()-_12,"dragScrollStop");if(_13==_5.getScrollLeft()&&_14==_5.getScrollTop())
{_4.cancelAnimation(_7)}},this.momentumScrollTime,this.momentumScrollAcceleration)},isc.A.hoopSelectStart=function isc_Canvas_hoopSelectStart(){if(!this.hoopSelector)this.hoopSelector=this.createAutoChild("hoopSelector");if(this.hoopSelectorRect)this.hoopSelector.keepInParentRect=this.hoopSelectorRect;var _1=this.$79e=this.hoopSelectorRect||[this.getPageLeft()+this.getLeftBorderSize(),this.getPageTop()+this.getTopBorderSize(),this.getViewportWidth(),this.getViewportHeight()];this.$79f=this.hoopSelectAxis=="horizontal"?_1[3]:null;this.$79g=this.hoopSelectAxis=="vertical"?_1[2]:null;this.$79h=this.getOffsetX();this.$79i=this.getOffsetY();this.resizeHoopSelector();this.hoopSelector.show();return isc.EH.STOP_BUBBLING},isc.A.hoopSelectMove=function isc_Canvas_hoopSelectMove(){this.resizeHoopSelector()},isc.A.hoopSelectStop=function isc_Canvas_hoopSelectStop(){if(this.hoopSelector)this.hoopSelector.hide()},isc.A.resizeHoopSelector=function isc_Canvas_resizeHoopSelector(){if(!this.hoopSelector)return;var x=this.getOffsetX(),y=this.getOffsetY();if(this.hoopSelector.keepInParentRect){if(x<0)x=0;var _3=this.$79e[3];if(y>_3)y=_3}
var _4=Math.max(1,this.$79f?this.$79f:Math.abs(y-this.$79i));var _5=Math.max(1,this.$79g?this.$79g:Math.abs(x-this.$79h));this.hoopSelector.resizeTo(_5,_4);if(!this.$79g){if(x<this.$79h)this.hoopSelector.setLeft(x);else this.hoopSelector.setLeft(this.$79h)}else{this.hoopSelector.setLeft(this.$79e[0])}
if(!this.$79f){if(y<this.$79i)this.hoopSelector.setTop(y);else this.hoopSelector.setTop(this.$79i)}else{this.hoopSelector.setTop(this.$79e[1])}
this.updateHoopSelection()},isc.A.updateHoopSelection=function isc_Canvas_updateHoopSelection(){},isc.A.setNoDropIndicator=function isc_Canvas_setNoDropIndicator(){this.$uh=true;this.$k2();if(this.shouldSetNoDropTracker&&isc.EH.dragTracker&&isc.EH.dragTracker.isVisible()){if(!this.$ui)this.$ui=isc.EH.dragTracker.getContents();isc.EH.setDragTracker(this.imgHTML(this.noDropTracker))}},isc.A.clearNoDropIndicator=function isc_Canvas_clearNoDropIndicator(){if(!this.$uh)return;delete this.$uh;this.$k2();if(this.shouldSetNoDropTracker&&isc.EH.dragTracker){isc.EH.setDragTracker(this.$ui);delete this.$ui}},isc.A.shouldDragScroll=function isc_Canvas_shouldDragScroll(){return this.canDragScroll&&(this.hscrollOn||this.vscrollOn)},isc.A.$uj=function isc_Canvas__getVDragScrollDirection(_1){var _2=this.getVDragScrollThreshold();if(_1<_2)return-1;if(_1>(this.getViewportHeight()-_2))return 1;return 0},isc.A.$uk=function isc_Canvas__getHDragScrollDirection(_1){var _2=this.getHDragScrollThreshold();if(_1<_2)return-1;if(_1>(this.getViewportWidth()-_2))return 1;return 0},isc.A.$l4=function isc_Canvas__overDragThreshold(_1){var _2=(this.getOffsetY()-this.getScrollTop()),_3=(this.getOffsetX()-this.getScrollLeft());if(_1!=null){if(_1==isc.Canvas.VERTICAL)
return this.$uj(_2)!=0;else
return this.$uk(_3)!=0}
return(this.$uj(_2)!=0||this.$uk(_3)!=0)},isc.A.getHDragScrollThreshold=function isc_Canvas_getHDragScrollThreshold(){if(this.$ud!=null)return this.$ud;var _1=this.dragScrollThreshold;if(isc.isA.Number(_1))this.$ud=_1;else{_1=parseInt(_1);if(!isNaN(_1)){this.$ud=parseInt(_1*this.getViewportWidth()/100);return this.$ud}else{isc.Log.logWarn("Unable to resolve specified drag scroll threshold '"+this.dragScrollThreshold+"' to a valid size. Should be specified as an absolute pixel value, or a percentage of widget viewport.");return 0}}},isc.A.getVDragScrollThreshold=function isc_Canvas_getVDragScrollThreshold(){if(this.$ue!=null)return this.$ue;var _1=this.dragScrollThreshold;if(isc.isA.Number(_1))this.$ue=_1;else{_1=parseInt(_1);if(!isNaN(_1)){this.$ue=parseInt(_1*this.getViewportHeight()/100);return this.$ue}else{isc.Log.logWarn("Unable to resolve specified drag scroll threshold '"+this.dragScrollThreshold+"' to a valid size. Should be specified as an absolute pixel value, or a percentage of widget viewport.");return 0}}},isc.A.$l5=function isc_Canvas__setupDragScroll(_1,_2){if(this.$ul!=null)return;var _3=(this.getOffsetY()-this.getScrollTop()),_4=(this.getOffsetX()-this.getScrollLeft()),_5=this.$uk(_4),_6=this.$uj(_3);this.$ul=isc.Timer.setTimeout({target:this,methodName:"$um",args:[_5,_6,true,_1,_2]},this.dragScrollDelay)},isc.A.$um=function isc_Canvas__performDragScroll(_1,_2,_3,_4,_5){this.$ul=null;var _6=0,_7=0;var _8=this.containsEvent();if(this.ns.EH.dragging&&(_5||_8)){var _9=this.getOffsetX()-this.getScrollLeft(),_10=this.getOffsetY()-this.getScrollTop(),_11=this.getViewportWidth(),_12=this.getViewportHeight();if(!isc.isA.Number(this.maxDragScrollIncrement)){var _13=parseInt(this.maxDragScrollIncrement);if(!isc.isA.Number(_13))
this.logWarn("Unable to resolve this.maxDragScrollIncrement '"+this.maxDragScrollIncrement+"' to a valid value. This should be an absolute pixel value or a percentage to scroll by.");this.$un=parseInt(_13/100*this.getScrollWidth());this.$uo=parseInt(_13/100*this.getScrollHeight())}else{this.$un=this.$uo=this.maxDragScrollIncrement}
if(!isc.isA.Number(this.minDragScrollIncrement)){var _14=parseInt(this.minDragScrollIncrement);if(!isc.isA.Number(_14))
this.logWarn("Unable to resolve this.minDragScrollIncrement '"+this.minDragScrollIncrement+"' to a valid value. This should be an absolute pixel value or a percentage to scroll by.");this.$up=parseInt(_14/100*(this.getScrollWidth()-_11));this.$uq=parseInt(_14/100*(this.getScrollHeight()-_12))}else{this.$up=this.$uq=this.minDragScrollIncrement}
var _15=(_4==isc.Canvas.VERTICAL?0:this.$uk(_9)),_16=(_4==isc.Canvas.HORIZONTAL?0:this.$uj(_10));if(_3){if(_1!=0&&_1!=_15)
_1=0;if(_2!=0&&_2!=_16)
_2=0}else{_1=_15;_2=_16}
if(_5){var _17=isc.EH.dragTarget;if(this!=_17){if(_1!=0){var _18=_17.getCanvasLeft(this);if(_1<0){if(_18>=0){_1=0}}else{if(_18+_17.getVisibleWidth()
<=this.getViewportWidth())
{_1=0}}}
if(_2!=0){var _19=_17.getCanvasTop(this);if(_2<0){if(_19>=0){_2=0}}else{if(_19+_17.getVisibleHeight()
<=this.getViewportHeight())
{_2=0}}}}}
if(_8){_6=this.getScrollIncrement(_1,_9,_11,this.getHDragScrollThreshold(),this.$un,this.$up);_7=this.getScrollIncrement(_2,_10,_12,this.getVDragScrollThreshold(),this.$uo,this.$uq)}else{_6=_1*this.$un;_7=_2*this.$uo}
if((_6>0&&(this.getScrollLeft()>=this.getScrollRight()))||(_6<0&&(this.getScrollLeft()<=0)))_6=0;if((_7>0&&(this.getScrollTop()>=this.getScrollBottom()))||(_7<0&&(this.getScrollTop()<=0)))_7=0}
if(_6!=0||_7!=0){this.scrollBy(_6,_7);this.$ul=isc.Timer.setTimeout({target:this,methodName:"$um",args:[null,null,null,_4,_5]},50)}else{delete this.$un;delete this.$up;delete this.$uo;delete this.$uq}},isc.A.getScrollIncrement=function isc_Canvas_getScrollIncrement(_1,_2,_3,_4,_5,_6){if(_1==null||_1==0)return 0;if(_1>0){_2=_2-(_3-_4)}else if(_1<0){_2=_4-_2}
if(_2<0||_2>_4)return 0;var _7=_1*
((_2/_4)*(_5-_6)+_6);return parseInt(_7)},isc.A.hasInherentHeight=function isc_Canvas_hasInherentHeight(){if(this.inherentHeight!=null)return this.inherentHeight;return(this.children==null&&(this.overflow==isc.Canvas.VISIBLE||this.overflow==isc.Canvas.CLIP_H))},isc.A.hasInherentWidth=function isc_Canvas_hasInherentWidth(){if(this.inherentWidth!=null)return this.inherentWidth;return(this.children==null&&(this.overflow==isc.Canvas.VISIBLE||this.overflow==isc.Canvas.CLIP_V))},isc.A.canOverflowWidth=function isc_Canvas_canOverflowWidth(){return this.overflow==isc.Canvas.VISIBLE||this.overflow==isc.Canvas.CLIP_H},isc.A.canOverflowHeight=function isc_Canvas_canOverflowHeight(){return this.overflow==isc.Canvas.VISIBLE||this.overflow==isc.Canvas.CLIP_V},isc.A.$1316=function isc_Canvas__shouldWriteClipDiv(){return(this.useClipDiv&&(!isc.Browser.$113k||this.overflow==isc.Canvas.VISIBLE))||this.getScrollingMechanism()==isc.Canvas.NESTED_DIV},isc.A.getOverflow=function isc_Canvas_getOverflow(){return this.overflow},isc.A.setOverflow=function isc_Canvas_setOverflow(_1){if(this.$va!=null&&!this.$vb)
this.finishAnimation(this.$va);if(this.$vc!=null&&!this.$vd)
this.finishAnimation(this.$vc);if(this.overflow==_1)return;var _2=this.overflow;this.overflow=_1;if(!this.isDrawn())return;var _3=false;if(_1!=isc.Canvas.SCROLL&&_1!=isc.Canvas.AUTO&&(this.hscrollOn||this.vscrollOn))
{if(this.hscrollOn||this.vscrollOn)_3=true;this.hscrollOn=this.vscrollOn=false;if(this.hscrollbar!=null)this.hscrollbar.hide();if(this.vscrollbar!=null)this.vscrollbar.hide()}
if(isc.Browser.isIE&&(_1==isc.Canvas.CLIP_H||_1==isc.Canvas.CLIP_V))
{this.markForRedraw();return}
var _4;var _5=this.$113l,_6=this.$1316();if(isc.Browser.$113k&&_5!=_6){_4=this.getHandle();var _7=this.getClipHandle(),_8=_7.parentNode,_9=_7.nextSibling,_10,_11;if(isc.Browser.useCreateContextualFragment){var _12=_4.ownerDocument.createRange();_12.selectNode(_4);_10=_12.createContextualFragment(this.getTagStart()+this.getTagEnd());_7.parentNode.removeChild(_7);var _13=_10.firstChild;if(_6)_13=_13.firstChild;while((_11=_4.firstChild)!=null){_13.appendChild(_11)}
this.$113l=_5;this.clearHandle();_8.insertBefore(_10,_9);this.$q3=_13}else{_7.parentNode.removeChild(_7);_10=_4.ownerDocument.createDocumentFragment();while((_11=_4.firstChild)!=null){_10.appendChild(_11)}
this.$113l=_5;this.clearHandle();var _14;if(_9==null){_14={element:_8,position:"beforeEnd"}}else{_14={element:_9}}
this.$p8(false,_14);this.getHandle().appendChild(_10);this.$if=true}
this.$113l=_6;delete this.$62u;delete this.$vh;this.$ve()}
_4=this.getStyleHandle();_4.overflow=this.$rw();var _15=this.$rx();_4.width=_15[0]+this.$ph;_4.height=_15[1]+this.$ph;if(_4.clip!=null&&_4.clip!=""&&_4.clip!="rect(auto auto auto auto)")
{_4.clip=(isc.Browser.isIE?"rect(auto)":"")}
this.adjustOverflow("setOverflow");if(_2==isc.Canvas.VISIBLE&&_1!=isc.Canvas.VISIBLE){var _16=Math.max(this.getScrollWidth()-this.getInnerWidth(),0),_17=Math.max(this.getScrollHeight()-this.getInnerHeight(),0);if(_16>0||_17>0)this.$5y(-_16,-_17,"overflow changed")}else if(_2!=isc.Canvas.VISIBLE&&_1==isc.Canvas.VISIBLE){var _16=Math.max(this.getScrollWidth()-this.getInnerWidth(),0),_17=Math.max(this.getScrollHeight()-this.getInnerHeight(),0);if(_16>0||_17>0)this.$5y(_16,_17,"overflow changed")}else if(_3){this.innerSizeChanged("scrolling state changed")}
if((_1==isc.Canvas.HIDDEN||_1==isc.Canvas.VISIBLE)&&(_2==isc.Canvas.HIDDEN||_2==isc.Canvas.VISIBLE)){}else{this.$ur()}},isc.A.$t6=function isc_Canvas__markForAdjustOverflow(_1){if(!this.isDrawn()||this.isDirty()||this.destroying||this.$66p)return;if(!this.$rm){if(this.logIsDebugEnabled())
this.logDebug("delaying adjustOverflow: "+(_1?_1:this.getStackTrace()));var _2=this;this.$rn=isc.Timer.setTimeout(function(){if(!_2.destroyed)_2.adjustOverflow(_1,true)},0)}
this.$rm=true},isc.A.adjustForContent=function isc_Canvas_adjustForContent(_1){var _2="adjustForContent() called";if(_1)this.adjustOverflow(_2);else this.$t6(_2)},isc.A.$qy=function isc_Canvas__browserDoneDrawing(){var _1=this.getHandle();if(isc.Browser.isOpera){var _1=this.getHandle();return!(_1.scrollHeight==0&&_1.scrollWidth==0)}
if(!isc.Browser.isIE){var _2=this.getClipHandle();if(_2==null)return false;var _3=_2.scrollHeight;if(_3==null||_3==0)_3=this.getClipHandle().offsetHeight;return _3!=0}
var _4;if(isc.Browser.isWin){return _1!=null&&_1.scrollHeight!=this.$n1&&_1.scrollHeight!=0}},isc.A.adjustOverflow=function isc_Canvas_adjustOverflow(_1,_2,_3){if(isc.$cv)arguments.$cw=this;if(_2&&!this.$rm){return}
this.$rm=false;if(!this.isDrawn()||this.overflow==isc.Canvas.IGNORE)return true;if(!this.adjustOverflowWhileDirty&&!_3&&this.isDirty()&&(this.overflow!=isc.Canvas.VISIBLE))
{return}
if(!isc.Page.isLoaded()&&(isc.Browser.isSafari||(isc.Browser.isMoz&&isc.Browser.geckoVersion<20040616)))
{isc.Page.setEvent("load",this,isc.Page.FIRE_ONCE,"$us");if(isc.Browser.isMoz)return}
if(this.$417)return;if(this.$qy())return this.$ut(_1);if(this.logIsDebugEnabled("overflow")){this.logDebug("browser not done drawing, deferring overflow.","overflow");if(this.$113l){this.logDebug("clipHandle sizes: "+this.echoElementSize(this.getClipHandle()),"overflow")}
this.logDebug("handle sizes: "+this.echoElementSize(this.getHandle()),"overflow")}
if(!this.$uu){this.$t6();this.$uu=true}else{this.logDebug("still waiting for size to become available","overflow");this.$uv()}
return false});isc.evalBoundary;isc.B.push(isc.A.$us=function isc_Canvas__adjustOverflowForPageLoad(){if(!this.destroyed&&this.isDrawn())this.adjustOverflow("pageLoad")},isc.A.$uv=function isc_Canvas__queueForDelayedAdjustOverflow(){isc.Canvas.$uv(this.getID())},isc.A.$ut=function isc_Canvas__adjustOverflow(_1){if(this.$uw){return}
this.$uw=true;this.$ux(_1);this.$uw=false},isc.A.$ux=function isc_Canvas___adjustOverflow(_1){if(!this.$pe[this.overflow]){this.logWarn("This widget has overflow specified as "+this.echo(this.overflow)+".  This overflow setting is not supported - defaulting to overflow:\"visible\".");this.overflow=isc.Canvas.VISIBLE}
if(this.$su!=null)delete this.$su;if(this.$sz!=null)delete this.$sz;var _2=this.$uy,_3=this.$uz;delete this.$uy;delete this.$uz;var _4=this.$u0;this.$u0=false;var _5=isc.Canvas;this.$uu=null;if(this.getHandle()==null)this.logWarn("adjustOverflow: handle null");if(this.getClipHandle()==null)this.logWarn("adjustOverflow: clipHandle null");if(this.alwaysShowVScrollbar){if(this.overflow!=isc.Canvas.AUTO||this.overflow!=isc.Canvas.SCROLL){this.logInfo("alwaysShowVScrollbar specified as true, but overflow set to \""+this.overflow+"\". Property will be ignored.")}else if(this.showCustomScrollbars==false){this.logWarn("alwaysShowVScrollbar property not supported when showing native scrollbars")}}
if(this.logIsInfoEnabled(this.$pf)){this.logInfo("Specified size: "+this.getWidth()+"x"+this.getHeight()+", drawn scroll size: "+this.getScrollWidth(true)+"x"+this.getScrollHeight(true)+", border: "+this.getVBorderSize()+"x"+this.getHBorderSize()+", margin: "+this.getVMarginSize()+"x"+this.getHMarginSize()+(_2==null?"":", old size: "+_2+"x"+_3)+", reason: "+_1,"sizing")}
if(this.logIsDebugEnabled(this.$pf)){if(this.$113l){this.logDebug("clipHandle sizes: "+this.echoElementSize(this.getClipHandle()),"sizing")}
this.logDebug("handle sizes: "+this.echoElementSize(this.getHandle()),"sizing")}
if(this.overflow==_5.IGNORE){}else if(this.overflow==_5.VISIBLE){var _6=false;if(this.$t5){if(this.getWidth()<this.getVisibleWidth()||this.getHeight()<this.getVisibleHeight())
{_6=true;if(this.parentElement!=null){this.parentElement.childResettingHandleForAdjustOverflow();this.$q5(null,null,this.width,this.$o8)}}
delete this.$t5}
var _7=this.getScrollWidth(true),_8=this.getScrollHeight(true);if(this.$ks){var _9=this.getScrollHandle();if(_9.scrollTop!=0||_9.scrollLeft!=0){_9.scrollTop=_9.scrollLeft=0}}
var _10=this.getInnerWidth(),_11=this.getInnerHeight();var _12=this.$u0=(_7>_10||_8>_11);if(!_4&&_2>this.getWidth()){_4=true}
if(!_12&&!_4)
{this.$uy=_7;this.$uz=_8;return}
var _13=this.getHMarginBorder(),_14=this.getVMarginBorder();var _15=Math.max((_7+_13),this.getWidth()),_16=Math.max((_8+_14),this.getHeight());if(isc.Menu&&isc.isA.Menu(this.parentElement)&&isc.isA.GridBody(this)&&(_15>this.getWidth()||_16>this.getHeight())){this.$t5=true}
this.$q5(this.left,this.top,_15,_16);if(this.isRTL())this.handleMoved();var _17=this.children&&this.children.length>0;if(!_17||this.allowContentAndChildren){var _18=this.getScrollHeight(true),_19=this.getScrollWidth(true);if(_18!=_8||_19!=_7){_7=_19;_8=_18;this.$q5(this.left,this.top,Math.max((_7+_13),this.getWidth()),Math.max((_8+_14),this.getHeight()));if(this.isRTL())this.handleMoved()}}
if(_6&&this.parentElement!=null){this.parentElement.childResetHandleForAdjustOverflowComplete()}
if(this.snapTo!=null&&_12&&(_1==this.$oe||_1==this.$ny))
{this.$qw(true)}
this.$uy=_7;this.$uz=_8;if((_2!=null&&_2!=_7)||(_3!=null&&_3!=_8))
{if(!_12&&_1==this.$nx)return;this.$5y(_7-_2,_8-_3,this.$pg)}}else if(this.overflow==_5.HIDDEN){this.$q5(this.left,this.top,this.getWidth(),this.getHeight());if(this.isRTL()){var _20=this.getScrollingMechanism();if(_20==isc.Canvas.NATIVE){this.scrollLeft=this.getScrollLeft()}else if(_20==isc.Canvas.NESTED_DIV){this.scrollLeft=this.getScrollLeft()}}
this.$51s()}else if(this.overflow==_5.CLIP_H){var _8=this.getScrollHeight(),_14=this.getVMarginBorder(),_21=Math.max(_8+_14,this.getHeight());this.$uz=_21;this.setClip(0,this.getWidth(),_21,0);this.$q5(this.left,this.top,this.getWidth(),_21)}else if(this.overflow==_5.CLIP_V){var _7=this.getScrollWidth(),_13=this.getHMarginBorder();if((isc.Browser.isIE||isc.Browser.isMoz||isc.Browser.isOpera)&&(_7>this.getInnerWidth())&&(this.$uy==_7)){this.$q5(this.left,this.top,this.getWidth(),this.getHeight());_7=this.getScrollWidth(true)
if(_7>this.getInnerWidth()){this.$q5(this.left,this.top,_7+_13,this.getHeight())}}else{this.$q5(this.left,this.top,Math.max(_7+_13,this.getWidth()),this.getHeight())}
var _22=Math.max(_7+_13,this.getWidth());this.setClip(0,_22,this.getHeight(),0);this.$uy=_22}else{var _20=this.getScrollingMechanism();if((isc.Browser.isIE&&this.showCustomScrollbars&&_20==isc.Canvas.NATIVE)||_20==isc.Canvas.NESTED_DIV)
{var _23=this.scrollLeft,_24=this.scrollTop,_25=this.getScrollLeft(),_26=this.getScrollTop();if(_25!=_23||_26!=_24){this.scrollTo(_25,_26,this.$1315)}}
var _27=this.vscrollOn,_28=this.hscrollOn,_29=this.$kk();var _30=(this.alwaysShowVScrollbar&&this.showCustomScrollbars);if(this.overflow==isc.Canvas.SCROLL){this.hscrollOn=this.vscrollOn=true}else{var _8=this.getScrollHeight(),_31=this.getHeight(),_7=this.getScrollWidth(),_32=this.getWidth(),_33=this.getScrollbarSize(),_34;var _14=this.getVMarginBorder(),_13=this.getHMarginBorder();if(!this.showCustomScrollbars&&this.getHandle().clientHeight!=null){this.hscrollOn=(this.getClipHandle().clientHeight<_31-_14);this.vscrollOn=_30||(this.getClipHandle().clientWidth<_32-_13)}else{this.vscrollOn=_30||((_8-(_31-_14))>0);this.hscrollOn=(_7-(_32-_13))>0}
if((this.vscrollOn&&!_27&&!this.hscrollOn)||(this.hscrollOn&&!_28&&!this.vscrollOn))
{if(this.showCustomScrollbars){this.$q5(this.left,this.top,this.getWidth(),this.getHeight())}
_34=(this.vscrollOn?"V":"")+(this.hscrollOn?"H":"");this.innerSizeChanged("introducing scrolling");var _19=this.getScrollWidth(true),_18=this.getScrollHeight(true);if(this.logIsDebugEnabled("scrolling")){this.logDebug("Rechecking scrollWidth/Height on introduction of scroll: old: "+[_7,_8]+", new: "+[_19,_18],"scrolling")}
_7=_19;_8=_18}
if(this.vscrollOn&&!this.hscrollOn){if(this.showCustomScrollbars||(this.getClipHandle().clientHeight==null))
this.hscrollOn=_7-(_32-_13-_33)>0;else
this.hscrollOn=(_31>this.getClipHandle().clientHeight+this.getVBorderSize())}else if(this.hscrollOn){if(this.showCustomScrollbars||(this.getClipHandle().clientWidth==null))
this.vscrollOn=_30||(_8-(_31-_14-_33)>0);else
this.vscrollOn=_30||(_32>this.getClipHandle().clientWidth+this.getHBorderSize())}}
if(this.logIsInfoEnabled("scrolling")){this.logInfo("Drawn size: "+this.getScrollWidth(true)+" by "+this.getScrollHeight(true)+", specified: "+this.getWidth()+" by "+this.getHeight()+", scrollbar state: "+(this.hscrollOn?"h":"")+(this.vscrollOn?"v":""),"scrolling")}
if(this.showCustomScrollbars&&(this.hscrollOn!=_28||this.vscrollOn!=_27))
{this.$q5(this.left,this.top,this.getWidth(),this.getHeight());if(this.$su!=null)delete this.$su;if(this.$sz!=null)delete this.$sz}
var _35=((_27?"V":"")+(_28?"H":"")),_36=((this.vscrollOn?"V":"")+(this.hscrollOn?"H":""));if(_35!=_36){this.logInfo("Scrollbar state: "+_35+" -> "+_36,"scrolling");if(_34==null||_36!=_34)
{this.innerSizeChanged("scrolling state changed")}}
if(this.isRTL()&&this.hscrollOn&&!_28){var _37=this.getScrollLeft();this.scrollLeft=_37}
if(this.showCustomScrollbars){if(!this.hscrollOn&&_28)this.hscrollbar.hide();if(!this.vscrollOn&&_27)this.vscrollbar.hide();if(this.hscrollOn){this.$u1()}else{if(_28)this.scrollTo(0,null,"ending hscroll")}
if(this.vscrollOn){this.$u2()}else{if(_27)this.scrollTo(null,0,"ending vscroll")}
this.$51s()}
if((this._useNativeTabIndex||this._useFocusProxy)&&_29!=this.$kk())
{this.$ur()}}
this.$1314=this.getScrollRight();return true},isc.A.$51s=function isc_Canvas__clampToContent(){if(this.scrollLeft==0&&this.scrollTop==0)return;var _1=Math.max(0,this.getScrollBottom()),_2=Math.max(0,this.getScrollRight()),_3=this.getScrollLeft(),_4=this.getScrollTop(),_5=false;if(_3>_2){_5=true;_3=_2}
if(_4>_1){_5=true;_4=_1}
if(_5){this.scrollTo(_3,_4,"clampToContent")}},isc.A.checkNativeScroll=function isc_Canvas_checkNativeScroll(){if(!this.isDrawn()||this.getScrollingMechanism()!=isc.Canvas.NATIVE)return;var _1=this.getScrollHandle(),_2=_1.scrollLeft,_3=_1.scrollTop;if(this.isRTL()){_2=this.$92y(_2)}
if(_2!=this.scrollLeft||_3!=this.scrollTop){this.scrollTo(this.scrollLeft,this.scrollTop,"removing native scroll")}},isc.A.$u1=function isc_Canvas__setHorizontalScrollbar(){var _1=this.hscrollbar;if(!_1){_1=this.hscrollbar=isc.ClassFactory.newInstance(this.scrollbarConstructor,{ID:this.getID()+"_hscroll",autoDraw:false,_generated:true,zIndex:this.getZIndex()+1,vertical:false,scrollTarget:this,visibility:this.visibility,$jp:false,$jo:false,_redrawWithParent:false,$u3:false})}
if(!isc.Page.isLoaded()){var _2=this;isc.Page.setEvent("load",function(){if(!_2.destroyed)_2.$u1()});return}
if(!this.hscrollOn)return;_1.setRect(this.getOffsetLeft()+this.getLeftMargin()+(this.vscrollOn&&this.isRTL()?this.getCustomScrollbarSize():0),this.getOffsetTop()+this.getHeight()-
(this.getBottomMargin()+this.getCustomScrollbarSize()),this.getOuterViewportWidth(),this.getCustomScrollbarSize());if(!_1.masterElement){this.addPeer(_1)}else{if(this.visibility!=isc.Canvas.HIDDEN)_1.show()}},isc.A.getCustomScrollbarSize=function isc_Canvas_getCustomScrollbarSize(){var _1=this.scrollbarConstructor;if(isc.isA.String(_1))_1=isc[_1];if(isc.NativeScrollbar!=null&&_1==isc.NativeScrollbar)return isc.NativeScrollbar.getScrollbarSize();return this.scrollbarSize},isc.A.$u2=function isc_Canvas__setVerticalScrollbar(){var _1=this.vscrollbar
if(!_1){_1=this.vscrollbar=isc.ClassFactory.newInstance(this.scrollbarConstructor,{ID:this.getID()+"_vscroll",autoDraw:false,_generated:true,zIndex:this.getZIndex()+1,vertical:true,scrollTarget:this,visibility:this.visibility,$jp:false,$jo:false,_redrawWithParent:false,$u3:false})}
if(!isc.Page.isLoaded()){var _2=this;isc.Page.setEvent("load",function(){if(!_2.destroyed)_2.$u2()});return}
if(!this.vscrollOn)return;_1.setShowCorner(this.hscrollOn&&this.vscrollOn);_1.setRect(this.getOffsetLeft()+(this.isRTL()?this.getLeftMargin():this.getWidth()-(this.getRightMargin()+this.getScrollbarSize())),this.getOffsetTop()+this.getTopMargin(),this.getScrollbarSize(),this.getHeight()-this.getVMarginSize());if(!_1.masterElement){this.addPeer(_1)}else{if(this.visibility!=isc.Canvas.HIDDEN)_1.show()}},isc.A.scrollByPage=function isc_Canvas_scrollByPage(_1,_2,_3){var _4=(_1?this.getViewportHeight():this.getViewportWidth())-
this.scrollDelta;this.$u4(_1,_2*_4,_3||"scrollByPage")},isc.A.scrollByDelta=function isc_Canvas_scrollByDelta(_1,_2,_3){this.$u4(_1,_2*this.scrollDelta,_3||"scrollByDelta")},isc.A.$u4=function isc_Canvas__scrollByAmount(_1,_2,_3){if(_1){this.scrollTo(null,this.getScrollTop()+_2,_3)}else{this.scrollTo(this.getScrollLeft()+_2,null,_3)}},isc.A.canScroll=function isc_Canvas_canScroll(_1){var _2=_1?this.getScrollHeight():this.getScrollWidth(),_3=_1?this.getViewportHeight():this.getViewportWidth();return(_2>_3)},isc.A.getScrollRatio=function isc_Canvas_getScrollRatio(_1){var _2=_1?this.getScrollHeight():this.getScrollWidth(),_3=_1?this.getViewportHeight():this.getViewportWidth(),_4=_1?this.getScrollTop():this.getScrollLeft(),_5=_2-_3;if(_5==0)return 0;return _4/_5},isc.A.scrollToRatio=function isc_Canvas_scrollToRatio(_1,_2,_3){var _4=Math.max(0,(_1?this.getScrollBottom():this.getScrollRight())),_5=Math.round(_4*_2),_3=_3||"scrollToRatio";if(_1){this.scrollTo(null,_5,_3)}else{this.scrollTo(_5,null,_3)}},isc.A.getViewportRatio=function isc_Canvas_getViewportRatio(_1){if(_1){return this.getViewportHeight()/this.getScrollHeight()}else{return this.getViewportWidth()/this.getScrollWidth()}},isc.A.getScrollBottom=function isc_Canvas_getScrollBottom(){if(this.overflow==isc.Canvas.VISIBLE)return 0;return this.getScrollHeight()-this.getViewportHeight()},isc.A.getScrollRight=function isc_Canvas_getScrollRight(){if(this.overflow==isc.Canvas.VISIBLE)return 0;return this.getScrollWidth()-this.getViewportWidth()},isc.A.scrollToTop=function isc_Canvas_scrollToTop(){this.scrollTo(null,0,"scrollToTop")},isc.A.scrollToBottom=function isc_Canvas_scrollToBottom(){this.scrollTo(null,this.getScrollBottom(),"scrollToBottom")},isc.A.scrollToLeft=function isc_Canvas_scrollToLeft(){this.scrollTo(0,null,"scrollToLeft")},isc.A.scrollToRight=function isc_Canvas_scrollToRight(){this.scrollTo(this.getScrollRight(),null,"scrollToRight")},isc.A.scrollBy=function isc_Canvas_scrollBy(_1,_2,_3){var _4,_5;if(_1!=null)_4=this.getScrollLeft()+_1;if(_2!=null)_5=this.getScrollTop()+_2;return this.scrollTo(_4,_5,_3||"scrollBy")},isc.A.scrollByPercent=function isc_Canvas_scrollByPercent(_1,_2){if(isc.isA.String(_1))_1=parseInt(_1);if(isc.isA.String(_2))_2=parseInt(_2);if(!isc.isA.Number(_1))_1=0;else
_1=parseInt(_1/100*Math.max(0,(this.getScrollWidth()-this.getViewportWidth())));if(!isc.isA.Number(_2))_2=0;else
_2=parseInt(_2/100*Math.max(0,(this.getScrollHeight()-this.getViewportHeight())));this.scrollBy(_1,_2)},isc.A.scrollTo=function(left,top,reason,animating){if(isc.$cv)arguments.$cw=this;if(!animating){if(this.scrollAnimation)this.finishAnimation("scroll");if(this.hideAnimation&&this.$hideAnimationInfo.slideOut)
this.$hideAnimationInfo.slideOut=false;if(this.showAnimation&&this.$showAnimationInfo.slideIn)
this.$showAnimationInfo.slideIn=false}
if(this.logIsDebugEnabled("scrolling")){this.logDebug("scrollTo("+left+", "+top+"), reason: "+reason,"scrolling")}
if(left==null){left=this.getScrollLeft()}
if(top==null){top=this.getScrollTop()}
var actuallyMoved=false;if((left!=null&&left!=this.scrollLeft)||(top!=null&&top!=this.scrollTop)){actuallyMoved=true;this.lastScrollLeft=this.scrollLeft;this.lastScrollTop=this.scrollTop;this.lastScrollDirection=(left!=null&&left!=this.scrollLeft&&top!=null&&top!=this.scrollTop?"both":top!=null&&top!=this.scrollTop?"vertical":"horizontal")}
if(reason=="nativeScroll"||!this.isDrawn()){this.scrollLeft=left;this.scrollTop=top}else{var maxScrollLeft=this.getScrollRight();this.scrollLeft=Math.max(0,Math.min(maxScrollLeft,left));var maxScrollTop=this.getScrollBottom();this.scrollTop=Math.max(0,Math.min(maxScrollTop,top));this.$u5(this.scrollLeft,this.scrollTop)}
if(this.showCustomScrollbars){if(this.hscrollOn&&this.hscrollbar)this.hscrollbar.setThumb();if(this.vscrollOn&&this.vscrollbar)this.vscrollbar.setThumb()}
if(actuallyMoved)this.$u6(this.lastScrollLeft-this.scrollLeft,this.lastScrollTop-this.scrollTop)},isc.A.scrolled=function isc_Canvas_scrolled(_1,_2){},isc.A.$u6=function isc_Canvas__scrolled(_1,_2){if(!isc.EH.$ky&&!isc.Browser.nativeMouseMoveOnCanvasScroll){this.$1336()}
if(this.hasFocus&&isc.Browser.isIE9){this.$148o()}
this.$95i(this,_1,_2);if(this.scrolled)this.scrolled(_1,_2)},isc.A.$148o=function isc_Canvas__fixIEFocusScrollArtifacts(){if(this.$148n){this.fireOnPause("redrawToFixIEFocusScrollArtifacts",{target:this,methodName:"markForRedraw",args:["fixIEScrollArtifacts"]},100)}else{var _1=this.getStyleHandle();if(_1)_1.backgroundColor=_1.backgroundColor}},isc.A.$1336=function isc_Canvas__fireSyntheticMouseMove(){var _1=isc.EH.lastEvent,_2=isc.EH.isMouseEvent(_1.eventType),_3=_2?_1.target:isc.EH.lastMoveTarget;if(_3!=null){if(!this.contains(_3,true))_3=null;else if(!_2&&_3!=this){var _4=this.getOffsetX(),_5=this.getOffsetY();if(!_3.visibleAtPoint(isc.EH.getX(),isc.EH.getY(),false,null,this))
{_3=null}}
if(_3!=null){this.$1337=true;isc.EH.$kx(null,isc.EH.lastEvent);delete this.$1337}}},isc.A.parentScrolled=function isc_Canvas_parentScrolled(_1,_2,_3){},isc.A.handleParentScrolled=function isc_Canvas_handleParentScrolled(_1,_2,_3){if(isc.Element.cacheOffsetCoords)this.$808=this.$809=null;this.parentScrolled(_1,_2,_3);this.$95i(_1,_2,_3)},isc.A.$95i=function isc_Canvas__fireParentScrolled(_1,_2,_3){var _4=this.children;if(_4!=null){for(var i=0;i<_4.length;i++){if(isc.isA.Canvas(_4[i])){_4[i].handleParentScrolled(_1,_2,_3)}}}},isc.A.$81b=function isc_Canvas__childrenCoordsChanged(){if(!isc.Element.cacheOffsetCoords)return;var _1=this.children;if(_1!=null){for(var i=0,_3=_1.length;i<_3;++i){var _4=_1[i];_4.$808=_4.$809=null;_4.$81b()}}},isc.A.$1392=function isc_Canvas__disableOffsetCoordsCaching(){if(!isc.Element.cacheOffsetCoords||!this.isDrawn())return;this.$808=this.$809=null;this.$1390=true;this.$1391=this.cacheOffsetCoords;this.cacheOffsetCoords=false;var _1=this.children;if(_1!=null){for(var i=0,_3=_1.length;i<_3;++i){_1[i].$1392()}}},isc.A.$1393=function isc_Canvas__enableOffsetCoordsCaching(){if(!isc.Element.cacheOffsetCoords||!this.isDrawn())return;this.$1390=false;this.cacheOffsetCoords=this.$1391;delete this.$1391;var _1=this.children;if(_1!=null){for(var i=0,_3=_1.length;i<_3;++i){_1[i].$1393()}}},isc.A.scrollToPercent=function isc_Canvas_scrollToPercent(_1,_2,_3){if(isc.isA.String(_1))_1=parseInt(_1);if(isc.isA.String(_2))_2=parseInt(_2);if(_1!=null){if(!isc.isA.Number(_1))_1=0;_1=parseInt(_1/100*Math.max(0,(this.getScrollWidth()-
this.getViewportWidth())))}
if(_2!=null){if(!isc.isA.Number(_2))_2=0;_2=parseInt(_2/100*Math.max(0,(this.getScrollHeight()-
this.getViewportHeight())))}
this.scrollTo(_1,_2,_3||"scrollToPercent")},isc.A.$92y=function isc_Canvas__adjustScrollLeftForRTL(_1,_2){var _3=isc.Browser.isMoz||(isc.Browser.isIE&&isc.Browser.minorVersion<5.5),_4=(isc.Browser.isIE8||isc.Browser.isIE9)&&isc.Browser.isStrict;if(!_3&&!_4)return _1;var _5=this.getScrollWidth(),_6=this.getViewportWidth();return isc.Canvas.$92y(_1,_5,_6,_2,_3,_4)},isc.A.$95h=function isc_Canvas__shiftScrollLeftOrigin(_1,_2){var _3=this.getScrollWidth(),_4=this.getViewportWidth();return isc.Canvas.$92y(_1,_3,_4,_2,true)},isc.A.$u5=function isc_Canvas__scrollHandle(_1,_2){var _3=this.getScrollingMechanism();if(_3==isc.Canvas.NATIVE){if(this.isRTL()){_1=this.$92y(_1,true)}
var _4=this.getScrollHandle();if(_4){this.$u7=true;_4.scrollLeft=_1;_4.scrollTop=_2;var _5=_4.scrollLeft,_6=_4.scrollTop;if(this.isRTL()){_5=this.$92y(_5)}
if(_5!=this.scrollLeft||_6!=this.scrollTop){this.scrollLeft=_5;this.scrollTop=_6}
delete this.$u7}}else if(_3==isc.Canvas.NESTED_DIV){var _4=this.getHandle();if(_4==null){this.logWarn(this.getCallTrace(arguments)+" in NS6 with null handle");return}
_4=_4.style;if(this.isRTL()){_1=this.$95h(-_1);_2=-_2}else{_1=-_1;_2=-_2}
_4.left=_1+this.$ph;_4.top=_2+this.$ph}},isc.A.$lh=function isc_Canvas__handleCSSScroll(_1,_2){if(isc.$cv)arguments.$cw=this;if(this.$u7)return;if(!this.isDrawn())return;var _3=this.getScrollingMechanism();if(_3!=isc.Canvas.NATIVE){this.logWarn("unsupported native scroll occurred on this widget - resetting");var _4=this.getScrollHandle();if(_3==isc.Canvas.NESTED_DIV){this.$u5(this.isRTL()?this.getScrollRight():0,0)}else{this.$u5(this.scrollLeft,this.scrollTop)}
return}
if(isc.Browser.isMoz&&!_1&&(_2||isc.Browser.geckoVersion<20030312)){if(!this.$u8)
this.$u8=this.delayCall("$lh",[true],10);return}
this.$u8=null;var _5=this.getScrollLeft(),_6=this.getScrollTop();if(_5==this.scrollLeft&&_6==this.scrollTop)return;isc.EH.$h1("SCR");this.scrollTo(_5,_6,this.$1315);isc.EH.$h2()},isc.A.mouseWheel=function isc_Canvas_mouseWheel(){if((this.overflow==isc.Canvas.AUTO||this.overflow==isc.Canvas.SCROLL)&&this.showCustomScrollbars&&this.vscrollOn)
{var _1=this.ns.EH.lastEvent.wheelDeltaY,_2=this.ns.EH.lastEvent.wheelDeltaX;var _3=this.scrollTop+Math.round(_1*isc.Canvas.scrollWheelDelta);var _4=this.scrollLeft+Math.round(_2*isc.Canvas.scrollWheelDelta);this.scrollTo(_4,_3,"mouseWheel");return false}
return true},isc.A.isDragScrolling=function isc_Canvas_isDragScrolling(){if(this.vscrollOn&&this.vscrollbar&&this.vscrollbar.isDragScrolling())return true;if(this.hscrollOn&&this.hscrollbar&&this.hscrollbar.isDragScrolling())return true;return false},isc.A.isRepeatTrackScrolling=function isc_Canvas_isRepeatTrackScrolling(){if(this.vscrollOn&&this.vscrollbar&&this.vscrollbar.isRepeatTrackScrolling())return true;if(this.hscrollOn&&this.hscrollbar&&this.hscrollbar.isRepeatTrackScrolling())return true;return false},isc.A.isMouseWheelScrolling=function isc_Canvas_isMouseWheelScrolling(){return isc.EH.lastEvent.eventType==isc.EH.MOUSE_WHEEL},isc.A.handleKeyPress=function isc_Canvas_handleKeyPress(_1,_2){var _3;if(this.convertToMethod("keyPress")){_3=this.keyPress(_1,_2)}
if(_3!=false&&this.shouldCancelKey!=null&&this.shouldCancelKey(_1,_2))
{_3=false}
if(_3==false)return false;if(this.widgetHandleKeyPress){_3=this.widgetHandleKeyPress(_1,_2);if(_3==false)return false}
var _4=_1.keyName;if(this._useFocusProxy&&((isc.Browser.isMoz&&this.canSelectText)||isc.Browser.isSafari)&&_4=="Tab")
{this.setFocus(true)}
if((this.overflow==isc.Canvas.AUTO||this.overflow==isc.Canvas.SCROLL)&&this.showCustomScrollbars)
{_3=this.handleKeyboardScroll(_4)}
return _3},isc.A.handleKeyboardScroll=function isc_Canvas_handleKeyboardScroll(_1){if(isc.EH.ctrlKeyDown()||isc.EH.altKeyDown())return;var _2=0,_3=0;if(_1=="Page_Up")_3-=this.getViewportHeight();else if(_1=="Page_Down")_3+=this.getViewportHeight();else if(_1=="Arrow_Up")_3-=10;else if(_1=="Arrow_Down")_3+=10;else if(_1=="Arrow_Left")_2-=10;else if(_1=="Arrow_Right")_2+=10;var _4="cancel native keyPress scrolling";if(_2!=0||_3!=0){this.scrollTo(this.scrollLeft+_2,this.scrollTop+_3,_4);return false}
if(_1=="Home"){this.scrollTo(null,0,_4);return false}else if(_1=="End"){this.scrollTo(null,(this.getScrollHeight()-this.getViewportHeight()),_4);return false}},isc.A.handleKeyDown=function isc_Canvas_handleKeyDown(_1,_2){var _3
if(this.convertToMethod("keyDown")){_3=this.keyDown(_1,_2)}
return _3},isc.A.$q5=function isc_Canvas__setHandleRect(_1,_2,_3,_4){var _5=this.getStyleHandle();if(_5==null)return;if(this.shrinkElementOnHide&&!this.isVisible()){return}
if(this.showCustomScrollbars&&this.vscrollOn&&_1!=null&&this.isRTL()){_1+=this.getScrollbarSize()}
if(_3!=null||_4!=null){var _6=this.$sf(_3,_4);_3=_6[0];_4=_6[1]}
this.$118i(_1,_2,_3,_4,_5)},isc.A.$118i=function isc_Canvas__assignRectToHandle(_1,_2,_3,_4,_5){if(_1!=null&&isc.isA.Number(_1))this.$u9(_5,isc.Canvas.LEFT,_1);if(_2!=null&&isc.isA.Number(_2))this.$u9(_5,isc.Canvas.TOP,_2);if(_3!=null&&isc.isA.Number(_3))this.$u9(_5,this.$o6,Math.max(_3,1));if(_4!=null&&isc.isA.Number(_4))this.$u9(_5,this.$o5,Math.max(_4,1))},isc.A.$u9=function isc_Canvas__assignSize(_1,_2,_3){if(isc.Browser.isIE||isc.Browser.isOpera){if((_2==this.$o6||_2==this.$o5))_3=Math.max(1,_3);if(!isc.Browser.isStrict){_1[_2]=_3}else{_1[_2]=_3+this.$ph}}else{if(_1==null){return}
var _4=_3+this.$ph;_1[_2]=_4;if(_1.setAttribute!=null){_1.setAttribute(_2,_4)}}},isc.A.$qi=function isc_Canvas__sizeBackMask(){var _1=this._backMask;if(!_1)return;if(this.showEdges){var _2=this.$l0,_3=this.maskEdgeCenterOnly,_4=_3?_2.$y4:_2.$tb,_5=_3?_2.$y5:_2.$tc,_6=_3?_2.$y6:_2.$td,_7=_3?_2.$y7:_2.$te,_8=this.getVisibleWidth()-(_4+_5),_9=this.getVisibleHeight()-(_6+_7);if(_8<=0||_9<=0)_1.hide();else{if(this.isVisible())_1.show();_1.setRect(this.getLeft()+_4,this.getTop()+_6,_8,_9)}}else{_1.setRect(this.getRect())}},isc.A.getTextDirection=function isc_Canvas_getTextDirection(){if(this.$81a)return this.$81a;var _1=this;while(_1){if(_1.textDirection!=null){return(this.$81a=_1.textDirection)}
_1=_1.parentElement;if(_1&&_1.eventProxy)_1=_1.eventProxy}
return(this.$81a=isc.Page.getTextDirection())},isc.A.isRTL=function isc_Canvas_isRTL(){return(this.getTextDirection()==isc.Canvas.RTL)},isc.A.getRTLSign=function isc_Canvas_getRTLSign(){return this.isRTL()?-1:1},isc.A.setVisibility=function isc_Canvas_setVisibility(_1){if(this.$va!=null&&!this.$vb)
this.finishAnimation(this.$va);if(this.$vc!=null&&!this.$vd)
this.finishAnimation(this.$vc);if(this.fadeAnimation)this.finishAnimation("fade");if(!isc.isA.String(_1)){_1=(_1!=false?isc.Canvas.INHERIT:isc.Canvas.HIDDEN)}
if(this.visibility==_1)return;var _2=this.isVisible();this.visibility=_1;if(this.isDrawn()){if(!_2&&this.isVisible()){if(this.isDirty()){this.redraw("show() while dirty")}else if(this.children&&this.children.length>0){var _3=isc.Canvas.$nm.duplicate();for(var i=0;i<_3.length;i++){var _5=_3[i];if(_5&&_5.isDirty()&&this.$sr(_5)){_5.redraw("show() on parent while dirty")}}}}
this.$vf(_1);this.$ve()}
if(this.peers){for(var i=0;i<this.peers.length;i++){var _6=this.peers[i];if(this.isVisible()&&((_6==this.hscrollbar&&!this.hscrollOn)||(_6==this.vscrollbar&&!this.vscrollOn)))continue;if(this.isVisible()&&_6==this._shadow&&!this.showShadow)continue;if(_6.$jq)_6.setVisibility(_1)}}
if(this.children)this.children.map("parentVisibilityChanged",_1,this);if(this.parentElement)this.parentElement.childVisibilityChanged(this,_1);if(this._useFocusProxy)this.$vg();this.$807()},isc.A.$807=function isc_Canvas__visibilityChanged(){if(!this.isDrawn())return;var _1=this.isVisible();if(_1!=this.$806){this.$806=_1;if(this.visibilityChanged!=null){this.visibilityChanged(this.isVisible())}}},isc.A.parentVisibilityChanged=function isc_Canvas_parentVisibilityChanged(_1,_2){if(this.children)this.children.map("parentVisibilityChanged",_1,_2);this.$ve();if(this==isc.Canvas.$rl)isc.Canvas.hideResizeThumbs();if(this._useFocusProxy)this.$vg();if(_2.$sr(this))this.$807()},isc.A.childVisibilityChanged=function isc_Canvas_childVisibilityChanged(_1,_2){this.$t6("childVisChange")},isc.A.childCleared=function isc_Canvas_childCleared(_1){if(!this.destroying)this.$t6("childClear")},isc.A.peerCleared=function isc_Canvas_peerCleared(_1){},isc.A.childDrawn=function isc_Canvas_childDrawn(_1){if(this.isDrawn())this.$t6("childDraw")},isc.A.peerDrawn=function isc_Canvas_peerDrawn(_1){},isc.A.$vg=function isc_Canvas__updateFocusProxyVisibility(){if(!this._useFocusProxy||!this.$qj)return;var _1=this.isVisible(),_2=this.$sl();if(_2){if(_1&&_2.style.visibility==isc.Canvas.HIDDEN)
_2.style.visibility=isc.Canvas.VISIBLE
if(!_1&&_2.style.visibility!=isc.Canvas.HIDDEN)
_2.style.visibility=isc.Canvas.HIDDEN}},isc.A.$vf=function isc_Canvas__setHandleVisibility(_1){var _2=this.getStyleHandle();if(_2!=null)_2.visibility=_1},isc.A.$ve=function isc_Canvas__updateHandleDisplay(){if(!this.hideUsingDisplayNone||!this.isDrawn())return;var _1=this.getStyleHandle();if(!this.isVisible()&&!this.$62u){this.$vh=_1.display;this.$62u=true;_1.display=this.$27r;this.$808=this.$809=null}else if(this.isVisible()&&this.$62u){_1.display=(this.$vh?this.$vh:isc.emptyString);delete this.$62u;delete this.$vh}});isc.evalBoundary;isc.B.push(isc.A.$418=function isc_Canvas__drawOnShow(){return(this.getDrawnState()==isc.Canvas.UNDRAWN)&&!this.parentElement&&!this.masterElement},isc.A.show=function isc_Canvas_show(){if(isc.$cv)arguments.$cw=this;var _1=this.hasFocus;if(this.$418()){this.draw(true)}
this.setVisibility(isc.Canvas.INHERIT);if(this.shrinkElementOnHide){this.$q5(this.getLeft(),this.getTop(),this.getWidth(),this.getHeight());this.getStyleHandle().overflow=this.overflow}
if(_1&&this.hasFocus){this.logInfo("Show: Hidden / Undrawn widget marked as having focus - calling focus()","events");this.hasFocus=false;this.focus()}
if(this.autoShowParent&&this.parentElement)this.parentElement.show()},isc.A.showRecursively=function isc_Canvas_showRecursively(){var _1=this.parentElement;if(this.$86x==null&&_1==null){this.show()}else{this.setVisibility(isc.Canvas.INHERIT);if(this.$86x!=null){_1=window[this.$86x]}
_1.showRecursively();if(isc.TabSet!=null&&isc.isA.TabSet(_1)){_1.selectTab(_1.tabForPane(this))}else if(isc.SectionStack!=null&&isc.isA.SectionStack(_1)){_1.expandSection(_1.sectionForItem(this))}}},isc.A.$414=function isc_Canvas__relativePageResized(){if(!this.isDrawn()||this.parentElement||this.position!=this.$411)return;var _1=this.$412,_2=this.$413,_3=this.getPageLeft(),_4=this.getPageTop();this.$tx=(_3-_1);this.$ty=(_4-_2);this.$t2();this.$412=_3;this.$413=_4;isc.Page.setEvent("resize",this,isc.Page.FIRE_ONCE,"$414")},isc.A.hide=function isc_Canvas_hide(){this.$rk();if(this.shrinkElementOnHide){this.getStyleHandle().overflow=isc.Canvas.HIDDEN;this.$q5(this.left,this.top,0,0)}
this.setVisibility(isc.Canvas.HIDDEN)},isc.A.isVisible=function isc_Canvas_isVisible(){var _1=this;while(_1){if(_1.visibility==isc.Canvas.HIDDEN)return false;if(_1.visibility==isc.Canvas.VISIBLE)return true;_1=_1.parentElement}
return true},isc.A.$st=function isc_Canvas__isDisplayNone(){var _1=this;while(_1){if(_1.visibility==isc.Canvas.HIDDEN&&_1.hideUsingDisplayNone)return true;_1=_1.parentElement}
return false},isc.A.setEnabled=function isc_Canvas_setEnabled(_1){this.logWarn("call to deprecated method 'setEnabled()' - use 'setDisabled()' instead.");var _2=((_1==null||isc.isA.Boolean(_1))?!_1:(_1==this.$pi));this.setDisabled(_2)},isc.A.setDisabled=function isc_Canvas_setDisabled(_1){if(_1==null)_1=false;if(!isc.isA.Boolean(_1))_1=(_1==this.$pi);if(this.disabled==_1)return;if(this.peers)this.peers.map("masterDisabled",_1);var _2=this.isDisabled()
this.disabled=_1;var _3=this.isDisabled();if(_2!=_3){this.setHandleDisabled(_3);if(this.children)this.children.map("parentDisabled",_3)}},isc.A.masterDisabled=function isc_Canvas_masterDisabled(_1){this.setDisabled(_1)},isc.A.parentDisabled=function isc_Canvas_parentDisabled(_1){if(this.disabled)return;if(!this.parentElement.redrawOnDisable)this.setHandleDisabled(_1);if(this.children)this.children.map("parentDisabled",_1)},isc.A.setHandleDisabled=function isc_Canvas_setHandleDisabled(_1){if(!this.isDrawn())return;if(this.redrawOnDisable)this.markForRedraw("setDisabled");if(this.$kk())this.disableKeyboardEvents(_1)},isc.A.disableKeyboardEvents=function isc_Canvas_disableKeyboardEvents(_1,_2){if(_1){this.$vi(-1);if(this.accessKey!=null)this.$m9(null)}else{this.$vi(this.getTabIndex());if(this.accessKey!=null)this.$m9(this.accessKey)}
if(_1&&this.hasFocus)this.blur();if(_2&&this.children){for(var i=0;i<this.children.length;i++){this.children[i].disableKeyboardEvents(_1,true)}}},isc.A.enable=function isc_Canvas_enable(){if(this.disabled)this.setDisabled(false)},isc.A.disable=function isc_Canvas_disable(){if(!this.disabled)this.setDisabled(true)},isc.A.isDisabled=function isc_Canvas_isDisabled(){var _1=this;while(_1){if(_1.disabled)return true;_1=_1.parentElement;if(_1&&_1.eventProxy)_1=_1.eventProxy}
return false},isc.A.isEnabled=function isc_Canvas_isEnabled(){this.logWarn("Call to deprecated 'isEnabled()' method - should use isDisabled() instead");return!this.isDisabled()},isc.A.$kk=function isc_Canvas__canFocus(){if(this.canFocus!=null)return this.canFocus;if((this.overflow==isc.Canvas.SCROLL)||((this.overflow==isc.Canvas.AUTO)&&(this.vscrollOn||this.hscrollOn))){return true}
return false},isc.A.setCanFocus=function isc_Canvas_setCanFocus(_1){this.canFocus=_1;this.$ur()},isc.A.$ur=function isc_Canvas__updateCanFocus(){var _1=this.$kk();this.$vj(_1);this.canFocusChanged();if(!_1&&this.hasFocus)this.blur()},isc.A.$vj=function isc_Canvas__updateHandleForFocus(_1){var _2;if(this._useFocusProxy){if(_1){_2=this.$sl();if(!_2)return this.makeFocusProxy()}else{this.$qp();return}
if(isc.Browser.isSafari&&this.getTabIndex()==-1){this.$qp();return}}
if(this.$qc()){if(_1&&this.accessKey){this.$qd()}else if(this.$qt){this.$qu()}}
if(this._useNativeTabIndex)_2=this.getFocusHandle();if(_1){this.$vk(this.getTabIndex(),this.$sp);if(_2!=null){var _3=this.$sg(),_4=this.$si();_2.onfocus=_3;_2.onblur=_4;if(this.accessKey)this.$m9(this.accessKey)}}else{if(_2!=null){_2.onFocus=null;_2.onBlur=null;this.$vi(-1);if(_2.accessKey!=null)this.$m9(null)}}},isc.A.canFocusChanged=function isc_Canvas_canFocusChanged(){var _1=this.parentElement;while(_1){_1.childCanFocusChanged(this);_1=_1.parentElement}},isc.A.childCanFocusChanged=function isc_Canvas_childCanFocusChanged(_1){},isc.A.setShowFocusOutline=function isc_Canvas_setShowFocusOutline(_1,_2){if(!_2&&this.showFocusOutline==_1)return;if(!_2)this.showFocusOutline=_1;var _3=this.getClipHandle();if(_3!=null){if(isc.Browser.isIE){_3.hideFocus=!_1}else{_3.style.outlineStyle=(_1?isc.emptyString:this.$27r)}}},isc.A.$vl=function isc_Canvas__readyToSetFocus(_1){return(this.isDrawn()&&this.visibleInDOM()&&(!_1||!this.isDisabled()))},isc.A.visibleInDOM=function isc_Canvas_visibleInDOM(){if(!this.isVisible())return false;var _1=this;while(_1.parentElement)_1=_1.parentElement;if(_1.position==isc.Canvas.ABSOLUTE)return true;var _2=this.getDocumentBody();var _3=_1.getClipHandle().parentNode;while(_3&&_3!=_2){var _4=_3.style;if(_4&&_4.visibility==this.$nz)return false;if(_4&&_4.display==this.$27r)return false;_3=_3.parentNode}
return true},isc.A.getFocusHandle=function isc_Canvas_getFocusHandle(){if(this._useNativeTabIndex){return this.getClipHandle()}else if(this._useFocusProxy&&this.$qj){return this.$sl()}
return null},isc.A.setFocus=function isc_Canvas_setFocus(_1,_2){if(!this.$vl(_1))return;var _3=this.getFocusHandle(_1);if(_1&&this.$kk()){if(_3!=null){if(isc.Browser.isIE&&document.activeElement==_3){this.logInfo("setFocus() not calling element.focus() as element already has native focus","nativeFocus")}else{this.logInfo("about to call native focus()"+(this.logIsDebugEnabled("traceFocus")?this.getStackTrace():""),"nativeFocus");isc.EH.$lg=this;_3.focus();isc.EH.$vm=this}}else{this.ns.EH.focusInCanvas(this)}}else if(this.hasFocus){if(_3){this.logInfo("about to call native blur()"+(this.logIsDebugEnabled("traceBlur")?this.getStackTrace():""),"nativeFocus");isc.EH.$ld=this;_3.blur()}else{this.ns.EH.blurFocusCanvas(this)}}},isc.A.$vn=function isc_Canvas__restoreFocus(){var _1=isc.EH.$ke;if(_1!=null&&_1!=this){this.logDebug("not restoring focus; focus moved to: "+_1,"nativeFocus");return}
var _2=isc.EH.$lg;if(_2!=null&&_2!=this){this.logDebug("not restoring focus; focus about to move to:"+_2,"nativeFocus");return}
this.logDebug("restoring focus from zIndex change","nativeFocus");this.$vo(true)},isc.A.focus=function isc_Canvas_focus(_1){if(isc.$cv)arguments.$cw=this;this.setFocus(true,_1)},isc.A.blur=function isc_Canvas_blur(_1){if(isc.$cv)arguments.$cw=this;this.setFocus(false,_1)},isc.A.focusAtEnd=function isc_Canvas_focusAtEnd(_1){return this.focus()},isc.A.$vo=function isc_Canvas__setFocusWithoutHandler(_1,_2){this.$vp=true;this.setFocus(_1,_2)},isc.A.$lf=function isc_Canvas__focusChanged(_1){if(_1==null)_1=(this.ns.EH.$ke==this);this.hasFocus=_1;if(this.$vp){delete this.$vp;return false}
this.$vq=true;if(this.focusChanged!=null){this.convertToMethod("focusChanged");this.focusChanged(_1)}
if(this.redrawOnFocus)this.markForRedraw("setFocus");this.$vq=false},isc.A.$rk=function isc_Canvas__updateFocusForHide(){var _1=this.ns.EH.getFocusCanvas();if(this.$sr(_1)){if(isc.isA.Canvas(_1.focusOnHide)&&_1.focusOnHide.isDrawn()&&_1.focusOnHide.isVisible()){_1.focusOnHide.focus()}
else{_1.blur();if(_1.hasFocus)isc.EH.blurFocusCanvas(_1)}}},isc.A.containsFocus=function isc_Canvas_containsFocus(){var _1=this.ns.EH.getFocusCanvas();return this.contains(_1,true)},isc.A.setAccessKey=function isc_Canvas_setAccessKey(_1){this.accessKey=_1;if(this.$kk()&&!this.isDisabled()){this.$m9(this.accessKey)}},isc.A.$m9=function isc_Canvas__setHandleAccessKey(_1){if(this.$qc()){if(_1==null)this.$qu();else{if(this.$qt)this.$qt.accessKey=_1;else this.$qd()}
return}
if(this._useNativeTabIndex){var _2=this.getHandle();if(_2!=null)_2.accessKey=_1}
if(this._useFocusProxy&&this.$qj){var _2=this.$sl();if(_2!=null){if(isc.Browser.isMoz){this.$qp();this.makeFocusProxy()}else{_2.accessKey=_1}}}},isc.A.getAccessKey=function isc_Canvas_getAccessKey(){return this.accessKey},isc.A.getTabIndex=function isc_Canvas_getTabIndex(){if(this.tabIndex==null){this.$vr()}
return this.tabIndex},isc.A.getTabIndexSpan=function isc_Canvas_getTabIndexSpan(){return 1},isc.A.setTabIndex=function isc_Canvas_setTabIndex(_1){var _2=isc.Canvas.TAB_INDEX_FLOOR;if(_1>=_2){var _3=_2-1;this.logWarn("setTabIndex(): Passed index of "+_1+". This method does not support setting a tab index greater than "+_3+".  Setting tab index for this widget to "+_3+this.getStackTrace());_1=_3}
this.$rp();this.$vk(_1,false)},isc.A.$vk=function isc_Canvas__setTabIndex(_1,_2){this.$sp=_2;this.tabIndex=_1;if(this.$kk()&&!this.isDisabled()){this.$vi(_1)}},isc.A.$vi=function isc_Canvas__setHandleTabIndex(_1){if(this._useNativeTabIndex&&this.isDrawn()){var _2=this.getFocusHandle();_2.tabIndex=_1;if(isc.Browser.isIE)isc.Canvas.$vs()}
if(this._useFocusProxy){if(!this.$qj)return this.makeFocusProxy();var _2=this.$sl();var _3=(this.hasFocus&&!this.$vq);if(_3&&_2)_2.blur();if(isc.Browser.isSafari&&_1<0)return this.$qp();if(_2!=null){_2.tabIndex=_1;if(isc.Browser.isMoz){_2.style.MozUserFocus=(_1<0?"ignore":"normal")}
if(_3)_2.focus()}}},isc.A.$vr=function isc_Canvas__autoAllocateTabIndex(){var _1=isc.Canvas;if(_1.$vt==null){_1.$vt=_1.TAB_INDEX_FLOOR}
var _2=isc.EH.$kl;if(_2)_1.$vt+=_2.getTabIndexSpan();_1.$vt+=_1.TAB_INDEX_GAP
if(_1.$vt>isc.Canvas.TAB_INDEX_CEILING&&!isc.Canvas.$vu)
{isc.Canvas.logWarn("Auto allocation of tab-indices has reached native browser ceiling - tab-order cannot be guaranteed for widgets on this page.");isc.Canvas.$vu=true}
this.$vk(_1.$vt,true);if(_2){_2.$vv(this);this.$vw=_2}else{isc.EH.$kj=this}
isc.EH.$kl=this},isc.A.$vx=function isc_Canvas__setTabBefore(_1){if(this==_1||this.$vy()==_1)return;var _2=_1.getTabIndex();if(!_1.$sp){this.logWarn("$vx() attempting to set tab index adjacent to widget "+_1+" with explicitly specified tabIndex ["+_1.tabIndex+"]. This method can only manipulate widgets with auto-assigned tab indexes.");return}
var _3=_1.$vw;var _4=this.$vz(),_5=this.$vy();if(isc.EH.$kl==this)isc.EH.$kl=_4;if(isc.EH.$kj==this)isc.EH.$kj=_5;if(_4!=null)
_4.$vv(_5);if(_5!=null)
_5.$v0(_4);this.$v0(null);this.$vv(null);this.$v1(_1.$vz(),_1);this.$v2()},isc.A.$sq=function isc_Canvas__setTabAfter(_1){if(this==_1||this.$vw==_1)return;_1.getTabIndex();if(!_1.$sp){this.$v2(_1);this.logWarn("$sq() attempting to set tab index adjacent to widget "+_1+" with explicitly specified tabIndex ["+_1.tabIndex+"]. This method can only manipulate widgets with auto-assigned tab indexes.");return}
var _2=_1,_3=this.$vz(),_4=this.$vy();if(isc.EH.$kl==this)isc.EH.$kl=_3;if(isc.EH.$kj==this)isc.EH.$kj=_4;if(_3!=null)
_3.$vv(_4);if(_4!=null)
_4.$v0(_3);this.$v0(null);this.$vv(null);this.$v1(_1,_1.$vy());this.$v2()},isc.A.$v1=function isc_Canvas__slotTabBetween(_1,_2){if(_2==null)return this.$vr();if(_1==null){var _3=_2.$vy();_2.$rp();this.$vv(_3);this.$v0(null);this.$vk(_2.tabIndex,true);isc.EH.$kj=this;_2.$v1(this,_3);return}
this.$vv(_2);_2.$v0(this);this.$v0(_1);_1.$vv(this);var _4=_1.tabIndex+_1.getTabIndexSpan(),_5=_2.tabIndex,_6=_4+Math.floor((_5-_4)/2),_7=this.getTabIndexSpan();if((_6+_7)>_5){_2.$v3((_6+_7)-_5)}
if(this.logIsDebugEnabled("tabIndex")){this.logDebug("Putting "+this.getID()+" in tab order between: "+_1.getID()+":"+_1.tabIndex+", and :"+_2.getID()+":"+_2.tabIndex+". Resulting tabIndex:"+_6,"tabIndex")}
this.$vk(_6,true)},isc.A.$v3=function isc_Canvas__shiftTabIndexForward(_1){var _2=this.$vy();if(_2==null){this.$vk(this.tabIndex+_1+isc.Canvas.TAB_INDEX_GAP,true);return}
var _3=_2.getTabIndex(),_4=_3-this.getTabIndexSpan();if(this.tabIndex+_1<_4)this.$vk(_4,true);else{_2.$v3(_1-(_4-this.tabIndex));this.$vk(_2.tabIndex-this.getTabIndexSpan(),true)}},isc.A.$vy=function isc_Canvas__getNextTabWidget(_1){if(!_1)return this.$v4;else return this.$vw},isc.A.$vz=function isc_Canvas__getPreviousTabWidget(){return this.$vy(true)},isc.A.$vv=function isc_Canvas__setNextTabWidget(_1,_2){if(!_2)this.$v4=_1;else this.$vw=_1},isc.A.$v0=function isc_Canvas__setPreviousTabWidget(_1){return this.$vv(_1,true)},isc.A.focusInNextTabElement=function isc_Canvas_focusInNextTabElement(){if(this.$kf){this.$kf(true,this.$1096())}},isc.A.focusInPreviousTabElement=function isc_Canvas_focusInPreviousTabElement(){if(this.$kf){this.$kf(false,this.$1096())}},isc.A.$1096=function isc_Canvas__getTopHardMask(){return isc.EH.getTopHardMask()},isc.A.$kf=function isc_Canvas__focusInNextTabElement(_1,_2){if(isc.CanvasItem&&this.isDrawn()&&this.isVisible()){var _3=null,_4=this;do{if(_4.canvasItem!=null){_3=_4.canvasItem}else{_4=_4.getParentCanvas()}}while(_4&&(_3==null))
if(_3&&_3.form){this.logInfo("$kf() called on a descendent of a CanvasItem "+_3+". Delegating focus manipulation to parent form "+_3.form,"syntheticTabIndex");return _3.form.$kf(_1,_2)}}
var _5=this;while(_5.tabIndex==-1&&_5.parentElement!=null){_5=_5.parentElement}
if(_5!=this){if(_5.tabIndex!=-1){this.logDebug("$kf() was called for a Canvas with a tabIndex of -1 ("+this.ID+"). Delegating focus manipulation to the nearest ancestor with a tabIndex ("+_5.ID+")")}else{this.logDebug("$kf() was called for a Canvas with a tabIndex of -1 ("+this.ID+"), but we failed to find an ancestor with a real tabIndex, so we could not delegate. Proceeding with the original target, which is going to mean we cycle back to the start of the tab order");_5=this}}
if(_5!=this){return _5.$150c(_1,_2)}
if(isc.CanvasItem&&this.canvasItem!=null&&this.canvasItem.form!=null){this.canvasItem.form.$kf(_1,_2);return}
var _6=this;do{_6=(_1?_6.$vy():_6.$vz())}while(_6&&(isc.EH.targetIsMasked(_6,_2)||_6.isDisabled()||!_6.isDrawn()||!_6.isVisible()||!_6.$kk())&&(!isc.CanvasItem||_6.canvasItem==null||_6.canvasItem.form==null))
if(_6){this.logInfo("focusInNextTabElement() shifting focus to:"+_6,"syntheticTabIndex");_6.focusAtEnd(_1)}else if(_1){this.logInfo("focusInNextTabElement() shifting focus to first widget","syntheticTabIndex");if(isc.EH.$kj==null||(isc.EH.$kj==this&&(this.isDisabled()||!this.isDrawn()||!this.isVisible()||!this.$kk()||this.isMasked(_2))))
{return}
isc.EH.$kh(_2)}else{this.logInfo("focusInNextTabElement() shifting focus to last widget","syntheticTabIndex");if(isc.EH.$kl==null||(isc.EH.$kl==this&&(this.isDisabled()||!this.isDrawn()||!this.isVisible()||!this.$kk()||this.isMasked(_2))))
{return}
isc.EH.$kg(_2)}},isc.A.$v2=function isc_Canvas__slotChildrenIntoTabOrder(_1){_1=_1||this;var _2=isc.isA.Layout(this)?this.members:this.children;if(!_2||_2.length==0)return;var _3=_1.$vy();for(var i=_2.length-1;i>=0;i--){if(_2[i]==null)continue;if(_2[i].tabIndex==null||_2[i].$sp)
{if(_3==null)_2[i].$sq(_1);else _2[i].$vx(_3);_3=_2[i]}else{_2[i].$v2(_1);_3=_1.$vy()}}},isc.A.$v5=function isc_Canvas__getLastAutoIndexDescendant(_1){var _2=this.children;if(isc.Layout&&isc.isA.Layout(this))_2=this.members;if(_2!=null){for(var i=_2.length-1;i>=0;i--){if(_2[i]==null||(_2[i].tabIndex!=null&&!_2[i].$sp))
continue;var _4=_2[i].$v5();if(_4!=null)return _4}}
if(this.tabIndex==null||this.$sp)return this;return null},isc.A.$rp=function isc_Canvas__removeFromAutoTabOrder(){if(!this.$sp||!this.tabIndex)return;var _1=this.$vz(),_2=this.$vy();if(_1==null&&_2==null&&isc.EH.$kl!=this&&isc.EH.$kj!=this)return;if(_1){_1.$vv(_2)}else{isc.EH.$kj=_2}
if(_2){_2.$v0(_1)}else{isc.EH.$kl=_1}
this.$v0(null);this.$vv(null)},isc.A.getZIndex=function isc_Canvas_getZIndex(_1){if(!this.isDrawn()||isc.Browser.isSafari){if(_1&&this.zIndex==isc.Canvas.AUTO){this.setZIndex(isc.Canvas.getNextZIndex())}
return this.zIndex}
return parseInt(this.getStyleHandle().zIndex)},isc.A.setZIndex=function isc_Canvas_setZIndex(_1){var _2=this.zIndex;if(_2==_1)return;var _3=false;if(isc.Browser.isIE&&this.hasFocus&&this._useNativeTabIndex)
{_3=true;this.logDebug("blurring due to zIndex change","nativeFocus");this.$vo(false)}
if(_1<_2)this.$v6(_1);this.zIndex=_1;if(this.isDrawn()){if(this.$113l)this.getHandle().style.zIndex=_1
this.getStyleHandle().zIndex=_1}
if(_1>_2)this.$v6(_1);if(this.hscrollbar)this.hscrollbar.moveAbove(this);if(this.vscrollbar)this.vscrollbar.moveAbove(this);if(this.clipCorners){var _4=this.$uc;if(_4.TL)_4.TL.moveAbove(this);if(_4.TR)_4.TR.moveAbove(this);if(_4.BL)_4.BL.moveAbove(this);if(_4.BR)_4.BR.moveAbove(this)}
if(_3){this.delayCall("$vn",[],0)}
this.zIndexChanged(_2,_1)},isc.A.$v6=function isc_Canvas__adjustSpecialPeers(_1){if(this.$sb())this.$l0.setZIndex(_1-1);if(this._backMask)this._backMask.setZIndex(_1-2);if(this._shadow)this._shadow.setZIndex(_1-3);if(this.modalMask)this.modalMask.setZIndex(_1-4)},isc.A.zIndexChanged=function isc_Canvas_zIndexChanged(_1,_2){if(this.children)this.children.map("parentZIndexChanged")},isc.A.parentZIndexChanged=function isc_Canvas_parentZIndexChanged(){if(this.children)this.children.map("parentZIndexChanged")},isc.A.bringToFront=function isc_Canvas_bringToFront(_1){if(isc.$cv)arguments.$cw=this;isc.Canvas._BIG_Z_INDEX+=18;this.setZIndex(isc.Canvas._BIG_Z_INDEX);if(this.groupLabel)this.groupLabel.moveAbove(this);if(_1&&!this.$qf())return;isc.$nd=true;this.unmask();isc.$nd=false},isc.A.sendToBack=function isc_Canvas_sendToBack(){isc.Canvas._SMALL_Z_INDEX-=18;this.setZIndex(isc.Canvas._SMALL_Z_INDEX)},isc.A.moveAbove=function isc_Canvas_moveAbove(_1){var z=_1.getZIndex(true);this.setZIndex(z+6)},isc.A.moveBelow=function isc_Canvas_moveBelow(_1){var z=_1.getZIndex(true);this.setZIndex(z-6)},isc.A.getContents=function isc_Canvas_getContents(){var _1=(isc.isA.Function(this.contents)?this.contents():this.contents);return this.dynamicContents?_1.evalDynamicString(this,this.dynamicContentsVars):_1},isc.A.setContents=function isc_Canvas_setContents(_1){if(_1!=null)this.contents=_1;this.markForRedraw("setContents")},isc.A.containsIFrame=function isc_Canvas_containsIFrame(){return this.contentsURL!=null&&this.contentsType=="page"},isc.A.getContentsURL=function isc_Canvas_getContentsURL(){return this.contentsURL},isc.A.setContentsURL=function isc_Canvas_setContentsURL(_1,_2){this.contentsURL=_1;_1=isc.Page.getURL(_1);var _3=isc.addProperties({},this.contentsURLParams,_2),_1=isc.rpc.addParamsToURL(_1,_3);if(!this.isDrawn())return;if(this.containsIFrame()){var _4=this.$sk();if(!_4||!_1)this.markForRedraw("setContentsURL");else _4.src=_1}},isc.A.setBackgroundColor=function isc_Canvas_setBackgroundColor(_1){this.backgroundColor=_1;var _2=this.getStyleHandle();if(_2){return _2.backgroundColor=_1}},isc.A.setTextColor=function isc_Canvas_setTextColor(_1){this.textColor=_1;var _2=this.getStyleHandle();if(_2){return _2.color=_1}},isc.A.setBackgroundImage=function isc_Canvas_setBackgroundImage(_1){this.backgroundImage=_1;var _2=this.getStyleHandle();if(_2){if(_1==null){_2.backgroundImage=""}else{_2.backgroundImage='url('+this.getImgURL(this.backgroundImage)+')'}}},isc.A.setBorder=function isc_Canvas_setBorder(_1){this.$tk=null;if(_1!=null&&!isc.isA.String(_1)){_1=this.$63e(_1)}
if(_1==null)_1=isc.emptyString;if(isc.endsWith(_1,isc.semi))_1=_1.slice(0,_1.length-1);this.border=_1;var _2=this.getStyleHandle();if(!_2)return;if(_2.border!=_1){_2.border=_1}
this.adjustOverflow("setBorder");this.innerSizeChanged("Border thickness changed")},isc.A.$63e=function isc_Canvas__convertBorderToString(_1){var _2=_1;if(isc.isA.Number(_1)){_1+="px solid"}else{_1=null;this.logWarn("this.border defined as "+_2+". This property should have a string value - dropping this attribute.")}
return _1},isc.A.$95d=function isc_Canvas__convertBorderRadiusToString(_1){return(isc.isA.Number(_1)?_1+"px":null)},isc.A.getBorder=function isc_Canvas_getBorder(){return this.border},isc.A.setOpacity=function isc_Canvas_setOpacity(_1,_2,_3){if(!_2&&this.fadeAnimation)this.finishAnimation("fade");var _4=this.opacity;this.opacity=_1;if(this.opacity==100&&!_3&&!(this.smoothFade&&isc.Browser.isMoz))this.opacity=null;if(this.isDrawn()){if(isc.Browser.isMoz){var _5=(this.opacity!=null)?this.opacity/100:"";if(this.smoothFade&&(_5==1||this.opacity==null))_5=0.9999;if(this.$65q)this.getStyleHandle().MozOpacity=_5;else this.getStyleHandle().opacity=_5}else if(isc.Browser.isIE&&!isc.Browser.isIE9){if(!isc.Canvas.neverUseFilters||this.useOpacityFilter){this.getStyleHandle().filter=(this.opacity==null?"":"progid:DXImageTransform.Microsoft.Alpha(opacity="+this.opacity+")")}}else{var _5=(this.opacity!=null)?this.opacity/100:"";this.getStyleHandle().opacity=_5}}
this.$v7(_1,_2,_3||_1!=null);if(isc.Browser.isIE&&this.fixIEOpacity&&this.children){for(var i=0;i<this.children.length;i++){var _7=this.children[i];if(_7.opacity==null&&(_3||_1!=null)){_7.setOpacity(100,_2,true)}else if(_7.opacity==100){_7.setOpacity(null)}}}
this.opacityChanged(_1,_2)},isc.A.opacityChanged=function isc_Canvas_opacityChanged(_1,_2){},isc.A.$v7=function isc_Canvas__setPeersOpacity(_1,_2,_3){if(!this.peers)return;for(var i=0;i<this.peers.length;i++){if(this.peers[i].$nt){if(this.useOpacityFilter!=null){this.peers[i].useOpacityFilter=this.useOpacityFilter}
this.peers[i].setOpacity(_1,_2,_3)}else if(this.peers[i]==this.edgedCanvas&&this.edgeOpacity){if(this.useOpacityFilter!=null){this.peers[i].useOpacityFilter=this.useOpacityFilter}
var _5=Math.round(this.opacity*(this.edgeOpacity*.01));this.peers[i].setOpacity(_5,_2,_3)}}},isc.A.setPrompt=function isc_Canvas_setPrompt(_1){this.prompt=_1;this.updateHover()},isc.A.setCursor=function isc_Canvas_setCursor(_1){if(_1&&_1!=this.cursor){this.cursor=_1;this.$k2()}},isc.A.$v8=function isc_Canvas__applyCursor(_1){if(this.$v9==_1)return;if(this.isDrawn()){if((isc.Browser.isMoz||(isc.Browser.isStrict&&isc.Browser.isSafari))&&_1=="hand")_1=isc.Canvas.HAND;this.$v9=_1;this.getStyleHandle().cursor=_1;if(this.$113l)this.getHandle().style.cursor=_1;if(this.$kt){for(var i=0;i<this.$kt.length;i++){this.$kt[i].$v8(_1)}}
if(this.ns.EH.$wa&&(this==this.ns.EH.getTarget())){this.ns.EH.$wa.setCursor(_1)}}
if(isc.Browser.isOpera&&isc.EH.lastEvent.target==this)this.markForRedraw()},isc.A.$k2=function isc_Canvas__updateCursor(){var _1=this.getCurrentCursor();this.$v8(_1)},isc.A.getCurrentCursor=function isc_Canvas_getCurrentCursor(){var _1=this.cursor;if(isc.EH.dragging&&this.$uh&&(isc.EH.dragMoveTarget!=this)){_1=this.noDropCursor}else if(this.isDisabled())_1=this.disabledCursor;else{var _2;if(this.canDragResize&&this.edgeCursorMap){var _3=this.getEventEdge();if(_3&&this.edgeCursorMap[_3]){_1=this.edgeCursorMap[_3];_2=true}}
if(!_2&&this.canDragReposition&&this.dragRepositionCursor){_1=this.dragRepositionCursor}}
return _1},isc.A.getHoverTarget=function isc_Canvas_getHoverTarget(_1,_2){var _3=this;while(_3){var _4=_3.getCanHover();if(_4==null){if(_3.prompt!=null)return _3;_3=_3.parentElement}else if(_4){return _3}else{return null}}
return null},isc.A.startHover=function isc_Canvas_startHover(_1){isc.Hover.setAction(this,this.$wb,null,this.hoverDelay)},isc.A.stopHover=function isc_Canvas_stopHover(_1){isc.Hover.clear()},isc.A.$wb=function isc_Canvas__handleHover(){var _1=isc.EH,_2=_1.lastMoveTarget;var _3=_1.lastEvent;if(!_2||_2.getHoverTarget(_3)!=this)return;return this.handleHover()},isc.A.getCanHover=function isc_Canvas_getCanHover(){return this.canHover},isc.A.getHoverComponent=function isc_Canvas_getHoverComponent(){},isc.A.handleHover=function isc_Canvas_handleHover(){if(this.hover&&this.hover()==false)return;if(this.showHover){var _1=this.showHoverComponents&&this.getHoverComponent?this.getHoverComponent():null;if(_1!=null&&isc.isA.Canvas(_1)){var _2=this.$wc();isc.Hover.show(_1,_2,null,this)}else{var _3=this.getHoverHTML();if(_3!=null&&!isc.isAn.emptyString(_3)){var _2=this.$wc();isc.Hover.show(_3,_2,null,this)}}}},isc.A.updateHover=function isc_Canvas_updateHover(_1){if(isc.Hover.lastHoverCanvas!=this||!isc.Hover.hoverCanvas.isVisible())return;if(_1==null)_1=this.getHoverHTML();isc.Hover.show(_1,this.$wc(),null,this)},isc.A.$80l=function isc_Canvas__hoverHidden(){if(this.hoverCanvas&&this.hoverCanvas.hoverAutoDestroy!=false){this.hoverCanvas.markForDestroy();this.hoverCanvas=null;delete this.hoverCanvas}
this.hoverHidden()},isc.A.hoverHidden=function isc_Canvas_hoverHidden(){},isc.A.$wc=function isc_Canvas__getHoverProperties(){var _1=isc.EH.getTarget(),_2=_1?isc.isA.CanvasItem(_1)?_1:_1.canvasItem:null,_3;if(_2){_3={width:(_2.hoverWidth!=null?_2.hoverWidth:this.hoverWidth),height:(_2.hoverHeight!=null?_2.hoverHeight:this.hoverHeight),align:(_2.hoverAlign!=null?_2.hoverAlign:this.hoverAlign),valign:(_2.hoverVAlign!=null?_2.hoverVAlign:this.hoverVAlign),baseStyle:(_2.hoverStyle!=null?_2.hoverStyle:this.hoverStyle),opacity:(_2.hoverOpacity!=null?_2.hoverOpacity:this.hoverOpacity),moveWithMouse:(_2.hoverMoveWithMouse!=null?_2.hoverMoveWithMouse:this.hoverMoveWithMouse),wrap:(_2.hoverWrap!=null?_2.hoverWrap:this.hoverWrap)};return _3}
return{width:this.hoverWidth,height:this.hoverHeight,align:this.hoverAlign,valign:this.hoverVAlign,baseStyle:this.hoverStyle,opacity:this.hoverOpacity,moveWithMouse:this.hoverMoveWithMouse,wrap:this.hoverWrap}},isc.A.getHoverHTML=function isc_Canvas_getHoverHTML(){return this.prompt},isc.A.setClassName=function isc_Canvas_setClassName(_1){if(this.logIsInfoEnabled(this.$pj)){this.logInfo("call to deprecated setClassName() property - use setStyleName() instead")}
return this.setStyleName(_1)},isc.A.setStyleName=function isc_Canvas_setStyleName(_1){this.$tk=null;this.$tp=null;this.$81b();if(_1){this.styleName=_1;this.className=_1}
if(this.getClipHandle())this.getClipHandle().className=this.styleName;if(this.overflow!=isc.Canvas.HIDDEN){if(this.overflow==isc.Canvas.VISIBLE)this.$t5=true;this.adjustOverflow("setStyleName")}},isc.A.getStateName=function isc_Canvas_getStateName(){var _1=this.getClipHandle()?this.getClipHandle().className:null;return(_1!=null?_1:this.styleName)},isc.A.handleShowContextMenu=function isc_Canvas_handleShowContextMenu(_1){if(_1.target==this&&this.useEventParts){var _2=this.getEventPart(_1);if(_2.part){if(this.$wd(_2.part,"showContextMenu",_2.element,_2.ID,_1)==false)return false}}
if(this.showContextMenu)return this.showContextMenu(_1)},isc.A.showContextMenu=function isc_Canvas_showContextMenu(){var _1=this.contextMenu;if(_1){_1.target=this;if(!isc.isA.Canvas(_1)){_1.autoDraw=false;this.contextMenu=_1=this.getMenuConstructor().create(_1)}
_1.showContextMenu()}
return(_1==null)});isc.evalBoundary;isc.B.push(isc.A.getMenuConstructor=function isc_Canvas_getMenuConstructor(){var _1=isc.ClassFactory.getClass(this.menuConstructor);if(!_1){isc.logWarn("Class not found for menuConstructor:"+this.menuConstructor+". Defaulting to isc.Menu class");_1=isc.ClassFactory.getClass("Menu")}
return _1},isc.A.hideContextMenu=function isc_Canvas_hideContextMenu(){if(this.contextMenu)this.contextMenu.hideContextMenu()},isc.A.$kr=function isc_Canvas__allowNativeTextSelection(_1){return this.canSelectText},isc.A.handleMouseMove=function isc_Canvas_handleMouseMove(_1,_2){if(_1.target==this&&this.useEventParts){var _3=this.getEventPart(_1),_4=this.$nw;if(_4&&_4.part&&(_4.part!=_3.part||_4.ID!=_3.ID))
{this.$wd(_4.part,isc.EH.MOUSE_OUT,_4.element,_4.ID,_1)}
if(_3.part){var _5=!_4||(_4.ID!=_3.ID),_6=(_5?isc.EH.MOUSE_OVER:isc.EH.MOUSE_MOVE);this.$wd(_3.part,_6,_3.element,_3.ID,_1);if(_5){isc.Hover.setAction(this,this.$we,[_3.element,_3.ID],this.hoverDelay)}}
this.$nw=_3}
if(this.mouseMove)return this.mouseMove(_1,_2)},isc.A.$we=function isc_Canvas__handleRectHover(_1,_2){if(this.$nw)this.$wd(this.$nw.part,"hover",_1,_2)},isc.A.handleMouseOut=function isc_Canvas_handleMouseOut(_1,_2){if(_1.target==this&&this.useEventParts){var _3=this.$nw;if(_3&&_3.part){this.$wd(_3.part,isc.EH.MOUSE_OUT,_3.element,_3.ID,_1)}}
if(this.mouseOut)return this.mouseOut(_1,_2)},isc.A.handleMouseDown=function isc_Canvas_handleMouseDown(_1,_2){var _3=this.$772;if(_3!=null){this.cancelAnimation(_3)}
if(_1.target==this&&this.useEventParts)this.firePartEvent(_1,isc.EH.MOUSE_DOWN);if(this.mouseDown)return this.mouseDown(_1,_2)},isc.A.handleMouseUp=function isc_Canvas_handleMouseUp(_1,_2){if(_1.target==this&&this.useEventParts)this.firePartEvent(_1,isc.EH.MOUSE_UP);if(this.mouseUp)return this.mouseUp(_1,_2)},isc.A.handleClick=function isc_Canvas_handleClick(_1,_2){if(_1.target==this&&this.useEventParts)this.firePartEvent(_1,isc.EH.CLICK);if(this.click)return this.click(_1,_2)},isc.A.handleDoubleClick=function isc_Canvas_handleDoubleClick(_1,_2){if(_1.target==this&&this.useEventParts)this.firePartEvent(_1,isc.EH.DOUBLE_CLICK);if(this.doubleClick)return this.doubleClick(_1,_2)},isc.A.handleLongTouch=function isc_Canvas_handleLongTouch(_1,_2){return this.handleShowContextMenu(_1,_2)},isc.A.getEventPart=function isc_Canvas_getEventPart(_1){if(!_1)_1=isc.EH.lastEvent;var _2=_1.eventPart,_3=_1.eventPartID;if(_3==isc.emptyString){_3=null}else if(_3!=null){_3=_3.substring(this.getID().length+_2.length+2)}
var _4={part:_2,ID:_3,element:_1.nativeTarget};return _4},isc.A.getElementPart=function isc_Canvas_getElementPart(_1){var _2,_3;if(this.isDrawn()&&_1!=null){var _4=this.getHandle();if(isc.isA.Canvas(_1))_1=_1.getHandle();while(_1!=_4&&_1!=null){if(_1.getAttribute){_2=_1.getAttribute(this.$pk)}
if(_2==null||_2==isc.emptyString){_1=_1.parentNode}else{break}}
if(_2&&_2!=isc.emptyString){var _5=_1.id;if(_5&&_5!=isc.emptyString){_3=_5.substring(this.getID().length+_2.length+2)}}}
return{part:_2,ID:_3,element:_1}},isc.A.getPartElement=function isc_Canvas_getPartElement(_1){var _2=_1.part,_3=_1.partID,_4=this.getID()+"_"+_2;if(_3)_4+=_3;var _5=isc.Element.get(_4);if(_5)return _5;return isc.Element.findAttribute(this.getHandle(),this.$pk,_2)},isc.A.firePartEvent=function isc_Canvas_firePartEvent(_1,_2){if(!this.useEventParts||!_1)return;var _3=this.getEventPart(_1);if(!_3.part)return;if(!_2)_2=_1.eventType;return this.$wd(_3.part,_2,_3.element,_3.ID,_1)},isc.A.$wd=function isc_Canvas__firePartEvent(_1,_2,_3,_4,_5){var _6=this.getPartEventHandler(_1,_2);if(this[_6]){return this[_6](_3,_4,_5)}},isc.A.getPartEventHandler=function isc_Canvas_getPartEventHandler(_1,_2){if(!isc.Canvas.$np[_1])isc.Canvas.$np[_1]={};if(!isc.Canvas.$np[_1][_2]){var _3=_2.substring(0,1).toUpperCase()+_2.substring(1);isc.Canvas.$np[_1][_2]=_1+_3}
return isc.Canvas.$np[_1][_2]},isc.A.getDragType=function isc_Canvas_getDragType(){return this.dragType},isc.A.willAcceptDrop=function isc_Canvas_willAcceptDrop(){var _1=this.ns.EH;if((_1.nativeDragging&&(_1.lastEvent==null||_1.lastEvent.DOMevent==null||_1.lastEvent.DOMevent.dataTransfer==null))||_1.dragTarget==null)
{return false}
if(this.dropTypes==isc.Canvas.ANYTHING||this.dropTypes==null||isc.is.emptyString(this.dropTypes))
{return true}
var _2=_1.dragTarget==null?null:_1.dragTarget.getDragType();if(_2==null&&_1.nativeDragging){var _3=_1.lastEvent;_2=isc.EH.$120r(_3.DOMevent.dataTransfer)}
if(_2==null||isc.is.emptyString(_2))return false;if(isc.isA.String(_2)){return this.dropTypes.contains(_2)}else if(isc.isAn.Array(_2)){for(var i=0,_5=true,_6=_2.length;i<_6&&_5;i++){_5=_5&&(this.dropTypes.contains(_2))}
return _5}
return false},isc.A.$mb=function isc_Canvas__showDragMask(){if(this.useDragMask&&this.dragMaskType=="hide"){var _1=this.getStyleHandle();this.display_bak=_1.display;_1.display="none"}else if(this.useDragMask&&this.dragMaskType=="hidePlugin"&&this.usePlaceholderDragMask){var _2=this.getPluginHandle();if(_2){_2.style.visibility="hidden";if(!this.$49u)this.$49u=this.createDragPlaceholder();if(this.$49u){isc.addProperties(this.$49u,{$jr:this,getTarget:function(){return this.$jr}});this.$49u.setRect(this.getPageRect());this.$49u.show()}}}else if(this._eventMask){if(this._eventMask.visibility==isc.Canvas.HIDDEN)this._eventMask.show()}},isc.A.getPluginHandle=function isc_Canvas_getPluginHandle(){return document.getElementById(this.getPluginID())},isc.A.getPluginID=function isc_Canvas_getPluginID(){return},isc.A.createDragPlaceholder=function isc_Canvas_createDragPlaceholder(){return isc.Label.create({align:"center",contents:this.dragPlaceholderMessage,styleName:this.dragPlaceholderStyle})},isc.A.$mc=function isc_Canvas__hideDragMask(){if(this.useDragMask&&this.dragMaskType=="hide"){this.getStyleHandle().display=this.display_bak;delete this.display_bak}else if(this.useDragMask&&this.dragMaskType=="hidePlugin"&&this.usePlaceholderDragMask){var _1=this.getPluginHandle();if(_1){_1.style.visibility="inherit";if(this.$49u)this.$49u.hide()}}else if(this._eventMask){if(this._eventMask.visibility!=isc.Canvas.HIDDEN)this._eventMask.hide()}},isc.A.handleDrop=function isc_Canvas_handleDrop(_1,_2){if(this.onDrop!=null&&(this.onDrop()==false))return false;return this.drop(_1,_2)},isc.A.getHSnapPosition=function isc_Canvas_getHSnapPosition(_1,_2){if(!_2){_2=this.snapHDirection}
if(_2!=isc.Canvas.BEFORE&&_2!=isc.Canvas.AFTER&&_2!=isc.Canvas.NEAREST){return _1}
var _3=Math.floor(_1/this.snapHGap)*this.snapHGap;var _4=_3+this.snapHGap;var _5=_3+this.snapHGap/2;if(_2==isc.Canvas.BEFORE){return _3}else if(_2==isc.Canvas.AFTER){return _4}else{if(_1<=_5)return _3;else return _4}},isc.A.getVSnapPosition=function isc_Canvas_getVSnapPosition(_1,_2){if(!_2){_2=this.snapVDirection}
if(_2!=isc.Canvas.BEFORE&&_2!=isc.Canvas.AFTER&&_2!=isc.Canvas.NEAREST){return _1}
var _3=Math.floor(_1/this.snapVGap)*this.snapVGap;var _4=_3+this.snapVGap;var _5=_3+this.snapVGap/2;if(_2==isc.Canvas.BEFORE){return _3}else if(_2==isc.Canvas.AFTER){return _4}else{if(_1<=_5)return _3;else return _4}},isc.A.shouldSnapOnDrop=function isc_Canvas_shouldSnapOnDrop(_1){return true},isc.A.noSnapDragOffset=function isc_Canvas_noSnapDragOffset(_1){return false},isc.A.setAppImgDir=function isc_Canvas_setAppImgDir(_1){if(_1)this.appImgDir=_1},isc.A.getAppImgDir=function isc_Canvas_getAppImgDir(){return isc.Page.getImgURL("",this.appImgDir)},isc.A.setSkinImgDir=function isc_Canvas_setSkinImgDir(_1){if(_1)this.skinImgDir=_1},isc.A.getSkinImgDir=function isc_Canvas_getSkinImgDir(){return isc.Page.getSkinImgDir(this.skinImgDir)},isc.A.getImgURL=function isc_Canvas_getImgURL(_1,_2){return isc.Canvas.getImgURL(_1,_2,this)},isc.A.imgHTML=function isc_Canvas_imgHTML(_1,_2,_3,_4,_5,_6,_7,_8){return isc.Canvas.imgHTML(_1,_2,_3,_4,_5,_6,_7,this,false,_8)},isc.A.$wf=function isc_Canvas__getImgHTMLTemplate(_1,_2,_3,_4,_5,_6,_7,_8){return isc.Canvas.imgHTML(_1,_2,_3,_4,_5,_6,_7,this,true,_8)},isc.A.getImage=function isc_Canvas_getImage(_1,_2){if(isc.isA.String(_1))_1=this.getCanvasName()+_1;var _3=this.getHandle();if(_3){var _4=_3.document||document;if(isc.Page.isXHTML()||_2){return _4.getElementById(_1)}else{return _4.images[_1]}}
return null},isc.A.setImage=function isc_Canvas_setImage(_1,_2,_3,_4){var _5=this.getImage(_1,_4);if(_5==null){this.logWarn("setImage: image '"+_1+"' couldn't be found");return}
isc.Canvas.$wg(_5,_2,_3,this)},isc.A.linkHTML=function isc_Canvas_linkHTML(_1,_2,_3,_4,_5,_6,_7){return isc.Canvas.linkHTML(_1,_2,_3,_4,_5,_6,_7)},isc.A.inWhichPosition=function isc_Canvas_inWhichPosition(_1,_2,_3){if(!_1||_2<0)return-1;if(_3==isc.Page.RTL){var _4=_1.sum();for(var c=0,_6=_1.length;c<_6;c++){if(_2>=_4-_1[c])return c;_4-=_1[c]}}else{for(var c=0,_6=_1.length;c<_6;c++){if(_2<=_1[c]){return c}
_2-=_1[c]}}
return-2},isc.A._canvasList=function isc_Canvas__canvasList(_1){var _2=isc.Canvas._canvasList;if(_1)_2.add(this);else _2.remove(this);if(this.$ih){isc.Canvas._iscInternalCount+=(_1?1:-1)}else{isc.Log.updateStats(this.$f8)}},isc.A.$p6=function isc_Canvas__addStat(_1){if(!this.$ih){isc.Canvas._stats[_1]++;isc.Log.updateStats(_1)}},isc.A.$wh=function isc_Canvas__attachedPeers(_1){var _2=this.$sc;if(!_2)return null;if(_1)return _2[_1]},isc.A.$wi=function isc_Canvas__registerAttachedPeer(_1,_2,_3,_4){if(_1==null||_2==null)return;if(!this.$sc)this.$sc={};if(!this.$sc[_2])this.$sc[_2]=[];this.$sc[_2].add(_1);if(_3!=null)_1.$55s=_3
if(_4){this.observe(_1,"resized","observer.$88y(observed)")}
delete this.$s7;delete this.$s8},isc.A.$wj=function isc_Canvas__unRegisterAttachedPeer(_1,_2,_3){if(_1==null||_2==null)return;if(!this.$sc||!this.$sc[_2])return;this.$sc[_2].remove(_1);if(this.isObserving(_1,"resized")){this.ignore(_1,"resized")}
delete _1.$55s;delete this.$s7;delete this.$s8},isc.A.$88y=function isc_Canvas__attachedPeerResized(_1){this.refreshMargin()},isc.A.refreshMargin=function isc_Canvas_refreshMargin(){this.setMargin(this.margin)},isc.A.$ps=function isc_Canvas__makeCornerClips(){this.$uc={};for(var i=0;i<this.clippedCorners.length;i++){this.$wk(this.clippedCorners[i])}},isc.A.$wk=function isc_Canvas__makeCornerClip(_1){var _2=this.$uc,_3=this.left,_4=this.top,_5=this.cornerClipWidth||this.cornerClipSize,_6=this.cornerClipHeight||this.cornerClipSize;if(_1=="TR"||_1=="BR"){_3=_3+this.getWidth()-_5}
if(_1=="BL"||_1=="BR"){_4=_4+this.getHeight()-_6}
if(this.noCornerClipImages&&!(isc.Browser.isIE&&isc.Browser.minorVersion>=5.5)){this.noCornerClipImages=false}
var _7=_2[_1]=isc.ClassFactory.newInstance({_constructor:(this.noCornerClipImages?"Canvas":"Img"),left:_3,top:_4,width:_5,height:_6,eventProxy:this,src:(this.noCornerClipImages?null:this.$wl(_1)),contents:(this.noCornerClipImages?this.$wm(_5,_6,_1):null)},this.$nv);this.addPeer(_7);_7.moveAbove(this)},isc.A.$qg=function isc_Canvas__finishCornerClips(){if(!this.noCornerClipImages)return;for(var _1 in this.$uc){var _2=this.$uc[_1],_3=_2.getHandle().firstChild,_4=_3.style;_3.filters[0].apply();_4.visibility="hidden";_3.filters[0].percent=71}},isc.A.$wl=function isc_Canvas__getCornerImage(_1){return isc.Img.urlForState(this.cornerClipImage,null,null,this.cornerClipColor,_1)},isc.A.$wm=function isc_Canvas__getCornerHTML(_1,_2,_3){var _4=isc.SB.create();_4.append("<DIV STYLE='width:",2*_1,"px;height:",2*_2,"px;filter:progid:DXImageTransform.Microsoft.iris(irisStyle=circle,motion=out);");if(_3.contains("R"))_4.append("margin-left:",-_1,"px;");if(_3.contains("B"))_4.append("margin-top:",-_2,"px;");_4.append("'><DIV STYLE='overflow:hidden;width:",_1,"px;height:",_2,"px;background-color:",this.cornerClipColor,";");if(_3.contains("R"))_4.append("margin-left:",_1,"px;");if(_3.contains("B"))_4.append("margin-top:",_2,"px;");_4.append("'></DIV></DIV>");return _4.toString()},isc.A.$sb=function isc_Canvas__edgesAsPeer(){return this.showEdges&&!this.edgesAsChild},isc.A.$pq=function isc_Canvas__createEdges(){if(!this.showEdges||isc.isA.EdgedCanvas(this)||this.$l0!=null){return this.$l0}
var _1=this.$l0=this.$wn();if(this.edgesAsChild){_1.resizeTo("100%","100%");_1.sendToBack();this.addChild(_1)}else{this.addPeer(_1)}
return _1},isc.A.setEdgeOpacity=function isc_Canvas_setEdgeOpacity(_1){var _2=this.edgeOpacity=_1;if(this.opacity>0&&this.opacity<100){_2=this.opacity*(this.edgeOpacity/100)}
this.$l0.setOpacity(_2)},isc.A.$wn=function isc_Canvas__createEdgedCanvas(){var _1=this.$pl,_2=isc.EdgedCanvas.createRaw();_2.autoDraw=false;_2._generated=true;_2.containedPeer=true;_2.dragTarget=this;_2.visibility=this.visibility;_2.opacity=this.opacity;_2.useOpacityFilter=this.useOpacityFilter;if(this.edgeOpacity!=null){_2.opacity=this.edgeOpacity;_2.$nt=false}
_2.smoothFade=this.smoothFade;if(this.edgeOverflow!=null)_2.overflow=this.edgeOverflow;_2.eventProxy=this;for(var i=0;i<_1.length;i++){var _4=_1[i];if(this[_4]!=null)_2[_4]=this[_4]}
if(this.edgeBackgroundColor)_2.backgroundColor=this.edgeBackgroundColor;if(this.edgeCenterBackgroundColor){_2.centerBackgroundColor=this.edgeCenterBackgroundColor}
if(this.edgeShowCenter!=null)_2.showCenter=this.edgeShowCenter;if(!this.edgesAsChild)_2.zIndex=this.getZIndex(true)-1;_2.completeCreation();return _2},isc.A.setShowShadow=function isc_Canvas_setShowShadow(_1){this.showShadow=_1;if(_1){if(!this._shadow)this.$pr();else if(this.isDrawn())this._shadow.show()}else{if(this._shadow)this._shadow.hide()}},isc.A.$pr=function isc_Canvas__createShadow(){var _1=this._shadow=this.createAutoChild("shadow",{visibility:this.visibility,zIndex:this.getZIndex(true)-3},isc.DropShadow);this.updateShadow(true);this.addPeer(_1);_1.moveBelow(this)},isc.A.updateShadow=function isc_Canvas_updateShadow(_1){if(!_1)this.setShowShadow(this.showShadow);var _2=this._shadow;if(!_2)return;_2.offset=this.shadowOffset;_2.offsetX=this.shadowOffsetX;_2.offsetY=this.shadowOffsetY;_2.softness=this.shadowSoftness;if(this.shadowImage)_2.setEdgeImage(this.shadowImage);_2.setDepth(this.shadowDepth);if(this.dragResizeFromShadow&&this.canDragResize){_2.canDragResize=this.canDragResize;_2.resizeFrom=this.resizeFrom;_2.dragTarget=this}},isc.A.propertyChanged=function isc_Canvas_propertyChanged(_1,_2){if(isc.contains(_1,this.$pm)&&this.updateShadow)this.updateShadow()},isc.A.setIsGroup=function isc_Canvas_setIsGroup(_1){if(_1==this.isGroup)return;var _2=this.shouldShowGroupLabel()&&this.isDrawn();if(_2)this.clear();if(_1){this.$55t=this.border;this.setBorder(this.groupBorderCSS);if(this.shouldShowGroupLabel())this.$55u()}else{this.setBorder(this.$55t||"");if(this.shouldShowGroupLabel())this.$55v()}
this.isGroup=_1;if(_2)this.draw()},isc.A.shouldShowGroupLabel=function isc_Canvas_shouldShowGroupLabel(){return this.showGroupLabel},isc.A.makeGroupLabel=function isc_Canvas_makeGroupLabel(){if(!this.groupLabel){var _1={autoDraw:false,backgroundColor:this.getGroupLabelBackgroundColor(),eventProxy:this,styleName:this.groupLabelStyleName}
if(this.groupTitle!=null)_1.contents=this.groupTitle;this.groupLabel=this.createAutoChild("groupLabel",_1)}else{if(this.groupTitle!=null)this.groupLabel.setContents(this.groupTitle);this.groupLabel.setBackgroundColor(this.getGroupLabelBackgroundColor())}},isc.A.getGroupLabelBackgroundColor=function isc_Canvas_getGroupLabelBackgroundColor(){if(this.groupLabelBackgroundColor)return this.groupLabelBackgroundColor;if(this.backgroundColor)return this.backgroundColor;return"white"},isc.A.setGroupLabelBackgroundColor=function isc_Canvas_setGroupLabelBackgroundColor(_1){this.groupLabelBackgroundColor=_1;if(this.groupLabel)this.groupLabel.setBackgroundColor(this.getGroupLabelBackgroundColor())},isc.A.$55u=function isc_Canvas__showGroupLabel(){this.makeGroupLabel();var _1=this.groupLabel;var _2;if(_1.overflow==isc.Canvas.VISIBLE){if(_1.parentElement!=null)_1.deparent();_1.setTop(-1000);_1.draw();_2=_1.getVisibleHeight()}else{_2=_1.getVisibleHeight()}
var _3=Math.round(_2/2);this.$wi(_1,isc.Canvas.TOP,_3);var _4=_2-_3;if(this.padding)_4+=this.padding;this.setTopPadding(_4);this.$1332();if(_1.masterElement!=this)this.addPeer(_1);if(this.isDrawn()){if(!_1.isDrawn())_1.draw()}
this.getTopMargin();_1.moveAbove(this);if(_1.isDrawn()&&!this.isDrawn())_1.clear()},isc.A.$55v=function isc_Canvas__hideGroupLabel(){if(!this.groupLabel)return;var _1=this.groupLabel;this.$wj(_1,isc.Canvas.TOP);this.setTopPadding(null);_1.clear();_1.depeer()},isc.A.$1332=function isc_Canvas__moveGroupLabelIntoPlace(){var _1=this.groupLabel;var _2,_3=this.getTop();if(this.isRTL()){_2=this.getRight()-this.groupLabelPadding-_1.getVisibleWidth()}else{_2=this.getLeft()+this.groupLabelPadding}
_1.moveTo(_2,_3)},isc.A.setGroupTitle=function isc_Canvas_setGroupTitle(_1){this.groupTitle=_1;if(this.groupLabel){this.groupLabel.setContents(this.groupTitle)}else{this.$55u()}});isc.B._maxIndex=isc.C+584;isc.A=isc.Canvas;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$hm="[SKIN]";isc.A.printOmitControls=["Button","StretchImgButton","ImgButton","MenuButton","Toolbar","ToolStrip","ButtonItem","ToolbarItem"];isc.A.printIncludeControls=["Label"];isc.A.$ws=0;isc.A.$94t="&apos;";isc.A.$123d={"TEXTTOP":"text-top","texttop":"text-top","absmiddle":"middle"};isc.A.$wt="ID='";isc.A.$ob="'";isc.A.$wu="absmiddle";isc.A.$wv=[,,," eventpart='valueicon' ",null];isc.A.$124g="margin-left:";isc.A.$124h="px;margin-right:";isc.A.$ww={};isc.A.$wx={png:true,PNG:true,Png:true};isc.A.$wy=["<a",," href='",,"' target='",,"'",,,,">",,"</a>"];isc.A.$wz="[SKINIMG]/blank.gif";isc.A.$w0="0";isc.A.$123e=!isc.Browser.isIE||isc.Browser.version>=9;isc.A.$w1="clearRedrawQueue";isc.A.$65j=[];isc.A.$65k=0;isc.A.$65l="clearDestroyQueue";isc.A.$tw=[];isc.B.push(isc.A.stripScriptTags=function isc_c_Canvas_stripScriptTags(_1){return _1.replace(/<script([^>]*)?>(.|\n|\r)*?<\/script>/ig,isc.emptyString)},isc.A.stripLinkTags=function isc_c_Canvas_stripLinkTags(_1){return _1.replace(/<link([^>]*)?>/ig,isc.emptyString)},isc.A.getById=function isc_c_Canvas_getById(_1){var _2=window[_1]||null;return _2?(isc.isA.Canvas(_2)?_2:null):null},isc.A.getNextZIndex=function isc_c_Canvas_getNextZIndex(){return(isc.Canvas._nextZIndex+=18)},isc.A.getFocusProxyString=function isc_c_Canvas_getFocusProxyString(_1,_2,_3,_4,_5,_6,_7,_8,_9,_10,_11,_12,_13,_14,_15,_16){if(this.$w8==null){this.$w9="' ONFOCUS=";this.$xa="' ";this.$xb=" ONBLUR=";this.$w8=["<div"," id='",null,"$xc' style='overflow:hidden;width:0px;height:0px;position:",,";left:",null,"px;top:",null,"px;'>",(isc.Browser.isSafari?"<textarea":(isc.Browser.isMoz&&isc.Browser.geckoVersion>=20051111?"<div":"<button onclick='event.cancelBubble=true;return false;'"))," id='",null,"__focusProxy'"," style='VISIBILITY:",null,"left:1px;top:1px;width:",(isc.Browser.isSafari?"1":null),"px;height:",(isc.Browser.isSafari?"1":null),"px;",null,this.$w9,null,this.$xb,null,null,null,null," tabindex='",null,null,"' focusProxy='true' handleNativeEvents='",null,"'>",(isc.Browser.isSafari?"</textarea>":(isc.Browser.isMoz&&isc.Browser.geckoVersion>=20051111?"</div>":"</button>")),"</div>"]}
var _17=this.$w8;_17[2]=_1;_17[4]=(_2?"absolute":"inline");_17[6]=_3;_17[8]=_4;_17[12]=_1;_17[15]=(_7?"visible;":"hidden;");_17[17]=_5;_17[19]=_6;if(isc.Browser.isMoz){if(!_8||_9==-1)_17[21]="-moz-user-focus:ignore;";else _17[21]="-moz-user-focus:normal;"}
if(_12&&_12!=isc.emptyString){_17[22]=this.$w9;_17[23]=_12}else{_17[22]=this.$xa;_17[23]=null}
if(_13&&_13!=isc.emptyString){_17[24]=this.$xb;_17[25]=_13}else{_17[24]=null;_17[25]=null}
_17[26]=(_14!=null?" onkeydown="+_14:null);_17[27]=(_15!=null?" onkeypress="+_15:null);_17[28]=(_16!=null?" onkeyup="+_16:null);_17[30]=(_8?_9:-1);_17[31]=(_8&&_10?"' accesskey='"+_10:null);_17[33]=(_11?true:false);return _17.join(isc.$ad)},isc.A.showAllocatedTabChain=function isc_c_Canvas_showAllocatedTabChain(){var _1=isc.EH.$kj,_2=isc.EH.$kl;var _3="First tab widget:"+_1+", and last:"+_2+"\nFull chain:";var _4=_1;do{_3+="\n\t"+_4.getID()+" - "+_4.getTabIndex()+" -->";_4=_4.$v4}while(_4!=null&&_4!=_2)
this.logWarn(_3)},isc.A.clearCSSCaches=function isc_c_Canvas_clearCSSCaches(){isc.Element.$50f();var _1=isc.Canvas._canvasList;for(var i=0;i<_1.length;i++){var _3=_1[i];if(_3==null||_3.destroyed)continue;_3.$s8=_3.$s7=_3.$tk=_3.$tp=null}},isc.A.setAppImgDir=function isc_c_Canvas_setAppImgDir(_1){this.getPrototype().appImgDir=_1},isc.A.getAppImgDir=function isc_c_Canvas_getAppImgDir(){return isc.Page.getImgURL(isc.emptyString,this.getPrototype().appImgDir)},isc.A.setSkinImgDir=function isc_c_Canvas_setSkinImgDir(_1){this.getPrototype().skinImgDir=_1},isc.A.getSkinImgDir=function isc_c_Canvas_getSkinImgDir(){return isc.Page.getSkinImgDir(this.getPrototype().skinImgDir)},isc.A.getImgURL=function isc_c_Canvas_getImgURL(_1,_2,_3){if(_1==null||isc.isAn.emptyString(_1))return isc.$ad;_3=_3||this.getPrototype();if(_1.imgDir!=null&&_2==null)_2=_1.imgDir;if(_1.src!=null)_1=_1.src;if(_2==null){_2=(isc.startsWith(_1,this.$hm)?_3.skinImgDir:_3.appImgDir)}
var _4=isc.Page.getImgURL(_1,_2);return _4},isc.A.setShowCustomScrollbars=function isc_c_Canvas_setShowCustomScrollbars(_1){isc.Canvas.addProperties({showCustomScrollbars:_1})},isc.A.getPrintHTML=function isc_c_Canvas_getPrintHTML(_1,_2,_3,_4,_5,_6){if(!isc.isAn.Array(_1))_1=[_1];if(_5==null)_5=[];if(_6==null)_6=0;var _7,_8={target:this,methodName:"gotComponentPrintHTML",components:_1,printProperties:_2,callback:_3,HTML:_5,index:_6,separator:_4};for(;_6<_1.length;_6++){_8.index+=1;var _9=_1[_6];var _10;if(isc.isA.String(_9))_10=_9;else _10=_9.getPrintHTML(_2,_8);if(_10!=null){_5.add(_10)}else{_7=true;break}}
if(_7){if(!_3){this.logWarn("getPrintHTML(): HTML generated asynchronously, but no callback passed in")}
return null}
if(_3){this.fireCallback(_3,"HTML,callback",[_5.join(_4||isc.emptyString),_3])}
return _5.join(_4||isc.emptyString)},isc.A.gotComponentPrintHTML=function isc_c_Canvas_gotComponentPrintHTML(_1,_2){_2.HTML.add(_1);this.getPrintHTML(_2.components,_2.printProperties,_2.callback,_2.separator,_2.HTML,_2.index)},isc.A.getImgHTML=function isc_c_Canvas_getImgHTML(_1,_2,_3,_4,_5,_6,_7,_8,_9,_10){return this.imgHTML(_1,_2,_3,_4,_5,_6,_7,_8,_9,_10)},isc.A.$wf=function isc_c_Canvas__getImgHTMLTemplate(_1,_2,_3,_4,_5,_6,_7,_8){return isc.Canvas.imgHTML(_1,_2,_3,_4,_5,_6,_7,null,true,_8)},isc.A.imgHTML=function isc_c_Canvas_imgHTML(_1,_2,_3,_4,_5,_6,_7,_8,_9,_10){var _11,_12;if(isc.isAn.Object(_1)){if(_1.width!=null)_2=_1.width;if(_1.height!=null)_3=_1.height;if(_1.name!=null)_4=_1.name;if(_1.extraStuff!=null)_5=_1.extraStuff;if(_1.imgDir!=null)_6=_1.imgDir;if(_1.align!=null)_11=_1.align;if(_1.activeAreaHTML!=null)_7=_1.activeAreaHTML;if(_1.generateSpan!=null)_10=_1.generateSpan;if(_1.extraCSSText!=null)_12=_1.extraCSSText;_1=_1.src}
if(_1==null||isc.isAn.emptyString(_1)){return(_9?[isc.$ad]:isc.$ad)}
var _13=this.$xd;if(!_13){this.$xe="<img src='";this.$xf="' width='";this.$xg="' height='";this.$xh="' align='";this.$124i="' style='";this.$124o="' id='";this.$xi="' name='";this.$xj="' ";this.$xk=isc.Browser.isOpera?"top":"TEXTTOP";this.$xl=" border='0' suppress='TRUE' draggable='true'/>";this.$xd=_13=[this.$xe];this.$xm="' style='filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src=\"";this.$xn="\",sizingMethod=\"scale\");";this.$123f="<span style='display:inline-block;background-size:100% 100%;background-image:url(\"";this.$123g="<span style='display:inline-block;filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src=\"";this.$123h="<span role='presentation' style='display:inline-block;background-size:100% 100%;background-image:url(\"";this.$123i="<span role='presentation' style='display:inline-block;filter:progid:DXImageTransform.Microsoft.AlphaImageLoader(src=\"";this.$124w="\");width:";this.$123k="\")";this.$124x="\",sizingMethod=\"scale\");width:";this.$124y="\",sizingMethod=\"scale\")";this.$123l="px;height:";this.$123m=";height:";this.$123n="px;vertical-align:";this.$123o=";vertical-align:";this.$123p=" ></span>"}
if(_11==null)_11=this.$xk;if(_8!=null&&_8.isPrinting)_10=false;if(!this.$hu)this.$hu=this.getImgURL("[SKIN]/blank.gif");if(isc.Browser.isSafari&&(_2>32000||_3>32000)){this.logWarn("Attempting to draw an image of size "+_2+" x "+_3+".  Images larger than 32000 pixels in either direction are not reliably  rendered in this browser.")}
var _14=this.getImgURL(_1,_6,_8);if(_9)_13=[this.$xe];if(isc.Page.isXHTML()){_14=isc.makeXMLSafe(_14)}else{_14=_14.replace(this.$ob,this.$94t)}
var _15=this.$xo(_8)&&this.$xp(_1);if(_15){if(_2==null)_2=16;if(_3==null)_3=16}
var _16=(isc.screenReader&&(_5==null||(!isc.contains(_5,"alt=")&&!isc.contains(_5,"aria-label"))));if(_10){if(_16){_13[0]=_15?this.$123i:this.$123h}else{_13[0]=_15?this.$123g:this.$123f}
_13[1]=_14;if(_2){_13[6]=_15?this.$124x:this.$124w;_13[7]=_2}else{_13[6]=_15?this.$124y:this.$123k}
if(_3){_13[8]=_2?this.$123l:this.$123m;_13[9]=_3}
_13[10]=_3?this.$123n:this.$123o;if(this.$123d.hasOwnProperty(_11)){_11=this.$123d[_11]}
_13[11]=_11;if(_12!=null){_13[12]=isc.semi;_13[13]=_12}
_13[20]=this.$123p}else{if(_16){_13[0]="<img role='presentation' src='"}else{_13[0]=this.$xe}
if(!_15){_13[1]=_14}else{_13[1]=this.$hu;_13[3]=this.$xm;_13[4]=_14;_13[5]=this.$xn}
if(_2){_13[6]=this.$xf;_13[7]=_2}
if(_3){_13[8]=this.$xg;_13[9]=_3}
_13[10]=this.$xh;_13[11]=_11;if(_12!=null){_13[12]=this.$124i;_13[13]=_12}
_13[20]=this.$xl}
if(_4){_13[14]=isc.Page.isXHTML()||_10?this.$124o:this.$xi;if(_8)_13[15]=_8.getCanvasName();_13[16]=_4}
var _17;if(_7){_17="ISC_IMGMAP_"+this.$ws++;_13[17]="' usemap='#"+_17}
_13[18]=this.$xj;if(_5){_13[19]=_5}
if(_7){_13[21]="<map name='"+_17+"'>"+_7+"</map>"}
if(_9)return _13;var _18=_13.join(isc.$ad);_13.length=3;return _18},isc.A.$xq=function isc_c_Canvas__getValueIconHTML(_1,_2,_3,_4,_5,_6,_7,_8,_9){var _10=this.$wv;if(_7!=null){_10[0]=this.$wt;_10[1]=_7;_10[2]=this.$ob}else{_10[0]=_10[1]=_10[2]=null}
_10[4]=_9;var _1=isc.Canvas.getImgURL(_1,_2,_8),_11=this.$ww;_11.src=_1;_11.width=_3
_11.height=_4
if(_4!=null&&_4<16&&(isc.Browser.isMoz||isc.Browser.isSafari||(isc.Browser.isIE&&(isc.Browser.isIE9||isc.Browser.version>=10))))
{_11.align=null}else{_11.align=this.$wu}
_11.imgDir=_2;_11.extraStuff=_10.join(isc.emptyString);_11.extraCSSText=this.$124g+(_5||0)+this.$124h+(_6||0)+isc.px;_11.generateSpan=((_8==null||!_8.isPrinting)&&this.$123e&&isc.Browser.$124v);return isc.Canvas.imgHTML(_11)},isc.A.$xo=function isc_c_Canvas__fixPNG(_1){if(this.usePNGFix==false)return false;var _2=isc.Browser.isIE&&isc.Browser.minorVersion>=5.5&&!isc.Browser.isIE9&&isc.Browser.isWin&&(!isc.Canvas.neverUseFilters&&this.neverUsePNGWorkaround!=true);if(_2&&_1&&_1.$xo&&!_1.$xo()){_2=false}
return _2},isc.A.$xp=function isc_c_Canvas__isPNG(_1){return(_1&&this.$wx[_1.substring(_1.lastIndexOf(isc.dot)+1)])},isc.A.$wg=function isc_c_Canvas__setImageURL(_1,_2,_3,_4){var _5=this.getImgURL(_2,_3,_4);var _6=_1.style,_7=_1.tagName=="SPAN",_8=this.$xo(_4)&&this.$xp(_2);if(_8){_6.filter="progid:DXImageTransform.Microsoft.AlphaImageLoader(src=\""+_5+"\",sizingMethod=\"scale\")";if(!_7)_1.src=this.$hu}else{if(_7){_6.backgroundImage="url(\""+_5+"\")"}else{_6.filter=isc.$ad;_1.src=_5}}},isc.A.linkHTML=function isc_c_Canvas_linkHTML(_1,_2,_3,_4,_5,_6,_7){if(_2==null){_2=(!_1?isc.nbsp:String(_1).asHTML())}
var _8=this.$wy;if(_4!=null)_8[1]=" ID='"+_4+"'";else _8[1]=null;_8[3]=String.asAttValue(_1);_8[5]=(_3?String.asAttValue(_3):"_blank");if(_5!=null)_8[7]=" tabIndex="+_5;else _8[7]=null;if(_6!=null)_8[8]=" accessKey='"+_6+"'";else _8[8]=null;if(_7)_8[9]=" "+_7;_8[11]=_2;return _8.join(isc.emptyString)},isc.A.blankImgHTML=function isc_c_Canvas_blankImgHTML(_1,_2){var _3=this.$ht;if(!_3){_3=this.$ht=this.$wf(this.$wz,1,1,null,null,null,null,this.$123e)}
_3[7]=_1||this.$w0;_3[9]=_2||this.$w0;return _3.join(isc.$ad)},isc.A.spacerHTML=function isc_c_Canvas_spacerHTML(_1,_2,_3){if(_1==0&&_2==0)return isc.$ad;if(isc.Browser.isMoz||isc.Browser.isSafari||isc.Browser.isOpera||isc.Browser.isStrict||(isc.Browser.isIE&&(isc.Browser.version>=10||(_2<3&&(isc.Browser.minorVersion==5.5||isc.Browser.isMac)))))
{var _4;if(isc.Browser.isSafari){_4=32000}else if(isc.Browser.isFirefox&&isc.Browser.geckoVersion>=20090219){_4=17895580}else if(isc.Browser.isIE&&isc.Browser.isStrict){_4=16000}
if(_4!=null&&(_1>_4||_2>_4)){var _5=isc.SB.create(),_6=_4,_7=Math.floor(_2/_6),_8=Math.floor(_1/_6);_5.append("<TABLE role='presentation' CELLPADDING=0 CELLSPACING=0 BORDER=0 MARGIN=0>");for(var i=0;i<=_7;i++){_5.append("<TR>");for(var j=0;j<=_8;j++){_5.append("<TD>");var _11=((i==j)||(i>_8&&j==0)||(j>_7&&i==0));if(_11){var _12=(i<_7?_6:_2-(i*_6)),_13=(j<_8?_6:_1-(j*_6));_5.append(this.blankImgHTML(_13,_12))}
_5.append("</TD>")}
_5.append("</TR>")}
_5.append("</TABLE>");return _5.toString()}
return this.blankImgHTML(_1,_2)}
var _14=1300000;if(_2>_14){var _15=[];var _16=0;while(_16<_2){var _17,_18;if(_16+1400>=_2){_17=true;_18=_2-_16}else{_18=1400;_17=false}
_15[_15.length]=this.spacerHTML(_1,_18);_15[_15.length]="<br>";_16+=_18}
return _15.join(isc.$ad)}
var _19=this.$xs;if(_19==null){_19=this.$xs=["<SPAN STYLE='WIDTH:",null,"px;HEIGHT:",null,"px;overflow:hidden;'>",null,"</SPAN>"]}
_19[1]=_1;_19[3]=_2;_19[5]=_3?_3:isc.nbsp;return _19.join(isc.$ad)},isc.A.hiliteCharacter=function isc_c_Canvas_hiliteCharacter(_1,_2,_3,_4){if(!isc.isA.String(_1)||!isc.isA.String(_2)||_2.length!=1)
return _1;if(_2==" ")return _1;if(_3==null||_4==null){_3="<span style='text-decoration:underline;'>";_4="</span>"}
var _5=_1.indexOf(_2.toUpperCase());if(_5==-1)_5=_1.indexOf(_2.toLowerCase());if(_5!=-1){var _6=_1.slice(0,_5),_7=_1.slice(_5,_5+1),_8=_1.slice(_5+1);_7=_3+_7+_4;_1=_6.concat(_7,_8)}
return _1},isc.A.scheduleRedraw=function isc_c_Canvas_scheduleRedraw(_1){if(_1&&_1.priorityRedraw){this.$nm.addAt(_1,0)}else{this.$nm.add(_1)}
if(!this.$xu){this.$xu=isc.Timer.setTimeout({target:isc.Canvas,methodName:this.$w1},this._redrawQueueDelay)}},isc.A.clearRedrawQueue=function isc_c_Canvas_clearRedrawQueue(){var _1=(isc.EH.$lc!=null&&isc.EH.$lc.contains("TMR"));if(!_1)isc.EH.$h1("RDQ");var _2=isc.timeStamp();this.$xu=null;var _3=this.$nm;this.$nm=[];if(this.logIsDebugEnabled()){var _4="";for(var i=0;i<_3.length;i++){_4+=_3[i];if(i!=_3.length-1)_4+=", "}
this.logDebug("clearRedrawQueue: "+_4,"drawing")}
var _6,_7;for(var i=0;i<_3.length;i++){_6=_3[i];if(_6&&_6.priorityRedraw){_6.priorityRedraw=false;if(_7==null)_7=[];_7.add(_6);_3[i]=null}}
if(_7!=null){this.logInfo("Priority redraw: postponing non-priority items","drawing");this.$nm=_3;this.scheduleRedraw(_3[0]);_3=_7}
var _8=0,_6;for(var i=0;i<_3.length;i++){_6=_3[i];if(_6==null||_6.destroyed)continue;if(_6&&_6.isDirty()){_6.redraw(false);_8++}}
if(this.logIsDebugEnabled("redraws")){this.logDebug("clearRedrawQueue: "+_8+" redraws ("+_3.length+" items), "+(isc.timeStamp()-_2)+"ms","redraws")}
if(!_1)isc.EH.$h2()},isc.A.$uv=function isc_c_Canvas__queueForDelayedAdjustOverflow(_1){if(!isc.Canvas.$xv)isc.Canvas.$xv=[];isc.Canvas.$xv.add(_1);if(!isc.Canvas.$xw){isc.Canvas.$xw=isc.Timer.setTimeout({target:isc.Canvas,methodName:"$xx"},isc.Canvas.$nn)}},isc.A.$xx=function isc_c_Canvas__clearDelayedAdjustOverflowQueue(){var _1=isc.Canvas.$xv;isc.Canvas.$xv=[];isc.Canvas.$xw=null;if(!_1||_1.length==0)return;for(var i=0;i<_1.length;i++){var _3=window[_1[i]];if(isc.isA.Canvas(_3))_3.adjustOverflow("delayed")}},isc.A.checkForPageResize=function isc_c_Canvas_checkForPageResize(){isc.EH.$hr(true)},isc.A.moveOffscreen=function isc_c_Canvas_moveOffscreen(_1){if(_1.isDrawn())return;var _2=(!(!isc.Browser.isWin&&isc.Browser.isMoz&&_1.showCustomScrollbars==false&&(_1.overflow==isc.Canvas.AUTO)));if(_2)_1.moveTo(null,-9999)},isc.A.scheduleDestroy=function isc_c_Canvas_scheduleDestroy(_1){if(!_1||_1.destroyed||_1.destroying||!_1.destroy)return;this.$65j.add(_1);if(!this.$65m){this.$65m=isc.Timer.setTimeout({target:isc.Canvas,methodName:this.$65l},this.$65k)}},isc.A.clearDestroyQueue=function isc_c_Canvas_clearDestroyQueue(){isc.EH.$h1("DSQ");var _1=isc.timeStamp();this.$65m=null;var _2=this.$65j;this.$65j=[];if(this.logIsDebugEnabled("destroys")){var _3="";for(var i=0;i<_2.length;i++){_3+=_2[i];if(i!=_2.length-1)_3+=", "}
this.logDebug("clearDestroyQueue: "+_3,"destroys")}
var _5=0,_6;for(var i=0;i<_2.length;i++){_6=_2[i];if(_6==null||_6.destroyed||_6.destroying)continue;_6.destroy(false);_5++}
if(this.logIsDebugEnabled("destroys")){this.logDebug("clearDestroyQueue: "+_5+" direct destroy() calls ("+_2.length+" items), "+(isc.timeStamp()-_1)+"ms","destroys")}
isc.EH.$h2()},isc.A.outsetRect=function isc_c_Canvas_outsetRect(_1,_2){if(!_2)return _1;if(isc.isAn.Array(_1)){_1[0]-=_2;_1[1]-=_2;_1[2]+=2*_2;_1[3]+=2*_2;return _1}
_1.left-=_2;_1.top-=_2;_1.width+=2*_2;_1.height+=2*_2;return _1},isc.A.rectsIntersect=function isc_c_Canvas_rectsIntersect(_1,_2){var _3=_1[0],_4=_1[1],_5=_1[2],_6=_1[3],_7=_2[0],_8=_2[1],_9=_2[2],_10=_2[3],_11=((_3>_7+_9-1)||(_3+_5-1<_7)),_12=((_4>_8+_10-1)||(_4+_6-1<_8));return!_11&&!_12},isc.A.$vs=function isc_c_Canvas__forceNativeTabOrderUpdate(){if(!this.$xy){this.ns.Element.createAbsoluteElement("<DIV ID='$xz' style='position:absolute;left:0px;top:-100px'>&nbsp;</DIV>");this.$xy=document.all["$xz"]}else{this.$xy.innerHTML="&nbsp;"}},isc.A.$q8=function isc_c_Canvas__addToTopLevelCanvasList(_1){if(!isc.isA.Canvas(_1)||_1.$x0!=null)return;this.$tw.add(_1);_1.$x0=this.$tw.length-1},isc.A.$ro=function isc_c_Canvas__removeFromTopLevelCanvasList(_1){if(!isc.isA.Canvas(_1)||_1.$x0==null)return;this.$tw[_1.$x0]=null;_1.$x0=null},isc.A.$92y=function isc_c_Canvas__adjustScrollLeftForRTL(_1,_2,_3,_4,_5,_6){if(_5){var _7=_2-_3;if(_4)_1-=_7;else _1+=_7}else if(_6){var _8=_2-_3;if(_8>0&&_8>=_1){_1=_8-_1}}
return _1},isc.A.showClickMask=function isc_c_Canvas_showClickMask(_1,_2,_3){return this.ns.EH.showClickMask(_1,_2,_3)},isc.A.hideClickMask=function isc_c_Canvas_hideClickMask(_1){this.ns.EH.hideClickMask(_1)},isc.A.$t7=function isc_c_Canvas__placeRect(_1,_2,_3,_4,_5,_6){if(isc.isAn.Array(_3)){_3={left:_3[0],top:_3[1],width:_3[2],height:_3[3]}}else if(_3==null){_3={left:this.ns.EH.getX(),top:this.ns.EH.getY()}}
if(_3.width==null)_3.width=0;if(_3.height==null)_3.height=0;if(_4==null)_4="bottom";if(_5==null)_5=true;var _7=(_4=="bottom"||_4=="top");if(_7){if(_6=="inside-right")_6="right";if(_6!="right"&&_6!="outside-right"&&_6!="outside-left")_6="left"}else{if(_6=="inside-bottom")_6="bottom";if(_6!="bottom"&&_6!="outside-bottom"&&_6!="outside-top")_6="top"}
var _8=_3.left;if(_7){if(_6=="right")_8+=(_3.width-_1);else if(_6=="outside-right")_8+=_3.width;else if(_6=="outside-left")_8-=_1}else{if(_4=="left")_8-=_1;else _8+=_3.width}
var _9=_3.top;if(_7){if(_4=="top")_9-=_2;else _9+=_3.height}else{if(_6=="bottom")_9+=(_3.height-_2);else if(_6=="outside-bottom")_9+=_3.height;else if(_6=="outside-top")_9-=_2}
var _10=isc.Page.getWidth(),_11=isc.Page.getHeight(),_12=isc.Page.getScrollLeft(true),_13=isc.Page.getScrollTop();var _14=_12-_8,_15=_8+_1-(_10+_12),_16=_13-_9,_17=_9+_2-(_11+_13);;if(_14<=0&&_15<=0&&_16<=0&&_17<=0){return[_8,_9]}
if(_14>0){if(_4=="left"&&!_5){if(_3.left+_3.width<_12){_8=_12}else{_8=_3.left+_3.width}}else{_8=_12}}else if(_15>0){if(_4=="right"&&!_5){if((_3.left-_1)>=_12){if(_3.left>(_12+_10))
_8=(_12+_10)-_1;else _8=_3.left-_1}}else{if(_10<_1){_8=_12}else{_8=_12+_10-_1}}}
if(_16>0){if(_4=="top"&&!_5){if(_3.top+_3.height<_13){_9=_13}else{_9=_3.top+_3.height}}else{_9=_13}}else if(_17>0){if(_4=="bottom"&&!_5){if((_3.top-_2)>=_13){if(_3.top>(_13+_11))
_9=(_13+_11)-_2;else _9=_3.top-_2}}else{if(_11<_2){_9=_13}else{_9=_13+_11-_2}}}
return[_8,_9]},isc.A.$iy=function isc_c_Canvas__handleUnload(){if(isc.Browser.isIE)this.$xt();var _1=isc.Log.logViewer;if(_1&&_1.logWindowLoaded()){_1._logWindow.openerUnloading();_1._logWindow=null}},isc.A.$xt=function isc_c_Canvas__clearDOMHandles(){var _1=this._canvasList;for(var i=0;i<_1.length;i++){var _3=_1[i];if(_3){if(_3.$q3){_3.$q3.eventProxy=null;_3.$q3=null}}}
return true},isc.A.snapToEdge=function isc_c_Canvas_snapToEdge(_1,_2,_3,_4,_5){var _6,_7,_8;if(isc.isAn.Array(_1)){_7=false;_8=[_1[1],_1[0]];_6=[_1[2],_1[3]]}else if(_3.masterElement){_7=(_3.percentBox==_3.$520),_6=[_7?_1.getViewportWidth():_1.getVisibleWidth(),_7?_1.getViewportHeight():_1.getVisibleHeight()];_8=[_1.getTop()+(_7?(_1.getTopBorderSize()+_1.getTopMargin()):0),_1.getLeft()+(_7?(_1.getLeftBorderSize()+_1.getLeftMargin()):0)]}else if(isc.isA.Canvas(_5)){_7=(_3.percentBox==_3.$520),_6=[_7?_5.getViewportWidth():_5.getVisibleWidth(),_7?_5.getViewportHeight():_5.getVisibleHeight()];_8=[_5.getPageTop()+(_7?(_5.getTopBorderSize()+_5.getTopMargin()):0),_5.getPageLeft()+(_7?(_5.getLeftBorderSize()+_5.getLeftMargin()):0)]}else{_7=true;_6=[_1.getViewportWidth(),_1.getViewportHeight()];_8=[0,0]}
var _9=isc.Canvas.$52c(_2,_8,_6,false);var _10=isc.Canvas.$52c((_4||_2),_9,[_3.getVisibleWidth(),_3.getVisibleHeight()],true);if(_3.snapOffsetLeft!=null)_10[1]+=_3.snapOffsetLeft;if(_3.snapOffsetTop!=null)_10[0]+=_3.snapOffsetTop;_3.moveTo(_10[1],_10[0]);_3.$jo=false},isc.A.$52c=function isc_c_Canvas__getSnapPoint(_1,_2,_3,_4){var _5=_3[0],_6=_3[1];var _7;if(_1=="TL")_7=[0,0];else if(_1=="T")_7=[0,_5/2];else if(_1=="TR")_7=[0,_5];else if(_1=="R")_7=[_6/2,_5];else if(_1=="BR")_7=[_6,_5];else if(_1=="B")_7=[_6,_5/2];else if(_1=="BL")_7=[_6,0];else if(_1=="L")_7=[_6/2,0];else if(_1=="C")_7=[_6/2,_5/2];else _7=[0,0];_7[0]=Math.floor(_7[0]);_7[1]=Math.floor(_7[1]);if(_4)return[_2[0]-_7[0],_2[1]-_7[1]];else return[_2[0]+_7[0],_2[1]+_7[1]]},isc.A.$112q=function isc_c_Canvas__getTopLevelWidget(_1){if(!_1){return null}
var _2=isc.isAn.Array(_1)?_1:isc.getKeys(_1)
var _3;for(var i=0;i<_2.length;i++){var _5=_2[i];var _6=window[_5];if(_6&&isc.isA.Canvas(_6)&&!_6.destroyed&&_6.parentElement==null&&_6.masterElement==null)
{_3=_6}}
return _3},isc.A.ariaEnabled=function isc_c_Canvas_ariaEnabled(){return false},isc.A.useLiteAria=function isc_c_Canvas_useLiteAria(){return false});isc.B._maxIndex=isc.C+50;isc.Canvas.registerStringMethods({resized:"deltaX,deltaY",showIf:"canvas",childRemoved:"child,name",peerRemoved:"peer,name",deparented:"oldParent,name",depeered:"oldMaster,name",parentMoved:"parent,deltaX,deltaY",moved:"deltaX,deltaY",focusChanged:"hasFocus",scrolled:"deltaX,deltaY",parentScrolled:"parent,deltaX,deltaY",hover:"",onDrop:"",visibilityChanged:"isVisible"});isc.Canvas.$yx=function(){var _1=isc.EH,_2={};for(var _3 in _1.eventTypes){this.registerStringMethods(_1.eventTypes[_3],_1.$i3);var _4=_1.eventTypes[_3];if(this.getInstanceProperty(_4)==null){_2[_4]=isc.Class.NO_OP}}
this.addMethods(_2)}
isc.Canvas.$yx();isc.defineClass("BackMask","Canvas");isc.A=isc.BackMask.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.autoDraw=false;isc.A.$lo=true;isc.A._generated=true;isc.A.useClipDiv=false;isc.A.hideUsingDisplayNone=isc.Browser.isMoz;isc.A.overflow=isc.Canvas.HIDDEN;isc.A.contents="<iframe width='100%' height='100%' border='0' frameborder='0' src=\""+isc.Page.getBlankFrameURL()+"\" marginwidth='0' marginheight='0' scrolling='no' tabIndex='-1' tabStop='false'></iframe>";isc.A.$ns=false;isc.A.$jo=false;isc.A.$jp=false;isc.A._redrawWithParent=false;isc.B.push(isc.A.masterMoved=function isc_BackMask_masterMoved(){this.masterElement.$qi()},isc.A.masterResized=function isc_BackMask_masterResized(){this.masterElement.$qi()},isc.A.draw=function isc_BackMask_draw(_1,_2,_3){if(this.suppressed)return this;if(!this.readyToDraw())return this;this.invokeSuper(isc.BackMask,this.$ny,_1,_2,_3);if(this.masterElement.overflow==isc.Canvas.VISIBLE)this.masterElement.$qi();return this},isc.A.show=function isc_BackMask_show(){if(!this.suppressed)this.invokeSuper(isc.BackMask,"show")});isc.B._maxIndex=isc.C+4;isc.defineClass("ScreenSpan","Canvas");isc.A=isc.ScreenSpan.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A._generated=true;isc.A.$94z=3200;isc.A.$940=2400;isc.A.src="[SKINIMG]/blank.gif";isc.A.redrawOnResize=false;isc.A.overflow="hidden";isc.B.push(isc.A.getInnerHTML=function isc_ScreenSpan_getInnerHTML(){if(!this.$yy){this.$yy=isc.Browser.isIE&&isc.Browser.version>6?isc.Canvas.imgHTML(this.src,this.$94z,this.$940):isc.Canvas.spacerHTML(this.$94z,this.$940)}
return this.$yy},isc.A.hide=function isc_ScreenSpan_hide(_1,_2,_3,_4){isc.ScreenSpan.removeFromSpanRegistry(this);this.resizeTo(1,1);this.moveTo(null,-this.getHeight());return this.invokeSuper(isc.ScreenSpan,"hide",_1,_2,_3,_4)},isc.A.show=function isc_ScreenSpan_show(_1,_2,_3,_4){isc.ScreenSpan.addToSpanRegistry(this);this.fitToScreen();return this.invokeSuper(isc.ScreenSpan,"show",_1,_2,_3,_4)},isc.A.fitToScreen=function isc_ScreenSpan_fitToScreen(){var _1=Math.max(isc.Page.getWidth(null,true),isc.Page.getScrollWidth()),_2=Math.max(isc.Page.getHeight(null,true),isc.Page.getScrollHeight());this.resizeTo(_1,_2);if(_1>this.$94z||_2>this.$940){this.$94z=Math.max(_1,this.$94z);this.$940=Math.max(_2,this.$940);delete this.$yy;this.markForRedraw("Resizing spacer HTML to fit large page content.")}
this.moveTo(0,0)});isc.B._maxIndex=isc.C+4;isc.A=isc.ScreenSpan;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.spanRegistry={};isc.B.push(isc.A.addToSpanRegistry=function isc_c_ScreenSpan_addToSpanRegistry(_1){this.spanRegistry[_1.getID()]=true;if(this.pageResizedEvent==null){this.pageResizedEvent=isc.Page.setEvent("resize",this,isc.Page.FIRE_ONCE,"pageResized")}},isc.A.removeFromSpanRegistry=function isc_c_ScreenSpan_removeFromSpanRegistry(_1){delete this.spanRegistry[_1.getID()];var _2=true;for(var i in this.spanRegistry){if(this.spanRegistry[i]){_2=false;break}}
if(this.pageResizedEvent!=null&&_2){isc.Page.clearEvent("resize",this.pageResizedEvent);delete this.pageResizedEvent}},isc.A.pageResized=function isc_c_ScreenSpan_pageResized(){var _1=[];for(var _2 in this.spanRegistry){if(this.spanRegistry[_2]){var _3=window[_2];if(_3&&_3.isVisible()){_1.add(_3);_3.resizeTo(isc.Page.getWidth(null,true),isc.Page.getHeight(null,true))}}}
_1.map("fitToScreen");this.pageResizedEvent=isc.Page.setEvent("resize",this,isc.Page.FIRE_ONCE,"pageResized")});isc.B._maxIndex=isc.C+3;isc.$yz={getForm:function(_1){if(_1&&typeof _1=="object")return _1;var _2;if(_1!=null&&isc.Browser.isDOM){_2=document.getElementById(_1)}
if(_2!=null)return _2;if(_1==null)_1=0;if(_2==null)return document.forms[_1];return _2},getFormElementValue:function(_1,_2){var _3=this.getFormElement(_1,_2);if(!_3)return;switch(_3.type){case"radio":return(_3.checked?_3.value:null)
case"checkbox":return _3.checked;case"select-one":if(!_3.options||_3.options.length==0)return null;var _4=_3.options[_3.selectedIndex];return _4.value;case"select-multiple":var _5=[];for(var i=0,_7=_3.options.length;i<_7;i++){var _4=_3.options[i];if(_4.selected)
_5.add(_4.value)}
return _5;case"button":case"reset":case"submit":return null;default:return _3.value}},getFormValues:function(_1){var _2=this.getForm(_1);if(!_2)return null;var _3={};if(!_2.elements){this.logWarn("Form '"+_1+"' contains no elements - returning empty map for data.");return{}}
for(var i=0;i<_2.elements.length;i++){var _5=_2.elements[i];if(_5.name!=null){var _6=this.getFormElementValue(_2,_2.elements[i]);if(_6!=null)_3[_5.name]=_6}}
return _3},getFormElement:function(_1,_2){if(typeof _2=="object")return _2;var _3=this.getForm(_1);if(_3)return _3.elements[_2];return null}};isc.Canvas.addClassMethods(isc.$yz)
isc.Canvas.addMethods(isc.$yz)
isc.setAutoDraw=function(_1){if(_1==null)_1=true;isc.Canvas.addProperties({autoDraw:_1})};isc.allowDuplicateStyles=true;isc.defineClass("PrintCanvas","Canvas");isc.A=isc.PrintCanvas.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.redrawOnResize=false;isc.A.overflow="hidden";isc.A.useExplicitHeight=isc.Browser.isSafari||(isc.Browser.isFirefox&&isc.Browser.isStrict&&isc.Browser.geckoVersion>=20100101);isc.A.printFrameURL="[HELPERS]printFrame.html";isc.B.push(isc.A.initWidget=function isc_PrintCanvas_initWidget(){this.Super("initWidget",arguments)},isc.A.resized=function isc_PrintCanvas_resized(){if(this.useExplicitHeight){var _1=this.getIFrameHandle();if(_1){_1.style.width=this.getInnerWidth();_1.style.height=this.getInnerHeight()}}},isc.A.getInnerHTML=function isc_PrintCanvas_getInnerHTML(){var _1="100%",_2="100%";if(this.useExplicitHeight){_1=this.getInnerWidth();_2=this.getInnerHeight()}
return"<iframe height='"+_2+"' width='"+_1+"' scrolling='auto' id='"+this.getIFrameID()+"' frameborder='0' src=\""+this.getPrintFrameURL(this.title)+"\"></iframe>"},isc.A.getIFrameID=function isc_PrintCanvas_getIFrameID(){return this.getID()+"$55y"},isc.A.getPrintFrameURL=function isc_PrintCanvas_getPrintFrameURL(_1){return isc.Page.getURL(this.printFrameURL+"?id="+this.getID()+"&title="+(_1||""))},isc.A.getIFrameHandle=function isc_PrintCanvas_getIFrameHandle(){return document.getElementById(this.getIFrameID())},isc.A.getIFrameWindow=function isc_PrintCanvas_getIFrameWindow(){return this.getIFrameHandle().contentWindow},isc.A.iframeLoad=function isc_PrintCanvas_iframeLoad(){this.iframeLoaded=true;if(isc.Browser.isIE){var _1=this.getIFrameWindow().document.body;if(_1)_1.style.overflow="auto"}},isc.A.setHTML=function isc_PrintCanvas_setHTML(_1,_2){if(!this.isDrawn()){this.$741={HTML:_1,callback:_2};return}
if(!this.iframeLoaded){this.delayCall("setHTML",[_1,_2],100);return}
if(this.externalStylesheet){var _3='<link rel="stylesheet" type="text/css" href="'+isc.Page.getURL(this.externalStylesheet)+'" />\n';_1=_3+_1}
var _4=this.getIFrameWindow();_4.assignHTML(_1);if(isc.Browser.isIE&&isc.Browser.hasVML&&_1.contains("class=rvml")){_4.document.createStyleSheet().addRule(".rvml","behavior:url(#default#VML)")}
this.fireCallback(_2,["printPreview","callback"],[this,_2])},isc.A.draw=function isc_PrintCanvas_draw(){this.Super("draw",arguments);if(this.$741!=null){var _1=this.$741;this.$741=null;this.setHTML(_1.HTML,_1.callback)}},isc.A.setTitle=function isc_PrintCanvas_setTitle(_1){this.title=_1;if(!this.isDrawn()&&!this.iframeLoaded)return;delete this.iframeLoaded;if(this.isDrawn())this.redraw()},isc.A.printHTML=function isc_PrintCanvas_printHTML(_1,_2,_3){var _4=this;this.setTitle(_2);this.setHTML(_1,function(){_4.print()})},isc.A.print=function isc_PrintCanvas_print(){if(!this.isDrawn()){this.logWarn("print(): Attempt to print an undrawn PrintCanvas. Ignoring.");return}
if(!this.iframeLoaded){this.delayCall("print",[],100);return}
this.getIFrameWindow().doPrint()},isc.A.printComplete=function isc_PrintCanvas_printComplete(){});isc.B._maxIndex=isc.C+14;isc.A=isc.Canvas;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.printComponents=function isc_c_Canvas_printComponents(_1,_2,_3,_4){isc.Canvas.getPrintHTML(_1,_2,{target:this,methodName:"$57f",title:_3,debugOnly:_4})},isc.A.$57f=function isc_c_Canvas__printComponentHTML(_1,_2){var _3=_2.title,_4=_2.debugOnly;if(!this.$55z)this.$55z=isc.PrintCanvas.create({width:"100%",height:"100%",autoDraw:false,backgroundColor:"white"});this.$55z.moveTo(null,-isc.Page.getHeight());if(!this.$55z.isDrawn())this.$55z.draw();this.$55z.printHTML(_1,_3,_4)},isc.A.getPrintPreview=function isc_c_Canvas_getPrintPreview(_1,_2,_3,_4,_5){if(_3==null)_3={};_3.autoDraw=true;isc.Canvas.getPrintHTML(_1,_2,{target:this,methodName:"$57g",origCallback:_4,previewProperties:_3},_5)},isc.A.$57g=function isc_c_Canvas__createPrintPreview(_1,_2){var _3=isc.PrintCanvas.create(_2.previewProperties);_3.setHTML(_1,{target:this,methodName:"$57h",origCallback:_2.origCallback})},isc.A.$57h=function isc_c_Canvas__printPreviewGenerated(_1,_2){if(_2.origCallback){this.fireCallback(_2.origCallback,["printPreview"],[_1])}},isc.A.showPrintPreview=function isc_c_Canvas_showPrintPreview(_1,_2,_3,_4,_5){if(!isc.PrintWindow){isc.definePrintWindow()}
if(!isc.PrintWindow)return;if(_3==null)_3={};_3.autoDraw=false;if(_3.width==null)_3.width="100%";if(_3.height==null)_3.height="100%";if(_3.left==null)_3.left=0;if(_3.top==null)_3.top=0;if(!this.$57i){this.$57i=isc.PrintWindow.create(_3)}else{this.$57i.setProperties(_3)}
this.$57i.showPrintPreview(_1,_2,_4,_5)});isc.B._maxIndex=isc.C+6;isc.definePrintWindow=function(){if(!isc.Window){isc.logWarn("Attempting to create PrintWindow class with no defined Window class. Ensure the required 'Containers' module is laoded");return}
isc.defineClass("PrintWindow","Window");isc.PrintWindow.addProperties({isModal:true,headerControls:["headerIcon","headerLabel","printButton","closeButton"],printButtonDefaults:{_constructor:"IButton",height:20,click:"this.creator.printClicked()"},showMinimizeButton:false,showShadow:false,title:"Print Preview",printButtonTitle:"Print",setPrintButtonTitle:function(_3){this.printButtonTitle=_3;if(this.printButton!=null)this.printButton.setTitle(_3)},initWidget:function(){this.printButtonDefaults.title=this.printButtonTitle;this.Super("initWidget",arguments)},showPrintPreview:function(_3,_4,_5,_6){if(!isc.isAn.Array(_3))_3=[_3];isc.Canvas.getPrintHTML(_3,_4,{target:this,methodName:"$57j",origCallback:_5},_6)},$57j:function(_3,_4){if(!this.previewPane){this.previewPane=this.createPreviewPane();this.previewPane.addProperties({title:this.title});this.addItem(this.previewPane)}else{this.previewPane.setTitle(this.title)}
this.previewPane.externalStylesheet=this.externalStylesheet;this.setVisibility("hidden");if(!this.isDrawn())this.draw();this.previewPane.setHTML(_3,{target:this,methodName:"$57h",origCallback:_4.origCallback})},$57h:function(_3,_4){if(!this.isVisible())this.show();this.bringToFront();if(_4.origCallback){this.fireCallback(_4.origCallback,["printPreview","printWindow"],[_3,this])}},printClicked:function(){var _1=this.getPrintCanvas();if(!_1)return;_1.print()},createPreviewPane:function(_3){var _2=isc.PrintCanvas.create({width:"100%",height:"100%"});return _2},getPrintCanvas:function(){return this.previewPane},closeClick:function(){this.Super("closeClick",arguments);this.clear()}})}
isc.ClassFactory.defineInterface("DataBoundComponent");isc.A=isc.Canvas;isc.A.COPY="copy";isc.A.MOVE="move";isc.A.CLONE="clone";isc.A.validateFieldNames=false;isc.A.maxNumInvalidFieldNameWarnings=1;isc.A.$1026=0;isc.A=isc.Canvas;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$70l="/";isc.A.$605=".";isc.B.push(isc.A.$1027=function isc_c_Canvas__validateFieldNames(_1,_2){var _3=isc.isAn.Instance(_2)&&_2.getClass().isA(isc.DynamicForm),i,_5,_6;for(i=0;i<_1.length;i++){_5=_1[i];var _7=((_3&&_5.shouldSaveValue===false&&_5.name==null)||String.isValidID(_5.name));if(!_7&&isc.Canvas.$1026++<isc.Canvas.maxNumInvalidFieldNameWarnings){_6="'"+_5.name+"' is not a valid JavaScript identifier. DataSource and DataBoundComponent field names are required to be valid JavaScript identifiers, the syntax for which is specified by ECMA-262 Section 7.6. Note: The String.isValidID(string) function can be used to test whether a string is a valid identifier.";if(_2!=null){var _8=isc.isAn.Instance(_2)?""+_2:isc.Log.echoLeaf(_2);_6+=" This field applied to "+_2+"."}
if(isc.Canvas.$1026==isc.Canvas.maxNumInvalidFieldNameWarnings){_6+=" This will be the last warning."}
isc.logWarn(_6)}}},isc.A.getFieldImageDimensions=function isc_c_Canvas_getFieldImageDimensions(_1,_2){var _3,_4;var _5,_6,_7;if(isc.isA.String(_1.imageWidth)){_5=_1.imageWidth}else{_3=_1.imageWidth}
if(isc.isA.String(_1.imageHeight)){_6=_1.imageHeight}else{_4=_1.imageHeight}
if(isc.isA.String(_1.imageSize)){_7=_1.imageSize}else{_3=_3||_1.imageSize;_4=_4||_1.imageSize}
if(_2!=null){_3=_3||_2[_5]||_2[_7];_4=_4||_2[_6]||_2[_7]}
return{width:_3,height:_4}},isc.A.$833=function isc_c_Canvas__performActionOnValue(_1,_2,_3,_4,_5,_6,_7,_8,_9,_10){if(!_4||_2==null||isc.isAn.emptyString(_2))return;var _11=_4;var _12=this.$70l;var _13=_2.contains(_12);if(!_13){_12=this.$605;_13=_2.contains(_12)}
if(_13){_2=_2.trim(_12);var _14=_2.split(_12),_15=[],_16;if(_14[0]&&_4[_14[0]]===_16&&_1=="get"&&!_8)
{if(_5&&isc.ValuesManager&&isc.isA.ValuesManager(_5.valuesManager))
{return this.$833(_1,_2,_3,_5.valuesManager.getValues(),_5,_6,_7,true,_9||_4,_10)}}
if(isc.isAn.emptyString(_14.last()))_14.length-=1;for(var i=0;i<_14.length;i++){if(isc.isAn.emptyString(_14[i]))continue;if(_4==null){_15.length=0;break}
_15.add(_4);if(i==_14.length-1){if(_1=="get"){if(_3!=null&&_3.type!=null){var _18=isc.SimpleType.getType(_3.type);if(_18&&_18.getAtomicValue&&_4[_14[i]]!==_16)
{return _18.getAtomicValue(_4[_14[i]],_10)}}
return _4[_14[i]]}else if(_1=="clear"){delete _4[_14[i]]}else if(_1=="save"){if(_3!=null&&_3.type!=null){var _18=isc.SimpleType.getType(_3.type);if(_18&&_18.updateAtomicValue){var _19=_18.updateAtomicValue(_7,_4[_14[i]],_10);if(_19!=null)return _19}}
_4[_14[i]]=_7}}else{var _20=_4[_14[i]];if(_20==_16){if(_1=="get"){return _16}else if(_1=="clear"){return}else if(_1=="save"){_20=_4[_14[i]]={}}}
_4=_20;if(isc.isAn.Array(_4)){var _21=null;var _22=(parseInt(_14[i+1])==_14[i+1]);if(_22){_21=parseInt(_14[i+1]);_14.removeAt(i+1)}else if(_5&&_5.selectionComponent){var _23=_12,_24=_5,_25;for(var j=0;j<=i;j++){_23+=_14[j]+_12}
_23=_23.trim(_12);_24=_5.selectionComponent;while(_24){var _27=_24.dataPath;if(_27)_27=_27.trim(_12);if(_23==_27){var _28=_24.getSelectedRecord();if(_28){for(var k=0;k<_4.length;k++){if(_28==_4[k]){_21=k;break}}
if(_21==null){isc.logWarn("At dataPath "+_2+", there was a selectionComponent with a valid selected record but we could not find that record in the VM's data.  Falling back to row derivation behavior")}}else{_25=true}
break}
_24=_24.selectionComponent}
if(_21==null){if(!_25&&_6){_21=isc.Canvas.deriveImplicitArrayEntry(_1,_2,_3,_4,_5,_14,i,_9)}else{return}}}else{if(_6){_21=0}else{return}}
_4=_4[_21]}}}
if(_1=="clear"){for(var i=_15.length-1;i>0;i--){if(isc.isAn.emptyObject(_15[i])){delete _15[i-1][_14[i-1]]}}}}else{if(_1=="get"){if(_3!=null&&_3.type!=null){var _18=isc.SimpleType.getType(_3.type);if(_18&&_18.getAtomicValue&&_4[_2]!==_16)
{return _18.getAtomicValue(_4[_2],_10)}}
return _4[_2]}else if(_1=="clear"){delete _4[_2]}else if(_1=="save"){if(_3!=null&&_3.type!=null){var _18=isc.SimpleType.getType(_3.type);if(_18&&_18.updateAtomicValue){var _19=_18.updateAtomicValue(_7,_4[_2],_10);if(_19!=null)return _19}}
_4[_2]=_7}}},isc.A.deriveImplicitArrayEntry=function isc_c_Canvas_deriveImplicitArrayEntry(_1,_2,_3,_4,_5,_6,_7,_8){return 0},isc.A.$70m=function isc_c_Canvas__clearFieldValue(_1,_2,_3,_4){var _5=_1;if(isc.isAn.Object(_1)&&!isc.isA.Date(_1)){_5=this.$923(_1,_3)}else{_1=null}
this.$833("clear",_5,_1,_2,_3,_4,null,false)},isc.A.$70n=function isc_c_Canvas__saveFieldValue(_1,_2,_3,_4,_5,_6,_7){if(_1==null&&_2!=null)_1=this.$923(_2,_5);this.$833("save",_1,_2,_4,_5,_6,_3,false,null,_7);return _4},isc.A.$923=function isc_c_Canvas__getDataPathFromField(_1,_2){var _3;if(_1.dataPath){_3=_1.dataPath;if(_2){_3=this.$840(_1.dataPath,_2)}}else{_3=_1.name}
return _3},isc.A.$70o=function isc_c_Canvas__getFieldValue(_1,_2,_3,_4,_5,_6){if(_1==null&&_2!=null)_1=this.$923(_2,_4);return this.$833("get",_1,_2,_3,_4,_5,null,false,null,_6)},isc.A.$840=function isc_c_Canvas__trimDataPath(_1,_2){if(!_1)return _1;var _3=_1.trim(isc.Canvas.$70l);if(!_3.contains(isc.Canvas.$70l))return _1;var _4=_2.getFullDataPath();if(_4==null||_4=="")return _3;_4=_4.trim(isc.Canvas.$70l);var _5=_4.split(isc.Canvas.$70l);var _6=_3.split(isc.Canvas.$70l);for(var i=0;i<_5.length;i++){if(_5[i]!=_6[i]){break}}
if(i==0)return _1;var _8="";for(var j=i;j<_6.length;j++){_8+=_6[j];_8+="/"}
return _8.substring(0,_8.length-1)},isc.A.$702=function isc_c_Canvas__combineDataPaths(_1,_2){if(_1==null&&_2==null)return null;if(isc.isA.String(_2)&&_2.startsWith(this.$70l))return _2;if(_1==null)return""+_2;if(_2==null)return _1+"";if(isc.isA.String(_1)&&_1.endsWith(this.$70l)){return _1+_2}else{return _1+this.$70l+_2}},isc.A.$91f=function isc_c_Canvas__duplicateValues(_1,_2,_3,_4){var _5=_1.getDataSource();this.$91g(_1,_3,_2,_5,null,_4)},isc.A.$91g=function isc_c_Canvas__cloneComponentValues(_1,_2,_3,_4,_5,_6,_7){if(_3==null)return;var _8=(_6!=null);var _9=_4?_4.deepCloneOnEdit:null;if(_9==null)_9=_1.deepCloneOnEdit;var _10=_9==null?(isc.DataSource?isc.DataSource.deepCloneOnEdit:_9):_9;if(isc.isAn.Array(_3)){for(var i=0;i<_3.length;i++){var _12=_3[i];if(isc.isA.Function(_12))continue;if(isc.isAn.Instance(_3[_15])||isc.isA.Class(_3[_15]))continue;if(_12==null||isc.isA.String(_12)||isc.isA.Boolean(_12)||isc.isA.Number(_12))
{_2[_2.length]=_12}else if(isc.isA.Date(_12)){_2[_2.length]=new Date(_12.getTime())}else if(isc.isAn.Object(_12)){var _13;if(isc.isAn.Array(_12)){_13=_2[_2.length]=[]}else{_13=_2[_2.length]={}}
this.$91g(_1,_13,_12,_4,(_8?_5:null),_6)}}
return}
if(_3.$42c!=null){_3=isc.JSONEncoder.$42b(_3)}
var _14={__ref:true,__module:true};if(isc.DataSource&&isc.DataSource.cloneValuesSafely){if(!_7)_7=[];if(_7.contains(_3)){_2=_3;return}
_7.add(_3)}
for(var _15 in _3){if(isc.isA.Function(_3[_15]))continue;if(_14[_15]==true)continue;if(isc.Browser.isSGWT&&window.SmartGWT.isNativeJavaObject(_3[_15]))continue;if(isc.isAn.Instance(_3[_15])||isc.isA.Class(_3[_15]))continue;var _16;if(_8){if(_5){_16=_5+_15}else{_16=_15}
var _17;if(_1.getItem)_17=_1.getItem(_16);if(_17&&_17.isSetToDefaultValue()){_6.add(_16)}}
var _18=_3[_15];if(isc.isA.Date(_18)){_2[_15]=_18.duplicate()}else if(isc.isAn.Object(_18)&&!isc.isAn.Array(_18)){var _19=_4?_4.getField(_15):null;if(!_19){_2[_15]=_3[_15]}else{var _20=isc.SimpleType.getType(_19.type);if(_20&&_20.duplicate){_2[_15]=_20.duplicate(_3[_15])}else if(_19.deepCloneOnEdit==true||(_19.deepCloneOnEdit==null&&_10))
{if(isc.DataSource&&isc.DataSource.cloneValuesSafely){if(_7.contains(_18)){_2[_15]=_3[_15];continue}
_7.add(_18)}
_2[_15]={};this.$91g(_1,_2[_15],_18,isc.DataSource?isc.DataSource.get(_19.type):null,_8?(_16+isc.Canvas.$70l):null,_6,_7)}else{_2[_15]=_3[_15]}}}else if(isc.isAn.Array(_18)){var _19=_4?_4.getField(_15):null;if(!_19){_2[_15]=_3[_15]}else{var _20=isc.SimpleType.getType(_19.type);if(_20&&_20.duplicate){var _21=[];for(var i=0;i<_2[_15];i<_2[_15].length){_21[i]=_20.duplicate(_2[_15][i])}}else if(_19.deepCloneOnEdit==true||(_19.deepCloneOnEdit==null&&_10))
{if(isc.DataSource&&isc.DataSource.cloneValuesSafely){if(_7.contains(_18)){_2[_15]=_3[_15];continue}
_7.add(_18)}
_2[_15]=[];this.$91g(_1,_2[_15],_18,isc.DataSource?isc.DataSource.get(_19.type):null,_8?(_16+isc.Canvas.$70l):null,_6,_7)}else{_2[_15]=_3[_15]}}}else{_2[_15]=_3[_15]}}},isc.A.evalViewState=function isc_c_Canvas_evalViewState(_1,_2,_3,_4){if(isc.isA.String(_1)){var _5=_1;try{_1=isc.eval(_1)}catch(e){if(!_3){var _6="Unable to parse "+_2+" object passed in: "+isc.Log.echo(_5)+" Ignoring."
if(!_4||_4.logWarn==null){if(_4)_6+=" [target:"+isc.Log.echo(_4)+"]";this.logWarn(_6)}else{_4.logWarn(_6)}}
return}}
return _1},isc.A.getNumberValueAsString=function isc_c_Canvas_getNumberValueAsString(_1,_2,_3,_4){if(!isc.isA.Number(_1)){if(_4){return null}
_1=isc.DataSource.$93o(_3)}
if(!isc.isA.Number(_2)||_2<=0){_2=null}
if(_2!=null){_2=this.$111l(_2,1,21,"precision");return isc.NumberUtil.$109c(_1.toPrecision(_2))}else{return isc.DataSource.$93p(_1,_3)}},isc.A.getFloatValueAsString=function isc_c_Canvas_getFloatValueAsString(_1,_2,_3,_4){if(!isc.isA.Number(_1)){if(_4){return null}
_1=isc.DataSource.$93o("float")}
if(!isc.isA.Number(_2)||_2<0){_2=null}
if(!isc.isA.Number(_3)||_3<0){_3=null}
if(_2!=null&&_3!=null){if(_2<_3){_3=_2}
_2=null}
if(_3!=null){_3=this.$111l(_3,0,20,"decimalPad");return _1.toFixed(_3)}else if(_2!=null){var _5=Math.pow(10,_2);var _6=Math.round(_1*_5)/_5;return isc.DataSource.$93p(_6,"float")}else{return isc.DataSource.$93p(_1,"float")}},isc.A.$111l=function isc_c_Canvas__filterFieldValueAndWarn(_1,_2,_3,_4){var _5;if(_1<_2)_5=_2;else if(_1>_3)_5=_3;else return _1;this.logWarn("Ignoring invalid value "+_1+" for "+_4);return _5});isc.B._maxIndex=isc.C+16;isc.A=isc.Canvas.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.showComplexFields=true;isc.A.exportIncludeSummaries=true;isc.A.ignoreEmptyCriteria=true;isc.A.dragRecategorize="checked";isc.A.duplicateDragMessage="Duplicates not allowed";isc.A.showOfflineMessage=true;isc.A.offlineMessage="This data not available while offline";isc.A.offlineMessageStyle="offlineMessage";isc.A.offlineSaveMessage="Data cannot be saved because you are not online";isc.A.addDropValues=true;isc.A.fieldIdProperty="name";isc.A.dataArity="multiple";isc.A.autoTrackSelection=true;isc.A.$308={date:true,DateItem:true};isc.A.$1007="canEdit";isc.A.canEditTitles=false;isc.A.$301="false;";isc.A.$18r="false";isc.A.styleOpposite="cellHiliteOpposite";isc.A.hiliteIcons=["[SKINIMG]/Dialog/notify.png","[SKINIMG]/Dialog/warn.png","[SKINIMG]/actions/approve.png"];isc.A.hiliteIconPosition="before";isc.A.hiliteIconSize=12;isc.A.hiliteIconLeftPadding=2;isc.A.hiliteIconRightPadding=2;isc.A.hiliteProperty="_hilite";isc.A.hiliteMarker="$63i";isc.A.$578=0;isc.A.$144i="nonSummaryAffecting";isc.A.$144j="simpleSummaryAffecting";isc.A.$144k="summaryDependentSummaryAffecting";isc.A.fieldNamingStrategy="simple";isc.A.fieldNameGenerator={};isc.A.$579=[];isc.A.editHilitesDialogTitle="Edit Highlights";isc.A.hiliteWindowConstructor="Window";isc.A.hiliteWindowDefaults={autoDraw:false,autoParent:"none",height:400,width:875,autoCenter:true,overflow:"visible",canDragResize:true,keepInParentRect:true,isModal:true,showModalMask:true,bodyProperties:{layoutMargin:8,membersMargin:8,overflow:"visible"},closeClick:function(){this.hide()}};isc.A.fieldEditorWindowTitle="${builderType} Editor [${fieldTitle}]";isc.A.fieldEditorWindowConstructor="Window";isc.A.fieldEditorWindowDefaults={keepInParentRect:true,showMinimizeButton:false,showMaximizeButton:false,autoDraw:false,isModal:true,showModalMask:true,width:400,height:400,overflow:"visible",autoCenter:true,bodyProperties:{overflow:"visible"},canDragResize:true,headerIconProperties:{padding:1,src:"[SKINIMG]ListGrid/formula_menuItem.png"},closeClick:function(){this.items.get(0).completeEditing(true);return this.Super('closeClick',arguments)}};isc.A.hiliteEditorConstructor="HiliteEditor";isc.A.hiliteEditorDefaults={autoDraw:false,autoParent:"none",callback:function(_1){var _2=this.creator;if(_1!=null)_2.$1024(_1);_2.hiliteWindow.hide()}};isc.A.dragDataAction=isc.Canvas.MOVE;isc.A.dragTrackerStyle="gridDragTracker";isc.A.canExport=true;isc.A.canPrint=true;isc.A.panelControls=["action:edit","action:editNew","action:sort","action:export","action:print"];isc.A.dbcProperties=["autoFetchData","autoFetchTextMatchStyle","autoFetchAsFilter","dataSource"];isc.A.badFormulaResultValue=".";isc.A.missingSummaryFieldValue="-";isc.A.missingFormulaFieldValue="-";isc.A.canAddFormulaFields=false;isc.A.addFormulaFieldText="Add formula column...";isc.A.editFormulaFieldText="Edit formula...";isc.A.removeFormulaFieldText="Remove formula";isc.A.$132l=0;isc.A.canAddSummaryFields=false;isc.A.addSummaryFieldText="Add summary column...";isc.A.editSummaryFieldText="Edit summary format...";isc.A.removeSummaryFieldText="Remove summary column..";isc.A.includeHilitesInSummaryFields=true;isc.A.exportDataChunkSize=50;isc.A.exportWidthScale=0.12;isc.A.emptyExportMessage="You are attempting to export an empty dataset";isc.A.defaultExportAs="csv";isc.A.defaultExportFilename="export";isc.A.defaultExportDisplay="download";isc.A.unknownErrorMessage="Invalid value";isc.A.$685=["isInteger","isFloat","isBoolean","isString"];isc.A.$746="partial";isc.A.$75a={};isc.A.$75b=null;isc.B.push(isc.A.$122r=function isc_Canvas__resolveEmptyDisplayValue(_1){var _2=_1.emptyCellValue;if(_2==null)_2=_1.emptyDisplayValue;if(_2==null)_2=this.emptyCellValue;return _2},isc.A.setFetchOperation=function isc_Canvas_setFetchOperation(_1){this.fetchOperation=_1;if(this.$114v)this.$114v()},isc.A.setUpdateOperation=function isc_Canvas_setUpdateOperation(_1){this.updateOperation=_1;if(this.$114v)this.$114v()},isc.A.setAddOperation=function isc_Canvas_setAddOperation(_1){this.addOperation=_1;if(this.$114v)this.$114v()},isc.A.setRemoveOperation=function isc_Canvas_setRemoveOperation(_1){this.removeOperation=_1;if(this.$114v)this.$114v()},isc.A.setProgressiveLoading=function isc_Canvas_setProgressiveLoading(_1){this.progressiveLoading=_1;if((isc.ResultSet&&isc.isA.ResultSet(this.data))||(isc.ResultTree&&isc.isA.ResultTree(this.data)))
{this.data.progressiveLoading=_1}},isc.A.setValuesManager=function isc_Canvas_setValuesManager(_1){if(_1)_1.addMember(this)},isc.A.initializeValuesManager=function isc_Canvas_initializeValuesManager(){var _1=this.valuesManager;delete this.valuesManager;if(_1!=null){if(isc.ValuesManager==null){this.logWarn("Widget initialized with specified 'valuesManager' property but ValuesManager class is not loaded. This functionality requires the Forms module.");return}
if(isc.isA.ValuesManager(_1)){_1.addMember(this)}else if(isc.isA.ValuesManager(window[_1])){window[_1].addMember(this)}else if(isc.isA.String(_1)){isc.ValuesManager.create({ID:_1,dataSource:this.dataSource,members:[this]})}else{this.logWarn("Widget initialized with invalid 'valuesManager' property:"+isc.Log.echo(_1)+", clearing this property out")}}},isc.A.setDataPath=function isc_Canvas_setDataPath(_1){this.dataPath=_1;if(this.getFields==null||this.getFields()==null)return;if(_1==null){delete this.$704;if(this.valuesManager&&this.$703){this.valuesManager.removeMember(this);delete this.$703}
return}
var _2;var _3=this;while(_3&&(!_3.valuesManager||_3.$703)&&!_3.dataSource)
{if(_3.dataPath){if(_2){_2=isc.Canvas.$702(_3.dataPath,_2)}else{_2=_3.dataPath}}
_3=_3.parentElement}
this.$704=_2;if(_3){if(_3!=this||!this.dataSource){if(_3.valuesManager==null){_3.createDefaultValuesManager()}
var _4=isc.isA.DynamicForm(this)?this.$834:this.getFields();_4=_4||this.getFields();if(_3.valuesManager.getDataSource()){var _5=_3.valuesManager.getDataSource(),_1=this.$704;if(_1){_5=_5.getDataSourceForDataPath(_1,true)}
this.setDataSource(_5,_4)}
_3.valuesManager.addMember(this,true)}}},isc.A.getFullDataPath=function isc_Canvas_getFullDataPath(){var _1=this.$704||this.dataPath;if(!_1&&this.masterElement){return this.masterElement.$704||this.masterElement.dataPath}
return _1},isc.A.buildFieldDataPath=function isc_Canvas_buildFieldDataPath(_1,_2){var _3=_2.dataPath||_2.name;if(_1!=null){_3=isc.Canvas.$702(_1,_3)}
return!_3?null:_3.replace(/^\/*/,"")},isc.A.createDefaultValuesManager=function isc_Canvas_createDefaultValuesManager(_1){if(!_1)_1=[];_1.add(this);isc.ValuesManager.create({members:_1,ID:this.getID()+"$705",dataSource:this.dataSource})},isc.A.$840=function isc_Canvas__trimDataPath(_1){return isc.Canvas.$840(_1,this)},isc.A.getDataPathField=function isc_Canvas_getDataPathField(_1){if(!_1)return null;var _2;if(this.valuesManager&&this.valuesManager.getDataSource){_2=this.valuesManager.getDataSource()}else if(this.grid&&this.grid.valuesManager&&this.grid.valuesManager.getDataSource){_2=this.grid.valuesManager.getDataSource()}else{_2=this.getDataSource()}
var _3=_1.split(isc.slash),_4;if(!_2)return;for(var i=0;i<_3.length;i++){var _6=_3[i],_7=_2.getField(_6);_2=_7?(_2.getSchema(_7.type)||_2):_2;if(_7==null){this.logWarn("Unable to find dataSource field matching specified dataPath: '"+_1+"'");return}}
return _7},isc.A.registerWithDataView=function isc_Canvas_registerWithDataView(_1){if(!this.inputDataPath)return;_1=this.parentElement;while(_1&&!isc.isA.DataView(_1))_1=_1.parentElement;if(!_1){this.logWarn("Component initialized with an inputDataPath property, but no DataView was found in the parent hierarchy. inputDataPath is only applicable to DataBoundComponents and FormItems being managed by a DataView");return}
_1.registerItem(this)},isc.A.bindToDataSource=function isc_Canvas_bindToDataSource(_1,_2){if(this.dataPath)this.setDataPath(this.dataPath);if(this.dataSource==null&&this.data!=null)this.dataSource=this.data.dataSource;var _3=this.fields||this.items;if(isc.isAn.Array(_3))this.originalFields=_3.duplicate();var _4=this.getDataSource();if(_4==null&&this.valuesManager&&this.valuesManager.getDataSource){_4=this.valuesManager.getDataSource()}
if(_4!=null&&isc.isA.String(_4)){this.logWarn("unable to look up DataSource: "+_4+", databinding will not be used");return _1}
var _5=(_1==null||_1.length==0),_6;if(_4){var _7=this.useFlatFields;if(_7==null)_7=_4.useFlatFields;_6=_7?_4.getFlattenedFields():_4.getFields()}
if(!_5&&isc.Canvas.validateFieldNames){isc.Canvas.$1027(_1,this)}
if(_4==null||_6==null){if(_1!=null&&isc.SimpleType){for(var i=0;i<_1.length;i++){if(_1[i]==null)continue;if(_1[i].type==null&&this.$308[_1[i].editorType]==true)
{_1[i].type="date"}
if(_1[i].type==null){var _9=null;if(_1[i]._constructor&&isc[_1[i]._constructor]){_9=_1[i]._constructor}
if(_1[i].editorType&&isc[_1[i].editorType]){_9=_1[i].editorType}
if(_9&&isc[_9]&&isc[_9].getInstanceProperty){_1[i].type=isc[_9].getInstanceProperty("type")}}
isc.SimpleType.addTypeDefaults(_1[i]);if(_1[i].type){var _10=isc.SimpleType.getType(_1[i].type);if(_10&&_10.fieldProperties){_1[i]=isc.addProperties({},_10.fieldProperties,_1[i])}
if(!_1[i].format&&_10&&_10.format){_1[i].format=_10.format}}}}
this.addFieldValidators(_1);return _1}
if(this.doNotUseDefaultBinding)return[];if(_4!=null&&_5){_1=[];for(var _11 in _6){var _12=_6[_11];if(!this.shouldUseField(_12,_4))continue;var _13=isc.addProperties({},_12)
var _14=this.getDefaultCanEdit(_12);var _15;if(_14===_15){delete _13.canEdit}else{_13.canEdit=_14}
if(_13.hidden)delete _13.hidden;_1.add(_13)}
this.addFieldValidators(_1);return _1}
if(_4!=null&&!_5){var _16={};for(var i=_1.length-1;i>=0;i--){var _12=_1[i];if(_12==null)continue;var _17=(_12.name!=null)?_4.getField(_12.name):null;if(_17&&_17.canView===false){this.logInfo("Dropping explicitly-named field "+_12.name+" because it is marked canView: false");_1.removeAt(i);continue}
if(_12.type==null&&this.$308[_12.editorType]==true){var _18=_12.name;var _17=(_18!=null)?_4.getField(_18):null;if(_17==null||_17.type==null){_12.type="date"}}
if(isc.SimpleType){isc.SimpleType.addTypeDefaults(_1[i]);var _19=_1[i].type;if(_19==null){var _17=(_12.name!=null)?_4.getField(_12.name):null;if(_17)_19=_17.type}
if(_19){var _10=isc.SimpleType.getType(_19);if(_10&&_10.fieldProperties){_1[i]=isc.addProperties({},_10.fieldProperties,_1[i])}}
_12=_1[i]}
if(_17){var _14=_12.canEdit;if(_14==null){_14=this.getDefaultCanEdit(_17)}else{this.logDebug("DataBoundComponent respecting explicit 'canEdit' on target field "+_17.name,"canEditField")}
_16[_12.name]=_14}else if(_12.includeFrom!=null){var _14=_12.canEdit;if((_14==null)&&(this.canEditIncludeFromFields()==false)){_14=false}
_16[_12.includeFrom]=_14}else{_16[_12.name]=_12.canEdit}
if(_12.type!=null){isc.SimpleType.addTypeDefaults(_12)}}
if(this.useAllDataSourceFields||_2){var _20=this;var _21=_4.combineFieldOrders(_6,_1,function(_12,_4,_22){return _20.shouldUseField(_12,_4,_22)});for(var i=0;i<_21.length;i++){var _12=_21[i];if(!_1.containsProperty("name",_12.name)){if(_2&&_12.showIf==null){_12.showIf="return false"}}else{if(_12.includeFrom!=null&&_4.getField(_12.name)==null){this.$785(_12)}}
var _14;if(_1.contains(_12)){_14=_12.includeFrom?_16[_12.includeFrom]:_16[_12.name]}else{_14=this.getDefaultCanEdit(_12)}
var _15;if(_14===_15){delete _12.canEdit}else{_12.canEdit=_14}}
this.addFieldValidators(_21);return _21}else{for(var i=0;i<_1.length;i++){var _12=_1[i];if(!_12)continue;_12=this.combineFieldData(_12);_12.canEdit=_12.includeFrom?_16[_12.includeFrom]:_16[_12.name]}
this.addFieldValidators(_1);return _1}}},isc.A.getDefaultCanEdit=function isc_Canvas_getDefaultCanEdit(_1){var _2=this.canEditFieldAttribute;if(_2==null)_2="canEdit";var _3=_1[_2];if(_3==null){if(_1.canSave==false&&!this.$66m){_3=false}}
this.logDebug("DataBoundComponent using canEditFieldAttribute:"+_2+" setting 'canEdit' to "+_3+" on target field "+_1.name,"canEditField");return _3},isc.A.canEditIncludeFromFields=function isc_Canvas_canEditIncludeFromFields(){var _1=this.canEditFieldAttribute;if(_1==null||_1==this.$1007){return false}
return true},isc.A.combineFieldData=function isc_Canvas_combineFieldData(_1){var _2=this.getDataSource();if(this.getFullDataPath()||_1.dataPath){var _3=this.buildFieldDataPath(this.getFullDataPath(),_1);isc.DataSource.combineFieldData(_1,this.getDataPathField(_3));return _1}else if(_2!=null&&_2.getField(_1.name)){return _2.combineFieldData(_1)}else if(_1.includeFrom!=null){return this.$785(_1)}
return _1},isc.A.$785=function isc_Canvas__combineIncludeFromFieldData(_1){var _2=_1.includeFrom.split(".");if(_2==null||_2.length!=2){this.logWarn("This component includes a field with includeFrom set to:"+_1.includeFrom+". Format not understood.")}else{var _3=isc.DataSource.get(_2[0]),_4=_2[1];if(_3==null){this.logWarn("Field specifies includeFrom:"+_1.includeFrom+". Unable to find dataSource with ID:"+_2[0])}else{if(_1.name==null)_1.name=_4;return _3.combineFieldData(_1,_3.getField(_4))}}},isc.A.shouldUseField=function isc_Canvas_shouldUseField(_1,_2,_3){if(_1.canView===false)return false;if(_2&&!_3&&!this.showHiddenFields){if(_1.hidden)return false}
if(_1.canFilter==false&&this.showFilterFieldsOnly){return false}
if(_1.detail&&!this.showDetailFields)return false;if(!this.showComplexFields&&_2.fieldIsComplexType(_1.name))return false;return true},isc.A.addFieldValidators=function isc_Canvas_addFieldValidators(_1){if(_1==null)return;for(var i=0;i<_1.length;i++){var _3=_1[i];if(_3.validators!=null)_3.validators=_3.validators.duplicate();if(_3.required){var _4=this.getRequiredValidator(_3),_5=_4.errorMessage;if(!_3.validators){_3.validators=[_4]}else{if(!isc.isAn.Array(_3.validators)){_3.validators=[_3.validators]}
if(!_3.validators.containsProperty("type",_4.type)&&!_3.validators.containsProperty("_constructor",_4.type))
{if(_3.validators.$69){_3.validators=_3.validators.duplicate()}
_3.validators.add(_4)}else if(_5!=null){var _6=this.getDataSource(),v=(_3.validators.find("type",_4.type)||_3.validators.find("_constructor",_4.type));if(v.errorMessage==null||(_6&&v.errorMessage==_6.requiredMessage)){v.errorMessage=_5}}}}else if(_3.required==false){var _8=_3.validators;if(_3.validators!=null){var _9=_3.validators.findIndex("type","required");if(_9!=-1){_3.validators.removeAt(_9)}}}
if(_3.multiple&&_3.validateEachItem==null)_3.validateEachItem=true}},isc.A.getRequiredValidator=function isc_Canvas_getRequiredValidator(_1){var _2={type:"required"},_3=_1.requiredMessage||this.requiredMessage;if(_3!=null)_2.errorMessage=_3;return _2},isc.A.getAllFields=function isc_Canvas_getAllFields(){return this.completeFields||this.fields},isc.A.getField=function isc_Canvas_getField(_1){if(!this.fields)return null;return isc.Class.getArrayItem(_1,this.fields,this.fieldIdProperty)},isc.A.getFieldNum=function isc_Canvas_getFieldNum(_1){if(!this.fields)return-1;if(isc.isA.Object(_1)&&(_1[this.fieldIdProperty]!=null)){_1=_1[this.fieldIdProperty]}
return isc.Class.getArrayItemIndex(_1,this.fields,this.fieldIdProperty)},isc.A.isXMLRequired=function isc_Canvas_isXMLRequired(_1){if(!_1||!this.useXMLRequired||!_1.xmlRequired)return false;if(!_1.dataPath)return true;var _2=this.getDataSource();if(!_2)return true;var _3=_1.dataPath.split(isc.slash),_1;for(var i=0;i<_3.length;i++){var _5=_3[i];if(!_2)return true;_1=_2.getField(_5);if(!_1)return true;if(_1.xmlMinOccurs!=null&&_1.xmlMinOccurs<1){return false}
_2=_2.getSchema(_1.type)}
return true},isc.A.evalViewState=function isc_Canvas_evalViewState(_1,_2,_3){return isc.Canvas.evalViewState(_1,_2,_3,this)},isc.A.shouldIncludeTitleInFieldState=function isc_Canvas_shouldIncludeTitleInFieldState(){return this.canEditTitles},isc.A.getFieldState=function isc_Canvas_getFieldState(_1){var _2=this.shouldIncludeTitleInFieldState();var _3=[];var _4=this.getAllFields();if(_4){for(var i=0;i<_4.length;i++){var _6=_4[i];if(!_6||_6.excludeFromState)continue;var _7=_6[this.fieldIdProperty],_8=this.getStateForField(_7,_2);_3.add(_8)}}
if(_1)return _3;return isc.Comm.serialize(_3,false)},isc.A.getStateForField=function isc_Canvas_getStateForField(_1,_2){var _3=this.getAllFields().find(this.fieldIdProperty,_1),_4={name:_1};if(!_3)return null;if(_3.frozen==true)_4.frozen=true;if(!this.fieldShouldBeVisible(_3,this.getFieldNum(_1)))_4.visible=false;if(_3.userFormula){_4.userFormula=_3.userFormula;_4.type=_3.type}
if(_3.userSummary)_4.userSummary=_3.userSummary;if(_2||_3.userSummary||_3.userFormula){_4.title=_3.title}
var _5;if(_3.autoFitWidth!==_5)_4.autoFitWidth=_3.autoFitWidth;if(_3.precision!==_5)_4.precision=_3.precision;if(_3.decimalPrecision!==_5)_4.decimalPrecision=_3.decimalPrecision;if(_3.decimalPad!==_5)_4.decimalPad=_3.decimalPad;if(this.getSpecifiedFieldWidth)_4.width=this.getSpecifiedFieldWidth(_3);return _4},isc.A.$31y=function isc_Canvas__setFieldState(_1,_2){if(_1==null)return this.getAllFields();var _3=this.getAllFields();var _4=_3.getProperty(this.fieldIdProperty),_5=[];for(var i=0;i<_1.length;i++){var _7=_1[i],_8=_3.find(this.fieldIdProperty,_7.name);if(_8==null){if(_7.userFormula||_7.userSummary){_8={};_8[this.fieldIdProperty]=_7.name}else continue}
_4.remove(_7.name);if(_7.visible==false){_8.showIf=this.$18r;_8.hidden=true}else{_8.showIf=null;_8.detail=false;_8.hidden=false}
if(_7.width!=null&&(!isNaN(_7.width)||_7.width=="*"))_8.width=_7.width;_8.frozen=_7.frozen;var _9;if(_7.title)_8.title=_7.title;if(_7.userFormula!=null)_8.userFormula=_7.userFormula;if(_7.userSummary!=null)_8.userSummary=_7.userSummary;if(_7.type!=null)_8.type=_7.type;if(_7.autoFitWidth!==_9&&_7.autoFitWidth!=_8.autoFitWidth)_8.autoFitWidth=_7.autoFitWidth;if(_7.precision!==_9&&_7.precision!=_8.precision)_8.precision=_7.precision;if(_7.decimalPrecision!==_9&&_7.decimalPrecision!=_8.decimalPrecision)_8.decimalPrecision=_7.decimalPrecision;if(_7.decimalPad!==_9&&_7.decimalPad!=_8.decimalPad)_8.decimalPad=_7.decimalPad;_5.add(_8)}
var _10=this.defaultFieldState;if(_10!=null)_10=this.evalViewState(_10,"fieldState");for(var i=0;i<_4.length;i++){var _11=_4[i],_12=_3.findIndex(this.fieldIdProperty,_11),_8=_3[_12],_13=_3[_12-1];var _14=_10?_10.find("name",_11):null;if(_14!=null){var _15=_14.visible==false;if(_15){_8.showIf=this.$18r}else{_8.showIf=null;_8.detail=false}
if(_14.width!=null&&(!isNaN(_14.width)||_14.width=="*"))
{_8.width=_14.width}
_8.frozen=_14.frozen;if(_14.title)_8.title=_14.title;if(_14.userFormula!=null)_8.userFormula=_14.userFormula;if(_14.userSummary!=null)_8.userSummary=_14.userSummary;if(_14.autoFitWidth!=_8.autoFitWidth)_8.autoFitWidth=_14.autoFitWidth}
if(_13!=null){var _16=_5.indexOf(_13);if(_16!=-1){_5.addAt(_8,_16+1);continue}}
if(this.fieldShouldBeVisible(_8,_12)&&!_2){_5.addAt(_8,this.$31z(_5)+1)}else{_5.add(_8)}}
return _5},isc.A.fieldStateChanged=function isc_Canvas_fieldStateChanged(){},isc.A.$31z=function isc_Canvas__lastVisibleFieldIndex(_1){if(_1==null)_1=this.completeFields;var _2=this.getVisibleFields(_1);if(_2.length==0)return-1;return _1.lastIndexOf(_2.last())},isc.A.getVisibleFields=function isc_Canvas_getVisibleFields(_1){var _2=[];for(var i=0;i<_1.length;i++){var _4=_1[i];if(_4==null)continue;if(this.fieldShouldBeVisible(_4,i))_2.add(_4)}
return _2},isc.A.fieldShouldBeVisible=function isc_Canvas_fieldShouldBeVisible(_1,_2){if(_1.showIf!=null){if(_1.showIf==this.$18r||_1.showIf==this.$301)return false;isc.Func.replaceWithMethod(_1,"showIf","list,field,fieldNum");if(!_1.showIf(this,_1,_2))return false}
return true},isc.A.setValueMap=function isc_Canvas_setValueMap(_1,_2){if(!isc.isAn.Object(_1))_1=this.getField(_1);if(!_1)return;_1.valueMap=_2},isc.A.find=function isc_Canvas_find(_1){return this.data.find(_1)},isc.A.findAll=function isc_Canvas_findAll(_1){return this.data.findAll(_1)},isc.A.findIndex=function isc_Canvas_findIndex(_1){return this.data.findIndex(_1)},isc.A.findNextIndex=function isc_Canvas_findNextIndex(_1,_2,_3){return this.data.findNextIndex(_1,_2,null,_3)},isc.A.setDataSource=function isc_Canvas_setDataSource(_1,_2){if(isc.$cv)arguments.$cw=this;this.dataSource=_1||this.dataSource;if(this.setFields)this.setFields(_2);if(this.dataSource){if(this.isA("DynamicForm"))this.setData({});else this.setData([])}
this.markForRedraw("bind")},isc.A.bind=function isc_Canvas_bind(_1,_2){this.setDataSource(_1,_2)},isc.A.getDataSource=function isc_Canvas_getDataSource(){if(isc.isA.String(this.dataSource)){if(this.serviceNamespace||this.serviceName){this.dataSource=this.lookupSchema()}else{var _1=isc.DS.get(this.dataSource);if(_1!=null)return _1;_1=this.getWindow()[this.dataSource];if(_1&&isc.isA.DataSource(_1))return(this.dataSource=_1)}}
return this.dataSource},isc.A.setData=function isc_Canvas_setData(_1){this.data=_1},isc.A.lookupSchema=function isc_Canvas_lookupSchema(){var _1;if(this.serviceName)_1=isc.WebService.getByName(this.serviceName,this.serviceNamespace);else _1=isc.WebService.get(this.serviceNamespace);if((this.serviceNamespace||this.serviceName)&&_1==null){this.logWarn("Could not find WebService definition: "+(this.serviceName?"serviceName: "+this.serviceName:"")+(this.serviceNamespace?"   serviceNamespace: "+this.serviceNamespace:""))}
if(!isc.isA.String(this.dataSource)){this.logWarn("this.dataSource was not a String in lookupSchema");return}
var _2;if(_1)_2=_1.getSchema(this.dataSource);return _2||this.dataSource},isc.A.fieldValuesAreEqual=function isc_Canvas_fieldValuesAreEqual(_1,_2,_3){if(_2==_3)return true;if(_1==null)return false;if(_1.type!=null){if(isc.SimpleType.inheritsFrom(_1.type,"datetime")){if(isc.isA.Date(_2)&&isc.isA.Date(_3)){return(Date.compareDates(_2,_3)==0)}}else if(isc.SimpleType.inheritsFrom(_1.type,"date")){if(isc.isA.Date(_2)&&isc.isA.Date(_3)){return(Date.compareLogicalDates(_2,_3)==0)}}else if(_1.type=="valueMap"){if(isc.isAn.Array(_2)&&isc.isAn.Array(_3)){return _2.equals(_3)}else if(isc.isAn.Object(_2)&&isc.isAn.Object(_3)){for(var i in _2){if(_3[i]!=_2[i])return false}
for(var j in _3){if(_2[j]!=_3[j])return false}
return true}}}
return false},isc.A.setFields=function isc_Canvas_setFields(_1){_1=this.bindToDataSource(_1);this.invalidateUserCache();this.fields=_1},isc.A.getSerializeableFields=function isc_Canvas_getSerializeableFields(_1,_2){_1=_1||[];_1.addList(["zIndex","data"]);if(this.ID&&this.ID.startsWith("isc_"))_1.add("ID");if(this.dataSource)_1.addList(["fields","items"]);if(this.getClassName()!="Canvas"&&this.getClassName()!="Layout"){_1.add("children")}
return this.Super("getSerializeableFields",[_1,_2],arguments)},isc.A.addField=function isc_Canvas_addField(_1,_2,_3){if(_1==null)return;if(_3==null)_3=(this.fields||this.items||isc.$ac);_3=_3.duplicate();var _4=this.getField(_1.name);if(_4)_3.remove(_4);if(_2==null||_2>_3.length)_2=_3.length;_3.addAt(_1,_2);this.setFields(_3)},isc.A.removeField=function isc_Canvas_removeField(_1,_2){if(_2==null)_2=(this.fields||this.items||isc.$ac);_2=_2.duplicate();var _3=_1.name?_1.name:_1;_2.remove(_2.find("name",_3));this.setFields(_2)},isc.A.setCanEdit=function isc_Canvas_setCanEdit(_1){this.canEdit=_1},isc.A.filterData=function isc_Canvas_filterData(_1,_2,_3){this.$wo("filter",_1,_2,_3)},isc.A.fetchData=function isc_Canvas_fetchData(_1,_2,_3){if(!_3)_3={};if(!_3.textMatchStyle)_3.textMatchStyle="exact";this.$wo("fetch",_1,_2,_3)},isc.A.$71s=function isc_Canvas__canExportField(_1){return(this.canExport!=false&&_1.canExport!=false&&!_1.hidden)},isc.A.exportData=function isc_Canvas_exportData(_1,_2){if(!_1)_1={};var _3=this.getSort();if(_3){_1.sortBy=isc.DS.getSortBy(_3)}else if(this.sortField){_1.sortBy=(Array.shouldSortAscending(this.sortDirection)?"":"-")+this.sortField}
if(!_1.textMatchStyle){var _4=this.data.context;if(_4&&_4.textMatchStyle){_1.textMatchStyle=_4.textMatchStyle}}
if(!this.exportAll&&!_1.exportFields){var _5=this.exportFields,_6="",_7=this.getDataSource();if(!_5){_5=[];for(var i=0;i<this.fields.length;i++){var _9=this.fields.get(i),_10=_7?_7.getField(_9.name):null;if(this.$71s(_9)){if(_9.includeFrom||(_10&&_10.includeFrom)){var _11=_9.includeFrom?_9.includeFrom:_10.includeFrom;_6+=_9.name+"!"+_11+",";_5.add(_9.name)}else{_5.add(_9.name)}
if(_9.displayField&&!_9.optionDataSource){_5.add(_9.displayField)}}}}
if(_6.length>1){if(_6.endsWith(",")){_6=_6.substring(0,_6.length-1)}
_1.additionalOutputs=_6}
if(_5&&_5.length>0)_1.exportFields=_5}
var _12=_1.exportFields||this.exportFields||this.fields,_13={},_7=this.getDataSource();for(var i=0;i<_12.length;i++){var _9=_12[i];var _14;if(isc.isA.String(_9)){_14=_9;_9=this.getField(_14);if(!_9&&_7!=null)_9=_7.getField(_14)}
if(_9){_13[_9.name]=this.htmlUnescapeExportFieldTitle(_9.exportTitle||_9.title)}else{_13[_14]=this.htmlUnescapeExportFieldTitle(_14)}}
_1.exportFieldTitles=_13;if(_1.exportRawValues==null){_1.exportRawValues=true}
if(this.headerHeight&&this.exportHeaderHeights){_1.exportHeaderHeight=this.headerHeight}
var _15={};if(this.headerSpans&&_1.exportShowHeaderSpanTitles!==false){_1.exportHeaderSpans=this.prepareHeaderSpansForExport(this.headerSpans,this.getAllFields(),[],_15)}
if(this.exportFieldWidths&&isc.isAn.Array(this.fields)&&this.getFieldWidth){_1.exportFieldPixelWidths=this.getFieldPixelWidths();_1.exportWidthScale=this.exportWidthScale}
if(_1.exportWrapHeaderTitles==null){_1.exportWrapHeaderTitles=this.exportWrapHeaderTitles}
if(this.exportFieldAlignments&&isc.isAn.Array(this.fields)){_1.exportAlignments=this.getFieldAlignments()}
this.getDataSource().exportData(this.getCriteria(),_1,_2,this)},isc.A.getFieldPixelWidths=function isc_Canvas_getFieldPixelWidths(){var _1=[];for(var i=0;i<this.fields.length;i++){if(this.fields[i].exportFieldWidth===false){_1[i]=-1}else{_1[i]=this.getFieldWidth(i)}}
return _1},isc.A.getFieldAlignments=function isc_Canvas_getFieldAlignments(){var _1=[];for(var i=0;i<this.fields.length;i++){_1[i]=[]
var _3=this.fields[i],_4=isc.SimpleType.getBaseType(_3.type);if(_3.align){_1[i][0]=_3.align}else if(_4=="integer"||_4=="float"||_4=="date"||_4=="time"){_1[i][0]="right"}else{_1[i][0]="left"}
if(_3.cellAlign){_1[i][1]=_3.cellAlign}else{_1[i][1]=_1[i][0]}}
return _1},isc.A.setCriteria=function isc_Canvas_setCriteria(_1){if(this.data&&this.data.setCriteria)this.data.setCriteria(_1);else this.initialCriteria=_1},isc.A.getCriteria=function isc_Canvas_getCriteria(){if(!this.isDrawn()&&(!this.data||this.data.getLength()==0)){return isc.shallowClone(this.initialCriteria)}
else if(this.data&&this.data.getCriteria){if(isc.isA.Tree(this.data)){return isc.shallowClone(this.data.getCriteria(this.getDataSource()))}else{return isc.shallowClone(this.data.getCriteria())}}else return null},isc.A.doInitialFetch=function isc_Canvas_doInitialFetch(){var _1=false;if(this.autoFetchData&&!this.$p7&&this.fetchData){if(!this.dataSource){this.logWarn("autoFetchData is set, but no dataSource is specified, can't fetch")}else{_1=!isc.RPCManager.startQueue();this.fetchData(this.getInitialCriteria(),null,this.getInitialFetchContext());this.$p7=true}}
return _1},isc.A.getInitialCriteria=function isc_Canvas_getInitialCriteria(){return this.initialCriteria},isc.A.getInitialFetchContext=function isc_Canvas_getInitialFetchContext(){var _1={};_1.textMatchStyle=this.autoFetchTextMatchStyle;return _1},isc.A.fetchRelatedData=function isc_Canvas_fetchRelatedData(_1,_2,_3,_4){var _5=isc.isA.DataSource(_2)?_2:isc.isA.String(_2)?isc.DS.get(_2):isc.isA.Canvas(_2)?_2.dataSource:null;if(!_5){this.logWarn("schema not understood: "+this.echoLeaf(_2));return}
var _6=this.getDataSource().getTreeRelationship(_5);var _7={};_7[_6.parentIdField]=_1[_6.idField];this.fetchData(_7,_3,_4)},isc.A.clearCriteria=function isc_Canvas_clearCriteria(_1,_2){this.$wo("filter",null,_1,_2)},isc.A.$wo=function isc_Canvas__filter(_1,_2,_3,_4){if(isc.$cv)arguments.$cw=this;if(_4==null&&isc.isAn.Object(_3)&&_3.methodName==null)
{_4=_3;_3=null}
_4=this.buildRequest(_4,_1,_3);if(this.onFetchData!=null){this.onFetchData(_2,_4)}
var _5=this.getAllFields();if(_5!=null){for(var i=0;i<_5.length;i++){if(_5[i].includeFrom!=null&&this.getDataSource().getField(_5[i].name)==null)
{if(_4.additionalOutputs==null)_4.additionalOutputs="";else _4.additionalOutputs+=",";_4.additionalOutputs+=[_5[i].name,_5[i].includeFrom].join("!")}}}
if(_2==null){_2={}}else if(isc.isA.Class(_2)){_2=isc.DynamicForm.getFilterCriteria(_2)}
this.filterWithCriteria(_2,_4.operation,_4)},isc.A.filterWithCriteria=function isc_Canvas_filterWithCriteria(_1,_2,_3){_3.prompt=(_3.prompt||isc.RPCManager.fetchDataPrompt);var _4=_1;if(this.ignoreEmptyCriteria){_4=isc.DataSource.filterCriteriaForFormValues(_1)}else{_4=isc.addProperties({},_4)}
_4=isc.DS.checkEmptyCriteria(_4);var _5=this.getData();if(this.useExistingDataModel(_1,_2,_3)){var _6=this.updateDataModel(_4,_2,_3);if(_6!=null)_5=_6}else{_5=this.createDataModel(_4,_2,_3)}
this.setData(_5);var _7=this.data;if(!_3.$326&&this.requestVisibleRows!=null&&_7!=null){var _8=_7.fetchDelay;_7.fetchDelay=0;this.requestVisibleRows();_7.fetchDelay=_8}});isc.evalBoundary;isc.B.push(isc.A.shouldFilterLocalData=function isc_Canvas_shouldFilterLocalData(){if(this.filterLocalData!=null){return this.filterLocalData}else{return this.dataPath!=null}},isc.A.useExistingDataModel=function isc_Canvas_useExistingDataModel(_1,_2,_3){var _4=this.getData();if(!this.dataObjectSupportsFilter(_4)){_4=this.originalData;if(_4==null)return false;if(!this.dataObjectSupportsFilter(_4)){return false}}
var _5=_4.getOperationId("fetch");var _6;if(isc.isA.String(_2))_6=_2;else if(_2)_6=_2.ID;if(_6==null){var _7=_4.getDataSource(),_8=_7?_7.ID:null,_9=_2?_2.type:null;if(_9==null)_9="fetch";if(_8!=null)_6=_8+"_"+_9}
return _5==null||_5==_6},isc.A.createDataModel=function isc_Canvas_createDataModel(_1,_2,_3){if(this.logIsInfoEnabled("ResultSet")){this.logInfo("Creating new isc.ResultSet for operation '"+_2.ID+"' with filterValues: "+this.echoFull(_1),"ResultSet")}
var _4=this.getDataSource();if(!isc.isA.DataSource(_4)){this.logWarn("No DataSource or invalid DataSource specified, can't create data model"+this.getStackTrace());return null}
var _5=this.dataProperties||{};if(_5.context)_3=isc.addProperties({},_5.context,_3);if(this.dataFetchDelay)_5.fetchDelay=this.dataFetchDelay;isc.addProperties(_5,{operation:_2,filter:_1,context:_3,componentId:this.ID});if(this.progressiveLoading===true||this.progressiveLoading===false){isc.addProperties(_5,{progressiveLoading:this.progressiveLoading})}
if(this.getSort!=null){var _6=this.getSort();if(_6!=null&&_6.length>0){_5.$73p=_6;_5.$39x=isc.DS.getSortBy(_5.$73p)}}
if(this.shouldFilterLocalData()){var _7=this.$900!=null?this.$900:this.data;if(isc.isAn.Array(_7)){_5.allRows=_7;_5.fetchMode="local";_5.useClientFiltering=true;_5.useClientSorting=true;_5.disableCacheSync=true;_5.neverDropCache=true}else{isc.logWarn("createDataModel method: data should be an array.")}}
return _4.getResultSet(_5)},isc.A.updateDataModel=function isc_Canvas_updateDataModel(_1,_2,_3){if(this.logIsDebugEnabled()){this.logDebug("Setting filter to: "+this.echoFull(_1))}
var _4=this.getData();if(!this.dataObjectSupportsFilter(_4))_4=this.originalData;if(!this.dataObjectSupportsFilter(_4)){return}
_4.setContext(_3);if(!_4.willFetchData(_1))delete _3.afterFlowCallback;_4.setCriteria(_1);return _4},isc.A.dataObjectSupportsFilter=function isc_Canvas_dataObjectSupportsFilter(_1){return(isc.ResultSet&&isc.isA.ResultSet(_1))||(isc.ResultTree&&isc.isA.ResultTree(_1))},isc.A.requestVisibleRows=function isc_Canvas_requestVisibleRows(){return this.data.get(0)},isc.A.getDataAsList=function isc_Canvas_getDataAsList(){var _1=this.getData?this.getData():this.data;if(_1==null)return null;if(!isc.isA.List(_1))_1=[_1];return _1},isc.A.invalidateCache=function isc_Canvas_invalidateCache(){if(this.data&&this.data.invalidateCache!=null)return this.data.invalidateCache();else if(this.isGrouped&&isc.isA.ResultSet(this.originalData)){this.originalData.invalidateCache();this.regroup()}},isc.A.willFetchData=function isc_Canvas_willFetchData(_1,_2){var _3=this.data;if(_3&&_3.willFetchData==null&&this.originalData!=null)_3=this.orginalData;if(_3&&_3.willFetchData!=null){return _3.willFetchData(_1,_2)}
return!this.shouldFilterLocalData()},isc.A.findByKey=function isc_Canvas_findByKey(_1){if(isc.isA.ResultSet(this.data))return this.data.findByKey(_1);else if(isc.isA.Tree(this.data))return this.data.findById(_1);else return null},isc.A.shouldSaveLocally=function isc_Canvas_shouldSaveLocally(){return(!this.dataSource||this.getFullDataPath()!=null||this.saveLocally||this.shouldFilterLocalData())},isc.A.addData=function isc_Canvas_addData(_1,_2,_3){return this.$wp("add",_1,_2,_3)},isc.A.updateData=function isc_Canvas_updateData(_1,_2,_3){return this.$wp("update",_1,_2,_3)},isc.A.removeData=function isc_Canvas_removeData(_1,_2,_3){return this.$wp("remove",_1,_2,_3)},isc.A.$wp=function isc_Canvas__performDSOperation(_1,_2,_3,_4){if(isc.$cv)arguments.$cw=this;if(_4==null&&isc.isAn.Object(_3)&&_3.methodName==null)
{_4=_3;_3=null}
if(this.shouldSaveLocally()||this.getDataSource()==null){return this.$117j(_1,_2)}
_4=this.buildRequest(_4,_1);return this.getDataSource().performDSOperation(_1,_2,_3,_4)},isc.A.$117j=function isc_Canvas__performDSOperationInner(_1,_2){if(_1=="update"){var _3=this.getDataSource();if(!_3){isc.logWarn("Update by primary key cannot be performed without a DataSource.Modify the record directly instead");return}
var _4=this.data.get(_3.findByKeys(_2,this.data));isc.addProperties(_4,_2);return this.data.dataChanged()}else if(_1=="add"){if(this.originalData){this.originalData.add(_2);this.dataChanged("add",null,null,_2)}else{if(isc.isA.Tree(this.data)){var _5=this.data.getParent(_2)||this.data.getRoot();this.data.add(_2,_5)}else if(isc.ResultSet&&isc.isA.ResultSet(this.data)){if(this.data.allRows!=null){this.data.allRows.add(_2);this.data.filterLocalData()}else{isc.logWarn("Unable to add data to resultSet - allRows is not set")}}else{this.data.add(_2)}}
return}else if(_1=="remove"){if(this.originalData){this.originalData.remove(_2);this.dataChanged("remove",null,null,_2)}else{if(isc.ResultSet&&isc.isA.ResultSet(this.data)){if(this.data.allRows!=null){this.data.allRows.remove(_2);this.data.filterLocalData()}else{isc.logWarn("Unable to remove data from resultSet - allRows is not set")}}else{this.data.remove(_2)}}
return}},isc.A.removeSelectedData=function isc_Canvas_removeSelectedData(_1,_2){if(_2==null&&isc.isAn.Object(_1)&&_1.methodName==null)
{_2=_1;_1=null}
var _3=this.getSelection();if(isc.isA.ListGrid(this)&&this.canEdit&&this.selectOnEdit&&(_3==null||_3.length==0)&&this.getEditRow()!=null&&this.getRecord(this.getEditRow())==null)
{this.discardEdits(this.getEditRow());return}
if(this.dataSource==null||this.shouldSaveLocally()){if(this.data){if(isc.ResultSet&&isc.isA.ResultSet(this.data)&&this.shouldSaveLocally()){if(this.data.allRows!=null){this.data.allRows.removeList(this.getSelection());this.data.filterLocalData()}else{isc.logWarn("Unable to remove data from resultSet - allRows is not set")}}else{this.data.removeList(this.getSelection())}
if(_1)this.fireCallback(_1)}
return}
var _4=this.buildRequest(_2,"remove",_1),_5=this.getDataSource();if(_3.length>0)this.deleteRecords(_3,_4.operation,_4,_5)},isc.A.deleteRecords=function isc_Canvas_deleteRecords(_1,_2,_3,_4){isc.addProperties(_3,{prompt:(_3.prompt||isc.RPCManager.removeDataPrompt)});var _5=isc.RPCManager.startQueue();if(!isc.isAn.Array(_1))_1=[_1];for(var i=0;i<_1.length;i++){if(_1[i].$52e)continue;_4.performDSOperation(_2.type,_1[i],null,_3)}
if(!_5)isc.RPCManager.sendQueue()},isc.A.createSelectionModel=function isc_Canvas_createSelectionModel(_1){if(this.selection)this.destroySelectionModel();if(this.canSelectCells&&this.cellDataModel){var _2=[];if(this.numRows!=null){for(var i=0;i<this.numRows;i++){_2[i]={}}}}else{var _2=this.data}
var _4,_5={ID:this.getID()+"_selection",data:_2,target:this,selectionProperty:this.selectionProperty,simpleDeselect:this.simpleDeselect,dragSelection:this.canDragSelect};if(this.canSelectCells&&this.fields!=null)_5.numCols=this.fields.length;if(!this.canSelectCells){isc.addProperties(_5,{reselectOnUpdate:this.reselectOnUpdate,performReselectOnUpdate:function(_6){if(this.target&&this.target.performReselectOnUpdate){this.target.performReselectOnUpdate(_6)}else{this.Super("performReselectOnUpdate",arguments)}}})}
if(this.recordEnabledProperty!=null)_5.enabledProperty=this.recordEnabledProperty;if(this.recordCanSelectProperty!=null)_5.canSelectProperty=this.recordCanSelectProperty;if(this.cascadeSelection!=null)_5.cascadeSelection=this.cascadeSelection;if(this.data.getNewSelection){_4=this.data.getNewSelection(_5)}
if(_4==null){if(this.canSelectCells){if(this.cellRecordMode)_5.cellRecordMode=this.cellRecordMode;_4=isc.CellSelection.create(_5)}else{_4=isc.Selection.create(_5)}}
this.selection=_4},isc.A.destroySelectionModel=function isc_Canvas_destroySelectionModel(){if(!this.selection)return;if(this.selection.destroy)this.selection.destroy();delete this.selection},isc.A.removeSelectionMarkers=function isc_Canvas_removeSelectionMarkers(_1){var _2=true;if(!isc.isAn.Array(_1)){_1=[_1];_2=false}
_1.clearProperty(this.selectionProperty||this.selection?this.selection.selectionProperty:null);return _2?_1:_1[0]},isc.A.getSelection=function isc_Canvas_getSelection(_1){if(!this.selection)return null;if(this.canSelectCells){return this.selection.getSelection()}else{return this.selection.getSelection(_1)}},isc.A.getSelectedRecords=function isc_Canvas_getSelectedRecords(_1){return this.getSelection(_1)},isc.A.getSelectedRecord=function isc_Canvas_getSelectedRecord(){if(!this.selection)return null;return this.selection.getSelectedRecord()},isc.A.getSelectionObject=function isc_Canvas_getSelectionObject(){return this.selection},isc.A.isSelected=function isc_Canvas_isSelected(_1){if(!_1||!this.selection)return false;return this.selection.isSelected(_1)},isc.A.isPartiallySelected=function isc_Canvas_isPartiallySelected(_1){if(!_1||!this.selection)return false;return this.selection.isPartiallySelected(_1)},isc.A.selectRecord=function isc_Canvas_selectRecord(_1,_2,_3){this.selectRecords(_1,_2,_3)},isc.A.selectSingleRecord=function isc_Canvas_selectSingleRecord(_1){this.selection.deselectAll();this.selectRecord(_1)},isc.A.deselectRecord=function isc_Canvas_deselectRecord(_1,_2){this.selectRecord(_1,false,_2)},isc.A.selectRecords=function isc_Canvas_selectRecords(_1,_2,_3){if(_2==null)_2=true;if(!isc.isAn.Array(_1))_1=[_1];if(isc.isA.ResultSet(this.data)&&!this.data.lengthIsKnown()){this.logWarn("ignoring attempt to select records while data is loading");return}
for(var i=0;i<_1.length;i++){if(_1[i]==null)continue;if(isc.isA.Number(_1[i])){var _5=_1[i];_1[i]=this.getRecord(_5,_3)}}
var _6=this.getSelectionObject(_3);if(_6){_6.selectList(_1,_2,_3);this.fireSelectionUpdated()}},isc.A.deselectRecords=function isc_Canvas_deselectRecords(_1,_2){this.selectRecords(_1,false,_2)},isc.A.selectAllRecords=function isc_Canvas_selectAllRecords(){this.selection.selectAll();this.fireSelectionUpdated()},isc.A.deselectAllRecords=function isc_Canvas_deselectAllRecords(){this.selection.deselectAll();this.fireSelectionUpdated()},isc.A.selectRange=function isc_Canvas_selectRange(_1,_2,_3){this.selection.selectRange(_1,_2,_3);this.fireSelectionUpdated()},isc.A.deselectRange=function isc_Canvas_deselectRange(_1,_2){this.selection.selectRange(_1,_2);this.fireSelectionUpdated()},isc.A.anySelected=function isc_Canvas_anySelected(){return this.selection&&this.selection.anySelected()},isc.A.getSelectionLength=function isc_Canvas_getSelectionLength(){return this.selection?this.selection.getLength():0},isc.A.getRecord=function isc_Canvas_getRecord(_1,_2){var _3=isc.isA.List(this.data)||isc.isA.ResultSet(this.data);return _3?this.data.get(_1):this.data},isc.A.fireSelectionUpdated=function isc_Canvas_fireSelectionUpdated(){if(this.selectionUpdated){var _1=this.getSelection(),_2=(_1&&_1.length>0?_1[0]:null);this.selectionUpdated(_2,_1)}},isc.A.getHiliteIconLeftPadding=function isc_Canvas_getHiliteIconLeftPadding(_1){return(_1.hiliteIconLeftPadding!=null?_1.hiliteIconLeftPadding:this.hiliteIconLeftPadding||0)},isc.A.getHiliteIconRightPadding=function isc_Canvas_getHiliteIconRightPadding(_1){return(_1.hiliteIconRightPadding!=null?_1.hiliteIconRightPadding:this.hiliteIconRightPadding||0)},isc.A.getHiliteIconWidth=function isc_Canvas_getHiliteIconWidth(_1){return(_1.hiliteIconWidth!=null?_1.hiliteIconWidth:(_1.hiliteIconSize!=null?_1.hiliteIconSize:(this.hiliteIconWidth!=null?this.hiliteIconWidth:this.hiliteIconSize)))},isc.A.getHiliteIconHeight=function isc_Canvas_getHiliteIconHeight(_1){return(_1.hiliteIconHeight!=null?_1.hiliteIconHeight:(_1.hiliteIconSize!=null?_1.hiliteIconSize:(this.hiliteIconHeight!=null?this.hiliteIconHeight:this.hiliteIconSize)))},isc.A.getHiliteIconPosition=function isc_Canvas_getHiliteIconPosition(_1){return _1.hiliteIconPosition!=null?_1.hiliteIconPosition:this.hiliteIconPosition},isc.A.getHiliteIconHTML=function isc_Canvas_getHiliteIconHTML(_1,_2){var _3=_2.imageURLPrefix,_4=this.getHiliteIconWidth(_2),_5=this.getHiliteIconHeight(_2),_6=this.getHiliteIconLeftPadding(_2),_7=this.getHiliteIconRightPadding(_2);var _8=isc.Canvas.$xq(_1,_3,_4,_5,_6,_7,null,this);return _8},isc.A.getHilites=function isc_Canvas_getHilites(){return this.hilites},isc.A.setHilites=function isc_Canvas_setHilites(_1){this.hilites=_1;this.$63j(this.hilites)},isc.A.getHiliteState=function isc_Canvas_getHiliteState(_1){var _2=this.getHilites();if(_2==null)return null;if(_1)return _2;return"("+isc.JSON.encode(_2,{dateFormat:"logicalDateConstructor",prettyPrint:false})+")"},isc.A.setHiliteState=function isc_Canvas_setHiliteState(_1){if(_1==null)this.setHilites(null);var _2=eval(_1);this.setHilites(_2)},isc.A.$63j=function isc_Canvas__setupHilites(_1,_2){if(_1!=null){this.$63k=this.$63k||0;var _3={},_4=[];for(var i=0;i<_1.length;i++){var _6=_1[i].id;if(_6!=null){if(_3[_6]){this.logWarn("This component has more than one hilite object with the same specified id:"+_6+". Hilite IDs must be unique within a component.","hiliting")}else{_3[_6]=true;var _7=parseInt(_6);if(_6==_7){this.$63k=Math.max(this.$63k,(_7+1))}}}else{_4.add(_1[i])}}
for(var i=0;i<_4.length;i++){_4[i].id=this.$63k++}
this.$58b=_1.makeIndex("id",-1)}
if(!_2)this.applyHilites()},isc.A.$144l=function isc_Canvas__storeFormulaFieldValues(_1,_2,_3,_4){for(var j=0;j<_1.length;j++){var _6=_1[j];for(var i=0;i<_2.length;i++){var _8=_2[i],_9=_8[this.fieldIdProperty];if(this.shouldApplyUserFormulaAfterSummary(_8)&&this.shouldShowUserFormula(_8,_6))
{if(!_3||!_6.$52e){this.storeFormulaFieldValue(_8,_6)}
if(j==0){delete _4[_9]}}}
for(var _10 in _4){delete _6[_10]}}
for(var _10 in _4){delete this.$120o[_10]}},isc.A.$144m=function isc_Canvas__storeSummaryFieldValues(_1,_2,_3,_4){for(var j=0;j<_1.length;j++){var _6=_1[j];for(var i=0;i<_2.length;i++){var _8=_2[i],_9=_8[this.fieldIdProperty];if(_8.userSummary){if(!_3||!_6.$52e){this.storeSummaryFieldValue(_8,_6)}
if(j==0){delete _4[_9]}}}
for(var _10 in _4){delete _6[_10]}}
for(var _10 in _4){delete this.$120n[_10]}},isc.A.$144n=function isc_Canvas__partitionSummaryHiliteRules(_1,_2){var _3={nonSummaryAffecting:[],simpleSummaryAffecting:[],summaryDependentSummaryAffecting:[]};if(_1==null||this.fields==null)return _3;var _4=this,_5=this.$134o();for(var i=0;i<_1.length;i++){var _7=this.getHilite(_1[i]);if(!_7||_7.disabled)continue;var _8=_7.fieldName||(this.fields?this.fields.getProperty("name"):[]);if(!isc.isAn.Array(_8))_8=[_8];var _9=isc.DataSource?isc.DataSource.getCriteriaFields(_7.criteria,this.dataSource):null;if(_9)_9=_9.filter(function(_10){var _10=_4.getField(_10);return _10&&_10.userSummary!=null});var _11=this.$144i;for(var j=0;j<_8.length;j++){var _13=_5[_8[j]]||{};for(var _14 in _13){var _15=_13[_14];if(_15.userSummary==null||!this.shouldIncludeHiliteInSummaryField(_14,_8[j]))
{continue}
if(_11==this.$144i){_11=this.$144j}
if(!_9||_9.length>0){_11=this.$144k;_2[_14]=_15}}}
_3[_11].push(_7)}
return _3},isc.A.applyHilites=function isc_Canvas_applyHilites(_1){var _2=this.hilites,_3=this.data;if(_2&&!this.$58b)this.$63j(_2,true);if(isc.isA.ResultSet(_3))_3=_3.getAllLoadedRows();if(isc.isA.Tree(_3))_3=_3.getAllItems();_3.setProperty(this.hiliteMarker,null);var _4=this.getAllFields();if(_4==null)_4=[];var _5=this.isGrouped&&!this.showGroupSummaryInHeader;var _6=isc.addProperties({},this.$120o);this.$144l(_3,_4,_5,_6);var _7=this,_8={},_9=function(_12){_7.applyHilite(_12,_3)},_10=this.$144n(_2,_8);_10.simpleSummaryAffecting.map(_9);var _11=isc.addProperties({},this.$120n);this.$144m(_3,_4,_5,_11);_10.nonSummaryAffecting.map(_9);if(_10.summaryDependentSummaryAffecting.length>0){_10.summaryDependentSummaryAffecting.map(_9);this.invalidateUserCache(null,isc.getValues(_8));this.$144m(_3,_4,_5,{})}
if(!_1)this.redrawHilites()},isc.A.storeFormulaFieldValue=function isc_Canvas_storeFormulaFieldValue(_1,_2){var _3=_1[this.fieldIdProperty];if(this.$120o==null)this.$120o={};if(!this.$120o[_3])this.$120o[_3]=true;this.getFormulaFieldValue(_1,_2)},isc.A.storeSummaryFieldValue=function isc_Canvas_storeSummaryFieldValue(_1,_2){var _3=_1[this.fieldIdProperty];if(this.$120n==null)this.$120n={};if(!this.$120n[_3])this.$120n[_3]=true;this.getSummaryFieldValue(_1,_2)},isc.A.getHilite=function isc_Canvas_getHilite(_1){if(isc.isAn.Object(_1))return _1;if(this.hilites==null)return null;if(!this.$58b&&this.hilites){this.$63j(this.hilites)}
var _2=this.$58b[_1];if(_2==null)_2=this.hilites[_1];return _2},isc.A.applyHilite=function isc_Canvas_applyHilite(_1,_2,_3){var _4=this.getRecordsMatchingHilite(_1,_2);if(_4==null||_4.length==0)return;_1=this.getHilite(_1);var _3=_3||_1.fieldName;if(_3==null)_3=this.fields?this.fields.getProperty("name"):[];var _5=isc.isAn.Array(_3)?_3:[_3];if(this.logIsDebugEnabled("hiliting")){this.logDebug("applying hilite: "+this.echo(_1)+", to fields: "+_5,"hiliting")}
for(var j=0;j<_5.length;j++){var _7=this.getField(_5[j]);for(var i=0;i<_4.length;i++){var _9=_4[i];this.hiliteRecord(_9,_7,_1)}}},isc.A.getRecordsMatchingHilite=function isc_Canvas_getRecordsMatchingHilite(_1,_2){_1=this.getHilite(_1);if(!_1.criteria)return;if(_1.disabled)return;var _3=[],_4=this.getDataSource();if(_4){var _5=_4.dropUnknownCriteria;var _6=_4.strictSQLFiltering;_4.dropUnknownCriteria=false;var _7;if(this.strictSQLFilteringForHilites!==_7)_4.strictSQLFiltering=this.strictSQLFilteringForHilites;_3=this.getDataSource().applyFilter(_2,_1.criteria);_4.dropUnknownCriteria=_5;if(this.strictSQLFilteringForHilites!==_7)_4.strictSQLFiltering=_6}else{_3=this.unboundApplyFilter(_2,_1.criteria)}
if(this.logIsDebugEnabled("hiliting")){this.logDebug("applying filter: "+this.echoFull(_1.criteria)+", produced matches: "+isc.echoLeaf(_3),"hiliting")}
return _3},isc.A.unboundApplyFilter=function isc_Canvas_unboundApplyFilter(_1,_2){var _3=[];if(_1){if(_2){for(var _4=0;_4<_1.length;_4++){if(!_2.operator||this.evaluateCriterion(_1[_4],_2)){_3.add(_1[_4])}}}else{_3=_1}}
return _3},isc.A.evaluateCriterion=function isc_Canvas_evaluateCriterion(_1,_2){var _3=isc.DataSource.$57z[_2.operator];if(_3==null){isc.logWarn("Attempted to use unknown operator "+_2.operator);return false}
var _4=this.getDataSource();var _5=this.getField(_2.fieldName);var _6=isc.DataSource.getPathValue(_1,_2.fieldName,_5);var _7=_5&&(isc.SimpleType.inheritsFrom(_5.type,"date")||isc.SimpleType.inheritsFrom(_5.type,"datetime"));var _8=function(_12){if(_7&&!isc.isA.Date(_12)&&isc.DateUtil.isRelativeDate(_12)){return isc.DateUtil.getAbsoluteDate(_12)}
return _12}
var _9={value:_8(_2.value),start:_8(_2.start),end:_8(_2.end)};if(_3.valueType==="fieldName"){var _10=this.getField(_9.value);var _11=isc.DataSource.getPathValue(_1,_9.value,_10);_9.otherValue=_8(_11)}else if(_3.valueType==="criteria"){_9.criterion=_2;_9.record=_1}
return _3.condition(_2.fieldName,_6,_9,_4||this,_7)},isc.A.compareValues=function isc_Canvas_compareValues(_1,_2,_3,_4){if(isc.isA.Date(_1)&&isc.isA.Date(_2)){if(_1.logicalDate||_2.logicalDate){return Date.compareLogicalDates(_1,_2)}else{return Date.compareDates(_1,_2)}}else{var _5=_4&&_1.toLowerCase?_1.toLowerCase():_1,_6=_4&&_2.toLowerCase?_2.toLowerCase():_2;if(_5==null&&_6!=null)return 1;if(_5!=null&&_6==null)return-1;return _5>_6?-1:(_5<_6?1:(_5==_6?0:2))}},isc.A.hiliteRecord=function isc_Canvas_hiliteRecord(_1,_2,_3){if(!_2)return;var _4=_1[this.hiliteMarker];if(_4==null)_4=_1[this.hiliteMarker]=this.$578++;var _5=_2.$58c=_2.$58c||{},_6=_5[_4];if(_6==null)_5[_4]=_3.id;else if(isc.isAn.Array(_6))_6.add(_3.id);else _5[_4]=[_6,_3.id]},isc.A.getHiliteCSSText=function isc_Canvas_getHiliteCSSText(_1){var _1=this.getHilite(_1);if(_1==null)return;var _2=_1.cssText||"";if(_2==""){if(_1.textColor)_2+="color:"+_1.textColor+";";if(_1.backgroundColor)_2+="background-color:"+_1.backgroundColor+";";if(_2=="")_2==null}
return _2||_1.style},isc.A.addHiliteCSSText=function isc_Canvas_addHiliteCSSText(_1,_2,_3){if(!_1)return _3;var _4=_1[this.hiliteMarker],_2=this.getField(_2);if(!_2||!_2.$58c)return _3;var _5=_2.$58c[_4];if(_5==null)return _3;if(!isc.isAn.Array(_5)){this.$579[0]=_5;_5=this.$579}
for(var i=0;i<_5.length;i++){var _7=this.getHiliteCSSText(_5[i]);if(_7!=null){_3=_3?_3+isc.semi+_7:_7}}
return _3},isc.A.addObjectHilites=function isc_Canvas_addObjectHilites(_1,_2,_3){if(!this.hilites||!_1)return _2;var _4;if(!isc.isAn.Array(_1)){this.$579[0]=_1;_4=this.$579}
if(_4&&_4.length>0){for(var i=0;i<_4.length;i++){var _6,_7,_8;var _9=_4[i];if(isc.isA.String(_9))_6=_9;else _6=(_9!=null?_9[this.hiliteProperty]:null);_7=this.getHilite(_6);if(_7!=null&&!_7.disabled){_8=_7.cssText||_7.style;var _10=[];if(_7)
_10=isc.isAn.Array(_7.fieldName)?_7.fieldName:[_7.fieldName];var _11=(!_7.fieldName||!_3||_10.contains(_3.name));if(_8!=null&&_8!=isc.emptyString&&_11){if(_2==null)_2=_8;else _2+=isc.semi+_8}}}}
return _2},isc.A.getFieldHilites=function isc_Canvas_getFieldHilites(_1,_2){if(!_1||!_2)return null;if(_1[this.hiliteProperty]!=null){var _3=this.getHilite(_1[this.hiliteProperty]),_4;if(_3)
_4=isc.isAn.Array(_3.fieldName)?_3.fieldName:[_3.fieldName];if(_4&&_4.contains(_2.name))return[_3];else return null}
if(_1[this.hiliteMarker]!=null){var _5=_1[this.hiliteMarker];if(!_2.$58c)return null;else return _2.$58c[_5]}},isc.A.applyHiliteHTML=function isc_Canvas_applyHiliteHTML(_1,_2){if(!this.hilites)return _2;var _3,_4,_5;if(!isc.isAn.Array(_1)){this.$579[0]=_1;_1=this.$579}
for(var i=0;i<_1.length;i++){_5=_1[i];_3=this.getHilite(_5);if(_3!=null){if(_3.htmlValue!=null)_2=_3.htmlValue;if(!_3.disabled){if(_3.replacementValue){_2=_3.replacementValue}
_4=_3.htmlBefore;if(_4!=null&&_4.length>0){_2=_4+_2}
_4=_3.htmlAfter;if(_4!=null&&_4.length>0){_2=_2+_4}
var _7=_3.htmlOpposite,_8=_3.styleOpposite||this.styleOpposite;if(_7){if(!isc.Browser.isIE){_2="<nobr><div class='"+_8+"' style='float:left'>&nbsp;"+_7+"&nbsp;</div>"+_2+"</nobr>"}else{_2="<nobr><table role='presentation' align=left><tr><td class='"+_8+"'>"+_7+"</td></tr></table>"+_2+"</nobr>"}}}}}
return _2},isc.A.applyHiliteIcon=function isc_Canvas_applyHiliteIcon(_1,_2,_3){if(!this.hilites||!_2)return _3;var _4,_5,_6;if(!isc.isAn.Array(_1)){this.$579[0]=_1;_1=this.$579}
for(var i=0;i<_1.length;i++){_6=_1[i];_4=this.getHilite(_6);if((_4!=null)&&_4.icon){_5=this.getHiliteIconHTML(_4.icon,_2);var _8=this.getHiliteIconPosition(_2);if(_8=="after"){_3=_3+_5}else if(_8=="replace"){_3=_5}else{_3=_5+_3}}}
return _3},isc.A.enableHilite=function isc_Canvas_enableHilite(_1,_2){if(_2==null)_2=true;var _3=this.getHilite(_1);if(_3==null)return;_3.disabled=!_2;this.redrawHilites()},isc.A.disableHilite=function isc_Canvas_disableHilite(_1){this.enableHilite(_1,false)},isc.A.enableHiliting=function isc_Canvas_enableHiliting(_1){if(_1==null)_1=true;if(this.hilites)this.hilites.setProperty("disabled",!_1);this.redrawHilites()},isc.A.disableHiliting=function isc_Canvas_disableHiliting(){this.enableHiliting(false)},isc.A.redrawHilites=function isc_Canvas_redrawHilites(){this.markForRedraw()},isc.A.getHiliteCriteriaFields=function isc_Canvas_getHiliteCriteriaFields(){var _1=this.getAllFields();if(!_1)return;var _2=_1?_1.findAll("canHilite",false):null;if(_2&&_2.length>0){_1.removeList(_2)}
for(var i=0;i<_1.length;i++){if(_1[i].dataPath){_1[i]=isc.addProperties({},_1[i],{dataPath:this.$840(_1[i].dataPath)})}}
return _1},isc.A.editHilites=function isc_Canvas_editHilites(){var _1=this.getDataSource(),_2=_1?isc.getValues(_1.getFields()).duplicate():[],_3=(this.getHiliteCriteriaFields()||[]).duplicate(),_4=[];for(var i=0;i<_3.length;i++){var _6=_3[i];if(_6.userSummary&&this.fieldIsVisible(_6.name)){var _7=_6.userSummary.summaryVars;for(var _8 in _7){var _9=_7[_8];if(!_4.contains(_9))_4.add(_9)}}}
_2.setProperty("showInSimpleEditor",false);_3.setProperty("showInSimpleEditor",true);for(var i=0;i<_3.length;i++){var _6=_3[i],_10=this.fieldIsVisible(_6.name),_11=_4.contains(_6.name),_12=_2.find("name",_6.name);if(!_12){_12=isc.addProperties({},_6);_2.add(_12)}
_12.title=this.getFieldTitle?this.getFieldTitle(_6):_6.title||_6.name;_12.showInSimpleEditor=_10||_11}
var _13=isc.DataSource.create({inheritsFrom:this.getDataSource(),isHiliteCriteriaDS:true,fields:_2});if(this.hiliteWindow){this.hiliteEditor.setDataSource(_13);this.hiliteEditor.rootDataSource=this.getDataSource();this.hiliteEditor.clearHilites();this.hiliteEditor.setHilites(this.getHilites());this.hiliteEditor.setHiliteIcons(this.hiliteIcons);this.hiliteWindow.show();return}
var _14=this,_15=this.addAutoChild("hiliteEditor",{dataSource:_13,rootDataSource:this.getDataSource(),hilites:this.getHilites(),hiliteIcons:this.hiliteIcons,hiliteCanReplaceValue:this.hiliteCanReplaceValue,hiliteReplaceValueFieldTitle:this.hiliteReplaceValueFieldTitle}),_16=this.addAutoChild("hiliteWindow",{title:this.editHilitesDialogTitle,items:[_15]});_16.centerInPage();_16.show();return _16},isc.A.$1024=function isc_Canvas__handleHilitesChanged(_1){this.setHilites(_1)},isc.A.transferRecords=function isc_Canvas_transferRecords(_1,_2,_3,_4,_5){if(!this.$67u("transferRecords",_1,_2,_3,_4,_5)){return}
if(isc.isAn.Array(this.data)&&this.data.length==0&&this.dataSource&&!this.shouldSaveLocally())
{this.fetchData(null,null,{$326:true});this.data.setFullLength(0)}
if(_4==this){if(_3!=null&&!this.isGrouped)this.data.slideList(_1,_3)}else{var _6=this.getDataSource();var _7=_4.getDataSource();if(_6&&_6==_7&&_4.dragDataAction==isc.Canvas.MOVE&&!(_4.shouldSaveLocally()||this.shouldSaveLocally()))
{var _8=isc.rpc.startQueue();for(var i=0;i<_1.length;i++){var _10={};var _11=_6.getPrimaryKeyFieldNames();for(var j=0;j<_11.length;j++){_10[_11[j]]=_1[i][_11[j]]}
isc.addProperties(_10,this.getDropValues(_10,_7,_2,_3,_4));this.updateDataViaDataSource(_10,_7,null,_4)}
if(!_8)isc.rpc.sendQueue()}else{if(!isc.isAn.Array(_1))_1=[_1];var _13=true;if(_7!=null&&_6!=null){var _14=_6.getPrimaryKeyFieldNames(),_13=true;if(_14){for(var i=0;i<_14.length;i++){if(_7.getField(_14[i])==null){_13=false;break}}}}
if(_13){if(this.selectionType==isc.Selection.MULTIPLE||this.selectionType==isc.Selection.SIMPLE)
{this.selection.deselectAll();this.selection.selectList(_1)}else if(this.selectionType==isc.Selection.SINGLE){this.selection.selectSingle(_1[0])}}
if(_6){this.$67o=isc.rpc.startQueue();for(var i=0;i<_1.length;i++){if(_1[i].$52e)continue;var _10={};isc.addProperties(_10,_1[i]);isc.addProperties(_10,this.getDropValues(_10,_7,_2,_3,_4));if(_6!=_7){var _15=_6.getForeignKeysByRelation(_10,_7);var _16=false;isc.addProperties(_10,_15);if(_6.titleField&&_7&&_7.titleField&&_6.titleField!=_7.titleField){var _17;if(_10[_6.titleField]===_17){_10[_6.titleField]=_10[_7.titleField]}}}
this.$61d(_10,_7,_4,_15)}}else{if(this.isGrouped){for(var i=0;i<_1.length;i++){var _10={};isc.addProperties(_10,_1[i]);isc.addProperties(_10,this.getDropValues(_10,_7,_2,_3,_4));if(!this.$61e(_10)){this.$52u(this.groupTree,_10,true);this.originalData.add(_10)}}}else{for(var i=0;i<_1.length;i++){var _10={};isc.addProperties(_10,_1[i]);isc.addProperties(_10,this.getDropValues(_10,_7,_2,_3,_4));if(_3!=null){if(this.$61d(_10,null,_4,null,_3)){_3++}}else{this.$61d(_10,null,_4)}}}}}}
if(this.canReorderRecords&&this.getSort){var _18=this.getSort();if(_18&&_18.length>0)this.unsort()}
if(!this.$67l){isc.Log.logDebug("Invoking transferDragData from inside transferRecords - no server queries needed?","dragDrop");_4.transferDragData(this.$67n,this);if(_6){if(!this.$67o)isc.rpc.sendQueue()}}
this.$67m=false});isc.evalBoundary;isc.B.push(isc.A.$67u=function isc_Canvas__storeTransferState(_1,_2,_3,_4,_5,_6){if(!isc.isAn.Array(this.$67k))this.$67k=[];if(this.$67l&&this.$67l!=0){isc.logWarn("transferRecords was invoked but the prior transfer is not yet complete - \
                     the transfer will be queued up to run after the current transfer");this.$67k.add({implementation:_1,dropRecords:_2,targetRecord:_3,index:_4,sourceWidget:_5,callback:_6});return false}
this.$67k.addAt({implementation:_1,dropRecords:_2,targetRecord:_3,index:_4,sourceWidget:_5,callback:_6},0);this.$67m=true;this.$67n=[];this.$67l=0;return true},isc.A.updateDataViaDataSource=function isc_Canvas_updateDataViaDataSource(_1,_2,_3,_4){var _5=this;if(this.updateOperation){if(_3==null)_3={};isc.addProperties(_3,{operationId:this.updateOperation})}
if(!this.preventDuplicates){if(!_4.$67v)_4.$67v=0;_4.$67v++;_2.updateData(_1,function(_7,_8,_9){_4.$67w(_7,_8,_9)},_3);return}
var _6=this.getCleanRecordData(_1);if(this.data.find(_6,null,Array.DATETIME_VALUES)){isc.Log.logDebug("Found client-side duplicate, skipping update for '"+_1[isc.firstKey(_1)]+"'","dragDrop");this.$67n.add(this.getCleanRecordData(_1))}else{if(this.data.allMatchingRowsCached()){if(!_4.$67v)_4.$67v=0;_4.$67v++;_2.updateData(_1,function(_7,_8,_9){_4.$67w(_7,_8,_9)},_3)}else{isc.Log.logDebug("Incrementing dup query count: was "+_5.$67l,"dragDrop");this.$67l++;_2.fetchData(_6,function(_7,_8,_9){if(_8&&_8.length>0){isc.Log.logDebug("Found server-side duplicate, skipping update for '"+_1[isc.firstKey(_1)]+"'","dragDrop");_5.$67n.add(_5.getCleanRecordData(_8[0]))}else{if(!_4.$67v)_4.$67v=0;_4.$67v++;_2.updateData(_1,function(_7,_8,_9){_4.$67w(_7,_8,_9)},_3)}
isc.Log.logDebug("Decrementing dup query count: was "+_5.$67l,"dragDrop");if(--_5.$67l==0&&!_5.$67m){if(_4.dragDataAction==isc.Canvas.MOVE){isc.Log.logDebug("Invoking transferDragData from inside callback","dragDrop");_4.transferDragData(_5.$67n,_5);delete _5.$67n;if(!_5.$67o)isc.rpc.sendQueue()}}},{sendNoQueue:true})}}},isc.A.$61d=function isc_Canvas__addIfNotDuplicate(_1,_2,_3,_4,_5,_6){var _7=this.getDataSource(),_8,_9=this,_10={};if(this.addOperation){isc.addProperties(_10,{operationId:this.addOperation})}
if(_7)_8=_7.getPrimaryKeyFields();if(_7){var _11;if(_8&&isc.firstKey(_8)!=null){for(var _12 in _8){if(_8[_12].type=="sequence"){_11=true;break}}}
if(_11){var _13;for(var _12 in _8){_1[_12]=_13}
if(!_3.$67v)_3.$67v=0;_3.$67v++;this.addData(_1,function(_15,_16,_17){_3.$67w(_15,_16,_17)});return true}}
if(!this.preventDuplicates){if(_7){if(!_3.$67v)_3.$67v=0;_3.$67v++;this.addData(_1,function(_15,_16,_17){_3.$67w(_15,_16,_17)},_10)}else{if(isc.Tree&&isc.isA.Tree(this.data)){this.data.add(_1,_6,_5)}else if(isc.ResultSet&&isc.isA.ResultSet(this.data)){if(this.data.allRows!=null){if(_5!=null)this.data.allRows.addAt(_1,_5);else this.data.allRows.add(_1);this.data.filterLocalData()}else{isc.logWarn("Unable to add data to resultSet - allRows is not set")}}else{if(_5!=null)this.data.addAt(_1,_5);else this.data.add(_1)}}
return true}
if(this.$61e(_1,_2,_4)){if(this.duplicateDragMessage!=null)isc.warn(this.duplicateDragMessage);isc.Log.logDebug("Found client-side duplicate, adding '"+_1[isc.firstKey(_1)]+"' to exception list","dragDrop");this.$67n.add(this.getCleanRecordData(_1));return false}else{if(!_7){if(isc.Tree&&isc.isA.Tree(this.data)){this.data.add(_1,_6,_5)}else if(isc.ResultSet&&isc.isA.ResultSet(this.data)){if(this.data.allRows!=null){if(_5!=null)this.data.allRows.addAt(_1,_5);else this.data.allRows.add(_1)}else{isc.logWarn("Unable to add data to resultSet - allRows is not set")}}else{if(_5!=null)this.data.addAt(_1,_5);else this.data.add(_1)}
return true}else{if(!isc.ResultSet||!isc.isA.ResultSet(this.data)){if(!_3.$67v)_3.$67v=0;_3.$67v++;this.addData(_1,function(_15,_16,_17){_3.$67w(_15,_16,_17)},_10);return true}else{if(this.data.allRowsCached()||(_4&&isc.firstKey(_4)&&this.data.allMatchingRowsCached())){if(!_3.$67v)_3.$67v=0;_3.$67v++;this.addData(_1,function(_15,_16,_17){_3.$67w(_15,_16,_17)},_10);return true}
if(_7&&_2==_7){if(_8&&isc.firstKey(_8)!=null){var _14=isc.applyMask(_1,_8)}else{_14=this.getCleanRecordData(_1)}}else if(_4&&isc.firstKey(_4)){_14=isc.addProperties({},this.data.getCriteria());isc.addProperties(_14,_4)}else if(_7&&_8&&isc.firstKey(_8)!=null){_14=isc.applyMask(_1,_8)}else{_14=this.getCleanRecordData(_1)}
isc.Log.logDebug("Incrementing dup query count: was "+_9.$67l,"dragDrop");this.$67l++;_7.fetchData(_14,function(_15,_16,_17){if(_16&&_16.length>0){if(_9.duplicateDragMessage!=null)isc.warn(_9.duplicateDragMessage);isc.Log.logDebug("Found server-side duplicate, adding '"+_1[isc.firstKey(_1)]+"' to exception list","dragDrop");_9.$67n.add(_9.getCleanRecordData(_1))}else{if(!_3.$67v)_3.$67v=0;_3.$67v++;_7.addData(_1,function(_15,_16,_17){_3.$67w(_15,_16,_17)},_10)}
isc.Log.logDebug("Decrementing dup query count: was "+_9.$67l,"dragDrop");if(--_9.$67l==0&&!_9.$67m){if(_3.dragDataAction==isc.Canvas.MOVE){isc.Log.logDebug("Invoking transferDragData from inside callback","dragDrop");_3.transferDragData(_9.$67n,_9);delete _9.$67n;if(!_9.$67o)isc.rpc.sendQueue()}}},{sendNoQueue:true})}}}},isc.A.$61e=function isc_Canvas__isDuplicateOnClient(_1,_2,_3){var _4=this.getDataSource(),_5;if(!this.preventDuplicates)return false;if(_4)_5=_4.getPrimaryKeyFields();if(_4&&_4==_2){if(_5&&isc.firstKey(_5)!=null){for(var _6 in _5){if(_5[_6].type=="sequence"){return false}}}}
if(!_4){var _7=this.getCleanRecordData(_1)}else if(_4&&_2==_4){if(_5&&isc.firstKey(_5)!=null){_7=isc.applyMask(_1,_5)}else{_7=this.getCleanRecordData(_1)}}else if(_3&&isc.firstKey(_3)){_7={};var _8=this.data.getCriteria();if(!_4.isAdvancedCriteria(_8)){var _9=this.data.context;if(_9&&(_9.textMatchStyle==null||_9.textMatchStyle=="exact")){isc.addProperties(_7,_8)}}
isc.addProperties(_7,_3)}else if(_4&&_5&&isc.firstKey(_5)!=null){_7=isc.applyMask(_1,_5)}else{_7=this.getCleanRecordData(_1)}
if(this.data.find(_7,null,Array.DATETIME_VALUES))return true;else return false},isc.A.getCleanRecordData=function isc_Canvas_getCleanRecordData(_1){if(isc.Tree&&isc.isA.Tree(this.data)){return this.data.getCleanNodeData(_1,false)}
var _2={};for(var _3 in _1){if(_3.startsWith("_selection_"))continue;_2[_3]=_1[_3]}
return _2},isc.A.$67w=function isc_Canvas__updateComplete(_1,_2,_3){if(this.$67v){isc.Log.logDebug("Decrementing update count - was "+this.$67v,"dragDrop");this.$67v-=1}
if(!this.$67v){isc.Log.logDebug("All updates complete, calling dragComplete()","dragDrop");if(isc.isA.Function(this.dragComplete))this.dragComplete()}},isc.A.getDropValues=function isc_Canvas_getDropValues(_1,_2,_3,_4,_5,_6){if(!this.addDropValues)return;var _7={},_8;if(this.data&&this.data.getNodeDataSource){_8=this.data.getNodeDataSource(_3)}
if(!_8){_8=this.getDataSource()}
var _9=(this.isGrouped?this.getOriginalData():this.data);if(_9&&_9.getCriteria)_7=_9.getCriteria(_8);var _10;if(isc.isAn.emptyObject(_7)||(_8&&!_8.isAdvancedCriteria(_7))){var _11=_9.context;if(_11&&(_11.textMatchStyle==null||_11.textMatchStyle=="exact")){_10=isc.addProperties({},_7);if(this.dropValues){_10=isc.addProperties(_10,this.dropValues)}
return _10}}
return this.dropValues},isc.A.transferDragData=function isc_Canvas_transferDragData(_1,_2){var _3=[],_4,_5,_6;if(_2&&_2.$67k!=null&&!_2.$67k.isEmpty()){_6=_2.$67k.shift();_4=_6.dropRecords;_5=_6.callback}else{_4=this.getDragData();_6={}}
if(_4==null)_4=[];for(var i=0;i<_4.length;i++){var _8=this.getCleanRecordData(_4[i]);if(!_1||!_1.find(_8,null,Array.DATETIME_VALUES)){_3.add(_4[i])}}
if(this.dragDataAction==isc.Canvas.MOVE&&_2!=this&&!_6.noRemove){if(this.dataSource&&!this.shouldSaveLocally()){var _9=_2.getDataSource();if(_9!=this.getDataSource()){var _10=isc.rpc.startQueue();for(var i=0;i<_3.length;i++){this.getDataSource().removeData(_3[i])}
if(!_10)isc.rpc.sendQueue()}}else if(this.data){var _11=isc.ResultSet&&isc.isA.ResultSet(this.data)&&this.shouldSaveLocally();for(var i=0;i<_3.length;i++){if(_11){if(this.data.allRows!=null){this.data.allRows.remove(_3[i])}else{isc.logWarn("Unable to remove data from resultSet - allRows is not set")}}else{this.data.remove(_3[i])}
if(this.isGrouped){this.originalData.remove(_3[i])}}
if(_11)this.data.filterLocalData()}
if(this.selection&&this.selection.deselectList){this.selection.deselectList(_4)}}
if(_2){if(isc.isA.Function(_2.dropComplete))_2.dropComplete(_3);if(_5){this.fireCallback(_5,"records",[_3])}
if(_2.$67k&&_2.$67k.length>0){var _12=_2.$67k.shift();isc.Timer.setTimeout(function(){if(_12.implementation=="transferNodes"){_2.transferNodes(_12.dropRecords,_12.targetRecord,_12.index,_12.sourceWidget,_12.callback)}else{_2.transferRecords(_12.dropRecords,_12.targetRecord,_12.index,_12.sourceWidget,_12.callback)}},0)}}
return _3},isc.A.getDragData=function isc_Canvas_getDragData(){var _1=(this.selection&&this.selection.getSelection)?this.selection.getSelection():null;return _1},isc.A.cloneDragData=function isc_Canvas_cloneDragData(){var _1=this.$758;if(_1==null){_1=this.getDragData()}
this.$758=null;var _2=this.dragDataAction==isc.Canvas.COPY||this.dragDataAction==isc.Canvas.CLONE;var _3=[]
if(_2&&_1){if(isc.isA.Tree(this.data)){_1=this.data.getCleanNodeData(_1)}else{if(!isc.isAn.Array(_1))_1=[_1];var _4=[];for(var i=0;i<_1.length;i++){_4[i]=this.getCleanRecordData(_1[i])}
_1=_4}}
return _1},isc.A.transferSelectedData=function isc_Canvas_transferSelectedData(_1,_2,_3){if(!this.isValidTransferSource(_1)){if(_3)this.fireCallback(_3);return}
if(_2!=null)_2=Math.min(_2,this.data.getLength());var _4=_1.cloneDragData();var _5;if(_2!=null)_5=this.data.get(_2);this.transferRecords(_4,_5,_2,_1,_3)},isc.A.isValidTransferSource=function isc_Canvas_isValidTransferSource(_1){if(!_1||!_1.transferDragData){this.logWarn("transferSelectedData(): "+(_1?"Invalid ":"No ")+"source widget passed in - "+(_1||"")+" taking no action.");return false}
if(_1==this){this.logWarn("transferSelectedData(): target parameter contains a pointer back to this grid - ignoring");return false}
return true},isc.A.setDragTracker=function isc_Canvas_setDragTracker(){var _1=isc.EH,_2=this.dragTrackerMode;if(_2=="none"||_1.dragOperation==_1.DRAG_SCROLL||this.canDragSelectText){_1.setDragTracker("");return false}else if(_2=="icon"){var _3=this.getSelection(),_4=this.getDragTrackerIcon(_3);_1.setDragTracker(this.imgHTML(_4),null,null,null,null,this.getDragTrackerProperties());return false}else{var _5=this.getSelectedRecord(),_6=_5&&this.data?this.data.indexOf(_5):-1;if(_5==null)return false;if(_2=="title"){var _7=this.getDragTrackerTitle(_5,_6);_1.setDragTracker(_7,null,null,null,null,this.getDragTrackerProperties());return false}else if(_2=="record"){var _8=this.body.getTableHTML([0,this.fields.length-1],_6,_6+1);_1.setDragTracker(_8,null,null,null,null,this.getDragTrackerProperties());return false}}},isc.A.getDragTrackerProperties=function isc_Canvas_getDragTrackerProperties(){var _1=isc.addProperties({},this.dragTrackerProperties);_1.styleName=this.dragTrackerStyle;if(this.dragTrackerMode=="record")_1.opacity=50;return _1},isc.A.makeDragLine=function isc_Canvas_makeDragLine(){if(this._dragLine)return false;var _1={ID:this.getID()+"_dragLine",width:2,height:2,overflow:isc.Canvas.HIDDEN,visibility:isc.Canvas.HIDDEN,isMouseTransparent:true,dropTarget:this,redrawOnResize:false,styleName:"dragLine"};if(this.ns.Element.getStyleEdges(_1.styleName)==null){_1.backgroundColor="black"}
isc.addProperties(_1,this.dragLineDefaults,this.dragLineProperties);this._dragLine=this.ns.Canvas.create(_1);return true},isc.A.hideDragLine=function isc_Canvas_hideDragLine(){if(this._dragLine){this._dragLine.hide();this._dragLine.moveTo(0,-9999)}},isc.A.configureFrom=function isc_Canvas_configureFrom(_1){var _2=this.dbcProperties;for(var i=0;i<_2.length;i++){this[_2[i]]=_1[_2[i]];if(_2[i]=="dataSource"){var _4=this.autoFetchData;this.autoFetchData=false;this.setDataSource(isc.DS.getDataSource(this.dataSource));this.autoFetchData=_4}}
this.setCriteria(_1.getCriteria());this.setData(_1.getData())},isc.A.addFormulaField=function isc_Canvas_addFormulaField(){this.editFormulaField()},isc.A.$1144=function isc_Canvas__editComputedField(_1,_2){if(isc.FormulaBuilder==null)return;var _3=this,_4=!_1?false:true,_5=_2.toLowerCase();if(isc.isA.String(_1)){_1=this.getField(_1)}
var _6=isc[_2+"Builder"].create({autoDraw:false,overflow:"visible",component:_3,dataSource:_3.getDataSource(),editMode:_4,field:_1,mathFunctions:_2=="Formula"?isc.MathFunction.getDefaultFunctionNames():null,headerSpans:this.headerSpans,showHeaderSpanTitles:this.showHeaderSpanTitlesInFormulaBuilder,spanTitleSeparator:this.formulaBuilderSpanTitleSeparator,fieldKeyProperties:{height:"*"},fireOnClose:function(){_3.userFieldCallback(this)}},this[_5+"BuilderProperties"]);this.fieldEditorWindow=this.createAutoChild("fieldEditorWindow",isc.addProperties({},{title:this.fieldEditorWindowTitle.evalDynamicString(this,{builderType:_2,fieldTitle:_6.field.title}),items:[_6]},this[_5+"EditorProperties"]));this.fieldEditorWindow.show()},isc.A.editFormulaField=function isc_Canvas_editFormulaField(_1){return this.$1144(_1,"Formula")},isc.A.invalidateUserCache=function isc_Canvas_invalidateUserCache(_1,_2){if(!_1){if(!_2){this.$132l++;return}
_1=this.data||[];if(isc.ResultSet&&isc.isA.ResultSet(_1))_1=_1.getAllLoadedRows();if(isc.Tree&&isc.isA.Tree(_1))_1=_1.getAllItems()}
if(!_1)return;if(!isc.isAn.Array(_1))_1=[_1];if(_2!=null){if(!isc.isAn.Array(_2))_2=[_2];_2=this.getCacheableFields(_2)}
for(var i=0;i<_1.length;i++){if(!_1[i])continue;var _4=_1[i]["_cache_"+this.ID];if(!_4)continue;if(_2==null)delete _1[i]["_cache_"+this.ID]
else{for(var j=0;j<_2.length;j++){delete _4[_2[j].name]}}}},isc.A.$134n=function isc_Canvas__addDependentUserFields(_1){var _2={},_3=this.$134o();for(var i=0;i<_1.length;i++){var _5=_3[_1[i].name];if(_5)isc.addProperties(_2,_5);_2[_1[i].name]=_1[i]}
return isc.getValues(_2)},isc.A.$134p=function isc_Canvas__getUserFieldInputFields(_1){var _2;if(_1.userFormula!=null){_2=_1.userFormula.formulaVars}else if(_1.userSummary!=null){_2=_1.userSummary.summaryVars}
if(!_2)return{};else _2=isc.getValues(_2);var _3={};for(var i=0;i<_2.length;i++){var _5=this.getField(_2[i]);if(_5){_3[_5.name]=_5;isc.addProperties(_3,this.$134p(_5))}}
return _3},isc.A.$134o=function isc_Canvas__getFieldDependencyTable(){if(this.$134q==null){var _1=this.$134q={};var _2=this.fields;for(var i=0;i<_2.length;i++){var _4=isc.getKeys(this.$134p(_2[i]));for(var j=0;j<_4.length;j++){var _6=_4[j];if(_1[_6]==null){_1[_6]={}}
_1[_6][_2[i].name]=_2[i]}}}
return this.$134q},isc.A.$134r=function isc_Canvas__clearFieldDependencyTable(){delete this.$134q},isc.A.shouldApplyUserFormulaAfterSummary=function isc_Canvas_shouldApplyUserFormulaAfterSummary(_1){return _1&&_1.userFormula!=null},isc.A.shouldShowUserFormula=function isc_Canvas_shouldShowUserFormula(_1,_2){return true},isc.A.getCacheableFields=function isc_Canvas_getCacheableFields(_1){var _1=_1!=null?_1:this.getFields();if(_1==null)return[];return _1.filter(function(_2){return _2.userFormula!=null||_2.userSummary!=null})},isc.A.getFormulaFieldValue=function isc_Canvas_getFormulaFieldValue(_1,_2){if(!isc.isAn.Object(_1))_1=this.getField(_1);if(_2&&_2["_cache_"+this.ID]&&_1&&_1.name&&_2["_cache_"+this.ID][_1.name]==this.$132l)
{return _2[_1.name]}
var _3=this.getFormulaFunction(_1);if(!_3)return null;var _4=_3(_2,this);if(_2&&!_2.$132m){if(!_2["_cache_"+this.ID])_2["_cache_"+this.ID]={};_2["_cache_"+this.ID][_1.name]=this.$132l;_2[_1.name]=_4}
return _4},isc.A.getFormulaFunction=function isc_Canvas_getFormulaFunction(_1){if(!_1||!_1.userFormula)return null;var _2=_1.$65w;if(_2!=null&&_2.$111j==_1.userFormula)return _2;_2=_1.$65w=isc.FormulaBuilder.generateFunction(_1.userFormula,this.getAllFields(),this);_2.$111j=_1.userFormula;if(_1.sortNormalizer==null){var _3=function(_4,_1,_5){return _2(_4,_5)};_1.sortNormalizer=_3}
return _2},isc.A.addSummaryField=function isc_Canvas_addSummaryField(){this.editSummaryField()},isc.A.editSummaryField=function isc_Canvas_editSummaryField(_1){return this.$1144(_1,"Summary")},isc.A.userFieldCallback=function isc_Canvas_userFieldCallback(_1){if(!_1)return;var _2=this.fieldEditorWindow;if(_1.cancelled){_2.destroy();return}
var _3=_1.getUpdatedFieldObject();var _4=_3.name;if(this.getField(_4)==null){var _5=_3.title;if(_5!=null&&!isc.isA.emptyString(_5)&&_5!=_1.defaultNewFieldTitle)
{var _6=_5;_6=_6.replace(/ |\.|-/g,"_");if(_6.match(/^[0-9]/))_6="_"+_6;if(String.isValidID(_6)){_3.name=_1.getNewUniqueFieldName(_6)}else{this.logInfo("User-created field: unable to create fieldName based on specified title "+_5+", using default name:"+_3.name,"summaryField")}}else{this.logDebug("User-created field: not attempting to create fieldName based on specified title "+_5+", using default name:"+_3.name,"summaryField")}
var _7,_8=_1.getUsedFields(true).first();if(_3.summaryFunction===_7&&_8&&_8.summaryFunction!=null){_3.summaryFunction=_8.summaryFunction}}
if(this.userAddedField&&this.userAddedField(_3)==false){_2.destroy();return}
if(this.formulaUpdated&&_1.builderTypeText=="Formula"){this.formulaUpdated(_3,_3.userFormula)}
if(this.hideField&&_1.shouldHideUsedFields()){var _9=_1.getUsedFields();for(var i=0;i<_9.length;i++){var _11=_9.get(i);this.hideField(_11.name)}}
var _12=this.getAllFields();var _13=isc.Class.getArrayItemIndex(_3.name,_12,this.fieldIdProperty);if(_13>=0)_12[_13]=_3;else _12.addAt(_3,this.getFields().length);this.setFields(_12);if(this.markForRedraw)this.markForRedraw();var _14=_1.restartBuilder,_15=_1.builderTypeText;_2.destroy();if(_14){if(_15=="Formula")this.addFormulaField();else this.addSummaryField()}},isc.A.getSummaryFunction=function isc_Canvas_getSummaryFunction(_1){if(!_1||!_1.userSummary)return null;var _2=_1.$652;if(_2!=null)return _2;_2=_1.$652=isc.SummaryBuilder.generateFunction(_1.userSummary,this.getAllFields(),this);if(_1.sortNormalizer==null){var _3=function(_4,_1,_5){return _2(_4,_5)};_1.sortNormalizer=_3}
return _2},isc.A.getSummaryFieldValue=function isc_Canvas_getSummaryFieldValue(_1,_2){if(!isc.isAn.Object(_1))_1=this.getField(_1);if(_2&&_2["_cache_"+this.ID]&&_1&&_1.name&&_2["_cache_"+this.ID][_1.name]==this.$132l)
{return _2[_1.name]}
var _3=this.getSummaryFunction(_1);if(!_3)return null;var _4=_3(_2,_1[this.fieldIdProperty],this);if(_2){if(!_2["_cache_"+this.ID])_2["_cache_"+this.ID]={};_2["_cache_"+this.ID][_1.name]=this.$132l;_2[_1.name]=_4}
return _4},isc.A.shouldIncludeHiliteInSummaryField=function isc_Canvas_shouldIncludeHiliteInSummaryField(_1,_2){return this.includeHilitesInSummaryFields},isc.A.getRecordIndex=function isc_Canvas_getRecordIndex(_1){return this.data.indexOf(_1)},isc.A.getTitleFieldValue=function isc_Canvas_getTitleFieldValue(_1){},isc.A.getTitleField=function isc_Canvas_getTitleField(){if(this.titleField!=null)return this.titleField;if(this.dataSource!=null){var _1=this.getDataSource().getTitleField(),_2=this.getField(_1);if(!_2||_2.excludeFromState){var _3=this.getFields(),_4=false;for(var i=0,_6=_3.length;!_4&&i<_6;++i){_2=_3[i];if(!_2.excludeFromState){if(_1==null)_1=_2[this.fieldIdProperty];if(this.fieldIsVisible(_2)&&this.shouldUseField(_2)){_1=_2[this.fieldIdProperty];_4=true}}}
if(_1==null){_1=_3[0][this.fieldIdProperty]}}
this.titleField=_1}else{var _3=this.getFields(),_7=["title","label","name","id"],_4=false;for(var i=0;!_4&&i<_7.length;++i){var _8=_7[i],_1=_3.find(this.fieldIdProperty,_8);if(_1&&this.fieldIsVisible(_1)&&this.shouldUseField(_1)&&!_1.excludeFromState)
{this.titleField=_8;_4=true}}
if(!_4){this.titleField=_3.first()[this.fieldIdProperty];for(var i=0;i<_3.length;++i){var _1=_3[i];if(!_1.excludeFromState){this.titleField=_1[this.fieldIdProperty];break}}}}
return this.titleField},isc.A.getRecordHiliteCSSText=function isc_Canvas_getRecordHiliteCSSText(_1,_2,_3,_4){if(_1==null)return _2;if(_1.isGroupSummary&&(!this.showHilitesInGroupSummary||_3.showHilitesInGroupSummary==false))return _2;_2=this.addObjectHilites(_1,_2,_3);if(_4==null){_4=this.getFields().contains(_3)&&((isc.isA.List(this.data)&&this.getRecordIndex(_1)!=-1)||this.data==_1)}
if(_4){_2=this.addHiliteCSSText(_1,_3,_2)}else{var _5=this.hilites;if(_5){for(var i=0;i<_5.length;i++){if(_3&&_3.name){var _7=_5[i].fieldName;if(_7&&(isc.isAn.Array(_7)?!_7.contains(_3.name):_7!=_3.name))
{continue}}
var _8=this.getRecordsMatchingHilite(_5[i],[_1]);if(_8&&_8.length!=0){if(_2==null){_2=this.getHiliteCSSText(_5[i])}else{_2+=this.getHiliteCSSText(_5[i])}}}}}
if(this.logIsDebugEnabled("hiliting")&&_2!=null){this.logDebug("getRecordHiliteCSSText for field:"+_3.name+" on record:"+this.echo(_1)+"\n- gives back value: "+_2,"hiliting")}
return _2},isc.A.convertCSSToProperties=function isc_Canvas_convertCSSToProperties(_1,_2){if(_1==null)return null;var _3=_1.split(";"),_4;_3.map(function(_9){var _5=_9.split(":");if(_5.length!=2)return null;var _6=/^\s*(\S*)\s*$/,_7=_5[0].cssToCamelCaps().replace(_6,"$1"),_8=_5[1].replace(_6,"$1");if(!_2||_2.contains(_7)){if(!_4)_4={};_4[_7]=_8}});return _4},isc.A.getExportFieldValue=function isc_Canvas_getExportFieldValue(_1,_2,_3){return this.htmlUnescapeExportFieldValue(this.getStandaloneFieldValue(_1,_2,false))},isc.A.addDetailedExportFieldValue=function isc_Canvas_addDetailedExportFieldValue(_1,_2,_3,_4,_5,_6,_7,_8,_9){var _10=_4.name,_11=this.getRecordHiliteCSSText(_3,null,_4),_12,_13={};var _14=this.getExportBGColor(_9,_5,_3);if(_9!=null&&_14){_11+="; backgroundColor: "+_14}
var _15=this.getDeclarativeFormat(_4);if(_15){_13.rawValue=_3[_4.name];_13.format=_15}else if(!_8){_13=this.getDateFormattingProperties(_4,_3[_4.name],_1[_4.title])}
if(_4.exportRawValues||(this.exportRawValues&&_4.exportRawValues!=false))
_12=_3[_4[this.fieldIdProperty]];else
_12=this.getExportFieldValue(_3,_4.name,_5);if(_11||_13){var _16=this.convertCSSToProperties(_11,_6);if(_13){if(!_16)_16={};isc.addProperties(_16,_13)}
if(_16){if(_7)
_1[_2]=[{value:_12,style:_16}];else
_1[_2]=_16}}},isc.A.getDeclarativeFormat=function isc_Canvas_getDeclarativeFormat(_1){return!_1?null:_1.exportFormat||_1.format},isc.A.getClientExportData=function isc_Canvas_getClientExportData(_1,_2){var _3=this.originalData||this.data,_4=[],_5=this.getClientExportFields(_1),_6,_7,_8,_9,_10=_1&&_1.exportFields;if(_1==null)_1={};if(_1.exportData!=null)_3=_1.exportData;_6=_1.includeHiddenFields;_7=_1.allowedProperties;_8=_1.includeCollapsedNodes;_9=_1.alwaysExportExpandedStyles;if(_10){if(_6!==false)_6=true}
if(isc.isA.ResultSet(_3))_3=_3.getAllLoadedRows();if(isc.isA.Tree(_3)){if(_8)_3=_3.getAllNodes();else _3=_3.getOpenList()}
var _11={settings:_1,callback:_2,chunkSize:this.exportDataChunkSize,data:_3,exportData:_4,fields:_5,includeHiddenFields:_6,allowedProperties:_7,includeCollapsedNodes:_8,alwaysExportExpandedStyles:_9,totalRows:_3.getLength(),startRow:0,endRow:Math.min(this.exportDataChunkSize,_3.getLength()),exportFieldsSpecified:_10};_1.exportRowBGColors={};_1.exportColumnBGColors={};_11.firstTimeStamp=_11.thisTimeStamp=isc.timeStamp();this.logInfo("starting export chunking process - "+_11.firstTimeStamp,"export");this.getClientExportDataChunk(_11);return},isc.A.getClientExportDataChunk=function isc_Canvas_getClientExportDataChunk(_1){var _2=_1.settings,_3=_1.data,_4=_1.exportData,_5=_1.fields,_6=_1.includeHiddenFields,_7=_1.allowedProperties,_8=_1.includeCollapsedNodes,_9=_1.alwaysExportExpandedStyles,_10=_1.totalRows,_11=_1.startRow,_12=_1.endRow,_13=_1.settings.exportValueFields,_14=_1.exportFieldsSpecified,_15=_1.settings.exportDatesAsFormattedString,_16=_2.exportRowBGColors,_17=_2.exportColumnBGColors;for(var _18=_11;_18<_12;_18++){var _19=_3[_18],_20=this.getRecordExportObject(_19,_5,_7,_6,_8,_9,_13,_14,_15,_18);_4.push(_20);var _21=this.getExportRowBGColor(_18,_19);if(_21){_16[_18]=_21}}
for(var _22=0;_22<_5.length;_22++){var _23=_5[_22];if((!this.fields.contains(_23))&&!_6)continue;var _24=this.getFieldNum(_23.name);var _25=this.getExportColumnBGColor(_24);if(_25){_17[_24]=_25}}
if(_1.endRow<_1.totalRows){_1.lastTimeStamp=_1.thisTimeStamp;_1.thisTimeStamp=isc.timeStamp();if(this.logIsInfoEnabled("export")){this.logInfo("processed "+_1.endRow+" rows - starting next chunk - "+((_1.thisTimeStamp-_1.lastTimeStamp)/1000),"export")}
_1.startRow=_1.endRow;_1.endRow=Math.min(_1.startRow+_1.chunkSize,_1.totalRows);return this.delayCall("getClientExportDataChunk",[_1],0)}
if(this.showGridSummary&&this.summaryRow&&this.exportIncludeSummaries){var _26=this.summaryRow,_3=this.getGridSummaryData(true);for(var _18=0;_18<_3.getLength();_18++){var _19=_3[_18],_20=this.getRecordExportObject(_19,_5,_7,_6,_8,_9,_13,_14,_15,_18);;_4.push(_20)}}
if(_1.callback){var _3=_1.exportData;if(this.logIsInfoEnabled("export")){this.logInfo("finished processing "+_1.endRow+" rows - about to export - "+isc.timestamp(),"export")}
this.fireCallback(_1.callback,"data,context",[_3,_1.settings])}},isc.A.getClientExportFields=function isc_Canvas_getClientExportFields(_1){var _2=this.getAllFields();var _3=[],i,_5=_2.length,_6;if(isc.isAn.Object(_1)&&_1.exportFields){for(i=0;i<_5;++i){_6=_2[i];if(_1.exportFields.contains(_6.name))_3.add(_6)}
_2=_3}else{for(i=0;i<_5;++i){_6=_2[i];if(this.$71s(_6)){_3[_3.length]=_6}}
_2=_3}
return _2},isc.A.getRecordExportObject=function isc_Canvas_getRecordExportObject(_1,_2,_3,_4,_5,_6,_7,_8,_9,_10){var _11={};for(var _12=0;_12<_2.length;_12++){var _13=_2[_12];if((!this.fields.contains(_13))&&!_4)continue;var _14=this.getFieldNum(_13.name),_15=_13.name,_16=_15+"$style",_17;if(_13.exportRawValues||(this.exportRawValues&&_13.exportRawValues!=false))
_17=_1[_13[this.fieldIdProperty]];else
_17=this.getExportFieldValue(_1,_13.name,_14);if(_17==null||_17=="&nbsp;")_17="";if(!_8){if(_7){if(_13.displayField){var _18=_13.name;if(_18==_15)_18+="_value";_11[_18]=_1[_13.name]}}}
_11[_15]=_17;this.addDetailedExportFieldValue(_11,_16,_1,_13,_14,_3,_6,_9,_10)}
return _11},isc.A.htmlUnescapeExportFieldTitle=function isc_Canvas_htmlUnescapeExportFieldTitle(_1){return this.htmlUnescapeExportFieldValue(_1)},isc.A.htmlUnescapeExportFieldValue=function isc_Canvas_htmlUnescapeExportFieldValue(_1){if(isc.isA.String(_1))return _1.unescapeHTML().replace(/<.*?>/g,isc.emptyString);return _1},isc.A.addHiliteSpan=function isc_Canvas_addHiliteSpan(_1,_2,_3){var _4=this.getRecordHiliteCSSText(_1,null,_2);if(_4)return"<span style=\""+_4+"\">"+_3+"</span>";else return _3},isc.A.getRawValue=function isc_Canvas_getRawValue(_1,_2){if(!_1||!_2)return null;var _3=_2.dataPath==null?_2.displayField:isc.Canvas.$923(_2,this);return isc.Canvas.$70o(_3,_2,_1,this)});isc.evalBoundary;isc.B.push(isc.A.getFormattedValue=function isc_Canvas_getFormattedValue(_1,_2,_3){return _3},isc.A.fieldIsVisible=function isc_Canvas_fieldIsVisible(_1){return true},isc.A.getSpecifiedField=function isc_Canvas_getSpecifiedField(_1){return this.getField(_1)},isc.A.getStandaloneFieldValue=function isc_Canvas_getStandaloneFieldValue(_1,_2,_3){var _4=this.getSpecifiedField(_2),_5;if(!_4)return;if(_4.userFormula)_5=this.getFormulaFieldValue(_4,_1);else if(_4.userSummary)_5=this.getSummaryFieldValue(_4,_1);else{if(this.$425&&this.$425(_4)){_5=_1[_4.displayField]}else{_5=this.getRawValue(_1,_2)}
if(!_3)_5=this.getFormattedValue(_1,_2,_5)}
var _6=this.addHiliteSpan(_1,_4,_5);return _6},isc.A.getDateFormattingProperties=function isc_Canvas_getDateFormattingProperties(_1,_2,_3){if(!isc.SimpleType.inheritsFrom(_1.type,"date"))return;if(!isc.isA.Date(_2))return;var _4=isc.SimpleType.inheritsFrom(_1.type,"datetime");var _5;if(_1.dateFormatter&&isc.isA.Function(Date.prototype[_1.dateFormatter])){_5=_1.dateFormatter}else if(_1.displayFormat&&isc.isA.Function(Date.prototype[_1.displayFormat])){_5=_1.displayFormat}
if(!_5){var _6=this.getDataSource(),_7=_6?_6.getField(_1.name):null,_8=_7?_7.dateFormatter||_7.displayFormat:null;if(_8&&isc.isA.Function(Date.prototype[_8])){_5=_8}}
if(!_5){var _9;if(this.datetimeFormatter!=null&&_4){_9=this.datetimeFormatter}else{_9=this.dateFormatter}
if(_9&&isc.isA.Function(Date.prototype[_9])){_5=_9}}
if(!_5){var _10=!_4?Date.prototype.$el:Date.prototype.$68e;if(_10&&isc.isA.Function(Date.prototype[_10])){_5=_10}}
var _11={rawValue:_2,dateFormatter:_5};return _11},isc.A.getExportBGColor=function isc_Canvas_getExportBGColor(_1,_2,_3){return null},isc.A.getExportRowBGColor=function isc_Canvas_getExportRowBGColor(_1,_2){return null},isc.A.getExportColumnBGColor=function isc_Canvas_getExportColumnBGColor(_1){return null},isc.A.exportClientData=function isc_Canvas_exportClientData(_1,_2){if(_2)_1.$90b=_2;this.getClientExportData(_1,this.getID()+".exportClientDataReply(data,context)");return},isc.A.exportClientDataReply=function isc_Canvas_exportClientDataReply(_1,_2){if(_1==null||_1.length==0){isc.warn(this.emptyExportMessage);return}
var _3=_2||{},_4=_3.exportAs?_3.exportAs:this.defaultExportAs,_5=_3.exportFilename?_3.exportFilename:this.defaultExportFilename,_6=_3.exportDisplay?_3.exportDisplay:this.defaultExportDisplay,_7=_3.downloadToNewWindow==null?(_6=="window"):_3.downloadToNewWindow;var _8={operationId:_3.operationId,showPrompt:false,transport:_3.exportToClient===false?"xmlHttpRequest":"hiddenFrame",exportResults:true,downloadResult:!(_3.exportToClient===false),download_filename:(_6=="window"?_5:null),params:_2.params};if(_3.exportRawValues==null){_3.exportRawValues=false}
var _9={targetMainWindow:_3.targetMainWindow,downloadToNewWindow:_7,exportDisplay:_3.exportDisplay,exportAs:_3.exportAs,exportToClient:_3.exportToClient,exportToFilesystem:_3.exportToFilesystem,exportPath:_3.exportPath,exportFilename:_5,exportDelimiter:_3.exportDelimiter,exportHeader:_3.exportHeader,exportHeaderless:_3.exportHeaderless,exportFooter:_3.exportFooter,exportDefaultBGColor:_3.exportDefaultBGColor,exportAlternateRowBGColor:_3.exportAlternateRowBGColor,exportRowBGColors:_3.exportRowBGColors,exportColumnBGColors:_3.exportColumnBGColors,exportTitleSeparatorChar:_3.exportTitleSeparatorChar,exportSpanTitleSeparator:_3.exportSpanTitleSeparator,exportShowHeaderSpanTitles:_3.exportShowHeaderSpanTitles,lineBreakStyle:_3.lineBreakStyle,exportDatesAsFormattedString:_3.exportDatesAsFormattedString,exportRawValues:_3.exportRawValues,exportCurrencySymbol:isc.NumberUtil.currencySymbol,params:_3.params};var _10=this.getClientExportFields(_3);if(_10){for(var i=0;i<_10.length;i++){if(isc.isAn.Object(_10[i]))_10[i]=_10[i].name}}
var _12=[];for(var i=0;i<_10.length;++i){if(this.getField(_10[i])!=null)_12.add(_10[i])}
_10=_12;_9.exportFields=_10;var _13=[];for(var i=0;i<this.getAllFields().length;i++){if(this.getAllFields()[i].userFormula!=null){_13[_13.length]=this.getAllFields()[i].userFormula;_13[_13.length-1].name=this.getAllFields()[i].name;_13[_13.length-1].title=this.getAllFields()[i].title}}
if(_13.length>0){var _14=[];for(var u=0;u<this.getAllFields().length;u++){_14[u]={name:this.getAllFields()[u].name,title:this.getAllFields()[u].title}}
_9.formulaFields=_13;_9.formulaRemap=_14}
var _16={};if(this.headerSpans&&_3.exportShowHeaderSpanTitles!==false){_9.exportHeaderSpans=this.prepareHeaderSpansForExport(this.headerSpans,this.getAllFields(),_1,_16)}
if(_10){_9.exportOtherFields={};for(var i=0;i<_10.length;++i){var _17=_10[i];if(!_16.hasOwnProperty(_17)){var _18=this.getField(_17);_9.exportOtherFields[_17]=this.htmlUnescapeExportFieldTitle(_18.exportTitle||_18.title||_18.name)}}}
_9.exportDefaultBGColor=this.exportDefaultBGColor;_9.exportAlternateRowBGColor=this.exportAlternateRowBGColor;if(isc.isA.Function(this.getExportRowBGColors)){_9.exportRowBGColors=this.getExportRowBGColors()}
if(isc.isA.Function(this.getExportColumnBGColors)){_9.exportColumnBGColors=this.getExportColumnBGColors()}
if(this.headerHeight&&this.exportHeaderHeights){_9.exportHeaderHeight=this.headerHeight}
if(this.exportFieldWidths&&isc.isAn.Array(this.fields)&&this.getFieldWidth){_9.exportFieldPixelWidths=this.getFieldPixelWidths();_9.exportWidthScale=this.exportWidthScale}
if(_9.exportWrapHeaderTitles==null){_9.exportWrapHeaderTitles=this.exportWrapHeaderTitles}
if(this.exportFieldAlignments&&isc.isAn.Array(this.fields)){_9.exportAlignments=this.getFieldAlignments()}
if(this.getDataSource()){isc.addProperties(_8,{exportContext:_9});this.getDataSource().exportClientData(_1,_8,_2.$90b)}else{isc.DMI.callBuiltin({methodName:"downloadClientExport",arguments:[_1,_4,_5,_6,_9],requestParams:_8,callback:_2.$90b})}
if(_2.$90b&&_8.downloadResult)this.fireCallback(_2.$90b)},isc.A.prepareHeaderSpansForExport=function isc_Canvas_prepareHeaderSpansForExport(_1,_2,_3,_4){_4=_4||{};var _5=[];for(var i=0;i<_1.length;i++){var _7=_1[i].exportTitle||_1[i].title||isc.emptyString;_5[i]={title:this.htmlUnescapeExportFieldTitle(_7)};if(_1[i].height!=null){_5[i].height=_1[i].height}
if(_1[i].spans){_5[i].spans=this.prepareHeaderSpansForExport(_1[i].spans,_2,_3,_4)}else{_5[i].fields=[];for(var j=0;j<_1[i].fields.length;j++){var _9=_1[i].fields[j],_10=_2.find("name",_9);if(!_10||this.getFieldNum(_9)==-1)continue;var _11=_10.exportTitle||_10.title||_10.name;if(_11){var _12=this.htmlUnescapeExportFieldTitle(_11);if(_11!=_12&&_3&&_3.length){for(var k=0;k<_3.length;k++){_3[k][_12]=_3[k][_11];delete _3[k][_11]}}
_5[i].fields.push({name:_9,title:_12});_4[_9]=_12}}}}
return _5},isc.A.getSort=function isc_Canvas_getSort(){return this.$73p?this.removeSortSpecifierMarkers(isc.shallowClone(this.$73p)):null},isc.A.removeSortSpecifierMarkers=function isc_Canvas_removeSortSpecifierMarkers(_1){if(_1==null)return null;_1.clearProperty("context");_1.clearProperty("sortIndex");return _1},isc.A.setSort=function isc_Canvas_setSort(_1){this.$73p=isc.shallowClone(_1);if(this.data&&this.$73p&&this.$73p.length>0){for(var i=0;i<this.$73p.length;i++){var _3=this.$73p[i];if(!_3.context)_3.context=this}
if(this.data.setSort)this.data.setSort(this.$73p);else if(this.data.sortByProperty){var _3=this.$73p[0];this.data.sortByProperty(_3.property,Array.shouldSortAscending(_3.direction),_3.normalizer,_3.context)}}},isc.A.askForSort=function isc_Canvas_askForSort(_1){if(isc.MultiSortDialog&&this.canMultiSort!=false){var _2=this.getSort();if(_1&&(!_2||_2.length==0)){_2=[{property:_1,direction:"ascending"}]}
isc.MultiSortDialog.askForSort(this,_2,this.getID()+".multiSortReply(sortLevels)")}},isc.A.multiSortReply=function isc_Canvas_multiSortReply(_1){if(_1!=null){this.setSort(_1)}},isc.A.askForGrouping=function isc_Canvas_askForGrouping(){var _1=this.getGroupByFields();isc.MultiGroupDialog.askForGrouping(this,_1,this.getID()+".multiGroupReply(groupLevels)")},isc.A.multiGroupReply=function isc_Canvas_multiGroupReply(_1){if(_1)this.groupBy(_1)},isc.A.editCriteria=function isc_Canvas_editCriteria(){var _1=isc.FilterBuilder.create({dataSource:this.dataSource,criteria:this.data&&this.data.getCriteria?this.data.getCriteria():this.initialCriteria});var _2=this;var _3=isc.Window.create({autoDraw:true,autoSize:true,width:600,autoCenter:true,isModal:true,title:"Define Filter",bodyProperties:{layoutMargin:5,membersMargin:5},items:[isc.HTMLFlow.create({width:"100%",isGroup:true,groupTitle:"Instructions",padding:5,contents:"Define field by field filter criteria below"}),_1,isc.IButton.create({title:"Save",click:function(){var _4=_1.getCriteria();_2.editCriteriaReply(_4);this.parentElement.parentElement.closeClick()}})]})},isc.A.editCriteriaReply=function isc_Canvas_editCriteriaReply(_1){this.setCriteria(_1)},isc.A.addValidationError=function isc_Canvas_addValidationError(_1,_2,_3){var _4=false;if(isc.isAn.Array(_3)){for(var i=0;i<_3.length;i++){_4=this.addValidationError(_1,_2,_3[i])||_4}
return _4}
var _6=_2.contains(this.$70l);if(_6){var _7=_1,_8=_2.trim(this.$70l).split();for(var i=0;i<_8.length;i++){if(!_7[_8[i]]){if(i<_8.length-1){if(parseInt(_8[i+1])==_8[i+1]){_7[_8[i]]=[]}else{_7[_8[i]]={}}}else{_7[_8[i]]=_3;_4=true}}
_7=_7[_8[i]]}}else{if(!_1[_2]){_1[_2]=_3;_4=true}else{if(!isc.isAn.Array(_1[_2]))_1[_2]=[_1[_2]];if(!_1[_2].contains(_3)){_1[_2].add(_3);_4=true}}}
return _4},isc.A.isFieldDependentOnOtherField=function isc_Canvas_isFieldDependentOnOtherField(_1,_2){if(!_1.validators)return false;var _3=this.getDataSource();for(var i=0;i<_1.validators.length;i++){var _5=_1.validators[i];if(!_5)continue;if(!_5.$74r&&_5.applyWhen&&_3!=null){_5.$74r=_3.getCriteriaFields(_5.applyWhen)}
if(_5.dependentFields&&_5.dependentFields.contains(_2)){return true}
if(_5.$74r&&_5.$74r.length>0&&_5.$74r.contains(_2))
{return true}}
return false},isc.A.getFieldDependencies=function isc_Canvas_getFieldDependencies(_1){if(!_1.validators)return null;var _2=this.getDataSource(),_3=[];for(var i=0;i<_1.validators.length;i++){var _5=_1.validators[i];if(!_5)continue;if(!_5.$74r&&_5.applyWhen&&_2!=null){_5.$74r=_2.getCriteriaFields(_5.applyWhen)}
if(_5.dependentFields){if(!isc.isAn.Array(_5.dependentFields)){_5.dependentFields=[_5.dependentFields]}
for(var i=0;i<_5.dependentFields.length;i++){_3.add(_5.dependentFields[i])}}
if(_5.$74r&&_5.$74r.length>0)
{_3.addList(_5.$74r)}}
return(_3.length==0?null:_3)},isc.A.validateFieldAndDependencies=function isc_Canvas_validateFieldAndDependencies(_1,_2,_3,_4,_5){var _6={},_7=false,_8={valid:true,errors:null,resultingValue:null};_4[_1.name]=_3;var _9=this.validateField(_1,_1.validators,_3,_4,_5);if(_9!=null){_8.valid=_9.valid;_8.stopOnError=_9.stopOnError;if(_9.errors!=null){this.addValidationError(_6,_1.name||_1.dataPath,_9.errors)}
if(_9.resultingValue!=null){_8.resultingValue=_9.resultingValue;_4[_1.name]=_9.resultingValue}
_7=true}
var _10=_1.name||_1.dataPath,_11=this.getFields()||[];for(var i=0;i<_11.length;i++){var _13=_11[i];if(_13.name!=_10&&_13.dataPath!=_10&&this.isFieldDependentOnOtherField(_13,_10))
{_9=this.validateField(_13,_13.validators,_4[_13.name],_4,_5);if(_9!=null){if(_9.errors!=null){this.addValidationError(_6,_13.name||_13.dataPath,_9.errors)}else{this.addValidationError(_6,_13.name||_13.dataPath,null)}
if(_9.resultingValue!=null){_4[_13.name]=_9.resultingValue}}}}
_8.errors=_6;return(_7?_8:null)},isc.A.validateField=function isc_Canvas_validateField(_1,_2,_3,_4,_5){if(!_2)return null;var _6=[],_7=false,_8=null,_9={valid:true,errors:null,resultingValue:null},_10=false,_11=false;if(!isc.isAn.Array(_2)){_2=[_2]}
for(var i=0;i<_2.length;i++){var _13=_2[i];if(!_13)continue;var _14=isc.Validator.getValidatorType(_13);if(_5&&_5.typeValidationsOnly&&!this.$685.contains(_14))
{continue}
if(_5&&_5.dontValidateNullValue&&_3==null&&_14!="required"&&_14!='requiredIf')
{continue}
if(!_5||!_5.changing||(_13.validateOnChange!=false&&(_13.validateOnChange||_1.validateOnChange||this.validateOnChange)))
{if(isc.Validator.isServerValidator(_13)){_10=true;if(_13.stopOnError)_11=true;continue}
if(_13.applyWhen){var _15=this.getDataSource(),_16=_13.applyWhen;if(_15==null){isc.logWarn("Conditional validator criteria ignored because form has no dataSource")}else{var _17=_15.applyFilter([_4],_16);if(_17.length==0){isc.Validator.performAction(null,_1,_13,_4,this);continue}}}
_7=true;var _18=(isc.Validator.processValidator(_1,_13,_3,null,_4)==true);isc.Validator.performAction(_18,_1,_13,_4,this);if(!_18){var _19=isc.Validator.getErrorMessage(_13);if(_19==null){if(_5&&_5.unknownErrorMessage){_19=_5.unknownErrorMessage}else{_19=this.unknownErrorMessage}}
_6.add(_19);if(_13.stopOnError)_8=true}
if(_13.resultingValue!=null){_9.resultingValue=_13.resultingValue;_3=_13.resultingValue}
if(!_18&&_13.stopIfFalse)break}}
if(_10&&_5&&_5.deferServerValidation){_9.needsServerValidation=true}else if(_10&&(!_5||_5.skipServerValidation!=true)){_11=this.$75e(_11,_1.stopOnError,this.stopOnError);var _20=((_5&&_5.serverValidationMode)?_5.serverValidationMode:this.$746),_21=(_11||_1.synchronousValidation||this.synchronousValidation||false);var _22;if(this.getDataSource()){_22=this.getDataSource().$708(_4)}else{_22=isc.addProperties({},_4)}
var _23=this.getSaveOperationType&&this.getSaveOperationType()=="add";var _24=isc.Canvas.$923(_1,this);isc.DynamicForm.$70n(_24,_1,_3,_22,this,true);this.fireServerValidation(_1,_22,_20,_21,_5.rowNum,_23);_7=true}
_9.stopOnError=(_6.length>0&&this.$75e(_8,_1.stopOnError,this.stopOnError));_9.errors=(_6.length==0?null:_6);_9.valid=(_6.length==0);return(_7?_9:null)},isc.A.validateFieldsOnServer=function isc_Canvas_validateFieldsOnServer(_1,_2,_3){if(!isc.isAn.Array(_1))_1=[_1];var _4=null,_5=false;for(var i=0;i<_1.length;i++){var _7=_1[i],_8=_7.validators;for(var j=0;j<_8.length;j++){var _10=_8[j];if(!_10)continue;if(!isc.Validator.isServerValidator(_10))continue;if(_10.stopOnError){_4=_7;_5=true}}}
_5=this.$75e(_5,_7.stopOnError,this.stopOnError);var _11=((_3&&_3.serverValidationMode)?_3.serverValidationMode:this.$746),_12=(_5||_7.synchronousValidation||this.synchronousValidation||false);var _13;if(this.getDataSource()){_13=this.getDataSource().$708(_2)}else{_13=isc.addProperties({},_2)}
var _14=this.getSaveOperationType&&this.getSaveOperationType()=="add";if(!_4)_4=_1[0];this.fireServerValidation(_4,_13,_11,_12,_3.rowNum,_14)},isc.A.$75e=function isc_Canvas__resolveStopOnError(_1,_2,_3){if(_1!=null)return _1;return(_2==null&&_3)||_2||false},isc.A.fireServerValidation=function isc_Canvas_fireServerValidation(_1,_2,_3,_4,_5,_6){var _7=this.getDataSource();if(_7==null)return;var _8={showPrompt:_4,prompt:isc.RPCManager.validateDataPrompt,validationMode:_3,internalClientContext:{component:this,fieldName:_1.name,rowNum:_5}};if(_6)_8.pendingAdd=true;if(_3==this.$746){for(var _9 in _2){if(_2[_9]===null)delete _2[_9]}}
if(!_4){var _10=this.$75c(_1);_8.internalClientContext.pendingFields=_10}
_7.validateData(_2,this.$742,_8)},isc.A.$742=function isc_Canvas__handleServerValidationReply(_1,_2,_3){if(_1.status==isc.DSResponse.STATUS_FAILURE){isc.logWarn("Server-side validation failed: "+_1.data);isc.say(_1.data)}
var _4=_1.internalClientContext,_5=_4.component,_6=_4.pendingFields,_7=_1.errors==null?null:isc.DynamicForm.getSimpleErrors(_1.errors);if(_1.errors){for(var _8 in _7){var _9=_7[_8],_10=_5.getField(_8);if(_9!=null&&_10!=null){if(!isc.isAn.Array(_9))_9=[_9];var _11=null;for(var i=0;i<_9.length;i++){_5.addFieldErrors(_8,_9[i].errorMessage,false,_4.rowNum);if(_9[i].stopOnError)_11=true}
if(_10.redraw)_10.redraw();_11=_5.$75e(_11,_10.stopOnError,_5.stopOnError);if(_8==_4.fieldName&&_11==true&&!_10.hasFocus){if(!_10.synchronousValidation&&!_5.synchronousValidation){isc.logWarn("Server validation for "+_8+" signaled stopOnError but validation is not set for synchronousValidation:true - stop ignored.")}else{_5.focusInItem(_10)}}}}}
if(_6){_5.$75d(_6)}
if(_5&&_5.handleAsyncValidationReply!=null){if(_7!=null){_7=isc.DynamicForm.formatValidationErrors(_7)}
_5.handleAsyncValidationReply(_7==null,_7)}},isc.A.handleAsyncValidationReply=function isc_Canvas_handleAsyncValidationReply(_1,_2){},isc.A.isPendingAsyncValidation=function isc_Canvas_isPendingAsyncValidation(){return!isc.isAn.emptyObject(this.$75a)},isc.A.$75c=function isc_Canvas__registerAsyncValidation(_1){var _2=this.getFields()||[],_3=[_1.name],_4=_1.name;this.$75a[_4]=(this.$75a[_4]==null?1:this.$75a[_4]++);for(var i=0;i<_2.length;i++){var _6=_2[i];if(_6.name!=_4&&this.isFieldDependentOnOtherField(_6,_4)){var _7=_6.name;_3.add(_7);this.$75a[_7]=(this.$75a[_7]==null?1:this.$75a[_7]++)}}
return _3},isc.A.$75d=function isc_Canvas__clearAsyncValidation(_1){var _2=false;for(var i=0;i<_1.length;i++){this.$75a[_1[i]]--;if(this.$75a[_1[i]]==0){delete this.$75a[_1[i]];_2=true}}
if(_2&&this.$75b!=null){var _4=true;for(var i=0;i<this.$75b;i++){if(this.$75a[this.$75b[i]]>0){_4=false;break}}
if(_4){this.$75b=null;isc.clearPrompt()}}},isc.A.blockOnFieldBusy=function isc_Canvas_blockOnFieldBusy(_1){if(this.$75b!=null)return true;var _2=false;for(var _3 in this.$75a){_2=true;break}
if(!_2)return false;var _4=this.getFieldDependencies(_1)||[];_4.add(_1.name);var _5=[];for(var i=0;i<_4.length;i++){var _7=_4[i];if(this.$75a[_7]>0){_5.add(_7)}}
if(_5.length>0){this.$75b=_5;this.delayCall("showValidationBlockingPrompt");return true}
return false},isc.A.showValidationBlockingPrompt=function isc_Canvas_showValidationBlockingPrompt(){if(this.$75b)isc.showPrompt(isc.RPCManager.validateDataPrompt)},isc.A.enableField=function isc_Canvas_enableField(_1){if(_1==null||isc.isAn.emptyString(_1))return;var _2=this.getField(_1);if(_2){_2.disabled=false;this.redraw()}},isc.A.disableField=function isc_Canvas_disableField(_1){if(_1==null||isc.isAn.emptyString(_1))return;var _2=this.getField(_1);if(_2){_2.disabled=true;this.redraw()}},isc.A.showField=function isc_Canvas_showField(_1){if(_1==null||isc.isAn.emptyString(_1))return;var _2=this.getField(_1);if(_2)_2.show()},isc.A.hideField=function isc_Canvas_hideField(_1){if(_1==null||isc.isAn.emptyString(_1))return;var _2=this.getField(_1);if(_2)_2.hide()},isc.A.setFieldCanEdit=function isc_Canvas_setFieldCanEdit(_1,_2){if(_1==null||isc.isAn.emptyString(_1))return;var _3=this.getField(_1);if(_3){_3.canEdit=_2;this.redraw()}},isc.A.isOffline=function isc_Canvas_isOffline(){if(this.data&&this.data.$78c)return true;return false},isc.A.setSelectionComponent=function isc_Canvas_setSelectionComponent(_1,_2){if(!_1){if(this.selectionComponent!=null){this.ignore(this.selectionComponent,"selectionChanged");this.ignore(this.selectionComponent,"cellSelectionChanged")}
delete this.selectionComponent;if(this.valuesManager){this.ignore(this.valuesManager,"$71e")}}else{var _3=_1;if(isc.isA.String(_1))_1=window[_1];if(!_1||!isc.isA.Canvas(_1)||_1.dataArity!="multiple"){this.logWarn("setSelectionComponent() - selection component specified as:"+_3+" this is not a valid component");return}
if(!_1.getSelection){this.logWarn("setSelectionComponent() - specified selection component:"+_1+" does not support selection - ignoring");return}
if(!_2&&this.selectionComponent){if(this.selectionComponent==_1)return
if(this.isObserving(this.selectionComponent,"selectionChanged")){this.ignore(this.selectionComponent,"selectionChanged")}
if(this.isObserving(this.selectionComponent,"cellSelectionChanged")){this.ignore(this.selectionComponent,"cellSelectionChanged")}}
this.selectionComponent=_1;if(!this.selectionComponent.useCellRecords){this.observe(this.selectionComponent,"selectionChanged","observer.selectionComponentSelectionChanged(observed, record,state)")}else{this.observe(this.selectionComponent,"cellSelectionChanged","observer.selectionComponentCellSelectionChanged(observed, cellList)")}
var _4=this.selectionComponent.getSelection}},isc.A.selectionComponentSelectionChanged=function isc_Canvas_selectionComponentSelectionChanged(_1,_2,_3){if(!_3){if(this.dataArity=="single"){_2=null}else{return}}
if(this.dataArity=="single"){this.setData(_2)}else{var _4=this.dataPath.split("/");this.setData(_2[_4[_4.length-1]]);if(this.dataArity=="multiple"&&isc.isA.Function(this.deselectAllRecords)){this.deselectAllRecords()}}},isc.A.selectionComponentCellSelectionChanged=function isc_Canvas_selectionComponentCellSelectionChanged(_1,_2){for(var i=0;i<_2.length;i++){var _4=_2[i],_5=this.selectionComponent.getCellRecord(_4[0],_4[1]);if(_1.cellIsSelected(_5))break;_5=null}
if(_5){this.$71d=_1.getPrimaryKeys(_5);this.editRecord(_5)}},isc.A.createFieldPickerWindowMenuItem=function isc_Canvas_createFieldPickerWindowMenuItem(_1){return{title:_1,component:this,click:function(){this.component.editFields()}}},isc.A.editFields=function isc_Canvas_editFields(){var _1=this.fieldPickerWindow;if(_1)_1.show();else{var _2=this.fieldPickerWindowProperties||{},_3=_2.fieldPickerProperties||{};this.fieldPickerWindow=this.createAutoChild("fieldPickerWindow",{fieldPickerProperties:isc.addProperties(_3,{dataBoundComponent:this,canEditTitles:this.canEditTitles})});this.fieldPickerWindow.show()}});isc.B._maxIndex=isc.C+244;isc.ClassFactory.defineClass("MathFunction","Class");isc.A=isc.MathFunction;isc.A.$65z={};isc.A=isc.MathFunction;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.registerFunction=function isc_c_MathFunction_registerFunction(_1){if(!this.$65z[_1.name]){this.$65z[_1.name]=_1}
var _2=isc.addProperties({},_1);_2.name=_1.name.toUpperCase();_2.defaultSortPosition=-1;if(!this.$65z[_2.name]){this.$65z[_2.name]=_2}
var _3=isc.addProperties({},_1);_3.name=(_1.name.substr(0,1).toUpperCase()+_1.name.substr(1));_3.defaultSortPosition=-1;if(!this.$65z[_3.name]){this.$65z[_3.name]=_3}},isc.A.getRegisteredFunctionNames=function isc_c_MathFunction_getRegisteredFunctionNames(){return isc.getKeys(this.$65z)},isc.A.getDefaultFunctionNames=function isc_c_MathFunction_getDefaultFunctionNames(){var _1=this.getDefaultFunctions(),_2=_1.makeIndex("name",false);return isc.getKeys(_2)},isc.A.getRegisteredFunctions=function isc_c_MathFunction_getRegisteredFunctions(){return isc.getValues(this.$65z)},isc.A.getDefaultFunctions=function isc_c_MathFunction_getDefaultFunctions(){var _1=this.getRegisteredFunctions(),_2=_1.findAll("defaultSortPosition",-1)||[];for(var i=0;i<_2.length;i++){var _4=_2[i];_1.remove(_4)}
_1.sortByProperties(["defaultSortPosition"],["true"]);return _1},isc.A.getRegisteredFunctionIndex=function isc_c_MathFunction_getRegisteredFunctionIndex(){var x=this.getRegisteredFunctions();var _2=x.makeIndex("name",false);return _2},isc.A.getDefaultFunctionIndex=function isc_c_MathFunction_getDefaultFunctionIndex(){return this.getDefaultFunctions().makeIndex("name",false)},isc.A.isRegistered=function isc_c_MathFunction_isRegistered(_1){if(this.$65z[_1])return true;return false});isc.B._maxIndex=isc.C+8;isc.A=isc.MathFunction.getPrototype();isc.A.defaultSortPosition=-1;isc.MathFunction.registerFunction(isc.MathFunction.create({name:"max",description:"Maximum of two values",usage:"max(value1, value2)",defaultSortPosition:1,jsFunction:function(_1,_2){return Math.max(_1,_2)}}));isc.MathFunction.registerFunction(isc.MathFunction.create({name:"min",description:"Minimum of two values",usage:"min(value1, value2)",defaultSortPosition:2,jsFunction:function(_1,_2){return Math.min(_1,_2)}}));isc.MathFunction.registerFunction(isc.MathFunction.create({name:"round",description:"Round a value up or down, optionally providing <i>decimalDigits</i> as the maximum number of decimal places to round to.  For fixed or precision rounding, use <i>toFixed()</i> and <i>toPrecision()</i> respectively.",usage:"round(value,decimalDigits)",defaultSortPosition:3,jsFunction:function(_1,_2){if(_2){var _3=Math.pow(10,_2),_4=Math.round(_1*_3)/_3;return _4}
return Math.round(_1)}}));isc.MathFunction.registerFunction(isc.MathFunction.create({name:"ceil",description:"Round a value up",usage:"ceil(value)",defaultSortPosition:4,jsFunction:function(_1){return Math.ceil(_1)}}));isc.MathFunction.registerFunction(isc.MathFunction.create({name:"floor",description:"Round a value down",usage:"floor(value)",defaultSortPosition:5,jsFunction:function(_1){return Math.floor(_1)}}));isc.MathFunction.registerFunction(isc.MathFunction.create({name:"abs",description:"Absolute value",usage:"abs(value)",defaultSortPosition:6,jsFunction:function(_1){return Math.abs(_1)}}));isc.MathFunction.registerFunction(isc.MathFunction.create({name:"pow",description:"Value1 to the power of Value2",usage:"pow(value1, value2)",defaultSortPosition:7,jsFunction:function(_1,_2){return Math.pow(_1,_2)}}));isc.MathFunction.registerFunction(isc.MathFunction.create({name:"sin",description:"Sine of a value",usage:"sin(value)",defaultSortPosition:8,jsFunction:function(_1){return Math.sin(_1)}}));isc.MathFunction.registerFunction(isc.MathFunction.create({name:"cos",description:"Cosine of a value",usage:"cos(value)",defaultSortPosition:9,jsFunction:function(_1){return Math.cos(_1)}}));isc.MathFunction.registerFunction(isc.MathFunction.create({name:"tan",description:"Tangent of a value",usage:"tan(value)",defaultSortPosition:10,jsFunction:function(_1){return Math.tan(_1)}}));isc.MathFunction.registerFunction(isc.MathFunction.create({name:"ln",description:"Natural logarithm of a value",usage:"ln(value)",defaultSortPosition:11,jsFunction:function(_1){return Math.log(_1)}}));isc.MathFunction.registerFunction(isc.MathFunction.create({name:"log",description:"logarithm of a value with the specified <i>base</i>",usage:"log(base, value)",defaultSortPosition:12,jsFunction:function(_1,_2){return Math.log(_2)/Math.log(_1)}}));isc.MathFunction.registerFunction(isc.MathFunction.create({name:"asin",description:"Arcsine of a value",usage:"asin(value)",defaultSortPosition:13,jsFunction:function(_1){return Math.asin(_1)}}));isc.MathFunction.registerFunction(isc.MathFunction.create({name:"acos",description:"Arccosine of a value",usage:"acos(value)",defaultSortPosition:14,jsFunction:function(_1){return Math.acos(_1)}}));isc.MathFunction.registerFunction(isc.MathFunction.create({name:"atan",description:"Arctangent of a value (-PI/2 to PI/2 radians)",usage:"atan(value)",defaultSortPosition:15,jsFunction:function(_1){return Math.atan(_1)}}));isc.MathFunction.registerFunction(isc.MathFunction.create({name:"atan2",description:"Angle theta of a point (-PI to PI radians)",usage:"atan2(value1,value2)",defaultSortPosition:16,jsFunction:function(_1,_2){return Math.atan2(_1,_2)}}));isc.MathFunction.registerFunction(isc.MathFunction.create({name:"exp",description:"The value of E<sup>value</sup>",usage:"exp(value)",defaultSortPosition:17,jsFunction:function(_1){return Math.exp(_1)}}));isc.MathFunction.registerFunction(isc.MathFunction.create({name:"random",description:"Random number between 0 and 1",usage:"random()",defaultSortPosition:18,jsFunction:function(){return Math.random()}}));isc.MathFunction.registerFunction(isc.MathFunction.create({name:"sqrt",description:"Square root of a value",usage:"sqrt(value)",defaultSortPosition:19,jsFunction:function(_1){return Math.sqrt(_1)}}));isc.MathFunction.registerFunction(isc.MathFunction.create({name:"toPrecision",description:"Format a number to a length of <i>precision</i> digits, rounding or adding a decimal point and zero-padding as necessary.  Note that the values 123, 12.3 and 1.23 have an equal precision of 3.  Returns a formatted string and should be used as the outermost function call in a formula. For rounding, use <i>round()</i>.",usage:"toPrecision(value,precision)",defaultSortPosition:20,jsFunction:function(_1,_2){var _3=_1;if(isc.isA.String(_3))_3=parseFloat(_3);if(isNaN(_3))return _1;return _3.toPrecision(_2)}}));isc.MathFunction.registerFunction(isc.MathFunction.create({name:"toFixed",description:"Round or zero-pad a number to <i>digits</i> decimal places.  Returns a formatted string and should be used as the outermost function call in a formula.  To round values or restrict precision, use <i>round()</i> and <i>toPrecision()</i> respectively.",usage:"toFixed(value,digits)",defaultSortPosition:21,jsFunction:function(_1,_2){var _3=_1;if(isc.isA.String(_3))_3=parseFloat(_3);if(isNaN(_3))return _1;return _3.toFixed(_2)}}));isc.Canvas.registerStringMethods({userAddedField:"field",selectionUpdated:"record,recordList",onFetchData:"criteria,requestProperties"});isc.defineClass("EdgedCanvas","Canvas");isc.A=isc.EdgedCanvas.getPrototype();isc.A.redrawOnResize=false;isc.A._redrawWithParent=false;isc.A.$jp=false;isc.A.$jo=false;isc.A.useClipDiv=false;isc.A.overflow=isc.Browser.isMoz?isc.Canvas.VISIBLE:isc.Canvas.HIDDEN;isc.A.$ks=false;isc.A.$tb=0;isc.A.$td=0;isc.A.$tc=0;isc.A.$te=0;isc.A.$y0=["TL","T","TR","L","center","R","BL","B","BR"];isc.A.$98g={L:true,TL:true,BL:true};isc.A.$98h={R:true,TR:true,BR:true};isc.A.$920=["TR","T","TL","R","center","L","BR","B","BL"];isc.A.skinImgDir="images/edges/";isc.A.edgeImage="[SKIN]/rounded/frame/FFFFFF/6.png";isc.A.shownEdges={TL:true,T:true,TR:true,L:true,R:true,BL:true,B:true,BR:true};isc.A.edgeSize=6;isc.A=isc.EdgedCanvas.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$61h="<TD class='";isc.A.$61i="' ></TD>";isc.A.$y2="<TABLE CELLPADDING=0 CELLSPACING=0 STYLE='height:100%;width:100%;table-layout:fixed'><COL WIDTH=";isc.A.$y3="><COL><COL WIDTH=";isc.A.$98i=["background-size:",,," ",,,";"];isc.A.$4n=" class=";isc.A.addEdgeStyleSuffix=false;isc.A.forceMozRowHeight=true;isc.B.push(isc.A.initWidget=function isc_EdgedCanvas_initWidget(){this.invokeSuper(isc.EdgedCanvas,this.$oc);var _1=this.customEdges;if(_1){var _2=this.shownEdges={};if(_1.contains("T")){_2.T=_2.TL=_2.TR=true}
if(_1.contains("B")){_2.B=_2.BL=_2.BR=true}
if(_1.contains("L")){_2.L=_2.TL=_2.BL=true}
if(_1.contains("R")){_2.R=_2.TR=_2.BR=true}}
this.updateEdgeSizes()},isc.A.updateEdgeSizes=function isc_EdgedCanvas_updateEdgeSizes(){var _1=this.edgeSize;this.$y4=this.$du(this.edgeLeft,_1);this.$y5=this.$du(this.edgeRight,_1);this.$y6=this.$du(this.edgeTop,_1);this.$y7=this.$du(this.edgeBottom,_1);var _2=this.shownEdges,_3=this.edgeOffset;if(_2.L)this.$tb=this.$du(this.edgeOffsetLeft,_3,this.$y4);if(_2.R)this.$tc=this.$du(this.edgeOffsetRight,_3,this.$y5);if(_2.T)this.$td=this.$du(this.edgeOffsetTop,_3,this.$y6);if(_2.B)this.$te=this.$du(this.edgeOffsetBottom,_3,this.$y7);this.markForRedraw()},isc.A.getInnerWidth=function isc_EdgedCanvas_getInnerWidth(_1,_2,_3){var _4=this.invokeSuper(isc.EdgedCanvas,"getInnerWidth",_1,_2,_3);return _4-this.$tb-this.$tc},isc.A.getInnerHeight=function isc_EdgedCanvas_getInnerHeight(_1,_2,_3){var _4=this.invokeSuper(isc.EdgedCanvas,"getInnerHeight",_1,_2,_3);return _4-this.$td-this.$te},isc.A.getInnerHTML=function isc_EdgedCanvas_getInnerHTML(){var _1=isc.SB.create(),_2=this.edgeImage,_3=_2.lastIndexOf(isc.dot),_4=_2.substring(0,_3),_5=_2.substring(_3),_6=this.getImgURL(_4),_7="<TD HEIGHT=",_8="<TD",_9,_10,_11;if(!isc.Browser.isIE10&&!((isc.Browser.isStrict&&isc.Browser.isIE&&isc.Browser.version>=8)||(isc.Browser.isMoz&&isc.Browser.isUnix)))
{var _12=isc.EdgedCanvas.$y8;if(!_12){_12=isc.EdgedCanvas.$y8={width:"100%",height:"100%"};if(isc.Browser.isSafari)_12.align="middle";if(isc.Browser.isStrict&&!isc.Browser.isTransitional){_12.extraCSSText="display:block"}}
_12.src=_2;var _13=this.imgHTML(_12);if(isc.Browser.isSafari){_13="<DIV style='overflow:hidden;width:100%;height:100%'>"+_13+"</DIV>"}
var _14=_13.lastIndexOf(isc.dot);_9=this.$oa+_13.substring(0,_14);_10=_13.substring(_14);_11="</TD>"}else{_9=" STYLE='background:url("+_6;_10=_5+");"
_11="'></TD>"}
if(this.edgeColor)_9+=isc.$ag+this.edgeColor;var _15=this.shownEdges;var _16=this.isRTL(),_17=_16?this.$y5:this.$y4,_18=_16?this.$y4:this.$y5;_1.append(this.$y2,_17,this.$y3,_18,this.$oa,"<TR HEIGHT=",this.$y6,this.$oa);this.$y9(_7,this.$y6,isc.px,_9,_10,_11,0,2,_15,_1);var _19=this.getHeight()-this.$y6-this.$y7;if(isc.Browser.isStrict&&(isc.Browser.isIE||isc.Browser.isOpera)){_1.append("</TR><TR HEIGHT=",_19,">")}else{_1.append("</TR><TR>")}
if(isc.Browser.isMoz||isc.Browser.isWebKit){this.$y9(_7,_19,isc.px,_9,_10,_11,3,5,_15,_1)}else{this.$y9(_7,null,isc.px,_9,_10,_11,3,5,_15,_1)}
_1.append("</TR><TR HEIGHT=",this.$y7,">");this.$y9(_7,this.$y7,isc.px,_9,_10,_11,6,8,_15,_1);_1.append("</TR></TABLE>");return _1.toString()},isc.A.$y9=function isc_EdgedCanvas__writeEdgeCells(_1,_2,_3,_4,_5,_6,_7,_8,_9,_10){var _11=this.isRTL()?this.$920:this.$y0;var _12=isc.Browser.isIE9;for(var i=_7;i<=_8;i++){var _14=_11[i],_15=null;if(_12&&_2!=null){if(this.$98g[_14]){this.$98i[1]=this.$y4;this.$98i[2]=isc.px;this.$98i[4]=_2;this.$98i[5]=_3;_15=this.$98i.join(isc.emptyString)}else if(this.$98h[_14]){this.$98i[1]=this.$y5;this.$98i[2]=isc.px;this.$98i[4]=_2;this.$98i[5]=_3;_15=this.$98i.join(isc.emptyString)}else if(_14!=isc.Canvas.CENTER){this.$98i[1]=100;this.$98i[2]=this.$o9;this.$98i[4]=_2;this.$98i[5]=_3;_15=this.$98i.join(isc.emptyString)}}
var _16=this.getEdgeStyleName(_14),_17=_16?this.$4n:null;if(_9[_14]||(this.showCenter&&_14==isc.Canvas.CENTER)){if(_2!=null){_10.append(_1,_2,_3)}else{_10.append(_1,"''")}
if(isc.Browser.isOpera){if(_14=="TL"||_14=="L"||_14=="BL"){_10.append(" width=",this.$y4)}else if(_14=="TR"||_14=="R"||_14=="BR"){_10.append(" width=",this.$y5)}}
_10.append(_17,_16,_4,this.getEdgePrefix(_14),isc.$ag,_14,_5,_15,_6)}else{if(this.centerBackgroundColor&&_14==isc.Canvas.CENTER){_10.append("<TD ",_17,_16," style='background-color:",this.centerBackgroundColor,"'></TD>")}else{_10.append(this.$61h,_17,_16,this.$61i)}}}},isc.A.getEdgeStyleName=function isc_EdgedCanvas_getEdgeStyleName(_1){if(this.edgeStyleName==null)return;if(!this.addEdgeStyleSuffix)return this.edgeStyleName;if(!this.$61j||this.$61j.base!=this.edgeStyleName){var _2=this.edgeStyleName;this.$61j={base:_2,TL:_2+"$61o",T:_2+"$61p",TR:_2+"$61q",L:_2+"$61r",C:_2+"$61s",R:_2+"$61t",BL:_2+"$61u",B:_2+"$61v",BR:_2+"$61w"}}
return this.$61j[_1]},isc.A.getEdgePrefix=function isc_EdgedCanvas_getEdgePrefix(_1){},isc.A.$ub=function isc_EdgedCanvas__handleResized(){if(!this.isDrawn()||this.$za)return;if(isc.Browser.isOpera){this.masterElement.bringToFront();return}
if(isc.Browser.isIE&&isc.Browser.isStrict){var _1=this.getHandle().firstChild.rows[1];this.$u9(_1.style,this.$o5,this.getHeight()-this.$y6-this.$y7);return}
if(isc.Browser.isWebKit){var _1=this.getHandle().firstChild.rows[1];var _2=Math.max(0,this.getHeight()-this.$y6-this.$y7);for(var i=0;i<_1.cells.length;i++){this.$u9(_1.cells[i].style,this.$o5,_2)}
return}
if(!isc.Browser.isMoz)return;var _4=this.getHandle().firstChild.rows[1].cells[1],_5=this.getHeight()-this.$y6-this.$y7;if(_5<0)_5=0;this.$u9(_4.style,this.$o5,_5);if(this.forceMozRowHeight){var _6=_4.parentNode.cells;this.$u9(_6[0].style,this.$o5,_5);this.$u9(_6[2].style,this.$o5,_5)}},isc.A.layoutChildren=function isc_EdgedCanvas_layoutChildren(_1,_2,_3){var _4=this.children;if(!_4)return;isc.Canvas.$b4.layoutChildren.call(this,_1,_2,_3);if(_4.length==0)return;var _5=_4[0];_5.setRect(this.$tb,this.$td,this.getInnerWidth(),this.getInnerHeight())},isc.A.addChild=function isc_EdgedCanvas_addChild(_1,_2,_3){isc.Canvas.$b4.addChild.call(this,_1,_2,_3);this.layoutChildren("addChild")},isc.A.draw=function isc_EdgedCanvas_draw(_1,_2,_3,_4){if(!this.readyToDraw())return this;if(this.masterElement){var _5=this.masterElement,_6=false;while(_5){if(_5.position==this.$411){_6=true;break}
_5=_5.parentElement}
if(!_6||isc.Page.isLoaded())this.fitToMaster();else isc.Page.setEvent("load",this,isc.Page.FIRE_ONCE,"fitToMaster")}
this.invokeSuper(isc.EdgedCanvas,"draw",_1,_2,_3,_4);this.$ub();return this},isc.A.fitToMaster=function isc_EdgedCanvas_fitToMaster(){if(this.destroyed)return;var _1=this.masterElement;if(_1.$uu){isc.Timer.setTimeout({target:this,methodName:"fitToMaster"},200);return}else if(_1.$rm){_1.adjustOverflow()}
var _2=_1.$ta();this.setRect(_1.getOffsetLeft()+_2.left,_1.getOffsetTop()+_2.top,Math.max(1,(_1.getVisibleWidth()-_2.left-_2.right)),Math.max(1,(_1.getVisibleHeight()-_2.top-_2.bottom)))},isc.A.redraw=function isc_EdgedCanvas_redraw(){this.Super("redraw",arguments);this.$ub();return this},isc.A.masterResized=function isc_EdgedCanvas_masterResized(){var _1=this.masterElement;if(this.masterElement.isAnimating([this.$do,this.$zb]))return;var _2=isc.Browser.isSafari;if(_2){this.delayCall("$663",[_1])}else{this.$663(_1)}},isc.A.$663=function isc_EdgedCanvas__sizeToMaster(_1){if(this.destroyed||_1!=this.masterElement)return;var _2=_1.$ta();this.resizeTo(Math.max(1,_1.getVisibleWidth()-_2.left-_2.right),Math.max(1,_1.getVisibleHeight()-_2.top-_2.bottom))},isc.A.setEdgeImage=function isc_EdgedCanvas_setEdgeImage(_1){if(this.edgeImage==_1)return;this.edgeImage=_1;this.markForRedraw("setEdgeImage")});isc.B._maxIndex=isc.C+17;isc.defineClass("DropShadow","EdgedCanvas");isc.A=isc.DropShadow.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$114r=true;isc.A.skinImgDir="images/shared/shadows/";isc.A.edgeImage="[SKIN]ds.png";isc.A.isMouseTransparent=true;isc.A.shownEdges={center:true,TL:true,T:true,TR:true,L:true,R:true,BL:true,B:true,BR:true};isc.A.depth=4;isc.A.showShadow=false;isc.B.push(isc.A.initWidget=function isc_DropShadow_initWidget(){this.setDepth(this.depth);this.Super(this.$oc)},isc.A.setDepth=function isc_DropShadow_setDepth(_1){if(_1!=null)this.depth=_1;var _2=(this.softness||this.depth),_3=this.$zc!=_2;this.$zc=_2;this.edgeSize=2*this.$zc;var _4=this.$du(this.offset,Math.round(this.depth/2));this.$zd=this.$du(this.offsetX,_4);this.$ze=this.$du(this.offsetY,_4);this.updateEdgeSizes();if(this.isDrawn()){this.masterMoved();if(_3||this.isDirty())this.redraw();this.masterResized()}},isc.A.getEdgePrefix=function isc_DropShadow_getEdgePrefix(_1){if(_1!=isc.Canvas.CENTER)return this.$zc},isc.A.masterMoved=function isc_DropShadow_masterMoved(){var _1=this.visibility==isc.Canvas.HIDDEN,_2=this.masterElement,_3=_2.getOffsetLeft(),_4=_2.getOffsetTop();if(!_1){_3+=this.$zd-this.$zc;_4+=this.$ze-this.$zc}
this.moveTo(_3,_4)},isc.A.masterResized=function isc_DropShadow_masterResized(){if(this.visibility==isc.Canvas.HIDDEN)return;var _1=this.masterElement;this.resizeTo(_1.getVisibleWidth()+2*this.$zc,_1.getVisibleHeight()+2*this.$zc)},isc.A.fitToMaster=function isc_DropShadow_fitToMaster(){this.masterMoved();this.masterResized()},isc.A.setVisibility=function isc_DropShadow_setVisibility(_1,_2,_3,_4,_5){var _6=(_1!=this.visibility);this.invokeSuper(isc.DropShadow,"setVisibility",_1,_2,_3,_4,_5);if(_6){if(_1==isc.Canvas.HIDDEN){this.resizeTo(1,1);var _7=this.masterElement;this.moveTo(_7.getOffsetLeft(),_7.getOffsetTop())}else{this.fitToMaster()}}},isc.A.getCurrentCursor=function isc_DropShadow_getCurrentCursor(_1,_2,_3,_4){var _5=this.masterElement;if(_5&&_5.dragResizeFromShadow)this.canDragResize=_5.canDragResize;return this.invokeSuper(isc.DropShadow,"getCurrentCursor",_1,_2,_3,_4)},isc.A.prepareForDragging=function isc_DropShadow_prepareForDragging(_1,_2,_3,_4){var _5=this.masterElement;if(_5&&_5.dragResizeFromShadow)this.canDragResize=_5.canDragResize;return this.invokeSuper(isc.DropShadow,"prepareForDragging",_1,_2,_3,_4)});isc.B._maxIndex=isc.C+9;isc.ClassFactory.defineClass("Hover");isc.A=isc.Hover;isc.A.delay=500;isc.A.leftOffset=15;isc.A.topOffset=15;isc.A.hoverCanvasDefaults={defaultWidth:100,defaultHeight:1,baseStyle:"canvasHover",align:isc.Canvas.LEFT,valign:isc.Canvas.TOP,wrap:true,autoDraw:false};isc.A=isc.Hover;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.show=function isc_c_Hover_show(_1,_2,_3,_4){if(isc.isA.Canvas(_1)){this.showingHoverComponent=true;this.hoverCanvas=_1;this.hoverCanvas.hide=function(){this.Super("hide",arguments);isc.Hover.hoverCanvasHidden()};if(_4!=null){_4.hoverCanvas=_1}}
if(!this.hoverCanvas)this.$zf();var _5=this.hoverCanvas;if(_1==null||_1==""){_5.hide();return}
this.lastHoverCanvas=_4;if(!this.showingHoverComponent)_5.setContents(_1);if(_2==null)_2={};var _6=this.hoverCanvasDefaults;if(_5.setAlign)_5.setAlign(_2.align||_6.align);if(_5.setVAlign)_5.setVAlign(_2.valign||_6.valign);if(_5.setBaseStyle)_5.setBaseStyle(_2.baseStyle||_6.baseStyle);if(_5.setOpacity)_5.setOpacity(_2.opacity||_6.opacity);if(_5.setWrap)_5.setWrap(_2.wrap!=null?_2.wrap:_6.wrap);if(_2.moveWithMouse!=null)this.$zg=_2.moveWithMouse
else this.$zg=this.moveWithMouse;var _7=isc.EH.getX(),_8=isc.EH.getY(),_9=_2.left,_10=_2.top,_11=_2.width||(this.showingHoverComponent?_5.width:_6.defaultWidth),_12=_2.height||(this.showingHoverComponent?_5.height:_6.defaultHeight);if(_9!=null||_10!=null){_9=_9?_9:_7+this.leftOffset;_10=_10?_10:_8+this.topOffset}else{_5.setRect(null,-9999,_11,_12);if(!_5.isDrawn())_5.draw();if(!_5.isVisible())_5.show();else _5.redrawIfDirty("placing hover");var _13=_3?_3:[_7-this.leftOffset,_8-this.topOffset,2*this.leftOffset,2*this.topOffset];var _14=_5.getPeerRect();var _15=isc.Canvas.$t7(_14[2],_14[3],_13,"bottom",false,"outside-right");_9=_15[0];_10=_15[1]}
_5.setRect(_9,_10,_11,_12);_5.bringToFront();if(!_5.isDrawn()||!_5.isVisible())_5.show();if(this.$zg){this.$zh=isc.Page.setEvent("mouseMove",function(){isc.Hover.$zi()})}
return},isc.A.hoverCanvasHidden=function isc_c_Hover_hoverCanvasHidden(){var _1=this.lastHoverCanvas;delete this.lastHoverCanvas;if(_1!=null){_1.$80l()}},isc.A.hide=function isc_c_Hover_hide(){var _1=isc.Hover.hoverCanvas;if(_1!=null){if(this.$zh){isc.Page.clearEvent("mouseMove",this.$zh);delete this.$zh}
_1.hide();if(this.showingHoverComponent){if(!_1)return;delete this.hoverCanvas;this.showingHoverComponent=false}else{var _2=this.hoverCanvasDefaults;_1.setRect(0,-1000)}}},isc.A.$zf=function isc_c_Hover__makeHoverCanvas(){var _1=isc.addProperties({hide:function(){this.Super("hide",arguments);isc.Hover.hoverCanvasHidden()}},this.hoverCanvasDefaults);this.hoverCanvas=isc.Label.create(_1)},isc.A.$zi=function isc_c_Hover__moveWithMouse(){var _1=this.hoverCanvas.getPeerRect();var _2=isc.Canvas.$t7(_1[2],_1[3],this.getMousePointerRect(),"bottom",false,"outside-right");this.hoverCanvas.moveTo(_2[0],_2[1])},isc.A.getMousePointerRect=function isc_c_Hover_getMousePointerRect(){return[isc.EH.getX()-this.leftOffset,isc.EH.getY()-this.topOffset,2*this.leftOffset,2*this.topOffset]},isc.A.setAction=function isc_c_Hover_setAction(_1,_2,_3,_4){if(_4==null)_4=this.delay;if(this.isActive||_4==0){_2.apply((_1?_1:this),_3?_3:[]);this.isActive=true}
else{if(this.timer!=null)this.timer=isc.Timer.clear(this.timer);this.actionTarget=(_1?_1:this);this.action=_2;this.actionArgs=_3?_3:[];this.timer=isc.Timer.setTimeout({target:isc.Hover,methodName:"$zj"},_4)}},isc.A.$zj=function isc_c_Hover__doAction(){if(this.action&&!this.actionTarget.destroyed){this.action.apply(this.actionTarget,this.actionArgs)}
this.actionTarget=this.action=this.actionArgs=null;this.isActive=true},isc.A.clear=function isc_c_Hover_clear(){this.hide();if(this.timer!=null)this.timer=isc.Timer.clear(this.timer);this.actionTarget=this.action=this.actionArgs=null;this.isActive=false});isc.B._maxIndex=isc.C+9;if(!isc.Comm)isc.ClassFactory.defineClass("Comm");isc.A=isc.Comm;isc.A.$zk=/^[\$_a-zA-Z][\$\w]*$/;isc.A.BACKREF_PREFIX="$$BACKREF$$:";isc.A.indent="    ";isc.A=isc.Comm;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.serialize=function isc_c_Comm_serialize(_1,_2){var _3={strictQuoting:false,dateFormat:"logicalDateConstructor"};if(_2!=null)_3.prettyPrint=_2;return isc.JSON.encode(_1,_3)});isc.B._maxIndex=isc.C+1;isc.ClassFactory.defineClass("JSON",null,null,true);isc.A=isc.JSON;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.encode=function isc_c_JSON_encode(_1,_2){return isc.JSONEncoder.create(_2).encode(_1)},isc.A.decode=function isc_c_JSON_decode(_1){return eval("("+_1+")")});isc.B._maxIndex=isc.C+2;isc.ClassFactory.defineClass("JSONEncoder");isc.A=isc.JSONEncoder;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.$zm=function isc_c_JSONEncoder__serialize_remember(_1,_2,_3){if(_1&&_1.obj&&_1.obj.add)_1.obj.add(_2);if(_1&&_1.path&&_1.path.add)_1.path.add(_3)},isc.A.$42b=function isc_c_JSONEncoder__serialize_cleanNode(_1){var _2=_1["$42c"];if(_2!=null){var _3=window[_2];if(_3&&_3.parentProperty&&_1[_3.parentProperty]){_1=_3.getCleanNodeData(_1)}}
return _1},isc.A.$zl=function isc_c_JSONEncoder__serialize_alreadyReferenced(_1,_2){var _3=_1.obj.indexOf(_2);if(_3==-1)return null;return _1.path[_3]},isc.A.$zp=function isc_c_JSONEncoder__serialize_addToPath(_1,_2){if(isc.isA.Number(_2)){return _1+"["+_2+"]"}else if(!isc.Comm.$zk.test(_2)){return _1+'["'+_2+'"]'}else{return _1+"."+_2}});isc.B._maxIndex=isc.C+4;isc.A=isc.JSONEncoder.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.serializeInstances="long";isc.A.dateFormat="xmlSchema";isc.A.strictQuoting=true;isc.A.circularReferenceMode="path";isc.A.circularReferenceMarker="$$BACKREF$$";isc.A.prettyPrint=true;isc.B.push(isc.A.encode=function isc_JSONEncoder_encode(_1){this.objRefs={obj:[],path:[]};var _2=this.$eu(_1,this.prettyPrint?this.leadingIndent||"":null,null);this.objRefs=null;return _2},isc.A.encodeDate=function isc_JSONEncoder_encodeDate(_1){if(!_1.toSchemaDate){var _2=new Date(_1.getTime());_2.logicalDate=this.logicalDate;_2.logicalTime=this.logicalTime;_1=_2}
if(this.dateFormat=="dateConstructor"){return _1.$eu()}else if(this.dateFormat=="logicalDateConstructor"){if(_1.logicalTime){return"isc.Time.createLogicalTime("+_1.getHours()+", "+_1.getMinutes()+", "+_1.getSeconds()+", "+_1.getMilliseconds()+")"}else if(_1.logicalDate){return"isc.DateUtil.createLogicalDate("+_1.getFullYear()+", "+_1.getMonth()+", "+_1.getDate()+")"}else{return _1.$eu()}}else{return'"'+_1.toSchemaDate(null,this.trimMilliseconds)+'"'}},isc.A.$eu=function isc_JSONEncoder__serialize(_1,_2,_3){if(isc.Browser.isSGWT&&window.SmartGWT.isNativeJavaObject(_1)){if(_1==null)_1=null;else{if(window.SmartGWT.warnOnSerializeError){window.SmartGWT.throwUnconvertibleObjectException(_1,window.SmartGWT.serializeErrorMessage)}
_1=String.asSource(_1+"")}
return _1}
if(!_3){if(_1&&isc.isA.Function(_1.getID))_3=_1.getID();else _3=""}
if(_1==null)return null;if(isc.isA.String(_1))return(_1.asSource!=null?_1.asSource():String.asSource(_1));if(isc.isA.Function(_1))return null;if(isc.isA.Number(_1)||isc.isA.SpecialNumber(_1))return _1;if(isc.isA.Boolean(_1))return _1;if(isc.isA.Date(_1))return this.encodeDate(_1);if(isc.isAn.Instance(_1)||isc.isA.Class(_1)){if(this.serializeInstances=="skip")return null;else if(this.serializeInstances=="short")return isc.echoLeaf(_1)}
var _4=isc.JSONEncoder.$zl(this.objRefs,_1);if(_4!=null&&_3.contains(_4)){var _5=_3.substring(_4.length,_4.length+1);if(_5=="."||_5=="["||_5=="]"){var _6=this.circularReferenceMode;if(_6=="marker"){return"'"+this.circularReferenceMarker+"'"}else if(_6=="path"){return"'"+this.circularReferenceMarker+":"+_4+"'"}else{return null}}}
if(_1==window){this.logWarn("Serializer encountered the window object at path: "+_3+" - returning null for this slot.");return null}
isc.JSONEncoder.$zm(this.objRefs,_1,_3);if(isc.isA.Function(_1.$eu))return _1.$eu(_2,this.objRefs,_3,_2);if(isc.isAn.Array(_1))return this.$zn(_1,_3,this.objRefs,_2);var _7;if(_1.getSerializeableFields){_7=_1.getSerializeableFields([],[])}else{_7=_1}
return this.$zo(_7,_3,this.objRefs,_2)},isc.A.$zn=function isc_JSONEncoder__serializeArray(_1,_2,_3,_4){var _5=isc.SB.create();_5.append("[");for(var i=0,_7=_1.length;i<_7;i++){var _8=_1[i];if(_4!=null)_5.append("\r",_4,isc.Comm.indent);var _9=isc.JSONEncoder.$zp(_2,i);var _10=this.$eu(_8,(_4!=null?_4+isc.Comm.indent:null),_9);_5.append(_10+",");if(_4!=null)_5.append(" ")}
_5=_5.toString();var _11=_5.lastIndexOf(",");if(_11>-1)_5=_5.substring(0,_11);if(_4!=null)_5+="\r"+_4;_5+="]";return _5},isc.A.$zo=function isc_JSONEncoder__serializeObject(_1,_2,_3,_4){var _5=isc.SB.create(),_6;_1=isc.JSONEncoder.$42b(_1);try{for(var _7 in _1)break}catch(e){if(this.showDebugOutput){if(isc.isAn.XMLNode(_1))return isc.echoLeaf(_1);var _8;if(e.message){_8=(e.message.asSource!=null?e.message.asSource():String.asSource(e.message));return"{ cantEchoObject: "+_8+"}"}else{return"{ cantEchoObject: 'unspecified error' }"}}else return null}
_5.append("{");for(var _7 in _1){if(_7==null)continue;if(this.skipInternalProperties&&(isc.startsWith(_7,isc.$ag)||isc.startsWith(_7,isc.$75g)))continue;var _9=_1[_7];if(isc.isA.Function(_9))continue;var _10=isc.Browser.isSGWT?window.SmartGWT.isNativeJavaObject(_9):false;if(_7!=isc.gwtRef&&!_10&&isc.isAn.Instance(_9)&&this.serializeInstances=="skip")continue;var _11=_7.toString();if(this.strictQuoting||!isc.Comm.$zk.test(_11)){if(_11.contains('"')){if(_11.contains("'")){_11='"'+this.convertToEncodedQuotes(_11)+'"'}else{_11="'"+_11+"'"}}else{_11='"'+_11+'"'}}
var _12=isc.JSONEncoder.$zp(_2,_7);var _13;if(_7==isc.gwtRef){if(!this.showDebugOutput)continue;_13=String.asSource("{GWT Java Obj}")}else if(_7==isc.gwtModule){if(!this.showDebugOutput)continue;_13=String.asSource("{GWT Module}")}else if(_10){_13=(_9==null?null:String.asSource(_9+""))}else{_13=this.$eu(_9,(_4!=null?_4+isc.Comm.indent:null),_12)}
if(_4!=null)_5.append("\r",_4,isc.Comm.indent);_5.append(_11,":"+_13,",");if(_4!=null)_5.append(" ")}
_5=_5.toString();var _14=_5.lastIndexOf(",");if(_14>-1)_5=_5.substring(0,_14);if(_4!=null)_5+="\r"+_4;_5+="}";return _5},isc.A.convertToEncodedQuotes=function isc_JSONEncoder_convertToEncodedQuotes(_1){return _1.replace(String.$e0,"&quot;").replace(String.$ez,"&apos;")},isc.A.convertFromEncodedQuotes=function isc_JSONEncoder_convertFromEncodedQuotes(_1){return _1.replace(new RegExp("&quot;","g"),'"').replace(new RegExp("&apos;","g"),"'")});isc.B._maxIndex=isc.C+7;isc.addGlobal("clone",function(_1,_2){return isc.Comm.$360(_1)});isc.addGlobal("shallowClone",function(_1){return isc.Comm.$675(_1)});isc.A=isc.Comm;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.clone=isc.clone;isc.A.shallowClone=isc.shallowClone;isc.B.push(isc.A.$360=function isc_c_Comm__clone(_1){var _2;if(_1===_2)return _2;if(_1==null)return null;if(isc.isA.String(_1)||isc.isA.Boolean(_1)||isc.isA.Number(_1)||isc.isA.Function(_1))return _1;if(isc.Browser.isSGWT&&window.SmartGWT.isNativeJavaObject(_1))return _1;if(isc.isA.Date(_1))return _1.duplicate();if(isc.isAn.Array(_1))return isc.Comm.$361(_1);if(isc.isA.Function(_1.clone)){if(isc.isA.Class(_1))return isc.echoLeaf(_1);return _1.clone()}
return isc.Comm.$362(_1)},isc.A.$361=function isc_c_Comm__cloneArray(_1){var _2=[];for(var i=0,_4=_1.length;i<_4;i++){_2[i]=isc.Comm.$360(_1[i])}
return _2},isc.A.$362=function isc_c_Comm__cloneObject(_1){var _2={};for(var _3 in _1){var _4=_1[_3];if(_3==isc.gwtRef||_3==isc.gwtModule)continue;_2[_3]=isc.Comm.$360(_4)}
return _2},isc.A.$675=function isc_c_Comm__shallowClone(_1){var _2;if(_1===_2)return _2;if(_1==null)return null;if(isc.Browser.isSGWT&&window.SmartGWT.isNativeJavaObject(_1))return _1;if(isc.isA.String(_1)||isc.isA.Boolean(_1)||isc.isA.Number(_1)||isc.isA.Function(_1))return _1;if(isc.isA.Date(_1))return _1.duplicate();if(isc.isAn.Array(_1))return isc.Comm.$676(_1);return isc.addProperties({},_1)},isc.A.$676=function isc_c_Comm__shallowCloneArray(_1){var _2=[];for(var i=0,_4=_1.length;i<_4;i++){if(isc.isAn.Array(_1[i]))_2[i]=_1[i];else _2[i]=isc.Comm.$675(_1[i])}
return _2});isc.B._maxIndex=isc.C+5;isc.defineClass("AutoTest");isc.A=isc.AutoTest;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.fallback_valueOnlyField="$75w";isc.A.fallback_startMarker="[";isc.A.fallback_endMarker="]";isc.A.fallback_separator="||";isc.A.fallback_equalMarker="=";isc.A.slashMarker="$fs$";isc.A.robustLocatorWarning="If you are seeing unexpected results in recorded tests, it is likely that the application has been modified since the test was recorded. We would recommend re-recording your test script with the latest version of your application. Note that you may be able to avoid seeing this message in future by using the AutoChild subsystem or providing explicit global IDs to components whose function within the page is unlikely to change.";isc.B.push(isc.A.locatorsEqual=function isc_c_AutoTest_locatorsEqual(_1,_2){if(_1&&_2){_1=_1.replace(/^[^\/]*(\/\/.*?)[\/]*$/,"$1");_2=_2.replace(/^[^\/]*(\/\/.*?)[\/]*$/,"$1")}
return _1==_2},isc.A.getLocator=function isc_c_AutoTest_getLocator(_1,_2,_3){var _4=isc.EH.lastEvent,_5;if(_4){if(_1==null){_1=_4.nativeTarget;_5=true}
if(_3==null){_3=[isc.EH.getX(),isc.EH.getY()]}}
var _6;if(isc.isA.Canvas(_1)){_6=_1;_1=_6.getHandle()}else{_6=isc.AutoTest.locateCanvasFromDOMElement(_1)}
var _7=_6?_6.getLocator(_1,_5,_3):"";if(_2&&_7&&_7!=""&&_6.checkLocatorForNativeElement(_7,_1))
{_7=""}
return _7},isc.A.getObjectLocator=function isc_c_AutoTest_getObjectLocator(_1){var _2=this.$90w(_1);var _3=_2.getLocator();if(_2==_1){return _3}
var _4=_2.getObjectLocator(_1);if(_4!=null)_3+="/"+_4;return _3},isc.A.getLocatorObjectType=function isc_c_AutoTest_getLocatorObjectType(_1){var _2=_1.substring(_1.lastIndexOf("/")+1);if(_2&&_2.startsWith("objectType=")){return _2.substring(11)}
return"Canvas"},isc.A.locateCanvasFromDOMElement=function isc_c_AutoTest_locateCanvasFromDOMElement(_1){return isc.EH.getEventTargetCanvas(null,_1)},isc.A.getRelativeLocator=function isc_c_AutoTest_getRelativeLocator(_1,_2){var _3=this.locateCanvasFromDOMElement(_2),_4=this.getRelativeCanvasLocator(_1,_3)+"/"+_3.getInteriorLocator(_2);return _4},isc.A.isRelativeLocator=function isc_c_AutoTest_isRelativeLocator(_1){return(!_1.startsWith("//"))},isc.A.getRelativeCanvasLocator=function isc_c_AutoTest_getRelativeCanvasLocator(_1,_2){if(_1==_2)return"";var _3=_2,_4=[];while(_3!=_1){var _5=_3.getLocatorParent();if(_5==null){this.logWarn("Unexpected error: attempting to get relative locator from baseCompoenent:"+_1+" and target:"+_2+". Unable to determine relationship between these objects.");return""}
var _6=_5.getChildLocator(_3);_4.add(_6);_3=_5}
var _7="";for(var i=_4.length-1;i>=0;i--){_7+=_4[i];if(i!=0)_7+="/"}
return _7},isc.A.getRelativeObjectLocator=function isc_c_AutoTest_getRelativeObjectLocator(_1,_2){var _3=this.$90w(_2);var _4=this.getRelativeCanvasLocator(_1,_3);if(_3==_2){return _4}
var _5=_3.getObjectLocator(_2);if(_5!=null)_4+="/"+_5;return _4},isc.A.$90w=function isc_c_AutoTest__getCanvasForSCObject(_1){if(_1.$75r!=null)_1=_1.$75r;if(_1.isSectionHeader){return _1.parentElement}
if(isc.FormItem&&isc.isA.FormItem(_1))return _1.form;if(isc.isA.Canvas(_1))return _1;this.logWarn("getRelativeLocatorObject() passed target object:"+this.echo(_1)+" This is not a recognized supported SmartClient object - expected to be a Canvas, FormItem or SectionStackSection only");return null},isc.A.getElement=function isc_c_AutoTest_getElement(_1){return this.getAttribute(_1,isc.Canvas.$95j)},isc.A.getObject=function isc_c_AutoTest_getObject(_1){return this.getAttribute(_1,isc.Canvas.$95k)},isc.A.getValue=function isc_c_AutoTest_getValue(_1){return this.getAttribute(_1,isc.Canvas.$95l)},isc.A.getAttribute=function isc_c_AutoTest_getAttribute(_1,_2){if(!_1)return null;_1=_1.replace(/^(scLocator|ScID)=/i,"");if(_1.startsWith("'")||_1.startsWith('"'))_1=_1.substring(1);if(_1.endsWith("'")||_1.endsWith('"'))_1=_1.substring(0,_1.length-1);if(!_1.startsWith("//")){if(_1.startsWith("ID=")||_1.startsWith("id=")){_1=_1.substring(3)}
_1='//*any*[ID="'+_1+'"]'}
var _3=_1.split("/"),_4;var _5=_3[2];if(!_5)return null;_3=_3.slice(3);var _6={attribute:_2},_7=this.getBaseComponentFromLocatorSubstring(_5,_6);if(!_7)return null;return _7.getAttributeFromSplitLocator(_3,_6)},isc.A.resolveRelativeLocator=function isc_c_AutoTest_resolveRelativeLocator(_1,_2){var _3=_2.split("/");return _1.getAttributeFromSplitLocator(_3,{attribute:isc.Canvas.$95j})},isc.A.resolveRelativeObjectLocator=function isc_c_AutoTest_resolveRelativeObjectLocator(_1,_2){var _3=isc.isAn.Array(_2)?_2:_2.split("/");return _1.getAttributeFromSplitLocator(_3,{attribute:isc.Canvas.$95k})},isc.A.getPageCoords=function isc_c_AutoTest_getPageCoords(_1){var _2=this.getElement(_1);if(_2==null)return;var _3=this.locateCanvasFromDOMElement(_2);return _3?_3.getAutoTestLocatorCoords(_1,_2):null},isc.A.getBaseComponentFromLocatorSubstring=function isc_c_AutoTest_getBaseComponentFromLocatorSubstring(_1,_2){var _3=_1.match("(.*)\\[");var _4=_3?_3[1]:null;switch(_4){case"autoID":var _5=isc.AutoTest.parseLocatorFallbackPath(_1),_6=_5.config,_7="name",_8="Class";var _9=isc.Canvas.getCanvasFromFallbackLocator(_1,_6,isc.Canvas.$tw,_7,_8);if(_9==null){this.setLogFailureText(true,"there's no top level Canvas identifiable by name or Class from fallback locator '"+_1+"' for locator")}
return _9;case"testRoot":if(this.testRoot==null){this.logWarn("Unable to process scLocators starting with "+this.$119l+"... when no test root canvas has been configured");return null}
return this.testRoot;case"Menu":if(!isc.Menu){this.setLogFailureText(true,"the Menu module is required to resolve locator");return null}
var _10=_1.match(/Menu\[level=(.*)(,.*)?\]/i),_11=_10?_10[1]:null;if(_11!=null){var _12=isc.Menu.getMenuAtLevel(_11);if(_12==null){this.setLogFailureText(true,"there is no Menu corresponding to level '"+_11+"' for locator")}
return _12}
default:var _13=_4,_3=_1.match('\\[ID=[\\"\'](.*)[\'\\"](,.*)?\\]'),_14=_3?_3[1]:null;if(_14==null){this.setLogFailureText(true,"there appears to be a problem with the syntax for locator");return null}
if(_3[2])this.installLocatorConfiguration(_3[2],_2);var _15=window[_14];if(!_15){this.setLogFailureText(true,"there is no "+_13+"with ID '"+_14+"' for locator");return null}
if(_15&&_13!="*any*"&&(!isc.isA[_13]||!isc.isA[_13](_15)))
{this.logWarn("AutoTest.getElement(): Component:"+_15+" expected to be of class:"+_13)}
return _15}},isc.A.installLocatorConfiguration=function isc_c_AutoTest_installLocatorConfiguration(_1,_2){if(!_1)return;var _3=_1.split(",");for(var i=0;i<_3.length;i++){var _5=_3[i].trim().match("([^=]*)=([^=]*)");if(_5)_2[_5[1]]=_5[2]}},isc.A.getLocatorCanvas=function isc_c_AutoTest_getLocatorCanvas(_1){if(_1==null||isc.isAn.emptyString(_1))return null;var _2=_1.split("/"),_3;if(_2==null||_2.length<3)return null;var _4=_2[2];var _5=_2.length;for(var i=3;i<_5;i++){_2[i-3]=_2[i]}
_2.length=_5-3;if(!_4)return null;var _7=this.getBaseComponentFromLocatorSubstring(_4);if(_7){var i=0,_8=_7.getChildFromLocatorSubstring(_2[i],i,_2);while(_8!=null){i++;_7=_8;_8=_7.getChildFromLocatorSubstring(_2[i],i,_2)}
return _7}
return null},isc.A.getLocatorFormItem=function isc_c_AutoTest_getLocatorFormItem(_1){if(_1==null||isc.isAn.emptyString(_1))return null;var _2=_1.split("/"),_3;if(_2==null||_2.length<3)return null;var _4=_2[2];var _5=_2.length;for(var i=3;i<_5;i++){_2[i-3]=_2[i]}
_2.length=_5-3;if(!_4)return null;var _7=this.getBaseComponentFromLocatorSubstring(_4);if(_7){var _8=_7.getChildFromLocatorSubstring(_2[0],0,_2);while(_8!=null){_2.removeAt(0);_7=_8;_8=_7.getChildFromLocatorSubstring(_2[0],0,_2)}}
if(isc.isA.DynamicForm(_7)){return _7.getItemFromSplitLocator(_2)}
return null},isc.A.createLocatorFallbackPath=function isc_c_AutoTest_createLocatorFallbackPath(_1,_2){var _3=[];for(var _4 in _2){var _5=_2[_4];if(isc.isA.String(_5)){_5=_5.replaceAll("/",this.slashMarker);_5=escape(_5)}
if(_4==this.fallback_valueOnlyField){_3.add(_5)}else{_3.add(_4+this.fallback_equalMarker+_5)}}
return _1+this.fallback_startMarker+_3.join(this.fallback_separator)+this.fallback_endMarker},isc.A.$1232=function isc_c_AutoTest__compareLocatorFallbackConfigValues(_1,_2){if(isc.isA.Number(_1)||isc.isA.Boolean(_1))_1=_1.toString();if(isc.isA.Number(_2)||isc.isA.Boolean(_2))_2=_2.toString();return _1==_2},isc.A.parseLocatorFallbackPath=function isc_c_AutoTest_parseLocatorFallbackPath(_1){var _2=_1.split(this.fallback_startMarker);if(_2==null||_2.length<2)return;var _3=_2[0],_1=_2[1].substring(0,_2[1].length-this.fallback_endMarker.length);var _4=_1.split(this.fallback_separator),_5={};for(var i=0;i<_4.length;i++){var _7=_4[i],_8=_7.indexOf(this.fallback_equalMarker),_9;if(_8==-1){_9=this.fallback_valueOnlyField}else{_9=_7.substring(0,_8);_7=_7.substring(_8+1)}
_7=unescape(_7);_7=_7.replaceAll(this.slashMarker,"/");_5[_9]=_7}
if(_2[2]!=null){var _7=_2[2].substring(0,_2[2].length-this.fallback_endMarker.length),_8=_7.indexOf(this.fallback_equalMarker),_10=_7.substring(0,_8),_11=_7.substring(_8+1);if(_11.startsWith("\""))_11=_11.substring(1,_11.length-1);_5[_10]=_11}
return{name:_3,config:_5}},isc.A.getObjectLocatorFallbackPath=function isc_c_AutoTest_getObjectLocatorFallbackPath(_1,_2,_3,_4){if(_3==null)_3={};if(_4==null)_4={title:"title",Class:"ClassName"};if(isc.isAn.Array(_4)){for(var i=0;i<_4.length;i++){var _6=_2.getProperty?_2.getProperty(_4[i]):_2[_4[i]];if(_6!=null&&!isc.isAn.emptyString(_6))_3[_4[i]]=_6}}else{for(var _7 in _4){var _6=_2.getProperty?_2.getProperty(_4[_7]):_2[_4[_7]];if(_6!=null&&!isc.isAn.emptyString(_6))_3[_7]=_6}}
return isc.AutoTest.createLocatorFallbackPath(_1,_3)},isc.A.logRobustLocatorWarning=function isc_c_AutoTest_logRobustLocatorWarning(){if(this.$75z)return;this.logWarn(this.robustLocatorWarning,"AutoTest");this.$75z=true},isc.A.createDetailViewerForTestResults=function isc_c_AutoTest_createDetailViewerForTestResults(_1,_2){var _3=isc.Browser.seleniumPresent;return isc.DetailViewer.create({ID:"isc_AutoTest_DetailViewer",left:_1.getWidth()-300,canDragReposition:true,width:280,showEmptyField:false,blockSeparator:"<BR>",autoDraw:true,fields:[{name:"result",valueMap:{failure:"<font style='color:red;'>failure</font>",disabled:"<font style='color:blue;'>disabled</font>"}},{name:"description",escapeHTML:true,formatCellValue:function(_5,_6){_5=_5.replace(/\s+/g," ");_5=_5.replace(/\<P\>/gi,"   ");var _4=!_3||!_6._autoAssignedID;if(_6.ID&&_4)_5=_6.ID+": "+_5;if(_5.length>250)_5=_5.substring(0,250)+"...";return _5}},{name:"detail",escapeHTML:true}],data:_2})},isc.A.setLogFailureForReturnValue=function isc_c_AutoTest_setLogFailureForReturnValue(_1,_2,_3,_4){var _5,_6=_1.emptyLocatorArray(_2)?"directly with":"with the locator suffix '"+_2.join("/")+"' of";_1.setLogFailureText(true,"there is no "+_4+" associated "+_6);return _3},isc.A.getAttributeDefault=function isc_c_AutoTest_getAttributeDefault(_1,_2){switch(_2){case isc.Canvas.$95j:return _1?_1.$1304():null;case isc.Canvas.$95k:return _1?_1:null;case isc.Canvas.$95l:return}});isc.B._maxIndex=isc.C+29;isc.ApplyAutoTestMethods=function(){isc.Canvas.addClassMethods({$95j:"element",$95k:"object",$95l:"value",getCanvasFromFallbackLocator:function Canvas_getCanvasFromFallbackLocator(_209,_33,_34,_35,_36){var _1=_33.name;var _2=_33.Class,_3=_33.scClass||_33.Class,_4=_33.scRole;switch(_35){case"name":if(_1!=null){var _5=_34.find("name",_1);if(this.isValidFallbackLocatorCandidate(_5)){switch(_36){case"Class":if(_2&&isc.isA[_2]&&isc.isA[_2](_5)){if(this.logIsDebugEnabled("AutoTest")){this.logDebug("Locator string:"+_209+" - returning widget with matching name and ClassName:"+_5,"AutoTest")}
return _5}
case"scClass":if(_3&&isc.isA[_3]&&isc.isA[_3](_5))
{if(this.logIsDebugEnabled("AutoTest")){this.logDebug("Locator string:"+_209+" - returning widget with matching name and scClassName:"+_5,"AutoTest")}
return _5}
case"role":var _6=_33.scRole;if(_5.ariaRole==_6){if(this.logIsDebugEnabled("AutoTest")){this.logDebug("Locator string:"+_209+" - returning widget with matching name and role:"+_5,"AutoTest")}
return _5}
default:if(_36!="none"){isc.AutoTest.logRobustLocatorWarning();this.logWarn("Locator string:"+_209+". Returning closest match:"+_5+". This has the same name as the recorded component but does not match class or role. ","AutoTest")}else{if(this.logIsDebugEnabled("AutoTest")){this.logDebug("Locator string:"+_209+" - returning widget with matching name:"+_5,"AutoTest")}}
return _5}}}
case"title":var _7=_33.title;if(_7!=null){var _8=_34.findAll("title",_7)||[];_8=_8.filter(this.isValidFallbackLocatorCandidate);if(_8.length>0){var _9;switch(_36){case"Class":if(_2){var _10=_8.findAll("Class",_2);if(_10!=null){_9=_10[0];if(_10.length==1&&_9){if(this.logIsDebugEnabled("AutoTest")){this.logDebug("Locator string:"+_209+" - returning widget with matching title and ClassName:"+_9,"AutoTest")}
return _9}}}
case"scClass":if(_3){var _10=_8.findAll("$75y",_3);if(_10!=null){if(_10.length==1||_9==null)
_9=_10[0];if(_10.length==1&&_9){if(this.logIsDebugEnabled("AutoTest")){this.logDebug("Locator string:"+_209+" - returning widget with matching name and scClassName:"+_9,"AutoTest")}
return _9}}}
case"role":if(_4){var _10=_8.findAll("ariaRole",_4);if(_10!=null){if(_10.length==1||_9==null)
_9=_10[0];if(_10.length==1&&_9){if(this.logIsDebugEnabled("AutoTest")){this.logDebug("Locator string:"+_209+" - returning widget with matching title and role:"+_9,"AutoTest")}
return _9}}}
default:if(_8.length==1){if(_36!="none"){isc.AutoTest.logRobustLocatorWarning();this.logWarn("Locator string:"+_209+". Returning closest match:"+_8[0]+". This has the same title as the recorded component but does not match class or role.","AutoTest")}else{if(this.logIsDebugEnabled("AutoTest")){this.logDebug("Locator string:"+_209+" - returning widget with matching title:"+_9,"AutoTest")}}
return _8[0]}else{this.logWarn("Locator string:"+_209+", attempt to match by title failed -- multiple candidate components have this same title. Attempting to match by index instead.","AutoTest")}}}}
default:var _11,_12,_13;switch(_36){case"Class":if(_2&&_33.classIndex){var _14=_34.findAll("Class",_2);if(_14&&_14.length>0){_11=_14[parseInt(_33.classIndex)];if(_14.length==parseInt(_33.classLength)){if(this.logIsInfoEnabled("AutoTest")){this.logInfo("Locator string:"+_209+" - returning widget with matching ClassName / index by ClassName:"+_11,"AutoTest")}
return _11}}}
case"scClass":if(_3&&_33.scClassIndex){var _15=_34.findAll("$75y",_3);if(_15&&_15.length>0){_12=_15[parseInt(_33.scClassIndex)];if(_15.length==parseInt(_33.scClassLength)){if(this.logIsInfoEnabled("AutoTest")){this.logInfo("Locator string:"+_209+" - returning widget with matching SmartClient superclass / index by ClassName:"+_12,"AutoTest")}
return _12}}}
case"role":if(_4&&_33.roleIndex){var _16=_34.findAll("ariaRole",_4);if(_16&&_16.length>0){_13=_16[parseInt(_33.roleIndex)];if(_16.length==parseInt(_33.roleLength)){if(this.logIsInfoEnabled("AutoTest")){this.logInfo("Locator string:"+_209+" - returning widget with matching role / index by role:"+_13,"AutoTest")}
return _13}}}
default:if((_36!="none"&&(_2||_3||_4))||(_33.length!=null&&(parseInt(_33.length)!=_34.length)))
{isc.AutoTest.logRobustLocatorWarning()}
var _17=_11||_12||_13;if(_17==null){var _18=_33[isc.AutoTest.fallback_valueOnlyField];if(_18==null)_18=_33.index;_18=parseInt(_18);_17=_34[_18]}
if(_17){this.logWarn("Locator string:"+_209+" matching by index gave "+_17+". Reliability cannot be guaranteed for matching by index if the underlying application undergoes any changes.","AutoTest");return _17}}}
this.logDebug("AutoTest.getElement(): locator substring:"+_209+" parsed to fallback locator name:"+_1+", unable to find relevant child - may refer to inner element.","AutoTest")},isValidFallbackLocatorCandidate:function
Canvas_isValidFallbackLocatorCandidate(_209){return _209&&!_209.destroyed&&_209.isVisible()&&_209.isDrawn()}});isc.Class.addClassMethods({getCanvasLocatorFallbackPath:function Class_getCanvasLocatorFallbackPath(_1,_59,_209,_210,_211){if(_210==null)_210={};if(_211==null)_211={};else if(isc.isAn.Array(_211)){var _19={};for(var i=0;i<_211.length;i++){_19[_211[i]]=_211[i]}
_211=_19}
if(_211.title==null)_211.title="title";if(_211.scRole==null)_211.scRole="ariaRole";if(_211.name==null)_211.name="name";var _21=_59.getClass(),_22=_59.getClassName();_210.Class=_22;var _3;if(!_21.isFrameworkClass){_3=_21.$750}
if(_3!=null)_210.scClass=_3;if(_209!=null){_210.index=_209.indexOf(_59);_210.length=_209.length;var _23=_209.findAll("Class",_22);_210.classIndex=_23.indexOf(_59);_210.classLength=_23.length;if(_3!=null){var _24=_209.findAll("$75y",_3);_210.scClassIndex=_24.indexOf(_59);_210.scClassLength=_24.length}
if(_59.ariaRole!=null){var _25=_209.findAll("ariaRole",_59.ariaRole);_210.roleIndex=_25.indexOf(_59);_210.roleLength=_25.length}}
return isc.AutoTest.getObjectLocatorFallbackPath(_1,_59,_210,_211)}});isc.Class.addMethods({getChildLocatorStrategy:function class_getChildLocatorStrategy(_209){if(isc.AutoTest.locStrategyNames==null){isc.AutoTest.locStrategyNames={}}
var _26=isc.AutoTest.locStrategyNames[_209];if(_26==null){var _27=_209;if(isc.isA.String(this.$558[_209])){_27=this.$558[_209]}
_26=isc.AutoTest.locStrategyNames[_209]="locate"+_27.substring(0,1).toUpperCase()+_27.substring(1)+"By"}
return this[_26]},getChildLocatorTypeStrategy:function class_getChildLocatorTypeStrategy(_209){if(isc.AutoTest.locStrategyTypes==null){isc.AutoTest.locStrategyTypes={}}
var _26=isc.AutoTest.locStrategyTypes[_209];if(_26==null){var _27=_209;if(isc.isA.String(this.$558[_209])){_27=this.$558[_209]}
_26=isc.AutoTest.locStrategyTypes[_209]="locate"+_27.substring(0,1).toUpperCase()+_27.substring(1)+"Type"}
return this[_26]},getAutoChildLocator:function class_getAutoChildLocator(_209){if(this.$542){var _28=_209.getID();for(var _29 in this.$542){var _30=this.$542[_29];if(_30.contains(_28)){if(_209==this[_29])return _29;else{var _31=[];for(var i=0;i<_30.length;i++){_31[i]=window[_30[i]]}
return this.getCanvasLocatorFallbackPath(_29,_209,_31)}}}}
return null},getChildFromFallbackLocator:function class_getChildFromFallbackLocator(_209,_60){var _32=_60.name,_33=_60.config;if(this==isc.AutoTest.testRoot&&this.getScClassName()=="Canvas"){if(_32=="member")_32="child"}
var _34=this.getFallbackLocatorCandidates(_32);if(_34&&_34.length>0){var _35=this.getChildLocatorStrategy(_32);if(_35==null)_35="name";var _36=this.getChildLocatorTypeStrategy(_32);if(_36==null)_36="Class";var _17=isc.Canvas.getCanvasFromFallbackLocator(_209,_33,_34,_35,_36);if(_17!=null)return _17}
this.logDebug("AutoTest.getElement(): locator substring:"+_209+" parsed to fallback locator name:"+_32+", unable to find relevant child - may refer to inner element.","AutoTest")},getFallbackLocatorCandidates:function class_getFallbackLocatorCandidates(_1){var _34;if(this.$542!=null&&this.$542[_1]!=null){var _37=this.$542[_1];_34=[];for(var i=0;i<_37.length;i++){_34[i]=window[_37[i]]}}else if(isc.isA.String(this.$558[_1])){_34=this[this.$558[_1]]}else if(this[_1]&&isc.isAn.Array(this[_1])){_34=this[_1]}
return _34},getCanvasLocatorFallbackPath:function class_getCanvasLocatorFallbackpath
(_1,_59,_209,_210,_211){return isc.Canvas.getCanvasLocatorFallbackPath(_1,_59,_209,_210,_211)},setLogFailureText:function class_setLogFailureText(_87,_73,_74){var _38=isc.Class.getPrototype().setLogFailureText.caller||arguments.callee.caller,_39=_38.name||isc.Func.getName(_38,true),_40=_39.replace(/^.*[_]+([^_]+)/,"\137$1")+"Log";if(isc.AutoTest[_40])return;isc.AutoTest[_40]=this.$130m(_87,_73,_74)},$130k:function class__getDescription(_87){var _41=false,_42=this.hasStableID(),_43=this.getScClassName();if(_87==true){_87=false;_41=true}
if(_42)_43+=" with ID "+this.ID;else if(!isc.isA.String(_87))_87=this.getLocator();if(_87)_43+=" identified by "+_87;if(_41)_43+=isc.AutoTest.$130l(_87);return _43},$130m:function class__getLogFailureText(_87,_73,_74){var _43="the "+this.$130k(_87);if(_74&&!_74.match(/^[.,;:\\s]/))_74=" "+_74;if(_73)_43=_73+" "+_43;if(_74)_43+=_74;return _43},hasStableID:function class_hasStableID(){if(this._autoAssignedID)return false;var _44=this.creator||this.locatorParent;if(_44!=null)return _44.hasStableID();return true}});isc.Canvas.addMethods({getLocator:function canvas_getLocator(_64,_209,_131){var _45=this.getLocatorInternal();if(!_64)return _45;return[_45,this.getInteriorLocator(_64,_209,_131)].join("/")},getLocatorInternal:function canvas_getLocatorInternal(_209,_210){var _46,_47;var _48=_209?null:isc.AutoTest.testRoot;if(_48!=this){if(this._generated||this.locatorParent||this.creator||!this.hasStableID()){_46=this.getLocatorParent()}
if(_48!=null&&_46==null){if(!_210){_210=true;_47=this.getLocatorInternal(true)}
_46=this.getLocatorParent()}}
var _45=!_46?this.getLocatorRoot():_46.getLocatorInternal(false,_210)+"/"+_46.getChildLocator(this);return _47!=null&&!_45.startsWith(isc.AutoTest.$119l)?_47:_45},getObjectLocator:function canvas_getObjectLocator(_209){},$549:["//",,'[ID="',,'"]'],getLocatorRoot:function canvas_getLocatorRoot(){if(!this.locatorRoot){if(this==isc.AutoTest.testRoot){this.locatorRoot=isc.AutoTest.$119l}else if(!this.hasStableID()&&this.parentElement==null){this.locatorRoot="//"+isc.Canvas.getCanvasLocatorFallbackPath("autoID",this,isc.Canvas.$tw)}else{this.$549[1]=this.getClassName();this.$549[3]=this.getID();this.locatorRoot=this.$549.join(isc.emptyString)}}
return this.locatorRoot},containsLocatorChild:function canvas_containsLocatorChild(_59){if(this.namedLocatorChildren!=null){for(var i=0;i<this.namedLocatorChildren.length;i++){var _1=this.namedLocatorChildren[i];if(isc.isAn.Object(_1))_1=_1.attribute;if(_59==this[_1]){return true}}}
return false},getLocatorParent:function canvas_getLocatorParent(){if(this.locatorParent&&this.locatorParent.containsLocatorChild&&this.locatorParent.containsLocatorChild(this))
{return this.locatorParent}
if(this.creator&&(isc.isA.Canvas(this.creator)||isc.isA.FormItem(this.creator))){var _49=this.creator.getAutoChildLocator(this);if(_49==null){this.logInfo("Locator code failed to find relationship between parent:"+this.creator.getID()+" and autoChild:"+this.getID(),"AutoTest")}else{return this.creator}}
return this.masterElement||this.parentElement},$55a:[,"[",,'][Class="',,'"]'],getChildLocator:function canvas_getChildLocator(_59){if(_59==this.hscrollbar){return"hscrollbar"}
if(_59==this.vscrollbar){return"vscrollbar"}
if(_59.creator==this){var _50=this.getAutoChildLocator(_59);if(_50)return _50}
return this.getStandardChildLocator(_59)},checkLocatorForNativeElement:function canvas_checkLocatorForNativeElement(_87,_64){if(_64==null||_87==null)return false;return(isc.EventHandler.eventHandledNatively("mousedown",_64,true)&&(isc.AutoTest.getElement(_87)!=_64))},getNamedLocatorChildString:function canvas_getNamedLocatorChildString(_59){if(_59.locatorParent==this&&this.namedLocatorChildren){for(var i=0;i<this.namedLocatorChildren.length;i++){var _1=this.namedLocatorChildren[i],_26=_1;if(isc.isA.Object(_1)){_26=_1.attribute,_1=_1.name}
if(_59==this[_26]){return _1}}}},getStandardChildLocator:function canvas_getStandardChildLocator(_59){var _51=this.getNamedLocatorChildString(_59);if(_51)return _51;if(_59.getMasterCanvas()==this){return this.getCanvasLocatorFallbackPath("peer",_59,this.peers)}else if(_59.getParentCanvas()==this){return this.getCanvasLocatorFallbackPath("child",_59,this.children)}else{this.logWarn("unexpected error - failed to find relationship between parent:"+this.getID()+" and child:"+_59.getID());return _59.getLocatorRoot()}},getInteriorLocator:function canvas_getInteriorLocator(_64,_209,_131){if(_64&&this.useEventParts){var _52=this.getElementPart(_64);if(_52!=null&&_52.part!=null){return(_52.partID&&_52.partID!=isc.emptyString)?_52.part+"_"+_52.partID:_52.part}}
if(_131&&this.canDragResize){var _53=this.getEventEdge(null,_131);if(_53)return _53}
return isc.emptyString},getAttributeFromSplitLocator:function canvas_getAttributeFromSplitLocator(_133,_209){var _54=_209.attribute,_55=this.getChildFromLocatorSubstring(_133[0],0,_133,_209);if(_209.value!=null)return _209.value;if(_55){_133.removeAt(0);return _55.getAttributeFromSplitLocator(_133,_209)}
if(_54==isc.Canvas.$95k&&!isc.isA.DynamicForm(this))return this;return this.getInnerAttributeFromSplitLocator(_133,_209)},getChildFromLocatorSubstring:function canvas_getChildFromLocatorSubstring(_209,_18,_133){if(_209==null||_209=="")return null;var _56,_57=_209.indexOf("[0]",_209.length-"[0]".length);if(_57!==-1){_56=_209.substr(0,_57)}else{_56=_209}
if(isc.isA.Canvas(this[_56])){return this[_56]}
if(this.namedLocatorChildren!=null){var _58=this.namedLocatorChildren.find("name",_56);if(_58!=null){var _59=this[_58.attribute];if(isc.isA.Canvas(_59))return _59;this.logWarn("Locator substring:"+_209+" remaps to attribute:"+_58.attribute+" but no canvas exists under that attribute name.","AutoTest")}}
var _60=isc.AutoTest.parseLocatorFallbackPath(_209);if(_60!=null){var _55=this.getChildFromFallbackLocator(_209,_60);if(_55==null){this.setLogFailureText(true,null,"has no child identifiable by the fallback locator '"+_209+"'")}
return _55}
return null},$558:{peer:"peers",child:"children"},emptyLocatorArray:function canvas_emptyLocatorArray(_133){return _133==null||_133.length==0||(_133.length==1&&_133[0]=="")},getInnerAttributeFromSplitLocator:function canvas_getInnerAttributeFromSplitLocator(_133,_209){if(_209.attribute==isc.Canvas.$95l){if(isc.Label&&isc.isA.Label(this)||(isc.HTMLFlow&&isc.isA.HTMLFlow(this))&&(isc.EventWindow&&isc.isA.EventWindow(this.parentElement)))
{var _61=this.getContents();if(_61)return _61}
this.setLogFailureText(true,"the trailing locator suffix '"+_133.join("/")+"' does not identify any meaningful part of");return}
if(!this.emptyLocatorArray(_133)){if(_133.length==1){var _62=_133[0].split("_");var _63={part:_62[0],partID:_62[1]};var _64=this.getPartElement(_63);if(_64)return _64;if(this.$126x(_63.part))return this.$1304()}
if(_209.locatorMatching!="permissive"){this.setLogFailureText(true,"the trailing locator suffix '"+_133.join("/")+"' does not identify any AutoChild or Event Part of","and permissive mode is not active");return null}}
return this.$1304()},getAutoTestLocatorCoords:function canvas_getAutoTestLocatorCoords(_87,_64){if(_87==null||_64==null)return null;if(this.getHandle()==_64)_64=this.getClipHandle();var _65=isc.Element.getElementRect(_64);var _66=_65[0],_67=_65[2];var _68=_65[1],_69=_65[3];var _70=_87.split("/").last(),_71=this.$126x(_70);if(_71&&_70.contains("B"))_68+=_69;else if(!_71||!_70.contains("T"))_68+=Math.floor(_69/2);if(_71&&_70.contains("R"))_66+=_67;else if(!_71||!_70.contains("L"))_66+=Math.floor(_67/2);return[_66,_68]},$1304:function canvas__getHandleAndLogFailure(){var _72=this.getHandle();if(_72!=null)return _72;var _73="null",_74;if(!this.isDrawn())_74="which is not drawn";else if(!this.handleDrawn())_73="not drawn";_73="the DOM element handle is "+_73+" for";this.setLogFailureText(true,_73,_74)},$126x:function canvas__isValidEdge(_209){var _75=this.edgeCursorMap;return _209&&_75!=null&&_75[_209]!=null},$124j:function canvas__isProcessingDone(_209){if(_209&&!this.isDrawn())return true;return isc.AutoTest.isCanvasDone(this)!=false}});if(isc.Scrollbar){isc.Scrollbar.addMethods({getPartElement:function scrollbar_getPartElement(_52){if(_52.part=="start"){return this.getImage(this.startImg.name)}else if(_52.part=="end"){return this.getImage(this.endImg.name)}
return this.Super("getPartElement",arguments)}})}
if(isc.Layout){isc.Layout.addProperties({getStandardChildLocator:function canvas_getStandardChildLocator(_59){var _51=this.getNamedLocatorChildString(_59);if(_51)return _51;if(this.members.contains(_59)){return this.getCanvasLocatorFallbackPath("member",_59,this.members)}
return this.Super("getStandardChildLocator",arguments)},$558:{member:"members",peer:"peers",child:"children"}})}
if(isc.Window){isc.Window.addProperties({containsLocatorChild:function window_containsLocatorChild(_59){if(this.items&&this.items.contains(_59))return true;return this.Super("containsLocatorChild",arguments)},getStandardChildLocator:function window_getStandardChildLocator(_59){if(this.items&&this.items.contains(_59)){var _76=this.$55a;_76[0]="item";_76[2]=this.items.indexOf(_59);_76[4]=_59.getClassName();return _76.join(isc.emptyString)}
return this.invokeSuper(isc.Window,"getStandardChildLocator",_59)},$558:{item:"items",member:"members",peer:"peers",child:"children"}})}
if(isc.Dialog){isc.Dialog.addProperties({$130k:function dialog__getDescription(_87){var _7=this.title||"",_77=this.message||"",_43=this.Super("$130k",arguments);if(_7!="")_43="'"+_7+"' "+_43;if(this.isModal)_43="modal "+_43;if(_77!="")_43+=" with message \""+_77+"\"";return _43}})}
if(isc.SectionStack){isc.ImgSectionHeader.changeDefaults("$558",{item:"items"});isc.SectionHeader.changeDefaults("$558",{item:"items"});isc.SectionStack.changeDefaults("$558",{section:"sections"});isc.SectionStack.addProperties({getObjectLocator:function sectionStack_getObjectLocator(_209){if(_209.getSectionHeader)_209=_209.getSectionHeader();if(_209.isSectionHeader){var _78=this.getStandardChildLocator(_209);_78+="/objectType=Section";return _78}
return this.Super("getObjectLocator",arguments)},getStandardChildLocator:function sectionStack_getStandardChildLocator(_59){var _79=this.sections||[],_80;for(var i=0;i<_79.length;i++){var _81=_79[i].items,_82,_83;if(_59==_79[i]){_82=_59}else if(_81&&_81.contains(_59)){_82=_79[i];_83=_59}
if(_82!=null){_80=this.getCanvasLocatorFallbackPath("section",_82,this.sections)}
if(_83!=null){_80+="/"+this.getCanvasLocatorFallbackPath("item",_83,_82.items)}
if(_80!=null)return _80}
return this.Super("getStandardChildLocator",arguments)}});isc.SectionHeader.addProperties({getAttributeFromSplitLocator:function sectionHeader_getAttributeFromSplitLocator
(_133,_209){if(!this.emptyLocatorArray(_133)&&_133[0]=="background"){_133.removeAt(0)}
return this.Super("getAttributeFromSplitLocator",arguments)}})}
if(isc.StretchImg){isc.StretchImg.addProperties({getInteriorLocator:function stretchImg_getInteriorLocator(_64,_209){var _84=_64,_72=this.getHandle(),_85=this.getCanvasName();while(_64&&_64!=_72&&_64.getAttribute){var _28=_64.getAttribute("name");if(_28&&_28.startsWith(_85)){return _28.substring(_85.length)}
_64=_64.parentNode}
return this.Super("getInteriorLocator",[_84,_209])},getInnerAttributeFromSplitLocator:function stretchImg_getInnerAttributeFromSplitLocator(_133,_209){if(_209.attribute==isc.Canvas.$95j){if(!this.emptyLocatorArray(_133)&&_133.length==1){var _86=this.getImage(_133[0]);if(_86)return _86}}
return this.Super("getInnerAttributeFromSplitLocator",arguments)}})}
if(isc.Slider){isc.Slider.addMethods({getInteriorLocator:function slider_getInteriorLocator(_64,_209,_131){var _87=this.Super("getInteriorLocator",_64,_209);if(_87==isc.emptyString&&_131!=null){var _88=this.$1260(false,_131);if(_88)_87="targetValue["+_88+"]"}
return _87},getInnerAttributeFromSplitLocator:function slider_getInnerAttributeFromSplitLocator(_133,_209){switch(_209.attribute){case isc.Canvas.$95j:if(_133.length==1||_133.length==2&&_133[0].startsWith("track[")){if(_133[_133.length-1].startsWith("targetValue[")){return this.$1304()}}
break;case isc.Canvas.$95l:return this.getValue()}
return this.Super("getInnerAttributeFromSplitLocator",arguments)},getAutoTestLocatorCoords:function slider_getAutoTestLocatorCoords(_87,_64){if(_87==null||_64==null)return null;var _89=_87.split("/").last();if(_89.startsWith("targetValue[")){var _90=parseFloat(_89.replace(/.*\[([\d-+.eE]+)\]$/,"$1"));if(isc.isA.Number(_90)){var _91=this.$1261(_90);if(this.getHandle()==_64)_64=this.getClipHandle();var _65=isc.Element.getElementRect(_64);var _66=_65[0],_67=_65[2];var _68=_65[1],_69=_65[3];if(this.vertical){return[_66+Math.floor(_67/2),_68+Math.min(_91,_69)]}else{return[_66+Math.min(_91,_67),_68+Math.floor(_69/2)]}}}
return this.Super("getAutoTestLocatorCoords",arguments)},getChildFromLocatorSubstring:function(_209,_18,_133,_210){if(_209==null)return null;var _54=_210.attribute;if(_209.startsWith("thumb[")&&_54==isc.Canvas.$95l||_209.startsWith("track["))
{if(_133.length>_18+1&&_133[_18+1].startsWith("targetValue["))
{return null}}
return this.Super("getChildFromLocatorSubstring",arguments)}});isc.Slider.changeDefaults("trackDefaults",{getInnerAttributeFromSplitLocator:function sliderTrack_getInnerAttributeFromSplitLocator(_133,_209){if(!isc.isA.StretchImg(this)&&_133.length>0&&(_133[0]=="stretch"||_133[0]=="start"||_133[0]=="end"))
{_133=[]}
return this.Super("getInnerAttributeFromSplitLocator",[_133,_209],arguments)}})}
if(isc.DynamicForm){isc.DynamicForm.addProperties({getInteriorLocator:function dynamicForm_getInteriorLocator(_64){var _92=isc.DynamicForm._getItemInfoFromElement(_64,this);if(!_92.item)return this.Super("getInteriorLocator",arguments);var _83=_92.item,_87=[this.getItemLocator(_83),'/'];if(_92.overElement)_87[_87.length]="element";else if(_92.overTitle)_87[_87.length]="title";else if(_92.overTextBox)_87[_87.length]="textbox";else if(_92.overControlTable)_87[_87.length]="controltable";else if(_92.overInlineError)_87[_87.length]="inlineerror";else if(_92.overIcon)_87[_87.length]="[icon=\""+_92.overIcon+"\"]";return _87.join(isc.emptyString)},getItemLocator:function dynamicForm_getItemLocator(_83){if(_83.parentItem&&(_83.parentItem!=this)){return this.getItemLocator(_83.parentItem)+"/"+_83.parentItem.getItemLocator(_83)}
var _93={};if(_83.name!=null&&!_83._autoAssignedName)_93.name=_83.name;var _7=_83.getTitle();if(_7!=null)_93.title=_7;var _88=_83.getValue();if(_88!=null)_93.value=_88;_93.index=this.getItems().indexOf(_83);_93.Class=_83.getClassName();var _94=isc.AutoTest.createLocatorFallbackPath("item",_93);return _94},getObjectLocator:function dynamicForm_getObjectLocator(_209){if(isc.isA.FormItem(_209)){var _95=this.getItemLocator(_209);_95+="/objectType=FormItem";return _95}
return this.Super("getObjectLocator",arguments)},containsLocatorChild:function dynamicForm_containsLocatorChild(_59){if(isc.isA.DateChooser(_59)&&_59.callingForm==this)return true;return this.Super("containsLocatorChild",arguments)},getChildLocator:function dynamicForm_getChildLocator(_59){if(_59.canvasItem){var _83=_59.canvasItem;return this.getItemLocator(_83)+"/canvas"}
if(isc.isA.PickListMenu(_59)){var _83=_59.formItem;return this.getItemLocator(_83)+"/pickList"}
if(isc.isA.DateChooser(_59)){var _83=_59.callingFormItem;return this.getItemLocator(_83)+"/picker"}
return this.Super("getChildLocator",arguments)},getItemFromSplitLocator:function dynamicForm_getItemFromSplitLocator(_133){var _96=_133[0],_2;if(_96.contains("[Class=")){var _97=_96.match("item\\[(.+)'\\]\\[Class=\"(.+)\"\\]");_2=_97[1].substring(6,_97[1].length-2);_96=_97[0]}
var _98=isc.AutoTest.parseLocatorFallbackPath(_96);if(_98&&_98.name=="item"&&_98.config!=null){var _33=_98.config;_2=_33.Class;var _83;if(_33.name!=null){_83=this.getItem(_33.name)}else{for(var i=0;i<this.items.length;i++){var _99=this.items[i],_100=_99.locateItemBy;if(_100==null)_100="title";if(_100=="title"&&_33.title!=null&&_99.title==_33.title)
{_83=_99}else if(_100=="value"&&_33.value!=null&&_99.getValue()==_33.value)
{_83=_99}}
if(_83==null){var _18=_33.index;if(isc.isA.String(_18)){if(_18.startsWith("'")||_18.startsWith('"'))
{_18=_18.substring(1)}
_18=parseInt(_18)}
_83=this.items[_18]}}
if(!_83){this.logWarn("AutoTest.getElement(): Unable to find item from locator string:"+_96);return null}
if(!isc.isA[_2]||!isc.isA[_2](_83)){this.logWarn("AutoTest.getElement(): identifier:"+_96+" returned an item of class:"+_83.getClassName())}
return _83}
return null},getInnerAttributeFromSplitLocator:function
dynamicForm_getInnerAttributeFromSplitLocator(_133,_209){if(!this.emptyLocatorArray(_133)){var _83=this.getItemFromSplitLocator(_133);if(_83!=null){_133.removeAt(0);return _83.getAttributeFromSplitLocator(_133,_209)}
if(_209.locatorMatching!="permissive"){this.setLogFailureText(true,"the trailing locator suffix '"+_133.join("/")+"' does not identify any FormItem in","and permissive mode is not active");return null}}
return isc.AutoTest.getAttributeDefault(this,_209.attribute)}});isc.ContainerItem.addProperties({getItemLocator:isc.DynamicForm.getPrototype().getItemLocator,getItemFromSplitLocator:isc.DynamicForm.getPrototype().getItemFromSplitLocator,getInnerAttributeFromSplitLocator:function
containerItem_getInnerAttributeFromSplitLocator(_133,_209){if(!this.emptyLocatorArray(_133)){var _101=this.getItemFromSplitLocator(_133);if(_101!=null){_133.removeAt(0);return _101.getAttributeFromSplitLocator(_133,_209)}}
return this.Super("getInnerAttributeFromSplitLocator",arguments)}});isc.FormItem.addProperties({getChildLocator:function formItem_getChildLocator(_209){if(_209.creator==this){var _50=this.getAutoChildLocator(_209);if(_50)return _50}},getLocator:function formItem_getLocator(){return this.getLocatorInternal()},getLocatorInternal:function formItem_getLocatorInternal(_209,_210){var _102=this.form;return _102.getLocatorInternal(_209,_210)+"/"+_102.getItemLocator(this)},getAttributeFromSplitLocator:function formItem_getAttributeFromSplitLocator(_133,_209){return this.getInnerAttributeFromSplitLocator(_133,_209)},getInnerAttributeFromSplitLocator:function formItem_getInnerAttributeFromSplitLocator(_133,_209){var _103,_54=_209.attribute;if(!this.emptyLocatorArray(_133)){var _63=_133[0];if(_63=="canvas"&&this.canvas){_133.removeAt(0);var _104=this.canvas.getAttributeFromSplitLocator(_133,_209);if(_104!==_103||_54==isc.Canvas.$95j)return _104}
if(_63=="picker"){if(this.picker){_133.removeAt(0);return this.picker.getAttributeFromSplitLocator(_133,_209)}}
if(_63=="pickList"){if(!this.pickList)this.makePickList(false);_133.removeAt(0);return this.pickList.getAttributeFromSplitLocator(_133,_209)}
if(_54==isc.Canvas.$95j){if(_63=="element")return this.getDataElement();if(_63=="title")return this.form.getTitleCell(this);if(_63=="textbox")return this.$15h();if(_63=="controltable")return this.$56a();if(_63=="inlineerror")return this.getInlineErrorHandle();var _105=_63.match("\\[icon='(.+)'\\]");if(_105==null)_105=_63.match('\\[icon="(.+)"\\]');var _106=_105?_105[1]:null;if(_106){var _107=this.$16v(_106);if(_107==null)this.setLogFailureText(true,"there is no Icon Image Element associated with "+_106+" and locator '"+_133.join("/")+"' for");return _107}}
if(this.$542){var _108=this.$903(_63);if(_108){_133.removeAt(0);return _108.getAttributeFromSplitLocator(_133,_209)}}
if(_54==isc.Canvas.$95j){this.setLogFailureText(true,"the trailing locator suffix '"+_133.join("/")+"' does not identify any Event Part of");return}}
switch(_54){case isc.Canvas.$95k:return this;case isc.Canvas.$95l:return this.getValue()}
var _64=this.getFocusElement();if(_64==null)_64=this.$15h();if(_64==null){this.setLogFailureText(true,null,"has no focus or textbox elements")}
return _64},$903:function(_1){var _109=this.$542;if(!_109)return;var _30=_109[_1];if(_30&&_30.length>0){if(this[_1]!=null)return this[_1]}else{var _60=isc.AutoTest.parseLocatorFallbackPath(_1);if(_60!=null){return this.getChildFromFallbackLocator(_1,_60)}}},$558:{button:"buttons"},emptyLocatorArray:isc.Canvas.getPrototype().emptyLocatorArray});isc.HeaderItem.addProperties({locateItemBy:"value"});if(isc.PickListMenu){isc.PickListMenu.addProperties({getLocatorParent:function pickListMenu_getLocatorParent(){if(this.formItem)return this.formItem.form;return this.Super("getLocatorParent",arguments)}})}}
if(isc.GridRenderer){isc.GridRenderer.addProperties({$1306:function gridRenderer__getValidIndices(_209){var _104="; valid row indices are [0, "+this.getTotalRows()+"]";if(_209){_104+=" and valid column indices for the "+this.getScClassName()+" are [0, "+this.fields.length+"]"}
return _104},$1307:function gridRenderer__getTableElementAndLogFailure
(_133,_113,_114){var _64=this.getTableElement(_113,_114);if(_64!=null)return _64;var _103,_110,_1;if(_114!==_103){_110="("+_113+", "+_114+")";_1="position"}else{_110=_113;_1="row"}
var _111=this.$1306(_114!==_103);if(_113<0||_114<0){_110+=", derived from the locator suffix '"+_133.join("/")+"',";if(_114<0){_111="; a negative colNum may indicate a field could not be found"}else{_111="; a negative rowNum may indicate the targeted record is not present, perhaps not yet loaded"}}
this.setLogFailureText(true,_110+" does not represent a valid "+_1+" within",_111);if(this.grid)this.grid.$1308();return null},$1309:function gridRenderer__reportInvalidCellLocator
(_133,_113,_114){var _103,_74,_73="the locator suffix '"+_133.join("/")+"' could not be resolved to a numerical";if(_114!==_103){_73+=" row and column position within";_74="; only able to resolve to ("+_113+", "+_114+")"}else{_73+=" row position within";_74="; detected row as "+_113}
this.setLogFailureText(true,_73,_74);if(this.grid)this.grid.$1308()},getInteriorLocator:function gridRenderer_getInteriorLocator(_64,_209){var _112=this.getCellFromDomElement(_64);if(_112==null)return this.Super("getInteriorLocator",[_64,_209]);var _113=_112[0],_114=_112[1],_87=this.getCellLocator(_113,_114);if(_87!=null&&this.grid!=null&&this==isc.EH.dropTarget){var _115=this.grid.getRecordDropPosition(_113);if(_115!=null)_87+="/"+_115}
return _87},getCellFromDomElement:function gridRenderer_getCellFromDomElement(_64){var _72=this.getHandle(),_116=this.getTableElement();if(!_116)return null;var _117=_116.rows,_118,_119,_112,_120="tr",_121="TR",_122="td",_123="TD";while(_64&&_64!=_116&&_64!=_72){_118=_64.tagName;if(_118==_122||_118==_123){_112=_64}
if(_118==_120||_118==_121){_119=_64}
_64=_64.parentNode}
if(!_119||!_112)return null;var _117=_116.rows,_113,_124;for(var i=0;i<_117.length;i++){if(_117[i]==_119){_113=i;break}}
var _125=_119.cells,_114,_126;for(var i=0;i<_125.length;i++){if(_125[i]==_112){_114=i;break}}
_124=_113+(this.$252||0);_126=_114+(this.$254||0);return[_124,_126]},getCellLocator:function gridRenderer_getCellLocator(_113,_114){return"row["+_113+"]/col["+_114+"]"},getInnerAttributeFromSplitLocator:function
gridRenderer_getInnerAttributeFromSplitLocator(_133,_209){if(_209.attribute==isc.Canvas.$95j){if(this.emptyLocatorArray(_133))return this.$1304();if(_133.length==2){var _112=this.getCellFromLocator(_133[0],_133[1]),_113=_112[0],_114=_112[1];if(isc.isA.Number(_113)&&isc.isA.Number(_114)){if(this.$29p()){this.setLogFailureText(true,null,"is being animated");return null}
return this.$1307(_133,_113,_114)}else{this.$1309(_133,_113,_114)}}}
return this.Super("getInnerAttributeFromSplitLocator",arguments)},getCellFromLocator:function gridRenderer_getCellFromLocator(_178,_155){var _127=_178.replace(/^row.*(?:\|\||\[)([0-9]+)\]$/,"$1"),_128=_155.replace(/^col.*(?:\|\||\[)([0-9]+)\]$/,"$1");return[parseInt(_127),parseInt(_128)]},$124j:function gridRenderer__isProcessingDone(_209){var _129=this.grid&&!_209;if(_129)return this.grid.$124j();else return this.Super("$124j",arguments)}})}
if(isc.ListGrid){isc.ListGrid.addProperties({remapOverRecordPositionAs:isc.ListGrid.AFTER,namedLocatorChildren:["header","frozenHeader","body","frozenBody",{attribute:"$286",name:"editRowForm"},"filterEditor"]});isc.GridBody.addProperties({getInteriorLocator:function gridBody_getInteriorLocator(_64,_209){if(_209){var _30=this.children;if(_30!=null&&_30.length>0){for(var i=0;i<_30.length;i++){var _55=_30[i];if(_55&&_55.eventProxy==this){var _72=_55.getHandle();if(_72!=null){var _130=_64;while(_130!=this.getHandle()&&_130!=null)
{if(_130==_72){var _113=this.getEventRow(),_114=this.getEventColumn();return this.getCellLocator(_113,_114)}
_130=_130.parentNode}}}}}}
return this.Super("getInteriorLocator",arguments)},getAutoTestLocatorCoords:function gridBody_getAutoTestLocatorCoords(_87,_64){var _131=this.Super("getAutoTestLocatorCoords",arguments);if(_131==null)return null;var _132=this.grid,_133=_87.split("/").slice(-3),_115=_133[2];if(_132.$126y(_115)){var _113=_132.getRowNumFromLocator(_133,0);if(isc.isA.Number(_113)){if(_115==isc.ListGrid.OVER&&_132.recordDropAppearance!=isc.ListGrid.OVER&&_132.recordDropAppearance!=isc.ListGrid.BOTH)
{var _134=_132.remapOverRecordPositionAs,_135=_132.$126y(_134);if(isc.TreeGrid&&isc.isA.TreeGrid(_132)){var _136=_132.getRecord(_113);if(_132.canDropOnLeaves||_132.data.isFolder(_136)){_135=false}}
if(_135)_115=_134}
var _137=this.getRowTop(_113),_138=this.getRowSize(_113);switch(_115){case isc.ListGrid.BEFORE:_131[1]-=_138/2;break;case isc.ListGrid.AFTER:_131[1]+=3*_138/8;break}}}
return _131},getCellLocator:function gridBody_getCellLocator(_113,_114){var _132=this.grid;if(_132==null)return this.Super("getCellLocator",arguments);return _132.getCellLocator(this,_113,_114)}});isc.ListGrid.addProperties({testReplayLoggedRows:50,$1308:function listGrid__testReplayDumpRows(){if(!isc.Log.logIsDebugEnabled("testReplay")||!isc.JSON)return;var _139=Math.min(this.testReplayLoggedRows,this.getTotalRows()),_104="The first "+_139+" rows of "+this.$130k()+" are: \n";for(var i=0;i<_139;i++){_104+="#"+(i+1)+": "+isc.JSON.encode(this.getRecord(i))+"\n"}
isc.AutoTest.logDebug(_104.trim(),"testReplay")},getCellLocator:function listGrid_getCellLocator(_154,_113,_114){var _140=this.getRowLocatorOptions(_154,_113,_114),_141=this.getColLocatorOptions(_154,_113,_114);return isc.AutoTest.createLocatorFallbackPath("row",_140)+"/"+isc.AutoTest.createLocatorFallbackPath("col",_141)},getRowLocatorOptions:function listGrid_getRowLocatorOptions(_154,_113,_114){var _142={},_143=this.getFieldNumFromLocal(_114,_154),_144=this.getCellRecord(_113,_143),_145=this.getDataSource();if(_144!=null){if(_145!=null){var _146=_145.getPrimaryKeyFieldNames();for(var i=0;i<_146.length;i++){var _147=_146[i];if(_144[_147]!=null){_142[_147]=_144[_147]}}}
var _148=this.getTitleField();if(_148!=null&&_144[_148]!=null){_142[_148]=_144[_148]}else if(isc.isA.Tree(this.data)){var _7=_144[this.data.titleProperty];if(_7!=null)_142[this.data.titleProperty]=_7}
var _149=this.getFieldName(_143);if(_149!=null&&_144[_149]!=null){_142[_149]=_144[_149]}}
_142[isc.AutoTest.fallback_valueOnlyField]=_113;return _142},getColLocatorOptions:function listGrid_getColLocatorOptions(_154,_113,_114){var _142={},_143=this.getFieldNumFromLocal(_114,_154);var _150=this.getField(_143);if(this.isCheckboxField(_150)){_142.isCheckboxField=true}else{var _149=this.getFieldName(_143);if(_149!=null)_142.fieldName=_149}
_142[isc.AutoTest.fallback_valueOnlyField]=_114;return _142},getChildFromLocatorSubstring:function listGrid_getChildFromLocatorSubstring(_209,_18,_133){if(_209=="frozenBody"||_209=="body"){switch(_133.length-_18){case 4:if(!this.$126y(_133[_18+3]))break;case 3:if(!_133[_18+2].startsWith("col["))break;case 2:if(!_133[_18+1].startsWith("row["))break;return null}}
return this.Super("getChildFromLocatorSubstring",arguments)},getRowNumFromLocator:function listGrid_getRowNumFromLocator(_133,_18){var _151=isc.AutoTest.parseLocatorFallbackPath(_133[_18]);if(_151.name!="row"){this.logWarn("Error parsing locator: "+_133.join("/")+"; unable to resolve the row");return null}
return this.getRowNumFromLocatorConfig(_151.config)},getInnerAttributeFromSplitLocator:function listGrid_getInnerAttributeFromSplitLocator(_133,_209){var _54=_209.attribute,_152=isc.AutoTest.getAttributeDefault(null,_54),_153=isc.AutoTest.getAttributeDefault(this,_54);if(this.emptyLocatorArray(_133)){return isc.AutoTest.setLogFailureForReturnValue(this,_133,_153,_54)}
var _154=_133[0];if(_154=="body"||_154=="frozenBody"){var _115=_133[3];if(_133.length==2&&_54==isc.Canvas.$95j){var _113=this.getRowNumFromLocator(_133,1);if(_113==null)return _153;if(isc.isA.Number(_113)){if(this.body.$29p()){this.body.setLogFailureText(true,null,"is being animated");return _152}
return this.body.$1307(_133,_113)}}else if(_133.length==3||_133.length==4&&this.$126y(_115))
{var _155=_133[2],_156=isc.AutoTest.parseLocatorFallbackPath(_155);if(_156.name!="col"){if(_54==isc.Canvas.$95j)this.setLogFailureText(true,"could not parse column locator '"+_155+"' for");this.logWarn("Error parsing locator:"+_133.join("")+" returning ListGrid handle");return _153}
var _150=this.getFieldFromColLocatorConfig(_156.config),_157;if(_150==null){_157=parseInt(_156.config[isc.AutoTest.fallback_valueOnlyField]);if(_154=="frozenBody"&&this.frozenBody==null){this.setLogFailureText(true,"the column locator '"+_155+"' is specified on a frozen body but","has none");return _152}
_154=this[_154]}else{_157=this.getLocalFieldNum(this.getFieldNum(_150));if(this.fieldIsFrozen(_150))_154=this.frozenBody;else _154=this.body}
if(_154==null){this.setLogFailureText(true,"there was a problem locating the correct GridBody for field "+_150.name+" using column locator '"+_155+"' within",", this field seems to be"+(this.fieldIsFrozen(_150)?" ":" not ")+"frozen");return _152}
var _113=this.getRowNumFromLocator(_133,1);if(_113==null){if(_54==isc.Canvas.$95j)this.setLogFailureText(true,"locator suffix  '"+_133.join("/")+"' does not identify a valid row within");return _153}
var _158=_154==this.frozenBody?"frozen GridBody":"GridBody";if(isc.isA.Number(_113)&&isc.isA.Number(_157)){if(_154.$29p()){_154.setLogFailureText(true,null,"is being animated");return _152}
switch(_54){case isc.Canvas.$95j:return _154.$1307(_133,_113,_157);case isc.Canvas.$95l:var _159=this.getFieldNumFromLocal(_157,_154),_150=this.getField(_159);if(_150!=null){var _144=this.getCellRecord(_113,_159);if(_144==null){this.setLogFailureText(true,"no record could be found for field "+_150.name+" and row "+_113+" in");break}
if(_150.$63f)return this.isSelected(_144);if(_150.$109b===true){return!!_144.checked}
return this.getRawCellValue(_144,_113,_159)}else{this.setLogFailureText(true,"no field could be found for column "+_157+" within the "+_158+" of")}}}else{_154.$1309(_133,_113,_157)}}}
return this.Super("getInnerAttributeFromSplitLocator",arguments)},getFieldFromColLocatorConfig:function listGrid_getFieldFromColLocatorConfig(_209){if(_209.isCheckboxField!=null){for(var i=0;i<this.fields.length;i++){if(this.isCheckboxField(this.fields[i])){return this.fields[i]}
this.logWarn("AutoTest stored a locator for interaction with checkbox field - but this grid is not showing a checkbox field - recorded test may be invalid.","AutoTest");return-1}}else{var _160=this.locateColumnsBy;if(_160=="fieldName"||_160==null){var _149=_209.fieldName;if(_149!=null){return this.getField(_149)}}}},getRowNumFromLocatorConfig:function listGrid_getRowNumFromLocatorConfig(_209){var _161=this.locateRowsBy;if(_161==null)_161="primaryKey";var _162=this.data,_163;switch(_161){case"primaryKey":this.logDebug("Trying to locate row by pk","autotest");var _145=this.getDataSource();if(_145!=null){var _164=_145.getPrimaryKeyFieldNames(),_165=_164.length>0;for(var i=0;i<_164.length;i++){if(_209[_164[i]]==null){_165=false;break}}
if(_165){var _113=this.findRowNum(_209);if(_113!=-1){this.logDebug("Located row "+_113+" by pk","autotest");return _113}}}
this.logDebug("Failed to locate row by pk.  Config: "+isc.echoAll(_209),"autotest");if(isc.AutoTest.skipFallback)return-1;case"titleField":var _148=this.getTitleField();if(_148!=null&&_209[_148]!=null){var _166=_162.findAllIndices(_148,_209[_148]);if(_166.length==0)return-1;if(_166.length==1)return _166[0];var _167=[];for(var i=0;i<_166.length;i++){_167[_166[i]]=_162.get(_166[i])}
_163=_166[0];_162=_167}
case"targetCellValue":for(var _149 in _209){if(_149==isc.AutoTest.fallback_valueOnlyField)continue;if(_209[_149]!=null){var _166=_162.findAllIndices(_149,_209[_149],isc.AutoTest.$1232);if(_166.length==0)return-1;if(_166.length==1)return _166[0];var _167=[];for(var i=0;i<_166.length;i++){_167[_166[i]]=_162.get(_166[i])}
_163=_166[0];_162=_167}}
default:var _113=parseInt(_209[isc.AutoTest.fallback_valueOnlyField]);var _103;if(_163==null||_162[_113]!==_103)return _113;else return _163}},$126y:function listGrid__isValidDropPosition(_115){switch(_115){case isc.ListGrid.BEFORE:case isc.ListGrid.AFTER:case isc.ListGrid.OVER:return true}
return false},$124j:function listGrid__isProcessingDone(_209){var _168=!_209||isc.RecordEditor&&isc.isA.RecordEditor(this);if(isc.AutoTest.isGridDone(this,_168)==false)return false;return this.Super("$124j",arguments)}})}
if(isc.Menu){isc.Menu.addClassMethods({getMenuAtLevel:function(_171){var _169=isc.Menu.$kc||[],_170=_169.find("$35q",null);if(_170==null)return null;for(var i=0;i<_171;i++){_170=_170.$35s;if(_170==null){this.logInfo("Unable to locate active menu at level "+_171+" - returning null");return null}}
return _170}});isc.Menu.addMethods({$123v:["//Menu[level=",,"]"],getLocatorRoot:function menu_getLocatorRoot(){if(this.hasStableID())return this.Super("getLocatorRoot",arguments);if(!this.locatorRoot){var _171=0;for(var _172=this;_172&&_172.$35q;_172=_172.$35q)_171++;this.$123v[1]=_171;this.locatorRoot=this.$123v.join(isc.emptyString)}
return this.locatorRoot}})}
if(isc.TreeGrid){isc.TreeGridBody.addProperties({getOpenAreaWidth:function treeGridBody_getOpenAreaWidth(_113,_114){var _132=this.grid,_162=_132.data,_136=_132.getRecord(_113);_114=_132.getFieldNumFromLocal(_114,this);if(_132.getTreeFieldNum()!=_114||_162==null||!_162.isFolder(_136)){return null}
return _132.getOpenAreaWidth(_136)},getInteriorLocator:function treeGridBody_getInteriorLocator(_64,_209,_131){var _84=_64;var _132=this.grid,_72=this.getHandle(),_173=this.getTableElement();if(!_64||!_72||!_173)return isc.emptyString;var _174=_132.getCanvasName()+_132.$34l,_113,_114;var _175=_132.getCanvasName()+_132.$349;while(_64!=this.tableElement&&_64!=_72&&_64.getAttribute){var _28=_64.getAttribute(isc.Canvas.$123e?"id":"name");if(_28){if(_28.startsWith(_175)){_113=parseInt(_28.substring(_175.length));_114=_132.getLocalFieldNum(_132.getTreeFieldNum());return this.getCellLocator(_113,_114)+"/extra"}}
_64=_64.parentNode}
var _112=this.getCellFromDomElement(_84);if(_112){var _176=this.getOpenAreaWidth(_112[0],_112[1]);if(_176!=null){var _65=this.getCellPageRect(_112[0],_112[1]),x=_131[0]-_65[0];if(x>=0&&x<_176){return this.getCellLocator(_112[0],_112[1])+"/open"}}}
return this.Super("getInteriorLocator",[_84,_209,_131])},getInnerAttributeFromSplitLocator:function
treeGridBody_getInnerAttributeFromSplitLocator(_133,_209){var _132=this.grid,_54=_209.attribute,_152=isc.AutoTest.getAttributeDefault(null,_54),_153=isc.AutoTest.getAttributeDefault(this,_54);if(this.emptyLocatorArray(_133)){return isc.AutoTest.setLogFailureForReturnValue(this,_133,_153,_54)}
if(_133.length==3){if(_133[2]=="open"){if(this.$29p()){this.setLogFailureText(true,null,"is being animated");return _152}
var _178=_133[0];var _113;if(_178.charAt(3)!="["){_113=parseInt(_178.substring(3))}else{var _151=isc.AutoTest.parseLocatorFallbackPath(_178);if(_151==null||_151.name!="row"){this.setLogFailureText(true,"the row locator '"+_178+"' for","could not be parsed")}
_113=_132.getRowNumFromLocatorConfig(_151.config)}
if(_54==isc.Canvas.$95l){var _162=_132.data,_144=_132.getRecord(_113);if(_144==null||!_162){this.setLogFailureText(true,"no record could be found for row "+_113+" of");return}
return _162.isOpen(_144)}else{var _114=_132.getLocalFieldNum(_132.getTreeFieldNum());if(isc.isA.Number(_113)&&isc.isA.Number(_114)){return this.$1307(_133,_113,_114)}else{this.$1309(_133,_113,_114);return null}}}else if(_133[2]=="extra"){if(this.$29p()){this.setLogFailureText(true,null,"is being animated");return _152}
var _178=_133[0];var _113;if(_178.charAt(3)!="["){_113=parseInt(_178.substring(3))}else{var _151=isc.AutoTest.parseLocatorFallbackPath(_178);if(_151==null||_151.name!="row"){this.setLogFailureText(true,"the row locator '"+_178+"' for","could not be parsed")}
_113=_132.getRowNumFromLocatorConfig(_151.config)}
if(_54==isc.Canvas.$95l){var _179=_132.selection,_144=_132.getRecord(_113);if(_144==null){this.setLogFailureText(true,"no record could be found for row "+_113+" of");return}
if(_179==null){this.setLogFailureText(true,"no selection object could be found for");return}
var _180=_179.isSelected(_144);if(!_180||!_132.showPartialSelection)return _180;return _179.isPartiallySelected(_144)?"partial":_180}else{var _181=_132.$349+_113,_86=_132.getImage(_181,isc.Canvas.$123e);if(_86)return _86;else{this.setLogFailureText(true,"no opener image could be found for row "+_119+" of");return null}}}}
return this.Super("getInnerAttributeFromSplitLocator",arguments)},getAutoTestLocatorCoords:function treeGridBody_getAutoTestLocatorCoords(_87,_64){var _131=this.Super("getAutoTestLocatorCoords",arguments);if(_131==null)return _131;var _182=this.grid;if(_182==null||_87.endsWith("/extra"))return _131;var _183=_131[1]-this.getPageTop()+this.getScrollTop(),_184=_131[0]-this.getPageLeft()+this.getScrollLeft();var _113=this.getEventRow(_183),_114=this.getEventColumn(_184),_176=this.getOpenAreaWidth(_113,_114);if(_176!=null){var _65=isc.Element.getElementRect(_64),_66=_65[0],_67=_65[2];if(_87.endsWith("/open")){_131[0]=_66+Math.floor(_176/2)}else{_66+=_176;_67-=_176;_131[0]=_66+Math.floor(_67/2)}}
return _131}})}
if(isc.TileGrid){isc.TileGrid.addMethods({$124j:function tileGrid__isProcessingDone(_209){if(_209&&!this.isDrawn())return true;return isc.AutoTest.isTileGridDone(this)!=false}})}
if(isc.TabSet){isc.TabSet.addProperties({containsLocatorChild:function tabSet_containsLocatorChild(_59){if(this.Super("containsLocatorChild",arguments))return true;if(this.getTabNumber(_59)!=-1)return true;return false},getStandardChildLocator:function tabSet_getStandardChildLocator(_59){var _185=this.getTabNumber(_59);if(_185!=-1){var _186=this.getTabObject(_185);var _187={};if(_186.name!=null)_187.name=_186.name;if(_186.title!=null)_187.title=_186.title;if(_186.ID!=null&&!_186._autoAssignedID)_187.ID=_186.ID;_187.index=_185;return isc.AutoTest.createLocatorFallbackPath("tab",_187)}
return this.Super("getStandardChildLocator",arguments)},getChildFromLocatorSubstring:function tabSet_getChildFromLocatorSubstring(_209){if(_209&&_209.startsWith("tab[")){var _188=isc.AutoTest.parseLocatorFallbackPath(_209),_33=_188.config;if(_33.ID!=null)return this.getTab(_33.ID);if(_33.name!=null)return this.getTab(_33.name);var _189=this.locateTabsBy;if(_189==null)_189="title";if(_33.title&&_189=="title"){var _185=this.tabs.findIndex("title",_33.title);return this.getTab(_185)}
return this.getTab(parseInt(_33.index))}
return this.Super("getChildFromLocatorSubstring",arguments)}})}
if(isc.StatefulCanvas){isc.StatefulCanvas.addProperties({getInteriorLocator:function statefulCanvas_getInteriorLocator(_64,_209,_131){if(isc.Slider&&isc.isA.Slider(this.creator)&&this.creator._track==this){return this.creator.getInteriorLocator(_64,_209,_131)}
return this.Super("getInteriorLocator",arguments)},getInnerAttributeFromSplitLocator:function statefulCanvas_getInnerAttributeFromSplitLocator(_133,_209){if(!this.emptyLocatorArray(_133)&&this.label){return this.label.getInnerAttributeFromSplitLocator(_133,_209)}
return this.Super("getInnerAttributeFromSplitLocator",arguments)},getAutoTestLocatorCoords:function statefulCanvas_getAutoTestLocatorCoords(_87,_64){if(isc.Slider&&isc.isA.Slider(this.creator)&&this.creator._track==this){return this.creator.getAutoTestLocatorCoords(_87,_64)}
return this.Super("getAutoTestLocatorCoords",arguments)}})}
if(isc.Menu){isc.Menu.addProperties({hasStableID:function menu_hasStableID(){var _190=this.$350;if(_190!=null)return _190.hasStableID();else return this.Super("hasStableID",arguments)}})}
if(isc.DateChooser){isc.DateChooser.addMethods({getInteriorLocator:function dateChooser_getInteriorLocator(_64){var _72=this.getHandle();if(!_72||!_64)return"";var _191=_64.$73l;if(_191!=null&&_191!="")return _191;return _64.$73l=this.$73m(_64,_72)},$73m:function dateChooser__getInteriorLocator(_64,_72){var _192=_64;while(_192&&_192!=null){if(_192==_72){_192=null;break}
if(_192.tagName&&_192.tagName.toLowerCase()=="td"){break}
_192=_192.parentElement}
if(_192==null||_192.getAttribute==null)return"";var _193=_192.getAttribute(isc.EH.$945);if(!_193)return"";var _194=_72.childNodes,_195=[];for(var i=0;i<_194.length;i++){if(!_194[i].tagName||_194[i].tagName.toLowerCase()!="table"){continue}
_195[_195.length]=_194[i]}
var _196=_195.length==2?_195[0]:null,_197=_195.length==2?_195[1]:_195[0];if(_196!=null&&_192.offsetParent==_196){switch(_193){case"showPrevYear":return"prevYearButton";case"showPrevMonth":return"prevMonthButton";case"showMonthMenu":return"monthMenuButton";case"showYearMenu":return"yearMenuButton";case"showNextMonth":return"nextMonthButton";case"showNextYear":return"nextYearButton"}
return""}else if(_197!=null&&_192.offsetParent==_197){switch(_193){case"cancel":return"cancelButton";case"today":return"todayButton";default:var _198=_192.id;if(_198){var _199=_198.split("_");if(_199&&_199.length>=3){_199=_199.slice(_199.length-3)}
return _199.join("/")}}}
return""},getInnerAttributeFromSplitLocator:function
dateChooser_getInnerAttributeFromSplitLocator(_133,_209){if(_209.attribute==isc.Canvas.$95l){this.setLogFailureText(true,"getValue() is not supported for");return}
var _72=this.$1304();if(_72==null||this.emptyLocatorArray(_133))return _72;var _200=(_133.length==3);if(!_200){var _80=_133[0];if(_80=="")return _72;var _201=(_80=="todayButton"),_202=!_201?(_80=="cancelButton"):false;var _194=_72.childNodes;if(_201||_202){if(_201&&!this.showTodayButton){this.logWarn("DateChooser attempting to locate element for 'todayButton' but showTodayButton is false. Returning handle.","AutoTest");return _72}
if(_202&&!this.showCancelButton){this.logWarn("DateChooser attempting to locate element for 'cancelButton' but showCancelButton is false. Returning handle.","AutoTest");return _72}
var _197;for(var i=_194.length-1;i>=0;i--){if(_194[i].tagName&&_194[i].tagName.toLowerCase()=="table")
{_197=_194[i];break}}
var _203=_197.rows[_197.rows.length-1],_125=_203.cells;for(var i=0;i<_125.length;i++){if(this.getInteriorLocator(_125[i])==_80){return _125[i]}}}else{if(!this.showHeader){this.logWarn("DateChooser attempting to locate element for "+_133+" but this.showHeader is false so this element will not be present. Returning handle.","AutoTest");return _72}
var _196;for(var i=0;i<_194.length;i++){if(_194[i].tagName&&_194[i].tagName.toLowerCase()=="table")
{_196=_194[i];break}}
if(_196){var _119=_196.rows[0],_125=_119.cells;for(var i=0;i<_125.length;i++){if(this.getInteriorLocator(_125[i])==_80){return _125[i]}}}}}else{var _204=_133[0],_205=_133[1],_206=_133[2];if((_204==this.year)&&(this.month==_205||this.month==_205+1||this.month==_205-1))
{var _207=Date.createLogicalDate(_204,_205,_206),_208=_207.getDay(),_112=this.dateGrid.getDateCell(_207);if(_112){return this.dateGrid.body.$1307(_133,_112.rowNum,_112.colNum)}}else{this.logInfo("DateChooser passed ID for the wrong year or month - passed:"+_133+", showing:"+[this.year,this.month],"AutoTest")}
this.logWarn("DateChooser - passed inner locator for date ("+_133.join("/")+") -- not currently showing this date.","AutoTest")}
this.logWarn("DateChooser, unable to find element for inner locator:"+_133+" returning handle");return _72}})}};isc.AutoTest.customizeCalendar=function(){isc.$755={getRowLocatorOptions:function calendarView_getRowLocatorOptions(_49,_28,_29){var _1=this.Super("getRowLocatorOptions",arguments);var _2=this.creator.chosenDate;_1.date=_2.toSchemaDate("date");_1.minutes=_28*30;return _1},getRowNumFromLocatorConfig:function calendarView_getRowNumFromLocatorConfig(_49){var _3=this.creator.locateCellsBy;if((_3=="date"||_3==null)&&_49.date!=null)
{var _2=isc.Date.parseSchemaDate(_49.date);if(!this.showingDate(_2)){this.logWarn("Locator for cell in this calendar day-view grid has date stored as:"+_2.toUSShortDate()+", but we're currently showing "+this.creator.chosenDate.toUSShortDate()+". The stored date doesn't map to a visible cell so not returning a cell - if this is not the intended behavior in this test case you may need to set calendar.locateCellsBy to 'index'.","AutoTest");return-1}
return parseInt(_49.minutes)/30}
this.locateRowsBy="index";return this.Super("getRowNumFromLocatorConfig",arguments)},showingDate:function calendarView_showingDate(_2){return(isc.Date.compareLogicalDates(_2,this.creator.chosenDate)==0)}};isc.DaySchedule.addProperties(isc.$755);isc.WeekSchedule.addProperties(isc.$755,{showingDate:function weekSchedule_showingDate(_2){for(var i=0;i<this.fields.length;i++){var _5=this.fields[i];if(_5.$66a==null)continue;if(Date.compareLogicalDates(Date.createLogicalDate(_5.$66a,_5.$659,_5.$658),_2)==0)
{this.logWarn("does contain date"+_2.toShortDate());return true}
this.logWarn("date passed in:"+_2.toShortDate()+"compared with:"+Date.createLogicalDate(_5.$66a,_5.$659,_5.$658).toShortDate())}
this.logWarn("doesn't contain date:"+_2);return false},getColLocatorOptions:function weekSchedule_getColLocatorOptions(_49,_28,_29){var _6=this.Super("getColLocatorOptions",arguments),_7=this.getFieldNumFromLocal(_29,_49),_5=this.getField(_7);if(_5&&_5.$658!=null){_6.date=[_5.$66a,(_5.$659+1),_5.$658].join("-")}
return _6},getFieldFromColLocatorConfig:function weekSchedule_getFieldFromColLocatorConfig(_49){if((this.locateCellsBy=="date"||this.locateCellsBy==null)&&(_49.date!=null))
{var _8=_49.date.split("-");return this.getFields().find("$658",_8[2])}
return this.Super("getFieldFromColLocatorConfig",arguments)}});isc.MonthSchedule.addProperties({getRowLocatorOptions:function monthSchedule_getRowLocatorOptions(_49,_28,_29){var _1=this.Super("getRowLocatorOptions",arguments);var _9=this.getRecord(_28);if(!_9)return _1;var _5=this.getField(_29);var _10=_5.$66b;_1.dayIndex=_10;var _2=_9["date"+_10];_1.date=_2.toSchemaDate("date");var _11=_9["event"+_10];if(_11==null){_1.isHeaderRow=true}else{_1.isHeaderRow=false}
return _1},getRowNumFromLocatorConfig:function monthSchedule_getRowNumFromLocatorConfig(_49){var _3=this.creator.locateCellsBy;if((_3=="date"||_3==null)&&_49.date!=null)
{var _2=isc.Date.parseSchemaDate(_49.date),_12=(_49.isHeaderRow=="true"),_13="date"+_49.dayIndex,_14="event"+_49.dayIndex;for(var i=0;i<this.data.length;i++){var _15=(this.data[i][_14]==null);if(_15==_12){if(Date.compareLogicalDates(this.data[i][_13],_2)==0){return i}}}
return-1}
this.locateRowsBy="index";return this.Super("getRowNumFromLocatorConfig",arguments)},getColLocatorOptions:function monthSchedule_getColLocatorOptions(_49,_28,_29){var _1=this.Super("getColLocatorOptions",arguments);_1.dayIndex=this.getField(_29).$66b;return _1},getColNumFromLocatorConfig:function monthSchedule_getColNumFromLocatorConfig(_49){var _3=this.locateCellsBy;if(_3==null||_3=="date"){return this.fields.findIndex("$66b",parseInt(_49.dayIndex))}
this.locateColsBy="index";return this.Super("getColNumFromLocatorConfig",arguments)}});isc.MonthScheduleBody.addProperties({getInteriorLocator:function monthScheduleBody_getInteriorLocator(_49){if(_49.tagName.toLowerCase()=="a"){var _16=_49.href;if(_16!=null){var _17=_16.match("javascript:.*monthViewEventClick\\((\\d+),(\\d+),(\\d+)\\);");if(_17){var _18=parseInt(_17[1]),_19=parseInt(_17[2]),_20=parseInt(_17[3]);var _11=this.grid.getEvents(_18,_19),_21=_11[_20];if(_21==null){this.logWarn("Unable to determine event associated with apparent event link element -- returning cell");return this.Super("getInteriorLocator",arguments)}
var _22=this.grid.creator,_23=_22.getEventLocatorConfig(_21);var _24=isc.AutoTest.createLocatorFallbackPath("eventLink",_23);return _24}}}
return this.Super("getInteriorLocator",arguments)},getInnerAttributeFromSplitLocator:function
monthScheduleBody_getInnerAttributeFromSplitLocator(_49,_50){if(_50.attribute==isc.Canvas.$95l){this.setLogFailureText(true,"getValue() is not supported for");return}
if(this.emptyLocatorArray(_49))return this.$1304();if(_49.length==1&&_49[0].startsWith("eventLink")){var _25=isc.AutoTest.parseLocatorFallbackPath(_49[0]);var _22=this.grid.creator;var _21=_22.getEventFromLocatorConfig(_25.config);var _26=this.grid.getEventCell(_21);if(_26!=null){var _27=this.grid.data,_28=_26[0],_29=_26[1],_10=this.grid.getField(_29).$66b;var _30=this.getTableElement(_28,_29),_31=_30.getElementsByTagName("A");if(_31!=null){for(var _32=0;_32<_31.length;_32++){var _16=_31[_32].href;if(_16!=null){var _17=_16.match("javascript:.*monthViewEventClick\\((\\d+),(\\d+),(\\d+)\\);");if(_17&&_27[_28]["event"+_10][parseInt(_17[3])]==_21)
{return _31[_32]}}}}}
return this.Super("getInnerAttributeFromSplitLocator",arguments)}}});isc.Calendar.addProperties({getCanvasLocatorFallbackPath:function calendar_getCanvasLocatorFallbackPath(_47,_49,_50,_51,_52){if(_47=="eventWindow"){var _1=this.getEventLocatorConfig(_49.event);return isc.AutoTest.createLocatorFallbackPath("eventWindow",_1)}
return this.Super("getCanvasLocatorFallbackPath",arguments)},getEventLocatorConfig:function calendar_getEventLocatorConfig(_21){this.logWarn("In getEventLocatorConfig().  event:"+this.echo(_21));var _23={};if(this.dataSource){var _33=this.getDataSource().getPrimaryKeyFieldNames();for(var i=0;i<_33.length;i++){_23[_33[i]]=_21[_33[i]]}}
var _34=this.nameField;_23[_34]=_21[_34];var _35=this.startDateField;var _36=_21[_35];_23[_35]=_36.toSchemaDate();var _37=this.endDateField;var _38=_21[_37];_23[_37]=_38.toSchemaDate();_23.index=this.data.indexOf(_21);return _23},getChildFromFallbackLocator:function calendar_getChildFromFallbackLocator(_49,_50){var _39=_50.name,_23=_50.config;if(_39=="eventWindow"){var _40=this.mainView.getSelectedTab().viewName;if(_40=="day"){var _41=this.dayView.body.children}else if(_40=="week"){var _41=this.weekView.body.children}
if(_41!=null){var _21=this.getEventFromLocatorConfig(_23),_42=_41.find("event",_21);return _42}
this.logWarn("unable to find event window associated with event:"+this.echo(_21)+" based on locator string:"+_49+". It's possible that this event is not visible in the current view of this Calendar","AutoTest");return null}
return this.Super("getChildFromFallbackLocator",arguments)},getEventFromLocatorConfig:function calendar_getEventFromLocatorConfig(_23){var _43=this.locateEventsBy;if(_43==null)_43="primaryKey";switch(_43){case"primaryKey":this.logDebug("Trying to locate event by pk","autotest");var _44=this.getDataSource();if(_44){var _33=_44.getPrimaryKeyFieldNames(),_45=_33.length>0,_46={};for(var i=0;i<_33.length;i++){if(_23[_33[i]]==null){_45=false;break}else{_46[_33[i]]=_23[_33[i]]}}
if(_45){this.logDebug("All key fields present: "+isc.echoAll(_46),"autotest");var _9=_44.findByKeys(_23,this.data);if(_9!=null&&_9!=-1){this.logDebug("Successfully located event by pk.  Record: "+isc.echoAll(this.data.get(_9)),"autotest");return this.data.get(_9)}}else{this.logDebug("PK values missing. Config: "+isc.echoAll(_23),"autotest")}}
this.logDebug("Failed to locate event by pk.  Config: "+isc.echoAll(_23),"autotest");if(isc.AutoTest.skipFallback)return null;case"name":var _47=_23[this.nameField];if(_47!=null)return this.data.find(this.nameField,_47);case"date":var _36=_23[this.startDateField],_38=_23[this.endDateField];for(var i=0;i<this.data.length;i++){var _48=this.data.get(i);if(_48==null)continue;if(_48[this.startDateField].toSchemaDate()==_36&&_48[this.endDateField].toSchemaDate()==_38)
{return _48}
this.logWarn("attempt to match calendar event by startDate / endDate unable to locate any events. Backing off to index within data array")}
default:var _20=parseInt(_23.index);return this.data.get(_20)}}})};if(isc.Calendar)isc.AutoTest.customizeCalendar();if(!isc.Page.isLoaded()){isc.Page.setEvent("load","isc.ApplyAutoTestMethods()")}else{isc.ApplyAutoTestMethods()}
isc.A=isc.AutoTest;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.implicitNetworkWait=false;isc.A.$119l="//testRoot[]";isc.A.testRoot=null;isc.A.$130n=["isCanvasDone","isTileGridDone","isGridDone","isSystemDone","isElementClickable","isElementReadyForKeyPreses","getTableElementAndLogFailure","getHandleAndLogFailure","reportInvalidCellLocator","getInnerAttributeFromSplitLocator","getBaseComponentFromLocatorSubstring"];isc.A.$130o="!$originalLocator{";isc.A.$130p="}$!";isc.B.push(isc.A.$1220=function isc_c_AutoTest__isTextBased(_1){var _2=_1.tagName;if(!_1.tagName)return false;_2=_2.toLowerCase();return _2=="textarea"||_2=="input"&&(_1.type=="text"||_1.type=="password"||_1.type=="file")},isc.A.setTestRoot=function isc_c_AutoTest_setTestRoot(_1){this.testRoot=_1;if(_1!=null){this.logInfo("setting testRoot to canvas "+_1.ID+", so scLocators starting "+this.$119l+"... will now be seen as rooted there")}else{this.logInfo("clearing the testRoot canvas, so scLocators starting "+this.$119l+"... may no longer be used")}},isc.A.getTestRootScrollCanvas=function isc_c_AutoTest_getTestRootScrollCanvas(){if(this.testRoot==null){this.logWarn("Unable to locate the scroll canvas containing the test root when no test root canvas has been configured");return null}
var _1=window.featureExplorer;if(_1!=null)return _1.exampleViewer.viewPane;for(var _2=this.testRoot;!isc.isA.PaneContainer(_2);_2=_2.parentElement);return _2},isc.A.isElementClickable=function isc_c_AutoTest_isElementClickable(_1){if(_1==null){this.$130q="the element is null";return null}
if(isc.isA.Canvas(_1)||isc.isA.FormItem(_1)){_1=_1.getHandle()}
if(isc.isA.String(_1))_1=this.getElement(_1);var _2=this.locateCanvasFromDOMElement(_1);if(_2==null){this.$130q="there's no Canvas identified by "+_1.getLocator();return null}
if(this.implicitNetworkWait&&isc.RPCManager.requestsArePending()){_2.setLogFailureText(true,"RPCManager.requestsArePending() for");return false}
if(_2==this.testRoot)return true;if(!_2.isVisible()){_2.setLogFailureText(true,null,"isn't visible");return false}
if(_2.isDisabled()){_2.setLogFailureText(true,null,"is disabled");return false}
if(isc.EH.targetIsMasked(_2)){var _3=isc.EH.clickMaskRegistry.last()||{},_4=window[_3.ID];if(isc.isAn.Instance(_4)){_4.setLogFailureText(false,null,"is blocking clicks at "+_2.$130k(true))}else{var _5=_3.ID?"click mask "+_3.ID:"an unknown click mask";_2.setLogFailureText(true,null,"is blocked by "+_5)}
return false}
if(isc.DynamicForm&&isc.isA.DynamicForm(_2)){var _6=isc.DynamicForm._getItemInfoFromElement(_1,_2);if(_6&&_6.item){var _7=_6.item.containerWidget;if(_7&&!_7.$124j()){_2.setLogFailureText(true,"the container canvas of","reports "+this.getLogFailureText(true));return false}}}
return _2.$124j(_7!=null)},isc.A.isElementReadyForKeyPresses=function isc_c_AutoTest_isElementReadyForKeyPresses(_1){if(_1==null){this.$130r="the element is null";return null}
if(isc.isA.Canvas(_1)||isc.isA.FormItem(_1)){_1=_1.getHandle()}
if(isc.isA.String(_1))_1=this.getElement(_1);var _2=this.locateCanvasFromDOMElement(_1);if(_2==null){this.$130s="there's no Canvas identified by "+_1.getLocator();return null}
if(this.$1220(_1)&&_1!=document.activeElement){_2.setLogFailureText(true,"the text field in","is not the active DOM element");return false}
if(isc.DynamicForm&&isc.isA.DynamicForm(_2)){var _3=isc.DynamicForm._getItemInfoFromElement(_1,_2);if(_3&&_3.item){var _4=_3.item;if(isc.isA.TextItem(_4)&&_4.$85u){_4.setLogFailureText(true,"a delayed select operation is pending for");return false}
if(isc.isA.PickList(_4)){if(_4.pendingActionOnPause("fetch")){_4.setLogFailureText(true,"a delayed fetch is queued for");return false}
if(_4.$43j){_4.setLogFailureText(true,null,"has a fetch oustanding");return false}}}}
return this.isElementClickable(_1)},isc.A.isCanvasDone=function isc_c_AutoTest_isCanvasDone(_1){if(_1==null){this.$130t="the element is null";return null}
if(isc.isA.String(_1))_1=this.getElement(_1);var _2=isc.isA.Canvas(_1)?_1:this.locateCanvasFromDOMElement(_1);if(_2==null){this.$130t="there's no Canvas identified by "+this.getLocator(_1);return null}
if(!_2.isDrawn()){_2.setLogFailureText(true,null,"isn't drawn");return false}
if(_2.isDirty()){_2.setLogFailureText(true,null,"is dirty");return false}
if(_2.$rm){_2.setLogFailureText(true,null,"has pending overflow operations");return false}
if(_2.isAnimating()){_2.setLogFailureText(true,null,"is currently animating");return false}
return true},isc.A.isTileGridDone=function isc_c_AutoTest_isTileGridDone(_1){if(_1==null){this.$130u="the element is null";return null}
if(isc.isA.String(_1))_1=this.getElement(_1);var _2=isc.isA.Canvas(_1)?_1:this.locateCanvasFromDOMElement(_1);if(_2==null||!isc.isA.TileGrid(_2)){this.$130u=this.getLocator(_1)+" does not correspond to a valid TileGrid!";return null}
if(!this.isCanvasDone(_2))return false;if(_2.pendingActionOnPause("tileGridAnimate")){_2.setLogFailureText(true,"there is a pending animation for");return false}
if(_2.isAnimatingTileLayout()){_2.setLogFailureText(true,null,"is currently animating");return false}
return true},isc.A.isGridDone=function isc_c_AutoTest_isGridDone(_1,_2){if(_1==null){this.$130v="the element is null";return null}
if(isc.isA.String(_1))_1=this.getElement(_1);var _3=isc.isA.Canvas(_1)?_1:this.locateCanvasFromDOMElement(_1);while(_3!=null&&!isc.isA.ListGrid(_3))_3=_3.parentElement;if(_3==null){this.$130w="there's no ListGrid containing locator "+this.getLocator(_1);return null}
if(_3.summaryRow&&!isc.AutoTest.isGridDone(_3.summaryRow,_2)){return false}
var _4=_3.filterEditor;if(_4&&_4.pendingActionOnPause("performFilter")){_3.setLogFailureText(true,"there is a pending filter operation for the FilterEditor of");return false}
if(!_2&&_3.hasChanges()){_3.setLogFailureText(true,null,"has unsaved edits");return false}
if(_3.data!=null&&isc.isA.ResultSet(_3.data)){if(!_3.data.lengthIsKnown()){_3.setLogFailureText(true,"the length of the ResultSet associated with","is not yet known");return false}
if(_3.data.fetchIsPending()){_3.setLogFailureText(true,"has a pending fetch");return false}}
if(_3.body!=null&&_3.body.isDirty()){_3.setLogFailureText(true,"the body of","is dirty");return false}
if(_3.frozenBody!=null&&_3.frozenBody.isDirty()){_3.setLogFailureText(true,"the frozen body of","is dirty");return false}
return true},isc.A.isSystemDone=function isc_c_AutoTest_isSystemDone(_1){if(this.implicitNetworkWait&&isc.RPCManager.requestsArePending()){this.$130x="RPCManager.requestsArePending() is true";return false}
var _2=isc.Canvas.$101e;if(_1&&isc.isAn.Array(_2)&&_2.length>0){this.$130x="there are "+_2.length+" pending redraws";return false}
for(var i=0;i<isc.Canvas._canvasList.length;i++){var _4=isc.Canvas._canvasList[i];if(!_4.$124j(true))return false}
return true},isc.A.$130l=function isc_c_AutoTest__createLocatorMarker(_1){if(!_1)_1="";return this.$130o+_1+this.$130p},isc.A.$130y=function isc_c_AutoTest__replaceLocatorMarker(_1,_2){return _1.replace(/!\$originalLocator\{.*\}\$!/,_2)},isc.A.$130z=function isc_c_AutoTest__populateLocatorMarker(_1,_2){var _3="",_4=this.$1300,_5=_1.match(/^.*!\$originalLocator\{(.*)\}\$!.*$/);if(_4&&_5&&!_2){var _6=_5[0].replace(/!\$originalLocator\{(.*)\}\$!/,"$1");if(_6==""||!this.locatorsEqual(_6,_4)){_3=" and corresponding to original locator "+_4}}
return this.$130y(_1,_3)},isc.A.applyFuncToLogSlots=function isc_c_AutoTest_applyFuncToLogSlots(_1){var _2=this.$130n;for(var i=0;i<_2.length;i++){var _4="_"+_2[i]+"Log",_5=_1(_4);if(_5!=null)return _5}
return null},isc.A.setLogFailureText=function isc_c_AutoTest_setLogFailureText(_1,_2,_3){var _4=isc.AutoTest.setLogFailureText.caller||arguments.callee.caller,_5=_4.name||isc.Func.getName(_4,true),_6=_5.replace(/^.*[_]+([^_]+)/,"\137$1")+"Log";if(this[_6])return;this[_6]=this.$130m(_1,_2,_3)},isc.A.$130m=function isc_c_AutoTest__getLogFailureText(_1,_2){var _3;if(_1==true)_3=this.$1300;else if(isc.isA.String(_1))_3=_1;return _3?_2+" "+_3:_2},isc.A.getLogFailureText=function isc_c_AutoTest_getLogFailureText(_1){var _2=this,_3=this.applyFuncToLogSlots(function(_5){var _4=_2[_5];if(_4!=null)_2[_5]=null;return _4});return _3?this.$130z(_3,_1):_3},isc.A.clearAllLogSlots=function isc_c_AutoTest_clearAllLogSlots(){var _1=this;return this.applyFuncToLogSlots(function(_2){_1[_2]=null})},isc.A.seleniumExecute=function isc_c_AutoTest_seleniumExecute(_1,_2,_3,_4){this.clearAllLogSlots();this.$1300=_3||_2;var _5,_6=this[_1](_2,_4);switch(_1){case"getElement":if(isc.isAn.Object(_6))return _6;break;case"getValue":if(_6!==_5)return _6;break;default:if(_6)return _6}
var _7=isc.Log.getPriority("testReplay");if(_7==null||_7<isc.Log.INFO){isc.Log.setPriority("testReplay",isc.Log.INFO)}
var _8=this.getLogFailureText();if(_8)this.logInfo(_1+"() returned "+_6+" because "+_8,"testReplay");if(_7==null)isc.Log.clearPriority("testReplay");else if(_7<isc.Log.INFO)isc.Log.setPriority("testReplay",_7);return _6});isc.B._maxIndex=isc.C+18;isc.Page.logInfo("SmartClient Core ("+isc.version+" "+isc.buildDate+") initialized: "+(isc.timeStamp()-isc.$d)+"ms");isc.Page.logInfo("document.compatMode: "+document.compatMode);if(isc.Log.hasFireBug()){isc.Log.logWarn("NOTE: Firebug is enabled. Firebug greatly slows the performance of applications that make heavy use of JavaScript. Isomorphic highly recommends Firebug for troubleshooting, but Firebug and other development tools should be disabled when assessing the real-world performance of SmartClient applications.")}
isc._nonDebugModules=(isc._nonDebugModules!=null?isc._nonDebugModules:[]);isc._nonDebugModules.push('Core');isc.checkForDebugAndNonDebugModules();isc._moduleEnd=isc._Core_end=(isc.timestamp?isc.timestamp():new Date().getTime());if(isc.Log&&isc.Log.logIsInfoEnabled('loadTime'))isc.Log.logInfo('Core module init time: '+(isc._moduleEnd-isc._moduleStart)+'ms','loadTime');delete isc.definingFramework;}else{if(window.isc&&isc.Log&&isc.Log.logWarn)isc.Log.logWarn("Duplicate load of module 'Core'.");}

// ISC_Foundation.js

if(window.isc&&window.isc.module_Core&&!window.isc.module_Foundation){isc.module_Foundation=1;isc._moduleStart=isc._Foundation_start=(isc.timestamp?isc.timestamp():new Date().getTime());if(isc._moduleEnd&&(!isc.Log||(isc.Log&&isc.Log.logIsDebugEnabled('loadTime')))){isc._pTM={message:'Foundation load/parse time: '+(isc._moduleStart-isc._moduleEnd)+'ms',category:'loadTime'};if(isc.Log&&isc.Log.logDebug)isc.Log.logDebug(isc._pTM.message,'loadTime');else if(isc._preLog)isc._preLog[isc._preLog.length]=isc._pTM;else isc._preLog=[isc._pTM]}isc.definingFramework=true;if(window.isc&&isc.version!="v9.1p_2014-06-27/LGPL Deployment"){isc.logWarn("SmartClient module version mismatch detected: This application is loading the core module from SmartClient version '"+isc.version+"' and additional modules from 'v9.1p_2014-06-27/LGPL Deployment'. Mixing resources from different SmartClient packages is not supported and may lead to unpredictable behavior. If you are deploying resources from a single package you may need to clear your browser cache, or restart your browser."+(isc.Browser.isSGWT?" SmartGWT developers may also need to clear the gwt-unitCache and run a GWT Compile.":""))}
isc.ClassFactory.defineClass("Animation");isc.A=isc.Animation;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.interval=40;isc.A.registry=[];isc.A.animateTime=1000;isc.B.push(isc.A.smoothStart=function isc_c_Animation_smoothStart(_1){return Math.pow(_1,2)},isc.A.smoothEnd=function isc_c_Animation_smoothEnd(_1){return 1-Math.abs(Math.pow(_1-1,2))},isc.A.smoothStartEnd=function isc_c_Animation_smoothStartEnd(_1){return(-Math.cos(_1*Math.PI)+1)/2.0});isc.B._maxIndex=isc.C+3;isc.A=isc.Animation;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$0c="ratio,ID,earlyFinish";isc.B.push(isc.A.generateAnimationID=function isc_c_Animation_generateAnimationID(){if(!this.$0d)this.$0d=0;return"_"+(this.$0d++)},isc.A.timeoutAction=function isc_c_Animation_timeoutAction(){if(isc.Animation)isc.Animation.fireTimer()},isc.A.registerAnimation=function isc_c_Animation_registerAnimation(_1,_2,_3,_4){if(!this.$0e){this.$0e=isc.Timer.setTimeout(this.timeoutAction,this.interval);this.$0f=isc.timeStamp()}
if(!_4)_4=this;if(!_2)_2=this.animateTime;if(isc.isA.String(_3)){if(!isc.Animation.accelerationMap){isc.Animation.accelerationMap={smoothStart:isc.Animation.smoothStart,smoothEnd:isc.Animation.smoothEnd,smoothStartEnd:isc.Animation.smoothStartEnd}}
_3=isc.Animation.accelerationMap[_3]}
var _5=this.generateAnimationID();this.registry.add({ID:_5,target:_4,callback:_1,duration:_2,elapsed:0,totalFrames:Math.round(_2/this.interval),currentFrame:0,maxDuration:_2*3,acceleration:_3});return _5},isc.A.clearAnimation=function isc_c_Animation_clearAnimation(_1){for(var i=0;i<this.registry.length;i++){if(this.registry[i]&&this.registry[i].ID==_1){this.registry.removeAt(i);break}}},isc.A.finishAnimation=function isc_c_Animation_finishAnimation(_1){for(var i=0;i<this.registry.length;i++){if(this.registry[i]&&this.registry[i].ID==_1){var _3=this.registry[i];break}}
this.clearAnimation(_1);if(_3)this.fireAction(_3,1,true)},isc.A.fireTimer=function isc_c_Animation_fireTimer(){var _1=isc.timeStamp(),_2=(_1-this.$0f),_3=Math.max(0,this.interval-(_2-this.interval));this.$0e=isc.Timer.setTimeout(this.timeoutAction,_3);this.$0f=_1;for(var i=0;i<this.registry.length;i++){var _5=this.registry[i];if(_5==null)continue;_5.elapsed+=_2;var _6=_5.currentFrame+1;if(!isc.Animation.timeBased&&((_5.elapsed/_5.maxDuration)>(_6/_5.totalFrames)))
{_6=Math.min(_5.totalFrames,Math.ceil((_5.elapsed/_5.maxDuration)*_5.totalFrames))}
_5.currentFrame=_6;var _7=isc.Animation.timeBased?_5.elapsed/_5.duration:_5.currentFrame/_5.totalFrames;var _8=_7,_9=_5.acceleration;if(_9&&isc.isA.Function(_9)){try{_8=_5.acceleration(_8)}catch(e){this.logWarn("Custom ratio function for animation:"+isc.Log.echoAll(_5)+"\nCaused an error:"+(e.message?e.message:e));_5.acceleration=null}}
if(_7>=1){_8=1;this.registry[i]=null}
var _10=null;try{_10=this.fireAction(_5,_8)}catch(e){_10=e}
if(_10!=null){this.logWarn("Attempt to fire registered animation:"+isc.Log.echoAll(_5)+"\nCaused an error:"+(_10.message?_10.message:_10));this.registry[i]=null}
if(_7>=1){this.logDebug("animation "+_5.ID+" completed","animation")}}
this.registry.removeEmpty();if(this.registry.length==0){isc.Timer.clearTimeout(this.$0e);this.$0e=null}},isc.A.fireAction=function isc_c_Animation_fireAction(_1,_2,_3){var _4=_1.target;if(!_4||_4.destroyed){return"No valid target. Target may have been destroyed since animation commenced"}
_4.fireCallback(_1.callback,this.$0c,[_2,_1.ID,_3])},isc.A.isActive=function isc_c_Animation_isActive(){return(this.registry&&this.registry.length>0)});isc.B._maxIndex=isc.C+8;isc.A=isc.Canvas.getPrototype();isc.A.animateTime=300;isc.A.animateAcceleration="smoothEnd";isc.A.$0g=["rect","fade","scroll","show","hide"];isc.A.animateShowEffect="wipe";isc.A.animateHideEffect="wipe";isc.A=isc.Canvas.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$0h={};isc.A.$0i={};isc.A.$0j={};isc.A.$747="Animation";isc.A.$0k={};isc.A.$0l={};isc.A.$743=0;isc.A.$0m="move";isc.A.$nx="resize";isc.A.$0n="rect";isc.A.$do="show";isc.A.$0o="slide";isc.A.$0p="wipe";isc.A.$0q="fade";isc.A.$0r="fly";isc.A.$0s="T";isc.A.$0t="L";isc.A.$0u={slide:"show",wipe:"show",fly:"move",fade:"fade"};isc.A.$zb="hide";isc.A.$0v={slide:"hide",wipe:"hide",fly:"move",fade:"fade"};isc.B.push(isc.A.registerAnimation=function isc_Canvas_registerAnimation(_1,_2,_3){if(!_3)_3=this.animationAcceleration;if(!_2)_2=this.animateTime;return isc.Animation.registerAnimation(_1,_2,_3,this)},isc.A.cancelAnimation=function isc_Canvas_cancelAnimation(_1){isc.Animation.clearAnimation(_1)},isc.A.getAnimateTime=function isc_Canvas_getAnimateTime(_1){if(!isc.isA.String(_1)||isc.isAn.emptyString(_1))return this.animateTime;if(!this.$0h[_1]){this.$0h[_1]="animate"+_1.substring(0,1).toUpperCase()+_1.substring(1)+"Time"}
return this[this.$0h[_1]]||this.animateTime},isc.A.getAnimateAcceleration=function isc_Canvas_getAnimateAcceleration(_1){if(!isc.isA.String(_1)||isc.isAn.emptyString(_1))return this.animateAcceleration;if(!this.$0i[_1]){this.$0i[_1]="animate"+_1.substring(0,1).toUpperCase()+_1.substring(1)+"Acceleration"}
return this[this.$0i[_1]]||this.animateAcceleration},isc.A.$0w=function isc_Canvas__getAnimationID(_1){if(!this.$0j[_1]){this.$0j[_1]=_1+this.$747}
return this.$0j[_1]},isc.A.$0x=function isc_Canvas__getAnimationMethodName(_1){if(!this.$0k[_1]){this.$0k[_1]="fireAnimation"+_1.substring(0,1).toUpperCase()+_1.substring(1)}
return this.$0k[_1]},isc.A.$0y=function isc_Canvas__startAnimation(_1,_2,_3,_4){var _5=this.$0w(_1);if(this[_5])this.finishAnimation(_1);if(!this.$0l[_1]){this.$0l[_1]="$"+_1+"AnimationInfo"}
this[this.$0l[_1]]=_2;if(_3==null)_3=this.getAnimateTime(_1);if(_4==null)_4=this.getAnimateAcceleration(_1);var _6=this[_5]=this.registerAnimation(this[this.$0x(_1)],_3,_4);if(this.logIsInfoEnabled("animation")){this.logInfo("starting animation "+_6+" of type: "+_1+", duration: "+_3+", acceleration: "+this.echoLeaf(_4),"animation")}
this.$743++;return _6},isc.A.$744=function isc_Canvas__clearAnimationInfo(_1){var _2=this.$0w(_1);if(!this[_2]){return}
delete this[_2];delete this[this.$0l[_1]];this.$743--},isc.A.animationComplete=function isc_Canvas_animationComplete(_1){},isc.A.$0z=function isc_Canvas__fireAnimationCompletionCallback(_1,_2,_3){if(!_1)return;var _4=this;var _5=function(){_4.fireCallback(_1,"earlyFinish",[_2]);_4.animationComplete(_2)}
if(_2||_3){_5()}else{isc.Timer.setTimeout(_5,0)}},isc.A.finishAnimation=function isc_Canvas_finishAnimation(_1){if(_1==null){for(var i=0;i<this.$0g.length;i++){this.finishAnimation(this.$0g[i])}
return}
var _3=this.$0w(_1);if(!this[_3])return;if(this.logIsInfoEnabled("animation")){this.logInfo("manual finish for animations: "+this.echoAll(this[_3])+(this.logIsDebugEnabled("animation")?this.getStackTrace():""),"animation")}
isc.Animation.finishAnimation(this[_3])},isc.A.animateMove=function isc_Canvas_animateMove(_1,_2,_3,_4,_5){return this.animateRect(_1,_2,null,null,_3,_4,_5,this.$0m)},isc.A.fireAnimationMove=function isc_Canvas_fireAnimationMove(_1,_2,_3){return this.fireAnimationRect(_1,_2,_3,this.$0m)},isc.A.animateResize=function isc_Canvas_animateResize(_1,_2,_3,_4,_5){return this.animateRect(null,null,_1,_2,_3,_4,_5,this.$nx)},isc.A.fireAnimationResize=function isc_Canvas_fireAnimationResize(_1,_2,_3){return this.fireAnimationRect(_1,_2,_3,this.$nx)},isc.A.animateRect=function isc_Canvas_animateRect(_1,_2,_3,_4,_5,_6,_7,_8){if(_8==null){_8=this.$0n;if(this.resizeAnimation!=null)this.finishAnimation(this.$nx);if(this.moveAnimation!=null)this.finishAnimation(this.$0m)}
var _9={$00:this.getRect(),_left:_1,_top:_2,$02:_3,$o8:_4,$03:_5};return this.$0y(_8,_9,_6,_7)},isc.A.fireAnimationRect=function isc_Canvas_fireAnimationRect(_1,_2,_3,_4){var _5=(_4==this.$nx?this.$resizeAnimationInfo:(_4==this.$0m?this.$moveAnimationInfo:this.$rectAnimationInfo)),_6=_5.$00,_7=_5._left,_8=_5._top,_9=_5.$02,_10=_5.$o8,_11=_7!=null?this.$04(_6[0],_7,_1):null,_12=_8!=null?this.$04(_6[1],_8,_1):null;var _13,_14;if(_9!=null&&_11!=null&&(_7-_6[0]!=0)){var _15=(_9-_6[2])/(_7-_6[0]);if(Math.floor(_15)==_15){_13=_6[2]+(_15*(_11-_6[0]))}}
if(_10!=null&&_12!=null&&(_8-_6[1]!=0)){var _15=(_10-_6[3])/(_8-_6[1]);if(Math.floor(_15)==_15){_14=_6[3]+(_15*(_12-_6[1]))}}
if(_13==null&&_9!=null){_13=this.$04(_6[2],_9,_1)}
if(_14==null&&_10!=null){_14=this.$04(_6[3],_10,_1)}
if(_1==1){if(_4==null)_4="rect";this.$744(_4)}
this.setRect(_11,_12,_13,_14,(_1<1));if(this.isDirty())this.redraw("animated resize");if(_1==1){this.$0z(_5.$03,_3)}},isc.A.$04=function isc_Canvas__getRatioTargetValue(_1,_2,_3){if(_2==null)return _1;return(_1+Math.floor(_3*(_2-_1)))},isc.A.animateFade=function isc_Canvas_animateFade(_1,_2,_3,_4){if(!this.isDrawn()){this.setOpacity(_1);this.$0z(_2,true);return}
if(this.visibility==isc.Canvas.HIDDEN){this.setOpacity(0);this.show()}
if(_1==null)_1=100;var _5={$05:this.opacity!=null?this.opacity:100,$06:_1,$03:_2};return this.$0y("fade",_5,_3,_4)},isc.A.fireAnimationFade=function isc_Canvas_fireAnimationFade(_1,_2,_3){var _4=this.$fadeAnimationInfo,_5=_4.$05,_6=_4.$06;var _7=this.$04(_5,_6,_1);if(isc.Browser.isIE&&_7>0&&!_4.$07&&!isc.Browser.isIE9){var _8=this.getStyleHandle();if(_8){_8.visibility=isc.Canvas.VISIBLE;_8.visibility=isc.Canvas.INHERIT}
var _9=this.peers;if(_9&&_9.length>0){for(var i=0;i<_9.length;i++){if(_9[i].$nt){var _8=_9[i].getStyleHandle();if(_8){_8.visibility=isc.Canvas.VISIBLE;_8.visibility=isc.Canvas.INHERIT}}}}
_4.$07=true}
if(_1==1){this.$744("fade")}
this.setOpacity(_7,(_1<1));if(_1==1)this.$0z(_4.$03,_3)},isc.A.animateScroll=function isc_Canvas_animateScroll(_1,_2,_3,_4,_5){var _6=this.overflow;if(this.overflow==isc.Canvas.VISIBLE)return;var _7={$08:this.getScrollLeft(),$09:this.getScrollTop(),$1a:_1,$1b:_2,$03:_3};return this.$0y("scroll",_7,_4,_5)},isc.A.fireAnimationScroll=function isc_Canvas_fireAnimationScroll(_1,_2,_3){var _4=this.$scrollAnimationInfo,_5=_4.$08,_6=_4.$1a,_7=_4.$09,_8=_4.$1b,_9=this.$04(_5,_6,_1),_10=this.$04(_7,_8,_1);if(_1==1){this.$744("scroll")}
this.scrollTo(_9,_10,null,(_1<1));if(_1==1&&_4.$03){this.$0z(_4.$03,_3)}},isc.A.animateShow=function isc_Canvas_animateShow(_1,_2,_3,_4){if(_1==null)_1=this.animateShowEffect;var _5;if(isc.isAn.Object(_1)){_5=_1;_1=_1.effect}
if(this.$va!=null)this.finishAnimation(this.$va);if(this.isDrawn()&&this.isVisible()){return}
if(this.$vc!=null){return}
if(!this.isDrawn()){if(this.parentElement&&!this.parentElement.isDrawn()){this.show();this.logInfo("not animating show, component not drawn","animation");this.animateShowComplete(true);return}else{this.draw()}}
this.$vc=this.$0u[_1]||this.$do;this.$1c=_2;if(!this.$1d)
this.$1d={target:this,methodName:"animateShowComplete"}
if(_1==this.$0q){var _6=this.opacity;this.$1e=_2;this.setOpacity(0);this.show();if(_3==null)_3=this.animateShowTime;if(_4==null)_4=this.animateShowAcceleration;return this.animateFade(_6,this.$1d,_3,_4)}else if(_1==this.$0r){if(this.parentElement!=null){this.logInfo("animateShow() called with 'fly' effect - not supported for child widgets defaulting to standard 'wipe' animation instead.","animation");_1=this.$0p}else{if(_3==null)_3=this.animateShowTime;if(_4==null)_4=this.animateShowAcceleration;var _7=this.isRTL(),_8=this.getLeft(),_9=_7?isc.Page.getWidth()+isc.Page.getScrollLeft():0-this.getVisibleWidth();this.$58w=this._percent_left,this.setLeft(_9);this.show();return this.animateMove(_8,null,this.$1d,_3,_4)}}
if(!this.$1f(_1)){this.logInfo("not animating show, can't do clip animations","animation");this.show();this.animateShowComplete(true);return}
if(this.isVisible())this.hide();var _10=this.getVisibleHeight(),_11=this.getVisibleWidth(),_12=_5?_5.startFrom==this.$0s:true,_13=(_12?this.getScrollTop():this.getScrollLeft()),_14=(_1=="slide"),_15={$po:this.$po,$1g:this.getHeight(),$1h:_10,$pn:this.$pn,$1i:this.getWidth(),$1j:_11,$58x:this._percent_width,$58y:this._percent_height,$1k:this.overflow,$1l:_12,$1m:_13,$1n:_14,$03:this.$1d};if(_12){if(this.vscrollOn&&this.vscrollbar){_15.$495=this.vscrollbar.thumb.getTop();_15.$496=this.vscrollbar.thumb.getHeight();if(this.vscrollbar.thumb){this.vscrollbar.thumb.$jq=false;this.vscrollbar.thumb.$493=true}
this.vscrollbar.$494=true;this.vscrollbar.$493=true;this.vscrollbar.setHeight(1)}
if(this.hscrollOn&&this.hscrollbar){this.hscrollbar.$493=true;if(this.hscrollbar.thumb)this.hscrollbar.thumb.$493=true;if(!_15.$1n){this.hscrollbar.$jq=false}else{this.hscrollbar.setTop(this.getTop());this.hscrollbar.setHeight(1)}}}else{if(this.hscrollOn&&this.hscrollbar){_15.$495=this.hscrollbar.thumb.getLeft();_15.$496=this.hscrollbar.thumb.getWidth();this.hscrollbar.$494=true;this.hscrollbar.$493=true;if(this.hscrollbar.thumb){this.hscrollbar.thumb.$jq=false;this.hscrollbar.thumb.$493=true}
this.hscrollbar.setWidth(1)}
if(this.vscrollOn&&this.vscrollbar){this.vscrollbar.$493=true;if(this.vscrollbar.thumb)this.vscrollbar.thumb.$493=true;if(!_15.$1n){this.vscrollbar.$jq=false}else{this.vscrollbar.setLeft(this.getLeft());this.vscrollbar.setWidth(1)}}}
if(this.showEdges&&this.$l0){this.$l0.$za=true}
if(this.overflow==isc.Canvas.VISIBLE){this.setOverflow(isc.Canvas.HIDDEN)}
if(this.overflow==isc.Canvas.AUTO||this.overflow==isc.Canvas.SCROLL){this.$417=true}
this.resizeTo((_12?_11:1),(_12?1:_10),true);if(_14)this.scrollTo((_12?null:_13+(_11-1)),(_12?_13+(_10-1):null));if(this.showEdges&&this.$l0){if(_12)
this.$u9(this.$l0.getHandle().firstChild.style,"height",_10);else
this.$u9(this.$l0.getHandle().firstChild.style,"width",_11);this.$l0.setOverflow(isc.Canvas.HIDDEN);if(_14){if(_12){var _16=this.$l0.$td;this.$u9(this.getStyleHandle(),"marginTop",(this.getTopMargin()-_16))}else{var _16=this.$l0.$tb;this.$u9(this.getStyleHandle(),"marginLeft",(this.getLeftMargin()-_16))}}
this.$l0.show()}else{var _17=_12?(this.hscrollOn?this.hscrollbar:null):(this.vscrollOn?this.vscrollbar:null),_18=_12?(this.vscrollOn?this.vscrollbar:null):(this.hscrollOn?this.hscrollbar:null);if(_17&&_15.$1n){_17.show();if(_18)_18.show()}else{this.show()}}
return this.$0y(this.$do,_15,_3,_4)},isc.A.fireAnimationShow=function isc_Canvas_fireAnimationShow(_1,_2,_3){var _4=this.$showAnimationInfo,_5=_4.$1l;if(_1<1){var _6=(_5?_4.$1h:_4.$1j),_7=this.$04(1,_6,_1),_8=_6-_7,_9=(this.showEdges&&this.$l0),_10,_11;if(_9){_10=(_4.$1n?(_5?this.$l0.$te:this.$l0.$tc):(_5?this.$l0.$td:this.$l0.$tb)),_11=(_4.$1n?(_5?this.$l0.$td:this.$l0.$tb):(_5?this.$l0.$te:this.$l0.$tc));this.$l0.resizeTo((_5?null:_7),(_5?_7:null),true);if(_4.$1n){if(_5)this.$l0.scrollToBottom();else this.$l0.scrollToRight()}
if(_7<_10)return;if(_8<=_11){if(_4.$1n){var _12=(_5?"marginTop":"marginLeft"),_13=(_5?this.getTopMargin()-_8:this.getLeftMargin()-_8);this.$u9(this.getStyleHandle(),_12,_13);this.scrollTo((_5?null:_4.$1m),(_5?_4.$1o:null),null,true)}
return}
if(!this.isVisible()){this.$vd=true;this.show();delete this.$vd}}
var _14=_5?this.vscrollOn:this.hscrollOn,_15=_5?this.hscrollOn:this.vscrollOn;if(_14){var _16;if(_5){_16=this.vscrollbar;if(_16)_16.resizeTo(null,_7)}else{_16=this.hscrollbar;var _17=_7;if(this.vscrollOn){if(_4.$1n){_17-=this.scrollbarSize}else{_17=Math.min(_7,_6-this.scrollbarSize)}}
if(_17>0){if(_16)_16.resizeTo(_17,null)}}
if(_4.$1n&&_16){if(_5)_16.scrollToBottom();else _16.scrollToRight()}
if(_16&&_16.thumb){var _18=_16.thumb;if(_4.$1n){var _19=_4.$495-_8,_20=_19+Math.min(_7,_4.$496),_21=_5?this.getTop():this.getLeft();if(_20<=_21){}else{_19=Math.max(_21,_19);var _22=Math.min(_20-_19,_7);_18.resizeTo(_5?null:_22,_5?_22:null);if(_5)_18.scrollToBottom()
else _18.scrollToRight();_18.moveTo(_5?null:_19,_5?_19:null);if(!_18.isVisible())_18.show()}}else{var _19=_4.$495,_20=Math.min((_19+_4.$496),(_5?this.getTop()+_7:this.getLeft()+_7));var _23=(_5?this.getTop():this.getLeft())+_7
if(_23<=_19){}else{if(_5)_18.setHeight(_20-_19);else _18.setWidth(_20-_19);if(!_18.isVisible())_18.show()}}}}
var _24=0;if(_15&&_25){var _25=_5?this.hscrollbar:this.vscrollbar;if(_4.$1n){var _26=_5?(this.getTop()+Math.max(0,(_7-this.scrollbarSize))):(this.getLeft()+Math.max(0,(_7-this.scrollbarSize)))
_25.moveTo(_5?null:_26,_5?_26:null);var _27=Math.min(_7,this.scrollbarSize);_25.resizeTo(_5?null:_27,_5?_27:null);if(_5){_25.scrollToBottom();if(_25.thumb)_25.thumb.scrollToBottom()}else{_25.scrollToRight();if(_25.thumb)_25.thumb.scrollToRight()}
if(_7>this.scrollbarSize&&!this.isVisible()){this.$vd=true;this.show();delete this.$vd}}else{if(_8<=this.scrollbarSize){if(!_25.isVisible())_25.show();_25.resizeTo(_5?null:this.scrollbarSize-_8,_5?this.scrollbarSize-_8:null)}}
if(_25.isVisible()){_24=this.scrollbarSize-
(_5?_25.getHeight():_25.getWidth())}else{_24=this.scrollbarSize}}
var _28=_7;if(_9)_28+=_11;if(_24)_28+=_24
if(!this.resizeTo((_5?null:_28),(_5?_28:null),true))
{this.$5y()}
if(_4.$1n){this.scrollTo((_5?null:_4.$1m+_8),(_5?_4.$1m+_8:null),null,true)}}else{if(!this.isVisible())this.show();this.$744("show");if(!this.resizeTo(_4.$1i,_4.$1g)){this.$5y()}
this.setOverflow(_4.$1k);if(this.overflow==isc.Canvas.AUTO||this.overflow==isc.Canvas.SCROLL){delete this.$417;if(this.vscrollOn&&this.vscrollbar){if(this.vscrollbar.visibility==isc.Canvas.HIDDEN)this.vscrollbar.show();if(_5)delete this.vscrollbar.$494;delete this.vscrollbar.$493;this.vscrollbar.$jq=true;if(_4.$1n)this.vscrollbar.scrollTo(0,0);if(this.vscrollbar.thumb){delete this.vscrollbar.thumb.$493;this.vscrollbar.thumb.$jq=true;if(_4.$497)this.vscrollbar.thumb.scrollTo(0,0)}
if(!_5){this.vscrollbar.setWidth(this.getScrollbarSize());this.vscrollbar.setThumb()}}
if(this.hscrollOn&&this.hscrollbar){if(this.hscrollbar.visibility==isc.Canvas.HIDDEN)this.hscrollbar.show();if(!_5){delete this.hscrollbar.$494}else{this.hscrollbar.setHeight(this.getScrollbarSize());this.hscrollbar.setThumb()}
delete this.hscrollbar.$493;this.hscrollbar.$jq=true;if(_4.$1n)this.hscrollbar.scrollTo(0,0);if(this.hscrollbar.thumb){delete this.hscrollbar.thumb.$493;this.hscrollbar.thumb.$jq=true;if(_4.$1n)this.hscrollbar.thumb.scrollTo(0,0)}}}
if(this.showEdges&&this.$l0){if(_4.$1n){var _12=(_5?"marginTop":"marginLeft"),_13=(_5?this.getTopMargin():this.getLeftMargin());this.$u9(this.getStyleHandle(),_12,_13);this.$l0.scrollTo((_5?null:0),(_5?0:null))}
if(_5)
this.$l0.getHandle().firstChild.style.height="100%";else
this.$l0.getHandle().firstChild.style.width="100%";this.$l0.setOverflow(isc.Canvas.VISIBLE);delete this.$l0.$za}
this.$pn=_4.$pn;this.$po=_4.$po;this._percent_width=_4.$58x;this._percent_height=_4.$58y;if(_4.$1n)this.scrollTo((_5?null:_4.$1m),(_5?_4.$1m:null));if(_4.$03){this.$0z(_4.$03,_3)}}},isc.A.animateShowComplete=function isc_Canvas_animateShowComplete(_1){if(this.$58w!=null){this._percent_left=this.$58w;delete this.$58w}
this.$vc=null;var _2=this.$1c;this.$1c=null;if(_2)this.$0z(_2,_1,true)},isc.A.$1f=function isc_Canvas__canAnimateClip(_1){if(this.canAnimateClip!=null)return this.canAnimateClip;return(this.scrollTo==isc.Canvas.getInstanceProperty("scrollTo"))},isc.A.animateHide=function isc_Canvas_animateHide(_1,_2,_3,_4,_5){if(_1==null)_1=this.animateHideEffect;var _6;if(isc.isAn.Object(_1)){_6=_1;_1=_6.effect}
if(this.$vc!=null){this.finishAnimation(this.$vc)}
if(!this.isVisible())return;if(this.$va!=null)return;if(!this.isDrawn()&&!isc.isA.LayoutSpacer(this)){this.hide();if(_2)this.$0z(_2,true);return}
this.$va=this.$0v[_1]||this.$zb;this.$1p=_2;if(!this.$1q)
this.$1q={target:this,methodName:"$1r"}
if(_1==this.$0q){this.$1s=this.opacity;this.$1t=true;if(_3==null)_3=this.animateHideTime;if(_4==null)_4=this.animateHideAcceleration;return this.animateFade(0,this.$1q,_3,_4,_5)}else if(_1==this.$0r){this.$1u=this.getLeft();this.$58z=this._percent_left;if(this.parentElement!=null){this.logInfo("animateHide() called with 'fly' effect - not supported for child widgets defaulting to standard 'wipe' animation instead.","animation");_1=this.$0p}else{if(_3==null)_3=this.animateShowTime;if(_4==null)_4=this.animateShowAcceleration;var _7=this.isRTL(),_8=_7?isc.Page.getWidth()+isc.Page.getScrollLeft():0-this.getVisibleWidth();return this.animateMove(_8,null,this.$1q,_3,_4,_5)}}
if((!this.$1f(_1)||!this.isDrawn())&&!this.isA(isc.LayoutSpacer))
{this.logInfo("not animating hide, can't do clip animations","animation");this.hide();this.$1r(true);return}
var _9=this.getVisibleHeight(),_10=this.getVisibleWidth(),_11=(_6?_6.endAt==this.$0s:true),_12={$po:this.$po,$1g:this.getHeight(),$1h:_9,$pn:this.$pn,$1i:this.getWidth(),$1j:_10,$1m:(_11?this.getScrollTop():this.getScrollLeft()),$1l:_11,$1v:_1=="slide",$1k:this.overflow,$03:this.$1q,$1w:_5};if(_12.$1v){if(_11&&this.vscrollOn&&this.vscrollbar){_12.$495=this.vscrollbar.thumb.getTop();_12.$496=this.vscrollbar.thumb.getHeight()}else if(!_11&&this.hscrollOn&&this.hscrollbar){_12.$495=this.hscrollbar.thumb.getLeft();_12.$496=this.hscrollbar.thumb.getWidth()}}
this.resizeTo(_10,_9,true);if(this.overflow==isc.Canvas.VISIBLE)this.setOverflow(isc.Canvas.HIDDEN);if(this.overflow==isc.Canvas.AUTO||this.overflow==isc.Canvas.SCROLL){this.$417=true;if(this.vscrollOn&&this.vscrollbar){this.vscrollbar.$jq=false;if(_11)this.vscrollbar.$494=true;this.vscrollbar.$493=true;if(this.vscrollbar.thumb){this.vscrollbar.thumb.$493=true}}
if(this.hscrollOn&&this.hscrollbar){this.hscrollbar.$jq=false;if(!_11)this.hscrollbar.$494=true;this.hscrollbar.$493=true;if(this.hscrollbar.thumb){this.hscrollbar.thumb.$493=true}}}
if(this.showEdges){this.$l0.setOverflow("hidden");this.$l0.$za=true;this.$u9(this.$l0.getHandle().firstChild.style,(_11?"height":"width"),(_11?this.$l0.getHeight():this.$l0.getWidth()))}
return this.$0y(this.$zb,_12,_3,_4)},isc.A.fireAnimationHide=function isc_Canvas_fireAnimationHide(_1,_2,_3){var _4=this.$hideAnimationInfo,_5=_4.$1l;if(_1<1){var _6=(_5?_4.$1h:_4.$1j),_7=this.$04(_6,1,_1),_8=_6-_7,_9=(this.showEdges&&this.$l0),_10,_11,_12=this.hscrollOn&&this.hscrollbar,_13=this.vscrollOn&&this.vscrollbar;if(_9){_10=(_4.$1v?(_5?this.$l0.$td:this.$l0.$tb):(_5?this.$l0.$te:this.$l0.$tc));_11=(_4.$1v?(_5?this.$l0.$te:this.$1x.$tc):(_5?this.$l0.$td:this.$l0.$tb));this.$l0.resizeTo((_5?null:_7),(_5?_7:null),true);if(_4.$1v){if(_5)this.$l0.scrollToBottom();else this.$l0.scrollToRight()}
if(_8<_10){if(_4.$1v){var _14=(_5?"marginTop":"marginLeft"),_15=(_5?this.getTopMargin():this.getLeftMargin())
this.$u9(this.getStyleHandle(),_14,(_15-_8))}
this.$5y();return}
if(_4.$1v&&!this.$1y){var _14=(_5?"marginTop":"marginLeft"),_15=(_5?this.getTopMargin():this.getLeftMargin())
this.$u9(this.getStyleHandle(),_14,(_15-_10));this.$1y=true}
if(_9&&_7<=_11){this.$vb=true;this.getStyleHandle().visibility=isc.Canvas.HIDDEN;delete this.$vb}}
var _16=_5?(_13?this.vscrollbar:null):(_12?this.hscrollbar:null);if(_16){if(_5)_16.setHeight(_7);else{var _17=_7;if(this.vscrollOn){if(_4.$1v){_17-=this.scrollbarSize}else{_17=Math.min(_7,_6-this.scrollbarSize)}}
if(_17>0)_16.setWidth(_17);else _16.hide()}
if(_4.$1v){if(_5)_16.scrollToBottom();else _16.scrollToRight()}
if(_16.thumb&&_16.thumb.isVisible()){if(_4.$1v){var _18=_4.$495-_8,_19=_5?this.getTop():this.getLeft();if(_18>=_19){_16.thumb.moveTo(_5?null:_18,_5?_18:null)}else{_16.thumb.moveTo(_5?null:this.getLeft(),_5?this.getTop():null);var _20=_4.$496+(_18-_19);if(_20>0){_16.thumb.resizeTo(_5?null:_20,_5?_20:null);_16.thumb.scrollTo(_5?null:_19-_18,_5?_19-_18:null)}else{_16.thumb.hide()}}}else{if(_5){var _21=(this.getTop()+_7)
if(_16.thumb.getBottom()>_21){var _22=_21-_16.thumb.getTop();if(_22>0)_16.thumb.setHeight(_22);else _16.thumb.hide()}}else{var _23=(this.getLeft()+_7)
if(_16.thumb.getRight()>_23){var _24=_23-_16.thumb.getLeft();if(_24>0)_16.thumb.setWidth(_24);else _16.thumb.hide()}}}}}
var _25=_5?(_12?this.hscrollbar:null):(_13?this.vscrollbar:null),_26=0;if(_25){var _27=this.scrollbarSize;if(_4.$1v){if(_7>=_27){var _28=(_5?this.getTop():this.getLeft())+_7-_27;_25.moveTo(_5?null:_28,_5?_28:null)}else{_25.moveTo(_5?null:this.getLeft(),_5?this.getTop():null);_25.resizeTo(_5?null:_7,_5?_7:null);if(_5)_25.scrollToBottom();else _25.scrollToRight();var _29=_25.thumb
if(_29){_29.resizeTo(_5?null:_7,_5?_7:null);if(_5)_29.scrollToBottom();else _29.scrollToRight()}}
if(_7<=_27){this.$vb=true;if(this.isVisible())this.hide();delete this.$vb;return}}else{if(_8<=_27){_25.resizeTo(_5?null:_27-_8,_5?_27-_8:null);if(_25.thumb){_25.thumb.resizeTo(_5?null:_27-_8,_5?_27-_8:null)}}else{if(_25.isVisible())_25.hide()}}
if(_25.isVisible()){_26=this.scrollbarSize-
(_5?_25.getHeight():_25.getWidth())}else{_26=this.scrollbarSize}}
var _30=_7;if(_9)_30+=_10;if(_26)_30+=_26;if(!this.resizeTo((_5?null:_30),(_5?_30:null),true))
{this.$5y()}
var _31;if(_4.$1v){this.scrollTo((_5?null:_4.$1m+_8),(_5?_4.$1m+_8:null),null,true)}}else{this.$744("hide");if(this.isVisible())this.hide();if(_4.$1k)this.setOverflow(_4.$1k);if(this.showEdges&&this.$l0){delete this.$1y;this.$l0.setOverflow(isc.Canvas.VISIBLE);delete this.$l0.$za;if(_5)this.$l0.getHandle().firstChild.style.height="100%";else this.$l0.getHandle().firstChild.style.width="100%"
if(_4.$1v){var _32=this.$sd(),_14=(_5?"marginTop":"marginLeft"),_15=(_5?_32.top:_32.left)
this.$u9(this.getStyleHandle(),_14,_15)}}
if(this.overflow==isc.Canvas.AUTO||this.overflow==isc.Canvas.SCROLL){delete this.$417;if(_5){if(this.vscrollOn&&this.vscrollbar){if(this.vscrollbar.isVisible())this.vscrollbar.hide();delete this.vscrollbar.$494;delete this.vscrollbar.$493;this.vscrollbar.$jq=true;if(this.vscrollbar.thumb){delete this.vscrollbar.thumb.suppressImageResize}
if(_4.$1v){this.vscrollbar.scrollTo(0,0);this.vscrollbar.setHeight(this.getHeight());if(this.vscrollbar.thumb)this.vscrollbar.thumb.scrollTo(0,0)}}
if(this.hscrollOn&&this.hscrollbar){if(this.hscrollbar.isVisible())this.hscrollbar.hide();this.hscrollbar.$jq=true;delete this.hscrollbar.$493;if(_4.$1v)this.hscrollbar.scrollTo(0,0);if(this.hscrollbar.thumb){delete this.hscrollbar.thumb.$493;if(_4.$1v)this.hscrollbar.thumb.scrollTo(0,0)}}}else{if(this.hscrollOn&&this.hscrollbar){if(this.hscrollbar.isVisible())this.hscrollbar.hide();delete this.hscrollbar.$494;delete this.hscrollbar.$493;this.hscrollbar.$jq=true;if(this.hscrollbar.thumb)
delete this.hscrollbar.$493;if(_4.$1v){this.hscrollbar.scrollTo(0,0);this.hscrollbar.setWidth(this.getWidth());if(this.hscrollbar.thumb)this.hscrollbar.thumb.scrollTo(0,0)}}
if(this.vscrollOn&&this.vscrollbar){if(this.vscrollbar.isVisible())this.vscrollbar.hide();this.vscrollbar.$jq=true;delete this.vscrollbar.$493;if(_4.$1v)this.vscrollbar.scrollTo(0,0);if(this.vscrollbar.thumb){if(_4.$1v)this.vscrollbar.thumb.scrollTo(0,0);delete this.vscrollbar.$493}}}}
this.resizeTo(_4.$1i,_4.$1g);this.$po=_4.$po;this.$pn=_4.$pn;if(_4.$1v)this.scrollTo((_5?null:_4.$1m),(_5?_4.$1m:null));if(_4.$03){this.$0z(_4.$03,_3,true)}}});isc.evalBoundary;isc.B.push(isc.A.$1r=function isc_Canvas__animateHideComplete(_1){delete this.$va;var _2=this.$1p;delete this.$1p;if(this.isVisible())this.hide();if(this.$1t){this.setOpacity(this.$1s);delete this.$1s;delete this.$1t}
if(this.$1u!=null){this.setLeft(this.$1u);delete this.$1u}
if(this.$58z!=null){this._percent_left=this.$58z;delete this.$58z}
if(_2){this.$0z(_2,_1,true)}},isc.A.isAnimating=function isc_Canvas_isAnimating(_1){if(_1==null)return this.$743>0;if(_1&&!isc.isAn.Array(_1)){if(!this.$745)this.$745=[];this.$745[0]=_1;_1=this.$745}
if(!_1)_1=this.$0g;for(var i=0;i<_1.length;i++){if(this[this.$0w(_1[i])]!=null){return true}}
return false});isc.B._maxIndex=isc.C+30;isc.ClassFactory.defineClass("StatefulCanvas","Canvas");isc.A=isc.StatefulCanvas;isc.A.STATE_UP="";isc.A.STATE_DOWN="Down";isc.A.STATE_OVER="Over";isc.A.STATE_DISABLED="Disabled";isc.A.BUTTON="button";isc.A.CHECKBOX="checkbox";isc.A.RADIO="radio";isc.A.FOCUSED="Focused";isc.A.SELECTED="Selected";isc.A.UNSELECTED="";isc.A.$1z={};isc.A.$1333={"left":"right","center":"center","right":"left"};isc.A.$95r={};isc.A.$95t={};isc.A.$95m=["borderBottomLeftRadius","borderBottomRightRadius","borderTopRightRadius","borderTopLeftRadius","borderBottomColor","borderBottomStyle","borderBottomWidth","borderLeftColor","borderLeftStyle","borderLeftWidth","borderRightColor","borderRightStyle","borderRightWidth","borderTopColor","borderTopStyle","borderTopWidth"];isc.A.$95n=4;isc.A.$95o=" ";isc.A.pushTableBorderStyleToDiv=false;isc.A.$132w={};isc.A.$132x={};isc.A.pushTableShadowStyleToDiv=true;isc.A=isc.StatefulCanvas.getPrototype();isc.A.ignoreRTL=false;isc.A.state="";isc.A.showFocusedAsOver=true;isc.A.showDisabled=true;isc.A.actionType="button";isc.A.cursor=isc.Canvas.ARROW;isc.A.capSize=0;isc.A.align=isc.Canvas.CENTER;isc.A.valign=isc.Canvas.CENTER;isc.A.autoFitDirection=isc.Canvas.BOTH;isc.A.iconSize=16;isc.A.iconOrientation="left";isc.A.iconSpacing=6;isc.A.showIconState=true;isc.A.showDisabledIcon=true;isc.A.gripImgSuffix="grip";isc.A.overCanvasConstructor="Canvas";isc.A.overCanvasDefaults={mouseOut:function(){if(isc.EH.getTarget()!=this.creator)this.clear();return this.Super("mouseOut",arguments)}};isc.A=isc.StatefulCanvas.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$42d="visualState";isc.A.$54k="SelectedFocused";isc.A.labelDefaults={$1240:true,$kk:function(){return this.masterElement.$kk()},focusChanged:function(_1){if(this.hasFocus)this.eventProxy.focus()},getContents:function(){return this.masterElement.getTitleHTML()},adjustOverflow:function(_1,_2,_3,_4){this.invokeSuper(null,"adjustOverflow",_1,_2,_3,_4);if(this.masterElement)this.masterElement.$10()}};isc.A.$11="label";isc.A.$12="Label overflowed.";isc.A.$64x="$5y";isc.B.push(isc.A.initWidget=function isc_StatefulCanvas_initWidget(){if(this.src==null)this.src=this.vertical?this.vSrc:this.hSrc;var _1=(this.state==isc.StatefulCanvas.STATE_DISABLED);if(_1){if(!this.showDisabled){this.logWarn("The state cannot be initialized to 'Disabled' if this.showDisabled is false. Setting to STATE_UP...");this.state=isc.StatefulCanvas.STATE_UP;_1=false}}
if(this.isDisabled()){if(!_1)this.$42e=this.state;if(this.showDisabled){this.state=isc.StatefulCanvas.STATE_DISABLED;_1=true}}
this.baseStyle=this.baseStyle||this.className;this.styleName=(this.suppressClassName?null:this.getStateName());this.className=this.styleName;if(this.radioGroup!=null){var _2=this.radioGroup;this.radioGroup=null;this.addToRadioGroup(_2)}
this.setAutoFit(this.autoFit,true);if(this.showGrip){this.showTitle=true;this.labelVPad=0;this.labelHPad=0;this.iconSpacing=0;this.align=isc.Canvas.CENTER;this.icon=this.getImgURL(this.getURL(this.gripImgSuffix));this.iconSize=this.gripSize;this.iconWidth=this.vertical?this.gripBreadth:this.gripLength;this.iconHeight=this.vertical?this.gripLength:this.gripBreadth;this.showRollOverIcon=this.showRollOverGrip;this.showDownIcon=this.showDownGrip}
var _3=this.shouldShowLabel();if(_3)this.makeLabel();if(isc.screenReader&&!_3&&!this.showGrip&&(this.prompt||this.title)){var _4=this.getAriaLabel();if(_4!=null){this.ariaState=isc.addProperties({},this.ariaState,{label:_4})}}},isc.A.getAriaLabel=function isc_StatefulCanvas_getAriaLabel(){var _1=this.prompt||this.title;if(_1!=null&&_1!=""&&isc.Button.getInstanceProperty("title")!=_1)
{return _1}
return null},isc.A.getURL=function isc_StatefulCanvas_getURL(_1,_2,_3,_4){return isc.Img.urlForState(this.src,_3!=null?_3:this.selected,_4!=null?_4:this.getFocusedState(),_2!=null?_2:this.state,_1,this.getCustomState())},isc.A.shouldShowLabel=function isc_StatefulCanvas_shouldShowLabel(){return this.showTitle},isc.A.setIgnoreRTL=function isc_StatefulCanvas_setIgnoreRTL(_1){this.ignoreRTL=!!_1;if(this.isDrawn())this.markForRedraw();if(this.label)this.label.setIgnoreRTL(_1)},isc.A.stateChanged=function isc_StatefulCanvas_stateChanged(){if(this.destroyed)return;if(this.logIsDebugEnabled(this.$42d)){this.logDebug("state changed to: "+this.getStateName(),"visualState")}
if(this.redrawOnStateChange){this.markForRedraw("state change")}
if(!this.suppressClassName){this.setClassName(this.getStateName())}
var _1=this.label;if(_1!=null){_1.setState(this.getState());_1.setSelected(this.isSelected());_1.setCustomState(this.getCustomState())}},isc.A.setBaseStyle=function isc_StatefulCanvas_setBaseStyle(_1){if(this.baseStyle==_1)return;this.baseStyle=_1;if(this.label&&this.titleStyle==null)this.label.setBaseStyle(_1);this.stateChanged()},isc.A.setTitleStyle=function isc_StatefulCanvas_setTitleStyle(_1){if(this.titleStyle==_1)return;this.titleStyle=_1;if(this.label){this.label.setBaseStyle(_1||this.baseStyle)}
this.stateChanged()},isc.A.setState=function isc_StatefulCanvas_setState(_1){if(_1==isc.StatefulCanvas.STATE_DISABLED&&!this.showDisabled){this.logWarn("The state cannot be changed to 'Disabled' when this.showDisabled is false.");return}
if(this.state==_1)return;this.state=_1;this.stateChanged()},isc.A.$sn=function isc_StatefulCanvas__updateChildrenTopElement(){this.Super("$sn",arguments);this.setHandleDisabled(this.isDisabled())},isc.A.getState=function isc_StatefulCanvas_getState(){return this.state},isc.A.setSelected=function isc_StatefulCanvas_setSelected(_1){if(this.selected==_1)return;if(_1&&this.radioGroup!=null){var _2=isc.StatefulCanvas.$1z[this.radioGroup];if(_2==null){this.logWarn("'radioGroup' property set for this widget, but no corresponding group exists. To set up a new radioGroup containing this widget, or add this  widget to an existing radioGroup at runtime, call 'addToRadioGroup(groupID)'")}else{for(var i=0;i<_2.length;i++){if(_2[i]!=this&&_2[i].isSelected())
_2[i].setSelected(false)}}}
this.selected=_1;if(this.label)this.label.setSelected(this.isSelected());this.stateChanged()},isc.A.select=function isc_StatefulCanvas_select(){this.setSelected(true)},isc.A.deselect=function isc_StatefulCanvas_deselect(){this.setSelected(false)},isc.A.isSelected=function isc_StatefulCanvas_isSelected(){return this.selected},isc.A.getActionType=function isc_StatefulCanvas_getActionType(){return this.actionType},isc.A.setActionType=function isc_StatefulCanvas_setActionType(_1){if(_1==isc.StatefulCanvas.BUTTON&&this.isSelected()){this.setSelected(false)}
this.actionType=_1},isc.A.addToRadioGroup=function isc_StatefulCanvas_addToRadioGroup(_1){if(_1==null||this.radioGroup==_1)return;if(this.radioGroup!=null)this.removeFromRadioGroup();this.radioGroup=_1;if(isc.StatefulCanvas.$1z[this.radioGroup]==null){isc.StatefulCanvas.$1z[this.radioGroup]=[this]}else{isc.StatefulCanvas.$1z[this.radioGroup].add(this)}},isc.A.removeFromRadioGroup=function isc_StatefulCanvas_removeFromRadioGroup(_1){if(this.radioGroup==null||(_1!=null&&_1!=this.radioGroup))return;var _2=isc.StatefulCanvas.$1z[this.radioGroup];_2.remove(this);delete this.radioGroup},isc.A.setHandleDisabled=function isc_StatefulCanvas_setHandleDisabled(_1,_2,_3,_4){this.invokeSuper(isc.StatefulCanvas,"setHandleDisabled",_1,_2,_3,_4);if(!this.showDisabled)return;var _5=(this.state==isc.StatefulCanvas.STATE_DISABLED);if(_5==_1)return;if(_1==false){if(this.$13)this.setCursor(this.$13);var _6=this.$42e||isc.StatefulCanvas.STATE_UP;this.setState(_6)}else{this.$13=this.cursor;this.setCursor(isc.StatefulCanvas.ARROW);if(!this.$kk()){this.state=isc.StatefulCanvas.STATE_UP}
this.$42e=this.state;this.setState(isc.StatefulCanvas.STATE_DISABLED)}},isc.A.getStateName=function isc_StatefulCanvas_getStateName(){var _1=this.getStateSuffix();if(_1)return this.baseStyle+_1;return this.baseStyle},isc.A.getTitleStateName=function isc_StatefulCanvas_getTitleStateName(){if(!this.titleStyle)return null;return this.titleStyle+(this.showDisabled&&this.isDisabled()?isc.StatefulCanvas.STATE_DISABLED:isc.emptyString)},isc.A.getStateSuffix=function isc_StatefulCanvas_getStateSuffix(){var _1=this.getState(),_2=this.isSelected()?isc.StatefulCanvas.SELECTED:null,_3=this.getFocusedState()?isc.StatefulCanvas.FOCUSED:null,_4=this.getCustomState();return this.$61l(_1,_2,_3,_4)},isc.A.$61l=function isc_StatefulCanvas__getStateSuffix(_1,_2,_3,_4){var _5;if(_2||_3){_5=(_2&&_3)?this.$54k:_2?_2:_3}
if(!_4){if(_5)return _1?_5+_1:_5;else return _1}else if(_5){return _1?_5+_1+_4:_5+_4}else{return _1?_1+_4:_4}},isc.A.setCustomState=function isc_StatefulCanvas_setCustomState(_1){if(_1==this.customState)return;this.customState=_1;this.stateChanged()},isc.A.getCustomState=function isc_StatefulCanvas_getCustomState(){return this.customState},isc.A.getPrintStyleName=function isc_StatefulCanvas_getPrintStyleName(){return this.printStyleName||this.getStateName()},isc.A.makeLabel=function isc_StatefulCanvas_makeLabel(){var _1=this.getAutoChildClass(this.$11,null,isc.Label);var _2=_1.createRaw();_2.ignoreRTL=this.ignoreRTL;_2.clipTitle=this.clipTitle;_2.showClippedTitleOnHover=false;_2.$115g=false;if(this.$115j!=null){_2.$115j=function(){return this.masterElement.$115j()}}
_2.align=this.align;_2.valign=this.valign;_2.$jo=false;_2.$jp=(this.$1155!=null?this.$1155:false);_2._redrawWithParent=false;_2.containedPeer=true;_2.icon=this.icon;_2.iconWidth=this.iconWidth;_2.iconHeight=this.iconHeight;_2.iconSize=this.iconSize;_2.iconOrientation=this.iconOrientation;_2.iconAlign=this.iconAlign;_2.iconSpacing=this.iconSpacing;_2.iconStyle=this.iconStyle;_2.showDownIcon=this.showDownIcon;_2.showSelectedIcon=this.showSelectedIcon;_2.showRollOverIcon=this.showRollOverIcon;_2.showFocusedIcon=this.showFocusedIcon;_2.showDisabledIcon=this.showDisabledIcon;_2.showRTLIcon=this.showRTLIcon;if(this.showIconState!=null)_2.showIconState=this.showIconState;_2.getFocusedState=function(){var _3=this.masterElement;if(_3&&_3.getFocusedState)return _3.getFocusedState()}
_2.skinImgDir=this.labelSkinImgDir||this.skinImgDir;_2.baseStyle=this.titleStyle||this.baseStyle;_2.showDisabled=this.showDisabled;_2.state=this.getState();_2.customState=this.getCustomState();_2.getPrintStyleName=function(){return this.masterElement.getPrintStyleName()}
_2.overflow=this.overflow;_2.width=this.$15();_2.height=this.$16();_2.left=this.$17();_2.top=this.$18();_2.wrap=this.wrap!=null?this.wrap:this.vertical;_2.eventProxy=this;_2.isMouseTransparent=true;_2.zIndex=this.getZIndex(true)+1;_2.tabIndex=-1;this.$d3(this.$11,_2);_2=this.label=isc.SGWTFactory.extractFromConfigBlock(_2);_2.setDisabled(this.isDisabled());_2.setSelected(this.isSelected());this.addPeer(_2,null,null,true)},isc.A.setLabelSkinImgDir=function isc_StatefulCanvas_setLabelSkinImgDir(_1){this.labelSkinImgDir=_1;if(this.label!=null)this.label.setSkinImgDir(_1)},isc.A.setSkinImgDir=function isc_StatefulCanvas_setSkinImgDir(_1){this.Super("setSkinImgDir",arguments);if(this.labelSkinImgDir==null&&this.label!=null)this.label.setSkinImgDir(_1)},isc.A.setIconOrientation=function isc_StatefulCanvas_setIconOrientation(_1){this.iconOrientation=_1;if(this.label){this.label.iconOrientation=_1;this.label.markForRedraw()}else{this.markForRedraw()}},isc.A.setAutoFit=function isc_StatefulCanvas_setAutoFit(_1,_2){if(_2){this.$19=true;if(!_1)return}
if(!this.$19)return;_1=!!_1;if(!_2&&(!!this.autoFit==_1))return;this.$2a=true;this.autoFit=_1;var _3=(this.autoFitDirection==isc.Canvas.BOTH)||(this.autoFitDirection==isc.Canvas.HORIZONTAL),_4=(this.autoFitDirection==isc.Canvas.BOTH)||(this.autoFitDirection==isc.Canvas.VERTICAL);this.inherentWidth=_1&&_3;this.inherentHeight=_1&&_4;if(_1){this.$2b=this.overflow;this.setOverflow(isc.Canvas.VISIBLE);if(_3){this.$2c=this.width;this.setWidth(1)}
if(_4){this.$2d=this.height;this.setHeight(1)}}else{var _5=this.$2c||this.defaultWidth,_6=this.$2d||this.defaultHeight;if(_3)this.setWidth(_5);if(_4)this.setHeight(_6);if(this.parentElement&&isc.isA.Layout(this.parentElement)){if(_3&&!this.$2c)this.$pn=null;if(_4&&!this.$2d)this.$po=null}
this.$2c=null;this.$2d=null;if(this.$2b)this.setOverflow(this.$2b);this.$2b=null}
delete this.$2a},isc.A.resizeBy=function isc_StatefulCanvas_resizeBy(_1,_2,_3,_4,_5,_6){if(this.autoFit&&this.$19&&!this.$2a){var _7=false;if(_1!=null&&(this.autoFitDirection==isc.Canvas.BOTH||this.autoFitDirection==isc.Canvas.HORIZONTAL))
{this.$2c=(1+_1);_7=true;_1=null}
if(_2!=null&&(this.autoFitDirection==isc.Canvas.BOTH||this.autoFitDirection==isc.Canvas.VERTICAL))
{this.$2d=(1+_2);_7=true;_2=null}
if(_7)this.setAutoFit(false)}
return this.invokeSuper(isc.StatefulCanvas,"resizeBy",_1,_2,_3,_4,_5,_6)},isc.A.getLabelHPad=function isc_StatefulCanvas_getLabelHPad(){if(this.labelHPad!=null)return this.labelHPad;if(this.vertical){return this.labelBreadthPad!=null?this.labelBreadthPad:0}else{return this.labelLengthPad!=null?this.labelLengthPad:this.capSize}},isc.A.getLabelVPad=function isc_StatefulCanvas_getLabelVPad(){if(this.labelVPad!=null)return this.labelVPad;if(!this.vertical){return this.labelBreadthPad!=null?this.labelBreadthPad:0}else{return this.labelLengthPad!=null?this.labelLengthPad:this.capSize}},isc.A.$17=function isc_StatefulCanvas__getLabelLeft(){var _1;if(this.isDrawn()){_1=(this.position==isc.Canvas.RELATIVE&&this.parentElement==null?this.getPageLeft():this.getOffsetLeft())}else{_1=this.getLeft()}
_1+=this.getLabelHPad();return _1},isc.A.$18=function isc_StatefulCanvas__getLabelTop(){var _1;if(this.isDrawn()){_1=(this.position==isc.Canvas.RELATIVE&&this.parentElement==null?this.getPageTop():this.getOffsetTop())}else{_1=this.getTop()}
_1+=this.getLabelVPad();return _1},isc.A.$15=function isc_StatefulCanvas__getLabelSpecifiedWidth(){var _1=this.getInnerWidth();_1-=2*this.getLabelHPad();return Math.max(_1,1)},isc.A.$16=function isc_StatefulCanvas__getLabelSpecifiedHeight(){var _1=this.getInnerHeight();_1-=2*this.getLabelVPad();return Math.max(_1,1)},isc.A.getImgBreadth=function isc_StatefulCanvas_getImgBreadth(){if(this.overflow==isc.Canvas.VISIBLE&&isc.isA.Canvas(this.label))
{return this.vertical?this.$2e():this.$2f()}
return(this.vertical?this.getInnerWidth():this.getInnerHeight())},isc.A.getImgLength=function isc_StatefulCanvas_getImgLength(){if(this.overflow==isc.Canvas.VISIBLE&&isc.isA.Canvas(this.label))
{return this.vertical?this.$2f():this.$2e()}
return(this.vertical?this.getInnerHeight():this.getInnerWidth())},isc.A.$2f=function isc_StatefulCanvas__getAutoInnerHeight(){var _1=this.getInnerHeight();if(!isc.isA.Canvas(this.label))return _1;var _2=this.getLabelVPad();var _3=this.label.getVisibleHeight()+2*_2;return Math.max(_3,_1)},isc.A.$2e=function isc_StatefulCanvas__getAutoInnerWidth(){var _1=this.getInnerWidth();if(!isc.isA.Canvas(this.label))return _1;var _2=this.getLabelHPad();var _3=this.label.getVisibleWidth()+2*_2;return Math.max(_3,_1)},isc.A.$10=function isc_StatefulCanvas__labelAdjustOverflow(){if(this.overflow!=isc.Canvas.VISIBLE)return;this.adjustOverflow(this.$12)},isc.A.getScrollWidth=function isc_StatefulCanvas_getScrollWidth(_1,_2,_3,_4){if(this.overflow!=isc.Canvas.VISIBLE||!isc.isA.Canvas(this.label))
return this.invokeSuper(isc.StatefulCanvas,"getScrollWidth",_1,_2,_3,_4);if(this.$qz){this.$qz=null;this.adjustOverflow("widthCheckWhileDeferred")}
if(!_1&&this.$su!=null)return this.$su;var _5=this.$2e()
return(this.$su=_5)},isc.A.getScrollHeight=function isc_StatefulCanvas_getScrollHeight(_1,_2,_3,_4){if(this.overflow!=isc.Canvas.VISIBLE||!isc.isA.Canvas(this.label))
return this.invokeSuper(isc.StatefulCanvas,"getScrollHeight",_1,_2,_3,_4);if(this.$qz){this.$qz=null;this.adjustOverflow("heightCheckWhileDeferred")}
if(!_1&&this.$sz!=null)return this.$sz;var _5=this.$2f()
return(this.$sz=_5)},isc.A.setOverflow=function isc_StatefulCanvas_setOverflow(_1,_2,_3,_4,_5){if(this.autoFit&&this.$19&&!this.$2a&&_1!=isc.Canvas.VISIBLE){this.$2b=_1;this.setAutoFit(false);return}
this.invokeSuper(isc.StatefulCanvas,"setOverflow",_1,_2,_3,_4,_5);if(isc.isA.Canvas(this.label))this.label.setOverflow(_1,_2,_3,_4,_5)},isc.A.$5y=function isc_StatefulCanvas__resized(_1,_2,_3,_4,_5){this.invokeSuper(isc.StatefulCanvas,this.$64x,_1,_2,_3,_4,_5);if(this.label)this.label.resizeTo(this.$15(),this.$16())},isc.A.draw=function isc_StatefulCanvas_draw(_1,_2,_3){if(isc.$cv)arguments.$cw=this;var _4=isc.Canvas.$b4.draw.call(this,_1,_2,_3);if(this.position!=isc.Canvas.ABSOLUTE&&isc.isA.Canvas(this.label)){if(isc.Page.isLoaded())this.$42f();else isc.Page.setEvent("load",this.getID()+".$42f()")}
if(this.label!=null&&isc.Canvas.ariaEnabled()){var _5=this.getAriaLabel();if(_5!=null)this.setAriaState("label",_5)}
return _4},isc.A.$42f=function isc_StatefulCanvas__positionLabel(){if(!this.isDrawn())return;this.label.moveTo(this.$17(),this.$18())},isc.A.setAlign=function isc_StatefulCanvas_setAlign(_1){this.align=_1;if(this.isDrawn())this.markForRedraw();if(this.label)this.label.setAlign(_1)},isc.A.setVAlign=function isc_StatefulCanvas_setVAlign(_1){this.valign=_1;if(this.isDrawn())this.markForRedraw();if(this.label)this.label.setVAlign(_1)},isc.A.getPrintHTML=function isc_StatefulCanvas_getPrintHTML(_1,_2,_3,_4){var _5=this.shouldShowLabel();if(_5){if(this.label==null){this.makeLabel()}
return this.label.getPrintHTML(_1,_2,_3,_4)}
return this.Super("getPrintHTML",arguments)},isc.A.shouldHiliteAccessKey=function isc_StatefulCanvas_shouldHiliteAccessKey(){return this.hiliteAccessKey},isc.A.getTitleHTML=function isc_StatefulCanvas_getTitleHTML(){var _1=this.getTitle();if(!this.shouldHiliteAccessKey()||!isc.isA.String(_1)||this.accessKey==null)
return _1;return isc.Canvas.hiliteCharacter(_1,this.accessKey)},isc.A.getTitle=function isc_StatefulCanvas_getTitle(){return this.title},isc.A.setTitle=function isc_StatefulCanvas_setTitle(_1){this.title=_1;var _1=this.getTitleHTML();if(this.$116x!=null&&this.$116x==_1){return}else{this.$116x=_1}
if(this.label){if(this.label.$jp&&this.label.masterElement==this)this.label.$q7=true;this.label.setContents(_1);this.label.setState(this.getState());this.label.setSelected(this.isSelected())}else if(this.title!=null&&this.shouldShowLabel()){this.makeLabel()}
if(isc.Canvas.ariaEnabled()){var _2=this.getAriaLabel();this.setAriaState("label",_2)}
this.markForRedraw("setTitle")},isc.A.setZIndex=function isc_StatefulCanvas_setZIndex(_1,_2,_3){isc.Canvas.$b4.setZIndex.call(this,_1,_2,_3);if(isc.isA.Canvas(this.label))this.label.moveAbove(this)},isc.A.$ur=function isc_StatefulCanvas__updateCanFocus(){this.Super("$ur",arguments);if(this.label!=null)this.label.$ur()},isc.A.setIcon=function isc_StatefulCanvas_setIcon(_1){this.icon=_1;if(this.label)this.label.setIcon(_1);else if(_1&&this.shouldShowLabel())this.makeLabel()},isc.A.setIconStyle=function isc_StatefulCanvas_setIconStyle(_1){this.iconStyle=_1;if(this.label)this.label.setIconStyle(_1)},isc.A.handleMouseOver=function isc_StatefulCanvas_handleMouseOver(_1,_2){var _3;if(this.mouseOver!=null){_3=this.mouseOver(_1,_2);if(_3==false)return false}
if(this.showDown&&this.ns.EH.mouseIsDown()){this.setState(isc.StatefulCanvas.STATE_DOWN)}else{if(this.showRollOver){this.setState(isc.StatefulCanvas.STATE_OVER)}
if(this.showOverCanvas){if(!this.overCanvas){this.addAutoChild("overCanvas",{autoDraw:false})}
if(!this.overCanvas.isDrawn())this.overCanvas.draw()}}
return _3},isc.A.handleMouseOut=function isc_StatefulCanvas_handleMouseOut(_1,_2){var _3;if(this.mouseOut!=null){_3=this.mouseOut(_1,_2);if(_3==false)return _3}
if(this.showRollOver){this.setState(this.showFocused&&this.showFocusedAsOver&&this.hasFocus&&!this.isDisabled()?isc.StatefulCanvas.STATE_OVER:isc.StatefulCanvas.STATE_UP)}else if(this.showDown&&this.ns.EH.mouseIsDown()){this.setState(isc.StatefulCanvas.STATE_UP)}
if(this.showOverCanvas&&this.overCanvas&&this.overCanvas.isVisible()&&(isc.EH.getTarget()!=this.overCanvas))
{this.overCanvas.clear()}
return _3},isc.A.$lf=function isc_StatefulCanvas__focusChanged(_1,_2,_3,_4){var _5=this.invokeSuper(isc.StatefulCanvas,"$lf",_1,_2,_3,_4);if(!(_1&&isc.Browser.isIE&&(this.getFocusHandle()!=this.getDocument().activeElement)))
{this.updateStateForFocus(_1)}
return _5},isc.A.updateStateForFocus=function isc_StatefulCanvas_updateStateForFocus(_1){if(!this.showFocused){if(!_1||this.isDisabled()){this.setState(isc.StatefulCanvas.STATE_UP)}
return}
if(this.showFocusedAsOver){if(!this.showRollOver)return;var _2=this.getState();if(_1&&!this.isDisabled()){if(_2==isc.StatefulCanvas.STATE_UP)this.setState(isc.StatefulCanvas.STATE_OVER)}else{if(_2==isc.StatefulCanvas.STATE_OVER)this.setState(isc.StatefulCanvas.STATE_UP)}}else{this.stateChanged();if(this.label)this.label.stateChanged()}},isc.A.getFocusedState=function isc_StatefulCanvas_getFocusedState(){if(!this.showFocused||this.showFocusedAsOver||this.isDisabled())return false;return this.hasFocus},isc.A.handleMouseDown=function isc_StatefulCanvas_handleMouseDown(_1,_2){if(_1.target==this&&this.useEventParts){if(this.firePartEvent(_1,isc.EH.MOUSE_DOWN)==false)return false}
var _3;if(this.mouseDown){_3=this.mouseDown(_1,_2);if(_3==false)return false}
if(this.showDown)this.setState(isc.StatefulCanvas.STATE_DOWN);return _3},isc.A.handleMouseUp=function isc_StatefulCanvas_handleMouseUp(_1,_2){if(_1.target==this&&this.useEventParts){if(this.firePartEvent(_1,isc.EH.MOUSE_UP)==false)return false}
var _3;if(this.mouseUp){_3=this.mouseUp(_1,_2);if(_3==false)return false}
if(this.showDown){var _4=this.ns.EH;this.setState(this.showRollOver&&_4.$94y!=_4.$94w.TOUCH_ENDING?isc.StatefulCanvas.STATE_OVER:isc.StatefulCanvas.STATE_UP)}
return _3},isc.A.handleActivate=function isc_StatefulCanvas_handleActivate(_1,_2){var _3=this.getActionType();if(_3==isc.StatefulCanvas.RADIO){this.select()}else if(_3==isc.StatefulCanvas.CHECKBOX){this.setSelected(!this.isSelected())}
if(this.activate)return this.activate(_1,_2);if(this.action)return this.action();if(this.click)return this.click(_1,_2)},isc.A.handleClick=function isc_StatefulCanvas_handleClick(_1,_2){if(isc.$cv)arguments.$cw=this;if(_1.target==this&&this.useEventParts){if(this.firePartEvent(_1,isc.EH.CLICK)==false)return false}
return this.handleActivate(_1,_2)},isc.A.handleKeyPress=function isc_StatefulCanvas_handleKeyPress(_1,_2){if(isc.$cv)arguments.$cw=this;if(this.keyPress&&(this.keyPress(_1,_2)==false))return false;if(_1.keyName=="Space"||_1.keyName=="Enter"){if(this.handleActivate(_1,_2)==false)return false}
return true},isc.A.destroy=function isc_StatefulCanvas_destroy(){this.removeFromRadioGroup();return this.Super("destroy",arguments)});isc.B._maxIndex=isc.C+72;isc.StatefulCanvas.registerStringMethods({activate:isc.EH.$i3,action:""});isc.A=isc.StatefulCanvas;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.$95q=function isc_c_StatefulCanvas__buildBorderStyle(_1,_2,_3){var _4=_1?"$"+_2:_2;if(this.$95r[_4]){return this.$95r[_4]}
var _5,_6={},_7=0;_5=_1?isc.StatefulCanvas.$95n:isc.StatefulCanvas.$95m.length;var _8=isc.Element.getStyleDeclaration(_2,true,_3);if(_8){for(var i=0;i<_8.length;i++){for(var j=0;j<_5;j++){var _11=isc.StatefulCanvas.$95m[j];if(_6[_11]==null&&_8[i][_11]!=isc.emptyString){_6[_11]=_8[i][_11];_7++}}
if(_7==_5)break}}
this.$95r[_4]=_6;return _6},isc.A.$95s=function isc_c_StatefulCanvas__getBorderCSSHTML(_1,_2){var _3=_1?"$"+_2:_2;if(this.$95t[_3]){return this.$95t[_3]}
var _4=this.$95q(_1,_2);var _5=isc.emptyString,_6=isc.StatefulCanvas.$95o;var _7=isc.SB.concat(_4.borderBottomWidth,_6,_4.borderBottomStyle,_6,_4.borderBottomColor).trim();var _8=isc.SB.concat(_4.borderLeftWidth,_6,_4.borderLeftStyle,_6,_4.borderLeftColor).trim();var _9=isc.SB.concat(_4.borderRightWidth,_6,_4.borderRightStyle,_6,_4.borderRightColor).trim();var _10=isc.SB.concat(_4.borderTopWidth,_6,_4.borderTopStyle,_6,_4.borderTopColor).trim();if(_7!=_8||_7!=_9||_7!=_10){if(_7!=isc.emptyString)_5+=isc.semi+"BORDER-BOTTOM:"+_7;if(_8!=isc.emptyString)_5+=isc.semi+"BORDER-LEFT:"+_8;if(_9!=isc.emptyString)_5+=isc.semi+"BORDER-RIGHT:"+_9;if(_10!=isc.emptyString)_5+=isc.semi+"BORDER-TOP:"+_10}else{if(_7!=isc.emptyString)_5+=isc.semi+"BORDER:"+_7}
var _11=_4.borderBottomLeftRadius,_12=_4.borderBottomRightRadius,_13=_4.borderTopRightRadius,_14=_4.borderTopLeftRadius;if(_11!=_12||_11!=_13||_11!=_14){if(_11!=null)_5+=isc.semi+"BORDER-BOTTOM-LEFT-RADIUS:"+_11;if(_12!=null)_5+=isc.semi+"BORDER-BOTTOM-RIGHT-RADIUS:"+_12;if(_13!=null)_5+=isc.semi+"BORDER-TOP-RIGHT-RADIUS:"+_13;if(_14!=null)_5+=isc.semi+"BORDER-TOP-LEFT-RADIUS:"+_14}else{if(_11!=null)_5+=isc.semi+"BORDER-RADIUS:"+_11}
this.$95t[_3]=_5;return _5},isc.A.clearBorderCSSCache=function isc_c_StatefulCanvas_clearBorderCSSCache(){if(isc.StatefulCanvas.pushTableBorderStyleToDiv){this.$95r={};this.$95t={}}},isc.A.$132y=function isc_c_StatefulCanvas__buildShadowStyle(_1,_2){var _3=_1;if(this.$132w[_3]){return this.$132w[_3]}
var _4={},_5="boxShadow";var _6=isc.Element.getStyleDeclaration(_1,true,_2);if(_6){for(var i=0;i<_6.length;i++){if(_4[_5]==null&&_6[i][_5]!=isc.emptyString){_4[_5]=_6[i][_5]}}}
this.$132w[_3]=_4;return _4},isc.A.$132z=function isc_c_StatefulCanvas__getShadowCSSHTML(_1){var _2=_1;if(this.$132x[_2]){return this.$132x[_2]}
var _3=this.$132y(_1);if(_3.boxShadow==null)return isc.emptyString;var _4="box-shadow:"+_3.boxShadow+";";this.$132x[_2]=_4;return _4},isc.A.clearShadowCSSCache=function isc_c_StatefulCanvas_clearShadowCSSCache(){if(isc.StatefulCanvas.pushTableShadowStyleToDiv){this.$132w={};this.$132x={}}});isc.B._maxIndex=isc.C+6;isc.ClassFactory.defineClass("Layout","Canvas");isc.A=isc.Layout;isc.A.FILL="fill";isc.A=isc.Layout.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.orientation="horizontal";isc.A.vPolicy=isc.Layout.FILL;isc.A.hPolicy=isc.Layout.FILL;isc.A.minMemberSize=1;isc.A.enforcePolicy=true;isc.A.paddingAsLayoutMargin=true;isc.A.$415=true;isc.A.membersMargin=0;isc.A.defaultResizeBars="marked";isc.A.resizeBarDefaults={dragScrollType:"parentsOnly"};isc.A.resizeBarClass="Splitbar";isc.A.resizeBarSize=7;isc.A.animateMemberEffect="slide";isc.A.canDropComponents=true;isc.A.dropLineThickness=2;isc.A.membersAreChildren=true;isc.B.push(isc.A.setDefaultResizeBars=function isc_Layout_setDefaultResizeBars(_1){if(this.defaultResizeBars==_1)return;this.defaultResizeBars=_1;this.$86g()});isc.B._maxIndex=isc.C+1;isc.A=isc.Canvas.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.setLayoutAlign=function isc_Canvas_setLayoutAlign(_1){this.layoutAlign=_1;if(this.parentElement&&isc.isA.Layout(this.parentElement)&&this.parentElement.isDrawn())
{this.parentElement.reflow()}},isc.A.setShowResizeBar=function isc_Canvas_setShowResizeBar(_1){if(this.showResizeBar==_1)return;this.showResizeBar=_1;var _2=this.parentElement;if(_2==null||!isc.isA.Layout(_2))return;_2.$86g()});isc.B._maxIndex=isc.C+2;isc.A=isc.Layout.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.managePercentBreadth=true;isc.A.$2g="layout";isc.A.$2h=["show","hide","rect"];isc.A.$2i=["rect","move"];isc.A.printFillWidth=true;isc.A.$2j=[];isc.A.$2k="membersAdded";isc.A.$2l="membersRemoved";isc.A.placeHolderDefaults={styleName:"layoutPlaceHolder",overflow:isc.Canvas.HIDDEN};isc.A.dropLineDefaults={styleName:"layoutDropLine",overflow:"hidden",isMouseTransparent:true};isc.A.$127h={align:true,defaultLayoutAlign:true,reverseOrder:true,vertical:true,orientation:true,vPolicy:true,minMemberSize:true,hPolicy:true,membersMargin:true};isc.B.push(isc.A.getMemberLength=function isc_Layout_getMemberLength(_1){return this.vertical?_1.getVisibleHeight():_1.getVisibleWidth()},isc.A.getMemberBreadth=function isc_Layout_getMemberBreadth(_1){return this.vertical?_1.getVisibleWidth():_1.getVisibleHeight()},isc.A.setMemberBreadth=function isc_Layout_setMemberBreadth(_1,_2){if(this.logIsDebugEnabled(this.$2g))this.$42g(_1,_2);this.vertical?_1.setWidth(_2):_1.setHeight(_2)},isc.A.getLength=function isc_Layout_getLength(){if(this.vertical)return this.getInnerHeight();var _1=this.getInnerWidth();if(this.leaveScrollbarGap&&!this.vscrollOn)_1-=this.getScrollbarSize();return _1},isc.A.getBreadth=function isc_Layout_getBreadth(){if(!this.vertical)return this.getInnerHeight();var _1=this.getInnerWidth();if(this.leaveScrollbarGap&&!this.vscrollOn)_1-=this.getScrollbarSize();return _1},isc.A.getLengthPolicy=function isc_Layout_getLengthPolicy(){return this.vertical?this.vPolicy:this.hPolicy},isc.A.getBreadthPolicy=function isc_Layout_getBreadthPolicy(){return this.vertical?this.hPolicy:this.vPolicy},isc.A.memberHasInherentLength=function isc_Layout_memberHasInherentLength(_1){if(!(this.vertical?_1.hasInherentHeight():_1.hasInherentWidth())){return false}
var _2=this.$2m(_1);if(isc.isA.String(_2)&&(_2.endsWith(this.$o9)||_2==this.$pa))
{return false}
return true},isc.A.memberHasInherentBreadth=function isc_Layout_memberHasInherentBreadth(_1){return(this.vertical?_1.hasInherentWidth():_1.hasInherentHeight())},isc.A.$2n=function isc_Layout__overflowsLength(_1){return((this.vertical&&_1.canOverflowHeight())||(!this.vertical&&_1.canOverflowWidth()))},isc.A.$2m=function isc_Layout__explicitLength(_1){return this.vertical?_1.$po:_1.$pn},isc.A.$2o=function isc_Layout__explicitBreadth(_1){return this.vertical?_1.$pn:_1.$po},isc.A.$2p=function isc_Layout__memberPercentLength(_1){return this.vertical?_1._percent_height:_1._percent_width},isc.A.scrollingOnLength=function isc_Layout_scrollingOnLength(){return this.vertical?this.vscrollOn:this.hscrollOn},isc.A.getMemberGap=function isc_Layout_getMemberGap(_1){return(_1.extraSpace||0)-(this.memberOverlap||0)+(_1.$22||0)},isc.A.initWidget=function isc_Layout_initWidget(){if(isc.$cv)arguments.$cw=this;var _1=isc.Layout;if(this.vertical==null){this.vertical=(this.orientation==_1.VERTICAL)}else{this.orientation=(this.vertical?_1.VERTICAL:_1.HORIZONTAL)}
if(this.isRTL()&&!this.vertical)this.reverseOrder=!this.reverseOrder;if(this.members==null)this.members=[];else if(!isc.isA.Array(this.members))this.members=[this.members];if(this.membersAreChildren){if(this.members.length==0&&this.children!=null&&!this.$2q())
{this.members=this.children=this.createMemberCanvii(this.children)}else{this.members=this.createMemberCanvii(this.members);if(this.children==null)this.children=[];this.children.addList(this.members)}}else{this.logInfo("members are peers","layout");this.addMethods({draw:this.$2r});this.members=this.createMemberCanvii(this.members);if(this.peers==null)this.peers=[];this.peers.addList(this.members)}
this.setLayoutMargin();if(this.members&&this.members.length>0)this.$62s()},isc.A.createMemberCanvii=function isc_Layout_createMemberCanvii(_1){_1=this.createCanvii(_1);for(var i=_1.length-1;i>=0;i--){if(_1[i]==null)continue;if(!isc.isA.Canvas(_1[i])){this.logWarn("Layout unable to resolve member:"+this.echo(_1[i])+" to a Canvas - ignoring this member");_1.removeAt(i)}}
return _1},isc.A.$2q=function isc_Layout__allGeneratedChildren(){for(var i=0;i<this.children.length;i++){var _2=this.children[i];if(_2!=null&&!_2._generated)return false}
return true},isc.A.setLayoutMargin=function isc_Layout_setLayoutMargin(_1){if(_1!=null)this.layoutMargin=_1;var _2=this.layoutHMargin,_3=this.layoutVMargin,_4=this.layoutMargin,_5=this.reverseOrder?this.layoutEndMargin:this.layoutStartMargin,_6=this.reverseOrder?this.layoutStartMargin:this.layoutEndMargin;var _7,_8,_9,_10;if(this.paddingAsLayoutMargin){var _11=this.$tq();_7=_11.left;_8=_11.right;_9=_11.top;_10=_11.bottom}
this.$tb=this.$du(this.layoutLeftMargin,(!this.vertical?_5:null),_2,_4,_7,0);this.$tc=this.$du(this.layoutRightMargin,(!this.vertical?_6:null),_2,_4,_8,0);this.$td=this.$du(this.layoutTopMargin,(this.vertical?_5:null),_3,_4,_9,0);this.$te=this.$du(this.layoutBottomMargin,(this.vertical?_6:null),_3,_4,_10,0);this.$2s=true;this.reflow()},isc.A.$2t=function isc_Layout__getSideMargin(_1){if(this.$tb==null)this.setLayoutMargin();if(_1)return this.$tb+this.$tc;else return this.$td+this.$te},isc.A.$2u=function isc_Layout__getBreadthMargin(){return this.$2t(this.vertical)},isc.A.$2v=function isc_Layout__getLengthMargin(){return this.$2t(!this.vertical)},isc.A.$2r=function isc_Layout__drawOverride(){if(isc.$cv)arguments.$cw=this;if(!this.membersAreChildren){this.$2w();this.layoutChildren(this.$od);this.drawPeers();this.$if=true;return}
isc.Canvas.$b4.draw.apply(this,arguments)},isc.A.setStyleName=function isc_Layout_setStyleName(_1){this.Super("setStyleName",arguments);this.setLayoutMargin(this.layoutMargin)},isc.A.resizePeersBy=function isc_Layout_resizePeersBy(_1,_2,_3){if(!this.membersAreChildren)return;isc.Canvas.$b4.resizePeersBy.call(this,_1,_2,_3)},isc.A.markForRedraw=function isc_Layout_markForRedraw(){if(this.membersAreChildren)return this.Super("markForRedraw",arguments);this.reflow("markedForRedraw")},isc.A.drawChildren=function isc_Layout_drawChildren(){if(this.membersAreChildren){this.$2w();this.layoutChildren(this.$od);this.$2x()}
return},isc.A.$2y=function isc_Layout__memberCanFocus(_1){return true},isc.A.$2w=function isc_Layout__setupMembers(){if(!this.members)return;for(var i=0;i<this.members.length;i++){var _2=this.members[i];if(_2==null){this.logWarn("members array: "+this.members+" includes null entry at position "+i+". Removing");this.members.removeAt(i);i-=1;continue}
if(this.$2y(_2)&&(_2.$sp||_2.tabIndex==null))
{this.updateMemberTabIndex(_2)}
this.autoSetBreadth(_2)}},isc.A.childCanFocusChanged=function isc_Layout_childCanFocusChanged(_1){if(!this.members.contains(_1))return;this.updateMemberTabIndex(_1)},isc.A.$2x=function isc_Layout__drawNonMemberChildren(){if(!this.membersAreChildren||!this.children)return;for(var i=0;i<this.children.length;i++){var _2=this.children[i];if(this.members.contains(_2))continue;if(!isc.isA.Canvas(_2)){_2.autoDraw=false;_2=isc.Canvas.create(_2)}
if(!_2.isDrawn())_2.draw()}},isc.A.$54l=function isc_Layout__getMemberDefaultBreadth(_1){var _2=this.$2o(_1),_3=isc.isA.String(_2)&&isc.endsWith(_2,this.$o9)?_2:null,_4=Math.max(this.getBreadth()-this.$2u(),1);if(this.$3a&&!this.leaveScrollbarGap){_4-=this.getScrollbarSize()}
var _5=(_3==null?_4:Math.floor(_4*(parseInt(_3)/100)));if(this.getMemberDefaultBreadth==null)return _5;return this.getMemberDefaultBreadth(_1,_5)},isc.A.autoSetBreadth=function isc_Layout_autoSetBreadth(_1){if(!this.shouldAlterBreadth(_1))return false;var _2=this.$2z;this.$2z=true;this.setMemberBreadth(_1,this.$54l(_1));this.$2z=_2;return true},isc.A.shouldAlterBreadth=function isc_Layout_shouldAlterBreadth(_1){var _2=this.$2o(_1);if(_2!=null){return(this.managePercentBreadth&&this.getBreadthPolicy()==isc.Layout.FILL&&isc.isA.String(_2)&&isc.endsWith(_2,this.$o9))}
if(this.vertical&&_1.inherentWidth)return false;if(this.getBreadthPolicy()==isc.Layout.FILL)return true;return false},isc.A.$20=function isc_Layout__moveOffscreen(_1){return isc.Canvas.moveOffscreen(_1)},isc.A.getMarginSpace=function isc_Layout_getMarginSpace(){var _1=this.$2v();for(var i=0;i<this.members.length;i++){var _3=this.members[i];if(_3.$86h){_1+=this.resizeBarSize}else if(i<this.members.length-1&&!this.$21(this.members[i+1])){_1+=this.membersMargin}
_1+=this.getMemberGap(_3)}
if(this.members.length!=0&&this.$21(this.members[0])){_1-=this.membersMargin}
if(this.memberOverlap!=null)_1+=this.memberOverlap
return _1},isc.A.getTotalMemberSpace=function isc_Layout_getTotalMemberSpace(){return this.getLength()-this.getMarginSpace()},isc.A.$23=function isc_Layout__getTotalMemberLength(){var _1=0;for(var i=0;i<this.members.length;i++){var _3=this.members[i];if(this.$21(_3))continue;_1+=this.getMemberLength(_3)}
return _1+this.getMarginSpace()},isc.A.ignoreMember=function isc_Layout_ignoreMember(_1){if(!_1||!this.members||this.members.indexOf(_1)==-1)return;_1.$52f=true},isc.A.stopIgnoringMember=function isc_Layout_stopIgnoringMember(_1){_1.$52f=false;this.reflow()},isc.A.isIgnoringMember=function isc_Layout_isIgnoringMember(_1){if(_1.$52f)
return _1.$52f;return false},isc.A.$21=function isc_Layout__shouldIgnoreMember(_1){if(_1.visibility==isc.Canvas.HIDDEN&&!(_1.$l0&&_1.$l0.isVisible()))return true;if(this.isIgnoringMember(_1))return true;return false},isc.A.ignoreMemberZIndex=function isc_Layout_ignoreMemberZIndex(_1){if(!_1||!this.members||this.members.indexOf(_1)==-1)return;_1.$52g=true;this.reflow()},isc.A.stopIgnoringMemberZIndex=function isc_Layout_stopIgnoringMemberZIndex(_1){_1.$52g=false;this.reflow()},isc.A.$52h=function isc_Layout__isIgnoringMemberZIndex(_1){if(this.isIgnoringMember(_1))
return true;else if(_1.$52g)
return _1.$52g;return false},isc.A.gatherSizes=function isc_Layout_gatherSizes(_1,_2,_3){if(!_2){_2=this.$25;if(_2==null){_2=this.$25=[]}else{_2.length=0}}
var _4=this.getLengthPolicy();var _5=this.logIsInfoEnabled(this.$2g);for(var i=0;i<this.members.length;i++){var _7=this.members[i];var _8=_2[i];if(_8==null){_8=_2[i]={}}
if(this.$21(_7)&&!_7.$26){_8.$27=0;if(_5)_8.$28="hidden";continue}
if(this.memberHasInherentLength(_7)||_4==isc.Layout.NONE){_8.$27=this.getMemberLength(_7);if(_5){_8.$28=(_4==isc.Layout.NONE?"no length policy":"inherent size")}
continue}
if(_1&&this.$2n(_7)){var _9=this.getMemberLength(_7);if(_9!=_3[i]){if(_5){this.logInfo("member: "+_7+" overflowed.  set length: "+_3[i]+" got length: "+_9,"layout")}
_8.$29=true;_8.$27=_9}
continue}
if(this.$2m(_7)!=null){_8.$27=this.vertical?_7.$po:_7.$pn;if(_5)_8.$28="explicit size";continue}
if(this.respectSizeLimits){var _10=this.vertical?_7.minHeight:_7.minWidth,_11=this.vertical?_7.maxHeight:_7.maxWidth;if(_10!=null&&_3[i]!=null&&_10>_3[i]){_8.$27=_10;if(_5)_8.$28="minimum size";continue}
if(_11!=null&&_3[i]!=null&&_11<_3[i]){_8.$27=_11;if(_5)_8.$28="maximum size";continue}}
if(_8.$27==null){_8.$27=this.$pa;if(_5)_8.$28="no length specified"}}
return _2},isc.A.$114s=function isc_Layout__hasCosmeticOverflowOnly(){var _1=this.members,_2,_3;for(var i=0;i<_1.length;++i){var _5=_1[i];if(!_5)continue;var _6=_5.peers;if(_6){for(var j=0;j<_6.length;++j){var _8=_6[j];if(_8.$114r){if(_2==null){var _9=this.getClipHandle();_2=this.getPageRight()-isc.Element.getRightBorderSize(_9);_3=this.getPageBottom()-isc.Element.getBottomBorderSize(_9)}
var _10=_8.getPeerRect();if((_10[0]+_10[2])>=_2||(_10[1]+_10[3])>=_3)
{for(var k=0;k<_1.length;++k){_5=_1[k];if(_5.getPageRight()>=_2||_5.getPageBottom()>=_3)
{return false}}
return true}}}}}
return false},isc.A.resizeMembers=function isc_Layout_resizeMembers(_1,_2,_3){var _4=this.logIsInfoEnabled(this.$2g);for(var i=0;i<this.members.length;i++){var _6=this.members[i],_7=_2[i];if(this.$21(_6))continue;if(_3&&!this.$2n(_6))continue;var _8=null;if(this.shouldAlterBreadth(_6)){if(_4)
_7.$3b="breadth policy: "+this.getBreadthPolicy();_8=_7.$3c=this.$54l(_6)}else{_7.$3c=this.getMemberBreadth(_6);if(_4){_7.$3b=(this.getBreadthPolicy()==isc.Layout.NONE?"no breadth policy":"explicit size")}}
var _9=null;if(this.getLengthPolicy()!=isc.Layout.NONE&&(!this.memberHasInherentLength(_6)&&!_7.$29))
{_9=_7.$3d=_1[i]}
if(_9!=null&&this.$2n(_6)&&!_6.isDirty()&&(!_6.$114s||!_6.$114s()))
{var _10=(this.vertical?_6.getHeight():_6.getWidth()),_11=this.getMemberLength(_6);if(_11>_10&&_9<=_11&&(_8==null||_8<=this.getMemberBreadth(_6)))
{if(_4)this.logInfo("not applying "+this.getLengthAxis()+": "+_9+" to overflowed member: "+_6+" w/"+this.getLengthAxis()+": "+_11,"layout");_9=null}}
if(this.logIsDebugEnabled(this.$2g))this.$42g(_6,_8,_9);if(!_6.isAnimating(this.$2h)){if(this.vertical){_6.resizeTo(_8,_9)}else{_6.resizeTo(_9,_8)}}
if(_6.isDrawn()){if(_6.isDirty())_6.redraw("Layout getting new size")}else{if(!_6.isDrawn())_6.$3e=true}}},isc.A.$52i=function isc_Layout__enforceStackZIndex(){if(!this.stackZIndex||this.members.length<2)return;for(var _1=0;_1<this.members.length;_1++)
if(!this.$52h(this.members[_1]))break;var _2=this.members[_1],_3=_2.getZIndex();var _4,_5;for(var i=_1+1;i<this.members.length;i++){if(this.$52h(this.members[i]))continue;_4=_2;_5=_4.getZIndex();_2=this.members[i];_3=_2.getZIndex();if((_3<=_5)&&this.stackZIndex=="lastOnTop")
_2.moveAbove(_4);else if((_3>=_5)&&this.stackZIndex=="firstOnTop")
_2.moveBelow(_4)}},isc.A.stackMembers=function isc_Layout_stackMembers(_1,_2,_3){if(_3==null)_3=true;var _4=(this.membersAreChildren?0:this.getOffsetLeft()),_5=(this.membersAreChildren?0:this.getOffsetTop()),_6=this.reverseOrder,_7=(_6?-1:1);var _8=(this.vertical?this.getInnerWidth():this.getInnerHeight())
-this.$2u();if((this.vertical&&this.canOverflowWidth())||(!this.vertical&&this.canOverflowHeight()))
{for(var i=0;i<this.members.length;i++){var _10=this.members[i];if(this.$21(_10))continue;var _11=this.getMemberBreadth(_10);if(_11>_8)_8=_11}}
if(this.logIsDebugEnabled(this.$2g)){this.logDebug("centering wrt visible breadth: "+_8,this.$2g)}
var _12;if(_6){var _13=this.isRTL()&&this.overflow!=isc.Canvas.VISIBLE;if(_13){_12=this.getLength()}else{_12=Math.max(this.getLength(),this.$23())}}
var _14=(this.vertical?(!_6?_5:_5+_12):(!_6?_4:_4+_12));if(this.align!=null){var _15=this.$23(),_16=Math.max(this.getLength(),_15),_17=_16-_15;if(((!_6&&(this.align==isc.Canvas.BOTTOM||this.align==isc.Canvas.RIGHT))||(_6&&(this.align==isc.Canvas.LEFT||this.align==isc.Canvas.TOP))))
{_14+=(_7*_17)}else if(this.align==isc.Canvas.CENTER){_14+=(_7*Math.round(_17/2))}}
var _18=(this.vertical?_4+this.$tb:_5+this.$td),_19=false,_20=false,_21=0;for(var i=0;i<_1.length;i++){var _10=_1[i],_22=_2?_2[i]:null;if(i==0){var _23;if(this.vertical)_23=(_6?this.$te:this.$td);else _23=(_6?this.$tc:this.$tb);_14+=(_7*_23)}else{if(_19){_14+=(_7*this.resizeBarSize)}else if(!_20){_14+=(_7*this.membersMargin)}}
var _24=_10.isAnimating(this.$2i);if(this.$21(_10)){if(!this.isIgnoringMember(_10)&&!_24){_10.moveTo(_4+this.$tb,_5+this.$td)}
if(_10.$86h){var _25=this.getBreadth()-this.$2u();this.makeResizeBar(_10,_18,_14,_25);_19=true}else{if(_10.$3f!=null)_10.$3f.hide();_19=false}
_20=true;_21++;continue}else{_20=false}
var _26=_18,_27=isc.Canvas,_28=this.getLayoutAlign(_10);if(_28==_27.RIGHT||_28==_27.BOTTOM){_26=_8-this.getMemberBreadth(_10)+(this.vertical?this.$tb:this.$td)}else if(_28==_27.CENTER){_26=Math.floor((_8-this.getMemberBreadth(_10))/2)+(this.vertical?this.$tb:this.$td)}
if(this.getMemberOffset!=null)
_26=this.getMemberOffset(_10,_26,_28);var _29=this.getMemberLength(_10);if(!_24){if(this.vertical){if(!_6)_10.moveTo(_26,_14);else _10.moveTo(_26,_14-_29)}else{if(!_6)_10.moveTo(_14,_26);else _10.moveTo(_14-_29,_26)}}
_14+=(_7*_29);_14+=(_7*this.getMemberGap(_10));if(_10.$86h){var _25=this.getBreadth()-this.$2u();this.makeResizeBar(_10,_18,_14,_25)}else{if(_10.$3f!=null)_10.$3f.hide()}
_19=_10.$86h;if(_3)this.memberSizes[i-_21]=_29;if(_2)_22.$3g=_29}
if(_3)this.memberSizes.length=(i-_21);if(this.overflow!=isc.Canvas.VISIBLE)this.$3h();this.$52i()},isc.A.getLayoutAlign=function isc_Layout_getLayoutAlign(_1){if(_1.layoutAlign!=null)return _1.layoutAlign;if(this.defaultLayoutAlign!=null)return this.defaultLayoutAlign;return this.vertical?(this.isRTL()?isc.Canvas.RIGHT:isc.Canvas.LEFT):isc.Canvas.TOP},isc.A.$3h=function isc_Layout__enforceScrollSize(){var _1,_2,_3=false,_4=false,_5,_6,_7,_8,_9=this.vertical;if(_9){_2=this.$te||0;_1=this.$tc||0}else{_2=this.$tc||0;_1=this.$te||0}
if(_2>0||_1>0)_3=true;var _10=this.getInnerWidth(),_11=this.getInnerHeight();if(_3){for(var i=this.members.length-1;i>=0;i--){_6=this.members[i];if(!_6.isVisible())continue;if(_9){if(_5==null){_5=_6;_7=_6.getTop()+_6.getVisibleHeight()}
var _13=_6.getLeft()+_6.getVisibleWidth();if(_8==null||_8<_13)_8=_13}else{if(_5==null){_5=_6;_8=_6.getLeft()+_6.getVisibleWidth()}
var _14=_6.getTop()+_6.getVisibleHeight();if(_7==null||_7<_14)_7=_14}}
if(_7==null)_7=0;if(_8==null)_8=0}else{var _15=false;for(var i=this.members.length-1;i>=0;i--){var _6=this.members[i];if(isc.isA.LayoutSpacer(_6)&&_6.isVisible()){var _16=_6.getWidth(),_17=_6.getHeight();if(i==this.members.length-1){_4=true;if(_9)_7=_6.getTop()+_17;else _8=_6.getLeft()+_16}
if(_9){if(_16>_10&&(_8==null||_16>_8)){_15=true;_8=_16}}else if(_17>_11&&(_7==null||_17>_7)){_15=true;_7=_17}}}
if(_15&&!_4){for(var i=this.members.length-1;i>=0;i--){var _6=this.members[i];if(isc.isA.LayoutSpacer(_6))continue;if(this.vertical){var _16=_6.getVisibleWidth();if(_16>=_8){_15=false;break}}else{var _17=_6.getVisibleHeight();if(_17>=_7){_15=false;break}}}
if(_15)_4=true}
if(_4){if(_8==null)_8=1;if(_7==null)_7=1}}
if(_4||_3){if(this.vertical){_8+=_1;_7+=_2}else{_8+=_2;_7+=_1}
this.enforceScrollSize(_8,_7)}
else this.stopEnforcingScrollSize()},isc.A.setOverflow=function isc_Layout_setOverflow(_1,_2,_3,_4,_5){var _6=this.overflow;if(_6==isc.Canvas.VISIBLE&&_1!=isc.Canvas.VISIBLE){this.$3h()}else if(_6!=isc.Canvas.VISIBLE&&_1==isc.Canvas.VISIBLE){this.stopEnforcingScrollSize()}
return this.invokeSuper(isc.Layout,"setOverflow",_1,_2,_3,_4,_5)},isc.A.layoutChildren=function isc_Layout_layoutChildren(_1,_2,_3){if(isc.$cv)arguments.$cw=this;if(this.destroying)return;if(this.$3i==null)this.$3i=1;else this.$3i++;if(!this.members)this.members=[];if(this.children&&this.children.length){for(var i=0;i<this.children.length;i++){this.$60y(this.children[i])}}
if(!this.isDrawn()&&_1!=this.$od)return;var _5=this.$2z;this.$2z=true;if(_2!=null||_3!=null){if((this.vertical&&isc.isA.Number(_2))||(!this.vertical&&isc.isA.Number(_3)))
{this.$2s=true}}
if(this.isDrawn()&&this.getLengthPolicy()==isc.Layout.NONE&&!this.$2s){if(this.logIsInfoEnabled(this.$2g)){this.logInfo("Restacking, reason: "+_1,this.$2g)}
this.stackMembers(this.members);this.$2s=false;this.$3j(_1,_5);return}
this.$2s=false;var _6=this.getTotalMemberSpace();var _7=this.$3k(_6),_8=this.$25;if(!this.scrollingOnLength()&&this.overflow==isc.Canvas.AUTO&&_7.sum()>this.getLength())
{this.logInfo("scrolling will be required on length axis",this.$2g);this.$3a=true}
this.resizeMembers(_7,_8,true);if(this.manageChildOverflow)this.$qv=true;for(var i=0;i<this.members.length;i++){var _9=this.members[i],_10=this.$2y(_9);if(_9.$3e){this.$20(_9);_9.draw();_9.$3e=null;if(!_10&&this.$2y(_9)){this.updateMemberTabIndex(_9)}}}
if(this.manageChildOverflow)this.$qx(this.members);var _11=this.memberSizes=this.$3k(_6,true,_7,_8);if(!this.$3a&&!this.scrollingOnLength()&&this.overflow==isc.Canvas.AUTO&&_11.sum()>this.getLength())
{this.logInfo("scrolling will be required on length axis, after overflow",this.$2g);this.$3a=true}
this.resizeMembers(_11,_8,false);if(this.manageChildOverflow)this.$qv=true;for(var i=0;i<this.members.length;i++){var _9=this.members[i];if(_9.$3e){this.$20(_9);_9.draw();_9.$3e=null}}
if(this.manageChildOverflow)this.$qx(this.members);this.stackMembers(this.members,_8);this.reportSizes(_8,_1);this.$3j(_1,_5)},isc.A.$60y=function isc_Layout__resolvePercentageSizeForChild(_1){var _2=_1._percent_height,_3=_1._percent_width;if(_1.snapTo){_1.$qw();return}
var _4=(this.getLengthPolicy()==isc.Layout.FILL);if(!(_1._percent_left||_1._percent_top||_2||_3))return;if(_4&&this.vertical){if(_2!=null&&this.members.contains(_1))_2=null}else if(_4&&!this.vertical){if(_3!=null&&this.members.contains(_1))_3=null}
_1.setRect(_1._percent_left,_1._percent_top,_3,_2)},isc.A.$3k=function isc_Layout__getMemberSizes(_1,_2,_3,_4){if(!_3){_3=this.$3l;if(_3==null)_3=this.$3l=[];else _3.length=this.members.length}
_4=this.gatherSizes(_2,_4,_3);this.$3m(_3,_4);return this.getClass().applyStretchResizePolicy(_3,_1,this.minMemberSize,true,this)},isc.A.$3j=function isc_Layout__layoutChildrenDone(_1,_2){this.$3a=false;this.$3n=false;this.$2z=_2;if(this.$rm&&this.isDrawn()&&!this.$uw&&(_1!="resized"||this.shouldRedrawOnResize()))
{if(this.notifyAncestorsOnReflow&&this.parentElement!=null){this.notifyAncestorsAboutToReflow()}
this.adjustOverflow();if(this.notifyAncestorsOnReflow&&this.parentElement!=null){this.notifyAncestorsReflowComplete()}}
if(!this.enforcePolicy){this.vertical?this.vPolicy=isc.Layout.NONE:this.hPolicy=isc.Layout.NONE}},isc.A.$3m=function isc_Layout__getPolicyLengths(_1,_2){for(var i=0;i<_2.length;i++){_1[i]=_2[i].$27}},isc.A.getMemberSizes=function isc_Layout_getMemberSizes(){if(this.memberSizes)return this.memberSizes.duplicate();return this.memberSizes},isc.A.getScrollWidth=function isc_Layout_getScrollWidth(_1){if(isc.$cv)arguments.$cw=this;if(this.$qz){this.$qz=null;this.adjustOverflow("widthCheckWhileDeferred")}
if(!_1&&this.$su!=null)return this.$su;var _2=this.children?this.$sy(this.children,true):0,_3=this.members?this.$sy(this.members,true):0,_4=this.isRTL()&&this.overflow!=isc.Canvas.VISIBLE?Math.max(_2,_3):Math.max(_2,_3+this.$tc);if(this.overflow==isc.Canvas.VISIBLE&&this.useClipDiv&&!this.$1000(false,true))
{_4+=isc.Element.$sw(this.styleName)}
return(this.$su=_4)},isc.A.getScrollHeight=function isc_Layout_getScrollHeight(_1){if(isc.$cv)arguments.$cw=this;if(this.$qz){this.$qz=null;this.adjustOverflow("heightCheckWhileDeferred")}
if(!_1&&this.$sz!=null)return this.$sz;var _2=this.children?this.$s3(this.children,true):0,_3=this.children?this.$s3(this.members,true):0,_4=Math.max(_2,_3+this.$te);return(this.$sz=_4)},isc.A.layoutIsDirty=function isc_Layout_layoutIsDirty(){return this.$3n==true},isc.A.reflow=function isc_Layout_reflow(_1){if(this.$3n)return;if(this.isDrawn()){this.$3n=true;if(this.instantRelayout){this.layoutChildren(_1)}else{var _2=this,_3=this.$3i;isc.EH.$ms(function(){if(!_2.destroyed)_2.reflowNow(_1,_3)})}}},isc.A.reflowNow=function isc_Layout_reflowNow(_1,_2){if(_2!=null&&_2<this.$3i)return;this.layoutChildren(_1)},isc.A.childResized=function isc_Layout_childResized(_1,_2,_3,_4){if(isc.$cv)arguments.$cw=this;if(this.suppressMemberAnimations){var _5=false;if(_1.isAnimating(this.$do)){_5=true;_1.finishAnimation(this.$do)}
if(_1.isAnimating(this.$zb)){_5=true;_1.finishAnimation(this.$zb)}
if(_1.isAnimating(this.$3o)){_5=true;_1.finishAnimation(this.$3o)}
if(_5)return}
this.$t6("child resize");if(this.$2z){return}
if(_1.$pp)return;if(!this.members.contains(_1))return;var _6=_1;if(_4!="overflow"&&_4!="overflow changed"&&_4!="Overflow on initial draw"){if(_2!=null&&_2!=0){var _7=_6.$pn;_6.$pn=_6._percent_width||_6.getWidth();this.$3p(_7,_6,_4,true)}
if(_3!=null&&_3!=0){var _8=_6.$po;_6.$po=_6._percent_height||_6.getHeight();this.$3p(_8,_6,_4)}}
var _9=isc.SB.concat("memberResized: (",_2,",",_3,"): ",_6.getID());if(_5)this.reflowNow(_9);else
this.reflow(_9)},isc.A.$3p=function isc_Layout__reportNewSize(_1,_2,_3,_4){if(!this.logIsDebugEnabled(this.$2g))return;var _5=_4?_2.$pn:_2.$po;if(_5!=_1){this.logDebug("new user "+(_4?"width: ":"height: ")+_5+" for member "+_2+", oldSize: "+_1+" reason: "+_3+(this.logIsDebugEnabled("userSize")?this.getStackTrace():""),"layout")}},isc.A.childVisibilityChanged=function isc_Layout_childVisibilityChanged(_1,_2){if(!this.members.contains(_1))return;if(!_1.isDrawn())this.$2s=true;this.reflow("member changed visibility: "+_1);var _3=_1.$3f;if(_3==null||_3.target!=_1){_3=null;var _4=this.members[this.members.indexOf(_1)-1];if(_4&&_4.$3f!=null&&_4.$3f.target==_1){_3=_4.$3f}}
if(_3!=null&&_3.showGrip&&_3.showClosedGrip&&_3.label){_3.label.stateChanged()}
this.$t6("child visibility changed")},isc.A.pageResize=function isc_Layout_pageResize(){var _1=this.$3i;this.Super("pageResize",arguments);if(this.isDrawn()&&(this.$3i==null||_1==this.$3i))
{this.reflow("pageResize")}},isc.A.sectionHeaderClick=function isc_Layout_sectionHeaderClick(_1){var _2=_1.section;if(_2==null)return;if(!isc.isAn.Array(_2))_2=[_2];var _3=false;for(var i=0;i<_2.length;i++){if(isc.isA.String(_2[i]))_2[i]=window[_2[i]];if(_2[i].visibility!="hidden")_3=true}
if(_3){_2.map("hide");_1.setExpanded(false)}else{_2.map("show");_1.setExpanded(true)}},isc.A.getMember=function isc_Layout_getMember(_1){var _2=this.getMemberNumber(_1);if(_2==-1)return null;return this.members[_2]},isc.A.getMemberNumber=function isc_Layout_getMemberNumber(_1){if(isc.isA.String(_1)){var _2=this.members.findIndex("name",_1);if(_2!=-1)return _2;_1=window[_1];return this.members.indexOf(_1)}else if(isc.isA.Canvas(_1)){return this.members.indexOf(_1)}
if(isc.isA.Number(_1))return _1;return-1},isc.A.hasMember=function isc_Layout_hasMember(_1){return this.members.contains(_1)},isc.A.getMembers=function isc_Layout_getMembers(_1){return this.members},isc.A.getPrintChildren=function isc_Layout_getPrintChildren(){var _1=this.members;if(!_1||_1.length==0)return;var _2=[];for(var i=0;i<_1.length;i++){if(this.shouldPrintChild(_1[i]))_2.add(_1[i])}
return(_2.length>0)?_2:null},isc.A.$134u=function isc_Layout__joinChildrenPrintHTML(_1){if(_1!=null&&!this.vertical){if(!isc.isAn.Array(_1))_1=[_1];return"<table><tr><td>"+_1.join("</td><td>")+"</td></tr></table>"}else{return this.Super("$134u",arguments)}},isc.A.getCompletePrintHTMLFunction=function isc_Layout_getCompletePrintHTMLFunction(_1,_2){var _3=this;return function(_5){_3.isPrinting=false;var _4=_3.vertical||_3.printVertical;if(isc.isAn.Array(_5)&&_5.length>0){if(_4)_5=_5.join(isc.emptyString);else{_5="<TABLE"+(_3.printFillWidth?" WIDTH=100%>":">")+"<TR><TD valign=top>"+_5.join("</TD><TD valign=top>")+"</TD></TR></TABLE>"}}
if(_5)_1[2]=_5;_1=_1.join(isc.emptyString);delete _3.currentPrintProperties;if(_2){_3.fireCallback(_2,"html, callback",[_1,_2]);return null}else{return _1}}});isc.evalBoundary;isc.B.push(isc.A.addMember=function isc_Layout_addMember(_1,_2,_3){this.addMembers(_1,_2,_3);return this},isc.A.addMembers=function isc_Layout_addMembers(_1,_2,_3){if(!_1)return;if(isc.$cv)arguments.$cw=this;this.$3q();if(this.logIsInfoEnabled(this.$2g)){this.logInfo("adding newMembers: "+_1+(_2!=null?" at position: "+_2:""),"layout")}
if(!isc.isAn.Array(_1)){this.$2j[0]=_1;_1=this.$2j}
if(this.members==null)this.members=[];if(_2>this.members.length)_2=this.members.length;var _4=this.isDrawn(),_5=0;for(var i=0;i<_1.length;i++){var _7=_1[i];if(!_7){++_5;continue}
if(!isc.isAn.Instance(_7)){_7=this.createCanvas(_7)}
if(!isc.isA.Canvas(_7)){this.logWarn("addMembers() unable to resolve member:"+this.echo(_7)+" to a Canvas - ignoring");++_5;continue}
if(this.members.contains(_7)){if(_2!=null){var d=i-_5,_9=this.members.indexOf(_7),_10=_2+d;if(_9<_10){++_5;--_10}
this.members.slide(_9,_10)}
continue}
if(_7.addAsPeer||_7.snapEdge){this.addPeer(_7,null,false);++_5;continue}else if(_7.addAsChild||_7.snapTo){this.addChild(_7,null,false);++_5;continue}
if(_7.parentElement)_7.deparent();if(_7.isDrawn())_7.clear();if(_2!=null){this.members.addAt(_7,_2+i-_5)}else{this.members.add(_7)}
this.$42h(_7);this.autoSetBreadth(_7);var _11=_4&&this.animateMembers&&!_3&&_1.length==1&&_7.visibility!=isc.Canvas.HIDDEN;if(_11)_7.hide();var _12=(_4&&this.getLengthPolicy()==isc.Layout.NONE);if(this.membersAreChildren){this.addChild(_7,null,_12)}else{this.addPeer(_7,null,_12)}
_7.moveTo(0,0);if(this.isDrawn())this.updateMemberTabIndex(_7);if(this.isDrawn()&&this.memberHasInherentLength(_7)){this.$20(_7);if(!_7.isDrawn())_7.draw()}}
this.$2j[0]=null;if(_11){this.$3r(_7)}else
this.reflow(this.$2k);this.$62s()},isc.A.$42h=function isc_Layout__getUserSizes(_1){if(_1._percent_height){_1.$po=_1._percent_height}
if(_1._percent_width)_1.$pn=_1._percent_width;if(this.memberHasInherentLength(_1)){if(!_1.$po&&!_1.$t9){_1.restoreDefaultSize(true)}
if(!_1.$pn&&!_1.$t8){_1.restoreDefaultSize()}}},isc.A.$3s=function isc_Layout__animateMargin(_1,_2){var _3=this;var _4=_1;var _5=this.getMemberNumber(_1);if(_5==this.members.length-1)_1=this.getMember(_5-1);if(!_1)return;var _6=this.membersMargin+this.getMemberGap(_1);if(_2)_1.$22=-(_6+1);this.registerAnimation(function(_8){var _7=Math.floor(_8*_6);if(_2)_7=_6-_7;_1.$22=-_7;if(_8==1)_1.$22=null},this.animateMemberTime)},isc.A.removeChild=function isc_Layout_removeChild(_1,_2){isc.Canvas.$b4.removeChild.call(this,_1,_2);if(this.membersAreChildren&&this.members.contains(_1)){this.removeMember(_1)}},isc.A.removeMember=function isc_Layout_removeMember(_1,_2){this.removeMembers(_1,_2)},isc.A.removeMembers=function isc_Layout_removeMembers(_1,_2){if(!_1)return;this.$3q();if(!isc.isAn.Array(_1)){this.$2j[0]=_1;_1=this.$2j}
if(_1===this.members)_1=_1.duplicate();for(var i=0;i<_1.length;i++){var _4=_1[i];if(isc.isA.Canvas(_6))continue;_1[i]=this.getMember(_4);if(_1[i]==null){this.logWarn("couldn't find member to remove: "+this.echoLeaf(_4));_1.removeAt(i);i-=1}}
var _5=(this.animateMembers&&_1.length==1&&!_2),_6=(_5?_1[0]:null);if(_5){if(_6.parentElement!=this||_6.destroying||!_6.isVisible())
{_5=false}}
if(_5){var _7=this,_8=_1.duplicate(),_9=function(){_7.$3t(_8)};this.$3u(_6,_9)}else{this.$3t(_1)}
this.$2j[0]=null;this.$62s()},isc.A.$3t=function isc_Layout__completeRemoveMembers(_1){if(!_1)return;for(var i=0;i<_1.length;i++){var _3=_1[i];this.members.remove(_3);if(this.membersAreChildren&&_3.parentElement==this)_3.deparent();_3.$t9=_3.$t8=null;if(_3.$3f){_3.$3f.destroy();_3.$3f=null}
if(_3.showTarget==this)delete _3.showTarget;if(_3.$3v)_3.destroy()}
this.reflow(this.$2l)},isc.A.setMembers=function isc_Layout_setMembers(_1){if(_1==this.members||!isc.isAn.Array(_1))return;var _2=[];for(var i=0;i<this.members.length;i++){if(!_1.contains(this.members[i]))_2.add(this.members[i])}
var _4=this.instantRelayout;this.instantRelayout=false;this.removeMembers(_2,true);this.addMembers(_1,0,true);this.instantRelayout=_4;if(_4)this.reflow("set members")},isc.A.showMember=function isc_Layout_showMember(_1,_2){return this.showMembers([_1],_2)},isc.A.showMembers=function isc_Layout_showMembers(_1,_2){if(this.isDrawn()&&this.animateMembers&&_1.length==1){this.$3r(_1[0],_2)}else{for(var i=0;i<_1.length;i++){var _4=this.getMember(_1[i]);_4.show()}
this.fireCallback(_2)}},isc.A.$3r=function isc_Layout__animateMemberShow(_1,_2){_1=this.getMember(_1);this.setNewMemberLength(_1);_1.animateShow(this.animateMemberEffect,_2,this.animateMemberTime);if(_1.isAnimating())this.$3s(_1,true)},isc.A.setNewMemberLength=function isc_Layout_setNewMemberLength(_1){_1.$26=true;var _2=this.$3k(this.getTotalMemberSpace());delete _1.$26;var _3=_2[this.members.indexOf(_1)];var _4=this.$2z;this.$2z=true;this.vertical?_1.setHeight(_3):_1.setWidth(_3);this.$2z=_4},isc.A.hideMember=function isc_Layout_hideMember(_1,_2){return this.hideMembers([_1],_2)},isc.A.hideMembers=function isc_Layout_hideMembers(_1,_2){this.$3x=_2;if(this.animateMembers&&_1.length==1){this.$3u(_1[0],_2)}else{for(var i=0;i<_1.length;i++){var _4=this.getMember(_1[i]);_4.hide()}
this.fireCallback(_2)}},isc.A.$3u=function isc_Layout__animateMemberHide(_1,_2){_1=this.getMember(_1);_1.animateHide(this.animateMemberEffect,_2,this.animateMemberTime);if(_1.isAnimating())this.$3s(_1)},isc.A.setVisibleMember=function isc_Layout_setVisibleMember(_1){var _2=this.getMember(_1);if(_2==null)return;this.hideMembers(this.members);this.showMember(_2)},isc.A.reorderMember=function isc_Layout_reorderMember(_1,_2){this.reorderMembers(_1,_1+1,_2)},isc.A.reorderMembers=function isc_Layout_reorderMembers(_1,_2,_3){this.members.slideRange(_1,_2,_3);this.$87o("membersReordered")},isc.A.$87o=function isc_Layout__membersReordered(_1){this.layoutChildren(_1);this.$62s()},isc.A.replaceMember=function isc_Layout_replaceMember(_1,_2){var _3=this.instantRelayout;this.instantRelayout=false;var _4=this.getMemberNumber(_1);if(_4<0){this.logWarn("replaceMember(): "+_1.getID()+" is not a member");_4=0}else{this.removeMember(_1,true)}
this.addMember(_2,_4,true);this.instantRelayout=_3;if(_3)this.reflowNow()},isc.A.$62s=function isc_Layout__membersChanged(){if(!this.destroying){this.$86g()}
if(this.membersChanged)this.membersChanged()},isc.A.$86g=function isc_Layout__computeShowResizeBarsForMembers(){var _1=this.defaultResizeBars;for(var i=this.members.length-1;i>=0;i--){var _3=this.members[i];if(_3==null)continue;var _4=false;if(_1==isc.Canvas.MARKED){_4=_3.showResizeBar}else if(_1==isc.Canvas.MIDDLE){_4=(i<this.members.length-1)&&(_3.showResizeBar!=false)}else if(_1==isc.Canvas.ALL){_4=_3.showResizeBar!=false}
if(this.neverShowResizeBars){_4=false}
var _5=_3.$86h;_3.$86h=_4;if(_5!=_4)this.reflow("$86h changed")}},isc.A.updateMemberTabIndex=function isc_Layout_updateMemberTabIndex(_1){if(!this.$2y(_1)||(_1.tabIndex!=-1&&_1.tabIndex!=null&&!_1.$sp))return;var _2,_3=this.members.indexOf(_1);while(_3>0&&_2==null){_3-=1
_2=this.members[_3].$v5()}
if(_2==null&&(this.tabIndex==null||this.$sp))
_2=this;if(_2){_1.$sq(_2)}},isc.A.dragRepositionStart=function isc_Layout_dragRepositionStart(){var _1=isc.EH.dragTarget;if(!this.hasMember(_1)||_1.getDragAppearance(isc.EH.DRAG_REPOSITION)!="target")return;var _2=_1.getPageLeft(),_3=_1.getPageTop();this.$3y(_1,_2,_3)},isc.A.$3y=function isc_Layout__popOutDraggingMember(_1,_2,_3){this.$3z=_1;var _4=this.$30(_1,"$31",this.showDragPlaceHolder)
_1.$32=_4;var _5=this.instantRelayout;this.instantRelayout=false;this.$95u(_4,_1);_1.deparent();_1.eventParent=this;this.instantRelayout=_5;_1.moveTo(_2,_3);_1.draw()},isc.A.$95u=function isc_Layout__doPopOutDragMember(_1,_2){this.addMember(_1,this.getMemberNumber(_2),true)},isc.A.dragRepositionStop=function isc_Layout_dragRepositionStop(){var _1=isc.EH.dragTarget;if(!this.members.contains(_1)&&_1!=this.$3z)return;var _2=_1.getDragAppearance(isc.EH.DRAG_REPOSITION),_3=_2==isc.EH.TARGET;if(!_3&&(_2!=isc.EH.OUTLINE))return false;var _4=_3?isc.EH.STOP_BUBBLING:false;this.$3z=null;if(_1.eventParent==this)_1.eventParent=null;if(_1.dropSucceeded)return _4;var _5=_1.$32;if(_5!=null){if(_1.parentElement!=null||_1.destroyed){this.$33(_1)}else{_1.$32=null;var _6=this.getMemberNumber(_5),_7=_5.getPageRect(),_8=this,_9=function(){if(_1.$105q!=null){_1.canDrag=_1.$105q;delete _1.$105q}
if(_1.$105r!=null){_1.canDragReposition=_1.$105r;delete _1.$105r}
_8.replaceMember(_5,_1)};if(this.animateMembers){_1.$105q=_1.canDrag;_1.canDrag=false;_1.$105r=_1.canDragReposition;_1.canDragReposition=false;_1.animateRect(_7[0],_7[1],_7[2],_7[3],_9)}else
_9(true)}}
return _4},isc.A.$30=function isc_Layout__createSpacer(_1,_2,_3){var _4,_5;if(_3){_4=this.createAutoChild("placeHolder",_5,isc.Canvas)}else{_4=isc.LayoutSpacer.create(_5)}
_4.setRect(_1.getRect());_4.$pn=_4.getWidth();_4.$po=_4.getHeight();_4.layoutAlign=_1.layoutAlign;_4.extraSpace=(_1.extraSpace||0);_4.$3v=true;return _4},isc.A.removePlaceHolder=function isc_Layout_removePlaceHolder(_1){if(this.animateMembers&&!isc.isA.LayoutSpacer(_1)){var _2=this.$30(_1);this.replaceMember(_1,_2);_1.destroy();_1=_2}
this.removeMember(_1)},isc.A.willAcceptDrop=function isc_Layout_willAcceptDrop(){if(!this.canDropComponents){return this.canAcceptDrop==null?false:this.canAcceptDrop}else if(!this.canAcceptDrop)return false;return this.invokeSuper(isc.Layout,"willAcceptDrop")},isc.A.dropOver=function isc_Layout_dropOver(){if(!this.willAcceptDrop())return;this.showDropLine();isc.EventHandler.dragTarget.bringToFront();return true},isc.A.dropMove=function isc_Layout_dropMove(){if(!this.willAcceptDrop())return;this.showDropLine()},isc.A.dropOut=function isc_Layout_dropOut(){this.hideDropLine()},isc.A.dropStop=function isc_Layout_dropStop(){this.hideDropLine()},isc.A.getDropComponent=function isc_Layout_getDropComponent(_1,_2){if(!isc.isA.Palette(_1))return _1;var _3=_1.transferDragData(),_4=(isc.isAn.Array(_3)?_3[0]:_3);return _4.liveObject},isc.A.drop=function isc_Layout_drop(){if(!this.willAcceptDrop()||this.$88z)return;var _1=this.getDropPosition();var _2=this.getDropComponent(isc.EventHandler.getDragTarget(),_1);if(!_2)return;var _3=this.members.indexOf(_2);if(_3==-1&&_2.$32)
_3=this.members.indexOf(_2.$32)
if(_3!=-1&&(_3==_1||_3+1==_1))
{return false}
_2.dropSucceeded=true;if(isc.Browser.isMoz){this.delayCall("$34",[_2,_1])}else{this.$34(_2,_1)}
return isc.EH.STOP_BUBBLING},isc.A.$34=function isc_Layout__completeDrop(_1,_2){this.hideDropLine();var _3=_1.parentElement;if(_3&&_1.getDragAppearance(isc.EH.dragOperation)==isc.EH.OUTLINE&&this.animateMembers&&isc.isA.Layout(_3)&&_3.hasMember(_1))
{_3.$3y(_1,isc.EH.dragOutline.getPageLeft(),isc.EH.dragOutline.getPageTop())}
var _4=false;if(this.members.contains(_1)){var _5=this.members.indexOf(_1);if(_5<_2)_4=true;this.removeMember(_1,true)}else{var _6=_1.$32;if(_6!=null){var _7=this.getMemberNumber(_6)
if((_7>=0)&&(_7<_2)){_4=true}
_6.parentElement.$33(_1)}}
var _8=_2-(_4?1:0);if(!this.animateMembers||(_1.dragAppearance!="target"&&_1.dragAppearance!="outline")){this.addMember(_1,_8);delete _1.dropSucceeded;return}
var _9=this.$30(_1,"$35");this.addMember(_9,_2);this.reflowNow();this.$36=_1;var _10=this,_11=_9.getPageLeft(),_12=_9.getPageTop();if(_4){var _13=this.membersMargin+this.getMemberGap(_1);if(this.vertical)_12-=(_1.getVisibleHeight()+_13);else _11-=(_1.getVisibleWidth()+_13)}
if(_9==this.members.last()&&this.members.length>1){var _14=(this.members[this.members.length-2].$22||0);if(this.vertical)_12-=_14;else _11-=_14}
_1.animateMove(_11,_12,function(){_10.$36=null;var _15=_10.instantRelayout;_10.instantRelayout=false;_9.destroy();_1.dropSucceeded=null;_10.addMember(_1,_8,true);_10.instantRelayout=_15;if(_15)_10.reflowNow()},this.animateMemberTime)},isc.A.$33=function isc_Layout__cleanUpPlaceHolder(_1){var _2=_1.$32;if(this.hasMember(_2)){_1.$32=null;this.removePlaceHolder(_2)}},isc.A.$3q=function isc_Layout__finishDropAnimation(){if(this.$36!=null){this.$36.finishAnimation("move")}},isc.A.getDropPosition=function isc_Layout_getDropPosition(){var _1=this.vertical?this.getOffsetY():this.getOffsetX();if(_1<0)return 0;var _2=this.vertical?this.$td:this.$tb;for(var i=0;i<this.memberSizes.length;i++){var _4=this.memberSizes[i],_5=this.members[i];if(!_5)continue;if(_1<(_2+(_4/2))){if(_5.canDropBefore===false)return false;return i}
_2+=_4+this.membersMargin+this.getMemberGap(_5)}
return this.members.length},isc.A.$37=function isc_Layout__getChildInset(_1){return(_1?this.getTopMargin()+this.getTopBorderSize():this.getLeftMargin()+this.getLeftBorderSize())},isc.A.getPositionOffset=function isc_Layout_getPositionOffset(_1){if(this.members.length==0){return this.vertical?this.getPageTop()+this.$37(true)+this.$td:this.getPageLeft()+this.$37()+this.$tb}
if(_1<this.members.length){var _2=this.members[_1];return(this.vertical?_2.getPageTop():_2.getPageLeft())}else{var _2=this.members[_1-1];return(this.vertical?_2.getPageBottom():_2.getPageRight())}},isc.A.showDropLine=function isc_Layout_showDropLine(){if(this.$88z)return;if(this.showDropLines==false){return}
var _1=this.getDropPosition();if(!isc.isA.Number(_1)){this.hideDropLine();return}
if(_1<0)return;if(this.$3n)this.reflowNow();if(!this._dropLine)this._dropLine=this.makeDropLine();var _2=this.dropLineThickness,_3=this.getPositionOffset(_1);var _4;if(this.$tb==null)this.setLayoutMargin();if(_1==0){_4=this.vertical?this.$td:this.$tb}else if(_1==this.members.length){_4=-(this.vertical?this.$te:this.$tc)}else{_4=this.membersMargin}
_3=_3-Math.round((_4+_2)/2);var _5=this.vertical?this.$tb+this.$37():this.$td+this.$37(true);var _6=this.vertical?this.getVisibleWidth()-this.getVMarginBorder()-this.$2u():this.getVisibleHeight()-this.getHMarginBorder()-this.$2v();this._dropLine.setPageRect((this.vertical?this.getPageLeft()+_5:_3),(this.vertical?_3:this.getPageTop()+_5),(this.vertical?_6:_2),(this.vertical?_2:_6));var _7=this.topElement||this;if(this._dropLine.getZIndex()<_7.getZIndex())this._dropLine.moveAbove(_7);this._dropLine.show()},isc.A.hideDropLine=function isc_Layout_hideDropLine(){if(this._dropLine)this._dropLine.hide()},isc.A.makeDropLine=function isc_Layout_makeDropLine(){var _1=this.createAutoChild("dropLine",null,isc.Canvas);_1.dropTarget=this;return _1},isc.A.createResizeBar=function isc_Layout_createResizeBar(_1,_2,_3,_4){var _5=this.createAutoChild("resizeBar",{target:_1,targetAfter:_3,hideTarget:_4,layout:this,vertical:!this.vertical,dragScrollDirection:this.vertical?isc.Canvas.VERTICAL:isc.Canvas.HORIZONTAL},this.resizeBarClass);return isc.SGWTFactory.extractFromConfigBlock(_5)},isc.A.makeResizeBar=function isc_Layout_makeResizeBar(_1,_2,_3,_4){var _5=_1.$3f;if(_5==null){var _6=_1,_7,_8,_9=this.getMember(this.getMemberNumber(_1)+1)||_1;if(_1.resizeBarTarget=="next"){_6=_9;_7=true}
if(_1.resizeBarHideTarget!=null){if(_1.resizeBarHideTarget=="next")_8=_9;else _8=_1}else{_8=_6}
_5=this.createResizeBar(_6,_3,_7,_8);_1.$3f=_5}
if(this.vertical){_5.setRect(_2,_3,_4,this.resizeBarSize)}else{if(this.isRTL())_3-=this.resizeBarSize;_5.setRect(_3,_2,this.resizeBarSize,_4)}
if(this.membersAreChildren){this.addChild(_5)}else{this.addPeer(_5)}
if(!_5.isDrawn())_5.draw();if(!_5.isVisible())_5.show();return _5},isc.A.propertyChanged=function isc_Layout_propertyChanged(_1,_2){this.invokeSuper(isc.Layout,"propertyChanged",_1,_2);if(this.$127h[_1]){if(_1=="minMemberSize"||_1=="hPolicy"||_1=="vPolicy")
{this.$2s=true}
this.reflow("Reflow for change to "+_1)}else if(isc.endsWith(_1,"Margin"))this.setLayoutMargin()},isc.A.getLengthAxis=function isc_Layout_getLengthAxis(){return this.vertical?"height":"width"},isc.A.$42g=function isc_Layout__reportResize(_1,_2,_3){var _4=this.vertical?_2:_3,_5=this.vertical?_3:_2,_6=_1.getDelta("width",_4,_1.getWidth()),_7=_1.getDelta("height",_5,_1.getHeight());if((_6!=null&&_6!=0)||(_7!=null&&_7!=0)){this.logDebug("resizing "+_1+(_1.isDrawn()?" (drawn): ":": ")+(_2!=null?_2+(this.vertical?"w ":"h "):"")+(_3!=null?_3+(this.vertical?"h":"w"):""),"layout")}},isc.A.reportSizes=function isc_Layout_reportSizes(_1,_2){if(!this.logIsInfoEnabled(this.$2g))return;var _3="layoutChildren (reason: "+_2+"):\nlayout specified size: "+this.getWidth()+"w x "+this.getHeight()+"h\ndrawn size: "+this.getVisibleWidth(true)+"w x "+this.getVisibleHeight(true)+"h\navailable size: "+this.getInnerWidth()+(!this.vertical?"w (length) x ":"w x ")+this.getInnerHeight()+(this.vertical?"h (length)\n":"h\n");for(var i=0;i<_1.length;i++){var _5=_1[i];_3+="   "+this.members[i]+"\n";_3+="      "+_5.$3g+" drawn length"+(_5.$3d?" (resizeLength: "+_5.$3d+")":"")+" (policyLength: "+_5.$27+") ("+_5.$28+")\n";_3+="      "+_5.$3c+" drawn breadth ("+_5.$3b+")\n"}
if(_1.length==0)_3+="[No members]";this.logInfo(_3,"layout")});isc.B._maxIndex=isc.C+128;isc.defineClass("HLayout","Layout");isc.A=isc.HLayout.getPrototype();isc.A.orientation="horizontal";isc.A.animateMemberEffect={effect:"slide",startFrom:"L",endAt:"L"};isc.defineClass("VLayout","Layout");isc.A=isc.VLayout.getPrototype();isc.A.orientation="vertical";isc.defineClass("HStack","Layout");isc.A=isc.HStack.getPrototype();isc.A.orientation="horizontal";isc.A.hPolicy=isc.Layout.NONE;isc.A.animateMemberEffect={effect:"slide",startFrom:"L",endAt:"L"};isc.A.defaultWidth=20;isc.defineClass("VStack","Layout");isc.A=isc.VStack.getPrototype();isc.A.orientation="vertical";isc.A.vPolicy=isc.Layout.NONE;isc.A.defaultHeight=20;isc.defineClass("LayoutSpacer","Canvas");isc.A=isc.LayoutSpacer.getPrototype();isc.A.overflow="hidden";isc.A.draw=isc.Canvas.NO_OP;isc.A.redraw=isc.Canvas.NO_OP;isc.A.$59d=true;isc.Layout.registerDupProperties("members");isc.defineClass("Button","StatefulCanvas");isc.A=isc.Button.getPrototype();isc.A.title="Untitled Button";isc.A.clipTitle=true;isc.A.showClippedTitleOnHover=false;isc.A.$115g=true;isc.A.suppressClassName=true;isc.A.useEventParts=true;isc.A.autoFitDirection="horizontal";isc.A.baseStyle="button";isc.A.showDown=true;isc.A.showFocused=!isc.Browser.isTouch;isc.A.showRollOver=true;isc.A.mozOutlineOffset="0px";isc.A.wrap=false;isc.A.height=20;isc.A.width=100;isc.A.overflow=isc.Canvas.HIDDEN;isc.A.redrawOnDisable=false;isc.A.redrawOnStateChange=false;isc.A.cursor=isc.Canvas.HAND;isc.A.className=null;isc.A.canFocus=true;isc.A=isc.Button.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$114x="titleClipper";isc.A.$38="px;";isc.A.$39=";";isc.A.$4a="border:";isc.A.$4b="padding-top:0px;padding-bottom:0px;";isc.A.$4c="padding:";isc.A.$115k="padding-right:";isc.A.$115l="padding-left:";isc.A.$4d="background-color:";isc.A.$4e="margin:0px;";isc.A.$987="filter:none;";isc.A.$115f=isc.Browser.$114w+":ellipsis;overflow:hidden;";isc.A.$4f=["' style='",,,,,,,,,,,,,,,,null];isc.A.$4g="</td></tr></tbody></table>";isc.A.$4h="<table role='presentation' cellspacing='0' cellpadding='0'><tbody><tr><td ";isc.A.$4i="<table role='presentation' width='100%' cellspacing='0' cellpadding='0'><tbody><tr><td ";isc.A.$1153="<table role='presentation' width='100%' cellspacing='0' cellpadding='0' style='table-layout:fixed'><tbody><tr><td ";isc.A.$4j="font-size:"+(isc.Browser.isFirefox&&isc.Browser.isStrict?0:1)+"px;padding-right:";isc.A.$4k="font-size:"+(isc.Browser.isFirefox&&isc.Browser.isStrict?0:1)+"px;padding-left:";isc.A.$4l="px'>";isc.A.$4m="</td><td ";isc.A.$4n="class='";isc.A.$4p="'>";isc.A.$4q="' nowrap='true'>";isc.A.$4r="</td></tr></tbody></table>";isc.A.$o1="right";isc.A.$4s={align:"absmiddle",extraCSSText:"vertical-align:middle"};isc.A.$116h="icon";isc.A.$137q=" eventpart='icon'";isc.A.$132u="RTL";isc.A.$34w="TABLE";isc.B.push(isc.A.initWidget=function isc_Button_initWidget(){if(this.border!=null&&!isc.StatefulCanvas.pushTableBorderStyleToDiv){this.$4v=this.border;this.border=null}
if(this.padding!=null){this.$4w=this.padding;this.padding=null}
if(this.backgroundColor!=null){this.$4x=this.backgroundColor;this.backgroundColor=null}
this.forceHandleOverflowHidden=isc.StatefulCanvas.pushTableBorderStyleToDiv;return isc.StatefulCanvas.$b4.initWidget.call(this)},isc.A.$118i=function isc_Button__assignRectToHandle(_1,_2,_3,_4,_5){this.invokeSuper(isc.Button,"$118i",_1,_2,_3,_4,_5);if(this.redrawOnResize&&!this.isPrinting&&this.$118j())return;var _6=this.getHandle().firstChild;if(_6!=null){if(_3!=null&&isc.isA.Number(_3)){var _7=_3;if(this.isBorderBox)_7-=this.getHBorderPad();this.$u9(_6,this.$o6,_7)}
if(_4!=null&&isc.isA.Number(_4)){var _8=_4;if(this.isBorderBox)_8-=this.getVBorderPad();this.$u9(_6,this.$o5,_8)}}},isc.A.getCanHover=function isc_Button_getCanHover(_1,_2,_3){return this.$115g||this.invokeSuper(isc.Button,"getCanHover",_1,_2,_3)},isc.A.shouldClipTitle=function isc_Button_shouldClipTitle(){return this.getOverflow()==isc.Canvas.HIDDEN&&!!this.clipTitle},isc.A.$1140=function isc_Button__getTitleClipperID(){return this.$qs(this.$114x)},isc.A.titleClipped=function isc_Button_titleClipped(){var _1=this.getDocument().getElementById(this.$1140());return(_1==null?false:isc.Element.getClientWidth(_1)<_1.scrollWidth)},isc.A.defaultTitleHoverHTML=function isc_Button_defaultTitleHoverHTML(){return this.getTitleHTML()},isc.A.titleHoverHTML=function isc_Button_titleHoverHTML(_1){return _1},isc.A.handleHover=function isc_Button_handleHover(_1,_2,_3){if(this.canHover==null&&this.prompt)return this.invokeSuper(isc.Button,"handleHover",_1,_2,_3);if(!this.showClippedTitleOnHover||!this.titleClipped()){if(this.canHover)return this.invokeSuper(isc.Button,"handleHover",_1,_2,_3);else return}
if(this.titleHover&&this.titleHover()==false)return;var _4=this.titleHoverHTML(this.defaultTitleHoverHTML());if(_4!=null&&!isc.isAn.emptyString(_4)){var _5=this.$wc();isc.Hover.show(_4,_5,null,this)}},isc.A.$118j=function isc_Button__explicitlySizeTable(_1,_2){if(_1==null)_1=this.$5b();if(_2==null)_2=this.shouldClipTitle();return!(_1||!_2||(isc.Browser.isIE&&((!isc.Browser.isStrict&&isc.Browser.version<10)||isc.Browser.version<=7)))},isc.A.getInnerHTML=function isc_Button_getInnerHTML(){var _1=this.$5b(),_2=this.shouldClipTitle(),_3=this.isRTL();if(this.isPrinting||!this.$118j()){var _4=isc.Button;if(!_4.$4y){_4._100Size=" width='100%' height='100%";_4._100Width=" width='100%";_4.$xf="width='";_4.$xg="' height='";_4.$4z="' style='table-layout:fixed;overflow:hidden;";var _5=_4.$115m=[];_4.$115n=">";_4.$115o=" nowrap='true'";_4.$115p=" class='";_4.$115q="<col width='";_4.$1151="px'/>";_4.$115s="<col/>";_5[0]="'><colgroup>";_5[5]="</colgroup><tbody><tr><td";_4.$40="'><tbody><tr><td class='";_4.$41="'><tbody><tr><td nowrap='true' class='";var _6=_4.$4y=[];_6[0]="<table role='presentation' cellspacing='0' cellpadding='0' ";_6[9]="' align='";_4.$42="' valign='center";_4.$43="' valign='top";_4.$44="' valign='bottom";_4.$151="' id='";_4.$45="' "+(isc.Browser.isChrome?"":"tabindex='-1'")+" onfocus='";_4.$46=".$47()'>";_4.$48="'>"}
var _6=_4.$4y;if(this.isPrinting||this.redrawOnResize==false){_6[1]=(this.isPrinting?_4._100Width:_4._100Size);_6[2]=null;_6[3]=null;_6[4]=null}else{_6[1]=_4.$xf;var _7=this.$1316();_6[2]=this.getInnerWidth()-(_7&&isc.StatefulCanvas.pushTableBorderStyleToDiv?this.getHBorderSize():0);_6[3]=_4.$xg;_6[4]=this.getInnerHeight()-(_7&&isc.StatefulCanvas.pushTableBorderStyleToDiv?this.getVBorderSize():0)}
if(this.overflow==isc.Canvas.VISIBLE){_6[5]=null}else{_6[5]=_4.$4z}
var _8;if(isc.Browser.isIE&&!isc.Browser.isStrict&&this.$1240&&isc.Browser.version<10&&(_8=this.$115j==null?null:this.$115j())>0)
{var _5=_4.$115m;_5[1]=_4.$115s;_5[2]=_4.$115q;_5[3]=_8;_5[4]=_4.$1151;_5[6]=(this.wrap?null:_4.$115o);_5[7]=_4.$115p;_6[6]=_5.join(isc.emptyString)}else{_6[6]=(this.wrap?_4.$40:_4.$41)}
_6[7]=this.isPrinting?this.getPrintStyleName():this.getStateName();var _9=!_1&&_2;var _10=_9||this.cssText||this.$4v||this.$4w||this.$4x||this.margin||this.$49()||isc.StatefulCanvas.pushTableBorderStyleToDiv||this.$115j!=null;if(_10)_6[8]=this.$5a(null,_9);else _6[8]=null;if(_1||this.align==null){_6[10]=isc.Canvas.CENTER}else if(!_3||this.ignoreRTL){_6[10]=this.align}else{_6[10]=isc.StatefulCanvas.$1333[this.align]}
_6[11]=(this.valign==isc.Canvas.TOP?_4.$43:(this.valign==isc.Canvas.BOTTOM?_4.$44:_4.$42));if(_9){_6[12]=_4.$151;_6[13]=this.$1140()}else{_6[13]=_6[12]=null}
if(this.$kk()&&this._useNativeTabIndex){_6[14]=_4.$45;_6[15]=this.getID();_6[16]=_4.$46}else{_6[14]=_4.$48;_6[15]=_6[16]=null}
this.fillInCell(_6,17,_9);return _6.join(isc.emptyString)}else{var _11=isc.SB.create(),_12=(this.valign==isc.Canvas.TOP||this.valign==isc.Canvas.BOTTOM?this.valign:"middle");var _13;if(this.align==null){_13=isc.Canvas.CENTER}else if(!_3||this.ignoreRTL){_13=this.align}else{_13=isc.StatefulCanvas.$1333[this.align]}
_11.append("<table role='presentation' cellspacing='0' cellpadding='0'",(this.overflow!==isc.Canvas.VISIBLE?" width='"+this.getInnerWidth()+"' style='table-layout:fixed'":null)," height='",this.getInnerHeight(),"'><tbody><tr><td class='",this.getStateName(),"' style='",this.$5a([]),"text-align:",_13,";vertical-align:",_12,(!this.wrap?";white-space:nowrap":""),"'>");var _14=this.$1140(),_15=this.getIconSpacing(),_16=(this.iconWidth||this.iconSize),_17=_15+_16,_18=((!_3&&this.iconOrientation==isc.Canvas.RIGHT)||(_3&&((this.ignoreRTL&&this.iconOrientation==isc.Canvas.LEFT)||(!this.ignoreRTL&&this.iconOrientation==isc.Canvas.RIGHT)))),b=(_3||_18)&&!(_3&&_18);var _20=0,_8=0,_21=null;if(this.icon!=null){_20=_17;_21=this.$5d({align:"absmiddle",extraCSSText:(b?"margin-left:":"margin-right:")+_15+"px;vertical-align:middle",extraStuff:this.$137q})}
_11.append((!_18?_21:null),"<div id='",_14,"' style='display:inline-block;",(this.icon?(b?"margin-right:":"margin-left:")+(-_17)+"px;":null),isc.Element.$1434,":border-box;max-width:100%;",(_20?((b?"padding-right:":"padding-left:")+_20+"px;"):null),(_8?((b?"padding-left:":"padding-right:")+_8+"px;"):null),"vertical-align:middle;overflow:hidden;",isc.Browser.$114w,":ellipsis'>",this.getTitleHTML(),"</div>",(_18?_21:null));_11.append("</td></tr></tbody></table>");return _11.release()}},isc.A.setOverflow=function isc_Button_setOverflow(){var _1=this.isDirty();this.Super("setOverflow",arguments);if(!_1)this.redraw()},isc.A.$ux=function isc_Button___adjustOverflow(_1){this.Super("$ux",arguments);if(isc.Browser.isSafari&&!isc.Browser.isChrome&&this.icon!=null&&!(this.isPrinting||!this.$118j()))
{var _2=this.isRTL(),_3=((!_2&&this.iconOrientation==isc.Canvas.RIGHT)||(_2&&((this.ignoreRTL&&this.iconOrientation==isc.Canvas.LEFT)||(!this.ignoreRTL&&this.iconOrientation==isc.Canvas.RIGHT))));if(!_3){var _4;if(this.align==null){_4=isc.Canvas.CENTER}else if(!_2||this.ignoreRTL){_4=this.align}else{_4=isc.StatefulCanvas.$1333[this.align]}
var _5=this.getDocument().getElementById(this.$1140()),_6=_5.style,_7=this.getIconSpacing(),_8=(this.iconWidth||this.iconSize),_9=_7+_8;var _10=_9,_11=0;_6[_2?"paddingRight":"paddingLeft"]=_10+"px";_6[_2?"paddingLeft":"paddingRight"]="";if(this.titleClipped()){if(_4===isc.Canvas.CENTER){_10=((_10+_7)/2)<<0;_11=(_7/2)<<0}else if((!_2&&_4===isc.Canvas.RIGHT)||(_2&&_4===isc.Canvas.LEFT))
{_10-=(_10/2)<<0;_11=_8}
_6[_2?"paddingRight":"paddingLeft"]=_10+"px";_6[_2?"paddingLeft":"paddingRight"]=_11+"px"}}}},isc.A.getPrintTagStart=function isc_Button_getPrintTagStart(_1){var _2=this.currentPrintProperties,_3=_2.topLevelCanvas==this,_4=!_1&&!_3&&_2.inline;return[((this.wrap==false)?"<div style='white-space:nowrap' ":_4?"<span ":"<div "),this.getPrintTagStartAttributes(_1),">"].join(isc.emptyString)},isc.A.$5a=function isc_Button__getCellStyleHTML(_1,_2){_1=_1||this.$4f;_1[1]=(this.cssText?this.cssText:null);var _3=isc.StatefulCanvas.pushTableBorderStyleToDiv?"none":this.$4v;if(_3!=null){_1[2]=this.$4a;_1[3]=_3;_1[4]=this.$39}else{_1[2]=null;_1[3]=null;_1[4]=null}
var _4=this.$4w;if(_4!=null){_1[5]=this.$4c;_1[6]=_4;_1[7]=this.$38}else{_1[5]=null;_1[6]=null;_1[7]=null}
if(this.$49()){_1[7]=(_1[7]||isc.emptyString)+this.$4b}
if(this.$4x!=null){_1[8]=this.$4d;_1[9]=this.$4x;_1[10]=this.$39}else{_1[8]=null;_1[9]=null;_1[10]=null}
if(this.margin!=null)_1[11]=this.$4e;else _1[11]=null;if(isc.Browser.useCSSFilters)_1[12]=null;else _1[12]=this.$987;if(_2)_1[13]=this.$115f;else _1[13]=null;var _5;if(this.overflow!=isc.Canvas.VISIBLE&&(!isc.Browser.isIE||isc.Browser.isStrict||!this.$1240||isc.Browser.version>=10)&&(_5=(this.$115j==null?null:this.$115j()))>0)
{_1[14]=(this.isRTL()?this.$115l:this.$115k);_1[15]=_5;_1[16]=this.$38}else{_1[16]=_1[15]=_1[14]=null}
return _1.join(isc.emptyString)},isc.A.$49=function isc_Button__writeZeroVPadding(){return this.overflow==isc.Canvas.HIDDEN&&!this.isAnimating()&&(isc.Browser.isMoz||isc.Browser.isSafari||isc.Browser.isIE)},isc.A.setBorder=function isc_Button_setBorder(_1){var _2=isc.StatefulCanvas.pushTableBorderStyleToDiv;if(_2)this.border=_1;else this.$4v=_1;this.markForRedraw()},isc.A.setPadding=function isc_Button_setPadding(_1){this.$4w=_1;this.markForRedraw()},isc.A.setBackgroundColor=function isc_Button_setBackgroundColor(_1){this.$4x=_1;this.markForRedraw()},isc.A.$5c=function isc_Button__endTemplate(_1,_2){_1[_2]=this.$4g;_1.length=_2+1;return _1},isc.A.$5b=function isc_Button__iconAtEdge(){return this.icon!=null&&this.iconAlign!=null&&(this.iconAlign==this.iconOrientation)&&(this.iconAlign!=this.align)},isc.A.getIconSpacing=function isc_Button_getIconSpacing(){if(this.icon==null||this.title==null)return 0;return this.iconSpacing},isc.A.fillInCell=function isc_Button_fillInCell(_1,_2,_3){var _4=this.isRTL();var _5=this.getTitleHTML();if(!this.icon){if(isc.Browser.isMoz){var _6=this.reliableMinHeight;_1[_2]=(_6?"<div>":null);_1[_2+1]=_5;_1[_2+2]=(_6?"</div>":null);this.$5c(_1,_2+3)}else{_1[_2]=_5;this.$5c(_1,_2+1)}
return}
var _7=(!_4&&this.iconOrientation!=isc.Canvas.RIGHT)||(_4&&((this.ignoreRTL&&this.iconOrientation!=isc.Canvas.LEFT)||(!this.ignoreRTL&&this.iconOrientation!=isc.Canvas.RIGHT))),_8=this.$5d();if(_3||this.noIconSubtable){var _9=isc.Canvas.spacerHTML(this.getIconSpacing(),1);_1[_2]=(_7?isc.SB.concat(_8,_9,_5):isc.SB.concat(_5,_9,_8));this.$5c(_1,_2+1)
return}
var _10=this.$5b(),_11;if(_10){_11=(this.iconWidth?this.iconWidth:this.iconSize)+(isc.Browser.isBorderBox?this.getIconSpacing():0)}
var _12=this.shouldClipTitle();_1[_2]=(_10?(_12?this.$1153:this.$4i):this.$4h);var _13=this.isPrinting?this.getPrintStyleName():(this.titleStyle?this.getTitleStateName():this.getStateName());var _14=this.$4o;if(!isc.Browser.useCSSFilters)_14+=this.$987;var _15;if(this.align==null){_15=isc.Canvas.CENTER}else if(!_4||this.ignoreRTL){_15=this.align}else{_15=isc.StatefulCanvas.$1333[this.align]}
if(_7){_1[++_2]=this.$4n;_1[++_2]=_13;_1[++_2]=_14;_1[++_2]=!_4?this.$4j:this.$4k;_1[++_2]=this.getIconSpacing();if(_10){_1[++_2]="px;width:";_1[++_2]=_11}
_1[++_2]=this.$4l;_1[++_2]=_8;_1[++_2]=this.$4m;_1[++_2]=this.$4n;_1[++_2]=_13;_1[++_2]=_14;if(_12)_1[++_2]=this.$115f;if(_10){_1[++_2]="' align='";_1[++_2]=_15}
if(_12){_1[++_2]=isc.Button.$151;_1[++_2]=this.$1140()}
_1[++_2]=(this.wrap?this.$4p:this.$4q)
_1[++_2]=_5}else{_1[++_2]=this.$4n;_1[++_2]=_13;_1[++_2]=_14;if(_12)_1[++_2]=this.$115f;if(_10){_1[++_2]="' align='";_1[++_2]=_15}
if(_12){_1[++_2]=isc.Button.$151;_1[++_2]=this.$1140()}
_1[++_2]=(this.wrap?this.$4p:this.$4q)
_1[++_2]=_5;_1[++_2]=this.$4m;_1[++_2]=this.$4n;_1[++_2]=_13;_1[++_2]=_14;_1[++_2]=!_4?this.$4k:this.$4j;_1[++_2]=this.getIconSpacing();if(_10){_1[++_2]="px;width:";_1[++_2]=_11}
_1[++_2]=this.$4l;_1[++_2]=_8}
_1[++_2]=this.$4r;this.$5c(_1,_2+1)},isc.A.$5d=function isc_Button__generateIconImgHTML(_1){if(_1==null){_1=this.$4s;_1.extraStuff=this.$137q}
if(this.iconStyle!=null){var _2=" class='"+this.iconStyle+this.$137r()+this.$ob;if(_1.extraStuff==null)_1.extraStuff=_2;else _1.extraStuff+=_2}
_1.name=this.$116h;_1.width=this.iconWidth||this.iconSize;_1.height=this.iconHeight||this.iconSize;_1.src=this.$5f();return this.imgHTML(_1)},isc.A.$5f=function isc_Button__getIconURL(){var _1=this.state,_2=this.selected,_3=this.getCustomState(),_4=isc.StatefulCanvas;if(_1==_4.STATE_DISABLED&&!this.showDisabledIcon)_1=null;else if(_1==_4.STATE_DOWN&&!this.showDownIcon)_1=null;else if(_1==_4.STATE_OVER&&!this.showRollOverIcon)_1=null;if(!this.showIconState){_1=null;_3=null}
if(_2&&!this.showSelectedIcon)_2=false;var _5=this.showFocusedIcon?this.getFocusedState():null;var _6=this.icon;if(isc.isAn.Object(_6))_6=_6.src;return isc.Img.urlForState(_6,_2,_5,_1,(this.showRTLIcon&&this.isRTL()?"rtl":null),_3)},isc.A.$137r=function isc_Button__getIconStyleSuffix(){var _1=this.state,_2=this.selected?isc.StatefulCanvas.SELECTED:null,_3=this.getCustomState(),_4=isc.StatefulCanvas;if(_1==_4.STATE_DISABLED&&!this.showDisabledIcon)_1=isc.emptyString;else if(_1==_4.STATE_DOWN&&!this.showDownIcon)_1=isc.emptyString;else if(_1==_4.STATE_OVER&&!this.showRollOverIcon)_1=isc.emptyString;if(!this.showIconState){_1=isc.emptyString;_3=null}
if(_2!=null&&!this.showSelectedIcon)_2=null;var _5=this.showFocusedIcon?(this.getFocusedState()?isc.StatefulCanvas.FOCUSED:null):null;var _6=this.$61l(_1,_2,_5,_3);if(this.showRTLIcon&&this.isRTL())_6+=this.$132u;return _6},isc.A.getTitleHTML=function isc_Button_getTitleHTML(_1,_2,_3,_4){var _5=this.invokeSuper(isc.Button,"getTitleHTML",_1,_2,_3,_4);if(!this.padTitle||this.align==isc.Canvas.CENTER)return _5;if(this.align==isc.Canvas.RIGHT)return _5+isc.nbsp;else if(this.align==isc.Canvas.LEFT)return isc.nbsp+_5},isc.A.setWrap=function isc_Button_setWrap(_1){if(this.wrap!=_1){this.wrap=_1;this.markForRedraw("wrapChanged")}},isc.A.getTitleCell=function isc_Button_getTitleCell(){if(!this.getHandle())return null;var _1=this.getHandle().firstChild,_2=_1&&_1.rows!=null?_1.rows[0]:null,_3=_2&&_2.cells!=null?_2.cells[0]:null;return _3},isc.A.getButtonMinHeight=function isc_Button_getButtonMinHeight(){var _1=this.getTitleCell();if(!isc.Browser.isMoz){return _1.scrollHeight+isc.Element.$ym(this.getStateName())}
return _1.firstChild.offsetHeight+isc.Element.$ym(this.getStateName())},isc.A.getPreferredWidth=function isc_Button_getPreferredWidth(){var _1=this.wrap,_2=this.overflow,_3=this.width;this.setWrap(false);this.overflow=isc.Canvas.VISIBLE;this.setWidth(1);this.redrawIfDirty("getPreferredWidth");var _4=this.getScrollWidth();this.setWrap(_1);this.overflow=_2;this.setWidth(_3);return _4},isc.A.getTitle=function isc_Button_getTitle(){if(this.useContents)return this.getContents();return this.title},isc.A.stateChanged=function isc_Button_stateChanged(){if(this.redrawOnStateChange||!this.isDrawn()){return this.Super("stateChanged")}else{var _1=this.isPrinting?this.getPrintStyleName():this.getStateName();if(isc.StatefulCanvas.pushTableBorderStyleToDiv)this.$95v(_1);if(isc.StatefulCanvas.pushTableShadowStyleToDiv){this.$1320(_1)}
if(!this.suppressClassName)this.setClassName(_1);else this.setTableClassName(_1);if(this.icon){this.setImage(this.$116h,this.$5f());if(this.iconStyle!=null)this.getImage(this.$116h).className=this.iconStyle+this.$137r()}
var _2;if(this.titleStyle&&(_2=this.getTitleCell())!=null){var _3=_2.firstChild;if(_3!=null&&_3.tagName==this.$34w){var _4=this.isPrinting?this.getPrintStyleName():this.getTitleStateName();var _5=_3.rows[0].childNodes;for(var i=0;i<_5.length;i++){_5[i].className=_4}}}}},isc.A.setTableClassName=function isc_Button_setTableClassName(_1){if(isc.StatefulCanvas.pushTableBorderStyleToDiv){this.$tk=null}
var _2=this.getTitleCell();if(!_2)return;if(_2.className!=_1)_2.className=_1;if(this.icon&&!this.noIconSubtable&&!this.titleStyle){var _3=_2.firstChild;if(_3!=null&&_3.tagName==this.$34w){var _4=_3.rows[0].children;if(_4!=null){for(var i=0;i<_4.length;i++){if(_4[i]&&_4[i].className!=_1)_4[i].className=_1}}}}
if(this.overflow==isc.Canvas.VISIBLE){this.$t5=true;this.adjustOverflow("table style changed")}},isc.A.getScrollWidth=function isc_Button_getScrollWidth(_1,_2,_3,_4){var _5=this.invokeSuper(isc.Button,"getScrollWidth",_1,_2,_3,_4);if(!_1||!this.isDrawn()||!(isc.Browser.isMoz&&isc.Browser.isMac)){return _5}
var _6=this.getHandle();if(_6){var _7=_6.firstChild.offsetWidth;if(_7>_5){_5=_7}}
return _5},isc.A.setIcon=function isc_Button_setIcon(_1){var _2=this.icon!=null;this.icon=_1;if(this.isDrawn()){if(_2&&(_1!=null))this.setImage(this.$116h,this.$5f());else this.redraw()}},isc.A.setIconStyle=function isc_Button_setIconStyle(_1){this.iconStyle=_1;var _2=this.icon!=null;if(this.isDrawn()&&_2){var _3=this.getImage(this.$116h);if(_3!=null){_3.className=(_1==null?isc.emptyString:_1+this.$137r())}}},isc.A.$47=function isc_Button__cellFocus(){isc.EH.$h1("cFCS");this.focus();isc.EH.$h2()},isc.A.$ur=function isc_Button__updateCanFocus(){this.Super("$ur",arguments);if(this._useNativeTabIndex)this.markForRedraw()},isc.A.$95e=function isc_Button__getBorderHTML(){if(isc.StatefulCanvas.pushTableBorderStyleToDiv){var _1=this.isPrinting?this.getPrintStyleName():this.getStateName();var _2=this.border!=null?";BORDER:"+this.border:"";_2+=isc.StatefulCanvas.$95s(this.border!=null,_1);if(isc.StatefulCanvas.pushTableShadowStyleToDiv){_2+=";"+isc.StatefulCanvas.$132z(_1)}
return _2}
var _2=this.Super("$95e",arguments);if(isc.StatefulCanvas.pushTableShadowStyleToDiv){var _1=this.isPrinting?this.getPrintStyleName():this.getStateName(),_3=isc.StatefulCanvas.$132z(_1);if(_3!=isc.emptyString){_3=";"+_3;_2=_2==null?_3:_2+_3}}
return _2},isc.A.$95v=function isc_Button__applyBorderStyle(_1){var _2=this.getHandle().style,_3=isc.StatefulCanvas.$95q(this.border!=null,_1);_2.border=_2.borderRadius=isc.emptyString;isc.addProperties(_2,_3)},isc.A.$1320=function isc_Button__applyShadowStyle(_1){var _2=this.getHandle().style,_3=isc.StatefulCanvas.$132y(_1);_2.boxShadow=isc.emptyString;isc.addProperties(_2,_3)},isc.A.$95g=function isc_Button__getBorderClassName(){if(isc.StatefulCanvas.pushTableBorderStyleToDiv){return this.getStateName()}
return this.Super("$95g",arguments)});isc.B._maxIndex=isc.C+43;isc.Button.registerStringMethods({getTitle:null});isc.ClassFactory.defineClass("AutoFitButton","Button");isc.A=isc.AutoFitButton.getPrototype();isc.A.autoFit=true;isc.Button.registerStringMethods({iconClick:"element,ID,event",titleHover:""});isc.addGlobal("IButton",isc.Button);isc.defineClass("Img","StatefulCanvas");isc.A=isc.Img;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$5g=[];isc.B.push(isc.A.urlForState=function isc_c_Img_urlForState(_1,_2,_3,_4,_5,_6){if(!_1)return _1;if(!_4&&!_5&&!_2&&!_3&&!_6)return _1;var _7=_1.lastIndexOf(isc.dot),_8=_1.substring(0,_7),_9=_1.substring(_7),_10=this.$5g;_10.length=1;_10[0]=_8;if(_2){_10[1]=isc.$ag;_10[2]=isc.StatefulCanvas.SELECTED}
if(_3){_10[3]=isc.$ag;_10[4]=isc.StatefulCanvas.FOCUSED}
if(_4){_10[5]=isc.$ag;_10[6]=_4}
if(_6){_10[7]=isc.$ag;_10[8]=_6}
if(_5){_10[9]=isc.$ag;_10[10]=_5}
_10[11]=_9;var _11=_10.join(isc.$ad);return _11});isc.B._maxIndex=isc.C+1;isc.A=isc.Img.getPrototype();isc.A.name="main";isc.A.src="blank.gif";isc.A.imageType=isc.Img.STRETCH;isc.A.suppressClassName=false;isc.A.mozOutlineOffset="0px";isc.A.showTitle=false;isc.A.usePNGFix=true;isc.A=isc.Img.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$5h="<TABLE WIDTH=";isc.A.$5i=" HEIGHT=";isc.A.$5j=" BORDER=0 CELLSPACING=0 CELLPADDING=0><TR>";isc.A.$5k="<TD style='line-height:1px' VALIGN=center ALIGN=center>";isc.A.$5l="<TD BACKGROUND=";isc.A.$5m="</TD></TR></TABLE>";isc.A.sizeImageToFitOverflow=false;isc.B.push(isc.A.initWidget=function isc_Img_initWidget(){isc.StatefulCanvas.$b4.initWidget.call(this);this.redrawOnResize=(this.imageType!=isc.Img.STRETCH)},isc.A.setImageType=function isc_Img_setImageType(_1){if(this.imageType==_1)return;this.imageType=_1;this.markForRedraw();this.redrawOnResize=(this.imageType!=isc.Img.STRETCH)},isc.A.getURL=function isc_Img_getURL(){return this.statelessImage?this.src:this.Super("getURL",arguments)},isc.A.getInnerHTML=function isc_Img_getInnerHTML(){var _1=this.sizeImageToFitOverflow?this.getOverflowedInnerWidth():this.getInnerWidth(),_2=this.sizeImageToFitOverflow?this.getOverflowedInnerHeight():this.getInnerHeight(),_3=this.imageType;var _4=this.extraStuff;if(this.imageStyle!=null){var _5=" class='"+this.imageStyle+this.getStateSuffix()+this.$ob;if(_4==null)_4=_5;else _4+=_5}
if(this.altText!=null){var _6=this.altText;_6=" alt='"+_6.replace("'","&apos;")+this.$ob;if(_4==null)_4=_6;else _4+=_6}
if(_3==isc.Img.STRETCH||_3==isc.Img.NORMAL){if(_3==isc.Img.NORMAL){_1=this.imageWidth;_2=this.imageHeight}
return this.imgHTML(this.getURL(),_1,_2,this.name,_4,null,this.activeAreaHTML)}
var _7=isc.SB.create();_7.append(this.$5h,_1,this.$5i,_2,this.$5j);if(_3==isc.Img.TILE){_7.append(this.$5l,this.getImgURL(this.getURL()),this.$oa,isc.Canvas.spacerHTML(_1,_2))}else{_7.append(this.$5k,this.imgHTML(this.getURL(),this.imageWidth,this.imageHeight,this.name,_4,null,this.activeAreaHTML))}
_7.append(this.$5m);return _7.toString()},isc.A.getOverflowedInnerWidth=function isc_Img_getOverflowedInnerWidth(){return this.getVisibleWidth()-this.getHMarginBorder()},isc.A.getOverflowedInnerHeight=function isc_Img_getOverflowedInnerHeight(){return this.getVisibleHeight()-this.getVMarginBorder()},isc.A.$ub=function isc_Img__handleResized(_1,_2){if(this.redrawOnResize!=false||!this.isDrawn())return;var _3=this.getImage(this.name).style;var _4=this.sizeImageToFitOverflow?this.getOverflowedInnerWidth():this.getInnerWidth(),_5=this.sizeImageToFitOverflow?this.getOverflowedInnerHeight():this.getInnerHeight();this.$u9(_3,this.$o6,_4);this.$u9(_3,this.$o5,_5)},isc.A.$10=function isc_Img__labelAdjustOverflow(){this.Super("$10",arguments);if(this.overflow!=isc.Canvas.VISIBLE||!this.sizeImageToFitOverflow)return;var _1=this.getImage(this.name),_2=_1?_1.style:null;if(_2==null)return;var _3=this.getOverflowedInnerWidth(),_4=this.getOverflowedInnerHeight();this.$u9(_2,this.$o6,_3);this.$u9(_2,this.$o5,_4)},isc.A.setSrc=function isc_Img_setSrc(_1){if(_1==null||this.src==_1)return;this.src=_1;this.resetSrc()},isc.A.resetSrc=function isc_Img_resetSrc(){if(!this.isDrawn())return;if(this.imageType!=isc.Img.TILE){this.setImage(this.name,this.getURL())}else{this.markForRedraw("setSrc on tiled image")}},isc.A.stateChanged=function isc_Img_stateChanged(){this.Super("stateChanged");if(!this.statelessImage)this.resetSrc()},isc.A.getHoverHTML=function isc_Img_getHoverHTML(){if(this.altText){if(isc.Browser.isIE)return null;if(this.prompt&&this.prompt!=this.altText){this.logWarn("Img component specified with altText:"+this.altText+" and prompt:"+this.prompt+". Value for 'prompt' attribute will be ignored in favor of 'altText' value.")}
return this.altText}
return this.Super("getHoverHTML",arguments)});isc.B._maxIndex=isc.C+12;isc.ClassFactory.defineClass("StretchImg","StatefulCanvas");isc.A=isc.StretchImg.getPrototype();isc.A.vertical=true;isc.A.capSize=2;isc.A.overflow=isc.Canvas.HIDDEN;isc.A.imageType=isc.Img.STRETCH;isc.A.items=[{name:"start",width:"capSize",height:"capSize"},{name:"stretch",width:"*",height:"*"},{name:"end",width:"capSize",height:"capSize"}];isc.A.ignoreRTL=true;isc.A.autoCalculateSizes=true;isc.A.cacheImageSizes=true;isc.A.suppressClassName=false;isc.A.mozOutlineOffset="0px";isc.A.showTitle=false;isc.A=isc.StretchImg.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$1276=[];isc.A.$5o="<NOBR>";isc.A.$5p="</NOBR>";isc.A.$5q="<BR>";isc.A.$133b="display:block";isc.A.$5h="<TABLE style='font-size:"+(isc.Browser.isFirefox&&isc.Browser.isStrict?0:1)+"px;' CELLPADDING=0 CELLSPACING=0 BORDER=0>";isc.A.$5m="</TABLE>";isc.A.$5s="<TR><TD class='";isc.A.$5t="</TD></TR>";isc.A.$5u="<TD class='";isc.A.$61k="'>";isc.A.$5v="</TD>";isc.A.renderStretchImgInTable=isc.Browser.isMoz||isc.Browser.isIE8Strict;isc.A.oversizeStretchImg=isc.Browser.isMoz&&isc.Browser.isUnix;isc.A.$116b=/^blank[0-9]*$/;isc.B.push(isc.A.initWidget=function isc_StretchImg_initWidget(){isc.StatefulCanvas.$b4.initWidget.call(this);this.redrawOnResize=(this.imageType!=isc.Img.STRETCH)},isc.A.shouldShowLabel=function isc_StretchImg_shouldShowLabel(){if(this.showGrip)return true;return this.Super("shouldShowLabel",arguments)},isc.A.getPart=function isc_StretchImg_getPart(_1){for(var i=0,_3=this.items.length,_4;i<_3;i++){_4=this.items[i];if(_4.name==_1)return _4}
return null},isc.A.getPartNum=function isc_StretchImg_getPartNum(_1){for(var i=0,_3=this.items.length,_4;i<_3;i++){_4=this.items[i];if(_4.name==_1)return i}
return null},isc.A.getSize=function isc_StretchImg_getSize(_1){if(!this.$5x||this.$64y)this.resizeImages();return this.$5x[_1]},isc.A.sizeParts=function isc_StretchImg_sizeParts(){var _1=(this.vertical?this.$o5:this.$o6),_2=this.items,_3=_2.length,_4=this.$1276,_5=arguments.length;_4.length=_3+_5;var _6;var i=_3,_8=0,_9=true;for(var j=0;j<_5;++i,++j){_6=arguments[j];var _11=_4[i]=!_6?0:_6[_1];if(_11==null||isc.isAn.emptyString(_11)){_9=false}else if(isc.isA.Number(_11)){_8+=_11}else if(_11==isc.star||_11.indexOf(isc.Canvas.$o9)>=0){_9=false}else if(isc.isA.Number(this[_11])){_8+=_4[i]=this[_11]}else{var _12=parseInt(_11);if(isc.isA.Number(_12)&&_12>=0){_8+=_12;_4[i]=_12}else{_9=false}}}
if(_9){_4.length=0;return _8}
for(i=0;i<_3;++i){_6=_2[i];if(!_6||!_6[_1])continue;_4[i]=_6[_1]}
isc.Canvas.applyStretchResizePolicy(_4,this.getImgLength(),1,true,this);_8=0;i=_3;for(var j=0;j<_5;++i,++j){_8+=_4[i]}
_4.length=0;return _8},isc.A.$10=function isc_StretchImg__labelAdjustOverflow(_1,_2,_3,_4){if(this.overflow==isc.Canvas.VISIBLE)this.$ub(null,null,true);this.invokeSuper(isc.StretchImg,"$10",_1,_2,_3,_4)},isc.A.setOverflow=function isc_StretchImg_setOverflow(_1,_2,_3,_4){var _5=false;if(this.overflow==isc.Canvas.VISIBLE&&((this.getScrollWidth()>this.getWidth())||(this.getScrollHeight()>this.getHeight())))
{_5=true}
this.invokeSuper(isc.StretchImg,"setOverflow",_1,_2,_3,_4);if(_5)this.$ub(null,null,true)},isc.A.$ub=function isc_StretchImg__handleResized(_1,_2,_3){if(this.redrawOnResize!=false||!this.isDrawn()){this.$64y=true;return}
if(this.$493)return;this.resizeImages();var _4=this.items,_5=_3||(isc.isA.Number(_1)&&_1!=0),_6=_3||(isc.isA.Number(_2)&&_2!=0),_7=(this.vertical&&_5)||(!this.vertical&&_6),_8=(this.vertical&&_6)||(!this.vertical&&_5);for(var i=0;i<_4.length;i++){var _10=this.getImage(_4[i].name);if(_10==null)continue;var _11=this.oversizeStretchImg&&(this.vertical?_4[i].height==isc.star:_4[i].width==isc.star),_12=_11?_10.parentNode:null;if(_7){var _13=this.vertical?this.getWidth():this.getHeight();this.$u9(_10.style,this.vertical?this.$o6:this.$o5,_13);if(_11&&_12!=null){this.$u9(_12.style,this.vertical?this.$o6:this.$o5,_13)}}
if(_8){var _13=this.$5x[i];if(_11&&_12!=null){this.$u9(_12.style,this.vertical?this.$o5:this.$o6,_13);_13+=2}
this.$u9(_10.style,this.vertical?this.$o5:this.$o6,_13)}}},isc.A.resizeImages=function isc_StretchImg_resizeImages(){if(this.$493)return;var _1=(this.vertical?this.$o5:this.$o6),_2=this.items,_3=_2.length,_4=this.$5x;if(_4==null)_4=this.$5x=[];_4.length=_3;for(var i=0;i<_3;i++){var _6=_2[i];if(!_6||!_6[_1])continue;_4[i]=_6[_1]}
isc.Canvas.applyStretchResizePolicy(_4,this.getImgLength(),1,true,this)},isc.A.getInnerHTML=function isc_StretchImg_getInnerHTML(){var _1=this.items,_2=_1.length,_3=this.vertical;if(this.$64y||!this.$5x||(this.autoCalculateSizes&&!this.cacheImageSizes))this.resizeImages();delete this.$64y;var _4=this.$5x,_5=(_3?this.getImgBreadth():this.getImgLength()),_6=(_3?this.getImgLength():this.getImgBreadth()),_7=isc.SB.create();if(this.logIsDebugEnabled(this.$n3)){this.logDebug("drawing with imageType: '"+this.imageType+"' and sizes "+this.$5x,"drawing")}
var _8=!_3&&(this.ignoreRTL&&this.isRTL());if(this.imageType==isc.Img.TILE){_7.append("<TABLE CELLSPACING=0 CELLPADDING=0 BORDER=0 WIDTH=",_5," HEIGHT=",_6,"><TBODY>",(_3?"":"<TR>"));for(var j=0;j<_2;j++){var i=_8?_2-j-1:j;var _11=_4[i];if(_11>0){var _12=_1[i],_13=this.getImgURL(this.$5z(_12));if(_3){_7.append("<TR><TD WIDTH=",_5," HEIGHT=",_11,_12.name?(" NAME=\""+this.getCanvasName()+_12.name+"\""):null," BACKGROUND=\"",_13,"\" class=\"",this.getItemStyleName(_12),"\">",isc.Canvas.spacerHTML(1,_11),"</TD></TR>")}else{_7.append("<TD WIDTH=",_11," HEIGHT=",_6,_12.name?(" NAME=\""+this.getCanvasName()+_12.name+"\""):null," BACKGROUND=\"",_13,"\" class=\"",this.getItemStyleName(_12),"\">",isc.Canvas.spacerHTML(_11,1),"</TD>")}}}
_7.append((_3?"":"</TR>"),"</TABLE>")}else if(this.imageType==isc.Img.CENTER){_7.append("<TABLE CELLSPACING=0 CELLPADDING=0 BORDER=0 WIDTH=",_5," HEIGHT=",_6,"><TBODY>",(_3?"":"<TR VALIGN=center>"));for(var j=0;j<_2;j++){var i=_8?_2-j-1:j;var _11=_4[i];if(_11>0){var _12=_1[i],_13=this.$5z(_12);if(_3){_7.append("<TR VALIGN=center><TD WIDTH=",_5," HEIGHT=",_11," ALIGN=center"," class=\"",this.getItemStyleName(_12),"\">",this.imgHTML(_13,null,null,_12.name),"</TD></TR>")}else{_7.append("<TD WIDTH=",_11," HEIGHT=",_6," ALIGN=center"," class=\"",this.getItemStyleName(_12),"\">",this.imgHTML(_13,null,null,_12.name),"</TD>")}}}
_7.append((_3?"":"</TR>"),"</TABLE>")}else{var _14=this.renderStretchImgInTable;if(_14)_7.append(this.$5h);else if(!_3)_7.append(this.$5o);var _15=[" class=",null," "];for(var j=0;j<_2;j++){var i=_8?_2-j-1:j;var _16=(j==0);var _17=(j==_2-1);var _11=_4[i];if(_11>0){var _12=_1[i],_13=this.$5z(_12),_18;var _18;if(!_14){var _19=this.getItemStyleName(_12);if(_19){_15[1]=_19;_18=_15.join(isc.emptyString)}else{_18=isc.emptyString}}
if(!_3){if(_14){_7.append(_16?this.$5s:this.$5u);_7.append(this.getItemStyleName(_12));_7.append(this.$61k)}
var _20=_11,_21=(this.oversizeStretchImg&&(_12.width==isc.star));if(_21){_7.append("<div style='overflow:hidden;width:",_11,"px;height:",_6,"px;'>")
_20=_11+2}
_7.append(this.imgHTML(_13,_20,_6,_12.name,_18));if(_21){_7.append("</div>")}
if(_14)_7.append(_17?this.$5t:this.$5v)}else{if(_14){_7.append(this.$5s);_7.append(this.getItemStyleName(_12));_7.append(this.$61k)}
var _22=_11,_21=(this.oversizeStretchImg&&(_12.width==isc.star));if(_21){_7.append("<div style='overflow:hidden;height:",_11,"px;width:",_5,"px;'>")
_22=_11+2}
_7.append(this.imgHTML({src:_13,width:_5,height:_22,name:_12.name,extraStuff:_18,extraCSSText:isc.Browser.isDOM?this.$133b:null}));if(_21){_7.append("</div>")}
if(_14)_7.append(this.$5t);else if(!isc.Browser.isDOM&&i<_2-1)_7.append(this.$5q)}}}
if(_14)_7.append(this.$5m)
else if(!_3)_7.append(this.$5p)}
return _7.toString()},isc.A.getItemStyleName=function isc_StretchImg_getItemStyleName(_1){var _2;if(isc.isA.String(_1.baseStyleKey)&&isc.isAn.Object(_1.baseStyleMap)){_2=_1.baseStyleMap[this[_1.baseStyleKey]]}
if(_2==null)_2=_1.baseStyle||this.itemBaseStyle;if(!_2)return null;var _3=_1.state?_1.state:this.getState(),_4=_1.selected!=null?_1.selected:this.selected,_5=this.showFocused&&!this.showFocusedAsOver&&!this.isDisabled()?(_1.focused!=null?_1.focused:this.focused):false;return _2+this.$61l(_3,_4?isc.StatefulCanvas.SELECTED:null,_5?isc.StatefulCanvas.FOCUSED:null)},isc.A.$5z=function isc_StretchImg__getItemURL(_1){if(_1.src)return _1.src;if(this.$116b.test(_1.name))return isc.Canvas.$wz;return this.getURL(_1.name,(_1.state?_1.state:this.getState()),(_1.selected!=null?_1.selected:this.selected),(this.showFocused&&!this.showFocusedAsOver&&!this.isDisabled()?(_1.focused!=null?_1.focused:this.focused):false))},isc.A.setState=function isc_StretchImg_setState(_1,_2){if(_2==null){var _3=this.items.clearProperty("state"),_4=this.state!=_1;this.Super("setState",[_1]);if(_3&&!_4)this.stateChanged()}else{var _5=this.getPart(_2);if(_5){if(_5.state==_1)return;_5.state=_1}
this.stateChanged()}},isc.A.stateChanged=function isc_StretchImg_stateChanged(_1){this.Super("stateChanged");if(!this.isDrawn())return;if(this.isDirty())return;if(this.imageType==isc.Img.TILE||this.$5x==null){this.markForRedraw("setState (tiled images)")}else{if(isc.Browser.isWin2k&&isc.Browser.isIE){this.markForRedraw("Win2k IE image state change");return}
var _2=0;for(var i=0;i<this.items.length;i++){if(this.$5x[i]>0){var _4=this.items[i];if(!_1||_4.name==_1){if(!this.$116b.test(_4.name)){this.setImage(_4.name,this.$5z(_4))}
var _5=this.getImage(_4.name);if(_5){if(this.renderStretchImgInTable){_5=_5.parentNode}
_5.className=this.getItemStyleName(_4)}}}else{_2++}}}},isc.A.setSrc=function isc_StretchImg_setSrc(_1){if(_1==null||this.src==_1)return;this.src=_1;this.markForRedraw()},isc.A.setItems=function isc_StretchImg_setItems(_1){this.items=_1==null?[]:_1.duplicate();this.markForRedraw()},isc.A.setIgnoreRTL=function isc_StretchImg_setIgnoreRTL(_1){this.ignoreRTL=!!_1;this.markForRedraw()},isc.A.inWhichPart=function isc_StretchImg_inWhichPart(){if(this.vertical){var _1=this.inWhichPosition(this.$5x,this.getOffsetY())}else{var _2=(this.ignoreRTL||!this.isRTL())?isc.Canvas.LTR:isc.Canvas.RTL;var _1=this.inWhichPosition(this.$5x,this.getOffsetX(),_2)}
var _3=this.items[_1];return(_3?_3.name:null)});isc.B._maxIndex=isc.C+19;isc.defineClass("Label","Button");isc.A=isc.Label.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.align=isc.Canvas.LEFT;isc.A.wrap=true;isc.A.showTitle=false;isc.A.height=null;isc.A.width=null;isc.A.overflow="visible";isc.A.canFocus=false;isc.A.styleName="normal";isc.A.baseStyle=null;isc.A.cursor="default";isc.A.showRollOver=false;isc.A.showFocus=false;isc.A.showDown=false;isc.A.showDisabled=false;isc.A.useContents=true;isc.B.push(isc.A.setStyleName=function isc_Label_setStyleName(_1){this.setBaseStyle(_1)});isc.B._maxIndex=isc.C+1;isc.ClassFactory.defineClass("Progressbar","StretchImg");isc.A=isc.Progressbar.getPrototype();isc.A.percentDone=0;isc.A.length=100;isc.A.breadth=20;isc.A.vertical=false;isc.A.skinImgDir="images/Progressbar/";isc.A.src="[SKIN]progressbar.gif";isc.A.cacheImageSizes=false;isc.A.backgroundColor="CCCCCC";isc.A.verticalItems=[{name:"v_empty_end",size:3},{name:"v_empty_stretch",size:0},{name:"v_empty_start",size:3},{name:"v_end",size:3},{name:"v_stretch",size:0},{name:"v_start",size:3}];isc.A.horizontalItems=[{name:"h_start",size:3},{name:"h_stretch",size:0},{name:"h_end",size:3},{name:"h_empty_start",size:3},{name:"h_empty_stretch",size:0},{name:"h_empty_end",size:3}];isc.A=isc.Progressbar.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.initWidget=function isc_Progressbar_initWidget(){if(this.vertical){this.setWidth(this.breadth);this.setHeight(this.length);this.items=this.verticalItems}else{this.setWidth(this.length);this.setHeight(this.breadth);this.items=this.horizontalItems}
this.Super(this.$oc)},isc.A.resizeImages=function isc_Progressbar_resizeImages(){var _1=this.getLength(),_2=this.items,_3=this.$5x=[],_4=this.percentDone;if(this.vertical){_3[0]=(_4<100?_2[0].size:0);_3[2]=(_4<100?_2[2].size:0);_3[3]=(_4>0?_2[3].size:0);_3[5]=(_4>0?_2[5].size:0)}else{_3[0]=(_4>0?_2[0].size:0);_3[2]=(_4>0?_2[2].size:0);_3[3]=(_4<100?_2[3].size:0);_3[5]=(_4<100?_2[5].size:0)}
_1-=_3[0]+_3[2]+_3[3]+_3[5];if(this.vertical){_3[4]=Math.ceil(_1*_4/100);_3[1]=Math.floor(_1*(100-_4)/100)}else{_3[1]=Math.ceil(_1*_4/100);_3[4]=Math.floor(_1*(100-_4)/100)}},isc.A.setPercentDone=function isc_Progressbar_setPercentDone(_1){if(this.percentDone==_1)return;_1=Math.min(100,(Math.max(0,_1)));this.percentDone=_1;if(this.isDrawn())this.markForRedraw("percentDone updated");this.percentChanged()},isc.A.percentChanged=function isc_Progressbar_percentChanged(){},isc.A.getLength=function isc_Progressbar_getLength(){return this.vertical?this.getHeight():this.getWidth()},isc.A.getBreadth=function isc_Progressbar_getBreadth(){return this.vertical?this.getWidth():this.getHeight()},isc.A.setLength=function isc_Progressbar_setLength(_1){this.length=_1;this.vertical?this.setHeight(_1):this.setWidth(_1)},isc.A.setBreadth=function isc_Progressbar_setBreadth(_1){this.breadth=_1;this.vertical?this.setWidth(_1):this.setHeight(_1)});isc.B._maxIndex=isc.C+8;isc.ClassFactory.defineClass("Rangebar","Progressbar");isc.A=isc.Rangebar.getPrototype();isc.A.value=0;isc.A.minValue=0;isc.A.maxValue=99;isc.A.title="";isc.A.vertical=true;isc.A.showTitle=true;isc.A.showRange=true;isc.A.showValue=true;isc.A.allLabelDefaults={width:50,height:20,spacing:5};isc.A.titleLabelDefaults={width:100,className:"rangebarTitle"};isc.A.rangeLabelDefaults={className:"rangebarRange"};isc.A.valueLabelDefaults={className:"rangebarValue"};isc.A.forceOverrides={$jo:false,autoDraw:false};isc.A.flipValues=false;isc.A=isc.Rangebar.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.initWidget=function isc_Rangebar_initWidget(){this.Super(this.$oc);this.titleLabelDefaults=isc.addProperties({},this.allLabelDefaults,this.titleLabelDefaults);this.valueLabelDefaults=isc.addProperties({},this.allLabelDefaults,this.valueLabelDefaults);this.rangeLabelDefaults=isc.addProperties({},this.allLabelDefaults,this.rangeLabelDefaults);if(this.showRange){this.$50=this.addPeer(this.$51("min"));this.$52=this.addPeer(this.$51("max"))}
if(this.showValue)this._valueLabel=this.addPeer(this.$53());if(this.showTitle)this._titleLabel=this.addPeer(this.$54());this.setValue(this.value)},isc.A.resized=function isc_Rangebar_resized(_1,_2){this.$55()},isc.A.$55=function isc_Rangebar__adjustPeerPositions(){if(this.showRange&&this.$50&&this.$52){var _1=this.$56("min");var _2=this.$56("max");this.$50.moveTo(_1.left,_1.top);this.$52.moveTo(_2.left,_2.top)}
if(this.showValue&&this._valueLabel){var _3=this.$57();this._valueLabel.moveTo(_3.left,_3.top)}
if(this.showTitle&&this._titleLabel){var _3=this.$58();this._titleLabel.moveTo(_3.left,_3.top)}},isc.A.$51=function isc_Rangebar__createRangeLabel(_1){var _2=this.$56(_1);return isc.Label.newInstance({ID:this.getID()+"_"+_1+"Label",contents:(_1=="min"?(this.minValueLabel?this.minValueLabel:this.minValue):(this.maxValueLabel?this.maxValueLabel:this.maxValue))},this.rangeLabelDefaults,_2,this.forceOverrides)},isc.A.$56=function isc_Rangebar__computeRangeLabelProperties(_1){var _2={},_3=this.rangeLabelDefaults,_4=((_1=="min"&&!this.flipValues)||(_1="max"&&this.flipValues));if(this.vertical){_2.left=this.left+this.width+_3.spacing,_2.align=isc.Canvas.LEFT;if(_4){_2.top=this.getTop()+this.getHeight()-_3.height;_2.valign=isc.Canvas.BOTTOM}else{_2.top=this.getTop();_2.valign=isc.Canvas.TOP}}else{_2.top=this.getTop()+this.getHeight()+_3.spacing,_2.valign=isc.Canvas.TOP;if(_4){_2.left=this.getLeft();_2.align=isc.Canvas.LEFT}else{_2.left=this.getLeft()+this.getWidth()-_3.width;_2.align=isc.Canvas.RIGHT}}
return _2},isc.A.$54=function isc_Rangebar__createTitleLabel(){var _1=this.$58();return isc.Label.newInstance({ID:this.getID()+"_titleLabel",contents:this.title},this.titleLabelDefaults,_1,this.forceOverrides)},isc.A.$58=function isc_Rangebar__computeTitleLabelProperties(){var _1={};var _2=this.titleLabelDefaults;if(this.vertical){_1.left=this.left+this.width/2-_2.width/2;_1.top=this.top-_2.height-_2.spacing;_1.align=isc.Canvas.CENTER}else{_1.left=this.left-_2.width-_2.spacing;_1.top=this.top+this.getHeight()/2-_2.height/2;_1.align=isc.Canvas.RIGHT}
return _1},isc.A.$53=function isc_Rangebar__createValueLabel(){var _1=this.$57();return isc.Label.newInstance({ID:this.getID()+"_valueLabel",contents:this.value,mouseUp:"return false;",observes:[{source:this,message:"valueChanged",action:"observer.setContents(this.getValue())"}]},this.valueLabelDefaults,_1,this.forceOverrides)},isc.A.$57=function isc_Rangebar__computeValueLabelProperties(){var _1={};var _2=this.valueLabelDefaults;if(this.vertical){_1.left=this.left-_2.width-_2.spacing;_1.top=this.top+this.getHeight()/2-_2.height/2;_1.align=isc.Canvas.RIGHT;_1.valign=isc.Canvas.CENTER}else{_1.left=this.left+this.width/2-_2.width/2;_1.top=this.top-_2.height-_2.spacing;_1.align=isc.Canvas.CENTER;_1.valign=isc.Canvas.BOTTOM}
return _1},isc.A.getValue=function isc_Rangebar_getValue(){return this.value},isc.A.setValue=function isc_Rangebar_setValue(_1){if(this.value==_1)return;if(_1>this.maxValue)_1=this.maxValue;else if(_1<this.minValue)_1=this.minValue;this.value=_1;this.percentDone=100*(this.value-this.minValue)/(this.maxValue-this.minValue);this.markForRedraw();this.valueChanged()},isc.A.valueChanged=function isc_Rangebar_valueChanged(){});isc.B._maxIndex=isc.C+12;isc.ClassFactory.defineClass("Toolbar","Layout");isc.A=isc.Toolbar.getPrototype();isc.A.vertical=false;isc.A.overflow=isc.Canvas.HIDDEN;isc.A.height=20;isc.A.buttonConstructor="Button";isc.A.canReorderItems=false;isc.A.canResizeItems=false;isc.A.canRemoveItems=false;isc.A.reorderOnDrop=true;isc.A.tabWithinToolbar=true;isc.A.allowButtonReselect=false;isc.A.buttonDefaults={click:function(){this.Super("click",arguments);this.parentElement.itemClick(this,this.parentElement.getButtonNumber(this))},doubleClick:function(){this.Super("doubleClick",arguments);this.parentElement.itemDoubleClick(this,this.parentElement.getButtonNumber(this))},setSelected:function(){var _1=this.isSelected();this.Super("setSelected",arguments);if(this.parentElement&&(this.parentElement.allowButtonReselect||_1!=this.isSelected()))
{if(this.isSelected())this.parentElement.buttonSelected(this);else this.parentElement.buttonDeselected(this)}},dragAppearance:isc.EventHandler.NONE,setTabIndex:function(_1){this.Super("setTabIndex",arguments);this.$59=null},setAccessKey:function(_1,_2){if(!_2)this.$6a=null;this.Super("setAccessKey",[_1])},focusChanged:function(_1){if(this.hasFocus&&this.parentElement.$6b){this.parentElement.$6b(this)}},$kf:function(_1,_2){if(this.parentElement.$kf){this.parentElement.$kf(_1,_2,this)}}};isc.A=isc.Toolbar.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.draw=function isc_Toolbar_draw(_1,_2,_3,_4){if(isc.$cv)arguments.$cw=this;if(!this.readyToDraw())return this;if(!this.$6c)this.setButtons();this.invokeSuper(isc.Toolbar,"draw",_1,_2,_3,_4)},isc.A.keyPress=function isc_Toolbar_keyPress(){var _1=this.ns.EH.lastEvent.keyName;if(!this.tabWithinToolbar){if((this.vertical&&_1=="Arrow_Up")||(!this.vertical&&_1=="Arrow_Left")){this.$6d(false);return false}else if((this.vertical&&_1=="Arrow_Down")||(!this.vertical&&_1=="Arrow_Right")){this.$6d();return false}}
return this.Super("keyPress",arguments)},isc.A.$6d=function isc_Toolbar__focusInNextButton(_1,_2){_1=(_1!=false);var _3=(_2!=null?_2:this.getFocusButtonIndex());if(_3==null)_3=(_1?-1:this.buttons.length);_3+=_1?1:-1;while(_3>=0&&_3<this.buttons.length){var _4=this.getMembers()[_3];if(_4.$kk()){_4.focus();return true}
_3+=_1?1:-1}
return false},isc.A.getFocusButtonIndex=function isc_Toolbar_getFocusButtonIndex(){var _1=this.getButtons(),_2;for(var i=0;i<_1.length;i++){if(_1[i].hasFocus){_2=i;break}}
return _2},isc.A.$kf=function isc_Toolbar__focusInNextTabElement(_1,_2,_3){if(!isc.EH.targetIsMasked(this,_2)){var _4=_3?this.members.indexOf(_3):null;if(!this.tabWithinToolbar){if(_1&&_4==null){var _5=this.$6g;if(_5!=null)return this.fb.focus()}}else if(this.$6d(_1,_4))return}
return this.Super("$kf",arguments)},isc.A.$kk=function isc_Toolbar__canFocus(_1,_2,_3,_4){var _5=this.members;if(_5&&_5.length>0){for(var i=0;i<_5.length;i++){if(_5[i].$kk())return true}}
return this.invokeSuper(isc.Toolbar,"$kk",_1,_2,_3,_4)},isc.A.setFocus=function isc_Toolbar_setFocus(_1){if(!this.$vl())return;var _2=this.getFocusButtonIndex();if(!_1){if(_2!=null&&this.members)this.members[_2].setFocus(false)}else{if(_2!=null)return;if(this.$6g)this.$6g.setFocus(true);else this.$6d()}},isc.A.focusAtEnd=function isc_Toolbar_focusAtEnd(_1){if(!this.tabWithinToolbar){return this.Super("focusAtEnd",arguments)}
_1=!!_1;var _2=(_1?-1:this.buttons.length);this.$6d(_1,_2)},isc.A.$6e=function isc_Toolbar__setButtonTabIndex(_1,_2){if(!_1.$59&&(_1.$vy()!=null||_1.$vz()!=null))
{_1.$rp()}
_1.$59=true;if(_1.tabIndex!=_2)_1.$vk(_2,false)},isc.A.updateMemberTabIndex=function isc_Toolbar_updateMemberTabIndex(){},isc.A.$v2=function isc_Toolbar__slotChildrenIntoTabOrder(){},isc.A.$6f=function isc_Toolbar__setButtonAccessKey(_1,_2){_1.$6a=true;_1.setAccessKey(_2,true)},isc.A.setupButtonFocusProperties=function isc_Toolbar_setupButtonFocusProperties(){var _1=this.$6g;if((!_1||!isc.isA.Canvas(_1)||_1.visibility==isc.Canvas.HIDDEN)&&this.buttons.length>0)
{var _2;for(var i=0;i<this.members.length;i++){if(isc.isA.Canvas(this.members[i])&&this.members[i].visibility!=isc.Canvas.HIDDEN)
{_2=this.members[i];break}}
this.$6b(_2)
_1=this.$6g}
var _4;if(this.tabWithinToolbar){_4=this.getTabIndex()}else{_4=-1}
var _5=this.getButtons();for(var i=0;i<_5.length;i++){var _6=_5[i];if(_6!=_1&&(_6.tabIndex==null||_6.$sp))
{this.$6e(_6,_4)}}},isc.A.$6b=function isc_Toolbar__updateFocusButton(_1){if(this.$6g==_1){return}
if(_1.accessKey!=this.accessKey&&(_1.accessKey==null||_1.$6a))
{this.$6f(_1,this.accessKey)}
if(_1.tabIndex==null||_1.$sp||_1.$59)
{this.$6e(_1,this.getTabIndex())}
var _2=this.$6g;if(_2!=null&&(_2.tabIndex==null||_2.$sp||_2.$59))
{if(!this.tabWithinToolbar)this.$6e(_2,-1);if(_2.accessKey!=null&&_2.$6a)
{this.$6f(_2,null)}}
this.$6g=_1},isc.A.$vk=function isc_Toolbar__setTabIndex(_1,_2,_3,_4){this.invokeSuper(isc.Toolbar,"$vk",_1,_2,_3,_4);if(this.tabWithinToolbar){var _5=this.getButtons();for(var i=0;i<_5.length;i++){if(_5[i].tabIndex==null||_5[i].$sp||_5[i].$59)
this.$6e(_5[i],this.getTabIndex())}}else{var _7=this.$6g;if(_7!=null){this.$6g=null;this.$6b(_7)}}},isc.A.setAccessKey=function isc_Toolbar_setAccessKey(_1){this.Super("setAccessKey",arguments);var _2=this.$6g;if(_2!=null){this.$6g=null;this.$6b(_2)}},isc.A.getLength=function isc_Toolbar_getLength(_1,_2,_3,_4){if(this.innerWidth!=null)return this.innerWidth;return this.invokeSuper(isc.Toolbar,"getLength",_1,_2,_3,_4)},isc.A.setButtons=function isc_Toolbar_setButtons(_1){this.$6c=true;if(_1)this.buttons=_1;if(this.members==null)this.members=[];var _2=this.members.duplicate();for(var i=0;i<_2.length;i++){var _4=_2[i];if(!this.buttons.contains(_4)){_2[i].destroy()}}
if(this.buttons==null)this.buttons=[];var _5=[];for(var i=0;i<this.buttons.length;i++){var _6=this.buttons[i];if(!isc.isA.Canvas(_6))_6=this.makeButton(_6);_5[_5.length]=_6;if(isc.isA.StatefulCanvas(_6)){var _7=_6.getActionType();if(_7==isc.StatefulCanvas.RADIO){if(_6.selected)this.lastSelectedButton=_6}}}
this.addMembers(_5,0);if(this.canResizeItems)this.setResizeRules();this.setupButtonFocusProperties()},isc.A.buttonShouldHiliteAccessKey=function isc_Toolbar_buttonShouldHiliteAccessKey(){if(this.$6a)return false;return this.hiliteAccessKey},isc.A.makeButton=function isc_Toolbar_makeButton(_1){_1.width=_1.width||null;_1.height=_1.height||null;_1.canDrag=this.canReorderItems||this.canDragSelectItems||this.canRemoveItems;_1.canDragResize=(_1.canDragResize!=null?_1.canDragResize&&this.canResizeItems:this.canResizeItems);_1.canAcceptDrop=this.canAcceptDrop;_1.canDrop=this.canRemoveItems;_1.shouldHiliteAccessKey=this.buttonShouldHiliteAccessKey;return this.$6h(_1,null)},isc.A.$6h=function isc_Toolbar__makeItem(_1,_2){var _3=(_1.buttonConstructor?_1.buttonConstructor:this.buttonConstructor);_3=this.ns.ClassFactory.getClass(_3);var _4=_3.newInstance({autoDraw:false},this.buttonDefaults,this.buttonProperties,_1,_2);if(!isc.isA.StatefulCanvas(_4))return _4;var _5;if((_4.getActionType()==isc.StatefulCanvas.RADIO&&_4.radioGroup===_5)||_4.defaultRadioGroup!=null){var _6=_4.defaultRadioGroup!=null?_4.defaultRadioGroup:this.getID();_4.addToRadioGroup(_6)}
return _4},isc.A.addButtons=function isc_Toolbar_addButtons(_1,_2){if(_1==null)return;if(!isc.isAn.Array(_1))_1=[_1];if(!this.$6c)this.setButtons();_1.removeEvery(null);var _3;if(isc.isAn.Array(_2)){if(_2.length!=_1.length){this.logWarn("addButtons passed "+_1.length+" buttons with "+_2.length+" discrete positions specified. Ignoring.");return}
var _4={};for(var i=0;i<_2.length;i++){_4[_2[i]]=_1[i]}
_2.sort();_3=[];var _6={buttons:[],position:_2[0]},_7=0;for(var i=0;i<_2.length;i++){var _8=_2[i],_9=_4[_8];_6.buttons.add(_9);var _10=_2[i+1]
if(_10==null||_10!=_8+1){_3[_7]=_6;_7++
if(_10!=null)_6={buttons:[],position:_10}}}
for(var i=0;i<_3.length;i++){this.buttons.addListAt(_3[i].buttons,_3[i].position)}}else{this.buttons.addListAt(_1,_2)}
var _11=this.instantRelayout;this.instantRelayout=false;var _12;if(_3==null){_12=this.$82x(_1);this.addMembers(_12,_2)}else{for(var i=0;i<_3.length;i++){var _13=this.$82x(_3[i].buttons);this.addMembers(_13,_3[i].position);if(_12==null)_12=_13;else _12.addList(_13)}}
if(_11){this.instantRelayout=true;if(this.$3n)this.$3n=false;this.reflow("addButtons")}
if(this.canResizeItems)this.setResizeRules();_12.map("show")},isc.A.$82x=function isc_Toolbar__createButtonInstances(_1){var _2=[];for(var i=0;i<_1.length;i++){var _4=_1[i],_5=isc.isA.Canvas(_4)?_4:this.makeButton(_4);_2[i]=_5}
return _2},isc.A.removeButtons=function isc_Toolbar_removeButtons(_1){if(_1==null)return;if(!isc.isAn.Array(_1))_1=[_1];var _2=[];for(var i=0;i<_1.length;i++){_1[i]=this.buttons[this.getButtonNumber(_1[i])];if(_1[i]==null){this.logWarn("removeButtons(): unable to find button for item number "+i+" in the array passed in.  Skipping this item.");_1.removeItem(i);i-=1;continue}
_2[i]=this.getButton(this.buttons.indexOf(_1[i]))}
var _4=this.buttons;_4.removeList(_1);this.removeMembers(_2)},isc.A.getButton=function isc_Toolbar_getButton(_1){_1=this.getButtonNumber(_1);return this.getMember(_1)},isc.A.getButtonNumber=function isc_Toolbar_getButtonNumber(_1){if(isc.isAn.Object(_1)&&!isc.isA.Canvas(_1))return this.buttons.indexOf(_1);return this.getMemberNumber(_1)},isc.A.getButtons=function isc_Toolbar_getButtons(){return this.members},isc.A.setCanResizeItems=function isc_Toolbar_setCanResizeItems(_1){if(this.canResizeItems==_1)return;this.canResizeItems=_1;var _2=this.getButtons();if(!_2)return;for(var i=0;i<_2.length;i++){var _4=_2[i];_4.canDragResize=(_4.canDragResize!=null?_4.canDragResize&&_1:_1)}
this.setResizeRules()},isc.A.setResizeRules=function isc_Toolbar_setResizeRules(){if(!this.members)return;var _1=this.isRTL();var _2,_3,_4;if(this.vertical){_2={"T":isc.Canvas.ROW_RESIZE,"B":isc.Canvas.ROW_RESIZE};_3=["T","B"];_4=["B"]}else{_2={"L":isc.Canvas.COL_RESIZE,"R":isc.Canvas.COL_RESIZE};_3=["L","R"];if(!_1){_4=["R"]}else{_4=["L"]}}
var _5=false;for(var i=0;i<this.members.length;i++){var _7=this.members[i];if(!_7.canDragResize){_7.resizeFrom=_7.edgeCursorMap=null;_5=true}else{if(_5||i==0)
{_7.resizeFrom=_4}else{_7.resizeFrom=_3}
_7.edgeCursorMap=_2;_5=false}}},isc.A.getSelectedButton=function isc_Toolbar_getSelectedButton(){return this.lastSelectedButton},isc.A.selectButton=function isc_Toolbar_selectButton(_1){if(!this.members)return;var _2=this.getButton(_1);if(_2&&isc.isA.StatefulCanvas(_2))_2.select()},isc.A.deselectButton=function isc_Toolbar_deselectButton(_1){var _2=this.getButton(_1);if(_2)_2.deselect()},isc.A.buttonSelected=function isc_Toolbar_buttonSelected(_1){if(_1.getActionType()==isc.Button.RADIO){this.lastSelectedButton=_1}},isc.A.buttonDeselected=function isc_Toolbar_buttonDeselected(_1){},isc.A.itemClick=function isc_Toolbar_itemClick(_1,_2){},isc.A.itemDoubleClick=function isc_Toolbar_itemDoubleClick(_1,_2){},isc.A.getMouseOverButtonIndex=function isc_Toolbar_getMouseOverButtonIndex(){var _1=this.vertical?this.getOffsetY():this.getOffsetX();if(this.isRTL()||this.align==isc.Canvas.RIGHT){var _2=this.getInnerWidth()-this.memberSizes.sum();if(_2>0)_1-=_2}
return this.inWhichPosition(this.memberSizes,_1,this.getTextDirection())},isc.A.prepareForDragging=function isc_Toolbar_prepareForDragging(){var _1=this.ns.EH;var _2=_1.lastEvent.target;while(_2.dragTarget){_2=_2.dragTarget}
var _3=_1.dragOperation;if(((this.canResizeItems&&_3=="dragResize")||(this.canReorderItems&&_3=="drag"))&&this.members.contains(_2))
{if(_3=="dragResize"){if((this.vertical&&["T","B"].contains(_1.resizeEdge))||(!this.vertical&&["L","R"].contains(_1.resizeEdge)))
{_1.dragOperation="dragResizeMember";return}}else if(_3=="drag"){_1.dragOperation="dragReorder";return}}
return this.Super("prepareForDragging",arguments)},isc.A.getDropPosition=function isc_Toolbar_getDropPosition(){var _1=this.getMouseOverButtonIndex();var _2=this.ns.EH,_3=(this.reorderStyle=="explorer"||(_2.dropTarget&&_2.dropTarget.parentElement==this));if(_3&&_1>=0){var _4=this.memberSizes[_1],_5=(this.vertical?this.getOffsetY():this.getOffsetX());_5-=this.memberSizes.slice(0,_1).sum();var _6=_1;if(_5>_4/2)_1++}
var _7=this.members.length,_8=(_3?_7:_7-1);var _9=this.dragStartPosition||0,_10=_2.dragTarget&&_2.dragTarget.parentElement==this;if(_1==-2&&this.containsEvent()){_1=_8}
if(_1<0||_1>_8)_1=_9;else if(_10&&(this.members[_1]&&this.members[_1].canReorder==false))
{_1=_9}
return _1},isc.A.dragReorderStart=function isc_Toolbar_dragReorderStart(){var _1=this.ns.EH,_2=_1.dragTarget;if(_2.canReorder==false)return false;if(_2.showDown)_2.setState(isc.StatefulCanvas.STATE_DOWN);this.dragStartPosition=this.getButtonNumber(_2);return _1.STOP_BUBBLING},isc.A.dragReorderMove=function isc_Toolbar_dragReorderMove(){var _1=this.ns.EH,_2=_1.dragTarget,_3=this.dragStartPosition,_4=this.getDropPosition();this.dragCurrentPosition=_4;var _5=this.members.duplicate();_5.slide(_3,_4);this.stackMembers(_5,null,false);return _1.STOP_BUBBLING},isc.A.dragReorderStop=function isc_Toolbar_dragReorderStop(){var _1=this.ns.EH,_2=_1.dragTarget,_3=this.dragStartPosition,_4=this.dragCurrentPosition;_2.setState(isc.StatefulCanvas.STATE_UP);if(_4==_3)return false;if(this.reorderOnDrop)this.reorderItem(_4,_3);if(this.itemDragReordered)this.itemDragReordered(_3,_4);return _1.STOP_BUBBLING},isc.A.dragStop=function isc_Toolbar_dragStop(){var _1=this.ns.EH,_2=_1.dragTarget,_3=this.dragStartPosition;_2.setState(isc.StatefulCanvas.STATE_UP);this.hideDropLine();return _1.STOP_BUBBLING},isc.A.reorderItem=function isc_Toolbar_reorderItem(_1,_2){this.reorderItems(_1,_1+1,_2)},isc.A.reorderItems=function isc_Toolbar_reorderItems(_1,_2,_3){this.buttons.slideRange(_1,_2,_3);this.reorderMembers(_1,_2,_3);this.setResizeRules()},isc.A.dragResizeMemberStart=function isc_Toolbar_dragResizeMemberStart(){var _1=this.ns.EH,_2=_1.dragTarget,_3=this.getButtonNumber(_2),_4=this.isRTL();var _5=false;if((!_4&&_1.resizeEdge=="L")||(_4&&_1.resizeEdge=="R")){_5=true;_3--;_1.resizeEdge=(_4?"L":"R")}else if(_1.resizeEdge=="T"){_5=true;_3--;_1.resizeEdge="B"}
if(_3<0||_3>=this.members.length||_2==null)return false;_1.dragTarget=_2=this.members[_3];_2.$6i=_2.canDrop;_2.canDrop=false;this.$6j=_3;if(_2.showDown)_2.setState(isc.StatefulCanvas.STATE_DOWN);if(_5){var _6=this.members[_3+1];if(_6)_6.setState(isc.StatefulCanvas.STATE_UP)}
return _1.STOP_BUBBLING},isc.A.dragResizeMemberMove=function isc_Toolbar_dragResizeMemberMove(){var _1=this.ns.EH,_2=_1.dragTarget;_2.resizeToEvent();_2.redrawIfDirty("dragResize");return _1.STOP_BUBBLING},isc.A.dragResizeMemberStop=function isc_Toolbar_dragResizeMemberStop(){var _1=this.ns.EH,_2=_1.dragTarget;_2.canDrop=_2.$6i;_2.setState(isc.StatefulCanvas.STATE_UP);_2.resizeToEvent();var _3=(this.vertical?_2.getHeight():_2.getWidth());this.resizeItem(this.$6j,_3);if(this.itemDragResized)this.itemDragResized(this.$6j,_3);return _1.STOP_BUBBLING},isc.A.resizeItem=function isc_Toolbar_resizeItem(_1,_2){var _3=this.members[_1];if(this.vertical)_3.setHeight(_2);else _3.setWidth(_2)});isc.B._maxIndex=isc.C+49;isc.Toolbar.registerStringMethods({itemClick:"item,itemNum",itemDragResized:"itemNum,newSize",itemDragReordered:"itemNum,newPosition"});isc.defineClass("ImgButton","Img");isc.A=isc.ImgButton.getPrototype();isc.A.clipTitle=true;isc.A.showClippedTitleOnHover=false;isc.A.$115g=true;isc.A.baseStyle="imgButton";isc.A.showDown=true;isc.A.showFocused=true;isc.A.showRollOver=true;isc.A.showTitle=false;isc.A.cursor=isc.Button.$b4.cursor;isc.A.src="[SKIN]/ImgButton/button.png";isc.A.canFocus=true;isc.A.overflow=isc.Canvas.HIDDEN;isc.A=isc.ImgButton.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.getCanHover=function isc_ImgButton_getCanHover(_1,_2,_3){return this.$115g||this.invokeSuper(isc.ImgButton,"getCanHover",_1,_2,_3)},isc.A.titleClipped=function isc_ImgButton_titleClipped(){return(this.label==null?false:this.label.titleClipped())},isc.A.defaultTitleHoverHTML=function isc_ImgButton_defaultTitleHoverHTML(){return(this.label==null?null:this.label.defaultTitleHoverHTML())},isc.A.titleHoverHTML=function isc_ImgButton_titleHoverHTML(_1){return _1},isc.A.handleHover=function isc_ImgButton_handleHover(_1,_2,_3){if(this.canHover==null&&this.prompt)return this.invokeSuper(isc.ImgButton,"handleHover",_1,_2,_3);if(!this.showClippedTitleOnHover||!this.titleClipped()){if(this.canHover)return this.invokeSuper(isc.ImgButton,"handleHover",_1,_2,_3);else return}
if(this.titleHover&&this.titleHover()==false)return;var _4=this.titleHoverHTML(this.defaultTitleHoverHTML());if(_4!=null&&!isc.isAn.emptyString(_4)){var _5=this.$wc();isc.Hover.show(_4,_5,null,this)}});isc.B._maxIndex=isc.C+5;isc.ImgButton.registerStringMethods({titleHover:""});isc.defineClass("StretchImgButton","StretchImg");isc.A=isc.StretchImgButton.getPrototype();isc.A.clipTitle=true;isc.A.showClippedTitleOnHover=false;isc.A.$115g=true;isc.A.useEventParts=true;isc.A.baseStyle="stretchImgButton";isc.A.showDown=true;isc.A.showFocused=true;isc.A.showRollOver=true;isc.A.showTitle=true;isc.A.hiliteAccessKey=true;isc.A.src="[SKIN]/button/button.png";isc.A.vertical=false;isc.A.capSize=12;isc.A.autoFitDirection="horizontal";isc.A.cursor=isc.Button.$b4.cursor;isc.A.canFocus=true;isc.A=isc.StretchImgButton.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.getCanHover=function isc_StretchImgButton_getCanHover(_1,_2,_3){return this.$115g||this.invokeSuper(isc.StretchImgButton,"getCanHover",_1,_2,_3)},isc.A.titleClipped=function isc_StretchImgButton_titleClipped(){return(this.label==null?false:this.label.titleClipped())},isc.A.defaultTitleHoverHTML=function isc_StretchImgButton_defaultTitleHoverHTML(){return(this.label==null?null:this.label.defaultTitleHoverHTML())},isc.A.titleHoverHTML=function isc_StretchImgButton_titleHoverHTML(_1){return _1},isc.A.handleHover=function isc_StretchImgButton_handleHover(_1,_2,_3){if(this.canHover==null&&this.prompt)return this.invokeSuper(isc.StretchImgButton,"handleHover",_1,_2,_3);if(!this.showClippedTitleOnHover||!this.titleClipped()){if(this.canHover)return this.invokeSuper(isc.StretchImgButton,"handleHover",_1,_2,_3);else return}
if(this.titleHover&&this.titleHover()==false)return;var _4=this.titleHoverHTML(this.defaultTitleHoverHTML());if(_4!=null&&!isc.isAn.emptyString(_4)){var _5=this.$wc();isc.Hover.show(_4,_5,null,this)}});isc.B._maxIndex=isc.C+5;isc.StretchImgButton.registerStringMethods({iconClick:"",titleHover:""})
isc.defineClass("ToolStrip","Layout");isc.A=isc.ToolStrip.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.height=20;isc.A.defaultWidth=250;isc.A.styleName="toolStrip";isc.A.vertical=false;isc.A.resizeBarClass="ToolStripResizer";isc.A.resizeBarSize=14;isc.A.separatorClass="ToolStripSeparator";isc.A.separatorSize=8;isc.A.showGroupTitle=true;isc.A.groupTitleAlign="center";isc.A.groupTitleOrientation="top";isc.A.groupConstructor="ToolStripGroup";isc.A.formWrapperConstructor="DynamicForm";isc.A.formWrapperDefaults={showTitle:false,numCols:1,overflow:"visible",width:1,height:1};isc.B.push(isc.A.initWidget=function isc_ToolStrip_initWidget(_1,_2,_3,_4,_5,_6){this.members=this.$62r(this.members);this.invokeSuper(isc.ToolStrip,this.$oc,_1,_2,_3,_4,_5,_6);if(this.vertical&&this.verticalStyleName!=null){this.setStyleName(this.verticalStyleName)}},isc.A.$62r=function isc_ToolStrip__convertMembers(_1){var _2=isc.ClassFactory.getClass(this.separatorClass);if(_1==null)return null;var _3=[];for(var i=0;i<_1.length;i++){var m=_1[i];if(m=="separator"){var _6=_2.createRaw();_6.autoDraw=false;_6.vertical=!this.vertical;if(this.vertical){_6.height=this.separatorSize}else{_6.width=this.separatorSize}
_6.completeCreation();_3.add(isc.SGWTFactory.extractFromConfigBlock(_6))}else if(m=="resizer"&&i>0){_1[i-1].showResizeBar=true}else if(m=="starSpacer"){_3.add(isc.LayoutSpacer.create({width:"*"}))}else if(isc.isA.ToolStripResizer(m)&&i>0){_1[i-1].showResizeBar=true;m.destroy()}else{if(isc.isA.ToolStripSeparator(m)){var _6=m;_6.vertical=!this.vertical;_6.setSrc(this.vertical?_6.hSrc:_6.vSrc);if(this.vertical){_6.setHeight(this.separatorSize)}else{_6.setWidth(this.separatorSize)}
_6.markForRedraw()}else if(isc.isA.ToolStripGroup(m)){if(!m.showTitle)m.setShowTitle(this.showGroupTitle);if(!m.titleAlign)m.setTitleAlign(this.groupTitleAlign);if(!m.titleOrientation)m.setTitleOrientation(this.groupTitleOrientation)}else{m=this.createCanvas(m)}
_3.add(m)}}
return _3},isc.A.addMembers=function isc_ToolStrip_addMembers(_1,_2,_3,_4,_5){if(!_1)return;if(!isc.isAn.Array(_1))_1=[_1];var _6=_1[0],_7=isc.isA.ToolStripResizer(_6);if(_6=="resizer"||_7){_2=_2||this.members.length;var _8=Math.min(_2,this.members.length)-1;if(_8>0){var _9=this.getMember(_8);if(_9!=null){_9.showResizeBar=true;this.reflow()}}
var _10=_1.shift();if(_7)_10.destroy()}
_1=this.$62r(_1);return this.invokeSuper(isc.ToolStrip,"addMembers",_1,_2,_3,_4,_5)},isc.A.addToolStripGroup=function isc_ToolStrip_addToolStripGroup(_1,_2){if(!_1)return null;if(!isc.isA.Class(_1)){var _3=this.groupConstructor;if(isc.isA.String(_3))_3=isc.ClassFactory.getClass(this.groupConstructor);_1=_3.create(_1)}
if(!_1||!isc.isA.ToolStripGroup(_1))return null;if(_1.showTitle==null)_1.setShowTitle(this.showGroupTitle);if(!_1.titleAlign)_1.setTitleAlign(this.groupTitleAlign);if(!_1.titleOrientation)_1.setTitleOrientation(this.groupTitleOrientation);this.addMember(_1,_2);return _1},isc.A.addFormItem=function isc_ToolStrip_addFormItem(_1,_2,_3){if(isc.isA.Canvas(_1)){this.addMember(_1,_3);return _1}
var _4=this.createAutoChild("formWrapper",_2);_4.setItems([_1]);this.addMember(_4,_3);return _4});isc.B._maxIndex=isc.C+5;isc.defineClass("ToolStripSeparator","Img");isc.A=isc.ToolStripSeparator.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.skinImgDir="images/ToolStrip/";isc.A.vSrc="[SKIN]separator.png";isc.A.hSrc="[SKIN]hseparator.png";isc.A.layoutAlign="center";isc.B.push(isc.A.initWidget=function isc_ToolStripSeparator_initWidget(){if(isc.isA.Img(this))this.src=this.vertical?this.vSrc:this.hSrc;this.Super("initWidget",arguments)});isc.B._maxIndex=isc.C+1;isc.defineClass("ToolStripButton","StretchImgButton");isc.A=isc.ToolStripButton.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.showTitle=true;isc.A.showRollOver=true;isc.A.showDown=true;isc.A.labelHPad=6;isc.A.labelVPad=0;isc.A.autoFit=true;isc.A.src="[SKIN]/ToolStrip/button/button.png";isc.A.capSize=3;isc.A.height=22;isc.B.push(isc.A.initWidget=function isc_ToolStripButton_initWidget(){if(!this.title)this.iconSpacing=0;this.Super("initWidget",arguments)},isc.A.setTitle=function isc_ToolStripButton_setTitle(_1){if(!_1){this.iconSpacing=0;if(this.label)this.label.iconSpacing=0}
this.Super("setTitle",arguments)});isc.B._maxIndex=isc.C+2;isc.defineClass("ToolStripGroup","VLayout");isc.A=isc.ToolStripGroup.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.styleName="toolStripGroup";isc.A.layoutMargin=2;isc.A.membersMargin=1;isc.A.layoutAlign="top";isc.A.autoDraw=false;isc.A.height=1;isc.A.width=1;isc.A.overflow="visible";isc.A.labelLayoutDefaults={_constructor:"HLayout",width:"100%",height:22};isc.A.labelConstructor="Label";isc.A.labelDefaults={width:"100%",height:18,autoDraw:true,wrap:false,overflow:"visible"};isc.A.titleStyle="toolStripGroupTitle";isc.A.autoSizeToTitle=true;isc.A.bodyConstructor="HLayout";isc.A.bodyDefaults={width:1,height:"*",overflow:"visible",membersMargin:2,autoDraw:false};isc.A.columnLayoutDefaults={_constructor:"VLayout",width:1,membersMargin:2,height:"100%",overflow:"visible",autoDraw:false,numRows:0,addMember:function(_1,_2){this.Super("addMember",arguments);if(_1.rowSpan==null)_1.rowSpan=1;var _3=_1.rowSpan*this.creator.rowHeight+((_1.rowSpan-1)*this.membersMargin);if(_1.orientation=="vertical"){_1.rowSpan=this.maxRows;_3=(_1.rowSpan*this.creator.rowHeight)+((this.maxRows-1)*this.membersMargin)}
_1.setHeight(_3);this.numRows+=_1.rowSpan;if(this.numRows>this.maxRows)this.numRows=this.maxRows},removeMember:function(_1){this.Super("removeMember",arguments);if(_1.rowSpan==null)_1.rowSpan=1;this.numRows-=_1.rowSpan;_1.markForDestroy();_1=null}};isc.A.numRows=1;isc.A.rowHeight=26;isc.A.defaultColWidth="*";isc.A.titleHeight=18;isc.A.autoHideOnLastRemove=false;isc.B.push(isc.A.initWidget=function isc_ToolStripGroup_initWidget(){this.Super("initWidget",arguments);var _1=this.showTitle!=false&&this.showLabel!=false;if(_1){this.addAutoChild("labelLayout",{height:this.titleHeight});var _2=isc.addProperties({},this.titleProperties||{},{styleName:this.titleStyle,height:this.titleHeight,maxHeight:this.titleHeight,align:this.titleAlign,contents:this.title,autoDraw:false});if(this.autoSizeToTitle==false)_2.overflow="hidden";this.addAutoChild("label",_2);this.labelLayout.addMember(this.label);if(this.showTitle==false)this.labelLayout.hide();this.addMember(this.labelLayout)}
this.addAutoChild("body",{_constructor:this.bodyConstructor,height:this.numRows*this.rowHeight,resized:function(){var _3=this.getVisibleWidth();if(this.parentElement.labelLayout)this.parentElement.labelLayout.setWidth(_3);if(this.parentElement.label)this.parentElement.label.setWidth(_3)}});this.addMember(this.body,_1?(this.titleOrientation=="bottom"?0:1):0);if(this.controls){this.addControls(this.controls,false)}},isc.A.setTitle=function isc_ToolStripGroup_setTitle(_1){if(this.label)this.label.setContents(_1)},isc.A.setShowTitle=function isc_ToolStripGroup_setShowTitle(_1){this.showTitle=_1;if(!_1&&this.labelLayout&&this.labelLayout.isVisible())this.labelLayout.hide();else if(_1&&this.labelLayout&&!this.labelLayout.isVisible())this.labelLayout.show()},isc.A.setTitleAlign=function isc_ToolStripGroup_setTitleAlign(_1){this.titleAlign=_1;if(this.label)this.label.setAlign(this.titleAlign)},isc.A.setTitleOrientation=function isc_ToolStripGroup_setTitleOrientation(_1){this.titleOrientation=_1;if(this.label&&this.labelLayout){if(this.titleOrientation=="top"){this.removeMember(this.labelLayout);this.addMember(this.labelLayout,0)}else if(this.titleOrientation=="bottom"){this.removeMember(this.labelLayout);this.addMember(this.labelLayout,1)}}},isc.A.addColumn=function isc_ToolStripGroup_addColumn(_1,_2){var _3;if(_1===null||_1===_3){_1=this.body.members.length}
var _4=this.defaultColWidth;if(this.colWidths&&this.colWidths[_1]!=null)_4=this.colWidths[_1];var _5=this.createAutoChild("columnLayout",{maxRows:this.numRows,numRows:0,width:_4,height:this.body.getVisibleHeight()-1});this.body.addMember(_5,_1);if(_2)_5.addMembers(_2);return _5},isc.A.getAvailableColumn=function isc_ToolStripGroup_getAvailableColumn(_1){var _2=this.body.members;if(_2&&_2.length>0){for(var i=0;i<_2.length;i++){var _4=_2[i];if(_4.numRows<_4.maxRows)return _4}}
if(_1!=false)return this.addColumn();return null},isc.A.getControlColumn=function isc_ToolStripGroup_getControlColumn(_1){var _2=this.body.members;if(_2&&_2.length>0){for(var i=_2.length-1;i>=0;i--){if(_2[i].members.contains(_1))return _2[i]}}
return null},isc.A.setControls=function isc_ToolStripGroup_setControls(_1,_2){if(this.controls){this.removeAllControls()}
this.addControls(_1,_2)},isc.A.addControls=function isc_ToolStripGroup_addControls(_1,_2){if(!_1)return;if(!isc.isAn.Array(_1))_1=[_1];for(var i=0;i<_1.length;i++){this.addControl(_1[i],null,_2)}},isc.A.addControl=function isc_ToolStripGroup_addControl(_1,_2,_3){if(!_1)return null;var _4;if(_2===null||_2===_4||_2>=this.numRows)_2=this.numRows-1;var _5=this.getAvailableColumn(true);if(!this.controls)this.controls=[];if(_3!=false)this.controls.add(_1);_5.addMember(_1,_2);_5.reflowNow()},isc.A.removeControl=function isc_ToolStripGroup_removeControl(_1){_1=isc.isAn.Object(_1)?_1:this.getMember(_1);if(!_1)return null;var _2=this.getControlColumn(_1);if(_2){_2.removeMember(_1);this.controls.remove(_1);if(_2.members.length<=1){_2.hide();this.body.removeMember(_2);_2.markForDestroy();_2=null}}
if(this.body.members.length==0&&this.autoHideOnLastRemove){this.hide()}},isc.A.removeAllControls=function isc_ToolStripGroup_removeAllControls(){if(!this.controls||this.controls.length==0)return null;for(var i=this.controls.length-1;i>=0;i--){var _2=this.controls[i];_2.hide();this.removeControl(_2);_2.markForDestroy();_2=null}},isc.A.resized=function isc_ToolStripGroup_resized(){this.$87v()},isc.A.draw=function isc_ToolStripGroup_draw(){this.Super("draw",arguments);this.$87v()},isc.A.redraw=function isc_ToolStripGroup_redraw(){this.Super("redraw",arguments);this.$87v()},isc.A.$87v=function isc_ToolStripGroup__updateLabel(){var _1=this.getVisibleWidth(),_2=this.layoutMargin,_3=this.getVisibleWidth()-(this.layoutMargin*3);if(this.labelLayout)this.labelLayout.setWidth(_3);if(this.label)this.label.setWidth(_3)});isc.B._maxIndex=isc.C+17;isc.defineClass("IconButton","Button");isc.A=isc.IconButton.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.width=1;isc.A.overflow="visible";isc.A.height=1;isc.A.padding=3;isc.A.autoDraw=false;isc.A.usePartEvents=true;isc.A.orientation="horizontal";isc.A.rowSpan=1;isc.A.baseStyle="iconButton";isc.A.showMenuIcon=false;isc.A.menuIconSrc="[SKINIMG]/Menu/submenu_down.png";isc.A.menuIconWidth=14;isc.A.menuIconHeight=13;isc.A.menuIconStyleCSS="vertical-align:middle; border:1px solid transparent; -moz-border-radius: 3px; -webkit-border-radius: 3px; -khtml-border-radius: 3px; border-radius: 3px;";isc.A.menuConstructor=isc.Menu;isc.A.align=null;isc.A.valign=null;isc.A.showButtonTitle=true;isc.A.iconSize=16;isc.A.largeIconSize=32;isc.A.showMenuIconOver=true;isc.A.showMenuIconDisabled=true;isc.B.push(isc.A.initWidget=function isc_IconButton_initWidget(){if(this.orientation=="vertical"){this.align=this.align||"center";this.valign=this.valign||"top"}else{this.align=this.align||"left";this.valign=this.valign||"center"}
this.$1089=this.align;this.$109a=this.valign;this.$87r=this.title;this.$87s=this.icon;this.Super("initWidget",arguments)},isc.A.setIcon=function isc_IconButton_setIcon(_1){this.$87s=_1;this.setTitle(this.$87r)},isc.A.setLargeIcon=function isc_IconButton_setLargeIcon(_1){this.largeIcon=_1;this.setTitle(this.$87r)},isc.A.setTitle=function isc_IconButton_setTitle(_1){this.$87r=_1;this.Super("setTitle",arguments);this.getTitle();this.align=this.$1089;this.valign=this.$109a;this.redraw()},isc.A.getTitle=function isc_IconButton_getTitle(){var _1=this.orientation=="vertical",_2=this.showIcon==false?null:(_1?this.largeIcon||this.$87s:this.$87s),_3=(_1?this.largeIconSize:this.iconSize),_4=this.showButtonTitle?this.$87r:"";if(_2=="")_2=null;if(_2&&this.showDisabledIcon&&this.isDisabled()){var _5=_2.lastIndexOf("."),_6=_5>0?_2.substring(0,_5)+"_Disabled"+_2.substring(_5):_2+"_Disabled";_2=_6}
var _7="vertical-align:middle;"+(_1?"margin-bottom:5px;":""),_8=this.menuIconStyleCSS+(_1?"margin-top:4px;":""),_9=_2?this.imgHTML({src:_2,width:_3,height:_3,extraCSSText:_7,extraStuff:" eventpart='icon'"}):null;var _10=null;if(this.showMenuIcon){var _11=this.$1117();_10=this.menuIcon=this.showMenuIcon?this.imgHTML({src:_11,width:this.menuIconWidth,height:this.menuIconHeight,name:"menuIcon",extraCSSText:_8,extraStuff:" eventpart='menuIcon'"}):null;}
this.icon=null;var _12=_4,_4=_9||"";if(this.orientation=="vertical"){if(this.showButtonTitle)_4+="<br>"+_12;if(this.showMenuIcon&&_10)_4+="<br>"+_10}else{this.valign="center";if(this.showButtonTitle)
_4+="&nbsp;<span style='vertical-align:middle'>"+_12+"</span>";if(this.showMenuIcon&&_10)_4+="&nbsp;"+_10}
this.title=_4;return _4},isc.A.$1117=function isc_IconButton__getMenuIconURL(){var _1=this.state,_2=this.selected,_3=this.getCustomState(),_4=isc.StatefulCanvas;if(_1==_4.STATE_DISABLED&&!this.showMenuIconDisabled)_1=null;else if(_1==_4.STATE_OVER&&(!this.showMenuIconOver||!this.showingMenuButtonOver))
_1=null;var _5=null;var _6=this.menuIconSrc;return isc.Img.urlForState(_6,_2,_5,_1,null,_3)},isc.A.setHandleDisabled=function isc_IconButton_setHandleDisabled(){this.Super("setHandleDisabled",arguments);this.setTitle(this.$87r)},isc.A.setDisabled=function isc_IconButton_setDisabled(_1){this.Super("setDisabled",arguments);this.setTitle(this.$87r)},isc.A.mouseOut=function isc_IconButton_mouseOut(){this.Super("mouseOut",arguments);if(this.showingMenuButtonOver)this.menuIconMouseOut()},isc.A.menuIconClick=function isc_IconButton_menuIconClick(){return true},isc.A.iconClick=function isc_IconButton_iconClick(){return true},isc.A.click=function isc_IconButton_click(){if(this.showMenuOnClick)this.showMenu()},isc.A.menuIconMouseMove=function isc_IconButton_menuIconMouseMove(){if(!this.showMenuIconOver||this.showingMenuButtonOver)return;var _1=this.getImage("menuIcon");if(_1){this.showingMenuButtonOver=true;this.setTitle(this.$87r)}},isc.A.menuIconMouseOut=function isc_IconButton_menuIconMouseOut(){if(!this.showMenuIconOver)return;var _1=this.getImage("menuIcon");if(_1){this.showingMenuButtonOver=false;this.setTitle(this.$87r)}});isc.B._maxIndex=isc.C+14;isc.defineClass("IconMenuButton","IconButton");isc.A=isc.IconMenuButton.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.usePartEvents=true;isc.A.showMenuIcon=true;isc.A.menu=null;isc.B.push(isc.A.menuIconClick=function isc_IconMenuButton_menuIconClick(){this.showMenu();return false},isc.A.showMenu=function isc_IconMenuButton_showMenu(){if(isc.isA.String(this.menu))this.menu=window[this.menu];if(!isc.isA.Menu(this.menu))this.$36d(this.menu);if(!isc.isA.Menu(this.menu))return false;var _1=this.menu;_1.$8h();var _2=this.getPageLeft();var _3=this.getPageTop()+this.getVisibleHeight()+1;_1.placeNear(_2,_3);_1.show(this.menuAnimationEffect);return true},isc.A.$36d=function isc_IconMenuButton__createMenu(_1){if(!_1)return;_1.autoDraw=false;var _2=this.menuConstructor||isc.Menu;this.menu=_2.create(_1)});isc.B._maxIndex=isc.C+3;isc.defineClass("RibbonBar","ToolStrip");isc.A=isc.RibbonBar.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.groupConstructor="RibbonGroup";isc.B.push(isc.A.addGroup=function isc_RibbonBar_addGroup(_1,_2){return this.addToolStripGroup(_1,_2)});isc.B._maxIndex=isc.C+1;isc.defineClass("RibbonGroup","ToolStripGroup");isc.A=isc.RibbonGroup.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.newControlConstructor="IconButton";isc.A.newControlDefaults={};isc.B.push(isc.A.createControl=function isc_RibbonGroup_createControl(_1,_2){var _3=this.createAutoChild("newControl",_1);return this.addControl(_3,_2)});isc.B._maxIndex=isc.C+1;isc.defineClass("SectionStack","VLayout");isc.addGlobal("ListBar",isc.SectionStack);isc.A=isc.SectionStack.getPrototype();isc.A.overflow="hidden";isc.A.styleName="sectionStack";isc.A.sectionHeaderClass="SectionHeader";isc.A.headerHeight=20;isc.A.printHeaderStyleName="printHeader";isc.A.canResizeSections=true;isc.A.canResizeStack=true;isc.A.canReorderSections=false;isc.A.scrollSectionIntoView=true;isc.A.useGlobalSectionIDs=false;isc.A.animateMemberEffect="wipe";isc.A.visibilityMode="mutex";isc.A.canCollapseAll=true;isc.A.forceFill=true;isc.A.itemIndent=0;isc.A.showExpandControls=true;isc.A=isc.SectionStack.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.sectionNameIndex=0;isc.B.push(isc.A.initWidget=function isc_SectionStack_initWidget(){this.Super(this.$oc);if(this.canReorderSections)this.canAcceptDrop=true;if(this.animateSections!=null)this.animateMembers=this.animateSections;if(this.groups!=null&&this.sections==null)this.sections=this.groups;var _1=this.sections;this.sections=[];this.addSections(_1,null,true)},isc.A.$95u=function isc_SectionStack__doPopOutDragMember(_1,_2){var _3=this.sectionForItem(_2);if(_3){var _4=this.getMemberNumber(_2)-(this.getMemberNumber(_3)+1);this.addItem(_3,_1,_4)}else{this.addMember(_1,this.getMemberNumber(_2),true)}},isc.A.replaceMember=function isc_SectionStack_replaceMember(_1,_2){var _3=this.getMemberNumber(_1),_4=this.sectionForItem(_1);if(!_4){return this.Super("replaceMember",arguments)}
var _5=this.instantRelayout;this.instantRelayout=false;this.$3q();var _6=this.getMemberNumber(_4);this.removeItem(_4,_1);this.addItem(_4,_2,(_3-_6)-1);this.instantRelayout=_5;if(_5)this.reflowNow()},isc.A.$735=function isc_SectionStack__dragIsSectionReorder(){if(this.canReorderSections){var _1=this.ns.EH.dragTarget;return(this.sections!=null&&this.sections.contains(_1))}
return false},isc.A.willAcceptDrop=function isc_SectionStack_willAcceptDrop(){if(this.$735()){var _1=this.ns.EH.dragTarget;return(_1.canReorder!=false)}
return this.Super("willAcceptDrop",arguments)},isc.A.getStackDropPosition=function isc_SectionStack_getStackDropPosition(){var _1=this.vertical?this.getOffsetY():this.getOffsetX();if(_1<0)return 0;var _2=this.vertical?this.$td:this.$tb,_3=0;for(var i=0;i<this.members.length;i++){var _5=this.members[i];if(!_5)continue;var _6=_5.isSectionHeader?_5:this.sectionForItem(_5),_7=this.sectionIsExpanded(_6),_8=_5.isVisible()&&_7;if(_8||(_5==_6)){if(_1<(_2+(_9/2))){if(_5.canDropBefore===false)return false;return i}
var _9=this.memberSizes[_3];_2+=_9+this.membersMargin+this.getMemberGap(_5);_3++}}
return this.members.length},isc.A.getDropPosition=function isc_SectionStack_getDropPosition(_1,_2){if(!this.$735()){if(this.editingOn){return this.getEditModeDropPosition(_1)}else{return this.getStackDropPosition()}}
var _3=this.vertical?this.getOffsetY():this.getOffsetX();if(_3<0)return 0;var _4=this.vertical?this.$td:this.$tb,_5=this.sections[0],_6=0,_7=0,_8=0;while(_8<this.members.length){var _9=0,_10=this.members[_8],_11=0;while(_10!=null&&(_10==_5||(_5.items&&_5.items.contains(_10)))){if(_10.isVisible()){_9+=this.memberSizes[_7];_11=this.membersMargin+this.getMemberGap(_10);_9+=_11;_7++}
_8+=1
_10=this.members[_8]}
if(_3<(_4+((_9-_11)/2))){if(_5&&_5.canDropBefore===false)return false;return this.members.indexOf(_5)}
_4+=_9;_6+=1;_5=this.sections[_6]}
return this.members.length},isc.A.drop=function isc_SectionStack_drop(){if(!this.willAcceptDrop())return;var _1=this.getDropPosition(),_2=this.getDropComponent(isc.EventHandler.getDragTarget(),_1),_3=this.sections&&this.sections.contains(_2),_4=_2;if(!_3){if(this.canDropComponents){_4=this.sectionForMemberIndex(_1);var _5=_1-(this.getMemberNumber(_4)+1);this.addItem(_4,_2,_5)}else{this.addMember(_2,_1)}}else if(_3&&this.canReorderSections){var _6=this.sections.indexOf(_4),_7;var _8=this.members[_1];if(_8==null){_7=this.sections.length}else{for(var i=0;i<this.sections.length;i++){if(_8==this.sections[i]||(this.sections[i].items&&this.sections[i].items.contains(_8)))
{_7=i}}}
var _10=_7>_6;if(_10){_7-=1}
if(_7==_6){return}
this.sections.slide(_6,_7);var _11=this.members.indexOf(_4),_12=_11+1,_13=_4.items||[];for(var i=0;i<_13.length;i++){if(this.members.contains(_13[i]))_12+=1}
if(_10)_1-=(_12-_11);this.logInfo("Drag reorder of sections - section:"+_4+" moved to:"+_7+" - reordering members from "+_11+" to "+_12+" target position:"+_1);this.reorderMembers(_11,_12,_1)}},isc.A.addItem=function isc_SectionStack_addItem(_1,_2,_3){var _4=this.createCanvas(_2);if(!isc.isA.Canvas(_4)){this.logWarn("addItem passed:"+this.echo(_2)+" cannot be resolved to a Canvas - ignoring");return}
var _5=this.getSection(_1);if(_3==null)_3=0;if(_3>=_5.items.length)_3=_5.items.length;if(_4.resizeable==null){if(!this.canResizeSections)_4.resizeable=false;else if(_1.resizeable!=null){_4.resizeable=_1.resizeable}}
_5.items.addAt(_4,_3);if(this.isDrawn()&&this.sectionIsExpanded(_5)){var _6=1+this.members.indexOf(_5)+_3;this.addMember(_4,_6)}else if(_4.isDrawn()){_4.clear();_4.deparent()}},isc.A.removeItem=function isc_SectionStack_removeItem(_1,_2){if(!_1)_1=this.sectionForItem(_2);if(!_1)return;var _3=this.getSection(_1);_3.items.remove(_2);if(this.members.contains(_2))this.removeMember(_2,_2.$3v)},isc.A.setSectionProperties=function isc_SectionStack_setSectionProperties(_1,_2){var _1=this.getSection(_1);if(_1!=null){if(isc.isA.Canvas(_1)){_1.setProperties(_2)}else{isc.addProperties(_1,_2)}}},isc.A.removeChild=function isc_SectionStack_removeChild(_1,_2){isc.Layout.$b4.removeChild.call(this,_1,_2);var _3=this.sections;if(_3){for(var i=0;i<_3.length;i++){var _5=_3[i];if(_1==_5){this.removeSection(_1);break}else if(_5.items&&_5.items.contains(_1)){this.removeItem(_5,_1);break}}}},isc.A.addSections=function isc_SectionStack_addSections(_1,_2,_3){if(_1==null)return;if(!isc.isAn.Array(_1))_1=[_1];if(_2==null||_2>this.sections.length){_2=this.sections.length}
for(var i=0;i<_1.length;i++){var _5=_1[i];if(!_5)continue;if(_5.showHeader==null)_5.showHeader=true;if(_5.canHide==null)_5.canHide=true;var _6=_5.expanded!=null?_5.expanded:_5.autoShow||_5.showHeader==false;if(_5.hidden==null)_5.hidden=false;if(_5.items==null)_5.items=[];else if(!isc.isA.Array(_5.items))_5.items=[_5.items];for(var j=0;j<_5.items.length;j++){if(isc.isAn.Object(_5.items[j]))_5.items[j].$86x=this.ID};var _8=isc.ClassFactory.getClass(this.sectionHeaderClass),_9=_8.createRaw();_9.autoDraw=false;_9._generated=true;_9.expanded=_6;_9.isSectionHeader=true;_9.visibility=(_5.hidden||_5.showHeader==false)?isc.Canvas.HIDDEN:isc.Canvas.INHERIT;_9.dragScrollType="parentsOnly";_9.dragScrollDirection=this.vertical?isc.Canvas.VERTICAL:isc.Canvas.HORIZONTAL;_9.layout=this;if(this.vertical)_9.height=this.headerHeight;else _9.width=this.headerHeight;var _10=null,_11=null;if(_5.name!=null)_10=_5.name;if(_5.ID!=null){if(_10==null)_10=_5.ID;if(!this.useGlobalSectionIDs){_11=_5.ID;delete _5.ID;delete _5._autoAssignedID}else{var _12=window[_5.ID];if(_12!=null){this.logWarn("Note: Section Stack Section has ID specified as '"+_5.ID+"'. This collides with an existing "+(isc.isA.Canvas(_12)?"SmartClient component ID.":"object reference.")+" The existing object will be replaced by the generated header for this section. To avoid applying section IDs to their corresponding section headers, you can set sectionStack.useGlobalSectionIDs to false")}}}
if(_10==null){_10="section"+this.sectionNameIndex++}
var _13=_10,_14=this.sections.find("name",_10);while(_14!=_5&&_14!=null){_10="section"+this.sectionNameIndex++;_14=this.sections.find("name",_10)}
if(_13!=_10){this.logWarn("Specified name for section:"+_13+" collided with name for existing section in this stack. Replacing with auto-generated name:"+_10)}
_5.name=_10;isc.addProperties(_9,_5);_9.__ref=null;delete _9.__module;_9.$75q=_5;if(this.canReorderSections&&_9.canReorder!=false){_9.canDragReposition=true;_9.canDrop=true}
_9.completeCreation();_9=isc.SGWTFactory.extractFromConfigBlock(_9);_5.$75r=_9
_9.getSectionConfig=function(){return this.$75q}
_5.getSectionHeader=function(){return this.$75r}
if(_11!=null){_5.ID=_11}
_5=_9;this.sections.addAt(_5,_2+i);this.addMember(_5,this.$6k(_5));if(_6&&!_5.hidden){this.expandSection(_5)}else{for(var _15=0;_15<_5.items.length;_15++){var _16=_5.items[_15];if(_16.parentElement&&_16.parentElement!=this)_16.deparent();if(isc.isA.Canvas(_16)&&_16.isDrawn())_16.clear()}}
if(_5.items){if(!this.canResizeSections)_5.items.setProperty("resizeable",false);else if(_5.resizeable!=null){_5.items.setProperty("resizeable",_5.resizeable)}}}
if(_3&&this.$6l==null){var _17=_1.first();if(_17&&!(_17.expanded==false)){var _18=this.sections.first();this.expandSection(_18)}}},isc.A.addSection=function isc_SectionStack_addSection(_1,_2){this.addSections(_1,_2)},isc.A.removeSection=function isc_SectionStack_removeSection(_1){if(!isc.isAn.Array(_1))_1=[_1];for(var i=0;i<_1.length;i++){var _3=this.getSectionHeader(_1[i]);if(_3!=null){for(var _4=_3.items.length-1;_4>=0;_4--){var _5=_3.items[_4];if(this.members.contains(_5))this.removeMember(_5)}
this.sections.remove(_3);if(!_3.destroying&&!_3.destroyed)_3.destroy()}}},isc.A.getSections=function isc_SectionStack_getSections(){return this.sections.getProperty("name")},isc.A.reorderSection=function isc_SectionStack_reorderSection(_1,_2){this.moveSection(_1,_2)},isc.A.moveSection=function isc_SectionStack_moveSection(_1,_2){if(_2==null)return;if(!isc.isAn.Array(_1))_1=[_1];for(var i=0;i<_1.length;i++){var _4=this.getSectionHeader(_1[i]);if(_4==null){this.logInfo("moveSection(): Unable to find header for specified section:"+_1[i]+", skipping");i--;_1.removeAt(i)}else{_1[i]=_4;this.sections[this.sections.indexOf(_4)]=null}}
this.sections.removeEmpty();this.sections.addListAt(_1,_2);var _5=0;for(var i=0;i<this.sections.length;i++){var _6=this.getSectionHeader(i),_7=this.members.indexOf(_6),_8=_7+1;var _9=_6.items;if(_9!=null&&_9.length!=0&&this.members.contains(_9[0])){if(_7==-1){_7=this.members.indexOf(_9[0]);_8=_7}
_8+=_9.length}
if(_7==-1)continue;this.members.slideRange(_7,_8,_5);_5+=(_8-_7)}
this.$87o("moveSection() called")},isc.A.showSection=function isc_SectionStack_showSection(_1,_2){this.$6m(_1,true,false,_2)},isc.A.expandSection=function isc_SectionStack_expandSection(_1,_2){if(!isc.isAn.Array(_1))_1=[_1];if(this.visibilityMode=="mutex"){if(_1.length>1){this.logWarn("expandSection(): only one section can be expanded in 'mutex' visibility mode. Dropping all but the last.");_1=[_1[_1.length-1]]}
var _3=this.$6l,_4=this.getSectionHeader(_1[0]);if(_3&&_3!=_4)this.collapseSection(_3)}
this.$6m(_1,false,true,_2)},isc.A.$6m=function isc_SectionStack__showSection(_1,_2,_3,_4){if(_1==null)return;if(!isc.isAn.Array(_1))_1=[_1];var _5=[];for(var i=0;i<_1.length;i++){var _7=this.getSectionHeader(_1[i]);if(_7==null){this.logWarn("showSection(): no such section ["+i+"]: "+this.echo(_1[i]));continue}
if(_7.showHeader&&_7.hidden&&(_2||_3)){_5.add(_7);_7.hidden=false}
if(_3||_7.expanded){if(_7.setExpanded&&!_7.setOpen)_7.setExpanded(true);else if(_7.setOpen)_7.setOpen(true);this.$6l=_7;if(_7.items){for(var _8=_7.items.length-1;_8>=0;_8--){var _9=this.createCanvas(_7.items[_8]);if(!isc.isA.Canvas(_9)){this.logWarn("Section with title:"+_7.title+" contains invalid item:"+_7.items[_8]+" - ignoring this item.");_7.items.removeAt(_8);continue}
_7.items[_8]=_9}
var _10=this.$6k(_7)+1;this.addMembers(_7.items,_10,true);_5.addList(_7.items)}}}
var _11=this;this.showMembers(_5,function(){_11.$6n(_1,_4)})},isc.A.$6n=function isc_SectionStack__completeShowOrExpandSection(_1,_2){if(_1.length==0)return;if(this.isDrawn()){var _3=this.getSectionHeader(_1[0]);if(this.vscrollOn&&this.scrollSectionIntoView){var _4=(_3.showHeader?_3:_3.items.first()),_5=_3.items.last();this.delayCall("scrollIntoView",[_4.getLeft(),_4.getTop(),_4.getVisibleWidth(),_5.getVisibleHeight(),"left","top"],0)}}
if(_2!=null)this.fireCallback(_2)},isc.A.sectionForItem=function isc_SectionStack_sectionForItem(_1){if(this.sections){for(var i=0;i<this.sections.length;i++){var _3=this.sections[i];if(_3){for(var j=0;j<_3.items.length;j++){if(_3.items[j]==_1){return _3}}}}}},isc.A.sectionForMemberIndex=function isc_SectionStack_sectionForMemberIndex(_1){var _2=-1;if(this.sections){for(var i=this.sections.length-1;i>=0;i--){var _4=this.sections[i];_2=this.getMemberNumber(_4);if(_2<_1)return _4}}},isc.A.hideSection=function isc_SectionStack_hideSection(_1,_2){this.$6o(_1,true,false,_2)},isc.A.collapseSection=function isc_SectionStack_collapseSection(_1,_2){this.$6o(_1,false,true,_2)},isc.A.$6o=function isc_SectionStack__hideSection(_1,_2,_3,_4){if(_1==null)return;if(!isc.isAn.Array(_1))_1=[_1];var _5=[];for(var i=0;i<_1.length;i++){var _7=this.getSectionHeader(_1[i]);if(_7==null){this.logWarn("hideSection(): no such section ["+i+"]: "+this.echo(_1[i]));continue}
if(_2&&!_7.hidden){_7.hidden=true;_5.add(_7)}
if(_3||_7.expanded){if(_3){if(_7.setExpanded&&!_7.setOpen)_7.setExpanded(false);else if(_7.setOpen)_7.setOpen(false)}
if(this.$6l==_7)this.$6l=null;if(_7.items){for(var j=0;j<_7.items.length;j++){if(this.members.contains(_7.items[j]))_5.add(_7.items[j])}}}}
if(this.forceFill&&this.getVisibleHeight()<=this.getHeight()){var _9=this.getMemberNumber(this.getSectionHeader(_1[0]));var _10;var _11=false;for(var i=_9-1;i>=0;i--){var _12=this.members[i];if(_5.contains(_12))continue;if(this.memberIsDragResizeable(_12)){if(this.memberHasAutoResizeableHeight(_12)){_11=true;break}else if(_10==null){_10=_12}}}
if(!_11){for(var i=_9+1;i<this.members.length;i++){var _12=this.members[i];if(_5.contains(_12))continue;if(this.memberIsDragResizeable(_12)){if(this.memberHasAutoResizeableHeight(_12)){_11=true;break}else if(_10==null){_10=_12}}}}
if(!_11&&_10!=null){_10.$po=null}}
this.hideMembers(_5,_4)},isc.A.sectionIsVisible=function isc_SectionStack_sectionIsVisible(_1){_1=this.getSectionHeader(_1);if(!_1)return false;if(_1.showHeader&&_1.isVisible())return true;var _2=_1.items.first();if(_2==null||!isc.isA.Canvas(_2)||!_2.isDrawn()||_2.visibility==isc.Canvas.HIDDEN)return false;return true},isc.A.getVisibleSections=function isc_SectionStack_getVisibleSections(){var _1=[];for(var i=0;i<this.sections.length;i++)
if(this.sectionIsVisible(this.sections[i]))_1.add(this.sections[i].name);return _1},isc.A.sectionIsExpanded=function isc_SectionStack_sectionIsExpanded(_1){return this.getSectionHeader(_1).expanded},isc.A.getExpandedSections=function isc_SectionStack_getExpandedSections(){var _1=this.sections.findAll("expanded",true);return _1==null?[]:_1.getProperty("name")},isc.A.setSectionTitle=function isc_SectionStack_setSectionTitle(_1,_2){var _3=this.getSectionHeader(_1);if(_3)_3.setTitle(_2)},isc.A.getSectionHeader=function isc_SectionStack_getSectionHeader(_1){return isc.Class.getArrayItem(_1,this.sections,"name")},isc.A.getSection=function isc_SectionStack_getSection(_1){return this.getSectionHeader(_1)},isc.A.getSectionConfig=function isc_SectionStack_getSectionConfig(_1){var _2=this.getSectionHeader(_1);if(!isc.isA.Canvas(_2))return _2;return _2.$75q},isc.A.getSectionNumber=function isc_SectionStack_getSectionNumber(_1){if(isc.isA.String(_1)){return this.sections.findIndex("name",_1)}else{return this.sections.indexOf(_1)}},isc.A.$6k=function isc_SectionStack__getSectionPosition(_1){var _2=this.getMemberNumber(_1);if(_2!=-1)return _2;var _3=this.sections.indexOf(_1);if(_3<=0)return _3;var _4=this.sections[_3-1],_5=_4.items?_4.items.last():null;if(this.hasMember(_5)){return this.getMemberNumber(_5)+1}else{return this.getMemberNumber(_4)+1}},isc.A.sectionHeaderClick=function isc_SectionStack_sectionHeaderClick(_1){if(this.onSectionHeaderClick&&(this.onSectionHeaderClick(_1)==false)){return false}
if(this.visibilityMode=="mutex"){if(this.sectionIsExpanded(_1)){this.collapseSection(_1);if(!this.canCollapseAll){var _2=this.sections.indexOf(_1);if(_2==this.sections.getLength()-1)_2=0;else _2+=1;var _3=this.sections[_2];this.expandSection(_3)}
return false}
this.expandSection(_1)}else{if(!this.sectionIsExpanded(_1)){this.expandSection(_1)}else{this.collapseSection(_1)}}
return false},isc.A.getSectionCursor=function isc_SectionStack_getSectionCursor(_1){var _2;var _3=this.getSectionConfig(_1);if(_3==null)_2=isc.Canvas.DEFAULT;else if(_3.cursor)_2=_3.cursor;else{if(_3.canCollapse!=false){_2=isc.Canvas.HAND}else if(this.canRorderSections&&_3.canReorder!=false){_2="move"}else{_2=isc.Canvas.DEFAULT}}
return _2},isc.A.getDragResizeTarget=function isc_SectionStack_getDragResizeTarget(_1){var _2=this.getMemberNumber(_1);var _3;this.$6p=0;for(var i=_2-1;i>=0;i--){var _1=this.getMember(i);if(this.memberIsDragResizeable(_1)){_3=_1;break}
if((_1.isSectionHeader&&this.sectionIsVisible(_1))||(!_1.resizeable&&_1.isVisible()))
this.$6p+=_1.getVisibleHeight()}
if(!_3)return null;if(this.canResizeStack)return _3;var _5=this.getMembers().length;for(var i=_2+1;i<_5;i++){var _1=this.getMember(i);if(this.memberIsDragResizeable(_1))return _3}
return null},isc.A.memberIsDragResizeable=function isc_SectionStack_memberIsDragResizeable(_1){if(!_1.isSectionHeader&&_1.resizeable!==false&&_1.isVisible()&&(!this.memberHasInherentLength(_1)||_1.resizeable))return true},isc.A.memberHasAutoResizeableHeight=function isc_SectionStack_memberHasAutoResizeableHeight(_1){var _2=_1.$po;return _2==null||(isc.isA.String(_2)&&(_2=="*"||isc.endsWith(_2,"%")))},isc.A.getMemberDefaultBreadth=function isc_SectionStack_getMemberDefaultBreadth(_1,_2){var _3=_2;if(!_1.isSectionHeader){if(this.itemStartIndent!=null||this.itemEndIndent!=null)
_3-=(this.itemStartIndent==null?0:this.itemStartIndent)+(this.itemEndIndent==null?0:this.itemEndIndent);else _3-=this.itemIndent}
return _3},isc.A.getMemberOffset=function isc_SectionStack_getMemberOffset(_1,_2,_3){var _4=this.itemIndent;if(_1.isSectionHeader)return _2;if(this.itemStartIndent!=null)_4=this.itemStartIndent;if(_3==isc.Canvas.RIGHT||_3==isc.Canvas.BOTTOM)
_4*=-1;return _2+_4});isc.B._maxIndex=isc.C+44;isc.$6q={icon:"[SKIN]SectionHeader/opener.gif",overflow:"hidden",baseStyle:"sectionHeader",showDisabled:true,expanded:false,setExpanded:function(_1){this.expanded=_1;this.stateChanged()},setOpen:function(_1){this.setExpanded(_1)},getCustomState:function(){return this.expanded?"opened":"closed"}};isc.$6r={overflow:"hidden",ignoreRTL:true,clipTitle:true,showClippedTitleOnHover:true,wrap:false,height:20,expanded:false,canCollapse:true,getSectionStack:function(){var _1=this.layout;if(_1)return isc.isA.String(_1)?window[_1]:_1;else return null},keyPress:function(){var _1=this.getSectionStack();if(_1==null)return;var _2=isc.EH.getKey();if(_2=="Enter"||_2=="Space"){if(this.canCollapse)return _1.sectionHeaderClick(this)}else if(_2=="Arrow_Up"||_2=="Arrow_Down"){var _3=_1.getDragResizeTarget(this);if(_3==null)return false;var _4=(_2=="Arrow_Up"?-5:5);this.bringToFront();this.resizeTarget(_3,true,this.resizeInRealTime,0,0,(this.getPageTop()+_4))
this.$6s=_3}},keyUp:function(){if(this.$6s){var _1=isc.EH.getKey();if(_1=="Arrow_Up"||_1=="Arrow_Down"){this.finishTargetResize(this.$6s,true,this.resizeInRealTime);this.$6s=null}}},$kk:function(){if(this.canTabToHeader!=null)return this.canTabToHeader;var _1=this.getSectionStack();if(_1){if(_1.canTabToHeaders!=null)return _1.canTabToHeaders;if(_1.canTabToHeader!=null)return _1.canTabToHeader;if(isc.SectionItem&&isc.isA.SectionItem(_1)){var _2=_1.form;if(_2&&_2.canTabToSectionHeaders!=null)return _2.canTabToSectionHeaders}
return!!isc.screenReader}
else return true},$71i:function(){var _1=this.getSectionStack();return _1?true:false},schemaName:"SectionStackSection",addItem:function(_1,_2){if(!this.$71i())return;var _3=this.getSectionStack();_3.addItem(this,_1,_2);_3.expandSection(this)},removeItem:function(_1){if(!this.$71i())return;this.getSectionStack().removeItem(this,_1)},canDrag:true,dragAppearance:"none",isSectionHeader:true,dragStart:function(){if(!this.$71i())return;var _1=this.getSectionStack().getDragResizeTarget(this);this.$6t=_1;if(_1==null)return false;this.bringToFront()},dragMove:function(){if(!this.$71i())return;var _1=this.getSectionStack().$6p;var _2=0-isc.EH.dragOffsetY;this.resizeTarget(this.$6t,true,this.resizeInRealTime,_2,_1)},dragStop:function(){this.finishTargetResize(this.$6t,true,this.resizeInRealTime)},destroy:function(){if(!this.expanded&&this.items){var _1=this.items;for(var i=0;i<_1.length;i++){if(isc.isA.Canvas(_1[i])&&_1[i].parentElement!=this.parentElement){_1[i].destroy()}}}
var _3=this.controls,_4=this.controlsLayout;if(_3){if(!isc.isAn.Array(_3))_3=[_3];for(var _5=0;_5<_3.length;_5++){if(_3[_5].destroy&&!_3[_5].destroyed&&(_4==null||_3[_5].parentElement!=_4))
{_3[_5].destroy()}}}
return this.Super("destroy",arguments)},controlsLayoutDefaults:{_constructor:isc.HStack,defaultLayoutAlign:"center",snapTo:(isc.Page.isRTL()?"L":"R"),membersMargin:5,layoutEndMargin:5,addAsChild:true},$115j:function(){return(this.controlsLayout==null?null:this.controlsLayout.getVisibleWidth())},addControls:function(){if(!this.controls)return;this.addAutoChild("controlsLayout",{height:this.getInnerHeight(),align:this.isRTL()?"left":"right",members:this.controls,resized:function(){var _1=this.creator,_2=this.creator.background;if(_2!=null)_1=_2.label;_1.markForRedraw()}});this.allowContentAndChildren=true},refreshControls:function(){if(!this.controls)return;if(!this.controlsLayout)this.addControls();var _1=this.controlsLayout;_1.addMembers(this.controls);this.allowContentAndChildren=true},getPrintStyleName:function(){var _1=this.parentElement;if(_1&&_1.printHeaderStyleName!=null){this.printStyleName=_1.printHeaderStyleName}
return this.Super("getPrintStyleName",arguments)},shouldPrint:true};isc.defineClass("SectionHeader","Label");isc.A=isc.SectionHeader.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.useContents=false;isc.A.noDoubleClicks=true;isc.B.push(isc.A.click=function isc_SectionHeader_click(){if(this.contains(isc.EH.lastTarget))return;if(!this.canCollapse||!this.$71i())return;return this.getSectionStack().sectionHeaderClick(this)},isc.A.draw=function isc_SectionHeader_draw(_1,_2,_3,_4){if(isc.$cv)arguments.$cw=this;if(!this.readyToDraw())return;this.align=this.isRTL()?"right":"left";if(!this.canCollapse||(this.$71i()&&this.getSectionStack()&&this.getSectionStack().showExpandControls==false))
{this.icon=null;this.showIconState=false}
this.setCursor(this.getCurrentCursor());this.invokeSuper(isc.SectionHeader,"draw",_1,_2,_3,_4);this.addControls();if(this.headerControls!=null){this.headerLayout=isc.HLayout.create({autoDraw:false,width:this.getInnerWidth(),height:this.getInnerHeight(),members:this.headerControls});this.addChild(this.headerLayout);this.allowContentAndChildren=true}},isc.A.getCurrentCursor=function isc_SectionHeader_getCurrentCursor(){var _1=this.cursor;if(this.getSectionStack()&&this.getSectionStack().getSectionCursor!=null){_1=this.getSectionStack().getSectionCursor(this)}
return _1});isc.B._maxIndex=isc.C+3;isc.SectionHeader.addMethods(isc.$6r,isc.$6q);isc.defineClass("ImgSectionHeader","HLayout");isc.A=isc.ImgSectionHeader.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$115g=true;isc.A.noDoubleClicks=true;isc.A.backgroundDefaults=isc.addProperties({titleStyle:"sectionHeaderTitle",src:"[SKIN]SectionStack/header.gif",backgroundColor:"#a0a0a0",click:function(){if(this.parentElement&&this.parentElement.editingOn){return this.Super("click",arguments)}
if(this.parentElement.canCollapse){if(this.parentElement.getSectionStack())
return this.parentElement.getSectionStack().sectionHeaderClick(this.parentElement)}},width:"100%",height:"100%",addAsChild:true,getPrintStyleName:function(){if(this.parentElement)return this.parentElement.getPrintStyleName();return this.Super("getPrintStyleName",arguments)}},isc.$6q);isc.B.push(isc.A.getCanHover=function isc_ImgSectionHeader_getCanHover(_1,_2,_3){return this.$115g||this.invokeSuper(isc.ImgSectionHeader,"getCanHover",_1,_2,_3)},isc.A.setExpanded=function isc_ImgSectionHeader_setExpanded(_1){this.expanded=_1;if(this.background)this.background.setExpanded(_1)},isc.A.setOpen=function isc_ImgSectionHeader_setOpen(_1){this.setExpanded(_1)},isc.A.setTitle=function isc_ImgSectionHeader_setTitle(_1){this.title=_1;if(this.background)this.background.setTitle(_1)},isc.A.setIcon=function isc_ImgSectionHeader_setIcon(_1){this.icon=_1;if(this.background)this.background.setIcon(_1)},isc.A.setIconOrientation=function isc_ImgSectionHeader_setIconOrientation(_1){this.orientation=_1;if(this.background)this.background.setIconOrientation(_1)},isc.A.setAlign=function isc_ImgSectionHeader_setAlign(_1){this.align=_1;if(this.background)this.background.setAlign(_1)},isc.A.setPrompt=function isc_ImgSectionHeader_setPrompt(_1){this.prompt=_1;if(this.background)this.background.setPrompt(_1)},isc.A.draw=function isc_ImgSectionHeader_draw(_1,_2,_3,_4){if(isc.$cv)arguments.$cw=this;if(!this.readyToDraw())return;this.setupBackground();this.addControls();this.addAutoChildren(this.headerControls);this.background.sendToBack();this.invokeSuper(isc.ImgSectionHeader,"draw",_1,_2,_3,_4)},isc.A.setupBackground=function isc_ImgSectionHeader_setupBackground(){var _1={title:this.title,clipTitle:this.clipTitle,showClippedTitleOnHover:false,$115g:false,expanded:this.expanded,canFocus:false};if(this.align)_1.align=this.align;if(this.prompt)_1.prompt=this.prompt;if(this.icon)_1.icon=this.icon;if(this.iconSize)_1.iconSize=this.iconSize;if(this.iconHeight)_1.iconHeight=this.iconHeight;if(this.iconWidth)_1.iconWidth=this.iconWidth;if(this.iconAlign)_1.iconAlign=this.iconAlign;if(this.iconOrientation)_1.iconOrientation=this.iconOrientation;if(!this.canCollapse||(this.$71i()&&this.getSectionStack()&&this.getSectionStack().showExpandControls==false))
{_1.icon=null;_1.showIconState=false}
_1.align=this.isRTL()?"right":"left";_1.canDragReposition=this.canDragReposition;_1.canDrop=this.canDrop;_1.dragTarget=this;var _2=this.getCurrentCursor();this.setCursor(_2);_1.cursor=_2;_1.$115j=function(){var _3=this.creator.controlsLayout;return(_3==null?null:_3.getVisibleWidth())};if(this.background==null){this.addAutoChild("background",_1,isc.StretchImgButton)}else{this.background.setProperties(_1)}},isc.A.getCurrentCursor=function isc_ImgSectionHeader_getCurrentCursor(){var _1=this.cursor;if(this.getSectionStack()&&this.getSectionStack().getSectionCursor!=null){_1=this.getSectionStack().getSectionCursor(this)}
return _1},isc.A.getPrintHTML=function isc_ImgSectionHeader_getPrintHTML(_1){if(this.background==null)this.setupBackground();return this.background.getPrintHTML(_1)},isc.A.titleClipped=function isc_ImgSectionHeader_titleClipped(){return(this.background==null?false:this.background.titleClipped())},isc.A.defaultTitleHoverHTML=function isc_ImgSectionHeader_defaultTitleHoverHTML(){return(this.background==null?null:this.background.defaultTitleHoverHTML())},isc.A.titleHoverHTML=function isc_ImgSectionHeader_titleHoverHTML(_1){return _1},isc.A.handleHover=function isc_ImgSectionHeader_handleHover(_1,_2,_3){if(this.canHover==null&&this.prompt)return this.invokeSuper(isc.ImgSectionHeader,"handleHover",_1,_2,_3);if(!this.showClippedTitleOnHover||!this.titleClipped()){if(this.canHover)return this.invokeSuper(isc.ImgSectionHeader,"handleHover",_1,_2,_3);else return}
if(this.titleHover&&this.titleHover()==false)return;var _4=this.titleHoverHTML(this.defaultTitleHoverHTML());if(_4!=null&&!isc.isAn.emptyString(_4)){var _5=this.$wc();isc.Hover.show(_4,_5,null,this)}});isc.B._maxIndex=isc.C+16;isc.ImgSectionHeader.addMethods(isc.$6r)
isc.ImgSectionHeader.registerStringMethods({titleHover:""});isc.SectionStack.registerStringMethods({onSectionHeaderClick:"sectionHeader"});isc.SectionStack.registerDupProperties("sections",["items"]);isc.ClassFactory.defineClass("Scrollbar","StretchImg");isc.$89p={autoDraw:false,_generated:true,$131p:true,$jp:false,$jo:false,_redrawWithParent:false,containedPeer:true,showDisabled:false,skinImgDir:"images/Scrollbar/",canDrag:true,dragAppearance:isc.EventHandler.NONE,dragStartDistance:0,dragScrollType:"parentsOnly",click:isc.EventHandler.stopBubbling,doubleClick:isc.EventHandler.stopBubbling,mouseMove:isc.EventHandler.stopBubbling,mouseOver:function(){return this.scrollbar.thumbOver()},mouseOut:function(){return this.scrollbar.thumbOut()},mouseDown:function(){return this.scrollbar.thumbDown()},dragStart:function(){return this.scrollbar.thumbDragStart()},dragMove:function(){return this.scrollbar.thumbMove()},dragStop:function(){return this.scrollbar.thumbDragStop()},mouseUp:function(){return this.scrollbar.thumbUp()},keyPress:function(){return this.ns.EH.bubbleEvent(this.scrollbar,this.ns.EH.eventTypes.KEY_PRESS)},keyDown:function(){return this.ns.EH.bubbleEvent(this.scrollbar,this.ns.EH.eventTypes.KEY_DOWN)},keyUp:function(){return this.ns.EH.bubbleEvent(this.scrollbar,this.ns.EH.eventTypes.KEY_UP)},mouseWheel:function(){return this.ns.EH.bubbleEvent(this.scrollbar,this.ns.EH.eventTypes.MOUSE_WHEEL)},masterMoved:function(){var _1=this.masterElement;if(_1&&_1.$ss)return;this.Super("masterMoved",arguments)}};isc.defineClass("ScrollThumb","StretchImg").addProperties(isc.$89p)
isc.A=isc.ScrollThumb.getPrototype();isc.A.hSrc="[SKIN]hthumb.gif";isc.A.vSrc="[SKIN]vthumb.gif";isc.A.backgroundColor="#EEEEEE";isc.A.textDirection="ltr";isc.A.capSize=2;isc.defineClass("HScrollThumb",isc.ScrollThumb);isc.A=isc.HScrollThumb.getPrototype();isc.A.vertical=false;isc.defineClass("VScrollThumb",isc.ScrollThumb);isc.defineClass("SimpleScrollThumb","Img").addProperties(isc.$89p)
isc.A=isc.SimpleScrollThumb.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.title="&nbsp;";isc.A.titleStyle="normal";isc.A.overflow="hidden";isc.A.vBaseStyle="vScrollThumb";isc.A.hBaseStyle="hScrollThumb";isc.A.imageType="center";isc.A.hSrc="[SKIN]hthumb_grip.gif";isc.A.vSrc="[SKIN]vthumb_grip.gif";isc.A.showRollOver=true;isc.A.statelessImage=true;isc.B.push(isc.A.initWidget=function isc_SimpleScrollThumb_initWidget(){if(this.vertical){this.src=this.vSrc||this.src;this.baseStyle=this.vBaseStyle||this.baseStyle}else{this.src=this.hSrc||this.src;this.baseStyle=this.hBaseStyle||this.baseStyle}
this.Super("initWidget",arguments)});isc.B._maxIndex=isc.C+1;isc.defineClass("HSimpleScrollThumb",isc.SimpleScrollThumb);isc.A=isc.HSimpleScrollThumb.getPrototype();isc.A.vertical=false;isc.defineClass("VSimpleScrollThumb",isc.SimpleScrollThumb);isc.A=isc.VSimpleScrollThumb.getPrototype();isc.A.vertical=true;isc.A=isc.Scrollbar.getPrototype();isc.A.btnSize=16;isc.A.state=isc.StatefulCanvas.STATE_UP;isc.A.autoEnable=true;isc.A.allowThumbDownState=false;isc.A.allowThumbOverState=false;isc.A.showTrackEnds=false;isc.A.showTrackButtons=true;isc.A.thumbMinSize=12;isc.A.trackEndWidth=12;isc.A.trackEndHeight=12;isc.A.thumbOverlap=1;isc.A.thumbInset=0;isc.A.overflow=isc.Canvas.HIDDEN;isc.A.skinImgDir="images/Scrollbar/";isc.A.cornerSrc="[SKIN]corner.gif";isc.A.hSrc="[SKIN]hscroll.gif";isc.A.vSrc="[SKIN]vscroll.gif";isc.A.hThumbClass=isc.HScrollThumb;isc.A.vThumbClass=isc.VScrollThumb;isc.A.startImg={name:"start",width:"btnSize",height:"btnSize"};isc.A.trackStartImg={name:"track_start",width:"trackStartSize",height:"trackStartSize"};isc.A.trackImg={name:"track",width:"*",height:"*"};isc.A.trackEndImg={name:"track_end",width:"trackEndSize",height:"trackEndSize"};isc.A.endImg={name:"end",width:"btnSize",height:"btnSize"};isc.A.cornerImg={name:"corner"};isc.A.textDirection="ltr";isc.A.$u3=true;isc.A.showThumb=true;isc.A=isc.Scrollbar.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$52l="thumb";isc.A.click=isc.EventHandler.stopBubbling;isc.A.handleMouseOver=isc.EH.stopBubbling;isc.B.push(isc.A.initWidget=function isc_Scrollbar_initWidget(){this.invokeSuper(isc.Scrollbar,"initWidget");var _1=this.cornerSize||this.getID()+".btnSize-1";this.$6x=isc.addProperties({},this.cornerImg,{width:_1,height:_1});if(null==this.startThumbOverlap)this.startThumbOverlap=this.thumbOverlap;if(null==this.endThumbOverlap)this.endThumbOverlap=this.thumbOverlap;this.setItems();var _2=(this.scrollbarSize)?this.scrollbarSize:this.btnSize;if(this.vertical)this.setWidth(_2);else this.setHeight(_2);this.makeThumb();this.addPeer(this.thumb);this.setScrollTarget();this.setThumb()},isc.A.setItems=function isc_Scrollbar_setItems(){var _1=this.items=[];if(this.showTrackButtons==true)_1.add(this.startImg);if(this.showTrackEnds==true)_1.add(this.trackStartImg);_1.add(this.trackImg);if(this.showTrackEnds==true)_1.add(this.trackEndImg);if(this.showTrackButtons==true)_1.add(this.endImg);if(this.showCorner)this.items.add(this.$6x)},isc.A.setShowCorner=function isc_Scrollbar_setShowCorner(_1){_1=_1!=false;if(this.showCorner!=_1){this.showCorner=_1;this.setItems();this.resizeImages();this.markForRedraw("showCorner")}
return _1},isc.A.setScrollTarget=function isc_Scrollbar_setScrollTarget(_1){if(this.$u3&&this.scrollTarget!=null&&this.isObserving(this.scrollTarget,"scrollTo"))
{this.ignore(this.scrollTarget,"scrollTo")}
if(_1!=null)this.scrollTarget=_1;if(this.scrollTarget==null)this.scrollTarget=this;if(this.$u3&&this.scrollTarget!=this&&this.scrollTarget!=_1){this.observe(this.scrollTarget,"scrollTo","observer.setThumb()")}},isc.A.setHandleDisabled=function isc_Scrollbar_setHandleDisabled(_1){this.Super("setHandleDisabled",arguments);if(this.thumb){if(this.scrollTarget&&this.scrollTarget.$61c){if(_1)this.thumb.delayCall("setVisibility",[isc.Canvas.HIDDEN]);else this.thumb.delayCall("setVisibility",[this.visibility])}else{if(_1)this.thumb.setVisibility(isc.Canvas.HIDDEN);else this.thumb.setVisibility(this.visibility)}
this.thumb.$jq=!_1}
if(_1==(this.state==isc.StatefulCanvas.STATE_UP)){this.setState(_1?isc.StatefulCanvas.STATE_DISABLED:isc.StatefulCanvas.STATE_UP)}},isc.A.setVisibility=function isc_Scrollbar_setVisibility(_1,_2,_3,_4){this.invokeSuper(isc.Scrollbar,"setVisibility",_1,_2,_3,_4);if(this.isVisible())this.setThumb()},isc.A.parentVisibilityChanged=function isc_Scrollbar_parentVisibilityChanged(_1,_2,_3,_4){this.invokeSuper(isc.Scrollbar,"parentVisibilityChanged",_1,_2,_3,_4);if(this.isVisible())this.setThumb()},isc.A.drawPeers=function isc_Scrollbar_drawPeers(_1,_2,_3,_4){this.setThumb();this.invokeSuper(isc.Scrollbar,"drawPeers",_1,_2,_3,_4)},isc.A.resizePeersBy=function isc_Scrollbar_resizePeersBy(_1,_2){this.setThumb()},isc.A.makeThumb=function isc_Scrollbar_makeThumb(){if(!this.showThumb)return;var _1=this.vertical?this.vThumbClass:this.hThumbClass;this.thumb=_1.create({ID:this.getID()+"_thumb",scrollbar:this,state:this.state,visibility:this.visibility,width:this.vertical?this.getWidth():1,height:!this.vertical?this.getHeight():1,dragScrollDirection:this.vertical?isc.Canvas.VERTICAL:isc.Canvas.HORIZONTAL});if(this.thumb.showRollOver){this.allowThumbOverState=true
this.thumb.showRollOver=false}
if(this.thumb.showDown){this.allowThumbDownState=true;this.thumb.showDown=false}},isc.A.updateButtonsOnEdges=function isc_Scrollbar_updateButtonsOnEdges(){if(this.disableButtonsOnEdges){var _1=this.scrollTarget.getScrollRatio(this.vertical);var _2=this.scrollTarget.getViewportRatio(this.vertical);if(_1==0){this.setState(isc.StatefulCanvas.STATE_DISABLED,this.startImg.name)}else{this.setState(isc.StatefulCanvas.STATE_UP,this.startImg.name)}
if(_1==1||_2>=1){this.setState(isc.StatefulCanvas.STATE_DISABLED,this.endImg.name)}else{this.setState(isc.StatefulCanvas.STATE_UP,this.endImg.name)}}},isc.A.setThumb=function isc_Scrollbar_setThumb(){this.updateButtonsOnEdges();if(this.thumb==null||this.$494)return;var _1=this.thumb,_2=this.trackSize();if(this.isDrawn()&&_1.isDrawn())_1.moveAbove(this);var _3=Math.round(this.scrollTarget.getViewportRatio(this.vertical)*_2);if(!isc.isA.Number(_3)||_3<this.thumbMinSize)_3=this.thumbMinSize;if(_3>_2)_3=_2;var _4=Math.max(1,(this.vertical?this.getWidth():this.getHeight())
-(2*this.thumbInset));this.vertical?_1.resizeTo(_4,_3):_1.resizeTo(_3,_4);this.moveThumb()},isc.A.setZIndex=function isc_Scrollbar_setZIndex(_1){this.Super("setZIndex",arguments);if(this.thumb)this.thumb.moveAbove(this)},isc.A.moveThumbTo=function isc_Scrollbar_moveThumbTo(_1){if(!this.thumb)return;if(this.vertical)
return this.thumb.moveTo(this.getLeft()+this.thumbInset,_1);else
return this.thumb.moveTo(_1,this.getTop()+this.thumbInset)},isc.A.thumbSize=function isc_Scrollbar_thumbSize(){if(!this.thumb)return;return(this.vertical?this.thumb.getHeight():this.thumb.getWidth())},isc.A.moveThumb=function isc_Scrollbar_moveThumb(){var _1=(this.$u3||this.scrollTarget.canScroll(this.vertical));if(!_1){if(this.autoEnable)this.disable();this.moveThumbTo(this.trackStart());return}
if(this.autoEnable&&!this.scrollTarget.isDisabled())this.enable();var _2=this.scrollTarget.getScrollRatio(this.vertical),_3=this.trackSize()-this.thumbSize(),_4=Math.round(_2*_3);this.moveThumbTo(_4+this.trackStart());var _5=isc.EH;if(_5.mouseIsDown()&&(_5.mouseDownTarget()==this)&&this.thumb.containsEvent())
this.doneTrackScrolling()},isc.A.trackSize=function isc_Scrollbar_trackSize(){return this.getSize(this.getPartNum(this.trackImg.name))+(this.showTrackEnds!=false?(this.getSize(this.getPartNum(this.trackStartImg.name))+this.getSize(this.getPartNum(this.trackEndImg.name))):0)+this.startThumbOverlap+this.endThumbOverlap},isc.A.trackStart=function isc_Scrollbar_trackStart(){if(this.vertical)
return this.getTop()+(this.showTrackButtons==true?this.getSize(this.getPartNum(this.startImg.name)):0)-this.startThumbOverlap;else
return this.getLeft()+(this.showTrackButtons==true?this.getSize(this.getPartNum(this.startImg.name)):0)-this.startThumbOverlap},isc.A.directionRelativeToThumb=function isc_Scrollbar_directionRelativeToThumb(){if(!this.thumb){if(this.clickPart==this.startImg.name)return-1;else return 1}
var _1,_2=this.thumb,_3,_4;if(this.vertical){_1=isc.EH.getY();_3=_2.getPageTop();_4=_2.getHeight()}else{_1=isc.EH.getX();_3=_2.getPageLeft();_4=_2.getWidth()}
if(_1<_3)return-1;else if(_1>_3+_4)return 1;return 0},isc.A.mouseDown=function isc_Scrollbar_mouseDown(){this.clickPart=this.inWhichPart();if(this.clickPart==this.cornerImg.name){this.clickPart=null}else{this.$615(isc.StatefulCanvas.STATE_DOWN,this.clickPart)}
this.startDirection=this.directionRelativeToThumb();return isc.EH.STOP_BUBBLING},isc.A.mouseStillDown=function isc_Scrollbar_mouseStillDown(){if(this.clickPart==this.trackImg.name||this.showTrackEnds==true&&(this.clickPart==this.trackStartImg.name||this.clickPart==this.trackEndImg.name)){var _1=this.directionRelativeToThumb();if(_1!=0&&_1==this.startDirection){if(this.$50y){delete this.$50y;this.$50o=true}else if(!this.$50o)
this.$50y=true;this.scrollTarget.scrollByPage(this.vertical,this.startDirection,"trackClick")}}else{this.scrollTarget.scrollByDelta(this.vertical,this.startDirection,"trackButtonClick")}
return true},isc.A.doubleClick=function isc_Scrollbar_doubleClick(){if(isc.Browser.isIE)return this.mouseStillDown();return isc.EH.STOP_BUBBLING},isc.A.$615=function isc_Scrollbar__updateItemStates(_1,_2){if(_2==null)return this.setState(_1);var _3=isc.StatefulCanvas.STATE_UP,_4=(_2==this.trackImg.name||_2==this.trackStartImg.name||_2==this.trackEndImg.name),_5=!_4&&_2==this.startImg.name,_6=!_4&&!_5&&_2==this.endImg.name,_7=!_4&&!_5&&!_6,_8=_4?_1:_3;this.setState(_5?_1:_3,this.startImg.name);this.setState(_8,this.trackImg.name);if(this.showTrackEnds)this.setState(_8,this.trackStartImg.name);if(this.showTrackEnds)this.setState(_8,this.trackEndImg.name);this.setState(_6?_1:_3,this.endImg.name);if(this.showCorner)this.setState(_7?_1:_3,this.cornerImg.name)},isc.A.mouseUp=function isc_Scrollbar_mouseUp(){if(this.clickPart){var _1=this.showRollOver?isc.StatefulCanvas.STATE_OVER:isc.StatefulCanvas.STATE_UP;this.$615(_1,this.clickPart)}
this.clickPart=null;this.doneTrackScrolling();this.updateButtonsOnEdges();return isc.EventHandler.STOP_BUBBLING},isc.A.handleMouseMove=function isc_Scrollbar_handleMouseMove(){if(this.ns.EH.mouseIsDown()&&this.clickPart){}else if(this.showRollOver){this.$615(isc.StatefulCanvas.STATE_OVER,this.inWhichPart())}
return isc.EH.STOP_BUBBLING},isc.A.handleMouseOut=function isc_Scrollbar_handleMouseOut(){if(this.ns.EH.mouseIsDown())return isc.EH.STOP_BUBBLING;if(this.showRollOver){this.setState(isc.StatefulCanvas.STATE_UP)}
return isc.EH.STOP_BUBBLING},isc.A.prepareForDragging=function isc_Scrollbar_prepareForDragging(){return false},isc.A.isDragScrolling=function isc_Scrollbar_isDragScrolling(){return this.$50p},isc.A.isRepeatTrackScrolling=function isc_Scrollbar_isRepeatTrackScrolling(){return this.$50o},isc.A.doneTrackScrolling=function isc_Scrollbar_doneTrackScrolling(){delete this.$50y;if(this.isRepeatTrackScrolling()){delete this.$50o;if(this.scrollTarget&&this.scrollTarget.doneFastScrolling)this.scrollTarget.doneFastScrolling()}},isc.A.thumbOver=function isc_Scrollbar_thumbOver(){if(this.allowThumbOverState){this.thumb.setState(isc.StatefulCanvas.STATE_OVER)}},isc.A.thumbOut=function isc_Scrollbar_thumbOut(){if(!isc.EH.mouseIsDown()){this.thumb.setState(isc.StatefulCanvas.STATE_UP)}},isc.A.thumbDown=function isc_Scrollbar_thumbDown(){this.clickPart=this.$52l;if(this.allowThumbDownState){this.thumb.setState(isc.StatefulCanvas.STATE_DOWN)}
return isc.EventHandler.STOP_BUBBLING},isc.A.thumbDragStart=function isc_Scrollbar_thumbDragStart(){var _1=isc.EH;_1.dragOffsetX=this.thumb.getOffsetX(_1.mouseDownEvent);_1.dragOffsetY=this.thumb.getOffsetY(_1.mouseDownEvent);this.$50p=true;return _1.STOP_BUBBLING},isc.A.getEventCoord=function isc_Scrollbar_getEventCoord(){var _1=isc.EH;if(this.vertical){return _1.getY()-this.getPageTop()-(this.showTrackButtons==true?this.getSize(this.getPartNum(this.startImg.name)):0)+this.startThumbOverlap-_1.dragOffsetY}else{return _1.getX()-this.getPageLeft()-(this.showTrackButtons==true?this.getSize(this.getPartNum(this.startImg.name)):0)+this.startThumbOverlap-_1.dragOffsetX}},isc.A.masterMoved=function isc_Scrollbar_masterMoved(_1,_2,_3,_4,_5,_6){if(this.masterElement.$ss)return;return this.invokeSuper(isc.Scrollbar,"masterMoved",_1,_2,_3,_4,_5,_6)},isc.A.thumbMove=function isc_Scrollbar_thumbMove(){var _1=this.trackSize()-this.thumbSize(),_2=this.getEventCoord(),_3=_2/_1;_3=Math.max(0,Math.min(_3,1));this.scrollTarget.scrollToRatio(this.vertical,_3,"thumbMove");return isc.EventHandler.STOP_BUBBLING},isc.A.thumbUp=function isc_Scrollbar_thumbUp(){if(this.clickPart!=this.$52l)
return this.mouseUp();var _1=this.allowThumbOverState&&this.thumb.containsEvent()?isc.StatefulCanvas.STATE_OVER:isc.StatefulCanvas.STATE_UP;this.thumb.setState(_1);return isc.EventHandler.STOP_BUBBLING},isc.A.thumbDragStop=function isc_Scrollbar_thumbDragStop(){delete this.$50p;if(this.scrollTarget&&this.scrollTarget.doneFastScrolling)this.scrollTarget.doneFastScrolling();return this.thumbUp()},isc.A.keyPress=function isc_Scrollbar_keyPress(){return this.ns.EH.bubbleEvent(this.scrollTarget,this.ns.EH.eventTypes.KEY_PRESS)},isc.A.keyDown=function isc_Scrollbar_keyDown(){return this.ns.EH.bubbleEvent(this.scrollTarget,this.ns.EH.eventTypes.KEY_DOWN)},isc.A.keyUp=function isc_Scrollbar_keyUp(){return this.ns.EH.bubbleEvent(this.scrollTarget,this.ns.EH.eventTypes.KEY_UP)},isc.A.mouseWheel=function isc_Scrollbar_mouseWheel(){return this.ns.EH.bubbleEvent(this.scrollTarget,this.ns.EH.eventTypes.MOUSE_WHEEL)},isc.A.hide=function isc_Scrollbar_hide(_1,_2,_3,_4){this.invokeSuper("Scrollbar","hide",_1,_2,_3,_4);if(!this.$u3&&this.scrollTarget!=null){this.moveTo(this.scrollTarget.getLeft(),this.scrollTarget.getTop());this.resizeTo(1,1)}});isc.B._maxIndex=isc.C+44;isc.ClassFactory.defineClass("NativeScrollbar","Canvas");isc.A=isc.NativeScrollbar;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.getScrollbarSize=function isc_c_NativeScrollbar_getScrollbarSize(){return isc.Element.getNativeScrollbarSize()});isc.B._maxIndex=isc.C+1;isc.A=isc.NativeScrollbar.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.vertical=true;isc.A.showCustomScrollbars=false;isc.A.overflow="hidden";isc.A.autoEnable=true;isc.A.scrollbarCanvasDefaults={overflow:"scroll",showCustomScrollbars:false,$lh:function(_1,_2){this.Super("$lh",arguments);if(isc.Browser.isMoz&&!_1&&(_2||isc.Browser.geckoVersion<20030312))
{return}
if(this.$u7)return;this.creator.scrollbarCanvasScrolled()},parentResized:function(){this.creator.sizeScrollbarCanvas();this.creator.adjustOverflow()}};isc.A.scrollbarCanvasThickness=100;isc.B.push(isc.A.initWidget=function isc_NativeScrollbar_initWidget(){var _1=isc.NativeScrollbar.getScrollbarSize();if(this.vertical){this.setWidth(_1)}else{this.setHeight(_1)}
this.setOverflow(isc.Canvas.HIDDEN);this.addAutoChild("scrollbarCanvas");this.sizeScrollbarCanvas();this.setScrollTarget();this.setThumb()},isc.A.sizeScrollbarCanvas=function isc_NativeScrollbar_sizeScrollbarCanvas(){var _1=isc.Element.getNativeScrollbarSize();var _2=this.vertical?this.scrollbarCanvasThickness:this.getInnerWidth()+(this.showCorner?0:_1),_3=!this.vertical?this.scrollbarCanvasThickness:this.getInnerHeight()+(this.showCorner?0:_1);this.scrollbarCanvas.resizeTo(_2,_3)},isc.A.$ut=function isc_NativeScrollbar__adjustOverflow(){this.Super("$ut",arguments);if(this.vertical){this.scrollToTop();this.scrollToRight()}else{this.scrollToLeft();this.scrollToBottom()}},isc.A.setScrollTarget=function isc_NativeScrollbar_setScrollTarget(_1){if(this.$u3&&this.scrollTarget!=null&&this.isObserving(this.scrollTarget,"scrollTo")){this.ignore(this.scrollTarget,"scrollTo")}
if(_1!=null)this.scrollTarget=_1;if(this.scrollTarget==null)this.scrollTarget=this;if(this.$u3&&this.scrollTarget!=this&&this.scrollTarget!=_1){this.observe(this.scrollTarget,"scrollTo","observer.setThumb()")}},isc.A.setThumb=function isc_NativeScrollbar_setThumb(){if(this.$494)return;var _1=this.scrollbarCanvas,_2=(this.$u3||this.scrollTarget.canScroll(this.vertical)),_3=1,_4=1;if(_2){var _5=this.scrollTarget.getViewportRatio(this.vertical);var _6=(this.vertical?_1.getViewportHeight():_1.getViewportWidth()),_7=Math.round(_6/_5);if(this.vertical)_4=_7;else _3=_7}
if(_1.spacerLength!=_7){_1.setContents(isc.Canvas.spacerHTML(_3,_4));_1.spacerLength=_7}
this.moveThumb()},isc.A.setVisibility=function isc_NativeScrollbar_setVisibility(_1,_2,_3,_4){this.invokeSuper(isc.Scrollbar,"setVisibility",_1,_2,_3,_4);if(this.isVisible())this.setThumb()},isc.A.parentVisibilityChanged=function isc_NativeScrollbar_parentVisibilityChanged(_1,_2,_3,_4){this.invokeSuper(isc.Scrollbar,"parentVisibilityChanged",_1,_2,_3,_4);if(this.isVisible())this.setThumb()},isc.A.moveThumb=function isc_NativeScrollbar_moveThumb(){var _1=this.scrollTarget.getScrollRatio(this.vertical);var _2=this.scrollbarCanvas;var _3=this.vertical?_2.getScrollHeight()-_2.getViewportHeight():_2.getScrollWidth()-_2.getViewportWidth(),_4=Math.round(_1*_3);_2.scrollTo(this.vertical?0:_4,this.vertical?_4:0)},isc.A.scrollbarCanvasScrolled=function isc_NativeScrollbar_scrollbarCanvasScrolled(){var _1=this.scrollbarCanvas,_2=this.vertical?_1.getScrollTop()/(_1.getScrollHeight()-_1.getViewportHeight()):_1.getScrollLeft()/(_1.getScrollWidth()-_1.getViewportWidth());this.scrollTarget.scrollToRatio(this.vertical,_2)},isc.A.setShowCorner=function isc_NativeScrollbar_setShowCorner(_1){this.showCorner=_1;this.sizeScrollbarCanvas()});isc.B._maxIndex=isc.C+10;isc.$6y={invertClosedGripIfTargetAfter:true,canDrag:true,dragAppearance:"none",dragStartDistance:1,canCollapse:true,cursor:"hand",vResizeCursor:"row-resize",hResizeCursor:"col-resize",resizeInRealTime:false,$jp:false,$jo:false,overflow:"hidden",isMouseTransparent:true};isc.$6z={initWidget:function(){if(isc.isA.Img(this))this.src=this.vertical?this.vSrc:this.hSrc;if(this.vertical){this.defaultWidth=this.defaultWidth||10;this.cursor=this.hResizeCursor;this.baseStyle=this.vBaseStyle||this.baseStyle}else{this.defaultHeight=this.defaultHeight||10;this.cursor=this.vResizeCursor;this.baseStyle=this.hBaseStyle||this.baseStyle}
this.Super("initWidget",arguments);if(isc.Browser.isMoz)this.bringToFront()},prepareForDragging:function(){if(this.$91z==null){this.$91z=this.canDrag}
if(this.$1056==null){this.$1056=false}
if(this.target.visibility==isc.Canvas.HIDDEN){this.canDrag=this.$1056}else{this.canDrag=this.$91z}
return this.Super("prepareForDragging",arguments)},makeLabel:function(){this.Super("makeLabel",arguments);this.label.addMethods({getCustomState:function(){var _1=this.masterElement;if(!_1.showClosedGrip)return
var _2=_1.target,_3=_2.visibility==isc.Canvas.HIDDEN;var _4=_1.targetAfter&&_1.invertClosedGripIfTargetAfter;if((!_4&&_3)||(_4&&!_3)){return"closed"}}})},dragStart:function(){if(this.showDown)this.setState("Down");this.bringToFront()},dragMove:function(){var _1=this.vertical?(0-isc.EH.dragOffsetX):(0-isc.EH.dragOffsetY);this.resizeTarget(this.target,!this.vertical,this.resizeInRealTime,_1,null,null,this.targetAfter)},dragStop:function(){if(this.showDown)this.setState("");this.finishTargetResize(this.target,!this.vertical,this.resizeInRealTime)},click:function(){if(this.canCollapse!=true)return;if(this.ns.EH.$129k()&&this.canCollapseOnTap!=true)return;var _1=this.hideTarget||this.target;if(!this.target)return;if(_1.visibility=='hidden'){if(isc.isA.Layout(_1.parentElement))_1.parentElement.showMember(_1);else _1.show()}else{if(isc.isA.Layout(_1.parentElement))_1.parentElement.hideMember(_1);else _1.hide()}
this.setState("")}};isc.defineClass("Splitbar","StretchImg");isc.A=isc.Splitbar.getPrototype();isc.A.skinImgDir="images/Splitbar/";isc.A.imageType="stretch";isc.A.capSize=3;isc.A.vSrc="[SKIN]vsplit.gif";isc.A.hSrc="[SKIN]hsplit.gif";isc.Splitbar.addMethods(isc.$6y,isc.$6z)
isc.defineClass("ImgSplitbar","Img");isc.A=isc.ImgSplitbar.getPrototype();isc.A.skinImgDir="images/Splitbar/";isc.A.imageType="center";isc.A.hSrc="[SKIN]hgrip.png";isc.A.vSrc="[SKIN]vgrip.png";isc.A.styleName="splitbar";isc.A.showDown=true;isc.ImgSplitbar.addMethods(isc.$6y,isc.$6z)
isc.addGlobal("StretchImgSplitbar",isc.Splitbar);isc.addGlobal("LayoutResizeBar",isc.Splitbar);isc.defineClass("HSplitbar","Splitbar");isc.A=isc.HSplitbar.getPrototype();isc.A.vertical=false;isc.defineClass("VSplitbar","Splitbar");isc.defineClass("Stretchbar","Splitbar");isc.A=isc.Stretchbar.getPrototype();isc.A.canResize=false;isc.A.skinImgDir="images/Stretchbar/";isc.A.showRollOver=true;isc.defineClass("HStretchbar","Stretchbar");isc.A=isc.HStretchbar.getPrototype();isc.A.vertical=false;isc.A.src="[SKIN]hsplit.gif";isc.A.defaultHeight=10;isc.defineClass("VStretchbar","Stretchbar");isc.A=isc.VStretchbar.getPrototype();isc.A.src="[SKIN]vsplit.gif";isc.A.defaultWidth=10;isc.defineClass("Snapbar","Splitbar");isc.A=isc.Snapbar.getPrototype();isc.A.showRollOver=true;isc.A.showDown=true;isc.A.showGrip=true;isc.A.showDownGrip=true;isc.A.showRollOverGrip=true;isc.A.showClosedGrip=true;isc.A.gripImgSuffix="snap";isc.defineClass("ToolStripResizer","ImgSplitbar");isc.A=isc.ToolStripResizer.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.skinImgDir="images/ToolStrip/";isc.A.vSrc="[SKIN]resizer.png";isc.A.hSrc="[SKIN]hresizer.png";isc.A.layoutAlign="center";isc.A.resizeInRealTime=true;isc.A.showDown=false;isc.A.imageLength=20;isc.A.imageBreadth=14;isc.A.imageType="center";isc.B.push(isc.A.initWidget=function isc_ToolStripResizer_initWidget(){this.imageWidth=this.vertical?this.imageBreadth:this.imageLength;this.imageHeight=this.vertical?this.imageLength:this.imageBreadth;this.Super("initWidget",arguments)});isc.B._maxIndex=isc.C+1;isc.A=isc.Canvas;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$o9="%";isc.A.$60="listPolicy";isc.B.push(isc.A.applyStretchResizePolicy=function isc_c_Canvas_applyStretchResizePolicy(_1,_2,_3,_4,_5){if(!_1)return;var _6=0,_7=0,_8=0,_9=0,_10=(_4?_1:[]),_11=this.logIsDebugEnabled(this.$60),_3=(_3||1);if(_11&&_4)_1=_1.duplicate();for(var i=0;i<_1.length;i++){_9=_1[i];if(_9==null||isc.is.emptyString(_9))_1[i]=_9=isc.star;if(isc.isA.Number(_9)){_10[i]=_9}else{if(_9==isc.star){_7++;_9=0}else if(_9.indexOf(this.$o9)>=0){if(_5!=null&&_5.fixedPercents){var _13=parseInt(_9);_9=_10[i]=Math.round((_13/100)*_2)}else{_6+=parseInt(_9);_9=0}}else{if(_5&&isc.isA.Number(_5[_9])){_9=_10[i]=_5[_9]}else{var _14=parseInt(_9);if(isc.isA.Number(_14)&&_14>=0){_10[i]=_9=_14}else{try{_9=isc.eval(_9)}catch(e){var _15=_5&&_5.logWarn?_5:this;_15.logWarn("StretchResizePolicy:  unable to convert size:"+_9+" to a valid size - reported error: '"+e+"'\n Complete set of sizes:"+_1);_9=null}
if(!isc.isA.Number(_9)||_9<0)_9=0;_10[i]=_9}}}}
_9=Math.max(_9,0);_8+=_9}
var _16=0;if(_7){if(_6>=100){_8+=(_7*_3)}else{_16=(100-_6)/_7;_6=100}}
if(_6>0){var _17=_2-_8,_18=Math.max(0,_17/_6),_19=null;for(i=0;i<_1.length;i++){_9=_1[i];if(isc.isA.String(_9)){var _20;if(_9==isc.star){_20=_16*_18}else if(_9.indexOf(this.$o9)>=0){_20=parseInt(_9)*_18}else{continue}
_20=Math.max(Math.floor(_20),_3);_17-=_20;_19=i;_10[i]=_20}}
if(_17>0)_10[_19]+=_17}
if(_11){this.logDebug("stretchResize"+(_5?" for "+_5.ID:"")+" with totalSize: "+_2+",  desired sizes: "+_1+",  calculated sizes: "+_10,"listPolicy")}
return _10});isc.B._maxIndex=isc.C+1;isc.ClassFactory.defineClass("GroupingMessages");isc.A=isc.GroupingMessages;isc.A.upcomingTodayTitle="Today";isc.A.upcomingTomorrowTitle="Tomorrow";isc.A.upcomingThisWeekTitle="This Week";isc.A.upcomingNextWeekTitle="Next Week";isc.A.upcomingNextMonthTitle="Next Month";isc.A.upcomingBeforeTitle="Before";isc.A.upcomingLaterTitle="Later";isc.A.byDayTitle="by Day";isc.A.byWeekTitle="by Week";isc.A.byMonthTitle="by Month";isc.A.byQuarterTitle="by Quarter";isc.A.byYearTitle="by Year";isc.A.byDayOfMonthTitle="by Day of Month";isc.A.byUpcomingTitle="by Upcoming";isc.A.byHoursTitle="by Hours";isc.A.byMinutesTitle="by Minutes";isc.A.bySecondsTitle="by Seconds";isc.A.byMillisecondsTitle="by Milliseconds";isc.A.weekNumberTitle="Week #";isc.A.timezoneMinutesSuffix="minutes";isc.A.timezoneSecondsSuffix="seconds";isc.builtinTypes={text:{validators:{type:"isString",typeCastValidator:true}},"boolean":{validators:{type:"isBoolean",typeCastValidator:true}},integer:{validators:{type:"isInteger",typeCastValidator:true},normalDisplayFormatter:function(_1,_2){if(isc.isA.Number(_1))return _1.toFormattedString();return _1},getGroupValue:function(_1,_2,_3,_4,_5){var g=_3.groupGranularity;return g?Math.ceil(_1/g):_1},getGroupTitle:function(_1,_2,_3,_4,_5){var g=_3.groupGranularity;return g?((_1-1)*g)+" - "+(_1*g):_1}},"float":{validators:{type:"isFloat",typeCastValidator:true},normalDisplayFormatter:function(_1,_2){if(isc.isA.Number(_1))return _1.toFormattedString();return _1},getGroupValue:function(_1,_2,_3,_4,_5){_3.groupPrecision=parseInt(_3.groupPrecision);if(_3.groupPrecision<0)_3.groupPrecision=_3.groupPrecision*-1;var p=_3.groupPrecision?Math.pow(10,_3.groupPrecision):null;return p?Math.floor(_1*p)/p:_1},getGroupTitle:function(_1,_2,_3,_4,_5){return _3.groupPrecision?_1+"*":_1}},date:{validators:{type:"isDate",typeCastValidator:true},normalDisplayFormatter:function(_1,_2){if(isc.isA.Date(_1))return _1.toNormalDate();return _1},getGroupingModes:function(){return{day:isc.GroupingMessages.byDayTitle,week:isc.GroupingMessages.byWeekTitle,month:isc.GroupingMessages.byMonthTitle,quarter:isc.GroupingMessages.byQuarterTitle,year:isc.GroupingMessages.byYearTitle,dayOfMonth:isc.GroupingMessages.byDayOfMonthTitle,upcoming:isc.GroupingMessages.byUpcomingTitle}},defaultGroupingMode:"day",groupingMode:this.defaultGroupingMode,getGroupValue:function(_1,_2,_3,_4,_5){var _6=_1;var _7=_3.groupingMode=(_3.groupingMode||_3.$62.defaultGroupingMode||null);if(isc.isA.Date(_1)&&_7){switch(_7){case"year":_6=_1.getFullYear();break;case"quarter":_6=Math.floor(_1.getMonth()/3)+1;break;case"month":_6=_1.getMonth();break;case"week":_6=_1.getWeek();break;case"day":case"dayOfWeek":_6=_1.getDay();break;case"dayOfMonth":_6=_1.getDate();break;case"timezoneHours":_6=_1.getTimezoneOffset()/60;break;case"timezoneMinutes":_6=_1.getTimezoneOffset();break;case"timezoneSeconds":_6=_1.getTimezoneOffset()*60;break;case"upcoming":var _8=new Date();if(_8.isToday(_1))return 1;else if(_8.isTomorrow(_1))return 2;else if(_8.isThisWeek(_1))return 3;else if(_8.isNextWeek(_1))return 4;else if(_8.isNextMonth(_1))return 5;else if(_8.isBeforeToday(_1))return 7;else return 6;break}}
return _6},getGroupTitle:function(_1,_2,_3,_4,_5){var _6=_1;var _7=_3.groupingMode=(_3.groupingMode||_3.$62.defaultGroupingMode||null);if(_7&&_1!="-none-"){switch(_7){case"month":_6=Date.getShortMonthNames()[_1];break;case"quarter":_6="Q"+_1;break;case"week":_6=isc.GroupingMessages.weekNumberTitle+_1;break;case"day":case"dayOfWeek":_6=Date.getShortDayNames()[_1];break;case"dayOfMonth":_6=_1;break;case"timezoneHours":_6="GMT+"+_1;break;case"timezoneMinutes":_6="GMT+"+_1+" "+isc.GroupingMessages.timezoneMinutesSuffix;break;case"timezoneSeconds":_6="GMT+"+_1+" "+isc.GroupingMessages.timezoneSecondsSuffix;break;case"upcoming":var _8=new Date();if(_1==1)return isc.GroupingMessages.upcomingTodayTitle;else if(_1==2)return isc.GroupingMessages.upcomingTomorrowTitle;else if(_1==3)return isc.GroupingMessages.upcomingThisWeekTitle;else if(_1==4)return isc.GroupingMessages.upcomingNextWeekTitle;else if(_1==5)return isc.GroupingMessages.upcomingNextMonthTitle;else if(_1==7)return isc.GroupingMessages.upcomingBeforeTitle;else return isc.GroupingMessages.upcomingLaterTitle;break}}
return _6}},time:{validators:{type:"isTime",typeCastValidator:true},normalDisplayFormatter:function(_1,_2){if(isc.isA.Date(_1))return isc.Time.toTime(_1,null,true);return _1},getGroupingModes:function(){return{hours:isc.GroupingMessages.byHoursTitle,minutes:isc.GroupingMessages.byMinutesTitle,seconds:isc.GroupingMessages.bySecondsTitle,milliseconds:isc.GroupingMessages.byMillisecondsTitle}},defaultGroupingMode:"hours",groupingMode:this.defaultGroupingMode,getGroupValue:function(_1,_2,_3,_4,_5){var _6=_1;var _7=_3.groupingMode=(_3.groupingMode||_3.$62.defaultGroupingMode||null);if(isc.isA.Date(_1)&&_7){switch(_7){case"hours":_6=_1.getHours();break;case"minutes":_6=_1.getMinutes();break;case"seconds":_6=_1.getSeconds();break;case"milliseconds":_6=_1.getMilliseconds();break}}
return _6},getGroupTitle:function(_1,_2,_3,_4,_5){var _6=_1;var _7=_3.groupingMode||_3.$62.defaultGroupingMode||null;if(_7&&_1!="-none-"){switch(_7){case"hours":case"minutes":case"seconds":case"milliseconds":_6=_1;break}}
return _6}},string:{inheritsFrom:"text"},"int":{inheritsFrom:"integer"},"long":{inheritsFrom:"integer"},number:{inheritsFrom:"integer"},decimal:{inheritsFrom:"float"},"double":{inheritsFrom:"float"},datetime:{inheritsFrom:"date",normalDisplayFormatter:function(_1,_2){if(isc.isA.Date(_1))return _1.toShortDateTime(null,true);return _1}},dateTime:{inheritsFrom:"datetime"},positiveInteger:{inheritsFrom:"integer",validators:{type:"integerRange",min:0}},integerPercent:{inheritsFrom:"integer",validators:{type:"integerRange",min:0,max:100}},percent:{inheritsFrom:"integerPercent"},sequence:{inheritsFrom:"integer"},"enum":{validators:"isOneOf"},"intEnum":{inheritsFrom:"integer",validators:"isOneOf"},regexp:{inheritsFrom:"text",validators:"isRegexp"},identifier:{inheritsFrom:"text",validators:"isIdentifier"},URL:{inheritsFrom:"text"},image:{inheritsFrom:"text"},HTML:{inheritsFrom:"text"},measure:{validators:"isMeasure"},integerOrAuto:{validators:"integerOrAuto"},expression:{inheritsFrom:"text"},method:{inheritsFrom:"text"},"function":{inheritsFrom:"text"},alignEnum:{inheritsFrom:"enum",valueMap:{left:"left",center:"center",right:"right"}},valignEnum:{inheritsFrom:"enum",valueMap:{top:"top",bottom:"bottom",center:"center"}},sideEnum:{inheritsFrom:"enum",valueMap:{left:"left",right:"right",top:"top",bottom:"bottom"}},color:{inheritsFrom:"string",validators:"isColor"},modifier:{inheritsFrom:"text",hidden:true,canEdit:false},modifierTimestamp:{inheritsFrom:"datetime",hidden:true,canEdit:false},creator:{inheritsFrom:"text",hidden:true,canEdit:false},creatorTimestamp:{inheritsFrom:"datetime",hidden:true,canEdit:false},password:{inheritsFrom:"text",normalDisplayFormatter:function(_1,_2){return new Array((_1&&_1.length>0?_1.length+1:0)).join("*")},shortDisplayFormatter:function(_1,_2){return new Array((_1&&_1.length>0?_1.length+1:0)).join("*")}},localeInt:{inheritsFrom:"integer",normalDisplayFormatter:function(_1,_2){if(!isc.isA.Number(_1))_1=this.parseInput(_1);if(!isc.isA.Number(_1))return _1;return isc.NumberUtil.toLocalizedString(_1)},shortDisplayFormatter:function(_1,_2){if(!isc.isA.Number(_1))_1=this.parseInput(_1);if(!isc.isA.Number(_1))return _1;return isc.NumberUtil.toLocalizedString(_1)},editFormatter:function(_1){if(isc.isA.String(_1))return _1;return isc.NumberUtil.toLocalizedString(_1)},parseInput:function(_1){var _2=isc.NumberUtil.parseLocaleInt(_1);if(isNaN(_2)){return _1}else{return _2}}},localeFloat:{inheritsFrom:"float",normalDisplayFormatter:function(_1,_2){if(!isc.isA.Number(_1))_1=this.parseInput(_1);if(!isc.isA.Number(_1))return _1;return isc.NumberUtil.floatValueToLocalizedString(_1,_2.decimalPrecision,_2.decimalPad)},shortDisplayFormatter:function(_1,_2){if(!isc.isA.Number(_1))_1=this.parseInput(_1);if(!isc.isA.Number(_1))return _1;return isc.NumberUtil.floatValueToLocalizedString(_1,_2.decimalPrecision,_2.decimalPad)},editFormatter:function(_1,_2){if(isc.isA.String(_1))return _1;return isc.NumberUtil.floatValueToLocalizedString(_1,_2.decimalPrecision,_2.decimalPad)},parseInput:function(_1){var _2=isc.NumberUtil.parseLocaleFloat(_1);if(isNaN(_2)){return _1}else{return _2}}},localeCurrency:{inheritsFrom:"decimal",normalDisplayFormatter:function(_1,_2){if(!isc.isA.Number(_1))_1=this.parseInput(_1);if(!isc.isA.Number(_1))return _1;return isc.NumberUtil.toCurrencyString(_1)},shortDisplayFormatter:function(_1,_2){if(!isc.isA.Number(_1))_1=this.parseInput(_1);if(!isc.isA.Number(_1))return _1;return isc.NumberUtil.toCurrencyString(_1)},editFormatter:function(_1){if(isc.isA.String(_1))return _1;return isc.NumberUtil.toCurrencyString(_1)},parseInput:function(_1){var _2=isc.NumberUtil.parseLocaleCurrency(_1);if(isNaN(_2)){return _1}else{return _2}}},phoneNumber:{inheritsFrom:"text",browserInputType:"tel",normalDisplayFormatter:function(_1,_2){if(_1==null||_1=="")return _1;return"<a href='tel:"+_1+"' class='sc_phoneNumber'>"+_1+"</a>"},shortDisplayFormatter:function(_1,_2){if(_1==null||_1=="")return _1;return"<a href='tel:"+_1+"' class='sc_phoneNumber'>"+_1+"</a>"}}};(function(){for(var _1 in isc.builtinTypes){isc.builtinTypes[_1].name=_1}})();isc.defineClass("SimpleType");isc.A=isc.SimpleType;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$7a="typeCastValidator";isc.A.$71g={title:function(_1,_2){if(_2.summaryValueTitle!=null)return _2.summaryValueTitle;return _2.title},sum:function(_1,_2,_3){var _4=_3!=null?_3:isc.SimpleType.$141p();var _5=0;for(var i=0;i<_1.length;i++){var _7=isc.Canvas.$70o(null,_2,_1[i],_3,true),_8=parseFloat(_7);if(_7==null||_7===isc.emptyString){continue}
if(isc.isA.Number(_8)&&(_8==_7))_5+=_8;else{if((_2.userFormula||_2.userSummary)&&_7==_4.badFormulaResultValue||_7==_4.invalidSummaryValue)continue;return null}}
return _5},avg:function(_1,_2,_3){var _4=_3!=null?_3:isc.SimpleType.$141p();var _5=0,_6=0;for(var i=0;i<_1.length;i++){var _8=isc.Canvas.$70o(null,_2,_1[i],_3,true),_9=parseFloat(_8);if(_8==null||_8===isc.emptyString){continue}
if(isc.isA.Number(_9)&&(_9==_8)){_6+=1;_5+=_9}else{if((_2.userFormula||_2.userSummary)&&_8==_4.badFormulaResultValue||_8==_4.invalidSummaryValue)continue;return null}}
return _6>0?_5/_6:null},max:function(_1,_2,_3){var _4=_3!=null?_3:isc.SimpleType.$141p();var _5=(_2&&(_2.type=="date"));var _6;for(var i=0;i<_1.length;i++){var _8=isc.Canvas.$70o(null,_2,_1[i],_3,true);if(_8==null||_8===isc.emptyString){continue}
if(_5){if(!isc.isA.Date(_8))return null;if(_6==null||_8.getTime()>_6.getTime())_6=_8.duplicate()}else{var _9=parseFloat(_8);if(isc.isA.Number(_9)&&(_9==_8)){if(_6==null)_6=_9;else if(_6<_8)_6=_9}else{if((_2.userFormula||_2.userSummary)&&_8==_4.badFormulaResultValue||_8==_4.invalidSummaryValue)continue;return null}}}
return _6},min:function(_1,_2,_3){var _4=_3!=null?_3:isc.SimpleType.$141p();var _5=(_2.type=="date")
var _6;for(var i=0;i<_1.length;i++){var _8=isc.Canvas.$70o(null,_2,_1[i],_3,true);if(_8==null||_8===isc.emptyString){continue}
if(_5){if(!isc.isA.Date(_8))return null;if(_6==null||_8.getTime()<_6.getTime())_6=_8.duplicate()}else{var _9=parseFloat(_8);if(isc.isA.Number(_9)&&(_9==_8)){if(_6==null)_6=_9;else if(_6>_8)_6=_9}else{if((_2.userFormula||_2.userSummary)&&_8==_4.badFormulaResultValue||_8==_4.invalidSummaryValue)continue;return null}}}
return _6},multiplier:function(_1,_2,_3){var _4=_3!=null?_3:isc.SimpleType.$141p();var _5=0;for(var i=0;i<_1.length;i++){var _7=isc.Canvas.$70o(null,_2,_1[i],_3,true);var _8=parseFloat(_7);if(isc.isA.Number(_8)&&(_8==_7)){if(i==0)_5=_8;else _5=(_5*_8)}else{if((_2.userFormula||_2.userSummary)&&_7==_4.badFormulaResultValue||_7==_4.invalidSummaryValue)continue;return null}}
return _5},count:function(_1){return _1.length},first:function(_1,_2,_3){return isc.SimpleType.applySummaryFunction(_1,_2,"min",_3)},concat:function(_1,_2,_3){var _4="";for(var i=0;i<_1.length;i++){var _6=isc.Canvas.$70o(null,_2,_1[i],_3,true);_4+=_6}
return _4}};isc.B.push(isc.A.getType=function isc_c_SimpleType_getType(_1,_2){if(_2)return _2.getType(_1);var _3=isc.builtinTypes[_1];return _3},isc.A.getBaseType=function isc_c_SimpleType_getBaseType(_1,_2){if(isc.isA.String(_1))_1=this.getType(_1,_2);if(_1==null)return null;while(_1.inheritsFrom){var _3=this.getType(_1.inheritsFrom,_2);if(_3==null)return null;_1=_3}
return _1.name},isc.A.inheritsFrom=function isc_c_SimpleType_inheritsFrom(_1,_2,_3){if(_2==null){this.logWarn("inheritsFrom passed null type");return false}
if(isc.isA.String(_1))_1=this.getType(_1,_3);if(_1==null)return false;if(_1.name==_2)return true;while(_1.inheritsFrom){var _4=this.getType(_1.inheritsFrom,_3);if(_4==null)return null;if(_4.name==_2)return true;_1=_4}
return false},isc.A.validateValue=function isc_c_SimpleType_validateValue(_1,_2,_3){var _4={name:"$42j",type:_1};isc.SimpleType.addTypeDefaults(_4);var _3=_3||isc.DS.get("Object");return _3.validateFieldValue(_4,_2)},isc.A.addTypeDefaults=function isc_c_SimpleType_addTypeDefaults(_1,_2){if(_1==null||_1.$61)return;_1.$61=true;var _3=this.getType(_1.type,_2);if(_3==null)return;_1.$62=_3;if(_1.valueMap==null){var _4=this.getInheritedProperty(_3,"valueMap",_2);if(_4!=null)_3.valueMap=_1.valueMap=_4}
if(_1.editorType==null){var _5=this.getInheritedProperty(_3,"editorType",_2);if(_5!=null)_3.editorType=_1.editorType=_5}
if(_1.readOnlyEditorType==null){var _5=this.getInheritedProperty(_3,"readOnlyEditorType",_2);if(_5!=null)_3.readOnlyEditorType=_1.readOnlyEditorType=_5}
if(_1.browserInputType==null){var _6=this.getInheritedProperty(_3,"browserInputType",_2);if(_6!=null)_3.browserInputType=_1.browserInputType=_6}
var _7=this.getInheritedProperty(_3,"editorProperties",_2);if(_7!=null){if(_1.editorProperties!=null){_1.editorProperties=isc.addProperties({},_7,_1.editorProperties)}else{_1.editorProperties=isc.addProperties({},_7)}}
var _8=this.getInheritedProperty(_3,"readOnlyEditorProperties",_2);if(_8!=null){if(_1.readOnlyEditorProperties!=null){isc.addProperties(_8,_1.readOnlyEditorProperties)}
_1.readOnlyEditorProperties=_8}
var _9=this.getInheritedProperty(_3,"shortDisplayFormatter",_2)
if(_9!=null)_3.shortDisplayFormatter=_1.$63=_9;var _9=this.getInheritedProperty(_3,"normalDisplayFormatter",_2)
if(_9!=null)_3.normalDisplayFormatter=_1.$64=_9;var _9=this.getInheritedProperty(_3,"editFormatter",_2)
if(_9!=null)_3.editFormatter=_1.$65=_9;var _10=this.getInheritedProperty(_3,"parseInput",_2)
if(_10!=null)_3.parseInput=_1.$66=_10;var _11=this.getValidators(_3,_2);if(_11==null)return;if(!_1.validators){_1.validators=_11}else{if(!isc.isAn.Array(_1.validators))_1.validators=[_1.validators];_1.validators.addAsList(_11);this.$67(_1.validators)}},isc.A.getInheritedProperty=function isc_c_SimpleType_getInheritedProperty(_1,_2,_3){while(_1!=null){if(_1[_2]!=null)return _1[_2]
_1=this.getType(_1.inheritsFrom,_3)}},isc.A.getValidators=function isc_c_SimpleType_getValidators(_1,_2){if(isc.isA.String(_1))_1=this.getType(_1,_2);if(_1.$68)return _1.validators;var _3=_1.validators;if(_3!=null){if(!isc.isAn.Array(_3))_3=[_3];var _4=[];for(var i=0;i<_3.length;i++){var _6=_3[i];if(isc.isA.String(_6)){_6={"type":_6}}else if(_6.type==null&&isc.isAn.emptyObject(_6)){continue}
_6._generated=true;_4.add(_6)}
_3=_4}
var _7=_1.inheritsFrom;if(_7!=null){var _8=this.getType(_7,_2);if(_8!=null){var _9=this.getValidators(_8,_2);if(_9!=null){_3=_3||[];_3.addAsList(_9);this.$67(_3)}}}
if(_3)_3.$69=true;_1.validators=_3;_1.$68=true;return _3},isc.A.$67=function isc_c_SimpleType__reorderTypeValidator(_1){var _2=_1.find(this.$7a,true);if(_2){var _3=_2.type;for(var i=0;i<_1.length;i++){if(_1[i].type==_3)break}
if(i!=0)_1.unshift(_1[i]);_1[0].stopIfFalse=true}},isc.A.$141p=function isc_c_SimpleType__getDefaultSummaryConfiguration(){return{invalidSummaryValue:isc.ListGrid==null?"&nbsp;":isc.ListGrid.getInstanceProperty("invalidSummaryValue"),badFormulaResultValue:isc.DataBoundComponent==null?".":isc.Canvas.getInstanceProperty("badFormulaResultValue")}},isc.A.registerSummaryFunction=function isc_c_SimpleType_registerSummaryFunction(_1,_2){if(_1==null)return;if(isc.isA.String(_2)){_2=isc.Func.expressionToFunction("records,field,displayComponent",_1)}
this.$71g[_1]=_2},isc.A.setDefaultSummaryFunction=function isc_c_SimpleType_setDefaultSummaryFunction(_1,_2){var _3=this.getType(_1);if(_3)_3.$71h=_2},isc.A.getDefaultSummaryFunction=function isc_c_SimpleType_getDefaultSummaryFunction(_1){var _2=this.getType(_1);if(_2){if(_2.$71h!=null){return _2.$71h}
if(_2.inheritsFrom!=null&&_2.inheritsFrom!=_1){return this.getDefaultSummaryFunction(_2.inheritsFrom)}}},isc.A.applySummaryFunction=function isc_c_SimpleType_applySummaryFunction(_1,_2,_3,_4){if(!_3||!_2||!_1)return;if(isc.isA.String(_3)){if(this.$71g[_3]){_3=this.$71g[_3]}else{_3=isc.Func.expressionToFunction("records,field,displayComponent",_3)}}
if(isc.isA.Function(_3)){return _3(_1,_2,_4)}});isc.B._maxIndex=isc.C+13;isc.SimpleType.setDefaultSummaryFunction("integer","sum");isc.SimpleType.setDefaultSummaryFunction("float","sum");isc.A=isc.SimpleType.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.init=function isc_SimpleType_init(){if(!this.name)this.name=isc.ClassFactory.getNextGlobalID(this);if(isc.builtinTypes[this.name]!=null){if(!this.xmlSource){this.logWarn("SimpleType '"+this.name+"' defined twice: "+this.getStackTrace());isc.builtinTypes[this.name]=this}}else{isc.builtinTypes[this.name]=this}
if(this.validOperators!=null){isc.DataSource.setTypeOperators(this.name,this.validOperators)}});isc.B._maxIndex=isc.C+1;isc.SimpleType.getPrototype().toString=function(){return"["+this.Class+" name="+this.name+(this.inheritsFrom?" inheritsFrom="+this.inheritsFrom:"")+"]"};isc.defineClass("NavigationButton","Button");isc.A=isc.NavigationButton.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.padding=5;isc.A.autoFit=true;isc.A.baseStyle="navButton";isc.A.backBaseStyle="navBackButton";isc.A.forwardBaseStyle="navForwardButton";isc.A.direction="none";isc.B.push(isc.A.initWidget=function isc_NavigationButton_initWidget(){this.Super("initWidget",arguments);this.setBaseStyle(this.getBaseStyleName())},isc.A.setNavigationDirection=function isc_NavigationButton_setNavigationDirection(_1){this.direction=_1;this.setBaseStyle(this.getBaseStyleName())},isc.A.getNavigationDirection=function isc_NavigationButton_getNavigationDirection(){return this.direction},isc.A.getBaseStyleName=function isc_NavigationButton_getBaseStyleName(){if(this.direction=="back"){return this.backBaseStyle}
if(this.direction=="forward"){return this.forwardBaseStyle}
return this.baseStyle});isc.B._maxIndex=isc.C+4;isc.defineClass("NavigationBar","HLayout");isc.A=isc.NavigationBar.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.width="100%";isc.A.height=44;isc.A.styleName="navToolbar";isc.A.leftButtonTitle="&nbsp;";isc.A.leftButtonDefaults={_constructor:"NavigationButton",direction:"back",layoutAlign:"center"};isc.A.titleLabelDefaults={_constructor:"Label",width:"*",height:42,styleName:"navBarHeader",align:"center",valign:"center"};isc.A.rightButtonTitle="&nbsp;";isc.A.rightButtonDefaults={_constructor:"NavigationButton",direction:"forward",layoutAlign:"center"};isc.A.showRightButton=false;isc.A.autoChildren=["leftButton","titleLabel","rightButton"];isc.A.controls=["leftButton","titleLabel","rightButton"];isc.B.push(isc.A.setControls=function isc_NavigationBar_setControls(_1){this.controls=_1;var _2=[];for(var i=0;i<_1.length;i++){var _4=_1[i];if(isc.isA.String(_4))_4=this[_4];_2[i]=_4}
this.setMembers(_2)},isc.A.initWidget=function isc_NavigationBar_initWidget(){this.Super("initWidget",arguments);var _1={click:function(){if(this.creator.navigationClick)this.creator.navigationClick(this.direction)}};if(this.leftButtonTitle!=null)_1.title=this.leftButtonTitle;if(this.leftButtonIcon!=null)_1.icon=this.leftButtonIcon;this.leftButton=this.createAutoChild("leftButton",_1);this.setShowLeftButton(this.showLeftButton!=false);this.titleLabel=this.createAutoChild("titleLabel",{contents:this.title});var _2={click:function(){if(this.creator.navigationClick)this.creator.navigationClick(this.direction)}};if(this.rightButtonTitle!=null)_2.title=this.rightButtonTitle;if(this.rightButtonIcon!=null)_2.icon=this.rightButtonIcon;this.rightButton=this.createAutoChild("rightButton",_2);this.setShowRightButton(this.showRightButton!=false);this.setControls(this.controls)},isc.A.setTitle=function isc_NavigationBar_setTitle(_1){this.title=_1;this.titleLabel.setContents(this.title)},isc.A.setLeftButtonTitle=function isc_NavigationBar_setLeftButtonTitle(_1){this.leftButtonTitle=_1;if(this.leftButton)this.leftButton.setTitle(_1)},isc.A.setLeftButtonIcon=function isc_NavigationBar_setLeftButtonIcon(_1){this.leftButtonIcon=_1;if(this.leftButton)this.leftButton.setIcon(_1)},isc.A.setShowLeftButton=function isc_NavigationBar_setShowLeftButton(_1){if(this.leftButton==null)return;var _2=(this.leftButton.visibility!=isc.Canvas.HIDDEN);if(_1==_2)return;this.showLeftButton=_1;this.leftButton.setVisibility(_1?isc.Canvas.INHERIT:isc.Canvas.HIDDEN)},isc.A.setRightButtonTitle=function isc_NavigationBar_setRightButtonTitle(_1){if(this.rightButton)this.rightButton.setTitle(_1)},isc.A.setRightButtonIcon=function isc_NavigationBar_setRightButtonIcon(_1){this.rightButtonIcon=_1;if(this.rightButton)this.rightButton.setIcon(_1)},isc.A.setShowRightButton=function isc_NavigationBar_setShowRightButton(_1){if(this.rightButton==null)return;var _2=(this.rightButton.visibility!=isc.Canvas.HIDDEN);if(_1==_2)return;this.showRightButton=_1;this.rightButton.setVisibility(_1?isc.Canvas.INHERIT:isc.Canvas.HIDDEN)});isc.B._maxIndex=isc.C+9;isc.NavigationBar.registerStringMethods({navigationClick:"direction"});isc.defineClass("SplitPanePagedPanel","Canvas");isc.A=isc.SplitPanePagedPanel.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.overflow="hidden";isc.A.backgroundColor="#ffffff";isc.A.skinUsesCSSTransitions=false;isc.A.animateScrollDuration=350;isc.A.pagesContainerBaseStyle="splitPanePagedPanelPagesContainer";isc.A.pagesContainerDefaults={width:"100%",height:"100%",overflow:"visible",getTransformCSS:function(){var _1=this.creator;if(!isc.Browser.$139c||!_1.skinUsesCSSTransitions){return null}else{var _2=_1.currentPage,_3;if(_2>=0){_3=-(_1.isRTL()?_1.pages.length-1-_2:_2)*_1.getWidth()}else{_3=0}
return";"+isc.Element.$1387+": translateX("+_3+"px);"}},handleTransitionEnd:function(_1,_2){if(_2.target===this){this.$1393()}}};isc.A.currentPage=-1;isc.A.autoChildren=["pagesContainer"];isc.B.push(isc.A.initWidget=function isc_SplitPanePagedPanel_initWidget(){this.Super("initWidget",arguments);this.addAutoChild("pagesContainer",{styleName:this.pagesContainerBaseStyle});if(this.pages==null)this.pages=[];else this.$139d(this.pages);this.currentPage=Math.min(Math.max(0,this.currentPage),this.pages.length-1);this.$139e(this.currentPage)},isc.A.$139e=function isc_SplitPanePagedPanel__scrollToPage(_1,_2){if(this.pagesContainer==null)return;var _3;if(_1>=0){_3=-(this.isRTL()?this.pages.length-1-_1:_1)*this.getWidth()}else{_3=0}
if(!isc.Browser.$139c||!this.skinUsesCSSTransitions){if(_1>=0&&!_2){this.pagesContainer.animateMove(_3,0,null,this.animateScrollDuration)}else{if(this.moveAnimation!=null)this.finishAnimation(this.$0m);this.pagesContainer.setLeft(_3)}}else{var _4=this.pagesContainer;if(_1>=0&&!_2){_4.$1392();_4.setStyleName(this.pagesContainerBaseStyle+"Animated");isc.Element.$136r(_4,"translateX("+_3+"px)")}else{_4.$1393();isc.Element.$136r(_4,"translateX(0px)");_4.setStyleName(this.pagesContainerBaseStyle);isc.Element.$136r(_4,"translateX("+_3+"px)")}}},isc.A.setCurrentPage=function isc_SplitPanePagedPanel_setCurrentPage(_1,_2){var _3=this.currentPage;_1=this.currentPage=Math.min(Math.max(0,_1),this.pages.length-1);this.$139e(this.currentPage,_2)},isc.A.$139d=function isc_SplitPanePagedPanel__addPagesToPagesContainer(_1){var _2=this.isRTL();for(var i=0,_4=_1.length;i<_4;++i){var _5=_1[i];_5.resizeTo("100%","100%");_5.moveTo(((_2?_4-1-i:i)*100)+"%",0);this.pagesContainer.addChild(_5)}},isc.A.setPages=function isc_SplitPanePagedPanel_setPages(_1){if(_1==null){this.pages.map("deparent");this.pages.setLength(0)}else{var _2,_3=this.pages;if(_3.equals(_1))return;if(isc.screenReader){_2=_3}else{_2=[];for(var i=0,_5=_3.length;i<_5;++i){var _6=_3[i];if(!_1.contains(_6))_2.add(_6)}}
_2.map("deparent");_3.setArray(_1);this.$139d(_1)}
this.setCurrentPage(this.currentPage)},isc.A.resized=function isc_SplitPanePagedPanel_resized(_1,_2){if(_1>0)this.$139e(this.currentPage,true)});isc.B._maxIndex=isc.C+6;isc.defineClass("SplitPaneSidePanel","VLayout");isc.A=isc.SplitPaneSidePanel.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.width="42%";isc.A.height="100%";isc.A.overflow="hidden";isc.A.baseStyle="splitPaneSidePanel";isc.A.skinUsesCSSTransitions=false;isc.A.animateShowTime=225;isc.A.animateShowEffectConfig={effect:"slide",startFrom:"L"};isc.A.animateHideTime=200;isc.A.animateHideEffectConfig={effect:"slide",endAt:"L"};isc.A.navigationBarDefaults={_constructor:"NavigationBar",width:"100%"};isc.A.pagedPanelDefaults={_constructor:"SplitPanePagedPanel",width:"100%",height:"*"};isc.A.onScreen=false;isc.A.autoChildren=["navigationBar","pagedPanel"];isc.B.push(isc.A.initWidget=function isc_SplitPaneSidePanel_initWidget(){this.Super("initWidget",arguments);if(this.isRTL())this.setLeft("100%");this.addAutoChildren(this.autoChildren);this.$139f=this.baseStyle+"OffScreen";this.$139g=this.baseStyle+"OnScreen";if(!isc.Browser.$139c||!this.skinUsesCSSTransitions){this.setStyleName(this.baseStyle);this.hide()}else{this.setStyleName(this.$139f);this.show()}},isc.A.setPagedPanel=function isc_SplitPaneSidePanel_setPagedPanel(_1){if(this.pagedPanel!==_1){if(this.pagedPanel!=null)this.removeMember(this.pagedPanel);this.pagedPanel=_1;if(_1!=null){this.addMember(_1)}}},isc.A.getTransformCSS=function isc_SplitPaneSidePanel_getTransformCSS(){if(!isc.Browser.$139c||!this.skinUsesCSSTransitions||this.styleName===this.$139g){return null}else{var _1;if(this.onScreen){_1=this.isRTL()?"-100%":"0"}else{_1=this.isRTL()?"0":"-100%"}
return";"+isc.Element.$1387+": translateX("+_1+");"}},isc.A.slideIn=function isc_SplitPaneSidePanel_slideIn(){if(this.onScreen)return;this.showClickMask({target:this,methodName:"slideOut"},false,[this]);if(!isc.Browser.$139c||!this.skinUsesCSSTransitions){this.animateShow(this.animateShowEffectConfig)}else{this.show();this.setStyleName(this.$139g);var _1=this.isRTL()?"-100%":"0";isc.Element.$136r(this,"translateX("+_1+")")}
this.onScreen=true},isc.A.slideOut=function isc_SplitPaneSidePanel_slideOut(){if(!this.onScreen)return;this.hideClickMask();if(!isc.Browser.$139c||!this.skinUsesCSSTransitions){this.animateHide(this.animateHideEffectConfig)}else{this.setStyleName(this.$139f);if(this.isDrawn()){var _1=this.isRTL()?"0":"-100%";isc.Element.$136r(this,"translateX("+_1+")")}}
this.onScreen=false});isc.B._maxIndex=isc.C+5;isc.defineClass("SplitPane","VLayout");isc.A=isc.SplitPane.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.addHistoryEntries=true;isc.A.portraitSidePanelDefaults={_constructor:"SplitPaneSidePanel"};isc.A.handsetPagedPanelDefaults={_constructor:"SplitPanePagedPanel",width:"100%",height:"*"};isc.A.showSidePanelButtonDefaults={_constructor:"NavigationButton",click:function(){var _1=this.creator;var _2=this.creator.currentPane;if(_2==="list"||(_2==="detail"&&_1.$137t()))
{_1.showListPane(null,null,false,true)}else{_1.showNavigationPane(false,true)}}};isc.A.mainLayoutDefaults={_constructor:"HLayout"};isc.A.leftLayoutDefaults={_constructor:"VLayout",width:320};isc.A.rightLayoutDefaults={_constructor:"VLayout"};isc.A.navigationLayoutDefaults={_constructor:"VLayout"};isc.A.listLayoutDefaults={_constructor:"VLayout"};isc.A.detailLayoutDefaults={_constructor:"VLayout",overflow:"hidden"};isc.A.spacerDefaults={backgroundColor:"black",overflow:"hidden",width:1,height:"100%"};isc.A.showResizeBars=true;isc.A.navigationBarDefaults={_constructor:"NavigationBar",autoParent:"none",hieght:44,rightPadding:5,leftPadding:5,defaultLayoutAlign:"center",overflow:"hidden",navigationClick:function(_1){var _2=this.creator;if(_2.navigationClick!=null)_2.navigationClick(_1)}};isc.A.backButtonDefaults={_constructor:"NavigationButton",direction:"back",click:function(){var _1=this.creator;if(_1.currentPane==="detail"&&_1.$137t()&&_1.currentUIConfig!=="landscape")
{_1.showListPane()}else{_1.showNavigationPane()}
return false}};isc.A.currentPane="navigation";isc.A.listTitleLabelDefaults={_constructor:"Label",align:"center",valign:"center",width:"*",height:"100%"};isc.A.listToolStripDefaults={_constructor:"NavigationBar",rightPadding:5,leftPadding:5,defaultLayoutAlign:"center",overflow:"hidden",showLeftButton:false,showRightButton:false};isc.A.detailTitleLabelDefaults={_constructor:"Label",align:"center",valign:"center",width:"*",height:"100%"};isc.A.detailPaneContainerDefaults={_constructor:"VLayout"};isc.A.detailToolStripDefaults={_constructor:"NavigationBar",rightPadding:5,leftPadding:5,defaultLayoutAlign:"center",overflow:"hidden"};isc.A.autoChildren=["mainLayout","leftLayout","rightLayout","navigationLayout","listLayout","listToolStrip","detailLayout","detailToolStrip"];isc.A.showLeftButton=false;isc.A.showRightButton=false;isc.B.push(isc.A.isHandset=function isc_SplitPane_isHandset(){return this.deviceMode==null?isc.Browser.isHandset:this.deviceMode==="handset"},isc.A.isTablet=function isc_SplitPane_isTablet(){return this.deviceMode==null?isc.Browser.isTablet:this.deviceMode==="tablet"},isc.A.getPageOrientation=function isc_SplitPane_getPageOrientation(){return this.pageOrientation||isc.Page.getOrientation()},isc.A.initWidget=function isc_SplitPane_initWidget(){this.Super("initWidget",arguments);this.addAutoChildren(this.autoChildren,"none");this.addAutoChild("navigationBar",{showRightButton:this.showRightButton,showLeftButton:this.showLeftButton});if(this.isTablet()){this.portraitSidePanel=this.createAutoChild("portraitSidePanel",{showNavigationBar:this.showNavigationBar});this.$139h=this.portraitSidePanel.pagedPanel}else if(this.isHandset()){this.$139h=this.createAutoChild("handsetPagedPanel")}
this.addMember(this.mainLayout);if(this.navigationPane!=null){this.navigationPane.resizeTo("100%","100%");this.navigationPane.splitPane=this}
if(this.listPane!=null){this.listPane.resizeTo("100%","100%");this.listPane.splitPane=this}
if(this.detailPane!=null){this.detailPane.resizeTo("100%","100%");this.detailPane.splitPane=this}
if(this.pageOrientation==null){this.$137k=isc.Page.setEvent("orientationChange",this)}
this.$137l=this.getID()+"_";if(this.addHistoryEntries)this.$137m();this.pageOrientationChange()},isc.A.destroy=function isc_SplitPane_destroy(){if(this.$138i!=null){isc.History.unregisterCallback(this.$138i);delete this.$138i}
if(this.$137k!=null){isc.Page.clearEvent("orientationChange",this.$137k);delete this.$137k}
this.Super("destroy",arguments)},isc.A.draw=function isc_SplitPane_draw(){this.Super("draw",arguments);this.$137n()},isc.A.$137m=function isc_SplitPane__setUpDefaultHistoryManagement(){if(!isc.History){this.logError("addHistoryEntries is true, but the History module is not loaded.")}else if(this.$138i==null){this.$138i=isc.History.registerCallback({target:this,methodName:"historyCallback"},true,true)}
this.$137n()},isc.A.setAddHistoryEntries=function isc_SplitPane_setAddHistoryEntries(_1){this.addHistoryEntries=_1;if(_1)this.$137m();else if(this.$138i!=null){isc.History.unregisterCallback(this.$138i);delete this.$138i}},isc.A.$137n=function isc_SplitPane__maybeAddHistoryEntry(){if(!this.addHistoryEntries||!isc.History)return;if(!this.isDrawn())return;var _1=this.currentPane;var _2=this.$137l+_1;var _3=String(this.navigationTitle);var _4={$138l:this.$138l};if(_1==="navigation"){if(!(this.isTablet()||this.isHandset()))return;_4.title=this.navigationTitle}else if(_1==="list"){if(!(this.isTablet()||this.isHandset()))return;_3+=" > "+(this.listTitle==null?"":String(this.listTitle));_4.title=this.listTitle}else if(_1==="detail"){if(!this.isHandset())return;if(this.$137t()){_3+=" > "+(this.listTitle==null?"":String(this.listTitle))}
_3+=" > "+(this.detailTitle==null?"":String(this.detailTitle));_4.title=this.detailTitle}
if(!isc.Page.isLoaded()){isc.Page.setEvent("load",function(){isc.History.addHistoryEntry(_2,_3,_4)},isc.Page.FIRE_ONCE)}else{isc.History.addHistoryEntry(_2,_3,_4)}},isc.A.historyCallback=function isc_SplitPane_historyCallback(_1,_2){if(this.destroyed||_1==null)return;var _3=this.$137l;if(_1.startsWith(_3)){var _4=_1.substring(_3.length);if(_4==="navigation"){this.setNavigationTitle(_2.title);this.showNavigationPane(true)}else if(_4==="list"){this.showListPane(_2.title,_2.$138l,true)}else{this.showDetailPane(_2.title,_2.$138l,true)}}},isc.A.setCurrentPane=function isc_SplitPane_setCurrentPane(_1){if(_1==="navigation")this.showNavigationPane();else if(_1==="list")this.showListPane();else this.showDetailPane()},isc.A.setDetailToolButtons=function isc_SplitPane_setDetailToolButtons(_1){this.detailToolButtons=_1;this.updateDetailToolStrip()},isc.A.setPageOrientation=function isc_SplitPane_setPageOrientation(_1){if(this.pageOrientation!==_1){this.pageOrientation=_1;if(_1==null){if(this.$137k==null){this.$137k=isc.Page.setEvent("orientationChange",this)}}else if(this.$137k!=null){isc.Page.clearEvent("orientationChange",this.$137k);delete this.$137k}}
this.pageOrientationChange()},isc.A.pageOrientationChange=function isc_SplitPane_pageOrientationChange(){this.updateUI()},isc.A.$142j=function isc_SplitPane__getDetailPaneContainer(){var _1=this.detailPaneContainer;if(_1==null){_1=this.detailPaneContainer=this.createAutoChild("detailPaneContainer")}
var _2=[];if(this.detailPane!=null){this.detailPane.setHeight("*");_2.add(this.detailPane)}
if(this.detailToolButtons!=null&&!this.detailToolButtons.isEmpty()){this.updateDetailToolStrip();_2.add(this.detailToolStrip)}
_1.setMembers(_2);return _1},isc.A.updateUI=function isc_SplitPane_updateUI(_1){var _2=this.currentUIConfig,_3=this.$79m;var _4=this.currentUIConfig=this.getUIConfiguration(),_5=this.$79m=this.currentPane;if(!_1&&_4===_2&&_5===_3){if(_4==="handset"){this.$139h.$139e(this.$139h.currentPage,true)}
return}
this.updateNavigationBar();if(_4==="handset"){var _6;if(_2!=="handset"){_6=[];if(this.navigationPane!=null)_6.add(this.navigationPane);if(this.listPane!=null)_6.add(this.listPane);_6.add(this.$142j());this.$139h.setPages(_6)}else{_6=this.$139h.pages}
var _7=[];if(this.navigationBar!=null)_7.add(this.navigationBar);_7.add(this.$139h);if(_5==="navigation"){this.$139h.setCurrentPage(0,_2!=="handset")}else if(_5==="list"){this.$139h.setCurrentPage(1,_2!=="handset")}else{this.$139h.setCurrentPage((this.$137t()?2:1),_2!=="handset")}
this.navigationLayout.setMembers(_7);_7.setLength(0);_7.add(this.navigationLayout);this.mainLayout.setMembers(_7)}else if(_4==="portrait"){this.leftLayout.removeMembers(this.leftLayout.members);this.portraitSidePanel.setPagedPanel(this.$139h);this.updateDetailToolStrip();this.detailLayout.setMembers([this.detailToolStrip]);if(this.detailPane!=null)this.detailLayout.addMember(this.detailPane);this.mainLayout.setMembers([this.detailLayout]);var _6;if(_2!=="portrait"){_6=[];if(this.navigationPane!=null)_6.add(this.navigationPane);if(this.listPane!=null)_6.add(this.listPane);this.portraitSidePanel.pagedPanel.setPages(_6)}else{_6=this.portraitSidePanel.pagedPanel.pages}
if(_5==="navigation"){this.$139h.setCurrentPage(0,!this.portraitSidePanel.onScreen);this.portraitSidePanel.slideIn()}else if(_5==="list"){this.$139h.setCurrentPage(1,!this.portraitSidePanel.onScreen);this.portraitSidePanel.slideIn()}else{if(this.portraitSidePanel.onScreen){this.portraitSidePanel.slideOut()}}}else if(_4==="landscape"){this.portraitSidePanel.setPagedPanel(null);if(this.portraitSidePanel.onScreen){this.portraitSidePanel.slideOut()}
this.updateDetailToolStrip();var _7=[];if(this.detailToolStrip!=null)_7.add(this.detailToolStrip);if(this.detailPane!=null)_7.add(this.detailPane);this.detailLayout.setMembers(_7);var _6;if(_2!=="landscape"){_6=[];if(this.navigationPane!=null)_6.add(this.navigationPane);if(this.listPane!=null)_6.add(this.listPane);this.$139h.setPages(_6)}else{_6=this.$139h.pages}
if(_5==="navigation"){this.$139h.setCurrentPage(0,_2!=="landscape")}else if(_5==="list"){this.$139h.setCurrentPage(1,_2!=="landscape")}
_7.setLength(0);if(this.navigationBar!=null)_7.add(this.navigationBar);_7.add(this.$139h);this.leftLayout.setMembers(_7);this.rightLayout.setMembers([this.detailLayout]);_7.setLength(0);_7.add(this.leftLayout);if(this.showResizeBars){this.leftLayout.setShowResizeBar(true)}else{this.leftLayout.setShowResizeBar(false);if(this.spacer==null){this.spacer=this.createAutoChild("spacer")}
_7.add(this.spacer)}
_7.add(this.rightLayout);this.mainLayout.setMembers(_7)}else{var _7=[];if(this.navigationBar!=null)_7.add(this.navigationBar);if(this.navigationPane!=null)_7.add(this.navigationPane);this.navigationLayout.setMembers(_7);this.updateListToolStrip();this.updateDetailToolStrip();if(this.$137t()){_7.setLength(0);if(this.listToolStrip!=null)_7.add(this.listToolStrip);_7.add(this.listPane);this.listLayout.setMembers(_7);this.listLayout.setShowResizeBar(this.showResizeBars);_7.setLength(0);if(this.detailPane!=null){if(this.detailToolStrip!=null)_7.add(this.detailToolStrip);_7.add(this.detailPane)}
this.detailLayout.setMembers(_7)}else{_7.setLength(0);if(this.detailToolStrip!=null)_7.add(this.detailToolStrip);_7.add(this.detailPane);this.detailLayout.setMembers(_7)}
this.leftLayout.setMembers([this.navigationLayout]);this.leftLayout.setShowResizeBar(this.showResizeBars);_7.setLength(0);if(this.$137t())_7.add(this.listLayout);_7.add(this.detailLayout);this.rightLayout.setMembers(_7);this.mainLayout.setMembers([this.leftLayout,this.rightLayout])}},isc.A.updateListToolStrip=function isc_SplitPane_updateListToolStrip(){if(this.listToolStrip==null)return;if(this.currentUIConfig==="desktop"){this.updateListTitleLabel();var _1=[];if(this.listTitleLabel!=null)_1.add(this.listTitleLabel);this.listToolStrip.setMembers(_1)}},isc.A.updateListTitleLabel=function isc_SplitPane_updateListTitleLabel(){if(this.showListTitleLabel==false)return;if(this.listTitleLabel==null){this.listTitleLabel=this.createAutoChild("listTitleLabel")}
this.listTitleLabel.setContents(this.listTitle)},isc.A.updateDetailToolStrip=function isc_SplitPane_updateDetailToolStrip(){if(this.detailToolStrip==null)return;var _1=this.currentUIConfig;var _2;if(_1==="handset"){_2=[];_2.addList(this.detailToolButtons);if(this.detailTitleLabel&&this.detailTitleLabel.isDrawn()){this.detailTitleLabel.deparent()}
this.detailToolStrip.setProperty("align","center");this.detailToolStrip.setControls(_2)}else if(_1==="portrait"){var _3=(this.currentPane!=="navigation"&&this.listPane?this.listTitle:this.navigationTitle);if(this.showSidePanelButton==null){this.showSidePanelButton=this.createAutoChild("showSidePanelButton",{title:_3})}else{this.showSidePanelButton.setTitle(_3)}
this.updateDetailTitleLabel();_2=[this.showSidePanelButton];if(this.detailNavigationControl!=null)_2.add(this.detailNavigationControl);if(this.detailTitleLabel!=null)_2.add(this.detailTitleLabel);if(this.detailToolButtons!=null)_2.addList(this.detailToolButtons);this.detailToolStrip.setProperty("align","left");this.detailToolStrip.setControls(_2)}else{this.updateDetailTitleLabel();_2=[];if(this.detailTitleLabel!=null)_2.add(this.detailTitleLabel);if(this.detailToolButtons!=null)_2.addList(this.detailToolButtons);this.detailToolStrip.setProperty("align","left");this.detailToolStrip.setControls(_2)}},isc.A.updateDetailTitleLabel=function isc_SplitPane_updateDetailTitleLabel(){if(this.showDetailTitleLabel==false)return;if(this.detailTitleLabel==null){this.detailTitleLabel=this.createAutoChild("detailTitleLabel")}
this.detailTitleLabel.setContents(this.detailTitle)},isc.A.updateNavigationBar=function isc_SplitPane_updateNavigationBar(){var _1;if(this.currentUIConfig==="portrait"){_1=this.portraitSidePanel.navigationBar}else{_1=this.navigationBar}
if(_1==null)return;this.logInfo("updateNavigationBar, currentPane: "+this.currentPane+", currentUI: "+this.currentUIConfig);if((this.currentUIConfig==="handset"&&this.currentPane!=="navigation")||(this.currentUIConfig==="portrait"&&this.currentPane!=="navigation")||(this.currentUIConfig==="landscape"&&this.currentPane!=="navigation"&&this.$137t()))
{var _2;if(this.currentUIConfig==="landscape"){_2=(this.$137t()&&this.listPane.isVisible()?this.listTitle:this.navigationTitle)}else if(this.currentUIConfig==="portrait"){_2=(this.$137t()&&this.currentPane!=="navigation"?this.listTitle:this.navigationTitle)}else{_2=(this.currentPane==="detail"?this.detailTitle:(this.currentPane==="list"?this.listTitle:this.navigationTitle))}
if(!_2)_2="&nbsp;";_1.setTitle(_2);var _3;if(this.$138l!=null){_3=this.$138l}else{_3=this.isHandset()&&this.currentPane==="detail"&&this.$137t()?this.listTitle:this.navigationTitle}
if(this.backButton==null){this.backButton=this.createAutoChild("backButton",{title:_3})}else{this.backButton.setTitle(_3)}
var _4=[];if(this.currentUIConfig!=="portrait"||this.$137t()){_4.add(this.backButton)}
_4.add("leftButton");_4.add("titleLabel");if(this.detailNavigationControl!=null){_4.add(this.detailNavigationControl)}
_4.add("rightButton");_1.setControls(_4)}else{_1.setTitle(this.navigationTitle||"&nbsp;");_1.setControls(["leftButton","titleLabel","rightButton"])}
_1.setLeftButtonTitle(this.leftButtonTitle);_1.setRightButtonTitle(this.rightButtonTitle);_1.setShowLeftButton(this.showLeftButton);_1.setShowRightButton(this.showRightButton);if(this.currentUIConfig==="portrait"){}else if(this.currentUIConfig==="landscape"){var _5=(this.navigationBarProperties&&this.navigationBarProperties.styleName)||(this.navigationBarDefaults&&this.navigationBarDefaults.styleName)||this.navigationBar.getClass().getInstanceProperty("styleName");_1.setStyleName(_5)}},isc.A.getUIConfiguration=function isc_SplitPane_getUIConfiguration(){if(this.isHandset())return"handset";else if(this.isTablet()&&this.getPageOrientation()==="portrait")return"portrait";else if(this.isTablet()&&this.getPageOrientation()==="landscape")return"landscape";else return"desktop"},isc.A.setShowLeftButton=function isc_SplitPane_setShowLeftButton(_1){this.showLeftButton=_1;this.updateNavigationBar()},isc.A.setLeftButtonTitle=function isc_SplitPane_setLeftButtonTitle(_1){this.leftButtonTitle=_1;this.updateNavigationBar()},isc.A.setShowRightButton=function isc_SplitPane_setShowRightButton(_1){this.showRightButton=_1;this.updateNavigationBar()},isc.A.setRightButtonTitle=function isc_SplitPane_setRightButtonTitle(_1){this.rightButtonTitle=_1;this.updateNavigationBar()},isc.A.$79k=function isc_SplitPane__setNavigationPane(_1){if(this.navigationPane!=null){delete this.navigationPane.splitPane}
this.navigationPane=_1;_1.resizeTo("100%","100%");_1.splitPane=this;if(this.isTablet()||this.isHandset()){var _2=[];if(_1!=null)_2.add(_1);if(this.listPane!=null)_2.add(this.listPane);if(this.isHandset())_2.add(this.$142j());this.$139h.setPages(_2)}},isc.A.setNavigationPane=function isc_SplitPane_setNavigationPane(_1){this.$79k(_1);this.updateUI(true)},isc.A.setNavigationTitle=function isc_SplitPane_setNavigationTitle(_1){this.navigationTitle=_1;this.updateNavigationBar()},isc.A.showNavigationPane=function isc_SplitPane_showNavigationPane(_1,_2){var _3=this.currentPane!=null&&this.currentPane!=="navigation";this.currentPane="navigation";this.updateUI(_1||_2);if(_3){if(!_1){this.$137n()}
delete this.$138l;if(this.paneChanged!=null&&this.isDrawn())this.paneChanged("navigation")}},isc.A.$137t=function isc_SplitPane__hasListPane(){return this.listPane!=null},isc.A.$800=function isc_SplitPane__setListPane(_1){if(this.$137t()){delete this.listPane.splitPane}
this.listPane=_1;if(_1!=null){_1.resizeTo("100%","100%");_1.splitPane=this}
if(this.isTablet()||this.isHandset()){var _2=[];if(this.navigationPane!=null)_2.add(this.navigationPane);if(_1!=null)_2.add(_1);if(this.isHandset())_2.add(this.$142j());this.$139h.setPages(_2)}},isc.A.setListPane=function isc_SplitPane_setListPane(_1){this.$800(_1);this.updateUI(true)},isc.A.showListPane=function isc_SplitPane_showListPane(_1,_2,_3,_4){if(!this.$137t()){this.logWarn("Attempted to show the list pane, but this SplitPane does not have a list pane. Ignoring.");return}
var _5=(this.currentPane!=="list");if(_1!=null)this.listTitle=_1;if(_2!=null)this.$138l=_2;this.currentPane="list";this.updateUI(_1!=null||_2!=null||_3||_4);if(_5){if(!_3){this.$137n()}
delete this.$138l;if(this.paneChanged!=null&&this.isDrawn())this.paneChanged("list")}},isc.A.setListTitle=function isc_SplitPane_setListTitle(_1){this.listTitle=_1;this.updateNavigationBar();this.updateListToolStrip();this.updateDetailToolStrip()},isc.A.$79l=function isc_SplitPane__setDetailPane(_1){if(this.detailPane!=null){delete this.detailPane.splitPane}
this.detailPane=_1;_1.resizeTo("100%","100%");_1.splitPane=this;if(this.isHandset()){var _2=[];if(this.navigationPane!=null)_2.add(this.navigationPane);if(this.listPane!=null)_2.add(this.listPane);_2.add(this.$142j());this.$139h.setPages(_2)}},isc.A.setDetailPane=function isc_SplitPane_setDetailPane(_1){this.$79l(_1);this.updateUI(true)},isc.A.showDetailPane=function isc_SplitPane_showDetailPane(_1,_2,_3,_4){var _5=(this.currentPane!=="detail");if(_1!=null)this.detailTitle=_1;if(_2!=null)this.$138l=_2;this.currentPane="detail";this.updateUI(_1!=null||_2!=null||_3||_4);if(_5){if(!_3){this.$137n()}
delete this.$138l;if(this.paneChanged!=null&&this.isDrawn())this.paneChanged("detail")}},isc.A.setDetailTitle=function isc_SplitPane_setDetailTitle(_1){this.detailTitle=_1;if(this.currentUIConfig==="handset"){if(this.currentPane==="detail")this.updateNavigationBar()}else{this.updateDetailToolStrip()}},isc.A.setDetailNavigationControl=function isc_SplitPane_setDetailNavigationControl(_1){this.detailNavigationControl=_1;var _2=this.currentUIConfig!=="landscape"&&this.currentPane==="detail";if(_2)this.updateUI(true)});isc.B._maxIndex=isc.C+40;isc.SplitPane.registerStringMethods({navigationClick:"direction",paneChanged:"pane"});isc._nonDebugModules=(isc._nonDebugModules!=null?isc._nonDebugModules:[]);isc._nonDebugModules.push('Foundation');isc.checkForDebugAndNonDebugModules();isc._moduleEnd=isc._Foundation_end=(isc.timestamp?isc.timestamp():new Date().getTime());if(isc.Log&&isc.Log.logIsInfoEnabled('loadTime'))isc.Log.logInfo('Foundation module init time: '+(isc._moduleEnd-isc._moduleStart)+'ms','loadTime');delete isc.definingFramework;}else{if(window.isc&&isc.Log&&isc.Log.logWarn)isc.Log.logWarn("Duplicate load of module 'Foundation'.");}

// ISC_Containers.js

if(window.isc&&window.isc.module_Core&&!window.isc.module_Containers){isc.module_Containers=1;isc._moduleStart=isc._Containers_start=(isc.timestamp?isc.timestamp():new Date().getTime());if(isc._moduleEnd&&(!isc.Log||(isc.Log&&isc.Log.logIsDebugEnabled('loadTime')))){isc._pTM={message:'Containers load/parse time: '+(isc._moduleStart-isc._moduleEnd)+'ms',category:'loadTime'};if(isc.Log&&isc.Log.logDebug)isc.Log.logDebug(isc._pTM.message,'loadTime');else if(isc._preLog)isc._preLog[isc._preLog.length]=isc._pTM;else isc._preLog=[isc._pTM]}isc.definingFramework=true;if(window.isc&&isc.version!="v9.1p_2014-06-27/LGPL Deployment"){isc.logWarn("SmartClient module version mismatch detected: This application is loading the core module from SmartClient version '"+isc.version+"' and additional modules from 'v9.1p_2014-06-27/LGPL Deployment'. Mixing resources from different SmartClient packages is not supported and may lead to unpredictable behavior. If you are deploying resources from a single package you may need to clear your browser cache, or restart your browser."+(isc.Browser.isSGWT?" SmartGWT developers may also need to clear the gwt-unitCache and run a GWT Compile.":""))}
isc.ClassFactory.defineClass("ImgTab","StretchImgButton");isc.A=isc.ImgTab.getPrototype();isc.A.capSize=2;isc.A.skinImgDir="images/Tab/";isc.A.labelSkinImgDir="images/";isc.A.baseStyle="tab";isc.A.src="[SKIN]tab.gif";isc.A.showRollOver=false;isc.A.showFocused=true;isc.A.actionType=isc.Button.RADIO;isc.A.mozOutlineOffset="0px";isc.A=isc.ImgTab.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.setPane=function isc_ImgTab_setPane(_1){this.parentElement.parentElement.updateTab(this,_1)},isc.A.selectTab=function isc_ImgTab_selectTab(){this.parentElement.parentElement.selectTab(this)},isc.A.initWidget=function isc_ImgTab_initWidget(_1,_2,_3,_4,_5,_6){if(this.vertical&&this.titleStyle)this.titleStyle="v"+this.titleStyle;return this.invokeSuper(isc.ImgTab,this.$oc,_1,_2,_3,_4,_5,_6)});isc.B._maxIndex=isc.C+3;isc.ClassFactory.defineClass("TabBar","Toolbar");isc.A=isc.TabBar.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.breadth=21;isc.A.buttonConstructor=isc.ImgTab;isc.A.tabWithinToolbar=false;isc.A.skinImgDir="images/Tab/";isc.A.moreTabCount=5;isc.A.baseLineThickness=1;isc.A.baseLineSrc="[SKIN]baseline.gif";isc.A.baseLineCapSize=2;isc.A.tabBarPosition=isc.Canvas.TOP;isc.A.selectedTab=0;isc.A.defaultTabSize=80;isc.B.push(isc.A.keyPress=function isc_TabBar_keyPress(){var _1=this.ns.EH.lastEvent.keyName;if((this.vertical&&_1=="Arrow_Up")||(!this.vertical&&_1=="Arrow_Left"))
{this.$988(false)}else if((this.vertical&&_1=="Arrow_Down")||(!this.vertical&&_1=="Arrow_Right"))
{this.$988(true)}},isc.A.$988=function isc_TabBar__selectNextTab(_1,_2){if(_2==null)_2=this.getSelectedTab();var _3=_1?1:-1;var _4=_2;do{if(_4<0){_4=this.buttons.length}else if(_4>=this.buttons.length){_4=-1}
_4+=_3}while(_4!=_2&&(this.getMember(_4)==null||this.getMember(_4).isDisabled()));if(_4!=_2&&this.getMember(_4)){this.selectTab(_4);if(this.getSelectedTab()==_4){var _5=this.getMember(_4);_5.focus()}}});isc.B._maxIndex=isc.C+2;isc.A=isc.TabBar.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.initWidget=function isc_TabBar_initWidget(){for(var i=0;i<this.tabs.length;i++){var _2=this.tabs[i].pane;if(isc.isA.String(_2)&&isc.isA.Canvas(window[_2])){this.tabs[i].pane=window[_2]}}
this.buttons=this.tabs;if(this.moreTab){this.$79t=this.buttons.length;this.buttons[this.$79t]=this.moreTab}
this.skinImgDir=this.skinImgDir+this.tabBarPosition+"/";var _3=this.tabDefaults;if(_3==null)_3=this.tabDefaults={};_3=this.buttonDefaults=isc.addProperties({},this.buttonDefaults,_3);_3.actionType=isc.StatefulCanvas.RADIO;if(this.vertical){_3.defaultHeight=this.defaultTabSize}else{_3.defaultWidth=this.defaultTabSize}
_3.overflow=isc.Canvas.VISIBLE;_3.vertical=(this.tabBarPosition==isc.Canvas.LEFT||this.tabBarPosition==isc.Canvas.RIGHT);var _4=isc.ClassFactory.getClass(this.buttonConstructor);if(_4&&_4.isA("ImgTab")){_3.skinImgDir=_4.getInstanceProperty("skinImgDir")+this.tabBarPosition+"/"}
_3.iconMouseDown=this.$42k;_3.handleDoubleClick=function(){var _5=this.parentElement.parentElement;if(_5&&_5.titleEditEvent=="doubleClick"&&_5.$798(this))return;return this.Super("handleDoubleClick",arguments)}
_3.handleClick=function(){var _5=this.parentElement.parentElement;if(_5&&_5.titleEditEvent=="click"&&_5.$798(this))return;return this.Super("handleClick",arguments)},_3._generated=true;var _6=this.tabBarPosition+"StyleName";if(this[_6])this.setStyleName(this[_6]);this.Super(this.$oc);if(this._baseLine==null)this.makeBaseLine()},isc.A.isShowingMoreTab=function isc_TabBar_isShowingMoreTab(){return(this.showMoreTab&&this.moreTab&&this.$79t>=0&&this.getMembers(this.$79t).isVisible&&this.getMembers(this.$79t).isVisible())},isc.A.$42k=function isc_TabBar__tabIconClickHandler(){return this.parentElement.tabIconClick(this)},isc.A.tabIconClick=function isc_TabBar_tabIconClick(_1){var _2=this.parentElement;return _2.$52a(_1)},isc.A.$1286=function isc_TabBar__clearSgwtTabReferences(){var _1=this.getMembers();for(var i=0;i<_1.length;i++){if(window.SmartGWT.isTab(_1[i].__ref)){_1[i].__ref=null;delete _1[i].__module}}},isc.A.setButtons=function isc_TabBar_setButtons(_1){this.Super("setButtons",arguments);if(isc.Browser.isSGWT)this.$1286();if(this.showMoreTab&&this.buttons.length-1>this.moreTabCount){for(var i=this.moreTabCount-1;i<this.buttons.length;i++){this.getMember(i).hide()}
this.getMember(this.$79t).show()}else if(this.showMoreTab&&this.moreTab){this.getMember(this.$79t).hide()}},isc.A.makeButton=function isc_TabBar_makeButton(_1,_2,_3,_4,_5){var _6=this.parentElement.canCloseTab(_1),_1=isc.addProperties({},_1,this.getCloseIconProperties(_1,_6));_1.locatorParent=this.parentElement;return this.invokeSuper("TabBar","makeButton",_1,_2,_3,_4,_5)},isc.A.getCloseIconProperties=function isc_TabBar_getCloseIconProperties(_1,_2){var _3={};if(_1.canClose==true||(_1.canClose==null&&_2)){_3.icon=(_1.closeIcon||this.parentElement.closeTabIcon);_3.iconSize=(_1.closeIconSize||this.parentElement.closeTabIconSize);_3.iconOrientation="right";_3.iconAlign=_3.iconOrientation}else{_3.icon=(_1.icon);_3.iconSize=(_1.iconSize);if(_1.iconOrientation!=null)_3.iconOrientation=_1.iconOrientation;if(_1.iconAlign!=null)_3.iconAlign=_1.iconAlign}
return _3},isc.A.addTabs=function isc_TabBar_addTabs(_1,_2){if(!_2&&this.tabBarPosition==isc.Canvas.LEFT)_2=0;this.addButtons(_1,_2);if(isc.Browser.isSGWT)this.$1286();if(this.showMoreTab&&this.moreTab){var _3=this.getMembers();if(_3.length-1>this.moreTabCount){for(var i=this.moreTabCount-1;i<_3.length;i++){_3[i].hide()}
this.$79t=_3.length-1;_3[this.$79t].show()}}
if(this._baseLine!=null){this._baseLine.bringToFront();var _5=this.getButton(this.getSelectedTab());if(_5)_5.bringToFront()}},isc.A.removeTabs=function isc_TabBar_removeTabs(_1,_2){if(_1==null)return;if(!isc.isAn.Array(_1))_1=[_1];var _3=this.map("getButton",_1);this.removeButtons(_1);if(this.showMoreTab&&this.moreTab&&this.$79t>0){var _4=this.getMembers();for(var i=0;i<_4.length;i++){if(i<this.moreTabCount)_4[i].show();else _4[i].hide()}
if(_4.length-1<=this.moreTabCount){this.$79t=null;_4[_4.length-1].hide()}else{this.$79t=_4.length-1}}
if(!_2){for(var i=0;i<_3.length;i++){if(_3[i]!=null)_3[i].destroy()}}},isc.A.reorderTab=function isc_TabBar_reorderTab(_1,_2){var _3=this.getButton(_1);if(_3){this.removeTabs(_1,true);this.addTabs(_1,_2)}},isc.A.draw=function isc_TabBar_draw(_1,_2,_3,_4){arguments.$cw=this;this.fixLayout();this.invokeSuper(isc.TabBar,"draw",_1,_2,_3,_4);this.bringToFront();var _5=this.getButton(this.selectedTab);if(_5){_5.setSelected(true)}},isc.A.makeBaseLine=function isc_TabBar_makeBaseLine(){this._baseLine=this.addAutoChild("baseLine",{ID:this.getID()+"_baseLine",vertical:(this.tabBarPosition==isc.Canvas.LEFT||this.tabBarPosition==isc.Canvas.RIGHT),skinImgDir:this.skinImgDir,src:this.baseLineSrc,capSize:this.baseLineCapSize,imageType:isc.Img.STRETCH,overflow:"hidden",addAsChild:true,autoDraw:false},isc.StretchImg);this.ignoreMemberZIndex(this._baseline)},isc.A.scrollTo=function isc_TabBar_scrollTo(_1,_2,_3,_4,_5,_6){this.invokeSuper(isc.TabBar,"scrollTo",_1,_2,_3,_4,_5,_6);if(this._baseLine)this.fixLayout()},isc.A.fixLayout=function isc_TabBar_fixLayout(){var _1=this._baseLine;if(_1==null)return;var _2=this.parentElement,_3=0;if(this.tabBarPosition==isc.Canvas.TOP){_1.setRect(this.getScrollLeft(),this.getHeight()-this.baseLineThickness,this.parentElement.getWidth()-_3,this.baseLineThickness)}else if(this.tabBarPosition==isc.Canvas.BOTTOM){_1.setRect(this.getScrollLeft(),0,this.parentElement.getWidth()-_3,this.baseLineThickness)}else if(this.tabBarPosition==isc.Canvas.LEFT){_1.setRect(this.getWidth()-this.baseLineThickness,this.getScrollTop(),this.baseLineThickness,this.parentElement.getHeight()-_3)}else if(this.tabBarPosition==isc.Canvas.RIGHT){_1.setRect(0,this.getScrollTop(),this.baseLineThickness,this.parentElement.getHeight()-_3)}},isc.A.layoutChildren=function isc_TabBar_layoutChildren(_1,_2,_3,_4){this.invokeSuper(isc.TabBar,"layoutChildren",_1,_2,_3,_4);this.fixLayout()},isc.A.buttonSelected=function isc_TabBar_buttonSelected(_1){this.ignoreMemberZIndex(_1);_1.bringToFront();this.lastSelectedButton=_1;this.$6b(this.lastSelectedButton)},isc.A.buttonDeselected=function isc_TabBar_buttonDeselected(_1){_1.sendToBack();this.stopIgnoringMemberZIndex(_1)},isc.A.getSelectedTab=function isc_TabBar_getSelectedTab(){return this.getButtonNumber(this.getSelectedButton())},isc.A.selectTab=function isc_TabBar_selectTab(_1){this.selectedTab=_1;this.selectButton(_1)},isc.A.setupButtonFocusProperties=function isc_TabBar_setupButtonFocusProperties(){this.$6b(this.getButton(this.selectedTab));return this.Super("setupButtonFocusProperties",arguments)},isc.A.$7b=function isc_TabBar__scrollForward(_1,_2){if(this.overflow==isc.Canvas.VISIBLE||!this.members||this.members.length==0)return;var _3,_4;if(this.$7c!=null){_3=this.members[this.$7c+(_1?-1:1)];if(_3==null){return}
_4=(_1?(this.vertical?_3.getTop():_3.getLeft()):(this.vertical?_3.getBottom():_3.getRight()))}else{var _5=(this.vertical?this.getScrollHeight():this.getScrollWidth());if(_5<=(this.vertical?this.getViewportHeight():this.getViewportWidth()))
return;var _6=(this.vertical?this.getScrollTop():this.getScrollLeft()),_7=(this.vertical?this.getViewportHeight():this.getViewportWidth());var _8=5;for(var i=0;i<this.members.length;i++){_3=(_1?this.members[this.members.length-(i+1)]:this.members[i]);var _10=_1;if(this.reverseOrder)_10=!_10
_4=(_10?(this.vertical?_3.getTop():_3.getLeft()):(this.vertical?_3.getBottom():_3.getRight()));if(!this.vertical&&this.isRTL()){_4=this.$95h(_4,false)}
var _11=_10?(_4+_8<_6):(_4-_8>(_6+_7));if(_11)break}}
if(_2){this.$7c=this.members.indexOf(_3);this.scrollTabIntoView(_3,_1,true,"this.$7d("+this.$7c+")")}else this.scrollTabIntoView(_3,_1)},isc.A.$7d=function isc_TabBar__completeScroll(_1){if(this.$7c==_1)delete this.$7c},isc.A.scrollTabIntoView=function isc_TabBar_scrollTabIntoView(_1,_2,_3,_4){var _5;if(isc.isA.Number(_1)){_5=_1;_1=this.members[_1]}else{_5=this.members.indexOf(_1)}
if(!_1)return;if(this.$3n||this.$2z){this.$67y=[_1,_2,_3,_4];return}
var _6=_1.getRect(),_7,_8;var _9=this.vertical;if(_2==null){if(_5==0)_2=true;else if(_5==(this.members.getLength()-1))_2=false;else{if(_9){if(this.getScrollTop()>_6[1])_2=true;else _2=false}else{if(this.getScrollLeft()>_6[0])_2=true;else _2=false}}}
if(_9){_8=(_2?"top":"bottom");_7="left";_6[2]=0}else{_7=(_2?"left":"right");_8="top";_6[3]=0}
if(_5==0)_6[0]=_6[1]=this.isRTL()?this.getScrollWidth():0;this.scrollIntoView(_6[0],_6[1],_6[2],_6[3],_7,_8,_3,{target:this,methodName:"scrolledTabIntoView",args:[_1,_4]})},isc.A.scrolledTabIntoView=function isc_TabBar_scrolledTabIntoView(_1,_2){if(_2!=null){this.fireCallback(_2,"tab",[_1])}},isc.A.$3j=function isc_TabBar__layoutChildrenDone(_1,_2,_3,_4,_5){this.invokeSuper(isc.TabBar,"$3j",_1,_2,_3,_4,_5);if(this.$67y!=null){var _6=this.$67y;this.scrollTabIntoView(_6[0],_6[1],_6[2],_6[3]);delete this.$67y}},isc.A.scrollForward=function isc_TabBar_scrollForward(_1){this.$7b(false,_1)},isc.A.scrollBack=function isc_TabBar_scrollBack(_1){this.$7b(true,_1)});isc.B._maxIndex=isc.C+28;isc.ClassFactory.defineClass("Window","Layout");isc.A=isc.Window.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.styleName="windowBackground";isc.A.printStyleName="normal";isc.A.skinImgDir="images/Window/";isc.A.backgroundColor="#DDDDDD";isc.A.layoutMargin=2;isc.A.membersMargin=2;isc.A.orientation="vertical";isc.A.dragStartDistance=1;isc.A.canDragReposition=true;isc.A.dragAppearance=isc.EventHandler.OUTLINE;isc.A.canDragResize=false;isc.A.resizeFrom=["R","B","BR"];isc.A.minWidth=100;isc.A.minHeight=100;isc.A.useBackMask=isc.Browser.isIE&&isc.Browser.minorVersion>=5.5&&isc.Browser.version<9;isc.A.isModal=false;isc.A.modalMaskOpacity=50;isc.A.modalMaskStyle="modalMask";isc.A.modalMaskConstructor="ScreenSpan";isc.A.dismissOnOutsideClick=false;isc.A.showBody=true;isc.A.bodyStyle="windowBody";isc.A.printBodyStyle="printHeader";isc.A.bodyColor="#FFFFFF";isc.A.hiliteBodyColor="#EEEEEE";isc.A.contentsType="page";isc.A.bodyDefaults={layoutMargin:0,printStyleName:"printHeader"};isc.A.contentLayout="vertical";isc.A.autoSize=false;isc.A.showHeader=true;isc.A.headerConstructor="HLayout";isc.A.showHeaderBackground=!(isc.Browser.isIE&&!isc.Browser.isStrict&&isc.Browser.minorVersion>=5.5);isc.A.headerBackgroundConstructor="Img";isc.A.headerBackgroundDefaults={width:"100%",height:"100%",addAsChild:true,vertical:false,capSize:10,shouldPrint:false};isc.A.headerStyle="windowHeader";isc.A.printHeaderStyle="printHeader";isc.A.headerSrc=(!(isc.Browser.isIE&&!isc.Browser.isStrict&&isc.Browser.minorVersion>=5.5)?"[SKIN]Window/headerGradient.gif":null);isc.A.headerDefaults={height:18,layoutMargin:1,membersMargin:2,overflow:isc.Canvas.HIDDEN,printFillWidth:false};isc.A.headerControls=["headerIcon","headerLabel","minimizeButton","maximizeButton","closeButton"];isc.A.hiliteHeaderStyle="windowHeaderHilite";isc.A.hiliteHeaderSrc=(!(isc.Browser.isIE&&isc.Browser.minorVersion>=5.5)?"[SKIN]Window/headerGradient_hilite.gif":null);isc.A.showTitle=true;isc.A.title="Untitled Window";isc.A.headerLabelConstructor="Label";isc.A.headerLabelParentDefaults={autoDraw:false,_generated:true,_constructor:"StatefulCanvas",showTitle:true,getTitle:function(){return isc.Canvas.blankImgHTML(1000,100)},getPrintHTML:function(_1,_2,_3,_4){return this.creator.headerLabel.getPrintHTML(_1,_2,_3,_4)},overflow:"hidden"};isc.A.headerLabelDefaults={wrap:false,align:isc.Canvas.LEFT,styleName:"windowHeaderText",width:10,inherentWidth:true,layoutAlign:isc.Page.isRTL()?isc.Canvas.RIGHT:isc.Canvas.LEFT};isc.A.showHeaderIcon=true;isc.A.headerIconConstructor="Img";isc.A.headerIconDefaults={width:16,height:16,layoutAlign:"center",src:"[SKIN]/Window/headerIcon.gif"};isc.A.canFocusInHeaderButtons=false;isc.A.showCloseButton=true;isc.A.closeButtonConstructor="ImgButton";isc.A.closeButtonDefaults={width:16,height:14,layoutAlign:"center",src:"[SKIN]/Window/close.gif",click:function(){return this.creator.$7e()}};isc.A.showMinimizeButton=true;isc.A.minimizeButtonConstructor="ImgButton";isc.A.minimizeButtonDefaults={width:16,height:14,layoutAlign:"center",src:"[SKIN]/Window/minimize.gif",click:function(){if(!this.creator.onMinimizeClick||(this.creator.onMinimizeClick()!=false)){this.creator.minimize()}
return false}};isc.A.minimized=false;isc.A.defaultMinimizeHeight=16;isc.A.restoreButtonDefaults={width:16,height:14,src:"[SKIN]/Window/restore.gif",layoutAlign:"center",click:function(){if(!this.creator.onRestoreClick||(this.creator.onRestoreClick()!=false)){this.creator.restore()}
return false}};isc.A.minimized=false;isc.A.showMaximizeButton=false;isc.A.maximizeButtonConstructor="ImgButton";isc.A.maximizeButtonDefaults={width:16,height:14,src:"[SKIN]/Window/maximize.gif",layoutAlign:"center",click:function(){if(!this.creator.onMaximizeClick||(this.creator.onMaximizeClick()!=false)){this.creator.maximize()}
return false}};isc.A.showFooter=true;isc.A.footerConstructor="HLayout";isc.A.footerHeight=18;isc.A.footerControls=["spacer","resizer"];isc.A.showStatusBar=true;isc.A.statusBarConstructor="Canvas";isc.A.statusBarDefaults={overflow:isc.Canvas.HIDDEN,styleName:"windowStatusBar",addAsChild:true,width:"100%",wrap:false,leftPadding:5};isc.A.showResizer=true;isc.A.resizerConstructor="Img";isc.A.resizerDefaults={canDragResize:true,getEventEdge:function(){if(this.creator.resizeFrom.contains("BR")){return"BR"}else if(this.creator.resizeFrom.contains("B")){return"B"}else if(this.creator.resizeFrom.contains("R")){return"R"}},src:"[SKIN]/Window/resizer.gif",width:16,height:16};isc.A.showToolbar=false;isc.A.toolbarConstructor="Toolbar";isc.A.toolbarDefaults={height:40,layoutMargin:10,membersMargin:5,overflow:"visible"};isc.A.customEdges=["T","B"];isc.A.overflow="hidden";isc.B.push(isc.A.setCanDragReposition=function isc_Window_setCanDragReposition(_1,_2){if(!this.headerLabelParent)return;this.canDragReposition=false;var _3=_1==null?true:_1;this.headerLabelParent.dragTarget=_2||this;this.headerLabelParent.canDragReposition=_3;this.canDragReposition=false},isc.A.getCanDragReposition=function isc_Window_getCanDragReposition(){if(this.headerLabelParent)return this.headerLabelParent.canDragReposition;return this.canDragReposition});isc.B._maxIndex=isc.C+2;isc.A=isc.Window.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.autoChildParentMap={resizer:"footer",statusBar:"footer",headerBackground:"header",headerIcon:"header",headerLabel:"header",minimizeButton:"header",maximizeButton:"header",closeButton:"header",toolbar:"body"};isc.B.push(isc.A.initWidget=function isc_Window_initWidget(){if(this.minimized&&this.maximized){this.logWarn("Window initialized with maximized and minimized both set to true. This is unsupported. The Window will be rendered minimized.");this.maximized=false}
if(this.minimized){this.minimized=null;this.minimize()}else if(this.maximized){this.maximized=null;this.maximize()}
if(this.autoSize){this.vPolicy="none";this.overflow="visible"}
this.Super(this.$oc);if(!this.$7f&&this.items!=null){for(var i=0;i<this.items.length;i++){if(isc.isA.Canvas(this.items[i])&&this.items[i].isDrawn())this.items[i].clear()}}},isc.A.createChildren=function isc_Window_createChildren(){this.makeHeader();this.makeBody();this.makeToolbar();this.makeFooter();this.$7f=true},isc.A.makeToolbar=function isc_Window_makeToolbar(){this.addAutoChild("toolbar",{buttons:this.toolbarButtons,visibility:this.minimized?isc.Canvas.HIDDEN:isc.Canvas.INHERIT})},isc.A.setShowToolbar=function isc_Window_setShowToolbar(_1){if(_1==this.showToolbar)return;this.showToolbar=_1;if(!this.$7f)return;if(_1){if(!this.toolbar)this.makeToolbar();else if(!this.toolbar.isDrawn())this.toolbar.draw()}else{if(this.toolbar&&this.toolbar.isDrawn())this.toolbar.clear()}},isc.A.draw=function isc_Window_draw(_1,_2,_3,_4){if(isc.$cv)arguments.$cw=this;if(!this.readyToDraw())return this;if(!this.$7f)this.createChildren();return this.invokeSuper(isc.Window,"draw",_1,_2,_3,_4)},isc.A.destroy=function isc_Window_destroy(){if(!this.$7f){var _1=this.items;if(!isc.isAn.Array(_1))_1=[_1];for(var i=0;i<_1.length;i++){if(isc.isA.Canvas(_1[i]))_1[i].destroy()}}
this.items=null;this.destroyModalMask();return this.Super("destroy",arguments)},isc.A.mouseUp=function isc_Window_mouseUp(){this.bringToFront(true);this.Super("mouseUp",arguments)},isc.A.makeHeader=function isc_Window_makeHeader(){var _1=this.addAutoChild("header",{width:"100%",styleName:this.headerStyle,printStyleName:this.printHeaderStyle});if(_1==null)return;if(_1!=null){var _2=this.addAutoChild("headerBackground",{src:this.headerSrc});if(_2)_2.sendToBack();if(this.minimized){this.$42l=this.minimizeButtonDefaults;this.$42m=this.minimizeButtonProperties;this.minimizeButtonDefaults=this.restoreButtonDefaults;this.minimizeButtonProperties=this.restoreButtonProperties}else if(this.maximized){this.$42n=this.maximizeButtonDefaults;this.$42o=this.maximizeButtonProperties;this.maximizeButtonDefaults=this.restoreButtonDefaults;this.maximizeButtonProperties=this.restoreButtonProperties}
this.addAutoChildren(this.headerControls,this.header);if(this.minimized){this.minimizeButtonDefaults=this.$42l;this.minimizeButtonProperties=this.$42m;this.$42l=this.$42p=null}else if(this.maximized){this.maximizeButtonDefaults=this.$42n;this.maximizeButtonProperties=this.$42o;this.$42n=this.$42q=null}}},isc.A.setHeaderControls=function isc_Window_setHeaderControls(_1){if(this.headerControls==_1)return;var _2=this.headerControls,_3=[];this.headerControls=_1;if(this.header==null)return;for(var i=i;i<_2.length;i++){if(isc.isA.String(_2[i]))_3[i]=this[_2[i]]
else _3[i]=_2[i]}
this.header.removeMembers(_3);this.header.addMembers(_1)},isc.A.setShowHeaderControl=function isc_Window_setShowHeaderControl(_1,_2,_3){var _4=this.headerControls;if(!_4.contains(_1)){this.logWarn("request to show/hide header control with name:"+_1+". No such control is present in this.headerControls - ignoring.");return}
if(!_3)
_3="show"+_1.substring(0,1).toUpperCase()+_1.substring(1);if(this[_3]==_2)return;this[_3]=_2;if(this.header==null)return;if(this[_1]){if(_2)this[_1].show();else this[_1].hide()}else if(_2){var _5=0;for(var i=0;i<_4.length;i++){if(_4[i]==_1)break;if(this[_4[i]])_5++}
this.addAutoChild(_1,null,null,this.header,_5);this[_1].show()}},isc.A.setShowCloseButton=function isc_Window_setShowCloseButton(_1){this.setShowHeaderControl("closeButton",_1,"showCloseButton")},isc.A.setShowMinimizeButton=function isc_Window_setShowMinimizeButton(_1){this.setShowHeaderControl("minimizeButton",_1,"showMinimizeButton")},isc.A.setShowMaximizeButton=function isc_Window_setShowMaximizeButton(_1){this.setShowHeaderControl("maximizeButton",_1,"showMaximizeButton")},isc.A.setShowHeaderIcon=function isc_Window_setShowHeaderIcon(_1){this.setShowHeaderControl("headerIcon",_1,"showHeaderIcon")},isc.A.getDynamicDefaults=function isc_Window_getDynamicDefaults(_1){if(isc.endsWith(_1,isc.Button.Class)){return{canFocus:this.canFocusInHeaderButtons}}},isc.A.headerLabel_autoMaker=function isc_Window_headerLabel_autoMaker(){if(!this.showTitle){this.headerLabelParent=null;this.headerLabel=null;return}
var _1=this.headerLabelParent=this.createAutoChild("headerLabelParent");if(this.headerLabelParent.label){this.headerLabelParent.label.sendToBack()}
this.setCanDragReposition(this.canDragReposition);var _2=this.headerLabel=this.createAutoChild("headerLabel",{height:"100%",contents:this.title,dragTarget:this,getCurrentCursor:function(){if(this.parentElement)
return this.parentElement.getCurrentCursor();return this.Super("getCurrentCursor",arguments)},eventProxy:this.headerLabelParent});var _3=isc.HStack.create({autoDraw:false,width:"100%",height:"100%",members:[_2],getCurrentCursor:function(){if(this.parentElement)
return this.parentElement.getCurrentCursor();return this.Super("getCurrentCursor",arguments)}});this.headerLabelParent.addChild(_3);this.header.addMember(_1)},isc.A.setTitle=function isc_Window_setTitle(_1){if(_1)this.title=_1;if(!this.header)return;if(this.headerLabel)this.headerLabel.setContents(this.title);else this.header.setContents(this.title)},isc.A.setButtons=function isc_Window_setButtons(_1){return this.setToolbarButtons(_1)},isc.A.setToolbarButtons=function isc_Window_setToolbarButtons(_1){this.toolbarButtons=_1;if(!this.$7f)return;if(_1){if(!this.toolbar)this.setShowToolbar(true);this.toolbar.setButtons(_1)}else{this.toolbar.setButtons(_1);if(this.showToolbar)this.setShowToolbar(false)}},isc.A.makeFooter=function isc_Window_makeFooter(){if(!this.showFooter)return;this.addAutoChild("footer",{height:this.footerHeight});if(!this.footer)return;var _1=[];for(var i=0;i<this.footerControls.length;i++){var _3=this.footerControls[i],_4={};if(_3=="spacer")_3=isc.LayoutSpacer.create();if(_3=="resizer"){if(!this.canDragResize)continue;_4.dragTarget=this}
_4.visibility=this.minimized?isc.Canvas.HIDDEN:isc.Canvas.INHERIT;if(isc.isA.String(_3)){this.addAutoChild(_3,_4,null,this.footer)}else{if(isc.isA.Canvas(_3))_3.setProperties(_4);else isc.addProperties(_3,_4);this.footer.addMember(_3)}}
this.addAutoChild("statusBar",{height:this.footer.getHeight(),visibility:this.minimized?isc.Canvas.HIDDEN:isc.Canvas.INHERIT});if(this.status!=null)this.setStatus(this.status);if(this.statusBar)this.statusBar.sendToBack()},isc.A.setStatus=function isc_Window_setStatus(_1){this.status=_1;if(this.statusBar==null)return;if(_1==null)_1="";var _2=(this.statusBar.leftPadding?isc.Canvas.spacerHTML(this.statusBar.leftPadding,1):"");this.statusBar.setContents(_2+_1)},isc.A.setSrc=function isc_Window_setSrc(_1){this.src=_1;if(this.body)this.body.setContentsURL(_1)},isc.A.makeBody=function isc_Window_makeBody(){if(!this.showBody)return;var _1,_2,_3;if(this.src){_3=this.src}else{var _4=this.items;if(isc.isA.Array(_4)){_1=_4.duplicate()}else if(isc.isA.Canvas(_4)){_1=_4}else{_2=_4}
if(!isc.isAn.Array(_4))_4=[_4];for(var i=0;i<_4.length;i++){if(isc.isAn.Object(_4[i])){_4[i].locatorParent=this;_4[i].$86x=this.ID}}}
if(!this.bodyConstructor){if(_3){this.bodyConstructor="HTMLFlow"}else if(_2){this.bodyConstructor="Canvas"}else if(!this.autoSize){if(this.contentLayout!="none")this.bodyConstructor="Layout";else this.bodyConstructor="Canvas"}else{this.bodyConstructor="Layout";var _6={vPolicy:"none",hPolicy:"none"};if(!this.bodyProperties)this.bodyProperties=_6;else isc.addProperties(this.bodyProperties,_6)}}
this.createCanvii(_1);if(isc.Browser.isMoz&&_3!=null){if(!this.body)this.body={};this.body.useClipDiv=false}
var _7=("body",{contents:_2||"&nbsp;",_generated:false,defaultHeight:this.autoSize?50:100,contentsURL:_3,contentsType:this.contentsType,hideUsingDisplayNone:(isc.Browser.isMoz&&_3?true:false),styleName:this.bodyStyle,printStyleName:this.printBodyStyle,backgroundColor:this.bodyColor,visibility:this.minimized?isc.Canvas.HIDDEN:isc.Canvas.INHERIT,vertical:(this.contentLayout==isc.Canvas.VERTICAL),overflow:this.autoSize?"visible":"auto"});var _8=isc.ClassFactory.getClass(this.bodyConstructor);if(_8&&_8.isA("Layout")){_7.members=_1}else{_7.children=_1}
this.addAutoChild("body",_7)},isc.A.setBodyColor=function isc_Window_setBodyColor(_1){this.bodyColor=_1;if(this.body)this.body.setBackgroundColor(_1)},isc.A.hasInherentHeight=function isc_Window_hasInherentHeight(){return this.autoSize},isc.A.hasInherentWidth=function isc_Window_hasInherentWidth(){return this.autoSize},isc.A.addItem=function isc_Window_addItem(_1,_2){return this.addItems([_1],_2)},isc.A.removeItem=function isc_Window_removeItem(_1){return this.removeItems([_1])},isc.A.addItems=function isc_Window_addItems(_1,_2){if(!isc.isAn.Array(_1))_1=[_1];if(!this.items)this.items=[];for(var i=0;i<_1.length;i++){if(!_1[i])continue;if(this.items.contains(_1[i]))continue;if(_2!=null)this.items.addAt(_1[i],_2+i);else this.items.add(_1[i]);_1[i].locatorParent=this;_1[i].$86x=this.ID;if(!this.$7f){if(isc.isA.Canvas(_1[i])&&_1[i].isDrawn())_1[i].clear()}else{if(this.body.addMember){this.body.addMember(_1[i],_2!=null?_2+i:null)}else{this.body.addChild(_1[i])}}}
return _1},isc.A.removeItems=function isc_Window_removeItems(_1){if(!isc.isAn.Array(_1))_1=[_1];for(var i=0;i<_1.length;i++){delete _1[i].locatorParent}
if(this.$7f){if(this.body.removeMembers)this.body.removeMembers(_1);else{for(var i=0;i<_1.length;i++){if(_1[i].parentElement==this.body)_1[i].deparent()}}}
this.items.removeList(_1);return _1},isc.A.locatorChildDestroyed=function isc_Window_locatorChildDestroyed(_1){if(this.items&&this.items.contains(_1))this.items.remove(_1)},isc.A.replaceItem=function isc_Window_replaceItem(_1,_2){if(_1==_2)return _1;if(_2==null)return this.removeItem(_1);if(_1==null)return this.addItem(_2);for(var i=0;i<this.items.length;i++){if(this.items[i]==_1){this.items[i]=_2;if(!this.$7f){if(isc.isA.Canvas(_2)&&_2.isDrawn())_2.clear()}else{if(this.body.addMember){var _4=this.body.getMemberNumber(_1);this.body.removeMember(_1);this.body.addMember(_2,_4)}else{this.body.removeChild(_1);this.body.addChild(_2)}}
break}}},isc.A.layoutChildren=function isc_Window_layoutChildren(_1,_2,_3,_4){if(this.body==null)return;if(this.$7g){this.$7g=null;this.disableAutoSize()}
if(this.autoSize)this.$7h();this.invokeSuper(isc.Window,"layoutChildren",_1,_2,_3,_4);if(this.header!=null&&this.body.overflow==isc.Canvas.VISIBLE&&this.overflow==isc.Canvas.VISIBLE)
{this.header.setWidth(this.body.getVisibleWidth())}
var _5=this.edgesAsChild?this.$l0:null;if(_5)_5.setHeight(this.getVisibleHeight(true))},isc.A.$7h=function isc_Window__matchBodyWidth(){if(this.minimized)return;if(this.$7i)return;this.$7i=true;var _1=this.edgesAsChild?this.$l0:null;if(!this.body.isDrawn())this.body.draw();this.body.inherentWidth=true;var _2=(this.getWidth()-this.getInnerWidth())+this.$tb+this.$tc;if(_1)_2+=_1.$tb+_1.$tc;var _3=this.body.getVisibleWidth()+_2;this.logInfo("edgeWidth is: "+_2+", setting window width to: "+_3,"layout");if(this.getWidth()!=_3)this.setWidth(_3);this.$7i=null},isc.A.disableAutoSize=function isc_Window_disableAutoSize(){this.setAutoSize(false)},isc.A.setAutoSize=function isc_Window_setAutoSize(_1){this.autoSize=_1;if(_1){if(this.body){if(isc.isA.Layout(this.body))this.body.vPolicy=this.body.hPolicy="none";this.body.setOverflow("visible")}
this.vPolicy="none";this.setOverflow("visible")}else{if(this.body){if(isc.isA.Layout(this.body))this.body.vPolicy=this.body.hPolicy="fill";this.body.setOverflow("auto");this.body.inherentWidth=false}
this.vPolicy="fill";this.setOverflow("hidden");if(this.header!=null)delete this.header.$pn}},isc.A.dragResizeStart=function isc_Window_dragResizeStart(){if(this.Super("dragResizeStart",arguments)==false)return;if(this.autoSize&&isc.EH.dragTarget==this){this.autoSize=false;this.$7g=true}},isc.A.returnValue=function isc_Window_returnValue(_1){if(this.isVisible())this.hide();if(this.callback){this.delayCall("fireCallback",[this.callback,"value",[_1]],50)}
return _1},isc.A.show=function isc_Window_show(_1,_2,_3,_4){if(isc.$cv)arguments.$cw=this;if(this.isModal){if(this.modalTarget){if(!isc.isA.Canvas(this.modalTarget)||this.modalTarget.contains(this)){this.logWarn("Invalid modalTarget:"+this.modalTarget+". Should be a canvas, and not an ancestor of this Window.");delete this.modalTarget;this.isModal=false}else{this.modalTarget.showComponentMask(this.showModalMask?{styleName:this.modalMaskStyle,opacity:this.modalMaskOpacity}:null);this.observeModalTarget()}}else if(this.topElement!=null){this.logWarn("Window specified with 'isModal' set to true, but this window has a parentElement. Only top level Windows can be shown modally.");this.isModal=false}else{this.showClickMask({target:this,methodName:(this.dismissOnOutsideClick?"handleCloseClick":"flash")},false,[this]);if(this.showModalMask)this.makeModalMask()}}
if(this.autoCenter&&!this.parentElement){this.$7j=true;this.moveTo(0,-1000);this.$7j=false}
this.invokeSuper(isc.Window,"show",_1,_2,_3,_4);if(this.autoCenter){this.centerInPage();if(!this.parentElement){isc.Page.setEvent(this.$nx,this,null,"parentResized")}}
this.bringToFront(true)},isc.A.makeModalMask=function isc_Window_makeModalMask(){if(!this.showModalMask)return;if(!this.modalMask)this.modalMask=this.createAutoChild("modalMask",{styleName:this.modalMaskStyle,opacity:this.modalMaskOpacity});this.modalMask.show()},isc.A.hideModalMask=function isc_Window_hideModalMask(){if(this.modalMask)this.modalMask.hide()},isc.A.destroyModalMask=function isc_Window_destroyModalMask(){if(this.modalMask){this.modalMask.destroy();this.modalMask=null}},isc.A.observeModalTarget=function isc_Window_observeModalTarget(){if(this.$550)return;this.observe(this.modalTarget,"show","observer.modalTargetVisibilityChanged(observed)");this.observe(this.modalTarget,"hide","observer.modalTargetVisibilityChanged(observed)");this.observe(this.modalTarget,"clear","observer.modalTargetVisibilityChanged(observed)");this.observe(this.modalTarget,"draw","observer.modalTargetVisibilityChanged(observed)");this.observe(this.modalTarget,"parentVisibilityChanged","observer.modalTargetVisibilityChanged(observed)")},isc.A.ignoreModalTarget=function isc_Window_ignoreModalTarget(){if(this.$550)return;this.ignore(this.modalTarget,"show");this.ignore(this.modalTarget,"hide");this.ignore(this.modalTarget,"draw");this.ignore(this.modalTarget,"clear");this.ignore(this.modalTarget,"parentVisibilityChanged")},isc.A.modalTargetVisibilityChanged=function isc_Window_modalTargetVisibilityChanged(_1){this.$550=true;if(_1.isVisible()&&_1.isDrawn())this.show();else this.hide();delete this.$550},isc.A.shouldDismissOnEscape=function isc_Window_shouldDismissOnEscape(){if(this.dismissOnEscape!=null)return this.dismissOnEscape;return this.showHeader&&this.headerControls&&this.showCloseButton&&this.headerControls.contains("closeButton")},isc.A.handleKeyPress=function isc_Window_handleKeyPress(){var _1=isc.EH.getKey();if(_1=="Escape"&&this.shouldDismissOnEscape()){this.handleEscape();return false}
return this.Super("handleKeyPress",arguments)},isc.A.handleEscape=function isc_Window_handleEscape(){if(this.isMasked())return;this.handleCloseClick()},isc.A.resized=function isc_Window_resized(_1,_2,_3,_4){this.invokeSuper(isc.Window,"resized",_1,_2,_3,_4);if(this.autoCenter)this.centerInPage()},isc.A.hide=function isc_Window_hide(_1,_2,_3,_4){if(this.$7k)isc.Animation.finishAnimation(this.$7k);this.invokeSuper(isc.Window,"hide",_1,_2,_3,_4);if(this.isDrawn()&&this.isModal){if(this.modalTarget){this.modalTarget.hideComponentMask();this.ignoreModalTarget()}else{this.hideClickMask();this.hideModalMask()}}},isc.A.clear=function isc_Window_clear(_1,_2,_3,_4){if(this.$7k)isc.Animation.finishAnimation(this.$7k);this.invokeSuper(isc.Window,"clear",_1,_2,_3,_4);if(!this.clearingWithModalTarget&&this.isVisible()&&this.isModal){if(this.modalTarget){this.ignoreModalTarget();this.modalTarget.hideComponentMask()}else{this.hideClickMask();this.hideModalMask()}}},isc.A.parentResized=function isc_Window_parentResized(){this.Super("parentResized",arguments);if(this.autoCenter)this.centerInPage()},isc.A.handleMoved=function isc_Window_handleMoved(){this.Super("handleMoved",arguments);if(this.isDrawn()&&!this.$7j&&!this.$uw)
{this.autoCenter=false}},isc.A.centerInPage=function isc_Window_centerInPage(){var _1=this.getVisibleWidth(),_2=this.getVisibleHeight(),_3=this.parentElement?this.parentElement:isc.Page,_4=((_3.getWidth()-_1)/2)+_3.getScrollLeft(),_5=((_3.getHeight()-_2)/2)+_3.getScrollTop();_4=Math.round(_4);_5=Math.max(Math.round(_5),0);this.$7j=true;this.moveTo(_4,_5);this.$7j=null},isc.A.flash=function isc_Window_flash(_1){var _2=this.showHeader;if(_1==null){if(this.$7l)return false;this.$7l=true;_1=0;if(_2){this.$7m=this.header.getStateName();if(this.headerBackground){this.$7n=this.headerBackground.getStateName();this.$7o=this.headerBackground.src}}else{this.$7p=this.body.backgroundColor}}
if(_2){var _3=(_1%2==0?this.hiliteHeaderStyle:this.$7m),_4=(_1%2==0?this.hiliteHeaderSrc:this.$7o),_5=(_1%2==0?this.hiliteHeaderStyle:this.$7n);this.header.setStyleName(_3)
var _6=this.headerBackground;if(_6){this.headerBackground.setStyleName(_5)
if(_6.setSrc)_6.setSrc(_4)}}else{var _7=(_1%2==0?this.hiliteBodyColor:this.$7p);this.body.setBackgroundColor(_7)}
_1++;if(_1<4)this.delayCall("flash",[_1],100);else this.$7l=false;return false},isc.A.minimize=function isc_Window_minimize(){if(this.$7k)isc.Animation.finishAnimation(this.$7k);if(this.minimized)return;if(!this.maximized){this.$7q=this.getHeight();this.$7r=this.getVisibleHeight();this.$7s=this.$po;this.$7t=this.canDragResize;this.canDragResize=false}else{if(this.maximizeButton){this.maximizeButton.addProperties(this.maximizeButtonDefaults);this.maximizeButton.redraw()}}
var _1;if(this.minimizeHeight){_1=this.minimizeHeight}else if(this.showHeader){var _2;if(this.header){_2=this.header.getHeight()}else{var _3=this.headerDefaults;_2=_3.height||_3.defaultHeight}
_1=_2+(this.layoutMargin*2)+this.getVMarginBorderPad()}else{_1=this.defaultMinimizeHeight}
if(this.overflow==isc.Canvas.VISIBLE){this.setHeight(this.getVisibleHeight())}
this.$7u=this.overflow;this.setOverflow("hidden");var _4=this.minimizeButton;if(_4){_4.addProperties(this.restoreButtonDefaults);_4.markForRedraw()}
this.$7v=_1;if(this.animateMinimize&&this.isDrawn()&&this.isVisible()){if(_4){_4.disable();_4.redraw()}
this.$7w();this.$7k=isc.Animation.registerAnimation(this.animateMinimizeStep,(this.minimizeTime||this.animateTime),this.minimizeAcceleration||this.animateAcceleration,this)}else{this.completeMinimize(_1)}},isc.A.$7w=function isc_Window__storeContentRestoreStats(){if(this.body){this.$7x=this.body.getScrollTop();this.$7y=this.body.overflow;this.$7z=this.body.getHeight();this.$70=this.body.getWidth();this.$71=this.body.$po;this.$72=this.body.$pn;if(this.$7y==isc.Canvas.VISIBLE){this.body.resizeTo(this.body.getVisibleWidth(),this.body.getVisibleHeight())}
this.body.setOverflow(isc.Canvas.HIDDEN)}
if(this.footer){this.$73=this.footer.overflow;if(this.$73==isc.Canvas.VISIBLE){this.footer.setHeight(this.footer.getVisibleHeight())}
this.footer.setOverflow(isc.Canvas.HIDDEN)}},isc.A.$74=function isc_Window__resetContentRestoreStats(){if(this.body){this.body.scrollTo(null,this.$7x,"restore");this.body.resizeTo(this.$70,this.$7z);this.body.$po=this.$71;this.body.$pn=this.$72;this.body.setOverflow(this.$7y)}
if(this.footer){this.footer.scrollTo(null,0,"restore");this.footer.setHeight(this.footerHeight);this.footer.setOverflow(this.$73)}
delete this.$7x;delete this.$7z;delete this.$71;delete this.$70;delete this.$72;delete this.$7y;delete this.$73},isc.A.animateMinimizeStep=function isc_Window_animateMinimizeStep(_1,_2,_3,_4,_5){var _6=(!_4&&!_5);if(this.maximized&&!this.$42u){this.$42v=(this.parentElement?this.parentElement.getInnerHeight():isc.Page.getHeight());this.$42w=(this.parentElement?this.parentElement.getInnerWidth():isc.Page.getWidth());this.$42u=true}
var _7=this.minimized?this.$7v:this.maximized?this.$42v:this.$7r,_8=_4?this.$7r:_5?this.$42v:this.$7v,_9=this.maximized?this.$42w:this.$42x,_10=_5?this.$42w:this.$42x;var _11=Math.round(_7+(_1*(_8-_7))),_12=(_10==_9?_10:Math.round(_9+(_1*(_10-_9))));var _13=_11-this.getVMarginBorder()-(2*this.layoutMargin)-
(this.showHeader?this.header.getHeight()+this.membersMargin:0),_14=(this.showBody?this.body:null),_15=(this.showFooter?this.footer:null),_16=0,_17=0,_18=(_15?this.footerHeight:0),_19=this.membersMargin||0;if(_15!=null){if(_13<=_18){_16=_13}else{_16=_18}}
var _20=_15?_18+_19:0;if(_14!=null&&(_13>_20)){_17=_13-_20}
if(_15){if(_16>0){if(_15.getHeight()!=_16){var _21=_15.getScrollTop()+_15.getViewportHeight();_15.resizeTo(null,_16);_15.scrollTo(null,_21-_15.getViewportHeight(),"animateMinimize")}
if(!_15.isVisible())_15.show()}else if(_15.isVisible()){_15.hide()}}
if(_14){if(_17>0){if(_14.getHeight()!=_17){var _21=_14.getScrollTop()+_14.getViewportHeight();_14.resizeTo(null,_17);_14.scrollTo(null,_21-_14.getViewportHeight(),"animateMinimize")}
if(!_14.isVisible())_14.show()}else if(_14.isVisible()){_14.hide()}}
if(_5||this.maximized){var _22=(_5?this.$42y:0),_23=(_5?this.$42z:0),_24=(_5?0:this.$42y),_25=(_5?0:this.$42z);this.moveTo(Math.round(_22+(_1*(_24-_22))),Math.round(_23+(_1*(_25-_23))),true)}
this.resizeBy((_12-this.getWidth()),(_11-this.getHeight()),null,null,true);if(_1==1){delete this.$42u;this.$74();delete this.$7k
if(_4)this.completeRestore(true);else if(_5)this.completeMaximize(true);else this.completeMinimize(this.$7v,true)}},isc.A.animateRestoreStep=function isc_Window_animateRestoreStep(_1,_2,_3){this.animateMinimizeStep(_1,_2,_3,true)},isc.A.animateMaximizeStep=function isc_Window_animateMaximizeStep(_1,_2,_3){this.animateMinimizeStep(_1,_2,_3,null,true)},isc.A.isAnimating=function isc_Window_isAnimating(_1,_2,_3,_4,_5){if(this.invokeSuper(isc.Window,"isAnimating",_1,_2,_3,_4,_5))return true;if(_1&&!isc.isAn.Array(_1))_1=[_1];if(this.$7k&&((_1==null)||(_1.contains("minimize"))||(_1.contains("rect"))))return true;return false},isc.A.completeMinimize=function isc_Window_completeMinimize(_1,_2){this.minimized=true;this.maximized=false;if(this.body&&this.body.isVisible())this.body.hide();if(this.footer&&this.footer.isVisible())this.footer.hide();this.$po=_1;if(this.$420!=null){if(!_2)this.setWidth(this.$420);this.$pn=this.$420}
if(!_2){this.setHeight(_1);if(this.$42y!=null)this.setLeft(this.$42y);if(this.$42z!=null)this.setTop(this.$42z)}
if(this.$421!=null)this.setShowShadow(this.$421);if(this.$422!=null&&this.headerLabel)
this.headerLabel.parentElement.canDragReposition=this.$422;delete this.$422;delete this.$42z;delete this.$42y;delete this.$421;delete this.$420;if(this.minimizeButton)this.minimizeButton.enable()},isc.A.restore=function isc_Window_restore(){if(this.$7k){isc.Animation.finishAnimation(this.$7k)}
if(!this.minimized&&!this.maximized)return;if(!this.$7r)this.$7r=this.getVisibleHeight();var _1=(this.minimized?this.minimizeButton:this.maximizeButton);if(_1){_1.addProperties(this.minimized?this.minimizeButtonDefaults:this.maximizeButtonDefaults);_1.markForRedraw()}
if(this.animateMinimize&&this.isDrawn()&&this.isVisible()){if(_1){_1.disable();_1.redraw()}
this.$7w();this.$7k=isc.Animation.registerAnimation(this.animateRestoreStep,(this.minimizeTime||this.animateTime),this.minimizeAcceleration||this.animateAcceleration,this)}else{this.completeRestore()}},isc.A.completeRestore=function isc_Window_completeRestore(_1){if(this.$7u!=null)this.setOverflow(this.$7u);if(this.$7q!=null)this.setHeight(this.$7q);if(this.$420!=null)this.setWidth(this.$420);if(!_1){if(this.$42y!=null)this.setLeft(this.$42y);if(this.$42z!=null)this.setTop(this.$42z)}
if(this.$po!=null)this.$po=this.$7s;if(this.$pn!=null)this.$pn=this.$423;if(this.$421!=null)this.setShowShadow(this.$421);if(this.$7t!=null)this.canDragResize=this.$7t;if(this.$422!=null&&this.headerLabel)
this.headerLabel.parentElement.canDragReposition=this.$422;var _2=this.minimized?this.minimizeButton:this.maximizeButton;this.minimized=false;this.maximized=false;this.$75();if(this.$424){this.reflowNow();this.setAutoSize(true)}
delete this.$7q;delete this.$7s;delete this.$7r;delete this.$7t;delete this.$422;delete this.$7u;delete this.$420;delete this.$423;delete this.$421;delete this.$42y;delete this.$42z;delete this.$424;if(_2)_2.enable()},isc.A.$75=function isc_Window__showComponents(){if(this.body&&!this.body.isVisible())this.body.show();if(this.footer&&!this.footer.isVisible())this.footer.show()},isc.A.maximize=function isc_Window_maximize(){if(this.$7k)isc.Animation.finishAnimation(this.$7k);if(this.maximized)return;if(!this.minimized){this.$7q=this.getHeight();this.$7r=this.getVisibleHeight();this.$7s=this.$po;this.$7t=this.canDragResize;this.canDragResize=false}else{if(this.minimizeButton){this.minimizeButton.addProperties(this.minimizeButtonDefaults);this.minimizeButton.redraw()}}
this.$42y=this.getLeft();this.$42z=this.getTop();this.$420=this.getWidth();this.$42x=this.getVisibleWidth();this.$423=this.$pn;if(this.headerLabel){this.$422=this.headerLabel.parentElement.canDragReposition;this.headerLabel.parentElement.canDragReposition=false}
this.$421=this.showShadow;this.setShowShadow(false);if(this.autoSize){this.$424=true;this.setAutoSize(false)}
var _1=this.maximizeButton;if(_1){_1.addProperties(this.restoreButtonDefaults);_1.markForRedraw()}
if(this.animateMinimize&&this.isDrawn()&&this.isVisible()){if(_1){_1.disable();_1.redraw()}
this.$42v=(this.parentElement?this.parentElement.getInnerHeight():isc.Page.getHeight());this.$42w=(this.parentElement?this.parentElement.getInnerWidth():isc.Page.getWidth());this.$7w();this.$7k=isc.Animation.registerAnimation(this.animateMaximizeStep,(this.minimizeTime||this.animateTime),this.minimizeAcceleration||this.animateAcceleration,this)}else{this.completeMaximize()}},isc.A.completeMaximize=function isc_Window_completeMaximize(_1){if(!_1)this.moveTo(0,0);this.resizeTo("100%","100%");this.$75();this.minimized=false;this.maximized=true;if(this.maximizeButton)this.maximizeButton.enable()},isc.A.resizeTo=function isc_Window_resizeTo(_1,_2,_3,_4,_5){if(!_5&&this.$7k){isc.Animation.finishAnimation(this.$7k)}
return this.invokeSuper(isc.Window,"resizeTo",_1,_2,_3,_4,_5)},isc.A.resizeBy=function isc_Window_resizeBy(_1,_2,_3,_4,_5){if(!_5&&this.$7k){isc.Animation.finishAnimation(this.$7k)}
return this.invokeSuper(isc.Window,"resizeBy",_1,_2,_3,_4,_5)},isc.A.$7e=function isc_Window__closeButtonClick(){return this.handleCloseClick()},isc.A.handleCloseClick=function isc_Window_handleCloseClick(){if(this.onCloseClick&&this.onCloseClick()==false)return;return this.closeClick()},isc.A.closeClick=function isc_Window_closeClick(){this.close();return false},isc.A.close=function isc_Window_close(){this.returnValue(null);this.hide()});isc.B._maxIndex=isc.C+74;isc.Window.registerStringMethods({onMaximizeClick:"",onMinimizeClick:"",onRestoreClick:"",onCloseClick:""})
if(isc.definePrintWindow)isc.definePrintWindow();isc.Window.registerDupProperties("items");isc.defineClass("Portlet","Window");isc.A=isc.Portlet.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.showShadow=false;isc.A.animateMinimize=true;isc.A.dragAppearance="outline";isc.A.dragType="Portlet";isc.A.canDrop=true;isc.A.overflow="hidden";isc.A.minHeight=60;isc.A.minWidth=70;isc.A.resizeFrom=["T","B","L","R"];isc.A.edgeCursorMap={"L":"col-resize","R":"col-resize","T":"row-resize","B":"row-resize"};isc.A.showMaximizeButton=true;isc.A.headerControls=["headerLabel","minimizeButton","maximizeButton","closeButton"];isc.A.dragOpacity=30;isc.A.showCloseConfirmationMessage=true;isc.A.closeConfirmationMessage="Close portlet?";isc.B.push(isc.A.setMinHeight=function isc_Portlet_setMinHeight(_1){this.minHeight=_1;if(this.portalRow)this.portalRow.$120j()},isc.A.setMinWidth=function isc_Portlet_setMinWidth(_1){if(this.minWidth==_1)return;this.minWidth=_1;if(this.portalRow)this.portalRow.reflow("Portlet minWidth changed")},isc.A.setRowHeight=function isc_Portlet_setRowHeight(_1){this.rowHeight=_1;if(this.portalRow)this.portalRow.setHeight(_1)},isc.A.getPortalLayout=function isc_Portlet_getPortalLayout(){if(this.portalRow){return this.portalRow.portalLayout}else{return null}},isc.A.getPortalPosition=function isc_Portlet_getPortalPosition(){var _1=this.getPortalLayout();if(_1){return _1.getPortalPosition(this)}else{return null}},isc.A.close=function isc_Portlet_close(){var _1=this.getPortalLayout();if(_1&&_1.willClosePortlet){var _2=_1.willClosePortlet(this);if(_2===false)return}
if(this.showCloseConfirmationMessage){isc.confirm(this.closeConfirmationMessage,{target:this,methodName:"confirmedClosePortlet"},this.closeConfirmationDialogProperties)}else{this.confirmedClosePortlet(true)}},isc.A.confirmedClosePortlet=function isc_Portlet_confirmedClosePortlet(_1){if(!_1)return;if(this.editContext&&this.editNode){this.editContext.removeNode(this.editNode)}else{if(this.portalRow){this.portalRow.removePortlets(this)}else{this.clear()}}
if(this.destroyOnClose)this.markForDestroy()},isc.A.onMaximizeClick=function isc_Portlet_onMaximizeClick(){var _1=this.getPortalLayout();if(_1&&_1.willMaximizePortlet){return _1.willMaximizePortlet(this)===false?false:true}else{return true}},isc.A.onMinimizeClick=function isc_Portlet_onMinimizeClick(){var _1=this.getPortalLayout();if(_1&&_1.willMinimizePortlet){return _1.willMinimizePortlet(this)===false?false:true}else{return true}},isc.A.onRestoreClick=function isc_Portlet_onRestoreClick(){var _1=this.getPortalLayout();if(_1&&_1.willRestorePortlet){return _1.willRestorePortlet(this)===false?false:true}else{return true}},isc.A.$123b=function isc_Portlet__createPlaceholder(){if(this.$55d)return;var _1=this.getVisibleWidth(),_2=this.getVisibleHeight(),_3=this.getPageLeft(),_4=this.getPageTop(),_5=this.$po,_6=this.$pn;this.$55d=isc.Canvas.create({width:_1,height:_2,minHeight:this.getMinHeight(),minWidth:this.getMinWidth(),minimized:this.minimized,$po:this.$po,$pn:this.$pn,$858:this});if(this.parentElement){this.masterLayout=this.parentElement;this.masterLayout.portletMaximizing=true;this.masterLayout.replaceMember(this,this.$55d,false);this.masterLayout.portletMaximizing=false}
this.setWidth(_1);this.setHeight(_2);this.$po=_5;this.$pn=_6;this.moveTo(_3,_4);this.bringToFront();this.draw()},isc.A.$123c=function isc_Portlet__destroyPlaceholder(){if(!this.$55d)return;if(this.masterLayout&&this.masterLayout.hasMember(this.$55d)){this.masterLayout.portletMaximizing=true;this.masterLayout.replaceMember(this.$55d,this);this.masterLayout.portletMaximizing=false}
this.$55d.$858=null;this.$55d.destroy();delete this.$55d;delete this.masterLayout},isc.A.maximize=function isc_Portlet_maximize(){this.$123b();this.delayCall("doMaximize")},isc.A.restore=function isc_Portlet_restore(){if(this.portalRow)this.portalRow.restore();this.Super("restore",arguments)},isc.A.completeRestore=function isc_Portlet_completeRestore(){this.Super("completeRestore",arguments);this.$123c();if(this.portalRow)this.portalRow.$120j();var _1=this.getPortalLayout();if(_1&&_1.portletRestored){_1.portletRestored(this)}},isc.A.doMaximize=function isc_Portlet_doMaximize(){this.Super("maximize",arguments)},isc.A.completeMaximize=function isc_Portlet_completeMaximize(){this.Super("completeMaximize",arguments);var _1=this.getPortalLayout();if(_1&&_1.portletMaximized){_1.portletMaximized(this)}},isc.A.completeMinimize=function isc_Portlet_completeMinimize(){this.Super("completeMinimize",arguments);this._percent_height=null;this._percent_width=null;this.$123c();if(this.portalRow)this.portalRow.$120j();var _1=this.getPortalLayout();if(_1&&_1.portletMinimized){_1.portletMinimized(this)}},isc.A.resized=function isc_Portlet_resized(_1,_2,_3){this.Super("resized",arguments);if(this.masterLayout)return;var _4=this.getPortalLayout();if(_4)_4.$118l()});isc.B._maxIndex=isc.C+19;isc.defineClass("PortalResizeBar",isc.Canvas);isc.A=isc.PortalResizeBar.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.dragStartDistance=1;isc.A.isMouseTransparent=true;isc.A.overflow="hidden";isc.A.$jp=false;isc.A.$jo=false;isc.A.canDragResize=true;isc.A.edgeCursorMap={"R":"col-resize","B":"row-resize"};isc.B.push(isc.A.initWidget=function isc_PortalResizeBar_initWidget(){this.Super("initWidget",arguments);this.dragTarget=this.target},isc.A.getEventEdge=function isc_PortalResizeBar_getEventEdge(){return this.vertical?"R":"B"});isc.B._maxIndex=isc.C+2;isc.defineClass("PortalColumnHeader","HLayout");isc.A=isc.PortalColumnHeader.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.height=20;isc.A.noResizer=true;isc.A.border="1px solid #CCCCCC";isc.A.canDragReposition=true;isc.B.push(isc.A.initWidget=function isc_PortalColumnHeader_initWidget(){this.Super("initWidget",arguments);this.dragTarget=this.creator;this.addMember(isc.LayoutSpacer.create());this.menu=this.getMenuConstructor().create({width:150,portalColumn:this.creator,data:[{title:"Remove Column",click:"menu.portalColumn.removeSelf()",enableIf:function(_1,_2,_3){return _2.portalColumn.portalLayout.getMembers().length>1}},{title:"Add Column",click:"menu.portalColumn.addNewColumn()"}]});this.addMember(isc.MenuButton.create({title:"Column Properties",width:150,menu:this.menu}));this.addMember(isc.LayoutSpacer.create())});isc.B._maxIndex=isc.C+1;isc.defineClass("PortalRow","Layout");isc.A=isc.PortalRow.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.vertical=false;isc.A._generated=true;isc.A.respectSizeLimits=true;isc.A.overflow="auto";isc.A.resizeBarClass="PortalResizeBar";isc.A.resizeBarSize=3;isc.A.defaultResizeBars="middle";isc.A.canAcceptDrop=true;isc.A.dropLineThickness=2;isc.A.dropLineProperties={backgroundColor:"blue"};isc.A.edgeCursorMap={"T":"row-resize","B":"row-resize"};isc.A.hDropOffset=15;isc.B.push(isc.A.initWidget=function isc_PortalRow_initWidget(){this.Super("initWidget",arguments);if(this.portlets)this.addPortlets(this.portlets);this.portlets=null},isc.A.createResizeBar=function isc_PortalRow_createResizeBar(){var _1=this.Super("createResizeBar",arguments);_1.canDragResize=this.canResizePortlets;return _1},isc.A.setCanResizePortlets=function isc_PortalRow_setCanResizePortlets(_1){this.canResizePortlets=_1;if(this.$3f)this.$3f.canDragResize=_1;this.getPortlets().map(function(_2){_2.canDragResize=_1;if(_2.$3f)_2.$3f.canDragResize=_1})},isc.A.prepareForDragging=function isc_PortalRow_prepareForDragging(){var _1=this.ns.EH;if(!_1.dragTarget)this.Super("prepareForDragging",arguments);if(this.hasMember(_1.dragTarget)&&_1.dragOperation==_1.DRAG_RESIZE){switch(_1.resizeEdge){case"B":case"T":_1.dragTarget=this;break;case"L":var _2=this.getMemberNumber(_1.dragTarget);if(_2>0){_1.dragTarget=this.getMember(_2-1);_1.resizeEdge="R"}else{_1.dragTarget=this.portalColumn}
break;case"R":var _2=this.getMemberNumber(_1.dragTarget);var _3=this.getMembers().length;if(_2==_3-1){_1.dragTarget=this.portalColumn}
break}}
if(_1.dragTarget==this&&_1.resizeEdge=="T"&&_1.dragOperation==_1.DRAG_RESIZE){var _2=this.parentElement.getMemberNumber(this);if(_2>0){_1.dragTarget=this.parentElement.getMember(_2-1);_1.resizeEdge="B"}else{_1.dragTarget=null}}},isc.A.$129h=function isc_PortalRow__updatePortletResizeFrom(){if(this.members.length==0||!this.parentElement||!this.portalLayout)return;var _1=this.parentElement.getMemberNumber(this);var _2=this.portalLayout.getPortalColumnNumber(this.portalColumn);this.resizeFrom=_1>0?["T","B"]:["B"];for(var _3=0;_3<this.members.length;_3++){var _4=["B"];if(_1>0)_4.add("T");if(_3>0||(_2>0&&this.portalLayout.canResizeColumns)){_4.add("L")}
if(_3!=this.members.length-1||this.portalLayout.canResizeColumns){_4.add("R")}
var _5=this.getMember(_3);_5.resizeFrom=_4}},isc.A.isHDrop=function isc_PortalRow_isHDrop(){var _1=this.getDropPosition();var _2=this.getMember(_1==0?0:_1-1);if(!_2.containsEvent()&&_1<this.members.length){_2=this.getMember(_1)}
var _3=_2.getOffsetX();if(_3<this.hDropOffset||_3>_2.getVisibleWidth()-this.hDropOffset){return true}else{return false}},isc.A.isPortalColumnDrop=function isc_PortalRow_isPortalColumnDrop(){var _1=this.ns.EH.dragTarget;var _2=_1.getDragType();if(_2=="PortalColumn")return true;if(_1.isA("Palette")){var _3=_1.getDragData(),_4=(isc.isAn.Array(_3)?_3[0]:_3);if(_4.type=="PortalColumn"||_4.className=="PortalColumn")return true}
return false},isc.A.willAcceptDrop=function isc_PortalRow_willAcceptDrop(){delete this.dropTarget;if(this.isPortalColumnDrop()){this.dropTarget=this.portalLayout;return this.portalLayout.willAcceptDrop()}
if(!this.isHDrop()){this.dropTarget=this.parentElement;return this.dropTarget.willAcceptDrop()}
return this.portalLayout.willAcceptPortletDrop(this.ns.EH.dragTarget,this.portalLayout.getPortalColumnNumber(this.portalColumn),this.portalColumn.getPortalRowNumber(this),this.getDropPosition())},isc.A.drop=function isc_PortalRow_drop(){if(this.dropTarget){this.dropTarget.drop()}else{this.Super("drop",arguments)}
return false},isc.A.dropMove=function isc_PortalRow_dropMove(){if(this.willAcceptDrop()){if(this.dropTarget){this.hideDropLine();this.dropTarget.dropMove()}else{this.parentElement.hideDropLine();this.showDropLine()}
return false}else{this.hideDropLine();return true}},isc.A.dropOver=function isc_PortalRow_dropOver(){if(this.willAcceptDrop()){if(this.dropTarget){this.hideDropLine();this.dropTarget.dropOver()}else{this.parentElement.hideDropLine();this.showDropLine()}
return false}else{this.hideDropLine();return true}},isc.A.getDropComponent=function isc_PortalRow_getDropComponent(_1,_2){var _3=this.portalLayout.getDropPortlet(_1,this.portalLayout.getPortalColumnNumber(this.portalColumn),this.portalColumn.getPortalRowNumber(this),_2);if(this.handleDroppedEditNode)_3=this.handleDroppedEditNode(_3,_2);if(_3){if(!isc.isA.Portlet(_3)){_3=isc.Portlet.create({autoDraw:false,title:"",items:_3,destroyOnClose:true})}}
return _3},isc.A.setMinHeight=function isc_PortalRow_setMinHeight(_1){if(this.minHeight==_1)return;this.minHeight=_1;if(this.portalColumn)this.portalColumn.rowLayout.reflow("PortalRow minHeight changed")},isc.A.shouldAlterBreadth=function isc_PortalRow_shouldAlterBreadth(_1){if(_1.minimized)return false;return this.Super("shouldAlterBreadth",arguments)},isc.A.$120j=function isc_PortalRow__checkPortletHeights(){if(this.members.map(function(_1){return _1.minimized}).and()){this.minimize()}else{this.setMinHeight(this.members.map("getMinHeight").max()+this.$2u()+this.getVMarginBorder());this.restore()}},isc.A.minimize=function isc_PortalRow_minimize(){if(this.minimized)return;this.setMinHeight(0);this.$7q=this.getHeight();this.$7s=this.$po;this.setHeight(this.members.map("getHeight").max()+this.$2u()+this.getVMarginBorder());this.minimized=true},isc.A.restore=function isc_PortalRow_restore(){if(!this.minimized)return;this.setHeight(this.$7q);this.$po=this.$7s;delete this.$7q;delete this.$7s;this.minimized=false},isc.A.reflow=function isc_PortalRow_reflow(){if(this.portalLayout)this.portalLayout.reflow("portalRow reflowed");this.Super("reflow",arguments)},isc.A.$87x=function isc_PortalRow__getDesiredMemberSpace(){return this.members.map(function(_1){if(isc.isA.Number(_1.$pn)){return Math.max(_1.$pn,_1.minWidth)}else{return _1.minWidth}}).sum()},isc.A.$122u=function isc_PortalRow__getWidthOverhead(){return this.getMarginSpace()+this.getHMarginBorder()},isc.A.getTotalMemberSpace=function isc_PortalRow_getTotalMemberSpace(){var _1=this.Super("getTotalMemberSpace",arguments);var _2=this.$87x();if(_1<_2){return _2}else{return _1}},isc.A.$122v=function isc_PortalRow__applyMaxWidth(_1){var _2=this.members.length;if(_2==0)return;var _3=this.$87x()+this.$122u()-_1;if(_3<=0)return;for(var i=_2-1;i>=0&&_3>0;i--){var _5=this.getMember(i);var _6=_5.getWidth();var _7=Math.min(_6-_5.minWidth,_3);if(_7>0){_5.setWidth(_6-_7);_3-=_7}}},isc.A.membersChanged=function isc_PortalRow_membersChanged(){if(this.portletMaximizing)return;if(this.members.length==0){if(this.editContext&&this.editNode)this.editContext.removeNode(this.editNode);this.destroy()}else{this.$120j();this.$129h()}
if(this.portalLayout&&this.portalLayout.portletsChanged)this.portalLayout.portletsChanged()},isc.A.addMembers=function isc_PortalRow_addMembers(_1,_2){if(this.portletMaximizing)return this.Super("addMembers",arguments);if(!isc.isAn.Array(_1))_1=[_1];var _3=this;_1.map(function(_6){if(_6.$858)return;_6.canDragResize=_3.canResizePortlets;if(_6.$3f)_6.$3f.canDragResize=_3.canResizePortlets;var _4=_6.$po;if(_4){_6.$po=null;_6._percent_height=null;if(!_6.rowHeight)_6.rowHeight=_4}
if(_6.rowHeight){if(!_3.$po){_3.setHeight(_6.rowHeight);_3.$po=isc.NumberUtil.parseIfNumeric(_6.rowHeight)}}});this.Super("addMembers",arguments);_1.map(function(_6){_6.portalRow=_3});if(this.editContext&&!this.$86r){for(var i=0;i<_1.length;i++){var _6=_1[i];if(_6.editNode){this.editContext.addNode(_6.editNode,this.editNode,_2+i,null,true)}}}},isc.A.addPortlets=function isc_PortalRow_addPortlets(_1,_2){this.$86r=true;this.addMembers(_1,_2);delete this.$86r},isc.A.addPortlet=function isc_PortalRow_addPortlet(_1,_2){this.addPortlets(_1,_2)},isc.A.removeMembers=function isc_PortalRow_removeMembers(_1){this.Super("removeMembers",arguments);if(!this.portletMaximizing){if(!isc.isAn.Array(_1))_1=[_1];var _2=this;_1.map(function(_3){if(_3.portalRow)_3.portalRow=null;if(_2.editContext&&_3.editNode&&!_2.$86s){_2.editContext.removeNode(_3.editNode,true)}})}},isc.A.removePortlets=function isc_PortalRow_removePortlets(_1){if(!isc.isAn.Array(_1))_1=[_1];var _2=this;_1.map(function(_4){var _3=_4.$55d;if(_3){_2.removeMembers(_3);delete _3.$858;delete _4.$55d;_3.destroy();_4.deparent();_4.clear();_4.portalRow=null}else{_2.$86s=true;_2.removeMembers(_4);delete _2.$86s}})},isc.A.removePortlet=function isc_PortalRow_removePortlet(_1){this.removePortlets(_1)},isc.A.getPortlet=function isc_PortalRow_getPortlet(_1){return this.getMember(_1)},isc.A.getPortlets=function isc_PortalRow_getPortlets(){return this.getMembers().map(function(_1){if(_1.$858){return _1.$858}else{return _1}})},isc.A.getPortalPosition=function isc_PortalRow_getPortalPosition(_1){var _2=this.getPortlets().indexOf(_1);if(_2<0){return null}else{return{position:_2}}});isc.B._maxIndex=isc.C+32;isc.A=isc.PortalRow;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.applyStretchResizePolicy=function isc_c_PortalRow_applyStretchResizePolicy(_1,_2,_3,_4,_5){if(_5.portalLayout&&_5.portalLayout.preventRowUnderflow){if(_1&&_1.length>0){var _6=_1.map(function(_8){return isc.isA.Number(_8)}).and();if(_6){var _7=_1.sum();if(_7<_2){_1[_1.length-1]="*"}}}}
return this.Super("applyStretchResizePolicy",arguments)});isc.B._maxIndex=isc.C+1;isc.defineClass("PortalColumnBody","Layout");isc.A=isc.PortalColumnBody.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.vertical=true;isc.A.layoutMargin=3;isc.A.resizeBarClass="PortalResizeBar";isc.A.resizeBarSize=3;isc.A.defaultResizeBars="middle";isc.A.canAcceptDrop=true;isc.A.canDrag=false;isc.A.dropLineThickness=2;isc.A.dropLineProperties={backgroundColor:"blue"};isc.A.width="100%";isc.A.canDragResize=true;isc.A.dragTarget="parent";isc.A.edgeCursorMap={"L":"col-resize","R":"col-resize"};isc.A.respectSizeLimits=true;isc.A.drop=isc.PortalRow.getInstanceProperty("drop");isc.A.dropMove=isc.PortalRow.getInstanceProperty("dropMove");isc.A.dropOver=isc.PortalRow.getInstanceProperty("dropOver");isc.B.push(isc.A.createResizeBar=function isc_PortalColumnBody_createResizeBar(){var _1=this.Super("createResizeBar",arguments);_1.canDragResize=this.creator.canResizePortlets;return _1},isc.A.membersChanged=function isc_PortalColumnBody_membersChanged(){this.members.map(function(_1){_1.$129h()})},isc.A.getTotalMemberSpace=function isc_PortalColumnBody_getTotalMemberSpace(){var _1=this.Super("getTotalMemberSpace",arguments);var _2=this.members.map(function(_3){if(isc.isA.Number(_3.$po)){return Math.max(_3.$po,_3.minHeight)}else{return _3.minHeight}}).sum();return Math.max(_1,_2)},isc.A.isPortalColumnDrop=function isc_PortalColumnBody_isPortalColumnDrop(){var _1=this.ns.EH.dragTarget;var _2=_1.getDragType();if(_2=="PortalColumn")return true;if(_1.isA("Palette")){var _3=_1.getDragData(),_4=(isc.isAn.Array(_3)?_3[0]:_3);if(_4.type=="PortalColumn"||_4.className=="PortalColumn")return true}
return false},isc.A.willAcceptDrop=function isc_PortalColumnBody_willAcceptDrop(){delete this.dropTarget;if(this.isPortalColumnDrop()){this.dropTarget=this.creator.portalLayout;return this.dropTarget.willAcceptDrop()}
return this.creator.portalLayout.willAcceptPortletDrop(this.ns.EH.dragTarget,this.creator.portalLayout.getPortalColumnNumber(this.creator),this.getDropPosition(),null)},isc.A.getDropComponent=function isc_PortalColumnBody_getDropComponent(_1,_2){var _3=this.creator.portalLayout.getDropPortlet(_1,this.creator.portalLayout.getPortalColumnNumber(this.creator),_2,null);if(this.handleDroppedEditNode)_3=this.handleDroppedEditNode(_3,_2);if(_3){if(!isc.isA.Portlet(_3)){_3=isc.Portlet.create({autoDraw:false,title:"",items:_3,destroyOnClose:true})}
var _4=_3.portalRow;if(_4&&_4.parentElement==this&&_4.getMembers().length==1){return _4}else{this.creator.addPortlet(_3,_2);return null}}});isc.B._maxIndex=isc.C+6;isc.A=isc.PortalColumnBody;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.applyStretchResizePolicy=function isc_c_PortalColumnBody_applyStretchResizePolicy(_1,_2,_3,_4,_5){var _6=_5.creator.portalLayout;if(_6&&_6.preventColumnUnderflow){if(_1&&_1.length>0){var _7=_1.map(function(_10){return isc.isA.Number(_10)}).and();if(_7){var _8=_1.sum();if(_8<_2){var _9=_5.members.findNextIndex(_1.length-1,function(_10){return!_10.minimized},true,0);if(_9!=-1){_1[_9]="*"}}}}}
return this.Super("applyStretchResizePolicy",arguments)});isc.B._maxIndex=isc.C+1;isc.defineClass("PortalColumn","Layout");isc.A=isc.PortalColumn.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.vertical=true;isc.A.minWidth=80;isc.A._generated=true;isc.A.dragAppearance="outline";isc.A.canAcceptDrop=false;isc.A.canDrop=true;isc.A.dragType="PortalColumn";isc.A.canDrag=false;isc.A.canDragResize=true;isc.A.edgeCursorMap={"L":"col-resize","R":"col-resize"};isc.A.showColumnHeader=true;isc.A.columnHeaderConstructor="PortalColumnHeader";isc.A.columnHeaderDefaults={title:"Column"};isc.A.rowLayoutDefaults={_constructor:"PortalColumnBody"};isc.A.rowConstructor="PortalRow";isc.B.push(isc.A.setShowColumnHeader=function isc_PortalColumn_setShowColumnHeader(_1){if(_1){if(this.showColumnHeader)return;this.showColumnHeader=_1;this.addAutoChild("columnHeader",{autoParent:"none"});this.addMember(this.columnHeader,0)}else{if(!this.showColumnHeader)return;this.showColumnHeader=_1;this.removeMember(this.columnHeader)}},isc.A.initWidget=function isc_PortalColumn_initWidget(){this.Super("initWidget",arguments);this.addAutoChild("columnHeader");this.addAutoChild("rowLayout");if(this.portletDropTypes)this.rowLayout.dropTypes=this.portletDropTypes;if(this.portalRows)this.addPortalRows(this.portalRows);this.portalRows=null},isc.A.$87y=function isc_PortalColumn__getDesiredWidth(){var _1=this.getPortalRows();if(_1.length==0){return this.minWidth}else{var _2=_1.map(function(_3){return _3.$87x()+_3.$122u()}).max()+this.$122u();return Math.max(_2,this.minWidth)}},isc.A.$122u=function isc_PortalColumn__getWidthOverhead(){var _1=this.$2u()+this.getHMarginBorder()+this.rowLayout.$2u()+this.rowLayout.getHMarginBorder();if(this.rowLayout.vscrollOn)_1+=this.rowLayout.getScrollbarSize();return _1},isc.A.prepareForDragging=function isc_PortalColumn_prepareForDragging(){var _1=this.ns.EH;if(_1.dragTarget){if(_1.dragTarget!=this)return}else{this.Super("prepareForDragging",arguments)}
if(_1.dragTarget==this&&_1.dragOperation==_1.DRAG_RESIZE&&_1.resizeEdge=="L"){var _2=this.portalLayout.getMemberNumber(this);if(_2>0){_1.dragTarget=this.portalLayout.getMember(_2-1);_1.resizeEdge="R"}else{_1.dragTarget=null}}},isc.A.dragResized=function isc_PortalColumn_dragResized(_1,_2){if(_1<0){var _3=this.getWidth()-this.$122u();this.getPortalRows().map(function(_4){_4.$122v(_3)})}
this.Super("dragResized",arguments)},isc.A.resized=function isc_PortalColumn_resized(_1,_2,_3){this.Super("resized",arguments);if(!_1)return;if(this.portalLayout)this.portalLayout.$118l()},isc.A.addNewColumn=function isc_PortalColumn_addNewColumn(){this.portalLayout.addColumnAfter(this)},isc.A.removeSelf=function isc_PortalColumn_removeSelf(){this.portalLayout.removeColumn(this.portalLayout.getMemberNumber(this))},isc.A.makePortalRow=function isc_PortalColumn_makePortalRow(_1){if(_1==null)_1={};var _2={portalLayout:this.portalLayout,portalColumn:this,canResizePortlets:this.canResizePortlets};if(this.portletDropTypes)_2.dropTypes=this.portletDropTypes;var _3;if(isc.isA.PortalRow(_1)){_1.setProperties(_2);_3=_1}else{isc.addProperties(_1,_2);_3=this.createAutoChild("row",_1)}
return _3},isc.A.setCanResizePortlets=function isc_PortalColumn_setCanResizePortlets(_1){this.canResizePortlets=_1;this.getPortalRows().map(function(_2){_2.setCanResizePortlets(_1)})},isc.A.setPortletDropTypes=function isc_PortalColumn_setPortletDropTypes(_1){this.portletDropTypes=_1;this.rowLayout.dropTypes=_1;this.getPortalRows().map(function(_2){_2.dropTypes=_1})},isc.A.addPortalRows=function isc_PortalColumn_addPortalRows(_1,_2){if(!isc.isAn.Array(_1))_1=[_1];var _3=this;_1=_1.map(function(_4){return _3.makePortalRow(_4)});this.rowLayout.addMembers(_1,_2)},isc.A.addPortalRow=function isc_PortalColumn_addPortalRow(_1,_2){this.addPortalRows(_1,_2)},isc.A.removePortalRows=function isc_PortalColumn_removePortalRows(_1){this.rowLayout.removeMembers(_1)},isc.A.removePortalRow=function isc_PortalColumn_removePortalRow(_1){this.removePortalRows(_1)},isc.A.getPortalRows=function isc_PortalColumn_getPortalRows(){return this.rowLayout.getMembers()},isc.A.getPortalRowNumber=function isc_PortalColumn_getPortalRowNumber(_1){return this.rowLayout.getMemberNumber(_1)},isc.A.getPortalRow=function isc_PortalColumn_getPortalRow(_1){return this.rowLayout.getMember(_1)},isc.A.getPortlets=function isc_PortalColumn_getPortlets(){var _1=[];this.getPortalRows().map(function(_2){_1.addList(_2.getPortlets())});return _1},isc.A.getPortletArray=function isc_PortalColumn_getPortletArray(){return this.getPortalRows().map(function(_1){return _1.getPortlets()})},isc.A.getPortalPosition=function isc_PortalColumn_getPortalPosition(_1){var _2=this.getPortalRows();for(var _3=0;_3<_2.length;_3++){var _4=_2[_3].getPortalPosition(_1);if(_4){_4.rowNum=_3;return _4}}
return null},isc.A.getPortlet=function isc_PortalColumn_getPortlet(_1){var _2=this.getPortalRows();for(var x=0;x<_2.length;x++){var _4=_2[x].getPortlet(_1);if(_4)return _4}
return null},isc.A.addPortlets=function isc_PortalColumn_addPortlets(_1,_2){if(!isc.isAn.Array(_1))_1=[_1];var _3=this;var _4=_1.map(function(_5){return _3.makePortalRow({portlets:_5})});this.addPortalRows(_4,_2)},isc.A.addPortlet=function isc_PortalColumn_addPortlet(_1,_2){this.addPortlets(_1,_2)},isc.A.addPortletToExistingRow=function isc_PortalColumn_addPortletToExistingRow(_1,_2,_3){var _4=this.rowLayout.getMembers();if(_4==null||_4.length<=_2){if(this.editContext&&this.editNode&&_1.editNode){this.editContext.addNode(_1.editNode,this.editNode,_4.length)}else{this.addPortlet(_1,_4.length)}}else{var _5=this.rowLayout.getMember(_2);if(_5.editContext&&_5.editNode&&_1.editNode){_5.editContext.addNode(_1.editNode,_5.editNode,_3)}else{_5.addPortlets(_1,_3)}}});isc.B._maxIndex=isc.C+26;isc.defineClass("PortalLayout","Layout");isc.A=isc.PortalLayout.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.vertical=false;isc.A.overflow=isc.Canvas.AUTO;isc.A.columnOverflow=isc.Canvas.AUTO;isc.A.canStretchColumnWidths=true;isc.A.canShrinkColumnWidths=true;isc.A.preventUnderflow=true;isc.A.preventColumnUnderflow=true;isc.A.preventRowUnderflow=true;isc.A.numColumns=2;isc.A.showColumnMenus=true;isc.A.columnBorder="1px solid gray";isc.A.canResizeColumns=true;isc.A.canAcceptDrop=true;isc.A.dropTypes=["PortalColumn"];isc.A.dropLineThickness=2;isc.A.dropLineProperties={backgroundColor:"blue"};isc.A.rowConstructor=isc.PortalColumn.getInstanceProperty("rowConstructor");isc.A.rowLayoutDefaults=isc.PortalColumn.getInstanceProperty("rowLayoutDefaults");isc.A.columnConstructor="PortalColumn";isc.B.push(isc.A.setColumnOverflow=function isc_PortalLayout_setColumnOverflow(_1){this.columnOverflow=_1;this.rowLayoutDefaults.overflow=_1;this.getPortalColumns().map(function(_2){_2.rowLayout.setOverflow(_1)})},isc.A.setCanStretchColumnWidths=function isc_PortalLayout_setCanStretchColumnWidths(_1){this.canStretchColumnWidths=_1;this.reflow("canStretchColumnWidths changed")},isc.A.setCanShrinkColumnWidths=function isc_PortalLayout_setCanShrinkColumnWidths(_1){this.canShrinkColumnWidths=_1;this.reflow("canShrinkColumnWidths changed")},isc.A.setStretchColumnWidthsProportionally=function isc_PortalLayout_setStretchColumnWidthsProportionally(_1){this.stretchColumnWidthsProportionally=_1;this.reflow("stretchColumnWidthsProportionally changed")},isc.A.setPreventUnderflow=function isc_PortalLayout_setPreventUnderflow(_1){if(this.preventUnderflow==_1)return;this.preventUnderflow=_1;this.reflow("preventUndeflow changed")},isc.A.setPreventColumnUnderflow=function isc_PortalLayout_setPreventColumnUnderflow(_1){if(this.preventColumnUnderflow==_1)return;this.preventColumnUnderflow=_1;this.getPortalColumns().map(function(_2){_2.rowLayout.reflow("preventColumnUnderflow changed")})},isc.A.setPreventRowUnderflow=function isc_PortalLayout_setPreventRowUnderflow(_1){if(this.preventRowUnderflow==_1)return;this.preventRowUnderflow=_1;this.getPortalColumns().map(function(_2){_2.getPortalRows().map(function(_3){_3.reflow("preventRowUnderflow changed")})})},isc.A.getNumColumns=function isc_PortalLayout_getNumColumns(){return this.getMembers().length},isc.A.setShowColumnMenus=function isc_PortalLayout_setShowColumnMenus(_1){if(this.showColumnMenus==_1)return;this.showColumnMenus=_1;this.getPortalColumns().map(function(_2){_2.setShowColumnHeader(_1)})},isc.A.setColumnBorder=function isc_PortalLayout_setColumnBorder(_1){this.columnBorder=_1;var _2=this.members||[];for(var i=0;i<_2.length;i++){_2[i].setBorder(_1)}},isc.A.setCanResizeColumns=function isc_PortalLayout_setCanResizeColumns(_1){this.canResizeColumns=_1;this.$129i()},isc.A.setCanResizeRows=function isc_PortalLayout_setCanResizeRows(_1){this.setCanResizePortlets(_1)},isc.A.setCanResizePortlets=function isc_PortalLayout_setCanResizePortlets(_1){this.canResizePortlets=_1;this.getPortalColumns().map(function(_2){_2.setCanResizePortlets(_1)})},isc.A.setPortletDropTypes=function isc_PortalLayout_setPortletDropTypes(_1){this.portletDropTypes=_1;this.getPortalColumns().map(function(_2){_2.setPortletDropTypes(_1)})},isc.A.willAcceptPortletDrop=function isc_PortalLayout_willAcceptPortletDrop(_1,_2,_3,_4){var _5=this.getPortalColumn(_2).rowLayout;if(_4!=null)_5=_5.getMember(_3);return _5.Super("willAcceptDrop",arguments)},isc.A.initWidget=function isc_PortalLayout_initWidget(){this.Super("initWidget",arguments);this.setCanResizeColumns(this.canResizeColumns);this.setColumnOverflow(this.columnOverflow);if(this.canResizeRows!=null)this.setCanResizePortlets(this.canResizeRows);if(this.portalColumns){this.addPortalColumns(this.portalColumns);delete this.portalColumns}else if(this.portlets){var _1=this;if(!isc.isAn.Array(this.portlets))this.portlets=[this.portlets];if(!isc.isAn.Array(this.portlets[0]))this.portlets=[this.portlets];this.portlets.map(function(_5){var _2=_1.makePortalColumn();_1.addPortalColumn(_2);if(!isc.isAn.Array(_5))_5=[_5];_5.map(function(_6){var _3=_2.makePortalRow();_2.addPortalRow(_3);_3.addPortlets(_6)})});delete this.portlets}else{if(this.numColumns){for(var x=0;x<this.numColumns;x++){this.addColumn()}}}},isc.A.getDropPortlet=function isc_PortalLayout_getDropPortlet(_1,_2,_3,_4){return _1},isc.A.makePortalColumn=function isc_PortalLayout_makePortalColumn(_1){if(_1==null)_1={};var _2={portalLayout:this,showColumnHeader:this.showColumnMenus,border:this.columnBorder,canResizePortlets:this.canResizePortlets,rowConstructor:this.rowConstructor,rowDefaults:this.rowDefaults,rowProperties:this.rowProperties,rowLayoutDefaults:this.rowLayoutDefaults,rowLayoutProperties:this.rowLayoutProperties}
if(this.portletDropTypes)_2.portletDropTypes=this.portletDropTypes;var _3;if(isc.isA.PortalColumn(_1)){_1.setProperties(_2);_3=_1}else{isc.addProperties(_1,_2);_3=this.createAutoChild("column",_1)}
return _3},isc.A.addMembers=function isc_PortalLayout_addMembers(_1,_2){if(!isc.isAn.Array(_1))_1=[_1];var _3=this;_1=_1.map(function(_5){return _3.makePortalColumn(_5)});this.Super("addMembers",arguments);if(this.editContext&&!this.$86t){for(var i=0;i<_1.length;i++){var _5=_1[i];if(_5.editNode){this.editContext.addNode(_5.editNode,this.editNode,_2+i,null,true)}}}},isc.A.addPortalColumns=function isc_PortalLayout_addPortalColumns(_1,_2){this.$86t=true;this.addMembers(_1,_2);delete this.$86t},isc.A.addPortalColumn=function isc_PortalLayout_addPortalColumn(_1,_2){this.addPortalColumns(_1,_2)},isc.A.removeMembers=function isc_PortalLayout_removeMembers(_1){this.Super("removeMembers",arguments);if(this.editContext&&!this.$86u){if(!isc.isAn.Array(_1))_1=[_1];var _2=this;_1.map(function(_3){if(_3.editNode){_2.editContext.removeNode(_3.editNode,true)}})}},isc.A.removePortalColumns=function isc_PortalLayout_removePortalColumns(_1){this.$86u=true;this.removeMembers(_1);delete this.$86u},isc.A.removePortalColumn=function isc_PortalLayout_removePortalColumn(_1){this.removePortalColumns(_1)},isc.A.addColumn=function isc_PortalLayout_addColumn(_1){if(this.editContext){var _2=this.editContext.makeEditNode({type:this.columnConstructor});this.editContext.addNode(_2,this.editNode,_1)}else{var _3="";var _4=0;while(window[(_3="PortalColumn"+_4++)]){}
this.addPortalColumn({ID:_3},_1)}},isc.A.removeColumn=function isc_PortalLayout_removeColumn(_1){var _2=this.members[_1];if(_2!=null){if(this.editContext&&_2.editNode){this.editContext.removeNode(_2.editNode)}else{_2.destroy()}}},isc.A.addColumnAfter=function isc_PortalLayout_addColumnAfter(_1){var _2=this.getMemberNumber(_1)+1;this.addColumn(_2)},isc.A.getPortlets=function isc_PortalLayout_getPortlets(){var _1=[];this.getPortalColumns().map(function(_2){_1.addList(_2.getPortlets())});return _1},isc.A.getPortletArray=function isc_PortalLayout_getPortletArray(){return this.getPortalColumns().map(function(_1){return _1.getPortletArray()})},isc.A.getPortalPosition=function isc_PortalLayout_getPortalPosition(_1){var _2=this.getPortalColumns();for(var _3=0;_3<_2.length;_3++){var _4=_2[_3].getPortalPosition(_1);if(_4){_4.colNum=_3;return _4}}
return null},isc.A.addPortlet=function isc_PortalLayout_addPortlet(_1,_2,_3,_4){if(_3==null)_3=0;if(_2==null)_2=0;var _5=this.getMember(_2);if(_5==null){this.addColumn(_2);_5=this.getMember(_2)}
if(_4==null){if(_5.editContext&&_5.editNode&&_1.editNode){_5.editContext.addNode(_1.editNode,_5.editNode,_3)}else{_5.addPortlet(_1,_3)}}else{_5.addPortletToExistingRow(_1,_3,_4)}},isc.A.getTotalMemberSpace=function isc_PortalLayout_getTotalMemberSpace(){var _1=this.Super("getTotalMemberSpace",arguments);var _2=this.members.map(function(_3){if(isc.isA.Number(_3.$pn)){return Math.max(_3.$pn,_3.minWidth)}else{return _3.minWidth}}).sum();return Math.max(_1,_2)},isc.A.setColumnWidth=function isc_PortalLayout_setColumnWidth(_1,_2){var _3=this.getPortalColumn(_1);if(!_3)return;if(_3.editContext&&_3.editNode){_3.editContext.setNodeProperties(_3.editNode,{width:_2})}else{_3.setWidth(_2)}},isc.A.getColumnWidth=function isc_PortalLayout_getColumnWidth(_1){var _2=this.getPortalColumn(_1);if(_2){return _2.getWidth()}else{return null}},isc.A.getPortalColumns=function isc_PortalLayout_getPortalColumns(){return this.getMembers()},isc.A.getPortalColumn=function isc_PortalLayout_getPortalColumn(_1){return this.getMember(_1)},isc.A.getPortalColumnNumber=function isc_PortalLayout_getPortalColumnNumber(_1){return this.getMemberNumber(_1)},isc.A.getColumn=function isc_PortalLayout_getColumn(_1){return this.getPortalColumn(_1)},isc.A.removePortlet=function isc_PortalLayout_removePortlet(_1){if(this.editContext&&_1.editNode){this.editContext.removeNode(_1.editNode)}else{if(_1.portalRow)_1.portalRow.removePortlets(_1)}},isc.A.$129i=function isc_PortalLayout__updateResizeFrom(){var _1=true;var _2=this;this.getPortalColumns().map(function(_3){if(_2.canResizeColumns){_3.rowLayout.resizeFrom=_3.resizeFrom=_1?["R"]:["L","R"]}else{_3.rowLayout.resizeFrom=_3.resizeFrom=[]}
_3.getPortalRows().map(function(_4){_4.$129h()});_1=false})},isc.A.membersChanged=function isc_PortalLayout_membersChanged(){this.$129i()},isc.A.$118l=function isc_PortalLayout__portletsResized(){if(this.portletsResized){this.fireOnPause("portletsResized","portletsResized",100)}});isc.B._maxIndex=isc.C+42;isc.A=isc.PortalLayout;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.applyStretchResizePolicy=function isc_c_PortalLayout_applyStretchResizePolicy(_1,_2,_3,_4,_5){if(_5.preventUnderflow){if(_1&&_1.length>0){var _6=_1.map(function(_16){return isc.isA.Number(_16)}).and();if(_6){var _7=_1.sum();if(_7<_2){_1[_1.length-1]="*"}}}}
var _8=this.Super("applyStretchResizePolicy",arguments);if(_4)_8=_1;var _9=_5.getPortalColumns().map("$87y");var _10=0;if(_5.canStretchColumnWidths){if(_5.stretchColumnWidthsProportionally){var _11=1;for(var i=0;i<_8.length;i++){var _13=(_9[i]/_8[i]);_11=Math.max(_11,_13)}
if(_11>1){for(var i=0;i<_8.length;i++){_8[i]=_8[i]*_11}}}else{for(var i=0;i<_8.length;i++){if(_9[i]>_8[i]){_10+=_9[i]-_8[i];_8[i]=_9[i]}else if(_10&&_5.canShrinkColumnWidths){var _14=_8[i]-_9[i];var _15=Math.min(_10,_14);_8[i]-=_15;_10-=_15}}
if(_10&&_5.canShrinkColumnWidths){for(var i=0;i<_8.length;i++){if(_9[i]<_8[i]){var _14=_8[i]-_9[i];var _15=Math.min(_10,_14);_8[i]-=_15;_10-=_15;if(_10==0)break}}}}}
return _8});isc.B._maxIndex=isc.C+1;isc.ClassFactory.defineClass("Dialog","Window");isc.A=isc.Dialog;isc.A.$76=[];isc.A.OK_BUTTON_TITLE="OK";isc.A.APPLY_BUTTON_TITLE="Apply";isc.A.YES_BUTTON_TITLE="Yes";isc.A.NO_BUTTON_TITLE="No";isc.A.CANCEL_BUTTON_TITLE="Cancel";isc.A.DONE_BUTTON_TITLE="Done";isc.A.CONFIRM_TITLE="Confirm";isc.A.SAY_TITLE="Note";isc.A.WARN_TITLE="Warning";isc.A.ASK_TITLE="Question";isc.A.ASK_FOR_VALUE_TITLE="Please enter a value";isc.A.LOGIN_TITLE="Please log in";isc.A.USERNAME_TITLE="Username";isc.A.PASSWORD_TITLE="Password";isc.A.LOGIN_BUTTON_TITLE="Log in";isc.A.LOGIN_ERROR_MESSAGE="Invalid username or password";isc.A.OK={getTitle:function(){return isc.Dialog.OK_BUTTON_TITLE},width:75,click:function(){this.topElement.okClick()}};isc.A.APPLY={getTitle:function(){return isc.Dialog.APPLY_BUTTON_TITLE},width:75,click:function(){this.topElement.applyClick()}};isc.A.YES={getTitle:function(){return isc.Dialog.YES_BUTTON_TITLE},width:75,click:function(){this.topElement.yesClick()}};isc.A.NO={getTitle:function(){return isc.Dialog.NO_BUTTON_TITLE},width:75,click:function(){this.topElement.noClick()}};isc.A.CANCEL={getTitle:function(){return isc.Dialog.CANCEL_BUTTON_TITLE},width:75,click:function(){this.topElement.cancelClick()}};isc.A.DONE={getTitle:function(){return isc.Dialog.DONE_BUTTON_TITLE},width:75,click:function(){this.topElement.doneClick()}};isc.A=isc.Dialog.getPrototype();isc.A.defaultWidth=360;isc.A.title="Dialog";isc.A.styleName="dialogBackground";isc.A.skinImgDir="images/Dialog/";isc.A.canDragReposition=false;isc.A.canDragResize=false;isc.A.autoCenter=true;isc.A.bodyStyle="dialogBody";isc.A.bodyColor="#DDDDDD";isc.A.hiliteBodyColor="#FFFFFF";isc.A.bodyDefaults=isc.addProperties({},isc.Window.getInstanceProperty("bodyDefaults"),{layoutTopMargin:15,layoutLeftMargin:15,layoutRightMargin:15,layoutBottomMargin:5});isc.A.messageStyle="normal";isc.A.messageLabelDefaults={width:"100%",canSelectText:true};isc.A.messageIconDefaults={width:32,height:32};isc.A.messageStackDefaults={height:1,layoutMargin:10,layoutBottomMargin:5,membersMargin:10};isc.A.autoChildParentMap=isc.addProperties({},isc.Window.getInstanceProperty("autoChildParentMap"),{messageStack:"body",messageIcon:"messageStack",messageLabel:"messageStack"});isc.A.headerStyle="dialogHeader";isc.A.hiliteHeaderStyle="dialogHeaderHilite";isc.A.headerLabelDefaults=isc.addProperties({},isc.Window.getInstanceProperty("headerLabelDefaults"),{styleName:"dialogHeaderText"});isc.A.showHeaderIcon=false;isc.A.showMinimizeButton=false;isc.A.showMaximizeButton=false;isc.A.showFooter=false;isc.A.showToolbar=null;isc.A.autoFocus=true;isc.A.askIcon="[SKIN]ask.png";isc.A.sayIcon="[SKIN]say.png";isc.A.warnIcon="[SKIN]warn.png";isc.A.confirmIcon="[SKIN]confirm.png";isc.A.notifyIcon="[SKIN]notify.png";isc.A.errorIcon="[SKIN]error.png";isc.A.stopIcon="[SKIN]stop.png";isc.A.toolbarDefaults=isc.addProperties({},isc.Window.getInstanceProperty("toolbarDefaults"),{layoutAlign:"center",width:20,click:function(_1,_2){this.Super("click",arguments);var _3=isc.EH.getTarget(),_4=this.getMemberNumber(_3);if(_3!==this&&_4!==-1&&isc.isA.StatefulCanvas(_3)){this.topElement.buttonClick(_3,_4)}}});isc.A=isc.Dialog.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.namedLocatorChildren=["okButton","applyButton","yesButton","noButton","cancelButton","doneButton"];isc.B.push(isc.A.initWidget=function isc_Dialog_initWidget(){if(this.message!=null){this.autoSize=true}
this.Super("initWidget",arguments);if(this.buttons){this.toolbarButtons=this.buttons}},isc.A.createChildren=function isc_Dialog_createChildren(){var _1=this.showToolbar;this.showToolbar=false;this.Super("createChildren");this.showToolbar=_1;if(this.message!=null){this.body.hPolicy="fill";this.addAutoChild("messageStack",null,isc.HStack);if(this.icon!=null){this.addAutoChild("messageIcon",{src:this.getImgURL(this.icon)},isc.Img)}
var _2=this.message.evalDynamicString(this,{loadingImage:this.imgHTML(isc.Canvas.loadingImageSrc,isc.Canvas.loadingImageSize,isc.Canvas.loadingImageSize)});this.addAutoChild("messageLabel",{contents:_2,baseStyle:this.messageStyle},isc.Label)}
if(this.showToolbar==null){this.showToolbar=this.toolbarButtons!=null&&this.toolbarButtons.length>0}
if(this.showToolbar){this.makeToolbar()}},isc.A.draw=function isc_Dialog_draw(){if(!this.readyToDraw())return this;this.Super("draw",arguments);if(this.toolbar&&this.autoFocus){var _1=this.toolbar.getMember(0);if(_1)_1.focus()}
return this},isc.A.saveData=function isc_Dialog_saveData(){},isc.A.cancelClick=function isc_Dialog_cancelClick(){return this.closeClick()},isc.A.$7e=function isc_Dialog__closeButtonClick(){return this.cancelClick()},isc.A.okClick=function isc_Dialog_okClick(){this.saveData();this.clear();this.returnValue(true)},isc.A.applyClick=function isc_Dialog_applyClick(){this.saveData()},isc.A.yesClick=function isc_Dialog_yesClick(){this.returnValue(true)},isc.A.noClick=function isc_Dialog_noClick(){this.returnValue(false)},isc.A.doneClick=function isc_Dialog_doneClick(){this.clear();this.returnValue(true)},isc.A.buttonClick=function isc_Dialog_buttonClick(_1,_2){});isc.B._maxIndex=isc.C+12;isc.Dialog.changeDefaults("toolbarDefaults",{makeButton:function(_1){var _2=_1,_1=this.Super("makeButton",arguments);switch(_2)
{case isc.Dialog.OK:this.creator.okButton=_1;_1.locatorParent=this.creator;break;case isc.Dialog.APPLY:this.creator.applyButton=_1;_1.locatorParent=this.creator;break;case isc.Dialog.YES:this.creator.yesButton=_1;_1.locatorParent=this.creator;break;case isc.Dialog.NO:this.creator.noButton=_1;_1.locatorParent=this.creator;break;case isc.Dialog.CANCEL:this.creator.cancelButton=_1;_1.locatorParent=this.creator;break;case isc.Dialog.DONE:this.creator.doneButton=_1;_1.locatorParent=this.creator;break}
return _1}});isc.Dialog.Prompt={ID:"isc_globalPrompt",_generated:true,width:400,height:90,autoDraw:false,autoSize:true,isModal:true,showHeader:false,showFooter:false,showToolbar:false,dismissOnEscape:false,bodyStyle:"promptBody",bodyDefaults:isc.addProperties({},isc.Dialog.getInstanceProperty("bodyDefaults"),{height:"100%"}),message:"Loading...&nbsp;${loadingImage}",messageStackDefaults:isc.addProperties({},isc.Dialog.getInstanceProperty("messageStackDefaults"),{height:"100%",width:"100%",layoutAlign:"center"}),messageLabelDefaults:isc.addProperties({},isc.Dialog.getInstanceProperty("messageLabelDefaults"),{width:"100%",align:isc.Canvas.CENTER,valign:isc.Canvas.CENTER}),layoutMargin:0,showMessage:function(_1,_2){this.setProperties(_2);if(_1==null)_1="&nbsp;"
this.message=_1.evalDynamicString(this,{loadingImage:this.imgHTML(isc.Canvas.loadingImageSrc,isc.Canvas.loadingImageSize,isc.Canvas.loadingImageSize)});if(!this.$7f)this.createChildren();this.messageLabel.setContents(this.message==null?"&nbsp;":this.message);this.show()},clearMessage:function(){if(this.pendingFade){isc.Timer.clearTimeout(this.pendingFade);delete this.pendingFade}
if(this.isAnimating(this.$zb)){this.finishAnimation(this.$zb)}
this.clear();if(this.$89e){this.fireCallback(this.$89e);delete this.$89e}},fadeDuration:2000,fadeMessage:function(){delete this.pendingFade;this.animateHide("fade",{target:this,methodName:"clearMessage"})},destroy:function(){isc.Dialog.Prompt=this.$77;return this.Super("destroy",arguments)}};isc.addGlobal("showPrompt",function(_1,_2){var _3=isc.Dialog.Prompt;if(!isc.isA.Dialog(_3)){var _4=_3;_3=isc.Dialog.Prompt=isc.Dialog.create(_3);_3.$77=_4}
isc.Dialog.Prompt.showMessage(_1,_2)});isc.addGlobal("clearPrompt",function(){if(!isc.isA.Dialog(isc.Dialog.Prompt))return;isc.Dialog.Prompt.clearMessage()});isc.addGlobal("showFadingPrompt",function(_1,_2,_3,_4){if(isc.isA.Canvas(isc.Dialog.Prompt)&&isc.Dialog.Prompt.isDrawn()){isc.clearPrompt()}
isc.showPrompt(_1,_4);var _5=isc.Dialog.Prompt;if(_2==null)_2=_5.fadeDuration;_5.$89e=_3;_5.pendingFade=_5.delayCall("fadeMessage",[],_2)});isc.Dialog.Warn={ID:"isc_globalWarn",_generated:true,width:360,height:60,isModal:true,canDragReposition:true,keepInParentRect:true,autoDraw:false,autoSize:true,autoCenter:true,buttons:[isc.Dialog.OK],message:"Your message here!",showMessage:function(_1,_2){if(_1==null)_1="&nbsp;";this.message=_1;if(!this.icon&&_2.icon)this.icon=_2.icon;this.setProperties(_2);if(_2.callback==null)delete this.callback;if(!this.$7f)this.createChildren();this.messageLabel.setContents(this.message==null?"&nbsp;":this.message);if(this.icon){if(this.messageIcon){this.messageIcon.setSrc(this.getImgURL(this.icon));this.messageIcon.show()}}else if(this.messageIcon)this.messageIcon.hide();this.toolbar.layoutChildren();if(this.messageLabel.isDirty())this.messageLabel.redraw();if(this.isDrawn()){this.messageStack.layoutChildren();this.body.layoutChildren();this.layoutChildren()}
this.show();if(this.toolbar){var _3=this.toolbar.getMember(0);_3.focus()}}};isc.addGlobal("showMessage",function(_1,_2,_3,_4){if((isc.isA.String(_4)||isc.isA.Function(_4))||(_4==null&&isc.isAn.Object(_3)&&_3.methodName==null&&_3.action==null&&_3.method==null))
{var _5=_4;_4=_3;_3=_5}
if(!isc.isA.Dialog(isc.Dialog.Warn)||(isc.isA.Function(isc.Dialog.Warn.initialized)&&!isc.Dialog.Warn.initialized()))
{isc.Dialog.Warn=isc.Dialog.create(isc.Dialog.Warn)}
if(!_4)_4={};if(_4.toolbarButtons!=null){_4.buttons=_4.toolbarButtons;delete _4.toolbarButtons}
if(!_4.buttons){if(_2=="confirm"){_4.buttons=[isc.Dialog.OK,isc.Dialog.CANCEL]}else if(_2=="ask"){_4.buttons=[isc.Dialog.YES,isc.Dialog.NO]}else{_4.buttons=[isc.Dialog.OK]}}
if(!_4.title){if(_2=="confirm")_4.title=isc.Dialog.CONFIRM_TITLE;else if(_2=="ask")_4.title=isc.Dialog.ASK_TITLE;else if(_2=="warn")_4.title=isc.Dialog.WARN_TITLE;else _4.title=isc.Dialog.SAY_TITLE}
isc.$78(_4);if(!_4.icon)_4.icon=isc.Dialog.getInstanceProperty(_2+"Icon");if(_3)_4.callback=_3;isc.Dialog.Warn.showMessage(_1,_4)});isc.addGlobal("getLastDialog",function(){return isc.Dialog.Warn});isc.addGlobal("dismissLastDialog",function(){if(isc.Dialog.Warn)isc.Dialog.Warn.hide()});isc.$78=function(_1){var _2=this.$79=this.$79||["okClick","yesClick","noClick","cancelClick","closeClick","applyClick"];for(var i=0;i<_2.length;i++){var _4=_2[i];if(!_1[_4]){_1[_4]=isc.Dialog.getInstanceProperty(_4)}}}
isc.addGlobal("warn",function(_1,_2,_3){isc.showMessage(_1,"warn",_2,_3)});isc.addGlobal("say",function(_1,_2,_3){isc.showMessage(_1,"say",_2,_3)});isc.addGlobal("ask",function(_1,_2,_3){isc.showMessage(_1,"ask",_2,_3)});isc.confirm=function(_1,_2,_3){isc.showMessage(_1,"confirm",_2,_3)}
isc.askForValue=function(_1,_2,_3){_3=_3||isc.emptyObject;var _4=isc.Dialog.Ask;if(!_4){var _5=isc.DynamicForm.create({numCols:1,padding:3,items:[{name:"message",type:"blurb"},{name:"value",showTitle:false,width:"*"}],saveOnEnter:true,submit:function(){this.askDialog.okClick()}});_4=isc.Dialog.Ask=isc.Dialog.create({items:[_5],askForm:_5,canDragReposition:true,isModal:true,bodyProperties:{overflow:"visible"},overflow:"visible"});_5.askDialog=_4;_4.$8a=function(){this.clear();this.returnValue(this.askForm.getValue("value"))}}
var _6=_3.left!=null||_3.top!=null;if(_3.toolbarButtons!=null){_3.buttons=_3.toolbarButtons;delete _3.toolbarButtons}
_3=isc.addProperties({callback:_2,title:_3.title||isc.Dialog.ASK_FOR_VALUE_TITLE,autoCenter:!_6,left:(_6?_3.left||"10%":null),top:(_6?_3.top||"20%":null),width:_3.width||"80%",height:_3.height||20,buttons:_3.buttons||[isc.Dialog.OK,isc.Dialog.CANCEL],okClick:_3.okClick||_4.$8a},_3);isc.$78(_3);_4.setProperties(_3);_4.askForm.setValues({message:_1||"Please enter a value:",value:_3.defaultValue||""});_4.show();_4.askForm.focusInItem("value")}
isc.ClassFactory.defineClass("LoginDialog","Window");isc.LoginDialog.registerStringMethods({register:"values, form",lostPassword:"values, form"});isc.A=isc.LoginDialog;isc.A.firstTimeInit=true;isc.A=isc.LoginDialog.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.dismissable=false;isc.A.allowBlankPassword=false;isc.A.showLostPasswordLink=false;isc.A.showRegistrationLink=false;isc.A.errorStyle="formCellError";isc.A.lostPasswordItemTitle="Lost Password?";isc.A.registrationItemTitle="Register";isc.A.autoCenter=true;isc.A.autoSize=true;isc.A.isModal=true;isc.A.showMinimizeButton=false;isc.A.items=["autoChild:loginForm"];isc.A.loginFormConstructor="DynamicForm";isc.A.loginFormDefaults={numCols:2,padding:4,autoDraw:false,saveOnEnter:true,submit:function(){var _1=this,_2=[{username:this.getValue("usernameItem"),password:this.getValue("passwordItem")}];_2[1]=function(_3,_4){if(_3){_1.complete()}else{if(_4!=null)
_1.setValue("loginFailureItem",_4)
_1.showItem("loginFailureItem");_1.focusInItem("passwordItem")}};this.fireCallback(this.loginDialog.loginFunc,"credentials,dialogCallback",_2)},complete:function(_1){this.loginDialog.hide();this.setValue("loginFailureItem",this.loginDialog.errorMessage);this.setValue("usernameItem","");this.setValue("passwordItem","");this.hideItem("loginFailureItem");if(_1){this.fireCallback(this.loginFunc,"credentials,dialogCallback")}else{var _2=isc.Cookie.get("loginRedirect");if(_2)window.location.replace(_2)}}};isc.A.formDSDefaults={clientOnly:true,useAllDataSourceFields:true};isc.A.formDefaultFields=[{name:"loginFailureItem",type:"blurb",colSpan:2,visible:false},{name:"usernameItem",required:true,browserSpellCheck:false,browserAutoCorrect:false,browserAutoCapitalize:false,keyPress:function(_1,_2,_3){if(_3=="Enter"){_2.focusInItem("passwordItem");return false}}},{name:"passwordItem",type:"password",required:true},{name:"loginButton",type:"button",type:"submit"},{name:"lostPasswordItem",type:"link",target:"javascript",canEdit:false,endRow:true,numCols:2,colSpan:2,showTitle:false,click:"form.loginDialog.lostPassword(form.getValues(), form)"},{name:"registrationItem",type:"link",target:"javascript",canEdit:false,endRow:true,numCols:2,colSpan:2,showTitle:false,click:"form.loginDialog.register(form.getValues(), form)"}];isc.B.push(isc.A.getDynamicDefaults=function isc_LoginDialog_getDynamicDefaults(_1){switch(_1){case"loginForm":var _2={loginDialog:this,values:{usernameItem:this.username||"",passwordItem:this.password||"",loginFailureItem:this.errorMessage},fields:this.formFields};var _3=isc.clone(this.formDefaultFields);for(var j=0;j<_3.length;j++){var _5=_3[j],_6=_5.name;isc.addProperties(_5,this[_6+"Defaults"],this[_6+"Properties"]);if(null!=this[_6+"Title"]){_5.title=this[_6+"Title"];if(_5.type=='link'&&!_5.showTitle)
_5.linkTitle=this[_6+"Title"]}
var _7=this["show"+_6.substr(0,1).toUpperCase()+_6.substr(1)];if(null!=_7)_5.visible=_7;switch(_6){case"registrationItem":_5.visible=this.showRegistrationLink;break;case"lostPasswordItem":_5.visible=this.showLostPasswordLink;break;case"loginFailureItem":_5.cellStyle=this.errorStyle;break;case"passwordItem":_5.required=!this.allowBlankPassword;break}
_3[j]=_5}
_2.dataSource=isc.DataSource.create(this.formDSDefaults,{fields:_3});return _2}
return null},isc.A.cancelClick=function isc_LoginDialog_cancelClick(){this.loginForm.complete(true)},isc.A.init=function isc_LoginDialog_init(){if(isc.LoginDialog.firstTimeInit){isc.LoginDialog.firstTimeInit=false;isc.LoginDialog.addProperties({title:isc.Dialog.LOGIN_TITLE,usernameItemTitle:isc.Dialog.USERNAME_TITLE,passwordItemTitle:isc.Dialog.PASSWORD_TITLE,loginButtonTitle:isc.Dialog.LOGIN_BUTTON_TITLE,errorMessage:isc.Dialog.LOGIN_ERROR_MESSAGE})}
this.dismissOnEscape=this.showCloseButton=this.dismissable;this.Super("init",arguments);this.loginForm.focusInItem("usernameItem");if(this.username)this.loginForm.setValue("usernameItem",this.username);if(this.password)this.loginForm.setValue("passwordItem",this.password)});isc.B._maxIndex=isc.C+3;isc.showLoginDialog=function(_1,_2){return isc.LoginDialog.create(isc.addProperties({},_2,{autoDraw:true,loginFunc:_1}))}
isc.defineClass("MultiSortPanel","Layout");isc.A=isc.MultiSortPanel.getPrototype();isc.A.vertical=true;isc.A.overflow="visible";isc.A.addLevelButtonTitle="Add Level";isc.A.deleteLevelButtonTitle="Delete Level";isc.A.copyLevelButtonTitle="Copy Level";isc.A.invalidListPrompt="Columns may only be used once: '\${title}' is used multiple times.";isc.A.propertyFieldTitle="Column";isc.A.directionFieldTitle="Order";isc.A.ascendingTitle="Ascending";isc.A.descendingTitle="Descending";isc.A.firstSortLevelTitle="Sort by";isc.A.otherSortLevelTitle="Then by";isc.A.topLayoutDefaults={_constructor:"HLayout",overflow:"visible",height:22,align:"left",membersMargin:5,extraSpace:5};isc.A.addLevelButtonDefaults={_constructor:"IButton",icon:"[SKINIMG]actions/add.png",autoFit:true,height:22,showDisabled:false,autoParent:"topLayout",click:"this.creator.addLevel()"};isc.A.deleteLevelButtonDefaults={_constructor:"IButton",icon:"[SKINIMG]actions/remove.png",autoFit:true,height:22,showDisabled:false,autoParent:"topLayout",click:"this.creator.deleteSelectedLevel()"};isc.A.copyLevelButtonDefaults={_constructor:"IButton",icon:"[SKINIMG]RichTextEditor/copy.png",autoFit:true,height:22,showDisabled:false,autoParent:"topLayout",click:"this.creator.copySelectedLevel()"};isc.A.levelUpButtonTitle="Move Level Up";isc.A.levelUpButtonDefaults={_constructor:"ImgButton",src:"[SKINIMG]common/arrow_up.gif",height:22,width:20,imageType:"center",showDisabled:false,showRollOver:false,showDown:false,showFocused:false,autoParent:"topLayout",click:"this.creator.moveSelectedLevelUp()"};isc.A.levelDownButtonTitle="Move Level Down";isc.A.levelDownButtonDefaults={_constructor:"ImgButton",src:"[SKINIMG]common/arrow_down.gif",height:22,width:20,imageType:"center",showDisabled:false,showRollOver:false,showDown:false,showFocused:false,autoParent:"topLayout",click:"this.creator.moveSelectedLevelDown()"};isc.A.optionsGridDefaults={_constructor:"ListGrid",width:"100%",height:"*",canSort:false,canReorderFields:false,canResizeFields:false,canEdit:true,canEditNew:true,selectionType:"single",selectionProperty:"$73s",defaultFields:[{name:"sortSequence",title:"&nbsp;",showTitle:false,canEdit:false,width:80,canHide:false,showDefaultContextMenu:false,formatCellValue:function(_1,_2,_3,_4,_5){return _3==0?_5.creator.firstSortLevelTitle:_5.creator.otherSortLevelTitle}},{name:"property",title:" ",type:"select",defaultToFirstOption:true,showDefaultContextMenu:false,changed:"item.grid.creator.fireChangeEvent()"},{name:"direction",title:" ",type:"select",width:100,showDefaultContextMenu:false,defaultToFirstOption:true,changed:"item.grid.creator.fireChangeEvent()"}],selectionUpdated:function(_1,_2){this.creator.setButtonStates()},bodyKeyPress:function(_1){if(_1.keyName=="Delete"&&this.anySelected())this.removeSelectedData();else this.Super("bodyKeyPress",arguments)},extraSpace:5};isc.A.propertyFieldNum=1;isc.A.directionFieldNum=2;isc.A.topAutoChildren=["topLayout","addLevelButton","deleteLevelButton","copyLevelButton"];isc.A=isc.MultiSortPanel.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.getNumLevels=function isc_MultiSortPanel_getNumLevels(){return this.optionsGrid.data.length},isc.A.getSortLevel=function isc_MultiSortPanel_getSortLevel(_1){return this.getSortSpecifier(this.data.get(_1))},isc.A.getSort=function isc_MultiSortPanel_getSort(){var _1=this.optionsGrid,_2=_1.data.duplicate(),_3=_1.getEditRow(),_4=isc.isA.Number(_3)?_1.getEditValues(_3):null;if(_4)_2[_3]=isc.addProperties(_2[_3],_4);return this.getSortSpecifiers(_2)},isc.A.setSort=function isc_MultiSortPanel_setSort(_1){this.optionsGrid.setData(_1)},isc.A.validate=function isc_MultiSortPanel_validate(){var _1=this.optionsGrid,_2=_1.data,_3=[];for(var i=0;i<_2.length;i++){var _5=_2.get(i);if(_3.contains(_5.property)){var _6=this,_7=this.optionsGrid.getField("property").valueMap[_5.property],_8=this.invalidListPrompt.evalDynamicString(this,{title:_7});isc.warn(_8,function(){_6.recordFailedValidation(_5,i)});return false}
_3.add(_5.property)}
return true},isc.A.recordFailedValidation=function isc_MultiSortPanel_recordFailedValidation(_1){var _2=this.optionsGrid,_3=(isc.isA.Number(_1)?_1:_2.getRecordIndex(_1)),_1=(!isc.isA.Number(_1)?_1:_2.data.get(_1));_2.selectSingleRecord(_1);_2.startEditing(_3,1)},isc.A.getSortSpecifier=function isc_MultiSortPanel_getSortSpecifier(_1){if(isc.isA.Number(_1))_1=this.optionsGrid.data.get(_1);return this.optionsGrid.removeSelectionMarkers(_1)},isc.A.getSortSpecifiers=function isc_MultiSortPanel_getSortSpecifiers(_1){return this.optionsGrid.removeSelectionMarkers(_1)},isc.A.setSortSpecifiers=function isc_MultiSortPanel_setSortSpecifiers(_1){this.optionsGrid.setData(_1)},isc.A.initWidget=function isc_MultiSortPanel_initWidget(){this.Super("initWidget",arguments);this.$74x=this.maxLevels;this.addAutoChildren(this.topAutoChildren);this.addAutoChild("levelUpButton",{prompt:this.levelUpButtonTitle});this.addAutoChild("levelDownButton",{prompt:this.levelDownButtonTitle});this.addAutoChild("optionsGrid");this.setSortFields();this.setSortDirections();this.setButtonTitles();this.addMember(this.topLayout);this.addMember(this.optionsGrid);this.setButtonStates();if(this.initialSort)this.setSortSpecifiers(this.initialSort);else this.addLevel()},isc.A.setButtonTitles=function isc_MultiSortPanel_setButtonTitles(_1){if(this.addLevelButton)this.addLevelButton.setTitle(this.addLevelButtonTitle);if(this.deleteLevelButton)this.deleteLevelButton.setTitle(this.deleteLevelButtonTitle);if(this.copyLevelButton)this.copyLevelButton.setTitle(this.copyLevelButtonTitle)},isc.A.setButtonStates=function isc_MultiSortPanel_setButtonStates(){var _1=this.getNumLevels(),_2=this.maxLevels,_3=this.optionsGrid,_4=_3.anySelected(),_5=_3.getRecordIndex(_3.getSelectedRecord());if(this.addLevelButton)this.addLevelButton.setDisabled(_1>=_2);if(this.deleteLevelButton)this.deleteLevelButton.setDisabled(!_4);if(this.copyLevelButton)this.copyLevelButton.setDisabled(!_4||_1>=_2);if(this.levelUpButton)this.levelUpButton.setDisabled(!_4||_5==0);if(this.levelDownButton)this.levelDownButton.setDisabled(!_4||_5==_1-1)},isc.A.setFields=function isc_MultiSortPanel_setFields(_1){if(isc.DataSource&&isc.isA.DataSource(_1))_1=isc.getValues(_1.getFields());this.fields=isc.shallowClone(_1);this.setSortFields();this.optionsGrid.refreshFields();this.setButtonStates()},isc.A.setSortFields=function isc_MultiSortPanel_setSortFields(){var _1=[];this.optionsGrid.getField("property").title=this.propertyFieldTitle;if(!this.fields)return;for(var i=0;i<this.fields.length;i++){var _3=this.fields[i];if(_3.canSort!=false)_1.add(_3)}
this.fields=_1;var _4=this.optionsGrid,_5=this.fields?this.fields.getValueMap(_4.fieldIdProperty,"title"):{none:"No fields"},_6=isc.getKeys(_5).length;for(var _7 in _5){if(isc.DataSource&&(!_5[_7]||isc.isAn.emptyString(_5[_7])))
_5[_7]=isc.DataSource.getAutoTitle(_7)}
if(this.creator.headerSpans&&this.creator.showHeaderSpanTitles){this.applyHeaderSpans(this.creator.headerSpans,_5,"")}
this.optionsGrid.setValueMap("property",_5);if(!this.$74x||this.maxLevels>_6)this.maxLevels=_6},isc.A.applyHeaderSpans=function isc_MultiSortPanel_applyHeaderSpans(_1,_2,_3){for(var i=0;i<_1.length;i++){var _5=_3;var _6=_1[i];_5+=_6.title+this.creator.spanTitleSeparator;if(_6.spans){this.applyHeaderSpans(_6.spans,_2,_5)}else{for(var j=0;j<_6.fields.length;j++){var _8=_6.fields[j];if(_2[_8]==null){}else{_2[_8]=_5+_2[_8]}}}}},isc.A.setSortDirections=function isc_MultiSortPanel_setSortDirections(){this.optionsGrid.getField("direction").title=this.directionFieldTitle;this.optionsGrid.getField("direction").valueMap={"ascending":this.ascendingTitle,"descending":this.descendingTitle}},isc.A.addLevel=function isc_MultiSortPanel_addLevel(){var _1=this.optionsGrid,_2=_1.getRecordIndex(_1.getSelectedRecord()),_3=_1.getField("property"),_4=_1.getField("direction"),_5=_2>=0?_2+1:_1.data.length,_6={property:isc.firstKey(_3.valueMap),direction:isc.firstKey(_4.valueMap)};_1.data.addAt(_6,_5);this.editRecord(_5);this.setButtonStates();this.fireChangeEvent()},isc.A.deleteSelectedLevel=function isc_MultiSortPanel_deleteSelectedLevel(){var _1=this.optionsGrid,_2=_1.getRecordIndex(_1.getSelectedRecord());if(_2>=0){_1.data.removeAt(_2);this.setButtonStates();this.fireChangeEvent()}},isc.A.copySelectedLevel=function isc_MultiSortPanel_copySelectedLevel(){var _1=this.optionsGrid,_2=_1.getRecordIndex(_1.getSelectedRecord()),_3=isc.shallowClone(_1.getRecord(_2));if(_2>=0){_1.data.addAt(_3,_2+1);this.editRecord(_2+1);this.setButtonStates();this.fireChangeEvent()}},isc.A.editRecord=function isc_MultiSortPanel_editRecord(_1){this.optionsGrid.selectSingleRecord(_1);this.optionsGrid.startEditing(_1,this.propertyFieldNum)},isc.A.moveSelectedLevelUp=function isc_MultiSortPanel_moveSelectedLevelUp(){var _1=this.optionsGrid,_2=_1.getRecordIndex(_1.getSelectedRecord());if(_2>0){_1.data.slide(_2,_2-1);this.fireChangeEvent();this.optionsGrid.selectSingleRecord(_2-1)}},isc.A.moveSelectedLevelDown=function isc_MultiSortPanel_moveSelectedLevelDown(){var _1=this.optionsGrid,_2=_1.getRecordIndex(_1.getSelectedRecord());if(_2>=0&&_2<_1.data.length-1){_1.data.slide(_2,_2+1);this.fireChangeEvent();this.optionsGrid.selectSingleRecord(_2+1)}},isc.A.fireChangeEvent=function isc_MultiSortPanel_fireChangeEvent(){this.sortChanged(isc.shallowClone(this.getSort()))},isc.A.sortChanged=function isc_MultiSortPanel_sortChanged(_1){});isc.B._maxIndex=isc.C+24;isc.defineClass("MultiSortDialog","Window");isc.A=isc.MultiSortDialog;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.askForSort=function isc_c_MultiSortDialog_askForSort(_1,_2,_3){var _4=isc.isAn.Array(_1)?_1:isc.DataSource&&isc.isA.DataSource(_1)?isc.getValues(_1.getFields()):isc.isA.DataBoundComponent(_1)?_1.getAllFields():null;if(!_4)return;var _5={autoDraw:true,fields:_4,initialSort:_2,callback:_3};if(isc.ListGrid&&isc.isA.ListGrid(_1)&&_1.headerSpans){_5.headerSpans=_1.headerSpans;_5.showHeaderSpanTitles=_1.showHeaderSpanTitlesInSortEditor;_5.spanTitleSeparator=_1.sortEditorSpanTitleSeparator}
isc.MultiSortDialog.create(_5)});isc.B._maxIndex=isc.C+1;isc.A=isc.MultiSortDialog.getPrototype();isc.A.isModal=true;isc.A.width=500;isc.A.height=250;isc.A.vertical=true;isc.A.autoCenter=true;isc.A.showMinimizeButton=false;isc.A.mainLayoutDefaults={_constructor:"VLayout",width:"100%",height:"100%",layoutMargin:5};isc.A.multiSortPanelDefaults={_constructor:"MultiSortPanel",width:"100%",height:"*",autoParent:"mainLayout"};isc.A.title="Sort";isc.A.applyButtonTitle="Apply";isc.A.cancelButtonTitle="Cancel";isc.A.bottomLayoutDefaults={_constructor:"HLayout",width:"100%",height:22,align:"right",membersMargin:5,autoParent:"mainLayout"};isc.A.applyButtonDefaults={_constructor:"IButton",autoFit:true,height:22,autoParent:"bottomLayout",click:"this.creator.apply()"};isc.A.cancelButtonDefaults={_constructor:"IButton",autoFit:true,height:22,autoParent:"bottomLayout",click:"this.creator.cancel()"};isc.A.bottomAutoChildren=["bottomLayout","applyButton","cancelButton"];isc.A=isc.MultiSortDialog.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$783=["initialSort","maxLevels","invalidListPrompt","addLevelButtonTitle","addLevelButtonDefaults","addLevelButtonProperties","deleteLevelButtonTitle","deleteLevelButtonDefaults","deleteLevelButtonProperties","levelUpButtonTitle","levelDownButtonTitle","copyLevelButtonTitle","copyLevelButtonDefaults","copyLevelButtonProperties","optionsGridDefaults","optionsGridProperties","firstSortLevelTitle","propertyFieldTitle","directionFieldTitle","descendingTitle","ascendingTitle","otherSortLevelTitle"];isc.B.push(isc.A.initWidget=function isc_MultiSortDialog_initWidget(){this.Super("initWidget",arguments);this.addAutoChild("mainLayout");this.addAutoChild("multiSortPanel",this.getPassthroughProperties());this.addAutoChildren(this.bottomAutoChildren);this.addItem(this.mainLayout);this.optionsGrid=this.multiSortPanel.optionsGrid;this.setButtonStates()},isc.A.getPassthroughProperties=function isc_MultiSortDialog_getPassthroughProperties(){var _1=this.$783,_2={};for(var i=0;i<_1.length;i++){var _4=_1[i];if(this[_4]!=null)_2[_4]=this[_4]}
if(this.fields)_2.fields=isc.shallowClone(this.fields);return _2},isc.A.setButtonStates=function isc_MultiSortDialog_setButtonStates(){this.multiSortPanel.setButtonStates();this.applyButton.setTitle(this.applyButtonTitle);this.cancelButton.setTitle(this.cancelButtonTitle)},isc.A.getNumLevels=function isc_MultiSortDialog_getNumLevels(){return this.multiSortPanel.getNumLevels()},isc.A.getSortLevel=function isc_MultiSortDialog_getSortLevel(_1){return this.multiSortPanel.getSortLevel(_1)},isc.A.getSort=function isc_MultiSortDialog_getSort(){return this.multiSortPanel.getSort()},isc.A.validate=function isc_MultiSortDialog_validate(){return this.multiSortPanel.validate()},isc.A.closeClick=function isc_MultiSortDialog_closeClick(){this.cancel();return false},isc.A.cancel=function isc_MultiSortDialog_cancel(){if(this.callback)
this.fireCallback(this.callback,["sortLevels"],[null]);this.hide();this.markForDestroy()},isc.A.apply=function isc_MultiSortDialog_apply(){if(this.optionsGrid.getEditRow()!=null)this.optionsGrid.endEditing();if(!this.validate())return;if(this.callback){var _1=isc.shallowClone(this.getSort());this.fireCallback(this.callback,["sortLevels"],[_1])}
this.hide();this.markForDestroy()});isc.B._maxIndex=isc.C+10;isc.ClassFactory.defineClass("TabSet","Canvas");isc.A=isc.TabSet.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.overflow="hidden";isc.A.defaultTabIconSize=16;isc.A.tabProperties={};isc.A.simpleTabBaseStyle="tabButton";isc.A.tabBarPosition=isc.Canvas.TOP;isc.A.tabBarThickness=21;isc.A.selectedTab=0;isc.A.closeTabIcon="[SKIN]/TabSet/close.png";isc.A.closeTabIconSize=16;isc.A.moreTabCount=5;isc.A.moreTabTitle="More";isc.A.moreTabImage="[SKINIMG]/iOS/more.png";isc.A.moreTabDefaults={ariaRole:"tab"};isc.A.moreTabProperties={};isc.A.moreTabPaneProperties={};isc.A.moreTabPaneDefaults={_constructor:"VLayout",width:"100%",height:"100%",setData:function(_1){this.creator.moreTabPaneTable.setData(_1)}};isc.A.moreTabPaneNavBarDefaults={_constructor:"NavigationBar",controls:["titleLabel"],autoParent:"moreTabPane"};isc.A.moreTabPaneTableDefaults={_constructor:"TableView",width:"100%",height:"100%",recordNavigationClick:function(_1){this.creator.$8c(_1.button)},autoParent:"moreTabPane"};isc.A.tabBarControls=["tabScroller","tabPicker"];isc.A.showTabScroller=true;isc.A.showTabPicker=true;isc.A.tabBarControlLayoutConstructor="Layout";isc.A.tabBarControlLayoutDefaults={};isc.A.animateTabScrolling=true;isc.A.scrollerConstructor=isc.StretchImgButton;isc.A.scrollerDefaults={noDoubleClicks:true,showRollOver:false,showDown:false,mouseMove:function(){if(!this.creator.showScrollerRollOver)return;var _1=this.inWhichPart();var _2=_1==this.backPartName?this.forwardPartName:this.backPartName;this.setState(isc.StatefulCanvas.STATE_UP,_2);this.setState(isc.StatefulCanvas.STATE_OVER,_1)},mouseOut:function(){if(!this.creator.showScrollerRollOver)return;this.setState(isc.StatefulCanvas.STATE_UP,this.forwardPartName);this.setState(isc.StatefulCanvas.STATE_UP,this.backPartName)},mouseDown:function(){this.clickPart=this.inWhichPart();this.setState(isc.StatefulCanvas.STATE_DOWN,this.clickPart)},mouseUp:function(){this.setState(isc.StatefulCanvas.STATE_UP,this.clickPart)},mouseStillDown:function(){this.click()},click:function(){var _1=this.clickPart==this.backPartName;if(this.isRTL())_1=!_1;if(_1)this.creator.scrollBack();else this.creator.scrollForward();return false}};isc.A.scrollerButtonSize=16;isc.A.tabPickerConstructor=isc.ImgButton;isc.A.tabPickerDefaults={showRollOver:false,click:function(){this.creator.showTabPickerMenu()}};isc.A.pickerButtonSize=16;isc.A.skinImgDir="images/TabSet/";isc.A.symmetricScroller=true;isc.A.scrollerSrc="[SKIN]/scroll.gif";isc.A.scrollerHSrc="[SKIN]hscroll.gif";isc.A.scrollerVSrc="[SKIN]vscroll.gif";isc.A.symmetricPickerButton=true;isc.A.pickerButtonSrc="[SKIN]/picker.gif";isc.A.pickerButtonHSrc="[SKIN]hpicker.gif";isc.A.pickerButtonVSrc="[SKIN]vpicker.gif";isc.A.paneContainerConstructor="PaneContainer";isc.A.paneContainerClassName="tabSetContainer";isc.A.paneContainerOverflow=isc.Canvas.AUTO;isc.A.symmetricEdges=true;isc.A.titleEditorDefaults={name:"title",type:"text",showTitle:false};isc.A.useIOSTabs=isc.Browser.isWebKit&&isc.Browser.isMobile;isc.B.push(isc.A.setPaneContainerOverflow=function isc_TabSet_setPaneContainerOverflow(_1){this.paneContainerOverflow=_1;if(this.paneContainer)this.paneContainer.setOverflow(_1)});isc.B._maxIndex=isc.C+1;isc.defineClass("SimpleTabButton","Button");isc.A=isc.SimpleTabButton.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.width=null;isc.A.height=null;isc.B.push(isc.A.setIcon=function isc_SimpleTabButton_setIcon(_1){var _2=this.parentElement?this.parentElement.parentElement:null;if(_2&&!_2.canCloseTabs&&_2.useIOSTabs){this.iOSIcon=null}
this.Super("setIcon",arguments)},isc.A.getTitle=function isc_SimpleTabButton_getTitle(){var _1=this.parentElement?this.parentElement.parentElement:null;if(_1&&!_1.canCloseTabs&&_1.useIOSTabs){if(!this.iOSIcon&&this.icon){this.iOSIcon=this.icon;this.icon=null}
var _2=(_1.iOSIcon==null?"<span style='height: 30px'>&nbsp;</span>":isc.Canvas.imgHTML("[SKIN]blank.gif",30,30,null,"style='-webkit-mask-box-image: url("+isc.Page.getImgURL(this.iOSIcon)+");",null,null)),_3="<span>"+this.title+"</span>";return _2+_3}
return this.Super("getTitle",arguments)},isc.A.setPane=function isc_SimpleTabButton_setPane(_1){this.parentElement.parentElement.updateTab(this,_1)},isc.A.selectTab=function isc_SimpleTabButton_selectTab(){this.parentElement.parentElement.selectTab(this)});isc.B._maxIndex=isc.C+4;isc.A=isc.TabSet.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.simpleTabButtonConstructor=isc.SimpleTabButton;isc.A.tabBarConstructor=isc.TabBar;isc.A.disablePaneWithTab=true;isc.A.$537={top:"topEdgeSizes",bottom:"bottomEdgeSizes",left:"leftEdgeSizes",right:"rightEdgeSizes"};isc.A.$538={top:"topEdgeOffsets",bottom:"bottomEdgeOffsets",left:"leftEdgeOffsets",right:"rightEdgeOffsets"};isc.A.namedLocatorChildren=["tabBarControlLayout"];isc.B.push(isc.A.initWidget=function isc_TabSet_initWidget(){this.showEdges=false;this.Super("initWidget",arguments);if(this.tabs==null)this.tabs=[];if(this.tabBarDefaults==null)this.tabBarDefaults={};this.tabProperties=this.tabProperties||this.tabInstanceDefaults||{};this.dynamicTabProperties={};var _1=this.tabBarPosition;var _2=(_1=="left")||(_1=="right");if(this.tabBarAlign==null){this.tabBarAlign=(_2?"top":(this.isRTL()?"right":"left"))}
if(this.useSimpleTabs){this.tabBarDefaults.buttonConstructor=this.simpleTabButtonConstructor;this.dynamicTabProperties.baseStyle=this.simpleTabBaseStyle+_1.substring(0,1).toUpperCase()+_1.substring(1);var _3=(this.tabBarPosition==isc.Canvas.LEFT||this.tabBarPosition==isc.Canvas.RIGHT);this.dynamicTabProperties.ariaRole="tab"}
if(this.defaultTabWidth&&!_2){this.dynamicTabProperties.width=this.defaultTabWidth}
if(this.defaultTabHeight&&_2){this.dynamicTabProperties.height=this.defaultTabHeight}
if(this.defaultTabIconSize){this.dynamicTabProperties.iconSize=this.defaultTabIconSize}
this.makeTabBar();this.makePaneContainer();this.createPanes()},isc.A.makeTabBar=function isc_TabSet_makeTabBar(){if(this.tabs==null)return;var _1=(this.tabBarPosition==isc.Canvas.LEFT||this.tabBarPosition==isc.Canvas.RIGHT),_2=this.tabBarAlign;var _3=this.tabs.duplicate(),_4;var _5=isc.addProperties({},this.tabProperties,this.dynamicTabProperties);for(var i=0;i<_3.length;i++){for(var j in _5){if(_3[i][j]===_4)_3[i][j]=_5[j]}}
var _8=isc.addProperties({selectTabOnContextClick:this.selectTabOnContextClick,ID:this.getID()+"_tabBar",width:(_1?this.tabBarThickness:"100%"),height:(_1?"100%":this.tabBarThickness),accessKey:this.accessKey,tabIndex:this.tabIndex,tabs:_3,align:this.tabBarAlign,vertical:_1?true:false,selectedTab:this.selectedTab,showMoreTab:this.showMoreTab,moreTabCount:this.moreTabCount,moreTab:this.createMoreTab(),allowButtonReselect:this.showMoreTab?true:false,buttonSelected:function(_12){this.Super("buttonSelected",arguments);if(this.parentElement!=null){this.parentElement.$8c(_12)}},childResized:function(_12,_13,_14,_15){this.Super("childResized",arguments);if(_15=="Overflow on initial draw"){return}
if(this.parentElement!=null){this.parentElement.$54m()}},showContextMenu:function(){var _9=isc.EH.getTarget();if(this.getButtons().contains(_9)){var _10=this.parentElement,_11=_10.getTabObject(_9);if(_10.showTabContextMenu(_10,_11)==false)return false}
return this.Super("showContextMenu",arguments)},canReorderItems:this.canReorderTabs,reorderOnDrop:!this.canReorderTabs,itemDragReordered:function(_12,_13){if(this.parentElement!=null){this.parentElement.reorderTab(_12,_13)}},tabBarPosition:this.tabBarPosition,tabBarAlign:this.tabBarAlign,autoDraw:false},this.tabBarDefaults,this.tabBarProperties);_8.creator=this;this.tabBar=this._tabBar=isc.ClassFactory.newInstance(this.tabBarConstructor,_8);this.addChild(this._tabBar)},isc.A.showTabContextMenu=function isc_TabSet_showTabContextMenu(){},isc.A.createMoreTab=function isc_TabSet_createMoreTab(){if(!this.showMoreTab)return null;this.moreTabPane=this.createAutoChild("moreTabPane",this.moreTabPaneProperties);this.addAutoChild("moreTabPaneNavBar",{title:this.moreTabTitle});this.moreTabPaneTable=this.addAutoChild("moreTabPaneTable");var _1=isc.addProperties({title:this.moreTabTitle,icon:this.moreTabImage,pane:this.moreTabPane,moreTab:true},this.moreTabDefaults,this.moreTabProperties);var _2;var _3=isc.addProperties({},this.tabProperties,this.dynamicTabProperties);for(var j in _3){if(_1[j]===_2)_1[j]=_3[j]}
this.moreTab=_1;return _1},isc.A.rebuildMorePane=function isc_TabSet_rebuildMorePane(){this.moreTabPane.setData(this.getMorePaneRecords())},isc.A.getMorePaneRecords=function isc_TabSet_getMorePaneRecords(){var _1=this,_2=[];for(var i=0;i<this.tabs.length;i++){var _4=this.getTab(this.tabs[i]);if(_4.isVisible())continue;var _5=this.getTabObject(_4);var _6=(_5.icon!=null?isc.Page.getImgURL(_5.icon):null);_2[_2.length]={icon:_6,title:_5.title,pane:_5.pane,button:_4}}
return _2},isc.A.setTabIndex=function isc_TabSet_setTabIndex(_1){this.Super("setTabIndex",arguments)
if(this._tabBar!=null)this._tabBar.setTabIndex(_1)},isc.A.setAccessKey=function isc_TabSet_setAccessKey(_1){this.Super("setAccessKey",arguments);if(this._tabBar!=null)this._tabBar.setAccessKey(_1)},isc.A.createPanes=function isc_TabSet_createPanes(){for(var i=0;i<this.tabs.length;i++){var _2=this.tabs[i],_3=_2.pane;if(_3==null)continue;_2.pane=this.createPane(_3,_2)}},isc.A.createPane=function isc_TabSet_createPane(_1,_2){if(_1==null)return _1;if(!isc.isA.Canvas(_1))_1=this.createCanvas(_1);if(_1==null)return _1;_1.hide();if(this.disablePaneWithTab&&_2&&_2.disabled){_1.setDisabled(_2.disabled)}
this.paneContainer.addMember(_1);_1.$86x=this.ID;return _1},isc.A.makePaneContainer=function isc_TabSet_makePaneContainer(){var _1={ID:this.getID()+"_paneContainer",_generated:false,className:this.paneContainerClassName,layoutMargin:(this.paneMargin||0),overflow:this.paneContainerOverflow,$wn:function(){var _2=this.Super("$wn",arguments);_2.addMethods({$539:{top:"_top",left:"_left",bottom:"_bottom",right:"_right"},getEdgePrefix:function(_7){var _3=this.eventProxy,_4=_3?_3.creator:null;if(_4&&!_4.symmetricEdges){return this.$539[_4.tabBarPosition]}}});return _2}};if(this.showPaneContainerEdges!=null)_1.showEdges=this.showPaneContainerEdges;if(this.getPaneContainerEdges&&this.getPaneContainerEdges()!=null){_1.customEdges=this.getPaneContainerEdges()}
if(!this.symmetricEdges){var _5=this[this.$537[this.tabBarPosition]];if(_5&&_5.defaultSize!=null)_1.edgeSize=_5.defaultSize;if(_5&&_5.bottom!=null)_1.edgeBottom=_5.bottom;if(_5&&_5.top!=null)_1.edgeTop=_5.top;if(_5&&_5.left!=null)_1.edgeLeft=_5.left;if(_5&&_5.right!=null)_1.edgeRight=_5.right;var _6=this[this.$538[this.tabBarPosition]];if(_6&&_6.defaultSize!=null)_1.edgeOffset=_6.defaultSize;if(_6&&_6.bottom!=null)_1.edgeOffsetBottom=_6.bottom;if(_6&&_6.top!=null)_1.edgeOffsetTop=_6.top;if(_6&&_6.left!=null)_1.edgeOffsetLeft=_6.left;if(_6&&_6.right!=null)_1.edgeOffsetRight=_6.right}
this.addAutoChild("paneContainer",_1)},isc.A.getPaneContainerEdges=function isc_TabSet_getPaneContainerEdges(){if(this.showPartialEdges){if(this.tabBarPosition=="bottom")return["T","L","R"];else if(this.tabBarPosition=="left")return["T","B","R"];else if(this.tabBarPosition=="right")return["T","B","L"];else return["B","L","R"]}
return null},isc.A.draw=function isc_TabSet_draw(_1,_2,_3,_4){if(this.tabs&&this.tabs.length>0){var _5=this.getSelectedTabNumber();if(!isc.isA.Number(_5)||_5<0)_5=this.selectedTab=0;this._tabBar.selectTab(_5)}
this.invokeSuper(isc.TabSet,"draw",_1,_2,_3,_4);this.fixLayout()},isc.A.setTabTitle=function isc_TabSet_setTabTitle(_1,_2){this.getTabObject(_1).title=_2;this.getTab(_1).setTitle(_2);this.resetTabPickerMenu()},isc.A.setTabIcon=function isc_TabSet_setTabIcon(_1,_2){this.setTabProperties(_1,{icon:_2})},isc.A.enableTab=function isc_TabSet_enableTab(_1){this.setTabDisabled(_1,false)},isc.A.disableTab=function isc_TabSet_disableTab(_1){this.setTabDisabled(_1,true)},isc.A.setTabProperties=function isc_TabSet_setTabProperties(_1,_2){if(!_2)return;if(_2.ID!=null){this.logWarn("setTabProperties(): Unable to modify ID for an existing tab - ignoring this property");delete _2.ID}
if(_2.pane!=null){this.updateTab(_1,_2.pane);delete _2.pane}
if(_2.disabled!=null){this.setTabDisabled(_1,_2.disabled);delete _2.disabled}
var _3=this.getTabObject(_1),_1=this.getTab(_1);if(!_3)return;isc.addProperties(_3,_2);if(_1){_1.setProperties(_2)}
this.resetTabPickerMenu()},isc.A.setTabDisabled=function isc_TabSet_setTabDisabled(_1,_2){var _3=this.getTabObject(_1);if(_3)_3.disabled=_2;var _1=this.getTab(_1);if(_1){_1.setDisabled(_2);var _4=_1.pane;if(_4&&this.disablePaneWithTab){if(isc.isA.Canvas(_4))_4.setDisabled(_2);else _4.disabled=_2}}
this.resetTabPickerMenu()},isc.A.addTab=function isc_TabSet_addTab(_1,_2){return this.addTabs(_1,_2)},isc.A.addTabs=function isc_TabSet_addTabs(_1,_2){if(!isc.isAn.Array(_1))_1=[_1];var _3=this.getTabObject(this.getSelectedTabNumber()),_4=(this.getSelectedTabNumber()==-1);if(_2==null||_2>this.tabs.length)_2=this.tabs.length;for(var i=0;i<_1.length;i++){_1[i].pane=this.createPane(_1[i].pane,_1[i]);var _6;var _7=isc.addProperties({},this.tabProperties,this.dynamicTabProperties);for(var _8 in _7){if(_1[i][_8]===_6){_1[i][_8]=_7[_8]}}
this.tabs.addAt(_1[i],(_2+i))}
this._tabBar.addTabs(_1,_2);this.resetTabPickerMenu();this.delayCall("fixLayout");if(_4){this.selectTab(0)}else{this.selectedTab=this.getTabNumber(_3)}
this.addTabsEditModeExtras(_1);return _2},isc.A.setTabPane=function isc_TabSet_setTabPane(_1,_2){return this.updateTab(_1,_2)},isc.A.removeTab=function isc_TabSet_removeTab(_1,_2){return this.removeTabs(_1,_2)},isc.A.removeTabs=function isc_TabSet_removeTabs(_1,_2){if(!isc.isAn.Array(_1))_1=[_1];_1=this.map("getTab",_1);var _3=false,_4=this.getSelectedTab(),_5=0;for(var i=0;i<_1.length;i++){var _7=_1[i],_8=this.getTabNumber(_7);if(_8==-1)continue;var _9=this.tabs[_8];if(_9==_4){_3=true;if(_8>0)_5=_8-1;else if(_8<this.tabs.length+1)_5=_8}else{if(_8<this.selectedTab){this.selectedTab-=1}}
this.tabs.removeAt(_8);if(_9){var _10=_9.pane;if(_10&&_10.parentElement==this.paneContainer){this.paneContainer.removeChild(_10);if(!_2&&this.destroyPanes!==false){_10.destroy()}}}
this._tabBar.removeTabs(_7)}
if(_3&&this.tabs.length>0){if(_5>=this.tabs.length)_5=this.tabs.length-1;this.selectTab(_5)}
this.resetTabPickerMenu();this.delayCall("fixLayout",0);this.removeTabsEditModeExtras()},isc.A.reorderTab=function isc_TabSet_reorderTab(_1,_2){if(_2==null||_2>this.tabs.length)_2=this.tabs.length;var _1=this.getTab(_1);if(_1){var _3=this.getTabNumber(_1);if(_3==_2)return;var _4=this.getTabObject(_1),_5=this.getSelectedTab();this._tabBar.reorderTab(_1,_2);this.tabs.removeAt(_3);this.tabs.addAt(_4,_2);if(this.selectedTab==_3){this.selectedTab=_2}else if(_3<this.selectedTab&&this.selectedTab<=_2){this.selectedTab--}else if(_3>this.selectedTab&&this.selectedTab>=_2){this.selectedTab++}
this.resetTabPickerMenu();this.delayCall("fixLayout");this.reorderTabsEditModeExtras(_3,_2);this.tabsReordered()}},isc.A.canCloseTab=function isc_TabSet_canCloseTab(_1){_1=this.getTabObject(_1);if(_1&&_1.canClose!=null)return _1.canClose;return!!this.canCloseTabs},isc.A.setCanCloseTab=function isc_TabSet_setCanCloseTab(_1,_2){_1=this.getTabObject(_1);var _3=this.getTab(_1);_1.canClose=_2;if(_3){_3.setProperties(this.getTabBar().getCloseIconProperties(_1,this.canCloseTab(_1)))}},isc.A.setCanCloseTabs=function isc_TabSet_setCanCloseTabs(_1){_1=!!_1;this.canCloseTabs=_1;var _2=this.tabs;if(!_2)return;var _3=this.getTabBar();for(var i=0,_5=_2.length;i<_5;++i){var _6=_2[i];if(_6.canClose!=null)continue;var _7=this.getTab(_6);if(_7){_7.setProperties(_3.getCloseIconProperties(_6,_1))}}},isc.A.setCanReorderTabs=function isc_TabSet_setCanReorderTabs(_1){this.canReorderTabs=_1;this.tabBar.canReorderItems=_1;this.tabBar.reorderOnDrop=!_1},isc.A.$52a=function isc_TabSet__tabIconClick(_1){var _2=this.canCloseTab(_1);if(_2){this.closeClick(_1);return false}else return this.tabIconClick(_1)},isc.A.closeClick=function isc_TabSet_closeClick(_1){if(this.onCloseClick&&(this.onCloseClick(_1)==false)){return}
this.removeTab(_1)},isc.A.tabIconClick=function isc_TabSet_tabIconClick(_1){var _2=_1.icon;if(_2&&_2.click)return this.fireCallback(_2.click,'tab,tabSet',[_1,this])},isc.A.getTabObject=function isc_TabSet_getTabObject(_1){_1=this.getTabNumber(_1);if(_1>=this.tabs.length){var _2=this.tabBar.getButton(_1);if(_2&&_2.moreTab)return this.moreTab}
return this.tabs[_1]},isc.A.getTab=function isc_TabSet_getTab(_1){if(isc.isAn.Canvas(_1))return _1;if(!this.tabs)return null;if(this.tabs.contains(_1))_1=this.tabs.indexOf(_1);_1=this.getTabBar().getButton(_1);return _1},isc.A.getTabPane=function isc_TabSet_getTabPane(_1){return this.getTabObject(_1).pane},isc.A.findTabObject=function isc_TabSet_findTabObject(_1,_2){return this.tabs.find(_1,_2)},isc.A.getTabNumber=function isc_TabSet_getTabNumber(_1){if(isc.isA.Number(_1))return _1;if(!this.tabs)return null;var _2=this.tabs.indexOf(_1);if(_2!=-1)return _2;if(isc.isA.String(_1)){var _2=this.tabs.findIndex("name",_1);if(_2==-1)_2=this.tabs.findIndex("ID",_1);return _2}
return this.getTabBar().getButtonNumber(this.getTab(_1))},isc.A.updateTab=function isc_TabSet_updateTab(_1,_2){if(isc.isAn.Object(_1)&&!isc.isA.Canvas(_1)&&this.tabs.indexOf(_1)==-1)
{if(_2!=null)_1.pane=_2;return this.addTabs(_1)}
var _3=this.getTabNumber(_1);if(_3==-1){this.logWarn("no such tab: "+this.echo(_1));return}
var _4=this.getTabObject(_3),_5=_4?_4.pane:null;if(_4&&_4.pane==_2)return;if(_5!=null){_5.hide();_5.deparent()}
var _6=this.getTab(_1);if(_2==null){if(_6!=null)_6.pane=null;return _4.pane=null}
_2=_4.pane=this.createPane(_2,_4);if(_6!=null)_6.pane=_2;if(this.getSelectedTabNumber()==_3){if(!this.paneContainer.hasMember(_2))this.paneContainer.addMember(_2);_2.setVisibility(isc.Canvas.INHERIT)}},isc.A.fixLayout=function isc_TabSet_fixLayout(){var _1=this._tabBar,_2=this.$l0||this.paneContainer;if(_1==null||_2==null)return;if(_2.getZIndex(true)>=_1.getZIndex(true))_2.moveBelow(_1);var _3=this.$du(this.tabBarOverlap,_1.borderThickness,_1.baseLineThickness);var _4;switch(this.tabBarPosition){case isc.Canvas.TOP:_4=false;_2.setRect(0,_1.getHeight()-_3,this.getWidth(),this.getHeight()-_1.getHeight()+_3);break;case isc.Canvas.BOTTOM:_4=false;_1.setTop(this.getHeight()-_1.getHeight());_2.setRect(0,0,this.getWidth(),this.getHeight()-_1.getHeight()+_3);break;case isc.Canvas.LEFT:_4=true;_2.setRect(_1.getWidth()-_3,0,this.getWidth()-_1.getWidth()+_3,this.getHeight());break;case isc.Canvas.RIGHT:_4=true;_1.setLeft(this.getWidth()-_1.getWidth());_2.setRect(0,0,this.getWidth()-_1.getWidth()+_3,this.getHeight());break}
var _5=this.showControls();if(_5){if(_4)_1.setHeight(this.getViewportHeight()-this.tabBarControlLayout.getHeight());else{_1.setWidth(this.getViewportWidth()-this.tabBarControlLayout.getWidth());if(this.isRTL())_1.setLeft(this.tabBarControlLayout.getWidth())}
this.tabBarControlLayout.bringToFront()}else{_1.resizeTo(_4?null:"100%",_4?"100%":null);if(this.isRTL()&&!_4){_1.setLeft(0)}}
var _6=this.$8f();if(_4){if(_1.getScrollTop()>0&&_6<=_1.getViewportHeight())_1.scrollTo(null,0,"descrollTabs")}else{if(_1.getScrollLeft()>0&&_6<=_1.getViewportWidth())_1.scrollTo(0,null,"descrollTabs")}},isc.A.shouldShowControl=function isc_TabSet_shouldShowControl(_1){if((_1=="tabScroller")||(_1=="tabPicker")){if(this.showMoreTab)return false;if(!this.showTabScroller&&_1=="tabScroller")return false;if(!this.showTabPicker&&_1=="tabPicker")return false;var _2=this.$8f();if(_2==0)return false;var _3=0;for(var i=0;i<this.tabBarControls.length;i++){var _5=this.tabBarControls[i];if(_5=="tabScroller"||_5=="tabPicker")continue;if(this.shouldShowControl(_5)){if(!isc.isA.Canvas(_5))_5=this.getControl(_5);_3+=_6?_5.getVisibleHeight():_5.getVisibleWidth()}}
var _6=(this._tabBar.orientation==isc.Layout.VERTICAL),_7=(_2>(_6?(this.getViewportHeight()-_3):(this.getViewportWidth()-_3)));return _7}
var _1=this.getControl(_1);if(isc.isA.Canvas(_1)&&!this.tabBarControlLayout.$21(_1))
{return true}
return false},isc.A.$8f=function isc_TabSet__getTabSizes(){if(!this._tabBar)return 0;var _1=this._tabBar.getMemberSizes(),_2=this._tabBar.vertical;if(_1==null||_1.length==0)return 0;_1=_1.sum();var _3=(_2?(this._tabBar.$td||0)+(this._tabBar.$te||0):(this._tabBar.$tb||0)+(this._tabBar.$tc||0));return _1+_3},isc.A.getScrollerBackImgName=function isc_TabSet_getScrollerBackImgName(){return this.symmetricScroller?"back":this.tabBarPosition+"_back"},isc.A.getScrollerForwardImgName=function isc_TabSet_getScrollerForwardImgName(){return this.symmetricScroller?"forward":this.tabBarPosition+"_forward"},isc.A.getTabPickerSrc=function isc_TabSet_getTabPickerSrc(){var _1=(this._tabBar.orientation==isc.Layout.VERTICAL);if(this.symmetricPickerButton){return _1?this.pickerButtonVSrc:this.pickerButtonHSrc}else{return this.pickerButtonSrc}},isc.A.getControl=function isc_TabSet_getControl(_1){if(isc.isA.Canvas(_1))return _1;var _2=(this._tabBar.orientation==isc.Layout.VERTICAL);if(_1=="tabScroller"){if(!this.scroller){var _3=this.scrollerButtonSize;var _4;if(this.symmetricScroller){_4=_2?this.scrollerVSrc:this.scrollerHSrc}else{_4=this.scrollerSrc}
var _5=this.getScrollerBackImgName(),_6=this.getScrollerForwardImgName();this.scroller=this.createAutoChild("scroller",{vertical:_2,width:_2?(this.tabBarThickness-this._tabBar.baseLineThickness):(2*_3),height:_2?(2*_3):(this.tabBarThickness-this._tabBar.baseLineThickness),items:[isc.addProperties({name:_5,width:_2?null:_3,height:_2?_3:null},this.scrollerBackImg),isc.addProperties({name:_6,width:_2?null:_3,height:_2?_3:null},this.scrollerForwardImg)],scrollerPosition:this.tabBarPosition,skinImgDir:this.skinImgDir,src:_4,backPartName:_5,forwardPartName:_6},this.scrollerProperties)}
return this.scroller}else if(_1=="tabPicker"){var _7=this.pickerButtonSize;if(!this.tabPicker){var _8=this.getTabPickerSrc();this.tabPicker=this.createAutoChild("tabPicker",{customState:this.symmetricPickerButton?null:this.tabBarPosition,pickerPosition:this.tabBarPosition,skinImgDir:this.skinImgDir,src:_8,height:(_2?_7:(this.tabBarThickness-this._tabBar.baseLineThickness)),width:(_2?(this.tabBarThickness-this._tabBar.baseLineThickness):_7)})}
return this.tabPicker}
if(isc.isA.String(_1)&&isc.isA.Canvas(window[_1]))return window[_1];this.logWarn("Unable to resolve specified tabBarControl:"+isc.Log.echo(_1)+" to a valid control. Not displaying.");return null},isc.A.showControls=function isc_TabSet_showControls(){var _1=this.tabBarControls,_2=0,_3=this.tabBarPosition,_4=_3==isc.Canvas.RIGHT||_3==isc.Canvas.LEFT,_5=0;var _6=this.tabBarControlLayout;if(!_6){this.tabBarControlLayout=_6=this.createAutoChild("tabBarControlLayout",{styleName:this.tabBarControlLayoutDefaults.styleName||this.tabBar.styleName,$21:function(_8){if(this.Super("$21",arguments))return true;if(_8.showIf)return!_8.fireCallback(_8.showIf,[_8]);return false},childResized:function(){this.Super("childResized",arguments);this.creator.$510()},childVisibilityChanged:function(_13){this.Super("childVisibilityChanged",arguments);this.creator.$510()},vertical:_4,locatorParent:this})}
for(var i=0;i<_1.length;i++){var _8=_1[i],_9=this.shouldShowControl(_8);_8=this.getControl(_8);if(!_8)continue;if(!_9&&(_8==this.scroller||_8==this.tabPicker)){continue}
if(_6.getMemberNumber(_8)!=_5){_6.addMember(_8,_5)}
_5++;if(_9){_2+=_4?_8.getVisibleHeight():_8.getVisibleWidth()}}
var _10=[];for(var i=_5;i<_6.members.length;i++){_10.add(i)}
_6.removeMembers(_10);if(_2==0){this.hideControls();return false}
this.placeControlLayout(_2);if(!this.$8g){var _11=this._tabBar;this.$8g=this._tabBar.createAutoChild("baseLine",{vertical:(_3==isc.Canvas.LEFT||_3==isc.Canvas.RIGHT),_generated:true,skinImgDir:_11.skinImgDir,src:_11.baseLineSrc,capSize:_11.baseLineCapSize,imageType:isc.Img.STRETCH,overflow:"hidden",autoDraw:false});this.addChild(this.$8g)}
var _11=this._tabBar,_12=(this.tabBarThickness-_11.baseLineThickness);if(_3==isc.Canvas.LEFT){this.$8g.setRect(_12,0,_11.baseLineThickness,this.getHeight())}else if(_3==isc.Canvas.RIGHT){this.$8g.setRect(this.getWidth()-this.tabBarThickness,0,_11.baseLineThickness,this.getHeight())}else if(_3==isc.Canvas.TOP){this.$8g.setRect(0,_12,this.getWidth(),_11.baseLineThickness)}else if(_3==isc.Canvas.BOTTOM){this.$8g.setRect(0,this.getHeight()-this.tabBarThickness,this.getWidth(),_11.baseLineThickness)}
if(!_6.isDrawn()){if(this.getDrawnState()!=isc.Canvas.UNDRAWN&&_6.getDrawnState()==isc.Canvas.UNDRAWN)_6.draw()}else if(!_6.isVisible())_6.show();this.$8g.moveBelow(_11);if(!this.$8g.isVisible())this.$8g.show();return true},isc.A.placeControlLayout=function isc_TabSet_placeControlLayout(_1){var _2,_3,_4,_5,_6=this._tabBar,_7=_6.getBreadth()-_6.baseLineThickness,_8=this.tabBarPosition;if(_8==isc.Canvas.LEFT){_2=0;_3=this.getHeight()-_1;_4=_7;_5=_1}else if(_8==isc.Canvas.RIGHT){_2=this.getWidth()-_7;_3=this.getHeight()-_1;_4=_7;_5=_1}else if(_8==isc.Canvas.BOTTOM){_4=_1;_2=this.isRTL()?0:(this.getWidth()-_1);_3=this.getHeight()-_7;_5=_7}else{_4=_1;_2=this.isRTL()?0:this.getWidth()-_1;_3=0;_5=_7}
this.tabBarControlLayout.setRect(_2,_3,_4,_5);if(!this.children.contains(this.tabBarControlLayout))this.addChild(this.tabBarControlLayout)},isc.A.$510=function isc_TabSet__controlLayoutChildResized(){var _1=this.tabBarControlLayout;if(!_1)return;this.showControls();var _2=this.tabBar;if(_2){var _3=(this.tabBarPosition==isc.Canvas.LEFT||this.tabBarPosition==isc.Canvas.RIGHT);if(_3){_2.setHeight(this.getViewportHeight()-this.tabBarControlLayout.getVisibleHeight())}else{_2.setWidth(this.getViewportWidth()-this.tabBarControlLayout.getVisibleWidth())}}},isc.A.hideControls=function isc_TabSet_hideControls(){if(this.tabBarControlLayout&&this.tabBarControlLayout.isVisible())this.tabBarControlLayout.hide();if(this.$8g&&this.$8g.isVisible())this.$8g.hide()},isc.A.scrollForward=function isc_TabSet_scrollForward(){this._tabBar.scrollForward(this.animateTabScrolling)},isc.A.scrollBack=function isc_TabSet_scrollBack(){this._tabBar.scrollBack(this.animateTabScrolling)},isc.A.showTabPickerMenu=function isc_TabSet_showTabPickerMenu(){if(!this.$8d){var _1=this.tabs,_2=[];for(var i=0;i<_1.length;i++){_2[i]={index:i,enabled:!this.tabs[i].disabled,checkIf:"menu.tabSet.getSelectedTabNumber() == "+i,title:_1[i].pickerTitle||_1[i].title,icon:(this.canCloseTab(_1[i])?null:_1[i].icon),click:"menu.tabSet.selectTab(item.index)"}}
this.$8d=this.getMenuConstructor().create({tabSet:this,data:_2})}
this.$8d.$8h();this.$8d.placeNear(this.tabPicker.getPageLeft(),this.tabPicker.getPageBottom())
this.$8d.show()},isc.A.resetTabPickerMenu=function isc_TabSet_resetTabPickerMenu(){if(this.$8d){this.$8d.destroy();delete this.$8d}},isc.A.layoutChildren=function isc_TabSet_layoutChildren(_1,_2,_3,_4){this.invokeSuper(isc.TabSet,"layoutChildren",_1,_2,_3,_4);this.fixLayout()},isc.A.$54m=function isc_TabSet__tabResized(){this.fixLayout()},isc.A.$8i=function isc_TabSet__showTab(_1){if(isc.isA.Canvas(_1))_1=this.getTabObject(_1);if(_1==this.moreTab){this.rebuildMorePane()}
this.paneContainer.scrollTo(0,0,"showTab");if(_1&&_1.pane){if(!this.paneContainer.hasMember(_1.pane))this.paneContainer.addMember(_1.pane);var _2=((_1.paneMargin!=null?_1.paneMargin:this.paneMargin)||0);this.paneContainer.setLayoutMargin(_2);_1.pane.show()}
this.paneContainer.adjustOverflow()},isc.A.$8c=function isc_TabSet__tabSelected(_1){var _2;var _3=this.getSelectedTab(),_4=this.getSelectedTabNumber(),_5=this._tabBar.getButtonNumber(_1),_6=this.getTabObject(_5),_7=(_3!=null)&&(_6!=_3);var _8=this.showMoreTab&&this.tabBar.isShowingMoreTab()&&_6==this.moreTab;if(!_8){if(_6==this.$80n)return;this.$80n=_6}
if(_7&&!this.$767){if(_3.tabDeselected!=null){if(this.fireCallback(_3.tabDeselected,"tabSet,tabNum, tabPane, ID, tab, newTab, name",[this,this.selectedTab,_3.pane,_3.ID,_3,_6,_3.name])==false)
{_2=true}}
if(!_2&&this.tabDeselected!=null){_2=(this.tabDeselected(this.selectedTab,_3.pane,_3.ID,_3,_6,_3.name)==false)}
if(!_2&&_3.pane){_3.pane.hide()}}
if(_2){this.$767=true;var _9=_6;var _1=this.getSelectedTab();this.selectTab(_1);var _10=this.getTab(this.getTabNumber(_1));if(isc.EH.mouseDownTarget()==this.getTab(_9)){if(isc.EH.clickMaskUp()&&isc.EH.targetIsMasked(_10)){var _11=isc.EH.clickMaskRegistry.last();isc.EH.setMaskedFocusCanvas(_10,_11)}else{_10.focus()}}
delete this.$767;return}
var _12=_6.pane;if(_12&&(_12.destroyed||_12.destroying||_12.isPendingDestroy())){_6.pane=null}
this.selectedTab=_5;if(!this.$767){var _13;if(_6.tabSelected!=null){this.fireCallback(_6.tabSelected,"tabSet,tabNum,tabPane,ID,tab",[this,_5,_6.pane,_6.ID,_6]);if(this.getSelectedTabNumber()!=_5){return}}
if(this.tabSelected){this.tabSelected(_5,_6.pane,_6.ID,_6,_6.name);if(this.getSelectedTabNumber()!=_5){return}}}
this.$8i(_1);var _14=this._tabBar;var _15=this;_14.scrollTabIntoView(_5,null,this.animateTabScrolling,function(){if(isc.isA.Function(_15.tabScrolledIntoView))_15.tabScrolledIntoView()})},isc.A.getSelectedTab=function isc_TabSet_getSelectedTab(){if(this.selectedTab>=this.tabs.length)return this.moreTab;return this.tabs[this.selectedTab]},isc.A.getSelectedTabNumber=function isc_TabSet_getSelectedTabNumber(){if(!isc.isA.Number(this.selectedTab))this.selectedTab=this.getTabNumber(this.selectedTab);if(!this.tabs||!this.tabs[this.selectedTab])return-1;return this.selectedTab},isc.A.selectTab=function isc_TabSet_selectTab(_1){var _2=this.getTabNumber(_1);if(_2!=-1){if(this._tabBar){this._tabBar.selectTab(_2)}
if(this._tabBar==null||!this._tabBar.$6c){this.selectedTab=_2}}},isc.A.tabForPane=function isc_TabSet_tabForPane(_1){if(this.tabs){for(var i=0;i<this.tabs.length;i++){if(this.tabs[i].pane==_1){return this.tabs[i]}}}},isc.A.getTabBar=function isc_TabSet_getTabBar(){return this._tabBar},isc.A.$798=function isc_TabSet__editTabTitle(_1){_1=this.getTab(_1);var _2;if(this.canEditTabTitles){if(_1.canEditTitle!==false){_2=true}}else{if(_1.canEditTitle===true){_2=true}}
if(_2)this.editTabTitle(_1);return _2},isc.A.editTabTitle=function isc_TabSet_editTabTitle(_1){_1=this.getTab(_1);if(_1==null||!this.tabBar)return;if(!isc.isA.DynamicForm(this.titleEditorForm)){var _2=isc.addProperties({},this.titleEditorDefaults,this.titleEditorProperties,{handleKeyPress:function(_8,_9){var _3=this.Super("handleKeyPress",arguments);var _4=_8.keyName;if(_4=="Escape"){this.form.targetTabSet.cancelTabTitleEditing()}else if(_4=="Enter"){this.form.targetTabSet.saveTabTitle()}
return _3}});_2.name="title";this.titleEditorForm=isc.DynamicForm.create({autoDraw:false,margin:0,padding:0,cellPadding:0,fields:[_2]});this.titleEditor=this.titleEditorForm.getItem("title")}
var _5=this.titleEditorForm;_5.setProperties({targetTabSet:this,targetTab:_1});var _6=_5.getItem("title");var _7=_1.title;_6.setValue(_7);this.tabBar.scrollTabIntoView(_1,null,this.animateTabScrolling,{target:this,methodName:"showTitleEditor"})},isc.A.cancelTabTitleEditing=function isc_TabSet_cancelTabTitleEditing(){if(this.titleEditorForm!=null){this.clearTitleEditorForm()}},isc.A.saveTabTitle=function isc_TabSet_saveTabTitle(){if(this.titleEditorForm!=null&&this.titleEditorForm.isVisible()&&this.titleEditorForm.isDrawn())
{var _1=false,_2=this.titleEditorForm,_3=_2.targetTab,_4=_2.getValue("title");if(_4!=_3.title&&(this.titleChanged!=null)){if(this.fireCallback(this.titleChanged,"newTitle, oldTitle, tab",[_4,_3.title,_3])==false)
{_1=true}}
if(!_1)this.setTabTitle(_2.targetTab,_4)}
this.clearTitleEditorForm()},isc.A.clearTitleEditorForm=function isc_TabSet_clearTitleEditorForm(){if(this.titleEditorForm==null)return;this.titleEditorForm.clear();if(this.titleEditorForm.$803!=null){isc.Page.clearEvent(this.$803);delete this.$803}
this.titleEditorForm.targetTab=null},isc.A.showTitleEditor=function isc_TabSet_showTitleEditor(){var _1=this.titleEditorForm,_2=_1?_1.targetTab:null;if(_2==null||!this.getTabObject(_2)){return}
var _3=this.tabBar.getLeft()+this.tabBar.getLeftMargin()-this.tabBar.getScrollLeft()+this.tabBar.getLeftBorderSize()+_2.getLeft()+_2.capSize,_4=_2.getVisibleWidth()-_2.capSize*2;if(this.titleEditorLeftOffset){_3+=this.titleEditorLeftOffset;_4-=this.titleEditorLeftOffset}
if(this.titleEditorRightOffset){_4-=this.titleEditorRightOffset}
var _5=_1.getItem("title");_5.setWidth(_4);var _6=this.getTop()+this.tabBar.getTop()+this.tabBar.getTopMargin()-this.tabBar.getScrollTop()+this.tabBar.getTopBorderSize()+_2.getTop();if(this.titleEditorTopOffset){_6+=this.titleEditorTopOffset}
_1.setTop(_6);_1.setLeft(_3);var _5=_1.getItem("title");if(_1.masterElement!=this){_1.$ns=true;_1.$jo=false;_1.$jq=false;this.addPeer(_1)}else{_1.draw()}
_5.focusInItem();_5.delayCall("selectValue",[],100);if(this.$803==null){var _7=this;var _8=function(){if(!_7.destroyed){_7.$804()}}
this.$803=isc.Page.setEvent("mouseDown",_8)}});isc.evalBoundary;isc.B.push(isc.A.$804=function isc_TabSet__clickOutsideDuringTitleEdit(){if(isc.EH.getTarget()==this.titleEditorForm)return;this.saveTabTitle()},isc.A.clear=function isc_TabSet_clear(_1,_2,_3,_4){if(this.titleEditorForm!=null&&this.titleEditorForm.isDrawn()){this.cancelTitleEditing()}
this.invokeSuper("TabSet","clear",_1,_2,_3,_4)},isc.A.setVisibility=function isc_TabSet_setVisibility(_1,_2,_3,_4,_5){this.invokeSuper("TabSet","setVisibility",_1,_2,_3,_4,_5);if(!this.isVisible()&&this.titleEditorForm!=null&&this.titleEditorForm.isDrawn()){this.cancelTitleEditing()}},isc.A.parentVisibilityChanged=function isc_TabSet_parentVisibilityChanged(_1,_2,_3,_4,_5){this.invokeSuper("TabSet","parentVisibilityChanged",_1,_2,_3,_4,_5);if(!this.isVisible()&&this.titleEditorForm!=null&&this.titleEditorForm.isDrawn()){this.cancelTitleEditing()}},isc.A.tabsReordered=function isc_TabSet_tabsReordered(){});isc.B._maxIndex=isc.C+73;isc.TabSet.registerStringMethods({tabSelected:"tabNum,tabPane,ID,tab,name",tabDeselected:"tabNum,tabPane,ID,tab,newTab,name",getPaneContainerEdges:"",onCloseClick:"tab",titleChanged:"newTitle,oldTitle,tab",showTabContextMenu:"tabSet,tab",tabsReordered:""});isc.defineClass("PaneContainer","VLayout");isc.A=isc.PaneContainer.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.handleKeyPress=function isc_PaneContainer_handleKeyPress(_1,_2){if(_1.keyName=="Tab"&&_1.ctrlKey){var _3=this.parentElement,_4=_3.tabs.length-1,_5=_3.getSelectedTabNumber();if(_1.shiftKey){if(_5>0)_5-=1;else _5=_4}else{if(_5<_4)_5+=1;else _5=0}
_3.selectTab(_5);_3.getTabBar().getButton(_5).focus();return false}
return this.Super("handleKeyPress",arguments)});isc.B._maxIndex=isc.C+1;isc.TabSet.registerDupProperties("tabs",["pane"]);isc._nonDebugModules=(isc._nonDebugModules!=null?isc._nonDebugModules:[]);isc._nonDebugModules.push('Containers');isc.checkForDebugAndNonDebugModules();isc._moduleEnd=isc._Containers_end=(isc.timestamp?isc.timestamp():new Date().getTime());if(isc.Log&&isc.Log.logIsInfoEnabled('loadTime'))isc.Log.logInfo('Containers module init time: '+(isc._moduleEnd-isc._moduleStart)+'ms','loadTime');delete isc.definingFramework;}else{if(window.isc&&isc.Log&&isc.Log.logWarn)isc.Log.logWarn("Duplicate load of module 'Containers'.");}

// ISC_Grids.js

if(window.isc&&window.isc.module_Core&&!window.isc.module_Grids){isc.module_Grids=1;isc._moduleStart=isc._Grids_start=(isc.timestamp?isc.timestamp():new Date().getTime());if(isc._moduleEnd&&(!isc.Log||(isc.Log&&isc.Log.logIsDebugEnabled('loadTime')))){isc._pTM={message:'Grids load/parse time: '+(isc._moduleStart-isc._moduleEnd)+'ms',category:'loadTime'};if(isc.Log&&isc.Log.logDebug)isc.Log.logDebug(isc._pTM.message,'loadTime');else if(isc._preLog)isc._preLog[isc._preLog.length]=isc._pTM;else isc._preLog=[isc._pTM]}isc.definingFramework=true;if(window.isc&&isc.version!="v9.1p_2014-06-27/LGPL Deployment"){isc.logWarn("SmartClient module version mismatch detected: This application is loading the core module from SmartClient version '"+isc.version+"' and additional modules from 'v9.1p_2014-06-27/LGPL Deployment'. Mixing resources from different SmartClient packages is not supported and may lead to unpredictable behavior. If you are deploying resources from a single package you may need to clear your browser cache, or restart your browser."+(isc.Browser.isSGWT?" SmartGWT developers may also need to clear the gwt-unitCache and run a GWT Compile.":""))}
isc.ClassFactory.defineInterface("List");isc.List.addInterfaceMethods({init:function(){if(!this.data)this.data=[]},first:function(){return this.get(0)},last:function(){return this.get(this.getLength()-1)},indexOf:function(_1,_2,_3){if(_2==null)_2=0;if(_3==null)_3=this.getLength()-1;for(var i=_2;i<=_3;i++){if(this.get(i)==_1)return i}
return-1},lastIndexOf:function(_1,_2,_3){if(_2==null)_2=this.getLength()-1;if(_3==null)_3=0;for(var i=_2;i>=_3;i--)
if(this.get(i)==_1)return i;return-1},findNextIndex:function(_1,_2,_3,_4){var _5=this.getLength();if(_1==null)_1=0;else if(_1>=_5)return-1;if(_4==null)_4=_5-1;if(_2==null)return-1;if(isc.isA.String(_2)){for(var i=_1;i<=_4;i++){var _7=this.get(i);if(_7&&_7[_2]==_3)return i}
return-1}else{return this.findNextMatch(_2,_1,_4)}},findAll:function(_1,_2){if(_1==null)return null;if(isc.isA.String(_1)){var _3=null,l=this.getLength();for(var i=0;i<l;i++){var _6=this.get(i);if(_6&&_6[_1]==_2){if(_3==null)_3=[];_3.add(_6)}}
return _3}else{return this.findAllMatches(_1)}},getRange:function(_1,_2){if(_2==null)_2=this.getLength()-1;var _3=[];for(var i=_1;i<_2;i++){_3[_3.length]=this.get(i)}
return _3},getCachedRow:function(_1){return this.get(_1)},duplicate:function(){return this.getClass().create().addList(this)},add:function(_1,_2){var _3;if(_2!==_3){return this.addAt(_1,_2)}
this.addAt(_1,this.getLength());return _1},setLength:function(_1){this.$ed();if(_1>this.getLength()){var _2;while(_1>this.getLength())this.add(_2)}else{while(_1<this.getLength())this.removeAt(this.getLength()-1)}
this.$ee()},addListAt:function(_1,_2){this.$ed();var _3=_1.getLength();for(var i=0;i<_3;i++){this.addAt(_1.get(i),_2+i)}
this.$ee();return _1},remove:function(_1){var _2=this.indexOf(_1);if(_2==-1)return false;this.$ed();var _3=this.getLength();for(var i=_2;i<_3;i++)this.set(i,this.get(i+1));this.setLength(_3-1);this.$ee();return true},removeList:function(_1){if(_1==null)return null;this.$ed();var _2=false;for(var i=0;i<this.getLength();i++){var _4=this.get(i);if(_1.contains(_4)){_2=true;this.removeAt(i);i--}}
this.$ee();return _1},sort:function(_1){var _2=this.getRange(0,this.getLength());_2.sort(_1);for(var i=0;i<_2.length;i++)this.set(i,_2[i]);return this},getProperty:function(_1){var _2=[];for(var i=0;i<this.getLength();i++){var _4=this.get(i);_2[i]=_4!=null?_4[_1]:null}
return _2},sortByProperty:function(_1,_2,_3,_4){var _5=this.getRange(0,this.getLength());_5.sortByProperty(_1,_2,_3,_4);for(var i=0;i<_5.length;i++)this.set(i,_5[i]);return this},dataChanged:function(){if(this.onDataChanged)this.onDataChanged()}});isc.$27b=function(){var _1=["containsSubstring","containsAllSubstring","intersectDates","intersectSubstring","isEmpty","contains","containsAll","intersect","equals","getItems","addList","getValueMap","removeEvery","$ed","$ee","$52z","getItem","setItem","removeItem","clearAll","find","findIndex","findAllIndices","findNextMatch","findAllMatches","findByKeys","size","subList","addAll","removeAll","clear"];var _2={};for(var i=0;i<_1.length;i++){var _4=_1[i];_2[_4]=Array.prototype[_4]}
isc.List.addInterfaceMethods(_2)}
isc.$27b();isc.A=isc.isA;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$27c="List";isc.B.push(isc.A.List=function isc_isA_List(_1){if(_1==null)return false;if(isc.isA.Array(_1))return true;return _1.isA&&_1.isA(this.$27c)});isc.B._maxIndex=isc.C+1;isc.ClassFactory.defineClass("Tree",null,"List");isc.A=isc.Tree.getPrototype();isc.A.getProperty=isc.List.getInstanceProperty("getProperty");isc.A=isc.Tree;isc.A.FOLDERS_AND_LEAVES=null;isc.A.FOLDERS_ONLY="folders";isc.A.LEAVES_ONLY="leaves";isc.A.UNLOADED="unloaded";isc.A.LOADING="loading";isc.A.FOLDERS_LOADED="foldersLoaded";isc.A.LOADED="loaded";isc.A.LOADED_PARTIAL_CHILDREN="loadedPartialChildren";isc.A.PARENT="parent";isc.A.CHILDREN="children";isc.A.STRICT="strict";isc.A.KEEP_PARENTS="keepParents";isc.A.autoID=0;isc.A=isc.Tree.getPrototype();isc.A.modelType="children";isc.A.isFolderProperty="isFolder";isc.A.reportCollisions=true;isc.A.autoSetupParentLinks=true;isc.A.pathDelim="/";isc.A.treeProperty="$42c";isc.A.nameProperty="name";isc.A.titleProperty="title";isc.A.childrenProperty="children";isc.A.cacheOpenList=true;isc.A.discardParentlessNodes=false;isc.A.indexByLevel=false;isc.A.showOpenIcon=false;isc.A.showDropIcon=false;isc.A.sortDirection="ascending";isc.A.showRoot=false;isc.A.autoOpenRoot=true;isc.A.separateFolders=false;isc.A.sortFoldersBeforeLeaves=true;isc.A.defaultNodeTitle="Untitled";isc.A.defaultLoadState=isc.Tree.UNLOADED;isc.A=isc.Tree.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$864=["autoOpenRoot","childrenProperty","defaultIsFolder","defaultNodeTitle","discardParentlessNodes","idField","isFolderProperty","modelType","nameProperty","parentIdField","pathDelim","reportCollisions","rootValue","showRoot","titleProperty","isMultiDSTree","dataSource","operation"];isc.A.$865="openProperty";isc.A.$64z="treeLinking";isc.A.$27d=0;isc.A.loadBatchSize=50;isc.B.push(isc.A.init=function isc_Tree_init(){this.setupProperties();this.setRoot(this.root||this.makeRoot());if(this.loadOnInit&&this.loadBatchSize>=0)this.loadSubtree(null,null,true)},isc.A.setupProperties=function isc_Tree_setupProperties(){if(this.ID==null||window[this.ID]!=this)isc.ClassFactory.addGlobalID(this);if(!this.parentProperty)this.parentProperty="_parent_"+this.ID;if(!this.isFolderProperty)this.isFolderProperty="_isFolder_"+this.ID;if(this.idField==null)this.idField="id";if(this.parentIdField==null)this.parentIdField="parentId";if(!this.openProperty)this.openProperty="_isOpen_"+this.ID;if(this.indexByLevel)this.$76h=[];this.$111w="_cachedLength_"+this.ID;this.$1200="_recursionCount_"+this.ID},isc.A.$1201=function isc_Tree__copyKnownProperties(_1){for(var i=0;i<this.$864.length;i++){var _3=this.$864[i],_4=this[_3];if(_4!==undefined){_1[_3]=_4}}
var _4=this[this.$865];if(_4!==undefined&&!_4.startsWith("_isOpen_")){_1[this.$865]=_4}},isc.A.duplicate=function isc_Tree_duplicate(_1,_2){var _3=isc.Tree.create();this.$1201(_3);_3.setRoot(this.getCleanNodeData(this.getRoot(),false,false,_2));if(_1){var _4=this.getOpenList(null,isc.Tree.FOLDERS_AND_LEAVES,null,null,null,null,true);_4=this.getCleanNodeData(_4,false,false,_2);_3.$1369(_4)}
return _3},isc.A.destroy=function isc_Tree_destroy(){this.destroyed=true;if(this.$27i!=null)this.$27i.call(window);isc.ClassFactory.dereferenceGlobalID(this);this.Super("destroy",arguments)},isc.A.makeRoot=function isc_Tree_makeRoot(){var _1={};var _2;if(this.idField!==_2)_1[this.idField]=this.rootValue;_1[this.treeProperty]=this.ID;return _1},isc.A.convertToFolder=function isc_Tree_convertToFolder(_1){var _2=(isc.ResultTree!=null&&isc.isA.ResultTree(this)&&this.isPaged()),_3=_2&&this.getLoadState(_1),_4=this.isFolder(_1),_5=!_4&&_1!=this.root,_6,_7;if(_5){_7=this.getParent(_1);_5=(_7!=null);if(_5){_6=this.$111x(_1,_7)}}
_1[this.isFolderProperty]=true;if(_2){var _8=this.getLoadState(_1),_9=(_3===isc.Tree.LOADED||_3===isc.Tree.LOADED_PARTIAL_CHILDREN),_10=(_8===isc.Tree.LOADED||_8===isc.Tree.LOADED_PARTIAL_CHILDREN);if(_9!=_10){var _7=this.getParent(_1);if(isc.isA.Boolean(_1[this.$1215])){this.$1203(_1,null,_7,false)}}}
var _11=_1[this.$111w];if(_11==null)_11=0;_1[this.$111w]=_11+this.$111y(_1,_4,true);if(_5){return this.$111x(_1,_7)-_6}else{return 0}},isc.A.makeNode=function isc_Tree_makeNode(_1,_2){var _3=this.find(_1);if(_3){if(_2){var _4=this.convertToFolder(_3);if(_4!=0&&_3!=this.root){this.$111z(this.getParent(_3),_4)}}
return _3}
var _5=_1.split(this.pathDelim);var _6=this.getRoot()[this.nameProperty];if(_6.endsWith(this.pathDelim)){_6=_6.substring(0,_6.length-this.pathDelim.length)}
if(_5[0]!=_6)_5.addAt(_6,0);var _7=_5[_5.length-1],_8=(_7!=isc.emptyString);if(!_8){_5.length=_5.length-1;_7=_5[_5.length-1]}
var _9=_5.slice(0,(_5.length-1)).join(this.pathDelim)+this.pathDelim;var _10=this.find(_9);if(_10==null){_10=this.find(_9.substring(0,_9.length-this.pathDelim.length))}
if(!_10){_10=this.makeNode(_9,_2)}else if(!this.isFolder(_10)){var _4=this.convertToFolder(_10);if(_4!=0&&_10!=this.root){this.$111z(this.getParent(_10),_4)}}
var _3={};_3[this.nameProperty]=_7;if(!_8){var _4=this.convertToFolder(_3);if(_4!=0&&_3!=this.root){this.$111z(this.getParent(_3),_4)}}
return this.$27e(_3,_10)},isc.A.isRoot=function isc_Tree_isRoot(_1){return this.root==_1},isc.A.setupParentLinks=function isc_Tree_setupParentLinks(_1){if(!_1)_1=this.root;return this.$1114(_1,true,false,false,false)},isc.A.$1114=function isc_Tree__traverse(_1,_2,_3,_4,_5){if(_2&&_1[this.idField]!=null){this.nodeIndex[_1[this.idField]]=_1}
var _6=_1[this.childrenProperty];if(_6){if(_2){this.setLoadState(_1,isc.Tree.LOADED)}
if(!(isc.isAn.Array(_6)||isc.isA.ResultSet(_6))){_6=_1[this.childrenProperty]=[_6]}}
if(_6){var _7=isc.isAn.Array(_6),_8=!_7&&isc.isA.ResultSet(_6);var _9=(_8?_6.$121l():_6.getLength());for(var i=0;i<_9;++i){var _11=(_7?_6[i]:_6.getCachedRow(i));if(!_11)continue;if(_2){if(_11[this.parentIdField]==null&&_1[this.idField]!=null)
_11[this.parentIdField]=_1[this.idField];_11[this.parentProperty]=_1;this.$76i(_11,_1)}
if(this.isFolder(_11)){this.$1114(_11,_2,_3,_4,true)}else if(_2&&_11[this.idField]!=null){this.nodeIndex[_11[this.idField]]=_11}
if(_3){_11[this.$111w]=this.$1112(_11)}}}
if(_4&&_6){_6=_1[this.childrenProperty]=this.$1202(_1,_6,true);if(isc.isA.ResultSet(_6)){if(!(_6.lengthIsKnown()&&_6.allMatchingRowsCached())){this.$1203(_1,false,null,false)}}}
if(_3&&!_5){_1[this.$111w]=this.$1112(_1)}},isc.A.connectByParentID=function isc_Tree_connectByParentID(_1,_2,_3,_4,_5){this.$1369(_1,_2,_3,_4,_5)},isc.A.connectByParentId=function isc_Tree_connectByParentId(_1,_2,_3,_4,_5){this.$1369(_1,_2,_3,_4,_5)},isc.A.linkNodes=function isc_Tree_linkNodes(_1,_2,_3,_4,_5,_6,_7){return this.$1369(_1,_2,_3,_4,_5,_6,_7)},isc.A.$1369=function isc_Tree__linkNodes(_1,_2,_3,_4,_5,_6,_7){if(this.modelType=="fields"){this.connectByFields(_1);return}
_1=_1||this.data;_2=(_2!=null)?_2:this.idField;_3=(_3!=null)?_3:this.parentIdField;_4=(_4!=null)?_4:this.rootValue;var _8=[];_8.addList(_1);var _9={};for(var i=0;i<_8.length;i++){var _11=_8[i][_2];if(_11!=null)_9[_11]=_8[i]}
for(var i=0;i<_8.length;i++){var _12=_8[i];if(this.nodeIndex[_12[_2]]==_12)continue;if(_12==null)continue;var _13=_12[_3],_14=_13!=null?_9[_13]:null,_15=[];while(_14!=null){if(_14)_15.add(_14);_13=_14[_3];_14=_13!=null&&_13!=_12[_3]?_9[_13]:null}
for(var _16=_15.length;_16--;){if(this.logIsDebugEnabled(this.$64z)){this.logDebug("linkNodes running - adding interlinked parents to the tree in  reverse hierarchical order -- currently adding node with id:"+_15[_16][_2],this.$64z)}
this.$640(_15[_16],_2,_3,_6,_4);delete _9[_15[_16][_2]]}
this.$640(_12,_2,_3,_6,_4);delete _9[_12[_2]]}
this.$736(true);if(!_7)this.dataChanged()},isc.A.connectByParentID=function isc_Tree_connectByParentID(_1,_2,_3,_4,_5){this.$1369(_1,_2,_3,_4,_5)},isc.A.connectByParentId=function isc_Tree_connectByParentId(_1,_2,_3,_4,_5){this.$1369(_1,_2,_3,_4,_5)},isc.A.$640=function isc_Tree__linkNode(_1,_2,_3,_4,_5){var _6=this.logIsDebugEnabled(this.$64z);var _7=_1[_2],_8=_1[_3],_9,_10=(_5==null),_11=(_8==null||_8==-1||_8===isc.emptyString),_12=this.nodeIndex[_8];if(_12){if(_6){this.logDebug("found parent "+_12[_2]+" for child "+_1[_2],this.$64z)}
this.$137a(_1,_12)}else if(!_10&&_8==_5){if(_6){this.logDebug("root node: "+_1[_2],this.$64z)}
this.$137a(_1,this.root)}else{if(!_11&&this.discardParentlessNodes){this.logWarn("Couldn't find parent: "+_8+" for node with id:"+_7,this.$64z)}else{var _13=_4||this.root;if(_6){this.logDebug("child:"+_1[_2]+(_11?" has no explicit parent ":(" unable to find specified parent:"+_8))+"- linking to default node "+_13[_2],this.$64z)}
this.$137a(_1,_13)}}},isc.A.connectByFields=function isc_Tree_connectByFields(_1){if(!_1)_1=this.data;for(var i=0;i<_1.length;i++){this.addNodeByFields(_1[i])}},isc.A.addNodeByFields=function isc_Tree_addNodeByFields(_1){var _2=this.root;for(var i=0;i<this.fieldOrder.length;i++){var _4=this.fieldOrder[i],_5=_1[_4];var _6=isc.isA.String(_5)?_5:_5+isc.emptyString,_7=this.findChildNum(_2,_6),_8;if(_7!=-1){_8=this.getChildren(_2).get(_7)}else{_8={};_8[this.nameProperty]=_6;this.$27e(_8,_2);var _9=this.convertToFolder(_8);if(_9!=0){this.$111z(_2,_9)}}
_2=_8}
this.$27e(_1,_2)},isc.A.getRoot=function isc_Tree_getRoot(){return this.root},isc.A.setRoot=function isc_Tree_setRoot(_1,_2){this.root=_1;var _3=(_1&&isc.endsWith(this.parentProperty,this.ID));if(_3)_1[this.parentProperty]=null;var _4=!(_3&&this.root[this.$111w]!=null);this.root[this.treeProperty]=this.ID;if(this.rootValue==null)this.rootValue=this.root[this.idField];var _5=this.root[this.nameProperty];if(_5==null||_5==isc.emptyString){var _6=!_4&&this.isFolder(this.root);this.root[this.nameProperty]=this.pathDelim;if(!_4){this.root[this.$111w]+=this.$111y(this.root,_6,this.isFolder(this.root))}}
if(_4){var _7=this.isFolder(this.root);this.root[this.$111w]=((_7&&this.openDisplayNodeType!=isc.Tree.LEAVES_ONLY)||(!_7&&this.openDisplayNodeType!=isc.Tree.FOLDERS_ONLY)?1:0)}
var _8=(isc.ResultTree!=null&&isc.isA.ResultTree(this)&&this.isPaged());if(_8){if(this.root[this.$1215]==null){this.root[this.$1215]=true;this.$1203(this.root,null,null,true)}}
if(!this.isFolder(this.root)){this.convertToFolder(this.root)}
this.nodeIndex={};if("parent"==this.modelType){if(this.data){this.$132d=true;this.$1369(null,null,null,null,null,null,true);delete this.$132d}}else if("fields"==this.modelType){if(this.data)this.connectByFields()}else if("children"==this.modelType){this.$1114(this.root,this.autoSetupParentLinks,true,false,false);if(this.data){var _9=this.data;this.data=null;this.$27k(_9,this.root)}}else{this.logWarn("Unsupported modelType: "+this.modelType)}
this.setupParentLinks();if(_2!==false&&(this.autoOpenRoot||_2)){this.openFolder(_1)}
this.$1114(this.root,true,false,_8,false);this.$736();this.dataChanged()},isc.A.getCleanNodeData=function isc_Tree_getCleanNodeData(_1,_2,_3,_4){return isc.Tree.getCleanNodeData(_1,_2,true,_4,this)},isc.A.getName=function isc_Tree_getName(_1){var _2=isc.$ad;if(!_1)return _2;var _3=_1[this.nameProperty];if(_3==null)_3=_1[this.idField];if(_3==null){if(!this.isDescendantOf(_1,this.root)&&_1!=this.root)return null;if(!this.$27h)this.$27h=isc.Tree.autoID+++"_";_3=this.$27h+this.$27d++;_1._autoAssignedName=true}
if(!isc.isA.String(_3))_3=_2+_3;_1[this.nameProperty]=_3;return _3},isc.A.getTitle=function isc_Tree_getTitle(_1){if(!_1)return null;if(_1[this.titleProperty]!=null)return _1[this.titleProperty];var _2=_1[this.nameProperty];if(_2==null)_2=this.defaultNodeTitle;return(isc.endsWith(_2,this.pathDelim)?_2.substring(0,_2.length-this.pathDelim.length):_2)},isc.A.getPath=function isc_Tree_getPath(_1){var _2=this.getParent(_1);if(_2==null)return this.getName(_1);var _3=this.getName(_2);return this.getPath(_2)+(_3==this.pathDelim?isc.emptyString:this.pathDelim)+this.getName(_1)},isc.A.getParentPath=function isc_Tree_getParentPath(_1){var _2=this.getName(_1),_3=this.getPath(_1);return _3.substring(0,_3.length-_2.length-this.pathDelim.length)},isc.A.getParent=function isc_Tree_getParent(_1){if(_1==null)return null;return _1[this.parentProperty]},isc.A.getParents=function isc_Tree_getParents(_1){var _2=[],_3=this.getParent(_1);while(_3){_2.add(_3);if(_3==this.root)break;_3=this.getParent(_3)}
return _2},isc.A.getLevel=function isc_Tree_getLevel(_1){return this.getParents(_1).length},isc.A.$59a=function isc_Tree__getFollowingSiblingLevels(_1){var _2=[],_3=this.getParents(_1),_4=_3.length;for(var i=0;i<_4;i++){var _6=this.getChildren(_3[i]),_7=(isc.isA.ResultSet(_6)?_6.$121l():_6.getLength());if(_6.indexOf(_1)!=_7-1){_2.add(_4-i)}
_1=_3[i]}
return _2},isc.A.isFolder=function isc_Tree_isFolder(_1){if(_1==null)return false;var _2=_1[this.isFolderProperty];if(_2!=null)return _2;if(_1[this.childrenProperty])return true;var _3=this.getName(_1);if(_3==null)return false;return isc.endsWith(_3,this.pathDelim)},isc.A.isLeaf=function isc_Tree_isLeaf(_1){return!this.isFolder(_1)},isc.A.isFirst=function isc_Tree_isFirst(_1){var _2=this.getParent(_1);if(!_2)return true;var _3=this.getChildren(_2,this.opendisplayNodeType,this.$27i,this.sortDirection,null,this.$45g,false,false);if(isc.isA.ResultSet(_3)){return(_3.$121l()>0&&_3.getCachedRow(0)==_1)}else{return(_3.first()==_1)}},isc.A.isLast=function isc_Tree_isLast(_1){var _2=this.getParent(_1);if(!_2)return true;var _3=this.getChildren(_2,this.opendisplayNodeType,this.$27i,this.sortDirection,null,this.$45g,false,false);if(isc.isA.ResultSet(_3)){var _4=_3.$121l();return(_4>0&&_3.getCachedRow(_4-1)==_1)}else{return(_3.last()==_1)}},isc.A.findById=function isc_Tree_findById(_1){return this.find(this.idField,_1)},isc.A.find=function isc_Tree_find(_1,_2){var _3;if(_2===_3&&isc.isA.String(_1))return this.$27j(_1);if(_2!==_3){if(_1==this.idField)return this.nodeIndex[_2];if(this.root[_1]==_2)return this.root;return this.getDescendants().find(_1,_2)}else{var _4=this.getDescendants();_4.add(this.root);return _4.find(_1)}},isc.A.findAll=function isc_Tree_findAll(_1,_2){return this.getDescendants().findAll(_1,_2)},isc.A.$27j=function isc_Tree__findByPath(_1){if(_1==this.pathDelim)return this.root;var _2=this.getPath(this.root);if(_1==_2)return this.root;var _3=this.root,_4=0,_5=this.pathDelim.length;if(isc.startsWith(_1,_2)){_4=_2.length}else if(isc.startsWith(_1,this.pathDelim)){_4+=_5}
while(true){var _6=_1.indexOf(this.pathDelim,_4);if(_6==_4){_4+=_5;continue}
var _7=(_6!=-1),_8=_1.substring(_4,_7?_6:_1.length),_9=this.findChildNum(_3,_8);if(_9==-1)return null;_3=_3[this.childrenProperty].getCachedRow(_9);if(!_7)return _3;_4=_6+_5;if(_4==_1.length)return _3}},isc.A.findChildNum=function isc_Tree_findChildNum(_1,_2){var _3=this.getChildren(_1);if(_3==null){return-1}
if(_2==null)return-1;var _4=(isc.isA.ResultSet(_3)?_3.$121l():_3.getLength()),_5=isc.endsWith(_2,this.pathDelim),_6=this.pathDelim.length;for(var i=0;i<_4;i++){var _8=_3.getCachedRow(i);if(_8!=null){var _9=this.getName(_8),_10=_9.length-_2.length;if(_10==0&&_9==_2)return i;if(_10==_6){if(isc.startsWith(_9,_2)&&isc.endsWith(_9,this.pathDelim)&&!_5)
{return i}}else if(_5&&_10==-_6){if(isc.startsWith(_2,_9))return i}}}
return-1},isc.A.getChildren=function isc_Tree_getChildren(_1,_2,_3,_4,_5,_6,_7,_8,_9){if(!_9&&_3==null&&this.$27i==null&&this.separateFolders)
{if(this.$73p!=null)this.setSort(this.$73p);else this.sortByProperty();_3=this.$27i}
if(_1==null)_1=this.root;if(this.isLeaf(_1))return null;if(_1[this.childrenProperty]==null){if(_7)return null;var _10=[];_1[this.childrenProperty]=_10;return _10}
var _11=(isc.ResultTree!=null&&isc.isA.ResultTree(this)&&this.isPaged()),_12=_1[this.childrenProperty],_13;if(_5){_13=[];var _14=(_11&&isc.isA.ResultSet(_12)?_12.$121l():_12.getLength());for(var i=0;i<_14;++i){var _16=_12.getCachedRow(i);if(_16!=null){if(this.fireCallback(_5,"node,parent,tree",[_16,_1,this]))
{_13[_13.length]=_16}}}
_12=_13}
if(_2==isc.Tree.FOLDERS_ONLY){_13=[];var _14=(_11&&isc.isA.ResultSet(_12)?_12.$121l():_12.getLength());for(var i=0;i<_14;++i){var _16=_12.getCachedRow(i);if(_16!=null){var _17=this.isFolder(_16);if(_17&&_8){var c=_16[this.childrenProperty];_17=!(c!=null&&c.isEmpty())}
if(_17){_13[_13.length]=_16}}}}else if(_2==isc.Tree.LEAVES_ONLY){_13=[];var _14=(_11&&isc.isA.ResultSet(_12)?_12.$121l():_12.getLength());for(var i=0;i<_14;++i){var _16=_12.getCachedRow(i);if(_16!=null){var _19=this.isLeaf(_16);if(!_19&&_8){var c=_16[this.childrenProperty];_19=(c!=null&&c.isEmpty())}
if(_19){_13[_13.length]=_16}}}}else{_13=_12}
if(_3){var _20=this.$73p?this.$73p.getProperty("property"):[];var _21=null,_22=null;if(isc.Browser.isFirefox&&_3===this.$27i){_21=this.$135d;_22=this.$135e}
if(this.$73p){for(var _23=this.$73p.length;_23--;){var _24=this.$73p[_23];if(!_24.normalizer){_24.normalizer=_3;_24.$114u=(Array.shouldSortAscending(_24.direction)?_21:_22)}}}
var _25=!this.$684?null:(isc.isAn.Array(this.$684)?this.$684:[this.$684]);if(!_25||this.alwaysSortGroupHeaders||(!_25.contains(_20[0])&&_1!=this.getRoot())||(_25.contains(_20[0]))){if(this.$73p){if(_11&&isc.isA.ResultSet(_13)){_13=_13.getAllVisibleRows()||[]}
if(_1.groupMembers){var _26=(this.$73p.find("property",_1.groupName)!=null);var _27=_1==this.getRoot();_26=_26||_27;if(_26){_13.map(function(_33){if(_33.$52e){if(_1.groupValue&&!_33[_1.groupName]&&_27){_33[_1.groupName]=_1.groupValue}
if(!_33[_33.groupName]){_33[_33.groupName]=_33.groupValue}}})}}
var _28=_13.findAll(this.$112c,true)||[];if(_28.length>0)_13.removeList(_28);_13.setSort(this.$73p);if(_28.length>0){var _29=[];for(var i=0;i<_28.length;){if(_28[i]==null)break;var _30=[],_31=_28[i],_32=_31[this.$117k];if(_32==null){_29.add(_31);i++;continue}else{do{_30.add(_31);_31=_28[i+1];i++}while(_31&&_31[this.$117k]==_32);_13.addListAt(_30,_13.indexOf(_32)+1)}}
if(_29.length>0){_13.addListAt(_29,_13.length)}}}}}
return _13},isc.A.getChildrenResultSet=function isc_Tree_getChildrenResultSet(_1){var _2=this.getChildren(_1);return(isc.isA.ResultSet(_2)?_2:null)},isc.A.getFolders=function isc_Tree_getFolders(_1,_2,_3,_4,_5){var _6=this.getChildren(_1,isc.Tree.FOLDERS_ONLY,_2,_3,_4,_5,false,false);return _6},isc.A.getLeaves=function isc_Tree_getLeaves(_1,_2,_3,_4,_5){var _6=this.getChildren(_1,isc.Tree.LEAVES_ONLY,_2,_3,_4,_5,false,false);return _6},isc.A.getLevelNodes=function isc_Tree_getLevelNodes(_1,_2){if(this.indexByLevel&&(_2==null||_2==this.getRoot())){return this.$76h[_1]||[]}else{if(!_2)_2=this.getRoot();var _3=this.getChildren(_2);if(_1==0){if(isc.isA.ResultSet(_3)){return _3.getAllLoadedRows()}else{return _3}}
var _4=[];if(_3){var _5=(isc.isA.ResultSet(_3)?_3.$121l():_3.getLength());for(var i=0;i<_5;++i){var _7=_3.getCachedRow(i),_8=(_7!=null&&this.getLevelNodes(_1-1,_7));if(_8)_4.addList(_8)}}
return _4}},isc.A.getDepth=function isc_Tree_getDepth(){if(this.$76h)return this.$76h.length;return null},isc.A.hasChildren=function isc_Tree_hasChildren(_1,_2){var _3=this.getChildren(_1,_2);return(_3!=null&&!_3.isEmpty())},isc.A.hasFolders=function isc_Tree_hasFolders(_1){return this.hasChildren(_1,isc.Tree.FOLDERS_ONLY)},isc.A.hasLeaves=function isc_Tree_hasLeaves(_1){return this.hasChildren(_1,isc.Tree.LEAVES_ONLY)},isc.A.isDescendantOf=function isc_Tree_isDescendantOf(_1,_2){if(_1==_2)return false;var _3=_1;while(_3!=null){if(_3==_2)return true;_3=_3[this.parentProperty]}
return false},isc.A.getDescendants=function isc_Tree_getDescendants(_1,_2,_3){if(!_1)_1=this.root;var _4=[];if(!_3)_3=isc.Class.RET_TRUE;if(this.isLeaf(_1))return _4;var _5=this.getChildren(_1);if(!_5){return _4}
var _6=(isc.isA.ResultSet(_5)?_5.$121l():_5.getLength());for(var i=0;i<_6;++i){var _8=_5.getCachedRow(i);if(_8==null){}else if(this.isFolder(_8)){if(_2!=isc.Tree.LEAVES_ONLY&&_3(_8)){_4[_4.length]=_8}
_4=_4.concat(this.getDescendants(_8,_2,_3))}else{if(_2!=isc.Tree.FOLDERS_ONLY&&_3(_8)){_4[_4.length]=_8}}}
return _4},isc.A.getDescendantFolders=function isc_Tree_getDescendantFolders(_1,_2){return this.getDescendants(_1,isc.Tree.FOLDERS_ONLY,_2)},isc.A.getDescendantLeaves=function isc_Tree_getDescendantLeaves(_1,_2){return this.getDescendants(_1,isc.Tree.LEAVES_ONLY,_2)},isc.A.dataChanged=function isc_Tree_dataChanged(){},isc.A.add=function isc_Tree_add(_1,_2,_3){return this.$27e(_1,_2,_3)},isc.A.$27e=function isc_Tree__add(_1,_2,_3){if(_2==null&&this.modelType==isc.Tree.PARENT){var _4=_1[this.parentIdField];if(_4!=null)_2=this.findById(_4)}
if(isc.isA.String(_2)){_2=this.find(_2)}else if(!this.getParent(_2)&&_2!==this.getRoot()){isc.logWarn('Tree.add(): specified parent node:'+this.echo(_2)+' is not in the tree, returning');return null}
if(!_2){var _5=this.getParentPath(_1);if(_5)_2=this.find(_5);if(!_2)return null}
this.$137a(_1,_2,_3);this.$736(true);this.dataChanged();return _1},isc.A.$580=function isc_Tree__reportCollision(_1){if(this.reportCollisions){this.logWarn("Adding node to tree with id property set to:"+_1+". A node with this ID is already present in this Tree - that node will be replaced. Note that this warning may be disabled by setting the reportCollisions attribute to false.")}},isc.A.$137a=function isc_Tree___add(_1,_2,_3){var _4=(isc.ResultTree!=null&&isc.isA.ResultTree(this)&&this.isPaged());var _5={};_2[this.$1200]=1+(_2[this.$1200]||0);this.$1205(_1,_2,true,_5);var _6=_5.deltaParentLength,_7=_5.grandParent,_8=_5.origParentLength,_9=_5.children;if(_3==null||_3>_9.length){_9.add(_1)}else{_9.addAt(_1,_3)}
this.$1206(_1,_2,_3,_5);var _10=(_4?this.$1202(_1,_5.grandChildren,false):_5.grandChildren);if(_4){var _11=(_2[this.canReturnOpenSubfoldersProperty]!=null),_12=(_11?_2[this.canReturnOpenSubfoldersProperty]:this.canReturnOpenFolders);if(!_12&&this.isOpen(_1)&&_10!=null&&!_10.isEmpty())
{this.logWarn("Adding the open folder node '"+this.getPath(_1)+"' as a child of the parent node '"+this.getPath(_2)+"' is contradictory to the setting of the "+(_11?"'"+this.canReturnOpenSubfoldersProperty+"' property of the parent node.":"'canReturnOpenFolders' property of the tree."))}}
var _13=0;if(_4&&isc.isA.ResultSet(_10)){if(!(_10.lengthIsKnown()&&_10.allMatchingRowsCached())){this.$1203(_1,false,_2,false)}}else if(_10!=null){if(!isc.isAn.Array(_10)){this.$137a(_10,_1)}else if(_10.length>0){this.$137b(_10,_1)}
this.setLoadState(_1,isc.Tree.LOADED)}
if((--_2[this.$1200])==0){delete _2[this.$1200];if(_7){_6+=(this.$111x(_2,_7)-_8);this.$111z(_7,_6)}}},isc.A.$1207=function isc_Tree__removeCollision(_1){var _2=(isc.ResultTree!=null&&isc.isA.ResultTree(this)&&this.isPaged());if(_2){var _3=this.getParent(_1),_4=(_3!=null?this.getChildren(_3):null);if(isc.isA.ResultSet(_4)){var j=_4.indexOf(_1);if(j!=-1){_4.fillCacheData([null],j)}
return}}
this.$786(_1)},isc.A.$1208=function isc_Tree__findCollision(_1){var _2=_1[this.idField];if(_2!=null&&this.modelType==isc.Tree.PARENT){var _3=this.findById(_2);if(_3){return _3}}
return null},isc.A.$1205=function isc_Tree__preAdd(_1,_2,_3,_4){this.getName(_1);var _5=_4.deltaParentLength=this.convertToFolder(_2);var _6=_4.grandParent=(_2!=this.root&&this.getParent(_2)),_7=_4.origParentLength=(_6&&this.$111x(_2,_6));var _8=this.$1208(_1);if(_8){var _9=_8[this.idField];this.$580(_9);if(_3){this.$1207(_8)}}
var _10=_2[this.childrenProperty];if(!_10)_10=_2[this.childrenProperty]=[];_4.children=_10;var _11=_4.childrenResultSet=isc.isA.ResultSet(_10);if(_10!=null&&!isc.isAn.Array(_10)&&!_11){_2[this.childrenProperty]=_10=[_10]}
var _12=this.idField
_1[this.parentIdField]=_2[_12];_1[this.parentProperty]=_2;delete _1.$27g},isc.A.$1206=function isc_Tree__postAdd(_1,_2,_3,_4){var _5=this.idField;_1[this.treeProperty]=this.ID;if(_1[_5]!=null)this.nodeIndex[_1[_5]]=_1;if(!_4.childrenResultSet){this.setLoadState(_2,isc.Tree.LOADED)}
this.$76i(_1,_2,_3);var _6=this.isFolder(_1);_1[this.$111w]=(this.openDisplayNodeType!=(_6?isc.Tree.LEAVES_ONLY:isc.Tree.FOLDERS_ONLY)?1:0);var _7=_4.grandChildren=_1[this.childrenProperty],_8;if(_7!=null){_1[this.childrenProperty]=[];_8=this.$111x(_1,_2)}else{_8=this.$111x(_1,_2);var _9=this.isFolder(_1),_10=_1[this.isFolderProperty];if(_10!=null&&!isc.isA.Boolean(_10)){_10=isc.booleanValue(_10,true)}
if(_10==null&&this.defaultIsFolder)_10=true;if(_10&&!_9){_8+=this.convertToFolder(_1)}
_1[this.isFolderProperty]=_10}
_2[this.$111w]+=_8},isc.A.$76i=function isc_Tree__addToLevelCache(_1,_2,_3){if(!this.indexByLevel)return;var _4=this.getLevel(_2);if(!this.$76h[_4])this.$76h[_4]=[];var _5=this.$76h[_4];if(_5.length==0){if(!isc.isAn.Array(_1)){_5.push(_1)}else{_5.concat(_1)}}else{if(!isc.isAn.Array(_1)){if(_5.contains(_1))return}else{var _6=[];for(var j=0;j<_1.length;j++){if(!_5.contains(_1[j])){_6.push(_1[j])}}}
var _8=false,_9=0,i=0;for(i;i<_5.length;i++){if(this.getParent(_5[i])==_2){_8=true}else if(_8){break}else{continue}
if(_9===_3){break}
_9++}
if(!isc.isAn.Array(_1)){_5.splice(i,0,_1)}else{if(i==0){this.$76h[_4]=_6.concat(_5)}else if(i==_5.length){this.$76h[_4]=_5.concat(_6)}else{this.$76h[_4]=_5.slice(0,i).concat(_6,_5.slice(i))}}}},isc.A.addList=function isc_Tree_addList(_1,_2,_3){return this.$27k(_1,_2,_3)},isc.A.$27k=function isc_Tree__addList(_1,_2,_3){if(isc.isA.String(_2))_2=this.find(_2);if(!_2)return null;this.$137b(_1,_2,_3);if(!this.$1266){this.$736(true);this.dataChanged()}
return _1},isc.A.$137b=function isc_Tree___addList(_1,_2,_3){var _4=(isc.isA.ResultSet(_1)?_1.$121l():_1.getLength());for(var i=0;i<_4;++i){var _6=_1.getCachedRow(i);if(_6!=null){this.$137a(_6,_2,_3!=null?(_3+i):null)}}},isc.A.move=function isc_Tree_move(_1,_2,_3){return this.$1083(_1,_2,_3)},isc.A.$1083=function isc_Tree__move(_1,_2,_3){this.moveList([_1],_2,_3)},isc.A.moveList=function isc_Tree_moveList(_1,_2,_3){for(var i=_1.length,_5=false;i--;){var _6=_1[i];if(_6==_2||this.isDescendantOf(_2,_6)){if(!_5){_5=true;_1=_1.duplicate()}
this.logWarn("Tree.moveList():  Specified node '"+this.getPath(_6)+"' is an ancestor of the new parent node '"+this.getPath(_2)+"' and therefore cannot be made a child of that parent.  The specified node will remain where it is.");_1.removeAt(i)}}
if(_1.length==0){return}
var _6=_1[0],_7=this.getParent(_6),_8=this.getChildren(_7).indexOf(_6);this.$1266=true;this.$137c(_1);if(_2==_7&&_1.length==1){if(_3>_8)_3--}else{var _9=this.getChildren(_2);if(_9){var _10=(isc.isA.ResultSet(_9)?_9.$121l():_9.getLength());if(_3>_10){_3=_10}}}
this.$27k(_1,_2,_3);delete this.$1266;this.$736(true);this.dataChanged()},isc.A.remove=function isc_Tree_remove(_1,_2){return this.$786(_1,_2)},isc.A.$786=function isc_Tree__remove(_1,_2){var _3=this.getParent(_1);if(!_3)return false;var _4=this.getChildren(_3);if(_4){var _5=_4.indexOf(_1);if(_5!=-1){this.$137d(_1,_3,_4,_5);if(!_2){this.$736(true);this.dataChanged()}
return true}}
return false},isc.A.$137d=function isc_Tree___remove(_1,_2,_3,_4){var _5=(isc.ResultTree!=null&&isc.isA.ResultTree(this)&&this.isPaged());_2[this.$1200]=1+(_2[this.$1200]||0);var _6={};this.$1209(_1,_2,_6);var _7=_6.deltaLength,_8=_6.grandParent,_9=_6.origParentLength;_3.remove(_1);this.$121a(_1,_2,_6);var _8=_6.grandParent;if((--_2[this.$1200])==0){delete _2[this.$1200];if(_8){var _10=(this.$111x(_2,_8)-_9);this.$111z(_8,_10)}}},isc.A.$1209=function isc_Tree__preRemove(_1,_2,_3){this.$1221(_1);_3.deltaLength=-this.$111x(_1,_2);var _4=_3.grandParent=(_2!=this.root&&this.getParent(_2));_3.origParentLength=_4&&this.$111x(_2,_4);this.$76j(_1);delete _1[this.parentProperty];delete _1[this.treeProperty]},isc.A.$121a=function isc_Tree__postRemove(_1,_2,_3){var _4=_3.deltaLength;_2[this.$111w]+=_4},isc.A.$1221=function isc_Tree__removeFromNodeIndex(_1){delete this.nodeIndex[_1[this.idField]];var _2=this.getChildren(_1,null,null,null,null,null,true,false);if(!_2)return;var _3=(isc.isA.ResultSet(_2)?_2.$121l():_2.getLength());for(var i=0;i<_3;++i){var _5=_2.getCachedRow(i);if(_5!=null){this.$1221(_5)}}},isc.A.removeList=function isc_Tree_removeList(_1){return this.$137c(_1)},isc.A.$137c=function isc_Tree__removeList(_1){var _2=false;var i=(isc.isA.ResultSet(_1)?_1.$121l():_1.getLength());while(i--){var _4=_1.getCachedRow(i);if(_4!=null){if(this.$786(_4,true)){_2=true}}}
if(_2&&!this.$1266){this.$736(true);this.dataChanged()}
return _2});isc.evalBoundary;isc.B.push(isc.A.$76j=function isc_Tree__removeFromLevelCache(_1,_2){if(!this.indexByLevel)return;_2=_2||this.getLevel(_1)-1;var _3=this.getChildren(_1);if(_3){var _4=(isc.isA.ResultSet(_3)?_3.$121l():_3.getLength());for(var i=0;i<_4;++i){var _6=_3.getCachedRow(i);if(_6!=null){this.$76j(_6,_2+1)}}}
if(this.$76h[_2]){var _7=this.$76h[_2];for(var i=0;i<_7.length;i++){if(_7[i]==_1){_7.splice(i,1);break}}}},isc.A.getLoadState=function isc_Tree_getLoadState(_1){if(!_1)return null;if(this.isLeaf(_1))return isc.Tree.LOADED;if(!_1.$27g)return this.defaultLoadState;return _1.$27g},isc.A.isLoaded=function isc_Tree_isLoaded(_1){var _2=this.getLoadState(_1);return(_2==isc.Tree.LOADED||_2==isc.Tree.LOADING||_2==isc.Tree.LOADED_PARTIAL_CHILDREN)},isc.A.allChildrenLoaded=function isc_Tree_allChildrenLoaded(_1){var _2=this.getLoadState(_1);return(_2==isc.Tree.LOADED)},isc.A.setLoadState=function isc_Tree_setLoadState(_1,_2){var _3=this.getLoadState(_1);_1.$27g=_2;_2=this.getLoadState(_1);var _4=(_3===isc.Tree.LOADED||_3===isc.Tree.LOADED_PARTIAL_CHILDREN),_5=(_2===isc.Tree.LOADED||_2===isc.Tree.LOADED_PARTIAL_CHILDREN),_6=(isc.ResultTree!=null&&isc.isA.ResultTree(this)&&this.isPaged());if(_6&&(_4!=_5)){var _7=this.getParent(_1);if(isc.isA.Boolean(_1[this.$1215])){this.$1203(_1,null,_7,false)}}},isc.A.loadRootChildren=function isc_Tree_loadRootChildren(_1){this.loadChildren(this.root,_1)},isc.A.loadChildren=function isc_Tree_loadChildren(_1,_2){if(!_1){_1=this.root}
var _3=(isc.ResultTree!=null&&isc.isA.ResultTree(this)&&this.isPaged());if(_3){this.$121b(_1,0,this.resultSize,_2)}else{this.$121b(_1,null,null,_2)}},isc.A.$121b=function isc_Tree__loadChildren(_1,_2,_3,_4){this.setLoadState(_1,isc.Tree.LOADED);if(_4){this.fireCallback(_4,"node",[_1],this)}},isc.A.unloadChildren=function isc_Tree_unloadChildren(_1,_2){if(_1==null||this.isLeaf(_1)){return}
var _3,_4,_5;if(_2==isc.Tree.LEAVES_ONLY){_3=this.getLeaves(_1);_4=this.getFolders(_1);_5=isc.Tree.FOLDERS_LOADED}else{_3=_1[this.childrenProperty];_4=[];_5=isc.Tree.UNLOADED}
var _6,_7;if(_3){_6=(_1!=this.root&&this.getParent(_1));_7=_6&&this.$111x(_1,_6);for(var i=0;i<_3.length;i++){var _9=_3[i];this.$1221(_9);_1[this.$111w]-=this.$111x(_9,_1)}}
_1[this.childrenProperty]=_4;this.setLoadState(_1,_5);if(_3&&_6){var _10=(this.$111x(_1,_6)-_7);this.$111z(_6,_10)}
this.$736(true);this.dataChanged()},isc.A.reloadChildren=function isc_Tree_reloadChildren(_1,_2){this.unloadChildren(_1,_2);this.loadChildren(_1,_2)},isc.A.$736=function isc_Tree__clearNodeCache(_1){if(_1)this.$737=null;this.$27m=null},isc.A.isOpen=function isc_Tree_isOpen(_1){return _1!=null&&!!_1[this.openProperty]},isc.A.getOpenFolders=function isc_Tree_getOpenFolders(_1){if(_1==null)_1=this.root;var _2=this.openProperty;var _3=this.getDescendantFolders(_1,function(_1){return _1[_2]});if(this.isOpen(_1))_3.add(_1);return _3},isc.A.getOpenFolderPaths=function isc_Tree_getOpenFolderPaths(_1){var _2=this.getOpenFolders(_1);for(var i=0;i<_2.length;i++){_2[i]=this.getPath(_2[i])}
return _2},isc.A.changeDataVisibility=function(node,newState,callback){if(this.isLeaf(node)){if(callback){this.fireCallback(callback,"node",[node],this)}
return false}
var state=node[this.openProperty],closedToOpen=!state&&newState,openToClosed=state&&!newState;if(closedToOpen||openToClosed){var parent=node!=this.root&&this.getParent(node),prevLength=parent&&this.$111x(node,parent),newLength=(this.openDisplayNodeType!=isc.Tree.LEAVES_ONLY?1:0);node[this.openProperty]=newState;if(closedToOpen){var childrenInOpenList=this.getChildren(node,isc.Tree.FOLDERS_AND_LEAVES,null,this.sortDirection,this.openListCriteria,this.$45g,false,true,true),loadingMarker=(isc.ResultSet!=null?isc.ResultSet.getLoadingMarker():null),i=(isc.isA.ResultSet(childrenInOpenList)?childrenInOpenList.$121l():childrenInOpenList.getLength());var pagedResultTree=(isc.ResultTree!=null&&isc.isA.ResultTree(this)&&this.isPaged()),knownLengthNulls=pagedResultTree;if(pagedResultTree){var openSubfoldersAllowed=(node[this.canReturnOpenSubfoldersProperty]!=null?node[this.canReturnOpenSubfoldersProperty]:this.canReturnOpenFolders),defaultChildLength=(this.openDisplayNodeType==isc.Tree.FOLDERS_AND_LEAVES?1:0);knownLengthNulls=!(openSubfoldersAllowed||defaultChildLength==0)}
while(i--){var child=childrenInOpenList.getCachedRow(i);if(child!=null&&child!=loadingMarker){newLength+=this.$111x(child,node)}else if(knownLengthNulls){++newLength}}}
node[this.$111w]=newLength;if(parent){var deltaLength=this.$111x(node,parent)-prevLength;this.$111z(parent,deltaLength)}}else{node[this.openProperty]=newState}
this.$736();if(newState&&!this.isLoaded(node)){this.loadChildren(node,callback)}else if(callback){this.fireCallback(callback,"node",[node],this)}},isc.A.toggleFolder=function isc_Tree_toggleFolder(_1){this.changeDataVisibility(_1,!this.isOpen(_1))},isc.A.openFolder=function isc_Tree_openFolder(_1,_2){if(_1==null)_1=this.root;if(!this.isOpen(_1)){this.changeDataVisibility(_1,true,_2)}else if(_2){this.fireCallback(_2,"node",[_1],this)}},isc.A.openFolders=function isc_Tree_openFolders(_1){for(var i=0;i<_1.length;i++){var _3=_1[i];if(_3==null)continue;if(isc.isA.String(_3))_3=this.find(_3);if(_3!=null){this.openFolder(_3)}}},isc.A.closeFolder=function isc_Tree_closeFolder(_1){if(this.isOpen(_1)){this.changeDataVisibility(_1,false)}},isc.A.closeFolders=function isc_Tree_closeFolders(_1){for(var i=0;i<_1.length;i++){var _3=_1[i];if(_3==null)continue;if(isc.isA.String(_3))_3=this.find(_3);if(_3!=null){this.closeFolder(_3)}}},isc.A.openAll=function isc_Tree_openAll(_1){if(!_1)_1=this.root;var _2=this.getDescendants(_1,isc.Tree.FOLDERS_ONLY);for(var i=0,_4=_2.length;i<_4;i++){if(!this.isOpen(_2[i])){this.changeDataVisibility(_2[i],true)}}
this.changeDataVisibility(_1,true)},isc.A.closeAll=function isc_Tree_closeAll(_1){if(!_1)_1=this.root;var _2=this.getDescendants(_1,isc.Tree.FOLDERS_ONLY);for(var i=0,_4=_2.length;i<_4;i++){if(this.isOpen(_2[i])){this.changeDataVisibility(_2[i],false)}}
if(!(_1==this.root&&this.showRoot==false))this.changeDataVisibility(_1,false)},isc.A.getOpenList=function isc_Tree_getOpenList(_1,_2,_3,_4,_5,_6,_7){if(!_1)_1=this.root;if(_3==null)_3=this.$27i;if(_4==null)_4=this.sortDirection;if(_6==null)_6=this.$45g;if(this.isLeaf(_1)){if(_1==this.root)return[];return null}
var _8=[];if(_2!=isc.Tree.LEAVES_ONLY&&(_1!=this.root||this.showRoot)){_8[_8.length]=_1}
if(!_7&&!this.isOpen(_1))return _8;var _9=this.getChildren(_1,isc.Tree.FOLDERS_AND_LEAVES,_3,_4,_5,_6,false,false);var _10=(isc.ResultSet!=null?isc.ResultSet.getLoadingMarker():null),_11=(isc.ResultSet!=null&&isc.isA.ResultSet(_9)?_9.$121l():_9.getLength());for(var i=0;i<_11;++i){var _13=_9.getCachedRow(i);if(_13==null||_13==_10){continue}
var _14=_13[this.childrenProperty];if(_14&&!_14.isEmpty()){_8=_8.concat(this.getOpenList(_13,_2,_3,_4,_5,_6,_7))}else{if(_2!=isc.Tree.FOLDERS_ONLY){_8[_8.length]=_13}}}
return _8},isc.A.$110o=function isc_Tree__getOpenListAsync(_1,_2,_3,_4,_5,_6,_7,_8,_9,_10,_11,_12){var _13=_1,_14=false,_15,_16,_17,i,_19;if(_12==null){if(!_1)_13=_1=this.root;if(_3==null)_3=this.$27i;if(_4==null)_4=this.sortDirection;if(_6==null)_6=this.$45g;_15=[];if(this.isLeaf(_1)){var _20=(_1==this.root?[]:null);_11.call(_8,_20);return}
_16=[];_17=[];_12={list:_15,node:_1,indexStack:_16,childrenStack:_17}}else{_15=_12.list;_1=_12.node;_16=_12.indexStack;_17=_12.childrenStack;i=_16.last();_19=_17.last()}
for(var _21=0;!_14&&_21<_10;++_21){if(_1!=null){if(this.isLeaf(_1)){_1=null;continue}
if(_2!=isc.Tree.LEAVES_ONLY&&(_1!=this.root||this.showRoot)){_15[_15.length]=_1}
if(!_7&&!this.isOpen(_1)){_1=null;continue}
i=0;_19=this.getChildren(_1,_2,_3,_4,_5,_6,false,false);_16.push(i);_17.push(_19)}
_1=null;var _22=false,_23=(isc.isA.ResultSet(_19)?_19.$121l():_19.getLength());for(;!_22&&i<_23&&_21<_10;++i){var _24=_19.getCachedRow(i);if(_24==null){continue}
var _25=_24[this.childrenProperty];if(_25&&!_25.isEmpty()){_22=true;_1=_12.node=_24;continue}else{if(_2!=isc.Tree.FOLDERS_ONLY){_15[_15.length]=_24}
++_21}}
_16[_16.length-1]=i;if(!_22&&i>=_23){if(_16.length>1){_16.pop();_17.pop();i=_16.last();_19=_17.last()}else{_14=true}}}
if(_14){_11.call(_8,_15)}else{_12.node=_1;_8[_9]=this.delayCall("$110o",[_13,_2,_3,_4,_5,_6,_7,_8,_9,_10,_11,_12],0)}},isc.A.$27l=function isc_Tree__getOpenList(){if(!this.$27m||!this.cacheOpenList){this.$27m=this.getOpenList(this.root,this.openDisplayNodeType,this.$27i,this.sortDirection,this.openListCriteria)}
return this.$27m},isc.A.getNodeList=function isc_Tree_getNodeList(){if(!this.$737||!this.cacheAllList){this.$737=this.getAllNodes(this.root)}
return this.$737},isc.A.$110q=function isc_Tree__getNodeListAsync(_1,_2,_3,_4){if(!this.$737||!this.cacheAllList){var _5=this;this.$110r(this.root,_1,_2,_3,function(_6){_5.$737=_6;_4.call(_1,_6)})}else{return this.$737}},isc.A.getAllNodes=function isc_Tree_getAllNodes(_1){return this.getOpenList(_1,null,null,null,null,null,true)},isc.A.$110r=function isc_Tree__getAllNodesAsync(_1,_2,_3,_4,_5){this.$110o(_1,null,null,null,null,null,true,_2,_3,_4,_5)},isc.A.getLength=function isc_Tree_getLength(){var _1=(this.root[this.$111w]-(!this.showRoot&&this.openDisplayNodeType!=isc.Tree.LEAVES_ONLY?1:0));return _1},isc.A.$110s=function isc_Tree__getLengthAsync(_1,_2,_3,_4){_4.call(_1,this.getLength())},isc.A.get=function isc_Tree_get(_1){return this.$27l()[_1]},isc.A.getCachedRow=function isc_Tree_getCachedRow(_1){return this.get(_1)},isc.A.getRange=function isc_Tree_getRange(_1,_2){if(!(0<=_1&&_1<_2))return[];return this.$27l().slice(_1,_2)},isc.A.indexOf=function isc_Tree_indexOf(_1,_2,_3){return this.$27l().indexOf(_1,_2,_3)},isc.A.lastIndexOf=function isc_Tree_lastIndexOf(_1,_2,_3){return this.$27l().lastIndexOf(_1,_2,_3)},isc.A.getAllItems=function isc_Tree_getAllItems(){return this.$27l()},isc.A.sortByProperty=function isc_Tree_sortByProperty(_1,_2,_3,_4){if(!_1&&this.separateFolders==false){if(this.sortProp)_1=this.sortProp;else _1=this.titleProperty}
if(!_2)_2=this.sortDirection;this.setSort([{property:_1,direction:(isc.isA.String(_2)?_2:(_2==true)?"ascending":"descending"),normalizer:_3,context:_4}])},isc.A.setSort=function isc_Tree_setSort(_1){if(!_1||!_1.length){if(this.sortProp){var _2=this.sortDirection;_1=[{property:this.sortProp,direction:(isc.isA.String(_2)?_2:(_2==true)?"ascending":"descending")}]}}else{var _3=[];for(var i=0;i<_1.length;i++){_3[i]=isc.addProperties({},_1[i])}
_1=_3}
this.$73p=_1;this.$736(true);this.$27n();this.$45g=_1&&_1.length>0?_1[0].context:null;this.dataChanged()},isc.A.$27n=function isc_Tree__makeOpenNormalizer(){var _1=this,_2=this.separateFolders!=false,_3=this.$73p,_4=this.titleProperty;var _5,_6;if(this.sortFoldersBeforeLeaves){_5="0:";_6="1:"}else{_5="1:";_6="0:"}
_3.removeEmpty();if(_3.isEmpty()){this.$27i=isc.Class.NO_OP;return}
var _7=_3.getProperty("property");if((!_2||_7.length>1||!!_7[0])&&!_7.contains(_4))
{_7.add(_4)}
this.$27i=function(_19,_20){if(_1==null||_1.destroyed){_1=null;return}
var _8="";if(_2){_8+=(_1.isFolder(_19)?_5:_6)}
for(var i=0;i<_7.length;++i){var _10=_7[i];if(!_10)continue;var _11=_10==_4;var _12=_11?_1.getTitle(_19):_19[_10];if(_12==null)continue;if(isc.isA.Number(_12)){if(_12>0){_12="1"+_12.stringify(12,true)}else{_12=999999999999+_12;_12="0"+_12.stringify(12,true)}}else if(isc.isA.Date(_12)){_12=_12.getTime()}
if(_11){_8+=String(_12).toLowerCase()+":"}else{_8+=_12+":"}}
return _8};if(isc.Browser.isFirefox){this.$135d=function(_19,_20){if(_19==null||_20==null){return Array.compareAscending(_19,_20)}
var m=_19.length,n=_20.length;if(m==0||n==0){return Array.compareAscending(_19,_20)}
var i=0,j=_19.indexOf(":",i),k=0,l=_20.indexOf(":",k);if(j==-1)j=m;if(l==-1)l=n;for(;;){var _18=Array.compareAscending(_19.substring(i,j),_20.substring(k,l));if(_18!=0){return _18}else{i=j+1;k=l+1;if(i>=m){if(k>=n){return 0}else{return-1}}else if(k>=n){return 1}else{j=_19.indexOf(":",i);l=_20.indexOf(":",k);if(j==-1)j=m;if(l==-1)l=n}}}};this.$135e=function(_19,_20){if(_19==null||_20==null){return Array.compareDescending(_19,_20)}
var m=_19.length,n=_20.length;if(m==0||n==0){return Array.compareDescending(_19,_20)}
var i=0,j=_19.indexOf(":",i),k=0,l=_20.indexOf(":",k);if(j==-1)j=m;if(l==-1)l=n;for(;;){var _18=Array.compareDescending(_19.substring(i,j),_20.substring(k,l));if(_18!=0){return _18}else{i=j+1;k=l+1;if(i>=m){if(k>=n){return 0}else{return 1}}else if(k>=n){return-1}else{j=_19.indexOf(":",i);l=_20.indexOf(":",k);if(j==-1)j=m;if(l==-1)l=n}}}}}
return},isc.A.loadSubtree=function isc_Tree_loadSubtree(_1,_2,_3){if(!_1)_1=this.getRoot();if(_2==null)_2=this.loadBatchSize;this.$27o=_3?2:1;var _4=0,_5=1;while(_4<_2){var _6=this.$27p(_2,_1,_4,_5++);if(_6==0)break;_4+=_6}
this.$27o=null;if(_4>0)this.$736(true)},isc.A.loadingBatch=function isc_Tree_loadingBatch(_1){if(_1)return this.$27o==2;else return this.$27o},isc.A.$27p=function isc_Tree__loadToDepth(_1,_2,_3,_4){var _5=0;if(!this.isOpen(_2)){if(!this.isLoaded(_2))this.loadChildren(_2);if(this.isLoaded(_2)){if(this.openFolder(_2)===false)return _5}
var _6=_2[this.childrenProperty];if(_6){var _7=(isc.isA.ResultSet(_6)?_6.$121l():_6.getLength());_5+=_7;_3+=_7}}
var _8=_2[this.childrenProperty];if(_3>=_1||_4==0||_8==null)return _5;var _9=(isc.isA.ResultSet(_8)?_8.$121l():_8.getLength());for(var i=0;i<_9;++i){var _11=_8.getCachedRow(i);if(_11!=null){var _12=this.$27p(_1,_11,_3,_4-1);_5+=_12;_3+=_12;if(_3>=_1)return _5}}
return _5},isc.A.getFilteredTree=function isc_Tree_getFilteredTree(_1,_2,_3,_4){_2=_2||isc.Tree.STRICT;var _3=this.dataSource||_3;if(!_3){isc.logWarn("Cannot apply filter to Tree without dataSource");return null}
var _5=this.duplicate(true,true);if(isc.ResultTree&&isc.isA.ResultTree(_5)&&_5.isPaged()){_5.setCriteria(isc.DataSource.combineCriteria(_1,_5.criteria))}
_5.$866(_1,_2,_3,_5.getRoot(),_4);return _5},isc.A.$866=function isc_Tree__filterChildren(_1,_2,_3,_4,_5){var _6=(_2==isc.Tree.STRICT),_7=!_6;var _8=_4[this.childrenProperty];if(_8==null||_8.isEmpty())return false;var _9=false;if(isc.isA.String(_3))_3=isc.DS.get(_3);var _10=isc.isA.ResultSet(_8);_6=_6||_10;var i=(_10?_8.$121l():_8.getLength());while(i--){var _12=_8.getCachedRow(i);if(_12!=null){var _13=false,_14=_12[this.childrenProperty];if(_7){if(_14!=null&&!_14.isEmpty()){_13=this.$866(_1,_2,_3,_12,_5)}
_9=_9||_13}
if(!_13||_6){var _15=_3.applyFilter([_12],_1,_5);if(_15!=null&&_15.length>0){_9=true;if(_6&&_14!=null&&!_14.isEmpty()){this.$866(_1,_2,_3,_12,_5)}}else{this.$786(_12,_4,_8,i)}}}}
return _9},isc.A.$1111=function isc_Tree__includeNodeLengthInParent(_1,_2){return this.isOpen(_2)},isc.A.$121c=function isc_Tree__isNodeVisibleToParent(_1,_2){if(!this.$1111(_1,_2)){return false}else{var _3=_1[this.childrenProperty],_4=this.isFolder(_1)&&(_3&&_3.length);return(this.openDisplayNodeType!=(_4?isc.Tree.LEAVES_ONLY:isc.Tree.FOLDERS_ONLY))}},isc.A.$111x=function isc_Tree__getNodeLengthToParent(_1,_2){if(this.$1111(_1,_2)){var _3=_1[this.$111w],_4=_1[this.childrenProperty],_5=this.isFolder(_1),_6=(_4&&_4.length);if(_5!=_6){_3+=(-(this.openDisplayNodeType!=(_5?isc.Tree.LEAVES_ONLY:isc.Tree.FOLDERS_ONLY)?1:0)+(this.openDisplayNodeType!=(_6?isc.Tree.LEAVES_ONLY:isc.Tree.FOLDERS_ONLY)?1:0))}
return _3}else{return 0}},isc.A.$1112=function isc_Tree__getNodeLength(_1){var _2=this.isFolder(_1),_3=_2&&this.isOpen(_1),_4=(this.openDisplayNodeType!=(_2?isc.Tree.LEAVES_ONLY:isc.Tree.FOLDERS_ONLY)?1:0);if(_3){var _5=this.getChildren(_1,this.openDisplayNodeType,null,this.sortDirection,this.openListCriteria,this.$45g,false,false,true),_6=(isc.ResultSet!=null?isc.ResultSet.getLoadingMarker():null),i=(isc.ResultSet!=null&&isc.isA.ResultSet(_5)?_5.$121l():_5.getLength());var _8=(isc.ResultTree!=null&&isc.isA.ResultTree(this)&&this.isPaged()),_9=_8;if(_8){var _10=(_1[this.canReturnOpenSubfoldersProperty]!=null?_1[this.canReturnOpenSubfoldersProperty]:this.canReturnOpenFolders),_11=(this.openDisplayNodeType==isc.Tree.FOLDERS_AND_LEAVES?1:0);_9=!(_10||_11==0)}
while(i--){var _12=_5.getCachedRow(i);if(_12!=null&&_12!=_6){_4+=this.$111x(_12,_1)}else if(_9){++_4}}}
return _4},isc.A.$111y=function isc_Tree__getDeltaLength(_1,_2,_3){if(_2!=_3){var _4=!_2,_5=!_3,_6=(-((_4&&this.openDisplayNodeType!=isc.Tree.FOLDERS_ONLY)||(_2&&this.openDisplayNodeType!=isc.Tree.LEAVES_ONLY)?1:0)+((_5&&this.openDisplayNodeType!=isc.Tree.FOLDERS_ONLY)||(_3&&this.openDisplayNodeType!=isc.Tree.LEAVES_ONLY)?1:0));return _6}else{return 0}},isc.A.$111z=function isc_Tree__updateParentLengths(_1,_2){if(_2!=0){for(;;){_1[this.$111w]+=_2;var _3=((_1[this.$1200]||0)>0);if(!(_1==this.root||_3)){var _4=this.getParent(_1);if(this.$1111(_1,_4)){_1=_4;continue}}
break}}});isc.B._maxIndex=isc.C+128;isc.A=isc.Tree;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.findChildrenProperty=function isc_c_Tree_findChildrenProperty(_1,_2){if(!isc.isAn.Object(_1))return;if(!_2)_2="any";var _3=(_2=="any"),_4=(_2=="object"),_5=(_2=="array"),_6=(_2=="objectArray");for(var _7 in _1){var _8=_1[_7];if(isc.isAn.Object(_8)){if(_3)return _7;if(isc.isAn.Array(_8)){if(isc.isAn.Object(_8[0]))return _7;if(!_4&&!_6)return _7}else{if(_4)return _7}}}},isc.A.discoverTree=function isc_c_Tree_discoverTree(_1,_2,_3){if(!_2)_2={};var _4=_2.childrenMode||"any";var _5=_2.scanMode||"branch";var _6=_2.tieMode||"node";var _7=_2.newChildrenProperty||isc.Tree.getInstanceProperty("childrenProperty"),_8=_2.typeProperty||"nodeType",_9=_2.nameProperty||"name";if(!isc.isAn.Array(_1))_1=[_1];var _10;if(_5=="level"||_5=="branch"){var _11={};for(var i=0;i<_1.length;i++){var _13=_1[i],_14=null;if(_13.$72r)continue;_14=this.findChildrenProperty(_13,_4);if(_14==null)continue;_11[_14]=(_11[_14]||0);_11[_14]++}
var _15=isc.getValues(_11),_16=isc.getKeys(_11);if(_16.length==0){return}else if(_16.length==1){_10=_16[0]}else if(_6=="node"){}else if(_6=="stop"){return}else{var _17=_15.max(),_18=_15.indexOf(_17);_10=_16[_18]}}
var _19=[];for(var i=0;i<_1.length;i++){var _13=_1[i];var _20=_10;if(_13.$72r)continue;if(!_20){_20=this.findChildrenProperty(_13,_4)}
if(_20==null)continue;var _21=_13[_20];if(_21!=null&&!isc.isAn.Array(_21))_21=[_21];else if(_21==null)_21=[];_13[_7]=_21;for(var j=0;j<_21.length;j++){var _23=_21[j];if(isc.isA.String(_23)){_21[j]=_23={name:_23,$72r:true}}
_23[_8]=_20}
if(_5=="level"){_19.addAll(_21)}else{this.discoverTree(_21,_2,_20)}}
if(_5=="level"&&_19.length>0)this.discoverTree(_19,_2)},isc.A.getCleanNodeData=function isc_c_Tree_getCleanNodeData(_1,_2,_3,_4,_5){if(_1==null)return null;var _6=[],_7=false;if(!isc.isAn.Array(_1)){_1=[_1];_7=true}
for(var i=0;i<_1.length;i++){var _9=_1[i],_10={};if(_5==null){var _11=_9.$42c;if(_11)_5=window[_11]}
for(var _12 in _9){if((_5!=null&&_12==_5.parentProperty)||(!_4&&_12=="$27g")||_12=="$42c"||_12=="__ref"||_12=="__module"||_12.startsWith("_isOpen_")||_12.startsWith("_isFolder_")||_12.startsWith("$399")||_12=="$40a"||_12=="_autoAssignedName"||_12.startsWith("_selection_")||(_2==false&&_5&&_12==_5.childrenProperty)||_12.startsWith("_cachedLength_")||_12.startsWith("_recursionCount_")||_12.startsWith("_visibleDescendantsCached_"))
{continue}
_10[_12]=_9[_12];if(_3&&_5&&_12==_5.childrenProperty&&isc.isAn.Array(_10[_12]))
{_10[_12]=isc.Tree.getCleanNodeData(_10[_12],_2,_3,_4,_5)}}
_6.add(_10)}
if(_7)return _6[0];return _6});isc.B._maxIndex=isc.C+3;isc.ClassFactory.defineClass("Selection");isc.A=isc.Selection.getPrototype();isc.A.enabledProperty="enabled";isc.A.canSelectProperty="canSelect";isc.A.cascadeSelection=false;isc.A.$q7=true;isc.A=isc.Selection;isc.A.NONE="none";isc.A.SINGLE="single";isc.A.MULTIPLE="multiple";isc.A.SIMPLE="simple";isc.A.$24e=0;isc.A=isc.Selection.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.accessResultSetCache=true;isc.A.$74f="up";isc.A.$74g="down";isc.A.selectionRangeNotLoadedMessage="Can't select that many records at once.<br><br>Please try working in smaller batches.";isc.B.push(isc.A.init=function isc_Selection_init(){if(!this.selectionProperty)this.selectionProperty="_selection_"+isc.Selection.$24e++;this.partialSelectionProperty="$74h"+this.selectionProperty;this.setData((this.data?this.data:[]))},isc.A.destroy=function isc_Selection_destroy(){if(this.data)this.ignoreData(this.data);delete this.data;this.Super("destroy",arguments)},isc.A.setData=function isc_Selection_setData(_1){if(this.data!=null)this.ignoreData(this.data);this.data=_1;if(this.data!=null)this.observeData(this.data);this.markForRedraw()},isc.A.observeData=function isc_Selection_observeData(_1){var _2=isc.ResultSet&&isc.isA.ResultSet(_1);if(_2){this.observe(_1,"dataChanged",function(_3,_4,_5,_6,_7,_8){this.dataChanged(_3,_4,_5,_6,_7,_8)})}else{this.observe(_1,"dataChanged",function(){this.dataChanged()})}
if(_1.dataArrived){if(_2){this.observe(_1,"dataArrived",function(_3,_4,_5){this.dataArrived(_3,_4,_5)})}else{this.observe(_1,"dataArrived",function(){this.dataChanged()})}}},isc.A.ignoreData=function isc_Selection_ignoreData(_1){if(!_1)return;if(this.isObserving(_1,"dataChanged"))this.ignore(_1,"dataChanged");if(this.isObserving(_1,"dataArrived"))this.ignore(_1,"dataArrived")},isc.A.dataArrived=function isc_Selection_dataArrived(_1,_2,_3){if(!this.data)return;this.dataChanged(null,null,null,null,null,_3);if(this.data.$52z()){this.$143v=true}},isc.A.dataChanged=function isc_Selection_dataChanged(_1,_2,_3,_4,_5,_6){if(this.$143v){delete this.$143v;return}
if(this.reselectOnUpdate&&_1=="update"&&_2!=null&&_2[this.selectionProperty])
{if(_3!=-1){var _7=this.data.get(_3);this.performReselectOnUpdate(_7)}}else if(_6){if(this.$q7)this.cacheSelection();var _8=this.$27q,_9=[],_10=this.getItemList(),_11=_10.getLength();if(_8==null||isc.isA.ResultSet!=null&&isc.isA.ResultSet(_10)&&!_10.lengthIsKnown()){}else{for(var i=0;i<_11;i++){var _13=_10.getCachedRow(i),_14=_13==null?false:!!_13[this.selectionProperty];var _15;if(_14){_15=_8.contains(_13);if(_15){_9.add(_13)}else{_13[this.selectionProperty]=false}}}}}
this.markForRedraw()},isc.A.performReselectOnUpdate=function isc_Selection_performReselectOnUpdate(_1){this.select(_1)},isc.A.markForRedraw=function isc_Selection_markForRedraw(){this.$q7=true},isc.A.isSelected=function isc_Selection_isSelected(_1){if(this.$q7){this.cacheSelection()}
if(_1==null)return false;return!!_1[this.selectionProperty]},isc.A.isPartiallySelected=function isc_Selection_isPartiallySelected(_1){if(this.$q7)this.cacheSelection();if(_1==null)return false;return!!_1[this.partialSelectionProperty]},isc.A.anySelected=function isc_Selection_anySelected(){return this.$72c().length>0},isc.A.getLength=function isc_Selection_getLength(){return this.$72c().length},isc.A.multipleSelected=function isc_Selection_multipleSelected(){return this.$72c().length>1},isc.A.getSelection=function isc_Selection_getSelection(_1){var _2=this.$72c(_1);return _2==null?null:_2.duplicate()},isc.A.$72c=function isc_Selection__getSelection(_1){if(this.$q7){if(this.$89z)this.$89z=false;this.cacheSelection()}
var _2=this.$27q;if(_1==true&&_2!=null&&_2.length>0){var _3=this.$27q;_2=[];for(var i=0;i<_3.length;i++){var _5=_3[i];if(!this.isPartiallySelected(_5)){_2[_2.length]=_5}}}
return _2},isc.A.getSelectedRecord=function isc_Selection_getSelectedRecord(){var _1=this.$72c();if(_1&&_1.length>0)return _1[0]},isc.A.cacheSelection=function isc_Selection_cacheSelection(_1){if(this.$89z||this.$890||this.$134v){return}
this.$27q=[];var _2=this.getItemList();var _3=false;if(this.accessResultSetCache&&isc.isA.ResultSet(_2)){_3=true;_2=_2.localData||[]}
var _4=!isc.isAn.Array(_2),_5=_2.getLength();if(isc.isA.ResultSet!=null&&isc.isA.ResultSet(_2)&&!_2.lengthIsKnown()){this.$q7=false;return}
this.$89z=true;if(this.cascadeSelection){var _6=false;for(var i=0;i<_5;i++){var _8=_4?_2.getCachedRow(i):_2[i];if(_8!=null&&_8!==Array.LOADING&&this.isSelected(_8)){if(!this.isPartiallySelected(_8)){this.setSelected(_8,true,null,true);_6=true}
if(!_6){this.$27q[this.$27q.length]=_8}}}
if(_6){this.$27q=[];for(var i=0;i<_5;i++){var _8=_4?_2.getCachedRow(i):_2[i];if(_8!=null&&_8!==Array.LOADING&&this.isSelected(_8)){this.$27q[this.$27q.length]=_8}}}}else{if(_3){for(var i=0;i<_5;i++){var _8=_2[i];if(_8!=null&&_8!==Array.LOADING&&this.isSelected(_8)){this.$27q[this.$27q.length]=_8}}}else{for(var i=0;i<_5;i++){var _8=_4?_2.getCachedRow(i):_2[i];if(_8!=null&&this.isSelected(_8)){this.$27q[this.$27q.length]=_8}}}}
this.$89z=false;this.$q7=false},isc.A.$110t=function isc_Selection__cacheSelectionAsync(_1,_2,_3,_4,_5){if(_5==null||_5.afterGetItemList){if(_5==null){if(this.$89z||this.$890||this.$134v){_4.call(_1);return}
var _6=this;this.$110u(_1,_2,_3,function(_8){var _5={data:_8,afterGetItemList:true};_1[_2]=_6.delayCall("$110t",[_1,_2,_3,_4,_5],0)});return}
_5.afterGetItemList=false;_5.cache=[];_5.length=_5.data.getLength();if(isc.isA.ResultSet!=null&&isc.isA.ResultSet(_5.data)&&!_5.data.lengthIsKnown()){this.$q7=false;this.$27q=_7;_4.call(_1);return}
this.$89z=true;_5.inFirstLoop=true;_5.delayCache=false;_5.i=0}
var _7=_5.cache,_8=_5.data,_9=_5.length,_10=_5.inFirstLoop,_11=_5.delayCache,i=_5.i,_13=this.$q7;this.$q7=false;if(_10){var _14=Math.min(_9,i+_3);for(;i<_14;i=_5.i=i+1){var _15=_8.getCachedRow(i);if(_15!=null&&this.isSelected(_15)){if(this.cascadeSelection&&!this.isPartiallySelected(_15)){this.setSelected(_15,true,null,true);_11=_5.delayCache=true}
if(!_11){_7[_7.length]=_15}}}
if(i!=_9){this.$q7=_13;this.$89z=false;_1[_2]=this.delayCall("$110t",[_1,_2,_3,_4,_5],0);return}
_10=_5.inFirstLoop=false}
if(!_10&&_11){_7=_5.cache=[];i=_5.i=0;var _14=Math.min(_9,i+_3);for(;i<_9;i=_5.i=i+1){var _15=_8.getCachedRow(i);if(_15!=null&&this.isSelected(_15)){_7[_7.length]=_15}}
if(i!=_9){this.$q7=_13;this.$89z=false;_1[_2]=this.delayCall("$110t",[_1,_2,_3,_4,_5],0);return}}
this.$89z=false;this.$q7=false;this.$27q=_7;_4.call(_1);return},isc.A.setSelected=function isc_Selection_setSelected(_1,_2,_3,_4){if(this.data==null||this.data.destroyed){return false}
if(!this.$1462(_1))return false;var _5=this.$890;this.$890=true;var _6=this.selectionProperty,_7=this.partialSelectionProperty,_8=this.data.childrenProperty||"children",_9=false;var _10=(_9?_1.getAttribute(_7):_1[_7]);if(_2==null)_2=true;if(this.cascadeSelection&&!this.useRemoteSelection){if(_3==this.$74f){var _11=false,_12=_1[_8]?_1[_8].length:0;for(var i=0;i<_12;i++){var _14=_1[_8].get(i),_15=false;var _16=(_15?_14.getAttribute(_7):_14[_7]);if(_16||(_2&&!this.isSelected(_14))||(!_2&&this.isSelected(_14)))
{_11=true;break}}
if(_9){_1.setAttribute(_7,_11+"")}else{_1[_7]=_11}
if(_2!=_11)_2=true}else if(_1[_8]&&_1[_8].length>0){if(_9){_1.removeAttribute(_7)}else{delete _1[_7]}}}
var _17=_9?_1.getAttribute(_6):_1[_6];if(_17==null)_17=false;if(_9){_1.setAttribute(_6,(_2==true)+"")}else{_1[_6]=_2}
this.lastSelectionItem=_1;this.lastSelectionState=_2;this.lastSelectionPreviousState=_17;this.lastSelectionPartialValue=_11;this.lastSelectionPreviousPartialValue=_10;var _18=(_9?_1.getAttribute(_7):_1[_7]);var _19=true;if(_2==_17&&_18==_10){_19=false}
if(!_4&&_19==false){if(!_5)this.$890=false;return false}
this.markForRedraw();if(this.cascadeSelection&&!this.useRemoteSelection)
{var _20=_1,_21=_2,_22=_17,_23=_11,_24=_10;var _25=false;if(this.cascadeSyncOnly==null){_25=true;this.cascadeSyncOnly=!_19}
if(_3!=this.$74f&&!_9&&_1[_8]&&_1[_8].length>0)
{this.selectList(_1[_8],_2,this.$74g)}
if(_19||_25){if(_3!=this.$74g&&isc.isA.Tree(this.data)){var _26=this.data.getParent(_1);if(_26){this.setSelected(_26,_2,this.$74f)}}}
this.lastSelectionItem=_20;this.lastSelectionState=_21;this.lastSelectionPreviousState=_22;this.lastSelectionPartialValue=_23;this.lastSelectionPreviousPartialValue=_24;if(_25){this.cascadeSyncOnly=null}}
if(!_5)this.$890=false;if(_19&&this.target&&this.target.selectionChange){this.target.selectionChange(_1,_2)}
return true},isc.A.$1462=function isc_Selection__canSelectItem(_1){if(_1==null){return false}
if(_1[this.enabledProperty]==false)return false;if(_1[this.canSelectProperty]==false)return false;return true},isc.A.select=function isc_Selection_select(_1){return this.setSelected(_1,true)},isc.A.deselect=function isc_Selection_deselect(_1){return this.setSelected(_1,false)},isc.A.selectSingle=function isc_Selection_selectSingle(_1){var _2,_3;_2=this.deselect(_1);_3=this.deselectAll();this.select(_1);return!_2||_3},isc.A.selectList=function isc_Selection_selectList(_1,_2){if(_2==null)_2=true;if(!_1)return false;if(this.$q7||!this.$27q)this.cacheSelection();var _3=this.$27q;var _4=_1.getLength(),_5=[];var _6=this.getItemList();var _7=false;if(this.accessResultSetCache&&isc.isA.ResultSet(_6)){_7=true;_6=_6.localData||[]}
for(var i=0;i<_4;i++){var _9=_1.get(i),_10=this.isSelected(_9);if(_10==_2)continue;if(_6.indexOf(_9)==-1){continue}
if(this.$1462(_9))_5[_5.length]=_9}
var _11=this.$134v;this.$134v=true;var _12=this.$915;this.$915=true;var _13=false,_4=_5.length;for(var i=0;i<_4;i++){var _9=_5[i];if(_2){_3[_3.length]=_9}else{var _14=_3.indexOf(_9);_3.removeAt(_14)}
_13=this.setSelected(_9,_2)||_13}
this.$134v=_11;if(this.cascadeSelection){this.cacheSelection()}else{this.$q7=false}
this.$915=_12;return _13},isc.A.deselectList=function isc_Selection_deselectList(_1){return this.selectList(_1,false)},isc.A.selectAll=function isc_Selection_selectAll(_1){if(_1)return this.selectRange(0,this.data.getLength());else return this.selectList(this.getItemList())},isc.A.deselectAll=function isc_Selection_deselectAll(){return this.deselectList(this.$72c())},isc.A.selectItem=function isc_Selection_selectItem(_1){return this.selectRange(_1,_1+1)},isc.A.deselectItem=function isc_Selection_deselectItem(_1){return this.deselectRange(_1,_1+1)},isc.A.selectRange=function isc_Selection_selectRange(_1,_2,_3){if(_3==null)_3=true;var _4=this.data;if(isc.isA.ResultSet!=null&&isc.isA.ResultSet(_4)&&!_4.rangeIsLoaded(_1,_2))
{this.warnSelectionRangeNotLoaded();return false}
return this.selectList(_4.getRange(_1,_2),_3)},isc.A.warnSelectionRangeNotLoaded=function isc_Selection_warnSelectionRangeNotLoaded(){this.logWarn("selectRange called - selection range not loaded. Showing selectionRangeNotLoadedMessage to the user.");isc.warn(this.selectionRangeNotLoadedMessage)},isc.A.deselectRange=function isc_Selection_deselectRange(_1,_2){return this.selectRange(_1,_2,false)},isc.A.selectOnMouseDown=function isc_Selection_selectOnMouseDown(_1,_2){var _3=_1.selectionType||isc.Selection.MULTIPLE;if(_3==isc.Selection.NONE)return false;this.startRow=this.lastRow=_2;this.logDebug("selectOnMouseDown: recordNum: "+_2);var _4=this.data.get(_2),_5=this.isSelected(_4),_6=this.$72c();if(Array.isLoading(_4))return false;this.deselectRecordOnMouseUp=false;this.deselectOthersOnMouseUp=false;var _7=(isc.Browser.isMac?isc.EventHandler.metaKeyDown():isc.EventHandler.ctrlKeyDown()),_8=isc.EH.shiftKeyDown();if(_3==isc.Selection.SINGLE){if(_7&&_5)this.deselect(_4);else if(!_5)this.selectSingle(_4);else return false;return true}else if(_8){if(_6.length==0){this.select(_4);return true}else{var _9=this.data,_10=_9.indexOf(_6[0]),_11=_9.indexOf(_6.last());if(_2>=_11){this.selectRange(_10,_2+1)}else if(_2<=_10){this.selectRange(_2,_11+1)}else{this.selectRange(_10,_2+1);this.deselectRange(_2+1,_11+1)}
return true}}else if(_3==isc.Selection.SIMPLE){if(!_5){this.select(_4);return true}else{this.deselectRecordOnMouseUp=true;return false}}else if(_7){this.setSelected(_4,!_5);return true}else{if(!_5){this.selectSingle(_4);return true}else if(isc.EventHandler.rightButtonDown()){this.deselectOnDragMove=true;return false}else{if(this.dragSelection){if(this.simpleDeselect){this.deselectAll();this.selectOriginOnDragMove=true;return true}
this.selectSingle(_4);return true}else{if(this.simpleDeselect){this.deselectAllOnMouseUp=true}else{this.deselectOthersOnMouseUp=(_6.length>1)}
return false}}}},isc.A.selectOnDragMove=function isc_Selection_selectOnDragMove(_1,_2){var _3=this.startRow,_4=this.lastRow;if(_2<0){this.logWarn("selectOnDragMove: got negative coordinate: "+_2);return}
if(_2==_4)return;if(this.selectOriginOnDragMove){this.select(this.data.getItem(_3));this.selectOriginOnDragMove=false}else if(this.deselectOnDragMove||this.deselectAllOnMouseUp||this.deselectOthersOnMouseUp){this.selectSingle(this.data.getItem(_3));this.deselectAllOnMouseUp=this.deselectOthersOnMouseUp=this.deselectOnDragMove=false}
if((_2>_3&&_3>_4)||(_4>_3&&_3>_2))
{this.deselectAll();if(_3>_2){this.selectRange(_2,_3+1)}else{this.selectRange(_3,_2+1)}}else if(_3>=_4&&_4>_2){this.selectRange(_2,_4)}else if(_3>=_2&&_2>_4){this.deselectRange(_4,_2)}else if(_3<=_2&&_2<_4){this.deselectRange(_2+1,_4+1)}else if(_3<=_4&&_4<_2){this.selectRange(_4,_2+1)}else{this.logWarn("dragMove case not handled: lastRow: "+_4+", currRow: "+_2+", startRow "+_3)}
this.lastRow=_2},isc.A.selectOnMouseUp=function isc_Selection_selectOnMouseUp(_1,_2){if(_1.selectionType==isc.Selection.NONE)return false;this.logDebug("selectOnMouseUp: recordNum: "+_2);var _3=false;if(this.deselectOthersOnMouseUp){_3=this.selectSingle(this.data.getItem(_2));this.deselectOthersOnMouseUp=false}else if(this.deselectRecordOnMouseUp){_3=this.deselect(this.data.getItem(_2));this.deselectRecordOnMouseUp=false}else if(this.deselectAllOnMouseUp){_3=this.deselectAll();this.deselectAllOnMouseUp=false}
return _3},isc.A.getItemList=function isc_Selection_getItemList(){if(this.data&&isc.isA.Tree(this.data))return this.data.getNodeList();return(this.data?this.data:[])},isc.A.$110u=function isc_Selection__getItemListAsync(_1,_2,_3,_4){if(this.data&&isc.isA.Tree(this.data)&&isc.isA.Function(this.data.$110q)){this.data.$110q(_1,_2,_3,_4)}else{_4.call(_1,this.getItemList())}});isc.B._maxIndex=isc.C+38;isc.ClassFactory.defineClass("DetailViewer","Canvas","DataBoundComponent");isc.A=isc.DetailViewer.getPrototype();isc.A.dataFetchMode="basic";isc.A.dataArity="either";isc.A.fieldIdProperty="name";isc.A.recordsPerBlock=1;isc.A.blockSeparator="<br><br>";isc.A.showEmptyField=true;isc.A.emptyCellValue="&nbsp;";isc.A.labelPrefix="";isc.A.labelSuffix=":";isc.A.valueAlign="left";isc.A.wrapValues=true;isc.A.useInnerWidth=true;isc.A.clipValues=false;isc.A.styleName="detailViewer";isc.A.blockStyle="detailBlock";isc.A.labelStyle="detailLabel";isc.A.cellStyle="detail";isc.A.headerStyle="detailHeader";isc.A.separatorStyle="detail";isc.A.cellPadding=3;isc.A.linkTextProperty="linkText";isc.A.showEmptyMessage=true;isc.A.emptyMessage="No items to display.";isc.A.emptyMessageStyle="normal";isc.A.loadingMessage="&nbsp;${loadingImage}";isc.A.loadingMessageStyle="normal";isc.A.defaultHeight=35;isc.A.showLabel=true;isc.A=isc.DetailViewer.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$g4="date";isc.A.fieldPickerWindowDefaults={autoParent:"none",_constructor:"FieldPickerWindow"};isc.A.canPickFields=false;isc.A.configureFieldsText="Configure Fields...";isc.A.fieldPickerFieldProperties=null;isc.B.push(isc.A.initWidget=function isc_DetailViewer_initWidget(){this.Super("initWidget",arguments);if(this.fieldState!=null)this.setFieldState(this.fieldState);else this.setFields(this.fields);if(this.canPickFields){this.contextMenu=isc.Menu.create({data:[this.createFieldPickerWindowMenuItem(this.configureFieldsText)]})}},isc.A.setData=function isc_DetailViewer_setData(_1){if(this.data)this.ignore(this.data,"dataChanged");this.invalidateUserCache();this.data=_1;if(this.data&&this.data.dataChanged){this.observe(this.data,"dataChanged","observer.dataChanged()")}
this.markForRedraw("new data")},isc.A.dataChanged=function isc_DetailViewer_dataChanged(){this.setFields(this.completeFields);this.invalidateUserCache();this.applyHilites();this.markForRedraw()},isc.A.getData=function isc_DetailViewer_getData(){return this.data},isc.A.getFields=function isc_DetailViewer_getFields(){return this.fields},isc.A.getInnerHTML=function isc_DetailViewer_getInnerHTML(){var _1=this.getData();if(this.fields==null||this.fields.length==0){return"Note: you must define detailViewer.fields to specify what to display!"}
if(isc.ResultSet!=null&&isc.isA.ResultSet(_1)&&!_1.lengthIsKnown()){_1.get(0);return this.loadingMessageHTML()}
if(_1==null||(_1.getLength&&_1.getLength()==0)){return this.emptyMessageHTML()}
if(!isc.isA.List(_1))_1=[_1];if(Array.isLoading(_1.get(0))&&this.isOffline()){return this.emptyMessageHTML()}
if(_1.getLength()==1||this.recordsPerBlock=="*"){return this.getBlockHTML(_1)}else{var _2=isc.StringBuffer.newInstance();for(var _3=0;_3<_1.getLength();_3+=this.recordsPerBlock){_2.append(this.getBlockHTML(_1.getRange(_3,_3+this.recordsPerBlock)),this.blockSeparator)}
return _2.toString()}},isc.A.getBlockHTML=function isc_DetailViewer_getBlockHTML(_1){if(_1.getLength==null){var _2=[];for(var i=0;i<_1.length;i++){_2[i]=_1[i]}
_1=_2}
var _4=_1.getLength();var _5="<TABLE BORDER=0 CELLSPACING=0 CLASS='"+this.blockStyle+"' CELLPADDING='"+this.cellPadding+"' style='width:"+(this.useInnerWidth&&!this.isPrinting?this.getInnerWidth()+"px":"100%")+(this.clipValues?";table-layout:fixed":"")+"'>";var _6=this.fields;for(var _7=0,_8=_6.length;_7<_8;_7++){var _9=_6[_7];if(!_9||_9.hidden||_9.visible==false)continue;if(_9.showIf){if(!isc.isA.Function(_9.showIf)){isc.Func.replaceWithMethod(_9,"showIf","viewer,valueList")}
if(_9.showIf(this,_1)==false)continue}
var _10=_9.type?_9.type:"";if(_10!="separator"&&_10!="header"&&!this.showEmptyField){var _11=true;for(var i=0;i<_1.getLength();i++){var _12=_1.get(i)[_9[this.fieldIdProperty]]
if(!(_12==null||_12=="")){_11=false;break}}
if(_11)continue}
if(_9.output){if(!isc.isA.Function(_9.output)){isc.Func.replaceWithMethod(_9,"output","fieldNum,field,valueList")}
_5+=_9.output(_7,_9,_1)}else{_5+=this.outputItem(_7,_9,_1)}}
_5+="</TABLE>";return _5},isc.A.fieldIsVisible=function isc_DetailViewer_fieldIsVisible(_1){var _2=_1;if(!isc.isAn.Object(_2))_2=this.getSpecifiedField(_1);return this.fields.contains(_2)},isc.A.outputItem=function isc_DetailViewer_outputItem(_1,_2,_3){var _4=(_2.type?_2.type:"value"),_5="output_"+_4,_6="";if(!this[_5])_5="output_value";_6+="<TR"+(this.rowClass!=null?" CLASS='"+this.rowClass+"'":"")+">";_6+=this[_5](_1,_2,_3);_6+="</TR>\r";return _6},isc.A.output_blob=function isc_DetailViewer_output_blob(_1,_2,_3){return this.output_binary(_1,_2,_3)},isc.A.output_upload=function isc_DetailViewer_output_upload(_1,_2,_3){return this.output_binary(_1,_2,_3)},isc.A.output_binary=function isc_DetailViewer_output_binary(_1,_2,_3){var _4="<TD WIDTH=10% CLASS='"+(this.isPrinting?this.printLabelStyle||this.labelStyle:this.labelStyle)+"' ALIGN=RIGHT"+(this.wrapLabel?">":" NOWRAP><NOBR>")+this.labelPrefix+(_2.title?_2.title:_2[this.fieldIdProperty])+this.labelSuffix+"<\/NOBR><\/TD>";for(var i=0;i<_3.getLength();i++){var _6=_3.get(i),_7=this.getData().indexOf(_6),_8=this.dataSource?isc.DS.getDataSource(this.dataSource).getFilenameField(_2.name):_2.name+"_filename",_9=_6[_8],_10="'"+this.getID()+".view",_11="'"+this.getID()+".download",_12="";if(_2&&_2.name){_12="Cell("+_7+", \""+_2.name+"\")'"}else{_12="Row("+_7+")'"}
var _13=isc.Canvas.imgHTML("[SKIN]actions/view.png",16,16,null,"style='cursor:"+isc.Canvas.HAND+"' onclick="+_10+_12);var _13=isc.Canvas.imgHTML("[SKIN]actions/view.png",16,16,null,"style='cursor:"+isc.Canvas.HAND+"' onclick="+_10+_12),_14=isc.Canvas.imgHTML("[SKIN]actions/download.png",16,16,null,"style='cursor:"+isc.Canvas.HAND+"' onclick="+_11+_12),_15=_13+"&nbsp;"+_14+(_9?"&nbsp;"+_9:"");_4+="<TD CLASS='"+this.getCellStyle(_15,_2,_6,this)+"'>"+_15+"<\/TD>"}
return _4},isc.A.viewRow=function isc_DetailViewer_viewRow(_1){isc.DS.get(this.dataSource).viewFile(this.getData().get(_1))},isc.A.downloadRow=function isc_DetailViewer_downloadRow(_1){isc.DS.get(this.dataSource).downloadFile(this.getData().get(_1))},isc.A.viewCell=function isc_DetailViewer_viewCell(_1,_2){isc.DS.get(this.dataSource).viewFile(this.getData().get(_1),_2)},isc.A.downloadCell=function isc_DetailViewer_downloadCell(_1,_2){isc.DS.get(this.dataSource).downloadFile(this.getData().get(_1),_2)},isc.A.output_value=function isc_DetailViewer_output_value(_1,_2,_3){var _4;if(this.showLabel){_4="<TD WIDTH="+(this.labelWidth!=null?this.labelWidth:"10%")+" CLASS='"+(this.isPrinting?this.printLabelStyle||this.labelStyle:this.labelStyle)+"' ALIGN=RIGHT"+(this.wrapLabel?">":" NOWRAP><NOBR>")+this.labelPrefix+(_2.title?_2.title:_2[this.fieldIdProperty])+this.labelSuffix+"<\/NOBR><\/TD>"}else{_4=""}
if(_2.valueMap&&isc.isA.String(_2.valueMap))
_2.valueMap=this.getGlobalReference(_2.valueMap);for(var i=0;i<_3.getLength();i++){var _6=_3.get(i),_7="",_8;if(_2.type=="image"){var _9=isc.Canvas.getFieldImageDimensions(_2,_6);var _10=this.getCellValue(_6,_2),_11=_2.imageURLPrefix||_2.baseURL||_2.imgDir;if(_10==this.$122r(_2)){_8=this.$122r(_2)}else{_8=this.imgHTML(_10,_9.width,_9.height,null,_2.extraStuff,_11,_2.activeAreaHTML)}}else if(_2.type=="link"){var _12=_2.target||"_blank",_13=_2.linkTextProperty||this.linkTextProperty,_14=this.getCellValue(_6,_2),_15=_6[_13]||_2.linkText||_14,_16=_14;if(_16==this.$122r(_2)){_8=this.$122r(_2)}else{if(_2.linkURLPrefix){_16=_2.linkURLPrefix+_16}
if(_2.linkURLSuffix){_16=_16+_2.linkURLSuffix}
if(_12=="javascript"){_16="javascript:void";_7=" onclick=\"if(window."+this.ID+") return "+this.ID+".$30i(event,'"+_2.name+"');\""}
_8=this.linkHTML(_16,_15,_12)}}else{_8=this.getCellValue(_6,_2)}
var _17=this.getRawValue(_6,_2);var _18;if(_2.getCellStyle){_18=_2.getCellStyle(_17,_2,_6,this)}else{_18=(this.getCellStyle(_17,_2,_6,this)||this.cellStyle)}
var _19=" style='";if(this.clipValues)_19+="overflow:hidden;";_19+="text-align:"+this.valueAlign;if(this.getCellCSSText){var _20=this.getCellCSSText(_17,_2,_6,this);if(_20!=null)_19+=isc.semi+_20}
_19+="'";_4+="<TD CLASS='"+_18+"'"+_19+(_2.height?"HEIGHT='"+_2.height+"' ":"")+_7+(this.wrapValues?">":" NOWRAP><NOBR>")+_8+(this.wrapValues?"<\/NOBR>":"")+"<\/TD>"}
return _4},isc.A.$30i=function isc_DetailViewer__linkClicked(_1,_2){var _3=this.fields.find("name",_2)||{},_4=false;if(_1.target=="javascript"||_3.target=="javascript"){_4=true;if(_3.click)_3.click()}
if(_4){if(!isc.Browser.isIE){_1.preventDefault()}
return false}
return true},isc.A.getCellCSSText=function isc_DetailViewer_getCellCSSText(_1,_2,_3,_4){return this.getRecordHiliteCSSText(_3,"",_2,true)},isc.A.getCellStyle=function isc_DetailViewer_getCellStyle(_1,_2,_3,_4){if(_2){if(_2.getCellStyle)return _2.getCellStyle(_1,_2,_3,_4);if(this.isPrinting&&_2.printCellStyle){return _2.printCellStyle}
if(_2.cellStyle){return _2.cellStyle}}
return(this.isPrinting&&this.printCellStyle!=null)?this.printCellStyle:this.cellStyle},isc.A.getSelectedRecord=function isc_DetailViewer_getSelectedRecord(){return this.data.get(0)},isc.A.getCellValue=function isc_DetailViewer_getCellValue(_1,_2){var _3=this.getRawValue(_1,_2);if(isc.isA.String(_2.formatCellValue)){_2.formatCellValue=isc.Func.expressionToFunction("value,record,field,viewer",_2.formatCellValue)}
if(_2.getCellValue!=null){if(isc.isA.String(_2.getCellValue)){_2.getCellValue=isc.Func.expressionToFunction("value,record,field,viewer",_2.getCellValue)}
_3=_2.getCellValue(_3,_1,_2,this);if(_2.formatCellValue)_3=_2.formatCellValue(_3,_1,_2,this)}else{if(_2.valueMap!=null)_3=isc.getValueForKey(_3,_2.valueMap);if(_2.formatCellValue)_3=_2.formatCellValue(_3,_1,_2,this)}
if(_2.formatCellValue==null&&this.formatCellValue){_3=this.formatCellValue(_3,_1,_2)}else{if(_3==null||isc.is.emptyString(_3)){_3=this.$122r(_2)}else{_3=this.$17c(_1,_2,_3);var _4=_2.escapeHTML;if(_4==null)_4=_2.asHTML;if(_4)_3=_3.asHTML()}}
if(_2){if(_2.userFormula)_3=this.getFormulaFieldValue(_2,_1);else if(_2.userSummary)_3=this.getSummaryFieldValue(_2,_1);else if(_2.type=="imageFile"){var _5=this.dataSource?isc.DS.getDataSource(this.dataSource).getFilenameField(_2.name):_2.name+"_filename";if(_1[_5]!=null){if(_2.showFileInline!=false){if(!_1[_2[this.fieldIdProperty]+"$68c"]){var _6=isc.Canvas.getFieldImageDimensions(_2,_1),_7=this.getDataSource().streamFile(_1,_2[this.fieldIdProperty]);_3=_1[_2[this.fieldIdProperty]+"$68c"]=this.imgHTML(_7,_6.width,_6.height)}else
_3=_1[_2[this.fieldIdProperty]+"$68c"]}else{_3=this.getViewDownloadHTML(_2,_1)}}}else if(_2.showFileInline==true){this.logWarn("getCellValue(): Unsupported field-type for showFileInline: "+_2.type)}
if(isc.isA.Number(_3)){if(isc.SimpleType.inheritsFrom(_2.type,"float")&&(_2.decimalPrecision!=null||_2.decimalPad!=null))
{_3=isc.Canvas.getFloatValueAsString(_3,_2.decimalPrecision,_2.decimalPad)}else if(_2.precision!=null){_3=isc.Canvas.getNumberValueAsString(_3,_2.precision,_2.type)}}}
var _8=this.getFieldHilites(_1,_2);if(_8!=null){_3=this.applyHiliteHTML(_8,_3);_3=this.applyHiliteIcon(_8,_2,_3)}
return _3},isc.A.getViewDownloadHTML=function isc_DetailViewer_getViewDownloadHTML(_1,_2){if(_2==null)return null;var _3=this.dataSource?isc.DS.getDataSource(this.dataSource).getFilenameField(_1.name):_1.name+"_filename",_4=_2[_3];if(!_1.filenameSuppressed&&(_4==null||isc.isA.emptyString(_4))){return"&nbsp;"}
var _5=isc.Canvas.imgHTML("[SKIN]actions/view.png",16,16,null,"style='cursor:"+isc.Canvas.HAND+"' onclick='"+this.getID()+".viewFile("+_2+","+_1+")'");var _6=isc.Canvas.imgHTML("[SKIN]actions/download.png",16,16,null,"style='cursor:"+isc.Canvas.HAND+"' onclick='alert('running');"+this.getID()+".downloadFile("+_2+","+_1+")'");return"<nobr>"+_5+"&nbsp;"+_6+"&nbsp;"+_4+"</nobr>"},isc.A.viewFile=function isc_DetailViewer_viewFile(_1,_2){isc.DS.get(this.dataSource).viewFile(_1,_2.name)},isc.A.downloadFile=function isc_DetailViewer_downloadFile(_1,_2){isc.DS.get(this.dataSource).downloadFile(_1,_2.name)},isc.A.$17c=function isc_DetailViewer__formatDataType(_1,_2,_3,_4){if(!_4&&_2&&_2.multiple&&isc.isA.Array(_3)){var _5=[];for(var i=0;i<_3.length;i++){_5[i]=this.$17c(_1,_2,_3[i],true)}
return _5.join(_2.multipleValueSeparator||", ")}
if(_2&&(isc.isA.Number(_3)||isc.isA.Date(_3))&&_2.format){return isc.isA.Number(_3)?isc.NumberUtil.format(_3,_2.format):isc.DateUtil.format(_3,_2.format)}
if(isc.isA.Date(_3)){if(this.$851(_2)){var _7=isc.SimpleType.inheritsFrom(_2.type,"time");_3=isc.Time.toTime(_3,this.$30o(_2),_7)}else{if(isc.SimpleType.inheritsFrom(_2.type,"date")&&!isc.SimpleType.inheritsFrom(_2.type,"datetime"))
{_3=_3.toShortDate(this.$45i(_2),false)}else{_3=_3.toNormalDate(this.$45i(_2))}}}
if(_2.$64!=null){_3=_2.$62.normalDisplayFormatter(_3,_2,this,_1)}
return isc.iscToLocaleString(_3)},isc.A.$851=function isc_DetailViewer__formatAsTime(_1){if(_1==null)return false;if(_1.dateFormatter==null&&_1.timeFormatter!=null)return true;if(_1.timeFormatter==null&&_1.dateFormatter!=null)return false;return isc.SimpleType.inheritsFrom(_1.type,"time")},isc.A.$45i=function isc_DetailViewer__getDateFormatter(_1){if(_1.dateFormatter)return _1.dateFormatter;if(_1.displayFormat!=null&&isc.SimpleType.inheritsFrom(_1.type,"date")){return _1.displayFormat}
if(this.datetimeFormatter!=null&&isc.SimpleType.inheritsFrom(_1.type,"datetime")){return this.datetimeFormatter}
return this.dateFormatter},isc.A.$30o=function isc_DetailViewer__getTimeFormatter(_1){if(_1.timeFormatter)return _1.timeFormatter;if(_1.displayFormat!=null&&isc.SimpleType.inheritsFrom(_1.type,"time")){return _1.displayFormat}
return this.timeFormatter},isc.A.getRecordIndex=function isc_DetailViewer_getRecordIndex(_1){var _2=this.Super('getRecordIndex',arguments);if(_2==-1)_2=0;return _2},isc.A.output_header=function isc_DetailViewer_output_header(_1,_2,_3){return"<TD COLSPAN="+(_3.getLength()+1)+" CLASS='"+(this.isPrinting&&this.printHeaderStyle?this.printHeaderStyle:this.headerStyle)+"'>"+_2.value+"</TD>"},isc.A.output_separator=function isc_DetailViewer_output_separator(_1,_2,_3){var _4=(_2.width==null?_2.defaultSeparatorWidth:_2.width),_5=(_2.height==null?_2.defaultSeparatorHeight:_2.height);return"<TD COLSPAN="+(_3.getLength()+1)+" CLASS='"+this.separatorStyle+"'>"+isc.Canvas.spacerHTML(_4,_5)+"</TD>"},isc.A.getEmptyMessage=function isc_DetailViewer_getEmptyMessage(){return this.emptyMessage},isc.A.getLoadingMessage=function isc_DetailViewer_getLoadingMessage(){return this.loadingMessage==null?"&nbsp;":this.loadingMessage.evalDynamicString(this,{loadingImage:this.imgHTML(isc.Canvas.loadingImageSrc,isc.Canvas.loadingImageSize,isc.Canvas.loadingImageSize)})},isc.A.emptyMessageHTML=function isc_DetailViewer_emptyMessageHTML(){if(this.isOffline()){if(!this.showOfflineMessage)return"&nbsp;"}else{if(!this.showEmptyMessage)return"&nbsp;"}
return"<TABLE WIDTH=100%><TR><TD CLASS='"+this.emptyMessageStyle+"' ALIGN=CENTER><BR><BR>"+(this.isOffline()?this.offlineMessage:this.getEmptyMessage())+"<\/TD><\/TR><\/TABLE>"},isc.A.loadingMessageHTML=function isc_DetailViewer_loadingMessageHTML(){return"<TABLE WIDTH=100%><TR><TD CLASS='"+this.loadingMessageStyle+"' ALIGN=CENTER><BR><BR>"+this.getLoadingMessage()+"<\/TD><\/TR><\/TABLE>"},isc.A.setFieldState=function isc_DetailViewer_setFieldState(_1){if(_1==null&&this.fieldState!=null){if(isc.isA.String(this.fieldState)){_1=this.evalViewState(this.fieldState,"fieldState")}}else _1=this.evalViewState(_1,"fieldState");this.completeFields=this.$31y(_1,true);this.setFields(this.completeFields);this.markForRedraw();this.fieldStateChanged()},isc.A.setFields=function isc_DetailViewer_setFields(_1){if(this.completeFields==null||this.fields==null)this.fields=[];this.completeFields=this.bindToDataSource(_1);if(this.completeFields==null)this.completeFields=[];this.deriveVisibleFields();this.invalidateUserCache()},isc.A.deriveVisibleFields=function isc_DetailViewer_deriveVisibleFields(){this.fields.setArray(this.getVisibleFields(this.completeFields))},isc.A.getVisibleFields=function isc_DetailViewer_getVisibleFields(_1){var _2=this.getData(),_3=_1.duplicate();for(var i=0;i<_1.length;i++){var _5=_1.get(i);if(!this.fieldShouldBeVisible(_5,_2)||_5.visible==false)_3.remove(_5)}
return _3},isc.A.fieldShouldBeVisible=function isc_DetailViewer_fieldShouldBeVisible(_1,_2){if(_1.showIf!=null){if(_1.showIf==this.$18r||_1.showIf==this.$301)return false;isc.Func.replaceWithMethod(_1,"showIf","viewer,valueList");if(!_1.showIf(this,_2))return false}
return true},isc.A.getTitleFieldValue=function isc_DetailViewer_getTitleFieldValue(_1){var _2=this.getDataSource().getTitleField(),_3=this.getCellValue(_1,this.getDataSource().getField(_2));return _3},isc.A.getStandaloneFieldValue=function isc_DetailViewer_getStandaloneFieldValue(_1,_2){var _3=this.getField(_2),_4=this.getCellValue(_1,_3);_4=this.addHiliteSpan(_1,_3,_4);return _4},isc.A.hideField=function isc_DetailViewer_hideField(_1){this.toggleField(_1,false)},isc.A.showField=function isc_DetailViewer_showField(_1){this.toggleField(_1,true)},isc.A.toggleField=function isc_DetailViewer_toggleField(_1,_2){var _3=this.getField(_1);_3.showIf=_2?"true":"false";_3.visible=_2;this.setFields(this.getAllFields());this.markForRedraw();this.fieldStateChanged()},isc.A.getField=function isc_DetailViewer_getField(_1){var _2=this.getAllFields(),_3=this.fields,_4;if(isc.isAn.Object(_1)&&_1[this.fieldIdProperty]!=null){_4=_2.find(this.fieldIdProperty,_1[this.fieldIdProperty])||_3.find(this.fieldIdProperty,_1[this.fieldIdProperty])}else if(isc.isA.Number(_1)){_4=_2[_1]||_3[_1]}else{_4=_2.find(this.fieldIdProperty,_1)||_3.find(this.fieldIdProperty,_1)}
return _4},isc.A.getFormattedValue=function isc_DetailViewer_getFormattedValue(_1,_2,_3){return this.getCellValue(_1,this.getSpecifiedField(_2))},isc.A.getPivotedExportData=function isc_DetailViewer_getPivotedExportData(_1){var _2=[],_3=this.getAllFields(),_4=this.data,_5,_6,_7;if(isc.isA.Object(_1)){_5=_1.includeHiddenFields;_6=_1.allowedProperties;_7=_1.alwaysExportExpandedStyles}
if(isc.isA.ResultSet(_4))_4=_4.getAllLoadedRows();if(!isc.isA.Array(_4))_4=[_4];for(var _8=0;_8<_3.length;_8++){var _9=_3[_8],_10={},_11=this.recordsPerBlock;_10.title=_9.title||_9.name;if(isc.isA.String(_10.title))_10.title=this.htmlUnescapeExportFieldTitle(_10.title);if(_11==null)_11=1;if(_11=="*")_11=100000;if((!this.fields.contains(_9))&&!_5)continue;for(var _12=0;_12<_11&&_12<_4.getLength();_12++)
{var _13=_4[_12],_14=this.getFieldNum(_9.name),_15="value"+(_12+1),_16=_15+"$style";var _17=this.getExportFieldValue(_13,_9.name,_14);if(!(_17==null||_17=="&nbsp;"))_10[_15]=_17;this.addDetailedExportFieldValue(_10,_16,_13,_9,_14,_6,_7);if(_10[_16]==null||_10[_16]=="&nbsp;")
delete _10[_16]}
_2.push(_10)}
return _2},isc.A.getViewState=function isc_DetailViewer_getViewState(_1){var _2={field:this.getFieldState(),sort:this.getSortState(),hilite:this.getHiliteState()};if(_1)return _2;return"("+isc.Comm.serialize(_2,false)+")"},isc.A.setViewState=function isc_DetailViewer_setViewState(_1){_1=this.evalViewState(_1,"viewState")
if(!_1)return;if(_1.field)this.setFieldState(_1.field);this.setSortState(_1.sort);this.setHiliteState(_1.hilite)});isc.B._maxIndex=isc.C+51;isc.DetailViewer.registerStringMethods({getCellValue:"record,field",getCellStyle:"value,field,record,viewer",getCellCSSText:"value,field,record,viewer",formatCellValue:"value,record,field,viewer",fieldStateChanged:""});isc.ClassFactory.defineClass("GridRenderer","Canvas");isc.A=isc.GridRenderer;isc.A.SELECTED="Selected";isc.A.DISABLED="Disabled";isc.A.OVER="Over";isc.A.standardStyleSuffixes=["","Over","Selected","SelectedOver","Disabled","DisabledOver","DisabledSelected","DisabledSelectedOver","Dark","OverDark","SelectedDark","SelectedOverDark","DisabledDark"];isc.A=isc.GridRenderer.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.showFocusOutline=false;isc.A.totalRows=0;isc.A.drawAllMaxCells=250;isc.A.recordCanSelectProperty="canSelect";isc.A.isSeparatorProperty="isSeparator";isc.A.singleCellValueProperty="singleCellValue";isc.A.instantScrollTrackRedraw=true;isc.A.scrollRedrawDelay=75;isc.A.drawAheadRatio=1.3;isc.A.quickDrawAheadRatio=1.0;isc.A.cellHeight=20;isc.A.fixedRowHeights=true;isc.A.fixedColumnWidths=true;isc.A.cellSpacing=0;isc.A.cellPadding=2;isc.A.canSelectOnRightMouse=true;isc.A.hoverByCell=true;isc.A.backgroundColor="white";isc.A.tableStyle="listTable";isc.A.baseStyle="cell";isc.A.alternateRowFrequency=1;isc.A.alternateColumnFrequency=1;isc.A.emptyCellValue="&nbsp;";isc.A.emptyMessage="No data to display";isc.A.offlineMessage="No data available while offline";isc.A.fastCellUpdates=true;isc.A.overflow="auto";isc.A.$r9=true;isc.A.canFocus=true;isc.A.animateRowsMaxTime=1000;isc.A.snapToCells=false;isc.A.snapInsideBorder=false;isc.A.snapHDirection=isc.Canvas.BEFORE;isc.A.snapVDirection=isc.Canvas.BEFORE;isc.B.push(isc.A.shouldEnforceVClipping=function isc_GridRenderer_shouldEnforceVClipping(){return this.fixedRowHeights&&(this.enforceVClipping||this.wrapCells)},isc.A.setFastCellUpdates=function isc_GridRenderer_setFastCellUpdates(_1){if(_1&&!isc.Browser.isIE){this.fastCellUpdates=false;return}
if(_1==this.fastCellUpdates)return;this.fastCellUpdates=_1;this.markForRedraw()});isc.B._maxIndex=isc.C+2;isc.A=isc.GridRenderer.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.removeColumnSizerDelay=100;isc.A.$57k=["<DIV style='"+(isc.Browser.isMoz&&isc.Browser.version==18?"display:inline;":"")+"position:"+(isc.Page.isRTL()?"inline":"relative")+";z-index:",,,"'>","</DIV>"];isc.A.$623="<table style='position:absolute;top:0px;font-size:1px;height:100%;width:100%;z-index:1;overflow:hidden;visibility:hidden;'><tr><td>&nbsp;</td></tr></table>";isc.A.maxAnimateSlideInRows=100;isc.A.$27r="none";isc.A.screenReader_suppressHandleFocus=true;isc.A.allowRowSpanning=true;isc.A.closeNOBRs=false;isc.A.$77c={};isc.A.$27s="<DIV role='presentation' cellClipDiv=true style='overflow:hidden;"+isc.Browser.$114w+":ellipsis;";isc.A.$80q="<div>";isc.A.$80r="</div>";isc.A.$131s=[,"<div style='height:",,,,,,"px;line-height:0px'>&nbsp;</div>"];isc.A.$57l="within";isc.A.$57m="expand";isc.A.$14k="cell";isc.A.alignSnapToMap={left:{top:"TL",center:"L",bottom:"BL"},right:{top:"TR",center:"R",bottom:"BR"},center:{top:"T",center:"C",bottom:"B"}};isc.A.recordCustomStyleProperty="customStyle";isc.A.showSelectedStyle=true;isc.A.$27t="NOBR";isc.A.$27u="cellClipDiv";isc.A.$o5="height";isc.A.$27v="minHeight";isc.A.$39=";";isc.A.$721="padding-top:0px;padding-bottom:0px;";isc.A.$722="overflow:hidden;";isc.A.avgRowHeight=60;isc.B.push(isc.A.initWidget=function isc_GridRenderer_initWidget(){if(!this.$26a)this.setColumnWidths([]);if(this.selection)this.setSelection(this.selection);if(this.overflow==isc.Canvas.VISIBLE){this.showAllRows=true}
if(!this.fixedRowHeights&&this.virtualScrolling==null)this.virtualScrolling=true;if(!this.fixedRowHeights&&!this.showAllRows){if(this.showCustomScrollbars==false){this.logInfo("Variable height records cannot be used with native scrollbars; setting showCustomScrollbars:true on this GridRenderer and using the special 'NativeScrollbar' class as a scrollbarConstructor.");this.showCustomScrollbars=true;this.scrollbarConstructor="NativeScrollbar"}}
this.setFastCellUpdates(this.fastCellUpdates)},isc.A.removeColumnSizer=function isc_GridRenderer_removeColumnSizer(_1){if(this.$292){if(_1){this.$292.clear();delete this.$292}else{this.$292.setContents("&nbsp;")}}},isc.A.destroy=function isc_GridRenderer_destroy(){this.clearSelection();this.removeColumnSizer(true);this.Super("destroy",arguments)},isc.A.shouldShowAllColumns=function isc_GridRenderer_shouldShowAllColumns(){if(this.showAllColumns)return true;if(!this.fixedRowHeights&&!this.showAllRows)return true;if(this.overflow==isc.Canvas.VISIBLE){return true}
return false},isc.A.isEmpty=function isc_GridRenderer_isEmpty(){return false},isc.A.$27w=function isc_GridRenderer__showEmptyMessage(_1,_2){return this.getEmptyMessageHTML(_1,_2,this.grid.isOffline())},isc.A.getEmptyMessageHTML=function isc_GridRenderer_getEmptyMessageHTML(_1,_2,_3){if(!_3){if(!this.showEmptyMessage)return"&nbsp;"}else{if(!this.showOfflineMessage)return"&nbsp;"}
if(this.isPrinting){if(_1==null)_1=0;if(_2==null)_2=this.fields?this.fields.getLength()-1:0;var _4=!(this.$568&&this.printChunkOnly);return"<TABLE role='presentation' cellspacing=0 style='width:100%'"+(this.emptyMessageTableStyle?(" class='"+this.emptyMessageTableStyle+"'"):"")+">"+(_4?this.getPrintHeaders(_1,_2+1):"")+"<TR><TD  ALIGN=CENTER class='"+(_3?this.offlineMessageStyle:this.emptyMessageStyle)+"' colspan='"+((_2-_1))+"'>"+(_3?this.getOfflineMessage():this.getEmptyMessage())+"</TD></TR>"+(_4?this.getPrintFooters(_1,_2+1):"")+"</TABLE>"}
var _5=this.getInnerWidth(),_6=0;if(this.expandEmptyMessageToMatchFields&&this.$26a){_6=this.$26a.sum()-_5;if(_6<0)_6=0}
if(this.applyHSpaceToEmptyMessage){if(this.leftSpace!=null)_6+=this.leftSpace;if(this.rightSpace!=null)_6+=this.rightSpace}
var _7=_6&&this.overflow!=isc.Canvas.VISIBLE;var _8=this.$28t;if(_8==null){_8=0;if(isc.Browser.isStrict&&((isc.Browser.isMoz&&isc.Browser.version>=17)||(isc.Browser.isSafari||isc.Browser.isIE)))
{_8=(this.fixedRowHeights?0:this.cellPadding*2);if(this.emptyMessageTableStyle)_8+=isc.Element.$ym(this.emptyMessageTableStyle)}}
var _9=isc.StringBuffer.create();_9.append("<TABLE role='presentation' BORDER=0 MARGIN=0 CELLSPACING='",this.cellSpacing,"' CELLPADDING='",this.cellPadding,(this.emptyMessageTableStyle?("' CLASS='"+this.emptyMessageTableStyle):null),"' style='width:",(_5+_6),"px;",(isc.Browser.isSafari?"'":"' HEIGHT=100%"),"><TR><TD ALIGN=CENTER CLASS='",(_3?this.offlineMessageStyle:this.emptyMessageStyle),"' style='padding-left:0px;padding-right:0px;height:"+(this.cellHeight-_8)+"px'>",(_3?this.getOfflineMessage():this.getEmptyMessage()),(_6&&_7?"<br>"+isc.Canvas.spacerHTML(_5,1):null),"</TD>");if(_6&&_7){_9.append("<TD style='padding-left:0px;padding-right:0px;'>",isc.Canvas.spacerHTML(_6,1),"</TD>")}
_9.append("</TR></TABLE>");return _9.release()},isc.A.getEmptyMessage=function isc_GridRenderer_getEmptyMessage(){return this.emptyMessage},isc.A.getOfflineMessage=function isc_GridRenderer_getOfflineMessage(){return this.grid.offlineMessage},isc.A.getInnerHTML=function isc_GridRenderer_getInnerHTML(){var _1=this.getTableHTML(),_2=this.$57k;_2[1]=this.getTableZIndex();_2[2]=";width:"+this.$26a.sum()+"px";_2[4]=_1;if(isc.Browser.isMoz)_2[5]=this.$623;return _2.join(isc.emptyString)},isc.A.isFastScrolling=function isc_GridRenderer_isFastScrolling(){return this.isDragScrolling()||this.isRepeatTrackScrolling()||this.isMouseWheelScrolling()},isc.A.shouldUseQuickDrawAheadRatio=function isc_GridRenderer_shouldUseQuickDrawAheadRatio(){return this.useQuickDrawAheadRatio||this.isFastScrolling()},isc.A.doneFastScrolling=function isc_GridRenderer_doneFastScrolling(){var _1=this.$50z;if(_1){this.$50v=true;this.markForRedraw("Done Fast scrolling.")}},isc.A.addDrawAhead=function isc_GridRenderer_addDrawAhead(_1,_2,_3,_4,_5){var _6=this.shouldUseQuickDrawAheadRatio(),_7=_6&&this.quickDrawAheadRatio!=null?this.quickDrawAheadRatio:this.drawAheadRatio,_8=Math.ceil((_2-_1)*_7);if(this.$50v)_4=null;if(_4!=null){if(_4)_2=_1+_8;else _1=_2-_8}else{if(_1==0)_2=_8;else{var _9=Math.ceil((_8-(_2-_1))/2);_1-=_9;_2+=_9}}
if(_1<0){_2-=_1;_1=0}
if(_2>=_3){var _10=_2-(_3-1);_1=Math.max(0,(_1-_10));_2=Math.max(0,_3-1)}
if(_6)this.$50z=true;else delete this.$50z;return[_1,_2]},isc.A.$100b=function isc_GridRenderer__isFrozenBody(){if(this.grid&&this.grid.frozenBody==this)return 1;return 0},isc.A.getExtraRowHeight=function isc_GridRenderer_getExtraRowHeight(_1,_2){var _3=0;for(var _4=_1;_4<_2;_4++){var _5=this.getRowHeight(this.getCellRecord(_4,0),_4,this.$100b()),_6=(_5-this.cellHeight);if(_6>0){_3+=_6}}
return _3},isc.A.getDrawArea=function isc_GridRenderer_getDrawArea(_1){var _2=this.getTotalRows(),_3,_4,_5;var _6=_2*this.fields.length,_7=_6<=this.drawAllMaxCells&&!isc.EH.dragging&&!this.isAnimating()&&!(this.parentElement&&this.parentElement.isAnimating());if(this.showAllRows||_7){_3=0;_4=Math.max(_2-1,0)}else{var _8=this.$80e();_3=_8[0];_4=_8[1];_5=_8[2]}
var _9,_10,_11=this.fields.length,_12;if(_1!=null){_9=_1;_10=_1+1}else if(_7||this.shouldShowAllColumns()){_9=0;_10=_11-1}else{var _13=this.getVisibleColumns();_12=(this.lastScrollLeft==null?null:this.lastScrollLeft<this.getScrollLeft());var _14=this.addDrawAhead(_13[0],_13[1],_11,_12);_9=_14[0];_10=_14[1]}
if(this.cacheDOM&&!this.$508){this.$508=_4-_3;this.$509=_10-_9}
return[_3,_4,_9,_10]},isc.A.$80e=function isc_GridRenderer__getDrawRows(){var _1=this.$27x();var _2=(this.lastScrollTop==null?null:this.lastScrollTop<this.getScrollTop());var _3=this.getTotalRows();var _4=this.addDrawAhead(_1[0],_1[1],_3,_2,true);_4[2]=_2;return _4},isc.A.getRowCoordinate=function isc_GridRenderer_getRowCoordinate(_1){var _2=this.getEventRow(_1),_3=this.getRowTop(_2),_4=_1-_3,_5=this.getRowSize(_2),_6=_4/_5;return _2+_6},isc.A.scrollToRatio=function isc_GridRenderer_scrollToRatio(_1,_2,_3,_4,_5){if(!_1||!this.$60s){return this.invokeSuper(isc.GridRenderer,"scrollToRatio",_1,_2,_3,_4,_5)}
var _6=this.getTotalRows()-1,_7=_2*_6,_8=Math.floor(_7),_9=Math.round((_7-_8)*this.getRowSize(_8));this.$27y=_8;this.$27z=_9;this.$270(_3||"scrollToRatio");if(this.isDirty()){this.$271=_2;this.$27y=_8;this.$27z=_9}},isc.A.getScrollRatio=function isc_GridRenderer_getScrollRatio(_1,_2,_3,_4){if(!_1||!this.$60s){return this.invokeSuper(isc.GridRenderer,"getScrollRatio",_1,_2,_3,_4)}
if(this.isDirty()&&this.$271!=null)return this.$271;var _5=this.getTotalRows()-1;if(_5<=0)return 0;var _6=this.getScrollTop(),_7=this.getRowCoordinate(_6),_8=_7/_5;return Math.min(1,_8)},isc.A.getViewportRatio=function isc_GridRenderer_getViewportRatio(_1,_2,_3,_4){if(!_1||!this.$60s){return this.invokeSuper(isc.GridRenderer,"getViewportRatio",_1,_2,_3,_4)}
var _5=this.$272||this.getAvgRowHeight();return Math.min(1,(this.getViewportHeight()/_5)/this.getTotalRows())},isc.A.$273=function isc_GridRenderer__storeTargetRow(_1,_2){if(this.$274)return;if(this.isEmpty())return;var _3,_4,_5=this.getTotalRows()-1;if(_2>0){_3=_1+this.getViewportHeight();_4=this.getEventRow(_3);if(_4==-2&&_5>=0){_4=_5}}else{_3=_1;_4=this.getEventRow(_3)}
var _6=_1;if(_4<0||_4>_5){this.$27y=_5;this.$27z=0;_6=this.getRowTop(_5)}else{this.$27y=_4;this.$27z=_1-this.getRowTop(this.$27y)+_2;if(Math.abs(this.$27z)>this.getViewportHeight()){this.logInfo("storeTargetRow: targetRow: "+_4+" with offset: "+this.$27z+", clearing","virtualScrolling");this.$27z=this.$27y=null}}
return _6},isc.A.$270=function isc_GridRenderer__scrollToTargetRow(_1){var _2=this.$27y,_3=this.$27z;var _4=this.getRowTop(_2)+_3;var _5=this.$124k;this.$274=true;this.$sz=null;this.scrollTo(_5,_4,_1||"targetRow");this.$274=false;this.$271=null},isc.A.scrollIntoView=function isc_GridRenderer_scrollIntoView(_1,_2,_3,_4,_5,_6,_7,_8,_9,_10){if((_10!=null)&&(_10!=this)){return}
this.invokeSuper(isc.GridRenderer,"scrollIntoView",_1,_2,_3,_4,_5,_6,_7,_8,_9,_10)},isc.A.scrollTo=function isc_GridRenderer_scrollTo(_1,_2,_3,_4){if(isc.$cv)arguments.$cw=this;if(this.$60s&&_2!=null&&_3!="nativeScroll"){var _5=this.getScrollTop(),_6=_2-_5;if(_6!=0){this.$273(_5,_6);_2=Math.min(_2,this.getRowTop(this.getTotalRows()-1))}}
this.invokeSuper(isc.GridRenderer,"scrollTo",_1,_2,_3,_4);if(this.isDirty()||this.$80f)return;if(!this.$1301&&this.$1302()){this.redrawOnScroll(!this.isFastScrolling()&&this.instantScrollTrackRedraw)}},isc.A.$134a=function isc_GridRenderer__getRedrawOnScrollCallback(){if(this.$134b==null){var _1=this;this.$134b=function(){delete this.$138f;_1.$1336();_1.redraw("scrolled")}}
return this.$134b},isc.A.redrawOnScroll=function isc_GridRenderer_redrawOnScroll(_1){if(this.$28i){return}
if(_1){this.redraw("scrolled")}else{var _2=this.isMouseWheelScrolling(),_3=this.getScrollRedrawDelay(_2);if(_3==0){this.markForRedraw("scrolled")}else{this.fireOnPause("scrollRedraw",this.$134a(),_3);this.$138f=_2}}
this.$250=true},isc.A.getScrollRedrawDelay=function isc_GridRenderer_getScrollRedrawDelay(_1){var _2=this.scrollRedrawDelay;if(this.scrollWheelRedrawDelay==null)return _2;if(_1==null){_1=this.isMouseWheelScrolling()}
if(_1){_2=this.scrollWheelRedrawDelay}
return _2},isc.A.$276=function isc_GridRenderer__needRowRedraw(){if(this.showAllRows)return false;var _1=this.getVisibleRows(),_2=_1[0],_3=_1[1];var _4=this.getTotalRows();if(_3>_4-1)_3=_4-1;var _5=(_2<this.$252||_3>this.$253);return _5},isc.A.$277=function isc_GridRenderer__needColumnRedraw(){if(this.shouldShowAllColumns())return false;var _1=this.getVisibleColumns(),_2=_1[0],_3=_1[1],_4=(_2<this.$254||_3>this.$255);return _4},isc.A.$1302=function isc_GridRenderer__needAxisRedraw(){return this.$276()||this.$277()},isc.A.setOverflow=function isc_GridRenderer_setOverflow(_1){if(_1==isc.Canvas.VISIBLE){this.showAllRows=true}
return this.Super("setOverflow",arguments)},isc.A.getRowChunkNum=function isc_GridRenderer_getRowChunkNum(_1){return Math.round(_1/this.$508)},isc.A.getColChunkNum=function isc_GridRenderer_getColChunkNum(_1){return Math.round(_1/this.$509)},isc.A.getTableChunk=function isc_GridRenderer_getTableChunk(_1,_2){var _3=this.$51a;if(!_3)return;_1=_1||0;_2=_2||0;var _4=_3[_1];return _4?_4[_2]:null},isc.A.getTableChunkAt=function isc_GridRenderer_getTableChunkAt(_1,_2){var _3=this.getRowChunkNum(_1),_4=this.getColChunkNum(_2),_5=this.getTableChunk(_3,_4);if(_5!=null){this.$51b=_3*this.$508;this.$254=_4*this.$509;return _5}},isc.A.$rd=function isc_GridRenderer__updateInnerHTML(_1,_2,_3,_4){if(this.cacheDOM){this.drawVisibleChunks()}else{this.$29j();this.$756=true;this.invokeSuper(isc.GridRenderer,"$rd",_1,_2,_3,_4);delete this.$756}},isc.A.$p9=function isc_GridRenderer__updateParentHTML(_1,_2,_3,_4){this.$29j();this.$756=true;this.invokeSuper(isc.GridRenderer,"$p9",_1,_2,_3,_4);delete this.$756},isc.A.drawVisibleChunks=function isc_GridRenderer_drawVisibleChunks(){var _1=this.getVisibleRows(),_2=this.getVisibleColumns(),_3=this.getRowChunkNum(_1[0]),_4=this.getColChunkNum(_2[0]),_5=this.getRowChunkNum(_1[1]),_6=this.getColChunkNum(_2[1]);for(var _7=_3;_7<_5;_7++){for(var _8=_4;_8<_6;_8++){if(this.getTableChunk(_7,_8)==null){this.logWarn("drawing chunk: "+[_7,_8]);this.renderTableChunk(_7,_8)}}}
var _9=this.getTableHTML()},isc.A.renderTableChunk=function isc_GridRenderer_renderTableChunk(_1,_2){var _3=_1*this.$508,_4=_3+this.$508,_5=_2*this.$509,_6=_5+this.$509;var _7=this.getTableHTML([_5,_6],_3,_4),_8=isc.Element.insertAdjacentHTML(this.getHandle(),"beforeEnd",_7,true);var _9=this.$51a=this.$51a||[],_10=_9[_1]=_9[_1]||[];_10[_2]=_8},isc.A.startRowAnimation=function isc_GridRenderer_startRowAnimation(_1,_2,_3,_4,_5,_6,_7,_8,_9,_10){this.finishRowAnimation();if(!this.isDrawn()||!this.isVisible()){if(_4!=null){var _11=_9?this.parentElement:this;_11.fireCallback(_4)}
return}
if(_1==null)_1=true;if(_2==null)_2=0;if(_3==null)_3=this.getTotalRows()-1;if(_2==_3){this.logWarn("startRowAnimation passed empty row range, aborting: "+[_2,_3]);return}
var _12=this.readyToRedraw("animating show / hide of rows",false);if(!_12){this.$278=[_1,_2,_3,_4,_5,_6,_7,_8,_9];this.$279=isc.Timer.setTimeout({target:this,methodName:"$28a"},0);return}
if((_3-_2)>this.maxAnimateSlideInRows)_8=false;this.$73q=_8;var _13=this.$28b(_1,_2,_3,_4,_9);this.animateRowHeight(this.$28c,(_1?_13:0),{target:this,methodName:"$28d"},_5,_6,_7,_8)},isc.A.$28a=function isc_GridRenderer__delayedStartRowAnimation(){if(this.$278==null){this.logWarn("Unable to perform delayed row animation - bailing");return}
var _1=this.$278,_2=_1[0],_3=_1[1],_4=_1[2],_5=_1[3],_6=_1[4],_7=_1[5],_8=_1[6],_9=_1[7],_10=_1[8];this.$278=null;this.$279=null;this.startRowAnimation(_2,_3,_4,_5,_6,_7,_8,_9,_10,true)},isc.A.$28b=function isc_GridRenderer__initializeShowHideRow(_1,_2,_3,_4,_5){var _6=0;if(this.$28c==_2&&this.$28e==_3){var _7=this.getTableElement(this.$28c,0),_8=this.$28g(_7);if(!_8){_6=(_3-_2)*this.cellHeight}else _6=_8.scrollHeight}else{this.$28c=_2;this.$28e=_3;if(!_1){var _9=this.$26b();for(var i=_2;i<_3;i++){_6+=_9[i]}
this.$28f=_6;this.redraw("initializing animated hide row")}else{this.$28f=1;this.redraw("initializing animated show row");var _7=this.getTableElement(this.$28c,0),_8=this.$28g(_7);if(!_8){_6=(_3-_2)*this.cellHeight}else _6=_8.scrollHeight}
if(this.isDirty())this.redraw("Initializing row animation requires second redraw")}
this.$28h={callback:_4,target:(_5?this.parentElement:this)};return _6},isc.A.finishRowAnimation=function isc_GridRenderer_finishRowAnimation(){if(this.$28c!=null){this.finishAnimateRowHeight()}else{if(this.$279!=null){isc.Timer.clearTimeout(this.$279);var _1=this.$278,_2=_1[0],_3=_1[1],_4=_1[2],_5=_1[3],_6=_1[4],_7=_1[5];delete this.$278;delete this.$279;if(!this.readyToRedraw()){this.logWarn("Finish row animation called while Grid is not ready to redraw. GridRenderer HTML will not be updated when callback fires.","animation");var _8=_7?this.parentElement:this;if(_5)_8.fireCallback(_5)}else{var _9=this.$28b(_2,_3,_4,_5,_7);this.setRowHeight(_3,(_2?_9:1));this.$28d()}}}},isc.A.$28d=function isc_GridRenderer__rowShowComplete(){var _1=this.$28h;delete this.$28h;delete this.$28c;delete this.$28e;delete this.$28f;if(_1&&_1.callback)_1.target.fireCallback(_1.callback)},isc.A.animateRowHeight=function isc_GridRenderer_animateRowHeight(_1,_2,_3,_4,_5,_6,_7,_8){if(!this.isDrawn()){if(_3){var _9=(_8?this.parentElement:this);_9.fireCallback(_3)}
return}
if(this.$28i!=null){this.logInfo("early finish of row animation, because new animation started","animation")
this.finishAnimateRowHeight()}
var _10=this.getRowSize(_1);if(_4!=null){var _11=(_2-_10);if(_11<0)_11=0-_11;_5=Math.round((_11/_4)*1000);if(_5>this.animateRowsMaxTime)_5=this.animateRowsMaxTime}
this.$28j={$24t:_1,$28k:_10,$28l:_2,$03:_3,$1n:_7,$28m:_8}
_6=(_6||this.$27r);if(this.logIsInfoEnabled("animation")){this.logInfo("starting row animation, row:"+_1+", duration: "+_5+", effect: "+_6,"animation")}
this.$28i=this.registerAnimation({target:this,method:this.$28n},_5,_6);if(this.overflow==isc.Canvas.AUTO||this.overflow==isc.Canvas.SCROLL)
this.$417=true},isc.A.$28n=function isc_GridRenderer__fireRowAnimation(_1){var _2=this.$28j;if(_2==null)return;var _3=_2.$24t,_4=this.$04(_2.$28k,_2.$28l,_1);if(isc.Browser.isSafari&&_2.$28k>_2.$28l)
this.$28o=true;this.setRowHeight(_3,_4,null,isc.emptyString,true,true,true);if(isc.Browser.isSafari)delete this.$28o;if(_2.$1n){var _5=this.$28g(this.getTableElement(_3,0));if(_5){var _6=_5.scrollHeight,_7=_5.offsetHeight;if(_6>_7)_5.scrollTop=_6-_7;else _5.scrollTop=0}}
if(_1==1){isc.Timer.setTimeout({target:this,methodName:"$28p"},0)}},isc.A.$28p=function isc_GridRenderer__rowAnimationComplete(){delete this.$417;this.adjustOverflow("row animation complete");var _1=this.$28j;delete this.$28i;delete this.$28j;if(_1&&_1.$03){var _2=_1.$28m?this.parentElement:this;_2.fireCallback(_1.$03)}},isc.A.finishAnimateRowHeight=function isc_GridRenderer_finishAnimateRowHeight(){if(!this.$28i)return;this.cancelAnimation(this.$28i);this.$28n(1)},isc.A.$80s=function isc_GridRenderer__getPrintChildren(){return this.$29a},isc.A.getTablePrintHTML=function isc_GridRenderer_getTablePrintHTML(_1,_2,_3,_4,_5){return this.getTableHTML(_1,_2,_3,_4,_5)},isc.A.draw=function isc_GridRenderer_draw(){if(isc.screenReader&&this.screenReader_suppressHandleFocus){this.clipHandleIsFocusHandle=this.isEmpty()}
return this.Super("draw",arguments)},isc.A.handleKeyDown=function isc_GridRenderer_handleKeyDown(_1,_2){var _3=this.Super("handleKeyDown",arguments);if(_3!=false&&isc.screenReader&&this.screenReader_suppressHandleFocus){var _4=isc.EH.clickMaskUp(),_5=false;if(_4){var _6=isc.EH.clickMaskRegistry;for(var i=0;i<_6.length;i++){if(isc.EH.isHardMask(_6[i])){_5=true;break}}}
if(!_5){var _8=_1.keyName;if(_8=="Tab"){this.$kf(!isc.EH.shiftKeyDown())
return false}}}
return _3},isc.A.getTableHTML=function isc_GridRenderer_getTableHTML(_1,_2,_3,_4,_5,_6){if(isc.$cv)arguments.$cw=this;var _7=isc.timeStamp();if(this.isEmpty()){this.$252=this.$253=this.$254=this.$255=null;return this.$27w()}
if(this.isPrinting&&(!this.$568||_2==0)){var _8=this.$80s();if(_8!=null&&_8.length>0){for(var i=0;i<_8.length;i++){var _10=_8[i];if(_10.$80t!=null)continue;var _11={component:_10,colNum:_1,startRow:_2,endRow:_3,descreteCols:_4,asyncCallback:_5};var _12=_8[i].getPrintHTML(this.printProperties,_5==null?null:{target:this,methodName:"gotComponentPrintHTML",context:_11});if(_12!=null){_10.$80t=_12}else{return null}}}}
var _13=(_2!=null&&_3!=null),_14=_2!=null?_2:0,_15=_3!=null?_3:this.getTotalRows();var _16=this.$121d(_2,_3,true),_17=this.grid;_2=_16[0];_3=_16[1];if(!_13){var _18=(_2==0&&_3==this.getTotalRows());if(this.virtualScrolling){this.$60s=!_18}
if(!this.$60s){delete this.$27y;delete this.$60t;delete this.$271;delete this.$60u}}
if(!this.$941){this.$254=_16[2];this.$255=_16[3]}
var _19=_1!=null&&isc.isAn.Array(_1),_20,_21;if(!_19)_4=false;if(_1!=null){if(_19){_20=_1[0];_21=_1[1]+1}else{_20=_1;_21=_1+1}}else{_20=this.$254;_21=this.$255+1}
var _22;if(_4)_22=_1;else{_22=[];for(var i=_20;i<_21;i++){_22[_22.length]=i}}
var _23=_22.length;var _24=(this.shouldShowAllColumns()||_1!=null);var _25=isc.StringBuffer.create(),_26=this.fields,_27=this.$26a;this.$28r=_22[0]!=0?null:this.$26a[0];var _28,_29,_30,_31;if(!_24||this.leftSpace!=null||this.rightSpace!=null){_28=(this.leftSpace!=null)?this.leftSpace:0;_29=(this.rightSpace!=null)?this.rightSpace:0;if(!_24){_28+=this.$26a.slice(0,_20).sum();_29+=this.$26a.slice(_21,this.$26a.length).sum()}
_30=this.$26a.sum()
_31=(this.cacheDOM||(isc.Browser.isIE&&!(isc.Browser.isIE8||isc.Browser.isIE9))?"margin":"padding")}
var _32=this.autoFit;var _33="";if(_1!=null){if(!_32&&this.fixedColumnWidths){_33=" WIDTH=100%"}}else if(this.isPrinting&&this.autoFit){_33=" WIDTH=100%"}else if((isc.Browser.isIE8Strict||isc.Browser.isMoz||isc.Browser.isSafari)&&!_32)
{var _34=this.$26a.slice(_20,_21).sum();_33=" WIDTH="+_34}
var _35=this.startSpace||0;if(_13)_35=0;if(_2!=_14){var _36=((_2-_14)*this.getAvgRowHeight());this.$514=_36;_35+=_36}else{this.$514=0}
var _37=true;var _38=(_15-_14)*this.getAvgRowHeight();if(isc.Browser.isIE){if(_38>1300000)_37=false}
if(!_13)this.$79b=_37;if(_38>10000000){this.logWarn("This grid is showing "+(_15-_14).toLocalizedString()+" rows. Due to native rendering limitations, grids with this many rows may not appear correctly on all browsers. Consider filtering the data displayed to the user to reduce the total number of rows displayed at a time. This will improve usability as well as avoiding unpredictable behavior.")}
if(!this.cacheDOM&&!this.isPrinting){_25.append("<DIV style='width:1px;");if(_37){_25.append("height:",_35,"px;overflow:hidden;")}
if(_35==0)_25.append("display:none;");_25.append("' ");if(_13||this.isPrinting){_25.append(">")}else{_25.append(" ID="+this.getID()+"$28s>")}
_25.append(isc.Canvas.spacerHTML(1,_35),"</DIV>")}
if(!this.$568||(_2==0&&!this.printChunkOnly)){_25.append("<TABLE role='presentation' BORDER=0",_33,((!_13&&!this.isPrinting)?" ID="+this.getTableElementId():null),(this.tableStyle&&isc.Browser.isDOM?" CLASS='"+this.tableStyle+this.$ob:isc.$ad)," CELLSPACING=",this.cellSpacing," CELLPADDING=",this.cellPadding," STYLE='",(isc.Browser.isDOM&&!_32&&this.fixedColumnWidths?"table-layout:fixed;overflow:hidden;":""),(!_24?_31+(this.isRTL()?"-right: ":"-left:")+_28+"px;"+_31+(this.isRTL()?"-left:":"-right:")+_29+"px;":""),(this.cacheDOM&&this.$514>0?"margin-top:"+this.$514+"px;":""),(this.$27y!=null&&!(isc.Browser.isIE&&this.$r9)&&!this.isPrinting?"visibility:hidden;":""),"'>",(isc.Browser.isMoz?"<TBODY></TBODY>":""));var _39=0,_40=0,_41=this.$54p();if(isc.Browser.isStrict&&((isc.Browser.isMoz&&isc.Browser.version>=17)||(isc.Browser.isSafari||isc.Browser.isIE)))
{if((isc.Browser.isIE&&isc.Browser.version<8)||(isc.Browser.isSafari&&isc.Browser.safariVersion<530))
{_40=this.$54q()}
_39=(this.fixedRowHeights?0:this.cellPadding*2);_39+=isc.Element.$ym(_41)}
this.$28t=_39;this.$28u=_40;_25.append("<colgroup>");if(!_32&&isc.Browser.isDOM){for(var i=0;i<_22.length;i++){_25.append("<COL WIDTH=",(_27[_22[i]]-_40),">")}}
_25.append("</colgroup>");_25.append("<TBODY>")}
var _42=this.cellHeight,_43=this.$28v(_42),_44=!this.wrapCells&&!isc.Browser.isIE8Strict,_45=!_44||_43,_46=(_45?"":"<NOBR>"),_47=(!this.closeNOBRs||_45?"":"</NOBR>");var _48=0;if(isc.Browser.isDOM){var _49=[];_49[0]="<TD";_49[3]=" ALIGN=";_49[16]=_45&&!this.wrapCells?";white-space: nowrap;":null;_49[17]=this.fastCellUpdates?"' ":"' CLASS=";if(!_13&&!this.isPrinting&&this.getCellElementId)_49[19]=" ID=";_49[23]=">"+_46;_49[30]=_47+(_43?"</DIV></TD>":"</TD>");var _50=1,_51=2,_52=4,_53=5,_54=6,_55=7,_56=9,_57=10,_58=11,_59=18,_60=20,_61=21,_62=24;var _63="<TR",_64="</TR>",_65=">",_66=" HEIGHT=",_67=" VALIGN=";if(_17&&_17.canDragRecordsOut&&_17.useNativeDrag){_63+=" draggable='true'"}
if(isc.Browser.isMobileWebkit)_63+=" onmousedown='return true;' style='-webkit-tap-highlight-color: rgba(0,0,0,0)'";var _68;if(isc.screenReader){_68=" tabIndex=-1"}
var _69=isc.Canvas.ariaEnabled();var _70=[],_71=0,_72=[];var _73=this.$99p={};this.$50d(_22,_32,_40,_43);if(this.isPrinting&&(!this.$568||(_2==0&&!this.printChunkOnly))){_25.append(this.getPrintHeaders(_20,_21))}
var _74=this.$100b()
for(var _75=_2;_75<_3;_75++){var _76=(!_13&&this.$28c==_75);var _77=this.getCellRecord(_75);var _78=_76||this.$282(_75,_77);_25.append(_63);if(_68!=null){if(this.screenReader_suppressHandleFocus){if(this.getNativeFocusRow()==_75){_25.append(" tabIndex=",this.getTabIndex(),isc.Canvas.$ry,this.$qn(),isc.Canvas.$rz,this.$qo())}else{_25.append(_68)}}else{_25.append(_68)}}
if(!_13&&!this.isPrinting&&this.getRowElementId){_25.append(" ID=",this.getRowElementId(_75,_75-_2))}
if(_69&&this.getRowRole!=null){var _79=this.getRowRole(_75,_77);if(_79!=null)_25.append(" role='",_79,"'");var _80=this.getRowAriaState(_75,_77);if(_80)_25.append(isc.Canvas.getAriaStateAttributes(_80))}
_25.append(_65);var _81=_76?this.$28f:(this.getRowHeight!=null?this.getRowHeight(_77,_75,_74):_42);var _82;if(_76){_82=true}else{_82=this.fixedRowHeights;if(_82&&this.shouldFixRowHeight!=null){_82=(this.shouldFixRowHeight(_77,_75)!=false)}}
if(_82){_49[_50]=_66;_49[_51]=_81-_39;_49[_57]=null}else{_49[_50]=null;_49[_51]=null;if(!_78&&_81==this.cellHeight&&!this.fixedRowHeights)
{_49[_57]=null}else{_49[_57]=this.$281(_77,_75)}}
if(_43){_49[_61]=">"+this.$27s+this.$283(_81,_77,_75,_76);if(_44)_49[_61]+="white-space:nowrap;"}
var _83=_78?this.$67p(_77,_75,_20,_21):null;for(var i=0;i<_22.length;i++){_1=_22[i];if(this.useCellRecords)_77=this.getCellRecord(_75,_1);var _84=_26[_1],_85=_77;if(_85==null)_85=this.getCellRecord(_75,_1);if(_70[_1]>0){_84.$28w[_75]=_72[_1];if(_1==0){_73[_75]=_75>0?_73[_75-1]:0}
_70[_1]--;if(_70[_1]==0){_71--;_72[_1]=null}
continue}else if(_1==0){_73[_75]=_75>0?_73[_75-1]+1:0}
_49[_52]=this.getCellAlign(_77,_84,_75,_1);var _86=this.getCellVAlign(_77,_84,_75,_1);if(_86!=null){_49[_53]=_67
_49[_54]=_86}
if(_83!=null&&(_1==_83[0])){_48++;_49[_55]=this.$67q(_83[1]-_83[0]);if(_43){_49[_61+1]=this.$ob}}else{_49[_55]=_84.$28x;if(this.allowRowSpanning&&this.getRowSpan){var _87=this.$100c(_77,_75,_1);if(_87>1){var _88=" ROWSPAN="+_87;if(_49[_52]!=null)
_49[_52]+=_88;else
_49[_52]=_88;_70[_1]=_87-1;_71++;if(_84.$28w==null)_84.$28w={};_84.$28w[_75]=_75;_72[_1]=_75;if(_1==0){_73[_75]=_75>0?_73[_75-1]+1:0}}}
if(_69&&this.getCellRole!=null){var _89=this.getCellRole(_75,_1,_77);if(_89!=null){var _90=this.getCellAriaState(_75,_1,_77);_49[_56]=" role='"+_89+(_90?isc.Canvas.getAriaStateAttributes(_90):"")}else{_49[_56]=null}}
if(_43){_49[_61+1]=_84.$28y}else{_49[_61+1]=null}}
var _91=this.getCellStyle(_77,_75,_1),_92=(this.getCellCSSText?this.getCellCSSText(_77,_75,_1):null);if(_76){var _93="padding:0px;border:0px;";if(_92)_92+=";"+_93
else _92=_93}
if(!this.fastCellUpdates){_49[_58]=_92==null?null:String.asAttValue(_92);_49[_59]=_91}else{var _94=this.$77d(_91);_49[_58]=_94;_49[_58+1]=_92==null?null:String.asAttValue(_92)}
if(_76){this.$28q=true;var _95=this.getTableHTML(null,this.$28c,this.$28e);delete this.$28q;if(!_43){_49[_62]=isc.SB.concat(this.$27s,this.$283(_81,_77,_75,_76),this.$ob,this.$oa,_95,"</DIV>")}else{_49[_62]=_95}}else
_49[_62]=this.$22k(_77,_75,_1);if(!_13&&this.getCellElementId){_49[_60]=this.getCellElementId(_75,_75-_2,_1,_1-_20)}
_25.append(_49);if(!_13&&_85!=null&&this.grid.$916(_85)){var _96=this.grid.$917(_85);if(_96[0]&&_96[0].rowNum==null){this.updateEmbeddedComponentCoords(_96,_85,_75,_1)}}
if(_78&&(_1==_83[0])){i+=_83[1]-_83[0]}}
_25.append(_64);if(this.isPrinting&&_77&&this.grid.$916(_77)){var _96=this.grid.$917(_77);for(var _97=0;_97<_96.length;_97++){var _98=_96[_97];if(_98.$57n==null&&_98.$80t!=null){_25.append(_63,_65,'<td colspan="',_23,'">',_98.$80t,"</td>",_64);delete _98.$80t}}}
if(_76){_75=this.$28e-1}}}
if(!this.$568||(_3==this.getTotalRows()&&!this.printChunkOnly)){if(this.grid&&this.isPrinting){_25.append(this.getPrintFooters(_20,_21))}
_25.append("</TBODY></TABLE>")}
var _99=_15-_3,_100=(!_13&&this.$60s);var _101=this.cacheDOM?0:(this.endSpace||0);if(_13){_101=0}
if(!this.$941)this.$515=0;if(!this.showAllRows&&(_99!=0||_100)){var _102=_99*this.getAvgRowHeight();if(_100&&_99==0&&!_13){var _103=this.getViewportHeight();if(_102<_103){_102=_103}}
if(!this.$941)this.$515=_102;_101+=_102}
if(!this.cacheDOM&&!this.isPrinting){_25.append("<DIV style='width:1px;");if(_37){_25.append("height:",_101,"px;overflow:hidden;")}
if(_101==0)_25.append("display:none;");_25.append("' ");if(_13||this.isPrinting){_25.append(">")}else{_25.append(" ID="+this.getID()+"$284>")}
_25.append(isc.Canvas.spacerHTML(1,_101),"</DIV>")}
if(this.logIsDebugEnabled("gridHTML")){var _104=(isc.timeStamp()-_7),_105=(_23*(_3-_2)),_106=(_104/_105),_107=(1000/_106);if(_106.toFixed!=null)_106=_106.toFixed(2);if(_107.toFixed!=null)_107=_107.toFixed(2);this.logDebug("getTableHTML: columns "+(_4?_22:_20+"->"+(_21-1))+", rows "+_2+"->"+(_3-1)+", time: "+_104+"ms ("+_105+" cells at "+_106+"ms per cell, "+_107+" cells per second), spacerHeights: ["+[_35,_101]+"], left/right pad: ["+[_28,_29]+"], "+_48+" single cell rows","gridHTML")}
var _108=_25.release();if(_6){if(_5!=null){this.fireCallback(_5,"HTML,callback",[_108,_5])}
return null}
return _108});isc.evalBoundary;isc.B.push(isc.A.$121d=function isc_GridRenderer__getTableHTMLDrawArea(_1,_2,_3){var _4=(_1!=null&&_2!=null);var _5=this.getDrawArea(),_6=this.grid,_7;if(_6){if(_6.$30d){_7=(_6.$30d==null?0:isc.isAn.Array(_6.$30d)?_6.$30d[0]:_6.$30d)}else if(_6.data&&_6.data.getFirstUsedIndex&&_5[0]==0){_7=_6.data.getFirstUsedIndex()}
if(_7){var _8=_5[1]-_5[0],_9=_7+_8,_10=this.getTotalRows();if(_9>=_10){_7-=(_9-(_10-1))
_9=_10-1}
if(_7<0)_7=0;_5[0]=_7;_5[1]=_9}}
if(!_4){var _11=_5[0],_12=_5[1];if(this.$28c!=null){_12+=(this.$28e-this.$28c);var _10=this.getTotalRows();if(_12>=_10)_12=_10-1}
_1=_11;_2=_12+1;if(_3){this.$252=_11;this.$253=_12}}else{var _13=_5[0],_14=_5[1]+1;if(this.$28q){if(_13>_2||_14<_1){_1=_2}else{if(!this.$73q){_1=Math.max(_1,_13);_2=Math.min(_2,_14)}}}}
_5[0]=_1;_5[1]=_2;return _5},isc.A.getPrintHeaders=function isc_GridRenderer_getPrintHeaders(_1,_2){return""},isc.A.getPrintFooters=function isc_GridRenderer_getPrintFooters(_1,_2){return""},isc.A.setFocus=function isc_GridRenderer_setFocus(_1,_2){if(isc.screenReader&&_2=="focus on mousedown"){var _3=this.getEventRow();if(_3!=null&&!this.isEmpty()){if(_3==-2)_3=this.getTotalRows()-1;if(_3>=0){this.$86a(_3,true)}}}
return this.Super("setFocus",arguments)},isc.A.$86a=function isc_GridRenderer__putNativeFocusInRow(_1,_2){var _3=this.screenReader_suppressHandleFocus;if(_3)this.$vj(false);this.$86b=_1;if(_3)this.$vj(true);if(this.screenReader_suppressHandleFocus){this.clipHandleIsFocusHandle=this.isEmpty()}
if(_2==null)_2=!this.hasFocus;if(_2){return}
var _4=this.getFocusHandle();if(_4)_4.focus();if(!_3)isc.EH.$ke=null;_4.focus();if(!_3)isc.EH.$ke=this},isc.A.getFocusHandle=function isc_GridRenderer_getFocusHandle(){if(!isc.screenReader)return this.Super("getFocusHandle",arguments);if(isc.screenReader){var _1=this.getNativeFocusRow();var _2=this.getTableElement(_1);if(_2!=null)return _2;return this.Super("getFocusHandle",arguments)}},isc.A.gotComponentPrintHTML=function isc_GridRenderer_gotComponentPrintHTML(_1,_2){var _3=_2.context,_4=_3.component;if(_3.asyncCallback==null){return}
_4.$80t=_1;return this.getTableHTML(_3.colNum,_3.startRow,_3.endRow,_3.discreteCols,_3.asyncCallback,true)},isc.A.$77d=function isc_GridRenderer__getEscapedStyleText(_1){if(this.$77c[_1]!=null)return this.$77c[_1];var _2=isc.Element.getStyleText(_1,true);this.$77c[_1]=String.asAttValue(_2);return this.$77c[_1]},isc.A.getCellVAlign=function isc_GridRenderer_getCellVAlign(_1,_2,_3,_4){return null},isc.A.getCellAlign=function isc_GridRenderer_getCellAlign(_1,_2,_3,_4){return _2.cellAlign||_2.align},isc.A.$67p=function isc_GridRenderer__getSingleCellSpan(_1,_2,_3,_4){return[_3,_4]},isc.A.$67q=function isc_GridRenderer__getTDSpanHTML(_1){if(!isc.GridRenderer.$67r){isc.GridRenderer.$67r={$67s:{},$67t:{}}}
var _2=this.fixedRowHeights?isc.GridRenderer.$67r.$67s:isc.GridRenderer.$67r.$67t;if(_2[_1])return _2[_1];else{return _2[_1]=" COLSPAN="+_1+" STYLE='"+(this.fixedRowHeights?"padding-top:0px;padding-bottom:0px;":"")}},isc.A.$54p=function isc_GridRenderer__getFirstRecordStyle(){var _1=this.grid,_2=0;if(_1){if(_1.$30d){_2=_1.$30d==null?0:isc.isAn.Array(_1.$30d)?_1.$30d[0]:_1.$30d}else if(_1.data&&_1.data.getFirstUsedIndex){_2=_1.data.getFirstUsedIndex()}}
return(this.getBaseStyle!=null?this.getBaseStyle(this.getCellRecord(_2,0),0,0):this.baseStyle)},isc.A.$50d=function isc_GridRenderer__cacheColumnHTML(_1,_2,_3,_4){var _5=this.fields,_6=this.$26a;for(var i=0;i<_1.length;i++){var _8=_1[i],_9=_5[_8];_9.$28w=null;if(_2){_9.$28x=(isc.Browser.isIE&&!isc.Browser.isIEStrict)?" STYLE='":" STYLE='OVERFLOW:hidden;";_9.$28y=this.$ob}else{var _10=isc.Browser.isIE8Strict?" STYLE='overflow:hidden;":" STYLE='";_9.$28x=(isc.Browser.isIE?" WIDTH="+(_6[_8]-_3)+_10:" STYLE='"+this.$28z(_8));if(_4){_9.$28y=this.$280(_8)+this.$ob}}
if(!this.fixedRowHeights){_9.$28x+=this.$281()}
if(this.fixedRowHeights)_9.$28x+="padding-top:0px;padding-bottom:0px;"}},isc.A.cellValueIsClipped=function isc_GridRenderer_cellValueIsClipped(_1,_2){var _3=this.getTableElement(_1,_2);var _4;if(!this.$28v(this.cellHeight))_4=_3;else _4=this.$28g(_3);return this.$1154(_4)},isc.A.$1154=function isc_GridRenderer__cellValueIsClipped(_1){if(_1==null)return null;return isc.Element.getClientWidth(_1)<_1.scrollWidth},isc.A.$28v=function isc_GridRenderer__writeDiv(_1){return(isc.Browser.isSafari||(isc.Browser.isOpera&&!this.autoFit&&(this.fixedColumnWidths||this.fixedRowHeights))||(isc.Browser.isMoz&&isc.Browser.geckoVersion>=20040113&&this.fixedColumnWidths&&!this.autoFit)||(this.shouldEnforceVClipping()&&(isc.Browser.isMoz||(isc.Browser.isIE&&(isc.Browser.isStrict||isc.Browser.version>=10)))))},isc.A.$282=function isc_GridRenderer__drawRecordAsSingleCell(_1,_2){return(_2&&(_2[this.singleCellValueProperty]!=null||_2[this.isSeparatorProperty]||(Array.isLoading(_2)&&!(isc.Browser.isSafari&&(_1==0||_1==this.$252)))))},isc.A.$283=function isc_GridRenderer__getCellDivCSSHeight(_1,_2,_3,_4){var _5=_4||(this.shouldEnforceVClipping()&&(this.shouldFixRowHeight==null||this.shouldFixRowHeight(_2,_3)!=false));if(_5){var _6=_1-2*this.cellSpacing-
(_4?0:2);if(_3==this.$285){for(var i=0;i<this.$286.getItems().length;i++){_6=Math.max(this.$286.getItems()[i].getHeight(),this.$286.getItems()[i].iconHeight)}}
if(_6<1)_6=1;return(isc.Browser.isMoz||isc.Browser.isSafari||(isc.Browser.isIE&&((isc.Browser.version>=7&&isc.Browser.isStrict)||isc.Browser.version>=10))?"MAX-HEIGHT:":"HEIGHT:")+_6+"px;"}
return isc.$ad},isc.A.$280=function isc_GridRenderer__getFieldDivWidthHTML(_1){if(!this.fixedColumnWidths||this.autoFit)return isc.emptyString;return"WIDTH:"+this.getInnerColumnWidth(_1)+"px;"},isc.A.$281=function isc_GridRenderer__getMinHeightCSSText(_1,_2){var _3=(_2!=null?this.getRowHeight(_1,_2,this.$100b()):this.cellHeight),_4=isc.Browser.isIE,_5=isc.Browser.isStrict;if(_5)_3-=this.$28t;if(_4&&!_5&&!(this.autoFit||!this.fixedColumnWidths)){return"MIN-HEIGHT:"+_3+"px;"}
return"HEIGHT:"+_3+"px;"},isc.A.$28z=function isc_GridRenderer__getCSSTextForColWidth(_1){if(isc.Browser.isIE||this.autoFit)return isc.$ad;if(this.$287==null){this.$287=[];for(var i=0;i<this.$26a.length;i++){var _3=this.$26a[i];this.$287[i]="WIDTH:"+_3+(this.fixedColumnWidths?"px;OVERFLOW:hidden;":"px;")}}
return this.$287[_1]},isc.A.getCellRecord=function isc_GridRenderer_getCellRecord(_1,_2){return null},isc.A.findRowNum=function isc_GridRenderer_findRowNum(_1){return-1},isc.A.findColNum=function isc_GridRenderer_findColNum(_1){return-1},isc.A.$22k=function isc_GridRenderer__getCellValue(_1,_2,_3){var _4=this.isPrinting,_5=this.getCellValue(_1,_2,_3,this);if(!_4&&this.$80g(_1)){var _6=this.$667(_1),_7=this.$131s;if(_6.allWithin){if(_6.extraHeight&&(_6.extraHeight>this.cellHeight)){_7[0]=_5;isc.$bk(_7,(_6.extraHeight-Math.max(isc.ListGrid.getInstanceProperty("cellHeight"),this.cellHeight)),2,5,false);_5=_7.join(isc.emptyString)}}else if(_6.extraHeight&&_6.extraHeight>0){_7[0]=_5;isc.$bk(_7,_6.extraHeight,2,5,false);_5=_7.join(isc.emptyString)}}else if(_1&&this.grid.$916(_1)){var _8=0,_9=0;if(_4){_8=this.grid.$143l;_9=this.grid.$143w}
var _10=this.grid.$917(_1);for(var i=0,_12=(_10?_10.length:0);i<_12;++i){var _13=_10[i];if(_13==null)continue;var _14=_13.$57n;if(_4&&_14!=null){_14+=(_13.$143x?_9:_8)}
if(_14!=_3){continue}
var _15=(_13.embeddedPosition==this.$57l);var _16=_13.$80t;if(_16!=null){var _17=(_16!=isc.emptyString);if(_15&&_17){_16=this.$80q+_16+this.$80r}
if(_5==this.emptyCellValue&&_17){_5=_16}else{_5+=_16}
delete _13.$80t}}}
if(isc.screenReader&&this.screenReaderCellSeparator!=null){_5+="<div style='overflow:hidden;width:0px;height:0px;'>"+this.screenReaderCellSeparator+"</div>"}
return _5},isc.A.$80g=function isc_GridRenderer__writeEmbeddedComponentSpacer(_1){return(_1&&this.grid.$916(_1))},isc.A.getCellValue=function isc_GridRenderer_getCellValue(_1,_2,_3){return this.emptyCellValue},isc.A.getTotalRows=function isc_GridRenderer_getTotalRows(){return this.totalRows},isc.A.setColumnWidth=function isc_GridRenderer_setColumnWidth(_1,_2){this.fields[_1].width=this.$26a[_1]=_2;this.$287=null;this.markForRedraw("setColumnWidth")},isc.A.setColumnWidths=function isc_GridRenderer_setColumnWidths(_1){var _2=this.$26a;this.$26a=_1.duplicate();this.$287=null;if(_2!=null&&_1!=null&&_2.length==_1.length){if(_2==_1)return;var _3=false;for(var i=0;i<_2.length;i++){if(_2[i]!=_1[i])_3=true}
if(!_3)return;if(!this.fixedColumnWidths&&!this.wrapCells&&this.isDrawn()&&_1.length==1){var _5=this.$28r||_2[0],_6=_1[0],_7=this.getColumnSize(0);if((_5==_6)||(_7>_5&&_7>=_6)){return}}}
this.markForRedraw("setColumnWidths")},isc.A.shouldRedrawOnResize=function isc_GridRenderer_shouldRedrawOnResize(_1,_2,_3){if(this.redrawOnResize!=null)return this.redrawOnResize;if(isc.isA.ListGrid(this.parentElement)&&isc.isA.Layout(this.parentElement.parentElement))
{var _4=this.parentElement.parentElement.getMembers();if(_4&&_4.map("isAnimating").or())return false}
if(this.$276()||this.$277())return true;if(this.isEmpty())return true;return false},isc.A.getRowHeight=function isc_GridRenderer_getRowHeight(_1,_2){var _3=this.updateHeightForEmbeddedComponents(_1,_2,this.cellHeight);return _3},isc.A.updateHeightForEmbeddedComponents=function isc_GridRenderer_updateHeightForEmbeddedComponents(_1,_2,_3){if(_1&&this.grid.$916(_1)){var _4=this.$667(_1,_2);if(_4.allWithin&&_4.extraHeight>0){_3=Math.max(_3,_4.extraHeight)}else{_3+=_4.extraHeight}}
return _3},isc.A.$667=function isc_GridRenderer__getExtraEmbeddedComponentHeight(_1,_2){var _3=this.grid.$917(_1)||[],_4=0,_5=true,_6=this.isPrinting;for(var i=0;i<_3.length;i++){var _8=_3[i];if(!_8)continue;if(_6)continue;if(_2!=null)_8.$289=_2;var _9=(_8.embeddedPosition==this.$57l);if(!_9)_5=false;var _10=_8.getVisibleHeight();var _11=(_9?(_10>this.cellHeight?_10:0):_10);if(_8._percent_height!=null){_8.height=_8._percent_height;_11=this.cellHeight}
var _12=_8.specifiedHeight;if(_9&&_12&&isc.isA.String(_12)&&_12.contains("%"))
_11=0;if(_11>_4){_4=_11}}
return{allWithin:_5,extraHeight:_4}},isc.A.$100c=function isc_GridRenderer__getRowSpan(_1,_2,_3){if(!this.allowRowSpanning||!this.getRowSpan)return 1;var _4=this.getRowSpan(_1,_2,_3);return Math.min(_4,this.getTotalRows()-_2)},isc.A.getCellStartRow=function isc_GridRenderer_getCellStartRow(_1,_2){var _3=this.fields[_2];if(_3==null)return null;var _4=_3.$28w;if(_4==null||_4[_1]==null)return _1;return _4[_1]},isc.A.getCellRowSpan=function isc_GridRenderer_getCellRowSpan(_1,_2){var _3=this.fields[_2].$28w;if(_3==null)return 1;var _4=this.getCellStartRow(_1,_2);var _5=_1+1,_6=_1-_4+1;while(_5<=this.$253&&_3[_5]==_4)
{_5++;_6++}
return _6},isc.A.addEmbeddedComponent=function isc_GridRenderer_addEmbeddedComponent(_1,_2,_3,_4,_5){if(_5==null)_5=this.$57m;var _6=((_5==this.$57m)||!this.fixedRowHeights);if(!isc.isA.Canvas(_1)){_1.autoDraw=false;var _7=isc.ClassFactory.getClass(_1._constructor);if(_7==null)_7=isc.Canvas;_1=_7.create(_1)}
var _8=false;if(this.$29a&&this.$29a.contains(_1)){if(this.grid.$916(_2)&&this.grid.$917(_2).contains(_1)&&_1.embeddedPosition==_5&&_1.$289==_3&&_1.$57n==_4)
{return}
if(_5==_1.embeddedPosition&&!_6){_8=!this.isDirty()}
this.removeEmbeddedComponent(_1.embeddedRecord,_1,true)}else if(!_6){_8=!this.isDirty()}
this.grid.$918(_2,_1);if(this.$29a==null)this.$29a=[];this.$29a.add(_1);_1.embeddedPosition=_5;_1.embeddedRecord=_2;_1.$289=_3;_1.$57n=_4;_1.$669=this.getID();_1.percentBox="custom";if(_1.parentElement!=this){var _9=this.$417;this.$417=true;_1.hide();this.addChild(_1);if(_9==null)delete this.$417}
this.observe(_1,"resized",function(_10,_11){this.$80d(_1,_10,_11)});_1.$29b=_1._redrawWithParent;_1._redrawWithParent=false;_1.$668=_1.bubbleMouseEvents;if(!_1.bubbleMouseEvents){_1.bubbleMouseEvents=["mouseDown","mouseUp","click","doubleClick","contextClick"]}
if(_8&&(_3==-1||_4==-1)){_8=false}
if(_8){this.placeEmbeddedComponent(_1)}else{this.markForRedraw("added embedded component")}
return _1},isc.A.$80d=function isc_GridRenderer__handleEmbeddedComponentResize(_1,_2,_3){var _4=_1.embeddedPosition;if(_4!=this.$57l){if(_3!=null&&_3!=0)this.markForRedraw('embedded component resized')}else{this.placeEmbeddedComponent(_1)}},isc.A.updateEmbeddedComponentCoords=function isc_GridRenderer_updateEmbeddedComponentCoords(_1,_2,_3,_4){_1.setProperty("$289",_3)},isc.A.placeEmbeddedComponent=function isc_GridRenderer_placeEmbeddedComponent(_1){var _2=_1.$289;if(_2==null||(this.$252==null||this.$253==null)||(_2<this.$252||_2>this.$253))
{if(_1.isDrawn())_1.clear();return}
if(!_1.removeOnHideField&&_1.$81k&&!this.grid.getField(_1.$81k))
{if(_1.isDrawn())_1.clear();return}
var _3=_1.embeddedRecord,_4=_1.embeddedPosition,_5=_1.$57n,_6=this.getRowTop(_2),_7=(_5!=null&&_5>=0)?this.getColumnLeft(_5):null,_8=(_5!=null&&_5>=0)?this.getColumnWidth(_5):Math.min(this.getInnerWidth(),this.$26a.sum());if(_7==null){if(!this.isRTL()){_7=this.getScrollLeft()}else{_7=this.$95h(this.getScrollLeft(),true)}}
if(_4==this.$57l){var _9=this.getEmbeddedComponentSnapTo(_1,_3,_2,_5),_10=_1.snapEdge||_9;var _11;if(this.allowRowSpanning&&this.getRowSpan){var _12=this.getRowSpan(_3,_2,_5==null?0:_5);if(_12==null)_12=1;_11=0;for(var i=0;i<_12;i++){_11+=this.getRowSize(_2+i)}}else{_11=this.getRowSize(_2)}
var _14=_1._percent_width,_15=_1._percent_height,_16,_17;var _18=0,_19=this.grid.$917(_3);for(var i=0;i<_19.length;i++){var _20=_19[i];if(_20==null)continue;var _21=(_20.embeddedPosition==this.$57l);if(_21)continue;var _22=_20.getVisibleHeight();if(_22>_18){_18=_22}}
_11-=_18;if(_1.snapOffsetLeft)_8-=_1.snapOffsetLeft;if(isc.isA.String(_14)&&_14.endsWith("%")){_16=Math.round((parseInt(_14)*_8)/100)}
if(isc.isA.String(_15)&&_15.endsWith("%")){_17=Math.round((parseInt(_15)*_11)/100)}
var _23=_17!=null?_17:_1.getHeight(),_24=_16!=null?_16:_1.getWidth();if(_17||_16){_1.resizeTo(_16,_17);_1._percent_width=_14;_1._percent_height=_15}
isc.Canvas.snapToEdge([_7,_6,_8,_11],_9,_1,_10)}else{_1.moveTo(_7,_6);var _16,_17,_15=_1._percent_height;if(isc.isA.String(_15)&&_15.endsWith("%")){_17=Math.round((parseInt(_15)*this.cellHeight)/100)}
_16=_8;_1.resizeTo(_16,_17)}
var _25=this.isDrawn();if(_25&&!_1.isDrawn())_1.draw();var _26=this.isDirty(),_27=this.getRowHeight(_3,_2,this.$100b()),_28=!this.isDirty()||_26;if(_28&&(_27!=this.getRowSize(_2))){this.setRowHeight(_2,_27,_3);this.refreshRow(_2)}
if(_25){if(_4!=this.$57l){var _29=this.getDrawnRowHeight(_2)-_1.getVisibleHeight()-1;_1.moveTo(null,this.getRowTop(_2)+_29)}
if(!_1.isVisible()){if(this.shouldAnimateEmbeddedComponent(_1)){_1.animateShow()}else{_1.show()}}}
this.updateEmbeddedComponentZIndex(_1)},isc.A.getEmbeddedComponentSnapTo=function isc_GridRenderer_getEmbeddedComponentSnapTo(_1,_2,_3,_4){if(_1.snapTo!=null)return _1.snapTo;if(_4==null){return"TL"}
var _5=this.getCellAlign(_2,this.fields[_4],_3,_4)||"center",_6=this.getCellVAlign(_2,this.fields[_4],_3,_4)||"center";var _7=this.alignSnapToMap[_5][_6];return _7},isc.A.shouldAnimateEmbeddedComponent=function isc_GridRenderer_shouldAnimateEmbeddedComponent(_1){return false},isc.A.updateEmbeddedComponentZIndex=function isc_GridRenderer_updateEmbeddedComponentZIndex(_1){},isc.A.getEmbeddedComponent=function isc_GridRenderer_getEmbeddedComponent(_1,_2){if(isc.isA.Number(_1))_1=this.getCellRecord(_1,0);var _3=this.grid.$917(_1);if(_3==null)return;var _4=null;if(isc.isA.Number(_2))
_4=_3.find({$57n:_2,$669:this.getID()});else
_4=_3.find({$669:this.getID()});return _4},isc.A.removeEmbeddedComponent=function isc_GridRenderer_removeEmbeddedComponent(_1,_2,_3){if(isc.isA.Number(_1))_1=this.getCellRecord(_1,0);var _4=this.grid.$917(_1);if(_4==null)return;if(isc.isA.Number(_2))
_2=_4.find({$57n:_2,$669:this.getID()});if(!_2)
_2=_4.find({$669:this.getID()});if(!_4.contains(_2))return;if(this.isObserving(_2,"resized")){this.ignore(_2,"resized")}
this.grid.$919(_1,_2);if(this.$29a)this.$29a.remove(_2);_2._redrawWithParent=_2.$29b;_2.$29b=null;_2.bubbleMouseEvents=_2.$668;var _5=_2.embeddedPosition==this.$57m;_2.embeddedPosition=null;_2.$289=null;_2.$57n=null;_2.$669=null;if(_3){_2.hide();return}
if(_2.isExpansionComponent&&this.grid.expansionComponentPoolingMode!="none"){var _6=_2.members[0];if(this.grid.expansionComponentPoolingMode=="destroy"){if(!_6.isStockComponent){if(!this.grid.destroyCustomExpansionComponents&&!_6.destroyOnUnembed){_2.removeMember(_6);_6.deparent()}}
_2.destroy()}}else{if(_2.dontAutoDestroy){this.removeChild(_2)}else if(_2.destroyOnUnEmbed){_2.destroy()}else{this.removeChild(_2)}}
if(_5){this.markForRedraw("removed embedded component")}},isc.A.$29c=function isc_GridRenderer__resetEmbeddedComponents(){var _1=this.$29a;if(_1==null)return;_1.setProperty("$289",null)},isc.A.$29d=function isc_GridRenderer__placeEmbeddedComponents(){var _1=this.$29a;if(_1==null)return;_1.sortByProperty("$289",true);for(var i=0;i<_1.length;i++){this.placeEmbeddedComponent(_1[i])}},isc.A.getTableZIndex=function isc_GridRenderer_getTableZIndex(){return 1000},isc.A.getCellStyle=function isc_GridRenderer_getCellStyle(_1,_2,_3){if(_1&&_1[this.recordCustomStyleProperty]!=null){return _1[this.recordCustomStyleProperty]}
var _4=this.getCellStyleIndex(_1,_2,_3);return this.getCellStyleName(_4,_1,_2,_3)},isc.A.getCellStyleName=function isc_GridRenderer_getCellStyleName(_1,_2,_3,_4){var _5=isc.GridRenderer.standardStyleSuffixes;if(this.getBaseStyle){var _6=this.getBaseStyle(_2,_3,_4);if(_6!==this.baseStyle){if(_1==0)return _6;return _6+_5[_1]}}
if(!this.$29e){this.$29e=[];for(var i=0;i<_5.length;i++){this.$29e[i]=this.baseStyle+_5[i]}}
return this.$29e[_1]},isc.A.getCellStyleIndex=function isc_GridRenderer_getCellStyleIndex(_1,_2,_3){var _4=0;var _5=true;if(this.grid!=null){var _6=this.grid.getField(this.grid.getFieldNumFromLocal(_3,this));_5=!_6?true:_6.showAlternateStyle!=false}
if(_5){var _7=false;if(this.alternateRowStyles){if(this.useRowSpanStyling){var _8=this.getSpanningRowNum(_2);_7=(Math.floor(_8/this.alternateRowFrequency)%2==1);if(_7)_4+=8}else{_7=(Math.floor(_2/this.alternateRowFrequency)%2==1);if(_7)_4+=8}}
if(this.alternateColumnStyles&&!_7){_7=(Math.floor(_3/this.alternateColumnFrequency)%2==1);if(_7)_4+=8}}
if(!this.cellIsEnabled(_2,_3,_1)){_4+=4}else{if(this.shouldShowRollOver(_2,_3)&&!this.isPrinting&&_2==this.lastOverRow&&(!this.useCellRollOvers||_3==this.lastOverCol))
{_4+=1}
if(this.showSelectedStyle&&this.selectionEnabled()){var _9;if(this.canSelectCells){var _10=_2;if(this.useRowSpanStyling)_10=this.getCellStartRow(_2,_3);_9=this.selection.cellIsSelected(_10,_3)}else{_9=this.selection.isSelected(_1)}
if(_9)_4+=2}}
return _4},isc.A.getSpanningRowNum=function isc_GridRenderer_getSpanningRowNum(_1){var _2=this.$99p;if(this.grid&&this.grid.frozenBody){var _2=this.grid.frozenBody.$99p}
return _2!=null?_2[_1]:_1},isc.A.cellIsEnabled=function isc_GridRenderer_cellIsEnabled(_1,_2,_3){return true},isc.A.getTableElementId=function isc_GridRenderer_getTableElementId(){return this.getCanvasName()+"table"},isc.A.getDOMTable=function isc_GridRenderer_getDOMTable(_1,_2){if(this.cacheDOM)return this.getTableChunkAt(_1,_2);if((_1!=null&&(_1-this.$252<0||_1>this.$253))||(_2!=null&&(_2-this.$254<0||_2>this.$255)))
return null;var _3=this.$29f;if(_3==null){var _4=this.getTableElementId();var _3=isc.Element.get(_4);if(_3==null)return null;if(this.$756){this.logInfo("getTableElement() called while updating table HTML. This call may be invalid as the table is being rewritten in the DOM. Suppressing caching of the current element.","redrawing");return _3}}
return this.$29f=_3},isc.A.getTableElement=function isc_GridRenderer_getTableElement(_1,_2){var _3=this.getDOMTable(_1,_2);if(_1==null)return _3;if(!_3)return null;var _4=_1-(this.$252>0?this.$252:0);if(_4<0){return null}
var _5;if(this.$29g!=null)_5=this.$29g[_4];if(_5==null)_5=_3.rows[_4];if(_5==null)return null;if(!this.$756){if(this.$29g==null)this.$29g=[];this.$29g[_4]=_5}
if(_2==null)return _5;var _6=_2-this.$254;if(_6<0){return null}
if(this.allowRowSpanning&&this.getRowSpan){var _7=this.getCellStartRow(_1,_6);if(_7!=_4){_4=_7;_5=this.getTableElement(_7)}
if(_5.childNodes.length<(this.$255-this.$254+1)){var _8=0;for(var i=0;i<_6;i++){if(this.fields[i].$28w!=null&&this.fields[i].$28w[_4]!=null&&this.fields[i].$28w[_4]!=_4)_8++}
_6-=_8}}
return _5.childNodes[_6]},isc.A.$29h=function isc_GridRenderer__updateCellStyle(_1,_2,_3,_4,_5){if(_4==null)_4=this.getTableElement(_2,_3);if(_4==null)return;if(_1==null)_1=this.getCellRecord(_2,_3);if(_5==null)_5=this.getCellStyle(_1,_2,_3);if(this.fastCellUpdates){_4.style.cssText=this.$29i(_1,_2,_3,_5)}else{if(_4.className!=_5)_4.className=_5;if(this.getCellCSSText){_4.style.cssText=this.$29i(_1,_2,_3,_5)}}
if(this.shouldRefreshCellHTML(_1,_2,_3)){this.refreshCellValue(_2,_3)}
if(!this.isDrawn())return;if(!this.suppressRowHeightUpdate)this.$1265(_1,_2,_5)},isc.A.$1265=function isc_GridRenderer__updateRowHeight(_1,_2,_3){var _4=this.fixedRowHeights&&(this.shouldFixRowHeight==null||this.shouldFixRowHeight(_1,_2)!=false),_5=(this.getRowHeight!=null?this.getRowHeight(_1,_2,this.$100b()):this.cellHeight);this.setRowHeight(_2,_5,_1,_3,_4)},isc.A.$28g=function isc_GridRenderer__getCellClipDiv(_1){if(_1==null)return null;var _2=_1.firstChild;if(!_2)return null;if(_2.tagName==this.$27t)_2=_2.firstChild;if(_2&&(_2.cellClipDiv||(_2.getAttribute&&_2.getAttribute(this.$27u))))
{return _2}
return null},isc.A.setRowHeight=function isc_GridRenderer_setRowHeight(_1,_2,_3,_4,_5,_6){var _7=this.$254,_8=this.$255;if(_5==null){if(_3==null)_3=this.getCellRecord(_1,_7);_5=this.fixedRowHeights&&(this.shouldFixRowHeight==null||this.shouldFixRowHeight(_3,_1)!=false)}
var _9=this.getTableElement(_1,_7),_10=_9?parseInt(_9.height):null,_11;if(!isc.isA.Number(_10))_10=null;if(isc.Browser.isStrict&&((isc.Browser.isMoz&&isc.Browser.version>=17)||(isc.Browser.isSafari||isc.Browser.isIE))){if(_3==null)_3=this.getCellRecord(_1,_7);var _12=_4;if(_12==null)_12=this.getCellStyle(_3,_1,_7)
_2-=isc.Element.$ym(_12);if(!this.fixedRowHeights)_2-=(this.cellPadding*2)}
if((!_5&&_10!=null)||(_10!=_2&&!(_10==null&&_2==isc.emptyString)))
{_11=true}
if(!_11)return;var _13=isc.isA.Number(_2);if(_13&&_2<=0)_2=_5?0:1;var _14=this.getTableElement(_1);if(_14==null)return;if(_2==0&&_5){_14.style.display="none"}else{_14.style.display=isc.emptyString;var _15=(!isc.Browser.isIE||isc.Browser.isStrict)?this.$o5:this.$27v,_16=_13?_2+isc.px:_2,_17=_5?_16:isc.emptyString;for(var i=_7;i<=_8;i++){var _19=this.getTableElement(_1,i);if(_19){if(_5){_19.height=_16;_19.style[_15]=isc.emptyString}else{_19.height=isc.emptyString;_19.style[_15]=_16}
var _20=this.$28g(_19);if(_20){if(isc.Browser.isMoz||isc.Browser.isSafari)
_20.style.maxHeight=_17;else
_20.style.height=_17}}}}
if(isc.Browser.isSafari&&this.$28o){var _21=this.getTableElement(_1);if(_21!=null){_21.innerHTML=_21.innerHTML}}
this.$29j();if(_6){this.adjustOverflow("cell height changed")}else{this.$t6("cell height changed")}});isc.evalBoundary;isc.B.push(isc.A.$29i=function isc_GridRenderer__getCompleteCellCSSText(_1,_2,_3,_4){var _5=null;if(this.fixedRowHeights)_5=this.$721;else{_5=this.$281(_1,_2)}
if(isc.Browser.isIE8Strict){if(_5==null)_5=this.$722;else _5+=this.$722}
if(isc.Browser.isMoz||isc.Browser.isSafari){if(_5==null)_5=this.$28z(_3);else _5+=this.$28z(_3)}
if(this.fastCellUpdates){if(_4==null)_4=this.getCellStyle(_1,_2,_3);var _6=isc.Element.getStyleText(_4,true);if(_6==null&&isc.Page.$29k){this.logInfo("fastCellUpdates set to true but this page loads styles from a remote stylesheet. This is unsupported - disabling fastCellUpdates.");this.fastCellUpdates=false;this.redraw()}
if(_5!=null)_5+=_6;else _5=_6}
if(this.getCellCSSText){var _7=this.getCellCSSText(_1,_2,_3)
if(_7!=null){if(!_7.endsWith(this.$39)){_7+=this.$39}
if(_5!=null)_5+=_7
else _5=_7}}
if(isc.Browser.isIE8Strict&&!this.wrapCells){_5+=";white-space: nowrap;"}
return _5},isc.A.shouldRefreshCellHTML=function isc_GridRenderer_shouldRefreshCellHTML(_1,_2,_3){return this.showHiliteInCells},isc.A.$29l=function isc_GridRenderer__readyToRefreshCell(_1,_2){if((isc.EH.$ku||isc.EH.$km)&&isc.EH.lastEvent.target==this){var _3=this.getEventRow();if(_3!=_1)return true;if(_2!=null){var _4=this.getEventColumn();if(_2!=_4)return true}
return false}
return true},isc.A.refreshCellValue=function isc_GridRenderer_refreshCellValue(_1,_2){var _3=this.getTableElement(_1,_2);if(!_3)return;if(!this.$29l(_1,_2)){this.delayCall("refreshCellValue",[_1,_2]);return}
var _4=this.getCellRecord(_1,_2),_5=this.fields[_2];if(!_5){this.logDebug("refreshCell called for invalid field "+_2);return}
var _6=isc.StringBuffer.create();var _7=this.$28v(_9),_8=!this.wrapCells&&!isc.Browser.isIE8Strict;if(_7){_6.append(this.$27s);var _9=(this.getRowHeight!=null?this.getRowHeight(_4,_1,this.$100b()):this.cellHeight);_6.append(this.$283(_9,_4,_1));var _10=this.$282(_1,_4);if(!_10){_6.append(this.$280(_2))}
if(_8)_6.append("white-space:nowrap;");_6.append("'>")}
var _11=_8&&!_7;if(_11){_6.append("<NOBR>")}
_6.append(this.$22k(_4,_1,_2));if(_11&&this.closeNOBRs){_6.append("</NOBR>")}
if(_7){_6.append("</DIV>")}
_3.innerHTML=_6.release()},isc.A.setCellStyle=function isc_GridRenderer_setCellStyle(_1,_2,_3){return this.setRowStyle(_1,_3,_2)},isc.A.setRowStyle=function isc_GridRenderer_setRowStyle(_1,_2,_3){if(isc.$cv)arguments.$cw=this;if(_1==null||_1<0){this.logWarn("setRowStyle: bad rowNum: "+_1);return false}
var _4=this.getTableElement(_1,_3);if(_4==null){return false}
var _5=this.getCellRecord(_1,_3);if(_5&&_5.$29m){return}
if(_3!=null){this.$29h(_5,_1,_3,_4,_2)}else{var _6=this.getTableElement(_1);if(_6!=null){var _7="TD",_8=(!this.shouldShowAllColumns()?this.$254:0),_9=(!this.shouldShowAllColumns()?this.$255:this.fields.length-1),_10=0;var _11=this.suppressRowHeightUpdate;this.suppressRowHeightUpdate=true;for(var _12=_8;_12<=_9;_12++,_10++){var _4;if(this.showColumnsSeparately||this.cacheDOM){_4=this.getTableElement(_1,_12)}else{_4=_6.childNodes[_10]}
if(_4==null)continue;this.$29h(_5,_1,_12,_4,_2)}
if(!_11){delete this.suppressRowHeightUpdate;this.$1265(_5,_1,_2)}}}
return true},isc.A.refreshCellStyle=function isc_GridRenderer_refreshCellStyle(_1,_2,_3){return this.setCellStyle(_1,_2,_3)},isc.A.refreshCell=function isc_GridRenderer_refreshCell(_1,_2){this.refreshCellStyle(_1,_2);if(!this.shouldRefreshCellHTML())this.refreshCellValue(_1,_2)},isc.A.refreshRow=function isc_GridRenderer_refreshRow(_1){if(!this.$29l(_1)){this.delayCall("refreshRow",[_1])}
for(var i=0;i<this.fields.length;i++){this.refreshCell(_1,i)}},isc.A.refreshCellStyles=function isc_GridRenderer_refreshCellStyles(_1,_2){this.logDebug("refreshing cell styles: "+_1.length+" cells");for(var i=0;i<_1.length;i++){var _4=_1[i][0],_5=_1[i][1];var _6=this.getTableElement(_4,_5);if(_6==null){continue}else{this.$29h(null,_4,_5,_6,_2)}}
return true},isc.A.getCellPageRect=function isc_GridRenderer_getCellPageRect(_1,_2){return[this.getColumnPageLeft(_2),this.getRowPageTop(_1),this.getColumnSize(_2),this.getRowSize(_1)]},isc.A.getColumnLeft=function isc_GridRenderer_getColumnLeft(_1){if(this.isRTL()){return this.getViewportWidth()-this.$26a.sum(0,_1+1)}else{return this.$26a.sum(0,_1)}},isc.A.getColumnPageLeft=function isc_GridRenderer_getColumnPageLeft(_1){var _2=this.getColumnLeft(_1);if(_2==null)return null;var _3=this.getPageLeft()-this.getScrollLeft()+_2;if(this.isRTL()){if(this.vscrollOn)_3+=this.getScrollbarSize();_3+=this.getScrollWidth()-this.getViewportWidth()}
return _3},isc.A.getColumnWidth=function isc_GridRenderer_getColumnWidth(_1){return this.$26a[_1]},isc.A.getInnerColumnWidth=function isc_GridRenderer_getInnerColumnWidth(_1){var _2=this.getColumnWidth(_1);if(_2==null)return null;return(_2-(2*this.cellSpacing+this.$54q()))},isc.A.$54q=function isc_GridRenderer__getCellHBorderPad(_1){if(!_1&&this.$54r!=null)return this.$54r;var _2=this.$54p(),_3=isc.Element.$tr(_2,true),_4=isc.Element.$ts(_2,true),_5=isc.Element.$yn(_2);if(_3==null)_3=this.cellPadding;if(_4==null)_4=this.cellPadding;this.$54r=(_3+_4+_5);return this.$54r},isc.A.getRowTop=function isc_GridRenderer_getRowTop(_1){if(_1<this.$252)return this.getAvgRowHeight()*_1;var _2=this.$29n(),_3=this.$26b();if(_1>this.$253){return _2+_3.sum()+(((_1-1)-this.$253)*this.getAvgRowHeight())}
return _2+_3.sum(0,_1-this.$252)},isc.A.getRowPageTop=function isc_GridRenderer_getRowPageTop(_1){return this.getPageTop()+this.getTopBorderSize()+(this.getRowTop(_1)-this.getScrollTop())},isc.A.getRowSize=function isc_GridRenderer_getRowSize(_1){return this.getDrawnRowHeight(_1)},isc.A.getDrawnRowHeight=function isc_GridRenderer_getDrawnRowHeight(_1){if(this.$252==null||this.$253==null||_1<this.$252||_1>this.$253)
{return this.getAvgRowHeight()}
var _2=_1-this.$252,_3=this.$26b();return _3[_2]},isc.A.getColumnSize=function isc_GridRenderer_getColumnSize(_1){if((this.fixedFieldWidths&&!this.autoSize)||(_1<this.$254||_1>this.$255))
{return this.getColumnWidth(_1)}
var _2=_1-this.$254,_3=this.getColumnSizes();return _3[_2]},isc.A.$29n=function isc_GridRenderer__getUndrawnHeight(){return this.$252*this.getAvgRowHeight()},isc.A.$26b=function isc_GridRenderer__getDrawnRowHeights(){if(this.$8s!=null)return this.$8s;var _1=this.$8s=[];var _2=this.getTableElement();if(!_2||!_2.rows){delete this.$8s;return _1}
var _3=isc.Browser.isSafari&&isc.Browser.safariVersion<500;var _4=this.getDrawnRows(),_5=_4[1]-_4[0]+1,_6=false,_7=null,_8=0,_9=this.isRTL();for(var _10=0;_10<=_5;_10++){var _11=this.cacheDOM?this.getTableElement(_10+this.$252):_2.rows[_10];if(_11==null){}else if(isc.Browser.$117b){var _12=isc.Element.getBoundingClientRect(_11);if(_7==null)_7=_12;_1[_10]=Math.round((_12.bottom-_7.top)-_8)}else if(this.allowRowSpanning&&this.getRowSpan){_1[_10]=_11.offsetHeight}else{var _13=(_3&&(this.fixedRowHeights==false||(this.shouldFixRowHeight!=null&&this.shouldFixRowHeight(this.getCellRecord(_10),_10)==false))),_14,_15=[];if(!_3||!_13){_14=_11.lastChild}else{for(var k=0;k<_11.childNodes.length;k++){_15[k]=_11.childNodes[k]}}
if(_13){_1[_10]=0;for(var _17=0;_17<_15.length;_17++){var _18=_15[_17],_19=_18.offsetHeight;var _20=parseInt(_18.style?_18.style.height:null);if(isc.Browser.isStrict){if(this.cellPadding)_20+=this.cellPadding;_20+=isc.Element.$yo(_18.className)}
if(isc.isA.Number(_20)&&_20>_19)
_19=_20;if(_19>_1[_10])_1[_10]=_19}
_1[_10]+=this.cellSpacing}else if(_14){if(!_3){_1[_10]=_14.offsetHeight}else{var _21=parseInt(_14.height);if(_21!=null&&isc.isA.Number(_21)){if(isc.Browser.isStrict){_21+=isc.Element.$ym(_14.className)}}else{_21=_14.offsetHeight||0}
_1[_10]=_21}
_1[_10]+=this.cellSpacing}}
var _19=_1[_10];if(_19>0){_6=true;_8+=_19}}
_1[0]+=this.cellSpacing;if(!_6){this.logWarn("row heights not yet available; returning all zeroes");this.$8s=null}
if(isc.Browser.isSafari&&!isc.Page.isLoaded())this.$8s=null;return _1},isc.A.getColumnSizes=function isc_GridRenderer_getColumnSizes(){if(this.$29o!=null)return this.$29o;if(!this.isDrawn())return this.$26a.duplicate()||[];if(this.fixedColumnWidths&&isc.Browser.version>=5){return(this.$29o=this.$26a.duplicate())}else{var _1=this.$29o=[];var _2=this.getTableElement(this.$252);if(_2==null){this.$29o=_1.concat(this.$26a);return this.$29o}
var _3=(isc.Browser.isMac?this.cellSpacing:0);for(var _4=0;_4<this.fields.length;_4++){var _5;if(this.showColumnsSeparately){_5=this.getTableElement(this.$252,_4)}else if(!(isc.Browser.isSafari&&isc.Browser.safariVersion<125)){_5=_2.childNodes[_4]}
if(_5){_1[_4]=_5.offsetWidth+_3}else{_1[_4]=this.$26a[_4]}}
this.innerWidth=this.getTableElement().offsetWidth;return _1}},isc.A.getEventRow=function isc_GridRenderer_getEventRow(_1){if(this.isEmpty())return-2;if(_1==null)_1=this.getOffsetY();if(this.startSpace)_1-=this.startSpace;var _2=this.$29n();if(_1<=_2)return Math.floor(_1/this.getAvgRowHeight());var _3=_1-_2,_4=this.$26b();var _5=this.inWhichPosition(_4,_3),_6;if(_5>=0){_6=this.$252+_5}else{var _7=_3-_4.sum();_6=this.$253+1+Math.floor(_7/this.getAvgRowHeight());if(_6>=this.getTotalRows())_6=-2}
return _6},isc.A.getEventColumn=function isc_GridRenderer_getEventColumn(_1){var _2=this.getColumnSizes();if(_1==null)_1=this.getOffsetX();return this.inWhichPosition(_2,_1,this.getTextDirection())},isc.A.getFocusRow=function isc_GridRenderer_getFocusRow(){return 0},isc.A.getFocusCol=function isc_GridRenderer_getFocusCol(){return 0},isc.A.getNativeFocusRow=function isc_GridRenderer_getNativeFocusRow(){var _1=this.$86b;if(_1==null)_1=this.getFocusRow();var _2=this.getDrawnRows();if(_2!=null&&_2.length>0&&(_1==null||_1<_2[0]||_1>_2[1])){_1=this.$27x()[0];if(this.getRowTop(_1)<this.getScrollTop())_1+=1}
return _1},isc.A.getNearestRowToEvent=function isc_GridRenderer_getNearestRowToEvent(){var _1=this.getEventRow();if(_1<0){var _2=this.getVisibleRows();if(_1==-1)return _2[0];if(_1==-2)return _2[1]}
return _1},isc.A.getNearestColToEvent=function isc_GridRenderer_getNearestColToEvent(){var _1=this.getEventColumn();if(_1<0){var _2=this.getVisibleColumns();if(_1==-1)return _2[0];if(_1==-2)return _2[1]}
return _1},isc.A.$27x=function isc_GridRenderer__getViewportFillRows(){var _1=this.getViewportHeight(),_2=this.getAvgRowHeight();var _3=Math.floor(this.getScrollTop()/_2);var _4;if(this.autoFitData=="both"||this.autoFitData=="vertical"){_4=this.getTotalRows()-_3;var _5=this.autoFitMaxRecords;if(_5!=null&&_5<_4)_4=_5;var _6=this.getAutoFitMaxHeight();if(_6!=null){var _7=Math.ceil(_6/this.cellHeight);if(_7<_4)_4=_7}}else{_4=Math.ceil(_1/this.cellHeight)}
var _8=_3+_4-1;if(this.startSpace){var _9=Math.floor(this.startSpace/_2);_3=Math.max(0,_3-_9);_8=Math.max(0,_8-_9)}
var _10=this.virtualScrolling&&this.$27y!=null;if(_10){if(_3==0&&_8>=(this.getTotalRows()-1))_10=false}
if(!_10)return[_3,_8];var _11=this.$27y;if(this.$27z<0)_11+=Math.floor(this.$27z/this.cellHeight);if(_11<0)_11=0;var _12=_11+Math.ceil(_1/this.cellHeight);return[_11,_12]},isc.A.getAvgRowHeight=function isc_GridRenderer_getAvgRowHeight(){return this.fixedRowHeights?this.cellHeight:Math.max(this.cellHeight,this.avgRowHeight)},isc.A.getVisibleRows=function isc_GridRenderer_getVisibleRows(){if(isc.ResultSet&&isc.isA.ResultSet(this.data)&&!this.data.lengthIsKnown())
{return[-1,-1]}
var _1=this.getScrollTop();var _2=[this.getEventRow(_1),this.getEventRow(_1+this.getInnerHeight())];if(_2[1]==-2){var _3=this.getTotalRows();if(_3==0||_2[0]<0){_2[0]=-1;_2[1]=-1}else{_2[1]=this.getTotalRows()-1}}
return _2},isc.A.getVisibleColumns=function isc_GridRenderer_getVisibleColumns(){var _1=this.$26a;if(this.overflow==isc.Canvas.VISIBLE)return[0,_1.length-1];var _2=this.getScrollLeft();if(this.isRTL()){var _3=this.getScrollWidth()-this.getInnerWidth(),_2=_3-_2}
var _4=this.inWhichPosition(_1,_2),_5=this.inWhichPosition(_1,_2+this.getInnerWidth());if(_5==-2)_5=this.$26a.length-1;return[_4,_5]},isc.A.getDrawnRows=function isc_GridRenderer_getDrawnRows(){if(this.cacheDOM)return this.getVisibleRows();return[this.$252,this.$253]},isc.A.shouldShowRollOver=function isc_GridRenderer_shouldShowRollOver(_1,_2){return(this.showRollOver&&!this.$28j)},isc.A.updateRollOver=function isc_GridRenderer_updateRollOver(_1,_2){this.setRowStyle(_1,null,(this.useCellRollOvers?_2:null))},isc.A.startHover=function isc_GridRenderer_startHover(){},isc.A.mouseMove=function isc_GridRenderer_mouseMove(_1,_2){if(this.$29p())return;if(this.$964){this.$964=false;return}
var _3=this.getEventRow(),_4=this.getEventColumn();var _5=this.pendingActionOnPause("scrollRedraw"),_6=this.getDrawnRows();if(_5&&_6&&(_3<_6[0]||_3>_6[1]))
{return}
var _7=this.lastOverRow,_8=this.lastMouseOverRow,_9=this.lastOverCol,_10=this.lastMouseOverCol;var _11=(_3>=0&&_4>=0),_12=!(_3==_7&&_4==_9),_13=!(_3==_8&&_4==_10),_14=_11&&(_12||_13||this.cellMove||this.rowMove),_15=_14&&this.getCellRecord(_3,_4),_16=(_11&&_14&&this.cellIsEnabled(_3,_4,_15));if(_12){if(_7!=null&&_9!=null){this.lastOverRow=null;this.lastOverCol=null;if(_3!=_7||_4<0||this.useCellRollOvers){this.updateRollOver(_7,_9,_16)}}
if(_16){this.lastOverRow=_3;this.lastOverCol=_4;if(_7!=_3||this.useCellRollOvers){if(this.shouldShowRollOver(_3,_4)){this.updateRollOver(_3,_4)}}}}
var _17=this.$1269!=_1.target&&(_1.target==this);this.$1269=_1.target;if(_13||_17){if(_8!=null&&_10!=null){this.lastMouseOverRow=null;this.lastMouseOverCol=null;if((_3!=_8||_4<0||this.hoverByCell)&&this.getCanHover()&&!this.keepHoverActive)
{this.stopHover()}
var _18=this.getCellRecord(_8,_10);if(this.cellOut){this.cellOut(_18,_8,_10)}
if(_3!=_8&&this.rowOut){this.rowOut(_18,_8,_10)}}
if(_16){this.lastMouseOverRow=_3;this.lastMouseOverCol=_4;if(_3!=_8||this.hoverByCell){if(_11&&this.getCanHover()){isc.Hover.setAction(this,this.$29q,[_3,_4],this.hoverDelay)}}
if(this.cellOver){this.cellOver(_15,_3,_4)}
if(_3!=_8&&this.rowOver){this.rowOver(_15,_3,_4)}}}
if(_11){if(this.cellMove){this.cellMove(_15,_3,_4)}
if(this.rowMove){this.rowMove(_15,_3,_4)}}
if(_5&&this.$1337){var _19=this.getScrollRedrawDelay(this.$138f);this.fireOnPause("scrollRedraw",this.$134a(),_19)}},isc.A.$29p=function isc_GridRenderer__suppressEventHandling(){if(this.$28j!=null)return true;return false},isc.A.mouseOut=function isc_GridRenderer_mouseOut(){var _1=isc.EH.getTarget();if(this.$29a){var _2=this.$29a;for(var i=0;i<_2.length;i++){if(!_2[i])continue;if(_2[i].contains(_1,true)){return}}}
if(_1==this&&!isc.EH.getDragTarget()&&!isc.EH.$118u){return}
if(this.getCanHover())this.stopHover();if(this.lastOverRow!=null&&this.lastOverCol!=null){var _4=this.lastOverRow,_5=this.lastOverCol;this.lastOverRow=null;this.lastOverCol=null;if(this.shouldShowRollOver(_4,_5)){this.updateRollOver(_4,_5)}}
if(this.lastMouseOverRow!=null&&this.lastMouseOverCol!=null){var _4=this.lastMouseOverRow,_5=this.lastMouseOverCol,_6=this.getCellRecord(_4,_5);this.lastMouseOverRow=null;this.lastMouseOverCol=null;if(this.cellOut){this.cellOut(_6,_4,_5)}
if(this.rowOut){this.rowOut(_6,_4,_5)}}},isc.A.$1159=function isc_GridRenderer__getShowClippedValuesOnHover(){return this.showClippedValuesOnHover},isc.A.$29q=function isc_GridRenderer__cellHover(_1,_2){var _3=this.getCellRecord(_1,_2);if(!this.shouldFireCellHover(_3,_1,_2))return;var _4,_5=this.cellValueIsClipped(_1,_2);if(this.$1159()&&_5&&this.cellValueHover&&this.cellValueHover(_3,_1,_2)==false)
{_4=false}
if(this.cellHover&&this.cellHover(_3,_1,_2)==false)_4=false;if(this.rowHover&&this.rowHover(_3,_1,_2)==false)_4=false;if(_4==false)return;if(this.showHover)this.$29r(_3,_1,_2,_5)},isc.A.shouldFireCellHover=function isc_GridRenderer_shouldFireCellHover(_1,_2,_3){return _1!=null},isc.A.defaultCellValueHoverHTML=function isc_GridRenderer_defaultCellValueHoverHTML(_1,_2,_3){return this.$22k(_1,_2,_3)},isc.A.$29r=function isc_GridRenderer__showHover(_1,_2,_3,_4){var _5=this.$wc();var _6=this.$784(_1,_2,_3);if(!_6){var _7=false,_8=false;if(this.cellHoverHTML.$118m&&this.grid){var _9=this.grid,_10=_9.getFieldNumFromLocal(_3,this),_11=_9.getField(_10);_7=(_9.canHover||(_11.showHover&&_9.canHover!=false)||_9.cellHoverHTML!=_9.getClass().getInstanceProperty("cellHoverHTML")||(_9.canHover==null&&_11.showHover))&&_11.showHover!=false;_8=_9.$118o(_2,_10)}
if(!_8){if(!_7){if(this.$1159()&&_4){_6=this.cellValueHoverHTML(_1,_2,_3,this.defaultCellValueHoverHTML(_1,_2,_3))}}else{_6=this.cellHoverHTML(_1,_2,_3)}}}
isc.Hover.show(_6,_5,this.cellHoverBoundary(_2,_3),this.getHoverTarget())},isc.A.$784=function isc_GridRenderer__getCellHoverComponent(_1,_2,_3){},isc.A.getHoverTarget=function isc_GridRenderer_getHoverTarget(){return this},isc.A.cellHoverHTML=function isc_GridRenderer_cellHoverHTML(_1,_2,_3){return null},isc.A.cellValueHoverHTML=function isc_GridRenderer_cellValueHoverHTML(_1,_2,_3,_4){return null},isc.A.getCellHoverComponent=function isc_GridRenderer_getCellHoverComponent(_1,_2,_3){return null},isc.A.cellHoverBoundary=function isc_GridRenderer_cellHoverBoundary(_1,_2){return null},isc.A.showContextMenu=function isc_GridRenderer_showContextMenu(){if(this.$29p())return false;var _1=this.getEventRow(),_2=this.getEventColumn();var _3=isc.EH.isKeyEvent();if(_3){_1=this.getFocusRow(),_2=this.getFocusCol()}
var _4=(_1>=0&&_2>=0),_5=_4&&this.getCellRecord(_1,_2);if(_4&&this.cellIsEnabled(_1,_2,_5)){var _6;if(this.cellContextClick)
if(this.cellContextClick(_5,_1,_2)==false)_6=false;if(this.rowContextClick)
if(this.rowContextClick(_5,_1,_2)==false)_6=false;if(this.recordContextClick)
if(this.recordContextClick(_5,_1,_2)==false)_6=false;if(_6==false)return false}
return this.Super("showContextMenu")},isc.A.setSelection=function isc_GridRenderer_setSelection(_1){this.selection=_1;if(this.selection.isA("CellSelection")){this.observe(this.selection,"selectionChanged",function(){this.$29s(this.selection.changedCells)})}else{this.observe(this.selection,"setSelected",function(){this.$895(this.selection)})}},isc.A.clearSelection=function isc_GridRenderer_clearSelection(){if(this.selection){if(this.isObserving(this.selection,"selectionChanged"))
this.ignore(this.selection,"selectionChanged");if(this.isObserving(this.selection,"setSelected"))
this.ignore(this.selection,"setSelected");delete this.selection}},isc.A.$29s=function isc_GridRenderer__cellSelectionChanged(_1){if(this.cellSelectionChanged){if(this.cellSelectionChanged(_1)==false)return false}
this.refreshCellStyles(_1)},isc.A.$895=function isc_GridRenderer__setSelectedObservation(_1){var _2=false;if(!!_1.lastSelectionPreviousState!=!!_1.lastSelectionState){_2=true}else if(_1.lastSelectionState&&(!!_1.lastSelectionPartialValue!=!!_1.lastSelectionPreviousPartialValue))
{_2=true}
if(_2){this.$29t(_1.lastSelectionItem,!!_1.lastSelectionState,_1.cascadeSyncOnly)}},isc.A.$29t=function isc_GridRenderer__rowSelectionChanged(_1,_2,_3){if(!_3){if(this.handleSelectionChanged(_1,_2)==false){return false}}
if(this.selection.$915){this.markForRowSelectionRefresh();return}
var _4=this.selection,_5=_4.lastSelectionItem,_6=_4.data.indexOf(_5,this.$252,this.$253);if(_6==-1)_6=_4.data.indexOf(_5);if(_6==-1)return;this.updateRowSelection(_6)},isc.A.markForRowSelectionRefresh=function isc_GridRenderer_markForRowSelectionRefresh(){this.markForRedraw("Selection changed")},isc.A.handleSelectionChanged=function isc_GridRenderer_handleSelectionChanged(_1,_2){if(this.selectionChanged)return this.selectionChanged(_1,_2)},isc.A.updateRowSelection=function isc_GridRenderer_updateRowSelection(_1){this.setRowStyle(_1)},isc.A.selectionEnabled=function isc_GridRenderer_selectionEnabled(){return this.selection!=null},isc.A.canSelectRecord=function isc_GridRenderer_canSelectRecord(_1){return(_1!=null&&_1[this.recordCanSelectProperty]!==false)},isc.A.mouseDown=function isc_GridRenderer_mouseDown(){if(this.$29p())return;var _1=this.getEventRow(),_2=this.getEventColumn();if(!(_1>=0&&_2>=0))return;var _3=this.getCellRecord(_1,_2);if(!this.cellIsEnabled(_1,_2,_3))return false;this.$29u=_1;this.$29v=_2;this.$723=isc.EH.getX();this.$724=isc.EH.getY();if(!isc.EH.rightButtonDown()){return this.$29w(_3,_1,_2)}else{return this.$29x(_3,_1,_2)}},isc.A.rightMouseDown=function isc_GridRenderer_rightMouseDown(){return this.mouseDown()},isc.A.$29w=function isc_GridRenderer__cellMouseDown(_1,_2,_3){var _4;if(this.cellMouseDown&&(this.cellMouseDown(_1,_2,_3)==false))_4=false;if(this.rowMouseDown&&(this.rowMouseDown(_1,_2,_3)==false))_4=false;if(this.recordMouseDown&&this.recordMouseDown(_2,_3)==false)_4=false;if(_4==false)return false;this.selectOnMouseDown(_1,_2,_3)},isc.A.selectOnMouseDown=function isc_GridRenderer_selectOnMouseDown(_1,_2,_3){if(!this.selectionEnabled())return true;if(_2>=0&&_3>=0&&this.canSelectRecord(_1)&&!this.$89v()){this.$828=true;var _4=this.selection.selectOnMouseDown(this,_2,_3);if(_4&&this.fireSelectionUpdated&&isc.isA.Function(this.fireSelectionUpdated)){this.fireSelectionUpdated()}}},isc.A.$89v=function isc_GridRenderer__shouldSelectOnMouseUp(){if(isc.EH.dragTarget!=null&&isc.EH.dragOperation==isc.EH.DRAG_SCROLL){return true}
return false},isc.A.$29x=function isc_GridRenderer__cellRightMouseDown(_1,_2,_3){if(this.canSelectOnRightMouse)this.selectOnRightMouseDown(_1,_2,_3)},isc.A.$u6=function isc_GridRenderer__scrolled(_1,_2){if(this.grid&&this.grid.$965){if(isc.Browser.nativeMouseMoveOnCanvasScroll){this.$964=true;isc.Page.setEvent(isc.EH.MOUSE_MOVE,this,"once","$966")}
this.$95i(this,_1,_2);if(this.scrolled)this.scrolled(_1,_2)}else{this.Super("$u6",arguments)}},isc.A.$966=function isc_GridRenderer__suppressMouseMove(){var _1=isc.EH.lastEvent.target;if(_1!=this)this.$964=false},isc.A.selectOnRightMouseDown=function isc_GridRenderer_selectOnRightMouseDown(_1,_2,_3){this.selectOnMouseDown(_1,_2,_3)},isc.A.mouseUp=function isc_GridRenderer_mouseUp(){if(this.$29p())return;var _1=this.getEventRow(),_2=this.getEventColumn();if(!(_1>=0&&_2>=0))return;var _3=this.getCellRecord(_1,_2);if(!this.cellIsEnabled(_1,_2,_3))return;var _4;if(this.cellMouseUp&&(this.cellMouseUp(_3,_1,_2)==false))_4=false;if(this.rowMouseUp&&(this.rowMouseUp(_3,_1,_2)==false))_4=false;if(this.recordMouseUp&&this.recordMouseUp(_1,_2)==false)_4=false;if(_4==false)return _4;this.selectOnMouseUp(_3,_1,_2)},isc.A.selectOnMouseUp=function isc_GridRenderer_selectOnMouseUp(_1,_2,_3){if(!this.selectionEnabled())return true;if(_2>=0&&_3>=0){var _4=false;if(this.$89v()){this.$828=true;_4=this.selection.selectOnMouseDown(this,_2,_3)}
if(this.grid)this.grid.$67j=true;if(this.selection.selectOnMouseUp(this,_2,_3))_4=true;if(this.grid)this.grid.$67j=null;if(_4){this.markForRedraw();if(this.$828){if(this.fireSelectionUpdated&&isc.isA.Function(this.fireSelectionUpdated)){this.fireSelectionUpdated()}
if(this.grid.getCurrentCheckboxField()!=null){this.grid.updateCheckboxHeaderState()}
this.$828=null}}}},isc.A.click=function isc_GridRenderer_click(){if(this.$29p())return;var _1=this.getEventRow(),_2=this.getEventColumn();return this.$29y(_1,_2)},isc.A.$29y=function isc_GridRenderer__rowClick(_1,_2){this.$29z=this.$290=null;var _3=this.$29u;if(_3!=null&&_1!=_3){if(isc.EH.getX()==this.$723){_1=this.$29u}else{return}}
if(isc.EH.getY()==this.$724&&this.$29v!=null){_2=this.$29v}
if(!(_1>=0&&_2>=0))return;var _4=this.getCellRecord(_1,_2);if(!this.cellIsEnabled(_1,_2,_4))return false;this.$29z=_1;var _5;if(!this.$22n(_4,_1,_2))_5=false;if(this.rowClick&&(this.rowClick(_4,_1,_2)==false))
_5=false;this.$29u=null;return _5},isc.A.$22n=function isc_GridRenderer__cellClick(_1,_2,_3){if(this.$29v!=_3){this.$290=null;return}
this.$290=_3;this.$291=null;return!(this.cellClick&&(this.cellClick(_1,_2,_3)==false))},isc.A.doubleClick=function isc_GridRenderer_doubleClick(){if(this.$29p())return;var _1=this.getEventRow(),_2=this.getEventColumn();if(!(_1>=0&&_2>=0))return;var _3=this.getCellRecord(_1,_2);if(!this.cellIsEnabled(_1,_2,_3))return false;if(_1!=this.$29z){return this.$29y(_1,_2)}
var _4;if(_2!=this.$290){_4=this.$22n(_3,_1,_2)}else if(this.cellDoubleClick&&(this.cellDoubleClick(_3,_1,_2)==false))
{_4=false}
if(this.rowDoubleClick&&(this.rowDoubleClick(_3,_1,_2)==false))
_4=false;this.$29u=this.$29v=null;this.$29z=this.$290=null;if(_4==false)return false},isc.A.dragStart=function isc_GridRenderer_dragStart(){var _1=isc.EH,_2=_1.lastEvent;if(_2.target==this&&_2.eventType=="dragStart")
{var _3;try{_3=_2.DOMevent.dataTransfer}catch(e){_3=null}
if(_3!=null&&_3.setDragImage!=null){var _4=this.getNearestRowToEvent(),_5=this.getTableElement(_4);if(_5!=null){var _6=isc.Element.getOffsets(_5),x=_1.getX(),y=_1.getY();_3.setDragImage(_5,x-_6.left,y-_6.top)}}}},isc.A.dragMove=function isc_GridRenderer_dragMove(){if(this.$29p()||!this.selectionEnabled()||!this.canDragSelect)
return true;var _1=this.getNearestRowToEvent(),_2=this.getNearestColToEvent();this.selection.selectOnDragMove(this,_1,_2)},isc.A.dragStop=function isc_GridRenderer_dragStop(){this.fireSelectionUpdated()},isc.A.noSnapDragOffset=function isc_GridRenderer_noSnapDragOffset(_1){return this.snapToCells},isc.A.getHSnapPosition=function isc_GridRenderer_getHSnapPosition(_1,_2){if(!this.snapToCells){return this.Super("getHSnapPosition",arguments)}
var _3=this.ns.EH,_4=_2||this.snapHDirection,_5=this.snapHGap?Math.floor(_1/this.snapHGap):this.getEventColumn(_1),_6=this.snapHGap?(_5*this.snapHGap):this.getColumnLeft(_5),_7=this.snapHGap?_6+this.snapHGap:this.getColumnLeft(_5)+this.getColumnSize(_5),_8=this.snapHGap?_5+1:this.getEventColumn(_7+1),_9;if(_8>=0){_9=this.snapHGap?_8*this.snapHGap:this.getColumnLeft(_8)}else{_9=_6}
var _10=_6+(this.snapHGap?this.snapHGap:this.getColumnSize(_5))/2;if(this.snapInsideBorder){var _11=isc.Element.$tl(this.baseStyle)
var _12=isc.Element.$tm(this.baseStyle)
_6+=_11;_7-=_12;_9+=_11}
if(_3.dragOperation==_3.DRAG_RESIZE){var _13=isc.EH.resizeEdge.contains("L");return _13?_6:_7}else{if(_4==isc.Canvas.BEFORE){return _6}else if(_4==isc.Canvas.AFTER){return _9}else{if(_1<=_10){return _6}else{return _9}}}},isc.A.getVSnapPosition=function isc_GridRenderer_getVSnapPosition(_1,_2){if(!this.snapToCells){return this.Super("getVSnapPosition",arguments)}
var _3=this.ns.EH,_4=_2||this.snapVDirection,_5=this.snapVGap?Math.floor(_1/this.snapVGap):this.getEventRow(_1),_6=this.snapVGap?(_5*this.snapVGap):this.getRowTop(_5),_7=this.snapVGap?_6+this.snapVGap:this.getRowTop(_5)+this.getRowSize(_5),_8=this.snapVGap?_5+1:this.getEventRow(_7+1),_9;if(_8>=0){_9=this.snapVGap?_8*this.snapVGap:this.getRowTop(_8)}else{_9=_6}
var _10=_6+(this.snapVGap?this.snapVGap:this.getRowSize(_5))/2;if(this.snapInsideBorder){var _11=isc.Element.$tn(this.baseStyle)
var _12=isc.Element.$to(this.baseStyle)
_6+=_11;_7-=_12;_9+=_11}
if(_3.dragOperation==_3.DRAG_RESIZE){var _13=isc.EH.resizeEdge.contains("T");return _13?_6:_7}else{if(_4==isc.Canvas.BEFORE){return _6}else if(_4==isc.Canvas.AFTER){return _9}else{if(_1<=_10)return _6;else return _9}}});isc.evalBoundary;isc.B.push(isc.A.getColumnAutoSize=function isc_GridRenderer_getColumnAutoSize(_1,_2,_3){if(this.isEmpty()){return null}
var _4=this.$292=this.$292||isc.Canvas.create({columnSizer:true,top:-1000,width:1,height:1,overflow:"hidden",autoDraw:false,_generated:true});var _5=this.autoFit,_6=this.wrapCells;this.autoFit=true;this.wrapCells=false;if(_2==null||_3==null){var _7=this.getDrawArea();_2=_7[0];_3=_7[1]+1}
this.$941=true;_4.setContents(this.getTableHTML(_1,_2,_3,true));delete this.$941;this.autoFit=_5;this.wrapCells=_6;if(!_4.isDrawn()){_4.draw()}else{if(_4.isDirty())_4.redraw();if(_4.$uu)_4.adjustOverflow("Check autoFit column sizing")}
var _8;if(isc.isA.Array(_1)){var _9,_10=_4.getHandle().childNodes;for(var i=0;i<_10.length;i++){if(_10[i].tagName.toLowerCase()=="table"){_9=_10[i];break}}
var _12=this.$1321();if(_9&&_9.rows[_12]){var _13=_9.rows[_12],_14=_13.childNodes;_8=[];for(var i=0;i<_14.length;i++){_8[i]=_14[i].offsetWidth}}}else{_8=_4.getScrollWidth()}
var _15=this;this.fireOnPause("removeColumnSizer",function(){_15.removeColumnSizer()},this.removeColumnSizerDelay);return _8},isc.A.$1321=function isc_GridRenderer__getValidAutoFitRowNum(){return 0},isc.A.redraw=function isc_GridRenderer_redraw(_1,_2,_3,_4){this.$29c();this.invokeSuper(isc.GridRenderer,"redraw",_1,_2,_3,_4);delete this.$50v},isc.A.modifyContent=function isc_GridRenderer_modifyContent(){if(!this.$28c)this.$29d();if(this.$27y!=null){this.$80f=true;this.$270("scrollToRow in modifyContent");this.$80f=null;var _1=this.getTableElement();if(_1)_1.style.visibility="inherit"}
if(this.$60s){var _2=this.$26b().sum();if(_2<this.getViewportHeight()){this.$515=0;var _3=isc.Element.get(this.getID()+"$284"),_4=this.$515+(this.endSpace||0);if(_3){if(_4==0)_3.style.display="none"
else _3.style.display="";_3.style.height=_4+"px"}}
var _5=this.getVisibleRows(),_6=Math.max(1,_5[1]-_5[0]),_7=_6/this.getTotalRows(),_8=this.getViewportRatio(true);if(isc.isA.Number(_7)&&((_8==1&&_7<1)||_8/_7>1.25))
{this.$272=Math.max(this.cellHeight,Math.round(this.getViewportHeight()/_6))}}},isc.A.setStartSpace=function isc_GridRenderer_setStartSpace(_1){if(!isc.isA.Number(_1)||_1==this.startSpace)return;var _2=this.startSpace&&this.startSpace>_1;this.startSpace=_1;if(!this.isDrawn())return;var _3=_1+this.$514,_4=isc.Element.get(this.getID()+"$28s");if(_4){if(_3==0)_4.style.display="none";else _4.style.display="";if(this.$79b){_4.style.height=_3+"px"}
if(!_2||!this.$79b){_4.innerHTML=isc.Canvas.spacerHTML(1,_3)}
this.$t6()}},isc.A.setEndSpace=function isc_GridRenderer_setEndSpace(_1){if(!isc.isA.Number(_1)||_1==this.endSpace)return;var _2=this.endSpace&&this.endSpace>_1;this.endSpace=_1;if(!this.isDrawn())return;var _3=_1+this.$515,_4=isc.Element.get(this.getID()+"$284");if(_4){if(_3==0)_4.style.display="none";else _4.style.display="";if(this.$79b)_4.style.height=_3+"px";if(!_2||!this.$79b){_4.innerHTML=isc.Canvas.spacerHTML(1,_3)}
this.$t6()}},isc.A.setLeftSpace=function isc_GridRenderer_setLeftSpace(_1){if(this.leftSpace==_1)return;this.leftSpace=_1;this.redraw()},isc.A.setRightSpace=function isc_GridRenderer_setRightSpace(_1){if(this.rightSpace==_1)return;this.rightSpace=_1;this.redraw()},isc.A.clear=function isc_GridRenderer_clear(){this.Super("clear",arguments);this.removeColumnSizer(true);this.$29j();delete this.$50v},isc.A.$29j=function isc_GridRenderer__clearTableCache(){this.$29g=null;this.$29f=null;delete this.$29o;delete this.$293;delete this.$8s;this.$250=false});isc.B._maxIndex=isc.C+212;isc.GridRenderer.$294={getCellRecord:"rowNum,colNum",getCellValue:"record,rowNum,colNum,gridBody",findRowNum:"record",findColNum:"record",getBaseStyle:"record,rowNum,colNum",getCellStyle:"record,rowNum,colNum",getCellCSSText:"record,rowNum,colNum",cellIsEnabled:"rowNum,colNum",getRowHeight:"record,rowNum,isFrozenBody",getRowSpan:"record,rowNum,colNum",cellOut:"record,rowNum,colNum",cellOver:"record,rowNum,colNum",rowOut:"record,rowNum,colNum",rowOver:"record,rowNum,colNum",cellMove:"record,rowNum,colNum",rowMove:"record,rowNum,colNum",cellContextClick:"record,rowNum,colNum",rowContextClick:"record,rowNum,colNum",recordContextClick:"record,recordNum,fieldNum",cellMouseDown:"record,rowNum,colNum",rowMouseDown:"record,rowNum,colNum",recordMouseDown:"recordNum,fieldNum",cellMouseUp:"record,rowNum,colNum",rowMouseUp:"record,rowNum,colNum",recordMouseUp:"recordNum,fieldNum",selectOnMouseDown:"record,rowNum,colNum",selectOnRightMouseDown:"record,rowNum,colNum",selectOnMouseUp:"record,rowNum,colNum",cellClick:"record,rowNum,colNum",cellDoubleClick:"record,rowNum,colNum",rowClick:"record,rowNum,colNum",rowDoubleClick:"record,rowNum,colNum",cellHover:"record,rowNum,colNum",cellValueHover:"record,rowNum,colNum",rowHover:"record,rowNum,colNum",cellHoverHTML:"record,rowNum,colNum",cellValueHoverHTML:"record,rowNum,colNum,defaultHTML",getCellHoverComponent:"record,rowNum,colNum",selectionChanged:"record,state",selectionUpdated:"record,recordList",cellSelectionChanged:"cellList",getRowElementId:"rowNum,physicalRowNum",getCellElementId:"rowNum,physicalRowNum,colNum,physicalColNum",shouldFixRowHeight:"record,rowNum",updateEmbeddedComponentZIndex:"component",updateEmbeddedComponentCoords:"component,record,rowNum,colNum",getRowRole:"rowNum,record",getRowAriaState:"rowNum,record",getCellRole:"rowNum,colNum,record",getCellAriaState:"rowNum,colNum,record"};isc.GridRenderer.registerStringMethods(isc.GridRenderer.$294);isc.ClassFactory.defineClass("ListGrid","VLayout","DataBoundComponent");isc.addGlobal("ListViewer",isc.ListGrid);isc.defineClass("GridBody",isc.GridRenderer);isc.A=isc.GridBody.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.adjustOverflowWhileDirty=false;isc.A.$148n=isc.Browser.isIE&&isc.Browser.version>9;isc.A.expandEmptyMessageToMatchFields=true;isc.A.applyHSpaceToEmptyMessage=true;isc.B.push(isc.A.canSelectRecord=function isc_GridBody_canSelectRecord(_1){return this.grid.canSelectRecord(_1)},isc.A.adjustOverflow=function isc_GridBody_adjustOverflow(_1,_2,_3,_4,_5){if(!this.isDrawn())return this.Super("adjustOverflow",arguments);if(this.$80o)return;if(this.grid.$81r){return this.Super("adjustOverflow",arguments)}
var _6=this.grid;if(_6==null)return this.Super("adjustOverflow",arguments);var _7=_6.data,_8=false;;if(isc.isA.ResultSet(_7)&&!_7.lengthIsKnown()){if(_6.emptyMessageHeight==null){return this.invokeSuper(isc.GridBody,"adjustOverflow",_1,_2,_3,_4,_5)}
_8=true}
var _9=this.getWidth(),_10=this.getHeight();var _11=(this.autoFitData=="both"),_12=_11,_13=_6&&_6.frozenFields!=null,_14=_13&&_6&&(_6.frozenBody==this);if(!_11)_11=(this.autoFitData=="vertical");if(!_12)_12=(this.autoFitData=="horizontal");if(_12||_11){var _15,_16,_17,_18,_19,_20,_21;if(_11){var _22=this.grid.getAutoFitMinBodyHeight();_15=_22;var _23=_8?0:this.getTotalRows(),_24=_23;_17=0;if(this.autoFitMaxRecords){_24=Math.min(_24,this.autoFitMaxRecords)}
if(_24>0){var _25=this.$26b();var _26=this.$252,_27=this.$253;if(this.$252==null){_26=_24;_27=_24}
var _14=this.$100b();if(_26>0){_26=Math.min(_26,_24);for(var i=0;i<_26;i++){_17+=this.getRowHeight?this.getRowHeight(this.grid.getRecord(i),i,_14):this.cellHeight}}
var _29=_24-1;if(_27<_29){for(var i=_27+1;i<_29+1;i++){_17+=this.getRowHeight?this.getRowHeight(this.grid.getRecord(i),i,_14):this.cellHeight}}
_27=Math.min(_27,_29);for(var i=0;i<=_27-_26;i++){_17+=_25[i]}
_19=_23>_24;var _30=this.getAutoFitMaxHeight();if(_30&&_17>_30){_17=_30;_19=true}}else{if(this.grid.emptyMessageHeight!=null){_17=this.grid.emptyMessageHeight}}
if(this.autoFitExtraRecords&&this.autoFitExtraRecords>0){var _31=Math.round(this.autoFitExtraRecords*this.cellHeight);_17+=_31}}else{_19=this.getScrollHeight()>this.getHeight()}
if(_12&&!_14){var _16=this.grid.getInnerWidth(),_32;if(_13){var _33=this.grid.getFrozenSlots(this.grid.$26a);_32=_33.sum();_16-=_32}
var _34=this.getColumnSizes(),_35=_34.sum();if(this.autoFitMaxColumns){var _36=this.autoFitMaxColumns;if(_13){_36=Math.max(1,_36-this.grid.frozenFields.length)}
if(_36<_34.length){_34=_34.slice(0,_36)}}
var _37=_34.sum();if(this.autoFitMaxWidth){var _38=this.autoFitMaxWidth;if(_13)_38=Math.max(20,_38-_32);_37=Math.min(_38,_37)}
_18=(this.overflow==isc.Canvas.SCROLL)?true:(this.overflow==isc.Canvas.AUTO)?(_35>Math.max(_16,_37)):false}else{_18=this.overflow==isc.Canvas.SCROLL?true:this.overflow==isc.Canvas.AUTO?this.getScrollWidth()>this.getWidth():false}
if(_11&&_17!=null){_17+=this.getVBorderPad()+this.getVMarginSize();if(_18){_17+=this.getScrollbarSize();var _30=this.getAutoFitMaxHeight()
if(_30&&_17>_30){_17=_30}}
if(_17>_15){_15=_17;this.$70u=true}else{if(this.$70u)delete this.$70u}}
if(_12&&!_14&&_37!=null){_37+=this.getHBorderPad()+this.getHMarginSize();if(_19||this.alwaysShowVScrollbar){_37+=this.getScrollbarSize();if(this.autoFitMaxWidth){var _38=this.autoFitMaxWidth;if(_13)_38=Math.max(20,_38-_32);_37=Math.min(_38,_37)}}
if(_37>_16){_16=_37;this.$70v=true}else{if(this.$70v)delete this.$70v}}
this.$80o=true;_21=this.getDelta(this.$o5,_15,this.getHeight());_20=this.getDelta(this.$o6,_16,this.getWidth());delete this.$80o;if(_21!=null||_20!=null){this.resizeBy(_20,_21,null,null,true)}
if(_20!=null||(_14&&_12)){var _39=this.grid,_40=_39.$313()?_39.getScrollbarSize():0,_41=(_16-_40),_42=_41;if(_13&&_39.headerLayout){if(_14){_42=this.getWidth()+_39.body.getWidth();if(_39.autoFitMaxWidth!=null&&(_42+_39.getHBorderPad()+_39.getHMarginSize()>_39.autoFitMaxWidth))
{return _39.body.adjustOverflow()}
_42-=_40}else{_42=_41+_39.frozenBody.getWidth()}
_39.headerLayout.setWidth(_42)}
if(!_14){var _43=_39.header;if(_43&&_43.isDrawn()){_43.setWidth(_41)}}}}
var _44=(!_11&&this.$70u),_45=(!_12&&this.$70v);if(_44||_45){delete this.$70u;delete this.$70v;var _46=_44?this.grid.getAutoFitMinBodyHeight():null,_47=_45?(!_13?this.grid.getInnerWidth():(this.grid.getInnerWidth()-this.grid.frozenBody.getWidth())):null;this.resizeTo(_16,_15);this.grid.$45m("autoFitData mode changed")}
var _48=this.invokeSuper(isc.GridBody,"adjustOverflow",_1,_2,_3,_4,_5);if((_11||_12)&&(this.getWidth()!=_9||this.getHeight()!=_10))
{this.grid.updateRecordComponents(true)}
if(!_14)this.grid.bodyOverflowed();return _48},isc.A.getAutoFitMaxHeight=function isc_GridBody_getAutoFitMaxHeight(){return this.grid?this.grid.getAutoFitMaxBodyHeight():null},isc.A.$1321=function isc_GridBody__getValidAutoFitRowNum(){var _1=this.grid;if(this.grid&&this.grid.isGrouped){var _2=0;while(_2<this.grid.getTotalRows()){var _3=this.grid.getRecord(_2);if(_3==null||!this.grid.isGroupNode(_3)){return _2}
_2++}}
return 0},isc.A.resizeBy=function isc_GridBody_resizeBy(_1,_2,_3,_4,_5){if(!_5){this.$1i=this.getWidth()+(_1!=null?_1:0)}
var _6=this.invokeSuper(isc.GridBody,"resizeBy",_1,_2,_3,_4,_5);if(_5&&_1!=null&&!this.frozen){delete this.$pn}
return _6},isc.A.cellContextClick=function isc_GridBody_cellContextClick(_1,_2,_3){var _4=this.grid.getFieldNumFromLocal(_3,this);return this.grid.$298(_1,_2,_4)},isc.A.$29y=function isc_GridBody__rowClick(_1,_2){if(!this.grid)return;var _3;var _4=this.grid.getFieldNumFromLocal(_2,this);var _5=_1>=0?this.grid.getRecord(_1):null,_6=_4>=0?this.grid.getField(_4):null,_7=false;if(_5&&_6&&_6.isRemoveField){_7=!(_5.$52e||_5.isGroupSummary||_5.isGridSummary)}
if(_7){if(_1>=0){this.grid.removeRecordClick(_1,_2);_3=false}}else{_3=this.Super("$29y",arguments)}
return _3},isc.A.$784=function isc_GridBody__getCellHoverComponent(_1,_2,_3){if(this.grid&&isc.isA.ListGrid(this.grid)){var _4=this.grid.getFieldNumFromLocal(_3,this);return this.grid.$784(_1,_2,_4)}},isc.A.getInnerHTML=function isc_GridBody_getInnerHTML(){this.grid.bodyDrawing(this);return this.Super("getInnerHTML",arguments)},isc.A.getTablePrintHTML=function isc_GridBody_getTablePrintHTML(_1){var _2=_1.startRow,_3=_1.endRow,_4=_3!=null?(_3-_2):this.getTotalRows(),_5=this.printMaxRows,_6=_1.printWidths,_7=_1.printProps;var _8={target:this,methodName:"gotTablePrintHTML",printContext:_1,printCallback:_1.callback}
_1.callback=_8;if(_5<_4){this.logDebug("get table print html - breaking HTML into chunks","printing");if(_2==null)_2=_1.startRow=0;if(_3==null)_3=_1.endRow=this.getTotalRows();this.getPrintHTMLChunk(_1);return null}
var _9=this.grid.$119d(_6,_7);var _10=this.getTableHTML(null,_2,_3,null,_8);this.grid.$119e(_9);return _10},isc.A.gotTablePrintHTML=function isc_GridBody_gotTablePrintHTML(_1,_2){var _3=_2.printCallback;if(_3){this.fireCallback(_3,"HTML,callback",[_1,_3])}},isc.A.getPrintHTMLChunk=function isc_GridBody_getPrintHTMLChunk(_1,_2){var _3=this.grid.$119d(_1.printWidths);this.$568=true;this.$80u=true;var _4=_1.startRow,_5=_1.endRow,_6=this.printMaxRows,_7=_1.callback;this.currentPrintProperties=_1.printProps;if(!_1.html)_1.html=[];var _8=_1.chunkEndRow=Math.min(_5,(_4+_6)),_9=this.getTableHTML(null,_4,_8,null,{target:this,methodName:"gotPrintChunkHTML",printContext:_1,printCallback:_1.callback});this.grid.$119e(_3);this.$568=false;if(_9!=null){delete this.$80u;this.gotPrintChunkHTML(_9,{printContext:_1});if(_2){return _9}}},isc.A.gotPrintChunkHTML=function isc_GridBody_gotPrintChunkHTML(_1,_2){var _3=_2.printContext,_4=_3.startRow,_5=_3.endRow,_6=_3.chunkEndRow,_7=this.printMaxRows,_8=_3.callback;_3.html.add(_1);if(_6<_5){_3.startRow=_6;return this.delayCall("getPrintHTMLChunk",[_3],0)}
if(_8!=null){var _9=_3.html.join(isc.emptyString);this.fireCallback(_8,"HTML,callback",[_9,_8])}},isc.A.gotComponentPrintHTML=function isc_GridBody_gotComponentPrintHTML(_1,_2){var _3=_2.context.asyncCallback,_4=_3.printContext;var _5=_4.printWidths;var _6=this.grid.$119d(_5);if(this.$80u){this.$568=true}
var _1=this.Super("gotComponentPrintHTML",arguments);if(this.$568)delete this.$568;if(_1!=null){delete this.$80u}else{this.grid.$119e(_6)}},isc.A.getPrintHeaders=function isc_GridBody_getPrintHeaders(_1,_2){var _3=this.$119f;delete this.$119f;return _3==null?"":_3},isc.A.getPrintFooters=function isc_GridBody_getPrintFooters(_1,_2){var _3=this.$119g;delete this.$119g;return _3==null?"":_3},isc.A.refreshCellValue=function isc_GridBody_refreshCellValue(_1,_2){var _3=this.grid;if(_1>=0&&_2>=0&&_3&&_3.allowRowSpanning&&_3.useRowSpanStyling)
{var _4=this.getCellStartRow(_1,_2);if(_4!=_1){_1=_4}}
isc.GridRenderer.$b4.refreshCellValue.call(this,_1,_2)},isc.A.getCellVAlign=function isc_GridBody_getCellVAlign(_1,_2,_3,_4){if(this.grid&&this.grid.getCellVAlign){var _5=this.grid.getFieldNumFromLocal(_4,this);return this.grid.getCellVAlign(_1,_3,_5)}},isc.A.getCellAlign=function isc_GridBody_getCellAlign(_1,_2,_3,_4){if(this.grid&&this.grid.getCellAlign!=null){var _5=this.grid.getFieldNumFromLocal(_4,this);return this.grid.getCellAlign(_1,_3,_5)}else return _2.cellAlign||_2.align},isc.A.$282=function isc_GridBody__drawRecordAsSingleCell(_1,_2,_3){var _4=this.grid;if(_4.showNewRecordRow&&_4.$299(_1))return true;return isc.GridRenderer.$b4.$282.call(this,_1,_2,_3)},isc.A.showSingleCellCheckboxField=function isc_GridBody_showSingleCellCheckboxField(_1){var _2=this.grid;return _2&&_2.showSingleCellCheckboxField(_1)},isc.A.$67p=function isc_GridBody__getSingleCellSpan(_1,_2,_3,_4){if(_2==this.$28c||!this.showSingleCellCheckboxField(_1)||(this.grid&&this.grid.frozenBody!=null&&this.grid.frozenBody!=this))
{return[_3,_4]}
return[Math.max(_3,1),_4]},isc.A.mouseWheel=function isc_GridBody_mouseWheel(){if(this.frozen&&this.grid!=null){var _1=this.ns.EH.lastEvent.wheelDelta;var _2=this.scrollTop+Math.round(_1*isc.Canvas.scrollWheelDelta);this.grid.body.scrollTo(null,_2,"frozenMouseWheel");return false}
return this.Super("mouseWheel",arguments)},isc.A.$80e=function isc_GridBody__getDrawRows(){if(this.frozen&&this.grid){var _1=this.grid;return _1.body.$80e()}
return this.Super("$80e",arguments)},isc.A.doneFastScrolling=function isc_GridBody_doneFastScrolling(){if(!this.frozen&&this.grid!=null&&this.grid.frozenBody!=null){var _1=this.$50z;this.Super("doneFastScrolling",arguments);if(_1){this.grid.frozenBody.$50v=true;this.grid.frozenBody.markForRedraw("Done fast scrolling on unfrozen body")}}},isc.A.scrollTo=function isc_GridBody_scrollTo(_1,_2,_3,_4){if(isc.$cv)arguments.$cw=this;if(_1!=null){var _5=this.getScrollWidth()-this.getViewportWidth();_1=Math.max(0,Math.min(_5,_1))}
if(_2!=null){var _6=this.getScrollHeight()-this.getViewportHeight();_2=Math.max(0,Math.min(_6,_2))}
var _7=this.grid;this.invokeSuper(isc.GridBody,"scrollTo",_1,_2,_3,_4);var _8=this.$80h;if(!_8)_7.bodyScrolled(_1,_2,this.frozen);if(!this.isDirty()&&_7.$30a){_7.$286.itemsMoved()}},isc.A.addEmbeddedComponent=function isc_GridBody_addEmbeddedComponent(_1,_2,_3,_4,_5){var _6=this.invokeSuper(isc.GridBody,"addEmbeddedComponent",_1,_2,_3,_4,_5);if(_1.$57n!=null&&_1.$57n!=-1&&this.grid){var _7=this.grid,_4=_1.$57n,_8=_7.getFieldNumFromLocal(_4,this),_9=_7.getFieldName(_8);_1.$81k=_9;if(_7.$1167==null){_7.$1167={}}
if(_7.$1167[_9]==null){_7.$1167[_9]={}}
_7.$1167[_9][_1.getID()]=true;if(_1._percent_width==null){_7.$1168(_9)}}
return _1},isc.A.removeEmbeddedComponent=function isc_GridBody_removeEmbeddedComponent(_1,_2,_3){var _4=this.grid;if(_4){var _5=_2.$81k;if(_5!=null){if(_4.$1167&&_4.$1167[_5]){delete _4.$1167[_5][_2.getID()]}
if(_2._percent_width==null){_4.$1168(_5)}}
_2.$81k=null}
this.invokeSuper(isc.GridBody,"removeEmbeddedComponent",_1,_2,_3)},isc.A.updateHeightForEmbeddedComponents=function isc_GridBody_updateHeightForEmbeddedComponents(_1,_2,_3){if(_1&&!this.grid.$916(_1)&&this.grid.showRecordComponents&&this.grid.recordComponentHeight!=null)
{var _4=this.$667(_1,_2);if(_4.allWithin&&_4.extraHeight>0){_3=Math.max(_3,_4.extraHeight)}else{_3+=_4.extraHeight}
return _3}
return this.invokeSuper(isc.GridBody,"updateHeightForEmbeddedComponents",_1,_2,_3)},isc.A.$667=function isc_GridBody__getExtraEmbeddedComponentHeight(_1,_2){var _3=this.invokeSuper(isc.GridBody,"$667",_1,_2);if(this.grid.showRecordComponents&&this.grid.recordComponentHeight!=null){_3.extraHeight=Math.max(_3.extraHeight,this.grid.recordComponentHeight)}
return _3},isc.A.$80g=function isc_GridBody__writeEmbeddedComponentSpacer(_1){if(_1&&this.grid&&this.grid.showRecordComponents&&this.grid.recordComponentHeight!=null)
{return true}
return this.invokeSuper(isc.GridBody,"$80g",_1)},isc.A.$29d=function isc_GridBody__placeEmbeddedComponents(){if(this.grid&&this.grid.$113n){return}
return this.Super("$29d",arguments)},isc.A.getAvgRowHeight=function isc_GridBody_getAvgRowHeight(){if(this.grid)return this.grid.getAvgRowHeight(this);return this.Super("getAvgRowHeight",arguments)},isc.A.shouldShowAllColumns=function isc_GridBody_shouldShowAllColumns(){if(this.showAllColumns){return true}
if(!this.fixedRowHeights&&!this.showAllRows){if(this.grid.canExpandRecords&&this.grid.$82v){return false}
return true}
if(this.overflow==isc.Canvas.VISIBLE){return true}
return false},isc.A.redraw=function isc_GridBody_redraw(_1,_2,_3,_4){this.$58p=true;var _5=this.grid;if(_5.alwaysShowEditors&&!_5.$30a){_5.startEditing(null,null,true,null,true)}
var _6=_5.$286,_7=_5.$30a,_8,_9,_10,_11,_12;_5.$69l();if(!_5.leaveScrollbarGap&&_5.predictScrollbarGap&&(this.overflow==isc.Canvas.AUTO)){var _13=this.vscrollOn,_14=!_5.isEmpty()&&(_5.getTotalRows()*_5.cellHeight)>this.getInnerHeight();if(_13!=_14){delete this.$773;_5.$45m("body redrawing with changed vertical scroll-state")}}
var _15=false;if(_7){this.logInfo("redraw with editors showing, editForm.hasFocus: "+_6.hasFocus,"gridEdit");_8=_5.getEditCol();this.$516();_12=this.$517()}else if(isc.screenReader){_15=this.hasFocus||(this.editForm&&this.editForm.hasFocus())}
if(this.$773!=null){var _16=this.$773;delete this.$773;_5.$45m(_16)}
var _17=this.getDrawArea();var _18=this.grid,_19=this.$74k;if(!_19)_19=this.$74k=[0,0,0,0];var _18=this.grid,_20=_18.$131w(_17[0]),_21=_18.$131w(_17[1]),_22=(_20!=null&&_21!=null);if(_22&&!_19.equals(_17)){if(!this.frozen){_18.$74l(_19[0],_19[1],_19[2],_19[3],this);this.$74k=_17}}
delete this.$316;this.invokeSuper(isc.GridBody,"redraw",_1,_2,_3,_4);delete this.$58p;if(!(this.frozen&&this.$1055)){_18.updateRecordComponents()}
this.$1055=false;if(_7){if(_12!=null&&_12.length>0){_6.removeItems(_12)}
_5.$30b(null,true,this);_5.updateEditRow(_5.getEditRow());if(_6.hasFocus||(this.$519&&isc.EH.getFocusCanvas()==null))
{this.$518(_8)}else{delete this.$519}}else{if(_6!=null){_5.$30b(null,null,this)}
if(isc.screenReader){this.$86a(this.getNativeFocusRow(),!_15)}}},isc.A.redrawOnScroll=function isc_GridBody_redrawOnScroll(_1){if(this.frozen)this.$1055=true;return this.Super("redrawOnScroll",arguments)},isc.A.setHandleDisabled=function isc_GridBody_setHandleDisabled(_1){var _2=this.grid;if(this.isDrawn()&&_2&&_2.$30a){this.markForRedraw("Grid body disabled while editing")}
return this.Super("setHandleDisabled",arguments)},isc.A.$517=function isc_GridBody__updateEditItems(){var _1=this.grid,_2=_1.getEditForm(),_3=[],_4=_2.getItems();if(!_1.editByCell){var _5=_1.getEditRow(),_6=_1.getRecord(_5),_7=_1.getEditFormItemFieldWidths(_6);var _4=_2.getItems(),_8=_4.getProperty(this.fieldIdProperty),_9=_1.getDrawnFields(),_10=_9.getProperty(this.fieldIdProperty);var _11=_4.length==_9.length,_12=false;for(var i=0;i<_4.length;i++){var _14=_10.indexOf(_8[i]);if(_14==-1){_12=true;_3.add(_4[i])}else{_4[i].width=_7[_4[i].colNum];_4[i].$8t=null;_4[i].redrawing()}}
if(!_11||_12){var _15=_1.getEditedRecord(_5,0);for(var i=0;i<_9.length;i++){if(!_8.contains(_10[i])){var _16=_1.fields.indexOf(_9[i]);var _17=_1.getEditItem(_9[i],_6,_15,_5,_16,_7[_16]);_2.addItem(_17)}}}}
return _3},isc.A.$516=function isc_GridBody__storeFocusForRedraw(){var _1=this.grid,_2=_1.getEditForm(),_3=_1.getEditCol();if(_2.hasFocus){var _4=_2.getFocusSubItem();if(_4){_4.updateValue();var _5=_4;while(_4.parentItem!=null){_4=_4.parentItem}
if(!_1.canEditCell(_4.rowNum,_4.colNum)||_3!=_4.colNum){_2.blur()}else{if(_4.hasFocus){_4.rememberSelection();this.$519=[_4.$17r,_4.$17s]}
_2.$106()}}}
_2.$10u=true},isc.A.$518=function isc_GridBody__restoreFocusAfterRedraw(_1){var _2=this.grid,_3=_2.getEditForm(),_4=_3.getItem(_2.getEditorName(_2.getEditRow(),_1));if(_4!=null&&_4.isDrawn()){var _5=_2.body.getScrollLeft(),_6=_2.body.getScrollTop(),_7=_2.body.getViewportWidth(),_8=_2.body.getViewportHeight(),_9=_4.getRect(),_10=_9[0]<_5||_9[1]<_6||_9[0]+_9[2]>(_5+_7)||_9[1]+_9[3]>(_6+_8);if(!_10){_3.$11b(_4);if(this.$519&&this.$519[0]!=null){_4.setSelectionRange(this.$519[0],this.$519[1])}
delete this.$519}}},isc.A.focusAtEnd=function isc_GridBody_focusAtEnd(_1){var _2=this.grid,_3=_2?_2.getEditForm():null;if(_3){_3.focusAtEnd(_1)}else{return this.Super("focusAtEnd",arguments)}},isc.A.cellMove=function isc_GridBody_cellMove(_1,_2,_3){if(isc.EH.lastEvent.target==this){var _4=isc.EH.lastEvent?isc.EH.lastEvent.nativeTarget:null;if(_4&&_4.getAttribute!=null&&(_4.getAttribute("isErrorIcon")=="true"))
{_3=this.grid.getFieldNumFromLocal(_3,this);if(this.grid.$79y!=null){var _5=this.grid.$79y[0],_6=this.grid.$79y[1];if(_5!=_2||_6!=_3){this.grid.$790()}}
if(this.grid.$79y==null){this.grid.$79z(_2,_3)}}else{if(this.grid.$79y!=null){this.grid.$790()}}}},isc.A.shouldShowRollOver=function isc_GridBody_shouldShowRollOver(_1,_2,_3,_4){if(!this.grid.showRollOver||this.$28j)return false;var _5=this.grid;if(_5.$30a&&!_5.editByCell&&_1==_5.$285)return false;return true},isc.A.updateRollOver=function isc_GridBody_updateRollOver(_1,_2,_3){var _4=this.grid;if(_4.showRollOverCanvas){if(!_3){var _5=!(this.lastOverRow==_1&&this.lastOverCol==_2);var _6=_4.getFieldNumFromLocal(_2,this);_4.updateRollOverCanvas(_1,_6,_5)}}
this.setRowStyle(_1,null,this.canSelectCells||this.useCellRollOvers?_2:null);var _7=(this==_4.body?_4.frozenBody:_4.body);if(_7&&!this.useCellRollOvers){_7.lastOverRow=this.lastOverRow;_7.lastOverCol=this.lastOverCol;_7.setRowStyle(_1,null,(this.useCellRollOvers?_2:null))}},isc.A.$94f=function isc_GridBody__selectCellOnMouseDown(_1,_2,_3){this.$24n=_2;this.$24o=_3;this.grid.$967=this;if(this.useRowSpanStyling){var _4=this.grid.selection;var _5=this.getCellStartRow(_2,_3);if(isc.EH.modifierKeyDown()){var _6=this.grid.getFieldNumFromLocal(_3,this);_4.selectOnMouseDown(this,_5,_6);return}
_4.deselectAll();var _7,_8,_9,_10=this.rowSpanSelectionMode;if(_10=="forward"||_10==null){_8=this.grid.getFieldNumFromLocal(_3,this);_9=this.getCellRowSpan(_5,_3)}else if(_10=="outerSpan"){_8=0;_7=this.grid.getFieldBody(0);_5=_7.getCellStartRow(_2,0);_9=_7.getCellRowSpan(_5,0)}else if(_10=="both"){_9=this.getCellRowSpan(_5,_3);_8=0}else{this.logWarn("unrecognized rowSpanSelectionMode: '"+_10+"'");return}
for(var _11=_8;_11<this.grid.fields.length;_11++){var _12=this.grid.getFieldBody(_11),_13=this.grid.getLocalFieldNum(_11);for(var i=_5;i<_5+_9;i++){var _15=_12.getCellStartRow(i,_13);_4.selectCell(_15,_11);i+=(_12.getCellRowSpan(_15,_13)-1)}}
return}
this.selection.selectOnMouseDown(this,_2,_3)},isc.A.selectOnMouseDown=function isc_GridBody_selectOnMouseDown(_1,_2,_3){var _4=true,_5=this.grid.selectionAppearance,_6=(_5=="checkbox");if(_6){if((this.grid.frozenFields!=null&&this.grid.frozenBody!=this)||(this.grid.getCheckboxFieldPosition()!=_3))
{_4=false}}
if(_4){if(this.canSelectCells)this.$94f(_1,_2,_3);else this.invokeSuper(isc.GridBody,"selectOnMouseDown",_1,_2,_3)}
if(isc.screenReader){this.$86a(_2)}},isc.A.mouseUp=function isc_GridBody_mouseUp(){var _1=isc.EH.getTarget();if(this.grid&&_1!=null&&_1!=this&&this.grid.$30a){var _2=this.grid.getEditForm();while(_1!=this&&_1!=null&&_1!=_2){if(_1.canvasItem&&_2.items.contains(_1.canvasItem)){return}
_1=isc.isA.FormItem(_1)?_1.containerWidget:_1.parentElement}}
return this.Super("mouseUp",arguments)},isc.A.selectOnMouseUp=function isc_GridBody_selectOnMouseUp(_1,_2,_3){var _4=this.grid.getCheckboxFieldPosition(),_5=this.grid.selectionAppearance;if(_5!="checkbox"||(_5=="checkbox"&&_4==_3)){this.invokeSuper(isc.GridBody,"selectOnMouseUp",_1,_2,_3)}},isc.A.handleSelectionChanged=function isc_GridBody_handleSelectionChanged(_1,_2){if(this.grid.suppressSelectionChanged)return;var _3=this.Super("handleSelectionChanged",arguments);this.grid.handleViewStateChanged();return _3},isc.A.setSelection=function isc_GridBody_setSelection(_1){this.clearSelection();this.Super("setSelection",arguments)},isc.A.clearSelection=function isc_GridBody_clearSelection(){var _1=this.selection;this.Super("clearSelection",arguments);if(_1&&_1.isA("DependentCellSelection")){_1.destroy()}},isc.A.$968=function isc_GridBody__setSeparateCellSelection(_1,_2){this.clearSelection();if(_1){this.selection=_1.getDependentCellSelection(this.fields.length);this.selection.$969(_2);this.observe(this.selection,"selectionChanged",function(){this.$29s(this.selection.changedCells)})}},isc.A.$29h=function isc_GridBody__updateCellStyle(_1,_2,_3,_4,_5,_6,_7,_8){this.invokeSuper(isc.GridBody,"$29h",_1,_2,_3,_4,_5,_6,_7,_8);var _9=this.grid;if(_9&&_9.getEditRow()==_2){var _10=_9.getFieldName(_9.getFieldNumFromLocal(_3,this)),_11=_9.getEditForm(),_12=_11?_11.getItem(_10):null;if(_12&&_12.gridCellStyleChanged){if(_5==null)_5=this.getCellStyle(_1,_2,_3);_12.gridCellStyleChanged(_1,_2,_3,_5)}}},isc.A.getHoverTarget=function isc_GridBody_getHoverTarget(){return this.grid},isc.A.keyPress=function isc_GridBody_keyPress(_1,_2){return this.grid.bodyKeyPress(_1,_2)},isc.A.getFocusRow=function isc_GridBody_getFocusRow(){return this.grid.getFocusRow()},isc.A.getFocusCol=function isc_GridBody_getFocusCol(){var _1=this.grid.$32b();return this.grid.getLocalFieldNum(_1)},isc.A.$lf=function isc_GridBody__focusChanged(_1){var _2=this.Super("$lf",arguments);var _3=isc.EH.lastEvent;if(_3.target==this&&(_3.eventType==isc.EH.MOUSE_DOWN||_3.eventType==isc.EH.MOUSE_UP||_3.eventType==isc.EH.CLICK||_3.eventType==isc.EH.DOUBLE_CLICK))return _2;var _4,_5=this.grid;if(_1&&_5.isEditable()){if(_5.editOnFocus&&_5.isEditable()&&_5.getEditRow()==null)
{if(this.logIsInfoEnabled("gridEdit")){this.logInfo("Editing on focus: eventType: "+_3.eventType+", lastTarget "+_3.target,"gridEdit")}
if(_5.$30c){delete _5.$30c}else{var _4=_5.getFocusCell();var _6=isc.isAn.Array(_4)&&_4[0]!=null&&_4[0]>=0&&_4[1]!=null&&_4[1]>=0&&_5.canEditCell(_4[0],_4[1]);if(!_6){_4=_5.findNextEditCell(0,0,true,true)}
if(_4!=null)
_5.handleEditCellEvent(_4[0],_4[1],isc.ListGrid.FOCUS)}}}
if(isc.screenReader){if(_1){if(_4==null){var _3=isc.EH.lastEvent,_7=_3.eventType;var _8=this.getNativeFocusRow();this.$86a(_8)}}else{_5.clearLastHilite()}}else if(_5.hiliteRowOnFocus){if(_1){if(_4==null){if(_5.canSelectCells){_5.$24s(0,1,true,true,"focus")}else{_5.$318(1,true,"focus",true)}}}else if(!this.containsFocus){_5.clearLastHilite()}}
return _2},isc.A.$86a=function isc_GridBody__putNativeFocusInRow(_1,_2){var _3=this.grid;if(_3&&_3.hiliteOnNativeRowFocus&&!_2)_3.$88(_1);return this.Super("$86a",arguments)},isc.A.updateRowSelection=function isc_GridBody_updateRowSelection(_1){var _2=this.grid;if(!_2)return;if(_2.showSelectionCanvas)_2.updateSelectionCanvas();if(_2.$67j){return}
this.invokeSuper(isc.GridBody,"updateRowSelection",_1);if(isc.Canvas.ariaEnabled()&&_2.selection){this.setRowAriaState(_1,"selected",_2.selection.isSelected(_2.getRecord(_1)))}
if(_2.getCurrentCheckboxField()!=null){var _3=_2.getCheckboxFieldPosition();if(_2){_2.refreshCell(_1,_3);_2.updateCheckboxHeaderState()}}else if(_2.getTreeFieldNum&&_2.selectionAppearance=="checkbox"){var _4=_2.getTreeFieldNum();_2.refreshCell(_1,_4)}});isc.evalBoundary;isc.B.push(isc.A.markForRowSelectionRefresh=function isc_GridBody_markForRowSelectionRefresh(){var _1=this.grid;if(!_1)return;if(_1.showSelectionCanvas){_1.fireOnPause("updateSelectionCanvasFromRowRefresh","updateSelectionCanvas")}
if(_1.getCurrentCheckboxField()!=null){_1.fireOnPause("updateCheckboxHeaderFromRowRefresh","updateCheckboxHeaderState")}
if(_1.$67j){return}
this.invokeSuper(isc.GridBody,"markForRowSelectionRefresh")},isc.A.$29s=function isc_GridBody__cellSelectionChanged(_1,_2,_3,_4){var _5=this.grid;if(_5&&_5.showSelectionCanvas)_5.updateSelectionCanvas();return this.invokeSuper(isc.GridBody,"$29s",_1,_2,_3,_4)},isc.A.destroy=function isc_GridBody_destroy(){var _1=this.grid;if(this==_1.$967)_1.$967=null;if(this==_1.$97a)_1.$97a=null;this.Super("destroy",arguments)},isc.A.shouldAnimateEmbeddedComponent=function isc_GridBody_shouldAnimateEmbeddedComponent(_1){var _2=this.grid;if(_1==_2.selectionCanvas)return _2.animateSelection;if(_1==_2.selectionUnderCanvas)return _2.animateSelectionUnder;if(_1==_2.rollOverCanvas)return _2.animateRollOver;if(_1==_2.rollUnderCanvas)return _2.animateRollUnder;return false},isc.A.$80d=function isc_GridBody__handleEmbeddedComponentResize(_1,_2,_3){this.Super("$80d",arguments);this.grid.$80d(this,_1,_2,_3)},isc.A.draw=function isc_GridBody_draw(_1,_2,_3,_4){var _5=this.grid;if(_5.getEditRow()!=null){var _6=_5.getEditRow(),_7=_5.getRecord(_6),_8=_5.getEditCol(),_9=_5.$286,_10=_5.getEditRowItems(_7,_6,_8,_5.editByCell),_11=_9.getItems();var _12=_11==null||_10.length!=_11.length;if(!_12){var _13=_11.getProperty("name");for(var i=0;i<_10.length;i++){if(!_13.contains(_10[i].name)){_12=true;break}}}
if(_12){this.logDebug("calling setItems on form from body draw","gridEdit");_9.setItems(_10)}else{this.logDebug("Skipping setItems() on form from body draw","gridEdit")}
_9.$10u=true}
delete this.$316;this.invokeSuper(isc.GridBody,"draw",_1,_2,_3,_4);if(_5.$286){_5.$30b(null,null,this)}
_5.updateEditRow(_5.getEditRow());if(_5.$30d!=null){var _15=isc.isAn.Array(_5.$30d)?_5.$30d[0]:_5.$30d,_16=isc.isAn.Array(_5.$30d)?_5.$30d[1]||0:0,_17=isc.isAn.Array(_5.$30d)?_5.$30d[2]:null,_18=isc.isAn.Array(_5.$30d)?_5.$30d[3]:null;_5.scrollToCell(_15,_16,_17,_18);delete _5.$30d}
this.grid.updateRecordComponents();if(!this.$112u)this.grid.updateExpansionComponents()},isc.A.layoutChildren=function isc_GridBody_layoutChildren(_1,_2,_3,_4){this.invokeSuper(isc.GridBody,"layoutChildren",_1,_2,_3,_4);if(!this.isDrawn()||(this.grid.frozenFields&&!this.grid.bodyLayout.isDrawn())){return}
var _5=(_1=="scrolling state changed"),_6=(_1=="introducing scrolling");if(_5||_6){if(this.isRTL()&&!this.$28c){this.$29d()}}
if(_5){if(this.$28i==null){this.grid.layoutChildren("body scroll changed");delete this.$30e}else{this.$30e=true}}},isc.A.$28p=function isc_GridBody__rowAnimationComplete(){this.Super("$28p",arguments);if(this.$30e){this.grid.layoutChildren("body scroll changed during animation");delete this.$30e}},isc.A.handleMoved=function isc_GridBody_handleMoved(_1,_2,_3,_4){this.invokeSuper(isc.GridBody,"handleMoved",_1,_2,_3,_4);var _5=this.grid;if(_5.$30a){_5.$286.itemsMoved()}},isc.A.handleParentMoved=function isc_GridBody_handleParentMoved(_1,_2,_3,_4){this.invokeSuper(isc.GridBody,"handleParentMoved",_1,_2,_3,_4);var _5=this.grid;if(_5.$30a){_5.$286.itemsMoved()}},isc.A.setVisibility=function isc_GridBody_setVisibility(_1,_2,_3,_4){this.invokeSuper(isc.GridBody,"setVisibility",_1,_2,_3,_4);var _5=this.grid;if(_5.$30a)_5.$286.itemsVisibilityChanged()},isc.A.parentVisibilityChanged=function isc_GridBody_parentVisibilityChanged(_1,_2,_3,_4){this.invokeSuper(isc.GridBody,"parentVisibilityChanged",_1,_2,_3,_4);var _5=this.grid;if(_5.$30a)_5.$286.itemsVisibilityChanged()},isc.A.clear=function isc_GridBody_clear(){var _1=this.grid;_1.$69l();delete this.$316;this.Super("clear",arguments);if(_1.$30a){_1.$30b(null,null,this);_1.$286.itemsVisibilityChanged()}},isc.A.zIndexChanged=function isc_GridBody_zIndexChanged(){this.Super("zIndexChanged",arguments);var _1=this.grid;if(_1&&_1.$30a)_1.$286.itemsZIndexChanged()},isc.A.parentZIndexChanged=function isc_GridBody_parentZIndexChanged(_1,_2,_3,_4){this.invokeSuper(isc.GridBody,"zIndexChanged",_1,_2,_3,_4);var _5=this.grid;if(_5.$30a)_5.$286.itemsZIndexChanged()},isc.A.redrawFormItem=function isc_GridBody_redrawFormItem(_1,_2){var _3=this.grid;if(_3&&(_1.form==_3.$286)){var _4=_3.getEditRow(),_5=_3.getColNum(_1.getFieldName());if(_3.getEditCol()==_5){_3.storeUpdatedEditorValue()}
if(_4>=0&&_5>=0)_3.refreshCell(_4,_5,false,true)}else
return this.markForRedraw("Form Item Redraw "+(_2?_2:isc.emptyString))},isc.A.sizeFormItem=function isc_GridBody_sizeFormItem(_1){var _2=this.grid;var _3=_1.width,_4;if(isc.isA.String(_3)){var _5=_2.getEditFormItemFieldWidths(_1.record),_6=_5[_2.getFieldNum(_1.getFieldName())];if(_3=="*"){_4=_6}else if(_3[_3.length-1]=="%"){var _7=parseInt(_3);if(isc.isA.Number(_7)){_4=Math.floor(_6*(_7/100))}}}
var _8=_1.height,_9;if(isc.isA.String(_8)){var _10=_2.cellHeight;if(_3=="*"){_9=_10}else if(_8[_8.length-1]=="%"){var _11=parseInt(_8);if(isc.isA.Number(_11)){_9=Math.floor(_10*(_11/100))}}}
if(_9!=null||_4!=null){_1.$8t=[_4==null?_1.width:_4,_9==null?_1.height:_9]}},isc.A.startRowAnimation=function isc_GridBody_startRowAnimation(_1,_2,_3,_4,_5,_6,_7,_8,_9){this.finishRowAnimation();var _10=(_9&&(this.$34y!=null)),_11=this.grid;if(_10){var _12=_11.$34v;_11.$34v=true;_11.data.openFolder(this.$34y);_11.$34v=_12}
this.Super("startRowAnimation",arguments);if(_10){var _12=_11.$34v;_11.$34v=true;_11.data.closeFolder(this.$34y);_11.$34v=_12}
delete this.$34y});isc.B._maxIndex=isc.C+78;isc.A=isc.ListGrid;isc.A.CORNER="corner";isc.A.FIELD="field";isc.A.BEFORE="before";isc.A.AFTER="after";isc.A.OVER="over";isc.A.BETWEEN="between";isc.A.BODY="body";isc.A.CLICK_OUTSIDE="click_outside";isc.A.CLICK="click";isc.A.DOUBLE_CLICK="doubleClick";isc.A.ENTER_KEYPRESS="enter";isc.A.ESCAPE_KEYPRESS="escape";isc.A.UP_ARROW_KEYPRESS="arrow_up";isc.A.DOWN_ARROW_KEYPRESS="arrow_down";isc.A.LEFT_ARROW_KEYPRESS="arrow_left";isc.A.RIGHT_ARROW_KEYPRESS="arrow_right";isc.A.TAB_KEYPRESS="tab";isc.A.SHIFT_TAB_KEYPRESS="shift_tab";isc.A.EDIT_FIELD_CHANGE="field_change";isc.A.EDIT_ROW_CHANGE="row_change";isc.A.PROGRAMMATIC="programmatic";isc.A.FOCUS="focus";isc.A.$295=["selection","selectionType","canSelectCells","canDragSelect","canSelectOnRightMouse","recordCanSelectProperty","canDrag","canAcceptDrop","canDrop","autoFit","wrapCells","cellSpacing","cellPadding","cellHeight","enforceVClipping","autoFitData","autoFitMaxRecords","autoFitMaxWidth","autoFitMaxColumns","autoFitMaxHeight","autoFitExtraRecords","allowRowSpanning","showAllColumns","drawAllMaxCells","drawAheadRatio","quickDrawAheadRatio","instantScrollTrackRedraw","scrollRedrawDelay","scrollWheelRedrawDelay","printMaxRows","animateRowsMaxTime","fastCellUpdates","showRollOver","useCellRollOvers","canHover","showHover","showClippedValuesOnHover","hoverDelay","hoverWidth","hoverHeight","hoverAlign","hoverVAlign","hoverStyle","hoverOpacity","hoverMoveWithMouse","hoverByCell","keepHoverActive","cellHoverOutset","showEmptyMessage","emptyMessageStyle","emptyMessageTableStyle","showOfflineMessage","offlineMessageStyle","useCellRecords","singleCellValueProperty","isSeparatorProperty","accessKey","canFocus","_useNativeTabIndex","tableStyle","baseStyle","recordCustomStyleProperty","showSelectedStyle","useRowSpanStyling","rowSpanSelectionMode","showFocusOutline"];isc.A.$296=["getCellStyleName","getCellStyleIndex","$1159","cellValueIsClipped","getRowTop","getRowPageTop","getRowSize","getDrawnRowHeight","getCellStartRow","getCellRowSpan","getVisibleRows","getDrawnRows"];isc.A.$297=["getTotalRows","isEmpty","cellIsEnabled","willAcceptDrop","scrolled","getTableElementId","getRowElementId","getCellElementId","shouldFixRowHeight","getEmptyMessage","getCanHover","stopHover","updateEmbeddedComponentZIndex"];isc.A.$94g=null;isc.A=isc.ListGrid;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.makeBodyMethods=function isc_c_ListGrid_makeBodyMethods(_1){var _2=this.$cf;if(_2==null){_2=this.$cf=[,"this.grid.$81e = this;var returnVal = this.grid.",,"(",,");this.grid.$81e=null;return returnVal;"]}
var _3={};for(var i=0;i<_1.length;i++){var _5=_1[i],_6=isc.GridRenderer.getArgString(_5),_7=(_5=="cellIsEnabled");if(isc.contains(_6,"colNum")){_2[0]="if (this.fields[colNum]) colNum = this.fields[colNum].masterIndex;"}else if(isc.isAn.emptyString(_6)){_6="body";_2[0]="body = this;"}else{_2[0]=null}
if(_7){var _8="if (record === undefined) record = this.grid.getCellRecord("+_6+");";_2[0]=(_2[0]?_2[0]+_8:_8)}
_2[2]=_5;_2[4]=(_7?"record,"+_6:_6);var _9=_2.join(isc.emptyString);var _10=_3[_5]=isc.$aq((_7?_6+",record":_6),_9);_10.$118m=true}
return _3},isc.A.classInit=function isc_c_ListGrid_classInit(){this.addMethods(isc.ClassFactory.makePassthroughMethods(this.$296,"body"));var _1={};var _2=isc.getKeys(isc.GridRenderer.$294),_1=isc.ListGrid.makeBodyMethods(_2);isc.addProperties(_1,isc.ListGrid.makeBodyMethods(this.$297));this.$30f=_1;var _3={},_4=[,"var $81e = this.$81e || this.body; if ($81e == null) {return;}if($81e.__orig_",,")return $81e.__orig_",,"(",,")"],_5="__orig_",_6=isc.GridRenderer.getPrototype();for(var i=0;i<_2.length;i++){var _8=_2[i],_9=isc.GridRenderer.getArgString(_8);if(isc.ListGrid.getInstanceProperty(_8)==null){if(isc.contains(_9,"colNum")){_4[0]="if (colNum != null && colNum >= 0) colNum = this.getLocalFieldNum(colNum);"}else{_4[0]=null}
_4[2]=_4[4]=_8;_4[6]=_9
_3[_8]=isc.$aq(_9,_4.join(isc.emptyString))}
_6[_5+_8]=_6[_8]}
this.$30g=_3;this.addMethods(_3)},isc.A.$97b=function isc_c_ListGrid__getCoordinateList(_1,_2){var _3=[];for(var _4 in _1){if(_1.hasOwnProperty(_4)){_3.add(parseInt(_4))}}
if(_2){_3.sort(function(_5,_6){return _5-_6})}
return _3});isc.B._maxIndex=isc.C+3;isc.A=isc.ListGrid.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.styleName="listGrid";isc.A.useCellRecords=false;isc.A.recordEnabledProperty="enabled";isc.A.canExpandRecordProperty="canExpand";isc.A.recordCanRemoveProperty="_canRemove";isc.A.animateFolders=true;isc.A.animateFolderTime=100;isc.A.animateFolderSpeed=3000;isc.A.animateRowsMaxTime=1000;isc.A.autoFetchDisplayMap=true;isc.A.warnOnUnmappedValueFieldChange=true;isc.A.showDetailFields=true;isc.A.groupStartOpen="first";isc.A.canCollapseGroup=true;isc.A.showGroupTitleColumn=true;isc.A.groupTitleColumnDefaults={canEdit:false,canFilter:false,canHide:false,canReorder:false,showDefaultContextMenu:false,autoFreeze:true,sortNormalizer:function(_1,_2,_3){return _1.groupTitle},autoFitWidth:true,autoFitWidthApproach:"value",title:"&nbsp;"};isc.A.groupTitleColumnName="groupTitle";isc.A.showGroupSummaryInHeader=false;isc.A.showCollapsedGroupSummary=false;isc.A.groupNodeStyle="groupNode";isc.A.groupNodeBaseStyle=null;isc.A.groupIcon="[SKINIMG]/TreeGrid/opener.gif";isc.A.groupIconSize=16;isc.A.groupIndentSize=20;isc.A.groupLeadingIndent=10;isc.A.canGroupBy=true;isc.A.groupByMaxRecords=1000;isc.A.groupByAsyncThreshold=50;isc.A.asynchGroupingPrompt="${loadingImage}&nbsp;Grouping data...";isc.A.nullGroupTitle="-none-";isc.A.valueIconSize=16;isc.A.valueIconLeftPadding=2;isc.A.valueIconRightPadding=2;isc.A.imageSize=16;isc.A.headerSpanVAlign="center";isc.A.showTreeColumnPicker=true;isc.A.reverseRTLAlign=true;isc.A.fetchDelay=300;isc.A.uniqueMatch=true;isc.A.overflow=isc.Canvas.HIDDEN;isc.A.backgroundColor="white";isc.A.minHeight=50;isc.A.defaultWidth=200;isc.A.drawAllMaxCells=250;isc.A.drawAheadRatio=1.3;isc.A.quickDrawAheadRatio=1.0;isc.A.scrollRedrawDelay=75;isc.A.scrollWheelRedrawDelay=250;isc.A.dataFetchDelay=300;isc.A.body=null;isc.A.bodyConstructor="GridBody";isc.A.bodyOverflow=isc.Canvas.AUTO;isc.A.bodyBackgroundColor="white";isc.A.allowMismatchedHeaderBodyBorder=true;isc.A.emptyCellValue="&nbsp;";isc.A.cellHeight=20;isc.A.normalCellHeight=20;isc.A.fixedRecordHeights=true;isc.A.fixedFieldWidths=true;isc.A.autoFitMaxRecords=50;isc.A.autoFitMaxColumns=50;isc.A.canAutoFitFields=true;isc.A.headerAutoFitEvent="doubleClick";isc.A.autoSizeHeaderSpans=false;isc.A.autoFitFieldsFillViewport=true;isc.A.autoFitWidthApproach="value";isc.A.includeGridSummaryInAutoFitWidth=true;isc.A.autoFitIconFields="title";isc.A.leaveScrollbarGap=true;isc.A.resizeFieldsForScrollbar=true;isc.A.showClippedValuesOnHover=null;isc.A.cellSpacing=0;isc.A.cellPadding=2;isc.A.timeFormatter="toShortPaddedTime";isc.A.$30h=["<a href='",,"' target='",,"' onclick='if(window.",,") return ",,".$30i(event,",,",",,");'>",,"</a>"];isc.A.$30j="\\'";isc.A.$30k="_blank";isc.A.linkTextProperty="linkText";isc.A.fastCellUpdates=isc.Browser.isIE&&!isc.Browser.isIE9;isc.A.normalBaseStyle="cell";isc.A.tallBaseStyle="cell";isc.A.editFailedBaseStyle=null;isc.A.editFailedCSSText="color:red;border:1px solid red;";isc.A.editPendingBaseStyle=null;isc.A.editPendingCSSText="color:#0066CC;";isc.A.recordCustomStyleProperty="customStyle";isc.A.recordBaseStyleProperty="_baseStyle";isc.A.shrinkForFreeze=false;isc.A.alternateFieldFrequency=1;isc.A.alternateRecordFrequency=1;isc.A.recordCSSTextProperty="cssText";isc.A.showHilitesInGroupSummary=true;isc.A.hiliteReplaceValueFieldTitle="Replace value with";isc.A.hiliteHTMLAfterFormat=true;isc.A.showSelectedStyle=true;isc.A.generateClickOnSpace=true;isc.A.generateDoubleClickOnEnter=true;isc.A.arrowKeyAction=null;isc.A.hiliteRowOnFocus=true;isc.A.recordComponentPoolingMode="viewport";isc.A.poolComponentsPerColumn=true;isc.A.showRollOver=!isc.Browser.isTouch;isc.A.backgroundComponentDefaults={snapTo:"TL",autoDraw:false,opacity:"50%"};isc.A.showHover=true;isc.A.showClippedHeaderTitlesOnHover=true;isc.A.cellHoverOutset=5;isc.A.hoverStyle="gridHover";isc.A.selectionAppearance="rowStyle";isc.A.reselectOnUpdate=true;isc.A.reselectOnUpdateNotifications="selectionChanged";isc.A.recordCanSelectProperty="canSelect";isc.A.navigateOnTab=true;isc.A.tabKeyAction="select";isc.A.useCopyPasteShortcuts=true;isc.A.copyEmptyCells=true;isc.A.showEmptyMessage=true;isc.A.emptyMessage="No items to show.";isc.A.emptyMessageStyle="emptyMessage";isc.A.filterButtonPrompt="Filter";isc.A.loadingDataMessage="${loadingImage}&nbsp;Loading data...";isc.A.loadingDataMessageStyle="loadingDataMessage";isc.A.loadingMessage="&nbsp;";isc.A.singleCellValueProperty="singleCellValue";isc.A.isSeparatorProperty="isSeparator";isc.A.filterEditorDefaults={shouldPrint:false};isc.A.filterEditorHeight=22;isc.A.autoFetchTextMatchStyle="substring";isc.A.canEditNew=false;isc.A.recordEditProperty="_canEdit";isc.A.editValuesTestedProperty="$30l";isc.A.autoValidate=true;isc.A.warnOnRemoval=false;isc.A.warnOnRemovalMessage="Are you sure you want to delete this record?";isc.A.recordRemovedProperty="$899";isc.A.removedCSSText="text-decoration:line-through;";isc.A.removeIcon="[SKIN]/actions/remove.png";isc.A.unremoveIcon="[SKIN]/actions/undo.png";isc.A.removeIconSize=16;isc.A.animateRemoveRecord=true;isc.A.animateRemoveTime=100;isc.A.animateRemoveSpeed=200;isc.A.removeFieldTitle=isc.nbsp;isc.A.removeFieldDefaults={type:"icon",width:21,showDefaultContextMenu:false,canEdit:false,canHide:false,canSort:false,canGroupBy:false,canFilter:false,showTitle:false,canExport:false,ignoreKeyboardClicks:true,showGridSummary:false,showGroupSummary:false,summaryValue:"&nbsp;"};isc.A.autoSaveEdits=true;isc.A.showErrorIcons=true;isc.A.errorIconHeight=16;isc.A.errorIconWidth=16;isc.A.errorIconSrc="[SKIN]/validation_error_icon.png";isc.A.cancelEditingConfirmationMessage="Cancelling this edit will discard unsaved changes for this record. Continue?";isc.A.confirmDiscardEdits=true;isc.A.confirmDiscardEditsMessage="This action will discard all unsaved changes for this list.";isc.A.discardEditsSaveButtonTitle="Save";isc.A.newRecordRowMessage="-- Add New Row --";isc.A.enterKeyEditAction="done";isc.A.escapeKeyEditAction="cancel";isc.A.editEvent=isc.EH.DOUBLE_CLICK;isc.A.editOnF2Keypress=true;isc.A.selectOnEdit=true;isc.A.enumCriteriaAsInitialValues=true;isc.A.autoSelectEditors=true;isc.A.editFormDefaults={canSelectText:true,autoDraw:false,errorOrientation:"left",showErrorText:false,showErrorStyle:false,itemKeyPress:function(_1,_2,_3){return this.grid.editorKeyPress(_1,_2,_3)}};isc.A.longTextEditorThreshold=255;isc.A.longTextEditorType="PopUpTextAreaItem";isc.A.headerHeight=22;isc.A.minFieldWidth=15;isc.A.showHeader=true;isc.A.headerBackgroundColor="#CCCCCC";isc.A.headerDefaults={instantRelayout:true,enforcePolicy:false,itemClick:function(_1,_2){this.Super("itemClick",arguments);this.grid.$666(_2,this)},itemDoubleClick:function(_1,_2){this.Super("itemDoubleClick",arguments);this.grid.$774(_2,this)},showContextMenu:function(){return this.grid.headerBarContextClick(this)},backgroundRepeat:isc.Canvas.NO_REPEAT,shouldPrint:false};isc.A.headerButtonDefaults={clipTitle:true,getCurrentCursor:function(){var _1=this.parentElement?this.parentElement.grid:null;var _2=isc.Canvas.DEFAULT;if(_1&&this.masterIndex!=null){var _3=_1.getField(this.masterIndex),_4=_1.$66c(_3)!=false;if(_4)_2=isc.Canvas.HAND}else{if(this.isSorterButton){if(!_1&&isc.isA.ListGrid(this.parentElement))_1=this.parentElement;if(_1){var _4=_1.$66c(_1.$60z())!=false;if(_4)_2=isc.Canvas.HAND}}else{_2=this.getClass().getPrototype().cursor}}
this.cursor=_2;return this.Super("getCurrentCursor",arguments)},dragScrollType:"parentsOnly",minWidth:20,hoverDelay:500};isc.A.clipHeaderTitles=(!isc.Browser.isIE||(isc.Browser.version>6&&isc.Browser.isStrict)||isc.Browser.version>=10);isc.A.sorterConstructor=isc.Button;isc.A.sorterButtonTitle="corner menu";isc.A.sorterDefaults={_redrawWithParent:false,getTitle:function(){return this.creator.getSortArrowImage()},click:function(){return this.creator.$91i()},showContextMenu:function(){return this.creator.$91j()},isSorterButton:true,align:"center"};isc.A.canSort=true;isc.A.canUnsort=false;isc.A.invalidateCacheOnUnsort=false;isc.A.selectHeaderOnSort=true;isc.A.sortDirection=Array.ASCENDING;isc.A.canPickFields=true;isc.A.canPickOmittedFields=false;isc.A.openRecordEditorContextMenuItemTitle="Edit";isc.A.dismissEmbeddedComponentContextMenuItemTitle="Dismiss";isc.A.deleteRecordContextMenuItemTitle="Delete";isc.A.canOpenRecordDetailGrid=true;isc.A.canOpenRecordEditor=true;isc.A.recordEditorSaveButtonTitle="Save";isc.A.recordEditorCancelButtonTitle="Cancel";isc.A.leaveHeaderMenuButtonSpace=null;isc.A.headerMenuButtonIcon="[SKIN]/ListGrid/headerMenuButton_icon.gif";isc.A.headerMenuButtonIconWidth=7;isc.A.headerMenuButtonIconHeight=7;isc.A.headerMenuButtonWidth=16;isc.A.headerMenuButtonHeight="100%";isc.A.canDragRecordsOut=false;isc.A.canReorderFields=true;isc.A.canResizeFields=true;isc.A.dragAppearance=isc.EH.TRACKER;isc.A.dragResizeAppearance=isc.EH.OUTLINE;isc.A.dragTrackerMode="title";isc.A.resizeFieldsInRealTime=(isc.Browser.isIE&&isc.Browser.isWin)||(isc.Browser.isFirefox&&isc.Browser.geckoVersion>=20080529)||(isc.Browser.isSafari&&isc.Browser.safariVersion>=500);isc.A.embeddedComponentIndent=25;isc.A.nestedGridDefaults={height:150};isc.A.skinImgDir="images/ListGrid/";isc.A.sortAscendingImage={src:"[SKIN]sort_ascending.gif",width:7,height:7};isc.A.sortDescendingImage={src:"[SKIN]sort_descending.gif",width:7,height:7};isc.A.trackerImage={src:"[SKIN]tracker.gif",width:16,height:16};isc.A.booleanTrueImage=null;isc.A.booleanFalseImage=null;isc.A.booleanPartialImage=null;isc.A.booleanImageWidth=16;isc.A.booleanImageHeight=16;isc.A.mozBodyOutlineColor="white";isc.A.mozBodyNoHeaderOutlineColor="red";isc.A.applyRowNumberStyle=true;isc.A.rowNumberStyle="specialCol";isc.A.rowNumberStart=1;isc.A.rowNumberFieldDefaults={name:"$74y",excludeFromState:true,canEdit:false,canFilter:false,canGroupBy:false,canSort:false,canExport:false,canHide:false,canReorder:false,canDragResize:false,canHilite:false,showAlternateStyle:false,$74z:true,showDefaultContextMenu:false,keyboardFiresRecordClick:false,showGroupSummary:false,showGridSummary:false,summaryValue:"&nbsp;",formatCellValue:function(_1,_2,_3,_4,_5){if(_5.isGrouped){if(_2==null||_2.$52e)return"&nbsp;";var _6=_5.getGroupedRecordIndex(_2);if(_6==-1)return null;return(_5.rowNumberStart+_6)}else{return this.rowNumberStart+_3}},autoFreeze:true};isc.A.$740=30;isc.A.expansionComponentPoolingMode="destroy";isc.A.destroyCustomExpansionComponents=false;isc.A.canExpandMultipleRecords=true;isc.A.maxExpandedRecordsPrompt="This grid is limited to \${count} simultaneously expanded records.  Please collapse some expanded records and retry.";isc.A.expansionFieldDefaults={name:"$72v",canEdit:false,canFilter:false,canGroupBy:false,canSort:false,canExport:false,canHide:false,canReorder:false,canDragResize:false,canHilite:false,$72w:true,showDefaultContextMenu:false,keyboardFiresRecordClick:false,cellAlign:"center",summaryValue:"&nbsp;",recordClick:function(_1,_2,_3,_4,_5,_6,_7){if(!_1.canExpandRecords||!_4.$72w)return;if(!_1.$811(_2,_3))return;if(_1.isExpanded(_2))_1.collapseRecord(_2);else _1.expandRecord(_2)},formatCellValue:function(_1,_2,_3,_4,_5){_2=_5.getCellRecord(_3,_4);if(_2==null||_2.$52e)return null;if(!_5.$811(_2,_3))return null;var _6=_5.isExpanded(_2)?_5.expansionFieldTrueImage:_5.expansionFieldFalseImage
if(_5.expansionFieldImageShowRTL&&_5.isRTL()){_6=isc.Img.urlForState(_6,null,null,null,null,"rtl")}
return _5.getValueIconHTML(_6,this)},autoFreeze:true};isc.A.expansionFieldTrueImage="[SKINIMG]/ListGrid/group_opened.gif";isc.A.expansionFieldFalseImage="[SKINIMG]/ListGrid/group_opening.gif";isc.A.expansionFieldImageShowRTL=false;isc.A.expansionFieldExtraWidth=16;isc.A.$74a=0;isc.A.$92b="_expanded_";isc.A.$92c="_hasExpansionComponent_";isc.A.$92d="_embeddedComponents_";isc.A.$92e="_recordComponents_";isc.A.expansionDetailFieldDefaults={_constructor:isc.HTMLFlow,autoDraw:false,width:"100%",height:"100%"};isc.A.expansionDetailsDefaults={_constructor:isc.DetailViewer,autoDraw:false,width:"100%"};isc.A.expansionRelatedDefaults={_constructor:isc.ListGrid,autoDraw:false,width:"100%",autoFitData:"vertical",autoFitMaxRecords:4};isc.A.expansionEditorDefaults={_constructor:"DynamicForm",autoDraw:false,numCols:4,colWidths:["*","*","*","*"],width:"100%",saveOperationType:"update"};isc.A.expansionEditorSaveDialogPrompt="You have unsaved changes - do you want to save them now?";isc.A.expansionEditorCollapseOnSave=true;isc.A.showExpansionEditorSaveButton=true;isc.A.expansionEditorSaveButtonDefaults={_constructor:"IButton",autoFit:true,layoutAlign:"center",click:function(){if(!this.grid||!this.form)return;var _1=this.grid,_2=(this.record&&_1.$916(this.record))?_1.$917(this.record).find("isExpansionComponent",true):null;this.grid.saveAndCollapseRecord(this.form,_2,this.record,false,this.grid.expansionEditorCollapseOnSave)}};isc.A.expansionEditorSaveButtonTitle="Save";isc.A.expansionDetailRelatedDefaults={_constructor:isc.HLayout,autoDraw:false,width:"100%",height:"100%"};isc.A.expansionLayoutDefaults={_constructor:isc.VLayout,autoDraw:false,width:"100%",height:10,overflow:"visible"};isc.A.recordDetailDSProperty="detailDS";isc.A.recordDropAppearance=isc.ListGrid.BETWEEN;isc.B.push(isc.A.shouldAnimateFolder=function isc_ListGrid_shouldAnimateFolder(_1){if(!this.animateFolders||!this.isDrawn())return false;if(this.autoFitData=="vertical"||this.autoFitData=="both")return false;var _2=this.data.isFolder(_1)?this.data.getOpenList(_1):null;if(_2==null||_2.length<=1)return false;return(_2.length<=this.getAnimateFolderMaxRows())},isc.A.getAnimateFolderMaxRows=function isc_ListGrid_getAnimateFolderMaxRows(){var _1=this.animateFolderMaxRows;if(_1==null){var _2=this.body?this.body.$27x():[0,0];_1=Math.min(75,(_2[1]-_2[0])*3)}
return _1},isc.A.getGroupTitleField=function isc_ListGrid_getGroupTitleField(){return this.groupTitleField},isc.A.showingGroupTitleColumn=function isc_ListGrid_showingGroupTitleColumn(){return(this.isGrouped&&this.showGroupSummary&&this.showGroupSummaryInHeader&&this.showGroupTitleColumn&&this.getGroupTitleField()==null)},isc.A.getGroupTitleColumn=function isc_ListGrid_getGroupTitleColumn(){var _1=this;var _2=isc.addProperties({$84g:true,getAutoFreezePosition:function(){return _1.getGroupTitleColumnPosition()}},this.groupTitleColumnDefaults,this.groupTitleColumnProperties);if(_2.name==null){_2.name=this.groupTitleColumnName}
return _2},isc.A.getGroupTitleColumnPosition=function isc_ListGrid_getGroupTitleColumnPosition(){if(!this.showingGroupTitleColumn())return-1;var _1=0;if(this.shouldShowRowNumberField())_1++;if(this.shouldShowCheckboxField())_1++;if(this.shouldShowExpansionField())_1++;return _1},isc.A.singleCellGroupHeaders=function isc_ListGrid_singleCellGroupHeaders(){return this.$141u(this.showGroupSummary,this.showGroupSummaryInHeader)},isc.A.$141u=function isc_ListGrid__singleCellGroupHeaders(_1,_2){if(this.getGroupTitleField()!=null)return false;if(_1&&_2)return false;return true},isc.A.getBreadth=function isc_ListGrid_getBreadth(){return this.getInnerWidth()},isc.A.$30m=function isc_ListGrid__formatDateCellValue(_1,_2,_3,_4,_5,_6){if(isc.isA.Date(_1)){if(_3.$851(_2)){var _7=_3.$30o(_2);var _8=isc.SimpleType.inheritsFrom(_2.type,"time");return isc.Time.toTime(_1,_7,_8)}
var _9=_2&&isc.SimpleType.inheritsFrom(_2.type,"datetime"),_10=!_9&&isc.SimpleType.inheritsFrom(_2.type,"date"),_7=_3.$45i(_2);if(_9)return _1.toShortDateTime(_7,true);return _1.toShortDate(_7,!_10)}
return _1},isc.A.$851=function isc_ListGrid__formatAsTime(_1){if(_1==null)return false;if(_1.timeFormatter!=null&&_1.dateFormatter==null)return true;if(_1.dateFormatter!=null&&_1.timeFormatter==null)return false;return isc.SimpleType.inheritsFrom(_1.type,"time")},isc.A.$45i=function isc_ListGrid__getDateFormatter(_1){if(_1==null)return this.dateFormatter;if(_1.dateFormatter!=null)return _1.dateFormatter;if(_1.displayFormat!=null&&isc.SimpleType.inheritsFrom(_1.type,"date")){return _1.displayFormat}
if(this.datetimeFormatter!=null&&isc.SimpleType.inheritsFrom(_1.type,"datetime")){return this.datetimeFormatter}
return this.dateFormatter},isc.A.$45j=function isc_ListGrid__getDateInputFormat(_1){var _2;if(_1)_2=_1.inputFormat
if(!_2)_2=this.dateInputFormat;return _2},isc.A.$30n=function isc_ListGrid__formatNumberCellValue(_1,_2,_3,_4,_5,_6){if(isc.isA.Number(_1)){if(isc.SimpleType.inheritsFrom(_2.type,"float")&&(_2.decimalPrecision!=null||_2.decimalPad!=null))
{return isc.Canvas.getFloatValueAsString(_1,_2.decimalPrecision,_2.decimalPad)}else if(_2.precision!=null){return isc.Canvas.getNumberValueAsString(_1,_2.precision,_2.type)}else{var _7=(_2.numberFormatter||_2.formatter||_3.numberFormatter);return _1.toFormattedString(_7)}}
return _1},isc.A.$30o=function isc_ListGrid__getTimeFormatter(_1){if(_1!=null){if(_1.timeFormatter!=null)return _1.timeFormatter;if(_1.displayFormat!=null&&isc.SimpleType.inheritsFrom(_1.type,"time")){return _1.displayFormat}}
return this.timeFormatter},isc.A.$30p=function isc_ListGrid__formatTimeCellValue(_1,_2,_3,_4,_5,_6){var _7=_1;if(isc.isA.String(_7)){_7=isc.Time.parseInput(_7,true)}
if(isc.isA.Date(_7)){if(!_3.$851(_2)){return _7.toShortDate(_3.$45i(_2),true)}
var _8=_3.$30o(_2);return isc.Time.toTime(_7,_8,true)}
return _1},isc.A.$30q=function isc_ListGrid__formatBinaryCellValue(_1,_2,_3,_4,_5,_6){if(isc.isA.String(_1))return _1;if(_4==null)return null;var _7=_2.name,_8=_3.getDataSource(),_9=(_8?_8.getFilenameField(_7):null)||_7+"_filename",_10=_4[_9],_1;if(_2.type=="imageFile"&&_2.showFileInline==true){var _11=_7+"$68c";if(!_4[_11]){var _12=isc.Canvas.getFieldImageDimensions(_2,_4),_13=_3.getDataSource().streamFile(_4,_2.name);_12.width=_12.width||_3.imageSize;_12.height=_12.height||_3.imageSize;_1=_4[_11]=isc.Canvas.imgHTML(_13,_12.width,_12.height)}else
_1=_4[_11]}else{if(_2.showFileInline==true){this.logWarn("$30q(): Unsupported field-type for showFileInline: "+_2.type)}
if(!_2.filenameSuppressed&&(_10==null||isc.isAn.emptyString(_10))){return this.emptyCellValue}
var _14="'"+_3.getID()+".view",_15="'"+_3.getID()+".download",_16="";if(_2&&_2.name){_16="Cell("+_5+", \""+_2.name+"\")'"}else{_16="Row("+_5+")'"}
var _17=isc.Canvas.imgHTML({src:"[SKIN]actions/view.png",width:16,height:16,extraCSSText:"cursor:"+isc.Canvas.HAND,extraStuff:" onclick="+_14+_16});var _18=isc.Canvas.imgHTML({src:"[SKIN]actions/download.png",width:16,height:16,extraCSSText:"cursor:"+isc.Canvas.HAND,extraStuff:" onclick="+_15+_16});_1=_17+"&nbsp;"+_18+(_10?"&nbsp;"+_10:"")}
return _1},isc.A.$30r=function isc_ListGrid__formatLinkCellValue(_1,_2,_3,_4,_5,_6){if(_1==null||isc.is.emptyString(_1))return _1;var _7=_2.target?_2.target.replaceAll(_3.$ob,_3.$30j):_3.$30k;var _8=_2.linkTextProperty?_2.linkTextProperty:_3.linkTextProperty;var _9=(_4&&_4[_8])?_4[_8]:_2.linkText||_1;var _10=_1;if(_2.linkURLPrefix)_10=_2.linkURLPrefix+_10;if(_2.linkURLSuffix)_10=_10+_2.linkURLSuffix;_10=_10.replaceAll(_3.$ob,_3.$30j);if(_7=="javascript"){_10="javascript:void"}
var _11=_3.$30h;_11[1]=_10;_11[3]=_7;var _12=_3.getID();_11[5]=_12;_11[7]=_12;_11[9]=_5;_11[11]=_6;_11[13]=_9;return _11.join(isc.emptyString)},isc.A.$30i=function isc_ListGrid__linkClicked(_1,_2,_3){var _4=this.getRecord(_2),_5=(this.destroyed||!this.isDrawn()||!this.isVisible()||isc.EH.targetIsMasked(this.body)||!this.recordIsEnabled(_4,_2,_3)),_6=this.getField(_3);if(_1.target=="javascript"||_6.target=="javascript"){_5=true;this.cellClick(_4,_2,_3)}
if(_5){if(!isc.Browser.isIE){_1.preventDefault()}
return false}
return true},isc.A.$30s=function isc_ListGrid__formatImageCellValue(_1,_2,_3,_4,_5,_6){if(_1==null||_1==isc.emptyString)return isc.emptyString;var _7=isc.Canvas.getFieldImageDimensions(_2,_4);_7.width=_7.width||_3.imageSize;_7.height=_7.height||_3.imageSize;var _8=_1,_9=_2.imageURLPrefix||_2.baseURL||_2.imgDir;if(_2.imageURLSuffix!=null)_8+=_2.imageURLSuffix;return isc.Canvas.imgHTML(_8,_7.width,_7.height,null,_2.extraStuff,_9,_2.activeAreaHTML)},isc.A.$59e=function isc_ListGrid__formatIconCellValue(_1,_2,_3,_4,_5,_6){if(isc.isA.RecordEditor(_3)&&_3.isAFilterEditor()&&_2.canFilter==false)return null;if(_2.$59f)return _2.$59f;_2.$59f=isc.Canvas.imgHTML(_2.cellIcon||_2.icon,_2.iconWidth||_2.iconSize||_3.imageSize,_2.iconHeight||_2.iconSize||_3.imageSize);return _2.$59f},isc.A.setFastCellUpdates=function isc_ListGrid_setFastCellUpdates(_1){if(this.body!=null){this.body.setFastCellUpdates(_1);_1=this.body.fastCellUpdates}
if(this.frozenBody!=null){this.frozenBody.setFastCellUpdates(_1)}
this.fastCellUpdates=_1},isc.A.shouldNavigateOnTab=function isc_ListGrid_shouldNavigateOnTab(){return this.canSelectCells&&this.navigateOnTab},isc.A.shouldShowRemoveField=function isc_ListGrid_shouldShowRemoveField(){if(this.fieldSourceGrid!=null)return this.fieldSourceGrid.shouldShowRemoveField();return this.canRemoveRecords},isc.A.markRecordRemoved=function isc_ListGrid_markRecordRemoved(_1,_2){if(!isc.isA.Number(_1))_1=this.findRowNum(_1);if(this.getEditRow()==_1)this.hideInlineEditor();if(this.canSelectCells){this.selection.deselectRow(_1)}else{var _3=this.getRecord(_1);this.selection.deselect(_3)}
this.setEditValue(_1,this.recordRemovedProperty,true,false,false);if(!_2)this.refreshRow(_1)},isc.A.recordMarkedAsRemoved=function isc_ListGrid_recordMarkedAsRemoved(_1){if(_1==null)return false;if(!isc.isA.Number(_1)){_1=this.getEditSessionRowNum(_1);if(_1==null)return false}
return(this.getEditValue(_1,this.recordRemovedProperty)==true)},isc.A.unmarkRecordRemoved=function isc_ListGrid_unmarkRecordRemoved(_1,_2){if(!isc.isA.Number(_1))_1=this.findRowNum(_1);this.clearEditValue(_1,this.recordRemovedProperty);if(!_2)this.refreshRow(_1)},isc.A.markSelectionRemoved=function isc_ListGrid_markSelectionRemoved(){var _1=this.getSelectedRecords();if(_1!=null){for(var i=0;i<_1.length;i++){this.markRecordRemoved(_1[i],true)}}
this.markForRedraw()},isc.A.shouldDeferRemoval=function isc_ListGrid_shouldDeferRemoval(){if(this.deferRemoval!=null)return this.deferRemoval;return!this.autoSaveEdits},isc.A.editorKeyDown=function isc_ListGrid_editorKeyDown(_1,_2){if(isc.Browser.isMoz&&_1&&_1.multiple&&isc.isA.NativeSelectItem(_1)&&_2=="Enter")
{_1.$695=_1.getValue()}},isc.A.editorKeyPress=function isc_ListGrid_editorKeyPress(_1,_2,_3){var _4=isc.EH,_5,_6;var _7=isc.isA.PopUpTextAreaItem(_1)||(isc.RichTextItem&&isc.isA.RichTextItem(_1))||isc.isA.TextAreaItem(_1);if(_2=="Tab"){var _8=_4.shiftKeyDown();if(this.ns.isA.ContainerItem(_1)||(_1.icons!=null&&_1.icons.length>0&&!this.ns.isA.PopUpTextAreaItem(_1)))
{if(!this.$11s(_1,_8)){return false}}
_6=_8?isc.ListGrid.SHIFT_TAB_KEYPRESS:isc.ListGrid.TAB_KEYPRESS;_5=false}else if(_2=="Enter"){if(_1.getFocusIconIndex()!=null)return;if(_7&&isc.EH.altKeyDown()==false){return _5}
if(_1.$695!=null){var _9=_1.$695;delete _1.$695;_1.setValue(_9)}
_6=isc.ListGrid.ENTER_KEYPRESS;_5=false}else if(_2=="Escape"){_6=isc.ListGrid.ESCAPE_KEYPRESS;_5=false}else if(_2=="Arrow_Up"){var _10=_7;if(_10&&!isc.EH.altKeyDown())return _5;if(isc.isA.SpinnerItem(_1)&&!isc.EH.altKeyDown())return _5;if(isc.isA.SelectItem(_1)&&!isc.EH.ctrlKeyDown())return _5;if(isc.isA.PresetCriteriaItem(_1)&&!isc.EH.ctrlKeyDown())return _5;if(isc.EH.ctrlKeyDown()&&isc.EH.shiftKeyDown())return _5;_6=isc.ListGrid.UP_ARROW_KEYPRESS;_5=false}else if(_2=="Arrow_Down"){var _10=_7;if(_10&&!isc.EH.altKeyDown())return _5;if(isc.isA.SpinnerItem(_1)&&!isc.EH.altKeyDown())return _5;if(isc.isA.SelectItem(_1)&&!isc.EH.ctrlKeyDown())return _5;if(isc.isA.PresetCriteriaItem(_1)&&!isc.EH.ctrlKeyDown())return _5;if(isc.EH.ctrlKeyDown&&isc.EH.shiftKeyDown())return _5;_6=isc.ListGrid.DOWN_ARROW_KEYPRESS;_5=false}else if(this.moveEditorOnArrow&&this.$51k){if(_2=="Arrow_Left"){_6=isc.ListGrid.LEFT_ARROW_KEYPRESS;_5=false}else if(_2=="Arrow_Right"){_6=isc.ListGrid.RIGHT_ARROW_KEYPRESS;_5=false}}
if(_6!=null){if(isc.EH.clickMaskUp()){isc.EH.setMaskedFocusCanvas(null,isc.EH.clickMaskRegistry.last())}
this.cellEditEnd(_6)}
return _5},isc.A.$11s=function isc_ListGrid__moveFocusWithinItem(_1,_2){if(!_1)return true;return(!_1.$11s(!_2))},isc.A.$30t=function isc_ListGrid__editFormItem_elementFocus(_1){var _2=this.$1008(_1);this.Super("elementFocus",arguments);this.$1009(_2[0],_2[1])},isc.A.$101a=function isc_ListGrid__editFormItem_setLGEditCellForFocus(_1){var _2=this.form,_3=_2.grid;var _4,_5,_6,_7;if(_3.$30a){_4=_3.$285;if(!_3.editByCell){_4=_3.$285;_6=this.getFieldName();_5=_3.fields.findIndex(_3.fieldIdProperty,_6);if(!_1){_7=(_3.$30u!=_5);if(_7){_3.setNewEditCell(_4,_5);_3.cellEditEnd(isc.ListGrid.EDIT_FIELD_CHANGE)}}}else{_5=_3.$30u}}
return[_4,_5]},isc.A.$101b=function isc_ListGrid__editFormItem_fireLGEditorEnter(_1,_2){var _3=this.form,_4=_3.grid;if(_4.$30a){var _5=this.$30v,_6=this.$30w;delete this.$30v;delete this.$30w;var _7=isc.addProperties({},_4.getCellRecord(_1,_2),_4.$300(_1,_2));if(_6){var _8=_4.getFieldName(_2);_4.$30x(this,_1,_2,_7[_8])}
if(_5)_4.$30z(this,_1,_7)}else{_4.logWarn("suppressing editorEnter handlers on focus as listGrid.$30a is null")}},isc.A.getParentGroupIndex=function isc_ListGrid_getParentGroupIndex(_1){if(!this.isGrouped)return 0;var _2=this.groupTree,_3=_2.getParent(_1),_4=_2.getChildren(_2.getParent(_3)),_5=0;if(!isc.isA.ResultSet(_4)||_4.lengthIsKnown()){for(var i=0,_7=_4.getLength();i<_7;++i){var _8=_4.getCachedRow(i);if(_8!=null&&_8.groupValue==_3.groupValue){_5=i;break}}}
return _5},isc.A.getGroupedRecordIndex=function isc_ListGrid_getGroupedRecordIndex(_1){if(!this.isGrouped)return-1;var _2=this.groupTree,_3=_2==null?null:_2.getParent(_1);if(_3==null)return-1;var _4=_2.getChildren(_2.getParent(_3)),_5=0,_6=0;if(!isc.isA.ResultSet(_4)||_4.lengthIsKnown()){for(var i=0,_8=_4.getLength();i<_8;++i){var _9=_4.getCachedRow(i);if(_9!=null){if(_9.groupValue==_3.groupValue){var _10=_2.getChildren(_9);if(!isc.isA.ResultSet(_10)||_10.lengthIsKnown()){for(var j=0,_12=_10.getLength();j<_12;++j){var _13=_10.getCachedRow(j);if(_13!=null&&this.objectsAreEqual(_13,_1)){return _6+j}}}}
var _14=_2.getChildren(_9);if(!isc.isA.ResultSet(_14)||_14.lengthIsKnown()){var _15=_14.getLength();if(this.showGroupSummary&&!this.showGroupSummaryInHeader){for(var _16=_15-1;_16>=0;--_16){var _17=_14.getCachedRow(_16);if(_17!=null){if(_17[this.groupSummaryRecordProperty])--_15;else break}}}
_6+=_15}}}}
return _6},isc.A.objectsAreEqual=function isc_ListGrid_objectsAreEqual(_1,_2){for(var _3 in _1){if(_1[_3]!=_2[_3])return false}
return true},isc.A.getRowNumberField=function isc_ListGrid_getRowNumberField(){var _1=this,_2={width:this.$740,rowNumberStart:this.rowNumberStart,getAutoFreezePosition:function(){return _1.getRowNumberFieldPosition()}};if(this.applyRowNumberStyle)_2.baseStyle=this.rowNumberStyle;isc.addProperties(_2,this.rowNumberFieldDefaults,this.rowNumberFieldProperties);_2.title=isc.nbsp;return _2},isc.A.getCurrentRowNumberField=function isc_ListGrid_getCurrentRowNumberField(){var _1=this.completeFields||this.fields,_2=_1.find(this.fieldIdProperty,"$74y");return!_2?null:isc.isAn.Array(_2)?_2[0]:_2},isc.A.isRowNumberField=function isc_ListGrid_isRowNumberField(_1){if(!_1||!_1.$74z)return false;else return true},isc.A.getRowNumberFieldPosition=function isc_ListGrid_getRowNumberFieldPosition(){if(this.fieldSourceGrid)return this.fieldSourceGrid.getRowNumberFieldPosition();if(!this.shouldShowRowNumberField())return-1;return 0},isc.A.shouldShowRowNumberField=function isc_ListGrid_shouldShowRowNumberField(){return this.fieldSourceGrid?this.fieldSourceGrid.shouldShowRowNumberField():(this.showRowNumbers==true)},isc.A.shouldShowExpansionField=function isc_ListGrid_shouldShowExpansionField(){return this.fieldSourceGrid?this.fieldSourceGrid.shouldShowExpansionField():this.canExpandRecords},isc.A.getExpansionField=function isc_ListGrid_getExpansionField(){var _1=this,_2={excludeFromState:true,width:this.$72y()+this.expansionFieldExtraWidth,getAutoFreezePosition:function(){return _1.getExpansionFieldPosition()}};_2.valueIconWidth=this.$72y();_2.valueIconHeight=this.$72z();isc.addProperties(_2,this.expansionFieldDefaults,this.expansionFieldProperties);_2.title=isc.nbsp;return _2},isc.A.getCurrentExpansionField=function isc_ListGrid_getCurrentExpansionField(){var _1=this.completeFields||this.fields,_2=_1.find(this.fieldIdProperty,"$72v");return!_2?null:isc.isAn.Array(_2)?_2[0]:_2},isc.A.$72y=function isc_ListGrid__getExpansionFieldImageWidth(){return this.expansionFieldImageWidth||this.booleanImageWidth||(isc.CheckboxItem?isc.CheckboxItem.getInstanceProperty("valueIconWidth"):null)},isc.A.$72z=function isc_ListGrid__getExpansionFieldImageHeight(){return this.expansionFieldImageHeight||this.booleanImageHeight||(isc.CheckboxItem?isc.CheckboxItem.getInstanceProperty("valueIconHeight"):null)},isc.A.isExpansionField=function isc_ListGrid_isExpansionField(_1){if(!_1||!_1.$72w)return false;else return true},isc.A.getExpansionFieldPosition=function isc_ListGrid_getExpansionFieldPosition(){if(this.fieldSourceGrid!=null)return this.fieldSourceGrid.getExpansionFieldPosition();if(!this.shouldShowExpansionField())return-1;var _1=0;if(this.shouldShowRowNumberField())_1++;if(this.shouldShowCheckboxField())_1++;return _1});isc.evalBoundary;isc.B.push(isc.A.$811=function isc_ListGrid__canExpandRecord(_1,_2){if(_1==null)_1=this.getRecord(_2);if(_1==null)return false;return this.canExpandRecord(_1,_2)},isc.A.canExpandRecord=function isc_ListGrid_canExpandRecord(_1,_2){return _1[this.canExpandRecordProperty]==false?false:true&&(this.canExpandRecords!=false)},isc.A.setCanExpandRecords=function isc_ListGrid_setCanExpandRecords(_1){if(this.canExpandRecords==_1)return;if(!_1){var _2=this.data;if(_2){var _3=this.$92f();if(_3!=null){for(var i=0;i<_3.length;i++){this.collapseRecord(_3[i])}}}}
this.canExpandRecords=_1;this.refreshFields()},isc.A.expandRecord=function isc_ListGrid_expandRecord(_1,_2){if(!this.body){if(!this.$112v)this.$112v=[];this.$112v.add(_1);return}
var _3=false,_4;if(!this.isExpanded(_1)){if(this.onExpandRecord!=null&&!this.onExpandRecord(_1))return false;if(!this.canExpandMultipleRecords){if(this.$74b)
this.collapseRecord(this.$74b);this.$74b=_1}else if(this.maxExpandedRecords!=null){if(this.$74a>=this.maxExpandedRecords){var _5=this.maxExpandedRecordsPrompt.evalDynamicString(this,{count:this.maxExpandedRecords});isc.say(_5);return false}}
_4=this.getExpansionComponent(_1);var _6=this.isRTL(),_7=this.createAutoChild("expansionLayout",{layoutLeftMargin:_6?0:this.embeddedComponentIndent,layoutRightMargin:_6?this.embeddedComponentIndent:0,members:[_4]});_7.isExpansionComponent=true;_7.removeOnHideField=true;this.addEmbeddedComponent(_7,_1,this.data.indexOf(_1));this.$92g(_1,true);this.$92h(_1,true);this.$74a++;if(!this.canExpandMultipleRecords)this.$74b=_1;_3=true}
if(_2!=false){this.delayCall("markForRedraw",["Expanded Record"])}
return _3},isc.A.expandRecords=function isc_ListGrid_expandRecords(_1){if(!_1||_1.length==0)return;var _2=_1.length;for(var i=0;i<_2;i++){var _4=(i==_2-1);this.expandRecord(_1[i],_4)}},isc.A.collapseRecord=function isc_ListGrid_collapseRecord(_1,_2){var _3=(_1&&this.$916(_1))?this.$917(_1).find("isExpansionComponent",true):null;this.$1303=_2;if(isc.isA.Layout(_3)){var _4=_3.getMember(0);if(_4){if(!isc.isA.DynamicForm(_4))_4=_4.formMember;if(isc.isA.DynamicForm(_4)&&_4.valuesHaveChanged()){this.saveAndCollapseRecord(_4,_3,_1,true,true);return}}}
this.$84t(_1,_3)},isc.A.collapseRecords=function isc_ListGrid_collapseRecords(_1){if(!_1||_1.length==0)return;var _2=_1.length;for(var i=0;i<_2;i++){var _4=(i==_2-1);this.collapseRecord(_1[i],_4)}},isc.A.saveAndCollapseRecord=function isc_ListGrid_saveAndCollapseRecord(_1,_2,_3,_4,_5){if(this.autoSaveEdits==true){var _6=this;if(this.expansionEditorShowSaveDialog&&_4){isc.confirm(this.expansionEditorSaveDialogPrompt,function(_9){if(_9){_6.saveExpansionDetail(_1,_2,_3,_5)}else{if(_5)_6.$84t(_3,_2)}})}else{this.saveExpansionDetail(_1,_2,_3,_5)}
return}else{var _7=_1.getChangedValues(),_8=this.getRecordIndex(_3),_6=this;if(this.expansionEditorShowSaveDialog&&_4){isc.confirm("You have unsaved changes - do you want to save them now?",function(_9){if(_9){_6.$90t(_8,_7)}
if(_5)_6.$84t(_3,_2)});return}else{_6.$90t(_8,_7);if(_5)this.$84t(_3,_2);return}}},isc.A.$90t=function isc_ListGrid__saveExpansionEditorValues(_1,_2){for(var _3 in _2){this.setEditValue(_1,_3,_2[_3])}},isc.A.saveExpansionDetail=function isc_ListGrid_saveExpansionDetail(_1,_2,_3,_4){var _5=this;_1.saveData(function(_6,_7,_8){if(_7){_3=_7;if(_4)_5.$84t(_3,_2);else _1.editRecord(_3)}},{showPrompt:true,promptStyle:"cursor"})},isc.A.$84t=function isc_ListGrid__collapseRecord(_1,_2){_2=_2||(_1&&this.$916(_1)?this.$917(_1).find("isExpansionComponent",true):null);if(this.isExpanded(_1)){if(this.onCollapseRecord!=null&&!this.onCollapseRecord(_1))return;if(this.$74b&&this.$74b==_1)
delete this.$74b;this.removeEmbeddedComponent(_1,_2?_2:this.frozenFields?this.frozenFields.length:0);this.$74a--}
this.$92g(_1,false);if(this.$1303!=false){this.markForRedraw()}},isc.A.isExpanded=function isc_ListGrid_isExpanded(_1){return(!_1?false:!!_1[this.$92b+this.ID])},isc.A.$92g=function isc_ListGrid__setExpanded(_1,_2){_1[this.$92b+this.ID]=_2},isc.A.$92f=function isc_ListGrid__getExpandedRows(){return this.data.findAll(this.$92i+this.ID,true)},isc.A.$92j=function isc_ListGrid__hasExpansionComponent(_1){return _1[this.$92c+this.ID]},isc.A.$92h=function isc_ListGrid__setExpansionComponent(_1,_2){_1[this.$92c+this.ID]=_2},isc.A.$916=function isc_ListGrid__hasEmbeddedComponents(_1){var _2=_1[this.$92d+this.ID];return(_2!=null&&_2.length>0)},isc.A.$917=function isc_ListGrid__getEmbeddedComponents(_1){var _2=_1[this.$92d+this.ID],_3=[];if(!_2)return null;for(var i=0;i<_2.length;i++){_3[i]=isc.Canvas.getById(_2[i])}
return _3},isc.A.$92k=function isc_ListGrid__setEmbeddedComponents(_1,_2){_1[this.$92d+this.ID]=_2},isc.A.$918=function isc_ListGrid__addEmbeddedComponent(_1,_2){if(!_1[this.$92d+this.ID]){_1[this.$92d+this.ID]=[]}
if(!_1[this.$92d+this.ID].contains(_2.getID())){_1[this.$92d+this.ID].add(_2.getID())}},isc.A.$919=function isc_ListGrid__removeEmbeddedComponent(_1,_2){var _3=_1[this.$92d+this.ID];if(_3==null)return;if(_3.length==0){_1[this.$92d+this.ID]=null;return}
_3.remove(_2.getID());if(_3.length==0){_1[this.$92d+this.ID]=null}},isc.A.$92l=function isc_ListGrid__deleteEmbeddedComponents(_1,_2){delete _1[this.$92d+this.ID]},isc.A.$92m=function isc_ListGrid__hasRecordComponents(_1){return(_1&&_1[this.$92e+this.ID]!=null)},isc.A.$92n=function isc_ListGrid__getRecordComponents(_1){if(!_1)return null;var _2=_1[this.$92e+this.ID],_3={};if(_2){for(var _4 in _2){if(_2[_4].isNullMarker){_3[_4]=_2[_4]}else{_3[_4]=isc.Canvas.getById(_2[_4])}}}
return _3},isc.A.$92o=function isc_ListGrid__addRecordComponent(_1,_2,_3){if(!_1[this.$92e+this.ID]){_1[this.$92e+this.ID]={}}
if(_3.isNullMarker){_1[this.$92e+this.ID][_2]=_3}else{_1[this.$92e+this.ID][_2]=_3.getID()}},isc.A.$92p=function isc_ListGrid__deleteRecordComponent(_1,_2){var _3=_1[this.$92e+this.ID];if(_3==null)return;if(isc.isAn.emptyObject(_3)){_1[this.$92e+this.ID]=null;return}
if(_2==null)_2=this.$81m;delete _3[_2];if(isc.isAn.emptyObject(_3)){_1[this.$92e+this.ID]=null}},isc.A.getCurrentExpansionComponent=function isc_ListGrid_getCurrentExpansionComponent(_1){if(isc.isA.Number(_1))_1=this.getRecord(_1);if(!this.$92j(_1))return null;var _2=this.$916(_1)?this.$917(_1).find("isExpansionComponent",true):null;if(_2){return _2.members[0]}
return null},isc.A.getExpansionComponent=function isc_ListGrid_getExpansionComponent(_1){return this.$84d(_1,true,false,this.getRecordIndex(_1),0)},isc.A.getRelatedDataSource=function isc_ListGrid_getRelatedDataSource(_1){return isc.DS.getDataSource(_1[this.recordDetailDSProperty])||isc.DS.get(this.detailDS)});isc.B._maxIndex=isc.C+79;isc.A=isc.ListGrid.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.warnOnReusedFields=true;isc.A.autoFitExpandLengthThreshold=10;isc.A.clipRecordComponents=true;isc.A.$57l="within";isc.A.$81l="dataChanged";isc.A.$70q=0;isc.A.$g2="boolean";isc.A.discardEditsOnHideField=true;isc.A.$604="set fields";isc.A.$12c="checkbox";isc.A.$136i=[];isc.A.checkboxFieldDefaults={name:"_checkboxField",excludeFromState:true,canEdit:false,shouldPrint:false,canFilter:false,canGroupBy:false,canSort:false,canExport:false,canHide:false,canReorder:false,canDragResize:false,canHilite:false,$63f:true,type:"boolean",showDefaultContextMenu:false,hoverHTML:"return null;",autoFreeze:true,showGridSummary:false,showGroupSummary:false,summaryValue:"&nbsp;",title:isc.nbsp};isc.A.checkboxFieldHSpace=15;isc.A.$812="Getting listGrid fieldWidths. ";isc.A.gridComponents=["filterEditor","header","body","summaryRow"];isc.A.showComponentPropertyMap={header:"showHeader",filterEditor:"showFilterEditor",summaryRow:"showGridSummary"};isc.A.$880="body";isc.A.$881="header";isc.A.iconPadding=2;isc.A.$71t="summary";isc.A.applyFormulaAfterSummary=false;isc.A.refreshDependentFieldsForSummaries=true;isc.A.$5w="blank";isc.A.$302="<HR>";isc.A.allowRowSpanning=false;isc.A.rowSpanSelectionMode="forward";isc.A.rowSpanEditMode="first";isc.A.$303=["style='margin-left:",,"px;margin-right:",,"px;'"];isc.A.$g2="boolean";isc.A.$gx="text";isc.A.$54y={" ":true,"\n":true,"\r":true,"\r\n":true};isc.A.$54t="&nbsp;";isc.A.$687={text:true,TextItem:true,select:true,SelectItem:true,combobox:true,ComboBoxItem:true,comboBox:true,checkbox:true,CheckboxItem:true,date:true,DateItem:true,spinner:true,SpinnerItem:true,popUpTextArea:true,PopUpTextAreaItem:true};isc.A.$18r="false";isc.A.$18q="true";isc.A.$81m="$81n";isc.A.$81o=0;isc.A.$57m="expand";isc.A.printAutoFit=true;isc.A.printWrapCells=true;isc.A.printHeaderStyle="printHeader";isc.A.printMaxRows=100;isc.A.shouldPrintAttributeMap={filterEditor:"printFilterEditor",header:"printHeader",summaryRow:"printSummaryRow"};isc.A.printFilterEditor=false;isc.A.$118p="hoverHTML";isc.A.$118q="record,value,rowNum,colNum,grid";isc.A.defaultCellHoverComponentWidth=100;isc.A.defaultCellHoverComponentHeight=1;isc.A.$20s="Arrow_Up";isc.A.$20t="Arrow_Down";isc.A.$60n="Arrow_Left";isc.A.$60o="Arrow_Right";isc.A.$304="Space";isc.A.$10j="Enter";isc.A.$51g="f2";isc.A.$jf="Tab";isc.A.$51g="f2";isc.A.$20w="Escape";isc.A.$51h="Backspace";isc.A.$51i="Delete";isc.A.$51l="keyPress";isc.A.$27r="none";isc.A.$305="focus";isc.A.$12b="select";isc.A.$306="activate";isc.A.hiliteOnNativeRowFocus=true;isc.A.scrollToCellXPosition="center";isc.A.scrollToCellYPosition="center";isc.A._useFocusProxy=false;isc.A.showFocusOutline=!isc.Browser.isSafari;isc.A.showGridSummary=false;isc.A.invalidSummaryValue="&nbsp;";isc.A.includeInSummaryProperty="includeInSummary";isc.A.gridSummaryRecordProperty="isGridSummary";isc.A.groupSummaryRecordProperty="isGroupSummary";isc.A.recordApplyPluralTitleProperty="applyPluralTitle";isc.A.$71t="summary";isc.A.recordSummaryBaseStyle="recordSummaryCell";isc.A.summaryRowConstructor="ListGrid";isc.A.summaryRowDefaults={showRollOver:false};isc.A.summaryRowHeight=20;isc.A.summaryRowStyle="gridSummaryCell";isc.A.$12e="binary";isc.A.$52x="file";isc.A.$677="imageFile";isc.A.$18q="true";isc.A.updateEditorItemsInPlace=true;isc.A.$307={time:true,TimeItem:true};isc.A.$g5="time";isc.A.$308={date:true,DateItem:true};isc.A.$68k={datetime:true,dateTime:true,DatetimeItem:true,DateTimeItem:true};isc.A.$g4="date";isc.A.$68l="datetime";isc.A.popUpTextAreaEditorTypes={popUpTextArea:true,PopUpTextAreaItem:true};isc.A.$31a={checkbox:true,CheckboxItem:true};isc.A.$g2="boolean";isc.A.$12c="checkbox";isc.A.$12i="CycleItem";isc.A.$31b={select:true,SelectItem:true};isc.A.$45k=["change","changed","defaultDynamicValue"];isc.A.$31c=["change","changed","defaultDynamicValue","keyPress","click","showIf","enableIf"];isc.A.$31d={};isc.A.$81p="column remap";isc.A.$31e=0;isc.A.$31f="rowNum,colNum,editCompletionEvent,success";isc.A.$88z=true;isc.A.cellRecordMode="row";isc.A.$60m="toggle frozen fields";isc.A.$81q="rebuilding body";isc.A.screenReaderCellSeparator="/";isc.A.selectionCanvasDefaults={opacity:20};isc.A.selectionUnderCanvasDefaults={};isc.A.rollOverCanvasDefaults={snapTo:"TL",width:"100%",height:"100%"};isc.A.rollUnderCanvasDefaults={snapTo:"TL",width:"100%",height:"100%"};isc.A.showHeaderSpanTitlesInFormulaBuilder=true;isc.A.formulaBuilderSpanTitleSeparator=" - ";isc.A.showHeaderSpanTitlesInSortEditor=true;isc.A.sortEditorSpanTitleSeparator=" - ";isc.A.showHeaderSpanTitlesInHiliteEditor=true;isc.A.hiliteEditorSpanTitleSeparator=" - ";isc.A.$616="header height changed";isc.A.$617="header visibility changed";isc.A.headerMenuButtonDefaults={title:null,iconSpacing:0,showDisabled:false,showDisabledIcon:false,click:function(){this.creator.headerMenuButtonClick()},doubleClick:function(){this.creator.headerMenuButtonDoubleClick()},mouseOut:function(){var _1=this.ns.EH;if(!_1.$129k()){var _2=_1.getTarget();if(!_2||!this.parentElement.contains(_2)){this.hide()}}
this.Super("mouseOut",arguments)},visibilityChanged:function(_1){if(!_1&&this.parentElement!=null)this.parentElement.markForRedraw()}};isc.A.$114x="$114y";isc.A.predictScrollbarGap=true;isc.A.sortFieldAscendingText="Sort Ascending";isc.A.sortFieldDescendingText="Sort Descending";isc.A.clearSortFieldText="Clear Sort";isc.A.clearAllSortingText="Clear All Sorting";isc.A.clearFilterText="Clear Filter";isc.A.configureSortText="Configure Sort...";isc.A.configureGroupingText="Configure Grouping...";isc.A.autoFitFieldText="Auto Fit";isc.A.autoFitAllText="Auto Fit All Columns";isc.A.fieldVisibilitySubmenuTitle="Columns";isc.A.freezeFieldText="Freeze ${title}";isc.A.unfreezeFieldText="Unfreeze ${title}";isc.A.groupByText="Group by ${title}";isc.A.ungroupText="Ungroup";isc.A.headerContextMenuConstructor="Menu";isc.A.headerContextMenuDefaults={hide:function(){this.Super("hide",arguments);if(!isc.Browser.isTouch&&this.grid){this.grid.$93s=false;this.grid.$129m()}},doSort:function(_1,_2){if(_2=="unsort")this.grid.toggleSort(this.grid.getFieldName(_1),_2);else this.grid.sort(_1,_2)},canHover:true,showHover:true,cellHoverHTML:function(_1,_2,_3){return _1.prompt},groupField:function(_1){var _2=this.grid,_3=_2.getGroupByFields();if((_1.targetField&&_1.targetField.groupingMode)||!(_3&&_3.contains(_1.fieldName)))
{_2.groupBy(_1.fieldName)}},ungroup:function(){this.grid.ungroup()}};isc.A.$31g="sort";isc.A.canMultiSort=true;isc.A.canMultiGroup=false;isc.A.sortNumeralStyle="sortNumeral";isc.A.$145s=["<span class='",,"'>",,,,"</span>"];isc.A.$73y="setSort";isc.A.chartConstructor="FacetChart";isc.A.chartType="Column";isc.A.groupIdField="groupId";isc.A.groupParentIdField="groupParentId";isc.A.retainOpenStateOnRegroup=true;isc.A.groupIconPadding=5;isc.A.showGroupSummary=false;isc.A.groupSummaryStyle="gridSummaryCell";isc.A.$31h={canDragSelect:true,canDragSelectText:true,canDragRecordsOut:true,canReorderRecords:true,canAcceptDroppedRecords:true};isc.A.$45l={bodyBackgroundColor:"backgroundColor",bodyStyleName:"styleName",fixedRecordHeights:"fixedRowHeights",fixedFieldWidths:"fixedColumnWidths",alternateRecordStyles:"alternateRowStyles",alternateRecordFrequency:"alternateRowFrequency",showAllRecords:"showAllRows",canSelectText:"canDragSelectText"};isc.A.useAdvancedFieldPicker=false;isc.A.canEditTitles=false;isc.A.fieldPickerWindowDefaults={autoParent:"none",_constructor:"FieldPickerWindow"};isc.A.fieldPickerFieldProperties=null;isc.A.advancedFieldPickerThreshold=25;isc.A.fieldPickerShowSampleValues=true;isc.B.push(isc.A.initWidget=function isc_ListGrid_initWidget(){this.Super("initWidget",arguments);if(isc.Browser.isMobile)this.resizeFieldsInRealTime=false;if(this.showRecordComponents){delete this.showRecordComponents;this.setShowRecordComponents(true)}
if(this.fields==null&&this.defaultFields!=null){this.fields=isc.shallowClone(this.defaultFields)}else if(this.warnOnReusedFields&&this.fields!=null){if(this.fields.$696){this.logWarn("ListGrid initialized with this.fields attribute set to an array which is already being displayed in another ListGrid instance. To reuse standard field configuration across multiple ListGrids, use listGrid.defaultFields rather than assigning directly to listGrid.fields.")}else{var _1;if(isc.isAn.Array(this.fields)){_1=this.fields.findIndex("$697",true)!=-1}else if(isc.isAn.Object(this.fields)){for(var _2 in this.fields){var _3=this.fields[_2];if(_3&&_3.$697){_1=true;break}}}
if(_1){this.logWarn("ListGrid initialized with this.fields attribute set to an array containing fields which are already being displayed in another ListGrid instance. To reuse standard field configuration across multiple ListGrids, use listGrid.defaultFields rather than assigning directly to listGrid.fields.")}}
this.fields.$696=true;if(isc.isAn.Array(this.fields)){this.fields.setProperty("$697",true)}else if(isc.isAn.Object(this.fields)){for(var _2 in this.fields){var _3=this.fields[_2];if(_3){_3.$697=true}}}}
if(this.canEditNew)this.listEndEditAction=this.rowEndEditAction="next";if(this.alwaysShowEditors){this.editByCell=false;this.selectionType="none";this.selectOnEdit=false;if(this.canGroup!=false){this.logInfo("grouping functionality is not supported when alwaysShowEditors is true. Explicitly disabling this.canGroup","inactiveEditorHTML");this.canGroup=false}
if(this.modalEditing){this.logInfo("modalEditing is not supported when alwaysShowEditors is true. Explicitly setting this.modalEditing to fales","inactiveEditorHTML");this.modalEditing=false}
this.editEvent="click";if(!this.isEditable()){this.logInfo("alwaysShowEditors has been set for this grid but canEdit is unset and no fields are explicitly marked as editable. Defaulting this.canEdit to true. Note that to avoid this override developers can explicitly specify canEdit at the grid or field level","inactiveEditorHTML");this.canEdit=true}}
if(this.canExpandRecords||(this.fixedRecordHeights==false&&this.virtualScrolling==null))
{if(this.fixedRecordHeights)this.$82v=this.fixedRecordHeights;this.fixedRecordHeights=false;this.virtualScrolling=true}
if(this.canAddFormulaFields&&isc.FormulaBuilder==null){this.logInfo("Required modules for adding formula fields not present - setting canAddFormulaFields to false.");this.canAddFormulaFields=false}
if(this.canAddSummaryFields&&isc.SummaryBuilder==null){this.logInfo("Required modules for adding summary fields not present - setting canAddSummaryFields to false.");this.canAddSummaryFields=false}
if(this.useRowSpanStyling&&this.canSelectCells==null)this.canSelectCells=true;if(this.useCellRollOvers==null)this.useCellRollOvers=this.canSelectCells;if(this.loadingMessage==null||this.loadingMessage==isc.emptyString)
this.loadingMessage="&nbsp;";if(this.autoFitData!=null){this.$58o=this.overflow;this.setOverflow("visible")}
if(this.canCollapseGroup==false)this.groupStartOpen="all";this.$765=this.sortDirection?"ascending":"descending";this.setData(this.data?null:this.getDefaultData());this.setSelectionAppearance(this.selectionAppearance,true);this.$31i();if(!this.canResizeFields)this.canAutoFitFields=false;if(this.wrapHeaderTitles==null){var _4=this.headerButtonProperties!=null?this.headerButtonProperties.wrap:null;if(_4==null){_4=this.headerButtonDefaults!=null?this.headerButtonDefaults.wrap:null}
if(_4==null)_4=false;this.wrapHeaderTitles=_4}},isc.A.getDefaultData=function isc_ListGrid_getDefaultData(){return[]},isc.A.$910=function isc_ListGrid__storeDragProperties(){if(!this.$911){var _1=this.$911={};_1.canDrag=this.canDrag;_1.canDrop=this.canDrop;_1.canAcceptDrop=this.canAcceptDrop}},isc.A.$912=function isc_ListGrid__restoreDragProperties(){var _1=this.$911;if(_1){this.canDrag=_1.canDrag;this.canDrop=_1.canDrop;this.canAcceptDrop=_1.canAcceptDrop}},isc.A.$31i=function isc_ListGrid__setUpDragProperties(){if(!this.$911){this.$910()}
this.canDrag=!this.canDragSelectText&&(this.canDrag||this.canDragRecordsOut||this.canReorderRecords||this.canDragSelect);this.canDrop=(this.canDrop||this.canDragRecordsOut||this.canReorderRecords);this.canAcceptDrop=(this.canAcceptDrop||this.canAcceptDroppedRecords||this.canReorderRecords)},isc.A.setCanReorderRecords=function isc_ListGrid_setCanReorderRecords(_1){if(_1!=this.canReorderRecords){this.canReorderRecords=_1;this.$912();this.$31i();this.redraw()}},isc.A.getEmptyMessage=function isc_ListGrid_getEmptyMessage(){if(isc.ResultSet&&isc.isA.ResultSet(this.data)&&!this.data.lengthIsKnown()){if(isc.Offline&&isc.Offline.isOffline()){return this.offlineMessage}
return this.loadingDataMessage==null?"&nbsp;":this.loadingDataMessage.evalDynamicString(this,{loadingImage:this.imgHTML(isc.Canvas.loadingImageSrc,isc.Canvas.loadingImageSize,isc.Canvas.loadingImageSize)})}
if(this.isOffline()){return this.offlineMessage}
return this.emptyMessage==null?"&nbsp;":this.emptyMessage.evalDynamicString(this,{loadingImage:this.imgHTML(isc.Canvas.loadingImageSrc,isc.Canvas.loadingImageSize,isc.Canvas.loadingImageSize)})},isc.A.isEmpty=function isc_ListGrid_isEmpty(){if(!this.data)return true;if(!this.fields||this.fields.length==0)return true;if(isc.ResultSet&&isc.isA.ResultSet(this.data)){if(this.data.isPaged()){if(!this.data.isEmpty())return false;var _1=this.getAllEditRows();if(_1&&_1.length>0){for(var i=0;i<_1.length;i++){if(_1[i]>=0)return false}}
return true}else{return(!this.data.lengthIsKnown()||this.getTotalRows()==0)}}else{return(this.getTotalRows()==0)}},isc.A.setData=function isc_ListGrid_setData(_1){if(this.data==_1)return;if(!this.preserveEditsOnSetData)this.discardAllEdits();this.clearLastHilite();if(this.data){this.$31j(this.data);if(this.data.$31k&&isc.isA.Function(this.data.destroy))
this.data.destroy()}
if(_1)this.data=_1;if(!this.data)return;if(!this.$141w&&!this.isGrouped&&(!this.selection||(this.data!=this.selection.data)))
{this.createSelectionModel()}
this.$31m(this.data);var _2;if(isc.isA.ResultSet(this.data)&&this.data.getSort()&&this.data.lengthIsKnown()){_2=this.data.getSort()}else{_2=this.getSort()}
if(_2)this.setSort(_2);if(this.preserveEditsOnSetData)this.$31n();this.regroup(true);this.calculateRecordSummaries(null,null,null,true,true);var _3=isc.ResultSet&&isc.isA.ResultSet(this.data)&&!this.data.lengthIsKnown();if(!_3&&this.$686()&&!this.$30a){this.startEditing(null,null,true,null,true)}
if(this.hilites)this.applyHilites();if(isc.ResultSet&&isc.isA.ResultSet(this.data)&&!(this.data.allRows&&this.data.neverDropCache)&&this.body&&this.body.overflow=="visible")
{this.body.showAllRows=false}
this.$74a=0;if(!this.canExpandMultipleRecords&&this.$74b)
delete this.$74b;if(this.$75p){this.setSelectedState(this.$75p);delete this.$75p}
this.updateFieldWidthsForAutoFitValue("setData called.");this.$25a("setData")},isc.A.getAutoFitExpandField=function isc_ListGrid_getAutoFitExpandField(){if(!this.autoFitFieldsFillViewport)return null;if(this.autoFitExpandField!=null){var _1=this.getField(this.autoFitExpandField);if(_1!=null&&this.fields&&this.fields.contains(_1)&&(!this.frozenFields||!this.frozenFields.contains(_1)))
{return _1}}
var _2=[],_3=[];if(this.fields){for(var i=0;i<this.fields.length;i++){var _1=this.fields[i];if(!_1.showValueIconOnly&&(_1.type==null||(isc.SimpleType.inheritsFrom(_1.type,"text")&&!isc.SimpleType.inheritsFrom(_1.type,"image"))))
{if(!this.$54d&&_1.frozen)continue;_2.add(_1);if(_2[i]!=null&&_2[i].length!=null){_3.add(_2[i])}}}}
if(_3.length>0){_3.sortByProperty("length",Array.DESCENDING);if(_3.last().length>=this.autoFitExpandLengthThreshold||_3.length==_2.length)
{return _3[0]}}
if(_2.length>0){var i=0;_1=_2[i]
while(_1!=null&&((_1.width!=null&&_1.width!="*")||(_1.length!=null&&_1.length<this.autoFitExpandLengthThreshold)))
{i++;_1=_2[i]}
return _1}
return null},isc.A.updateFieldWidthsForAutoFitValue=function isc_ListGrid_updateFieldWidthsForAutoFitValue(_1){if(!this.body||this.body.$773)return;var _2=this.fields||[];for(var i=0;i<_2.length;i++){var _4=this.shouldAutoFitField(_2[i]);if(!_4)continue;var _5=this.getAutoFitWidthApproach(_2[i]);if(_5=="value"||_5=="both"){this.fields.$775=false;this.body.$773="Updating field widths for field auto-fit"+(_1?(":"+_1):".");break}}},isc.A.invalidateCache=function isc_ListGrid_invalidateCache(){if(this.getCheckboxFieldPosition()!=-1){this.deselectAllRecords();this.$63m(false)}
if(this.body&&this.body.$74k)delete this.body.$74k;return this.Super("invalidateCache",arguments)},isc.A.$66c=function isc_ListGrid__canSort(_1){if(!isc.isAn.Object(_1)){_1=this.getSpecifiedField(_1)}
if(_1==null)return false;var _2=(_1.canSort==false)?false:this.canSort==false?false:true;_2=_2&&this.$91k(_1);return _2},isc.A.$91k=function isc_ListGrid__canSortData(_1){var _2=isc.isAn.Object(_1)?_1:this.getSpecifiedField(_1);if(_2==null)return false;if(isc.isAn.Array(this.data))return true;if(_2.canSortClientOnly==true){if(isc.isA.ResultSet(this.data)){if(!this.data.lengthIsKnown()||!this.data.canSortOnClient()){return false}}}
return true},isc.A.$91d=function isc_ListGrid__canMultiSort(){var _1=(this.canMultiSort!=false)&&this.canSort&&this.$91l();return _1},isc.A.$91l=function isc_ListGrid__canMultiSortData(){var _1=this.canMultiSort;if(!this.data.setSort){_1=false}else if(this.getDataSource()&&_1!=false){_1=this.getDataSource().canMultiSort&&this.canSort}
return _1},isc.A.$766=function isc_ListGrid__getFieldSortDirection(_1){var _1=isc.isAn.Object(_1)?_1:this.getSpecifiedField(_1),_2;var _3=_1?_1.sortDirection:null;if(_3!=null){_2=Array.shouldSortAscending(_3)?"ascending":"descending"}else if(this.sortDirection!=null){_2=Array.shouldSortAscending(this.sortDirection)?"ascending":"descending"}else{_2=Array.shouldSortAscending(this.$765)?"ascending":"descending"}
return _2},isc.A.createSelectionModel=function isc_ListGrid_createSelectionModel(){this.invokeSuper(isc.ListGrid,"createSelectionModel",arguments);if(isc.isA.Canvas(this.body)){this.body.setSelection(this.selection);if(this.frozenBody){this.frozenBody.setSelection(this.selection);this.$97c()}}},isc.A.destroySelectionModel=function isc_ListGrid_destroySelectionModel(){if(this.body)this.body.clearSelection();if(this.frozenBody)this.frozenBody.clearSelection();return this.Super("destroySelectionModel",arguments)},isc.A.performReselectOnUpdate=function isc_ListGrid_performReselectOnUpdate(_1){if(this.reselectOnUpdateNotifications=="none"){this.suppressSelectionChanged=true}
this.selection.select(_1);if(this.reselectOnUpdatedNotifications=="selectionUpdated"){this.fireSelectionUpdated()}
delete this.suppressSelectionChanged},isc.A.setSelectionType=function isc_ListGrid_setSelectionType(_1,_2){this.selectionType=_1;if(this.body)this.body.selectionType=_1},isc.A.setSelectionAppearance=function isc_ListGrid_setSelectionAppearance(_1,_2){if(this.selectionAppearance==_1&&!_2)return;if(_1=="checkbox"&&this.canSelectCells){this.logWarn("ignoring selectionAppearance:'checkbox' since canSelectCells is set");_1="rowStyle"}
this.selectionAppearance=_1;if(_2&&this.selectionType==null&&!this.canSelectCells){this.selectionType=(_1=="checkbox"?isc.Selection.SIMPLE:isc.Selection.MULTIPLE)}
if(this.completeFields!=null){var _3=[];for(var i=0;i<this.completeFields.length;i++){var _5=this.completeFields[i];if(this.isCheckboxField(_5))continue;_3.add(_5)}
this.setFields(_3)}},isc.A.setBodyOverflow=function isc_ListGrid_setBodyOverflow(_1){this.bodyOverflow=_1;if(this.body)this.body.setOverflow(this.bodyOverflow)},isc.A.setBodyStyleName=function isc_ListGrid_setBodyStyleName(_1){this.bodyStyleName=_1;if(this.body&&(!this.alternateBodyStyleName||!this.alternateRecordStyles)){this.body.setStyleName(_1)}},isc.A.setAlternateBodyStyleName=function isc_ListGrid_setAlternateBodyStyleName(_1){this.alternateBodyStyleName=_1;if(this.body&&this.alternateRecordStyles){this.body.setStyleName(_1||this.bodyStyleName)}},isc.A.setAlternateRecordStyles=function isc_ListGrid_setAlternateRecordStyles(_1){if(this.alternateRecordStyles==_1)return;this.alternateRecordStyles=_1;if(this.body&&(this.alternateBodyStyleName!=null)){if(_1)this.body.setStyleName(this.alternateBodyStyleName);else this.body.setStyleName(this.bodyStyleName)}},isc.A.hasInherentHeight=function isc_ListGrid_hasInherentHeight(_1,_2,_3,_4){if(this.inherentHeight!=null)return this.inherentHeight;if(this.autoFitData==isc.Canvas.VERTICAL||this.autoFitData==isc.Canvas.BOTH){return true}
return this.invokeSuper(isc.ListGrid,"hasInherentHeight",_1,_2,_3,_4)},isc.A.hasInherentWidth=function isc_ListGrid_hasInherentWidth(_1,_2,_3,_4){if(this.inherentWidth!=null)return this.inherentWidth;if(this.autoFitData==isc.Canvas.HORIZONTAL||this.autoFitData==isc.Canvas.BOTH){return true}
return this.invokeSuper(isc.ListGrid,"hasInherentWidth",_1,_2,_3,_4)},isc.A.setAutoFitData=function isc_ListGrid_setAutoFitData(_1){this.autoFitData=_1;if(this.$60v&&(_1=="both"||_1=="horizontal"||_1=="vertical")){delete this.$60v;delete this.canFreezeFields}
if(_1==null&&this.$58o){this.setOverflow(this.$58o)}else if(this.overflow!="visible"){this.$58o=this.overflow;this.setOverflow("visible")}
if(this.body){this.body.autoFitData=this.autoFitData;this.body.adjustOverflow()}},isc.A.setAutoFitExtraRecords=function isc_ListGrid_setAutoFitExtraRecords(_1){this.autoFitExtraRecords=_1;if(this.body){this.body.autoFitExtraRecords=_1;this.body.adjustOverflow()}},isc.A.setAutoFitMaxRecords=function isc_ListGrid_setAutoFitMaxRecords(_1){this.autoFitMaxRecords=_1;if(this.body){this.body.autoFitMaxRecords=_1;this.body.adjustOverflow();if(this.frozenBody){this.frozenBody.autoFitMaxRecords=_1;this.frozenBody.redraw()}}},isc.A.setAutoFitMaxHeight=function isc_ListGrid_setAutoFitMaxHeight(_1){this.autoFitMaxHeight=_1;if(this.body){this.body.adjustOverflow();if(this.frozenBody)this.frozenBody.redraw()}},isc.A.getAutoFitMaxBodyHeight=function isc_ListGrid_getAutoFitMaxBodyHeight(){if(this.autoFitMaxHeight==null)return null;var _1=this.getVBorderPad();if(this.showHeader)_1+=this.getHeaderHeight();if(this.showFilterEditor)_1+=this.filterEditorHeight;if(this.showGridSummary)_1+=this.summaryRowHeight;return this.autoFitMaxHeight-_1},isc.A.getAutoFitMinBodyHeight=function isc_ListGrid_getAutoFitMinBodyHeight(){var _1=this.getHeight(),_2=this.getVBorderPad();if(this.showHeader)_2+=this.getHeaderHeight();if(this.showFilterEditor)_2+=this.filterEditorHeight;if(this.showGridSummary)_2+=this.summaryRowHeight;return(_1-_2)},isc.A.setAutoFitMaxColumns=function isc_ListGrid_setAutoFitMaxColumns(_1){this.autoFitMaxColumns=_1;if(this.body){this.body.autoFitMaxColumns=_1;this.body.adjustOverflow()}},isc.A.setAutoFitMaxWidth=function isc_ListGrid_setAutoFitMaxWidth(_1){this.autoFitMaxWidth=_1;if(this.body){this.body.autoFitMaxWidth=_1;this.body.adjustOverflow()}},isc.A.autoFitField=function isc_ListGrid_autoFitField(_1,_2){var _3=this.getField(_1),_4=this.getFieldNum(_3);if(_3==null||_4==-1)return;var _5=this.getFieldAutoFitWidths([_3]);if(_5==null||_5[0]==null)return;var _6=_5[0];var _7=this.shouldAutoFitField(_3);if(this.$26a&&_6!=this.$26a[_4]){this.resizeField(_1,_6,!_7)}else if(!_7)_3.width=_6;if(this.$26a&&_7)_3.$776=this.$26a[_4];if(_2)this.scrollToColumn(_4,"left");if(this.headerMenuButton!=null&&this.headerMenuButton.masterIndex==_4){this.headerMenuButton.hide()}
return _6},isc.A.autoFitFields=function isc_ListGrid_autoFitFields(_1){if(this.body)this.body.$773=true;this.autoSizeHeaderSpans=false;if(_1==null)_1=this.fields;this.$113n=true;var _2=[];for(var i=0;i<_1.length;i++){var _4=this.getField(_1[i]);if(_4!=null){delete _1[i].width;delete _1[i].$776;_2[_2.length]=_4}}
_1=_2;var _5=this.getFieldAutoFitWidths(_1);var _6=[],_7=[],_8=[];for(var i=0;i<_1.length;i++){if(_5[i]==null)continue;var _9=_5[i],_4=_1[i],_10=this.getFieldNum(_1[i]),_11=_1[i].name;var _12=this.shouldAutoFitField(_4);if(this.$26a&&_9!=this.$26a[_10]){_6[_6.length]=_10;_7[_7.length]=_9;_8[_8.length]=!_12}else if(!_12)_4.width=_9}
this.$116t(_6,_7,_8);for(var i=0;i<_6.length;i++){if(!_8[i]){var _10=_6[i];this.getField(_10).$776=this.$26a[_10]}}
this.$113n=false;if(this.frozenBody)this.frozenBody.$29d()
if(this.body)this.body.$29d();if(this.header&&this.autoFitHeaderHeights){this.dropCachedHeaderButtonHeights();this.$109d()}
this.getFieldWidths();if(this.header)this.header.$55g()},isc.A.shouldAutoFitField=function isc_ListGrid_shouldAutoFitField(_1){if(_1.autoFitWidth!=null)return _1.autoFitWidth;return this.autoFitFieldWidths},isc.A.getMinFieldWidth=function isc_ListGrid_getMinFieldWidth(_1,_2){var _3=this.minFieldWidth||1;if(!_2){var _4=_1.width;if(isc.isA.Number(_4)){_3=Math.max(_3,_1.width)}}
var _5=_1.name;if(!this.clipRecordComponents&&(this.$1167&&this.$1167[_5]))
{var _6=this.$1169(_5);if(_6>_3){_3=_6}}
return _3},isc.A.$1169=function isc_ListGrid__getFieldComponentMaxWidth(_1){var _2=this.getField(_1);if(_2==null)return 0;if(_2.$117a!=null)return _2.$117a;var _3=this.$1167[_1];var _4=0;for(var _5 in _3){var _6=window[_5];if(_6&&(_6.embeddedPosition==this.$57l)&&(_6.getVisibleWidth()>_4))
{_4=_6.getVisibleWidth()}}
_2.$117a=_4;return _4},isc.A.$1168=function isc_ListGrid__fieldComponentWidthsChanged(_1,_2){var _3=this.getField(_1);if(_3){if(_2)_3.$117a=_2;else delete _3.$117a;if(this.$1173==null){this.$1173={}}
this.$1173[_1]=true;this.fireOnPause("checkFieldComponentOverflow",{target:this,methodName:"$1174"},0)}},isc.A.$1174=function isc_ListGrid__checkFieldComponentOverflow(){if(this.fields==null)return;var _1=this.$26a||this.getFieldWidths(),_2=[],_3=[],_4=[],_5=false;for(var i=0;i<this.fields.length;i++){var _7=this.fields[i].name;if(!this.$1173[_7])continue;this.$1173[_7]=null;var _8=this.getMinFieldWidth(this.fields[i]);if(_8>_1[i]){_2.add(i);_3.add(_8);_4.add(false)}}
if(_2.length>0){this.$116t(_2,_3,_4)}},isc.A.getFieldAutoFitWidths=function isc_ListGrid_getFieldAutoFitWidths(_1){if(this.body==null||_1==null)return;if(!isc.isA.Array(_1)){_1=[_1]}
var _2=[],_3=[],_4=[],_5=[];for(var i=0;i<_1.length;i++){var _7=this.getMinFieldWidth(_1[i],true),_8=_1[i],_9=this.getColNum(_8),_10=this.getAutoFitWidthApproach(_8,true),_11=_10!="value",_12=_10!="title";_3[i]=_9;_2[i]=_7;if(_11){var _13=this.getFieldHeaderButton(_9);if(_13!=null)_4[i]=_13}
if(_12){_5.add(_8)}}
if(_4.length>0){var _14=this.getAutoFitTitleWidths(_4);for(var i=0;i<_14.length;i++){if(_14[i]==null)continue;_2[i]=Math.max(_2[i],_14[i])}}
if(_5.length>0){var _15=this.getAutoFitValueWidths(_5);for(var i=0;i<_1.length;i++){if(_3[i]!=null){var _9=_3[i],_16=_15?_15[_9]:null;if(_16!=null){if(_2[i]==null||_16>_2[i]){_2[i]=_16}}}}}
return _2},isc.A.getAutoFitTitleWidths=function isc_ListGrid_getAutoFitTitleWidths(_1){var _2="",_3={};for(var i=0;i<_1.length;i++){if(_1[i]==null){_3[i]=true;continue}
var _5=_1[i],_6=_5.titleStyle;if(_6==null)_6=_5.getStateName();_2+="<div style='position:absolute;"+(_5.wrap?"'":"white-space:nowrap;'")+" class='"+_6+"'>"+this.getHeaderButtonTitle(_5,false)+"</div>"}
if(isc.ListGrid.headerWidthsTester==null){isc.ListGrid.headerWidthsTester=isc.Canvas.create({top:-100,autoDraw:true,overflow:"hidden",contents:_2})}else{isc.ListGrid.headerWidthsTester.setContents(_2)}
if(isc.ListGrid.headerWidthsTester.isDirty()){isc.ListGrid.headerWidthsTester.redraw()}
var _7=isc.ListGrid.headerWidthsTester.getHandle(),_8=_7.childNodes;var _9=[];for(var i=0,j=0;i<_1.length;i++){if(_3[i]){_9[i]=null;continue}
var _11=_8[j];_9[i]=_11.offsetWidth;if(_1[i].label!=null){_9[i]+=(_1[i].getLabelHPad()+_1[i].getHBorderSize())*2}
j++}
if(_9.length!=_1.length){this.logWarn("getAutoFitTitleWidths(): Mismatch between headers passed in and calculated widths")}
return _9},isc.A.setAutoFitWidth=function isc_ListGrid_setAutoFitWidth(_1,_2){var _3=this.getField(_1);if(_3==null)return;if(_3.autoFitWidth==_2)return;_3.autoFitWidth=_2;if(_2)this.autoFitField(_3)},isc.A.setAutoFitFieldWidths=function isc_ListGrid_setAutoFitFieldWidths(_1,_2){if(_1==this.autoFitFieldWidths)return;this.autoFitFieldWidths=_1
if(_1){this.$45m("autoFitFieldWidths enabled")}else if(!_2){if(this.showHeader&&this.headerHeight>0)this.updateHeader();this.fields.$775=false;this.$45m("autoFitFieldWidths disabled")}},isc.A.setAutoFitWidthApproach=function isc_ListGrid_setAutoFitWidthApproach(_1){if(this.autoFitWidthApproach==_1)return;this.autoFitWidthApproach=_1;if(this.showHeader&&this.headerHeight>0)this.updateHeader();this.fields.$775=false;this.$45m("autoFitFieldWidthApproach changed")},isc.A.$25a=function isc_ListGrid__markBodyForRedraw(_1){if(this.bodies){this.bodies.map("markForRedraw",_1)}else if(this.body){this.markForRedraw(_1)}},isc.A.redraw=function isc_ListGrid_redraw(_1,_2,_3,_4){if(this.body){if(this.body.$30e){this.$45m("scrollbar change during animation");delete this.body.$30e}
if(this.$1107)this.body.$773=true}
this.invokeSuper(isc.ListGrid,"redraw",_1,_2,_3,_4)},isc.A.$31m=function isc_ListGrid__observeData(_1){var _2=isc.ResultSet&&isc.isA.ResultSet(_1);if(!this.isObserving(_1,"dataChanged")){if(_2){this.observe(_1,"dataChanged",function(_3,_4,_5,_6,_7,_8){this.dataChanged(_3,_4,_5,_6,_7,_8)})}else{this.observe(_1,"dataChanged",function(){this.dataChanged()})}}
if(!this.isObserving(_1,"dataArrived")){if(_2){this.observe(_1,"dataArrived",function(_3,_4,_5){this.$66d(_3,_4,_5)})}else if(isc.ResultTree&&isc.isA.ResultTree(_1)){this.observe(_1,"dataArrived",function(_3){this.$66d(_3)})}}
if(isc.isA.Tree(_1)){this.observe(_1,"changeDataVisibility",function(_3,_4){this.$34u(_3,_4)})}});isc.evalBoundary;isc.B.push(isc.A.groupTreeChanged=function isc_ListGrid_groupTreeChanged(){if(this.$67i)return;if(!this.$31o&&!this.suppressEditRowRemap)this.$31n();var _1=this.getTotalRows()-1;if(this.body){if(this.body.lastOverRow>_1)delete this.body.lastOverRow;if(this.body.lastMouseOverRow>_1)delete this.body.lastMouseOverRow;if(this.body.$31p>_1)delete this.body.$31p}
if(this.$31q>_1)delete this.$31q;if(this.hilites)this.applyHilites();if(!this.$50w)this.redrawForDataChanged()},isc.A.$606=function isc_ListGrid__observeGroupData(_1){this.observe(_1,"dataChanged",function(){this.groupTreeChanged()});this.observe(_1,"changeDataVisibility",function(_2,_3){this.$34u(_2,_3)})},isc.A.$34u=function isc_ListGrid__folderToggleObservation(_1,_2){if(_1!=null&&this.hilites&&_2){var _3=this.data.getLoadState(_1);if(_3==isc.Tree.LOADED||_3==isc.Tree.LOADED_PARTIAL_CHILDREN){this.applyHilites(true)}}
if(this.$34v){this.$31n();this.updateFieldWidthsForAutoFitValue("Folder Toggled");return}
if(this.body)this.body.finishRowAnimation();this.$31n();this.updateFieldWidthsForAutoFitValue("Folder Toggled");this.$25a('folderToggled')},isc.A.toggleFolder=function isc_ListGrid_toggleFolder(_1){if(this.data.isOpen(_1)){this.closeFolder(_1)}else{this.openFolder(_1);if(this.frozenBody)this.frozenBody.markForRedraw()}},isc.A.openFolder=function isc_ListGrid_openFolder(_1){if(this.folderOpened!=null){this.convertToMethod("folderOpened");if(this.folderOpened(_1)==false)return false}
if(this.animateFolders){this.animateOpen(_1)}else{this.data.openFolder(_1)}},isc.A.animateOpen=function isc_ListGrid_animateOpen(_1){var _2=this.data;if(_2.isOpen(_1))return;this.$34v=true;_2.openFolder(_1);delete this.$34v;var _3=_2.getParent(_1);if(_3&&!_2.isOpen(_3))return;var _4=_2.getLoadState(_1);if(_4!=isc.Tree.LOADED&&_4!=isc.Tree.LOADED_PARTIAL_CHILDREN){this.$34z=_1;return}
this.$340(_1)},isc.A.closeFolder=function isc_ListGrid_closeFolder(_1){if(this.folderClosed!=null){this.convertToMethod("folderClosed");if(this.folderClosed(_1)==false)return false}
if(this.getEditRow()!=null){var _2=this.getRecord(this.getEditRow());if(this.data.isDescendantOf(_2,_1))this.endEditing()}
if(this.shouldAnimateFolder(_1))
this.animateClose(_1);else
this.data.closeFolder(_1)},isc.A.animateClose=function isc_ListGrid_animateClose(_1){if(!this.data.isOpen(_1))return;var _2=this.data.getParent(_1);if(_2&&!this.data.isOpen(_2)){return this.closeFolder(_1)}
var _3=this.data,_4=_3.indexOf(_1),_5=_3.getOpenList(_1).getLength()-1;this.startRowAnimation(false,_4+1,_4+_5+1,{target:this,methodName:"redraw"},this.animateFolderSpeed,this.animateFolderTime,this.animateFolderEffect,true);var _6=this.$34v;this.$34v=true;this.data.closeFolder(_1);this.$34v=_6;if(this.body&&this.body.$279!=null){this.body.$34y=_1}
if(this.frozenBody&&this.frozenBody.$279!=null){this.frozenBody.$34y=_1}},isc.A.$340=function isc_ListGrid__startFolderAnimation(_1){if(!this.shouldAnimateFolder(_1)){this.markForRedraw();return}
var _2=this.data,_3=_2.indexOf(_1),_4=_2.getOpenList(_1).getLength()-1;if(_3<0||_4<=0)return;this.startRowAnimation(true,_3+1,(_3+_4+1),{target:(this.bodyLayout||this.body),methodName:"redraw"},this.animateFolderSpeed,this.animateFolderTime,this.animateFolderEffect,true)},isc.A.$45q=function isc_ListGrid__addNodeToOpenState(_1,_2,_3,_4){if(!_1.isOpen(_2)||!_1.isLoaded(_2))return false;var _5=_1.getFolders(_2),_6=false;if(_5!=null){for(var i=0;i<_5.length;i++){_6=this.$45q(_1,_5[i],_3,_4)||_6}}
if(_4){var _8={};_8[_2.groupName]=_2.groupValue;_3.add(_8)}else{_3[_3.length]=_1.getPath(_2)}
return true},isc.A.$134c=function isc_ListGrid__getDataChangedRecord(_1,_2){if(_2==null)return null;var _3=this.data;if(this.data.isGroupedOutput&&this.originalData)_3=this.originalData;var _4=_3.get(_2);if(_4==null)return null;if(_1!=null){var _5=this.dataSource!=null?this.getDataSource().getPrimaryKeyFieldNames():[];for(var i=0;i<_5.length;++i){if(_1[_5[i]]!=_4[_5[i]]){return null}}}
return _4},isc.A.dataChanged=function isc_ListGrid_dataChanged(_1,_2,_3,_4,_5,_6){if(isc.$cv)arguments.$cw=this;this.$67i=true;var _7=_5||_1=="add"||_1=="remove";if(!_7&&_1=="replace"){if(_2==null||_3==null)_7=true;else{var _8=this.getOriginalData().get(_3);if(_8==null)_7=true;else{for(var i=0;i<this.fields.length;i++){if(this.shouldAutoFitField(this.fields[i])){var _10=this.getFieldName(this.fields[i]);if(_8[_10]!=_4[_10]){_7=true;break}}}}}}
var _11=false;var _12=(this.$141v||this.getGroupByFields());if(_12!=null&&!this.$52y){var _13=false;if(_1=="add"||_1=="remove"||_1=="replace"||(_1=="update"&&(_2==null||_3==null)))
{_13=true}else if(_1=="update"){var _8=this.$134c(_2,_3,_1);if(_8==null)_13=true;if(!_13){this.calculateRecordSummaries(_8,null,false,false);for(var i=0;i<_12.length;i++){var _14,_10=_12[i];if(_2[_10]!==_14&&!this.fieldValuesAreEqual(_10,_2[_10],_8[_10])){this.$31n();this.$607(_8,_2,_3,_4,true);_11=true;this.$113a=true}}
var _15=this.getDataSource().getPrimaryKeyFieldNames(),_16={};for(var i=0;i<_15.length;i++){_16[_15[i]]=_8[_15[i]]}
var _17=this.data.findAll(_16);var _18=this.getDataSource().getFieldNames();_18.addList(this.getCacheableFields().getProperty("name"));for(var i=0;i<_17.length;i++){if(_17[i].$52e)continue;for(var _19=0;_19<_18.length;_19++){_17[i][_18[_19]]=_8[_18[_19]]}
_17[i]["_cache_"+this.ID]=_8["_cache_"+this.ID]}
if(!_11){_11=true;this.refreshGroupSummary(_17)}}}else if(_5){_13=true}
if(_13){this.$122o(true,false,false,false,true,_12)}}
if(this.$52y&&!this.$31o&&(!isc.isA.ResultSet(this.data)||this.data.lengthIsKnown()))
{this.$75p=this.getSelectedState(true);this.regroup();if(this.$75p){this.setSelectedState(this.$75p);delete this.$75p}}else if(this.$1097){delete this.$1097;isc.Timer.clear(this.$1099);delete this.$1099;isc.clearPrompt()}
if(this.body)this.body.finishRowAnimation();if(!this.$31o&&!this.suppressEditRowRemap)this.$31n();if(!isc.isA.ResultSet(this.data)||this.data.lengthIsKnown()){this.$74c()}
if(this.$686()&&!this.$30a){this.startEditing(null,null,true,null,true)}
var _20=this.getTotalRows()-1;if(this.body){if(this.body.lastOverRow>_20)delete this.body.lastOverRow;if(this.body.lastMouseOverRow>_20)delete this.body.lastMouseOverRow;if(this.body.$31p>_20)delete this.body.$31p}
if(this.$31q>_20)delete this.$31q;var _21=null;if(_1!="update"&&_1!="remove"){_21=this.$134c(_2,_3)}
if(_11){if(this.summaryRow&&this.showGridSummary)this.summaryRow.$855()}else{this.calculateRecordSummaries(_21,null,null,true,true,_1=="remove",_1!=null&&_1!="update")}
if(this.hilites)this.applyHilites();if(!this.$50w){if(_7)this.updateFieldWidthsForAutoFitValue(this.$81l);this.redrawForDataChanged()}
if(this.$75p&&(!isc.isA.ResultSet(this.data)||this.data.lengthIsKnown()))
{this.setSelectedState(this.$75p);delete this.$75p}
delete this.$67i},isc.A.$122o=function isc_ListGrid__setMarkForRegroup(_1,_2,_3,_4,_5,_6,_7){var _8=this.$52y;if(_2){this.$122p=_6;this.$141w=true;this.$141v=_7}else if(_3){if(_8&&!_1){this.$122q=this.$122p;delete this.$122p;delete this.$141w;delete this.$141v}}else if(_4){delete this.$122p;delete this.$122q}
this.$52y=_1},isc.A.redrawForDataChanged=function isc_ListGrid_redrawForDataChanged(){if(this.frozenBody)this.frozenBody.$1055=true;this.$25a(this.$81l)},isc.A.$66d=function isc_ListGrid__dataArrived(_1,_2){var _3=this.$60z();if(_1==0){this.$1107=true}
if(_3!=null&&_3!=-1){var _4=this.getFieldNum(_3),_5=this.getField(_4);if(_5&&_5.canSortClientOnly&&!this.$91k(_5)){this.$600(null);if(_3!=null&&this.header&&isc.isA.Toolbar(this.header)){this.header.deselectButton(_3);var _6=this.header.getButton(_3);if(_6)_6.setTitle(this.getHeaderButtonTitle(_6))}
if(this.sorter&&this.sorter.setTitle)this.sorter.setTitle(this.sorter.getTitle())}}
if(!(this.canSelectAll==false)&&this.getCurrentCheckboxField()){var _7=this.getCheckboxFieldPosition(),_5=this.getField(_7);if(isc.ResultSet&&isc.isA.ResultSet(this.data)&&!this.data.allMatchingRowsCached())
{var _8={disabled:true,showHover:true,prompt:this.selection.selectionRangeNotLoadedMessage,title:(this.selectionType=="single")?isc.nbsp:this.$116w(false,true,true,_5)}}else{var _8={disabled:false,showHover:false,prompt:null,title:(this.selectionType=="single")?isc.nbsp:this.$116w(false,true,false,_5)}}
this.setFieldProperties(_7,_8)}
if(isc.screenReader&&this.body!=null){if(isc.isA.Tree(this.data)){var _9=_1;if(this.data.isOpen(_9)&&this.data.hasChildren(_9)){var _10=this.data.getChildren(_9);if(_10&&!_10.isEmpty())_9=_10.first()}
var _11=this.data.indexOf(_9);this.body.$86a(_11,!this.hasFocus)}}
this.$25a();this.$131t=true;this.dataArrived(_1,_2);delete this.$131t},isc.A.dataArrived=function isc_ListGrid_dataArrived(_1,_2){},isc.A.$31j=function isc_ListGrid__ignoreData(_1){if(this.body)this.body.finishRowAnimation();if(isc.isA.Tree(this.data))this.ignore(_1,"changeDataVisibility");this.ignore(_1,"dataChanged");if(this.isObserving(_1,"dataArrived")){this.ignore(_1,"dataArrived")}
if(this.selection)this.selection.deselectAll()},isc.A.applyFieldDefaults=function isc_ListGrid_applyFieldDefaults(_1){if(_1==null)return;for(var i=0;i<_1.length;i++){var _3=_1[i];if(_3==null)continue;if(!this.allowNamelessFields&&_3[this.fieldIdProperty]==null){if(_3.dataPath==null){this.logWarn("unable to process field with no name / dataPath:"+this.echo(_3));continue}
_3[this.fieldIdProperty]="field"+this.$70q++}
var _4=(this.isRTL()&&!this.reverseRTLAlign)?isc.Canvas.RIGHT:isc.Canvas.LEFT;var _5=this.getFieldDisplayType(_3);var _6=(_5!=null?isc.SimpleType.getBaseType(_5):null);if(isc.SimpleType.inheritsFrom(_5,"image")){_3.$31r=this.$30s}else if(_6==this.$gx){if(_3.width==null&&_3.length!=null){if(_3.length<15&&!_3.valueMap){_3.width=_3.length*7}}}else if(_6=="integer"||_6=="float"){var _7=_3.valueMap!=null&&!isc.isAn.Array(_3.valueMap),_8=(this.isRTL()&&!this.reverseRTLAlign);_4=_7?(_8?isc.Canvas.RIGHT:isc.Canvas.LEFT):(_8?isc.Canvas.LEFT:isc.Canvas.RIGHT);_3.$31r=this.$30n}else if(_6=="date"){var _9=(this.canEdit==true&&_3.canEdit!=false)||(this.canEdit!=false&&_3.canEdit==true);_3.width=_3.width||(_9?100:80);_4=(this.isRTL()&&!this.reverseRTLAlign)?isc.Canvas.LEFT:isc.Canvas.RIGHT;_3.$31r=this.$30m}else if(_6=="time"){_3.width=_3.width||80;_3.$31r=this.$30p;_4=(this.isRTL()&&!this.reverseRTLAlign)?isc.Canvas.LEFT:isc.Canvas.RIGHT}else if(_5=="binary"||_5=="blob"||_5=="upload"||_5=="imageFile"){_3.$31r=this.$30q}else if(_5=="link"){_3.$31r=this.$30r}else if(_5=="icon"){if(_3.width==null&&_3.autoFitWidth==null){if(this.autoFitIconFields!="none"){_3.autoFitWidth=true;_3.autoFitWidthApproach=(this.autoFitIconFields=="title")?"both":"value"}}
if(_3.width==null&&_3.autoFitWidth==null){if(this.autoFitIconFields!="none"){_3.autoFitWidth=true;_3.autoFitWidthApproach=(this.autoFitIconFields=="title")?"both":"value";_3.width=this.getDefaultFieldWidth(_3)}}
_3.align=_3.align||"center";_3.$31r=this.$59e;_3.title=_3.title||isc.nbsp}else if(_5=="boolean"||_5=="checkbox"){if(_3.canToggle==null)_3.canToggle=true}
if(_3.formatCellValue!=null&&!isc.isA.Function(_3.formatCellValue))
isc.Func.replaceWithMethod(_3,"formatCellValue","value,record,rowNum,colNum,grid");if(this.showValueIconOnly(_3)){_4=isc.Canvas.CENTER;if(_3.width==null&&_3.autoFitWidth==null){if(this.autoFitIconFields!="none"){_3.autoFitWidth=true;_3.autoFitWidthApproach=(this.autoFitIconFields=="title")?"both":"value";_3.width=this.getDefaultFieldWidth(_3)}}}
if(!_3.align)_3.align=_4;if(_3.multiple&&_3.validateEachItem==null)_3.validateEachItem=true;if(_3.hidden)_3.showIf="false"}},isc.A.getDisplayField=function isc_ListGrid_getDisplayField(_1){var _2=_1.displayField;if(_2!=null){var _3=_1.optionDataSource?isc.DataSource.get(_1.optionDataSource):null;if(_3!=null)_2=_3.getField(_2);else{_2=this.getField(_2);if(_2==null&&this.dataSource!=null){_2=this.getDataSource().getField(_1.displayField)}}}
return _2},isc.A.getFieldDisplayType=function isc_ListGrid_getFieldDisplayType(_1){var _2=this.getDisplayField(_1),_3;if(_2!=null)_3=_2.type;if(_3==null)_3=_1.type;return _3},isc.A.$31s=function isc_ListGrid__formatBooleanFieldAsImages(_1){if(this.booleanTrueImage==null&&this.booleanFalseImage==null)return false;var _2=this.getFieldDisplayType(_1),_3=(_2!=null?isc.SimpleType.getBaseType(_2):null);if(_3!=this.$g2)return false;return(!_1.suppressValueIcon&&_1.showValueIconOnly==null&&_1.valueIcons==null&&_1.formatCellValue==null)},isc.A.setFieldProperties=function isc_ListGrid_setFieldProperties(_1,_2){var _3,_4=this.getAllFields();var _5=_1;if(isc.isA.Number(_1)){_3=this.getField(_1)}else{var _6=isc.Class.getArrayItemIndex(_1,_4,this.fieldIdProperty);_3=_4[_6];_1=this.getFieldNum(_3)}
if(!_3)return;isc.addProperties(_3,_2);if(this.header!=null&&this.header.isDrawn()){var _7=this.getFieldHeader(_1),_8=_7.getMember(this.getLocalFieldNum(_1));if(_8)_8.setProperties(_2)}},isc.A.setFieldTitle=function isc_ListGrid_setFieldTitle(_1,_2){this.setFieldProperties(_1,{title:_2})},isc.A.setFieldHeaderBaseStyle=function isc_ListGrid_setFieldHeaderBaseStyle(_1,_2){var _3=this.getField(_1);if(_3==null){this.logWarn("setFieldHeaderBaseStyle() unable to find field:"+_1);return}
_3.headerBaseStyle=_2;var _4=this.getFieldHeaderButton(this.getFieldNum(_3));if(_4!=null){if(_2==null){var _5=this.getHeaderButtonProperties();if(_3.frozen&&_5.frozenBaseStyle){_2=_5.frozenBaseStyle}else if(_5.baseStyle){_2=_5.baseStyle}}
if(_2==null){_2=_4.getClass().getPrototype().baseStyle}
_4.setBaseStyle(_2)}},isc.A.setFieldHeaderTitleStyle=function isc_ListGrid_setFieldHeaderTitleStyle(_1,_2){var _3=this.getField(_1);if(_3==null){this.logWarn("setFieldHeaderTitleStyle() unable to find field:"+_1);return}
_3.headerTitleStyle=_2;var _4=this.getFieldHeaderButton(this.getFieldNum(_3));if(_4!=null){if(_2==null){var _5=this.getHeaderButtonProperties();if(_3.frozen&&_5.frozenTitleStyle){_2=_5.frozenTitleStyle}else if(_5.titleStyle){_2=_5.titleStyle}}
if(_2==null){_2=_4.getClass().getPrototype().titleStyle}
_4.setTitleStyle(_2)}},isc.A.setFieldIcon=function isc_ListGrid_setFieldIcon(_1,_2){var _3=this.getField(_1);this.setFieldProperties(_1,{icon:_2});if(_3&&_3.type=="icon"&&_3.cellIcon==null){delete _3.$59f
this.body.markForRedraw("Field icon changed")}},isc.A.setFieldCellIcon=function isc_ListGrid_setFieldCellIcon(_1,_2){this.setFieldProperties(_1,{cellIcon:_2});var _3=this.getField(_1);if(_3&&_3.type=="icon"){delete _3.$59f
this.body.markForRedraw("Field cell icon changed")}},isc.A.setAutoComplete=function isc_ListGrid_setAutoComplete(_1){this.autoComplete=_1},isc.A.setFieldAutoComplete=function isc_ListGrid_setFieldAutoComplete(_1,_2){_1=this.getField(_1);if(_1)_1.autoComplete=_2},isc.A.showFields=function isc_ListGrid_showFields(_1,_2){return this.showField(_1,_2)},isc.A.showField=function isc_ListGrid_showField(_1,_2){arguments.$cw=this;if(!isc.isAn.Array(_1)){_1=[_1]}
var _3=true,_4=true;var _5=this.completeFields!=null,_6=(!_5||this.frozenFields||this.$54d);for(var i=0;i<_1.length;i++){var _8=_1[i],_9=_8;_9=this.getSpecifiedField(_9);if(_9==null){_1[i]=null;this.logWarn("showField(): unable to find field object for field: "+_8+". Taking no action. Call setFields() to add new fields.")
continue}
_3=false;_9.hidden=false;if(_9.detail){_9.showIf="true"}else{if(_9.showIf!=null)_9.showIf=null}
if(_9.frozen)_6=true;if(this.spanMap&&this.spanMap[_9.name]!=null)_6=true;if(_6)continue;if(this.fields.contains(_9)){_1[i]=null;continue}
_4=false;_1[i]=_9}
if(_6){this.setFields(this.completeFields||this.fields);this.handleFieldStateChanged();return}
if(_3||_4)return;this.deriveVisibleFields();_1.removeEmpty();var _10=[],_11=0;for(var i=0;i<this.fields.length;i++){var _12=_1.indexOf(this.fields[i]);if(_12!=-1){_10[_12]=i;_11++;if(_11==_1.length)break}}
var _13=this.header;if(_13!=null){if(!_2)this.header.hPolicy="fill";this.$132e=true;this.header.addButtons(_1.duplicate(),_10);delete this.$132e}
if(this.body){if(this.$30a){var _14=this.getEditRow(),_15=this.getRecord(_14),_16=this.getEditedRecord(_14),_17=false,_18=this.getEditForm().items,_19=_18.length-1,_20=_18[_19],_21=_20.colNum;_10.sort();for(var i=_10.length-1;i>=0;i--){var _22=i+1,_23=_10[i],_24=(_23-i);if(!_17&&this.$30u>=_23){this.$30u+=_22}
var _9=this.fields[_23],_25=this.getEditFormItemFieldWidths(_15)[_23],_26;while(_20!=null&&_21>=_24){_20.colNum+=_22;_19--;_20=(_19>=0)?_18[_19]:null;_21=(_20!=null)?_20.colNum:null}
var _27=this.body.getDrawArea();if(!this.editByCell&&_23>=_27[2]&&_23<=_27[3]){_26=this.getEditItem(_9,_15,_16,_14,_23,_25)}
if(_26!=null){this.$286.addItems([_26],_19+1)}}}
this.body.fields=this.normalFields||this.fields;this.setBodyFieldWidths(this.getFieldWidths());this.$75n(this.body);if(this.body.isDrawn())this.body.redraw("show field")}
if(this.header&&this.autoFitHeaderHeights){this.dropCachedHeaderButtonHeights();this.$109d()}
if(this.sortField!=null){this.sortFieldNum=null;this.sortFieldNum=this.$60z()}
if(this.filterEditor!=null)this.filterEditor.showField(_1,_2);this.recalculateSummaries(null,_1);if(this.summaryRow!=null&&this.showGridSummary){this.summaryRow.showField(_1,_2)}
if(this.hilites)this.applyHilites()
this.markForRedraw("showField");this.handleFieldStateChanged();this.$134r()},isc.A.hideFields=function isc_ListGrid_hideFields(_1,_2){return this.hideField(_1,_2)},isc.A.hideField=function isc_ListGrid_hideField(_1,_2){arguments.$cw=this;var _3=true,_4=true;if(!isc.isAn.Array(_1)){_1=[_1]}
var _5=[];if(_1.length==this.getFields().length){this.logWarn("Attempt to hide all fields in one call - disallowed.");return}
var _6=(this.completeFields==null||this.frozenFields);var _7=this.$30a,_8=_7?this.getEditRow():null,_9=_7?this.getEditCol():null,_10=false;for(var i=0;i<_1.length;i++){var _12=_1[i],_13=_12;_13=this.getSpecifiedField(_13);if(_13==null){this.logWarn("hideField(): unable to find field object for field: "+_12+". Taking no action. To add this field use the setFields() method.");_1[i]=null;continue}
_3=false;_13.showIf=this.$18r;if(!this.fields.contains(_13)){_1[i]=null;continue}
_4=false;_13.hidden=true;if(_6)continue;var _14=this.fields.indexOf(_13),_15=this.getFieldName(_14);_5.add(_14);if(_7){if(_9==_14)_10=true;var _16=this.getEditFormItem(_15);if(_16&&_16.hasFocus)_16.blurItem();if(this.discardEditsOnHideField){this.clearEditValue(_8,_14,true)}}}
if(_3||_4)return;if(_6){this.setFields(this.completeFields||this.fields);this.handleFieldStateChanged();return}
_1.removeEmpty();if(_7){if(_10){if(this.editByCell){this.cancelEditing(isc.ListGrid.PROGRAMMATIC);_7=false}else{var _17=_9-1,_18=false;while(_17>=0){if(!_5.contains(_17)&&this.canEditCell(_8,_17)&&this.$60w(_8,_17))
{_18=true;break}
_17--}
if(!_18){_17=_9+1;while(_17<this.fields.length){if(!_5.contains(_17)&&this.canEditCell(_8,_17)&&this.$60w(_8,_17))
{_18=true;break}
_17++}}
if(!_18){this.cancelEditing(isc.ListGrid.PROGRAMMATIC);_7=false}else{this.$31u(_8,_17,!this.getEditForm().hasFocus)}}}}
this.deriveVisibleFields();var _19=this.header;if(_19!=null){if(!_2)this.header.hPolicy="fill";var _20=[];for(var i=0;i<_5.length;i++){var _14=_5[i];var _21=this.header.getButton(_14);_20[_20.length]=_21;if(this.headerMenuButton&&this.headerMenuButton.masterElement==_21){this.headerMenuButton.depeer()}}
this.header.removeButtons(_20.duplicate());_20.map("destroy");if(this.autoFitHeaderHeights){this.dropCachedHeaderButtonHeights();this.$109d()}}
var _22=[];if(_7){_5.sort();var _23=this.$286,_24=_23.getItems(),_25=_24.length-1,_26=_24[_25],_27=_26.colNum,_28=false;for(var i=_5.length-1;i>=0;i--){var _29=i+1,_30=_5[i];if(!_28&&this.$30u>_30){this.$30u-=_29;_28=true}
while(_26!=null&&_27>=_30){if(_27==_30)_22.add(_26);else _26.colNum-=_29;_25--;_26=(_25>=0)?_24[_25]:null;_27=(_26!=null)?_26.colNum:null}}}
if(this.body){this.body.fields=this.normalFields||this.fields;this.setBodyFieldWidths(this.getFieldWidths());this.$75n(this.body);if(this.body.isDrawn())this.body.redraw("hide field")}
if(_7&&_22.length>0){for(var i=0;i<_22.length;i++){var _26=_22[i];this.$286.removeItems([_26])}}
if(this.sortField!=null){this.sortFieldNum=null;this.sortFieldNum=this.$60z()}
if(this.filterEditor!=null)this.filterEditor.hideField(_1,_2);if(this.summaryRow&&this.showGridSummary){this.summaryRow.$855();this.summaryRow.hideField(_1,_2)}
this.handleFieldStateChanged();this.$134r()},isc.A.fieldIsVisible=function isc_ListGrid_fieldIsVisible(_1,_2){var _3=_1;if(!isc.isAn.Object(_3))_3=this.getSpecifiedField(_1);if(_2){if(_3.showIf=="false")return false;else if(_3.showIf==null)return true}
return this.fields.contains(_3)},isc.A.showActionInPanel=function isc_ListGrid_showActionInPanel(_1){if(_1.name=="editNew")return true;return this.Super("showActionInPanel",arguments)},isc.A.setFields=function isc_ListGrid_setFields(_1){if(isc.$cv)arguments.$cw=this;var _2=false;if(_1!=null&&this.fields!=null&&this.fields!=_1&&this.completeFields!=_1)
{delete this.fields.$775}
if(isc.isAn.Array(_1)){for(var i=0;i<_1.length;i++){if(_1[i]&&(_1[i].userFormula||_1[i][this.$71t]))
{_2=true}}}
if(!_1&&this.getDataSource()&&!this.getDataSource().hasFields()){this.logWarn("ListGrid.setFields() : neither this ListGrid nor its dataSource have fields")}
if(!this.booleanFalseImage&&!this.booleanTrueImage&&!this.booleanPartialImage){this.booleanTrueImage=isc.CheckboxItem?isc.CheckboxItem.getInstanceProperty("checkedImage"):null;this.booleanFalseImage=isc.CheckboxItem?isc.CheckboxItem.getInstanceProperty("uncheckedImage"):null;this.booleanPartialImage=isc.CheckboxItem?isc.CheckboxItem.getInstanceProperty("partialSelectedImage"):null;this.booleanImageWidth=isc.CheckboxItem?isc.CheckboxItem.getInstanceProperty("valueIconWidth"):null;this.booleanImageHeight=isc.CheckboxItem?isc.CheckboxItem.getInstanceProperty("valueIconHeight"):null}
var _4=this.$60z(),_5=(_4!=null&&this.fields?this.fields[_4]:null);var _6=this.$30a,_7=this.getEditRow(),_8=this.getEditCol(),_9=this.$286,_10=this.fields?this.getEditFieldName():null;if(this.completeFields==null)this.fields=[];this.completeFields=this.bindToDataSource(_1,this.canPickOmittedFields);if(this.completeFields==null)this.completeFields=[];if(this.shouldShowRowNumberField()){var _11=this.getCurrentRowNumberField(),_12=this.getRowNumberFieldPosition(),_13=!_11;if(_13&&_1&&_1.find(this.fieldIdProperty,"$74y")!=null)
{_13=false}
if(_13)_11=this.getRowNumberField();if(_13)this.completeFields.addAt(_11,_12);else this.completeFields.slideList([_11],_12)}else{var _11=this.getCurrentRowNumberField();if(_11)this.completeFields.remove(_11)}
if(this.shouldShowCheckboxField()){var _14=this.getCurrentCheckboxField(),_15=this.getCheckboxFieldPosition(),_13=!_14;if(_13&&_1&&_1.find(this.fieldIdProperty,"_checkboxField")){_13=false}
if(_13)_14=this.getCheckboxField();if(_15>this.completeFields.length)_15=this.completeFields.length;if(_13)this.completeFields.addAt(_14,_15);else this.completeFields.slideList([_14],_15)}else{var _14=this.getCurrentCheckboxField();if(_14)this.completeFields.remove(_14)}
if(this.shouldShowExpansionField()){var _16=this.getCurrentExpansionField(),_17=this.getExpansionFieldPosition(),_13=!_16;if(_13)_16=this.getExpansionField();if(_13)this.completeFields.addAt(_16,_17);else this.completeFields.slideList([_16],_17)}else{var _16=this.getCurrentExpansionField();if(_16)this.completeFields.remove(_16)}
if(this.shouldShowRemoveField()){var _18=this.completeFields.findIndex("isRemoveField",true),_19=(_18>=0)?this.completeFields[_18]:{excludeFromState:true,isRemoveField:true};if(_18==-1&&_1){_18=_1.findIndex("isRemoveField",true)}
if(!_19.$61a){isc.addProperties(_19,this.removeFieldDefaults,this.removeFieldProperties);if(_19.name==null)_19.name="$61b";if(_19.title==null)_19.title=this.removeFieldTitle;if(_19.cellIcon==null&&_19.formatCellValue==null){_19.formatCellValue=function(_39,_40,_41,_42,_43){if(_43.recordCanRemoveProperty&&_40&&_40[_43.recordCanRemoveProperty]===false)return"&nbsp;";if(!this.removeIconHTML){this.removeIconHTML=isc.Canvas.imgHTML(_43.removeIcon,_43.removeIconSize);this.unremoveIconHTML=isc.Canvas.imgHTML(_43.unremoveIcon,_43.removeIconSize)}
if(_43.recordMarkedAsRemoved(_41)){return this.unremoveIconHTML}else{return this.removeIconHTML}}
_19.iconSize=this.removeIconSize}
if(_18==-1){this.completeFields.add(_19)}
_19.$61a=true}}
if(this.headerSpans){this.reorderFieldsForHeaderSpans();this.spanMap=this.buildSpanMap()}
var _20=false;if(this.fieldState!=null){this.setFieldState();_20=true}
var _21=false;if(this.groupState!=null){this.setGroupState(this.groupState);_21=true}
this.applyFieldDefaults(this.completeFields);this.deriveVisibleFields();this.$134r();if(isc.DataSource)this.$45n();if(this.fields.length==0&&this.completeFields.length>0){this.logWarn("All specified fields for this component are hidden. Note that fields may be hidden via 'showIf' or 'detail' attribute values. In order to display data this grid must have some visible fields.")}
this.$26a=null;var _22,_23,_24;if(_6){this.storeUpdatedEditorValue();_22=this.fields.findIndex(this.fieldIdProperty,_10);if(_22!=-1&&!this.canEditCell(_7,_22))
_22=-1;if(_22==-1){var _25;if(!this.editByCell)_25=this.findNextEditCell(_7,0,1,true,true,false,true);if(_25!=null&&_25[0]==_7){_22=_25[1]}
if(_22==-1){this.cancelEditing(isc.ListGrid.PROGRAMMATIC);_6=false}}else{var _26=_9.getItem(_10);if(_26){_24=_26.hasFocus;if(_24)_9.$106()}
_23=true}
if(_6)this.hideInlineEditor(false,true)}
var _27=(this.canFreezeFields==null||this.$60v)&&this.fixedRecordHeights!=false&&this.fixedFieldWidths!=false&&this.autoFitData!="horizontal"&&this.autoFitData!="both"&&this.bodyOverflow!="visible";if(_27){if(this.completeFields.getProperty("overflow").contains("visible"))_27=false}
if(_27){this.$60v=true;this.canFreezeFields=true}else if(this.$60v){delete this.$60v;this.canFreezeFields=null}
if(this.canSelectCells)this.selection.numCols=this.fields.length;if(_5){var _28=this.fields.indexOf(_5);if(_28==-1)_28=null;this.$600(_28)}
var _29=this.showHeader&&this.headerHeight>0&&this.header!=null;if(_29){this.updateHeader()}
var _30=false;if(this.sortState!=null){this.setSortState(this.sortState);_30=true}else{var _4=this.$60z();if(_4!=null&&this.$91k(_4)){this.setSort(this.getSort())}}
if(this.summaryRow&&this.showGridSummary){this.summaryRow.setFields(this.completeFields.duplicate())}
this.calculateRecordSummaries(null,null,true,true,false,!_2);this.updateBody();if(this.filterEditor){this.filterEditor.updateDataSource(this.getDataSource());var _31=this.completeFields||[];this.filterEditor.setFields(_31.duplicate())}
this.layoutChildren(this.$604);if(_29&&this.body!=null){this.syncHeaderScrolling(this.body.getScrollLeft())}
if(this.$52b!=null){var _32={};for(var i in this.$52b){if(this.$52b[i]==null)continue;var _33=this.$52b[i].$31x,_34=(this.dataSource!=null?this.getDataSource().getPrimaryKeyFieldNames():[]);for(var _35 in _33){if(!this.fields.containsProperty(this.fieldIdProperty,_35)&&!_34.contains(_35)){_32[_35]=true;this.clearEditValue(_33,_35,true)}}}
_32=isc.getKeys(_32);if(_32.length>0){this.logInfo("'setFields()' removed the following fields which had pending edit values for some row[s]: '"+_32.join("', '")+"'.\nEdit values for these fields have been dropped.","gridEdit")}}
if(_6){if(_23){this.showInlineEditor(_7,_22,false,false,true);if(_24)_9.$11b(_36)}else{this.$31u(_7,_22,!_24)}
if(_24){var _36=this.getEditFieldName();if(_36==_10){_9.$11b(_36)}else{_9.focusInItem(_36)}}}
if(this.hilites!=null)this.applyHilites();if(!this.$922)this.defaultFieldState=this.getFieldState();if(this.viewState){var _37=this.viewState;this.viewState=null;if(_20){var _38=this.evalViewState(_37,"viewState");if(_38){delete _38.field}
_37="("+isc.Comm.serialize(_38,false)+")"}
if(_30){var _38=this.evalViewState(_37,"viewState");if(_38){delete _38.sort}
_37="("+isc.Comm.serialize(_38,false)+")"}
if(_21){var _38=this.evalViewState(_37,"viewState");if(_38){delete _38.group}
_37="("+isc.Comm.serialize(_38,false)+")"}
this.setViewState(_37)}});isc.evalBoundary;isc.B.push(isc.A.addField=function isc_ListGrid_addField(_1,_2){return this.Super("addField",[_1,_2,this.completeFields],arguments)},isc.A.removeField=function isc_ListGrid_removeField(_1){return this.Super("removeField",[_1,this.completeFields],arguments)},isc.A.shouldShowCheckboxField=function isc_ListGrid_shouldShowCheckboxField(){if(this.fieldSourceGrid)return this.fieldSourceGrid.shouldShowCheckboxField();return(this.selectionAppearance==this.$12c&&this.selectionType!=this.$27r&&!isc.isA.TreeGrid(this))},isc.A.focusInFilterEditor=function isc_ListGrid_focusInFilterEditor(_1){if(this.filterEditor==null)return;var _2=_1!=null?this.getColNum(_1):null;this.filterEditor.startEditing(0,_2)},isc.A.filterByEditor=function isc_ListGrid_filterByEditor(){if(this.filterEditor!=null)this.filterEditor.performAction()},isc.A.bindToDataSource=function isc_ListGrid_bindToDataSource(_1,_2,_3,_4,_5,_6){var _7=false;var _8=this.invokeSuper(isc.ListGrid,"bindToDataSource",_1,_2,_3,_4,_5,_6);if(this.showDetailFields&&_8!=null){for(var i=0;i<_8.length;i++){var _10=_8[i];if(_10.showIf==null&&_10.detail==true){_10.showIf=this.$18r}
if(this.$136j(_10.name)){_7=true}
_10.$81f=true}}
this.$81g=!_7;return _8},isc.A.$136j=function isc_ListGrid__isNumberOrArrayProp(_1){if(this.$136i[_1]!=null)return true;if(isc.isA.Number(parseInt(_1))&&parseInt(_1).toString()==_1)return true;return false},isc.A.setFieldState=function isc_ListGrid_setFieldState(_1){if(this.completeFields==null)this.setFields(this.fields);if(_1==null&&this.fieldState!=null){if(isc.isA.String(this.fieldState)){_1=this.evalViewState(this.fieldState,"fieldState")}else{_1=this.fieldState}
this.completeFields=this.$31y(_1);this.fieldState=null;return}
_1=this.evalViewState(_1,"fieldState")
if(_1){this.completeFields=this.$31y(_1);this.refreshFields()}},isc.A.handleFieldStateChanged=function isc_ListGrid_handleFieldStateChanged(_1){this.fieldStateChanged();this.handleViewStateChanged();if(this.canSelectCells&&!_1){this.selection.deselectAll();if(this.fields&&this.fields.length!=this.selection.numCols){this.selection.numCols=this.fields.length}}},isc.A.setHilites=function isc_ListGrid_setHilites(){this.Super("setHilites",arguments);this.handleViewStateChanged()},isc.A.$1024=function isc_ListGrid__handleHilitesChanged(_1){this.Super("$1024",arguments);if(isc.isA.Function(this.hilitesChanged))this.hilitesChanged()},isc.A.redrawHilites=function isc_ListGrid_redrawHilites(){this.$25a("redrawHilites")},isc.A.getCheckboxField=function isc_ListGrid_getCheckboxField(){var _1=this,_2={width:this.checkboxFieldHSpace+this.$65a(),getAutoFreezePosition:function(){return _1.getCheckboxFieldPosition()}};isc.addProperties(_2,this.checkboxFieldDefaults,this.checkboxFieldProperties);_2.title=(this.canSelectAll==false||this.selectionType=="single"?isc.nbsp:this.$116w(false,true,false,_2));return _2},isc.A.getCurrentCheckboxField=function isc_ListGrid_getCurrentCheckboxField(){var _1=this.completeFields||this.fields;if(!_1)return null;var _2=_1.find(this.fieldIdProperty,"_checkboxField");return!_2?null:isc.isAn.Array(_2)?_2[0]:_2},isc.A.$65a=function isc_ListGrid__getCheckboxFieldImageWidth(){return this.checkboxFieldImageWidth||this.booleanImageWidth||(isc.CheckboxItem?isc.CheckboxItem.getInstanceProperty("valueIconWidth"):null)},isc.A.$65b=function isc_ListGrid__getCheckboxFieldImageHeight(){return this.checkboxFieldImageHeight||this.booleanImageHeight||(isc.CheckboxItem?isc.CheckboxItem.getInstanceProperty("valueIconWidth"):null)},isc.A.isCheckboxField=function isc_ListGrid_isCheckboxField(_1){if(!_1||!_1.$63f)return false;else return true},isc.A.getCheckboxFieldPosition=function isc_ListGrid_getCheckboxFieldPosition(){if(this.fieldSourceGrid)return this.fieldSourceGrid.getCheckboxFieldPosition();if(this.selectionAppearance!="checkbox"||isc.isA.TreeGrid(this))return-1;var _1=0;if(this.shouldShowRowNumberField())_1++;return _1},isc.A.getSelectedState=function isc_ListGrid_getSelectedState(_1,_2){if(!this.selection)return null;if(!this.dataSource||isc.isAn.emptyObject(this.getDataSource().getPrimaryKeyFields()))
{if(!_1){this.logWarn("can't getSelectedState without a DataSource with a primary key field set")}
return null}
var _3=[],_4;if(this.canSelectCells){_4=this.selection.getSelectedCells();for(var i=0;i<_4.length;i++){var _6=_4[i],_7=this.getPrimaryKeys(_6[0]),_8=null;for(var k=0;k<_3.length;k++){if(this.objectsAreEqual(_7,_3[k].PKs)){_8=_3[k];break}}
if(!_8){_3.add({PKs:_7,cells:[]});_8=_3[_3.length-1]}
_8.cells.add(_6[1])}}else{_4=this.selection.getSelection()||[];for(var i=0;i<_4.length;i++){_3[i]=this.getPrimaryKeys(_4[i])}}
if(_2)return _3;return isc.Comm.serialize(_3,false)},isc.A.getCellSelection=function isc_ListGrid_getCellSelection(){if(!this.canSelectCells)return null;return this.getSelectionObject()},isc.A.setSelectedState=function isc_ListGrid_setSelectedState(_1){_1=this.evalViewState(_1,"selectedState")
if(!_1||_1.length==0){if(this.selection)this.selection.deselectAll();return}
if(_1[0].PKs&&!this.canSelectCells){if(this.selection)this.selection.deselectAll();this.logWarn("Cannot restore CellSelection state to a ListGrid with canSelectCells: false.");return}else if(!_1[0].PKs&&this.canSelectCells){if(this.selection)this.selection.deselectAll();this.logWarn("Cannot restore Selection state to a ListGrid with canSelectCells: true.");return}
var _2=this.selection,_3=this.originalData||this.data;if(isc.ResultSet&&isc.isA.ResultSet(_3)&&!_3.lengthIsKnown())return;if(_3&&_2){_2.deselectAll();var _4=[];for(var i=0;i<_1.length;i++){var _6=_1[i]
var _7=_1[i];if(isc.isAn.Object(_6)&&_6.cells!=null){_7=_1[i].PKs}
var _8=_3.findByKeys(_7,this.getDataSource());if(_8!=-1){if(this.canSelectCells){var _9=_6.cells;for(var k=0;k<_9.length;k++){_4.add([_8,_9[k]])}}else{_4.add(_3.get(_8))}}}
if(this.canSelectCells){this.selection.selectCellList(_4)}else{this.selection.selectList(_4)}}},isc.A.getSortState=function isc_ListGrid_getSortState(_1){if(this.logIsInfoEnabled("sorting")){this.logInfo("\ngrid.sortFieldNum is: "+this.sortFieldNum+"\ngrid.sortField is: "+this.sortField+"\ngrid.getField(grid.sortFieldNum) is:\n"+isc.echoAll(this.getField(this.sortFieldNum))+"\n-----------------------------------------\ngrid.$60z() is: "+this.$60z()+"\ngrid.getField(grid.$60z()) is:\n"+isc.echoAll(this.getField(this.$60z()))+"\n","sorting")}
var _2=this.$60z(),_3=(_2!=null?this.getField(_2):null),_4=_3!=null?this.getFieldName(_3):null,_5=this.$766(_3),_6={fieldName:_4,sortDir:_5};if(this.$73p&&this.$73p.length>0){var _7=isc.shallowClone(this.$73p);_7.clearProperty("primarySort");_7.clearProperty("sortIndex");_7.clearProperty("normalizer");_7.clearProperty("context");_7.clearProperty("$114u");_6.sortSpecifiers=_7}
if(_1)return _6;return"("+isc.Comm.serialize(_6,false)+")"},isc.A.setSortState=function isc_ListGrid_setSortState(_1){_1=this.evalViewState(_1,"sortState")
if(!_1){this.clearSort();return}
if(_1.sortSpecifiers){this.setSort(isc.shallowClone(_1.sortSpecifiers))}else if(_1.fieldName==null){this.clearSort()}else{var _2=this.getFieldNum(_1.fieldName)
if(_2!=-1)this.sort(_2,_1.sortDir)}},isc.A.getViewState=function isc_ListGrid_getViewState(_1){var _2={selected:this.getSelectedState(true,true),field:this.getFieldState(true),sort:this.getSortState(true),hilite:this.getHiliteState(true),group:this.getGroupState(true)};if(_1)return _2;return"("+isc.Comm.serialize(_2,false)+")"},isc.A.getGroupState=function isc_ListGrid_getGroupState(_1){var i,_3,_4,_5=this.getGroupByFields();if(_5==null){return""}else{_4=[];for(i=0;i<_5.length;i++){var _6=this.completeFields||this.fields||[];_3=_6.find("name",_5[i]);if(_3){_4.add({fieldName:_5[i],groupingMode:_3.groupingMode,groupGranularity:_3.groupGranularity,groupPrecision:_3.groupPrecision})}}}
if(_1)return _4;return"("+isc.Comm.serialize(_4,false)+")"},isc.A.setGroupState=function isc_ListGrid_setGroupState(_1){var i,_3,_4;if(_1){if(isc.isA.String(_1)){if(!_1.startsWith("(")){this.groupBy(_1.split(","));return}else{_1=this.evalViewState(_1,"groupState")}}
_4=[];for(i=0;i<_1.length;i++){_3=this.completeFields.find("name",_1[i].fieldName);if(_3){_4.push(_1[i].fieldName);_3.groupingMode=_1[i].groupingMode;_3.groupGranularity=_1[i].groupGranularity;_3.groupPrecision=_1[i].groupPrecision}}
this.groupBy(_4)}else{this.ungroup()}},isc.A.setViewState=function isc_ListGrid_setViewState(_1){_1=this.evalViewState(_1,"viewState")
if(!_1)return;var _2=this.$31v;if(_1.field)this.setFieldState(_1.field);this.setSortState(_1.sort);this.setGroupState(_1.group);this.setHiliteState(_1.hilite);this.setSelectedState(_1.selected);if(_2&&!this.isDrawn()){this.$31v=true}},isc.A.handleGroupStateChanged=function isc_ListGrid_handleGroupStateChanged(){this.groupStateChanged();this.handleViewStateChanged()},isc.A.groupStateChanged=function isc_ListGrid_groupStateChanged(){},isc.A.handleViewStateChanged=function isc_ListGrid_handleViewStateChanged(){this.fireOnPause("viewStateChangeNotification",{target:this,methodName:"viewStateChanged"},0)},isc.A.getViewStateChangedFunction=function isc_ListGrid_getViewStateChangedFunction(){if(this.$84i==null){var _1=this;this.$84i=function(){if(_1.destroyed)return;_1.viewStateChanged()}}
return this.$84i},isc.A.viewStateChanged=function isc_ListGrid_viewStateChanged(){},isc.A.setDataSource=function isc_ListGrid_setDataSource(_1,_2){var _3=this.getDataSource();if(_3!=null&&_3!=_1&&_3.ID!=_1){this.ungroup()}
this.discardAllEdits();if(this.$30a)this.hideInlineEditor();if(this.$286){this.$286.destroy();delete this.$286}
this.Super("setDataSource",arguments);this.clearFilterValues()},isc.A.deriveVisibleFields=function isc_ListGrid_deriveVisibleFields(){this.fields.setArray(this.getVisibleFields(this.completeFields));delete this.fields.$775
this.deriveFrozenFields();this.refreshMasterIndex()},isc.A.refreshFields=function isc_ListGrid_refreshFields(){if(!this.completeFields)return;this.$922=true;this.setFields(this.completeFields);delete this.$922},isc.A.getFieldWidths=function isc_ListGrid_getFieldWidths(_1){var _2=this.$78q();if(this.autoFitFieldWidths&&!this.$813&&!this.$97e)
{this.$813=true;var _3=_2.duplicate(),_4=null;if(this.frozenFields!=null){var _5=this.freezeStart();if(_5){_4=_3.slice(0,this.frozenFields.length);_3=_3.slice(this.frozenFields.length)}else{_4=_3.slice(-this.frozenFields.length);_3=_3.slice(0,-this.frozenFields.length)}}
var _6=this.getAvailableFieldWidth(true),_7=_3.sum();var _8=_6;if(_4!=null)_8-=_4.sum();var _9=true;if(this.autoFitWidthApproach!="title"){var _10=this.getDrawArea();if(!this.data||_10==null||Array.isLoading(this.data.get(_10[0]))){_9=false}}
if(_7<_8&&_9){var _11=this.getAutoFitExpandField();if(_11){var _12=this.getFieldNum(_11);var _13=_8-_7;_2[_12]+=_13;var _14=this.getFieldHeaderButton(_12);if(_14&&_14.isDrawn()){_14.setWidth(_2[_12])}}}else if(_7>_8&&this.autoFitClipFields!=null){var _15;var _16=this.autoFitClipFields;for(var i=0;i<_16.length;i++){var _18=this.getField(_16[i]),_19=this.getFieldNum(_18);if(_18==null||_19<0)continue;if(!this.$54d&&_18.frozen){this.logInfo("auto-fitting field:"+_18.name+" is present in the autoFitClipFields array for this grid, but is currently frozen. This is not supported - the field will not be clipped.","frozenFields");continue}
delete _18.$776;var _20=this.getFieldHeader(_19);if(_20&&_20.isDrawn()){_14=_20.getMember(this.getLocalFieldNum(_19));_14.setWidth(_18.width||"*");_14.setOverflow("hidden")}}
if(this.header&&this.header.isDrawn()){var _21=this.$812;if(_1!=null)_21+=_1;_15=this.header.hPolicy;this.header.hPolicy="fill";this.header.reflowNow(_21);this.header.hPolicy=_15;if(this.frozenHeader){this.frozenHeader.hPolicy="fill";this.frozenHeader.reflowNow(_21);this.frozenHeader.hPolicy=_15}}
_2=this.$78q()}
this.$813=false}
return _2},isc.A.$78q=function isc_ListGrid__getCalculatedFieldWidths(){var _1=this.header;if(isc.isA.Layout(_1)&&_1.isDrawn()){var _2=_1.members;for(var i=0;i<_2.length;i++){if(_2[i].isDirty())_2[i].redraw();if(_2[i].label!=null&&_2[i].label.isDirty())_2[i].label.redraw()}
var _4=_1.getMemberSizes();if(_4.length>0){if(this.allowMismatchedHeaderBodyBorder){var _5=_1.getLeftBorderSize()+_1.getLeftMargin(),_6=_1.getRightBorderSize()+_1.getRightMargin();if(_5!=0){_4[0]+=_5}}
var _7=_4.sum(),_8=_1.getInnerWidth();if(this.allowMismatchedHeaderBodyBorder){var _9=_7-_8;if(_9>0){_4[_4.length-1]+=Math.min(_9,_6)}}}
if(this.frozenFields){var _10=this.frozenHeader.getMemberSizes();_4.addListAt(_10,this.freezeStart()?0:_4.length)}}else{var _4=this.getStretchResizeWidths()}
return _4},isc.A.getStretchResizeWidths=function isc_ListGrid_getStretchResizeWidths(){if(this.fields==null)return[];var _1=this.fields.getProperty("width"),_2=this.fields.getProperty("$776"),_3=[];for(var i=0;i<_1.length;i++){if(_2[i]!=null){if(isc.isA.String(_1[i])){_3.add(i)}else if((_1[i]==null)||(_1[i]<_2[i])){_1[i]=_2[i]}}}
var _5=(this.innerWidth!=null?this.innerWidth:this.getAvailableFieldWidth()),_6=isc.Canvas.applyStretchResizePolicy(_1,_5,this.minFieldSize);if(_3.length>0){var _7=false;for(var i=0;i<_3.length;i++){var j=_3[i];if(_6[j]<_2[j]){_7=true;_1[j]=_2[j]}}
if(_7){_6=isc.Canvas.applyStretchResizePolicy(_1,_5,this.minFieldSize)}}
return _6},isc.A.getAvailableFieldWidth=function isc_ListGrid_getAvailableFieldWidth(_1){if(_1==null){_1=this.autoFitData!="both"&&this.autoFitData!="horizontal"}
var _2=(!_1?this.getVisibleWidth():this.getWidth())-this.getHMarginBorderPad();var _3=this.$54u();if(_3){_2-=this.body?this.body.getScrollbarSize():this.getScrollbarSize()}
return Math.max(1,_2)},isc.A.getFieldWidth=function isc_ListGrid_getFieldWidth(_1){_1=this.getFieldNum(_1);if(_1==-1||!this.fields||_1>=this.fields.length)return null;var _2;if(this.body!=null)_2=this.getColumnWidth(_1);if(_2==null||isNaN(_2))_2=this.getFieldWidths()[_1];return _2},isc.A.$310=function isc_ListGrid__adjustFieldSizesForBodyStyling(_1,_2){if(_2==null)_2=false;if(_1==null||_1.length==0)return _1;if(!this.body){return _1}
_1[_1.length-1]=this.$311(_1[_1.length-1],_1.sum(),_2);_1[0]=this.$312(_1[0],_2);return _1},isc.A.$312=function isc_ListGrid__adjustFirstFieldForBodyStyling(_1,_2){if(!this.body)return _1;var _3=(_2?this.body.getTopBorderSize()+this.body.getTopMargin():this.body.getLeftBorderSize()+this.body.getLeftMargin());if(_3!=0)_1-=_3;return Math.max(0,_1)},isc.A.$311=function isc_ListGrid__adjustLastFieldForBodyStyling(_1,_2,_3){if(!this.body)return _1;var _4=(_3?this.body.getBottomBorderSize()+this.body.getBottomMargin():this.body.getRightBorderSize()+this.body.getRightMargin());if(_4!=0){var _5=_2-
(_3?this.body.getInnerHeight():this.body.getInnerWidth());if(_5>0){_1-=Math.min(_5,_4)}}
return Math.max(_1,1)},isc.A.setBodyFieldWidths=function isc_ListGrid_setBodyFieldWidths(_1){this.$26a=_1;var _2=_1;if(this.allowMismatchedHeaderBodyBorder){if(isc.isAn.Array(_1)){_1=this.$310(_1.duplicate())}}
var _3=this.frozenFields;if(_3&&this.frozenBody){var _4=this.getFrozenSlots(_1);_1=this.getUnfrozenSlots(_1);this.frozenBody.setColumnWidths(_4);var _5=_4.sum();this.frozenBody.setWidth(_5);this.frozenBody.$pn=_5;if(this.frozenHeader)this.frozenHeader.setWidth(_5)}
if(this.body!=null)this.body.setColumnWidths(_1);if(this.$30a){var _6=this.$286.getItems(),_7=this.getRecord(this.getEditRow()),_8=this.getEditFormItemFieldWidths(_7);for(var i=0;i<_6.length;i++){var _10=_6[i].colNum;if(_6[i].width!=_8[_10])
_6[i].setWidth(_8[_10])}}},isc.A.getGridMembers=function isc_ListGrid_getGridMembers(){var _1=this.gridComponents,_2=[],_3;for(var i=0;i<_1.length;i++){var _5=_1[i],_6=null;if(isc.isA.Canvas(_5)){_6=_5}else if(isc.isA.String(_5)){if(!this.shouldShowGridComponent(_5))continue;switch(_5){case"filterEditor":if(this.filterEditor==null)this.makeFilterEditor();_6=this.filterEditor;break;case"header":if(this.header==null){this.makeHeader()}
_6=this.headerLayout||this.header;break;case"body":_3=true;this.createBodies();_6=this.bodyLayout||this.body;break;case"summaryRow":_6=this.getSummaryRow();break}}
if(_5!=null&&_6==null){_6=this.createCanvas(_5)}
_2.add(_6)}
if(!_3){this.logWarn("ListGrid specified with gridComponents:"+_1+".  This does not include a \"body\" entry. ListGrids with no body are unsupported, displaying the body as the last member in the grid.");_2[_2.length]=this.createBodies()}
return _2},isc.A.shouldShowGridComponent=function isc_ListGrid_shouldShowGridComponent(_1){if(_1==this.$880)return true;if(_1==this.$881&&this.headerHeight==0){return false}
var _2=this.showComponentPropertyMap[_1];if(_2==null){this.showComponentPropertyMap[_1]=_2="show"+_1.substring(0,1).toUpperCase+_1.substring(1)}
return this[_2]},isc.A.createChildren=function isc_ListGrid_createChildren(){this.updateGridComponents();if(isc.Browser.isMoz&&isc.Browser.geckoVersion>=20051111){if(this.header){this.body.mozOutlineOffset="0px";if(this.body.mozOutlineColor==null)
this.body.mozOutlineColor=this.mozBodyOutlineColor}else{if(this.body.mozOutlineColor==null)
this.body.mozOutlineColor=this.mozBodyNoHeaderOutlineColor;this.body.mozOutlineOffset="-1px"}}
this.$122n=this._useNativeTabIndex;this._useNativeTabIndex=false},isc.A.updateGridComponents=function isc_ListGrid_updateGridComponents(){this.setMembers(this.getGridMembers())},isc.A.layoutChildren=function isc_ListGrid_layoutChildren(_1,_2,_3){if(this.body!=null){this.$45m(_1,_2,_3)}
isc.VLayout.$b4.layoutChildren.call(this,_1,_2,_3);if(this.body!=null){if(this.frozenBody){var _4=this.shrinkForFreeze&&this.body.hscrollOn;var _5=this.bodyLayout.getInnerHeight();if(_4)_5-=this.body.getScrollbarSize();this.frozenBody.setHeight(_5);if(this.frozenBody.$276())this.frozenBody.markForRedraw("height changed");this.frozenBody.$po=_5}}},isc.A.updateMemberTabIndex=function isc_ListGrid_updateMemberTabIndex(_1){if(this.tabIndex!=null&&!this.$sp&&this.tabIndex!=-1&&(this.canvasItem==null))
{_1.setTabIndex(this.tabIndex);return}
return this.Super("updateMemberTabIndex",arguments)},isc.A.$105s=function isc_ListGrid__updateHeaderWidth(_1,_2,_3){var _4=this.autoFitMaxColumns;if(_4!=null){if(this.frozenFields==null||this.freezeStart()){_1=_1.slice(0,_4)}else{var _5=this.frozenFields.length;if(_4<_5){_1=_1.slice(-_5,-_5+_4)}else{var _6=_1.slice(0,_4-_5);_1=_1.slice(-_5);_1.addList(_6)}}}
var _7=_1.sum();if(this.$313()&&!this.body.vscrollOn)_7-=this.getScrollbarSize();if(this.autoFitMaxWidth!=null&&_7>this.autoFitMaxWidth){var _8=this.$313()?this.getScrollbarSize():0;_7=this.autoFitMaxWidth-_8}
if(_7>_2){if(_3)_3.resizeTo(_7);else _2=_7}
return _2},isc.A.$45m=function isc_ListGrid__updateFieldWidths(_1,_2,_3){if(this.body==null)return;if(this.$928)return;if(this.$813){return}
this.$928=true;this.$26a=null;if(this.fields&&!this.skipAutoFitWidths){if(!this.fields.$775){var _4=this.getAutoFitValueWidths(null,true);if(_4==null){this.fields.setProperty("$776",null)}else{for(var i=0;i<this.fields.length;i++){var _6=this.fields[i];if(_4[i]==null){_6.$776=null;continue}
var _7=this.getMinFieldWidth(_6);var _8=this.getFieldHeaderButton(i);if(_8!=null){if(_7<_4[i]){_8.setWidth(_4[i]);_8.parentElement.reflow()}else{_8.setWidth(_7);_8.parentElement.reflow()}
if(_8.isDirty())_8.redraw();if(_8.label&&_8.label.isDirty()){_8.label.redraw()}
if(this.getAutoFitWidthApproach(_6)=="both"){var _9=_8.getVisibleWidth(),_10=Math.max(_7,_4[i]);if(_9>_10){_4[i]=_9;_8.setWidth(_9)}}}
_6.$776=_4[i];if(_7<_4[i]){var _8=this.getFieldHeaderButton(i);if(_8!=null){_8.setWidth(_4[i]);_8.parentElement.reflow()}}else{var _8=this.getFieldHeaderButton(i);if(_8!=null){_8.setWidth(_7);_8.parentElement.reflow()}}}
this.fields.$775=true;this.$99j=this.getWidth()}}else if(this.$99j!=this.getWidth()){var _11=this.getAutoFitExpandField();if(_11){var _12=this.getFieldNum(_11);delete _11.$776;var _4=this.getAutoFitValueWidths(null,true);if(_4){var _13=_4[_12];if(isc.isA.Number(_13)){var _7=this.getMinFieldWidth(_11);_11.$776=_13;var _8=this.getFieldHeaderButton(_12);if(_8!=null){_8.setWidth(Math.max(_7,_13));_8.parentElement.reflow()}
this.$99j=this.getWidth()}}}}}
var _14=this.getAvailableFieldWidth(true),_15=(_14!=this.innerWidth);this.innerWidth=_14;var _16=this.header,_17=(this.showHeader?this.getHeaderHeight():0);if(_16!=null){var _18=(this.isRTL()&&this.$54u()?this.body.getScrollbarSize():0);_16.hPolicy="fill";if(this.frozenHeader)this.frozenHeader.hPolicy="fill";var _19=this.autoFitData=="horizontal"||this.autoFitData=="both",_20=this.innerWidth,_21;if(_19&&this.$97e){_21=this.getFieldWidths(_1+" [sizing horizontal auto-fit header]");_20=this.$105s(_21,_20)}
if(!this.leaveScrollbarGap&&_16.isDrawn()&&_20!=_16.getWidth()&&_1=="body scroll changed"){if(this.$54e||!this.resizeFieldsForScrollbar){_16.hPolicy="none"}}
var _22=this.headerLayout||_16;_22.resizeTo(_20,_17);_22.$po=_17;if(_19&&!this.$97e){_21=this.getFieldWidths(_1+" [sizing horizontal auto-fit header]");this.$105s(_21,_20,_22)}
var _23=(_1=="initial draw");if(!_16.isDrawn()&&(_23||this.isDrawn())){if(!this.frozenFields){if(_23)this.$20(_16);_16.draw()}else{if(_21==null){_21=this.getFieldWidths(_1+" [sizing frozen fields]")}
var _24=this.getFrozenSlots(_21);var _25=_24.sum();this.frozenHeader.setWidth(_25);this.frozenHeader.$pn=_25;if(_23)this.$20(this.headerLayout);this.headerLayout.draw()}}
if(_16.isDrawn())_16.hPolicy="none";if(this.frozenHeader&&this.frozenHeader.isDrawn())this.frozenHeader.hPolicy="none";if(this.sorter){this.updateSorter()}
if(this.autoFitHeaderHeights){var _17=this.getHeaderHeight();this.dropCachedHeaderButtonHeights();var _26=this.getHeaderHeight();if(_17!=_26||this.header.getHeight()!=_26)
{this.header.setHeight(_26);this.$109d()}else{if(this.headerSpans){this.header.$58r(true)}}}}
if((!this.$26a||_15)&&((_16&&_16.isDrawn())||_17==0))
{var _21=this.getFieldWidths(_1);this.setBodyFieldWidths(_21);if(this.filterEditor&&this.filterEditor.body!=null){this.filterEditor.setBodyFieldWidths(_21.duplicate())}
if(this.summaryRow&&this.showGridSummary&&this.summaryRow.body!=null){this.summaryRow.setBodyFieldWidths(_21.duplicate())}
if(this.logIsDebugEnabled("layout")){this.logDebug("new field widths: "+this.$26a,"layout")}}
if(_19&&this.filterEditor){this.filterEditor.setWidth(this.body.getVisibleWidth())}
this.$928=false},isc.A.getHeaderButtonDefaultHeight=function isc_ListGrid_getHeaderButtonDefaultHeight(_1,_2){if(_2||_1.$109e==null){this.calculateDefaultSpanHeights()}
return _1.$109e},isc.A.calculateDefaultSpanHeights=function isc_ListGrid_calculateDefaultSpanHeights(){if(this.headerSpans==null){return}
if(this.headerSpans!=null){var _1=this.getFields(),_2=_1.getProperty("name");for(var i=0;i<this.headerSpans.length;i++){var _4=this.headerHeight,_5=this.headerSpans[i];this.$109f(_5,_4,_2)}
for(var i=0;i<_1.length;i++){if(this.spanMap[_1[i].name]==null){_1[i].$109e=this.headerHeight}}}},isc.A.$109f=function isc_ListGrid__calculateDefaultSpanHeight(_1,_2,_3,_4){if(!_4){if(!this.$97j(_3,_1))return;var _5;if(!_1.$55j){_5=_1.height||this.headerSpanHeight}
if(_5==null){var _6=this.getNestedSpanDepth(_1);_6+=1;_5=Math.floor(_2/_6)}
_1.$109e=_5;_2-=_5;if(_1.spans){for(var i=0;i<_1.spans.length;i++){this.$109f(_1.spans[i],_2,_3)}}else{for(var i=0;i<_1.fields.length;i++){var _8=this.getField(_1.fields[i]);if(_8){this.$109f(_8,_2,_3,true)}}}}else{if(!_3.contains(_1.name))return;_1.$109e=_2}},isc.A.getHeaderButtonMinHeight=function isc_ListGrid_getHeaderButtonMinHeight(_1,_2){if(!_2&&_1.$109g!=null){return _1.$109g}
return this.getHeaderButtonMinHeights([_1],_2)[0]},isc.A.getHeaderButtonMinHeights=function isc_ListGrid_getHeaderButtonMinHeights(_1,_2){var _3=[];var _4=[];var _5="";for(var i=0;i<_1.length;i++){var _7=_1[i];if(!_2&&_7.$109g!=null){_4[i]=_7.$109g}else{var _8=!this.fields.contains(_7);var _9;if(_8){var _10=this.getSpannedFields(_7),_9=0;for(var _11=0;_11<_10.length;_11++){var _12=this.getField(_10[_11]);if(_12==null){continue}
_9+=this.getFieldWidth(_10[_11])}}else{_9=this.getFieldWidth(_7)}
if(isNaN(_9)){_4[i]=1}else{var _13=_7.headerBaseStyle,_14=this.getHeaderButtonProperties();if(_13==null){if(_7.frozen&&_14.frozenBaseStyle){_13=_14.frozenBaseStyle}else if(_14.baseStyle){_13=_14.baseStyle}}
var _15=_7.headerTitleStyle;if(_15==null){if(_7.frozen&&_14.frozenTitleStyle){_15=_14.frozenTitleStyle}else if(_14.titleStyle){_15=_14.titleStyle}}
if(_13==null||_15==null){var _16=this.headerButtonConstructor||this.header?this.header.buttonConstructor:isc.Toolbar.getPrototype().buttonConstructor;if(isc.isA.String(_16)){_16=isc[_16]}
if(_13==null){_13=_16.getPrototype().baseStyle}
if(_15==null){_15=_16.getPrototype().titleStyle}}
var _17=_8?_7.headerTitle||_7.title:this.getHeaderButtonTitle(_7);var _18=_7.$115h;if(_18&&_18.baseStyle==_13&&_18.titleStyle==_15&&_18.width==_9&&_18.wrap==_7.wrap&&_18.title==_17)
{_7.$109g=_18.height;_4[i]=_18.height}}}
if(_4[i]!=null)continue;var _19={};_19.width=_9;_19.baseStyle=_13;_19.titleStyle=_15;_19.wrap=_7.wrap;_19.title=_17
_3.add({index:i,config:_19});var _20=_19.wrap;if(_20==null)_20=this.wrapHeaderTitles;_5+="<div style='position:absolute;width:"+_9+"px;'><div class="+(_19.titleStyle||_19.baseStyle)+(_20?">":" style='white-space:nowrap;'>")+_17+"</div></div>"}
if(_3.length==0)return _4;if(isc.ListGrid.headerHeightTester==null){isc.ListGrid.headerHeightTester=isc.Canvas.create({overflow:"hidden",top:-1000,autoDraw:true,contents:_5})}else{isc.ListGrid.headerHeightTester.setContents(_5)}
if(isc.ListGrid.headerHeightTester.isDirty())isc.ListGrid.headerHeightTester.redraw();var _21=isc.ListGrid.headerHeightTester.getHandle(),_22=_21.childNodes;if(_22.length!=_3.length){}
for(var i=0;i<_22.length;i++){var _23=_22[i];var _19=_3[i].config,_24=_3[i].index,_7=_1[_24];_19.height=_23.offsetHeight;_7.$115h=_19;_7.$109g=_19.height;_4[_24]=_19.height}
return _4});isc.evalBoundary;isc.B.push(isc.A.dropCachedHeaderButtonHeights=function isc_ListGrid_dropCachedHeaderButtonHeights(){for(var i=0;i<this.fields.length;i++){this.fields[i].$109e=null;this.fields[i].$109g=null;if(this.spanMap){var _2=this.spanMap[this.fields[i].name];while(_2!=null){_2.$109e=null;_2.$109g=null;_2=_2.parentSpan}}}},isc.A.getHeaderHeight=function isc_ListGrid_getHeaderHeight(){if(this.headerHeight==0||!this.showHeader)return 0;if(!this.autoFitHeaderHeights)return this.headerHeight;var _1=0;if(this.headerSpans==null){_1=this.headerHeight;var _2=this.getFields();var _3=this.getHeaderButtonMinHeights(_2);_1=Math.max(_1,_3.max())}else{var _2=this.getFields(),_4=0;var _5=this.getHeaderButtonMinHeights(_2),_6=[];for(var i=0;i<_2.length;i++){if(this.spanMap[_2[i].name]){var _8=this.spanMap[_2[i].name];while(_8){if(!_6.contains(_8)){_6.add(_8)}
_8=_8.parentSpan}}}
var _9=this.getHeaderButtonMinHeights(_6);for(var i=0;i<_2.length;i++){_4=Math.max(this.getHeaderButtonDefaultHeight(_2[i]),this.getHeaderButtonMinHeight(_2[i]));if(this.spanMap[_2[i].name]){var _8=this.spanMap[_2[i].name];while(_8){_4+=Math.max(this.getHeaderButtonDefaultHeight(_8),this.getHeaderButtonMinHeight(_8));_8=_8.parentSpan}}
_1=Math.max(_1,_4)}}
return Math.max(_1,this.headerHeight)},isc.A.getAutoFitValueWidths=function isc_ListGrid_getAutoFitValueWidths(_1,_2){if(this.data==null)return;if(isc.isA.ResultSet(this.data)){var _3=this.body.getDrawArea();if(!this.data.rangeIsLoaded(_3[0],_3[1])){if(_1==null){this.updateFieldWidthsForAutoFitValue("Delayed resize pending data load")}
return}}
var _4=(_1==null);if(_1==null){_1=[];for(var i=0;i<this.fields.length;i++){var _6=this.fields[i];if(this.shouldAutoFitField(_6)){if(!_2||this.getAutoFitWidthApproach(_6)!="title"){_1.add(_6);_4=false}}}}
if(_4)return[];var _7=[],_8=false,_9=[],_10=[],_11=[],_12=[];for(var i=0;i<this.fields.length;i++){if(_1.contains(this.fields[i])){var _6=this.fields[i];var _13=this.getDefaultFieldWidth(this.fields[i],true);if(_13==null){_8=true;if(_6.frozen){_9.add(this.getLocalFieldNum(i));_10.add(i)}else{_11.add(this.getLocalFieldNum(i));_12.add(i)}}else{_7[i]=_13}}}
if(_8){if(_9.length>0){var _14=this.$116i(true,_9);if(_14!=null){for(var i=0;i<_14.length;i++){_7[_10[i]]=_14[i]}}}
if(_11.length>0){var _14=this.$116i(false,_11);if(_14!=null){for(var i=0;i<_14.length;i++){_7[_12[i]]=_14[i]}}}}
return _7},isc.A.$116i=function isc_ListGrid__getBodyColumnAutoSize(_1,_2){var _3=_1?this.frozenBody:this.body;if(_3==null)return null;var _4=_3.getColumnAutoSize(_2);if(this.includeGridSummaryInAutoFitWidth&&this.showGridSummary&&this.summaryRow!=null)
{var _5=(_1?this.summaryRow.frozenBody:this.summaryRow.body);if(_5!=null){var _6=_5.getColumnAutoSize(_2);if(_6!=null){if(_4==null)_4=[];for(var i=0;i<_6.length;i++){if(_4[i]==null||_6[i]>_4[i])_4[i]=_6[i]}}}}
if(this.allowMismatchedHeaderBodyBorder&&_4!=null){var _3=_1?this.frozenBody:this.body,_8=_2.indexOf(0),_9=_2.indexOf((_1?this.frozenFields.length:this.fields.length)-1);if(_8!=-1){_4[_8]=_4[_8]+_3.getLeftBorderSize()+_3.getLeftMargin()}
if(_9!=-1){_4[_9]=_4[_9]+_3.getRightBorderSize()+_3.getRightMargin()}}
return _4},isc.A.getDefaultFieldWidth=function isc_ListGrid_getDefaultFieldWidth(_1,_2){if(_1.type=="icon"&&(_1.iconWidth!=null||_1.iconSize!=null)){return(_1.iconWidth||_1.iconSize)+2*this.cellPadding+2*this.iconPadding}else if(this.showValueIconOnly(_1)){return this.getValueIconWidth(_1)+(2*this.cellPadding)+this.getValueIconRightPadding(_1)+this.getValueIconLeftPadding(_1)}
if(_2)return null;var _3=this.getFieldNum(_1),_4=this.getLocalFieldNum(_3);var _5=this.$116i(_1.frozen,[_4]),_6=_5?_5[0]:null;if(_6==null)_6=_1.width;return _6},isc.A.getAutoFitWidthApproach=function isc_ListGrid_getAutoFitWidthApproach(_1){if(_1.autoFitWidthApproach!=null)return _1.autoFitWidthApproach;return this.autoFitWidthApproach},isc.A.draw=function isc_ListGrid_draw(_1,_2,_3,_4){if(isc.$cv)arguments.$cw=this;if(!this.readyToDraw())return this;this.prepareForDraw();this.invokeSuper(isc.ListGrid,"draw",_1,_2,_3,_4);this.body.getColumnSizes();for(var i=0;i<this.bodies.length;i++){var _6=this.bodies[i];if(_6.$29a)this.markForRedraw()}
var _7=this.$60z();if(this.header&&_7!=null&&this.selectHeaderOnSort){var _8=this.getFieldHeader(_7),_9=this.getFieldHeaderButton(_7);_8.selectButton(_9);if(isc.Browser.isTouch&&this.shouldShowHeaderMenuButton(_9,true)){this.$129n(_9)}}
this.bodyScrolled(this.body.getScrollLeft(),this.body.getScrollTop());if(this.sorter)this.updateSorter();if(this.body.$29a||(this.frozenBody&&this.frozenBody.$29a))
{this.updateFieldWidthsForAutoFitValue("Initial draw with embeddedComponents")}
return this},isc.A.$686=function isc_ListGrid__alwaysShowEditors(_1,_2){if(!_2&&this.getTotalRows()==0)return false;if(this.alwaysShowEditors)return true;var _3=_1?[_1]:this.fields;if(_3){for(var i=0;i<_3.length;i++){if(_3[i].alwaysShowEditors){return true}}}
return false},isc.A.prepareForDraw=function isc_ListGrid_prepareForDraw(){if(this.completeFields==null)this.setFields(this.fields);if(this.getEditRow()==null){var _1=this.$686();if(_1)this.startEditing(null,null,true,null,true)}
if(this.groupByField){var _2=this.getGroupByFields();this.groupByField=null;this.groupBy(_2)}
this.createChildren()},isc.A.getGroupByFields=function isc_ListGrid_getGroupByFields(){var _1=this.groupByField;if(_1!=null&&!isc.isAn.Array(_1)){_1=[_1]}
return _1},isc.A.destroy=function isc_ListGrid_destroy(_1){if(this._dragLine){this._dragLine.destroy();this._dragLine=null}
if(this.$314)this.$314.destroy();if(this.spanContextMenu)this.spanContextMenu.destroy();if(this.cellContextMenu)this.cellContextMenu.destroy();if(this.$286){this.$286.destroy();delete this.$286;delete this.$30a}
if(this.data){if(this.data.$31k&&isc.isA.Function(this.data.destroy)){this.data.destroy()}else{this.$31j(this.data);delete this.data}}
if(this.originalData){if(this.originalData.$31k&&isc.isA.Function(this.originalData.destroy)){this.originalData.destroy()}else{this.$31j(this.originalData);delete this.originalData}}
if(this.selection){this.destroySelectionModel()}
if(this.selectionCanvas)this.selectionCanvas.destroy();if(this.selectionUnderCanvas)this.selectionUnderCanvas.destroy();if(this.currentRollOverCanvas)this.currentRollOverCanvas.destroy();if(this.currentRollUnderCanvas)this.currentRollUnderCanvas.destroy();this.$67a();var _2=this.getRecordComponentPool();if(_2){for(var i=0;i<_2.length;i++){var _4=_2[i];if(_4&&_4.destroy&&!_4.destroyed){if(!_4.dontAutoDestroy)_4.destroy();else _4.deparent()}}}
if(this.$89r!=null){for(var _5 in this.$89r){var _4=this.$89r[_5];if(!_4||_4.destroyed||_4.destroying||_4.$65i)
{continue}
if(!_4.dontAutoDestroy)_4.destroy();else _4.deparent()}}
this.Super("destroy",arguments)},isc.A.redrawHeader=function isc_ListGrid_redrawHeader(){if(this.header)this.header.markForRedraw()},isc.A.getBaseStyle=function isc_ListGrid_getBaseStyle(_1,_2,_3){if(this.canEdit==true&&!this.isPrinting){if(this.editFailedBaseStyle&&this.cellHasErrors(_2,_3))
return this.editFailedBaseStyle;if(this.editPendingBaseStyle&&this.cellHasChanges(_2,_3,false))
return this.editPendingBaseStyle}
if(this.originBaseStyle&&this.selection.$94h(_2,_3)){return this.originBaseStyle}
if(_1&&this.recordBaseStyleProperty&&_1[this.recordBaseStyleProperty])
return _1[this.recordBaseStyleProperty];var _4=this.getField(_3);if(_4&&_4.baseStyle)return _4.baseStyle;if(_4&&_4.type=="summary"&&this.recordSummaryBaseStyle)
return this.recordSummaryBaseStyle;if(_4&&_4.frozen&&!this.$54d&&this.frozenBaseStyle){return this.frozenBaseStyle}
if(this.isPrinting&&(this.printBaseStyle!=null))return this.printBaseStyle;var _5=this.baseStyle;if(_5==null){if(this.cellHeight!=this.normalCellHeight||this.fastCellUpdates||this.allowRowSpanning||!this.shouldFixRowHeight(_1,_2)||(_1!=null&&this.$916(_1)))
{_5=this.tallBaseStyle}else{_5=this.normalBaseStyle}}
return _5},isc.A.getCellCSSText=function isc_ListGrid_getCellCSSText(_1,_2,_3){var _4=this.getField(_3),_5;if(this.fieldSourceGrid==null&&_4!=null&&this.showValueIconOnly(_4)){_5="line-height:0px;"}
if(_1){var _6=_1[this.recordCSSTextProperty];if(_6!=null){return _5!=null?_5+_6:_6}}
var _7=this.removedCSSText;if(this.recordMarkedAsRemoved(_2)&&_7){_5=_5!=null?_5+_7:_7}else{if(this.isEditable()){var _8;if(this.editFailedBaseStyle==null&&(_8=this.editFailedCSSText)&&this.cellHasErrors(_2,_3))
{_5=_5!=null?_5+_8:_8}else if(this.editPendingBaseStyle==null&&(_8=this.editPendingCSSText)&&this.cellHasChanges(_2,_3,false))
{_5=_5!=null?_5+_8:_8}}}
_5=this.getRecordHiliteCSSText(_1,_5,this.getField(_3),true);return _5},isc.A.getRawCellValue=function isc_ListGrid_getRawCellValue(_1,_2,_3,_4){return this.$141x(this.emptyCellValue,this.groupSummaryRecordProperty,this.gridSummaryRecordProperty,null,null,this.data,this.applyFormulaAfterSummary,null,null,null,null,_1,_2,_3,_4)},isc.A.$141x=function isc_ListGrid__getRawCellValue(_1,_2,_3,_4,_5,_6,_7,_8,_9,_10,_11,_12,_13,_14,_15){if(this.getRawCellValue!=isc.ListGrid.getInstanceProperty("getRawCellValue")){return this.getRawCellValue(_12,_13,_14,_15)}
var _16,_17,_18;if(_15){_17=_14
_16=this.completeFields?isc.Class.getArrayItem(_17,this.completeFields,this.fieldIdProperty):this.getField(_17)}else{_16=this.fields[_14];_17=_16?_16[this.fieldIdProperty]:_17}
if(_8==null){_8=(_16&&_16.userFormula!=null)}
if(_8&&_9==null){_9=_16.userFormula}
if(_10==null){_10=(_16&&_16.userSummary!=null)}
if(_10&&_11==null){_11=_16.userSummary}
_18=_16?this.getTrimmedFieldDataPath(_16):null;if(_17==null&&_18==null)return _1;var _19,_20,_21;if(this.rowEditNotComplete(_13)){_19=this.$30y(_13,_14)}
if(_19!==_21){return _19}else if(_12==null){return _1}else if(this.$141y(_2,_3,_16,_12)&&!this.shouldApplyRecordSummaryToRecord(_16))
{_20=this.$141z(_4,_5,_13,_16)}else{if(_6.getFieldValue&&_16){_20=_6.getFieldValue(_12,_18,_16,this)}else if(_12.ownerDocument&&_16){_20=isc.xml.getFieldValue(_12,_17,_16)}else{_20=isc.Canvas.$70o(_18,_16,_12,this,true,"group");if(_20==null)_20=_12[_17]}}
if(_16&&_16.getRawCellValue){isc.Func.replaceWithMethod(_16,"getRawCellValue","viewer,record,recordNum,field,fieldNum,value");_20=_16.getRawCellValue(this,_12,_13,_16,_14,_20)}
if(_16){if(this.$142d(_7,_8,_16)&&this.$1410(_2,_7,_16,_12))
{var _22=_16.userFormula;_16.userFormula=_9;_20=this.getFormulaFieldValue(_16,_12);_16.userFormula=_22}
if(_10){var _23=_16.userSummary;_16.userSummary=_11;this.getSummaryFunction(_16);_16.userSummary=_23}}
return _20},isc.A.shouldShowRecordSummary=function isc_ListGrid_shouldShowRecordSummary(_1,_2){return this.$141y(this.groupSummaryRecordProperty,this.gridSummaryRecordProperty,_1,_2)},isc.A.$141y=function isc_ListGrid__shouldShowRecordSummary(_1,_2,_3,_4){if(_3&&_3.type==this.$71t){if(_4[_1]){return(_3.summaryFunction==null&&_3.getGroupSummary==null)}else if(_4[_2]){return(_3.summaryFunction==null&&_3.getGridSummary==null)}
return true}
return false},isc.A.shouldShowUserFormula=function isc_ListGrid_shouldShowUserFormula(_1,_2){return this.$1410(this.groupSummaryRecordProperty,this.applyFormulaAfterSummary,_1,_2)},isc.A.$1410=function isc_ListGrid__shouldShowUserFormula(_1,_2,_3,_4){var _5=this.$94m||(_4&&_4[_1]);if(_5&&!this.$1411(_2,_3)){return false}
return true},isc.A.$117u=function isc_ListGrid__applyFieldFormulaAfterSummary(_1){return this.$1411(this.applyFormulaAfterSummary,_1)},isc.A.$1411=function isc_ListGrid___applyFieldFormulaAfterSummary(_1,_2){var _3=_2&&_2.applyAfterSummary;if(_3==null)_3=_1;if(_3==null)_3=false;return _3},isc.A.$116w=function isc_ListGrid__getCheckboxValueIconHTML(_1,_2,_3,_4){var _5,_6,_7;if(!_2){_5=this.$5w}else{if(_1){_5=this.checkboxFieldTrueImage||this.booleanTrueImage;_6=this.booleanBaseStyle==null?null:this.booleanBaseStyle+"True"}else{_5=this.checkboxFieldFalseImage||this.booleanFalseImage;if(_5==null)_5=this.$5w;_6=this.booleanBaseStyle==null?null:this.booleanBaseStyle+"False"}}
if(_3){if(_5!=this.$5w)_5=isc.Img.urlForState(_5,false,false,isc.StatefulCanvas.STATE_DISABLED);if(_6!=null)_6+=isc.StatefulCanvas.STATE_DISABLED}
if(_5==this.$5w)_5=isc.Canvas.$wz;if(_6!=null){_7="class='"+_6+this.$ob}
return this.getValueIconHTML(_5,_4,_7)},isc.A.getCellValue=function isc_ListGrid_getCellValue(_1,_2,_3,_4){if(_4==null)_4=this.getFieldBody(_3);if(_1==null){if(this.showNewRecordRow&&this.$299(_2)){return this.getNewRecordRowCellValue()}
_1=this.$300(_2,_3)}else{if(_1[this.isSeparatorProperty])return this.$302;if(_1.$52e&&_3!=null){var _5=this.fields[_3],_6=this.getGroupTitleField(),_7;if(_6==null){_7=_5.$84g}else{_7=_5.name==_6}
if(!_4.$941&&(this.singleCellGroupHeaders()||_7))
{return this.getGroupNodeHTML(_1,_4)}else if(!this.showGroupSummaryInHeader||this.isCheckboxField(_5)){return isc.nbsp}}}
var _8=this.fields[_3],_9=null;if(_8==null)return isc.emptyString;if(this.$94m&&_8.summaryValue){return _8.summaryValue}
if(this.isCheckboxField(_8)){return this.$116w(!!this.selection.isSelected(_1),this.body.canSelectRecord(_1),_1&&_1[this.recordEnabledProperty]==false,_8)}
var _10,_11,_12=this.showValueIconOnly(_8),_13;if(_1!=null){if(_1[this.singleCellValueProperty]!=null){return _1[this.singleCellValueProperty]}
if(Array.isLoading(_1)){if(!isc.Browser.isSafari||_3==0){return this.loadingMessage}
return isc.nbsp}
var _14=this.$285,_15=_14;if(_15!=null&&this.allowRowSpanning){_15=this.getCellStartRow(_15,_3)}
_13=(this.$30a&&_15==_2&&(!this.editByCell||this.$30u==_3)&&this.canEditCell(_14,_3));if(_13){var _16=_1;if(_14!=_2){_16=this.getCellRecord(_14,_3)}
if(_4.$941){_9=this.getInactiveEditorCellValue(_16,_14,_3)}else{_9=this.getEditItemCellValue(_16,_14,_3)}}else if(this.$68z(_3)&&this.canEditCell(_2,_3)){_9=this.getInactiveEditorCellValue(_1,_2,_3);_13=true}else{var _8=this.fields[_3],_17,_18;if(_8.displayField!=null){_18=!_8.valueMap&&!_8.getCellValue&&this.$425(_8);if(_18){var _19=_8.displayField;_17=this.getRawCellValue(_1,_2,_19,true)}}
_9=this.getRawCellValue(_1,_2,_3);if(_8.getCellValue){isc.Func.replaceWithMethod(_8,"getCellValue","viewer,record,recordNum,field,fieldNum,value");_9=_8.getCellValue(this,_1,_2,_8,_3,_9)}
_10=this.getValueIcon(_8,_9,_1,_2);_11=this.getValueIconStyle(_8,_9,_1,_2);if(!_12){var _20=_8.valueMap;if(_20){_9=this.resolveValueMap(_9,_8.valueMap)}}
if(_18)_9=_17}}
if(!_13){if(_1&&((_1[this.groupSummaryRecordProperty]&&!this.shouldShowGroupSummary(_8))||(this.$94m&&((_1[this.gridSummaryRecordProperty]&&!this.shouldShowGridSummary(_8))||(_8.showGridSummary==false)))))
{_9=this.emptyCellValue}else{var _21=null;if(_10!=null){var _22=_11==null?null:"class='"+_11+this.$ob;_21=this.getValueIconHTML(_10,_8,_22)}
if(_12){if(!_21||isc.isAn.emptyString(_21))_21=this.emptyCellValue;_9=_21}else{var _23=this.getFieldHilites(_1,_8);var _24=_8.hiliteHTMLAfterFormat;if(_24==null)_24=this.hiliteHTMLAfterFormat;if(_24==null)_24=true;if(_24){_9=this.$315(_9,_1,_8,_2,_3);if(_23!=null)_9=this.applyHiliteHTML(_23,_9)}else{if(_23!=null)_9=this.applyHiliteHTML(_23,_9);_9=this.$315(_9,_1,_8,_2,_3)}
if(_21){if(_8.valueIconOrientation!=isc.Canvas.RIGHT)
_9=_21+_9;else
_9=_9+_21}}
if(this.isEditable()&&this.showErrorIcons&&this.cellHasErrors(_2,_3)){_9=this.getErrorIconHTML(_2,_3)+_9}
var _8=this.fields[_3];var _23=this.getFieldHilites(_1,_8);if(_23!=null){if(!_1||(_1&&!_1.isGroupSummary)||(this.showHilitesInGroupSummary&&_8.showHilitesInGroupSummary!=false)){_9=this.applyHiliteIcon(_23,_8,_9)}}}}
var _25=this.isGrouped?this.getGroupTitleField():null;if(_25&&this.fields[_3].name==_25){var _26=isc.Canvas.spacerHTML(this.groupIndentSize+this.groupLeadingIndent,1);_9=_26+_9}
return _9},isc.A.resolveValueMap=function isc_ListGrid_resolveValueMap(_1,_2){if(isc.isA.String(_2))_2=this.getGlobalReference(_2);if(!isc.isAn.Array(_2)){if(isc.isAn.Array(_1)){var _3=[];for(var i=0;i<_1.length;i++){var _5=isc.getValueForKey(_1[i],_2,_1[i]);_3[_3.length]=_5}
_1=_3}else{_1=isc.getValueForKey(_1,_2)}}
return _1},isc.A.getTitleFieldValue=function isc_ListGrid_getTitleFieldValue(_1){var _2=this.getDataSource().getTitleField(),_3=this.getCellValue(_1,this.getRecordIndex(_1),this.getFieldNum(_2),this.body);if(!_3||_3==""){_3=this.getRawCellValue(_1,this.getRecordIndex(_1),_2,true)}
return _3},isc.A.getRawValue=function isc_ListGrid_getRawValue(_1,_2){var _3=this.getRecordIndex(_1);return this.getRawCellValue(_1,_3,_2,true)},isc.A.getFormattedValue=function isc_ListGrid_getFormattedValue(_1,_2,_3){var _4=this.getRecordIndex(_1),_5=this.getSpecifiedField(_2),_6=this.getFieldNum(_2);if(this.fieldIsVisible(_5)&&_3==null){return this.getCellValue(_1,_4,_6,this.body)}
if(_3==null)_3=this.getRawValue(_1,_2);var _7=_5?_5.valueMap:null;if(_7){if(isc.isA.String(_7))_7=this.getGlobalReference(_7);if(!isc.isAn.Array(_7)){if(isc.isAn.Array(_3)){var _8=[];for(var i=0;i<_3.length;i++){var _10=isc.getValueForKey(_3[i],_7,_3[i]);_8[_8.length]=_10}
_3=_8}else{_3=isc.getValueForKey(_3,_7)}}}
var _11=this.$315(_3,_1,_5,_4,_6);return _11},isc.A.getSpecifiedFieldWidth=function isc_ListGrid_getSpecifiedFieldWidth(_1){var _2=this.getField(_1);if(_2==null){if(isc.isAn.Object(_1))_1=_1[this.fieldIdProperty];_2=this.getSpecifiedField(_1)}
if(_2==null)return;var _1=_2[this.fieldIdProperty],_3=this.header?this.header.members:null,_4=this.frozenFields&&this.frozenHeader?this.frozenHeader.members:null,_5;if(_3||_4){var _6;if(_3)_6=_3.find(this.fieldIdProperty,_1);if(!_6&&_4){_6=_4.find(this.fieldIdProperty,_1)}
if(_6){if(_6.$pn&&isc.isA.Number(_6.$pn)){_5=_6.$pn}}else{if(_2.width!=null&&isc.isA.Number(_2.width)){_5=_2.width}}}
return _5},isc.A.getValueIconHTML=function isc_ListGrid_getValueIconHTML(_1,_2,_3){var _4=_2.imageURLPrefix||_2.baseURL||_2.imgDir,_5=_2.imageURLSuffix,_6=this.getValueIconWidth(_2),_7=this.getValueIconHeight(_2),_8=this.getValueIconLeftPadding(_2),_9=this.getValueIconRightPadding(_2);if(_5!=null)_1+=_5;var _10=isc.Canvas.$xq(_1,_4,_6,_7,_8,_9,null,this,_3);return _10},isc.A.getCellAlign=function isc_ListGrid_getCellAlign(_1,_2,_3){var _4=this.isRTL();if(_1&&_1[this.singleCellValueProperty]!=null&&(!this.showSingleCellCheckboxField(_1)||!this.isCheckboxField(this.getField(_3))))
{return _4?isc.Canvas.RIGHT:isc.Canvas.LEFT}
return this.getFieldCellAlign(_3,_4)},isc.A.getFieldCellAlign=function isc_ListGrid_getFieldCellAlign(_1,_2){var _3=this.getField(_1);if(!_3)return _2?isc.Canvas.RIGHT:isc.Canvas.LEFT;if(_3.cellAlign==null&&_3.userFormula){return _2?isc.Canvas.LEFT:isc.Canvas.RIGHT}
var _4=_3.cellAlign||_3.align;if(_2&&this.reverseRTLAlign){if(_4==isc.Canvas.RIGHT)_4=isc.Canvas.LEFT;else if(_4==isc.Canvas.LEFT)_4=isc.Canvas.RIGHT}
return _4},isc.A.showSingleCellCheckboxField=function isc_ListGrid_showSingleCellCheckboxField(_1){return(this.getCurrentCheckboxField()!=null)&&_1&&!_1.$52e&&!_1[this.isSeparatorProperty]},isc.A.$425=function isc_ListGrid__useDisplayFieldValue(_1){if(!_1||_1.valueMap||_1.displayField==null||(_1.displayField==_1.name))
{return false}
if(_1.optionDataSource==null){if(_1.displayValueFromRecord==false)return false;return true}
var _2=_1.autoFetchDisplayMap;if(_2==null)_2=this.autoFetchDisplayMap;if(_2)return false;if(_1.displayValueFromRecord!=null)return _1.displayValueFromRecord;return(_1.valueField==null||_1.valueField==_1.name)&&(isc.DS.get(_1.optionDataSource)==this.getDataSource())},isc.A.getValueIcon=function isc_ListGrid_getValueIcon(_1,_2,_3,_4){if(!_1.valueIcons||_1.suppressValueIcon){if(this.$31s(_1)){var _5=(_2?this.booleanTrueImage:this.booleanFalseImage);_4=(_4!=null)?_4:this.findRowNum(_3);var _6=_1.masterIndex;if(!this.canEditCell(_4,_6)&&_1.canToggle&&_5!=this.$5w){_5=isc.Img.urlForState(_5,false,false,isc.StatefulCanvas.STATE_DISABLED)}
if(_5==null||_5==this.$5w)_5=isc.Canvas.getImgURL(isc.Canvas.$wz);return _5}
return null}
var _7=_1.valueIcons[_2];return _7},isc.A.getValueIconStyle=function isc_ListGrid_getValueIconStyle(_1,_2,_3,_4){if(this.booleanBaseStyle&&_1&&(!_1.valueIcons||_1.suppressValueIcon)){if(this.$31s(_1)){var _5=this.booleanBaseStyle+(_2?"True":"False");_4=(_4!=null)?_4:this.findRowNum(_3);var _6=_1.masterIndex;if(!this.canEditCell(_4,_6)&&_1.canToggle){_5+=isc.StatefulCanvas.STATE_DISABLED}
return _5}}
return null},isc.A.getValueIconLeftPadding=function isc_ListGrid_getValueIconLeftPadding(_1){return(_1&&_1.valueIconLeftPadding!=null?_1.valueIconLeftPadding:this.valueIconLeftPadding||0)},isc.A.getValueIconRightPadding=function isc_ListGrid_getValueIconRightPadding(_1){return(_1&&_1.valueIconRightPadding!=null?_1.valueIconRightPadding:this.valueIconRightPadding||0)},isc.A.showValueIconOnly=function isc_ListGrid_showValueIconOnly(_1){if(_1.showValueIconOnly!=null)return _1.showValueIconOnly;if(_1.valueIcons!=null&&_1.valueMap!=null)return true;return this.$31s(_1)},isc.A.getValueIconWidth=function isc_ListGrid_getValueIconWidth(_1){if(this.isCheckboxField(_1))return this.$65a();if(this.$31s(_1))return this.booleanImageWidth;return(_1.valueIconWidth!=null?_1.valueIconWidth:(_1.valueIconSize!=null?_1.valueIconSize:(this.valueIconWidth!=null?this.valueIconWidth:this.valueIconSize)))},isc.A.getValueIconHeight=function isc_ListGrid_getValueIconHeight(_1){if(this.isCheckboxField(_1))return this.$65b();if(this.isExpansionField(_1))return this.$72z();if(this.$31s(_1))return this.booleanImageHeight;return(_1.valueIconHeight!=null?_1.valueIconHeight:(_1.valueIconSize!=null?_1.valueIconSize:(this.valueIconHeight!=null?this.valueIconHeight:this.valueIconSize)))},isc.A.$299=function isc_ListGrid__isNewRecordRow(_1){return this.showNewRecordRow&&(_1==this.getTotalRows()-1)},isc.A.getNewRecordRowCellValue=function isc_ListGrid_getNewRecordRowCellValue(){return'<div align="center">'+this.newRecordRowMessage+'</div>'},isc.A.getErrorIconHTML=function isc_ListGrid_getErrorIconHTML(_1,_2){var _3=this.getCellErrors(_1,_2);if(_3==null)return isc.$ad;var _4=this.imgHTML(this.errorIconSrc,this.errorIconWidth,this.errorIconHeight,null," isErrorIcon='true'");if(isc.Browser.isIE&&this.$30a&&this.getEditRow()==_1&&(!this.editByCell||this.getEditCol()==_2)){_4+=" "}else{_4+=isc.Canvas.spacerHTML(this.cellPadding,"auto")}
return _4},isc.A.$79z=function isc_ListGrid__handleErrorIconOver(_1,_2){this.$79y=[_1,_2];isc.Hover.setAction(this,this.$79v)},isc.A.$79v=function isc_ListGrid__handleErrorIconHover(){if(this.$79y==null)return;var _1=this.$79y[0],_2=this.$79y[1];var _3=this.getCellErrors(_1,_2);if(_3==null)return;var _4=isc.FormItem.getErrorPromptString(_3);isc.Hover.show(_4,this.$wc())},isc.A.$790=function isc_ListGrid__handleErrorIconOut(){delete this.$79y;if(isc.Hover.isActive){isc.Hover.clear()}},isc.A.$315=function isc_ListGrid__formatCellValue(_1,_2,_3,_4,_5){if(_3&&_3.userSummary){_1=this.getSummaryFieldValue(_3,_2)}else{var _6=false;if(_2&&_2[this.groupSummaryRecordProperty]){if(_3&&_3.formatGroupSummary){if(!isc.isA.Function(_3.formatGroupSummary)){_3.formatGroupSummary=isc.Func.expressionToFunction("value",_3.formatGroupSummary)}
if(isc.isA.Function(_3.formatGroupSummary)){_1=_3.formatGroupSummary(_1);_6=true}}}
if(_2&&this.$94m){if(_3&&_3.formatGridSummary){if(!isc.isA.Function(_3.formatGridSummary)){_3.formatGridSummary=isc.Func.expressionToFunction("value",_3.formatGridSummary)}
if(isc.isA.Function(_3.formatGridSummary)){_1=_3.formatGridSummary(_1);_6=true}}}
if(!_6){if(_3&&_3.formatCellValue!=null){_1=_3.formatCellValue(_1,_2,_4,_5,this)}else if(_3&&_3.cellValueTemplate){_1=_3.cellValueTemplate.evalDynamicString(this,{value:_1,record:_2,field:_3})}else if(this.formatCellValue!=null){_1=this.formatCellValue(_1,_2,_4,_5)}else if(_3&&_3.format&&(isc.isA.Number(_1)||isc.isA.Date(_1))){_1=isc.isA.Number(_1)?isc.NumberUtil.format(_1,_3.format):isc.DateUtil.format(_1,_3.format)}else if(_3&&!_3.$1100){_1=this.applyCellTypeFormatters(_1,_2,_3,_4,_5)}}}
_1=this.formatValueAsString(_1,_2,_3,_4,_5);if(this.formatDisplayValue){_1=this.formatDisplayValue(_1,_2,_4,_5)}
if(_3&&_3.escapeHTML){if(isc.isA.String(_1)&&_1!=this.$54t){_1=_1.asHTML()}}
return _1},isc.A.getDefaultFormattedValue=function isc_ListGrid_getDefaultFormattedValue(_1,_2,_3){var _4=this.getField(_3);var _5=this.applyCellTypeFormatters(this.getRawCellValue(_1,_2,_3),_1,_4,_2,_3);return this.formatValueAsString(_5,_1,_4,_2,_3)},isc.A.getDefaultFormattedFieldValue=function isc_ListGrid_getDefaultFormattedFieldValue(_1,_2,_3,_4){var _5=isc.DataSource.getFieldValue(_2,_1);if(_3==null)_3=-1;if(_4==null)_4=-1;var _6;if(_2&&_2.formatCellValue!=null){_6=_2.formatCellValue(_5,_1,_3,_4,this)}else{_6=this.applyCellTypeFormatters(_5,_1,_2,_3,_4)}
return this.formatValueAsString(_6,_1,_2,_3,_4)},isc.A.applyCellTypeFormatters=function isc_ListGrid_applyCellTypeFormatters(_1,_2,_3,_4,_5,_6){if(!_6&&_3&&_3.multiple&&isc.isA.Array(_1)){var _7=[];for(var i=0;i<_1.length;i++){_7[i]=this.applyCellTypeFormatters(_1[i],_2,_3,_4,_5,true)}
return _7.join(_3.multipleValueSeparator||", ")}
if(_3&&_3.$63!=null){_1=_3.$62.shortDisplayFormatter(_1,_3,this,_2,_4,_5)}else if(_3&&_3.$31r!=null){_1=_3.$31r(_1,_3,this,_2,_4,_5)}
if(_1!=null&&!isc.isA.emptyString(_1)&&_2&&_3&&_2[this.recordApplyPluralTitleProperty])
{var _9=_2[this.recordApplyPluralTitleProperty];if(_9.contains(_3.name)){var _10=_3.pluralTitle;if(_10==null)_10=_3.title;if(_10!=null)_1+=" "+_10}}
if(_1==null&&_2&&_3&&this.invalidSummaryValue!=null&&((_2[this.groupSummaryRecordProperty]&&this.shouldShowGroupSummary(_3))||(_2[this.gridSummaryRecordProperty]&&this.shouldShowGridSummary(_3))))
{_1=this.invalidSummaryValue}
return _1});isc.evalBoundary;isc.B.push(isc.A.formatValueAsString=function isc_ListGrid_formatValueAsString(_1,_2,_3,_4,_5){if(_1==null||isc.is.emptyString(_1)){if(this.$122r(_3)!=this.emptyCellValue){_1=this.$122r(_3)}else if(_3.type=="summary"){_1=this.invalidSummaryValue}else{_1=this.emptyCellValue}}else if(this.$54y[_1]==true){_1=this.$54t}else if(!isc.isA.String(_1)){if(isc.isA.Date(_1)){if(this.$851(_3)){var _6=this.$30o(_3);var _7=isc.SimpleType.inheritsFrom(_3.type,"time");_1=isc.Time.toTime(_1,_6,_7)}else{var _8=_3&&isc.SimpleType.inheritsFrom(_3.type,"datetime"),_9=!_8&&_3&&isc.SimpleType.inheritsFrom(_3.type,"date"),_6=this.$45i(_3);if(_8)_1=_1.toShortDateTime(_6,true);else _1=_1.toShortDate(_6,!_9)}}else{_1=isc.iscToLocaleString(_1)}}
return _1},isc.A.getEditItemCellValue=function isc_ListGrid_getEditItemCellValue(_1,_2,_3){var _4=this.getEditorName(_2,_3);if(!this.$286||!this.$286.getItem(_4)){return"&nbsp;"}
var _5=this.getCellErrors(_2,_3);if(_5){this.$286.setFieldErrors(_4,_5)}
var _6=this.$286.getItem(_4),_7=_6.getStandaloneItemHTML(_6.getValue(),false,true);if(_5){this.$286.setFieldErrors(_4,null)}
var _8=_6.containerWidget;if(!_8.$316)_8.$316=[];if(!_8.$316.contains(_6)){_8.$316.add(_6)}
return _7},isc.A.$68z=function isc_ListGrid__showInactiveEditor(_1){return this.$686(_1)},isc.A.getInactiveEditorCellValue=function isc_ListGrid_getInactiveEditorCellValue(_1,_2,_3){var _4=this.getEditorName(_2,_3);var _5=this.$286.getItem(_4);if(_5==null){return this.getFormattedValue(_1,_2,_3)}
var _6=isc.DynamicForm.getEditorType(_5,this.$286),_7=this.getRawCellValue(_1,_2,_3),_8;if(this.shouldShowEditorPlaceholder(this.getField(_3),_6)){_8=this.getEditorPlaceholderHTML(_6,_7,_1,_2,_3)}else{var _9={grid:this.getID(),record:_1,rowNum:_2,colNum:_3}
var _10=this.getCellErrors(_2,_3);if(_10){this.$286.setFieldErrors(_4,_10)}
_8=_5.getInactiveEditorHTML(_7,false,true,_9);if(_10){this.$286.setFieldErrors(_4,null)}
if(!this.$69m)this.$69m={};var _11="_"+_2+"_"+_3;if(this.$69m[_11]){this.logWarn("creating new inactiveEditor context for a cell without having cleared the previous one."+this.getStackTrace(),"inactiveEditorHTML")}
this.$69m[_11]=_9}
return _8},isc.A.shouldShowEditorPlaceholder=function isc_ListGrid_shouldShowEditorPlaceholder(_1,_2){if(_1.showEditorPlaceholder!=null)return _1.showEditorPlaceholder;return!this.$687[_2]},isc.A.getEditorPlaceholderHTML=function isc_ListGrid_getEditorPlaceholderHTML(_1,_2,_3,_4,_5){return _2},isc.A.$30b=function isc_ListGrid__editItemsDrawingNotification(_1,_2,_3){var _4;if(_1)_4=[_1];else{_4=[];var _5=this.$286.getItems();for(var i=0;i<_5.length;i++){if(_5[i].containerWidget==_3)_4.add(_5[i])}}
var _7=_3.$316;for(var i=0;i<_4.length;i++){var _8=_4[i],_9=_8.isDrawn(),_10=_7?_7.contains(_8):false,_11=isc.CanvasItem&&isc.isA.CanvasItem(_8);if(_9){if(_10){_8.redrawn();if(_2)_8.moved()}else{_8.cleared()}}else if(_10){if(_11)_8.placeCanvas();_8.drawn()}}
if(this.$286){this.$286.destroyOrphanedItems("Grid edit-items removed")}
delete _3.$316},isc.A.$69l=function isc_ListGrid__clearingInactiveEditorHTML(_1,_2){if(this.$69m==null)return;if(!this.$286||!this.$686((_2!=null?this.getField(_2):null),true))return;if(_1!=null){var _3="_"+_1+"_"+_2,_4=this.$69m[_3];if(_4){_4.formItem.clearInactiveEditorContext(_4);delete this.$69m[_3]}}else{var _5=this.getEditForm(),_6=_5.getItems();for(var i=0;i<_6.length;i++){_6[i].clearAllInactiveEditorContexts()}
delete this.$69m}},isc.A.setRecordValues=function isc_ListGrid_setRecordValues(_1,_2){if(!this.shouldSaveLocally()){this.logWarn("setRecordValues() not supported for grids where saveLocally is false");return}
if(!this.data)return;var _3=this.data.indexOf(_1),_4=this.data.get(_3);var _5=isc.Canvas.$70o(this.dataPath,null,_2,this,true);if(!_5){_5=_2}
this.combineObjects(_4,_5);this.calculateRecordSummaries(_4,null,true,true);if(this.useCellRecords){_3=this.findRowNum(_4);var _6=this.findColNum(_4);this.refreshCell(_3,_6)}else{this.refreshRow(_3)}
this.resort();this.filterByEditor();if(this.valuesManager!=null){this.valuesManager.$71e(_3,null,_4,this)}},isc.A.combineObjects=function isc_ListGrid_combineObjects(_1,_2){return isc.combineObjects(_1,_2)},isc.A.setRawCellValue=function isc_ListGrid_setRawCellValue(_1,_2,_3,_4){var _5=this.fields[_3];if(!_1||!_5)return;if(_5.setRawCellValue){isc.Func.replaceWithMethod(_5,"setRawCellValue","viewer,record,recordNum,field,fieldNum,value");_5.setRawCellValue(this,_1,_2,_5,_3,_4)}else{isc.Canvas.$70n(null,_5,_4,_1,this,true)}
this.getOriginalData().dataChanged()},isc.A.getCellBooleanProperty=function isc_ListGrid_getCellBooleanProperty(_1,_2,_3,_4){var _5=false,_6=this[_1];if(_6==false||_6==this.$18r)return false;var _7=this.fields[_3][_1];if(_7==false||_7==this.$18r)return false;if(_4!=null){var _8=this.getRecord(_2,_3),_9=(_8!=null?_8[_4]:false);if(_9==false||_9==this.$18r)return false;if(_9==true||_9==this.$18q)return true}
return(_6==true)||(_7==true)||(_6==this.$18q)||(_7==this.$18q)},isc.A.setShowRecordComponents=function isc_ListGrid_setShowRecordComponents(_1){if(this.showRecordComponents==_1)return;if(_1){if(this.animateFolders){this.$805=true
this.animateFolders=false}}else{if(this.$805){this.animateFolders=true;delete this.$805}}
this.showRecordComponents=_1;this.$80i();if(_1){this.$74p=this.drawAllMaxCells;this.drawAllMaxCells=0;if(this.body!=null)this.body.drawAllMaxCells=0}else{if(this.$74p!=null){this.drawAllMaxCells=this.$74p;if(this.body!=null)this.body.drawAllMaxCells=this.$74p;delete this.$74p}}
this.invalidateRecordComponents();if(!_1&&(this.recordComponentPosition==this.$57l||(this.recordComponentPosition==null&&this.showRecordComponentsByCell)))
{this.updateFieldWidthsForAutoFitValue("showRecordComponents changed");this.$45m()}},isc.A.$80i=function isc_ListGrid__updateVirtualScrollingForRecordComponents(){if(!this.showRecordComponents){if(this.$80j){delete this.virtualScrolling;delete this.$80j}}else{if(this.virtualScrolling==null||this.$80j){if(this.frozenFields==null){this.virtualScrolling=true;this.$80j=true}else{if(this.recordComponentHeight==null){this.logWarn("This grid has frozen fields and is showing recordComponents. This may lead to unpredictable row heights which are not supported with frozen fields. Setting listGrid.recordComponentHeight will avoid this issue.","recordComponents")}
if(this.$80j){delete this.virtualScrolling;delete this.$80j}}}}
if(this.body&&this.virtualScrolling!=this.body.virtualScrolling){this.body.virtualScrolling=this.virtualScrolling;if(this.frozenBody){this.frozenBody.virtualScrolling=this.virtualScrolling}}},isc.A.getDrawArea=function isc_ListGrid_getDrawArea(){if(this.body){var _1=this.body.getDrawArea();if(this.frozenFields&&this.freezeStart()){_1[2]+=this.frozenFields.length;_1[3]+=this.frozenFields.length}
return _1}
return null},isc.A.$74l=function isc_ListGrid__drawAreaChanged(_1,_2,_3,_4,_5){if(this.frozenFields&&this.freezeStart()){_3+=this.frozenFields.length;_4+=this.frozenFields.length}
var _6=[_1,_2,_3,_4];if(_6.equals(this.getDrawArea()))return;this.drawAreaChanged(_1,_2,_3,_4)},isc.A.drawAreaChanged=function isc_ListGrid_drawAreaChanged(){},isc.A.updateExpansionComponents=function isc_ListGrid_updateExpansionComponents(){if(!this.$112v||this.$112v.length==0)return;this.$112u=true;for(var i=this.$112v.length-1;i>=0;i--){this.expandRecord(this.$112v[i])}
delete this.$112u;delete this.$112v},isc.A.updateRecordComponents=function isc_ListGrid_updateRecordComponents(){var _1=this.logIsDebugEnabled("recordComponents");if(this.$81r){if(_1){this.logDebug("updateRecordComponents called recursively - returning","recordComponents")}
return}
var _2=this.body,_3=this.frozenBody;if(_2==null)return;if(_2.$28c!=null){return}
if((!_2.isDrawn()||_2.$26a==null||(_2.$26a.length==0&&_2.fields.length>0))||(_3&&(!_3.isDrawn()||_3.$26a==null||(_3.$26a.length==0&&_3.fields.length>0))))
{return}
this.$81r=true;var _4=this.$81s||[],_5=this.$81t||{};if(_1){this.logDebug("updateRecordComponents - old record components before refreshing:"+this.echo(_4),"recordComponents")}
this.$81t={};this.$81s=[];if(this.showRecordComponents||this.showBackgroundComponents){var _6=this.body.getDrawArea(),_7=this.showRecordComponentsByCell,_8=this.body.getID(),_9=this.frozenBody?this.frozenBody.getID():null;if(_1){this.logDebug("updating to potentially show recordComponents for drawArea:"+_6,"recordComponents")}
for(var _10=_6[0];_10<=_6[1];_10++){var _11=this.getRecord(_10);if(_11==null||Array.isLoading(_11))continue;if(this.showRecordComponents){if(!_7){var _12=null;if(this.allowRowSpanning&&this.getRowSpan){var _13=this.getCellStartRow(_10,0)!=_10;if(_13)_12=false}
if(_12==null){_12=this.shouldShowRecordComponent(_11)}
var _14=null;if(_12){_14=this.$81u(_11,null,_8);if(_14!=null){if(_14.isNullMarker){_14=null}else{var _15=_14.getID();_5[_15]=null}}else{_14=this.$81v(_11,null,this.body,_10)}}
if(_14!=null){var _15=_14.getID();this.$81t[_15]=true;this.$81s[this.$81s.length]=_14}}else{if(this.frozenBody!=null){for(var _16=0;_16<this.frozenBody.fields.length;_16++){var _17=this.frozenBody.fields[_16],_18=_17.name;var _12=null;if(this.allowRowSpanning&&this.getRowSpan){var _13=this.getCellStartRow(_10,_17.masterIndex)!=_10;if(_13)_12=false}
if(_12==null){_12=this.shouldShowRecordComponent(_11,_17.masterIndex)}
var _14=null;if(_12){_14=this.$81u(_11,_18,_9);if(_14!=null){if(!_14.isNullMarker){var _15=_14.getID();_5[_15]=null}else{_14=null}}else{_14=this.$81v(_11,_18,this.frozenBody,_10,_16)}}
if(_14!=null){var _15=_14.getID();this.$81t[_15]=true;this.$81s[this.$81s.length]=_14}}}
for(var _19=_6[2];_19<=_6[3];_19++){var _17=this.body.fields[_19],_18=_17.name;var _12=null;if(this.allowRowSpanning&&this.getRowSpan){var _13=this.getCellStartRow(_10,_17.masterIndex)!=_10;if(_13)_12=false}
if(_12==null){_12=this.shouldShowRecordComponent(_11,_17.masterIndex)}
var _14=null;if(_12){var _14=this.$81u(_11,_18,_8);if(_14!=null){if(!_14.isNullMarker){var _15=_14.getID();_5[_15]=null}else{_14=null}}else{_14=this.$81v(_11,_18,this.body,_10,_19)}}
if(_14!=null){var _15=_14.getID();this.$81t[_15]=true;this.$81s[this.$81s.length]=_14}}}}
if(this.showBackgroundComponents){if(_11&&_11.backgroundComponent){var _20=this.$916(_11)?this.$917(_11).find("isBackgroundComponent",true):null;if(!_20){if(isc.isA.Canvas(_11.backgroundComponent)){var _21=_11.backgroundComponent.addProperties(this.backgroundComponentProperties,{isBackgroundComponent:true})}else{var _22=isc.addProperties({isBackgroundComponent:true},this.backgroundComponentProperties,_11.backgroundComponent);var _21=this.createAutoChild("backgroundComponent",_22)}
var _23=_2.getTableZIndex();_21.setZIndex(_23-49);_21.setWidth("100%");_21.setHeight("100%");_21.setOverflow("hidden");_21.removeOnHideField=true;this.addEmbeddedComponent(_11.backgroundComponent,_11,_10,null,"within")}}}}}
if(this.logIsInfoEnabled("recordComponents")){this.logInfo("updateRecordComponents - new recordComponents:"+this.echo(this.$81t)+", old record components (will be cleaned up if value is 'true'):"+this.echo(_5),"recordComponents")}
for(var i=0;i<_4.length;i++){var _15=_4[i].getID();if(_5[_15]!=true){continue}
if(_1){this.logDebug("cleaning up RecordComponent:"+_4[i],"recordComponents")}
this.$81w(_4[i]);_5[_15]=null}
delete this.$81r},isc.A.$81v=function isc_ListGrid__applyNewRecordComponent(_1,_2,_3,_4,_5){if(this.logIsDebugEnabled("recordComponents")){this.logDebug("getting record component for row/field:"+[_4,_2],"recordComponents")}
var _6=this.recordComponentPoolingMode=="recycle",_7,_8,_9=_2==null?null:this.getColNum(_2);if(_6){var _10=this.getFromRecordComponentPool(_1,_2);_7=_10?_10[0]:null;_8=_10?_10[1]:null}
if(!_7){if(this.createRecordComponent&&isc.isA.Function(this.createRecordComponent)){_7=this.createRecordComponent(_1,this.getColNum(_2));if(_7!=null)_7.isRecordComponent=true;this.logDebug("created new record component:"+_7,"recordComponents")}}else{if(this.updateRecordComponent&&isc.isA.Function(this.updateRecordComponent)){var _11=_7;_7=this.updateRecordComponent(_1,_9,_7,!_8);if(_7==null){if(this.logIsInfoEnabled("recordComponents")){this.logInfo("showRecordComponents: updateRecordComponent() method failed to return an updated component.","recordComponents")}
this.addToRecordComponentPool(_11)}
this.logDebug("updated record component from pool:"+_7,"recordComponents")}}
return this.$116u(_1,_2,_3,_4,_5,_7)},isc.A.$116u=function isc_ListGrid__finishApplyNewRecordComponent(_1,_2,_3,_4,_5,_6){var _7=this.recordComponentPoolingMode=="recycle",_8=_6==null;if(_8){_6={isNullMarker:true,$669:_3.getID(),$81x:this.$81o}}
if(_2==null)_2=this.$81m;this.$92o(_1,_2,_6);if(_7&&!_8){_6.currentFieldName=_2;_6.currentRecord=_1}
if(!_8){_6.removeOnHideField=true;return _3.addEmbeddedComponent(_6,_1,_4,_5,this.getRecordComponentPosition())}},isc.A.setDontAutoDestroyComponent=function isc_ListGrid_setDontAutoDestroyComponent(_1,_2){_1.dontAutoDestroy=_2},isc.A.$81w=function isc_ListGrid__cleanUpRecordComponent(_1,_2){if(this.logIsDebugEnabled("recordComponents")){this.logDebug("cleaning up recordComponent:"+_1,"recordComponents")}
var _3=this.recordComponentPoolingMode;if(_2)_3="viewport";if(_3=="data"){if(!_1.destroyed&&!_1.destroying&&!_1.$65i){if(this.$89r==null){this.$89r={}}
var _4=_1.ID;if(this.$89r[_4]!=_1){this.$89r[_4]=_1;if(_1.pointersToThis==null)_1.pointersToThis=[];_1.pointersToThis.add({object:this.$89r,property:_4})}}}else{var _4=_1.ID,_5=isc.Canvas.getById(_1.$669),_6=_1.embeddedRecord,_7=_1.$81k;if(this.$92m(_6)){this.$92p(_6,_7)}
if(_5!=null){_5.removeEmbeddedComponent(_1.embeddedRecord,_1)}
if(_3=="viewport"){if(!_1.dontAutoDestroy)_1.markForDestroy()}else{if(_1.destroying||_1.destroyed||_1.$65i)return;this.addToRecordComponentPool(_1)}}},isc.A.getLiveRecordComponent=function isc_ListGrid_getLiveRecordComponent(_1,_2,_3){if(!_1)return null;if(isc.isA.Number(_1))_1=this.getRecord(_1);if(!_3)_3=this.body.getID();var _4=this.$81u(_1,_2,_3);return _4},isc.A.$81u=function isc_ListGrid__getLiveRecordComponent(_1,_2,_3){if(_2==null)_2=this.$81m;if(!this.$92m(_1))return null;var _4=this.$92n(_1);if(_4[_2]==null)return null;var _5=_4[_2];if(_5.$669!=_3){return null}
if(_5.isNullMarker&&_5.$81x!=this.$81o){return null}
if(_5.destroyed||_5.destroying||_5.$65i){this.logWarn("Destroyed or Destroying record component:"+_5+" present on record. Ignoring","recordComponents");_4[_2]=null;return null}
return _5},isc.A.invalidateRecordComponents=function isc_ListGrid_invalidateRecordComponents(){this.dropRecordComponents(true);if(this.showRecordComponents&&this.isDrawn()){this.updateRecordComponents()}},isc.A.dropRecordComponents=function isc_ListGrid_dropRecordComponents(_1){this.$81o++;var _2=this.$81s||[];delete this.$81s;delete this.$81t;for(var i=0;i<_2.length;i++){this.$81w(_2[i],_1)}},isc.A.refreshRecordComponent=function isc_ListGrid_refreshRecordComponent(_1,_2){if(!this.showRecordComponents||_1==null||this.body==null)return;if(this.showRecordComponentsByCell&&_2==null){this.logWarn("refreshRecordComponent() called with no colNum. This parameter is required when showRecordComponentsByCell is true. Taking no action.");return}
var _3=this.getRecord(_1);if(_3==null||Array.isLoading(_3))return;var _4=this.body,_5=null,_6=null;if(this.showRecordComponentsByCell){_4=this.getFieldBody(_2);_5=this.getLocalFieldNum(_2);_6=this.getFieldName(_2)}
var _7=this.$81u(_3,_6,_4.getID());if(_7!=null&&_7.isNullMarker)_7=null;var _8=this.shouldShowRecordComponent(_3,_2);var _9;if(_7!=null){if(_8&&isc.isA.Function(this.updateRecordComponent)){_9=this.updateRecordComponent(_3,_2,_7,false);if(_9!=_7){this.$81w(_7,(this.recordComponentPoolingMode!="recycle"));this.addToRecordComponentPool(_7);_9=this.$116u(_3,_6,_4,_1,_5,_9);if(_9&&_9.isNullMarker)_9=null}
_8=false}else{this.$81w(_7,(this.recordComponentPoolingMode!="recycle"))}}
if(_8){_9=this.$81v(_3,_6,_4,_1,_5);if(_9&&_9.isNullMarker)_9=null}
var _10=this.$81s.length;if(_7){var _11=_7.getID();this.$81t[_7.getID()]=null;if(_9!=null){_10=this.$81s.indexOf(_7);this.$81s[_10]=null}else{this.$81s.remove(_7)}}
if(_9!=null){var _11=_9.getID();this.$81t[_11]=true;this.$81s[_10]=_9}},isc.A.getRecordComponentPosition=function isc_ListGrid_getRecordComponentPosition(){if(this.recordComponentPosition!=null)return this.recordComponentPosition;return(this.showRecordComponentsByCell?"within":"expand")},isc.A.getRecordComponentPool=function isc_ListGrid_getRecordComponentPool(){if(!this.$74m)this.$74m=[];return this.$74m},isc.A.getFromRecordComponentPool=function isc_ListGrid_getFromRecordComponentPool(_1,_2){var _3=this.getRecordComponentPool(),_4=[],_5;if(!_3||_3.length==0)return null;if(this.showRecordComponentsByCell&&this.poolComponentsPerColumn==true){_4=_3.findAll("currentFieldName",_2)}else{_4=_3}
if(!_4||_4.length==0)return null;for(var i=0;i<_4.length;i++){_5=_4[i];var _7=_5.currentRecord;if(this.comparePrimaryKeys(_7,_1)){_3.remove(_5);return[_5,true]}}
_3.length-=1;return[_5,false]},isc.A.addToRecordComponentPool=function isc_ListGrid_addToRecordComponentPool(_1){var _2=this.getRecordComponentPool();_2.add(_1)},isc.A.shouldShowRecordComponent=function isc_ListGrid_shouldShowRecordComponent(_1,_2){if(_1==null||_1.$52e||_1[this.isSeparatorProperty]||Array.isLoading(_1))
{return false}
return this.showRecordComponent(_1,_2)},isc.A.showRecordComponent=function isc_ListGrid_showRecordComponent(){return true},isc.A.bodyDrawing=function isc_ListGrid_bodyDrawing(_1){if(isc.$cv)arguments.$cw=this;if(_1!=this.body)return;var _2;if(this.$31v){_2=!isc.RPCManager.startQueue();this.$67b()}
this.requestVisibleRows();if(_2)isc.RPCManager.sendQueue();this.$31v=null},isc.A.setRecordComponentHeight=function isc_ListGrid_setRecordComponentHeight(_1){this.recordComponentHeight=_1;if(this.isDrawn())this.markForRedraw()},isc.A.getAvgRowHeight=function isc_ListGrid_getAvgRowHeight(_1){if(this.showRecordComponents&&this.recordComponentHeight!=null){var _2=this.getRecordComponentRowHeight();if(_2!=null)return _2}
return!_1.virtualScrolling?_1.cellHeight:Math.max(_1.cellHeight,_1.avgRowHeight)},isc.A.getRecordComponentRowHeight=function isc_ListGrid_getRecordComponentRowHeight(){if(this.recordComponentHeight==null)return null;var _1=this.getRecordComponentPosition();if(_1==this.$57m)return this.cellHeight+this.recordComponentHeight;else return Math.max(this.recordComponentHeight,this.cellHeight)},isc.A.$45n=function isc_ListGrid__setOptionDataSources(){var _1=this.$31v;this.$31v=null;var _2=this.$45o;this.$45o=[];var _3=this.getDataSource();for(var i=0;i<this.completeFields.length;i++){var _5=this.completeFields[i];if(_5==null){this.logWarn("Fields array contains an empty entry");continue}
var _6=_5.displayField||_5[this.fieldIdProperty],_7=_5.valueField||_5[this.fieldIdProperty];if(_5.optionDataSource==null||_5.displayField==null||(_5.displayField==_5.valueField)||(_5.valueField==null&&(_5.displayField==_5[this.fieldIdProperty]))||(_5.autoFetchDisplayMap==false)||(this.autoFetchDisplayMap==false&&_5.autoFetchDisplayMap==null))
{continue}
var _8=isc.DS.get(_5.optionDataSource);if(_8==null){this.logWarn(_5.optionDataSource+" dataSource not found, check value of optionDataSource property on the "+_5[this.fieldIdProperty]+" field");continue}
var _9=_8.ID,_10=_5[this.fieldIdProperty],_11=_5.optionCriteria;var _12=false;if(_2&&!_5.optionFilterContext){for(var _13=0;_13<_2.length;_13++){var _14=_2[_13];if(_14==null)continue;if(this.$68m(_5,_14)){_14.$51u=[_5];this.$45o.add(_14);_2[_13]=null;_12=true;break}}}
if(!_12&&!_5.optionFilterContext){for(var _13=0;_13<this.$45o.length;_13++){var _14=this.$45o[_13];if(this.$68m(_5,_14)){_14.$51u.add(_5);_12=true;break}}}
if(!_12){this.$45o.add({$68n:_9,$51u:[_5],$51w:_5.optionTextMatchStyle,$68o:_11,$68p:_5.optionFilterContext,$68r:_5.optionOperationId});this.$31v=true}}
if(_12&&!this.$31v&&_1){this.$31v=true}
for(var i=0;i<this.$45o.length;i++){if(this.$45o[i].$68q!=null){this.$67c(this.$45o[i])}}
if(_2!=null){for(var i=0;i<_2.length;i++){if(_2[i]&&_2[i].$68q)_2[i].$68q.destroy()}}},isc.A.$68m=function isc_ListGrid__fieldMatchesODSConfig(_1,_2){return(_2.$68n==_1.optionDataSource&&(_1.optionTextMatchStyle==_2.$51w)&&(_1.optionOperationId==_2.$68r)&&(isc.DataSource.getDataSource(_2.$68n).compareCriteria(_1.optionCriteria||{},_2.$68o||{})==0))},isc.A.$67c=function isc_ListGrid__updateValueMapFromODS(_1){var _2=_1.$68n,_3=_1.$51u;if(_3==null||_3.length==0){this.logWarn("$67c fired for dataSource:"+_2+" which no longer applies to any fields in this ListGrid");return}
var _4=_1.$68q;if(_4==null||(isc.isA.ResultSet(_4)&&!_4.lengthIsKnown()&&!_4.initialData))
{return}
if(_1.$68r){_4.fetchOperation=_1.$68r}
var _5=this.getGroupByFields()||[],_6=_3.getProperty(this.fieldIdProperty),_7=false;if(!isc.isAn.Array(_5))_5=[_5];for(var i=0;i<_3.length;i++){var _9=_3[i],_10=(_9.valueField||_9[this.fieldIdProperty]),_11=_4.getValueMap(_10,_9.displayField);if(this.getField(_9[this.fieldIdProperty])==null){_9.valueMap=_11}else{this.setValueMap(_9[this.fieldIdProperty],_11)}
if(_5.contains(_9.valueField)||_5.contains(_9.displayField)){this.$92x=true}}
if(this.$92x){var _12=true;for(var i=0;i<this.$45o.length;i++){var _1=this.$45o[i];if(!_1.$68q){_12=false;break}}
if(_12){this.regroup(true);delete this.$92x}}},isc.A.$67b=function isc_ListGrid__fetchValueMapData(){var _1;for(var i=0;i<this.$45o.length;i++){var _3=this.$45o[i];if(_3.$68q==null){if(_1==null){_1=!isc.RPCManager.startQueue()}
var _4=_3.$68n;var _5,_6=_3.$51u;if(_6&&_6.length>0){_5="ODS:";for(var _7=0;_7<_6.length;_7++){_5+=_6[_7].name;if(_7<_6.length-1)_5+=","}}
var _8=_3.$68p||{};isc.addProperties(_8,{showPrompt:false,internalClientContext:{ODSConfig:_3},componentId:this.getID(),componentContext:_5,textMatchStyle:_3.$51w});if(_3.$68r!=null){_8.operationId=_3.$68r}
isc.DataSource.getDataSource(_4).fetchData(_3.$68o,{target:this,methodName:"$317"},_8)}}
if(_1)isc.RPCManager.sendQueue()},isc.A.$317=function isc_ListGrid__fetchValueMapCallback(_1,_2,_3){var _4=_3.internalClientContext.ODSConfig;if(!_4||(_4.$68q!=null)||!this.$45o||!this.$45o.contains(_4))
{return}
_4.$68q=isc.ResultSet.create({dataSource:_4.$68n,ODSConfig:_4,targetGrid:this,dataChanged:"this.targetGrid.$67c(this.ODSConfig)",initialData:_2})
this.$67c(_4);return true},isc.A.$67a=function isc_ListGrid__dropODSData(){if(this.$45o==null)return;for(var i=0;i<this.$45o.length;i++){var _2=this.$45o[i].$68q;if(_2)_2.destroy()}
delete this.$45o},isc.A.requestVisibleRows=function isc_ListGrid_requestVisibleRows(){var _1=(isc.ResultSet!=null&&isc.isA.ResultSet(this.data)),_2=(isc.ResultTree!=null&&isc.isA.ResultTree(this.data)&&this.data.isPaged());if(_1||_2){if(this.body==null||this.body.$100r){var _3=(_1&&(this.isGrouped||(this.groupByField!=null&&this.getUnderlyingField(this.groupByField))));if(_3){var _4=Math.max(this.dataPageSize||0,1);return this.data.getRange(0,Math.max(_4,this.groupByMaxRecords+1))}else{return this.data.getRange(0,this.dataPageSize)}}
if(_1&&this.data.lengthIsKnown()&&this.data.getLength()==0){return}
if((_1&&!this.data.lengthIsKnown())||_2){this.body.showAllRows=false}else{this.body.showAllRows=(this.body.overflow==isc.Canvas.VISIBLE?true:this.showAllRecords)}
var _5=this.body.getDrawArea();if(this.$30d&&isc.isAn.Array(this.$30d)){var _6=_5[1]-_5[0];_5[0]=this.$30d[0];_5[1]=_5[0]+_6}
if(_1&&this.isGrouped){return this.data.getRange(0,this.groupByMaxRecords+1)}else{return this.data.getRange(_5[0],_5[1]+1)}}
return null},isc.A.getPrintHTML=function isc_ListGrid_getPrintHTML(_1,_2){var _3=this.body;if(_3==null){this.createChildren();_3=this.body}
if(this.isDirty()||_3.isDirty()){this.redraw("updating HTML for printing")}
var _4=isc.addProperties({},_1,this.printProperties);var _5,_6;if(isc.isA.ResultSet(this.data)&&!this.data.allMatchingRowsCached()){var _7=this.body.getVisibleRows(),_8=_7?_7[0]:null,_9=this.data.getCachedRange(_8);if(_9!=null){_5=_9[0];_6=_9[1]}}
var _10=isc.Canvas.applyStretchResizePolicy(this.fields.getProperty("width"),_4.width||isc.Page.getWidth());return this.setupHeaderPrintHTML({startRow:_5,endRow:_6,callback:_2,printWidths:_10,printProps:_4})},isc.A.setupHeaderPrintHTML=function isc_ListGrid_setupHeaderPrintHTML(_1,_2,_3){var _4=_3!=null;if(_2==null)_2="";if(_3==null)_3=0;var _5=this.body;var _6=this.gridComponents;this.currentPrintProperties=_1.printProps;for(var i=_3;i<_6.length;i++){var _8=_6[i];if(_8=="body"){_5.$119f=_2;_2="";continue}
if(!this.shouldPrintGridComponent(_8)){continue}
if(_8=="header"){_2+=this.getPrintHeaderRow()}else if(_8=="summaryRow"){_2+=this.getPrintSummaryRow()}else if(isc.isA.Canvas(_8)){var _9=this,_10=function componentPrintCallback(_12){_2+="<TR><TD colSpan='"+_9.fields.length+"'>"+_12+"</TD></TR>";_9.setupHeaderPrintHTML(_1,_2,i+1)}
var _11=_8.getPrintHTML(_1.printProps,_10);if(_11==null){return null}
_2+="<TR><TD colSpan='"+this.fields.length+"'>"+_11+"</TD></TR>"}else{this.logWarn("getPrintHTML() - unable to get print HTML for gridComponent "+_8)}}
delete this.currentPrintProperties;_5.$119g=_2;return this.setupHeaderPrintHTMLComplete(_1,_4)});isc.evalBoundary;isc.B.push(isc.A.setupHeaderPrintHTMLComplete=function isc_ListGrid_setupHeaderPrintHTMLComplete(_1,_2){var _3=this.body.getTablePrintHTML(_1);if(_3!=null&&_2){var _4=_1.callback;if(_4){this.fireCallback(_4,"HTML,callback",[_3,_4])}}
return _2?null:_3},isc.A.shouldPrintGridComponent=function isc_ListGrid_shouldPrintGridComponent(_1){if(_1==null)return false;if(isc.isA.String(_1)){var _2=this.shouldPrintAttributeMap[_1];if(_2!=null&&this[_2]!=null){return this[_2]}
return this.shouldShowGridComponent(_1)}
return this.shouldPrintChild(_1)},isc.A.getPrintHeaderRow=function isc_ListGrid_getPrintHeaderRow(){var _1=this.fields.duplicate();_1.removeAll(_1.findAll("shouldPrint",false));var _2=0,_3=_1.length;var _4=(this.isRTL()?isc.Canvas.LEFT:isc.Canvas.RIGHT),_5=this.printHeaderStyle||this.headerBaseStyle,_6;if(this.headerSpans){var _7=[],_8=1;var _9=this.buildSpanMap(null,null,true);for(var i=_2;i<_3;++i){var _11=_1[i];_7[i]=[_11];var _12=_9[_11.name];while(_12!=null){_7[i].add(_12);_12=_12.parentSpan}
_8=Math.max(_7[i].length,_8)}
_6=[];for(var i=_8-1;i>=0;i--){_6[_6.length]="<TR>";var _13=null,_14=null;for(var _15=_2;_15<_3;_15++){var _16=1,_17=1;var _18=(i==0);var _19=_7[_15][i];if(_19=="spanned"){continue}
var _20=0,_21=_15,_22=[];_17=0;while(_21<_3){var _23=null,_24=false;for(var _25=0;(i-_25)>=0;_25++){_23=_7[_21][i-_25];if(_23!=null){if(_19==null){_19=_23;_20=_25;if(i-_25==0){_18=true}}
if(_19==_23){_22[_17]=_25;_20=Math.min(_25,_20)}else{_24=true}
break}}
if(_24){break}
_21++;_17++}
if(_20!=null){_16=_20+1}
for(var _26=0;_26<_22.length;_26++)
{var _27=_7[_26+_15],_25=_22[_26];for(var _28=0;_28<=_25;_28++){if(_26==0&&_28==0){_27[i-_28]=_19}else if(_28<=_20){_27[i-_28]="spanned"}else{_27[i-_28]=null}}}
if(_19==null){this.logWarn("Error in getPrintHeaders() - unable to generate print header HTML from this component's specified headerSpans")}
var _29="center",_30;if(_18){_29=_19.align||_4;_30=this.getHeaderButtonTitle(_19.masterIndex)}else{_30=_19.title}
var _31=_6.length;_6[_6.length]="<TD class='";_6[_6.length]=_5;_6[_6.length]="' align='";_6[_6.length]=_29;_6[_6.length]="' rowSpan='";_6[_6.length]=_16;_6[_6.length]="' colSpan='";_6[_6.length]=_17;_6[_6.length]="'>";_6[_6.length]=_30;_6[_6.length]="</TD>"}
_6[_6.length]="</TR>"}}else{var _6=["<TR>"];var _32=["<TD CLASS=",_5," ALIGN="].join("");for(var _33=_2;_33<_3;_33++){var _11=_1[_33];var _29=_11.align||_4;_6.addList([_32,_29,">",this.getHeaderButtonTitle(_11.masterIndex),"</TD>"])}
_6[_6.length]="</TR>"}
return _6.join(isc.emptyString)},isc.A.getPrintSummaryRow=function isc_ListGrid_getPrintSummaryRow(){if(!(this.summaryRow)||!(this.summaryRow.body)||!(this.showGridSummary)){return""}
var _1={startRow:0,endRow:this.summaryRow.getTotalRows(),maxRows:this.summaryRow.printMaxRows,printProps:this.printProperties||{},html:[]}
var _2=isc.Canvas.applyStretchResizePolicy(this.fields.getProperty("width"),_1.printProps.width||isc.Page.getWidth());_1.printWidths=_2;this.summaryRow.body.printChunkOnly=true;var _3=this.summaryRow.body.getPrintHTMLChunk(_1,true);delete this.summaryRow.body.printChunkOnly;return _3},isc.A.$119d=function isc_ListGrid__prepareBodyForPrinting(_1,_2){this.isPrinting=this.body.isPrinting=true;this.currentPrintProperties=_2;var _3=this.body,_4=this.$30a;var _5=isc.getProperties(_3,["autoFit","wrapCells","showAllRows","showAllColumns","fixedRowHeights","$26a","fields"]);_3.showAllRows=true;_3.showAllColumns=true;this.$30a=false;_3.autoFit=this.printAutoFit;_3.wrapCells=this.printWrapCells;_3.fixedRowHeights=!this.printWrapCells;var _6=this.fields.duplicate();_6.removeAll(_6.findAll("shouldPrint",false));_3.fields=_6;var _7=this.frozenFields;delete this.frozenFields;var _8=this.$143y=_3.$29a,_9=(this.frozenBody!=null&&this.frozenBody.$29a!=null?this.frozenBody.$29a.length:0);if(_9>0){var _10=(_8!=null?_8.length:0),_11=_9+_10,_12=_3.$29a=new Array(_11);for(var i=_10;i--;){_12[i]=_8[i]}
for(var i=_9;i--;){var _14=this.frozenBody.$29a[i];_14.$143x=true;_12[_10+i]=_14}}
this.$143l=0;this.$143w=0;if(this.freezeStart()){if(this.frozenBody&&this.frozenBody.$255!=null&&this.frozenBody.$254!=null)
{this.$143l=(this.frozenBody.$255-this.frozenBody.$254+1)}}else{if(this.body&&this.body.$255!=null&&this.body.$254!=null)
{this.$143w=(this.body.$255-this.body.$254+1)}}
_3.$26a=_1;return{oldEditorShowing:_4,oldFrozenFields:_7,origProps:_5}},isc.A.$119e=function isc_ListGrid__bodyDonePrinting(_1){var _2=this.body,_3=_1.origProps,_4=_1.oldEditorShowing;isc.addProperties(_2,_3);if(_3.showAllRows==null)_2.showAllRows=null;this.$30a=_4;this.frozenFields=_1.oldFrozenFields;_2.$29a=this.$143y;delete this.$143y;if(this.frozenBody!=null&&this.frozenBody.$29a!=null){for(var i=this.frozenBody.$29a.length;i--;){var _6=this.frozenBody.$29a[i];delete _6.$143x}}
delete this.$143l;delete this.$143w;delete this.currentPrintProperties;this.isPrinting=this.body.isPrinting=false;this.body.markForRedraw("finished printing")},isc.A.rowClick=function isc_ListGrid_rowClick(_1,_2,_3,_4){this.$31q=_2;var _1=this.getCellRecord(_2,_3),_5=this.fields[_3];if(Array.isLoading(_1))return;var _6=this.getCellValue(_1,_2,_3);var _7=this.getRawCellValue(_1,_2,_3);if(_1!=null&&_1.$52e){if(this.canCollapseGroup==false)return;if(_4){var _8=isc.EH.getKey();if(_8!="Space"&&_8!="Enter")return}
var _9=this,_10=_1;if(this.getEditRow()!=null){if(this.autoSaveEdits){var _11=this.saveAllEdits(null,function(){_9.toggleFolder(_10)});if(_11)return}else{this.storeUpdatedEditorValue()}}
this.toggleFolder(_1);return}
if(_5.recordClick&&!(_4&&_5.keyboardFiresRecordClick==false)){isc.Func.replaceWithMethod(_5,"recordClick","viewer,record,recordNum,field,fieldNum,value,rawValue");var _12=_5.recordClick(this,_1,_2,_5,_3,_6,_7);if(_12==false)return false}
if(this.recordClick){if(this.onRecordClick(this,_1,_2,_5,_3,_6,_7)==false)
return false;if(this.recordClick(this,_1,_2,_5,_3,_6,_7)==false)
return false}
var _13=this.isEditable()&&(this.editEvent==isc.EH.CLICK||this.editOnFocus);if(_5.canToggle&&this.canEditCell(_2,_3)&&this.shouldToggle(_5,_4))
{var _14=this.getEditorValueMap(_5,this.getEditedRecord(_2,_3));if(_14==null&&isc.SimpleType.getBaseType(_5.type)==this.$g2){_14=[true,false]}
if(_14!=null){if(!isc.isAn.Array(_14))_14=isc.getKeys(_14);if(_14.length>1){var _15=this.getFieldName(_3),_16=this.getEditedCell(_2,_3),_17=_14.indexOf(_16);_17+=1;if(_17>=_14.length)_17=0;var _18=_16;_16=_14[_17];var _19;if(_5.change!=null){this.logInfo("canToggle firing specified field.change() event directly","gridEdit");_19=this.fireCallback(_5.change,"form,item,value,oldValue",[null,null,_16,_18])==false}
if(!_19){if(!_13&&this.autoSaveEdits){this.setEditValue(_2,_3,_16,true,false)}else{this.setEditValue(_2,_3,_16)}
if(_5.changed!=null){this.logInfo("canToggle firing specified field.changed() event directly","gridEdit");this.fireCallback(_5.changed,"form,item,value",[null,null,_16])}
if(this.autoSaveEdits)this.saveEdits(null,null,_2,_3)}}}}
if(_13){if(this.handleEditCellEvent(_2,_3,isc.ListGrid.CLICK)==true){return true}
if(_4){for(var i=0;i<this.fields.length;i++){if(i==_3)continue;if(this.handleEditCellEvent(_2,i,isc.ListGrid.CLICK)==true){return true}}}}},isc.A.shouldToggle=function isc_ListGrid_shouldToggle(_1,_2){if(_2){var _3=isc.EH.getKey();if(_3==this.$304||_3==this.$10j)return true}
if(!this.$31s(_1))return true;var _4=this.getEventPart();return(_4&&_4.part=="valueicon")},isc.A.rowDoubleClick=function isc_ListGrid_rowDoubleClick(_1,_2,_3,_4){var _5=this.fields[_3],_6=this.getCellValue(_1,_2,_3),_7=this.getRawCellValue(_1,_2,_3);if(_1!=null&&_1.$52e)return;if(_5.recordDoubleClick){isc.Func.replaceWithMethod(_5,"recordDoubleClick","viewer,record,recordNum,field,fieldNum,value,rawValue");var _8=_5.recordDoubleClick(this,_1,_2,_5,_3,_6,_7);if(_8==false)return _8}
if(this.recordDoubleClick!=null){var _8=this.recordDoubleClick(this,_1,_2,_5,_3,_6,_7);if(_8==false)return _8}
if(this.isEditable()&&this.editEvent==isc.EH.DOUBLE_CLICK){if(this.handleEditCellEvent(_2,_3,isc.ListGrid.DOUBLE_CLICK)==true)return true;if(_4){for(var i=0;i<this.fields.length;i++){if(i==_3)continue;if(this.handleEditCellEvent(_2,i,isc.ListGrid.DOUBLE_CLICK)==true)return true}}}},isc.A.$298=function isc_ListGrid__cellContextClick(_1,_2,_3){this.cellContextItems=null;if(this.cellContextClick){var _1=this.getCellRecord(_2,_3);if(this.cellContextClick(_1,_2,_3)==false)return false}
if(this.showCellContextMenus){if(!this.cellContextMenu){this.cellContextMenu=this.createAutoChild("cellContextMenu",this.contextMenuProperties,this.getMenuConstructor())}
if(!this.cellContextItems){this.cellContextItems=this.makeCellContextItems(this.getCellRecord(_2,_3),_2,_3)}
if(isc.isAn.Array(this.cellContextItems)&&this.cellContextItems.length>0){this.cellContextMenu.setData(this.cellContextItems);this.cellContextMenu.showContextMenu(this)}
return false}else{return true}},isc.A.getShowChildDataSourceContextMenuItemTitle=function isc_ListGrid_getShowChildDataSourceContextMenuItemTitle(_1){return"Show "+_1.getPluralTitle()},isc.A.makeCellContextItems=function isc_ListGrid_makeCellContextItems(_1,_2,_3){if(this.dataSource!=null){var _4=[];if(this.canOpenRecordDetailGrid){var _5=isc.DS.get(this.getRecordDataSource(_1)),_6=_5.getChildDataSources();if(_6!=null){for(var i=0;i<_6.length;i++){var _8=_6[i];_4.add({title:this.getShowChildDataSourceContextMenuItemTitle(_8),record:_1,dataSource:_8,click:"target.openRecordDetailGrid(item.record, item.dataSource)"})}}}
if(this.canOpenRecordEditor){_4.add({title:this.openRecordEditorContextMenuItemTitle,record:_1,click:"target.endEditing();target.openRecordEditor(item.record)"})}
if(_1!=null&&this.$32o==_1){_4.add({title:this.dismissEmbeddedComponentContextMenuItemTitle,click:"target.closeRecord()"})}
_4.add({title:this.deleteRecordContextMenuItemTitle,click:"target.removeSelectedData()"});return(_4.length>0?_4:null)}
return null},isc.A.getCanHover=function isc_ListGrid_getCanHover(){if(this.canHover!=null)return this.canHover;var _1=this.$1159();if(_1)return _1;var _2=this.getFields();if(_2!=null){for(var i=0;i<_2.length;i++){if(_2[i].showHover)return true}}
return this.canHover},isc.A.$118n=function isc_ListGrid__getFieldHoverHTMLCallback(_1,_2){var _3=this.getField(_2);if(_3==null)return null;if(_3.showHover==false)return null;if(_3.showHover==null&&!this.canHover)return null;if(_3.hoverHTML){isc.Func.replaceWithMethod(_3,this.$118p,this.$118q);return{target:_3,methodName:this.$118p}}
return null},isc.A.$118o=function isc_ListGrid__isCellHoverSuppressed(_1,_2){if(this.isEditingCell(_1,_2)){return true}
if(this.$68z(_2)&&this.canEditCell(_1,_2)){return true}
return false},isc.A.cellHoverHTML=function isc_ListGrid_cellHoverHTML(_1,_2,_3){var _4=this.$118n(_2,_3),_5=this.getCellValue(_1,_2,_3);if(_4){return isc.Class.fireCallback(_4,this.$118q,[_1,_5,_2,_3,this])}
if(_5!=null&&!isc.isAn.emptyString(_5)&&_5!=this.emptyCellValue){return _5}},isc.A.cellValueHoverHTML=function isc_ListGrid_cellValueHoverHTML(_1,_2,_3,_4){var _5=this.getField(_3);if(_5.showHover==false)return null;if(_5.showHover==null&&this.canHover==false)return null;return _4},isc.A.$784=function isc_ListGrid__getCellHoverComponent(_1,_2,_3){if(!this.showHoverComponents)return null;if(this.$30a&&this.getEditRow()==_2&&(!this.editByCell||this.getEditCol()==_3))return null;var _4=this.getField(_3);if(_4.showHover==false)return null;if(_4.showHover==null&&!this.canHover)return null;if(this.getCellHoverComponent&&isc.isA.Function(this.getCellHoverComponent)){return this.getCellHoverComponent(_1,_2,_3)}else return null},isc.A.getCellHoverComponent=function isc_ListGrid_getCellHoverComponent(_1,_2,_3){return this.$84d(_1,false,true,_2,_3)},isc.A.$84d=function isc_ListGrid__getStockEmbeddedComponent(_1,_2,_3,_4,_5){var _6=this.getFields(),_7=this.dataSource?isc.getValues(this.getDataSource().getFields()):_6,_8=(!_3?null:this.hoverWidth||this.hoverSize||this.defaultCellHoverComponentWidth),_9=(!_3?null:this.hoverHeight||this.hoverSize||this.defaultCellHoverComponentHeight),_10=[],_11;for(var i=0;i<_7.length;i++){var _13=_7.get(i);if(this.dataSource){if(!_6.find("name",_13.name)){_10.add(_13)}}else{if(!this.isExpansionField(_13)){_10.add(_13)}}}
var _14=(_3?this.hoverMode:(_2?this.expansionMode:null));var _15;if(_14=="detailField"){if(!_2&&!_1[this.detailField])return null;_11=this.createAutoChild("expansionDetailField",{styleName:this.hoverStyle,contents:_1[this.detailField]});_15={width:(_3?_8:"100%"),height:(_3?_9:"100%"),members:[_11]};if(_3){_15=isc.addProperties(_15,{hoverAutoDestroy:this.hoverAutoDestroy})}
_11=isc.VLayout.create(_15)}else if(_14=="details"){_10=_10.map(function(_13){if(_13.showIf==null)return _13;return isc.addProperties({},_13,{showIf:"true"})});_15={dataSource:this.dataSource,fields:_10};if(_3){_15=isc.addProperties(_15,{width:_8,height:_9,hoverAutoDestroy:this.hoverAutoDestroy})}
_11=this.createAutoChild("expansionDetails",_15);if(isc.isA.ResultSet(_1)){_11.setData(_1)}else{var _16=isc.ResultSet.create({dataSource:this.dataSource,initialData:[_1]});_11.setData(_16)}}else if(_14=="related"){_15={dataSource:this.getRelatedDataSource(_1)};if(_3){_15=isc.addProperties(_15,{canEdit:false,width:_8,height:_9,dataProperties:{context:{showPrompt:false}},hoverAutoDestroy:this.hoverAutoDestroy})}
if(_2){if(this.childExpansionMode!=null)_15=isc.addProperties(_15,{canExpandRecords:this.childExpansionMode?true:false,expansionMode:this.childExpansionMode});if(this.expansionCanEdit!=null)_15=isc.addProperties(_15,{canEdit:this.expansionCanEdit})}
_11=this.createAutoChild("expansionRelated",_15);if(this.expansionCanEdit)_11.autoSaveEdits=true;_11.delayCall("fetchRelatedData",[_1,this.dataSource,function(_21,_22){if(_22==null||_22.length==0)_11.setBodyOverflow("visible")}])}else if(_14=="detailRelated"){_15={dataSource:this.dataSource,fields:_10};if(_3){_15=isc.addProperties(_15,{dataProperties:{context:{showPrompt:false}},hoverAutoDestroy:this.hoverAutoDestroy})}
var _17=this.createAutoChild("expansionDetails",_15)
_17.setData(_1);_15={dataSource:this.getRelatedDataSource(_1),height:"100%"};if(_3){_15=isc.addProperties(_15,{dataProperties:{context:{showPrompt:false}},hoverAutoDestroy:this.hoverAutoDestroy,canEdit:false})}
if(_2){if(this.childExpansionMode!=null)_15=isc.addProperties(_15,{canExpandRecords:this.childExpansionMode?true:false,expansionMode:this.childExpansionMode});if(this.expansionCanEdit!=null)_15=isc.addProperties(_15,{canEdit:this.expansionCanEdit})}
var _18=this.createAutoChild("expansionRelated",_15);_15={members:[_17,_18]};if(_3){_15=isc.addProperties(_15,{width:_8,height:_9,hoverAutoDestroy:this.hoverAutoDestroy})}
_11=this.createAutoChild("expansionDetailRelated",_15)}else if(_14=="editor"){_11=isc.VLayout.create({autoDraw:false,width:"100%",height:"100%",creator:this});var _19=this.createAutoChild("expansionEditor",{dataSource:this.dataSource,fields:_10,extraSpace:5,itemChanged:function(){this.saveButton.setDisabled(false)}});_19.editRecord(this.getEditedRecord(_4)||_1);_19.validate();var _20=this.createAutoChild("expansionEditorSaveButton",{title:this.expansionEditorSaveButtonTitle,grid:this,form:_19,record:_1,disabled:true,extraSpace:5});_19.saveButton=_20;_11.formMember=_19;_11.addMembers([_19,_20])}
if(_11){_11.isStockComponent=true;_11.expandedRecord=_1}
return _11},isc.A.selectAllRecords=function isc_ListGrid_selectAllRecords(){this.$67j=true;this.selection.selectAll();this.$67j=null;this.$25a("select all");if(this.getCurrentCheckboxField()!=null){if(!isc.ResultSet||!isc.isA.ResultSet(this.data)||this.data.allMatchingRowsCached())
{this.$63m(true)}}
this.fireSelectionUpdated()},isc.A.deselectAllRecords=function isc_ListGrid_deselectAllRecords(){this.$67j=true;this.selection.deselectAll();this.$67j=null;this.$25a("deselect all");if(this.getCurrentCheckboxField()!=null)this.$63m(false);this.fireSelectionUpdated()},isc.A.userSelectAllRecords=function isc_ListGrid_userSelectAllRecords(){var _1=this.getOriginalData(),_2=_1.getLength();if(isc.ResultSet&&isc.isA.ResultSet(_1)&&!_1.rangeIsLoaded(0,_2)){this.selection.warnSelectionRangeNotLoaded();return}
var _3=(this.isGrouped?this.getAllRecordsFromGroupTree():_1.getRange(0,_2)),_4=[];for(var i=0;i<_3.length;i++){if(!this.canSelectRecord(_3[i]))continue;_4[_4.length]=_3[i]}
this.selection.selectList(_4);this.fireSelectionUpdated()},isc.A.getAllRecordsFromGroupTree=function isc_ListGrid_getAllRecordsFromGroupTree(){var _1;if(this.isGrouped)_1=this.data;if(!_1||!isc.isA.Tree(_1))return;return this.data.getDescendantLeaves(this.data.getRoot())},isc.A.canSelectCell=function isc_ListGrid_canSelectCell(_1,_2){return true},isc.A.canSelectRecord=function isc_ListGrid_canSelectRecord(_1){return(_1!=null&&_1[this.recordCanSelectProperty]!==false)},isc.A.bodyKeyPress=function isc_ListGrid_bodyKeyPress(_1,_2){if(this.onBodyKeyPress(_1,_2)==false)return false;if(this.$30a){var _3=_1.keyTarget,_4;while(_4==null&&_3!=this&&_3!=null){_4=_3.canvasItem;_3=_3.parentElement}
if(_4!=null&&_4.form==this.getEditForm()){var _5=this.editorKeyPress(_4,isc.EH.getKey(),isc.EH.getKeyEventCharacterValue());return(_5==null?isc.EH.STOP_BUBBLING:_5)}}
if(this.data.getLength()>0){var _6=isc.EventHandler,_7=_1.keyName;var _8=this.editOnKeyPress&&this.isEditable();if(_8&&this.$51j(_1,_2))return false;switch(_7){case this.$20s:return this.$24s(-1,0);case this.$20t:return this.$24s(1,0);case this.$60n:return this.$24s(0,-1);case this.$60o:return this.$24s(0,1)}
if(this.shouldNavigateOnTab()&&_7==this.$jf){if(isc.EH.shiftKeyDown())return this.$24s(0,-1,true);else return this.$24s(0,1,true)}
if(_7==this.$304){var _9=true;if(this.generateClickOnSpace){var _10=this.$240();if(_10==false)return false;else if(_10==true)_9=false}
if(this.generateDoubleClickOnSpace){var _11=this.$241();if(_11!=null)_9=false}
if(!_9)return false}else if(_7==this.$10j){var _9=true;if(this.generateClickOnEnter){var _10=this.$240();if(_10==false)return false;else if(_10==true)_9=false}
if(this.generateDoubleClickOnEnter){var _11=this.$241();if(_11!=null)_9=false}
if(!_9)return false}else if(_6.modifierKeyDown()&&(_7=="D"||_7=="R"||_7=="C"||_7=="V")){return this.$94i(_7)}else if(_6.modifierKeyDown()&&_7=="A"&&this.canSelectCells&&this.canSelectAll){this.selection.selectAll();return false}else if(_7==this.$51g&&this.editOnF2Keypress&&this.isEditable()&&this.editEvent!="none")
{var _12,_13;if(this.canSelectCells&&this.editByCell){var _14=this.getFocusCell();if(_14[0]>=0)_12=_14[0];if(_14[1]>=0)_13=_14[1]}else{_12=this.getFocusRow();if(_12<0)_12=null}
this.startEditing(_12,_13);return false}}
return true},isc.A.onBodyKeyPress=function isc_ListGrid_onBodyKeyPress(){},isc.A.$24s=function isc_ListGrid__navigateToNextCell(_1,_2,_3,_4,_5){if(!this.canSelectCells)return this.$318(_1,_4,_5);else if(this.selectionType==isc.Selection.NONE)return true;if(_5==null){_5=_3?this.tabKeyAction:this.getArrowKeyAction()}
if(_5==this.$27r)return true;var _6=isc.EH.shiftKeyDown();if(_5==this.$12b&&_6){this.$94n()}
var _7=this.getFocusCell(_6);var _8=_7[0],_9=_7[1];if(_8!=null&&_9!=null){if(!_4){_8+=_1;_9+=_2}}else{_8=_9=0}
var _10=this.getTotalRows(),_11=this.getTotalCols();var _12="done";if(_3)_12=this.rowEndEditAction||"next";if(_9<0||_9>=_11){if(_12=="same"){if(_2>0)_9=0;else _9=_10-1}else if(_12=="next"){if(_2>0){if(_8<_10-1){_8++;_9=0}else return true}else{if(_8>0){_8--;_9=_11-1}else return true}}else{if(_12=="stop")return false;return true}}
var _13=_5==this.$12b&&isc.EH.modifierKeyDown();if(_13){if(_1>0)_8=this.getTotalRows()-1;else if(_1<0)_8=0;if(_2>0)_9=this.getTotalCols()-1;else if(_2<0)_9=0;_1=-_1;_2=-_2}
while(!this.recordIsEnabled(this.getCellRecord(_8,_9),_8,_9)){if(_1!=0)_8+=_1;if(_2!=0)_9+=_2;if(_8==_7[0]&&_9==_7[1]){return true}
if(_9<0||_9>=_11){if(_12=="same"){if(_2>0)_9=0;else _9=_10-1}else if(_12=="next"){if(_2>0){if(_8<_10-1){_8++;_9=0}else return true}else{if(_8>0){_8--;_9=_11-1}else return true}}else{if(_12=="stop")return false;return true}}else if(_8<0||_8>=_10){return true}}
this.clearLastHilite();this.$24v=_8;this.$24w=_9;this.$97a=this.getFieldBody(_9);if(_5==this.$12b){if(_3)this.selection.deselectAll()
this.$24x(_8,_9)}
if(_5==this.$305)this.$24y(_8,_9);this.$965=true;this.scrollToCell(_8,_9);this.$965=false;return false},isc.A.focusInCell=function isc_ListGrid_focusInCell(_1,_2){this.$24v=_1;this.$24w=_2;var _3=this.getFieldBody(_2);this.$97a=_3;this.$24y(_1,_2);if(!_3.hasFocus())_3.focus()},isc.A.focusInRow=function isc_ListGrid_focusInRow(_1){this.$88(_1);if(!this.body.hasFocus())this.body.focus()},isc.A.$24y=function isc_ListGrid__hiliteCell(_1,_2){if(isc.isAn.Object(_1)){_2=_1.$24u;_1=_1.$24t}
if(_1==null||_2==null||_1<0||_2<0||_1>=this.getTotalRows()||_2>=this.getTotalCols())return;var _3=this.$97a,_4=_3.selection.firstCol||0;_3.lastOverRow=_1;_3.lastOverCol=_2-_4;_3.setRowStyle(_1,null,_2-_4)},isc.A.$97d=function isc_ListGrid__getLastMouseOverBody(){if(!this.frozenBody)return this.body;if(this.frozenBody.lastMouseOverRow==null&&this.frozenBody.lastMouseOverCol==null)return this.body;return this.frozenBody},isc.A.$94n=function isc_ListGrid__ensureValidSelectionOrigin(){if(!this.selection.$94l(this)){var _1=this.$97d(),_2=_1.selection.firstCol||0;var _3=_1.lastMouseOverRow||0,_4=_1.lastMouseOverCol||0,_5=this.getCellRecord(_3,_4+_2);if(this.recordIsEnabled(_5,_3,_4+_2)){_1.selectOnMouseDown(_5,_3,_4)}}},isc.A.$51j=function isc_ListGrid__editOnKeyPress(_1,_2){var _3=_2.keyName,_4=isc.EH.getKeyEventCharacter(_1);if(_3!=this.$51g&&_3!=this.$51i&&_3!=this.$51h&&(_3==this.$20w||isc.EH.$i8[_3]||_4==null||_4==isc.emptyString))
{return false}
var _5=this.getFocusCell(),_6=_5[0]||0,_7=_5[1]||0;if(this.$30a||_6<0||_7<0)return false;var _8;if(_3==this.$10j||_3==this.$51g)_4=null;var _9;if(_4!=null){if(_3==this.$51i||_3==this.$51h){_9=null}else if(this.autoSelectEditors){_9=_4}else{_9=this.getEditedCell(_6,_7)+_4}
this.$51m=true}
return this.handleEditCellEvent(_5[0],_5[1],this.$51l,_9)},isc.A.getArrowKeyAction=function isc_ListGrid_getArrowKeyAction(){var _1=this.arrowKeyAction;if(_1==this.$27r)return this.$27r;var _2=this.canSelectCells&&isc.EH.shiftKeyDown();if(isc.EH.modifierKeyDown()&&!_2)return this.$305;if(_1!=null)return _1;return this.selectionAppearance=="checkbox"?this.$305:this.$12b},isc.A.$318=function isc_ListGrid__navigateToNextRecord(_1,_2,_3,_4){var _3=_3==null?this.getArrowKeyAction():_3;if(_3==this.$27r||_1===0)return true;if(_1==null)_1=1;var _5;_5=this.getFocusRow(_1>0);if(_5==null)_5=this.$31q;var _6=_5,_7;if(!isc.isA.Number(_5)){_5=this.body?this.body.$27x()[0]:0;_7=_5}else{_5=_5+(_2?0:_1);_7=_6}
var _8=this.getTotalRows()-1;if(_5<0||_5>_8){if(_8<0)return true;_5=_7}
while(!this.recordIsEnabled(this.getCellRecord(_5,0),_5,0)){_5+=_1;if(_5<0||_5>_8){_5=_7;break}}
if(isc.screenReader){this.body.$86a(_5)}
if(_3==this.$305)this.$88(_5);else{this.$88(_5);if(_5==_6){var _9=this.$32b();if(_9>=0){if(this.body.selectionEnabled()&&this.recordIsEnabled(this.getCellRecord(_5,_9),_5,_9))
{this.selection.selectOnMouseDown(this,_5,_9);this.selection.selectOnMouseUp(this,_5,_9);this.fireSelectionUpdated()}}}
else if(_3==this.$12b)this.$24x(_5);else if(_3==this.$306)this.$32a(_5)}
if(!_4){this.$965=true;this.scrollRecordIntoView(_5)
this.$965=false}
return false},isc.A.$32b=function isc_ListGrid__getKeyboardClickNum(){var _1=this.keyboardClickField;if(_1!=null){var _2;if(isc.isA.Number(_1)&&_1>0&&_1<this.fields.length){_2=this.fields[_1]}else{_2=this.fields.find(this.fieldIdProperty,_1)}
if(_2&&_2.ignoreKeyboardClicks){this.logWarn("Explicitly specified keyboardClickField:"+this.keyboardClickField+" refers to a field which disallows keyboard click events.");_2=null}
if(_2!=null){return this.fields.indexOf(_2)}}
if(this.getCurrentCheckboxField()!=null){return this.getCheckboxFieldPosition()}
for(var i=0;i<this.fields.length;i++){if(this.fields[i].ignoreKeyboardClicks!=true)return i}
return-1},isc.A.$24x=function isc_ListGrid__generateCellClick(_1,_2,_3){if(!this.canSelectCells&&this.body.lastOverRow!=null&&this.body.lastOverRow!=_1)
{this.clearLastHilite()}
if(isc.isAn.Object(_1))_1=this.getRecordIndex(_1);if(!isc.isA.Number(_1)||_1<0)_1=0;if(_1>=this.data.getLength())_1=this.data.getLength()-1;var _4;if(this.canSelectCells){if(_2==null||_2<0||_2>=this.getTotalCols())return;_4=_3?this.getFieldBody(_2):this.$97a}else{_4=this.body;_4.$31p=_1;_2=this.$32b();if(_2==-1)return}
var _5=_4.selection.firstCol||0;var _6=this.getCellRecord(_1,_2),_7=this.selectOnGeneratedCellClick(_6,_1,_2,_4);if(_7)_4.selectOnMouseDown(this,_1,_2-_5);if(_7)_4.selectOnMouseUp(this,_1,_2-_5);return this.rowClick(this.getCellRecord(_1,_2),_1,_2,true)});isc.evalBoundary;isc.B.push(isc.A.selectOnGeneratedCellClick=function isc_ListGrid_selectOnGeneratedCellClick(_1,_2,_3,_4){return(_4.selectionEnabled()&&this.recordIsEnabled(_1,_2,_3))},isc.A.getFocusRow=function isc_ListGrid_getFocusRow(_1){if(this.body.$31p!=null&&((this.body.$31p==this.body.lastOverRow)||(this.body.$31p==this.$31q)))
{return this.body.$31p}
delete this.body.$31p;var _2=this.getSelection();if(_2.length==0)return null;_2=_2[(_1?_2.length-1:0)]
return this.getRecordIndex(_2)},isc.A.getFocusCell=function isc_ListGrid_getFocusCell(_1){if(!this.canSelectCells){return[this.getFocusRow(),this.$32b()]}
var _2,_3;if(this.$24v!=null&&this.$24w!=null){var _4=this.$97a;if(_4!=null){var _5=_4.selection.firstCol||0;if((this.$24v==_4.lastOverRow&&this.$24w==_4.lastOverCol+_5)||(this.$967==_4&&this.$24v==_4.$24n&&this.$24w==_4.$24o+_5))
{_2=this.$24v;_3=this.$24w}}}
if(_2==null||_3==null){if(_1){_2=this.selection.lastRow;_3=this.selection.lastCol}
var _4=this.$967;if(_4){var _5=_4.selection.firstCol||0;if(_2==null||_3==null){_2=_4.$24n;_3=_4.$24o+_5}}
if(_2==null||_3==null){if(this.getSelection().getLength>0){var _6=this.getSelection();_2=_6[0].$24t;_3=_6[0].$24u}}}
return[_2,_3]},isc.A.$240=function isc_ListGrid__generateFocusRecordClick(){var _1=this.getFocusCell(),_2=_1[0],_3=_1[1];if(_2!=null&&_3!=null){var _4=this.$24x(_2,_3,true);if(_4==null)_4=true;return _4}
return null},isc.A.$32a=function isc_ListGrid__generateRecordDoubleClick(_1,_2){if(_2==null)_2=this.$32b();if(_2==null||_2==-1)return;return this.rowDoubleClick(this.getCellRecord(_1,_2),_1,_2,true)},isc.A.$241=function isc_ListGrid__generateFocusRecordDoubleClick(){var _1=this.getFocusCell(),_2=_1[0],_3=_1[1];if(_2!=null&&_3!=null&&_3>=0){var _4=this.$32a(_2,_3);if(_4==null)_4=true;return _4}
return null},isc.A.scrollRecordToTop=function isc_ListGrid_scrollRecordToTop(_1){return this.scrollRecordIntoView(_1,"top")},isc.A.scrollRecordIntoView=function isc_ListGrid_scrollRecordIntoView(_1,_2){return this.scrollToCell(_1,null,null,_2)},isc.A.scrollToColumn=function isc_ListGrid_scrollToColumn(_1,_2){return this.scrollToCell(null,_1,_2)},isc.A.scrollToRow=function isc_ListGrid_scrollToRow(_1,_2){this.scrollToCell(_1,0,_2);return this},isc.A.scrollCellCallback=function isc_ListGrid_scrollCellCallback(_1,_2,_3,_4,_5,_6){if(_6==this.$77o){this.$77o=null;this.scrollToCell(_1,_2,_3,_4,_5)}},isc.A.scrollToCell=function isc_ListGrid_scrollToCell(_1,_2,_3,_4,_5){return this.scrollCellIntoView(_1,_2,_3,_4,_5)},isc.A.scrollCellIntoView=function isc_ListGrid_scrollCellIntoView(_1,_2,_3,_4,_5){if(isc.isA.Boolean(_3)&&(typeof _5=='undefined')){isc.logWarn("Center argument had been passed to a scroll method(scrollToCell, scrollCellIntoView, scrollToColumn or scrollRecordIntoView). This is deprecated. See documentation for detailed information about passed arguments.");_5=_4;_4=_3?"center":"top";_3=_3?"center":"left"}
if((isc.isAn.Array(this.data)&&this.data.length==0&&this.dataSource)||(isc.ResultSet&&isc.isA.ResultSet(this.data)&&!this.data.lengthIsKnown())){if(!this.$77o)this.$77o=1;else this.$77o+=1;var _6=this.$77o;isc.Page.waitFor(this,"dataArrived",{method:this.scrollCellCallback,args:[_1,_2,_3,_4,_5,_6],target:this});return}
if(!this.body||!this.body.isDrawn()){this.logInfo("scrollCellIntoView() called before the body has been drawn.  Cell "+_1+","+_2+" will scrolled into view on draw().");this.$30d=[_1,_2,_3,_4];return}
if(this.body.$qz||this.body.$rm){this.body.adjustOverflow("ScrollCellIntoView requesting size")}
if(_3!="left"&&_3!="center"&&_3!="right"){_3=this.scrollToCellXPosition}
if(_4!="top"&&_4!="center"&&_4!="bottom"){_4=this.scrollToCellYPosition}
var x,y,_9,_10,_11=this.body;if(_1!=null){if(!_11.$60s){y=_11.getRowTop(_1);_10=_11.getRowSize(_1)}else{var _12=_11.$252==null||_1<_11.$252||_1>_11.$253,_13=!_12;if(_13){var _14=_11.getRowTop(_1),_15=_11.getRowHeight?_11.getRowHeight(this.getCellRecord(_1),_1,0):_11.cellHeight,_16=_11.getScrollTop();if(_16>_14||((_11.getViewportHeight()+_16)<(_14+_15)))
{_13=false}}
if(!_13){_11.$27y=_1;if(_4=="center"){var _15=_11.getRowHeight?_11.getRowHeight(this.getCellRecord(_1),_1,0):_11.cellHeight;_11.$27z=-1*(_11.getViewportHeight()-_15)/2}else if(_4=="bottom"){var _15=_11.getRowHeight?_11.getRowHeight(this.getCellRecord(_1),_1,0):_11.cellHeight;_11.$27z=_15-_11.getViewportHeight()}else{_11.$27z=0}
if(_2!=null){if(_3=="left"){_11.$124k=this.getColumnLeft(_2)}else if(_3=="right"){_11.$124k=this.getColumnLeft(_2)+this.getColumnWidth(_2)-_11.getViewportWidth()}else{_11.$124k=this.getColumnLeft(_2)+(this.getColumnWidth(_2)-_11.getViewportWidth())/2}}
_11.$270()}
return}}
if(_2!=null){if(this.frozenFields!=null&&_2<this.frozenFields.length){_2=null}else{x=this.getColumnLeft(_2);_9=this.getColumnWidth(_2)}}
if(this.isDirty()||this.body.isDirty()){var _17;if(_1!=null){var _18=_11.getScrollHeight();if(y+_10>_18)_17=true}
if(!_17&&_2!=null){var _19=_11.getScrollWidth();if(x+_9>_19)_17=true}
if(_17)this.redraw("scrollIntoView")}
_11.scrollIntoView(x,y,_9,_10,_3,_4,null,null,_5)},isc.A.bodyScrolled=function isc_ListGrid_bodyScrolled(_1,_2,_3){if(_3){this.body.$80h=true;var _4=this.frozenBody;if(_4.$274){this.body.$27y=_4.$27y;this.body.$27z=_4.$27z;this.body.$271=_4.$271;this.body.$270()}else{this.body.scrollTo(null,_2,"scrollSync")}
delete this.body.$80h
return}
if(this.frozenBody!=null){this.frozenBody.$80h=true;var _5=this.body,_4=this.frozenBody;if(_5.$274){_4.$27y=_5.$27y;_4.$27z=_5.$27z;_4.$271=_5.$271;_4.$270()}else{_4.scrollTo(null,_2,"bodyScrollSync")}
delete this.frozenBody.$80h}
if(!this.$97e){this.syncHeaderScrolling(_1,_2);this.syncFilterEditorScrolling(_1,_2);this.syncSummaryRowScrolling(_1,_2)}
if(this.$30a&&this.$519){var _6=this.getEditForm(),_7=this.getEditRow(),_8=this.getEditCol(),_9=_6.getItem(this.getEditorName(_7,_8));if(_9){if(!_9.hasFocus&&(_6.hasFocus||isc.EH.getFocusCanvas()==null))
{this.$518(_8)}else{delete this.$519}}}},isc.A.syncHeaderScrolling=function isc_ListGrid_syncHeaderScrolling(_1,_2){if(_1!=null&&this.header){if(!this.isRTL()){if(_1!=this.header.getScrollLeft()){this.header.scrollTo(_1,null,"headerScrollSync")}}else{var _3=this.header,_4=this.body,_5=_3.getScrollWidth()-_3.getViewportWidth(),_6=_5-_3.getScrollLeft(),_7=_4.getScrollWidth()-_4.getViewportWidth(),_8=_7-_1;if(_8!=_6){_3.scrollTo(_5-_8,null,"scrollSync")}}}},isc.A.headerScrolled=function isc_ListGrid_headerScrolled(){if(!this.$32c){this.$32c=this.delayCall("syncBodyScrolling")}},isc.A.syncBodyScrolling=function isc_ListGrid_syncBodyScrolling(){delete this.$32c;var _1=this.header.getScrollLeft();if(this.body){if(!this.isRTL()){if(_1!=this.body.getScrollLeft())this.body.scrollTo(_1,null,"scrollSync")}else{var _2=this.header,_3=this.body,_4=_2.getScrollWidth()-_2.getViewportWidth(),_5=_4-_2.getScrollLeft(),_6=_3.getScrollWidth()-_3.getViewportWidth(),_7=_6-_1;if(_7!=_5){_3.scrollTo(Math.max(0,_6-_5),null,"scrollSync")}}}},isc.A.syncFilterEditorScrolling=function isc_ListGrid_syncFilterEditorScrolling(_1,_2){if(_1==null)return;if(this.filterEditor!=null&&this.filterEditor.body!=null){if(this.isRTL()){var _3=this.body.getViewportWidth()-this.filterEditor.body.getViewportWidth()
_1+=_3}
if(this.filterEditor.body.getScrollLeft()!=_1)
{this.filterEditor.body.scrollTo(_1,null,"scrollSync")}}},isc.A.syncSummaryRowScrolling=function isc_ListGrid_syncSummaryRowScrolling(_1,_2){if(_1==null)return;if(this.summaryRow!=null&&this.showGridSummary&&this.summaryRow.body!=null&&this.summaryRow.body.getScrollLeft()!=_1)
{this.summaryRow.body.scrollTo(_1,null,"scrollSync")}},isc.A.$88=function isc_ListGrid__hiliteRecord(_1){if(!isc.isA.Number(_1)){_1=this.getRecordIndex(_1)}
if(!isc.isA.Number(_1)||_1<0)_1=0;if(_1>=this.data.getLength())_1=this.data.getLength()-1;this.clearLastHilite();this.body.$31p=_1;this.body.lastOverRow=_1;this.body.lastOverCol=0;this.bodies.map("setRowStyle",_1)},isc.A.clearLastHilite=function isc_ListGrid_clearLastHilite(_1){var _2=_1?this.frozenBody:this.body;if(!_2)return;var _3=_2.lastOverRow,_4;if(!this.canSelectCells){_2.$31p=null;if(_3==null)return}else{if(!_1)this.clearLastHilite(true);this.$24v=null;this.$24w=null;this.$97a=null;_4=_2.lastOverCol;if(_3==null||_4==null)return;delete _2.lastOverCol}
delete _2.lastOverRow;if(this.showRollOver)_2.updateRollOver(_3,_4)},isc.A.setAccessKey=function isc_ListGrid_setAccessKey(_1){this.Super("setAccessKey",arguments)
if(this.body!=null)this.body.setAccessKey(_1)},isc.A.setFocus=function isc_ListGrid_setFocus(_1){if(this.body!=null){this.body.setFocus(_1)}},isc.A.focusAtEnd=function isc_ListGrid_focusAtEnd(_1){this.$kf(_1)},isc.A.$kk=function isc_ListGrid__canFocus(){if(this.body)return this.body.$kk();return false},isc.A.recordClick=function isc_ListGrid_recordClick(){return true},isc.A.onRecordClick=function isc_ListGrid_onRecordClick(_1,_2,_3,_4,_5,_6,_7){return true},isc.A.recordDoubleClick=function isc_ListGrid_recordDoubleClick(){},isc.A.setShowGridSummary=function isc_ListGrid_setShowGridSummary(_1){if(this.showGridSummary==_1)return;this.showGridSummary=_1;if(this.showGridSummary){this.showSummaryRow()}else{this.clearSummaryRow()}},isc.A.$134o=function isc_ListGrid__getFieldDependencyTable(){if(this.$134q==null){this.Super("$134o");var _1=this.fields,_2=this.$134q,_3=_1.filter(function(_5){return _5.type=="summary"});for(var i=0;i<_1.length;i++){var _5=_1[i],_6=_5.includeInRecordSummary;if(_6==true||_6!=false&&(_5.type=="integer"||_5.type=="float"))
{if(_2[_5.name]==null){_2[_5.name]={}}
var _7=_5.includeInRecordSummaryFields||_3;for(var j=0;j<_7.length;j++){var _9=_7[j];if(isc.isA.String(_9)){_9=this.getField(_9)}
_2[_5.name][_9.name]=_9}}}}
return this.$134q},isc.A.recalculateSummaries=function isc_ListGrid_recalculateSummaries(_1,_2,_3){_3=_3!=null?_3:true;this.calculateRecordSummaries(_1,_2,true,true,_3)},isc.A.$855=function isc_ListGrid__recalculateSummaries(_1,_2,_3,_4,_5){if(this.isGrouped&&this.showGroupSummary&&_3!=false){this.refreshGroupSummary(_1,_2)}
if(this.summaryRow!=null&&this.showGridSummary&&_4!=false){if(_5&&!this.isDirty())this.markForRedraw();this.summaryRow.$855(_2)}},isc.A.recalculateGridSummary=function isc_ListGrid_recalculateGridSummary(){if(this.showGridSummary&&this.summaryRow!=null){this.summaryRow.$855()}},isc.A.shouldShowGridSummary=function isc_ListGrid_shouldShowGridSummary(_1){if(_1.showGridSummary!=null)return _1.showGridSummary;return(_1.getGridSummary!=null||this.getGridSummaryFunction(_1)!=null)},isc.A.getGridSummaryFunction=function isc_ListGrid_getGridSummaryFunction(_1){if(!_1)return;var _2=_1.summaryFunction||isc.SimpleType.getDefaultSummaryFunction(_1.type);return _2},isc.A.getGridSummary=function isc_ListGrid_getGridSummary(_1){if(!_1||!this.data||(isc.isA.ResultSet(this.data)&&!this.data.lengthIsKnown()))
return;var _2=this.getOriginalData(),_3=isc.ResultSet&&isc.isA.ResultSet(_2),_4=isc.isA.Tree(_2);if(_4){_2=_2.getDescendants(_2.getRoot());_3=isc.ResultSet&&isc.isA.ResultSet(_2)}
if(_3&&!_2.allMatchingRowsCached()){this.logWarn("Unable to show summary values - dataset not completely loaded");return}
var _5=_3?_2.getRange(0,_2.getLength()):_2;var _6=this.getAllEditRows();if(_6!=null&&_6.length>0){_5=_5.duplicate();for(var i=0;i<_5.length;i++){var _8=_5[i];var _9=this.getEditSessionRowNum(_8);if(_9!=null)_5[i]=this.getEditedRecord(_9,null,true)}}
if(_1.getGridSummary){var _10;if(this.isGrouped&&this.showGroupSummary&&(this.groupTree!=null)){_10=this.assembleGroupSummaries()}
return _1.getGridSummary(_5,_1,_10)}
return this.getSummaryValue(_5,_1)},isc.A.getSummaryRowDataSource=function isc_ListGrid_getSummaryRowDataSource(){return this.summaryRowDataSource},isc.A.getSummaryRowCriteria=function isc_ListGrid_getSummaryRowCriteria(){if(this.summaryRowCriteria!=null)return this.summaryRowCriteria;var _1=this.getOriginalData();if(isc.ResultSet&&isc.isA.ResultSet(_1)){return this.data.getCriteria()}
return this.getInitialCriteria()},isc.A.getSummaryRowFetchRequestConfig=function isc_ListGrid_getSummaryRowFetchRequestConfig(){return isc.addProperties({textMatchStyle:this.autoFetchTextMatchStyle,showPrompt:false,startRow:0,endRow:1},this.summaryRowFetchRequestDefaults,this.summaryRowFetchRequestProperties)},isc.A.summaryRowFetchComplete=function isc_ListGrid_summaryRowFetchComplete(_1,_2,_3){this.updateFieldWidthsForAutoFitValue("gridSummary fetch complete");this.$45m()},isc.A.getGridSummaryData=function isc_ListGrid_getGridSummaryData(_1,_2){if(this.$84c&&!_1)return this.$84c;var _3;if(this.$84c&&_2!=null){_3=this.$84c}else{_2=this.completeFields||this.fields;_3=[];if(_2==null)return _3}
for(var i=0;i<_2.length;i++){var _5=_2[i],_6=_2[i].name;if(!this.shouldShowGridSummary(_5)){continue}
var _7=this.getGridSummary(_5),_8=this.getGridSummaryFunction(_5);if(!isc.isAn.Array(_8))_8=[_8];if(!isc.isAn.Array(_7)){_7=[_7]}
for(var _9=0;_9<_7.length;_9++){if(_3[_9]==null){_3[_9]={};_3[_9][this.gridSummaryRecordProperty]=true;_3[_9][this.recordCanSelectProperty]=false;if(_8[_9]=="count"){var _10=_3[_9][this.recordApplyPluralTitleProperty]||[];_10.add(_6);_3[_9][this.recordApplyPluralTitleProperty]=_10}}
_3[_9][_6]=_7[_9]}}
this.$84c=_3;return _3},isc.A.getGroupSummaryData=function isc_ListGrid_getGroupSummaryData(_1,_2,_3){return this.$1412(this.includeInSummaryProperty,this.applyFormulaAfterSummary,this.groupSummaryRecordProperty,null,_1,_2,_3)},isc.A.$1412=function isc_ListGrid__getGroupSummaryData(_1,_2,_3,_4,_5,_6,_7){if(this.getGroupSummaryData!=isc.ListGrid.getInstanceProperty("getGroupSummaryData")){return this.getGroupSummaryData(_5,_6,_7)}
var _8;if(_6&&_6.$134t&&_7!=null){_8=_6.$134t}else{_7=this.fields;_8=[]}
for(var i=0;i<_7.getLength();i++){var _10=_7[i],_11=_10.name,_12;if(this.shouldShowGroupSummary(_10)){var _13=(_4==null?(_10&&_10.userFormula!=null):_4[i]);_12=this.$1413(_1,_2,_13,_5,_10,_6);if(!isc.isAn.Array(_12))_12=[_12];var _14=this.getGridSummaryFunction(_10);if(!isc.isAn.Array(_14))_14=[_14];for(var _15=0;_15<_12.length;_15++){var _16=_8[_15];if(_16==null){_16=_8[_15]={};_16.customStyle=this.groupSummaryStyle;_16[this.recordEnabledProperty]=false;_16[_1]=false;_16[_3]=true;if(_14[_15]=="count"){var _17=_16[this.recordApplyPluralTitleProperty]||[];_17.add(_11);_16[this.recordApplyPluralTitleProperty]=_17}}
var _18=_12[_15];_16[_11]=_18}}}
if(_6)_6.$134t=_8;return _8},isc.A.assembleGroupSummaries=function isc_ListGrid_assembleGroupSummaries(_1,_2){var _3=this.groupTree;if(!_1)_1=_3.getRoot();if(!_2)_2=[];var _4=_3.getFolders(_1);for(var i=0;i<_4.length;i++){var _6=_4[i];if(this.groupByFieldSummaries==null||this.groupByFieldSummaries.contains(_6.groupName))
{var _7=_3.combineWithEditVals(_3.getRecordsInGroup(_6));var _8=this.getGroupSummaryData(_7,_6);for(var _9=0;_9<_8.length;_9++){var _10=isc.addProperties({},_8[_9]);delete _10.customStyle;delete _10[this.recordEnabledProperty];delete _10[this.includeInSummaryProperty];_10.groupName=_6.groupName;_10.groupValue=_6.groupValue;_2.add(_10)}}
this.assembleGroupSummaries(_4[i],_2)}
return _2},isc.A.getSummaryValue=function isc_ListGrid_getSummaryValue(_1,_2){return this.$1414(this.includeInSummaryProperty,this.applyFormulaAfterSummary,(_2&&_2.userFormula!=null),_1,_2)},isc.A.$1414=function isc_ListGrid__getSummaryValue(_1,_2,_3,_4,_5){if(_4==null)return null;var _6=[];for(var i=0;i<_4.length;i++){var _8=_4[i];if(!_8||(_8[_1]==false))continue;_6[_6.length]=_8}
var _9=this.getGridSummaryFunction(_5);if(_9==null)return null;if(this.$142d(_2,_3,_5))
{return[]}
if(!isc.isAn.Array(_9)){_9=[_9]}
var _10=[];for(var i=0;i<_9.length;i++){var _11=_9[i];if(_11!=null){_10[i]=isc.SimpleType.applySummaryFunction(_6,_5,_11,this)}}
return _10},isc.A.shouldShowGroupSummary=function isc_ListGrid_shouldShowGroupSummary(_1){if(_1.showGroupSummary!=null)return _1.showGroupSummary;return(_1.getGroupSummary!=null||this.getGridSummaryFunction(_1)!=null)},isc.A.getGroupSummary=function isc_ListGrid_getGroupSummary(_1,_2,_3){return this.$1413(this.includeInSummaryProperty,this.applyFormulaAfterSummary,(_2&&_2.userFormula!=null),_1,_2,_3)},isc.A.$1413=function isc_ListGrid__getGroupSummary(_1,_2,_3,_4,_5,_6){var _7;if(_5.getGroupSummary!=null){_7=_5.getGroupSummary(_4,_5,_6)}else{_7=this.$1414(_1,_2,_3,_4,_5)}
return _7},isc.A.getRecordSummary=function isc_ListGrid_getRecordSummary(_1,_2){return this.$141z(null,null,_1,_2)},isc.A.$141z=function isc_ListGrid__getRecordSummary(_1,_2,_3,_4){var _5=isc.isAn.Object(_3)?_3:this.getEditedRecord(_3);if(_4.getRecordSummary!=null){return _4.getRecordSummary(_5,_4)}
var _6=[],_7=this.fields;for(var i=0;i<_7.length;i++){var _9=_7[i];if(_9.name==_4.name){if(_4.partialSummary)break;continue}
var _10=_9.includeInRecordSummary;var _11=(_1==null?(_9&&_9.userFormula!=null):_1[i]),_12=(_2==null?(_9&&_9.userSummary!=null):_2[i]);if(_10==null&&(_9.type=="integer"||_9.type=="float")&&(!_11&&!_12))
{_10=true}
if(_10&&_9.includeInRecordSummaryFields!=null){if((isc.isA.String(_9.includeInRecordSummaryFields)&&_9.includeInRecordSummaryFields!=_4.name)||(isc.isAn.Array(_9.includeInRecordSummaryFields)&&!_9.includeInRecordSummaryFields.contains(_4.name)))
{_10=false}}
if(_10){_6.add(_9)}}
var _13=_4.recordSummaryFunction||"sum";var _14=isc.DataSource.applyRecordSummaryFunction(_13,_5,_6,_4);return _14},isc.A.shouldApplyRecordSummaryToRecord=function isc_ListGrid_shouldApplyRecordSummaryToRecord(_1){return _1&&(_1.type==this.$71t)&&(_1.summaryFunction!=null||_1.getGroupSummary!=null)},isc.A.shouldApplyUserFormulaBeforeSummary=function isc_ListGrid_shouldApplyUserFormulaBeforeSummary(_1){return _1&&_1.userFormula!=null&&!this.$117u(_1)},isc.A.shouldApplyUserFormulaAfterSummary=function isc_ListGrid_shouldApplyUserFormulaAfterSummary(_1){return this.$142d(this.applyFormulaAfterSummary,(_1&&_1.userFormula!=null),_1)},isc.A.$142d=function isc_ListGrid__shouldApplyUserFormulaAfterSummary(_1,_2,_3){return(_2&&this.$1411(_1,_3))},isc.A.calculateRecordSummaries=function isc_ListGrid_calculateRecordSummaries(_1,_2,_3,_4,_5,_6,_7){var _8=this.fields;if(_2!=null){var _9=this;if(!isc.isAn.Array(_2))_2=[_2];_2=_2.map(function(_15){return isc.isA.String(_15)?_9.getField(_15):_15});if(this.refreshDependentFieldsForSummaries){_2=this.$134n(_2)}
_8=_2}
if(!_7)this.invalidateUserCache(_1,_2);if(!_8)return;if(_1!=null&&!isc.isAn.Array(_1))_1=[_1];var _10=_1==null?this.getOriginalData():_1;if(_10==null||isc.isA.ResultSet(_10)&&!_10.lengthIsKnown())
{return}
var _11=false;if(!_6){var _12=[],_13=[];for(var i=0;i<_8.length;i++){var _15=_8[i];if(this.shouldApplyRecordSummaryToRecord(_15)){_12.add(_15)}else if(this.shouldApplyUserFormulaBeforeSummary(_15)){_13.add(_15)}}
if(_12.length>0||_13.length>0){for(var i=0;i<_10.getLength();i++){var _16=isc.isA.ResultSet(_10)?_10.getCachedRow(i):_10.get(i);if(_16==null)continue;var _17=this.getEditValues(_16),_18=!isc.isAn.emptyObject(_17),_19=_18?isc.addProperties({$132m:true},_16,_17):_16;if(_16==null)continue;for(var _20=0;_20<_12.length;_20++){var _15=_12[_20];if(!this.shouldShowRecordSummary(_15,_16)){continue}
var _21=_16[_15.name];var _22=this.getRecordSummary(_19,_15);_16[_15.name]=_22;if(!this.fieldValuesAreEqual(_15,_21,_22)){_11=true}}
for(var _20=0;_20<_13.length;_20++){var _15=_13[_20];if(!this.shouldShowUserFormula(_15,_16)){continue}
var _21=_16[_15.name],_23=this.getFormulaFieldValue(_15,_19);if(!this.fieldValuesAreEqual(_15,_21,_23)){if(_18){this.invalidateUserCache(_16,[_15]);_16[_15.name]=_23}
_11=true}}}}}
if((!this.isGrouped||!this.showGroupSummary)&&(this.summaryRow==null||!this.showGridSummary))
{return}
this.$855(_1,_2,_3!=null?_3:_11,_4!=null?_4:_11,!_5)},isc.A.getSummaryRow=function isc_ListGrid_getSummaryRow(){if(!this.summaryRow){var _1=this.getSummaryRowDataSource();var _2;if(this.completeFields)_2=this.completeFields.duplicate();else if(this.fields)_2=this.fields.duplicate();var _3=this.summaryRowHeight;this.summaryRow=this.createAutoChild("summaryRow",{showEmptyMessage:false,warnOnReusedFields:false,autoDraw:false,width:"100%",height:_3,autoFitData:"vertical",bodyOverflow:"hidden",showHeader:false,getBaseStyle:function(){return this.creator.summaryRowStyle},alternateRecordStyles:false,disabled:this.disabled,applyFormulaAfterSummary:this.applyFormulaAfterSummary,$67b:function(){},$31s:function(_8){return false},dataSource:_1,data:_1==null?this.getGridSummaryData():null,$855:function(_8){var _4=this.creator,_5=_4.data;if(!_4.fields||(isc.isA.ResultSet(_5)&&!_5.lengthIsKnown()))return;if(this.dataSource!=null){var _6=_4.getSummaryRowCriteria(),_7=isc.ResultSet&&isc.isA.ResultSet(this.data)&&!this.data.willFetchData(_6);if(_7)this.invalidateCache();this.fetchData(_6,{target:_4,methodName:"summaryRowFetchComplete"},_4.getSummaryRowFetchRequestConfig())}else{this.setData(_4.getGridSummaryData(true,_8))}},fieldSourceGrid:this,fields:_2,recordApplyPluralTitleProperty:this.recordApplyPluralTitleProperty,gridSummaryRecordProperty:this.gridSummaryRecordProperty,invalidSummaryValue:this.invalidSummaryValue,emptyCellValue:this.emptyCellValue,skipAutoFitWidths:true,getFieldWidths:function(){return this.creator.getFieldWidths()},fieldShouldBeVisible:function(_8,_9){return this.fieldSourceGrid.fieldShouldBeVisible(_8,_9)},canEditCell:function(){return false},$94m:true})}else{this.summaryRow.setDataSource(this.getSummaryRowDataSource(),this.completeFields.duplicate());this.summaryRow.$855()}
return this.summaryRow},isc.A.showSummaryRow=function isc_ListGrid_showSummaryRow(){var _1=this.gridComponents.indexOf("summaryRow");if(_1==-1){this.logWarn("showGridSummary set to true, but gridComponents array does not include an entry for the summary row - not showing.");return}
this.updateGridComponents()
this.syncSummaryRowScrolling(this.body.getScrollLeft(),this.body.getScrollTop)},isc.A.clearSummaryRow=function isc_ListGrid_clearSummaryRow(){if(this.summaryRow&&this.summaryRow.parentElement==this){this.removeMember(this.summaryRow)}},isc.A.setShowFilterEditor=function isc_ListGrid_setShowFilterEditor(_1){if(this.showFilterEditor==_1)return;this.showFilterEditor=_1;if(_1){var _2=this.gridComponents.indexOf("filterEditor");if(_2==-1){_1=false;this.logWarn("setShowFilterEditor(true) called, but gridComponents array does not include the filterEditor. FilterEditor will not be shown.")}}
if(_1){if(this.isDrawn()){var _3=this.getViewState();this.updateGridComponents();this.setViewState(_3)}}else if(this.filterEditor){this.filterEditor.destroy();this.filterEditor=null}
this.layoutChildren()},isc.A.makeFilterEditor=function isc_ListGrid_makeFilterEditor(){var _1=isc.addProperties({autoDraw:false,warnOnReusedFields:false,reverseRTLAlign:this.reverseRTLAlign,dataPath:this.dataPath,setDataPath:function(_2){this.dataPath=_2},$67b:function(){},height:this.filterEditorHeight,sourceWidget:this,ID:this.getID()+"filterEditor",_generated:true,locatorParent:this,fieldShouldBeVisible:function(_2,_3){return this.sourceWidget.fieldShouldBeVisible(_2,_3)},fieldSourceGrid:this,actionType:"filter",actionButtonPrompt:this.filterButtonPrompt,actionButtonProperties:this.filterButtonProperties,fetchDelay:this.fetchDelay,allowFilterExpressions:this.allowFilterExpressions,expressionDataSource:this.getDataSource(),discardEditsOnHideField:false},this.filterEditorDefaults,this.filterEditorProperties);if(_1.bodyDefaults==null)_1.bodyDefaults={};_1.bodyDefaults.focusChanged=function(_2){if(_2&&isc.EH.isKeyEvent()){if(this.parentElement.isA("RecordEditor")){this.parentElement.startEditing()}else{if(this.parentElement.parentElement.isA("RecordEditor")){this.parentElement.parentElement.startEditing()}}}}
this.filterEditor=isc.RecordEditor.create(_1)},isc.A.getFilterEditorValueMap=function isc_ListGrid_getFilterEditorValueMap(_1){return _1.filterEditorValueMap||_1.valueMap||(_1.filterEditorProperties&&_1.filterEditorProperties.valueMap)},isc.A.getFilterEditorType=function isc_ListGrid_getFilterEditorType(_1){if(_1.filterEditorType!=null)return _1.filterEditorType;if(isc.SimpleType.inheritsFrom(_1.type,"date")&&this.getDataSource()&&this.getDataSource().supportsAdvancedCriteria())
{return"MiniDateRangeItem"}
var _2=_1.type;var _3=(_2==this.$12e||_2==this.$52x||_2==this.$677);if(_3&&_1.editorType==null){return"StaticTextItem"}
var _4=isc.addProperties({},_1,{canEdit:_1.canFilter!==false,length:null});if(_4._constructor!=null)delete _4._constructor;if(_1.filterEditorType!=null)_4.editorType=_1.filterEditorType;isc.addProperties(_4,_1.filterEditorProperties);var _2=isc.DynamicForm.getEditorType(_4,this);return _2},isc.A.getFieldFilterEditorProperties=function isc_ListGrid_getFieldFilterEditorProperties(_1){var _2=_1.filterEditorProperties||{};if(_1.filterOperator)_2.operator=_1.filterOperator;return _2},isc.A.getFilterEditor=function isc_ListGrid_getFilterEditor(){return this.filterEditor},isc.A.setFilterEditorCriteria=function isc_ListGrid_setFilterEditorCriteria(_1){if(this.filterEditor){this.setFilterValues(_1)}},isc.A.getFilterEditorCriteria=function isc_ListGrid_getFilterEditorCriteria(_1){if(this.filterEditor){if(!_1||!this.filterEditor.getEditForm()){return this.filterEditor.getValuesAsCriteria(this.autoFetchTextMatchStyle)}else{var _2=this.filterEditor.getEditForm().getItems(),_3=true,_4={},_5={_constructor:"AdvancedCriteria",operator:"and",criteria:[]};for(var i=0;i<_2.length;i++){if(_2[i].hasAdvancedCriteria()){var _7=_2[i].getCriterion();if(_7!=null){_3=false;_5.criteria.add(_7)}}else{var _8=_2[i].getValue();if(_8!=null){_4[_2[i].getCriteriaFieldName()]=_8}}}
if(!_3){_4=isc.DataSource.combineCriteria(_4,_5)}
return _4}}},isc.A.setCriteria=function isc_ListGrid_setCriteria(_1){if(this.filterEditor!=null){this.setFilterValues(_1,true)}
var _2=this.isGrouped?this.getOriginalData():this.data;if(_2&&_2.setCriteria)_2.setCriteria(_1);else this.initialCriteria=_1},isc.A.filterData=function isc_ListGrid_filterData(_1){if(this.filterEditor!=null){this.setFilterValues(_1,true)}
return this.Super("filterData",arguments)},isc.A.fetchData=function isc_ListGrid_fetchData(_1){if(this.filterEditor!=null){this.setFilterValues(_1,true)}
return this.Super("fetchData",arguments)},isc.A.setFilterValues=function isc_ListGrid_setFilterValues(_1,_2){this.$32d=isc.addProperties({},_1);this.initialCriteria=this.$32d;this.updateFilterEditor(_2)},isc.A.updateFilterEditor=function isc_ListGrid_updateFilterEditor(_1){var _2=this.filterEditor;if(!_2)return;var _3=this.$32e();this.filterEditor.setValuesAsCriteria(_3,true,_1)},isc.A.$32e=function isc_ListGrid__getFilterEditorValues(){var _1=isc.addProperties({},this.$32d);if(this.updateFilterEditorValues!=null){_1=this.updateFilterEditorValues(_1,this.autoFetchTextMatchStyle)}
if(_1==null){_1={};for(var i=0;i<this.completeFields.length;i++){_1[this.completeFields[i].name]=this.completeFields[i].defaultFilterValue}}
return _1});isc.evalBoundary;isc.B.push(isc.A.clearFilterValues=function isc_ListGrid_clearFilterValues(){this.$32d=null;this.updateFilterEditor(true)},isc.A.handleFilterEditorSubmit=function isc_ListGrid_handleFilterEditorSubmit(_1,_2,_3){if(this.filterEditorSubmit!=null&&this.filterEditorSubmit(_1)==false)return;this.filterData(_1,_3,_2)},isc.A.getInitialCriteria=function isc_ListGrid_getInitialCriteria(){var _1={},_2,_3=this.getFields(),_4;for(var i=0;i<_3.length;i++){if(_3[i].defaultFilterValue!==_4){_2=true;var _6=this.getFieldName(_3[i]);_1[_6]=_3[i].defaultFilterValue}}
if(!_2){_1=this.initialCriteria||this.getCriteria()}else{isc.addProperties(_1,this.initialCriteria||this.getCriteria())}
return _1},isc.A.$v6=function isc_ListGrid__adjustSpecialPeers(_1){if(this.filterEditor!=null)this.filterEditor.setZIndex(_1-1);return this.Super("$v6",arguments)},isc.A.canEditCell=function isc_ListGrid_canEditCell(_1,_2){if(_2<0||_2>=this.fields.length)return false;if(this.allowRowSpanning&&this.rowSpanEditMode=="first"){var _3=this.getCellStartRow(_1,_2);if(_3!=_1){return false}}
var _4=this.getCellRecord(_1,_2);if(_4!=null){if(!this.recordIsEnabled(_4,_1,_2))return false;if(this.$32o==_4)return false}
var _5=this.getField(_2);if(_5&&_5.disabled)return false;if(_5&&_5.type=="summary")return false;if(!this.isEditable()||this.getCellBooleanProperty("canEdit",_1,_2,(_4!=null?this.recordEditProperty:null))==false){return false}
if((_5.userFormula||_5.userSummary)&&_5.canEdit==null)return false;return true},isc.A.isEditable=function isc_ListGrid_isEditable(){if(this.canEdit==false)return false;if(this.canEdit==true||this.canEdit==this.$18q){var _1=this.getFields()||[];for(var i=0;i<_1.length;i++){if(_1[i].canEdit!=false)return true}
return false}else{var _1=this.getFields()||[];for(var i=0;i<_1.length;i++){if(_1[i].canEdit==true)return true}
return false}},isc.A.setCanEdit=function isc_ListGrid_setCanEdit(_1){if(_1==false){if(this.getEditRow()!=null)this.cancelEditing(isc.ListGrid.PROGRAMMATIC);this.canEdit=false}else{this.canEdit=_1}},isc.A.setFieldCanEdit=function isc_ListGrid_setFieldCanEdit(_1,_2){if(isc.isA.String(_1))_1=this.getField(_1);if(_1==null||!this.completeFields.contains(_1)||_1.canEdit==_2)return;_1.canEdit=_2;if(this.$30a){var _3=this.getEditRow(),_4=_1[this.fieldIdProperty],_5=this.getColNum(_1);if(this.editByCell){if(!_2&&_5==this.getEditCol()){this.cancelEditing(isc.ListGrid.PROGRAMMATIC)}}else if(_5>=0){if(!_2&&_5==this.getEditCol()){var _6=this.$286.getItem(_4),_7=_6.hasFocus;var _8=this.findNextEditCell(_3,_5,-1,true,false,false,true);if(_8==null||_8[0]!=_3)
_8=this.findNextEditCell(_3,_5,1,true,false,false,true);if(_8==null||_8[0]!=_3){this.cancelEditing(isc.ListGrid.PROGRAMMATIC);return}
this.startEditing(_8[0],_8[1],!_7)}
this.refreshCell(this.getEditRow(),_5)}}},isc.A.handleEditCellEvent=function isc_ListGrid_handleEditCellEvent(_1,_2,_3,_4){if(_3==this.$51l)this.$51k=true;else delete this.$51k
if(_1<0||_2<0)return false;if(this.allowRowSpanning){_1=this.getCellStartRow(_1,_2)}
if(this.editByCell){if(!this.canEditCell(_1,_2))return false}else{var _5=this.findNextEditCell(_1,_2,-1,true,true,false,true);if(_5==null||_5[0]!=_1)
_5=this.findNextEditCell(_1,_2,1,true,false,false,true);if(_5==null||_5[0]!=_1)return false;_2=_5[1]}
var _6;if(_4!==_6){this.setEditValue(_1,_2,_4)}
return this.startEditing(_1,_2,null,_3)},isc.A.startEditing=function isc_ListGrid_startEditing(_1,_2,_3,_4,_5){if(!this.canEdit&&!(this.completeFields||this.fields).getProperty("canEdit").or()){this.canEdit=true}
if(this.completeFields==null)this.setFields(this.fields);var _6=(_1==null),_7=(_2==null);if(_6||_7){var _8=(_6?0:_1),_9=(_7?0:_2);var _10=this.findNextEditCell(_8,_9,1,_7,true);if(_10==null){this.logInfo("startEditing() passed bad cell coordinates:"+[_1,_2],"gridEdit")}else{this.logInfo("startEditing() using derived coordinates:"+_10,"gridEdit");_1=_10[0];_2=_10[1]}}
if(_1==null||_1<0||_1>this.getTotalRows()){if(!_5){this.logWarn("startEditing() passed bad cell coordinates:"+[_1,_2]+", can't edit"+this.getStackTrace(),"gridEdit")}
return false}
if(!this.canEditCell(_1,_2)){this.logInfo("startEditing(): cell "+[_1,_2]+" is non editable. Returning.","gridEdit");return false}
if(this.$30a){this.$32f((_4||isc.ListGrid.PROGRAMMATIC),this.getEditRow(),this.getEditCol(),_1,_2)}else{this.$31u(_1,_2,_3)}
return true},isc.A.isEditingCell=function isc_ListGrid_isEditingCell(_1,_2){return this.$30a&&this.getEditRow()==_1&&this.canEditCell(_1,_2)&&(!this.editByCell||this.getEditCol()==_2)},isc.A.$32f=function isc_ListGrid__changeEditCell(_1,_2,_3,_4,_5){var _6=this.getEditValue(_2,_3);var _7=this.getFieldName(_3),_8=this.$286,_9=_8?_8.getItem(_7):null,_10=_9?!_9.$30w:true;if(_9){delete _9.$30w;delete _9.$30v;if(this.$32g(_9,_2,_4,_5)){this.$32h(_9,_3)}}
var _11=(_4!=_2),_12=this.$300(_2,_3);if(_10){var _13=!this.$32i(_1,_2,_3,_6);if(_11&&!_13){_13=!this.$32j(_1,_2,_12)}
if(_13){if(_1==isc.ListGrid.EDIT_FIELD_CHANGE){var _14=this.getFieldName(_5);if(_9&&_8.getItem(_14).hasFocus){_9.focusInItem()}}
return false}}
var _15=(this.autoSaveEdits&&((_11&&this.shouldSaveOnRowExit(_2,_3,_1))||this.shouldSaveOnCellExit(_2,_3,_1)));if(!_15&&this.$32k()){var _16,_17=_11&&this.shouldValidateByRow(_2,_3,_1);if(_17&&!this.usingCellRecords){_16=!this.validateRow(_2)}else{if(_17||this.shouldValidateByCell(_2,_3,_1))
{_16=!this.validateCell(_2,_3)}}
if(this.stopOnErrors&&_16)return false}
if(_15){return this.$32l(_4,_5,_1)}else{this.$31u(_4,_5)}
if(_11&&this.isGrouped&&(!_15||!this.shouldSaveLocally())){this.$75i(_2)}},isc.A.$75i=function isc_ListGrid__updateGroupForEditValueChange(_1){if(!this.isGrouped||!isc.isA.Tree(this.data))return;var _2=this.data.get(_1),_3=_2,_4=false;if(_2==null)return;var _5=this.getGroupByFields();if(!isc.isAn.Array(_5))_5=[_5];var _6=this.getEditedRecord(_1);for(var i=_5.length-1;i>=0;i--){var _8=_5[i],_3=this.data.getParent(_3);if(_3==null||_3.groupName!=_8){this.logWarn("error updating group for edit value change - unexpected group tree structure. Regrouping.");_4=true;break}
var _9=_6[_8];if(_3.groupValue!=_9){_4=true;break}}
if(_4){this.regroup();this.$31n();this.markForRedraw()}
return _4},isc.A.$32g=function isc_ListGrid__shouldParkFocus(_1,_2,_3,_4){if(!isc.Browser.isIE)return false;var _5=(isc.isA.PopUpTextAreaItem(_1)&&_1.$32m&&_1.$21t.hasFocus)||(_1.hasFocus&&isc.FormItem.$12r(_1));if(!this.editByCell&&_3==_2)return false;var _6=this.getEditorType(this.getField(_4),this.getCellRecord(_3,_4));return!(_6==null||isc.FormItem.$12r(_6,true))},isc.A.$31u=function isc_ListGrid__startEditing(_1,_2,_3){if(_1=="delayed"){var _4=this.$32n;if(_4==null)return;_1=_4[0];_2=_4[1];_3=_4[2]}else if(this.isDrawn()&&(!this.body.readyToRedraw()||(this.frozenBody&&!this.frozenBody.readyToRedraw())))
{if(!this.$32n){this.delayCall("$31u",['delayed'],0)}
this.$32n=[_1,_2,_3];return}
delete this.$32n;if(!_3){this.$24v=_1;this.$24w=_2;this.$97a=this.getFieldBody(_2);if(this.selectOnEdit&&this.$97a!=null){this.$967=this.$97a;this.$967.$24n=_1;this.$967.$24o=_2}}
var _5=this.getEditRow()!=_1;if(!_5&&!_3&&(this.getEditCol()==_2)){this.getEditForm().focusInItem(this.getEditorName(_1,_2));return}
this.logInfo("Starting editing at row "+_1+", colNum "+_2,"gridEdit");if(this.$32o!=null)this.closeRecord();if(this.$30a){if(this.editByCell||_5){this.hideInlineEditor(false,true)}}
var _6=(this.$32p==null)||_5||this.saveByCell;if(_6){this.$32p=this.$32q()}
var _7=this.getCellRecord(_1,_2);if(_7==Array.LOADING){return true}
var _8=this.$30a&&(this.getEditRow()==_1)
this.initializeEditValues(_1,_2,_8);if(this.selectOnEdit&&_7!=null)this.selectRecordForEdit(_7,_2);if(this.modalEditing)this.clearLastHilite();if(_7==null&&this.addNewBeforeEditing){this.$285=_1;this.$30u=_2;var _9=this.shouldWaitForSave();var _10="this.$32r("+_9+","+_3+")";this.saveEdits(isc.ListGrid.PROGRAMMATIC,_10);if(_9)return;else{_1=this.$285;_2=this.$30u}}
this.showInlineEditor(_1,_2,true,_5,_3);return true},isc.A.selectRecordForEdit=function isc_ListGrid_selectRecordForEdit(_1,_2){if(!this.editByCell)_1.$29m=true;if(this.canSelectCells){var _3=this.getRecordCellIndex(_1,_2);this.selection.selectSingleCell(_3[0],_3[1]);this.fireSelectionUpdated()}else if(this.selection!=null&&(!this.selection.isSelected(_1)||this.selection.multipleSelected()))
{if(this.selectionType==isc.Selection.NONE){this.logInfo("selectOnEdit is true, but this.selectionType is set to 'none'. Unable to perform a selection on edit.","gridEdit")}else if(this.selectionType==isc.Selection.SIMPLE)this.selection.select(_1);else this.selection.selectSingle(_1);this.fireSelectionUpdated()}
delete _1.$29m},isc.A.$51n=function isc_ListGrid__updateEditorSelection(_1){if(!isc.isA.TextItem(_1)&&!isc.isA.TextAreaItem(_1)&&!(isc.isA.DateItem(_1)&&_1.useTextField))return;if(_1.$897)return;var _2=isc.isA.DateItem(_1)?_1.dateTextField.getDataElement():_1.getDataElement();if(!_2)return;if(this.$51m||!this.autoSelectEditors){var _3=_1.getDataElement().value||"";_1.setSelectionRange(_3.length,_3.length);delete this.$51m}else{_1.selectValue()}},isc.A.$32r=function isc_ListGrid__updateNewEditRowValues(_1,_2){var _3=this.$285,_4=this.$30u,_5=this.getCellRecord(_3,_4);if(_5!=null&&_5!="loading"){var _6=this.getEditValues(_3,_4);for(var i in _5){if(_5[i]!=null&&_6[i]==null){_6[i]=_5[i]}}}
if(_1)this.showInlineEditor(_3,_4,true,true,_2);else this.updateEditRow(_3)},isc.A.editField=function isc_ListGrid_editField(_1,_2){if(this.completeFields==null)this.setFields(this.fields);var _3;if(isc.isA.Number(_1))_3=_1;else _3=this.fields.findIndex(this.fieldIdProperty,_1);if(_2==null){_2=this.getEditRow();if(_2==null){this.logWarn("editField(): unable to determine which row to edit - returning.","gridEdit");return}}
return this.startEditing(_2,_3)},isc.A.showInlineEditor=function isc_ListGrid_showInlineEditor(_1,_2,_3,_4,_5){if(this.$30a){if(_1!=this.getEditRow()||(this.editByCell&&_2!=this.getEditCol())){this.logWarn("Unexpected call to 'showInlineEditor' during another edit - cancelling previous edit","gridEdit");this.cancelEditing();this.startEditing(_1,_2);return}}
if(this.$82k&&this.$82k[_1]==_1&&this.$82k[_2]==_2)
{return}
this.$82k=[_1,_2];var _6=this.suppressEditScrollIntoView||_5;this.logDebug("showing inline editor at: "+[_1,_2]+", will focus: "+!_5,"gridEdit");var _7=this.body&&(!this.body.shouldShowAllColumns()||!this.body.showAllRows);if(_7&&!_6){var _8=this.body.scrollRedrawDelay;this.body.scrollRedrawDelay=0;this.scrollToCell(_1,_2,"left","top");this.body.scrollRedrawDelay=_8}
if(this.currentRollOverCanvas&&this.currentRollOverCanvas.$289==_1){this.updateRollOverCanvas(this.currentRollOverCanvas.$289,this.currentRollOverCanvas.$57n,true)}
var _9;if(!this.$30a){var _10=this.makeEditForm(_1,_2);if(this.$686()&&_10){this.logInfo("Edit Form rebuilt with alwaysShowEditors:true, requires full redraw","inactiveEditorHTML");_9=true}}
this.$285=_1;this.$30u=_2;this.$31q=_1;this.$32s(_1,_2,_9);this.$82k=null;if(this.body&&!_6){var _11;if(!_7)_11=true;else{var _12=this.body,_13=_12.getRowTop(_1),_14=_12.getRowSize(_1),_15=_12.getScrollTop(),_16=_12.getViewportHeight();_11=(_13<_15)||(_13+_14>_15+_16)}
if(_11){this.scrollToCell(_1,_2,"left","top")}}
if(!this.isDrawn()){return}
this.$32t();var _17=this.getEditorName(_1,_2),_18=this.$286.getItem(_17);if(_18==null){this.logWarn("ListGrid showing inline editor. Unable to get a pointer to the edit form item for field:"+_17)}else{if(_3)_18.$30w=true;if(_4)_18.$30v=true;if(!_5){if(isc.Browser.isMoz){var _19=this.body.getClipHandle(),_20=_19.scrollTop}
var _21=isc.EH.lastEvent;var _22=false;if(isc.Browser.isIE&&_21.eventType==isc.EH.MOUSE_DOWN){var _23=_21.target;if(_23!=this.$286){_22=true;var _24=this.$286.getCanvasItemCanvii();for(var i=0;i<_24.length;i++){if(_24[i]==_23||_24[i].contains(_23)){_22=false;break}}}}
if(isc.Browser.isIE){var _26=isc.ListGrid.$32u;if(_26&&(_26.hasFocus||_26.itemHasFocus()))_22=true}
if(isc.Browser.isSafari&&this.alwaysShowEditors){_22=true}
if(_22){this.$32v=isc.Timer.setTimeout(this.$286.getID()+".focusInItem('"+_17+"');",0)}else{if(isc.Browser.isMoz&&this.body.overflow==isc.Canvas.VISIBLE){this.adjustOverflow()}
this.$286.focusInItem(_17)}}}},isc.A.$32s=function isc_ListGrid__showEditForm(_1,_2,_3){var _4=this.$30a;this.$30a=true;if(!this.isDrawn()||!this.body)return;var _5=this.isEmpty()||(!_4&&(_1>=this.data.getLength())&&(this.showNewRecordRow||(this.body.getTableElement(_1)==null)));var _6=this.$686();var _7=this.getCellRecord(_1,_2);if(_7&&this.$916(_7)){}
if(_3||_5||this.body.isDirty()||(this.frozenBody&&this.frozenBody.isDirty())){var _8=this.bodyLayout?this.bodyLayout:this.body;_8.redraw("Showing editor");return}
if(this.editByCell){var _9=(this.frozenFields!=null)||(this.baseStyle==null);if(_9)this.refreshRow(_1);else this.refreshCell(_1,_2)}else{var _10=this.getDrawnFields();for(var i=0;i<_10.length;i++){if(this.isCheckboxField(_10[i]))continue;var _12=_10[i],_13=_10[i][this.fieldIdProperty],_14=this.$286.getItem(_13),_2=_14.colNum,_15=!!(_4&&_14.isDrawn()),_16=this.canEditCell(_1,_2);if(_15!=_16)this.refreshCell(_1,_2);else if(this.selectOnEdit||this.lastOverRow){var _8=(_12.frozen&&!this.$54d)?this.frozenBody:this.body;_8.$29h(this.getCellRecord(_1,_2),_1,_2)}}}},isc.A.$32t=function isc_ListGrid__showEditClickMask(){if(!this.modalEditing){if(this.canHover)this.stopHover();return}
if(!this.$286.clickMaskUp()){if(!this.$32w)
this.$32w=isc.$aq(this.getID()+".$32x()");var _1=[this.$286];if(isc.ListGrid.$32u!=null){_1.add(isc.ListGrid.$32u)}
this.$286.showClickMask(this.$32w,(this.stopOnErrors?isc.EH.SOFT_CANCEL:isc.EH.SOFT),_1)}},isc.A.stopHover=function isc_ListGrid_stopHover(){if(this.$30a&&isc.EH.getTarget()==this.getEditForm())return;return this.Super("stopHover",arguments)},isc.A.shouldWaitForSave=function isc_ListGrid_shouldWaitForSave(){if(this.stopOnErrors&&!this.waitForSave){var _1="Note: ListGrid initialized with 'waitForSave' false, and 'stopOnErrors' true. In this case user input will be be blocked during save, to allow server side  errors to be determined before the editor is hidden. Setting 'waitForSave' to true.";if(this.waitForSave==false)this.logWarn(_1,"gridEdit");else this.logInfo(_1,"gridEdit");this.waitForSave=true}
return!!(this.waitForSave||this.stopOnErrors)},isc.A.hideInlineEditor=function isc_ListGrid_hideInlineEditor(_1,_2){if(_1){if(!this.hasFocus&&!(this.body&&this.body.hasFocus)&&!(isc.ListGrid.$32u&&isc.ListGrid.$32u.hasFocus))
{var _3=this.getEditForm();if(_3==null){_1=false}else if(!_3.hasFocus){var _4=isc.EH.getFocusCanvas();if(!_4||!this.body||!this.body.contains(_4)){_1=false}}}}
if(isc.Browser.isFirefox){var _3=this.getEditForm();if(_3!=null){var _5=_3.getFocusItem();if(_5!=null&&_5.hasFocus){var _6=_5.$166();if(_6&&_6.blur)_6.blur()}}}
if(!this.$30a)return false;this.$30a=null;this.$519=null;var _7=this.$285,_8=this.$30u;this.$285=this.$30u=null;if(!_2)this.$286.hideClickMask();if(this.getEditValues(_7,_8)!=null&&(!this.$31o||!this.$31o[this.getEditValuesID(_7,_8)])&&!this.recordHasChanges(_7,_8,false)&&!this.recordMarkedAsRemoved(_7))
{this.logInfo("hideInlineEditor for row with no edits - dropping edit values","gridEdit");this.$321(_7,_8)}
if(!this.body)return true;var _3=this.$286;if(_3.hasFocus){_3.blur()}
if(isc.Browser.isIE){var _9=_3.getFocusSubItem(),_10=isc.EH.$ld;if(_3.hasFocus||(_10&&((_10==_3)||(isc.EH.$ld.form==_3))))
{_9.elementBlur();this.$32h(_9,_8)}}
var _11=this.getCellRecord(_7,_8),_12=false;if(_11&&this.$916(_11)){_12=true}
if(!this.body.isDirty()&&(!this.bodyLayout||!this.bodyLayout.isDirty())&&!this.isDirty())
{if(_12||_7>=this.getTotalRows()){var _13=this.bodyLayout||this.body;_13.markForRedraw("Editor Hidden")}else{if(this.editByCell){var _14=(this.frozenFields!=null)||(this.baseStyle==null);if(_14)this.refreshRow(_7);else this.refreshCell(_7,_8)}
else this.refreshRow(_7);this.refreshGroupSummary(_7)}}
if(_1){this.$30c=true;this.body.focus()}
return true},isc.A.$32h=function isc_ListGrid__parkFocus(_1,_2){if(isc.isA.TextItem(_1)||isc.isA.TextAreaItem(_1)||isc.isA.PopUpTextAreaItem(_1))
{var _3=isc.ListGrid.$32u;if(!_3){_3=isc.ListGrid.$32u=isc.DynamicForm.create({pointersToThis:[{object:isc.ListGrid,property:"$32u"}],getFocusParkItem:function(){return this.getItem(0)},autoDraw:false,_redrawWithParent:false,ID:"$322",_generated:true,selectOnFocus:true,tabIndex:-1,numCols:1,items:[{name:"focusPark",type:"text",title:isc.nbsp,handleKeyPress:function(){return false}}],width:1,height:1,overflow:isc.Canvas.HIDDEN,itemHasFocus:function(){var _4=this.getFocusParkItem();if(_4.hasFocus)return true;if(isc.Browser.isIE&&this.isDrawn()&&this.isVisible()&&(this.getActiveElement()==this.getFocusParkItem().getFocusElement()))
return true;return false},redraw:function(){var _5=false;if(this.itemHasFocus())_5=true;this.Super("redraw",arguments);if(_5)this.focusInItem(this.getFocusParkItem())},$1196:true})}
if(_3.isVisible())_3.hide();_3.moveTo(Math.max(this.body.getPageLeft(),this.getColumnPageLeft(_2)),this.getPageTop()+Math.min(((this.showHeader?this.getHeaderHeight():0)+this.getRowTop(this.getEditRow())
-this.body.getScrollTop()),this.getScrollHeight()-1));_3.sendToBack();_3.show();if(this.$286.clickMaskUp())_3.unmask(this.$286.getID());_3.getFocusParkItem().focusInItem();_1.form.hasFocus=false}},isc.A.makeEditForm=function isc_ListGrid_makeEditForm(_1,_2){var _3=this.getCellRecord(_1,_2),_4=this.getEditDisplayValues(_1,_2),_5;if(this.updateEditorItemsInPlace&&this.$286!=null){_5=true;var _6=this.editByCell?[this.getField(_2)]:this.getDrawnFields();if(_6){if(_6.length!=this.$286.getItems().length){_5=false}else{for(var i=0;i<_6.length;i++){var _8=_6[i],_9=this.getEditorName(_1,_8),_10=this.$286.getItem(_9);if(_10==null||(this.getEditorType(_8,_4)!=this.$286.getEditorType(_10)))
{_5=false;break}}}}
if(_5&&_6){var _11=this.getDrawnFieldWidths(_3,_6);for(var i=0;i<_6.length;i++){var _8=_6[i],_12=this.getColNum(_8),_9=this.getEditorName(_1,_8),_10=this.$286.getItem(_9),_3=this.getRecord(_1),_13=this.getEditedRecord(_1),_14=this.getEditItem(_8,_3,_13,_1,_12,_11[i],true);_10.setProperties(_14);_10.$8t=null;if(_8.frozen){_10.containerWidget=this.frozenBody}else{_10.containerWidget=this.body}}}else{var _15=this.getEditRowItems(_3,_1,_2,this.editByCell);this.$286.setItems(_15)}
this.$286.setValues(_4)}else{var _15=this.getEditRowItems(_3,_1,_2,this.editByCell);var _16=isc.addProperties({},this.editFormDefaults,{grid:this,dataPath:this.dataPath,locatorParent:this,showErrorIcons:this.showErrorIcons,tabIndex:this.getTabIndex(),dataSource:this.dataSource,autoComplete:this.autoComplete,uniqueMatch:this.uniqueMatch,autoFocus:false,items:_15,values:_4},this.editFormProperties);if(this.dateFormatter!=null&&_16.dateFormatter==null){_16.dateFormatter=this.dateFormatter}
if(this.datetimeFormatter!=null&&_16.datetimeFormatter==null){_16.datetimeFormatter=this.datetimeFormatter}
if(this.timeFormatter!=null&&_16.timeFormatter==null){_16.timeFormatter=this.timeFormatter}
this.$286=isc.DynamicForm.create(_16)}
if(this.logIsDebugEnabled()){this.logDebug("editRowForm created with values: "+this.echo(this.$286.getValues()),"gridEdit")}
return!_5},isc.A.getEditForm=function isc_ListGrid_getEditForm(){return this.$30a?this.$286:null},isc.A.getEditFormItem=function isc_ListGrid_getEditFormItem(_1){var _2=this.getEditForm();if(!_2)return null;var _3=this.getEditorName(this.getEditRow(),_1),_4=_2.getItem(_3);if(!isc.isA.Number(_1)||(_4&&_4.colNum==_1))return _4},isc.A.getEditFormValue=function isc_ListGrid_getEditFormValue(_1){var _2=this.getEditFormItem(_1);return(_2?_2.getValue():null)},isc.A.$33g=function isc_ListGrid__updateEditItemValues(){if(!this.$286)return;var _1=this.getEditRow(),_2=this.getEditCol(),_3=this.getEditDisplayValues(_1,_2);this.$286.setValues(_3)},isc.A.getEditDisplayValues=function isc_ListGrid_getEditDisplayValues(_1,_2){var _3=this.getEditValues(_1,_2),_4=this.getCellRecord(_1,_2),_5={};for(var _6 in _4){_5[_6]=_4[_6]}
for(var _6 in _3){_5[_6]=_3[_6]}
for(var _6 in _5){var _7=this.getFieldNum(_6);if(_7>=0&&this.$329!=null){_5[_6]=this.$329(_5[_6],_4,_1,_7)}}
return _5},isc.A.getEditFormItemFieldWidths=function isc_ListGrid_getEditFormItemFieldWidths(_1){var _2=[];for(var i=0;i<this.fields.length;i++){var _4=this.getLocalFieldNum(i),_5=this.fields[i],_6=(!this.$54d&&_5.frozen)?this.frozenBody:this.body;_2[i]=_6.getInnerColumnWidth(_4)}
return _2},isc.A.getEditorValueMap=function isc_ListGrid_getEditorValueMap(_1,_2){if(_1.getEditorValueMap!=null){isc.Func.replaceWithMethod(_1,"getEditorValueMap","values,field,grid");return _1.getEditorValueMap(_2,_1,this)}
if(_1.editorValueMap!=null){return _1.editorValueMap}
if(_1.editorProperties&&_1.editorProperties.valueMap){return _1.editorProperties.valueMap}
return _1.valueMap},isc.A.getEditorValueIcons=function isc_ListGrid_getEditorValueIcons(_1,_2){return _1.editorValueIcons||_1.valueIcons},isc.A.getEditorValueIconWidth=function isc_ListGrid_getEditorValueIconWidth(_1){if(_1.editorValueIconWidth!=null)return _1.editorValueIconWidth;return(_1.valueIconWidth!=null?_1.valueIconWidth:_1.valueIconSize)},isc.A.getEditorValueIconHeight=function isc_ListGrid_getEditorValueIconHeight(_1){if(_1.editorValueIconHeight!=null)return _1.editorValueIconHeight;return _1.valueIconHeight!=null?_1.valueIconHeight:_1.valueIconSize},isc.A.setEditorValueMap=function isc_ListGrid_setEditorValueMap(_1,_2){var _3=this.getColNum(_1),_4=this.getField(_1),_5=_4[this.fieldIdProperty];_4.editorValueMap=_2;if(this.$30a){var _6=this.getEditRow(),_7=this.getEditedRecord(_6,_3);this.$286.setValueMap(_5,this.getEditorValueMap(_4,_7))}},isc.A.getEditorType=function isc_ListGrid_getEditorType(_1,_2){var _3=isc.addProperties({},_1,_1.editorProperties);return isc.DynamicForm.getEditorType(_3,this)},isc.A.getEditorProperties=function isc_ListGrid_getEditorProperties(_1,_2,_3){return isc.addProperties({},this.editorProperties,_1.editorProperties)},isc.A.getEditRowItems=function isc_ListGrid_getEditRowItems(_1,_2,_3,_4){var _5=this.body;if(_5==null)return[];var _6,_7,_8=[],_9=[];var _10=this.getEditedRecord(_2,_3);var _11;if(_4)_11=[this.getField(_3)]
else _11=this.getDrawnFields();_8=this.getDrawnFieldWidths(_1,_11);if(_11!=null){for(var i=0;i<_11.length;i++){var _13=this.getColNum(_11[i]);var _14=this.getEditItem(_11[i],_1,_10,_2,_13,_8[i])
if(_14==null)continue;_9[_9.length]=_14}}
return _9},isc.A.getDrawnFields=function isc_ListGrid_getDrawnFields(){if(!this.body)return null;var _1=[],_2=this.body;var _3=this.frozenFields,_4=this.freezeStart();if(_3&&_4){_1.addList(_3)}
var _5,_6;if((_2.$254==null)||!_2.isDrawn()||_2.isDirty()||_2.$58p){var _7=_2.getDrawArea();_5=_7[2];_6=_7[3]}else{_5=_2.$254;_6=_2.$255}
if(_3&&_4){_5+=_3.length;_6+=_3.length}
for(var i=_5;i<=_6;i++){_1.add(this.fields[i])}
if(_3&&!_4){_1.addList(_3)}
return _1},isc.A.getDrawnFieldWidths=function isc_ListGrid_getDrawnFieldWidths(_1,_2){if(!_2)_2=this.getDrawnFields();if(!_2)return null;var _3=this.getEditFormItemFieldWidths(_1),_4=[];for(var i=0;i<_2.length;i++){_4[i]=_3[_2[i].masterIndex]}
return _4},isc.A.$323=function isc_ListGrid__popUpTextAreaItemKeyPress(_1,_2,_3){return this.grid.editorKeyPress(this,_2,_3)},isc.A.$54z=function isc_ListGrid__popUpTextAreaItemKeyDown(_1,_2,_3){return this.grid.editorKeyDown(this,_2,_3)},isc.A.$62k=function isc_ListGrid__popUpTextAreaItemFocus(){var _1=this.form,_2=this.grid,_3,_4,_5,_6;if(_2.$30a){_3=_2.$285;if(!_2.editByCell){_3=_2.$285;_5=this.getFieldName(),_4=_2.fields.findIndex(_2.fieldIdProperty,_5);_6=(_2.$30u!=_4);if(_6){_2.setNewEditCell(_3,_4);_2.cellEditEnd(isc.ListGrid.EDIT_FIELD_CHANGE)}}}},isc.A.$324=function isc_ListGrid__getPopUpTextAreaTop(){var _1=this.grid,_2=this.getFieldName(),_3=_1.getEditRow(),_4=_1.getCellStyle(_1.getRecord(_3),_3,_1.getColNum(_2)),_5=_1.getRowPageTop(_3)+isc.Element.$tn(_4)+isc.Element.$tt(_4);return _5},isc.A.$581=function isc_ListGrid__checkboxClick(_1,_2,_3,_4){if(!this.hasFocus){var _5=this.grid;_5.setNewEditCell(this.rowNum,this.colNum);_5.cellEditEnd(isc.ListGrid.EDIT_FIELD_CHANGE);this.$30w=true}
return this.invokeSuper("CheckboxItem","handleClick",_1,_2,_3,_4)},isc.A.handleEditorChanged=function isc_ListGrid_handleEditorChanged(_1){if(this.$101f==_1)return;var _2=_1.getFieldName(),_3=this.getField(_2),_4;if(_3&&_3.validateOnChange!=null)_4=_3.validateOnChange;else _4=this.validateOnChange;var _5=this.getEditRow();if(_5==null||_5!=_1.rowNum)return;if(_4){this.validateCell(_5,_2,false,true)}else if(!_1.hasFocus&&!this.editByCell){if(_1.isDrawn()&&_1.isVisible()){this.storeUpdatedEditorValue(false,_1.colNum);if(this.saveByCell&&this.autoSaveEdits){var _6=isc.ListGrid.EDIT_FIELD_CHANGE;this.saveEdits(_6,null,_5,_1.colNum)}else if(this.validateByCell)this.validateCell(_5,_2)}}},isc.A.$325=function isc_ListGrid__editorHandleChangedOverride(_1,_2,_3,_4){this.invokeSuper(this.getClassName(),"handleChanged",_1,_2,_3,_4);if(!this.destroyed)this.grid.handleEditorChanged(this)},isc.A.$45p=function isc_ListGrid__editorGetAutoComplete(){var _1=this.grid;if(!_1)return null;var _2=_1.getField(this.getFieldName());if(_2.autoComplete!=null)return _2.autoComplete;if(_1.autoComplete!=null)return _1.autoComplete;return this.Super("$17h",arguments)},isc.A.getEditItem=function isc_ListGrid_getEditItem(_1,_2,_3,_4,_5,_6,_7){var _8={};_8.width=_6;_8.record=_2;_8.rowNum=_4;_8.colNum=_5;_8.getGlobalTabIndex=function(){if(!this.containerWidget)return this.Super("getGlobalTabIndex",arguments);return this.containerWidget.getTabIndex()};var _9=this.getEditorName(_4,_1);_8[this.fieldIdProperty]=_9;var _10=this.getEditorName(_4,_1,true);if(_10&&_10!=_9){_8.dataPath=_10}
if(_1.title!=null)_8.title=_1.title;_8.valueMap=this.getEditorValueMap(_1,_3);if(_1.multiple!=null)_8.multiple=_1.multiple;if(_1.canEdit!=null)_8.canEdit=this.canEditCell(_4,_5);if(_1.disabled!=null)_8.disabled=_1.disabled;if(_1.valueField!=null)_8.valueField=_1.valueField
if(_1.displayField!=null)_8.displayField=_1.displayField
if(_1.optionDataSource)_8.optionDataSource=_1.optionDataSource
if(_1.optionFilterContext)_8.optionFilterContext=_1.optionFilterContext
if(_1.optionCriteria)_8.optionCriteria=_1.optionCriteria
if(_1.optionOperationId!=null)_8.optionOperationId=_1.optionOperationId;_8.valueIcons=this.getEditorValueIcons(_1,_3);var _11=this.getEditorValueIconWidth(_1),_12=this.getEditorValueIconHeight(_1);if(_11)_8.valueIconWidth=_11;if(_12)_8.valueIconHeight=_12;_8.imageURLPrefix=(_1.editorImageURLPrefix||_1.imageURLPrefix);_8.imageURLSuffix=(_1.editorimageURLSuffix||_1.imageURLSuffix);_8.baseURL=_1.baseURL;_8.imgDir=_1.imgDir;var _13;if(_1.icons!==_13)_8.icons=_1.icons;if(_1.showPickerIcon!==_13)_8.showPickerIcon=_1.showPickerIcon;if(_1.pickerIconSrc!==_13)_8.pickerIconSrc=_1.pickerIconSrc;if(_1.pickerIconWidth!==_13)_8.pickerIconWidth=_1.pickerIconWidth;if(_1.pickerIconHeight!==_13)_8.pickerIconHeight=_1.pickerIconHeight;if(_1.defaultIconSrc!==_13)_8.defaultIconSrc=_1.defaultIconSrc;var _14=(_1.editorIconHeight||_1.iconHeight);if(_14!==_13)_8.iconHeight=_14
var _15=(_1.editorIconWidth||_1.iconWidth);if(_15!==_13)_8.iconWidth=_15;if(_1.iconPrompt!==_13)_8.iconPrompt=_1.iconPrompt;if(_1.iconHSpace!==_13)_8.iconHSpace=_1.iconHSpace;if(_1.iconVAlign!==_13)_8.iconVAlign=_1.iconVAlign;if(this.showValueIconOnly(_1)){if(_1.editorProperties==null)_1.editorProperties={};_1.editorProperties.showValueIconOnly=true}
if(_1.pickListWidth!=null)_8.pickListWidth=_1.pickListWidth;if(_1.pickListFields!=null)_8.pickListFields=_1.pickListFields;_8.textAlign=this.getFieldCellAlign(_1,this.isRTL())
if(_1.editorProperties!=null){for(var i=0;i<this.$31c.length;i++){var _17=this.$31c[i],_18=_1.editorProperties[_17];if(_18!=null&&!isc.isA.Function(_18)){var _19=isc.FormItem._stringMethodRegistry;_1.editorProperties[_17]=_18=isc.Func.expressionToFunction(_19[_17],_18)}
if(_18!=null)_1.editorProperties[_17]=_18}}
for(var i=0;i<this.$45k.length;i++){var _17=this.$45k[i];if(_1.editorProperties&&_1.editorProperties[_17]!=null){continue}
var _18=_1[_17];if(_18!=null){if(_1.editorProperties==null)_1.editorProperties={};if(!isc.isA.Function(_18)){var _19=isc.FormItem._stringMethodRegistry;_18=isc.Func.expressionToFunction(_19[_17],_18)}
_1.editorProperties[_17]=_18}}
_8.valueIconLeftPadding=this.getValueIconLeftPadding(_1);_8.valueIconRightPadding=this.getValueIconRightPadding(_1);if(!_7){_8.$17h=this.$45p;_8.autoCompleteCandidates=_1.autoCompleteCandidates;_8.uniqueMatch=_1.uniqueMatch;_8.containerWidget=(!this.$54d&&_1.frozen)?this.frozenBody:this.body;_8.grid=this;_8.handleChanged=this.$325;_8.keyDown=function(_8,_28,_29){if(this.form==null)return;return this.form.grid.editorKeyDown(_8,_29)}
_8.inactiveEditorMouseDown=function(_28,_29){if(_28&&(_28.grid==this.form.grid.getID())&&_28.rowNum!=null&&_28.colNum!=null)
{if(this.form==null)return;this.form.grid.startEditing(_28.rowNum,_28.colNum)}}
_8.handleMouseDown=function(){var _20=this.Super("handleMouseDown",arguments);var _21=this.$1008();this.$1009(_21[0],_21[1]);return _20}
_8.type=_1.type;_8.editorType=this.getEditorType(_1,_2);var _22=_8.editorType;if(_1.dateFormatter!=null)_8.dateFormatter=_1.dateFormatter;if(_1.timeFormatter!=null)_8.timeFormatter=_1.timeFormatter;if(_1.displayFormat!=null)_8.displayFormat=_1.displayFormat;var _23=this.$45j(_1);if(_23)_8.inputFormat=_23;if(this.$308[_22]==true||this.$68k[_22]==true||(_1.type==this.$g4&&_22==null))
{_8.editorType=(this.$68k[_22]==true?this.$68l:this.$g4);_8.useTextField=true;_8.cellPadding=0;_8.itemCellStyle=null;_8.pickerIconHSpace=0}
if(this.$307[_22]==true){_8.editorType=this.$g5;var _24=this.getDataSource();if(_24&&_24.allowAdvancedCriteria==false)_8.allowExpressions=false}
if(this.popUpTextAreaEditorTypes[_22]==true){_8.getTextBoxStyle=function(){var _25=this.grid,_2=_25.getCellRecord(this.rowNum,this.colNum);this.textBoxStyle=_25.getCellStyle(_2,this.rowNum,this.colNum);return this.Super("getTextBoxStyle",arguments)}
_8.gridCellStyleChanged=function(_2,_4,_5,_28){var _26=this.$15h();if(_26){_26.className=this.textBoxStyle=_28}}
_8.textBoxCellCSS=isc.Canvas.$42a
_8.textAreaKeyDown=this.$54z;_8.textAreaKeyPress=this.$323;_8.getTextAreaTop=this.$324;if(_8.popUpOnEnter==null)_8.popUpOnEnter=true;_8.textAreaFocus=this.$62k}
if(this.$31a[_22]==true||(_1.type==this.$g2&&_22==null)){if(_8.showLabel==null)_8.showLabel=false;if(_8.handleClick==null){_8.handleClick=this.$581}}
if(_22=="RichTextItem"||_22=="richText"){if(_8.overflow==null)_8.overflow="auto"}
_8.elementFocus=this.$30t;_8.$1008=this.$101a;_8.$1009=this.$101b;_8.canTabToIcons=false;_8.focusInItem=this.$51o;_8.$109=this.$898}
var _27=this.getEditorProperties(_1,_2,_4);isc.addProperties(_8,_27);return _8});isc.evalBoundary;isc.B.push(isc.A.$51o=function isc_ListGrid__editFormItem_focusInItem(){this.Super("focusInItem",arguments);this.grid.$51n(this)},isc.A.$898=function isc_ListGrid__editFormItem_refocusAfterRedraw(){this.$897=true;this.Super("$109",arguments);this.$897=false},isc.A.getEditorName=function isc_ListGrid_getEditorName(_1,_2,_3){_2=this.getField(_2);if(!_2)return null;if(_3&&_2.dataPath){return _2.dataPath}
return _2[this.fieldIdProperty]},isc.A.getTrimmedFieldDataPath=function isc_ListGrid_getTrimmedFieldDataPath(_1){var _2=this.getField(_1);if(_2==null)return _1;if(_2.dataPath){return this.$840(_2.dataPath)}else{return _1.name}},isc.A.refreshCell=function isc_ListGrid_refreshCell(_1,_2,_3,_4){if(_1==null){this.logInfo("ListGrid.refreshCell(): first parameter rowNum not present, returning");return}
if(!this.isDrawn()||!this.body)return;var _5=this.getFieldBody(_2);if(_5.isDirty()){this.logDebug("refresh cell redrawing body","gridEdit");_5.redraw("refresh cell");return false}
if(this.$686(this.getField(_2),true)){this.$69l(_1,_2)}
var _6=this.getLocalFieldNum(_2);_5.refreshCellStyle(_1,_6);if(!_5.shouldRefreshCellHTML()){this.refreshCellValue(_1,_2,_3,_4)}},isc.A.refreshCellValue=function isc_ListGrid_refreshCellValue(_1,_2,_3,_4){if(!this.isDrawn()||!this.body)return;var _5=this.getFieldBody(_2),_6=this.getLocalFieldNum(_2);if(!_5.$29l(_1,_6)){this.delayCall("refreshCellValue",[_1,_2,_3,_4]);return}
var _7=this.getEditorName(_1,_2),_8=this.getFieldName(_2),_9=this.$286,_10,_11=false,_12,_13;if(_9){var _10=_9.getItem(_7),_14=(this.$30a&&_1==this.getEditRow());if(_10&&_10.colNum!=_2)_10=null;if(_14){_12=(_10&&_10.isDrawn());_13=this.canEditCell(_1,_2);if(_10!=null&&_9.hasFocus){var _15=_9.getFocusSubItem();_11=(_15==_10||(_10.items&&_10.items.contains(_15)))}}else if(_10&&_10.rowNum==_1){_13=false;_12=_10.isDrawn()}}
if(!_4&&(_11&&_12&&_13))
{return}
if(_12){this.getUpdatedEditorValue();if(_10!=null){if(_11){if(_13){_9.$106()}
else _10.blurItem()}
if(_13)_10.redrawing()}}
delete _5.$316;_5.refreshCellValue(_1,_6);if(_10&&(_12||_13)){if(_13)this.$101f=_10;this.$30b(_10,null,_5);if(_13){_10.setValue(this.getEditDisplayValue(_1,_2));delete this.$101f;if(_11){_9.$11b(_10)}}}},isc.A.refreshRow=function isc_ListGrid_refreshRow(_1){if(!this.body||!this.isDrawn())return;var _2=this.frozenFields&&this.frozenFields.length>0;if(_2&&!this.frozenBody)_2=false;var _3=false;if(this.body.isDirty())_3=true;if(_2&&!_3){if(this.frozenBody.isDirty()||this.bodyLayout.isDirty())_3=true}
if(_3){var _4=_2?this.bodyLayout:this.body;return _4.redraw("refresh row")}
if(this.$30a&&this.$286!=null){this.logInfo("refresh row: "+_1,"gridEdit")}
if(_2){for(var i=0;i<this.frozenFields.length;i++){this.refreshCell(_1,this.getFieldNum(this.frozenFields[i]),true)}}
var _6=this.body.$254,_7=this.body.$255;for(var i=_6;i<=_7;i++){var _8=this.getFieldNumFromLocal(i,this.body);this.refreshCell(_1,_8,true)}},isc.A.startEditingNew=function isc_ListGrid_startEditingNew(_1,_2){if(!this.canEdit&&!(this.completeFields||this.fields).getProperty("canEdit").or()){this.canEdit=true}
if(isc.isAn.Array(this.data)&&this.data.length==0&&this.dataSource&&!this.shouldSaveLocally())
{this.fetchData(null,null,{$326:true});this.data.setFullLength(0)}
var _3=this.body?this.body.getTotalRows():this.getTotalRows();if(this.showNewRecordRow)_3-=1;if(!this.useCellRecords&&_1!=null){this.setEditValues(_3,isc.addProperties({},_1),true)}
var _4=this.findNextEditCell(_3,0,1,true,true,true);if(_4==null){this.logInfo("startEditingNew() failed to find any editable fields in this grid.","gridEdit");return}
if(this.useCellRecords&&_1!=null){this.setEditValues(_4,isc.addProperties({},_1),true)}
this.startEditing(_4[0],_4[1],_2)},isc.A.updateEditRow=function isc_ListGrid_updateEditRow(_1){if(this.$285!=_1||!this.$286){return}
this.$286.setItemValues();delete this.$286.$10u;this.$286.$327=false},isc.A.shouldFixRowHeight=function isc_ListGrid_shouldFixRowHeight(_1,_2){if(this.canEdit!=false&&this.$30a&&_2==this.$285){return false}
return this.fixedRecordHeights},isc.A.$32q=function isc_ListGrid__getNextEditFlowID(){if(this.$328==null)this.$328=isc.timeStamp();return this.$328++},isc.A.$32x=function isc_ListGrid__handleClickOutsideEditor(){var _1=this.getEditRow();this.cellEditEnd(isc.ListGrid.CLICK_OUTSIDE)},isc.A.getEditDisplayValue=function isc_ListGrid_getEditDisplayValue(_1,_2,_3){var _4;if(_3===_4)_3=this.getCellRecord(_1,_2);var _5=this.$30y(_1,_2);if(_5===_4&&_3!=null){_5=this.getRawCellValue(_3,_1,_2)}
_5=this.$329(_5,_3,_1,_2);return _5},isc.A.$329=function isc_ListGrid__formatEditorValue(_1,_2,_3,_4){if(_2==null)_2=this.$300(_3,_4);var _5=this.fields[_4];if(_5&&_5.formatEditorValue!=null){isc.Func.replaceWithMethod(_5,"formatEditorValue","value,record,rowNum,colNum,grid");_1=_5.formatEditorValue(_1,_2,_3,_4,this)}else if(this.formatEditorValue!=null){_1=this.formatEditorValue(_1,_2,_3,_4)}
return _1},isc.A.getEditValuesID=function isc_ListGrid_getEditValuesID(_1){if(_1==null||this.$52b==null)return null;if(isc.isA.String(_1)&&this.$52b[_1]!=null)return _1;if(isc.isA.Number(_1)){return this.$33a[_1]}
for(var i in this.$52b){var _3=this.$52b[i];if(_3==_1)return i;var _4=_3.$33b;if(_4&&this.comparePrimaryKeys(_4,_1)){return i}}
return null},isc.A.getEditSession=function isc_ListGrid_getEditSession(_1,_2){if(this.$52b==null)return null;if(!isc.isA.String(_1))_1=this.getEditValuesID(_1,_2);return this.$52b[_1]},isc.A.getEditSessionRowNum=function isc_ListGrid_getEditSessionRowNum(_1){_1=this.getEditSession(_1);return(_1!=null?_1.$24t:null)},isc.A.getEditSessionColNum=function isc_ListGrid_getEditSessionColNum(_1){_1=this.getEditSession(_1);return(_1!=null?_1.$24u:null)},isc.A.getAllEditRows=function isc_ListGrid_getAllEditRows(_1){return this.getAllEditCells(_1,true)},isc.A.getAllEditCells=function isc_ListGrid_getAllEditCells(_1,_2){var _3=this.$52b,_4=[];if(!_3)return _4;if(_1)return isc.getKeys(this.$52b);for(var i in _3){var _6=_3[i].$24t;_6=parseInt(_6);if(_6==null||_6<0||isNaN(_6))continue;if(_2)_4[_4.length]=_6
else{var _7=_3[i].$24u;if(_7==null){_7=this.$30a&&(_6==this.getEditRow())?this.getEditCol():this.getRowEditColNum(_6)}
if(_7!=null&&!isc.isA.Number(_7))_7=parseInt(_7);_4[_4.length]=[_6,_7]}}
return _4},isc.A.getEditValues=function isc_ListGrid_getEditValues(_1,_2){if(_1==null){return this.logWarn("getEditValues() called with no valuesID. "+(this.logIsDebugEnabled("gridEdit")?this.getStackTrace():""))}
if(this.$989)return{};if(_2==null&&isc.isA.Array(_1)){_2=_1[1];_1=_1[0]}
var _3=(isc.isA.Number(_1)?_1:this.getEditSessionRowNum(_1));if(this.$30a&&(this.getEditRow()==_3)){this.storeUpdatedEditorValue()}
var _4=isc.addProperties({},this.$300(_1,_2));if(_4!=null){delete _4[this.recordRemovedProperty]}
return _4},isc.A.$300=function isc_ListGrid__getEditValues(_1,_2){var _3=this.getEditSession(_1,_2);return _3!=null?_3.$31x:null},isc.A.getEditedRecord=function isc_ListGrid_getEditedRecord(_1,_2,_3){if(_1==null)return this.logWarn("getEditedRecord() called with no valuesID");if(!isc.isA.Number(_1)){_1=this.getEditSessionRowNum(_1);_2=this.getEditSessionColNum(_1)}
var _4=this.getCellRecord(_1,_2),_5=_3?this.$300(_1,_2):this.getEditValues(_1,_2);if(_5!=null){}
return isc.addProperties({},_4,_5,{__ref:null})},isc.A.getEditedCell=function isc_ListGrid_getEditedCell(_1,_2){if(_1==null||_2==null)
return this.logWarn("getEditedCell() called with no record / field parameter");var _3=this.getEditValues(_1,_2),_4=isc.isA.Number(_1)?_1:this.getEditSessionRowNum(_1),_5=isc.isA.Number(_2)?_2:this.getFieldNum(_2),_1=this.getCellRecord(_4,_5);var _6=this.getEditorName(_4,this.getField(_5))
var _7;if(_3&&_3[_6]!==_7)return _3[_6];return _1?_1[_6]:null},isc.A.rememberSubmittedEditValues=function isc_ListGrid_rememberSubmittedEditValues(_1,_2){var _3=this.getEditSession(_1);if(_3!=null){_3.$33e=isc.addProperties({},_3.$31x)}},isc.A.getSubmittedEditValues=function isc_ListGrid_getSubmittedEditValues(_1,_2){var _3=this.getEditSession(_1,_2);return _3!=null?_3.$33e:null},isc.A.clearSubmittedEditValues=function isc_ListGrid_clearSubmittedEditValues(_1,_2){var _3=this.getEditSession(_1);if(_3==null)return;var _4=_3.$33e;if(!_4)return;for(var _5 in _2){if(_4[_5]==_2[_5])delete _4[_5]}
if(isc.isA.emptyObject(_4))_3.$33e=null},isc.A.createEditValues=function isc_ListGrid_createEditValues(_1){var _2=this.body.getTotalRows();this.setEditValues(_2,_1);return this.getEditValuesID(_2)},isc.A.initializeEditValues=function isc_ListGrid_initializeEditValues(_1,_2,_3){if(this.$300(_1,_2)==null){this.$989=true;this.setEditValues([_1,_2],{},_3)
delete this.$989}},isc.A.setEditValues=function isc_ListGrid_setEditValues(_1,_2,_3){var _4;if(isc.isAn.Array(_1)){_4=_1[1];_1=_1[0]}
if(!isc.isA.Number(_1)){this.logWarn("setEditValues() called with bad rowNum: "+this.echo(_1));return}
if(_2==null)_2={};var _5,_6,_7=true;if(!_3){var _8=this.getCellRecord(_1,_4);if(_8==null)_8={};else _7=false;_5=this.getEditValues(_1,_4);if(_5!=null)_7=false;_6=isc.addProperties({},_5);for(var i in _6){_6[i]=_8[i]}
isc.addProperties(_6,_2)}
if(this.logIsInfoEnabled("gridEdit")){_5=_5||this.getEditValues(_1,_4);if(!_5){this.logInfo("establishing new edit session at row: "+_1+(_4!=null?", col:"+_4:"")+(this.logIsDebugEnabled("gridEdit")?" with values: "+this.echo(_2):""),"gridEdit")}}
var _10=this.recordMarkedAsRemoved(_1);if(_10)_2[this.recordRemovedProperty]=true;this.$33f(_1,_4,_2);var _11=!isc.isAn.emptyObject(_6);if(_3||!this.isDrawn()||!this.body){if(_11){if(this.summaryRow&&this.showGridSummary)this.summaryRow.$855()}
return}
if(_11&&_1<this.data.getLength()){var _12=this.data.get(_1);this.calculateRecordSummaries(_12,null,true,true,true)}
var _13=(_7||this.body.isDirty());if(_13){var _14=this.isEditingRecord(_1,_4)&&this.$286!=null
if(_14)this.$33g();this.body.markForRedraw();if(_11&&this.summaryRow&&this.showGridSummary){this.summaryRow.markForRedraw()}}else{this.$50r(_1,_4,_6)}},isc.A.$50r=function isc_ListGrid__displayNewEditValues(_1,_2,_3,_4){if(!_3||isc.isAn.emptyObject(_3)){return}
var _5=this.isEditingRecord(_1,_2)&&this.$286!=null
var _6=false;for(var _7 in _3){var _8=this.getColNum(_7);var _9;if(_5){this.$286.setValue(_7,_3[_7]);var _10=this.$286.getItem(_7);_9=(_8>=0&&_10&&this.canEditCell(_1,_8))}
if(_8==-1)continue;_6=true;if(!_9){this.refreshCell(_1,_8)}else if(_4&&_4[_7]){this.showCellErrors(_1,_8)}}
if(_6&&this.summaryRow&&this.showGridSummary){this.summaryRow.$855();this.refreshGroupSummary(_1)}},isc.A.$33f=function isc_ListGrid__storeEditValues(_1,_2,_3,_4){var _5=this.getCellRecord(_1,_2);var _6=this.getEditSession(_1,_2)||this.createEditSession(_1,_2,_5,_4);if(this.dataSource!=null){if(_5=="loading"){_6.$33i=true}else if(_5!=null){var _7=this.getDataSource(),_8=_7.getPrimaryKeyFieldNames();for(var i=0;i<_8.length;i++){_3[_8[i]]=_5[_8[i]]}}}
if(_5==null){_6.$33i=true;var _10=this.completeFields||this.fields||[],_11;for(var i=0;i<_10.length;i++){var _12=_10[i],_13=_12[this.fieldIdProperty];if(_3[_13]===_11){var _14=this.getDefaultEditValue(_13,_12);if(_14!=null){_3[_13]=_14}}}}
for(var i in _6.$31x){delete _6.$31x[i]}
for(var i in _3){_6.$31x[i]=_3[i]}
if(this.$33j==null||_1>=this.$33j){this.$33j=_1}},isc.A.getDefaultEditValue=function isc_ListGrid_getDefaultEditValue(_1,_2){var _3=_2.defaultValue;if(_3==null&&this.enumCriteriaAsInitialValues&&_2.type=="enum"&&this.$32d!=null&&this.$32d[_1]!=null)
{_3=this.$32d[_1]}
return _3},isc.A.createEditSession=function isc_ListGrid_createEditSession(_1,_2,_3,_4){var _5={};if(_3!=null&&_3!=Array.LOADING)
_5.$33b=this.getPrimaryKeys(_3);_5.$24t=_1;if(this.useCellRecords){_5.$24u=_2;if(this.getCellFacetValues)_5.$507=this.getCellFacetValues(_1,_2)}
_5.$31x={};if(this.$52b==null)this.$52b={};if(_4==null){if(this.$33k==null)this.$33k=0;_4="_"+this.$33k++}
this.$52b[_4]=_5;if(this.$33a==null)this.$33a={};this.$33a[_1]=_4;return _5},isc.A.setEditValue=function isc_ListGrid_setEditValue(_1,_2,_3,_4,_5,_6){if(isc.isA.String(_1)){this.logWarn("Warning: first parameter rowNum is a string, expecting a number");return}
var _7=isc.isA.String(_2)?_2:this.getEditorName(_1,_2,true);_7=this.$840(_7);if(isc.isA.String(_2))_2=this.getFieldNum(_2);var _8=this.$33l(_1,_2,_7,_3,_5,_6);if(!_8)return;if(_6)_3=this.$30y(_1,_2,true);var _9=this.getField(_7);if(_9&&this.$425(_9)){var _10=false,_11;var _12=this.getEditForm(),_13=_12?_12.getItem(_7):null;if(_13&&this.getEditRow()==_1&&this.fieldValuesAreEqual(_9,_12.getValue(_7),_3))
{_10=true;_11=_13.mapValueToDisplay(_3)}
if(!_10&&(_9.valueField==null||_9.valueField==_9.name)&&(!_9.optionDataSource||isc.DS.get(_9.optionDataSource)==this.getDataSource()))
{var _14=this.data;if(isc.ResultSet&&isc.isA.ResultSet(_14))_14=_14.localData;if(_14){var _15=_14.find(_7,_3);if(_15){_10=true;_11=_15[_9.displayField]}}}
if(_10){this.setEditValue(_1,_9.displayField,_11,_4,true)}else{if(this.warnOnUnmappedValueFieldChange){this.logWarn("Edit value updated for field:"+_7+". This field has 'displayField' attribute specified as '"+_9.displayField+((_9.optionDataSource==null||isc.DataSource.get(_9.optionDataSource)==this.getDataSource())?"', and no unique optionDataSource, ":"', ")+"so display value is derived from the current record. In order to ensure the display value is updated to reflect the new edit-value for this field, developers can explicitly update the edit value for the display-field on this record. To avoid seeing this method set listGrid.warnOnUnmappedValueFieldChange to false.")}}}
if(_4){if(this.summaryRow&&this.showGridSummary)this.summaryRow.$855();return}
this.setRowEditFieldName(_1,_7);if(!isc.isA.Number(_1)){_2=this.getEditSessionColNum(_1);_1=this.getEditSessionRowNum(_1)}else if(!isc.isA.Number(_2)){_2=this.getFieldNum(_2)}
var _16={};_16[_7]=_3;this.$50r(_1,_2,_16)},isc.A.$33l=function isc_ListGrid__storeEditValue(_1,_2,_3,_4,_5,_6){var _7=true,_8=false,_9,_10,_11,_12;var _13=_3;if(_13.contains(isc.Canvas.$70l)){_13=this.$840(_13)}
_9=this.getEditSession(_1,_2)
if(_9!=null){_10=_9.$31x;_11=isc.Canvas.$70o(_13,null,_10,this,true,"edit")}else{this.logInfo("creating new edit values for row: "+_1,"gridEdit");this.initializeEditValues(_1,_2,true);_9=this.getEditSession(_1,_2);_10=_9.$31x}
if(_11===_12){var _14=this.getCellRecord(_1,_2);_11=_14?isc.Canvas.$70o(_13,null,_14,this,true,"edit"):null}else _8=true;var _15=_11,_16=_4;var _17=this.getField(_3);if(_17&&_17.type){var _18=isc.SimpleType.getType(_17.type);if(_18&&_18.getAtomicValue!=null){_15=_18.getAtomicValue(_11);if(!_6)_16=_18.getAtomicValue(_4)}}
if(this.fieldValuesAreEqual(_17,_15,_16))_7=false;if(_4===_12){isc.Canvas.$70m(_3,_10,this,true)}else if(_8||_7){isc.Canvas.$70n(_13,(_6?_17:null),_4,_10,this,true);if(_6){_4=isc.Canvas.$70o(_13,null,_14,this,true)}}
if(_7&&!_5){this.$33m(_1,_2,_4,_11)}
return _7},isc.A.setRowEditFieldName=function isc_ListGrid_setRowEditFieldName(_1,_2){var _3=this.getEditSession(_1);if(!_3){var _4=this.getColNum(_2);this.setEditValues([_1,_4],null,true);_3=this.getEditSession(_1)}
if(isc.isA.Number(_2))_2=this.getFieldName(_2);_3.$33n=_2},isc.A.getRowEditFieldName=function isc_ListGrid_getRowEditFieldName(_1){var _2=this.getEditSession(_1);return(_2?_2.$33n:null)},isc.A.getRowEditColNum=function isc_ListGrid_getRowEditColNum(_1){var _2=this.getRowEditFieldName(_1);return _2?this.getColNum(_2):null},isc.A.getEditValue=function isc_ListGrid_getEditValue(_1,_2){var _3=_2
if(isc.isA.String(_2))_2=this.getColNum(_2);if(this.$30a&&(this.getEditRow()==_1)&&(this.getEditCol()==_2))
{this.storeUpdatedEditorValue()}
return this.$30y(_1,_3,true)},isc.A.$30y=function isc_ListGrid__getEditValue(_1,_2,_3){var _4=this.$300(_1,_2);if(_4==null)return;var _5=this.getField(_2);if(_5&&!_3){return isc.Canvas.$70o(null,_5,_4,this,true,"edit")}else{var _6=this.getTrimmedFieldDataPath(_5||_2);return isc.Canvas.$70o(_6,null,_4,this,true,"edit")}},isc.A.clearEditValue=function isc_ListGrid_clearEditValue(_1,_2,_3,_4){var _5=(isc.isA.Number(_1)?_1:this.getEditSessionRowNum(_1));var _6=_2;if(isc.isA.Number(_6))_6=this.getEditorName(_5,_6);else _2=this.getColNum(_6);if(this.$30a){if(this.getEditRow()==_5&&this.getEditFieldName()==_6){this.storeUpdatedEditorValue(true)}}
var _7=this.getEditSession(_1,_2);if(_7==null)return;var _8=_7.$31x,_9=false,_10=_7.$33e,_11=_7.$33o,_12=_11&&_11[_6],_5=_7.$24t;if(_8!=null){var _13=this.getRecord(_5);_9=isc.propertyDefined(_8,_6)&&((_5==null||_13==null)||!this.fieldValuesAreEqual(this.getField(_6),_8[_6],_13[_6]));delete _8[_6];if(_10)delete _10[_6];if(_11!=null)delete _11[_6];if(!_4&&isc.isAn.emptyObject(_8)){this.logDebug("no edit values left for row, discarding editSession","gridEdit");return this.$321(_1,_2,_3)}}
var _14=this.getField(_6);if(_14&&this.$425(_14)&&(_14.displayField!=_6)){this.clearEditValue(_1,_14.displayField,_3,_4)}
if(_3||_5==null)return;if(_9){var _15;if(this.$30a&&this.getEditRow()==_5){var _16=_13?_13[_6]:null;this.$286.setValue(_6,_16);_15=_2>=0&&this.canEditCell(_5,_2)&&this.$286.getItem(_6)}
if(_2>=0&&!_15)this.refreshCell(_5,_2)}else if(_12&&_2>=0){if(_12)this.showCellErrors(_5,_2)}},isc.A.$321=function isc_ListGrid__clearEditValues(_1,_2,_3){if(_1==null){return}
if(!isc.isA.String(_1))_1=this.getEditValuesID(_1,_2);var _4=this.getEditSession(_1);if(_4==null)return;var _5=_4.$24t;if(_5!=null)delete this.$33a[_5];if(_2==null)_2=_4.$24u;var _6=this.$52b[_1];delete this.$52b[_1];var _7=this.$34e();delete this.$33j;if(_5!=null&&_4.$33i){var _8=this.getEditRow();for(var i=_5+1;i<=_7;i++){var _10=this.getEditSession(i);var _11=_10.$24t;_10.$24t=i-1;this.$33a[i-1]=this.$33a[i];delete this.$33a[i]}
if(_8!=null&&_8>_5)this.$285-=1;if(!_3){if(this.$30a){if(_5==_8)this.hideInlineEditor();else{if(_5<_8)this.$50s(_8-1,null,"Earlier temp edit row removed")}}
if(this.body){var _12=this.frozenBody!=null?this.bodyLayout:this.body;_12.markForRedraw("clear edit values, remove row")}}}else if(_5!=null&&!_3){var _13={},_14=this.data.get(_5);for(var _15 in _6.$31x){_13[_15]=_14?_14[_15]:null}
this.$50r(_5,_2,_13,_6.$33o)}},isc.A.newRecordForEditValues=function isc_ListGrid_newRecordForEditValues(_1,_2){var _3=this.getEditSession(_1),_4=_3.$31x;_3.$33b=this.getPrimaryKeys(_2);var _5=this.getDataSource().getPrimaryKeyFieldNames();for(var i=0;i<_5.length;i++){var _7=_5[i];_4[_7]=_2[_7]}
delete _3.$33i},isc.A.$31n=function isc_ListGrid__remapEditRows(_1){delete this.$33j;delete this.$33q;if(this.$52b==null)return false;var _2=false;var _3=this.getEditRow(),_4=this.getEditCol(),_5=false;var _6=this.data.getLength(),_7={};var _8=isc.getKeys(this.$52b);for(var i=0;i<_8.length;i++){var _10=_8[i],_11=this.$52b[_10];var _12=_11.$24t;var _13=this.$52p(_11,_6);if(_11.$33b==null)_6++;if(_13==null)continue;var _14=_13[0],_15=_13[1];if(_14!=null&&_14>=0){if(_14!=_12)_2=true;if(_3!=null&&_3==_11.$24t&&(!this.useCellRecords||(_4==_11.$24u)))
{_5=true;if(!_1)this.$50s(_14,_15,"remapEditRows")}
_7[_14]=_10;_11.$24t=_14;if(this.useCellRecords)_11.$24u=_15}else{if(_12!=null&&_12>=0)_2=true;var _16=this.getOriginalData();var _17=!this.dataSource||this.shouldSaveLocally()||(isc.ResultSet&&isc.isA.ResultSet(_16)&&_16.allRowsCached());if(_17&&!isc.isA.Tree(this.data)&&(!this.isGrouped||!this.data.find(_11.$33b)))
{this.logWarn("Record:"+this.echo(_11.$33b)+", is no longer present in this List.<br>Clearing edit values for this record.","gridEdit");delete this.$52b[this.getEditValuesID(_10)]}else{this.logInfo("Record:"+this.echo(_11.$33b)+(_17?", hidden in grouped tree data. ":", lost from local cache in paged result set. ")+"Pending edits for this record will be maintained.","gridEdit");delete _11.$24t;delete _11.$24u;this.$33q=true}}}
this.$33a=_7;if(_3!=null&&!_5&&!_1){this.hideInlineEditor(true)}
return _2},isc.A.$74c=function isc_ListGrid__remapEmbeddedComponents(){if(!this.body||this.body.$29a==null)return;if(this.recordComponentPoolingMode!="data"){this.$117w();return}
var _1=this.body.$29a,_2=[];this.$74a=0;for(var i=0;i<_1.length;i++){var _4=_1[i],_5=_4.embeddedRecord,_6=this.getPrimaryKeys(_5),_7=_4.$289,_8=_7!=null?this.data.get(_7):null,_9=false;if(!(_8===_5)){_7=this.findRowNum(_6);_9=true}
if(_7>=0){if(_9)_8=this.data.get(_7);if(_8&&!this.$916(_8)||!this.$917(_8).contains(_4))
{_4.$289=_7;_4.embeddedRecord=_8;this.$918(_8,_4);if(_4.isExpansionComponent){if(this.maxExpandedRecords==null||(this.$74a<this.maxExpandedRecords))
{this.$74a++;this.$92g(_8,true);this.$92h(_8,true);if(!this.canExpandMultipleRecords)this.$74b=_8}else{this.$92g(_8,false);this.$92h(_8,false);this.removeEmbeddedComponent(_8,_4,true);_2.add(_4);continue}}else{this.$92o(_8,_4.$81k,_4)}}}else{if(isc.isA.Tree(this.data)){var _10;if(isc.ResultTree&&isc.isA.ResultTree(this.data)){var _11=this.data.getDataSource().getPrimaryKeyFieldNames();_10=isc.applyMask(_5,_11)}else{_10=_5}
_8=this.data.find(_10)}
if(_8==null)_8=_5;if(this.$74d==false||(this.showRecordComponents&&this.recordComponentPoolingMode=="data")||(_4.isExpansionComponent)){if(_8!=null){var _12=_8[this.$92d+this.ID];if(_12!=null&&_12.length>0){_12.remove(_4.getID())}
if(_12.length==0){_8[this.$92d+this.ID]=null}
if(_4.isExpansionComponent){this.$92g(_8,false);this.$92h(_8,false)}}
_2.add(_4)}}}
if(_2.length>0){for(var i=0;i<_2.length;i++){var _13=_2[i];if(this.canExpandRecords){if(this.$74b&&this.$74b==_13.embeddedRecord)
delete this.$74b}
this.body.$29a.remove(_13);if(this.shouldDestroyOnUnembed(_13,this.$81l)){_13.markForDestroy()}else{_13.deparent()}}}},isc.A.$117w=function isc_ListGrid__remapVisibleEmbeddedComponents(){if(!this.body||this.body.$29a==null)return;var _1=this.body.$29a,_2=[],_3=this.getDrawArea(),_4=[_3[0],_3[1]];if(_4[0]==null&&_4[1]==null)return;this.$74a=0;var _5=0,_6=0;for(var i=_4[0];i<=_4[1];i++){var _8=this.data.get(i),_9=_8?this.$92n(_8):null,_10=_9?isc.getValues(_9):null;if(_10){for(var j=0;j<_10.length;j++){var _12=_10[j];if(!_12||_12.isNullMarker)continue;if(_12.$289==i){_12.$117x=true;_6++;continue}
_12.$289=i;this.$918(_8,_12);_12.$117x=true;_5++;if(_12.isExpansionComponent){if(this.maxExpandedRecords==null||(this.$74a<this.maxExpandedRecords))
{this.$74a++;this.$92g(_8,true);this.$92h(_8,true);if(!this.canExpandMultipleRecords)this.$74b=_8}else{this.$92g(_8,false);this.$92h(_8,false);this.removeEmbeddedComponent(_8,_12,true);_2.add(_12);continue}}}}}
if(this.recordComponentPoolingMode!="data"){for(var i=0;i<_1.length;i++){var c=_1[i];if(c.$117x)delete c.$117x;else{if(c==this.currentRollOverCanvas||c==this.currentRollUnderCanvas)continue;if(c.isBackgroundComponent||c.isExpansionComponent){var r=this.getRecordIndex(c.embeddedRecord);if(r>=0){if(c.isExpansionComponent)this.$74a++}else{if(c.isExpansionComponent&&c.embeddedRecord){this.$92g(c.embeddedRecord,false);this.$92h(c.embeddedRecord,false)}
_2.add(c)}}else if(c.isRecordComponent){_2.add(c)}}}}
if(_2.length>0){for(var i=0;i<_2.length;i++){var _15=_2[i];if(this.canExpandRecords){if(this.$74b&&this.$74b==_15.embeddedRecord)
delete this.$74b}
this.body.$29a.remove(_15);if(this.shouldDestroyOnUnembed(_15,this.$81l)){_15.markForDestroy()}else{_15.deparent()}}}});isc.evalBoundary;isc.B.push(isc.A.$75n=function isc_ListGrid__remapEmbeddedComponentColumns(_1){if(_1.$29a==null)return;var _2=_1.$29a,_3={},_4=false;for(var i=0;i<_1.fields.length;i++){_3[_1.fields[i].name]=i}
var _6=[];for(var i=0;i<_2.length;i++){var _7=_2[i].$81k;if(_7==null){continue}
var _8=_3[_7];if(_8==null){_6[_6.length]=_2[i]}else{if(_2[i].$57n!=_8){_4=true;_2[i].$57n=_8}}}
if(_6.length>0){for(var i=0;i<_6.length;i++){var _9=_6[i];if(_9.removeOnHideField){_1.removeEmbeddedComponent(_9.embeddedRecord,_9);if(this.shouldDestroyOnUnembed(_9,this.$81p)){_9.markForDestroy()}}else{_4=true}}}
if(_4){_1.$29d()}},isc.A.$52p=function isc_ListGrid__calculateEditCell(_1,_2){var _3,_4,_5=_1.$33b;if(_5==null){_3=_2}else{var _6=_1.$31x,_7=false,_8;if(_1.$33o!=null&&!isc.isA.emptyObject(_1._validationErrors_))
{_7=true}else{for(var _9 in _6){if(_6[_9]!=_5[_9]||_5[_9]===_8){_7=true;break}}}
if(!_7&&_1.$24t!=null&&!this.isEditingRecord(_1.$24t,_1.$24u))
{this.logInfo("dropping empty editSession","gridEdit");delete this.$52b[this.getEditValuesID(_1)];return null}
_3=this.findRowNum(_5,_1);_4=this.findColNum(_5,_1)}
return[_3,_4]},isc.A.$wo=function isc_ListGrid__filter(_1,_2,_3,_4,_5){if(!_5&&this.confirmDiscardEdits&&this.dataSource!=null){var _6=this.getOriginalData();if(this.hasChanges()&&!(isc.ResultSet&&isc.isA.ResultSet(_6)&&_6.compareCriteria(_2,_6.getCriteria())==0))
{this.showLostEditsConfirmation({target:this,methodName:"$33r"},{target:this,methodName:"$33s"});this.$33t={type:_1,criteria:_2,callback:_3,requestProperties:_4}
return}}
var _7=_2
if(isc.isA.Class(_7)){_7=isc.DynamicForm.getFilterCriteria(_7)}
this.setFilterValues(_7);return this.Super("$wo",[_1,_2,_3,_4],arguments)},isc.A.$33r=function isc_ListGrid__continueFilter(){var _1=this.$33t,_2=_1.type,_3=_1.criteria,_4=_1.callback,_5=_1.requestProperties;delete this.$33t;this.$wo(_2,_3,_4,_5,true)},isc.A.$33s=function isc_ListGrid__cancelFilter(){delete this.$33t},isc.A.showLostEditsConfirmation=function isc_ListGrid_showLostEditsConfirmation(_1,_2){this.$33u=_1;this.$33v=_2;isc.confirm(this.confirmDiscardEditsMessage,"if(window[this.targetGridID])window[this.targetGridID].lostEditsCallback(value, this);",{targetGridID:this.getID(),buttons:[isc.Dialog.OK,{title:this.discardEditsSaveButtonTitle,width:75,click:"this.hide();this.topElement.returnValue('save');"},isc.Dialog.CANCEL]})},isc.A.lostEditsCallback=function isc_ListGrid_lostEditsCallback(_1,_2){var _3=this.$33u,_4=this.$33v;delete this.$33u;delete this.$33v;if(_1==null){this.fireCallback(_4)}else if(_1==true){this.discardAllEdits();this.fireCallback(_3)}else if(_1=="save"){this.saveAllEdits(null,_3)}
_2.targetGrid=null},isc.A.findRowNum=function isc_ListGrid_findRowNum(_1){var _2=this.getDataSource(),_3=isc.isA.Array(this.data);if(_2&&_3)return _2.findByKeys(_1,this.data);else return this.data.indexOf(_1)},isc.A.findColNum=function isc_ListGrid_findColNum(_1){return-1},isc.A.$50s=function isc_ListGrid__moveEditor(_1,_2,_3){if(!this.$30a||_1==this.$285){return}
var _4=this.$285;this.logInfo(_3+": editSession: "+this.getEditValuesID(_1)+" with values: "+this.echo(this.$300(_1,_2))+" was being edited at row: "+_4+", will now edit at row: "+_1,"gridEdit");this.$285=_1;var _5=this.$286,_6=_5?_5.getItems():null;if(_6){for(var i=0;i<_6.length;i++){_6[i].rowNum=_1}}},isc.A.rowEditNotComplete=function isc_ListGrid_rowEditNotComplete(_1){return(this.$33a!=null&&this.$33a[_1]!=null)},isc.A.$33m=function isc_ListGrid__editorChange(_1,_2,_3,_4){var _5=this.getCellRecord(_1,_2);if(this.editorChange!=null)this.editorChange(_5,_3,_4,_1,_2);var _6=this.getFieldName(_2);if(this.editValueChanged!=null)
this.editValueChanged(_1,_6,_3,_4);if(this.$30a&&this.isEditingRecord(_1,_2)&&this.fields!=null){_5=isc.addProperties({},this.$300(_1,_2),_5);var _7=!this.editByCell?this.fields:[this.getEditField()];for(var i=0;i<_7.length;i++){var _9=_7[i],_10=this.$286.getItem(_9[this.fieldIdProperty]);if(_10==null)continue;var _11=this.getEditorValueMap(_9,this.getEditedRecord(_1,_2,true));if(_10.valueMap!=_11){var _12=true;if(isc.isAn.Array(_11)&&isc.isAn.Array(_10.valueMap)){_12=!_11.equals(_10.valueMap)}else if(isc.isAn.Object(_11)&&isc.isAn.Object(_10.valueMap)){if(isc.getKeys(_11).equals(isc.getKeys(_10.valueMap))){_12=false;for(var _13 in _11){if(_11[_13]!=_10.valueMap[_13]){_12=true;break}}}}
if(_12)_10.setValueMap(_11)}}}},isc.A.getEditRow=function isc_ListGrid_getEditRow(){return this.$285},isc.A.getEditCol=function isc_ListGrid_getEditCol(){return this.$30u},isc.A.getEditField=function isc_ListGrid_getEditField(){return this.getField(this.getEditCol())},isc.A.getEditFieldName=function isc_ListGrid_getEditFieldName(){return this.getFieldName(this.getEditCol())},isc.A.getEditRecord=function isc_ListGrid_getEditRecord(){return this.getCellRecord(this.getEditRow(),this.getEditCol())},isc.A.cancelEditing=function isc_ListGrid_cancelEditing(_1){if(!this.$30a)return;this.discardEdits(this.getEditRow(),this.getEditCol(),false,_1)},isc.A.cellEditEnd=function isc_ListGrid_cellEditEnd(_1,_2){if(this.$51k&&_1!=isc.ListGrid.TAB_KEYPRESS&&_1!=isc.ListGrid.SHIFT_TAB_KEYPRESS&&_1!=isc.ListGrid.UP_ARROW_KEYPRESS&&_1!=isc.ListGrid.DOWN_ARROW_KEYPRESS&&_1!=isc.ListGrid.LEFT_ARROW_KEYPRESS&&_1!=isc.ListGrid.RIGHT_ARROW_KEYPRESS)delete this.$51k
var _3=this.getEditRow(),_4=this.getEditCol();if(_3==null&&_4==null)return;if(arguments.length>=2){this.setEditValue(_3,_4,_2)}
var _5=this.getFieldName(_4),_6=this.shouldCancelEdit(_3,_4,_1);if(_6)return this.cancelEditing(_1);var _7=this.getNextEditCell(_3,_4,_1);this.clearNewEditCell();if(_7==null){this.logInfo("cellEditEnd: ending editing, completion event: "+_1,"gridEdit");this.$33x(_1);return}
if(Array.isLoading(this.getCellRecord(_7[0],_7[1]))){return false}
this.$32f(_1,_3,_4,_7[0],_7[1])},isc.A.getUpdatedEditorValue=function isc_ListGrid_getUpdatedEditorValue(){if(!this.$30a)return;var _1=this.$286.getItem(this.getEditFieldName()),_2=this.getEditField(),_3;if(_1){if(_1.$10v())_1.updateValue();_3=_1.getValue();return this.$33y(_3,_2,this.getEditRow(),this.getEditCol())}else{return this.getEditDisplayValue(this.getEditRow(),this.getEditCol())}},isc.A.storeUpdatedEditorValue=function isc_ListGrid_storeUpdatedEditorValue(_1,_2){if(!this.isDrawn()||!this.$30a)return;var _3=this.getEditRow();if(_2==null)_2=this.getEditCol();var _4=this.getField(_2),_5=this.$286,_6=this.getEditFormItem(_2),_7;if(_6){if(_6.$10v())_6.updateValue();var _8=_6.getValue();_7=this.$33y(_8,_4,_3,_2);var _9;if(_7===_9)_7=null;var _10=this.$30y(_3,_2),_11;if(_10===_11||!this.fieldValuesAreEqual(_4,_10,_7)){var _12=isc.SimpleType.getType(_4.type);if(_12&&_12.getAtomicValue!=null){var _13=_5.getValue(_6.name);if(_8!=_7&&_12.updateAtomicValue!=null){_12.updateAtomicValue(_7,_13)}
_7=_13}
this.setEditValue(_3,_2,_7,true,_1)}}},isc.A.$32i=function isc_ListGrid__handleEditorExit(_1,_2,_3,_4){var _5=this.getCellRecord(_2,_3),_6=this.getField(_3),_7=this.getEditorName(_2,_6),_8=true;var _9=this.$286.getItem(_7);if(isc.isA.PopUpTextAreaItem(_9))_9.hidePopUp();if(isc.CubeGrid&&isc.isA.CubeGrid(this)&&this.selection&&this.selection.anySelected())this.selection.deselectAll();if(_6&&_6.editorExit!=null){isc.Func.replaceWithMethod(_6,"editorExit","editCompletionEvent,record,newValue,rowNum,colNum,grid");_8=(_6.editorExit(_1,_5,_4,_2,_3,this)
!=false)}
if(_8&&this.editorExit!=null)
_8=this.editorExit(_1,_5,_4,_2,_3)!=false;return _8},isc.A.$32j=function isc_ListGrid__handleRowEditorExit(_1,_2,_3){var _4=this.getRecord(_2);if(this.rowEditorExit!=null)
return(this.rowEditorExit(_1,_4,_3,_2)!=false);return true},isc.A.$30x=function isc_ListGrid__handleEditorEnter(_1,_2,_3,_4){var _5=this.getCellRecord(_2,_3),_6=this.getFieldName(_3),_7=this.getField(_3),_8=true;if(isc.isA.PopUpTextAreaItem(_1)&&_1.popUpOnEnter){_1.showPopUp(true)}
if(_7&&_7.editorEnter!=null){isc.Func.replaceWithMethod(_7,"editorEnter","record,value,rowNum,colNum,grid");_8=_7.editorEnter(_5,_4,_2,_3,this)!=false}
if(_8&&this.editorEnter!=null)
_8=this.editorEnter(_5,_4,_2,_3)!=false;return _8},isc.A.$30z=function isc_ListGrid__handleRowEditorEnter(_1,_2,_3){var _4=this.getRecord(_2);if(this.rowEditorEnter!=null)
return this.rowEditorEnter(_4,_3,_2)!=false;return true},isc.A.$32k=function isc_ListGrid__validationEnabled(){if(!isc.DS)return false;var _1=isc.DS.get(this.dataSource);return!this.neverValidate&&!(_1&&_1.useLocalValidators!=null&&_1.useLocalValidators==false)},isc.A.shouldSaveOnCellExit=function isc_ListGrid_shouldSaveOnCellExit(_1,_2){if(this.getCellRecord(_1,_2)==null)return false;return(this.saveByCell!=null?this.saveByCell:this.editByCell)},isc.A.shouldSaveOnRowExit=function isc_ListGrid_shouldSaveOnRowExit(_1,_2,_3){return true},isc.A.shouldValidateByCell=function isc_ListGrid_shouldValidateByCell(_1,_2,_3){var _4=this.getField(_2);if(_4&&_4.validateByCell!=null)return _4.validateByCell;return(this.validateByCell!=null?this.validateByCell:this.editByCell)},isc.A.shouldValidateByRow=function isc_ListGrid_shouldValidateByRow(_1,_2,_3){return this.autoValidate},isc.A.shouldCancelEdit=function isc_ListGrid_shouldCancelEdit(_1,_2,_3){if(_3==isc.ListGrid.ESCAPE_KEYPRESS){var _4=this.getField(_2),_5=_4.escapeKeyEditAction||this.escapeKeyEditAction;if(_5=="cancel")return true}
return false},isc.A.$33w=function isc_ListGrid__killEdit(_1,_2,_3){if(this.$32p!=_1)return;if(this.confirmCancelEditing){if(_3==null){var _4=this.getID()+".$33w('"+_1+"','"+_2+"',value);";isc.ask(this.cancelEditingConfirmationMessage,_4);var _5=isc.Dialog.Warn.toolbar.getButton(0);if(_5.isDrawn())_5.focus()
else isc.Timer.setTimeout({target:_5,methodName:"focus"},0);return}else if(_3==false)return}
var _6=this.getEditRow(),_7=this.getEditCol(),_8=this.getUpdatedEditorValue(),_9=this.getEditValues(_6,_7);if(!this.$32i(_2,_6,_7,_8)||!this.$32j(_2,_6,_9))
{return}
var _10,_11=[],_12=this.$285,_13=this.getEditValues(_12,_7),_14=this.body?this.body.getDrawArea():[null,null,1,0],_15=_14[2],_16=_14[3],_17;if(_13!=null){if(this.isNewEditRecord(_12,_7)){if(this.isDrawn())this.body.markForRedraw("clearing extra edit row");_10=true}else{for(var i=_15;i<=_16;i++){if(_13[this.getFieldName(i)]!==_17&&((this.editByCell&&this.$30u!=i)||!this.canEditCell(_12,i)))
{_11.add(i)}}}
this.$321(this.$285,_7,true);if(this.isGrouped&&this.$75i(_12)){_10=true}}
if(this.body){this.hideInlineEditor(true);if(this.isDrawn()){if(!_10){for(var i=0;i<_11.length;i++){this.refreshCell(_12,_11[i])}}}}},isc.A.isNewEditRecord=function isc_ListGrid_isNewEditRecord(_1){var _2=this.getEditSession(_1);return _2&&_2.$33i},isc.A.endEditing=function isc_ListGrid_endEditing(){if(this.getEditRow()!=null)this.$33x(isc.ListGrid.PROGRAMMATIC)},isc.A.$33x=function isc_ListGrid__saveAndHideEditor(_1){if(this.$686()){this.saveEdits(_1);return}
var _2=this.getEditRow(),_3=this.getEditCol(),_4=this.getEditValue(_2,_3),_5=this.getEditValues(_2,_3);if(!this.$32i(_1,_2,_3,_4)||!this.$32j(_1,_2,_5))return;var _6=(this.autoSaveEdits&&this.shouldWaitForSave()),_7=(this.autoSaveEdits&&this.stopOnErrors),_8;if(_6)_8="if((success||!this.stopOnErrors)&&(this.$32p=="+this.$32p+"))this.hideInlineEditor(true);";var _9=(_1==isc.ListGrid.ESCAPE_KEYPRESS&&this.escapeKeyEditAction=="exit"),_10=this.autoSaveEdits&&!_9;if(_10){this.saveEdits(_1,_8)}else{var _11=this.getFieldName(_3);var _12=!_9&&this.$32k()&&(this.shouldValidateByCell(_2,_3,_1)||this.shouldValidateByRow(_2,_3,_1));if(_12){var _13;if(this.useCellRecords){_13=!this.validateCell(_2,_3)}else{_13=!this.validateRow(_2)}
if(this.stopOnErrors&&_13)return false}
if(!this.recordHasChanges(_2,_3,false)){this.logInfo("editor hiding at "+[_2,_3]+", no actual changes, dropping editSession","gridEdit");this.$321(_2,_3)}}
if(!_6)this.hideInlineEditor(true);if(this.isGrouped&&(!_10||!this.shouldSaveLocally())){this.$75i(_2)}},isc.A.saveAndEditNewCell=function isc_ListGrid_saveAndEditNewCell(_1,_2,_3){if(_3==null)_3=isc.ListGrid.PROGRAMMATIC;this.$32l(_1,_2,_3)},isc.A.$32l=function isc_ListGrid__saveAndStartEditing(_1,_2,_3){var _4=this.shouldWaitForSave(),_5;if(_4){_5="if((success||!this.stopOnErrors)&&(this.$32p=="+this.$32p+"))this.$31u("+_1+","+_2+");"}
this.saveEdits(_3,_5);if(!_4){this.$31u(_1,_2)}},isc.A.$33z=function isc_ListGrid__saveAndEditNextCell(_1,_2){var _3=this.getEditRow(),_4=this.getEditCol(),_5=isc.ListGrid.PROGRAMMATIC,_6=this.findNextEditCell(_3,_4,_1,_2,false);this.$32l(_6[0],_6[1],_5)},isc.A.saveAndEditNextCell=function isc_ListGrid_saveAndEditNextCell(){this.$33z(1,true)},isc.A.saveAndEditPreviousCell=function isc_ListGrid_saveAndEditPreviousCell(){this.$33z(-1,true)},isc.A.saveAndEditNextRow=function isc_ListGrid_saveAndEditNextRow(){this.$33z(1,false)},isc.A.saveAndEditPreviousRow=function isc_ListGrid_saveAndEditPreviousRow(){this.$33z(-1,false)},isc.A.getNextEditCell=function isc_ListGrid_getNextEditCell(_1,_2,_3){switch(_3){case isc.ListGrid.CLICK_OUTSIDE:case isc.ListGrid.ESCAPE_KEYPRESS:return null;case isc.ListGrid.ENTER_KEYPRESS:var _4=this.getField(_2),_5=_4.enterKeyEditAction||this.enterKeyEditAction;if(_5=="done")return null;else if(_5=="nextCell")
return this.findNextEditCell(_1,_2,1,true,false);else if(_5=="nextRow")
return this.findNextEditCell(_1,_2,1,false,false);else if(_5=="nextRowStart"){var _6=this.listEndEditAction||"done";if(_1+1<this.getTotalRows()||_6=="next"){return this.findNextEditCell(_1+1,0,1,true,true)}else{if(_6=="stop")return[_1,_2];return null}}
case isc.ListGrid.EDIT_FIELD_CHANGE:case isc.ListGrid.PROGRAMMATIC:return this.getNewEditCell();case isc.ListGrid.UP_ARROW_KEYPRESS:return this.findNextEditCell(_1,_2,-1,false,false);case isc.ListGrid.DOWN_ARROW_KEYPRESS:return this.findNextEditCell(_1,_2,1,false,false);case isc.ListGrid.TAB_KEYPRESS:case isc.ListGrid.RIGHT_ARROW_KEYPRESS:var _4=this.getField(_2);if(_4.nextTabColNum!=null){return this.findNextEditCell(_1+1,_4.nextTabColNum,1,true,true)}else{return this.findNextEditCell(_1,_2,1,true,false)}
case isc.ListGrid.SHIFT_TAB_KEYPRESS:case isc.ListGrid.LEFT_ARROW_KEYPRESS:var _4=this.getField(_2)
if(_4.previousTabColNum!=null){return this.findNextEditCell(_1-1,_4.previousTabColNum,-1,true,true)}else
return this.findNextEditCell(_1,_2,-1,true,false)}
this.logWarn("getNextEditCell(): Passed unrecognized editCompletionEvent type:"+_3+", returning null");return null},isc.A.findNextEditCell=function isc_ListGrid_findNextEditCell(_1,_2,_3,_4,_5,_6,_7,_8){var _9=_1,_10=_2,_11,_12=this.getFields().length;if(_12==0)return;_11=(_7?_9:(this.listEndEditAction=="next"||_6)?this.getTotalRows():this.getTotalRows()-1);if(_9>this.getTotalRows())_11=_9;if((_5!=false||_3==0)&&_9<=_11&&_9>=0&&_10<_12&&_10>=0&&this.canEditCell(_9,_10)&&(_8||this.$60w(_9,_10)))
{return[_9,_10]}
if(_3==0)return null;var _13=this.canEditCell(_9,_10)&&this.$60w(_9,_10),_14=_7?_9:0;if(_4){var _15=this.rowEndEditAction||"next";while(_9<(_11+1)&&_9>=_14){if(isc.ResultSet&&isc.isA.ResultSet(this.data)){if(_9<this.data.getLength()&&!this.data.rowIsLoaded(_9))return null}
_10+=_3;if(_15=="same"&&_2==_10){return _13?[_1,_2]:null}
if(_10<0||_10>=_12){if(_15=="done"||isc.isA.RecordEditor(this))return null;if(_15=="stop")return(_13?[_1,_2]:null)
else{_10=(_3>0?-1:_12);if(_15=="next")_9+=_3}}else if(this.canEditCell(_9,_10)&&(_8||this.$60w(_9,_10)))
{return[_9,_10]}}
if(this.listEndEditAction=="stop"||(this.listEndEditAction=="next"&&_9<_14))
{if(_13)return[_1,_2];else return null}else{return null}}else{_9+=_3
while(_9>=_14&&_9<=_11){if(this.canEditCell(_9,_10)&&(_8||this.$60w(_9,_10))){return[_9,_10]}
_9+=_3}
if(this.listEndEditAction=="stop"||(this.listEndEditAction=="next"&&_9<_14))
{return _13?[_1,_2]:null}
return null}},isc.A.$60w=function isc_ListGrid__canFocusInEditor(_1,_2){var _3=this.getFieldName(_2),_4=this.getEditForm();if(_4==null){this.makeEditForm(_1,_2);_4=this.$286}
var _5=_4?_4.getItem(_3):null;if(_5)return _5.$kk();var _6=this.getField(_3);if(_6.canFocus!=null)return _6.canFocus;var _7=this.getEditorType(_6,this.getEditedRecord(_1));_7=isc.FormItemFactory.getItemClassName(_6,_7,null,true);var _8=_7=isc.FormItemFactory.getItemClass(_7);if(_8){var _9=_8.getPrototype(),_10=_9.canFocus;if(_10!=null)return _10;if(isc.isA.CanvasItem(_9)){return true}
return _9.$kk()}
return false},isc.A.setNewEditCell=function isc_ListGrid_setNewEditCell(_1,_2){this.$330=[_1,_2]},isc.A.getNewEditCell=function isc_ListGrid_getNewEditCell(){if(this.canEditCell(this.$330[0],this.$330[1]))return this.$330;return null},isc.A.clearNewEditCell=function isc_ListGrid_clearNewEditCell(){this.$330=null},isc.A.discardAllEdits=function isc_ListGrid_discardAllEdits(_1,_2){if(_1==null)_1=this.getAllEditRows(true);else{for(var i=0;i<_1.length;i++){if(isc.isA.Array(_1[i]))_1[i]=this.getEditValuesID(_1[i][0],_1[i][1]);if(isc.isA.Number(_1[i]))_1[i]=this.getEditValuesID(_1[i])}}
if(_1==null)return;for(var i=0;i<_1.length;i++)this.discardEdits(_1[i],null,_2)},isc.A.discardEdits=function isc_ListGrid_discardEdits(_1,_2,_3,_4){if(_1==null)return;var _5;if(isc.isA.Number(_1)){_5=this.getEditValuesID(_1,_2)}else{_5=_1;_1=this.getEditSessionRowNum(_5,_2)}
var _6=this.recordMarkedAsRemoved(_1);if(!_3&&this.$686()&&(!(this.getTotalRows()==1&&_1==0)))
{this.logInfo("Refusing to hide editor on 'discardEdits' [editCompletionEvent:"+_4+"] due to alwaysShowEditors settings","inactiveEditorHTML");_3=true}
if(!_3&&this.$30a&&this.getEditRow()==_1){if(_4==null)_4=isc.ListGrid.PROGRAMMATIC;return this.$33w(this.$32p,_4)}else{if(this.$30a&&this.getEditRow()==_1){this.storeUpdatedEditorValue(true)}
this.$321(_5,_2)}
if(_6)this.refreshRow(_1)},isc.A.saveEdits=function isc_ListGrid_saveEdits(_1,_2,_3,_4,_5,_6){if(_1==null)_1=isc.ListGrid.PROGRAMMATIC;if(_3==null){_3=this.getEditRow()
_4=this.getEditCol()}else if(_4==null){_4=(_3==this.getEditRow()?this.getEditCol():this.getRowEditColNum(_3))}
if(_3==null)return false;if(this.recordMarkedAsRemoved(_3)){if(_5){return true}
var _7=this.isNewEditRecord(_3,_4);if(_7){this.discardEdits(_3);this.$332(_2,_3,_4,_1,true);return}else{var _8=this;var _9=function(_18,_19,_20){_8.fireCallback(_2,"rowNum,colNum,editCompletionEvent,success",[_3,_4,_1,true])};this.removeData(this.getCellRecord(_3,_4),_9,null,true);return}}
var _10=this.getEditValues(_3,_4),_11=this.getCellRecord(_3,_4),_12=this.getEditValuesID(_3,_4);var _13;if(_11!=null&&!Array.isLoading(_11)){if(isc.isA.Tree(this.data)){_13=this.data.getCleanNodeData(_11,false)}else{_13=isc.addProperties({},_11)}
if(_13&&this.selection)delete _13[this.selection.selectionProperty]}
var _14={rowNum:_3,colNum:_4,oldValues:_13,editValuesID:_12,values:_10,editCompletionEvent:_1,newRecord:(_3>this.data.getLength())};if(this.logIsDebugEnabled("gridEdit")){this.logDebug("change detection: newValues: "+this.echo(_10)+", oldValues: "+this.echo(_13),"gridEdit")}
var _15=this.recordHasChanges(_3,_4,false);if(!_6&&this.$32k()){this.$81c=(_5||_15);var _16;if(this.useCellRecords){_16=!this.validateCell(_3,_4)}else{_16=!this.validateRow(_3)}
this.$81c=null;if(_16){if(!_5)this.$331(_14,_2);return false}}
if(_5)return true;if(!_15){this.logInfo("saveEdits: no actual change, not saving","gridEdit");this.$321(_12,_4);this.$332(_2,_3,_4,_1,true);return}
_10=this.$300(_3,_4);this.logInfo("Saving newValues '"+isc.echoAll(_10)+"'","gridEdit");this.rememberSubmittedEditValues(_3,_4);_10=isc.addProperties({},_10);var _17=this.saveEditedValues(_3,_4,_10,_13,_12,_1,_2);if(_17===false){this.$331(_14,_2);return false}
return true},isc.A.rowHasChanges=function isc_ListGrid_rowHasChanges(_1,_2){return this.recordHasChanges(_1,null,_2)},isc.A.recordHasChanges=function isc_ListGrid_recordHasChanges(_1,_2,_3){if(_3==null)_3=true;var _4=false,_5=(_3?this.getEditValues(_1,_2):this.$300(_1,_2)),_6=this.getCellRecord(_1,_2);if(!_6)return true;var _7=isc.addProperties({},_6,this.getSubmittedEditValues(_1,_2));for(var _8 in _5){if(_8==this.removeRecordProperty)continue;var _9=_7[_8],_10=_5[_8];if(!this.fieldValuesAreEqual(this.getField(_8),_9,_10)){_4=true;break}}
return _4},isc.A.hasChanges=function isc_ListGrid_hasChanges(_1){var _2=this.getAllEditRows();if(_2!=null){for(var i=0;i<_2.length;i++){if(this.recordMarkedAsRemoved(_2[i]))return true;if(this.rowHasChanges(_2[i],_1))return true}}
return false},isc.A.cellHasChanges=function isc_ListGrid_cellHasChanges(_1,_2,_3){if(_1==null||_2==null)return false;var _4=(_3?this.getEditValues(_1,_2):this.$300(_1,_2));if(!_4)return false;var _5=this.getCellRecord(_1,_2);if(!_5)return true;var _6=this.getField(_2);if(_6==null)return false;var _7=!_6.dataPath&&isc.CubeGrid&&isc.isA.CubeGrid(this)?this.getValueProperty(_1,_2):null;var _8=isc.Canvas.$70o(_7,_6,_4,this,true,"compare");var _9;if(_8===_9)return false;var _10=this.getSubmittedEditValues(_1,_2),_11;if(_10){_11=isc.Canvas.$70o(_7,_6,_10,this,true,"compare")}
if(_11==null){_11=isc.Canvas.$70o(_7,_6,_5,this,true,"compare")}
if(_11==null){_11=isc.Canvas.$70o(_7,_6,_10,this,true,"compare")}
return!this.fieldValuesAreEqual(_6,_11,_8)},isc.A.saveAllEdits=function isc_ListGrid_saveAllEdits(_1,_2){this.$333=this.$333||{};this.$90a=this.$90a||{};this.$334=this.$334||{};if(_1==null)_1=this.getAllEditCells();if(_1==null)return false;if(!isc.isAn.Array(_1))_1=[_1];if(this.$32k()){for(var i=0;i<_1.length;i++){var _4=isc.isAn.Array(_1[i])?_1[i][0]:_1[i],_5=isc.isAn.Array(_1[i])?_1[i][1]:null;var _6=this.recordMarkedAsRemoved(_4)||this.saveEdits(null,null,_4,_5,true);if(!_6){if(this.stopOnErrors)return false;else{_1[i]=null;_2=null}}}}
var _7=(this.dataSource!=null&&!this.shouldSaveLocally()),_8=false;if(_7)_8=!isc.RPCManager.startQueue();var _9=this.$31e++,_10=this.$333[_9]=[],_11=this.$90a[_9]=[];this.$334[_9]=_2;var _12=false;var _13=["this.$335('",,"',rowNum,"+_9+",colNum,editCompletionEvent,success)"];var _14=[];for(var i=0;i<_1.length;i++){if(_1[i]==null)continue;var _4=_1[i],_5;if(isc.isAn.Array(_4)){_5=_4[1];_4=_4[0]}
var _15=0;if(_14&&_14.length>0){for(var k=_14.length;k--;){if(_4>_14[k]){++_15}}}
_4-=_15;var _17=this.isNewEditRecord(_4,_5);var _18=this.recordMarkedAsRemoved(_4);if((!_7||_17)&&_18){_14.push(_4)}
if(!this.recordHasChanges(_4,_5)&&!_18){continue}
_12=true;var _19=this.getEditValuesID(_4);_13[1]=_19;if(_18){_11[_11.length]=_19}else{_10[_10.length]=_19}
this.saveEdits(null,_13.join(""),_4,_5,false,true)}
if(_8){isc.RPCManager.sendQueue(null,null,null,true)}
return _12},isc.A.$335=function isc_ListGrid__saveAllEditsRowCallback(_1,_2,_3,_4,_5,_6){if(!_6){delete this.$334[_3];delete this.$333[_3];delete this.$90a[_3];return}
var _7=this.$333[_3],_8=this.$90a[_3];if(_7==null&&_8==null)return;var _9,_10,_11;for(_9=0;_9<_7.length;_9++){var _12=_7[_9];if(_12==_1){_10=true;break}}
if(!_10){for(_9=0;_9<_8.length;_9++){var _12=_8[_9];if(_12==_1){_10=true;break}}
if(_10)_11=true}
if(_11){_8.removeAt(_9)}else{_7.removeAt(_9)}
if(_7.length==0&&_8.length==0){this.$332(this.$334[_3],_2,_4,_5);delete this.$334[_3];delete this.$333[_3];delete this.$90a[_3]}},isc.A.$33y=function isc_ListGrid__parseEditorValue(_1,_2,_3,_4,_5){var _6;if(_5===_6)_5=this.getCellRecord(_3,_4);if(_2&&_2.parseEditorValue!=null){isc.Func.replaceWithMethod(_2,"parseEditorValue","value,record,rowNum,colNum,grid");_1=_2.parseEditorValue(_1,_5,_3,_4,this)}else if(this.parseEditorValue!=null){_1=this.parseEditorValue(_1,_5,_3,_4)}
return _1},isc.A.saveEditedValues=function isc_ListGrid_saveEditedValues(_1,_2,_3,_4,_5,_6,_7){var _8={editValuesID:_5,rowNum:_1,colNum:_2,values:_3,oldValues:_4,editCompletionEvent:_6};if(this.shouldSaveLocally()){if(this.useRemoteValidators==true){var _9=false,_10=this.getDataSource(),_11=_10?_10.getFieldNames():null;if(_11!=null){for(var i=0;i<_11.length;i++){var _13=_10.getField(_11[i]),_14=_13.validators;if(_14==null)continue;if(!isc.isAn.Array(_14))_14=[_14];for(var _15=0;_15<_14.length;_15++){if(isc.Validator.isServerValidator(_14[_15])){_9=true;break}}
if(_9)break}}
if(_9){var _16={validationMode:"partial",prompt:isc.RPCManager.validateDataPrompt,showPrompt:this.shouldWaitForSave(),internalClientContext:{editInfo:_8,saveCallback:_7},componentID:this.ID};_10.validateData(_8.values,{target:this,methodName:"remoteValidationForLocalSaveComplete"},_16);if(this.$31o==null)this.$31o={};this.$31o[_8.editValuesID]=true;return}}
return this.$336(_8,_7)}
if(isc.Offline&&isc.Offline.isOffline()&&!this.dataSource.clientOnly){isc.warn(this.offlineSaveMessage);return false}
var _17=this.getID()+".$337(dsResponse, dsRequest)",_18={operationId:(_4==null?this.addOperation:this.updateOperation)||this.saveOperation,application:this.application,willHandleError:true,showPrompt:this.shouldWaitForSave(),oldValues:_4,$52s:this.getRecord(_1,_2),internalClientContext:{saveCallback:_7,newValues:_3,editInfo:_8},componentId:this.ID};var _19=this.getAllFields();if(_19!=null){for(var i=0;i<_19.length;i++){if(_19[i].includeFrom!=null&&this.getDataSource().getField(_19[i].name)==null)
{if(_18.additionalOutputs==null)_18.additionalOutputs="";else _18.additionalOutputs+=",";_18.additionalOutputs+=[_19[i].name,_19[i].includeFrom].join("!")}}}
if(this.saveRequestProperties){isc.addProperties(_18,this.saveRequestProperties)}
this.$338(_3,_4);if(this.$31o==null)this.$31o={};this.$31o[_8.editValuesID]=true;var _10=isc.DS.get(this.dataSource);if(_4==null){var _20=isc.addProperties({},_4,_3);_10.addData(_20,_17,_18)}else{var _21=isc.DS.get(this.dataSource).filterPrimaryKeyFields(_4),_22=isc.addProperties({},_21,_3);_10.updateData(_22,_17,_18)}},isc.A.$336=function isc_ListGrid__saveLocally(_1,_2){var _3=_1.rowNum,_4=_1.colNum,_5=_1.oldValues,_6=_1.values;var _7=this.getCellRecord(_3,_4),_8=(_7==null);if(_8){var _9=this.getOriginalData();var _10=this.getEditSession(_3);_10.$33b=this.getPrimaryKeys(_6);delete _10.$33i;if(isc.ResultSet&&isc.isA.ResultSet(_9)){if(_9.allRows!=null){_9.allRows.add(isc.addProperties({},_6));_9.filterLocalData()}else{this.logWarn("Unable to add data to resultSet - allRows is not set")}}else{_9.add(_6);_9.dataChanged()}}else{var _11,_12;var _13={};for(var i=0;i<this.completeFields.length;i++){var _15=this.completeFields[i],_16=this.getEditorName(_3,_15,true);_11=isc.Canvas.$70o(null,_15,_6,this,true,"edit");if(_11!==_12){var _17=this.fields.indexOf(_15);if(_17!=-1){this.setRawCellValue(_7,_3,_17,_11)}else{isc.Canvas.$70n(null,_15,_11,_7,this,true)}}
var _18=_16;if(_16.indexOf("/")>=0){_18=isc.DynamicForm.$840(_16,this)}
_13[_18]=true}
this.combineValuesRecursively(_7,_6,_13)}
this.$338(_6,_5);this.$339(_1,_2);if(this.valuesManager!=null){this.valuesManager.$71e(_3,null,_7,this)}});isc.evalBoundary;isc.B.push(isc.A.combineValuesRecursively=function isc_ListGrid_combineValuesRecursively(_1,_2,_3,_4,_5){if(_4==null)_4="";if(_5==null)_5=[];if(isc.isAn.Object(_1)&&!isc.isA.Date(_1)){if(_5.contains(_1))return;_5.add(_1)}
if(_3[_4]){return}
if(isc.isAn.Array(_2)){for(var i=0;i<_2.length;i++){var _7=_4==""?""+i:_4+"/"+i;if(isc.isAn.Object(_2[i])&&!isc.isA.Date(_2[i])){if(_1[i]==null)_1[i]=isc.isAn.Array(_2[i])?[]:{};this.combineValuesRecursively(_1[i],_2[i],_3,_7,_5)}else{_1[i]=_2[i]}}}else if(isc.isAn.Object(_2)&&!isc.isA.Date(_2)){for(var _8 in _2){var _7=_4==""?_8:_4+"/"+_8;if(isc.isAn.Object(_2[_8])&&!isc.isA.Date(_2[_8])){if(_1[_8]==null)_1[_8]=isc.isAn.Array(_2[_8])?[]:{};this.combineValuesRecursively(_1[_8],_2[_8],_3,_7,_5)}else{if(_3[_7]){}else{_1[_8]=_2[_8]}}}}},isc.A.remoteValidationForLocalSaveComplete=function isc_ListGrid_remoteValidationForLocalSaveComplete(_1,_2,_3){var _4=_1.internalClientContext,_5=_4.editInfo;if(this.$31o&&this.$31o[_5.editValuesID]){delete this.$31o[_5.editValuesID];if(isc.isAn.emptyObject(this.$31o))delete this.$31o}
if(_1.status<0&&_1.status!=isc.RPCResponse.STATUS_VALIDATION_ERROR){this.logWarn("Server-side validation failed: "+_1.data);isc.RPCManager.handleError(_1,_3);return}
var _6=this.$300(_5.editValuesID);if(_1.errors){var _7=isc.DynamicForm.getSimpleErrors(_1.errors),_8=false;for(var _9 in _7){_8=true;if(_6==null){this.logWarn("Asynchronous remote validation failed for attempted save of edits for row:"+_5.rowNum+" but edit values have subsequently been discarded. Ignoring validation failure.  Validation failure details:\n"+this.echoFull(_7));break}
var _10=_7[_9],_11=this.getField(_9);if(_10!=null&&_11!=null){var _12=_5.values[_9],_13=_6[_9];if(_12!=_13&&!(isc.isA.Date(_13)&&isc.isA.Date(_12)&&(_13.getTime()==_12.getTime())))
{this.logWarn("Asynchronous remote validation failed for attempted save of edits for row:"+_5.rowNum+". Submitted value for field "+_9+" was "+_12+", but the edit value has subsequently been modified and is now:"+_13+". Not showing the following validation error[s] for this field:\n"+this.echoAll(_10));continue}
if(!isc.isAn.Array(_10))_10=[_10];_10=_10.getProperty("errorMessage");this.setFieldError(_5.rowNum,_9,_10,false)}}
if(_8)return}
this.$336(_5,_4.saveCallback)},isc.A.$338=function isc_ListGrid__unsortOnChange(_1,_2){var _3=this.$60z();if(_3==null)return;var _4=this.fields[_3];if(_4==null)return;var _5=_4[this.fieldIdProperty];var _6;if(_5!=null&&_1[_5]!==_6&&(_2==null||_1[_5]!=_2[_5]))
{this.unsort()}},isc.A.$337=function isc_ListGrid__updateRecordReply(_1,_2){var _3=_1.data,_4=_1.internalClientContext,_5=_4.editInfo,_6=_5.colNum,_7=this.fields[_6];if(this.$31o&&this.$31o[_5.editValuesID]){delete this.$31o[_5.editValuesID];if(isc.isAn.emptyObject(this.$31o))delete this.$31o}
var _8=this.getEditSession(_5.editValuesID);if(_8!=null){_5.rowNum=_8.$24t}else{if(_3&&_3[0]){_5.rowNum=this.findRowNum(_3[0]);if(this.useCellRecords)_5.colNum=this.findColNum(_3[0])}
else _5.rowNum=-1}
var _9=_5.rowNum,_6=_5.colNum;if(_1.status<0){var _10=this.parseServerErrors(_1.errors);this.logInfo("error on save, status: "+_1.status+", errors: "+this.echo(_1.errors),"gridEdit");if(isc.isAn.Array(_10)){if(_10.length!=1)
this.logWarn("Server reports validation errors for multiple records - only displaying errors for the first record.","gridEdit");_10=_10[0]}
if(this.useCellRecords)this.setCellErrors(_9,_6,_10[this.getEditorName(_9,_6)]);else this.setRowErrors(_9,_10);this.$331(_5,_4.saveCallback,_1,_2);return false}
this.$339(_5,_4.saveCallback,_1,_2)},isc.A.parseServerErrors=function isc_ListGrid_parseServerErrors(_1){if(isc.isAn.Array(_1)){if(_1.length>1){this.logWarn("server returned errors for multiple records - dropping all but the first record returned")}
_1=_1[0]}
if(_1&&_1.recordPath)delete _1.recordPath;for(var _2 in _1){var _3=_1[_2];if(_3==null)_3="Unspecified error";if(isc.isAn.Array(_3)){for(var i=0;i<_3.length;i++){_3[i]=_3[i].errorMessage}}else if(_3.errorMessage){_1[_2]=[_3.errorMessage]}else{_1[_2]=[_3]}}
return _1},isc.A.$339=function isc_ListGrid__editCompleteCallback(_1,_2,_3,_4){if(this.$30a&&this.getEditForm().hasFocus)this.storeUpdatedEditorValue(true);var _5=_1.rowNum,_6=_1.colNum,_7=_1.editValuesID,_8=this.getEditSession(_7),_9=this.isNewEditRecord(_7);var _10;if(_3!=null){var _11=isc.DataSource.getUpdatedData(_4,_3,true),_10=isc.isAn.Array(_11)?_11[0]:_11;if(_10==null){return}
if(_8&&_8.$33b==null){this.newRecordForEditValues(_7,_10)}}else{_10=this.getCellRecord(_5,_6)}
var _12=_1.values,_13=this.$300(_7),_14=this.isEditingRecord(_5,_6),_15=this.dataSource?isc.DS.get(this.dataSource).getPrimaryKeyFieldNames():null;var _16=false;for(var _17 in _13){var _18=_15&&_15.contains(_17);if(this.fieldValuesAreEqual(this.getField(_17),_13[_17],_12[_17]))
{if(!(_14&&_18))this.clearEditValue(_7,_17,true,true)}else{if(!_18)_16=true}}
if(!_14&&!_16){this.$321(_7,_6)}
if(_3!=null||_9){if(_3!=null&&this.isGrouped){var _19=false;if(!_9){_19=true;var _20=this.getGroupByFields(),_21=_3.context&&_3.context.params?_3.context.params:{};for(var i=0;i<_20.length;i++){var _23=_20[i];if(_21[_23]!=null){_19=false;break}}}
if(_19)this.$113a=true}
this.displayUpdatedDSRecord(_5,_6,_10)}
var _24=_1.values,_25=_1.oldValues,_26=_1.editCompletionEvent;if(_5==-1)_5=_1.rowNum;if(this.convertToMethod("editComplete")){this.editComplete(_5,_6,_24,_25,_26,_3)}
this.$50u(_10,_5,_6,_24,_25,_4);if(_2)this.$332(_2,_5,_6,_26,true)},isc.A.displayUpdatedDSRecord=function isc_ListGrid_displayUpdatedDSRecord(_1,_2,_3){if(this.$31n()){this.suppressEditRowRemap=true;this.dataChanged();this.suppressEditRowRemap=false}else if(this.isGrouped){if(this.$113a){delete this.$113a;return}
this.regroup()}},isc.A.isEditingRecord=function isc_ListGrid_isEditingRecord(_1,_2){return this.getEditRow()==_1},isc.A.$332=function isc_ListGrid__fireSaveCallback(_1,_2,_3,_4,_5){if(_1!=null){this.fireCallback(_1,this.$31f,[_2,_3,_4,_5])}},isc.A.$50u=function isc_ListGrid__fireCellChanged(_1,_2,_3,_4,_5,_6){var _7,_8;for(var i in _4){var _10=(_5==null?null:_5[i]);if(_4[i]==_10)continue;var _11=this.fields.find(this.fieldIdProperty,i);if(!_11)continue;if(this.isGrouped&&_11){var _12=this.getGroupByFields();if(_12.contains(_11.name))_7=true}
if(this.shouldAutoFitField(_11)){_8=true}
this.$34a(_1,_11,_4[i],_10,_2,this.fields.indexOf(_11))}
if(_8){if(this.shouldSaveLocally()){this.updateFieldWidthsForAutoFitValue("Local edit")}}
if(_7){if(this.shouldSaveLocally()){this.$607(_1,_1,_2,_4)}
this.$34v=false;this.$34u()}},isc.A.$34a=function isc_ListGrid__cellChanged(_1,_2,_3,_4,_5,_6){if(_2&&_2.cellChanged){if(!isc.isA.Function(_2.cellChanged)){isc.Func.replaceWithMethod(_2,"cellChanged","record,newValue,oldValue,rowNum,colNum,grid,recordNum,fieldNum")}
_2.cellChanged.call(this,_1,_3,_4,_5,_6,this,_5,_6)}else if(this.cellChanged){this.cellChanged(_1,_3,_4,_5,_6,this,_5,_6)}},isc.A.$331=function isc_ListGrid__editFailedCallback(_1,_2,_3,_4){var _5=_1.rowNum,_6=_1.colNum,_7=_1.values,_8=_1.oldValues,_9=_1.editCompletionEvent;var _10=this.getRecord(_5);if(_10!=null&&this.canExpandRecord(_10,_5)&&this.expansionMode=="editor"){var _11=isc.isAn.Array(_3.errors)?_3.errors[0]:_3.errors,_10=this.getRecord(_5),_12=false;if(isc.isAn.Object(_11)){for(var _13 in _11){var _14=this.getField(_13);if(!_14||!this.fieldIsVisible(_14)){_12=true;break}}}
if(_12){this.expandRecord(_10)}}
if(this.convertToMethod("editFailed")){this.editFailed(_5,_6,_7,_8,_9,_3,_4)}
if(_2!=null)this.$332(_2,_5,_6,_9,false);this.clearSubmittedEditValues(_1.editValuesID,_7)},isc.A.editFailed=function isc_ListGrid_editFailed(_1,_2,_3,_4,_5,_6,_7){if(_6!=null&&_6.errors==null){isc.RPCManager.$a0(_6,_7)}},isc.A.validateRow=function isc_ListGrid_validateRow(_1,_2){return this.validateRecord(_1,_2)},isc.A.validateRecord=function isc_ListGrid_validateRecord(_1,_2){var _3,_4;if(isc.isAn.Array(_1)){_3=_1[0];_4=_1[1]}else{_3=_1}
var _5=this.getEditValues(_3,_4);if(_5==null)return true;var _6=this.getCellRecord(_3,_4),_7=this.getFields().getProperty(this.fieldIdProperty);var _8=isc.rpc.startQueue();if(this.$81c!=true){this.$131n=true;this.$131o=[]}
var _9=this.validateRowValues(_5,_6,_3,_7);if(this.$131n&&this.$131o.length>0){var _10={rowNum:_3}
this.validateFieldsOnServer(this.$131o,this.getCellRecord(_3),_10)}
this.$131n=null;if(!_8)isc.rpc.sendQueue();this.setRowErrors(_3,_9,_2);return(_9==null)},isc.A.validateRowValues=function isc_ListGrid_validateRowValues(_1,_2,_3,_4){var _5=true,_6={};if(!isc.isAn.Array(_4))_4=[_4];var _7=false;if(_2==null){_7=true;_2={}}
for(var i=0;i<_4.length;i++){if(_4[i]==null)continue;var _9,_10;if(isc.isA.Number(_4[i])){_10=_4[i];_9=_4[i]=this.getFieldName(_10)}else{_9=_4[i];_10=this.getFields().findIndex(this.fieldIdProperty,_9)}
if(_10<0)continue;var _11=((_7&&this.canEditCell(_3,_10))||isc.propertyDefined(_1,_9));var _12,_13;var _14=this.getField(_9),_15=_14?_14.dataPath:null,_16;if(_15!=null){_15=this.$840(_15)}else{_15=_14.name}
_12=isc.Canvas.$70o(_15,_14,_1,this,true,"validate");_13=isc.Canvas.$70o(_15,_14,_2,this,true,"validate");if(!_11){_11=(_12!==_16||_13===_16||_13==null)}
if(!_11)continue;var _17=this.validateCellValue(_3,_10,_12,_13);if(_17!=null){_5=false;_6[_9]=_17}}
if(!_5)return _6;return null},isc.A.validateCell=function isc_ListGrid_validateCell(_1,_2,_3,_4){var _5;if(isc.isA.String(_2))_5=this.getColNum(_2);else{_5=_2;_2=this.getEditorName(_1,_5)}
if(this.$30a&&(this.getEditRow()==_1)&&this.getEditForm().getItem(_2)!=null)
{this.storeUpdatedEditorValue(null,_5)}
var _6=this.getEditValues(_1,_5),_7=this.cellHasErrors(_1,_2),_8=_6?_6[_2]:null,_9=this.getCellRecord(_1,_5),_10=_9?_9[_2]:null;if(_9!=null&&(!_6||!isc.propertyDefined(_6,_2))){return true}
var _11=this.validateCellValue(_1,_5,_8,_10,_4);if(_11!=null){this.setFieldError(_1,_2,_11);return false}
if(_7){this.setFieldError(_1,_2,null)}
return true},isc.A.validateCellValue=function isc_ListGrid_validateCellValue(_1,_2,_3,_4,_5){var _6=this.getCellRecord(_1,_2);var _7=this.getField(_2);return this.validateFieldValue(_3,_4,_6,_7,_1,_2,_5)},isc.A.getRequiredFieldMessage=function isc_ListGrid_getRequiredFieldMessage(_1,_2){return isc.Validator.requiredField},isc.A.validateFieldValue=function isc_ListGrid_validateFieldValue(_1,_2,_3,_4,_5,_6,_7){var _8=[],_9=true;var _10=this.cellIsRequired(_5,_6);if(_10&&(_1==null||isc.isAn.emptyString(_1))){var _11=this.getRequiredFieldMessage(_4,_3);_8.add(_11);_9=false}
var _12=this.getCellValidators(_5,_6);if(_12){if(this.logIsDebugEnabled("gridEdit")){this.logDebug((this.useCellRecords?"At col:"+_6:"At field: "+_4.name)+" applying validators: "+this.echoAll(_12)+" to value:"+_1,"gridEdit")}
var _13,_14=this.getEditedRecord(_5,_6),_15=null,_16={rowNum:_5};if(this.$81c==true){_16.skipServerValidation=true}else if(this.$131n==true){_16.deferServerValidation=true}
if(_7){_13=this.validateFieldAndDependencies(_4,_12,_1,_14,_16)}else{_13=this.validateField(_4,_12,_1,_14,_16)}
if(_13!=null){if(_13.needsServerValidation){this.$131o.add(_4)}
if(_13.valid!=true){_9=false;if(_7)
_8=_13.errors[_4.name]||[];else
_8=_13.errors||[]}else{if(_13.resultingValue!=null){this.setEditValue(_5,_6,_13.resultingValue,null,null,true);_1=_13.resultingValue}}
_15=_13.errors;if(this.logIsInfoEnabled("gridEdit")){this.logInfo("validateFieldValue, newValue: "+this.echo(_1)+", passed validation: "+_9+", resultingValue: "+this.echo(_13.resultingValue),"gridEdit")}}}
if(_7){for(var _17 in _15){if(_17!=_4.name){this.setFieldError(_5,_17,_15[_17],true)}}}
if(_9)return null
else return _8},isc.A.cellIsRequired=function isc_ListGrid_cellIsRequired(_1,_2){var _3=this.getField(_2);return _3&&(_3.required||this.isXMLRequired(_3))},isc.A.getCellValidators=function isc_ListGrid_getCellValidators(_1,_2){var _3=this.getField(_2);return _3?_3.validators:null},isc.A.hasErrors=function isc_ListGrid_hasErrors(){var _1=this.getAllEditRows(true);for(var i=0;i<_1.length;i++){if(this.rowHasErrors(_1[i]))return true}
return false},isc.A.rowHasErrors=function isc_ListGrid_rowHasErrors(_1,_2){var _3=this.getEditSession(_1,_2);return(_3&&_3.$33o&&!isc.isA.emptyObject(_3.$33o))},isc.A.cellHasErrors=function isc_ListGrid_cellHasErrors(_1,_2){var _3=this.getEditorName(_1,_2),_4=this.getEditSession(_1,_2),_5=_4?_4.$33o:null;return(_5!=null&&_5[_3]!=null)},isc.A.getRowValidationErrors=function isc_ListGrid_getRowValidationErrors(_1){return this.getRowErrors(_1)},isc.A.getRowErrors=function isc_ListGrid_getRowErrors(_1,_2){var _3=this.getEditSession(_1,_2);return(_3!=null?_3.$33o:null)},isc.A.getCellErrors=function isc_ListGrid_getCellErrors(_1,_2){var _3=this.getEditSession(_1,_2);if(_3==null)return null;if(isc.isA.Number(_2))_2=this.getEditorName(_1,_2);var _4=_3.$33o;return(_4==null?null:_4[_2])},isc.A.setCellErrors=function isc_ListGrid_setCellErrors(_1,_2,_3,_4){return this.setFieldError(_1,_2,_3,_4)},isc.A.setFieldError=function isc_ListGrid_setFieldError(_1,_2,_3,_4){var _5=_2;if(isc.isA.Number(_5))_5=this.getEditorName(_1,_5);if(_3==null||(isc.isAn.Array(_3)&&_3.length==0)){if(!this.cellHasErrors(_1,_2))return;var _6=this.getEditSession(_1,_2);delete _6.$33o[_5];if(isc.isAn.emptyObject(_6.$33o))delete _6.$33o}else{if(_5==null){this.logWarn("setFieldError() passed field identifier '"+_2+"'. Unable to find corresponding field in this grid - not setting error.");return}
var _7=this.getFields().getProperty(this.fieldIdProperty);if(!_7.contains(_5))
{this.logWarn("setFieldError() passed field identifier '"+_2+"'. This is not a visible field in the grid - error may not be visible to user.")}
var _8;if(isc.isAn.Array(_3))_8=_3
else _8=[_3];var _6=this.getEditSession(_1,_2);if(_6==null){var _9=this.getColNum(_2),_10=this.getCellRecord(_1,_9);_6=this.createEditSession(_1,_9,_10)}
if(_6.$33o==null)_6.$33o={};_6.$33o[_5]=_8}
if(!_4){if(this.useCellRecords)this.showCellErrors(_1,_2)
else this.showErrors(_1,[_5])}},isc.A.addFieldErrors=function isc_ListGrid_addFieldErrors(_1,_2,_3,_4){this.setFieldError(_4,_1,_2)},isc.A.setRowErrors=function isc_ListGrid_setRowErrors(_1,_2,_3){if(_1==null||_1==-1)return;var _4=this.getRowErrors(_1);if(!_2&&!_4)return;var _5=this.getEditSession(_1);if(_5==null)_5=this.createEditSession(_1,null,this.getRecord(_1));if(_2){var _6=this.getFields().getProperty(this.fieldIdProperty);for(var _7 in _2){if(!_3&&!_6.contains(_7)){this.logWarn("setRowErrors() passed error for non-visible field: '"+_7+"'")}
if(!isc.isAn.Array(_2[_7]))_2[_7]=[_2[_7]]}}
_5.$33o=_2;if(!_3){var _8=_2?isc.getKeys(_2):[];for(var _7 in _4){var _9=this.getColNum(_7);if(!_8.contains(_7))_8.add(_7)}
this.showErrors(_1,_8)}},isc.A.clearFieldError=function isc_ListGrid_clearFieldError(_1,_2,_3){return this.setFieldError(_1,_2,null,_3)},isc.A.clearRowErrors=function isc_ListGrid_clearRowErrors(_1,_2){this.setRowErrors(_1,null,_2)},isc.A.showErrors=function isc_ListGrid_showErrors(_1,_2){if(_2==null)_2=this.getFields().getProperty(this.fieldIdProperty);var _3=this.getRowErrors(_1);if(_3==null)_3={};var _4;for(var i=0;i<_2.length;i++){var _6=_2[i];this.showCellErrors(_1,_6);if(_4==null&&_3[_6])_4=_6}
var _7=this.assembleErrorMessage(_3,_2);if(_7){this.displayRowErrorMessages(_7)}
if(this.stopOnErrors&&_4!=null){var _8=this.getColNum(_4);if(_8!=-1){this.showInlineEditor(_1,_8);return}
for(var _6 in _3){if(this.fieldIsVisible(_6)&&_3[_6]){this.showInlineEditor(_1,this.getColNum(_6))}}}},isc.A.showCellErrors=function isc_ListGrid_showCellErrors(_1,_2){var _3;if(isc.isA.Number(_2)){this.getEditorName(_1,_2)}else{_3=_2;_2=this.getColNum(_3)}
if(_2==-1)return;if(this.showErrorIcons){this.refreshCell(_1,_2,null,true)}else{this.body.$29h(null,_1,_2)}},isc.A.assembleErrorMessage=function isc_ListGrid_assembleErrorMessage(_1,_2){var _3=false,_4="Validation Errors occurred:\r\n";for(var _5 in _1){if(_2&&!_2.contains(_1))continue;var _6=this.$34b(_5,_1[_5]);if(_6!=null){_3=true;_4+=_6}}
return(_3?_4:null)},isc.A.$34b=function isc_ListGrid__createFieldErrorString(_1,_2){var _3,_4,_5=this.getField(_1),_6=_5&&_5.title?_5.title:_1;for(var i=0;i<_2.length;i++){var _8=_2[i];if(_8!=null){if(_4==null){_4="<br>Field '"+_6+"':"}
_4+="<br>* "+_8}}
return _4},isc.A.displayRowErrorMessages=function isc_ListGrid_displayRowErrorMessages(_1){if(this.stopOnErrors)isc.warn(_1,"var LG="+this.getID()+";if(LG.$286)LG.$286.focus()")},isc.A.removeData=function isc_ListGrid_removeData(_1,_2,_3,_4){_3=isc.addProperties({},_3);_3.internalClientContext={removeDataCallback:_2};var _5={fromUserAction:_4,rowNum:this.findRowNum(_1),colNum:null,values:_1,editCompletionEvent:isc.ListGrid.PROGRAMMATIC};_3.internalClientContext.editInfo=_5;if(this.getDataSource()!=null&&!this.shouldSaveLocally()){return this.Super("removeData",[_1,{target:this,methodName:"removeDataComplete"},_3],arguments)}
if(this.data){var _6=this.getEditValuesID(_1);if(_6!=null)this.discardEdits(_6);if(isc.ResultSet&&isc.isA.ResultSet(this.data)&&this.shouldSaveLocally()){if(this.data.allRows!=null){this.data.allRows.remove(_1);this.data.filterLocalData()}else{this.logWarn("Unable to remove data from resultSet - allRows is not set")}}else{var _7=this.getOriginalData();_7.remove(_1)}
this.updateFieldWidthsForAutoFitValue("removeData");this.regroup()}
this.fireCallback({target:this,methodName:"removeDataComplete"},"dsResponse,data,dsRequest",[null,_1,_3])},isc.A.removeDataComplete=function isc_ListGrid_removeDataComplete(_1,_2,_3){var _4=_3.internalClientContext,_5=_4.editInfo,_6=_5.fromUserAction,_7=_5.rowNum,_8=_5.colNum,_9=_5.oldValues||_5.values,_10=_5.editCompletionEvent;var _11=_1==null||_1.status>=0;if(_11){if(!isc.isAn.Array(_2))_2=[_2];for(var i=0;i<_2.length;i++){var _13=this.getEditValuesID(_2[i]);if(_13!=null){this.discardEdits(_13)}}
var _14=_5.values||_5.oldValues,_7=_5.rowNum;if(_6&&this.convertToMethod("editComplete")){this.editComplete(_7,_8,_9,_9,_10,_1)}}else{if(_6&&this.convertToMethod("editFailed")){this.editFailed(_7,_8,_9,_9,_10,_1,_3)}}
if(_4.removeDataCallback){this.fireCallback(_4.removeDataCallback,"dsResponse,data,dsRequest",[_1,_2,_3])}},isc.A.removeRecordClick=function isc_ListGrid_removeRecordClick(_1,_2){var _3=this.getRecord(_1);if(this.recordCanRemoveProperty&&_3!=null&&_3[this.recordCanRemoveProperty]==false)
{return}
if(this.onRemoveRecordClick(_1)==false)return;var _4=this.warnOnRemoval,_5=this.shouldDeferRemoval();if(_4&&_5&&this.recordMarkedAsRemoved(_1))_4=false;if(_4){isc.ask(this.warnOnRemovalMessage,this.getID()+".completeRemoveRecordClick(value, "+_1+","+_2+")")}else{this.completeRemoveRecordClick(true,_1,_2)}},isc.A.onRemoveRecordClick=function isc_ListGrid_onRemoveRecordClick(_1){return true},isc.A.completeRemoveRecordClick=function isc_ListGrid_completeRemoveRecordClick(_1,_2,_3){if(!_1)return;if(this.shouldDeferRemoval()){if(this.recordMarkedAsRemoved(_2)){this.unmarkRecordRemoved(_2)}else{this.markRecordRemoved(_2)}}else{var _4=this.getAllEditRows(),_5=_4.contains(_2);if(_5)this.discardEdits(_2,_3);var _6=this.getCellRecord(_2,_3);if(_6==null)return;this.delayCall("removeRecord",[_2,_6])}},isc.A.removeRecord=function isc_ListGrid_removeRecord(_1,_2){if(_2==null)_2=this.data.get(_1);else _1=(this.data?this.data.indexOf(_2):null)
if(_2==null||_1==null||_1==-1||!this.data)return;if(isc.Offline&&isc.Offline.isOffline()&&this.dataSource&&!this.dataSource.clientOnly){isc.warn(this.offlineSaveMessage);return}
var _3=this.animateRemoveRecord&&this.isDrawn()&&this.isVisible()&&this.body&&_1>=this.body.$252&&_1<=this.body.$253;if(this.$916(_2)){_3=false}
if(_3){this.$50w=true;var _4=1;if(isc.isA.Tree(this.data)&&this.data.isFolder(_2)&&this.data.isOpen(_2)){var _5=this.data.getChildren(_2);if(_5&&(!isc.isA.ResultSet(_5)||_5.lengthIsKnown())){_4+=_5.getLength()}}
this.$63o=_4;this.body.$28b(false,_1,_1+_4)}
var _6=this.getDataSource(),_7=(_6==null||this.shouldSaveLocally());if(!_7){if(!_6.getPrimaryKeyField()){this.logWarn("DataSource:"+_6+" has no primary key field - unable to remove records");return}}
var _8;if(_3){_8=this.getID()+".showRemoveCompleteAnimation("+_1+", data,dsResponse);"}
this.removeData(_2,_8,{showPrompt:false},true)},isc.A.showRemoveCompleteAnimation=function isc_ListGrid_showRemoveCompleteAnimation(_1,_2,_3){if(_3&&_3.status<0){this.logWarn("Removal of record failed");_2=null}
if(!_2){delete this.$50w;if(this.body){delete this.body.$28c;delete this.body.$28e;delete this.body.$28f;delete this.body.$28h}
this.markForRedraw()}else{this.startRowAnimation(false,_1,_1+this.$63o,{target:this,methodName:"$63d"},this.animateRemoveSpeed,this.animateRemoveTime);delete this.$63o}},isc.A.$63d=function isc_ListGrid__removeDataAnimationComplete(){delete this.$50w;this.redraw()},isc.A.startRowAnimation=function isc_ListGrid_startRowAnimation(_1,_2,_3,_4,_5,_6,_7,_8,_9){if(!this.body)return;this.finishRowAnimation();this.$64v=_4;if(this.frozenBody){this.frozenBody.startRowAnimation(_1,_2,_3,{target:this,methodName:"rowAnimationComplete",argNames:"body,hasFrozenBody",args:[this.frozenBody,true]},_5,_6,_7,_8,true,_9)}
this.body.startRowAnimation(_1,_2,_3,{target:this,methodName:"rowAnimationComplete",argNames:"body,hasFrozenBody",args:[this.body,(this.frozenBody!=null)]},_5,_6,_7,_8,true,_9)},isc.A.rowAnimationComplete=function isc_ListGrid_rowAnimationComplete(_1,_2){var _3=!_2||this.$64w;if(!_3){this.$64w=true}else{delete this.$64w;var _4=this.$64v;delete this.$64v;if(_4!=null)this.fireCallback(_4)}},isc.A.finishRowAnimation=function isc_ListGrid_finishRowAnimation(){if(this.body)this.body.finishRowAnimation();if(this.frozenBody)this.frozenBody.finishRowAnimation()},isc.A.animateRowHeight=function isc_ListGrid_animateRowHeight(_1,_2,_3,_4,_5,_6,_7){if(!this.body)return;return this.body.animateRowHeight(_1,_2,_3,_4,_5,_6,_7,true)},isc.A.setCellHeight=function isc_ListGrid_setCellHeight(_1){var _2=this.cellHeight;this.cellHeight=_1;if(this.body)this.body.cellHeight=_1;if(_2!=_1&&this.isDrawn()){this.body.markForRedraw("Cell height changed");if(this.frozenBody)this.frozenBody.markForRedraw("Cell height changed")}},isc.A.setRowHeight=function isc_ListGrid_setRowHeight(_1,_2){if(!this.body)return;if(this.frozenBody!=null)this.frozenBody.setRowHeight(_1,_2);return this.body.setRowHeight(_1,_2)},isc.A.getDragTrackerIcon=function isc_ListGrid_getDragTrackerIcon(_1){var _2=_1?_1[0]:null,_3;if(_2){var _4=this.getTitleField();_3=this.getValueIcon(this.getField(_4),_2[_4],_2)}
if(_3==null)_3=this.trackerImage;return _3},isc.A.getDragTrackerTitle=function isc_ListGrid_getDragTrackerTitle(_1,_2){var _3=this.getTitleField(),_4=this.getFormattedValue(_1,_3,_1?_1[_3]:undefined);return"<nobr>"+_4+"</nobr>"},isc.A.dragStart=function isc_ListGrid_dragStart(){if(this.canDragSelect)return true;var _1=this.selection.getSelection();if(!_1||_1.length==0)return false;for(var i=0;i<_1.length;i++){if(_1[i].canDrag==false)return false}
this.$758=_1;return true},isc.A.dragMove=function isc_ListGrid_dragMove(){var _1=isc.EH.dropTarget;if(!this.canDragRecordsOut&&_1!=null&&_1!=this&&!this.contains(_1))
{return false}},isc.A.dropMove=function isc_ListGrid_dropMove(){if(this.willAcceptDrop()){if(this.canReorderRecords)this.showDragLineForRecord();this.body.clearNoDropIndicator();return false}else{if(this.$1488()){this.body.setNoDropIndicator();if(this.canReorderRecords)this.showDragLineForRecord();return false}else{return false}}},isc.A.dropOver=function isc_ListGrid_dropOver(){return this.dropMove()},isc.A.dropOut=function isc_ListGrid_dropOut(){this.body.clearNoDropIndicator();this.hideDragLine()},isc.A.dragStop=function isc_ListGrid_dragStop(){this.body.clearNoDropIndicator();this.hideDragLine();this.$758=null},isc.A.willAcceptDrop=function isc_ListGrid_willAcceptDrop(){return this.$1488()&&this.$1489()},isc.A.$1488=function isc_ListGrid__mightAcceptDrop(_1,_2,_3){var _4=this.ns.EH;if(!this.invokeSuper(isc.ListGrid,"willAcceptDrop",_1,_2,_3)&&_4.dragTarget!=this.body)return false;if(_4.dragTarget==this){if(!this.$34c())return false}else{if(!this.canAcceptDroppedRecords)return false}
if(!_4.nativeDragging&&!_4.wasNativeDragging&&!isc.isAn.Object(_4.dragTarget.getDragData()))
{return false}
return true},isc.A.$1489=function isc_ListGrid__willAcceptDropForRecord(){isc.$54j=true;var _1=this.getEventRecordNum(),_2=this.getEventFieldNum();var _3=this.getRecordDropPosition(_1);if(_1!=-2&&_3==isc.ListGrid.AFTER)_1+=1;isc.$54j=false;if(_1<-1){if(this.canDropInEmptyArea==false)return false;return true}
if(_1==-1)return false;var _4=this.getRecord(_1,_2);if(!this.recordIsEnabled(_4,_1,_2)||(_4!=null&&_4.canAcceptDrop==false))return false;return true},isc.A.$34c=function isc_ListGrid__canDragRecordsToSelf(){return this.canReorderRecords},isc.A.drop=function isc_ListGrid_drop(){if(this.willAcceptDrop()==false)return false;var _1=this.ns.EH.dragTarget;var _2=this.getDropIndex();var _3=_1.cloneDragData();var _4=(_2!=-2&&this.getTotalRows()>_2?this.data.get(_2):null);var _5=this.getRecordDropPosition(this.getEventRecordNum());if(this.onRecordDrop!=null&&(this.onRecordDrop(_3,_4,_2,_5,_1)==false))
{return false}
return this.recordDrop(_3,_4,_2,_1)},isc.A.recordDrop=function isc_ListGrid_recordDrop(_1,_2,_3,_4){this.transferRecords(_1,_2,(this.canReorderRecords?_3:null),_4);if(this.recordsDropped)this.recordsDropped(_1,_3,this,_4);return false},isc.A.viewRow=function isc_ListGrid_viewRow(_1){this.getDataSource().viewFile(this.getRecord(_1))},isc.A.downloadRow=function isc_ListGrid_downloadRow(_1){this.getDataSource().downloadFile(this.getRecord(_1))},isc.A.viewCell=function isc_ListGrid_viewCell(_1,_2){this.getDataSource().viewFile(this.getRecord(_1),_2)},isc.A.downloadCell=function isc_ListGrid_downloadCell(_1,_2){this.getDataSource().downloadFile(this.getRecord(_1),_2)},isc.A.autoSizeColumn=function isc_ListGrid_autoSizeColumn(_1){var _2=this.body,_3=this.fieldIsFrozen(_1),_4=this.getLocalFieldNum(_1);if(_3&&this.frozenBody){_2=this.frozenBody}
if(!_2)return;var _5=_2.getColumnAutoSize(_4);if(this.includeGridSummaryInAutoFitWidth&&this.showGridSummary&&this.summaryRow!=null){var _6=_3?this.summaryRow.frozenBody:this.summaryRow.body;if(_6!=null){var _7=_6.getColumnAutoSize(_4);if(_7>_5)_5=_7}}
if(_5!=null)this.resizeField(_1,_5)},isc.A.getRecord=function isc_ListGrid_getRecord(_1,_2){return this.getCellRecord(_1,_2)});isc.evalBoundary;isc.B.push(isc.A.getCellRecord=function isc_ListGrid_getCellRecord(_1,_2){if(!isc.isA.Number(_1)){this.logWarn("getCellRecord called with bad rowNum: "+this.echo(_1));return}
if(!this.data||0>_1||_1>=this.data.getLength())return null;var _3=this.data.get(_1);if(this.$33q)this.$34d(_3,_1);return _3},isc.A.$131w=function isc_ListGrid__getCachedCellRecord(_1,_2){if(!isc.isA.Number(_1)){this.logWarn("getCellRecord called with bad rowNum: "+this.echo(_1));return}
if(!this.data||0>_1||(isc.isA.ResultSet(this.data)&&!this.data.lengthIsKnown())||_1>=this.data.getLength())
{return null}
var _3=this.data.getCachedRow(_1);if(this.$33q)this.$34d(_3,_1);return _3},isc.A.$34d=function isc_ListGrid__testRowEditData(_1,_2){if(_1==null||_1[this.editValuesTestedProperty])return;if(this.$33a==null)this.$33a={};var _3=true;for(var i in this.$52b){var _5=this.$52b[i];if(_5!=null&&_5.$24t==null){if(this.comparePrimaryKeys(_1,_5.$33b)){_5.$24t=_2;this.$33a[_2]=i}else{_3=false}}}
if(_3)delete this.$33q;_1[this.editValuesTestedProperty]=true},isc.A.comparePrimaryKeys=function isc_ListGrid_comparePrimaryKeys(_1,_2){var _3=this.getPrimaryKeys(_1);if(!this.dataSource||this.shouldSaveLocally())return(_3==_2);for(var _4 in _3){if(_3[_4]!=_2[_4])return false}
return true},isc.A.getPrimaryKeys=function isc_ListGrid_getPrimaryKeys(_1){if(isc.isA.Number(_1))_1=this.getRecord(_1);if(this.shouldSaveLocally())return _1;var _2=this.getDataSource(),_3=_2.getPrimaryKeyFieldNames(),_4={};if(!isc.isAn.Array(_3))_3=[_3];for(var i=0;i<_3.length;i++){_4[_3[i]]=_1[_3[i]]}
return _4},isc.A.getTotalRows=function isc_ListGrid_getTotalRows(){if(this.data==null)return 0;if(this.data.getLength==null){this.logWarn("GetTotalRows: ListGrid has invalid data object:"+this.echo(this.data));return 0}
var _1=this.data.getLength(),_2=this.$34e();if(_2!=null&&_2+1>_1)_1=_2+1;if(this.showNewRecordRow)_1+=1;return _1},isc.A.getTotalCols=function isc_ListGrid_getTotalCols(){return this.fields.length},isc.A.$34e=function isc_ListGrid__getLastEditRow(){if(this.$33j==null){var _1=-1,_2=(this.$33a?isc.getKeys(this.$33a):[]);for(var i=0;i<_2.length;i++){var _4=parseInt(_2[i]);if(_4>_1)_1=_4}
this.$33j=_1}
return this.$33j},isc.A.recordIsEnabled=function isc_ListGrid_recordIsEnabled(_1,_2,_3){if(_1==null)return true;if(this.recordMarkedAsRemoved(_2))return false;return(_1[this.recordEnabledProperty]!=false&&_1[this.isSeparatorProperty]!=true)},isc.A.cellIsEnabled=function isc_ListGrid_cellIsEnabled(_1,_2,_3){return this.recordIsEnabled(_1,_2,_3)},isc.A.getCellField=function isc_ListGrid_getCellField(_1,_2){return this.getField(_2)},isc.A.getFields=function isc_ListGrid_getFields(){return this.fields},isc.A.getAllFields=function isc_ListGrid_getAllFields(){return this.completeFields||this.fields},isc.A.getSpecifiedField=function isc_ListGrid_getSpecifiedField(_1){var _2=this.completeFields;if(_2==null)_2=this.fields;if(_2==null)return;if(isc.isAn.Object(_1)){if(_2.contains(_1))return _1;return null}else if(isc.isA.String(_1))return _2.find(this.fieldIdProperty,_1);else return(_2[_1])},isc.A.getFieldName=function isc_ListGrid_getFieldName(_1){var _2=this.getField(_1);return _2?_2[this.fieldIdProperty]:null},isc.A.getField=function isc_ListGrid_getField(_1){if(this.fields==null||_1==null)return null;var _2;if(this.$81g){_2=this.fields[_1];if(_2!=null)return _2}else{if(isc.isA.Number(_1))return this.fields[_1]}
if(_1.$81f||isc.isAn.Object(_1))return _1;if(isc.isA.String(_1)){var _3=_1.contains(isc.Canvas.$70l);if(!_3){return this.fields.find(this.fieldIdProperty,_1)}else{var _4,_5,_6,_7=_1.trim(isc.Canvas.$70l),_8,_9,_10,_11;if(_1.startsWith(isc.Canvas.$70l)){_5=_1.substring(1);if(_1.endsWith(isc.Canvas.$70l)){_6=_1.substring(0,_1.length)}else{_4=_1+"/"}}else{if(_1.endsWith(isc.Canvas.$70l)){_6=_1.substring(0,_1.length);_4="/"+_1}else{_4="/"+_1+"/"}
_8="/"+_1}
var _12=_7.lastIndexOf(isc.Canvas.$70l);if(_12!=-1){_9=_7.substring(_12+1);_10=_9+"/"}
for(var i=0;i<this.fields.length;i++){var _14=this.fields[i].dataPath;if(!_14)continue;if(_14==_1||(_5&&_14==_5)||(_6&&_14==_6)||(_7&&_14==_7)||(_8&&_14==_8)||(_4&&_14==_4)||(_9&&_14==_9)||(_10&&_14==_10))
{return this.fields[i]}}}}
return null},isc.A.getColNum=function isc_ListGrid_getColNum(_1){return this.getFieldNum(_1)},isc.A.getFieldTitle=function isc_ListGrid_getFieldTitle(_1){var _2;if(isc.isAn.Object(_1))_2=_1;else _2=this.fields[_1];if(!_2)return"Unknown field";if(_2.getFieldTitle){isc.Func.replaceWithMethod(_2,"getFieldTitle","viewer,fieldNum");return _2.getFieldTitle(this,_1)}
return _2.title||_2.name},isc.A.getSummaryTitle=function isc_ListGrid_getSummaryTitle(_1){var _2;if(_1.getSummaryTitle!=null){isc.Func.replaceWithMethod(_1,"getSummaryTitle","viewer,field");_2=_1.getSummaryTitle(this,_1)}else if(_1.summaryTitle!=null){_2=_1.summaryTitle}else{_2=this.getFieldTitle(_1)}
return _2},isc.A.setValueMap=function isc_ListGrid_setValueMap(_1,_2){this.Super("setValueMap",arguments);if(this.$30a){var _3,_4;var _5=this.getColNum(_1);if(_5!=-1&&_5<this.fields.length){var _4=this.getField(_1),_3=_4[this.fieldIdProperty];this.$286.setValueMap(_3,this.getEditorValueMap(_4,this.getEditedRecord(this.getEditRow(),_5)))}}
if(this.summaryRow){this.summaryRow.setValueMap(_1,_2)}
if(this.isDrawn()&&this.isVisible()){this.$25a("setValueMap")}},isc.A.getDisplayValue=function isc_ListGrid_getDisplayValue(_1,_2,_3){var _4=this.getField(_1),_5=_4?_4.valueMap:null;return this.$1416(_4,_5,_4&&_4.displayField,_2,_3)},isc.A.$1416=function isc_ListGrid__getDisplayValue(_1,_2,_3,_4,_5){if(this.getDisplayValue!=isc.ListGrid.getInstanceProperty("getDisplayValue")){return this.getDisplayValue(_1,_4,_5)}
if(_1){if(isc.isAn.Object(_2)&&!isc.isAn.Array(_2)&&isc.propertyDefined(_2,_4))
{return _2[_4]}else if(_5&&_3){_4=_5[_3]}}
return _4},isc.A.getData=function isc_ListGrid_getData(){return this.data},isc.A.getRecordIndex=function isc_ListGrid_getRecordIndex(_1){var _2=-1;if(this.body&&this.body.isDrawn()){_2=this.data.indexOf(_1,this.body.$252,this.body.$253)}
if(_2==-1)_2=this.data.indexOf(_1);return _2},isc.A.getRecordCellIndex=function isc_ListGrid_getRecordCellIndex(_1,_2){var _3=this.getRecordIndex(_1);return _3>=0?[_3,_2]:[-1,-1]},isc.A.getEventRow=function isc_ListGrid_getEventRow(_1){if(this.header&&this.header.containsPoint(this.ns.EH.getX(),this.ns.EH.getY())){return-1}
return this.body.getEventRow(_1)},isc.A.getEventColumn=function isc_ListGrid_getEventColumn(_1){var _2=(_1!=null?_1:this.getOffsetX()),_3=0,_4=0;if(this.frozenBody)_4=this.frozenFields.length;if(_4>0&&_2<this.frozenBody.getVisibleWidth()){_3=this.frozenBody.getEventColumn(_1)}else{_3=this.body.getEventColumn(_1)+_4}
return _3},isc.A.getEventRecordNum=function isc_ListGrid_getEventRecordNum(_1){return this.getEventRow(_1)},isc.A.getEventFieldNum=function isc_ListGrid_getEventFieldNum(_1){return this.getEventColumn(_1)},isc.A.$132o=function isc_ListGrid__getRecordDropPosition(_1,_2,_3){if(!_3)_3=this.recordDropAppearance;var _4=_2-this.body.getRowTop(_1),_5=this.body.getRowSize(_1);if(_3==isc.ListGrid.BETWEEN){if(_4>Math.round(_5/2)){return isc.ListGrid.AFTER}else{return isc.ListGrid.BEFORE}}else if(_3==isc.ListGrid.BOTH){if(_4<Math.round(_5/4)){return isc.ListGrid.BEFORE}else if(_4>Math.round(3*_5/4)){return isc.ListGrid.AFTER}else{return isc.ListGrid.OVER}}},isc.A.getRecordDropPosition=function isc_ListGrid_getRecordDropPosition(_1,_2,_3){if(this.recordDropAppearance==isc.ListGrid.OVER)return isc.ListGrid.OVER;if(this.recordDropAppearance==isc.ListGrid.BODY)return null;if(_2==null)_2=this.body.getOffsetY();if(_1==null)_1=this.getEventRow(_2);if(_1==-2)return isc.ListGrid.AFTER;if(_1>=this.getTotalRows())return isc.ListGrid.BEFORE;return this.$132o(_1,_2,_3)},isc.A.getDropIndex=function isc_ListGrid_getDropIndex(_1,_2){if(this.data.getLength()==0){return 0}
if(_1==null)_1=this.getEventRow();if(_2==null)_2=this.getRecordDropPosition(_1);if(this.canReorderRecords){if(_1==-2)_1=this.data.getLength()-1;if(_2==isc.ListGrid.AFTER)_1++}
return _1},isc.A.cellSelectionChanged=function isc_ListGrid_cellSelectionChanged(){},isc.A.selectionChanged=function isc_ListGrid_selectionChanged(){},isc.A.getSerializeableFields=function isc_ListGrid_getSerializeableFields(_1,_2){_1=_1||[];_1.addList(["header","selection"]);return this.Super("getSerializeableFields",[_1,_2],arguments)},isc.A.deriveFrozenFields=function isc_ListGrid_deriveFrozenFields(){var _1=this.frozenFields=this.fields.findAll("frozen",true),_2=this.fields.findAll("autoFreeze",true),_3=this.fields.findAll("$74j",true);if(_1&&_3&&_1.length==_3.length){for(var i=0;i<_3.length;i++){var _5=_3[i];_5.frozen=false;delete _5.$74j}
_1=this.frozenFields=null}
var _6=this.completeFields.findAll("frozen",true);if(_1&&_1.length==this.fields.length){_1=this.frozenFields=null;this.$54d=true}else this.$54d=false;if(_1){if(_2){for(var i=0;i<_2.length;i++){var _5=_2[i];if(!_5.frozen){_5.frozen=true;_5.$74j=true;var _7=_5.getAutoFreezePosition?_5.getAutoFreezePosition():this.freezeStart()?0:this.fields.length,_8=_5.getAutoFreezePosition?_5.getAutoFreezePosition():this.freezeStart()?0:this.completeFields.length;_1.addAt(_5,_7);_6.addAt(_5,_8)}}}
this.fields.slideList(_1,this.freezeStart()?0:this.fields.length);this.completeFields.slideList(_6,this.freezeStart()?0:this.completeFields.length);this.resizeFieldsInRealTime=false}
for(var i=0;i<this.fields.length;i++){var _5=this.fields[i];_5.masterIndex=i}
if(_1){var _9=this.normalFields=[];for(var i=0;i<this.fields.length;i++){var _5=this.fields[i];if(!_5.frozen)_9.add(_5)}}else this.normalFields=null},isc.A.rebuildForFreeze=function isc_ListGrid_rebuildForFreeze(_1){if(!this.body)return;if(this.filterEditor){this.filterEditor.deriveVisibleFields();this.filterEditor.updateBody(_1);this.filterEditor.remapEditFieldsForFreeze();this.filterEditor.layoutChildren(this.$60m)}
this.endEditing();this.deriveVisibleFields();this.updateHeader();this.updateBody(_1);this.layoutChildren(this.$60m);if(this.frozenBody){this.frozenBody.markForRedraw("Recalculating draw area from initial sizing of body")}
if(this.summaryRow&&this.showGridSummary){this.summaryRow.setFields(this.completeFields.duplicate());this.summaryRow.rebuildForFreeze(_1);this.summaryRow.$855()}
if(this.showRecordComponents&&this.recordComponentPoolingMode=="data"){if(this.$89r){var _2=isc.getValues(this.$89r),_3=_2.length;for(var i=_3-1;i>=0;i--){var _5=_2[i];if(!this.data.contains(_5.embeddedRecord))continue;this.addEmbeddedComponent(_5,_5.embeddedRecord);delete this.$89r[_5.ID]}}}},isc.A.setCanFreezeFields=function isc_ListGrid_setCanFreezeFields(_1){this.canFreezeFields=_1;delete this.$60v},isc.A.refreshMasterIndex=function isc_ListGrid_refreshMasterIndex(){if(this.fields)this.$51c(this.fields);if(!this.body)return;if(this.header)this.$51c(this.header.getMembers());if(this.body)this.$51c(this.body.fields||[]);if(!this.frozenFields)return;if(this.frozenHeader)this.$51c(this.frozenHeader.getMembers());if(this.frozenBody)this.$51c(this.frozenBody.fields)},isc.A.$51c=function isc_ListGrid__refreshMasterIndexForFields(_1){for(var i=0;i<_1.length;i++){_1[i].masterIndex=this.fields.findIndex("name",_1[i].name)}},isc.A.getFreezeOn=function isc_ListGrid_getFreezeOn(){return(this.freezeOn!=null?this.freezeOn:(this.isRTL()?"right":"left"))},isc.A.freezeLeft=function isc_ListGrid_freezeLeft(){return this.getFreezeOn()=="left"},isc.A.freezeStart=function isc_ListGrid_freezeStart(){if(this.isRTL()){return this.getFreezeOn()=="right"}else{return this.getFreezeOn()=="left"}},isc.A.getLeftBody=function isc_ListGrid_getLeftBody(){var _1=this.freezeLeft()
return this.frozenFields&&_1?this.frozenBody:this.body},isc.A.getRightBody=function isc_ListGrid_getRightBody(){var _1=this.freezeLeft();return this.frozenFields&&!_1?this.frozenBody:this.body},isc.A.setFreezeOn=function isc_ListGrid_setFreezeOn(_1){var _2=this.get
this.freezeOn=_1;if(_1!=_2)this.rebuildForFreeze(true)},isc.A.getFrozenSlots=function isc_ListGrid_getFrozenSlots(_1){var _2=this.frozenFields;if(!_2)return _1;return this.freezeStart()?_1.slice(0,_2.length):_1.slice(_1.length-_2.length)},isc.A.getUnfrozenSlots=function isc_ListGrid_getUnfrozenSlots(_1){var _2=this.frozenFields;if(!_2)return _1;return this.freezeStart()?_1.slice(_2.length):_1.slice(0,_1.length-_2.length)},isc.A.fieldIsFrozen=function isc_ListGrid_fieldIsFrozen(_1){if(!this.frozenFields)return false;var _2=this.getField(_1);return _2&&!!_2.frozen},isc.A.getFieldBody=function isc_ListGrid_getFieldBody(_1){if(!this.frozenFields)return this.body;return this.fieldIsFrozen(_1)?this.frozenBody:this.body},isc.A.getFieldHeader=function isc_ListGrid_getFieldHeader(_1){if(!this.frozenFields)return this.header;return this.fieldIsFrozen(_1)?this.frozenHeader:this.header},isc.A.getFieldHeaderButton=function isc_ListGrid_getFieldHeaderButton(_1){var _2=this.getFieldHeader(_1);return _2?_2.getMember(this.getLocalFieldNum(_1)):null},isc.A.getLocalFieldNum=function isc_ListGrid_getLocalFieldNum(_1){if(_1==null)return null;if(this.body&&this.body.isPrinting){var _2=this.fields[_1];if(!this.$54d&&_2.frozen&&this.frozenBody){return this.frozenBody.fields.indexOf(_2)}else{return this.body.fields.indexOf(_2)}}
if(!this.frozenFields)return _1;var _3;_3=this.frozenFields.length;if(!this.fieldIsFrozen(_1))return _1-_3;return this.freezeStart()?_1:_1-(this.fields.length-this.frozenFields.length)},isc.A.getFieldNumFromLocal=function isc_ListGrid_getFieldNumFromLocal(_1,_2){if(_1==null)return null;if(this.isPrinting){var _3=this.frozenFields!=null?(_2==this.frozenBody?this.frozenFields:this.unfrozenFields):this.fields;var _4=_2.fields[_1];for(var i=0;i<_3.length;i++){if(_3[i].name==_4.name)break;if(_3[i].shouldPrint==false)_1++}}
if(!this.frozenFields)return _1;if(_2==this.frozenBody){if(this.freezeStart())return _1;else{var _6=this.fields.length-this.frozenFields.length;return _1+_6}}else{var _7=this.freezeStart()?this.frozenFields.length:0;return _1+_7}},isc.A.getColumnLeft=function isc_ListGrid_getColumnLeft(_1){var _2=this.getFieldBody(_1);if(!_2)return null;return _2.getColumnLeft(this.getLocalFieldNum(_1))},isc.A.getColumnPageLeft=function isc_ListGrid_getColumnPageLeft(_1){var _2=this.getFieldBody(_1);if(!_2)return null;return _2.getColumnPageLeft(this.getLocalFieldNum(_1))},isc.A.getColumnWidth=function isc_ListGrid_getColumnWidth(_1){var _2=this.getFieldBody(_1);if(!_2)return null;return _2.getColumnWidth(this.getLocalFieldNum(_1))},isc.A.getCellPageRect=function isc_ListGrid_getCellPageRect(_1,_2){var _3=this.getFieldBody(_2);if(!_3)return null;return _3.getCellPageRect(_1,this.getLocalFieldNum(_2))},isc.A.refreshCellStyle=function isc_ListGrid_refreshCellStyle(_1,_2,_3){var _4=this.getFieldBody(_2);return _4.refreshCellStyle(_1,this.getLocalFieldNum(_2),_3)},isc.A.freezeField=function isc_ListGrid_freezeField(_1){return this.toggleFrozen(_1,true)},isc.A.unfreezeField=function isc_ListGrid_unfreezeField(_1){return this.toggleFrozen(_1,false)},isc.A.toggleFrozen=function isc_ListGrid_toggleFrozen(_1,_2){if(!isc.isAn.Array(_1))_1=[_1];var _3=false;for(var i=0;i<_1.length;i++){var _5=this.getField(_1[i]);if(!_5||!this.fieldIsVisible(_5)||this.isCheckboxField(_5))
{continue}
var _6=_2;if(_6==null)_6=!_5.frozen;if(_5.frozen==_2)continue;_3=true;_5.frozen=_6}
if(!_3)return false;this.rebuildForFreeze();this.handleFieldStateChanged(true);return true},isc.A.updateBody=function isc_ListGrid_updateBody(_1){if(_1||(this.frozenFields&&!this.frozenBody)||(this.frozenBody&&!this.frozenFields))
{_1=true;this.dropRecordComponents();if(this.body){this.$810()}
if(this.bodyLayout)this.bodyLayout.destroy();else if(this.body)this.body.destroy();this.body=this.bodyLayout=this.frozenBody=null;this.createBodies()}
if(this.isDrawn()){this.updateGridComponents()}
if(this.body){this.body.fields=this.normalFields||this.fields;if(!_1)this.$75n(this.body);this.body.markForRedraw("fields change")}
if(this.frozenBody){this.frozenBody.fields=this.frozenFields;if(!_1)this.$75n(this.frozenBody);this.frozenBody.markForRedraw("fields change");if(this.canSelectCells)this.$97f()}},isc.A.shouldDestroyOnUnembed=function isc_ListGrid_shouldDestroyOnUnembed(_1,_2){if(_1.dontAutoDestroy)return false;if(_1.isBackgroundComponent){if(_2==this.$81l&&_1.creator==this)return true;return false}
if(_1.isRecordComponent){if(_2==this.$81l)return true;return false}
if(_1.destroyOnUnembed!=null)return _1.destroyOnUnembed;if(_2==this.$81p)return false;return true},isc.A.$810=function isc_ListGrid__destroyEmbeddedComponentsForRebuild(){var _1=this.body.$29a;if(this.frozenBody){var _2=[];if(_1==null)_1=_2;else _1=_2.addList(_1);_1.addList(this.frozenBody.$29a||[])}
if(_1&&_1.length>0){for(var i=0;i<_1.length;i++){var _4=_1[i].embeddedRecord,_5=false,_6=this.$917(_4);if(_6){for(var j=0;j<_6.length;j++){var _8=_6[j];_5=_5||_8.isExpansionComponent;if(this.shouldDestroyOnUnembed(_8,this.$81q)){_8.markForDestroy()}else{_8.deparent()}}
this.$92k(_4,null);if(_5)this.$92g(_4,false);this.$92l(_4)}}}},isc.A.createBodies=function isc_ListGrid_createBodies(){if(this.body!=null)return;this.$80i();this.body=this.createBody(this.ID+"_body",this.normalFields||this.fields);this.body.resizeTo("100%","100%");this.bodies=[this.body];this.dragScrollTarget=this.body;var _1=this.frozenFields;if(_1==null||_1.length==0){return this.body}
this.body.addProperties({$27x:function(){var _2=[0,0];if(!this.frozen&&this.grid&&this.grid.frozenBody){_2=this.grid.frozenBody.$27x()}
var _3=this.Super("$27x",arguments);if(_2[1]>_3[1])_3[1]++;return _3}});this.frozenBody=this.createBody(this.ID+"$51d",_1,true);this.frozenBody.useNativeDrag=false;if(this.body.hscrollOn&&!this.shrinkForFreeze){this.frozenBody.setEndSpace(this.body.getScrollbarSize())}
if(this.freezeStart()){this.bodies.unshift(this.frozenBody)}else{this.bodies.add(this.frozenBody)}
this.bodyLayout=this.createAutoChild("bodyLayout",{width:"100%",height:"100%",autoDraw:false,members:this.bodies},isc.HLayout);this.$97c()},isc.A.getBody=function isc_ListGrid_getBody(){return this.body},isc.A.$97c=function isc_ListGrid__separateDependentSelections(){if(this.canSelectCells){var _1=this.freezeStart(),_2=this.body.fields.length,_3=this.frozenBody.fields.length;this.body.$968(this.selection,_1?_3:0);this.frozenBody.$968(this.selection,_1?0:_2)}},isc.A.$97f=function isc_ListGrid__updateDependentSelections(){if(!isc.isA.DependentCellSelection(this.body.selection)||!isc.isA.DependentCellSelection(this.frozenBody.selection)){return}
var _1=this.freezeStart(),_2=this.body.fields.length,_3=this.frozenBody.fields.length;this.body.selection.$969(_1?_3:0,_2);this.frozenBody.selection.$969(_1?0:_2,_3)},isc.A.bodyOverflowed=function isc_ListGrid_bodyOverflowed(){if(this.summaryRow!=null&&this.summaryRow.body){this.summaryRow.body.setRightSpace(this.body.vscrollOn?this.body.getScrollbarSize():0)}
if(!this.frozenBody)return;this.frozenBody.setEndSpace(this.body.hscrollOn&&!this.shrinkForFreeze?this.body.getScrollbarSize():0)},isc.A.createBody=function isc_ListGrid_createBody(_1,_2,_3){var _4=isc.ClassFactory.getClass(this.bodyConstructor).createRaw();_4.ID=_1;_4.autoDraw=false;_4.grid=this;_4.fields=_2;_4.frozen=_3;_4.overflow=_3?"hidden":this.bodyOverflow;if(this.scrollbarConstructor!=null)_4.scrollbarConstructor=this.scrollbarConstructor;if(this.showCustomScrollbars!=null)_4.showCustomScrollbars=this.showCustomScrollbars;if(this.scrollbarSize!=null)_4.scrollbarSize=this.scrollbarSize;_4.backgroundColor=this.bodyBackgroundColor;var _5=this.bodyStyleName;if(this.alternateBodyStyleName!=null&&this.alternateRecordStyles){_5=this.alternateBodyStyleName}
_4.styleName=_5;_4.allowContentAndChildren=true;_4.fixedRowHeights=this.fixedRecordHeights;_4.fixedColumnWidths=this.fixedFieldWidths;_4.alternateRowStyles=this.alternateRecordStyles;_4.alternateRowFrequency=this.alternateRecordFrequency;_4.alternateColumnStyles=this.alternateFieldStyles;_4.alternateColumnFrequency=this.alternateFieldFrequency;_4.canSelectText=this.canDragSelectText;_4.showAllRows=this.showAllRecords;if(this.virtualScrolling!=null)_4.virtualScrolling=this.virtualScrolling;_4.dragTarget=this.canDragSelect?null:this;_4.dragAppearance=isc.EventHandler.NONE;_4.screenReaderCellSeparator=this.screenReaderCellSeparator;_4.locatorParent=this;_4.selectionAppearance=this.selectionAppearance;var _6=isc.ListGrid.$295;for(var i=0;i<_6.length;i++){var _8=_6[i],_9=this[_8];if(_9!=null)_4[_8]=_9}
if(this.$122n!=null){_4._useNativeTabIndex=this.$122n}
isc.addProperties(_4,this.bodyDefaults,this.bodyProperties);if(_3)_4.showEmptyMessage=false;_4.completeCreation();_4=isc.SGWTFactory.extractFromConfigBlock(_4);this.$51e(_4);return _4},isc.A.getRowHeight=function isc_ListGrid_getRowHeight(_1,_2,_3){var _4;if(this.allowRowSpanning&&this.getRowSpan){if(!this.allowIncreasingRowSpanning){if(_3){_4=this.cellHeight
*this.frozenBody.$100c(_1,_2,this.frozenFields.length-1)}else{_4=this.cellHeight}}else{var _5,_6=_3?this.frozenBody:this.body,_7=_3?0:(this.frozenFields?this.frozenFields.length:0),_8=_3?this.frozenFields.length:this.fields.length;for(var i=_7;i<_8;i++){if(_5==null){_5=_6.$100c(_1,_2,i)}else{_5=Math.min(_5,_6.$100c(_1,_2,i))}
if(_5==1)break}
_4=this.cellHeight*_5}}else{_4=this.cellHeight}
if(this.frozenFields&&this.getEditRow()==_2){var _10=this.getEditForm(),_11=_10?_10.getItems():[];for(var i=0;i<_11.length;i++){var _12=(_11[i].getHeight()+2*this.cellPadding);if(_12>_4)_4=_12}}
return this.body.updateHeightForEmbeddedComponents(_1,_2,_4)},isc.A.makeSelectionCanvas=function isc_ListGrid_makeSelectionCanvas(_1){this.selectionCanvas=this.createAutoChild("selectionCanvas",{eventProxy:this.body,snapTo:"TL",width:"100%",height:"100%",bubbleMouseEvents:true,destroyOnUnEmbed:false,percentSource:this,percentBox:"custom",grid:this,autoDraw:false});this.selectionUnderCanvas=this.createAutoChild("selectionUnderCanvas",{eventProxy:this.body,snapTo:"TL",width:"100%",height:"100%",bubbleMouseEvents:true,destroyOnUnEmbed:false,percentSource:this,percentBox:"custom",grid:this,autoDraw:false})},isc.A.getSelectionCanvas=function isc_ListGrid_getSelectionCanvas(){if(!this.selectionCanvas)this.makeSelectionCanvas();return this.selectionCanvas},isc.A.getSelectionUnderCanvas=function isc_ListGrid_getSelectionUnderCanvas(){if(!this.selectionUnderCanvas)this.makeSelectionCanvas();return this.selectionUnderCanvas},isc.A.updateSelectionCanvas=function isc_ListGrid_updateSelectionCanvas(){var _1=this.selection,_2,_3,_4;if(isc.isA.CellSelection(_1)){var _5=_1.getSelectedCells()[0];_2=_5?_5[0]:-1,_3=_5?_5[1]:-1;_4=_5?this.getCellRecord(_2,_3):null}else{var _4=this.getSelectedRecord();_2=this.data?this.data.indexOf(_4):-1}
var _6=this.selectionCanvas,_7=_6?_6.embeddedRecord:null,_8=_6?_6.$289:-1,_9=_6?_6.$57n:-1;if(this.selectionCanvas==null){if(_4==null||!this.showSelectionCanvas)return}else if(this.showSelectionCanvas&&_7==_4&&_8==_2&&_9==_3)
{return}
if(this.showSelectionCanvas&&this.selectionType!=isc.Selection.SINGLE&&this.selectionType!=isc.Selection.NONE)
{this.logWarn("showSelectionCanvas is set to true, but not supported for selectionType "+this.selectionType);this.showSelectionCanvas=false}
if(!_4||_2==-1||!this.showSelectionCanvas){if(_7){this.removeEmbeddedComponent(_7,_6);var _10=this.selectionUnderCanvas;this.removeEmbeddedComponent(_7,_10)}
return}
var _6=this.getSelectionCanvas(),_10=this.getSelectionUnderCanvas();_6.record=_4;_10.record=_4;_6.removeOnHideField=true;_10.removeOnHideField=true;this.addEmbeddedComponent(_6,_4,_2,_3,"within");this.addEmbeddedComponent(_10,_4,_2,_3,"within")},isc.A.makeRollOverCanvas=function isc_ListGrid_makeRollOverCanvas(){this.rollOverCanvas=this.createAutoChild("rollOverCanvas",{eventProxy:this.body,percentSource:this,percentBox:"custom",bubbleMouseEvents:true,destroyOnUnEmbed:false,grid:this,autoDraw:false});this.rollUnderCanvas=this.createAutoChild("rollUnderCanvas",{eventProxy:this.body,percentSource:this,percentBox:"custom",bubbleMouseEvents:true,destroyOnUnEmbed:false,grid:this,autoDraw:false})},isc.A.getRollOverCanvas=function isc_ListGrid_getRollOverCanvas(_1,_2){if(!this.rollOverCanvas)this.makeRollOverCanvas();return this.rollOverCanvas},isc.A.getRollUnderCanvas=function isc_ListGrid_getRollUnderCanvas(_1,_2){if(!this.rollUnderCanvas)this.makeRollOverCanvas();return this.rollUnderCanvas},isc.A.updateRollOverCanvas=function isc_ListGrid_updateRollOverCanvas(_1,_2,_3){var _4=false;var _5;if(_3||!this.showRollOverCanvas||_1==-1){_4=true}else{_5=this.getCellRecord(_1,_2);if(_5==null||Array.isLoading(_5)){_4=true}}
if(_4){if(this.currentRollOverCanvas&&!this.currentRollOverCanvas.destroying&&!this.currentRollOverCanvas.destroyed){this.removeEmbeddedComponent(this.currentRollOverCanvas.embeddedRecord,this.currentRollOverCanvas)}
if(this.currentRollUnderCanvas&&!this.currentRollUnderCanvas.destroying&&!this.currentRollUnderCanvas.destroyed){this.removeEmbeddedComponent(this.currentRollUnderCanvas.embeddedRecord,this.currentRollUnderCanvas)}
return}
if(!this.useCellRollOvers){_2=null}
var _6=this.currentRollOverCanvas=this.getRollOverCanvas(_1,_2);var _7=this.currentRollUnderCanvas=this.getRollUnderCanvas(_1,_2);if(_6){_6.record=_5;_6.removeOnHideField=true;this.addEmbeddedComponent(_6,_5,_1,_2,"within")}
if(_7){_7.record=_5;_7.removeOnHideField=true;this.addEmbeddedComponent(_7,_5,_1,_2,"within")}},isc.A.updateEmbeddedComponentZIndex=function isc_ListGrid_updateEmbeddedComponentZIndex(_1){if(!_1)return;if(this.selectionCanvas==_1){var _2=this.body.getTableZIndex();this.selectionCanvas.setZIndex(_2+50)}
if(this.selectionUnderCanvas==_1){var _2=this.body.getTableZIndex();this.selectionUnderCanvas.setZIndex(_2-100)}
if(this.currentRollOverCanvas==_1){var _2=this.body.getTableZIndex();_1.setZIndex(_2+100)}
if(this.currentRollUnderCanvas==_1){var _2=this.body.getTableZIndex();_1.setZIndex(_2-50)}},isc.A.$80d=function isc_ListGrid__handleEmbeddedComponentResize(_1,_2,_3,_4){if(_2!=null&&_2.$81k&&_2.embeddedPosition==this.$57l&&_3!=null&&_3!=0)
{var _5=_2.$81k,_6=this.getField(_5);var _7=_2._percent_width;if(_6&&(_7==null||!_7.endsWith("%")))
{var _8=_2.getVisibleWidth(),_9=_8-_3;var _10=_6.$117a;if(_10!=null){if(_8>_10){this.$1168(_5,_8)}else if(_9==_10){this.$1168(_5)}}}}
if(this.frozenBody!=null&&_4!=null&&_4!=0){var _11=(_1==this.frozenBody)?this.body:this.frozenBody;_11.markForRedraw("Embedded component requires row resizing")}},isc.A.getButtonProperties=function isc_ListGrid_getButtonProperties(){var _1={align:null};if(this.headerTitleStyle!=null)_1.titleStyle=this.headerTitleStyle;if(this.headerBaseStyle!=null)_1.baseStyle=this.headerBaseStyle;if(this.headerButtonSrc!=null)_1.src=this.headerButtonSrc;if(this.frozenHeaderBaseStyle!=null)
_1.frozenBaseStyle=this.frozenHeaderBaseStyle;if(this.frozenHeaderTitleStyle!=null)
_1.frozenTitleStyle=this.frozenHeaderTitleStyle;if(this.frozenHeaderButtonSrc!=null)
_1.frozenSrc=this.frozenHeaderButtonSrc;var _2=isc.addProperties({},this.headerButtonDefaults,_1,this.headerButtonProperties);return _2},isc.A.getHeaderButtonProperties=function isc_ListGrid_getHeaderButtonProperties(_1){var _2=this.getButtonProperties();if(this.buttonTitleFunction==null){this.buttonTitleFunction=function(){return this.parentElement.grid.getHeaderButtonTitle(this)}}
isc.addProperties(_2,{$115g:true,defaultRadioGroup:this.getID()+"$34f",getActionType:function(_12,_13,_14,_15){var _3=this.parentElement,_4;if(_3)_4=_3.grid;if(_4&&isc.isA.ListGrid(_4)){var _5=_4.fields[_3.getButtonNumber(this)];var _6=(_4.canSort!=false);if(_6&&_5!=null)_6=(_4.$66c(_5)!=false);if(_6&&_4.selectHeaderOnSort)return isc.Button.RADIO}
return this.invokeSuper(this.getClassName(),"getActionType",_12,_13,_14,_15)},getTitle:this.buttonTitleFunction,handleMouseOver:function(_12){var _4=this.parentElement.grid;if(_4.shouldShowHeaderMenuButton(this)){var _7=_4.$129n(this);if(_12){var _8=_7.getPageRect();if(_8[0]<=_12.x&&_8[1]<=_12.y&&_12.x<=(_8[0]+_8[2])&&_12.y<=(_8[1]+_8[3]))
{this.$116g=this.$116f("handleMouseOver",arguments,null,50);return}}}
return this.Super("handleMouseOver",arguments)},handleMouseOut:function(){if(this.$116g!=null){isc.Timer.clear(this.$116g);delete this.$116g}
if(!this.ns.EH.$129k()){var _4=this.parentElement.grid,_9=_4.headerMenuButton;if(isc.EH.getTarget()!=_9){_4.$129m(this)}}
return this.Super("handleMouseOut",arguments)},handleHover:function(){var _3=this.parentElement,_4=_3.grid,_10=this.masterIndex;if(_4.headerHover!=null)_4.headerHover(_10);var _11=_4.defaultHeaderHoverHTML(_10);if(_4.headerHoverHTML)_11=_4.headerHoverHTML(_10,_11);_4.$115a(_10,_11)}},_1);return _2});isc.evalBoundary;isc.B.push(isc.A.makeHeader=function isc_ListGrid_makeHeader(){if(this.header!=null)return;var _1=this.header=this.makeHeaderForFields(this.normalFields||this.fields||[]);_1.locatorParent=this;if(this.sorter==null){this.makeCornerSortButton()}
this.headers=[_1];if(this.frozenFields){var _2=this.frozenHeader=this.makeHeaderForFields(this.frozenFields,"visible",this.getID()+"$51f");if(this.freezeStart()){this.headers.unshift(this.frozenHeader)}else{this.headers.add(this.frozenHeader)}
var _3=this.headers.duplicate();this.headerLayout=this.createAutoChild("headerLayout",{autoDraw:false,overflow:"hidden",height:this.getHeaderHeight(),members:_3},isc.HLayout)}
var _4=this.headerLayout||this.header;_4.inherentWidth=true;this.observe(_4,"moved",function(){this.updateSorter()});this.observe(_4,"resized",function(){this.updateSorter()})},isc.A.updateSorter=function isc_ListGrid_updateSorter(){if(this.destroying||this.destroyed)return;if(!this.sorter||this.sorter.destroying||this.sorter.destroyed)return;if(this.$rm||this.$qz){this.delayCall("updateSorter");return}
var _1=(this.header||this.headerLayout)&&this.$313();if(_1){this.sorter.moveTo(this.getSorterLeft(),this.getSorterTop());this.sorter.setHeight(this.getHeaderHeight())}else{this.sorter.moveTo(0,0)}
this.sorter.setVisibility(_1?isc.Canvas.INHERIT:isc.Canvas.HIDDEN);if(_1&&this.isDrawn()&&!this.sorter.isDrawn())this.sorter.draw()},isc.A.makeHeaderForFields=function isc_ListGrid_makeHeaderForFields(_1,_2,_3){var _4=this.createHeader({ID:_3,grid:this,buttons:_1.duplicate(),reorderOnDrop:false,height:null,minMemberSize:this.minFieldWidth,tabWithinToolbar:false,overflow:_2||"hidden",_redrawWithParent:!this.fixedFieldWidths})
this.observe(_4,"scrollTo",function(){this.headerScrolled()});return _4},isc.A.setFieldButtonProperties=function isc_ListGrid_setFieldButtonProperties(_1,_2){var _3=this.getField(_1)
if(_3!=null){var _4=this.getFieldHeaderButton(this.getFieldNum(_3));if(_4!=null){_4.setProperties(_2)}}else{_3=this.completeFields.find("name",_1)}
if(_3==null){this.logWarn("setFieldButtonProperties() Unable to find specified field: "+_1);return}
var _5=isc.addProperties({},_2);var _6={titleStyle:"headerTitleStyle",baseStyle:"headerBaseStyle"}
for(var _7 in _6){if(_5[_7]!=null){_5[_6[_7]]=_5[_7];delete _5[_7]}}
isc.addProperties(_3,_5)},isc.A.getHeaderSpanConfig=function isc_ListGrid_getHeaderSpanConfig(_1,_2){if(_2==null)_2=this.headerSpans;if(_2==null)return;var _3=_2.find("name",_1);if(_3!=null)return _3;for(var i=0;i<_2.length;i++){var _5=_2[i];if(_5.spans!=null){_3=this.getHeaderSpanConfig(_1,_5.spans);if(_3!=null)return _3}}},isc.A.setHeaderSpanButtonProperties=function isc_ListGrid_setHeaderSpanButtonProperties(_1,_2){var _3=this.getHeaderSpanConfig(_1);if(!_3){this.logWarn("setHeaderSpanButtonProperties() - unable to locate span named: "+_1+this.getStackTrace());return}
if(_3.liveObject){_3.liveObject.setProperties(_2)}
var _4=isc.addProperties({},_2);var _5={titleStyle:"headerTitleStyle",baseStyle:"headerBaseStyle"}
for(var _6 in _5){if(_4[_6]!=null){_4[_5[_6]]=_4[_6];delete _4[_6]}}
isc.addProperties(_3,_4)},isc.A.getNestedSpanDepth=function isc_ListGrid_getNestedSpanDepth(_1){if(_1.$109h!=null)return _1.$109h;if(_1.spans){var _2=0;for(var i=0;i<_1.spans.length;i++){_2=Math.max(_2,this.getNestedSpanDepth(_1.spans[i]))}
_1.$109h=(1+_2);return _1.$109h}
return 1},isc.A.createHeader=function isc_ListGrid_createHeader(_1){var _2=this;var _3=this.canTabToHeader||(this.canTabToHeader==null&&isc.screenReader);var _4=isc.addProperties({shouldDragScroll:function(){return _2&&_2.body&&_2.body.hscrollOn},makeButton:function(_12,_45,_46,_47,_48){_12=isc.addProperties({},_12);_12.ignoreRTL=true;if(_2.clipHeaderTitles){_12.clipTitle=false;_12.showClippedTitleOnHover=false}
_12.$1155=true;_12.$115j=function(){if(this.masterIndex!=null){var _2=this.grid,_5=_2.getField(this.masterIndex),_6=(this.isRTL()&&!_2.reverseRTLAlign?isc.Canvas.RIGHT:isc.Canvas.LEFT);if(_5!=null&&_2.shouldLeaveHeaderMenuButtonSpace(_5)&&_2.shouldShowHeaderMenuButton(this)&&(this.wrap||_2.$115b(this.masterIndex))&&(_5.align!=_6||(_2.headerMenuButton&&_2.headerMenuButton.isVisible()&&_2.headerMenuButton.masterElement==this)))
{return _2.headerMenuButtonWidth+1}}
return null};if(_12.headerTitleStyle)_12.titleStyle=_12.headerTitleStyle;else if(_12.frozen&&this.buttonProperties.frozenTitleStyle)
_12.titleStyle=_12.frozenTitleStyle;if(_12.frozen&&this.buttonProperties.frozenSrc)
_12.src=this.buttonProperties.frozenSrc;_12.showIf=null;_12.grid=_2;var _7=_2.shouldAutoFitField(_12),_8,_9,_10;if(_7){_8=_2.getAutoFitWidthApproach(_12);if(_8=="both"){_9=true;_10=true}else if(_8=="title"){_9=true;_10=false}else{_9=false;_10=true}}
if(_7&&_9){_12.overflow="visible";_12.wrap=false;_12.resized=function(){if(this.isDrawn()&&this.grid){this.grid.headerButtonResized(this)}}}else{if(_12.wrap==null){_12.wrap=_2.wrapHeaderTitles}}
if(_12.$776){if(_12.width==null||_12.width<_12.$776){_12.width=_12.$776}}else if(_12.width==null&&_9){_12.width=this.minFieldWidth||1}
_12.sizeImageToFitOverflow=true;if(_2.reverseRTLAlign&&_2.isRTL()){if(_12.align==isc.Canvas.LEFT)_12.align=isc.Canvas.RIGHT;else if(_12.align==isc.Canvas.RIGHT)_12.align=isc.Canvas.LEFT}
if(_12.masterIndex!=null){_12.ariaRole="rowheader";var _11=_12.showDefaultContextMenu!=false&&_2.getHeaderContextMenuItems(_12.masterIndex).length!=0;if(_11){_12.ariaState=isc.addProperties({haspopup:true},_12.ariaState)}}
var _12=this.Super("makeButton",[_12,_45,_46,_47,_48]);if(_12.headerBaseStyle){_12.setBaseStyle(_12.headerBaseStyle)}else{if(_12.frozen&&this.buttonProperties.frozenBaseStyle)
_12.setBaseStyle(this.buttonProperties.frozenBaseStyle);else if(this.buttonProperties.baseStyle!=null)
_12.setBaseStyle(this.buttonProperties.baseStyle)}
return _12},buttonProperties:this.getHeaderButtonProperties(),border:this.headerBorder,styleName:this.headerBarStyle,backgroundColor:this.headerBackgroundColor,backgroundImage:this.headerBackgroundImage,canResizeItems:this.canResizeFields,canReorderItems:this.canReorderFields,dontObserve:false,childVisibilityChanged:function(){this.Super("childVisibilityChanged",arguments);this.$55g()},$3j:function(){this.Super("$3j",arguments);this.$55g()},addSpan:function(_36){if(!this.$55h)this.$55h=[];this.$55h.add(_36);if(this.isDrawn()){this.$55i(_36);this.addChild(_36)}},$55g:function(){if(!this.$55h||!this.isDrawn())return;if(this.$97g)return;var _13=this.instantRelayout;this.instantRelayout=false;for(var i=0;i<this.$55h.length;i++)this.$55i(this.$55h[i]);this.instantRelayout=_13;delete this.$97h},$82w:function(_36){if(_36.$82y!=null){return _36.$82y}
var _15=_2.getSpannedFields(_36);var _16=[],_17=_15.length,_18=true;for(var i=0;i<this.members.length;i++){if(_36.$55k[this.members[i].name]==true){_18=false;_16[_16.length]=this.members[i];_17--}
if(_17==0)break}
_36.$82y=_16;return _18?null:_16},getNestedSpanDepth:function(_36){return _2.getNestedSpanDepth(_36)},$55i:function(_36){if(!this.isDrawn()){return}
if(_36.$55j){if(_2.autoFitHeaderHeights){_36.setHeight(Math.max(_2.getHeaderButtonDefaultHeight(_36.spanConfig),_2.getHeaderButtonMinHeight(_36.spanConfig)))}else{var _19=_36,_20=_2.headerHeight;while(_19.parentSpan!=null&&_19.parentSpan.liveObject)
{var _21=_19.parentSpan.liveObject;_20-=_21.getVisibleHeight();_19=_21}
var _22=this.getNestedSpanDepth(_36);var _23=Math.floor(_20/(_22+1));if(_23<=0)_23=1;_36.setHeight(_23)}}
if(_36.parentSpan!=null&&_36.parentSpan.liveObject!=null){_36.setTop(_36.parentSpan.liveObject.getBottom())}
var _24=_2.autoSizeHeaderSpans;var _25=this.$82w(_36);var _26=_25==null||_25.length==0;if(_26){if(this.isVisible()){_36.hide()}
return}
var _27,_28=0,_29=0;for(var i=0;i<_25.length;i++){var _30=_25[i];_30.canReorder=false;_30.layoutAlign="bottom";if(_30.visibility!=isc.Canvas.HIDDEN){_28++;_29+=_30.getVisibleWidth();if(!_27||this.isRTL())_27=_30}}
if(_27){_36.setVisibility(isc.Canvas.INHERIT);_36.setLeft(_27.getLeft());_36.setWidth(_29);if(_36.isDirty())_36.redraw();if(_24){_36.setOverflow(isc.Canvas.VISIBLE);var _31=_36.getVisibleWidth();if(_31>_29){_36.setWidth(_31);var _32=_31-_29;for(var i=0;i<_25.length;i++){var _30=_25[i];if(_30.visibility!=isc.Canvas.HIDDEN){var _33=Math.ceil(_32/_28);_32-=_33;_28-=1;_30.resizeBy(_33)}}}
_36.setOverflow(isc.Canvas.HIDDEN)}}},$58r:function(_45){if(!this.$55h)return;var _34=this.$97i;this.$97i=true;if(!_45)this.$55g();var _35=this.getVisibleHeight();this.$97g=true;var _13=this.instantRelayout;this.instantRelayout=false;for(var i=0;i<this.$55h.length;i++){var _36=this.$55h[i];if(!this.resizeFieldsOnly)this.addChild(_36);var _25=this.$82w(_36);if(!_25)continue;for(var j=0;j<_25.length;j++){var _38=_25[j],_39=_38.getVisibleHeight();var _21=_2.spanMap[_38.name],_40=0;do{if(_21.liveObject==null)break;_40+=_21.liveObject.getVisibleHeight();_21=_21.parentSpan}while(_21!=null)
_38.setHeight(_35-_40)}
_36.bringToFront()}
this.instantRelayout=_13;if(!_34){delete this.$97g;delete this.$97i}},removeButtons:function(_45){if(_2.headerSpans)_2.$82z(_45,this);this.Super("removeButtons",arguments)},addButtons:function(_45,_46){this.Super("addButtons",arguments);if(_2.headerSpans)_2.$60x(_45,this);this.$58r()},draw:function(){if(this.$55h&&_2.unspannedHeaderVAlign){for(var i=0;i<this.buttons.length;i++){var _12=this.buttons[i],_41=_2.spanMap[_12.name]!=null;if(!_41){_12.valign=_2.unspannedHeaderVAlign}}}
this.Super("draw",arguments);this.$58r()},getStandardChildLocator:function(_45){var _42=_45.masterIndex,_2=this.grid;if(_42!=null&&_2!=null){var _43=_2.getFieldName(_42);return isc.AutoTest.createLocatorFallbackPath("headerButton",{fieldName:_43})}
return this.Super("getStandardChildLocator",_45)},getChildFromLocatorSubstring:function(_45,_46,_47,_48){if(isc.isA.Canvas(this[_45]))return this[_45];var _44=isc.AutoTest.parseLocatorFallbackPath(_45);if(this.grid&&_44&&_44.name=="headerButton"){var _43=_44.config.fieldName,_42=this.grid.getFieldNum(_43),_38=this.grid.getFieldHeader(_42);if(_42==-1||_38==null){this.logWarn("fieldName:"+_43+", gave fieldNum:"+_42+" unable to find header button for this field.");return}
if(_38!=this){this.logWarn("AutoTest locator string specified this header for field "+_43+" but that header button is contained in header "+_38+". This can happen if headers have been frozen / unfrozen since the locator string was created. Redirecting to that widget.");return _38.getChildFromLocatorSubstring(_45)}
if(_48&&_48.attribute==isc.Canvas.$95l){var _5=this.grid.fields[_42];if(_42==this.grid.getCheckboxFieldPosition()){_48.value=!!_5.$63h}else _48.value=_5.sortDirection}
return this.members[this.grid.getLocalFieldNum(_42)]}
return this.Super("getChildFromLocatorSubstring",arguments)}},_1);if(!_3){_4.tabIndex=-1}
if(this.headerButtonConstructor!=null)
_4.buttonConstructor=this.headerButtonConstructor;var _38=this.createAutoChild("header",_4,isc.Toolbar);if(_38.canReorderItems&&!_38.dontObserve){this.observe(_38,"itemDragReordered",function(_45,_46){this.headerDragReordered(_45,_46,_38)})}
if(_38.canResizeItems&&!_38.dontObserve)this.$62l(_38);if(this.headerSpans)this.$60x(_1.buttons,_38);return _38},isc.A.headerButtonResized=function isc_ListGrid_headerButtonResized(_1){if(this.$132e)return;this.$45m("header button resized")},isc.A.reorderFieldsForHeaderSpans=function isc_ListGrid_reorderFieldsForHeaderSpans(_1){if(_1==null)_1=this.headerSpans;if(_1==null)return;var _2=false;for(var i=0;i<_1.length;i++){var _4=_1[i],_5=this.getSpannedFields(_4);if(_5==null||_5.length==0||_5.length==1)continue;var _6=this.fields,_7=_5.length,_8=[],_9=null;for(var _10=0;_10<_7;_10++){var _11=this.completeFields.findIndex("name",_5[_10]);if(_11==-1)continue;if(_9==null){_9=!!(this.completeFields[_11].frozen)}else{if(_9!=!!(this.completeFields[_11].frozen)){this.logWarn("HeaderSpan with title:"+_4.title+" has both frozen and unfrozen fields specified. This is not supported.")}}
_8.add({field:_5[_10],pos:this.completeFields.findIndex("name",_5[_10])})}
_8.sortByProperty("pos",Array.ASCENDING);if(_8.length>0&&(_8.last().pos-_8.first().pos)>(_8.length-1))
{this.logWarn("HeaderSpan with title "+_4.title+" spans fields that are not adjacent in the specified fields array. Reordering fields such that they are adjacent and can be spanned.");var _12=_8.first().pos;for(var _10=0;_10<_7;_10++){var _13=_5[_10],_14=this.completeFields.findIndex("name",_13);if(_14==-1)continue;if(_12!=_14){_2=true;this.completeFields.slide(_14,_12)}
_12+=1}}else if(_4.spans){_2=this.reorderFieldsForHeaderSpans(_4.spans)}}
return _2},isc.A.buildSpanMap=function isc_ListGrid_buildSpanMap(_1,_2,_3,_4){if(_4==null)_4={};if(_1==null)_1=this.headerSpans;for(var i=0;i<_1.length;i++){var _6=_1[i];if(_2)_6.parentSpan=_2;if(_6.spans){this.buildSpanMap(_6.spans,_6,_3,_4)}else if(_6.fields){if(_3==true){_6=isc.addProperties({},_6);_6.fields=_6.fields.duplicate();for(var j=0;j<_6.fields.length;){var _8=_6.fields[j];var _9=this.getField(_8);if(_9==null||_9.shouldPrint==false){_6.fields.removeAt(j)}else{++j}}
_6.fields.removeAll(_6.fields.findAll("shouldPrint",false))}
for(var j=0;j<_6.fields.length;j++){_4[_6.fields[j]]=_6}}else{this.logWarn("ListGrid passed unexpected header span object with neither fields nor spans specified:"+this.echo(_6))}}
return _4},isc.A.getSpannedFields=function isc_ListGrid_getSpannedFields(_1,_2){if(_1==null)return[];if(_1.fields){var _3=_1.fields;if(_2){var _4=[];for(var i=0;i<_1.fields.length;i++){var _6=(this.completeFields||this.fields).find("name",_1.fields[i]);if(!_6||_6.canHide==false){continue}
_4.add(_1.fields[i])}
_3=_4}
return _3}
var _3=[];if(_1.spans){for(var i=0;i<_1.spans.length;i++){_3.addList(this.getSpannedFields(_1.spans[i],_2))}}
return _3},isc.A.$97j=function isc_ListGrid__headerSpanVisible(_1,_2){if(_2.spans){for(var i=0;i<_2.spans.length;i++){if(this.$97j(_1,_2.spans[i]))return true}
return false}else{return(_1.intersect(_2.fields).length>0)}},isc.A.$60x=function isc_ListGrid__addHeaderSpans(_1,_2,_3,_4){if(_3==null)_3=this.headerSpans;var _5=_1.getProperty(this.fieldIdProperty);for(var i=0;i<_3.length;i++){var _7=_3[i];if(_7.fields!=null&&_7.spans!=null){this.logWarn("ListGrid specified with headerSpan config object containing both spans and fields. This is not supported - spanned fields must be all frozen or all not frozen. Span Configuration:\n"+this.echo(_7));_7.fields=null}
if(!this.$97j(_5,_3[i]))continue;var _8=this,_9=this.createHeaderSpan(_2,_7);_2.addSpan(_9);if(_9.spans){this.$60x(_1,_2,_9.spans,_9)}}},isc.A.createHeaderSpan=function isc_ListGrid_createHeaderSpan(_1,_2){var _3=this,_4=_2.liveObject;if(_4==null||_4.destroyed||_4.destroying||_4.$65i){var _5=_2,_6=isc.addProperties(this.getButtonProperties(),{_constructor:_1.buttonConstructor,height:this.headerSpanHeight,align:"center",valign:this.headerSpanVAlign,showRollOver:false,showContextMenu:function(){return _3.headerSpanContextClick(this)}},_5);if(_5.headerTitleStyle){_6.titleStyle=_5.headerTitleStyle}
if(_5.headerBaseStyle!=null){_6.baseStyle=_5.headerBaseStyle}
if(_5.headerTitle!=null)_6.title=_5.headerTitle;_4=_5.liveObject=this.createAutoChild("headerSpan",_6);var _7=_5.height||(this.headerSpanProperties?this.headerSpanProperties.height:null)||(this.headerSpanDefaults?this.headerSpanDefaults.height:null)||this.headerSpanHeight;_4.$55j=(_7==null)}
_4.$55k={};var _8=this.getSpannedFields(_2);for(var _9=0;_9<_8.length;_9++){_4.$55k[_8[_9]]=true}
_4.$82y=null;_4.spanConfig=_2;return _4},isc.A.$82z=function isc_ListGrid__removeHeaderSpans(_1,_2){var _3=[],_4=_1.getProperty(this.fieldIdProperty);for(var i=0;i<_4.length;i++){var _6=this.spanMap[_4[i]];while(_6!=null&&_6.liveObject!=null){_6.liveObject.$82y=null;_6=_6.parentSpan}}},isc.A.getHiliteCriteriaFields=function isc_ListGrid_getHiliteCriteriaFields(){var _1=this.Super("getAllFields",arguments);if(!_1)return;_1=_1.duplicate();if(this.showHeaderSpanTitlesInHiliteEditor&&this.headerSpans!=null){for(var i=0;i<_1.length;i++){var _3=this.spanMap[_1[i].name],_4=false,_5=[{title:this.getFieldTitle(_1[i])}];while(_3!=null){_4=true;_5.addAt(_3,0);_3=_3.parentSpan}
if(_4){var _6=_5.getProperty("title").join(this.hiliteEditorSpanTitleSeparator);_1[i]=isc.addProperties({},_1[i],{title:_6})}}}
return _1},isc.A.dirtyHeader=function isc_ListGrid_dirtyHeader(){if(this.header)this.header.markForRedraw()},isc.A.updateHeader=function isc_ListGrid_updateHeader(){var _1=this.frozenHeader?this.headerLayout:this.header;if(_1){_1.markForDestroy();_1.clear();if(this.showHeader){var _2=[this.frozenHeader,this.header];for(var i=0;i<_2.length;i++){if(_2[i]==null)continue;if(_2[i].$55h!=null){for(var _4=0;_4<_2[i].$55h.length;_4++){var _5=_2[i].$55h[_4];if(_5)_5.deparent()}}}}
_1.clearIDs();this.headerMenuButton=null}
this.header=this.frozenHeader=this.headerLayout=null;var _6=this.showHeader,_7;if(_6){_7=this.gridComponents.indexOf(this.$881);if(_7==-1){_6=false;this.logWarn("showHeader set to true, but header not included in grid header components. The header will not be shown.")}}
if(_6){if(this.autoFitHeaderHeights){this.dropCachedHeaderButtonHeights()}
this.makeHeader();if(this.isDrawn()){this.updateGridComponents()}}else if(this.sorter){this.sorter.hide()}},isc.A.setHeaderHeight=function isc_ListGrid_setHeaderHeight(_1){var _2=this.headerHeight;if(_2==_1)return;this.headerHeight=_1;this.$109d(_2==0)},isc.A.$109d=function isc_ListGrid__updateHeaderHeight(_1){if(this.showHeader==false)return;if(!this.header&&this.getHeaderHeight()>0){var _2=this.gridComponents.indexOf("header");if(_2==-1){return}
if(this.isDrawn()){this.updateGridComponents()}}else{if(_1)this.updateHeader();this.layoutChildren(this.$616)}
this.updateSorter();if(this.headerSpans){this.header.$58r(true)}},isc.A.setShowHeader=function isc_ListGrid_setShowHeader(_1){if(_1==this.showHeader)return;this.showHeader=_1;this.updateHeader();this.layoutChildren(this.$617)},isc.A.shouldShowHeaderMenuButton=function isc_ListGrid_shouldShowHeaderMenuButton(_1,_2){if(!_2&&this.ns.EH.$129k())return false;var _3;if(_1.showDefaultContextMenu==false){_3=false}
else if(_1.showHeaderContextMenuButton!=null){_3=_1.showHeaderContextMenuButton}else{_3=this.showHeaderMenuButton}
if(this.showHeaderContextMenu&&_3&&_1.masterIndex!=null){var _4=this.getHeaderContextMenuItems(_1.masterIndex);return(_4&&_4.length>0)}
return false},isc.A.getHeaderMenuButton=function isc_ListGrid_getHeaderMenuButton(_1){if(!this.headerMenuButton||this.headerMenuButton.destroyed){var _2={snapTo:(this.isRTL()?"L":"R"),resizeFrom:(this.isRTL()?"L":"R")};if(this.headerMenuButtonHeight)_2.height=this.headerMenuButtonHeight;if(this.headerMenuButtonWidth)_2.width=this.headerMenuButtonWidth;if(this.headerMenuButtonIcon)_2.icon=this.headerMenuButtonIcon;if(this.headerMenuButtonIconHeight){_2.iconHeight=this.headerMenuButtonIconHeight}
if(this.headerMenuButtonIconWidth){_2.iconWidth=this.headerMenuButtonIconWidth}
if(this.headerMenuButtonBaseStyle){_2.baseStyle=this.headerMenuButtonBaseStyle}
if(this.headerMenuButtonTitleStyle){_2.titleStyle=this.headerMenuButtonTitleStyle}
if(this.headerMenuButtonSrc)_2.src=this.headerMenuButtonSrc;this.createAutoChild("headerMenuButton",_2,"Button",true)}
this.headerMenuButton.masterIndex=_1.masterIndex;var _3=0,_4=this.fieldIsFrozen(_1.masterIndex);if(!_4&&this.body!=null){var _5=this.body.getViewportWidth(),_6=_1.getScrollWidth();if(this.isRTL()){}else{var _7=_1.getLeft(),_8=_7-this.body.getScrollLeft(),_9=_8+_6-_5;if(this.$313())_9+=this.sorter.getWidth();if(this.body.vscrollOn)_9-=this.body.getScrollbarSize();if(_9>0){_3=-_9}}}else if(_4&&this.frozenBody!=null){var _5=this.getViewportWidth(),_6=_1.getScrollWidth();if(this.isRTL()){}else{var _9;if(this.sorter!=null&&this.$313()){_9=_1.getPageLeft()+_6-this.sorter.getPageLeft()}else{_9=_1.getLeft()+_6-_5;if(this.frozenBody.vscrollOn)_9-=this.frozenBody.getScrollbarSize()}
if(_9>0){_3=-_9}}}
this.headerMenuButton.setSnapOffsetLeft(_3);this.headerMenuButton.canDragResize=(_1.canDragResize!=null?_1.canDragResize&&this.canResizeFields:this.canResizeFields);return this.headerMenuButton},isc.A.headerMenuButtonClick=function isc_ListGrid_headerMenuButtonClick(){var _1=this.header,_2=_1.containsEvent()?_1.getMouseOverButtonIndex():-1;if(_2<0&&this.frozenHeader){_1=this.frozenHeader;_2=_1.getMouseOverButtonIndex()}
if(_2==-1||!this.headerMenuButton)return;var _3=_1.getMember(_2),_4=_3.getPageBottom(),_5=this.$314?this.$314.getVisibleWidth():isc.Menu.getPrototype().defaultWidth,_6=_3.getPageLeft(),_7=this.headerMenuButton.getPageRight(),_8=this.isRTL()?Math.min(_6,_7-_5):Math.max(_6,_7-_5);this.displayHeaderContextMenu(this.headerMenuButton,[_8,_4]);this.headerMenuButton.bringToFront()},isc.A.headerMenuButtonDoubleClick=function isc_ListGrid_headerMenuButtonDoubleClick(){var _1=this.header,_2=_1.getMouseOverButtonIndex();if(_2==-1&&this.frozenHeader){_1=this.frozenHeader;_2=_1.getMouseOverButtonIndex()}
if(_2==-1)return;var _3=_1.getMember(_2);this.headerDoubleClick(_2,_1);isc.Menu.hideAllMenus()},isc.A.$129n=function isc_ListGrid__showHeaderMenuButton(_1){var _2=this.getHeaderMenuButton(_1);if(_2.masterElement!=null)_2.masterElement.markForRedraw();_1.addPeer(_2);_2.enable();_2.addProperties({dragTarget:_1});if(_1.zIndex>_2.zIndex)_2.bringToFront();if(!_2.isVisible()){_2.show()}
_1.markForRedraw();return _2},isc.A.$129m=function isc_ListGrid__hideHeaderMenuButton(_1){var _2=this.headerMenuButton;if(_2!=null&&_2.isVisible()){var _3=_2.masterElement;if(_1==null)_1=_3;if(_3==_1){_2.hide();if(_3!=null)_3.markForRedraw()}}},isc.A.shouldWrapHeaderTitle=function isc_ListGrid_shouldWrapHeaderTitle(_1){var _2=this.shouldAutoFitField(_1);if(_2){var _3=this.getAutoFitWidthApproach(_1);if(_3=="title"||_3=="both"){return false}}
if(_1.wrap!=null)return _1.wrap;return this.wrapHeaderTitles},isc.A.$115b=function isc_ListGrid__shouldClipHeaderTitle(_1){var _2=this.fields[_1];if(this.autoFitHeaderHeights)return false;if(_2.wrap==true)return false;if(_2.wrap==null&&this.wrapHeaderTitles)return false;var _3=this.shouldAutoFitField(_2);if(_3){var _4=this.getAutoFitWidthApproach(_2);if(_4=="title"||_4=="both"){return false}}
return true},isc.A.$115c=function isc_ListGrid__getHeaderTitleClipperID(_1){if(!_1||!_1.name)return null;return this.$qs(_1.name+this.$114x)},isc.A.headerTitleClipped=function isc_ListGrid_headerTitleClipped(_1){var _2=this.fields[_1],_3=this.$115c(_2);if(_3==null)return false;var _4=isc.Element.get(_3);return(_4==null?false:isc.Element.getClientWidth(_4)<_4.scrollWidth)},isc.A.getHeaderButtonTitle=function isc_ListGrid_getHeaderButtonTitle(_1,_2){var _3=_1;if(isc.isA.Object(_1))_3=_1.masterIndex;else{_1=this.getFieldHeaderButton(_3)}
var _4=this.fields[_3];if(!_4)return"";if(_4.showTitle==false){return isc.nbsp}
var _5=_4[this.fieldIdProperty],_6=this.isSortField(_5),_7=(_6)&&(!this.showSortArrow||this.showSortArrow==isc.ListGrid.FIELD||this.showSortArrow==isc.ListGrid.BOTH),_8=(this.showSortNumerals==false?false:_6&&this.getSortFieldCount()>1),_9=_4.headerTitle!=null?_4.headerTitle:this.getFieldTitle(_3);if(_2==null)_2=this.$115b(_3);var _10;if(_8){var _11=this.getSortSpecifier(_5);_10=_11.sortIndex}
var _12=isc.StringBuffer.create(),_13=this.isRTL(),_14=this.getFieldCellAlign(_3,_13);if(_4.wrap){if(_8){_12.append("<a style='display:inline-block;",(this.isRTL()?"float:left;margin-right:":"float:right;margin-left:"),"4px'>",this.getSortNumeralHTML(_5,_10),"</a>")}
if(_7){_12.append(this.getSortArrowImage(_3,false,false,true))}
_12.append(_9)}else if(!_2||!this.clipHeaderTitles){_12.append(_9);if(_7)_12.append(isc.nbsp,this.getSortArrowImage(_3));if(_8){_12.append(isc.nbsp,this.getSortNumeralHTML(_5,_10))}
if(!_2&&_1&&this.shouldLeaveHeaderMenuButtonSpace(_4)&&this.shouldShowHeaderMenuButton(_1))
{_12.append(isc.Canvas.spacerHTML(this.headerMenuButtonWidth,1))}}else{_12.append("<div style='display:inline-block;max-width:100%;text-align:",_14,";vertical-align:middle'>");var _15=0;if(_8){var _16=(_10>=9?12:6);_15+=4+_16;_12.append("<a style='",(_13?"float:left;margin-right:":"float:right;margin-left:"),"4px;width:",_16,"px;overflow:hidden'>",this.getSortNumeralHTML(_5,_10),"</a>")}
if(_7){var _17=this.getSortArrowImage(_3,true,_2);if(_17!=null){_15+=4+_17.width;_12.append(this.getSortArrowImage(_3,false,_2))}}
_12.append("<div");var _18=this.$115c(_4);if(_18!=null){_12.append(" id='",_18,"'")}
_12.append(" style='overflow:hidden;",isc.Browser.$114w,":ellipsis;white-space:nowrap");if(isc.Browser.isMoz)_12.append(_13?";margin-left:":";margin-right:",_15,"px");_12.append("'>",_9,"</div>","</div>")}
return _12.release()},isc.A.shouldLeaveHeaderMenuButtonSpace=function isc_ListGrid_shouldLeaveHeaderMenuButtonSpace(_1){if(_1.leaveHeaderMenuButtonSpace!=null)return _1.leaveHeaderMenuButtonSpace;if(this.leaveHeaderMenuButtonSpace!=null)return this.leaveHeaderMenuButtonSpace;return _1.align!="center"});isc.evalBoundary;isc.B.push(isc.A.$63m=function isc_ListGrid__setCheckboxHeaderState(_1){var _2=this.getCheckboxFieldPosition(),_3=this.fields[_2];if(!this.isCheckboxField(_3))return;var _4=(this.canSelectAll==false||this.selectionType=="single")?isc.nbsp:this.$116w(_1,true,false,_3);this.setFieldTitle(_2,_4);_3.$63h=_1},isc.A.updateCheckboxHeaderState=function isc_ListGrid_updateCheckboxHeaderState(){var _1=this.getOriginalData();var _2=(isc.isAn.Array(_1)||(isc.isA.ResultSet(_1)&&_1.allMatchingRowsCached())),_3=this.getSelection()||[];if(_2){var _4=this.isGrouped?this.getAllRecordsFromGroupTree():_1;var _5=true;for(var i=0;i<_4.getLength();i++){var _7=_4.get(i);if(this.selection.$1462(_7)&&!this.selection.isSelected(_7))
{_5=false;break}}
if(_5){this.$63m(true)}else{this.$63m(false)}}},isc.A.defaultHeaderHoverHTML=function isc_ListGrid_defaultHeaderHoverHTML(_1){var _2=this.fields[_1];if(_2==null)return null;if(_2.prompt!=null)return _2.prompt;var _3=this.clipHeaderTitles&&this.showClippedHeaderTitlesOnHover&&this.headerTitleClipped(_1);if(_3){return _2.headerTitle!=null?_2.headerTitle:this.getFieldTitle(_1)}
return null},isc.A.headerHoverHTML=function isc_ListGrid_headerHoverHTML(_1,_2){return _2},isc.A.$115a=function isc_ListGrid__showHeaderHover(_1,_2){var _3=this.fields[_1];if(_2&&!isc.is.emptyString(_2)){var _4=this.$115d(_3);isc.Hover.show(_2,_4,(_3.hoverRect||this.headerHoverRect))}else isc.Hover.clear()},isc.A.$115d=function isc_ListGrid__getHeaderHoverProperties(_1){var _2={};if(_1){_2=isc.addProperties({},{align:(_1.hoverAlign!=null?_1.hoverAlign:this.headerHoverAlign),hoverDelay:(_1.hoverDelay!=null?_1.hoverDelay:this.headerHoverDelay),height:(_1.hoverHeight!=null?_1.hoverHeight:this.headerHoverHeight),opacity:(_1.hoverOpacity!=null?_1.hoverOpacity:this.headerHoverOpacity),baseStyle:(_1.hoverStyle!=null?_1.hoverStyle:this.headerHoverStyle),valign:(_1.hoverVAlign!=null?_1.hoverVAlign:this.headerHoverVAlign),width:(_1.hoverWidth!=null?_1.hoverWidth:this.headerHoverWidth),wrap:(_1.hoverWrap!=null?_1.hoverWrap:this.headerHoverWrap)})}else{_2=isc.addProperties({},{align:this.headerHoverAlign,hoverDelay:this.headerHoverDelay,height:this.headerHoverHeight,opacity:this.headerHoverOpacity,baseStyle:this.headerHoverStyle,valign:this.headerHoverVAlign,width:this.headerHoverWidth,wrap:this.headerHoverWrap})}
_2.moveWithMouse=this.headerHoverMoveWithMouse;return _2},isc.A.$666=function isc_ListGrid__headerClick(_1,_2){var _3=_2.getMember(_1).masterIndex;return this.headerClick(_3,_2)},isc.A.headerClick=function isc_ListGrid_headerClick(_1,_2){if(this.onHeaderClick&&(this.onHeaderClick(_1,_2)==false)){return}
var _3=this.fields[_1];if(this.isCheckboxField(_3)&&this.selectionType!="single"&&this.canSelectAll!=false){if(_3.$63h){this.deselectAllRecords();this.$63m(false)}else{this.userSelectAllRecords();this.updateCheckboxHeaderState()}
return false}
if(this.canAutoFitFields&&this.headerAutoFitEvent=="click"){this.autoFitField(_1)}
if(!this.$66c(_3))return false;var _4=_3[this.fieldIdProperty],_5=this.isSortField(_4)?this.getSortSpecifier(_4):null,_6=isc.EventHandler,_7=_6.getKey(),_8=_6.shiftKeyDown(),_9=this.$765,_10=_3.sortDirection;if(_8&&this.$91d()&&this.$91k(_3)){if(this.isSortField(_4)){if(_10==_9||this.canUnsort==false){this.toggleSort(_4)}else{this.toggleSort(_4,"unsort")}}else{this.$73z(_3)}}else{if(this.isSortField(_4)&&this.getSortFieldCount()==1){if(_10==_9||this.canUnsort==false){this.toggleSort(_4)}else{this.toggleSort(_4,"unsort")}}else{var _11=this.$766(_3);this.setSort([{property:_4,direction:_11}])}}
return false},isc.A.$774=function isc_ListGrid__headerDoubleClick(_1,_2){var _3=_2.getMember(_1).masterIndex;return this.headerDoubleClick(_3,_2)},isc.A.headerDoubleClick=function isc_ListGrid_headerDoubleClick(_1,_2){var _3=this.fields[_1];if(this.isCheckboxField(_3))return;if(this.canAutoFitFields&&this.headerAutoFitEvent=="doubleClick"){this.autoFitField(_1)}
return false},isc.A.fieldDragResizeStart=function isc_ListGrid_fieldDragResizeStart(){this.$97e=true;this.autoFitFieldsFillViewport=false;this.makeDragLine();this._dragLine.resizeTo(2,this.getVisibleHeight()-(this.body.hscrollOn?this.body.getScrollbarSize():0));var _1=this.ns.EH.dragTarget;var _2=this.getField(_1.masterIndex);if(_2){_2.autoFitWidth=false;var _3=_2.wrap;if(_3==null)_3=this.wrapHeaderTitles;if(_3!=_1.wrap){_1.setWrap(_3)}}
_1.setWidth(_1.getVisibleWidth());_1.setOverflow("hidden")},isc.A.fieldDragResizeMove=function isc_ListGrid_fieldDragResizeMove(){var _1=this.ns.EH,_2=_1.dragTarget;if(this.autoSizeHeaderSpans!=null){this.$111t=this.autoSizeHeaderSpans;this.autoSizeHeaderSpans=false}
var _3=this.header.$6j;this.showDragLineForField(_3);if(this.resizeFieldsInRealTime){this.realtimeFieldResize(_3)}
if(this.headerMenuButton&&this.headerMenuButton.snapOffsetLeft!=0){this.headerMenuButton.setSnapOffsetLeft(0)}},isc.A.realtimeFieldResize=function isc_ListGrid_realtimeFieldResize(_1){var _2=isc.EH,_3=_2.dragResizeWidth,_4=this.getMinFieldWidth(this.fields[_1],true);if(_3<_4)_3=_4;this.$26a[_1]=_3;if(this.$32c){this.syncBodyScrolling()}
this.$54e=true;this.setBodyFieldWidths(this.$26a);this.body.useQuickDrawAheadRatio=true;this.body.redraw("fieldDragResize");delete this.body.useQuickDrawAheadRatio;delete this.$54e;if(!this.isRTL()){var _5=this.body.getScrollLeft();if(_5>0){this.header.scrollTo(_5,null,"headerResize")}}else{if(this.header.getScrollLeft()<this.header.getLeft()){this.header.scrollTo(this.header.getLeft())}}},isc.A.fieldDragResizeStop=function isc_ListGrid_fieldDragResizeStop(){if(this.$111t!=null){this.autoSizeHeaderSpans=this.$111t;delete this.$111t}
this.hideDragLine()},isc.A.headerDragReordered=function isc_ListGrid_headerDragReordered(_1,_2,_3){var _4=_3.getMember(_1).masterIndex,_5=_3.getMember(_2).masterIndex;this.reorderField(_4,_5)},isc.A.reorderField=function isc_ListGrid_reorderField(_1,_2){this.reorderFields(_1,_1+1,_2-_1)},isc.A.reorderFields=function isc_ListGrid_reorderFields(_1,_2,_3){if(this.showFilterEditor&&this.filterEditor!=null){this.filterEditor.reorderFields(_1,_2,_3)}
if(this.summaryRow&&this.showGridSummary){this.summaryRow.reorderFields(_1,_2,_3)}
var _4=this.fields[_1],_5=this.fields[_2-1],_6=_1+_3,_7=this.fields[_6];var _8=this.$60z(),_9=this.fields[_8];if(this.$26a!=null)this.$26a.slideRange(_1,_2,_1+_3);if(this.completeFields==null)this.setFields(this.fields);if(this.completeFields.contains(_7)){var _10=this.completeFields.indexOf(_4),_11=this.completeFields.indexOf(_5)+1,_12=this.completeFields.indexOf(_7);this.completeFields.slideRange(_10,_11,_12)}
this.deriveVisibleFields();if(_8!=null){_8=this.fields.indexOf(_9);if(_8==-1)_8=null;this.$600(_8)}
var _13;if(!this.frozenFields){_13=this.getFieldHeader(_1);if(_13){_13.reorderItems(this.getLocalFieldNum(_1),this.getLocalFieldNum(_2),this.getLocalFieldNum(_1+_3))}}else{_13=this.getFieldHeader(_1);this.rebuildForFreeze();this.syncHeaderScrolling(this.body.getScrollLeft())}
if(_8!=null&&_13&&this.selectHeaderOnSort){var _14=_13.getButton(this.getLocalFieldNum(_8));_13.selectButton(_14);if(isc.Browser.isTouch&&this.shouldShowHeaderMenuButton(_14,true)){this.$129n(_14)}}
var _15=this.$30a;if(_15){var _16=this.$286,_17=this.getEditRow(),_18=this.getEditField(),_19=[]
for(var i=0;i<_16.items.length;i++){var _21=_16.items[i];_21.colNum=this.fields.findIndex(this.fieldIdProperty,_21.getFieldName());for(var j=0;j<=_19.length;j++){if(_19[j]==null||_19[j].colNum>_21.colNum){_19.addAt(_21,j);break}}}
_16.items.setArray(_19);this.$30u=this.fields.indexOf(_18)}
var _23=this.body;if(this.frozenFields&&_1<this.frozenFields.length){_23=this.frozenBody}
if(_23){this.body.fields=this.normalFields||this.fields;if(this.frozenBody)this.frozenBody.fields=this.frozenFields;this.setBodyFieldWidths(this.$26a);if(_23.$29a!=null){this.$75n(_23)}
if(!_23.isDirty())this.$25a("reorderFields")}
this.handleFieldStateChanged()},isc.A.remapEditFieldsForFreeze=function isc_ListGrid_remapEditFieldsForFreeze(){if(this.$30a){var _1=this.getEditForm(),_2=_1.getItems();for(var i=0;i<_2.length;i++){var _4=_2[i];_4.colNum=this.fields.findIndex(this.fieldIdProperty,_4.getFieldName());var _5=this.fields[_4.colNum];if(!this.$54d&&_5.frozen)_4.containerWidget=this.frozenBody;else _4.containerWidget=this.body}}},isc.A.headerDragResized=function isc_ListGrid_headerDragResized(_1,_2,_3){var _4=_3.getMember(_1).masterIndex;for(var i=0;i<this.fields.length;i++){if(i==_4)continue;this.fields[i].$35z=this.fields[i].width;this.fields[i].$120x=this.fields[i].autoFitWidth
this.fields[i].width=this.getFieldWidth(i);this.fields[i].autoFitWidth=false;var _6=this.getFieldHeaderButton(i);if(_6){_6.$120y=_6.$pn;_6.$pn=this.fields[i].width}}
this.resizeField(_4,_2,true);for(var i=0;i<this.fields.length;i++){if(i==_4)continue;this.fields[i].width=this.fields[i].$35z;delete this.fields[i].$35z;this.fields[i].autoFitWidth=this.fields[i].$120x
delete this.fields[i].$120x;var _6=this.getFieldHeaderButton(i);if(_6){_6.$pn=_6.$120y;delete _6.$120y}}
this.$97e=false;var _7=this.body.getScrollLeft();this.syncHeaderScrolling(_7,top);this.syncFilterEditorScrolling(_7,top);this.syncSummaryRowScrolling(_7,top)},isc.A.setCanResizeFields=function isc_ListGrid_setCanResizeFields(_1){if(this.canResizeFields==_1)return;this.canResizeFields=_1;if(_1==false)this.canAutoFitFields=false;if(this.header)this.header.setCanResizeItems(_1);if(this.frozenHeader)this.frozenHeader.setCanResizeItems(_1);if(this.headerMenuButton)this.headerMenuButton.canDragResize=_1;if(_1){if(this.header&&!this.header.dontObserve)this.$62l(this.header);if(this.frozenHeader&&!this.frozenHeader.dontObserve)
this.$62l(this.frozenHeader)}else{if(this.header)this.$62m(this.header);if(this.frozenHeader)this.$62m(this.frozenHeader)}},isc.A.$62l=function isc_ListGrid__observeHeaderResize(_1){this.observe(_1,"itemDragResized",function(_2,_3){this.headerDragResized(_2,_3,_1)});this.observe(_1,"dragResizeMemberStart",function(){this.fieldDragResizeStart()});this.observe(_1,"dragResizeMemberMove",function(){this.fieldDragResizeMove()});this.observe(_1,"dragResizeMemberStop",function(){this.fieldDragResizeStop()})},isc.A.$62m=function isc_ListGrid__ignoreHeaderResize(_1){if(this.isObserving(_1,"itemDragResized"))
this.ignore(_1,"itemDragResized");if(this.isObserving(_1,"dragResizeMemberStart"))
this.ignore(_1,"dragResizeMemberStart");if(this.isObserving(_1,"dragResizeMemberMove"))
this.ignore(_1,"dragResizeMemberMove");if(this.isObserving(_1,"dragResizeMemberStop"))
this.ignore(_1,"dragResizeMemberStop")},isc.A.resizeField=function isc_ListGrid_resizeField(_1,_2,_3){this.$116t([_1],[_2],[_3])},isc.A.$116t=function isc_ListGrid__resizeFields(_1,_2,_3){for(var i=0;i<_1.length;i++){var _5=_1[i];if(!isc.isA.Number(_5))_5=this.getFieldNum(_5);if(_5==-1){_1.removeAt(i);_2.removeAt(i);_3.removeAt(i);i--}else{_1[i]=_5;var _6=this.getMinFieldWidth(this.fields[_5],true);if(_6>_2[i]){_2[i]=_6}}}
if(_1.length==0)return;var _7=this.header&&this.header.isDrawn();if(_7){var _8=this.header.instantRelayout,_9=this.frozenHeader?this.frozenHeader.instantRelayout:null;this.header.instantRelayout=false;if(this.frozenHeader)this.frozenHeader.instantRelayout=false}
for(var i=0;i<_1.length;i++){var _5=_1[i],_10=_2[i];if(_7){var _11=this.getFieldHeader(_5),_12=this.getLocalFieldNum(_5);_11.getMember(_12).setWidth(_10)}
var _13=_3[i];if(_13==null||_13){this.fields[_5].width=_10;this.fields[_5].autoFitWidth=false}
if(this.$26a!=null){this.$26a[_5]=_10}}
if(_7){this.header.instantRelayout=_8;this.header.reflowNow("resized headers");if(this.frozenHeader){this.frozenHeader.instantRelayout=_9;this.frozenHeader.reflowNow("resized headers")}}
if(!this.isDrawn())return;this.$54e=true;this.setBodyFieldWidths(this.$26a);if(this.body.isDirty()){this.body.redraw("setting body field widths")}
delete this.$54e;if(!this.$113n&&this.header&&this.autoFitHeaderHeights){this.dropCachedHeaderButtonHeights();this.$109d()}
if(this.isRTL()&&this.header!=null){this.syncBodyScrolling()}
if(this.showFilterEditor&&this.filterEditor){this.filterEditor.$116t(_1,_2,_3)}
if(this.summaryRow&&this.showGridSummary){this.summaryRow.$116t(_1,_2,_3)}
this.handleFieldStateChanged(true)},isc.A.$313=function isc_ListGrid__showSortButton(){var _1=this.showSortArrow;if(_1!=null){return(_1==isc.ListGrid.CORNER||_1==isc.ListGrid.BOTH)}
return this.$54u()},isc.A.$54u=function isc_ListGrid__shouldLeaveScrollbarGap(){if(this.leaveScrollbarGap)return true;if(!this.body||this.isEmpty())return false;if(this.body.vscrollOn)return true;var _1=this.body,_2=this.getHeaderHeight(),_3=this.getInnerHeight()-this.body.getVMarginBorder()-
(this.showHeader?_2:0);if(this.autoFitData==isc.Canvas.VERTICAL||this.autoFitData==isc.Canvas.BOTH){_3=(this.getTotalRows()*this.cellHeight);var _4=this.getAutoFitMaxBodyHeight();if(_4&&_4<_3){_3=_4}
if(this.autoFitMaxRows&&(this.autoFitMaxRows*this.cellHeight)>_3){_3=(this.autoFitMaxRows*this.cellHeight)}}
if(_3<=0)return false;return this.predictScrollbarGap&&this.bodyOverflow==isc.Canvas.AUTO&&(this.getTotalRows()*this.cellHeight>_3)},isc.A.getSorterTop=function isc_ListGrid_getSorterTop(){return(this.headerLayout||this.header).getTop()},isc.A.getSorterLeft=function isc_ListGrid_getSorterLeft(){if(this.isRTL()){return this.getLeftMargin()+this.getLeftBorderSize()+this.getLeftPadding();}else{var _1=(this.headerLayout||this.header);return _1.getWidth()+_1.getLeft()}},isc.A.makeCornerSortButton=function isc_ListGrid_makeCornerSortButton(){this.sorter=this.createAutoChild("sorter",isc.addProperties(this.getButtonProperties(),this.sorterDefaults,{ID:this.getID()+"_sorter",width:this.getScrollbarSize(),height:this.getHeaderHeight(),backgroundColor:this.headerBackgroundColor,imgDir:this.widgetImgDir,visibility:(this.$313()?isc.Canvas.INHERIT:isc.Canvas.HIDDEN),ariaState:{label:this.sorterButtonTitle}}));this.addChild(this.sorter,"sorter",false)},isc.A.$91j=function isc_ListGrid__sorterContextClick(){if(this.sorterContextClick&&!this.sorterContextClick())return false;var _1=this.showHeaderContextMenu;if(this.showCornerContextMenu!=null)_1=this.showCornerContextMenu;if(_1)return this.displayHeaderContextMenu(this.sorter)},isc.A.headerBarContextClick=function isc_ListGrid_headerBarContextClick(_1){var _2=this.showHeaderContextMenu;if(this.showCornerContextMenu!=null)_2=this.showCornerContextMenu;if(_2&&(isc.EH.isKeyEvent()||_1.containsEvent())){var _3=isc.EH.isKeyEvent()?_1.getFocusButtonIndex():_1.getMouseOverButtonIndex();return this.displayHeaderContextMenu(_1.getMember(_3))}},isc.A.headerSpanContextClick=function isc_ListGrid_headerSpanContextClick(_1){var _2=this.getHeaderSpanContextMenuItems(_1);if(!_2||_2.length==0)return false;if(!this.spanContextMenu){this.spanContextMenu=this.createAutoChild("spanContextMenu",{items:_2,autoFitFieldWidths:true},this.getMenuConstructor())}else{this.spanContextMenu.setItems(_2)}
this.spanContextMenu.showContextMenu();return false},isc.A.displayHeaderContextMenu=function isc_ListGrid_displayHeaderContextMenu(_1,_2){if(!_1)return;var _3=this.fields[_1.masterIndex];if(_3&&_3.showDefaultContextMenu==false)return false;var _4=this.getHeaderContextMenuItems(_1.masterIndex);if(_4.length==0)return;if(!this.$314)this.$314=this.getHeaderContextMenu(_1);this.$314.setData(_4);this.$93s=true;if(_2!=null&&_2.length>0){this.$314.target=_1;this.$314.moveTo(0,0);this.$314.setVisibility("hidden");if(!this.$314.isDrawn())this.$314.draw();else this.$314.redraw();this.$314.placeNear(_2[0],_2[1]);this.$314.show();return false}else{return this.$314.showContextMenu(_1)}},isc.A.getToggleFreezeText=function isc_ListGrid_getToggleFreezeText(_1,_2){var _3={viewer:this,title:_2?_2.title:this.getSummaryTitle(_1)};return(!this.$54d&&_1.frozen)?this.unfreezeFieldText.evalDynamicString(this,_3):this.freezeFieldText.evalDynamicString(this,_3)},isc.A.getGroupByText=function isc_ListGrid_getGroupByText(_1){var _2={field:_1,title:this.getSummaryTitle(_1),viewer:this}
return this.groupByText.evalDynamicString(this,_2)},isc.A.$58f=function isc_ListGrid__shouldGroupByField(_1){var _1=this.getField(_1);return!!(_1&&this.$58g(_1)&&this.data.getLength()<=this.groupByMaxRecords)},isc.A.$58g=function isc_ListGrid__canGroupByField(_1){var _1=this.getField(_1);return!!(_1&&((this.canGroupBy==true&&_1.canGroupBy!=false)||(this.canGroupBy!=false&&_1.canGroupBy==true)))},isc.A.getHeaderSpanContextMenuItems=function isc_ListGrid_getHeaderSpanContextMenuItems(_1){if(!this.showTreeColumnPicker&&!this.showHeaderSpanContextMenu)return false;var _2=[];if(this.canPickFields){_2[0]={title:this.fieldVisibilitySubmenuTitle,submenu:this.getColumnPickerItems(),icon:"[SKINIMG]actions/column_preferences.png"}}
var _3=this,_4=this.getSpannedFields(_1),_5;if(_4){for(var i=0;i<_4.length;i++){var _7=_4[i],_8=this.getField(_7);if(_8&&!this.$54d&&_8.frozen){_5=true;break}}}
if(this.canFreezeFields&&this.fields.length>1&&!_1.parentSpan){if(_5||this.frozenFields==null||this.normalFields.length>_4.length){if(_2.length>0)_2.add({isSeparator:true});_2.add({title:this.getToggleFreezeText(this.completeFields.find(this.fieldIdProperty,_4[0]),_1),grid:this,spanFields:_4,frozen:_5,icon:(_5?"[SKINIMG]actions/unfreeze.png":"[SKINIMG]actions/freezeLeft.png"),click:function(){var _9=this.spanFields;for(var i=0;i<_9.length;i++){_3.completeFields.find(_3.fieldIdProperty,_9[i]).frozen=!this.frozen}
_3.rebuildForFreeze()}})}}
return _2},isc.A.shouldShowColumnPicker=function isc_ListGrid_shouldShowColumnPicker(_1){if(_1.treeField||_1.canHide===false)return false;var _2=this.getSummaryTitle(_1);if(_2==null||isc.isAn.emptyString(_2))return false;return true},isc.A.getColumnPickerItems=function isc_ListGrid_getColumnPickerItems(){var _1=[],_2=this;for(var i=0;i<this.completeFields.length;i++){var _4=this.completeFields[i];if(!this.shouldShowColumnPicker(_4))continue;var _5=this.getSummaryTitle(_4);var _6=this.spanMap?this.spanMap[_4.name]:null;if(this.showTreeColumnPicker&&_6){var _7=[_6],_8=_6.parentSpan;while(_8!=null){_7.add(_8);_8=_8.parentSpan}
var _9="";for(var _10=_7.length-1;_10>=0;_10--){var _11=_7[_10];if(!_1.find("spanConfig",_11)){_1.add({title:_9+_11.title,autoDismiss:false,spanConfig:_11,click:function spanMenu_click(_23,_14,_24){var _12=_2.getSpannedFields(_14.spanConfig,true);var _13=_14.anySpannedFieldsVisible(true);if(_13)_2.hideFields(_12.duplicate())
else _2.showFields(_12.duplicate());_24.body.delayCall("markForRedraw")},anySpannedFieldsVisible:function spanMenu_anySpannedFieldsVisible(_23){var _12=_2.getSpannedFields(this.spanConfig,_23);for(var i=0;i<_12.length;i++){if(_2.fieldIsVisible(_12[i]))return true}
return false},enableIf:function spanMenu_enableIf(_23,_24,_14){var _11=_14.spanConfig;var _12=_2.getSpannedFields(_11);for(var i=0;i<_24.data.length;i++){var _14=_24.data[i];if(_14.fieldName&&_2.fieldIsVisible(_14.fieldName)&&!_12.contains(_14.fieldName))return true}
return false},checkIf:function(_23,_24,_14){return _14.anySpannedFieldsVisible()}})}
_9+="&nbsp;&nbsp;&nbsp;&nbsp;"}
_5=_9+_5}
_1.add({title:_5,fieldName:_4.name,prompt:_4.prompt,autoDismiss:false,checkIf:function(_23,_24,_14){return _2.fieldIsVisible(_14.fieldName)},enableIf:function(_23,_24,_14){var _15=0;for(var i=0;i<_2.fields.length;i++){var _16=_2.fields[i];if(_2.fieldIsVisible(_16)&&_16.$81f){_15++}}
return!(_15===1&&_2.fieldIsVisible(_14.fieldName))},click:function(_23,_14,_24){var _17=_24.$35q,_18=_17?_17.data.findIndex("groupItem",true):null,_19=_17?_17.data[_18]:null,_20=(_19&&_19.fieldName==_14.fieldName);if(_2.fieldIsVisible(_14.fieldName)){var _21=_2.fields.length;if(_2.getCurrentCheckboxField()!=null)_21-=1;if(_21>1){_2.hideField(_14.fieldName)}
if(_21==1){var _22=_24.data.find("fieldName",_2.fields[0].name);_24.setItemEnabled(_22,false);this.$58s=_22}}else{_2.showField(_14.fieldName);if(this.$58s){_24.setItemEnabled(this.$58s,true);this.$58s=null}}
if(_20){_17.setItemEnabled(_18,_2.$58f(_19.fieldName))}
_24.body.delayCall("markForRedraw")}})}
return _1},isc.A.getColumnPickerMenu=function isc_ListGrid_getColumnPickerMenu(_1){var _2={canHover:true,showIcons:true,showHover:true,cellHoverHTML:function(_3){return _3.prompt},items:_1};return{title:this.fieldVisibilitySubmenuTitle,submenu:_2,icon:"[SKINIMG]actions/column_preferences.png"}},isc.A.getHeaderContextMenuItems=function isc_ListGrid_getHeaderContextMenuItems(_1){var _2=this.getField(_1);var _3=[],_4=false;var _5=this.$66c(_2);if(_5||!_2){if(_2){var _6=_1!=null?_1:this.$60z();_3[0]={title:this.sortFieldAscendingText,icon:"[SKINIMG]actions/sort_ascending.png",click:"menu.doSort("+_6+", 'ascending')"};_3[1]={title:this.sortFieldDescendingText,icon:"[SKINIMG]actions/sort_descending.png",click:"menu.doSort("+_6+", 'descending')"};_4=true}
if(this.$91d()){_3.add({title:this.configureSortText,field:_2,click:function(_19,_20,_21){_21.grid.askForSort(this.field==null?null:this.field[_21.grid.fieldIdProperty])}});_4=true;if(!_2||this.isSortField(_2[this.fieldIdProperty])){_3.add({title:_2?this.clearSortFieldText:this.clearAllSortingText,field:_2,enableIf:function(_19,_20,_21){return(_2||(!_2&&_20.grid.getSortFieldCount()>0))},click:_2?"menu.doSort("+_6+", 'unsort')":"menu.grid.clearSort();"});_4=true}}}
var _7=this.canAutoFitFields&&_2;if(_7){_3.add({title:this.autoFitAllText,click:"menu.grid.autoFitFields()"});_3.add({title:this.autoFitFieldText,click:"menu.grid.autoFitField("+_1+",true);"})}
if(!_2&&this.showFilterEditor){if(_4)_3.add({isSeparator:true});_3.add({title:this.clearFilterText,click:"menu.grid.setFilterEditorCriteria(null); menu.grid.filterByEditor();"});_4=true}
if(this.canPickFields&&this.completeFields.length>1){if(this.useAdvancedFieldPicker&&this.completeFields.length>=this.advancedFieldPickerThreshold)
{_3.add(this.createFieldPickerWindowMenuItem(this.fieldVisibilitySubmenuTitle+"..."))}else{var _8=this.getColumnPickerItems();if(_8.length>0){var _9=_8.length>1;if(!_9){var _10=_8[0].fieldName;for(var i=0;i<this.fields.length;i++){if(this.fields[i].name!=_10){_9=true;break}}}
if(_9){if(_4)_3.add({isSeparator:true});_3.add(this.getColumnPickerMenu(_8));_4=true}}}}
var _12=_2&&this.$58g(_2),_13=(this.canGroupBy!=false)&&_2&&_2.canGroupBy!=false&&this.isGrouped;if(_4&&(_13||_12)){_3.add({isSeparator:true})}
if(_12){var _14=_2.groupingModes?_2.groupingModes:(!_2.getGroupValue?(_2.$62?(_2.$62.getGroupingModes?_2.$62.getGroupingModes():_2.$62.groupingModes):false):false);var _15=null;if(_14){_15=[];var _16=function(_19,_20){if(!_20)_20=_19;_15.add({title:_20,groupType:_19,targetField:_2,fieldName:_2.name,prompt:_2.prompt,checked:_2.groupingMode==_19,click:function(_21,_22,_23){this.targetField.groupingMode=this.groupType;_23.$35q.groupField(_22)}})}
if(isc.isAn.Array(_14)){for(var i=0;i<_14.length;i++){_16(_14[i])}}else if(isc.isAn.Object(_14)){for(var _17 in _14){_16(_17,_14[_17])}}}
_3.add({groupItem:true,title:this.getGroupByText(_2),fieldName:_2.name,targetField:_2,prompt:_2.prompt,icon:"[SKINIMG]actions/groupby.png",click:function(_19,_20,_21){this.targetField.groupingMode=this.targetField.defaultGroupingMode||null;_21.groupField(_20)},enabled:this.$58f(_2),canSelectParent:true,submenu:_15});if(this.canMultiGroup){var _18=this;_3.add({title:this.configureGroupingText,icon:"[SKINIMG]actions/groupby.png",targetField:_2,click:function(_19,_20,_21){_18.configureGrouping(this.targetField)},enabled:this.$58f(_2)})}
_4=true}
if(_13){_3.add({title:this.ungroupText,click:"menu.ungroup()",icon:"[SKINIMG]actions/ungroup.png"});_4=true}
if(_2){if(this.canFreezeFields&&this.fields.length>1&&(_2.frozen||(this.frozenFields==null||this.normalFields.length>1))&&!(this.spanMap&&this.spanMap[_2.name])&&_2.canFreeze!=false)
{if(_4)_3.add({isSeparator:true});_3.add({title:this.getToggleFreezeText(_2),grid:this,field:_2,icon:(_2.frozen?"[SKINIMG]actions/unfreeze.png":"[SKINIMG]actions/freezeLeft.png"),click:"item.grid.toggleFrozen(this.field,!this.field.frozen)"});_4=true}}
if(this.canAddFormulaFields){if(_4)_3.add({isSeparator:true});if(_2&&_2.userFormula){_3.add({title:this.editFormulaFieldText,grid:this,field:_2,click:"item.grid.editFormulaField(item.field)",icon:"[SKINIMG]ListGrid/formula_menuItem.png"});_3.add({title:this.removeFormulaFieldText,grid:this,field:_2,click:"item.grid.removeField(item.field.name)",icon:"[SKINIMG]ListGrid/formula_menuItem.png"})}
_3.add({title:this.addFormulaFieldText,grid:this,click:"item.grid.addFormulaField()",icon:"[SKINIMG]ListGrid/formula_menuItem.png"});_4=true}
if(this.canAddSummaryFields){if(_4)_3.add({isSeparator:true});if(_2&&_2.userSummary){_3.add({title:this.editSummaryFieldText,grid:this,field:_2,click:"item.grid.editSummaryField(item.field)",icon:"[SKINIMG]ListGrid/formula_menuItem.png"});_3.add({title:this.removeSummaryFieldText,grid:this,field:_2,click:"item.grid.removeField(item.field.name)",icon:"[SKINIMG]ListGrid/formula_menuItem.png"})}
_3.add({title:this.addSummaryFieldText,grid:this,click:"item.grid.addSummaryField()",icon:"[SKINIMG]ListGrid/formula_menuItem.png"})}
return _3},isc.A.getHeaderContextMenu=function isc_ListGrid_getHeaderContextMenu(){return this.createAutoChild("headerContextMenu",{ID:this.getID()+"$314",grid:this},this.getMenuConstructor())},isc.A.getSortArrowImage=function isc_ListGrid_getSortArrowImage(_1,_2,_3,_4){if(_1==null)_1=this.$60z();var _5=null;if(this.showSortArrow!=false&&_1!=null){_5=Array.shouldSortAscending(this.getField(_1).sortDirection)?this.sortAscendingImage:this.sortDescendingImage}
if(_2)return _5;if(_5!=null){return this.imgHTML(isc.addProperties({imgDir:this.widgetImgDir,extraCSSText:(_3&&this.clipHeaderTitles)||_4?(this.isRTL()?"float:left;margin-right:4px":"float:right;margin-left:4px"):null},_5))}else{return isc.Canvas.spacerHTML(1,1)}},isc.A.$91i=function isc_ListGrid__sorterClick(){if(this.sorterClick&&!this.sorterClick())return;var _1=this.$60z();if(!this.$66c(_1))return false;if(_1!=null){var _2=this.getField(_1),_3=_2[this.fieldIdProperty],_4=this.$765,_5=this.$766(_2);if(this.isSortField(_3)){if(_4==_5||this.canUnsort==false){this.toggleSort(_3)}else{this.toggleSort(_3,"unsort")}}else{this.setSort([{property:_3,direction:_4}])}}else{this.sort(_1,(_1!=null?!Array.shouldSortAscending(this.getField(_1).sortDirection):null))}},isc.A.shouldShowDragLineForRecord=function isc_ListGrid_shouldShowDragLineForRecord(_1){return this.canReorderRecords&&this.showDropLines!=false},isc.A.showDragLineForRecord=function isc_ListGrid_showDragLineForRecord(_1,_2){if(!this.shouldShowDragLineForRecord(_1))return;var _3=this.body;if(_1==null)_1=this.getEventRecordNum();if(_1==-1){if(this._dragLine)this._dragLine.hide();return}
var _4=_3.getVisibleRows()[1];if(_1==-2)_1=_4;if(this._dragLine&&_1!=_4){var _5=this.getCellRecord(_1);if(!this.recordIsEnabled(_5,_1)){return this._dragLine.hide()}}
if(_2==null)_2=this.getRecordDropPosition(_1);var _6=this.getLeftBody();var _7=_6.getPageLeft()+(this.isRTL()&&_6.vscrollOn?_6.getScrollbarSize():0);if(_2==isc.ListGrid.BEFORE){this.showHDragLine(_7,_3.getRowPageTop(_1));this._dragLine.afterRow=_1-1}else if(_2==isc.ListGrid.AFTER){this.showHDragLine(_7,(_3.getRowPageTop(_1)+_3.getRowSize(_1)));this._dragLine.afterRow=_1}else{return this._dragLine.hide()}
if(this.recordDropMove){this.fireCallback("recordDropMove","viewer,recordNum,record,position",[this,_1,this.getRecord(_1),_2])}});isc.evalBoundary;isc.B.push(isc.A.showHDragLine=function isc_ListGrid_showHDragLine(_1,_2){this.makeDragLine();this._dragLine.resizeTo(this.getViewportWidth()-(this.body.vscrollOn?this.body.getScrollbarSize():0),2);var _3=this.body.getPageTop(),_4=_3+this.body.getVisibleHeight();if(_2<_3)_2=_3;else if(_2>_4)_2=_4;this._dragLine.setPageRect(_1,_2);this._dragLine.show();this._dragLine.bringToFront()},isc.A.showDragLineForField=function isc_ListGrid_showDragLineForField(_1,_2){this.makeDragLine();if(_2==true||!this.body){this._dragLine.resizeTo(2,this.getHeaderHeight())}else{this._dragLine.resizeTo(2,this.getHeaderHeight()+this.body.getVisibleHeight())}
if(_1==null)_1=this.getEventFieldNum();if(_1<0){this._dragLine.hide();return}
var _3=this.ns.EH.dragTarget,_4=(!this.isRTL()?_3.getPageLeft()+this.ns.EH.dragResizeWidth:_3.getPageRight()-this.ns.EH.dragResizeWidth)-1;this._dragLine.setPageRect(_4,this.getPageTop()+(this.showFilterEditor?this.filterEditorHeight:0));this._dragLine.bringToFront();this._dragLine.show()},isc.A.unsort=function isc_ListGrid_unsort(){this.setSort(null)},isc.A.resort=function isc_ListGrid_resort(){this.$126f=true;if(this.$73p)return this.setSort(isc.shallowClone(this.$73p));var _1=this.$60z();if(_1!=null){var _2=this.getField(_1),_3=this.$766(_2);this.sort(_1,_3)}},isc.A.sort=function isc_ListGrid_sort(_1,_2){var _3,_4;if(isc.isA.String(_1)){_3=_1;_1=this.getFieldNum(_3);if(_1<0){_4=this.getUnderlyingField(_3)}}
if(!_4){var _5=this.$60z(),_6=(_5!=null?Array.shouldSortAscending(this.getField(_5).sortDirection):null);if(_1==null){if(_5!=null){_1=_5}else{for(var i=0;i<this.fields.length;i++){if(this.$91k(this.fields[i])!=false){_1=i;break}}}}
if(_1==null)return false;_4=this.getField(_1)}
if(_4==null){return}
if(_2==null){_2=this.$766(_4)}
if(_5==_1&&_2==_4.sortDirection)return;var _8={property:_4[this.fieldIdProperty],direction:Array.shouldSortAscending(_2)?"ascending":"descending"};return this.setSort([_8])},isc.A.$60z=function isc_ListGrid__getSortFieldNum(){if(this.sortFieldNum!=null)return this.sortFieldNum;if(this.sortField!=null){var _1=this.getFieldNum(this.sortField);if(_1==-1)_1=null;this.sortFieldNum=_1;var _2=this.getFieldName(this.sortFieldNum);if(_2)this.sortField=_2;return _1}
return null},isc.A.$600=function isc_ListGrid__setSortFieldNum(_1){this.sortFieldNum=_1;var _2=this.getFieldName(_1);this.sortField=_2},isc.A.getSortField=function isc_ListGrid_getSortField(){return this.sortField},isc.A.getUnderlyingField=function isc_ListGrid_getUnderlyingField(_1){if(!this.fields&&!this.completeFields&&!this.dataSource){this.logWarn("fields and completeFields are null and there is no DataSource");return null}
var _2=null;if(this.fields){_2=isc.Class.getArrayItem(_1,this.fields,this.fieldIdProperty)}
if(!_2&&this.completeFields){_2=isc.Class.getArrayItem(_1,this.completeFields,this.fieldIdProperty)}
if(!_2&&this.dataSource){if(!isc.isA.DataSource(this.dataSource))this.dataSource=this.getDataSource(this.dataSource);_2=this.dataSource.getField(_1)}
return _2},isc.A.toggleSort=function isc_ListGrid_toggleSort(_1,_2){var _3=this.getSpecifiedField(_1),_4=this.$73p?isc.shallowClone(this.$73p):[],_5=_4.find("property",_1);if(!_5&&_3.displayField){_5=_4.find("property",_3.displayField);if(!_5)return}
if(!_2)
_2=Array.shouldSortAscending(_5.direction)?"descending":"ascending";if(_2=="unsort")_4.remove(_5);else _5.direction=_2;this.setSort(_4)},isc.A.$73z=function isc_ListGrid__addSort(_1,_2){if(!isc.isAn.Object(_1)){_1=this.getSpecifiedField(_1)}
var _3=_2||this.$766(_1);this.addSort({property:_1[this.fieldIdProperty],direction:Array.shouldSortAscending(_3)?"ascending":"descending"})},isc.A.addSort=function isc_ListGrid_addSort(_1){var _2=this.$73p?isc.shallowClone(this.$73p):[];_2.add(_1);this.setSort(_2)},isc.A.getSort=function isc_ListGrid_getSort(){if(this.$73p){return this.removeSortSpecifierMarkers(isc.shallowClone(this.$73p))}else if(this.initialSort){return isc.shallowClone(this.initialSort)}else{var _1;if(this.sortFieldNum!=null)_1=this.getField(this.sortFieldNum);if(!_1&&this.sortField!=null){_1=this.getUnderlyingField(this.sortField)}
if(_1){var _2=this.$766(_1);return[{property:_1[this.fieldIdProperty],direction:_2}]}}},isc.A.getSortSpecifier=function isc_ListGrid_getSortSpecifier(_1){var _2=null;if(this.$73p&&this.$73p.length>0){_2=this.$73p.find("property",_1);if(!_2){var _3=this.getSpecifiedField(_1);if(_3&&_3.displayField&&!_3.optionDataSource){_2=this.$73p.find("property",_3.displayField)}}}
return _2},isc.A.getSortFieldCount=function isc_ListGrid_getSortFieldCount(){return this.$73p?this.$73p.length:0},isc.A.isSortField=function isc_ListGrid_isSortField(_1){var _2=this.getSortSpecifier(_1)?true:false;if(!_2){var _3=this.getSpecifiedField(_1);if(_3&&_3.displayField&&!_3.optionDataSource){_2=this.getSortSpecifier(_3.displayField)?true:false}}
return _2},isc.A.getSortNumeralHTML=function isc_ListGrid_getSortNumeralHTML(_1,_2){var _3=this.$145s;_3[1]=this.sortNumeralStyle;isc.$bk(_3,(_2+1),3,3);return _3.join(isc.emptyString)},isc.A.clearSort=function isc_ListGrid_clearSort(){this.setSort(null)},isc.A.setSort=function isc_ListGrid_setSort(_1){if(this.logIsInfoEnabled("sorting"))this.logInfo("Entering setSort","sorting");var _2=this.$126f;delete this.$126f;if(_1&&!isc.isAn.Array(_1))_1=[_1];if(!this.fields&&!this.getDataSource()){this.initialSort=_1;if(this.logIsInfoEnabled("sorting")){this.logInfo("setSort() not performing sort - no fields","sorting")}
return false}
if(this.confirmDiscardEdits&&this.dataSource!=null){if(this.hasChanges()&&isc.ResultSet&&isc.isA.ResultSet(this.data)&&!this.data.allMatchingRowsCached())
{this.showLostEditsConfirmation({target:this,methodName:"$34g"},{target:this,methodName:"$34h"});this.$34i=_1
return}}
var _1=_1||[],_3=[],_4;if(this.$73p){for(var i=0;i<this.$73p.length;i++){var _6=this.$73p[i],_7=_1.find("property",_6.property);if(!_7){_3.add(isc.shallowClone(_6));if(this.logIsInfoEnabled("sorting")){this.logInfo("In setSort - marking field "+_6.property+" for removal","sorting")}}}}
if(!_1||_1.length==0){if(this.logIsInfoEnabled("sorting")){this.logInfo("null or zero-length sortSpecifiers - unsorting only","sorting")}}
var _8=[];_1.removeEmpty();for(var i=0;i<_1.length;i++){if(!_1[i])continue;var _9=_1[i],_10=this.getUnderlyingField(_9.property),_11=this.getField(_9.property),_12=null;if(!_10){var _13=this.getAllFields();_10=!_13?null:_13.find("displayField",_9.property)}
if(_10){if(!this.$91k(_10)){this.logWarn("Removing field '"+_10[this.fieldIdProperty]+"' from the sortSpecifier array because it specifies canSortClientOnly: true and all data is not yet client-side.","sorting");continue}
if(_11){if(!_4)_4=_11}
if(!_9.normalizer){if(_10.sortNormalizer){_12=_10.sortNormalizer}else if(_10.valueMap&&(_10.sortByMappedValue==null||_10.sortByMappedValue==true))
{_12=isc.isA.String(_10.valueMap)?this.getGlobalReference(_10.valueMap):_10.valueMap}else if(_10.type!=null){_12=_10.type}
_9.normalizer=_12}
if(_9.direction==null){_9.direction=this.$766(_10)}
if(_4&&_4==_11){_9.primarySort=true}
if(_9.primarySort){this.sortDirection=Array.shouldSortAscending(_9.direction)}
if(!_9.context)_9.context=this;_9.sortIndex=i;_8.add(_9)}}
this.sortSpecifiers=this.$73p=_8;var _14=this.$73p[0],_15=_14?_14.property:null,_16=_15?this.getFieldNum(_15):null,_17=_15?this.getUnderlyingField(_15):null,_18=_14?Array.shouldSortAscending(_14.direction):null;if(!_17){if(_14)this.logWarn("sort: field does not exist: "+_14.property)}
if(_16>=0){this.$600(_16)}else{this.$600(null)}
if(this.logIsInfoEnabled("sorting")){this.logInfo("In setSort - ready to sort on specifiers:\n"+isc.echoAll(this.$73p),"sorting")}
if(this.$73p&&this.$73p.length>0){if(_2&&this.data&&this.data.resort&&this.data.$73p){this.data.resort()}else if(this.data&&(this.data.setSort||this.data.length>0||isc.isA.ResultTree(this.data)||isc.isA.Tree(this.data)))
{if(this.data.setSort){if(this.logIsInfoEnabled("sorting")){this.logInfo("In setSort -  Calling data.setSort with specifiers:\n"+isc.echoAll(this.$73p),"sorting")}
this.data.setSort(this.$73p)}else if(this.data.sortByProperty){if(this.logIsInfoEnabled("sorting")){this.logInfo("In setSort - Calling data.sortByProperty with specifier:\n"+isc.echoAll(_14),"sorting")}
this.data.sortByProperty(_14.property,Array.shouldSortAscending(_14.direction),_14.normalizer,_14.context)}}else{if(this.logIsInfoEnabled("sorting")){this.logInfo("In setSort - not sorting:\nthis.data is"+this.echoAll(this.data),"sorting")}}}else{if(this.data){if(this.data.setSort!=null)this.data.setSort([]);else if(this.data.unsort)this.data.unsort()}
if(this.invalidateCacheOnUnsort){this.invalidateCache()}}
var _19=(this.header&&isc.isA.Toolbar(this.header));if(_3){if(_3.length>0){if(this.logIsInfoEnabled("sorting")){this.logInfo("In setSort - Removing sort-media from now unsorted fields:\n"+isc.echoAll(_3),"sorting")}}
for(var i=0;i<_3.length;i++){var _20=_3[i],_10=this.getSpecifiedField(_20.property),_21=[];if(_10){_21.add(_10);if(this.logIsInfoEnabled("sorting")){this.logInfo("In setSort, removing sort-media for fieldName '"+_10.name+"'","sorting")}}
var _13=this.getFields();if(_13){var _22=_13.findAll("displayField",_20.property);if(_22){_22.removeUnless("optionDataSource",null);if(_22.length>0){_21.addList(_22);if(this.logIsInfoEnabled("sorting")){this.logInfo("In setSort, removing sort-media for fields with displayField '"+_10.name+"' - these are: "+isc.echoFull(_22.getProperty("name").join(", ")),"sorting")}}}}
for(var j=0;j<_21.length;j++){var _24=_21[j],_25=this.getFieldNum(_24.name);if(_24){_24.sortDirection=_24.originalSortDirection}
if(_25>=0&&_19){var _26=this.getFieldHeaderButton(_25);if(_26&&_26.setTitle)_26.setTitle(_26.getTitle())}}}}
if(this.$73p&&this.$73p.length>0){this.logInfo("In setSort - Setting sort-media for sorted fields:\n"+isc.echoAll(this.$73p),"sorting");var _27=false;for(var i=0;i<this.$73p.length;i++){var _20=this.$73p[i],_10=this.getSpecifiedField(_20.property),_21=[];if(_10){_21.add(_10);if(this.logIsInfoEnabled("sorting")){this.logInfo("In setSort, adding sort-media for fieldName '"+_10.name+"'","sorting")}}
var _13=this.getFields();if(_13){var _22=_13.findAll("displayField",_20.property);if(_22){_21.addList(_22);if(this.logIsInfoEnabled("sorting")){this.logInfo("In setSort, adding sort-media for fields with displayField '"+_10.name+"' - these are: "+isc.echoFull(_22.getProperty("name").join(", ")),"sorting")}}}
for(var j=0;j<_21.length;j++){var _24=_21[j],_25=this.getFieldNum(_24.name);if(_24){if(_24.sortDirection&&!_24.originalSortDirection){_24.originalSortDirection=_24.sortDirection}
_24.sortDirection=_20.direction}
if(_19&&_25>=0){var _28=this.getFieldHeader(_25),_26=this.getFieldHeaderButton(_25);if(_26){if(!_27&&this.selectHeaderOnSort){_28.selectButton(_26);if(isc.Browser.isTouch&&this.shouldShowHeaderMenuButton(_26,true)){this.$129n(_26)}
_27=true}
if(_26.setTitle)_26.setTitle(this.getHeaderButtonTitle(_26))}}}}}else if(_19&&this.selectHeaderOnSort){var _29;if(this.header){_29=this.header.getSelectedButton();if(_29){_29.deselect();this.$129m(_29)}}
if(this.frozenHeader){_29=this.frozenHeader.getSelectedButton();if(_29)_29.deselect()}}
if(_16>=0){if(this.logIsInfoEnabled("sorting")){this.logInfo("In setSort - $600 called with fieldNum: "+_16+" - sortField is now: "+this.sortField+"\ngetSortState() now returns: "+isc.echoAll(this.getSortState()),"sorting")}}
if(this.sorter&&this.sorter.setTitle){this.sorter.setTitle(this.sorter.getTitle())}
if(this.body&&this.showRecordComponents)delete this.body.$74k;this.$25a(this.$73y);if(this.logIsInfoEnabled("sorting"))this.logInfo("Leaving setSort","sorting");this.handleSortChanged(this.$73p);return true},isc.A.handleSortChanged=function isc_ListGrid_handleSortChanged(_1){this.sortChanged(this.removeSortSpecifierMarkers(isc.shallowClone(_1)));this.handleFieldStateChanged(true)},isc.A.sortChanged=function isc_ListGrid_sortChanged(_1){},isc.A.$34g=function isc_ListGrid__continueSort(){var _1=this.$34i;delete this.$34i;this.setSort(_1)},isc.A.$34h=function isc_ListGrid__cancelSort(){var _1;var _1=this.$34i?this.$34i[0]:null;delete this.$34i;if(_1!=null){var _2=this.getFieldNum(_1.property);if(_2!=-1&&this.sortFieldNum!=_2){this.header.deselectButton(_2)}}},isc.A.sortData=function isc_ListGrid_sortData(){if(!this.data||!this.fields)return;var _1=this.fields[this.$60z()],_2=null;if(_1==null){this.$600(0);_1=this.fields[0]}
if(_1.sortNormalizer){_2=_1.sortNormalizer}else if(_1.valueMap){_2=_1.valueMap;if(isc.isA.String(_1.valueMap))_2=this.getGlobalReference(_1.valueMap)}else if(_1.type!=null){_2=_1.type}
this.data.sortByProperty(_1[this.fieldIdProperty],_1.sortDirection,_2,this)},isc.A.getEmbeddedComponentCount=function isc_ListGrid_getEmbeddedComponentCount(_1){var _2=this.body?this.body.$29a:null;if(this.frozenBody&&this.frozenBody.$29a!=null){_2=(_2?_2.duplicate():[]).addList(this.frozenBody.$29a)}
if(!_2)return 0;if(_1=="recordComponent"){_2=_2.findAll("isRecordComponent",true)}else if(_1=="backgroundComponent"){_2=_2.findAll("isBackgroundComponent",true)}
return _2==null?0:_2.length},isc.A.addEmbeddedComponent=function isc_ListGrid_addEmbeddedComponent(_1,_2,_3,_4,_5){if(_4==null&&_1.$81k!=null){_4=this.getFieldNum(_1.$81k)}
var _6=this.getFieldBody(_4);_4=this.getLocalFieldNum(_4);_5=_5||_1.embeddedPosition
if(_3==null)_3=this.getRecordIndex(_2);_6.addEmbeddedComponent(_1,_2,_3,_4,_5);if(this.frozenBody!=null){var _7=_6==this.frozenBody?this.body:this.frozenBody;var _8=_7==this.frozenBody?1:0;if(_3>=0&&_7.isDrawn()&&!_7.isDirty()){var _9=_7.getRowHeight(_2,_3,_8);if(_9!=_6.getRowSize(_3)){_7.markForRedraw()}}}},isc.A.removeEmbeddedComponent=function isc_ListGrid_removeEmbeddedComponent(_1,_2,_3){var _4;if(isc.isA.Canvas(_1)){_2=_1;_1=_2.embeddedRecord}
if(isc.isA.Number(_2)){_4=this.getFieldBody(_2);_2=this.getLocalFieldNum(_2)}else{if(!_2){if(!this.$916(_1))return;_2=this.$917(_1)[0]}
_4=isc.Canvas.getById(_2.$669)}
if(_4==null){return}
_4.removeEmbeddedComponent(_1,_2,_3)},isc.A.getEmbeddedComponent=function isc_ListGrid_getEmbeddedComponent(_1,_2){var _3;if(isc.isA.Number(_2)){_3=this.getFieldBody(_2);_2=this.getLocalFieldNum(_2)}else if(_2==null){_3=this.body}else{_3=isc.Canvas.getById(_2.$669)}
return _3.getEmbeddedComponent(_1,_2)},isc.A.getRecordComponent=function isc_ListGrid_getRecordComponent(_1,_2){var _3=this.getRecord(_1);return this.getEmbeddedComponent(_3,_2)},isc.A.getRecordDataSource=function isc_ListGrid_getRecordDataSource(_1){return this.dataSource},isc.A.openRecordEditor=function isc_ListGrid_openRecordEditor(_1){if(this.$32o!=null)this.closeRecord();var _2=isc.addProperties({},_1);var _3=this.ns.DynamicForm.create(this.recordEditorProperties,{autoDraw:false,dataSource:this.getRecordDataSource(_1),numCols:4,values:_2,$34j:_1});var _4=this.ns.VStack.create({autoDraw:false,width:this.getAvailableFieldWidth()-this.embeddedComponentIndent,left:this.isRTL()?0:this.embeddedComponentIndent,destroyOnUnEmbed:true,members:[_3,this.ns.Toolbar.create({autoDraw:false,width:200,buttons:[{title:this.recordEditorSaveButtonTitle,click:this.getID()+".embeddedSaveRecord("+_3.getID()+")",extraSpace:10},{title:this.recordEditorCancelButtonTitle,record:_1,grid:this,click:function(){var _5=this.parentElement.parentElement;this.grid.closeRecord(this.record,_5)}}]})]});_4.removeOnHideField=true;this.addEmbeddedComponent(_4,_1,this.data.indexOf(_1));this.$32o=_1;this.$57o=_4},isc.A.embeddedSaveRecord=function isc_ListGrid_embeddedSaveRecord(_1){_1.saveData({target:this,methodName:"embeddedEditComplete"},{$34j:_1.$34j,$57p:_1})},isc.A.embeddedEditComplete=function isc_ListGrid_embeddedEditComplete(_1,_2,_3){if(_1.status==0){this.removeEmbeddedComponent(_3.$34j,_3.$57p)}},isc.A.closeRecord=function isc_ListGrid_closeRecord(_1,_2){if(!_1)_1=this.$32o;if(!_2)_2=this.$57o;this.removeEmbeddedComponent(_1,_2);this.$32o=null;this.$57o=null},isc.A.openRecordDetailGrid=function isc_ListGrid_openRecordDetailGrid(_1,_2){if(this.$32o!=null)this.closeRecord();var _3=this.getRecordDetailGrid(_1,_2);var _4=isc.VLayout.create({autoDraw:false,destroyOnUnEmbed:true,height:this.cellHeight,left:this.isRTL()?0:this.embeddedComponentIndent,width:this.getAvailableFieldWidth()-this.embeddedComponentIndent,resizeBarSize:4,members:[_3],removeOnHideField:true});this.addEmbeddedComponent(_4,_1,this.data.indexOf(_1));var _2=isc.DataSource.getDataSource(_3.dataSource);_3.fetchRelatedData(_1,this.getRecordDataSource(_1));this.$32o=_1;this.$57o=_4},isc.A.getRecordDetailGrid=function isc_ListGrid_getRecordDetailGrid(_1,_2){_2=isc.DataSource.getDataSource(_2);var _3=isc.ListGrid.create(this.recordDetailGridProperties,{autoDraw:false,dataSource:_2,showResizeBar:true,showCellContextMenus:this.showCellContextMenus},this.nestedGridDefaults);return _3},isc.A.chartData=function isc_ListGrid_chartData(_1,_2,_3,_4,_5){this.checkChartConstructor();if(_1)_1=this.getField(_1);if(_2)_2=this.map("getField",_2);else{_2=this.fields.duplicate();_2.remove(_1)}
if(!_3){if(!isc.ResultSet||!isc.isA.ResultSet(this.data)){_3=this.data}else if(this.data.allMatchingRowsCached()){_3=this.data.getAllRows()}else{var _6=this.getVisibleRows();_3=this.data.getRange(_6[0],_6[1])}}
var _7,_8;if(_2.length>=1){for(var i=0;i<_2.length;i++){var _10=_2[i];_2[i]={id:_10.name,title:this.htmlUnescapeExportFieldValue(_10.title),type:_10.type}}
_8={id:"columnFacet",title:this.valueTitle,values:_2,inlinedValues:true}}
if(_3.length>=1&&_1){_7={id:_1.name}}
var _11=[_8,_7];_11.removeAll([null]);if(_5)_11.reverse();var _12=isc.addProperties({data:_3,facets:_11,title:this.chartTitle,chartType:this.chartType},_4);if(_7&&!_8)_12.valueProperty=_2[0].name;return this.createAutoChild("chart",_12,this.chartConstructor)},isc.A.checkChartConstructor=function isc_ListGrid_checkChartConstructor(){var _1=this.chartConstructor;if(isc.isA.String(_1)){_1=window.isc[this.chartConstructor]}
if(_1==null){this.logWarn('Component chartConstructor attribute set to "'+this.chartConstructor+'" - this cannot be resolved to a valid SmartClient class. Verify that all appropriate modules are loaded and that this class exists.')}else if(_1.invalidClass){var _2='Component chartConstructor attribute set to "'+this.chartConstructor+'". ';if(_1.invalidErrorMessage)_2+=_1.invalidErrorMessage;else _2+=".This class is invalid - verify all appropriate modules are loaded.";this.logWarn(_2)}},isc.A.chartRow=function isc_ListGrid_chartRow(_1,_2,_3){return this.chartData(null,_2,[this.getRecord(_1)],_3)},isc.A.chartColumn=function isc_ListGrid_chartColumn(_1,_2,_3){return this.chartData(_2,[_1],null,_3)},isc.A.regroup=function isc_ListGrid_regroup(_1){var _2=this.$1097,_3;var _4=this.$141w||this.isGrouped,_5=_4&&(this.$141v||this.getGroupByFields()),_6=false;if(!_4||_5==null||_5.length==0||this.inhibitRegroup||!(this.originalData||this.data)||!this.data)
{_3=null}else{if(this.data.isGroupedOutput&&this.originalData){_3=this.originalData}else{_3=this.data;_6=true}}
if(_3!=null){var _7=_3.getLength();if(isc.ResultSet&&isc.isA.ResultSet(_3)&&(!_3.lengthIsKnown()||(_7<=this.groupByMaxRecords&&!_3.rangeIsLoaded(0,_7-1))))
{_3.getRange(0,_7);this.$122o(true,false,true,false,false,_5);this.logInfo("postponing grouping until data is loaded","grouping");if(_6){this.originalData=_3}
this.$50w=true;return}else if(_7>this.groupByMaxRecords){this.logInfo("Results too numerous - disabling grouping.","grouping");if(_2){delete this.$1097;isc.Timer.clear(this.$1099);delete this.$1099;isc.clearPrompt();this.setGroupByFieldSummaries(this.$112a);this.setShowGroupSummary(this.$112b)}
this.clearGroupBy();if(_6){this.originalData=_3}
return}}else{if(_2){delete this.$1097;isc.Timer.clear(this.$1099);delete this.$1099;isc.clearPrompt();this.setGroupByFieldSummaries(this.$112a);this.setShowGroupSummary(this.$112b)}
return}
this.$122o(false,false,true,false,false);var _8=this.$122q;delete this.$50w;var _9=(_3.getLength()>this.groupByAsyncThreshold);if(_2&&_9){isc.Timer.clear(this.$1099);delete this.$1099}else if(_2&&!_9){delete this.$1097;isc.Timer.clear(this.$1099);delete this.$1099;isc.clearPrompt();this.setGroupByFieldSummaries(this.$112a);this.setShowGroupSummary(this.$112b)}else if(!_2&&_9){if(this.showAsynchGroupingPrompt!=false)isc.showPrompt(this.asynchGroupingPrompt);this.$1097=true;this.$112b=this.showGroupSummary;this.$112a=this.groupByFieldSummaries}
var _10=this.groupByField,_11=null;if(_8!=null){_10=[];_11=[];for(var i=0;i<_8.length;i++){if(this.isCheckboxField(_8[i]))continue;var _13=_8[i].property,_14,_15;if(_13){_14=_8[i].property;_15=this.getUnderlyingField(_14)}else{_14=_8[i];_15=this.getUnderlyingField(_14)}
if(_15&&_15.displayField!=null&&_15.optionDataSource==null){var _16=this.getField(_15.displayField);if(_16){_15=_16;_14=_15.displayField}}
_10.add(_14);var _17=(_13?_8[i].grouping:null);if(_15){if(!_13){_17=_15.groupingMode}
var _18=_15.groupingModes;if(_17==null&&_18!=null){var _19=_15.defaultGroupingMode;if(isc.isAn.Array(_18)){if(_18.contains(_19))_17=_19;else if(_18.length>0)_17=_18[0]}else if(isc.isAn.Object(_18)){if(_18[_19]!=null)_17=_19}}}
_11.push(_17)}}
var _20=(_10!=null&&!isc.isAn.Array(_10)?[_10]:_10),_17=null;if(_20!=null){for(var i=0;i<_20.length;i++){var _15=this.getUnderlyingField(_20[i]),_21=((_11!=null&&_11[i]!=null)?_11[i]:_15.groupingMode);if(_21&&_15.name==_10){_17=_21}}}
var _22={applyFormulaAfterSummary:this.applyFormulaAfterSummary,emptyCellValue:this.emptyCellValue,gridSummaryRecordProperty:this.gridSummaryRecordProperty,groupByFieldSummaries:(isc.isAn.Array(this.groupByFieldSummaries)?this.groupByFieldSummaries.duplicate():null),groupNodeBaseStyle:this.groupNodeBaseStyle,groupNodeStyle:this.groupNodeStyle,groupStartOpen:(isc.isAn.Array(this.groupStartOpen)?this.groupStartOpen.duplicate():this.groupStartOpen),groupSummaryRecordProperty:this.groupSummaryRecordProperty,includeInSummaryProperty:this.includeInSummaryProperty,nullGroupTitle:this.nullGroupTitle,recordBaseStyleProperty:this.recordBaseStyleProperty,recordCustomStyleProperty:this.recordCustomStyleProperty,recordEditProperty:this.recordEditProperty,showCollapsedGroupSummary:this.showCollapsedGroupSummary,showGroupSummary:this.showGroupSummary,showGroupSummaryInHeader:this.showGroupSummaryInHeader,singleCellValueProperty:this.singleCellValueProperty,groupByField:_10,groupByFields:_20,groupByFieldGroupingModes:_11,groupingMode:_17,currData:_3,setOriginalDataToCurrData:_6,sortSpecifiers:(isc.isAn.Array(this.$73p)?this.$73p.duplicate():null)};var _23=new Array(this.fields.getLength()),_24=new Array(this.fields.getLength());for(var i=_23.length;i--;){var _15=this.fields[i];_23[i]=_15&&_15.userFormula!=null;_24[i]=_15&&_15.userSummary!=null}
_22.fieldsHaveUserFormulas=_23;_22.fieldsHaveUserSummaries=_24;var _25=new Array(_20.length),_26=new Array(_20.length),_27=new Array(_20.length),_28=new Array(_20.length);for(var i=_20.length;i--;){var _15=_20[i];if(_15){_25[i]=isc.clone(_15.userFormula);_26[i]=isc.clone(_15.userSummary);_27[i]=_15.displayField;var _29=_15.valueMap;if(isc.isAn.Array(_29)){_28[i]=_29.duplicate()}else{_28[i]=isc.shallowClone(_29)}}}
_22.groupByFieldUserFormulas=_25;_22.groupByFieldUserSummaries=_26;_22.groupByFieldDisplayFields=_27;_22.groupByFieldValueMaps=_28;this.$110b(_9,_22,_1)},isc.A.$110b=function isc_ListGrid__regroupRestoreOpenFolders(_1,_2,_3){var _4;if(this.groupTree){if(!_3&&this.canCollapseGroup&&this.retainOpenStateOnRegroup&&(this.groupTree.getLength()>0)&&(this.groupTree.$684==_2.groupByField))
{if(this.groupTree.$124z==_2.groupingMode){_4=[];var _5=this.groupTree,_6=_5.getRoot();if(_5.isOpen(_6)&&_5.isLoaded(_6)){var _7=[[_5.getFolders(_6)],[0]];if(_1){this.$1099=this.delayCall("$110c",[_1,_2,_7,_5,_4],0)}else{this.$110c(_1,_2,_7,_5,_4)}
return}}}}
this.$110d(_1,_2,_2.currData,_4)},isc.A.$110c=function isc_ListGrid__regroupAddNodeToOpenState(_1,_2,_3,_4,_5){var _6=_3[0],_7=_3[1],_8=_6.length,_9=0;while(_8>0){var _10=_6.pop(),i=_7.pop();--_8;for(var _12=_10.length;i<_12;++i,++_9){if(_1&&_9>this.groupByAsyncThreshold){_6.push(_10);_7.push(i);this.$1099=this.delayCall("$110c",[_1,_2,_3,_4,_5],0);return}
var _13=_10[i];if(_4.isOpen(_13)&&_4.isLoaded(_13)){var _14={};_14[_13.groupName]=_13.groupValue;_5.add(_14);var _15=_4.getFolders(_13);if(_15!=null){_6.push(_10);_7.push(i+1);++_8;_10=_15;i=-1;_12=_10.length}}}}
if(_1){this.$1099=this.delayCall("$110d",[_1,_2,_2.currData,_5],0)}else{this.$110d(_1,_2,_2.currData,_5)}},isc.A.$110d=function isc_ListGrid__regroupCreateGroupTree(_1,_2,_3,_4){var _5=this.createAutoChild("groupTree",{idField:this.groupIdField,parentIdField:this.groupParentIdField,titleProperty:"groupValue",childrenProperty:"groupMembers",parentProperty:"_groupTree_"+this.ID,showRoot:false,isGroupedOutput:true,alwaysSortGroupHeaders:(_2.showGroupSummary&&_2.showGroupSummaryInHeader),$684:_2.groupByField,$141v:_2.groupByFields,$124z:_2.groupingMode,separateFolders:true,$112c:"$112c",$117k:"$117k",$73p:_2.sortSpecifiers,getCriteria:function(){var _6=this.creator.originalData;if(_6&&_6.getCriteria)return _6.getCriteria();return null},getRecordsInGroup:function(_33){var _7=this.$141v,_8=_33.groupName,_9=this.getChildren(_33),_10=[];if(_8==_7[_7.length-1]){if(!isc.isA.ResultSet(_9)||_9.lengthIsKnown()){for(var i=_9.getLength();i--;){var _12=_9.getCachedRow(i);if(_12!=null&&_12[this.$112c]!==true){_10.add(_12)}}}}else if(_9!=null){if(!isc.isA.ResultSet(_9)||_9.lengthIsKnown()){for(var i=0,_13=_9.getLength();i<_13;++i){var _12=_9.getCachedRow(i);if(_12!=null){var _14=this.getRecordsInGroup(_12);if(_14!=null&&_14.length>0){_10.addList(_14)}}}}}
return _10},combineWithEditVals:function(_9){var _15=this.creator,_16=[];_16.addList(_9);var _17=_15.getAllEditRows();if(_17.length>0){var _18;for(var i=0;i<_16.length;i++){var _19=_15.getEditSession(_16[i]);if(_19){var _20=isc.addProperties({},_16[i],_19.$31x);_16[i]=_20}}}
return _16},primaryKeyFields:this.dataSource?this.getDataSource().getPrimaryKeyFieldNames():null,indexOf:function(_36){var _21=this.Super("indexOf",arguments);if(_21==-1&&this.creator.getDataSource()!=null){var _22=this.$27l();_21=_22.findByKeys(_36,this.creator.getDataSource())}
return _21},$110i:function(_33,_36,_37,_38){if(!_33)_33=this.root;var _23=function(_39,i){if(i==null){i=0}
for(var j=0,_13=_39.length;j<_37&&i<_13;++i,++j){if(!this.isOpen(_39[i])){this.changeDataVisibility(_39[i],true)}}
if(i<_13){_23.apply(this,[_39,i])}else{this.changeDataVisibility(_33,true);_36.apply(this,[])}};this.$110j(_33,isc.Tree.FOLDERS_ONLY,null,_23,_37,_38)},$110j:function(_33,_36,_37,_38,_39,_40,_41,_42){var _25,_26;if(_41==null){if(!_33)_33=this.root;_41=[];if(!_37)_37=function(){return true};if(this.isLeaf(_33)){_38.apply(this,[_41]);return}
var _9=this.getChildren(_33);if(!_9){_38.apply(this,[_41]);return}
_25=[_9];_26=[0];_42={childrenStack:_25,indexStack:_26}}else{_25=_42.childrenStack;_26=_42.indexStack}
var _27=_25.length,_28=0;while(_27>0){var _9=_25.pop(),i=_26.pop();--_27;if(!isc.isA.ResultSet(_9)||_9.lengthIsKnown()){for(var _13=_9.getLength();i<_13;++i,++_28){if(_28>_39){_25.push(_9);_26.push(i);this.creator[_40]=this.delayCall("$110j",[_33,_36,_37,_38,_39,_40,_41,_42],0);return}
var _12=_9.getCachedRow(i);if(_12!=null){if(this.isFolder(_12)){if(_36!=isc.Tree.LEAVES_ONLY&&_37(_12))
_41[_41.length]=_12;var _29=this.getChildren(_12);if(_29){_25.push(_9);_26.push(i+1);++_27;_9=_29;i=-1;_13=_9.getLength()}}else{if(_36!=isc.Tree.FOLDERS_ONLY&&_37(_12)){_41[_41.length]=_12}}}}}}
_38.apply(this,[_41])},addBeforeSummaries:function(_36,_37){var _9=this.getChildren(_37);var _30=_9?_9.length:null;while(_30>0&&_9&&_9[_30-1][this.$112c])
{_30--}
this.add(_36,_37,_30)},$134d:function(_36,_37,_38){if(!isc.isAn.Array(_36))_36=[_36];for(var i=0;i<_36.length;i++){var _31=_36[i];if(!_31.$52e)_31=this.getParent(_31);if(!_31||!_31.$52e)continue;var _32=this.getParents(_31);_32.unshift(_31);for(var j=_32.length-2;j>=0;j--){var _33=_32[j];if(_33.$134e==null){_33.$134e=true;if(_37){var _34=_32[j+1];if(!_34.$134f)_34.$134f=[];_34.$134f.add(_33)}else if(_38){_38.add(_33)}}}}
if(_38)return _38},$134g:function(_33){var _35=_33.$134f;if(!_35)return[];delete _33.$134f;return _35}},isc.Tree);this.logInfo("Adding "+_3.getLength()+" records to groups","grouping");if(_1){this.$1099=this.delayCall("$110e",[_1,_2,_5,_3,0,_3.getLength(),_4],0)}else{this.$110e(_1,_2,_5,_3,0,_3.getLength(),_4)}});isc.evalBoundary;isc.B.push(isc.A.$110e=function isc_ListGrid__regroupAddRecordsToGroup(_1,_2,_3,_4,_5,_6,_7){var _8=_6;if(_1){_6=Math.min(_5+this.groupByAsyncThreshold,_8)}
var _9=(isc.ResultSet&&isc.isA.ResultSet(_4)?isc.ResultSet.getLoadingMarker():null);for(var i=_5;i<_6;++i){var _11=_4.get(i);if(_11!=null&&_11!=_9){this.$1417(_2.groupByFields,_3,_2.emptyCellValue,_2.groupSummaryRecordProperty,_2.gridSummaryRecordProperty,_2.fieldsHaveUserFormulas,_2.fieldsHaveUserSummaries,_2.applyFormulaAfterSummary,_2.groupByFieldUserFormulas,_2.groupByFieldUserSummaries,_2.groupByFieldDisplayFields,_2.groupByFieldValueMaps,_2.nullGroupTitle,_2.showGroupSummary,_2.showGroupSummaryInHeader,_2.recordBaseStyleProperty,_2.groupNodeBaseStyle,_2.recordCustomStyleProperty,_2.groupNodeStyle,_2.recordEditProperty,_2.singleCellValueProperty,_3,_11,false,_7)}}
if(_1&&_6<_8){this.$1099=this.delayCall("$110e",[_1,_2,_3,_4,_6,_8,_7],0)}else if(_1){this.$1099=this.delayCall("$112d",[_1,_2,_3],0)}else{this.$112d(_1,_2,_3)}},isc.A.$112d=function isc_ListGrid__regroupAddSummaryChildren(_1,_2,_3){this.$1418(_2.showGroupSummaryInHeader,_2.groupByFields,_2.showCollapsedGroupSummary,_2.includeInSummaryProperty,_2.applyFormulaAfterSummary,_2.groupSummaryRecordProperty,_2.fieldsHaveUserFormulas,_3,null,_2.showGroupSummary,[],_2.groupByFieldSummaries);if(_1){this.$1099=this.delayCall("$110z",[_1,_2,_3],0)}else{this.$110z(_1,_2,_3)}},isc.A.$112e=function isc_ListGrid__updateSummaryRows(_1,_2,_3,_4,_5,_6,_7,_8){return this.$1418(this.showGroupSummaryInHeader,this.getGroupByFields(),this.showCollapsedGroupSummary,this.includeInSummaryProperty,this.applyFormulaAfterSummary,this.groupSummaryRecordProperty,null,_1,_2,_3,_4,_5,_6,_7,_8)},isc.A.$1418=function isc_ListGrid___updateSummaryRows(_1,_2,_3,_4,_5,_6,_7,_8,_9,_10,_11,_12,_13,_14,_15){if(_1){return}
if(!isc.isAn.Array(_11)){_11=_2}
if(!isc.isAn.Array(_12)){_12=_2}
var _16,_17,_18;if(!(_9||_10)){return}else if(_9&&!_10){_17=_11}else if(!_9&&_10){_16=_12}else{_17=[];if(_12){for(var i=_11.length;i--;){var _20=_11[i];if(!_12.contains(_20)){_17.push(_20)}}}
_16=[];_18=[];for(var i=_12.length;i--;){var _20=_12[i];if(!_11.contains(_20)){_16.push(_20)}else if(_13){_18.push(_20)}}}
if(!(_16&&_16.length>0)&&!(_17&&_17.length>0)&&!(_18&&_18.length>0))
{return}
var _21=_3,_22=_14!=null&&!_21;if(_14!=null)_8.$134d(_14,_22);var _23=_8.getRoot(),_24=null;if(_23&&_8.isFolder(_23)){_24=_22?_8.$134g(_23):_8.getChildren(_23)}
if(!(_23&&_24&&!_24.isEmpty())){return}
var _25=_8.$112c,_26=_8.$117k,_27=[_23],_28=[_24],_29=[0];var _30=false;_8.$1266=true;while(_29.length>0){var _31=_27.pop(),_32=_28.pop(),i=_29.pop();if(isc.isA.ResultSet(_32)&&!_32.lengthIsKnown())continue;var _33=_32.getLength();for(;i<_33;++i){var _34=_32.getCachedRow(i);if(!_34){continue}
if(_14!=null){if(_34.$134e)delete _34.$134e;else continue}
var _35=_34.groupName,_36=_16&&_16.contains(_35),_37=_17&&_17.contains(_35),_38=_8.getChildren(_34);if(_18&&!_36&&!_37){_36=_18.contains(_35);_37=_18.contains(_35)}
if(_37){if(!_21){if(!isc.isA.ResultSet(_38)||_38.lengthIsKnown()){var _39=[];for(var j=_38.getLength();j-->0;){var _41=_38.getCachedRow(j);if(_41[_25]===true){_39.push(_41)}else{break}}
_30|=_8.removeList(_39)}}else{var _42=[],j=0;for(;;){var s=_32.getCachedRow(i+j+1);if(s&&s[_25]==true){_42.add(s);++j}else{break}}
_30|=_8.removeList(_42);_33-=_42.length}}
if(_36){var _39=_8.getRecordsInGroup(_34);_39=_8.combineWithEditVals(_39);var _44=this.$1412(_4,_5,_6,_7,_39,_34,_15);if(_44!=null){if(!isc.isAn.Array(_44)){_44[_25]=true;if(!_21){_30|=_8.add(_44,_34)!=null}else{_30|=_8.add(_44,_31,i)!=null;i+=1;_33+=1}}else{for(var k=_44.length;k--;){_44[k][_25]=true;if(_21){_44[k][_26]=_34}}
if(!_21){_30|=_8.addList(_44,_34)!=null}else{_30|=_8.addList(_44,_31,i+1)!=null;i+=_44.length;_33+=_44.length}}}}
if(_22)_38=_8.$134g(_34);var _46=(_38&&!_38.isEmpty()&&_8.isFolder(_38.first()));if(_46){_27.push(_31);_28.push(_32);_29.push(i+1);_31=_34;_32=_38;_33=_32.getLength();i=-1}}}
delete _8.$1266;if(_30){_8.$736(true);_8.dataChanged()}},isc.A.$110z=function isc_ListGrid__regroupProcessGroupHeaderNode(_1,_2,_3,_4){if(_4==null){_4={i:0,children:_3.getChildren(_3.getRoot()),groupsVisited:0,groupFields:_2.groupByFields,indexStack:[],childrenStack:[]}}
var i=_4.i,_6=_4.children||[],_7=_4.groupsVisited==null?0:_4.groupsVisited,_8=_4.groupFields||[],_9=_4.indexStack||[],_10=_4.childrenStack||[],_11=0;if(_8.length>0){for(;;){if(!isc.isA.ResultSet(_6)||_6.lengthIsKnown()){for(;i<_6.getLength();++i,++_11){if(_1&&_11>this.groupByAsyncThreshold){_4.i=i;_4.children=_6;_4.groupsVisited=_7;this.$1099=this.delayCall("$110z",[_1,_2,_3,_4],0);return}
var _12=_6.getCachedRow(i);if(_12!=null){var _13=this.getUnderlyingField(_8[_7]),_14=this.$1419(_3,_2.groupByFields,_2.showGroupSummary,_2.showGroupSummaryInHeader,_2.singleCellValueProperty,_12,_13);if(!this.$141u(_2.showGroupSummary,_2.showGroupSummaryInHeader))
{_12.groupTitle=_14}else _12[_2.singleCellValueProperty]=_14;if(_2.showGroupSummary&&_2.showGroupSummaryInHeader){_11+=this.$142a(_2.groupByFieldSummaries,_2.includeInSummaryProperty,_2.applyFormulaAfterSummary,_2.groupSummaryRecordProperty,_2.fieldsHaveUserFormulas,_3,_12)}
if(_7+1<_8.length){++_7;_9.push(i+1);_10.push(_6);i=-1;_6=_3.getChildren(_12)||[]}}}}
if(_9.length>0){--_7;i=_9.pop();_6=_10.pop()}else{break}}}
if(_1){this.$1099=this.delayCall("$110k",[_1,_2,_3,_2.restoreOpenFolders],0)}else{this.$110k(_1,_2,_3,_2.restoreOpenFolders)}},isc.A.$110k=function isc_ListGrid__regroupOpenInitialGroups(_1,_2,_3,_4){if(!_4){if(!_1){this.$142b(_2.groupStartOpen,_3)}else{var _5=function(){this.creator.$110v(_1,_2,_2.currData,_2.setOriginalDataToCurrData,_3)};var _6=250;if(_2.groupStartOpen=="all"){_3.$110i(null,_5,_6,"$1099");return}else if(_2.groupStartOpen=="first"){_3.$110i(_3.getChildren(_3.getRoot()).first(),_5,_6,"$1099");return}else if(isc.isAn.Array(_2.groupStartOpen)){var _7=_3.getChildren(_3.getRoot());for(var i=0;i<_2.groupStartOpen.length;i++){var _9=_2.groupStartOpen[i];var _10=_7.find("groupValue",_9);if(_10)_3.openFolder(_10)}}}}
if(_1){this.$1099=this.delayCall("$110v",[_1,_2,_2.currData,_2.setOriginalDataToCurrData,_3],0)}else{this.$110v(_1,_2,_2.currData,_2.setOriginalDataToCurrData,_3)}},isc.A.$110v=function isc_ListGrid__regroupCreateSelectionModel(_1,_2,_3,_4,_5){if(_4){this.originalData=_3}
if(this.groupTree){this.ignore(this.groupTree,"changeDataVisibility");this.groupTree.destroy()}
this.groupTree=_5;this.data=_5;this.$606(this.data);this.createSelectionModel();if(_1){this.$1099=this.delayCall("$110w",[_1,_2],0)}else{this.$110g(_1,_2)}},isc.A.$110w=function isc_ListGrid__regroupGetGroupTreeLength(_1,_2){var _3=4000;this.data.$110s(this,"$1099",_3,function(_4){this.$1099=this.delayCall("$110x",[_1,_2],0)})},isc.A.$110x=function isc_ListGrid__regroupCacheSelectionModel(_1,_2){var _3=function(){this.$1099=this.delayCall("$110g",[_1,_2],0)};if(isc.isA.Selection(this.selection)){var _4=4000;this.selection.$110t(this,"$1099",_4,_3)}else if(isc.isA.CellSelection(this.selection)){this.selection.getSelectedCells();this.$1099=this.delayCall("$110g",[_1,_2],0)}},isc.A.$110g=function isc_ListGrid__regroupFinish(_1,_2){var _3=_2.groupByFields;this.groupByField=_3;if(_2.groupByFieldGroupingModes!=null){for(var i=_3.length;i--;){var _5=_2.groupByFieldGroupingModes[i];if(_5!=null){_3[i].groupingMode=_5}}}
this.isGrouped=true;this.handleGroupStateChanged();if(this.$75p){this.setSelectedState(this.$75p);delete this.$75p}
if(this.fields.find("$84g",true)!=null){this.updateFieldWidthsForAutoFitValue("regroup with group title column showing")}
this.markForRedraw("regroup");if(_1){delete this.$1097;delete this.$1099;isc.clearPrompt();this.setGroupByFieldSummaries(this.$112a);this.setShowGroupSummary(this.$112b)}
var _6=this.$122q;if(this.groupByComplete!=null&&_6!==undefined){this.groupByComplete(_6)}},isc.A.$607=function isc_ListGrid__incrementalRegroup(_1,_2,_3,_4){this.$34v=true;var _5=this.data.getParents(_2),_6=this.data.remove(_2),_7=null;for(var i=0;i<_5.length-1;i++){var _9=_5[i],_10=_9.groupMembers,_11=this.showGroupSummary&&!this.showCollapsedGroupSummary;if(_11?!_10.find("isGroupSummary",null):_10.getLength()==0)
{this.data.remove(_9)}else{var _12=(this.completeFields||this.fields).find(this.fieldIdProperty,_9);if(this.singleCellGroupHeaders()){_9[this.singleCellValueProperty]=this.getGroupTitle(_9,_12)}else{_9.groupTitle=this.getGroupTitle(_9,_12)}
if(!_7)_7=_9}}
if(!(_2&&!_6)&&(_1||_4)){this.$52u(this.groupTree,_1||_4,true,true)}
if(this.showGroupSummary){var _13=[_1||_4];if(_7)_13.add(_7);this.refreshGroupSummary(_13)}},isc.A.$142b=function isc_ListGrid__openInitialGroups(_1,_2){if(_1=="all"){_2.openAll()}else if(_1=="first"){_2.openAll(_2.getChildren(_2.getRoot()).first())}else if(isc.isAn.Array(_1)){var _3=_2.getChildren(_2.getRoot());for(var i=0;i<_1.length;i++){var _5=_1[i];var _6=_3.find("groupValue",_5);if(_6)_2.openFolder(_6)}}},isc.A.groupBy=function isc_ListGrid_groupBy(_1){var _2=[];if(isc.isAn.Array(_1)){_2=_1}else{for(var i=0;i<arguments.length;i++){_2[i]=arguments[i]}}
for(var i=0;i<_2.length;i++){if(_2[i]!=null&&!this.getUnderlyingField(_2[i])){this.logWarn("groupBy() passed field:"+_2[i]+" - this is not a valid field within this grid - ignoring","grouping");return}}
if(_2.length>0&&_2[0]==null){_2=[]}
if(this.handleGroupBy!=null&&this.handleGroupBy(_2)==false){return}
if(_2.length==0){this.clearGroupBy();this.handleGroupStateChanged();if(this.groupByComplete!=null){this.groupByComplete(_2)}
return}
var _4=[];for(var i=0;i<_2.length;i++){if(this.isCheckboxField(_2[i]))continue;var _5=(_2[i].property||_2[i]),_6=this.getUnderlyingField(_5);if(_6&&_6.displayField!=null&&_6.optionDataSource==null&&this.getField(_6.displayField))
{_5=_6.displayField}
_4.add(_5)}
this.logInfo("groupBy: "+_4,"grouping");var _7=this.isGrouped;this.isGrouped=true;if(this.showGroupSummary&&this.showGroupSummaryInHeader&&this.getGroupTitleField()==null&&this.showGroupTitleColumn)
{if(this.groupTitleColumn==null){this.groupTitleColumn=this.getGroupTitleColumn()}
if(this.fields.indexOf(this.groupTitleColumn)==-1){this.addField(this.groupTitleColumn,this.getGroupTitleColumnPosition())}}
this.isGrouped=_7;this.$122o(true,true,false,false,false,_2,_4);this.dataChanged()},isc.A.clearGroupBy=function isc_ListGrid_clearGroupBy(){this.$122o(false,false,false,true,false);this.logInfo("ungrouping","grouping");if(this.$1097){delete this.$1097;isc.Timer.clear(this.$1099);delete this.$1099;isc.clearPrompt()}
var _1=this.getGroupByFields();if(_1!=null)for(var i=0;i<_1.length;i++){var _3=this.getUnderlyingField(_1[i]);if(_3)_3.groupingMode=null}
this.isGrouped=false;if(this.originalData){var _4=this.preserveEditsOnSetData;this.preserveEditsOnSetData=true;this.setData(this.originalData);this.preserveEditsOnSetData=_4;delete this.originalData;delete this.groupTree;if(this.groupByField)this.groupByField=null}
if(this.groupTitleColumn!=null){var _5=this.completeFields||this.fields,_6=_5.indexOf(this.groupTitleColumn);if(_6!=-1){var _7=[];for(var i=0;i<_5.length;i++){if(i==_6)continue;_7[_7.length]=_5[i]}
this.setFields(_7)}}},isc.A.getGroupTitle=function isc_ListGrid_getGroupTitle(_1,_2){return this.$1419(this.data,this.getGroupByFields(),this.showGroupSummary,this.showGroupSummaryInHeader,this.singleCellValueProperty,_1,_2)},isc.A.$1419=function isc_ListGrid__getGroupTitle(_1,_2,_3,_4,_5,_6,_7){if(!_7){var _8=_1.getLevel(_6)-1,_7=this.getUnderlyingField(_2[_8])}
if(_7==null){return}
var _9;if(_7.getGroupTitle){return _7.getGroupTitle(_6.groupValue,_6,_7,_7.name,this)}
else if(!_7.getGroupValue&&_7.$62&&_7.$62.getGroupTitle){return _7.$62.getGroupTitle(_6.groupValue,_6,_7,_7.name,this)}else if(!this.$141u(_3,_4)){_9=_6.groupTitle}else{_9=_6[_5];if(_7.valueMap){_9=this.resolveValueMap(_9,_7.valueMap)}}
if(_7.escapeHTML&&!_6.$1496&&isc.isA.String(_9)&&_9!=this.$54t)
{_9=_9.asHTML();_6.$1496=true}
return _9},isc.A.getGroupNodeHTML=function isc_ListGrid_getGroupNodeHTML(_1,_2){var _3=this.frozenBody===_2;var _4=this.frozenFields&&this.frozenFields.length>0;if(_4&&!_3&&this.singleCellGroupHeaders()){return this.emptyCellValue}
var _5=this.data.isOpen(_1),_6=_5?"opened":"closed",_7=isc.Img.urlForState(this.groupIcon,null,null,_6),_8=isc.Canvas.spacerHTML(this.groupIconPadding,1),_9=isc.Canvas.spacerHTML((this.data.getLevel(_1)-1)*this.groupIndentSize+this.groupLeadingIndent,1),_10=this.getGroupTitle(_1);var _11={src:_7,width:this.groupIconSize,height:this.groupIconSize,align:"middle"},_12=this.imgHTML(_11,null,null,null,null,null,null,isc.Canvas.$123e);var _13=(this.canCollapseGroup?_9+_12:_9)+_8+_10;return _13},isc.A.$52u=function isc_ListGrid__addRecordToGroup(_1,_2,_3,_4){return this.$1417(this.getGroupByFields(),this.data,this.emptyCellValue,this.groupSummaryRecordProperty,this.gridSummaryRecordProperty,null,null,this.applyFormulaAfterSummary,null,null,null,null,this.nullGroupTitle,this.showGroupSummary,this.showGroupSummaryInHeader,this.recordBaseStyleProperty,this.groupNodeBaseStyle,this.recordCustomStyleProperty,this.groupNodeStyle,this.recordEditProperty,this.singleCellValueProperty,_1,_2,_3,_4)},isc.A.$1417=function isc_ListGrid___addRecordToGroup(_1,_2,_3,_4,_5,_6,_7,_8,_9,_10,_11,_12,_13,_14,_15,_16,_17,_18,_19,_20,_21,_22,_23,_24,_25){var _26=this.$141u(_14,_15),_27=_22.getRoot(),_28;for(var i=0;i<_1.length;i++){var _30=_1[i],_31=this.getUnderlyingField(_30),_32=_2.indexOf(_23),_33=(_12==null?_31.valueMap:_12[i]);var _34=_31.userFormula,_35=(_9==null?_34:_9[i]),_36=_31.userSummary,_37=(_10==null?_36:_10[i]),_38=this.$141x(_3,_4,_5,_6,_7,_2,_8,(_35!=null),_35,(_37!=null),_37,_23,_32,_30,true);if(_31.getGroupValue){_38=_31.getGroupValue(_38,_23,_31,_30,this)}else if(_35){_31.userFormula=_35;_38=this.getFormulaFieldValue(_31,_23);_31.userFormula=_34}else if(_37){_31.userSummary=_37;_38=this.getSummaryFieldValue(_31,_23);_31.userSummary=_36}else{var _39=(_11==null?_31.displayField:_11[i]);if(_39){var _40=this.$1416(_31,_33,_39,_38,_23);if(_40){_38=_40}}else if(_31.$62&&_31.$62.getGroupValue){_38=_31.$62.getGroupValue(_38,_23,_31,_30,this)}}
if(_33&&_33[_38]){_38=_33[_38]}
if(_38==null||isc.isAn.emptyString(_38)){_38=_13}
var _41=_22.getChildren(_27);if(_41==null)_28=null;else _28=_41.find('groupValue',_38,_31.type=="datetime"?Array.DATETIME_VALUES:null);if(!_28){_28={groupName:_30,groupValue:_38,$52e:true,canDrag:false,canSelect:false};if(_26)_28.singleCellValue=_38;else _28.groupTitle=_38;_28[_30]=_38;_28[_16]=_17;_28[_18]=_19;_28[_20]=false
if(_25!=null){_28[_22.openProperty]=isc.isA.List(_25)?_25.find(_30,_38):!!_25}
if(_14)_22.addBeforeSummaries(_28,_27);else _22.add(_28,_27)}
_27=_28}
if(_14)_22.addBeforeSummaries(_23,_27);else _22.add(_23,_27);if(_24){var _42=_22.getParents(_23);for(var i=_42.length-2,j=0;i>=0;i--,j++){var _44=this.$1419(_2,_1,_14,_15,_21,_42[i]);if(!_26)_42[i].groupTitle=_44;else _42[i][_21]=_44}}},isc.A.isGroupNode=function isc_ListGrid_isGroupNode(_1){if(_1==null)return false;return!!_1.$52e},isc.A.applyGroupSummaryToHeader=function isc_ListGrid_applyGroupSummaryToHeader(_1,_2,_3){return this.$142a(this.groupByFieldSummaries,this.includeInSummaryProperty,this.applyFormulaAfterSummary,this.groupSummaryRecordProperty,null,_1,_2,_3)},isc.A.$142a=function isc_ListGrid__applyGroupSummaryToHeader(_1,_2,_3,_4,_5,_6,_7,_8){var _9=_7.groupName;if(_1!=null&&!_1.contains(_9)){return}
var _10=_6.combineWithEditVals(_6.getRecordsInGroup(_7)),_11=this.$1412(_2,_3,_4,_5,_10,_7,_8);if(isc.isAn.Array(_11))_11=_11[0];if(!_11)return 0;var _8=this.completeFields||this.fields;for(var i=0;i<_8.length;i++){var _13=_8[i];var _14=this.getGridSummaryFunction(_13);if(_14&&isc.isAn.Array(_14))_14=_14[0];if(_14=="count"){var _15=_7[this.recordApplyPluralTitleProperty]||[];_15.add(_13.name);_7[this.recordApplyPluralTitleProperty]=_15}
var _16=_8[i].name;if(_16=="groupTitle")continue;_7[_16]=_11[_16]}
_7[_4]=true;return _10.length},isc.A.setShowGroupSummaryInHeader=function isc_ListGrid_setShowGroupSummaryInHeader(_1){if(this.showGroupSummaryInHeader==_1)return;this.showGroupSummaryInHeader=_1;var _2=this.getGroupByFields();this.ungroup();if(_2!=null&&_2.length>0){this.groupBy(_2)}},isc.A.setShowCollapsedGroupSummary=function isc_ListGrid_setShowCollapsedGroupSummary(_1){if(this.showCollapsedGroupSummary==_1)return;this.showCollapsedGroupSummary=_1;var _2=this.getGroupByFields();this.ungroup();if(_2!=null&&_2.length>0){this.groupBy(_2)}},isc.A.ungroup=function isc_ListGrid_ungroup(){this.$75p=this.getSelectedState(true);this.groupBy(null)},isc.A.setHeaderSpans=function isc_ListGrid_setHeaderSpans(_1){this.headerSpans=_1;if(this.completeFields)this.setFields(this.completeFields);this.layoutChildren("headerSpans changed")},isc.A.setHeaderSpanTitle=function isc_ListGrid_setHeaderSpanTitle(_1,_2){var _3=this.getHeaderSpanConfig(_1);if(!_3){this.logWarn("setHeaderSpanTitle() - unable to locate span named: "+_1+this.getStackTrace());return}
_3.title=_2;if(_3.liveObject&&_3.headerTitle==null){_3.liveObject.setTitle(_2)}},isc.A.setHeaderSpanHeaderTitle=function isc_ListGrid_setHeaderSpanHeaderTitle(_1,_2){var _3=this.getHeaderSpanConfig(_1);if(!_3){this.logWarn("setHeaderSpanHeaderTitle() - unable to locate span named: "+_1+this.getStackTrace());return}
_3.headerTitle=_2;if(_3.liveObject)_3.liveObject.setTitle(_2)},isc.A.setHeaderSpanBaseStyle=function isc_ListGrid_setHeaderSpanBaseStyle(_1,_2){var _3=this.getHeaderSpanConfig(_1);if(!_3){this.logWarn("setHeaderSpanBaseStyle() - unable to locate span named: "+_1+this.getStackTrace());return}
_3.headerBaseStyle=_2;if(_3.liveObject==null)return;if(_2==null){var _4=this.getSpannedFields(_3),_5=_4[0];var _6=this.getHeaderButtonProperties();if(_5.frozen&&_6.frozenBaseStyle){_2=_6.frozenBaseStyle}else if(_6.baseStyle){_2=_6.baseStyle}
if(_2==null){_2=_3.liveObject.getClass().getPrototype().baseStyle}}
_3.liveObject.setBaseStyle(_2)},isc.A.setHeaderSpanTitleStyle=function isc_ListGrid_setHeaderSpanTitleStyle(_1,_2){var _3=this.getHeaderSpanConfig(_1);if(!_3){this.logWarn("setHeaderSpanTitleStyle() - unable to locate span named: "+_1+this.getStackTrace());return}
_3.headerTitleStyle=_2;if(_3.liveObject==null)return;if(_2==null){var _4=this.getSpannedFields(_3),_5=_4[0];var _6=this.getHeaderButtonProperties();if(_5.frozen&&_6.frozenTitleStyle){_2=_6.frozenTitleStyle}else if(_6.titleStyle){_2=_6.titleStyle}
if(_2==null){_2=_3.liveObject.getClass().getPrototype().titleStyle}}
_3.liveObject.setTitleStyle(_2)},isc.A.setShowGroupSummary=function isc_ListGrid_setShowGroupSummary(_1){if(this.$1097){this.$112b=_1;return}
var _2=(this.showGroupSummary!=_1);if(_2&&this.groupTree){var _3=this.groupByFieldSummaries;this.$112e(this.groupTree,this.showGroupSummary,_1,_3,_3)}
this.showGroupSummary=_1},isc.A.setGroupByFieldSummaries=function isc_ListGrid_setGroupByFieldSummaries(_1){if(this.$112f){this.$112a=_1;return}
var _2=(this.groupByFieldSummaries!=_1);if(!_2){var _3=isc.isAn.Array(_1);_2=(_3!=isc.isAn.Array(this.groupByFieldSummaries));if(!_2&&_3){var _4=_1.length;_2=(_4==this.groupByFieldSummaries.length);if(!_2){for(var i=_4;!_2&&i--;){_2=!this.groupByFieldSummaries.contains(_1[i])}}}}
if(_2&&this.groupTree){var _6=this.showGroupSummary;this.$112e(this.groupTree,_6,_6,this.groupByFieldSummaries,_1)}
this.groupByFieldSummaries=_1},isc.A.refreshGroupSummary=function isc_ListGrid_refreshGroupSummary(_1,_2){if(!this.isGrouped||!this.showGroupSummary||!this.groupTree)return;if(isc.isA.Number(_1))_1=this.groupTree.get(_1);if(this.showGroupSummaryInHeader){if(_1!=null){var _3=this.groupTree.$134d(_1,false,[]);for(var i=_3.length-1;i>=0;i--){var _5=_3[i];this.applyGroupSummaryToHeader(this.groupTree,_5,_2);this.refreshRow(this.groupTree.indexOf(_5));delete _5.$134e}}else{var _3=this.groupTree.findAll("$52e",true);if(_3!=null){for(var i=0;i<_3.length;i++){this.applyGroupSummaryToHeader(this.groupTree,_3[i],_2)}}
this.markForRedraw("refresh group summaries")}}else{this.$112e(this.groupTree,this.showGroupSummary,this.showGroupSummary,this.groupByFieldSummaries,this.groupByFieldSummaries,true,_1,_2)}},isc.A.configureGrouping=function isc_ListGrid_configureGrouping(_1){var _2=this,_3=this.getGroupByFields();if(_1&&(!_3||_3.length==0)){_3=[_1[this.fieldIdProperty]]}
isc.MultiGroupDialog.askForGrouping(this,_3,function(_4){if(_4)_2.groupBy(_4)})},isc.A.addBodyPassthroughMethods=function isc_ListGrid_addBodyPassthroughMethods(_1){if(this.body)this.$51e(this.body);if(this.frozenBody)this.$51e(this.frozenBody)},isc.A.$51e=function isc_ListGrid__addBodyPassthroughMethods(_1){var _2={},_3=isc.getKeys(isc.ListGrid.$30f);for(var i=0;i<_3.length;i++){var _5=_3[i],_6=this[_5];if(_5=="cellContextClick")continue;if(_6==null){_2[_5]=_1.getClass().getPrototype()[_5]}else if(_6!=isc.ListGrid.$30g[_5]){_2[_5]=isc.ListGrid.$30f[_5]}}
_1.addMethods(_2)});isc.evalBoundary;isc.B.push(isc.A.addProperties=function isc_ListGrid_addProperties(_1){this.Super("addProperties",arguments);this.addBodyPassthroughMethods()},isc.A.addMethods=function isc_ListGrid_addMethods(_1){this.Super("addMethods",arguments);this.addBodyPassthroughMethods()},isc.A.propertyChanged=function isc_ListGrid_propertyChanged(_1,_2){this.invokeSuper(isc.ListGrid,"propertyChanged",_1,_2);if(this.$31h[_1])this.$34k=true;if(this.body==null)return;if(isc.ListGrid.$295.contains(_1)){this.body[_1]=_2}
if(this.$45l[_1]!=null){this.body.setProperty(this.$45l[_1],_2);this.markForRedraw()}},isc.A.doneSettingProperties=function isc_ListGrid_doneSettingProperties(){if(this.$34k)this.$31i()},isc.A.setChildEditableProperties=function isc_ListGrid_setChildEditableProperties(_1,_2,_3,_4){var _5=isc.DS.get(_3.type);if(_5&&_5.inheritsSchema("ListGridField")){if(!_2.hidden&&_1.showIf=="false")_1.showIf=null;isc.addProperties(_1,_2);this.setFields(this.completeFields||this.fields)}else{this.Super("setChildEditableProperties",arguments)}},isc.A.getExportFieldValue=function isc_ListGrid_getExportFieldValue(_1,_2,_3){var _4=this.getSpecifiedField(_2);if(this.isCheckboxField(_4)||_4.valueIcons||this.$31s(_4))
{var _5=(_4.displayField!=null&&!_4.valueMap&&!_4.getCellValue&&this.$425(_4));var _6=this.getRecordIndex(_1),_7;_7=this.getRawCellValue(_1,_6,_5?_4.displayField:_2,true);var _8=_4.hiliteHTMLAfterFormat;if(_8==null)_8=this.hiliteHTMLAfterFormat;if(_8==null)_8=true;var _9=this.getFieldHilites(_1,_4);if(!_8){if(_9!=null)_7=this.applyHiliteHTML(_9,_7);_7=this.$315(_7,_1,_4,_6,_3)}else{_7=this.$315(_7,_1,_4,_6,_3);if(_9!=null)_7=this.applyHiliteHTML(_9,_7)}
return this.htmlUnescapeExportFieldTitle(_7.toString())}
return this.Super("getExportFieldValue",arguments)},isc.A.getOriginalData=function isc_ListGrid_getOriginalData(){return(this.isGrouped&&this.originalData)?this.originalData:this.getData()},isc.A.getSelectedCellData=function isc_ListGrid_getSelectedCellData(_1,_2){if(this.canSelectCells){var _3=[],_4={},_5;var _6=this.selection.getSelectedCells();if(_6.length==0)return[];var _7,_8=0,_9=_6[_8][1];while(_8<_6.length){var _10={},_11=false,_12=_6[_8][0],_13=_6[_8][1];while(_8<_6.length){var _14=_6[_8][0];var _15=_6[_8][1];if(_14!=_12)break;if(_15==_13||!_2){var _16=this.getCellRecord(_14,_15);if(this.shouldShowRecordComponent(_16,_15)){_7=this.getRawCellValue(_16,_14,_15);if(_7===_5&&this.copyEmptyCells)_7=null;_11=true}else _7=_5}
var _17=_15-_9;if(_1){var _18=_4[_17];if(_18!==_5)_7=_18;else _4[_17]=_7}
if(_7!==_5)_10[_17]=_7;_8++}
if(_11)_3.add(_10)}
return _3}
return null},isc.A.applyCellData=function isc_ListGrid_applyCellData(_1,_2,_3){if(!this.canSelectCells||!_1)return;if(!_3)_3=this.selection.getSelectedCells().slice(0,1);if(_3.length==0)return;var _4=_3[0][1],_5=this.getTotalRows();var _6=isc.CellListIterator.create({cells:_3});for(var i=0,_8=_6.getNextRow();i<_1.length&&_8<_5;i++,_8=_6.getNextRow()){while(!this.$97k(_8)){_8=_6.getNextRow()}
if(_8>=_5)break;var _9,_10=_1[i];var _11=isc.ListGrid.$97b(_10,!_2);for(var j=0;j<_11.length;j++){if(j==0||_2)_9=_4+_11[j];else _9++;for(var _13=null;_9>=0&&_9<this.getTotalCols();_9++){_13=this.$97l(_9);if(_13||_2)break}
if(_13&&this.canEditCell(_8,_9)){this.setEditValue(_8,_9,_10[_11[j]])}}}},isc.A.applyRecordData=function isc_ListGrid_applyRecordData(_1){if(!this.canSelectCells||!_1)return;var _2=this.selection.getSelectedCells();if(_2.length==0)return;var _3,_4=_2[0][0],_5=this.getTotalRows();for(var i=0,_7=_4;i<_1.length&&_7<_5;i++,_7++){while(!this.$97k(_7)){_7++}
if(_7>=_5)break;var _8=_1[i];for(var _9 in _8){if(_8.hasOwnProperty(_9)){var _10=_8[_9];if(_10!==_3){var _11=this.getFieldNum(_9);var _12=this.getField(_11);if(_12&&this.canEditCell(_7,_11)){this.setEditValue(_7,_11,_10)}}}}}},isc.A.$97l=function isc_ListGrid__getFieldIfNonGenerated(_1){var _2=this.getField(_1);if(!_2||_2.userFormula||_2.userSummary||_2.type==this.$71t)return null;return _2},isc.A.$97k=function isc_ListGrid__isValidRowForApplyGridData(_1){var _2=this.getCellRecord(_1);if(_2==null)return true;return!_2.$52e&&!_2[this.isSeparatorProperty]&&!_2[this.groupSummaryRecordProperty]},isc.A.$94i=function isc_ListGrid__invokeKeyboardCopyPasteShortcut(_1){if(!this.useCopyPasteShortcuts||!this.canSelectCells)return true;switch(_1){case"D":this.applyCellData(this.getSelectedCellData(true,null),true,this.selection.getSelectedCells());break;case"R":this.applyCellData(this.getSelectedCellData(null,true),true,this.selection.getSelectedCells());break;case"C":isc.ListGrid.$94g=this.getSelectedCellData();break;case"V":this.applyCellData(isc.ListGrid.$94g);break}
return false});isc.B._maxIndex=isc.C+844;isc.ListGrid.registerStringMethods(isc.GridRenderer.$294);isc.ListGrid.registerStringMethods({recordClick:"viewer,record,recordNum,field,fieldNum,value,rawValue",recordDoubleClick:"viewer,record,recordNum,field,fieldNum,value,rawValue",recordsDropped:"records,rowNum,viewer,sourceWidget",recordDropMove:"viewer,recordNum,record,position",editValueChanged:"rowNum,fieldName,newValue,oldValue",editorChange:"record,newValue,oldValue,rowNum,colNum",cellChanged:"record,newValue,oldValue,rowNum,colNum,grid,recordNum,fieldNum",editComplete:"rowNum,colNum,newValues,oldValues,editCompletionEvent,dsResponse",editFailed:"rowNum,colNum,newValues,oldValues,editCompletionEvent,dsResponse,dsRequest",editorEnter:"record,value,rowNum,colNum",rowEditorEnter:"record,editValues,rowNum",editorExit:"editCompletionEvent,record,newValue,rowNum,colNum",rowEditorExit:"editCompletionEvent,record,newValues,rowNum",validateCellValue:"rowNum,colNum,newValue,oldValue",validateFieldValue:"newValue,oldValue,record,field,rowNum,colNum",formatCellValue:"value,record,rowNum,colNum",formatEditorValue:"value,record,rowNum,colNum",parseEditorValue:"value,record,rowNum,colNum",sortChanged:"sortSpecifiers",fieldStateChanged:"",groupStateChanged:"",viewStateChanged:"",dataArrived:"startRow,endRow",headerHover:"fieldNum",headerClick:"fieldNum",onHeaderClick:"fieldNum",onRecordDrop:"dropRecords,targetRecord,index,dropPosition,sourceWidget",onExpandRecord:"record",onCollapseRecord:"record",drawAreaChanged:"oldStartRow,oldEndRow,oldStartCol,oldEndCol",showRecordComponent:"record,colNum",createRecordComponent:"record,colNum",updateRecordComponent:"record,colNum,component,recordChanged",updateFilterEditorValues:"criteria",filterEditorSubmit:"criteria",handleGroupBy:"fields",groupByComplete:"fields",hilitesChanged:""});isc.ListGrid.$24j=isc.addProperties({},isc.ListGrid.getInstanceProperty("headerDefaults"));isc.ListGrid.$24k=isc.addProperties({},isc.ListGrid.getInstanceProperty("headerButtonDefaults"));isc.ListGrid.classInit();isc.defineClass("LineEditor",isc.ListGrid);isc.A=isc.LineEditor.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.canEdit=true;isc.A.editEvent="click";isc.A.editOnFocus=true;isc.A.modalEditing=true;isc.A.enterKeyEditAction="nextRowStart";isc.A.listEndEditAction="next";isc.A.height=50;isc.A.emptyMessage="Click to add data";isc.A.emptyMessageStyle="normal";isc.A.autoFitData="vertical";isc.A.leaveScrollbarGap=false;isc.B.push(isc.A.click=function isc_LineEditor_click(){var _1=this.getRecord(this.getEventRow());this.Super("click",arguments);if(_1==null&&isc.EH.lastEvent.target==this.body)this.startEditingNew()});isc.B._maxIndex=isc.C+1;isc.ClassFactory.defineClass("TreeGrid","ListGrid");isc.addGlobal("TreeViewer",isc.TreeGrid);isc.defineClass("TreeGridBody",isc.GridBody);isc.A=isc.TreeGridBody.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$34w="TABLE";isc.A.$34x="padding:0px;border:0px;";isc.B.push(isc.A.$1159=function isc_TreeGridBody__getShowClippedValuesOnHover(){if(this.showClippedValuesOnHover==null)return true;return this.showClippedValuesOnHover},isc.A.cellValueIsClipped=function isc_TreeGridBody_cellValueIsClipped(_1,_2,_3,_4,_5){if(_2==this.grid.$34t){var _6=this.getTableElement(_1,_2);if(_6==null)return false;var _7=_6.firstChild;while(_7&&_7.tagName!=this.$34w)_7=_7.firstChild;if(_7&&_7.rows&&_7.rows[0]){var _8=_7.rows[0].lastChild,_9=_8;if(isc.Browser.isMoz&&_8.firstChild&&_8.firstChild.hasAttribute&&_8.firstChild.hasAttribute("$114y"))
{_9=_8.firstChild}
return this.$1154(_9)}}
return this.invokeSuper(isc.TreeGridBody,"cellValueIsClipped",_1,_2,_3,_4,_5)},isc.A.defaultCellValueHoverHTML=function isc_TreeGridBody_defaultCellValueHoverHTML(_1,_2,_3,_4,_5,_6){if(_3==this.grid.$34t){return this.grid.invokeSuper(isc.TreeGrid,"getCellValue",_1,_2,_3)}
return this.invokeSuper(isc.TreeGridBody,"defaultCellValueHoverHTML",_1,_2,_3,_4,_5,_6)},isc.A.$29h=function isc_TreeGridBody__updateCellStyle(_1,_2,_3,_4,_5){if(_4==null)_4=this.getTableElement(_2,_3);if(_4==null)return;if(!this.showHiliteInCells&&_3==this.grid.getLocalFieldNum(this.grid.getTreeFieldNum()))
{if(_1==null)_1=this.getCellRecord(_2,_3);if(_5==null)_5=this.getCellStyle(_1,_2,_3);var _6=_4.firstChild;while(_6&&_6.tagName!=this.$34w)_6=_6.firstChild;if(_6){var _7;if(this.getCellCSSText){_7=this.getCellCSSText(_1,_2,_3);if(_7!=null&&!isc.isAn.emptyString(_7)){_7+=isc.Canvas.$42a}else _7=null}
_6.className=_5;if(_7!=null)_6.cssText=_7;var _8=_6.rows,_9=_8[0].childNodes;if(_9&&_9.length>0){for(var i=0;i<_9.length;i++){_9[i].className=_5;if(_7){if(i==_9.length-1){_7+=(this.isRTL()?"paddingRight:":"paddingLeft:")+this.iconPadding}
_9[i].cssText=_7}}}}}
return isc.GridRenderer.getPrototype().$29h.apply(this,[_1,_2,_3,_4,_5])},isc.A.click=function isc_TreeGridBody_click(_1,_2){if(!this.$29p()){var _3=this.grid,_4=_3.getEventRecordNum(),_5=_4<0?null:_3.getRecord(_4);if(_5!=null&&_3.data.isFolder(_5)&&_3.clickInOpenArea(_5)){if(isc.screenReader){this.$86a(_4)}
_3.toggleFolder(_5);_3.clearLastHilite();_3.$31q=null;return isc.EH.STOP_BUBBLING}}
return this.Super("click",arguments)},isc.A.mouseDown=function isc_TreeGridBody_mouseDown(){var _1=this.getEventRow(),_2=_1<0?null:this.grid.data.get(_1);if(_2!=null){if(this.grid.clickInOpenArea(_2)){return isc.EH.STOP_BUBBLING}else if(this.grid.clickInCheckboxArea(_2)&&this.canSelectRecord(_2)){var _3=this.grid.selectionType;if(_3==isc.Selection.SINGLE){this.deselectAllRecords();this.selectRecord(_2)}else if(_3==isc.Selection.SIMPLE||_3==isc.Selection.MULTIPLE){if(this.selection.isSelected(_2))this.deselectRecord(_2);else this.selectRecord(_2)}
return isc.EH.STOP_BUBBLING}}
return this.Super("mouseDown",arguments)},isc.A.mouseUp=function isc_TreeGridBody_mouseUp(){var _1=this.getEventRow(),_2=_1<0?null:this.grid.data.get(_1);if(_2!=null&&(this.grid.clickInOpenArea(_2)||this.grid.clickInCheckboxArea(_2)))
{return isc.EH.STOP_BUBBLING}else{return this.Super("mouseUp",arguments)}},isc.A.placeEmbeddedComponent=function isc_TreeGridBody_placeEmbeddedComponent(_1){if(this.grid.indentRecordComponents){var _2=_1.$57n;if(_2==this.grid.getTreeFieldNum()&&!_1.snapOffsetLeft){var _3=_1.embeddedRecord;if(_3!=null){_1.snapOffsetLeft=this.grid.getOpenAreaWidth(_3)+this.grid.iconPadding}}}
return this.Super("placeEmbeddedComponent",arguments)},isc.A.getTableHTML=function isc_TreeGridBody_getTableHTML(_1,_2,_3,_4,_5,_6){var _7=this.grid.data,_8=(isc.isA.ResultTree(_7)&&!this.isEmpty());var _9=_2,_10=_3;if(_8){var _11=this.$121d(_2,_3,false);_9=_11[0];_10=_11[1];_7.$121e(_9,_10)}
var _12=this.invokeSuper(isc.TreeGridBody,"getTableHTML",_1,_2,_3,_4,_5,_6);if(_8){_7.$121f(_9,_10)}
return _12});isc.B._maxIndex=isc.C+9;isc.A=isc.TreeGrid;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.TREE_FIELD={name:"nodeTitle",treeField:true,$1100:true,getCellValue:function(_1,_2,_3,_4){if(!_1.getNodeTitle){var _5=_4==null?null:_1.getFieldName(_4);return _2==null||_5==null?null:_2[_5]}
return _1.getNodeTitle(_2,_3,this)},canFilter:false,getFieldTitle:function(_1,_2){var _3=_1.getField(_2);if(_3.name=="nodeTitle")return _1.treeFieldTitle;return _3.title||_3.name}};isc.B.push(isc.A.$82d=function isc_c_TreeGrid__getTreeCellTemplate(){if(!this.$819){isc.Canvas.$816.add({target:this,methodName:"$82a"});this.$819=true}
if(this.$34p==null){this.$34p=["<table role='presentation' cellpadding=0 cellspacing=0 class='",,"' style='",,isc.Canvas.$42a+"'><colgroup><col width='",,"px'/><col width='",,"px'/><col/></colgroup><tbody><tr><td style='line-height:0px;",,isc.Canvas.$42a+"' class='",,"'>",,"</td>"]}
return this.$34p},isc.A.$82e=function isc_c_TreeGrid__getTreeCellTitleTemplate(){if(!this.$819){isc.Canvas.$816.add({target:this,methodName:"$82a"});this.$819=true}
if(this.$34q==null){this.$34q=["<td style='line-height:0px;",,";"+isc.Canvas.$42a+"' class='",,"'>"+(isc.Browser.isSafari||isc.Browser.isIE?"<nobr>":""),,,,(isc.Browser.isSafari||isc.Browser.isIE?"</nobr>":"")+"</td><td style='",,";"+isc.Canvas.$42a+(isc.Page.isRTL()?"padding-left:1px;padding-right:":"padding-right:1px;padding-left:"),,"px;' class='",,"'>",,,,"</td>"]}
return this.$34q},isc.A.$82a=function isc_c_TreeGrid__doublingStringsChanged(){this.$34p=null;this.$34q=null});isc.B._maxIndex=isc.C+3;isc.A=isc.TreeGrid.getPrototype();isc.A.autoFetchTextMatchStyle="exact";isc.A.cascadeSelection=false;isc.A.showPartialSelection=false;isc.A.booleanTrueImage=null;isc.A.booleanFalseImage=null;isc.A.booleanPartialImage=null;isc.A.showClippedValuesOnHover=null;isc.A.treeFieldTitle="Name";isc.A.autoAssignTreeField=true;isc.A.showRoot=false;isc.A.displayNodeType=isc.Tree.FOLDERS_AND_LEAVES;isc.A.canDragRecordsOut=false;isc.A.canDropRootNodes=true;isc.A.dragDataAction=isc.ListGrid.MOVE;isc.A.openDropFolderDelay=600;isc.A.parentAlreadyContainsChildMessage="This item already contains a child item with that name.";isc.A.cantDragIntoSelfMessage="You can't drag an item into itself.";isc.A.cantDragIntoChildMessage="You can't drag an item into one of it's children.";isc.A.fixedFieldWidths=true;isc.A.wrapCells=false;isc.A.showHiliteInCells=false;isc.A.indentSize=20;isc.A.extraIconGap=2;isc.A.iconSize=16;isc.A.skinImgDir="images/TreeGrid/";isc.A.folderIcon="[SKIN]/folder.gif";isc.A.dropIconSuffix="drop";isc.A.openIconSuffix="open";isc.A.closedIconSuffix="closed";isc.A.nodeIcon="[SKIN]/file.gif";isc.A.showOpenIcons=true;isc.A.showDropIcons=true;isc.A.customIconProperty="icon";isc.A.customIconOpenProperty="showOpenIcon";isc.A.customIconDropProperty="showDropIcon";isc.A.showCustomIconOpen=false;isc.A.showCustomIconDrop=false;isc.A.leaveSelectionCheckboxGap=true;isc.A.manyItemsImage="[SKIN]folder_file.gif";isc.A.showConnectors=false;isc.A.showFullConnectors=true;isc.A.showOpener=true;isc.A.openerImage="[SKIN]opener.gif";isc.A.connectorImage="[SKIN]connector.gif";isc.A.offlineNodeMessage="This data not available while offline";isc.A.indentRecordComponents=true;isc.A.createDefaultTreeField=true;isc.A.canGroupBy=false;isc.A.ignoreEmptyCriteria=false;isc.A.drawAllMaxCells=50;isc.A.drawAheadRatio=1.0;isc.A.$34l="open_icon_";isc.A.$349="extra_icon_";isc.A.$34n="icon_";isc.A.$34o="nodeTitle";isc.A=isc.TreeGrid.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.bodyConstructor="TreeGridBody";isc.A.recordDropAppearance=isc.ListGrid.BOTH;isc.A.iconPadding=3;isc.A.$64o="</tr></tbody></table>";isc.A.$39=";";isc.A.$12c="checkbox";isc.A.$34r="absmiddle";isc.B.push(isc.A.initWidget=function isc_TreeGrid_initWidget(){this.invokeSuper(isc.TreeGrid,this.$oc);if(!this.dataSource&&this.data!=null&&this.data.dataSource){this.dataSource=this.data.dataSource}
if(this.createDefaultTreeField&&(this.getDataSource()==null||!this.useAllDataSourceFields))
{if(!this.fields||this.fields.length==0){this.fields=[isc.TreeGrid.TREE_FIELD]}}},isc.A.setDataSource=function isc_TreeGrid_setDataSource(_1,_2){if(this.createDefaultTreeField){if(_2==null||_2.length==0){_2=[isc.TreeGrid.TREE_FIELD]}}
return this.Super("setDataSource",[_1,_2])},isc.A.cellValueHoverHTML=function isc_TreeGrid_cellValueHoverHTML(_1,_2,_3,_4){if(_3==this.$34t){var _5=this.Super("cellValueHoverHTML",arguments);if(_5!=null&&!isc.isAn.emptyString(_5))_5="<nobr>"+_5+"</nobr>";return _5}else if(this.showClippedValuesOnHover!==true)return null;else return _4},isc.A.$34s=function isc_TreeGrid__initTreeField(){if((!this.fields||this.fields.length==0)&&(this.getDataSource()==null||!this.useAllDataSourceFields))
{if(this.createDefaultTreeField)this.fields=[isc.TreeGrid.TREE_FIELD]}else{var _1=this.completeFields,_2=this.fields,_3;for(var i=0;i<_1.length;i++){if(_1[i].treeField){_3=_2.indexOf(_1[i]);break}}
if(_3==null){if(!this.autoAssignTreeField)return;var _5=this.data.titleProperty,_6=_2.findIndex(this.fieldIdProperty,_5);if(_6!=-1)_3=_6}
if(_3==null)_3=0;if(this.isCheckboxField(this.fields[_3]))_3+=1;this.$34t=_3;var _7=_2[_3],_8=isc.TreeGrid.TREE_FIELD,_9=_7.formatCellValue!=null||_7.displayField!=null;for(var _10 in _8){if(_9&&_10=="getCellValue"){continue}
if(_7[_10]==null){_7[_10]=_8[_10]}}}},isc.A.deriveVisibleFields=function isc_TreeGrid_deriveVisibleFields(_1,_2,_3,_4){this.invokeSuper(isc.TreeGrid,"deriveVisibleFields",_1,_2,_3,_4);this.$34s()},isc.A.getEmptyMessage=function isc_TreeGrid_getEmptyMessage(){if(this.isOffline()){return this.offlineMessage}
if(isc.isA.Tree(this.data)&&this.data.getLoadState(this.data.getRoot())==isc.Tree.LOADING)
return this.loadingDataMessage==null?"&nbsp;":this.loadingDataMessage.evalDynamicString(this,{loadingImage:this.imgHTML(isc.Canvas.loadingImageSrc,isc.Canvas.loadingImageSize,isc.Canvas.loadingImageSize)});return this.emptyMessage.evalDynamicString(this,{loadingImage:this.imgHTML(isc.Canvas.loadingImageSrc,isc.Canvas.loadingImageSize,isc.Canvas.loadingImageSize)})},isc.A.isEmpty=function isc_TreeGrid_isEmpty(){if(!isc.isA.Tree(this.data))return true;var _1=this.data.getRoot();if(_1==null)return true;var _2=this.data.hasChildren(_1);if(_2||this.showRoot||this.data.showRoot)return false;return true},isc.A.getOpenState=function isc_TreeGrid_getOpenState(){var _1=this.data;if(_1==null){this.logWarn("getOpenState() called for a treeGrid with no data");return[]}
if(_1.getOpenState)return _1.getOpenState();var _2=_1.getRoot(),_3=[];this.$45q(_1,_2,_3);return isc.Comm.serialize(_3)},isc.A.setOpenState=function isc_TreeGrid_setOpenState(_1){if(this.data&&this.data.setOpenState){this.data.setOpenState(_1);return}
_1=this.evalViewState(_1,"openState")
if(!_1)return;if(!this.data){this.logWarn("unable to set open state for this treeGrid as this.data is unset");return}
this.data.closeAll();this.data.openFolders(_1)},isc.A.getSelectedPaths=function isc_TreeGrid_getSelectedPaths(){if(!this.selection)return null;var _1=this.selection.getSelection()||[],_2=[];for(var i=0;i<_1.length;i++){_2[i]=this.data.getPath(_1[i])}
return isc.Comm.serialize(_2)},isc.A.showActionInPanel=function isc_TreeGrid_showActionInPanel(_1){return this.Super("showActionInPanel",arguments)},isc.A.setSelectedPaths=function isc_TreeGrid_setSelectedPaths(_1){_1=this.evalViewState(_1,"selectedPaths")
if(!_1)return;var _2=this.selection,_3=this.data;if(_3&&_2){_2.deselectAll();var _4=[];for(var i=0;i<_1.length;i++){var _6=_3.find(_1[i]);if(_6)_4.add(_6)}
this.selection.selectList(_4)}},isc.A.getViewState=function isc_TreeGrid_getViewState(){var _1=this.Super("getViewState",[true]);_1.open=this.getOpenState();return"("+isc.Comm.serialize(_1)+")"},isc.A.setViewState=function isc_TreeGrid_setViewState(_1){this.Super("setViewState",arguments);_1=this.evalViewState(_1,"viewState",true)
if(!_1)return;if(_1.open)this.setOpenState(_1.open);if(_1.selected)this.setSelectedState(_1.selected)},isc.A.getDefaultData=function isc_TreeGrid_getDefaultData(){return isc.Tree.create({$31k:true})},isc.A.setData=function isc_TreeGrid_setData(_1){if(this.data){if(this.separateFolders!=null)this.data.separateFolders=this.separateFolders;if(this.sortFoldersBeforeLeaves!=null)
this.data.sortFoldersBeforeLeaves=this.sortFoldersBeforeLeaves}
this.Super("setData",arguments);if(!this.data)return;if(this.separateFolders!=null)this.data.separateFolders=this.separateFolders;if(this.sortFoldersBeforeLeaves!=null)
this.data.sortFoldersBeforeLeaves=this.sortFoldersBeforeLeaves;if(this.showRoot&&isc.ResultTree&&isc.isA.ResultTree(this.data)){this.logWarn("showRoot may not be set with a databound treeGrid, unexpected results may occur")}
this.data.showRoot=this.showRoot;this.data.openDisplayNodeType=this.displayNodeType;if(this.autoPreserveOpenState!=null){this.data.autoPreserveOpenState=this.autoPreserveOpenState}},isc.A.draw=function isc_TreeGrid_draw(_1,_2,_3,_4){if(this.initialData&&(!isc.ResultSet||!isc.isA.ResultSet(this.data))){this.setData(this.createResultTree())}
this.invokeSuper(isc.TreeGrid,"draw",_1,_2,_3,_4)},isc.A.bodyKeyPress=function isc_TreeGrid_bodyKeyPress(_1){var _2=this.selection;if(this.selectionType!=isc.Selection.NONE&&this.data.getLength()>0&&_2.anySelected()&&(!_2.multipleSelected||!_2.multipleSelected()))
{var _3=this.getRecord(this.getFocusRow());if(_1.keyName=="Arrow_Left"){if(this.data.isFolder(_3)&&this.data.isOpen(_3)){this.closeFolder(_3)}else{var _4=this.data.getParent(_3);if(_4){var _5=this.getFocusRow();while(_5>0&&this.getRecord(_5)!=_4){_5--}
if(this.getRecord(_5)==_4){this.$318(_5-this.getFocusRow(),false)}}}
return false}else if(_1.keyName=="Arrow_Right"){if(this.data.isFolder(_3)){if(!this.data.isOpen(_3)){this.openFolder(_3);return false}else{if(this.data.hasChildren(_3)){this.$318(1,false);return false}}}}}
return this.Super("bodyKeyPress",arguments)},isc.A.$298=function isc_TreeGrid__cellContextClick(_1,_2,_3){if(_2<0||_3<0)return true;var _4=this.data.isFolder(_1);if(this.nodeContextClick&&this.nodeContextClick(this,_1,_2)==false){return false}
if(_4){if(this.folderContextClick&&this.folderContextClick(this,_1,_2)==false){return false}}else{if(this.leafContextClick&&this.leafContextClick(this,_1,_2)==false){return false}}
return this.Super("$298",arguments)},isc.A.handleEditCellEvent=function isc_TreeGrid_handleEditCellEvent(_1,_2){var _3=this.getRecord(_1);if(this.clickInOpenArea(_3)||this.clickInCheckboxArea(_3))return false;return this.Super("handleEditCellEvent",arguments)},isc.A.canEditCell=function isc_TreeGrid_canEditCell(_1,_2){if(this.Super("canEditCell",arguments)==false)return false;if(this.getField(_2)[this.fieldIdProperty]==this.data.nameProperty)return false;if(this.getField(_2)[this.fieldIdProperty]==this.$34o)return false;return true},isc.A.getEditFormItemFieldWidths=function isc_TreeGrid_getEditFormItemFieldWidths(_1){var _2=this.data.getLevel(_1);if(!this.showRoot)_2--;var _3=this.getOpenerIconWidth(_1),_4=_2*(this.showConnectors?_3:this.indentSize);_4+=this.iconSize+_3;if(this.$739(_1)){_4+=(this.$65a()+this.extraIconGap)}else if(this.getExtraIcon(_1)){_4+=(this.iconSize+this.extraIconGap)}
var _5=this.Super("getEditFormItemFieldWidths",arguments),_6=this.getTreeFieldNum();_5[_6]-=_4;return _5},isc.A.getRecordDataSource=function isc_TreeGrid_getRecordDataSource(_1){return this.data.getNodeDataSource(_1)},isc.A.rowClick=function isc_TreeGrid_rowClick(_1,_2,_3){var _4=_1;if(this.clickInOpenArea(_4)||this.clickInCheckboxArea(_4))return false;this.$31q=_2;if(_2<0||_3<0)return false;var _4=this.getRecord(_2),_5=this.data.isFolder(_4);if(this.nodeClick)this.nodeClick(this,_4,_2);if(_5){if(this.folderClick)this.folderClick(this,_4,_2)}else{if(this.leafClick)this.leafClick(this,_4,_2)}
return this.Super("rowClick",arguments)},isc.A.recordDoubleClick=function isc_TreeGrid_recordDoubleClick(_1,_2,_3,_4,_5,_6,_7){if(this.clickInOpenArea(_2)||this.clickInCheckboxArea(_2))return false;if(this.isEditable()&&this.editEvent==isc.EH.DOUBLE_CLICK&&this.canEditCell(_3,_5))
{return true}
if(this.data.isFolder(_2)){return this.toggleFolder(_2)}else
return this.openLeaf(_2)},isc.A.dataChanged=function isc_TreeGrid_dataChanged(){this.Super("dataChanged",arguments);var _1=this.$34z;if(_1&&this.data.isOpen(_1)&&this.data.getLoadState(_1)==isc.Tree.LOADED)
{this.$340(_1);this.$34z=null}},isc.A.openLeaf=function isc_TreeGrid_openLeaf(_1){},isc.A.getDragTrackerIcon=function isc_TreeGrid_getDragTrackerIcon(_1){var _2;if(_1&&_1.length>1&&this.manyItemsImage!=null)
_2=this.manyItemsImage;else if(_1&&_1[0])_2=this.getIcon(_1[0],true);return _2},isc.A.getDragTrackerTitle=function isc_TreeGrid_getDragTrackerTitle(_1,_2,_3,_4,_5,_6){var _7=this.getFieldNum(this.getTitleField());if(_7!=this.getTreeFieldNum())
return this.invokeSuper(isc.TreeGrid,"getDragTrackerTitle",_1,_2,_3,_4,_5,_6);var _8=this.getCellStyle(_1,_2,_7),_9=this.getCellCSSText(_1,_2,_7);if(this.selection.isSelected(_1)){var _10=this.body.getCellStyleIndex(_1,_2,_7),_11=this.body.getCellStyleName(_10,_1,_2,_7);if(_11==_8){_10-=2;_8=this.body.getCellStyleName(_10,_1,_2,_7)}}
var _12=this.invokeSuper(isc.TreeGrid,"getCellValue",_1,_2,_7);var _13=this.$342(_12,_1,_2,_7,false,_8,_9).join(isc.emptyString);return["<table class='",_8,"' style='",_9,"'><tr>",_13,"</tr></table>"].join(isc.emptyString)},isc.A.willAcceptDrop=function isc_TreeGrid_willAcceptDrop(){if(!this.Super("willAcceptDrop",arguments))return false;isc.$54j=true;var _1=this.getEventRecordNum(null,true),_2=_1<0?null:this.data.get(_1);isc.$54j=false;if(_2==null){if(this.canDropInEmptyArea==false||!this.canDropRootNodes)return false;_2=this.data.getRoot()}
if(!_2||_2.canAcceptDrop==false)return false;var _3=this.data.isFolder(_2);if(!_3&&!(this.canReorderRecords||this.canDropOnLeaves))return false;var _4=isc.EH.dragTarget.getDragData();if(!isc.isAn.Object(_4)||this.getDropError(_4,_2)!=null){return false}
if(!_3){_2=this.data.getParent(_2);if(_2.canAcceptDrop==false)return false}
if(isc.EH.dragTarget!=this)return true;var _5=this.canReparentNodes;if(_5==null&&this.canAcceptDroppedRecords)_5=true;if(!_5){if(!isc.isAn.Array(_4))_4=[_4];var _6;_6=this.data.getParent(_4[0]);if(_6!=_2)return false;for(var i=1;i<_4.length;i++){if(_6!=this.data.getParent(_4[i]))return false}}
return true},isc.A.$31i=function isc_TreeGrid__setUpDragProperties(){this.canDrag=(this.canDrag||this.canDragRecordsOut||this.$34c()||this.canDragSelect);this.canDrop=(this.canDrop||this.canDragRecordsOut||this.$34c());this.canAcceptDrop=(this.canAcceptDrop||this.canAcceptDroppedRecords||this.$34c())},isc.A.$34c=function isc_TreeGrid__canDragRecordsToSelf(){var _1=this.canReparentNodes;if(_1==null&&this.canAcceptDroppedRecords){if(!this.$343){this.logInfo("'canReparentNodes' is unset. Allowing node reparenting as 'canAcceptDroppedRecords' is set to true. For explicit control, use 'canReparentNodes' instead.","dragDrop");this.$343=true}
_1=this.canAcceptDroppedRecords}
return this.canReorderRecords||_1},isc.A.getDropError=function isc_TreeGrid_getDropError(_1,_2){for(var i=0,_4=_1.length;i<_4;i++){if(this.data.isDescendantOf(_2,_1[i])){return this.cantDragIntoChildMessage}}
var _5=this.data.isFolder(_2);if(_5){for(i=0;i<_4;i++){if(_1[i]==_2){return this.cantDragIntoSelfMessage}}}
return null},isc.A.dropMove=function isc_TreeGrid_dropMove(){var _1=this.getEventRow();if(_1==-1)return false;if(this.canDragRecordsOut==false&&isc.EH.dropTarget!=this&&!this.contains(isc.EH.dropTarget))return false;if(!this.canAcceptDroppedRecords&&isc.EH.dragTarget!=this){return false}
var _2=(_1==-2?this.data.getRoot():this.data.get(_1)),_3=this.getDropFolder(),_4=(this.canReorderRecords?this.getRecordDropPosition(_1):null);if(_3!=this.lastDropFolder||_2!=this.$344||_4!=this.$345){if(!this.$346){this.$346=this.getID()+".openDropFolder()"}
if(this.openDropFolderTimer)isc.Timer.clear(this.openDropFolderTimer);if(!this.data.isOpen(_3)){this.openDropFolderTimer=isc.Timer.setTimeout(this.$346,this.openDropFolderDelay)}
this.updateDropFolder(_3)}
if(!this.willAcceptDrop()){this.body.setNoDropIndicator()}else{this.body.clearNoDropIndicator()}
if(this.shouldShowDragLineForRecord(_3)){if(this.data.isOpen(_3))this.showDragLineForRecord(_1,_4);else this.hideDragLine()}
this.$344=_2;this.$345=_4},isc.A.getEventRecordNum=function isc_TreeGrid_getEventRecordNum(_1,_2){var _3=this.Super("getEventRecordNum",arguments);if(_3<0&&_2&&!this.canDropRootNodes){var _4=this.data,_5=_4.getChildren();if(_5!=null){if(_3==-2){for(var i=_5.length-1;i>=0;i--){if(_4.isFolder(_5[i]))return this.getRecordIndex(_5[i])}}else{for(var i=0;i<_5.length;i++){if(_4.isFolder(_5[i]))return this.getRecordIndex(_5[i])}}}}
return _3},isc.A.getDropFolder=function isc_TreeGrid_getDropFolder(){var _1=this.getEventRecordNum(null,true),_2=this.data,_3=(_1<0?_2.getRoot():_2.get(_1));if(_2.isRoot(_3))return _2.getRoot();var _4=_2.isFolder(_3);if(!this.canReorderRecords)return(_4?_3:_2.getParent(_3));var _5=this.getRecordDropPosition(_3);if(!_4||_5==isc.ListGrid.BEFORE||_5==isc.ListGrid.AFTER&&(!_2.isOpen(_3)||!_2.hasChildren(_3)))
{var _6=_2.getParent(_3);return _4&&!this.canDropRootNodes&&_2.isRoot(_6)?_3:_6}else{return _3}},isc.A.openDropFolder=function isc_TreeGrid_openDropFolder(){var _1=this.lastDropFolder;if(!_1||!this.data.isFolder(_1)||this.data.isOpen(_1))return false;this.openFolder(_1);if(this.shouldShowDragLineForRecord(_1)){this.showDragLineForRecord(this.data.indexOf(_1),isc.ListGrid.OVER)}},isc.A.getRecordDropPosition=function isc_TreeGrid_getRecordDropPosition(_1,_2,_3){if(this.recordDropAppearance==isc.ListGrid.OVER)return isc.ListGrid.OVER;if(this.recordDropAppearance==isc.ListGrid.BODY)return null;if(_2==null)_2=this.body.getOffsetY();if(_1==null)_1=this.getEventRow(_2);var _4=this.data;if(!isc.isA.Number(_1))_1=_4.indexOf(_1);var _5=_1<0?null:_4.get(_1);if(_5&&_4.isFolder(_5)){return this.$132o(_1,_2,_3)}
if(_3==null&&!this.canDropOnLeaves){_3=isc.ListGrid.BETWEEN}
return this.invokeSuper(isc.TreeGrid,"getRecordDropPosition",_1,_2,_3)},isc.A.showDragLineForRecord=function isc_TreeGrid_showDragLineForRecord(_1,_2,_3,_4,_5){if(_1==null)_1=this.getEventRecordNum();if(_2==null)_2=this.getRecordDropPosition(_1);if(_2==isc.ListGrid.OVER){var _6=this.getRecord(_1),_7=this.data;if(_7.isFolder(_6)&&_7.isOpen(_6))_2=isc.ListGrid.AFTER}
return this.invokeSuper(isc.TreeGrid,"showDragLineForRecord",_1,_2,_3,_4,_5)},isc.A.dropOut=function isc_TreeGrid_dropOut(){this.hideDragLine();this.body.clearNoDropIndicator();this.$344=null;this.updateDropFolder();if(this.openDropFolderTimer)isc.Timer.clear(this.openDropFolderTimer)},isc.A.updateDropFolder=function isc_TreeGrid_updateDropFolder(_1){var _2=this.lastDropFolder;this.lastDropFolder=_1;if(_1){_1.$347=this.body.willAcceptDrop(_1)
this.setRowIcon(_1,this.getIcon(_1))}
if(_2&&_2!=_1){delete _2.$347;this.setRowIcon(_2,this.getIcon(_2))}},isc.A.transferSelectedData=function isc_TreeGrid_transferSelectedData(_1,_2,_3,_4){if(!this.isValidTransferSource(_1)){if(_4)this.fireCallback(_4);return}
if(_3==null)_3=0;if(_2==null)_2=this.data.getRoot();var _5=_1.cloneDragData();this.transferNodes(_5,_2,_3,_1,_4)},isc.A.$132p=function isc_TreeGrid__dropAfterLastChild(_1,_2,_3){if(this.canDropRootNodes)return false;if(_2!=_3)return false;var _4=this.data,_5=_4.getParent(_2);return _4.isRoot(_5)&&_4.isOpen(_2)&&_1==isc.ListGrid.AFTER},isc.A.drop=function isc_TreeGrid_drop(){if(!this.willAcceptDrop())return false;var _1=isc.EH.dragTarget.cloneDragData(),_2=this.getEventRecordNum(null,true),_3=this.getRecordDropPosition(_2),_4=_2<0?null:this.data.get(_2),_5=this.getDropFolder();if(!_4)_4=this.data.getRoot();var _6=isc.EH.dragTarget.getData(),_7=(isc.isA.Tree(_6)&&isc.isA.Tree(this.data)&&_6.getRoot()==this.data.getRoot());for(var i=0;i<_1.length;i++){var _9=_1[i];var _10=(this.data.findChildNum(_5,this.data.getName(_9))!=-1);var _11=_7&&this.canReorderRecords&&_5==this.data.getParent(_9);if(_10&&!_11){this.logInfo("already a child named: "+this.data.getName(_9)+" under parent: "+this.data.getPath(_5));isc.warn(this.parentAlreadyContainsChildMessage);return false}}
var _12=null;if(this.canReorderRecords){if(_2<0||this.$132p(_3,_4,_5)){_5=_4;_12=this.data.getChildren(_5).getLength()}else if(_4==_5){_12=0}else{_12=(_3==isc.ListGrid.BEFORE?0:1)+this.data.getChildren(_5).indexOf(_4)}}
var _13=_3;if(this.onFolderDrop!=null&&(this.onFolderDrop(_1,_5,_12,_13,isc.EH.dragTarget)==false))return false;this.folderDrop(_1,_5,_12,isc.EH.dragTarget);this.data.openFolder(_5);return false},isc.A.folderDrop=function isc_TreeGrid_folderDrop(_1,_2,_3,_4,_5){this.transferNodes(_1,_2,_3,_4,_5)},isc.A.transferNodes=function isc_TreeGrid_transferNodes(_1,_2,_3,_4,_5){if(!this.$67u("transferNodes",_1,_2,_3,_4,_5)){return}
_2=_2||this.data.root;var _6=_4.getData(),_7=(isc.isA.Tree(_6)&&isc.isA.Tree(this.data)&&_6.getRoot()==this.data.getRoot());var _8=this.getDataSource(),_9=_4.getDataSource();if(_7&&(this.dragDataAction!=isc.TreeGrid.COPY&&this.dragDataAction!=isc.TreeGrid.CLONE))
{if(_8!=null&&this.data!=null&&isc.ResultTree&&isc.isA.ResultTree(this.data))
{this.$67k[0].noRemove=true;var _10=isc.rpc.startQueue();var _11=_6.getChildren(_2);var _12,_13;if(_3!=null){if(_3<_11.getLength()){_12=_11.get(_3)}}
if(_12==_13){_12=_11.last()}
var _14=isc.ResultSet.getLoadingMarker();for(var i=0;i<_1.length;i++){var _16=_1[i];if(this.shouldSaveLocally()||_16[this.data.parentIdField]==_2[this.data.idField])
{if(_3!=null){_11=_6.getChildren(_2);_6.move(_16,_2,_11.indexOf(_12))}}else{var _17=_1[i]["_isOpen_"+this.data.ID];var _16=isc.addProperties({},this.data.getCleanNodeData(_1[i],true,false)),_18=isc.addProperties({},_16);if(_17!=null)_16["_isOpen_"+this.data.ID]=_17;_16[this.data.parentIdField]=_2[this.data.idField];var _19=null,_20=this.data.getChildren(_2);if(_3==null){_19=_20.last();if(_19==_14){_19=null}}else if(_3>0){_19=_20.get(_3-1);if(_19==_14){_19=null}}
this.updateDataViaDataSource(_16,_8,{oldValues:_18,parentNode:this.data.getParent(_1[i]),newParentNode:_2,dragTree:_6,draggedNode:_16,draggedNodeList:_1,dropNeighbor:_19,dropIndex:_3},_4)}}}else{_6.moveList(_1,_2,_3)}}else if(_8!=null){var _21;if(this.dragRecategorize=="always"||this.dragRecategorize!="never"&&(_9!=null&&_9!=_8&&this.data!=null&&isc.ResultTree&&isc.isA.ResultTree(this.data)&&_4.dragDataAction==isc.TreeGrid.MOVE))
{var _22=_9.getTreeRelationship(_8);if(_22!=null&&_22.parentIdField){var _23=false,_24=_9.getPrimaryKeyFields();for(var _25 in _24){if(_25==_22.parentIdField){this.logWarn("dragRecategorize: data source has dataSource:"+_9.getID()+". foreignKey relationship with target dataSource "+_8.getID()+" is based on primary key which cannot be modified.");_23=true}}
if(!_23)_21=true;this.logInfo("Recategorizing dropped nodes in dataSource:"+_9.getID())}
this.$67k[0].noRemove=true;var _10=isc.rpc.startQueue();for(var i=0;i<_1.length;i++){var _16={};var _26=_9.getPrimaryKeyFieldNames();for(var j=0;j<_26.length;j++){_16[_26[j]]=_1[i][_26[j]]}
if(_21){_16[_22.parentIdField]=_2[_22.idField]}
isc.addProperties(_16,this.getDropValues(_16,_9,_2,_3,_4));this.updateDataViaDataSource(_16,_9,null,_4)}}else{if(isc.isA.Tree(_6)&&_4.dragDataAction==isc.TreeGrid.MOVE){_1=_6.getCleanNodeData(_1,_4.dataSource==null)}
var _10=isc.rpc.startQueue();for(var i=0;i<_1.length;i++){var _28=_1[i],_29=this.data;if(_29){_28[_29.parentIdField]=_2[_29.idField]}
isc.addProperties(_28,this.getDropValues(_28,_9,_2,_3,_4));this.$61d(_28,_9,_4,null,_3,_2)}}}else{for(var i=0;i<_1.length;i++){this.$61d(_1[i],_9,_4,null,_3,_2)}}
if(!this.$67l){isc.Log.logDebug("Invoking transferDragData from inside transferNodes - no server queries needed?","dragDrop");_4.transferDragData(this.$67n,this);if(_8){if(!this.$67o)isc.rpc.sendQueue()}}
this.$67m=false},isc.A.$67w=function isc_TreeGrid__updateComplete(_1,_2,_3){if(!_3.dragTree)return;if(_3.newParentNode!=this.data.root&&_3.dragTree.getParent(_3.newParentNode)==null)
{isc.logWarn("Target folder is no longer in the Tree in TreeGrid cache sync");return}
var _4=_3.dropNeighbor,_5=_3.dragTree,_6=_5.getChildren(_3.newParentNode),_7=_3.draggedNodeList,_8=_5.idField,_9=_7.findIndex(_8,_3.draggedNode[_8]),_10,_11;if(_4==null){_10=0}else{for(var i=0,_13=_6.getLength();i<_13;++i){var _14=_6.getCachedRow(i);if(_14==_4){_10=i+1;break}}}
if(_10!==_11){var _13=_6.getLength();while(_10<_13){var _14=_6.getCachedRow(_10);if(_14!=null){var _15=_7.findIndex(_8,_14[_8]);if(_15==-1||_15>_9)break}
_10++}}
if(_10===_11){isc.logWarn("Could not order dropped node by reference to neighbor; trying absolute index");_10=_3.dropIndex}
if(_10===_11){isc.logWarn("Unable to determine drop location in TreeGrid cache sync");return}
var _16=this.data.find(_8,_3.draggedNode[_8]);_5.move(_16,this.data.getParent(_16),_10);this.Super("$67w",arguments)},isc.A.getTreeCellValue=function isc_TreeGrid_getTreeCellValue(_1,_2,_3,_4){if(_2==null||Array.isLoading(_2)){return _1}
var _5=this.data.getLevel(_2),_6=isc.TreeGrid.$82d(),_7=this.getCellCSSText(_2,_3,_4),_8=this.getCellStyle(_2,_3,_4);_6[1]=_8
_6[3]=(this.$127g()?"table-layout:fixed;width:100%;"+(_7!=null?_7:""):_7);if(_6[3]!=null&&!_6[3].endsWith(this.$39))_6[3]+=this.$39;_6[9]=_7;_6[11]=_8;_6[13]=this.getIndentHTML(_5,_2,_6,5);var _9=this.$342(_1,_2,_3,_4,this.shouldShowOpenerIcon(),_8,_7,_6,7);for(var i=0,j=15;i<_9.length;i++){_6[j]=_9[i];j++}
_6[j]=this.$64o
return _6.join(isc.emptyString)},isc.A.shouldShowOpenerIcon=function isc_TreeGrid_shouldShowOpenerIcon(){return this.showOpener},isc.A.$342=function isc_TreeGrid__getTreeCellTitleArray(_1,_2,_3,_4,_5,_6,_7,_8,_9){var _10=0;if(_7==null)_7=this.getCellCSSText(_2,_3,_4);if(_7==null)_7="";else _7+=";";if(!this.wrapCells)_7+="white-space:nowrap;";if(this.$127g()){_7+="overflow:hidden;"+isc.Browser.$114w+":ellipsis"}
if(_6==null)_6=this.getCellStyle(_2,_3,_4);var _11=isc.TreeGrid.$82e();_11[1]=_7;_11[3]=_6;if(_5){var _12=this.getOpenIcon(_2),_13=this.getOpenerIconWidth(_2),_14=this.getOpenerIconHeight(_2),_15=(_3!=null?this.$34l+_3:null);if(_12){_11[5]=this.getIconHTML(_12,_15,_13,null,_14);_10+=_13}else{_11[5]=this.$348(_13||this.iconSize);_10+=_13}}else _11[5]=null;var _16=this.$739(_2),_17=_16||this.getExtraIcon(_2),_18=(_3!=null?this.$349+_3:null),_19=(_16!=null?this.$65a():this.iconSize),_20=this.extraIconGap,_21=this.getIcon(_2),_22=(_3!=null?this.$34n+_3:null);if(_17){_11[6]=this.getIconHTML(_17,_18,_19,_20);_10+=_19+_20}else _11[6]=null;_11[7]=this.getIconHTML(_21,_22,_2.iconSize);_10+=_21==null?0:(_2.iconSize||this.iconSize);_11[9]=_7;_11[11]=this.iconPadding;_11[13]=_6;if(isc.Browser.isIE&&isc.Browser.version<10&&!this.wrapCells){_11[15]="<NOBR>";_11[17]="</NOBR>"}else if(this.$127g()&&isc.Browser.isMoz&&isc.Browser.version<21){_11[15]="<div style='overflow:hidden;text-overflow:ellipsis' $114y='true'>";_11[17]="</div>"}else{_11[17]=_11[15]=null}
_11[16]=_1;if(_8)_8[_9]=_10;return _11},isc.A.$127g=function isc_TreeGrid__fixTitleWidth(){return this.fixedFieldWidths&&!this.autoFitFieldWidths},isc.A.getCellAlign=function isc_TreeGrid_getCellAlign(_1,_2,_3){var _4=this.getField(_3);if(_4&&_4.treeField){return this.isRTL()?"right":"left"}
return this.Super("getCellAlign",arguments)},isc.A.getCellValue=function isc_TreeGrid_getCellValue(_1,_2,_3,_4,_5,_6,_7){var _8=this.invokeSuper(isc.TreeGrid,"getCellValue",_1,_2,_3,_4,_5,_6,_7);if(_3==this.getTreeFieldNum()){_8=this.getTreeCellValue(_8,_1,_2,_3)}
return _8},isc.A.bodyDrawing=function isc_TreeGrid_bodyDrawing(_1,_2,_3,_4,_5){this.$35a={};return this.invokeSuper(isc.TreeGrid,"bodyDrawing",_1,_2,_3,_4,_5)},isc.A.getNodeTitle=function isc_TreeGrid_getNodeTitle(_1,_2,_3){var _4;if(_3.name&&_3.name!=this.$34o){if(_2==-1)return _1[_3.name];_4=this.getEditedRecord(_2)[_3.name]}else{_4=this.data.getTitle(_1)}
return this.applyCellTypeFormatters(_4,_1,_3,_2,this.getFieldNum(_3))},isc.A.getTitleField=function isc_TreeGrid_getTitleField(){if(this.titleField!=null)return this.titleField;return this.getFieldName(this.getTreeFieldNum())},isc.A.getTreeFieldNum=function isc_TreeGrid_getTreeFieldNum(){return this.$34t},isc.A.getOpenAreaWidth=function isc_TreeGrid_getOpenAreaWidth(_1){var _2=this.getOpenerIconWidth(_1),_3=(this.showConnectors?_2:this.indentSize);return((this.data.getLevel(_1)-(this.showRoot?0:1))*_3)+_2},isc.A.getOpenerIconSize=function isc_TreeGrid_getOpenerIconSize(_1){return(this.openerIconSize||(this.showConnectors?this.cellHeight:this.iconSize))},isc.A.getOpenerIconWidth=function isc_TreeGrid_getOpenerIconWidth(_1){return this.openerIconWidth||this.getOpenerIconSize(_1)},isc.A.getOpenerIconHeight=function isc_TreeGrid_getOpenerIconHeight(_1){return this.openerIconHeight||this.getOpenerIconSize(_1)},isc.A.clickInOpenArea=function isc_TreeGrid_clickInOpenArea(_1){if(!this.data.isFolder(_1))return false;var _2=this.getTreeFieldNum(),_3=this.getFieldBody(_2),_4=this.getLocalFieldNum(_2),_5=_3.getColumnLeft(_4),_6=_3.getColumnWidth(_4),_7=this.getOpenAreaWidth(_1),x=_3.getOffsetX();if(this.isRTL()){var _9=_5+_6;return x>=(_9-_7)&&x<=_9}else{return x>=_5&&x<_5+_7}},isc.A.isOverOpenArea=function isc_TreeGrid_isOverOpenArea(){var _1=this.getRecord(this.getEventRow());if(_1==null)return false;return this.clickInOpenArea(_1)},isc.A.clickInCheckboxArea=function isc_TreeGrid_clickInCheckboxArea(_1){if(this.selectionAppearance!=this.$12c)return false;return this.isOverExtraIcon(_1)},isc.A.isOverExtraIcon=function isc_TreeGrid_isOverExtraIcon(_1){if(_1==null)_1=this.getRecord(this.getEventRow());if(_1==null)return false;var _2=this.$739(_1),_3=_2||this.getExtraIcon(_1);if(_3==null)return false;var _4=(_2!=null?this.$65a():this.iconSize);var _5=this.getTreeFieldNum(),_6=this.getFieldBody(_5),_7=this.getLocalFieldNum(_5),_8=_6.getColumnLeft(_7),_9=_6.getColumnWidth(_7),_10=this.getOpenAreaWidth(_1),x=_6.getOffsetX();if(this.isRTL()){var _12=_8+_9;return(x>=(_12-_10-_4)&&x<=(_12-_10))}else{return(x>=(_8+_10)&&x<(_8+_10+_4))}},isc.A.getIndentHTML=function isc_TreeGrid_getIndentHTML(_1,_2,_3,_4){var _5=_1;if(!this.showRoot)_5--;var _6=(this.showConnectors?this.getOpenerIconWidth(_2):this.indentSize),_7=this.isPrinting||isc.Browser.isIE||isc.Browser.isOpera,_8=(_7?1:0);if(this.showConnectors&&this.showFullConnectors){var _9=this.data.$59a(_2);_9.remove(_1);if(!this.showRoot)_9.remove(0);if(_9.length!=0){if(!this.$59c){var _10="ancestor";if(this.isRTL())_10+="_rtl";var _11=isc.Img.urlForState(this.connectorImage,null,null,_10),_12=this.getIconHTML(_11,null,this.cellHeight);this.$59c=_12}
var _13=this.$348(_6),_14=isc.StringBuffer.create(isc.emptyString);_14.append("<NOBR>");if(_7)_14.append(this.$348(1));for(var i=(this.showRoot?0:1);i<_1;i++){if(_9.contains(i)){_14.append(this.$59c);_8+=this.cellHeight}else{_14.append(_13);_8+=_6}}
_14.append("</NOBR>");_14=_14.release();if(_3)_3[_4]=_8;return _14}}
_8=_5*_6;if(_7)_8=Math.max(1,_8);var _16=this.$348(_8);if(isc.Browser.isIE9||(isc.Browser.isStrict&&(isc.Browser.isIE7||isc.Browser.isIE8))){_16="<NOBR>"+_16+"</NOBR>"}
if(_3)_3[_4]=_8;return _16},isc.A.$348=function isc_TreeGrid__indentHTML(_1){if(_1==0)return isc.emptyString;var _2=isc.TreeGrid.$35c;if(_2==null)_2=isc.TreeGrid.$35c={};if(_2[_1]==null)_2[_1]=isc.Canvas.spacerHTML(_1,1);return _2[_1]},isc.A.getOpenIcon=function isc_TreeGrid_getOpenIcon(_1){if(this.showOpener==false)return null;if(!this.data)return null;if(isc.isA.Number(_1))_1=this.data.get(_1);if(_1==null)return null;if(_1.openIcon){return _1.openIcon}else{var _2=this.data.isFolder(_1),_3=_2,_4=_2,_5,_6;if(_2){var _7=this.data.getLoadState(_1);if(_7==isc.Tree.UNLOADED||(_7==isc.Tree.FOLDERS_LOADED&&this.displayNodeType!=isc.Tree.FOLDERS_ONLY))
{_3=true;_4=false}else{_3=this.data.hasChildren(_1,this.displayNodeType);_4=_3&&this.data.isOpen(_1)}}
if(_4&&!this.showFullConnectors)_6=true
else{_6=!this.$35d(_1)}
_5=!this.$35e(_1);return this.getOpenerImageURL(_3,_4,_5,_6)}});isc.evalBoundary;isc.B.push(isc.A.$35e=function isc_TreeGrid__shouldShowPreviousLine(_1){if(!this.data.isEmpty()&&this.data.first()==_1){return false}
if(this.showFullConnectors)return true;var _2=this.data.indexOf(_1),_3=this.getRecord(_2-1),_4=this.data.getParent(_1);if(_3==null)return false;return(_4==_3||_4==this.data.getParent(_3))},isc.A.$35d=function isc_TreeGrid__shouldShowNextLine(_1){if(this.showFullConnectors){var _2=this.data,_3=_2.getParent(_1),_4=_2.getChildren(_3);return(_4.indexOf(_1)!=(_4.getLength()-1))}
var _5=this.data.indexOf(_1),_6=this.getRecord(_5+1);if(_6==null)return false;return(this.data.getParent(_1)==this.data.getParent(_6))},isc.A.getOpenerImageURL=function isc_TreeGrid_getOpenerImageURL(_1,_2,_3,_4){if(!this.$35f){var _5=this.openerImage;this.$35f={opened:isc.Img.urlForState(_5,null,null,"opened"),closed:isc.Img.urlForState(_5,null,null,(this.isRTL()?"closed_rtl":"closed")),opening:isc.Img.urlForState(_5,null,null,"opening")}}
if(this.showConnectors&&!this.$35g){var _5=this.connectorImage,_6=["single","start","end","middle","opened_single","opened_start","opened_middle","opened_end","closed_single","closed_start","closed_middle","closed_end"],_7={},_8=this.isRTL(),_9="_rtl";for(var i=0;i<_6.length;i++){var _11=_6[i],_12=_11;if(_8)_12+=_9;_7[_11]=isc.Img.urlForState(_5,null,null,_12)}
this.$35g=_7}
if(this.showConnectors){var _13=this.$35g;if(_1){if(_2){if(!this.showFullConnectors){if(_3)return _13.opened_single;return _13.opened_end}
if(_3&&_4)return _13.opened_single;else if(_3)return _13.opened_start;else if(_4)return _13.opened_end;else return _13.opened_middle}else{if(_3&&_4)return _13.closed_single;if(_3)return _13.closed_start;if(_4)return _13.closed_end;return _13.closed_middle}}else{if(_3&&_4)return _13.single;if(_3)return _13.start;if(_4)return _13.end;return _13.middle}}else{var _13=this.$35f;if(!_1)return null;if(_2)return _13.opened;return _13.closed}},isc.A.$739=function isc_TreeGrid__getCheckboxIcon(_1){var _2=null;if(this.selectionAppearance==this.$12c){var _3=this.selection.isSelected(_1)?true:false;var _4=(_3&&this.showPartialSelection&&this.selection.isPartiallySelected(_1))?true:false;_2=_4?(this.checkboxFieldPartialImage||this.booleanPartialImage):_3?(this.checkboxFieldTrueImage||this.booleanTrueImage):(this.checkboxFieldFalseImage||this.booleanFalseImage);if(!this.body.canSelectRecord(_1)){if(this.showDisabledSelectionCheckbox){if(_2!=this.$5w)_2=isc.Img.urlForState(_2,null,null,"Disabled")}else{if(this.leaveSelectionCheckboxGap){_2=isc.Canvas.$wz}else{_2=null}}}
if(_2==this.$5w)_2=isc.Canvas.$wz}
return _2},isc.A.getExtraIcon=function isc_TreeGrid_getExtraIcon(_1){return null},isc.A.getIcon=function isc_TreeGrid_getIcon(_1,_2){if(isc.isA.Number(_1))_1=this.data.get(_1);if(!_1)return null;var _3=_1[this.customIconProperty],_4=(_3!=null),_5=this.data.isFolder(_1);if(!_4){if(_5)_3=this.folderIcon;else _3=this.nodeIcon}
var _6;if(_5){var _7=_2?false:(this.lastDropFolder==_1&&_1.$347),_8=_2?false:!!this.data.isOpen(_1);if(_7){if(_1.dropIcon!=null)_3=_1.dropIcon;else if(!_4&&this.folderDropImage!=null)_3=this.folderDropImage;else{var _9;if(_4){_9=_1[this.customIconDropProperty];if(_9==null)_9=this.showCustomIconDrop}else{_9=this.showDropIcons}
if(_9)_6=this.dropIconSuffix}}else if(_8){if(_1.openedIcon!=null)_3=_1.openedIcon;else if(!_4&&this.folderOpenImage!=null)_3=this.folderOpenImage;else{var _10;if(_4){_10=_1[this.customIconOpenProperty];if(_10==null)_10=this.showCustomIconOpen}else{_10=this.showOpenIcons}
if(_10)_6=this.openIconSuffix;else if(!_4)_6=this.closedIconSuffix}}else{if(!_4){if(this.folderClosedImage)_3=this.folderClosedImage;else _6=this.closedIconSuffix}}}else{if(!_4&&this.fileImage)_3=this.fileImage}
return _3==null?null:isc.Img.urlForState(_3,false,false,_6)},isc.A.$117g=function isc_TreeGrid__getIconHTMLCacheKey(_1,_2,_3,_4){return _1+"#w="+_2+",extraRightMargin="+_3+",h="+_4},isc.A.getIconHTML=function isc_TreeGrid_getIconHTML(_1,_2,_3,_4,_5){if(_1==null)return isc.emptyString;if(_3==null)_3=this.iconSize;if(_5==null)_5=_3;if(this.$35a==null){this.$35a={}}
var _6=this.$35a.iconHTML;if(_6==null)_6=this.$35a.iconHTML={};var _7=this.$117g(_1,_3,_4,_5),_8=_6[_7];if(_8==null){var _9;if(_4){_9=(this.isRTL()?"margin-left:":"margin-right:")+_4+"px"}
_8=_6[_7]=this.$wf({src:_1,width:_3,height:_5,name:_2,align:this.$34r,extraCSSText:_9,generateSpan:isc.Canvas.$123e})}
_8[16]=_2;return _8.join(isc.$ad)},isc.A.setRowIcon=function isc_TreeGrid_setRowIcon(_1,_2){if(!isc.isA.Number(_1))_1=this.data.indexOf(_1);if(_1!=-1&&this.getIcon(_1)!=null){this.setImage(this.$34n+_1,_2,null,isc.Canvas.$123e)}},isc.A.setNodeIcon=function isc_TreeGrid_setNodeIcon(_1,_2){_1[this.customIconProperty]=_2;this.setImage(this.$34n+this.getRecordIndex(_1),_2,null,isc.Canvas.$123e)},isc.A.getPrintHTML=function isc_TreeGrid_getPrintHTML(_1,_2){var _3=this.printExpandTree;if(_3==null)_3=_1?_1.expandTrees:null;if(_3&&this.data){if(isc.ResultTree&&isc.isA.ResultTree(this.data)&&this.data.loadDataOnDemand){this.logWarn("Printing TreeGrid with option to expand folders on print not supported for load on demand trees.")}else{this.data.openAll()}}
return this.Super("getPrintHTML",arguments)},isc.A.getExportFieldValue=function isc_TreeGrid_getExportFieldValue(_1,_2,_3){var _4=this.Super("getExportFieldValue",arguments);if(_3==this.getTreeFieldNum()&&this.exportIndentString){var _5=this.data.getLevel(_1);while(--_5>0)_4=this.exportIndentString+_4}
return _4});isc.B._maxIndex=isc.C+80;isc.TreeGrid.registerStringMethods({folderOpened:"node",folderClosed:"node",folderClick:"viewer,folder,recordNum",leafClick:"viewer,leaf,recordNum",nodeClick:"viewer,node,recordNum",folderContextClick:"viewer,folder,recordNum",leafContextClick:"viewer,leaf,recordNum",nodeContextClick:"viewer,node,recordNum",dataArrived:"parentNode",onFolderDrop:"nodes,folder,index,dropPosition,sourceWidget"});isc.defineInterface("Observer").addInterfaceProperties({registerObserved:isc.ClassFactory.TARGET_IMPLEMENTS,unregisterObserved:isc.ClassFactory.TARGET_IMPLEMENTS});isc.defineInterface("AutoObserver","Observer").addInterfaceProperties({observedName:"observed",observations:{},registerObserved:function(_1){this[this.observedName]=_1;for(var _2 in this.observations){this.observe(_1,_2,this.observations[_2])}
if(isc.isA.Canvas(_1)){this.observe(_1,"destroy","observer.unregisterObserved(observed)")}},unregisterObserved:function(_1){this[this.observedName]=null;for(var _2 in this.observations){this.ignore(_1,_2)}}});isc.defineInterface("GridAutoObserver","AutoObserver").addInterfaceProperties({observedName:"grid"});isc.defineClass("GridTotalRowsIndicator","Label","GridAutoObserver");isc.A=isc.GridTotalRowsIndicator.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.height=1;isc.A.wrap=false;isc.A.overflow="visible";isc.A.valign="center";isc.A.observations={"dataArrived":"observer.gridDataChanged()","setData":"observer.gridDataChanged()"};isc.A.dynamicContents=true;isc.A.contents="Total Rows: ${this.rowCount}";isc.A.rowCount="N/A";isc.B.push(isc.A.gridDataChanged=function isc_GridTotalRowsIndicator_gridDataChanged(){var _1=this.grid.data;if(!_1)this.rowCount="N/A";if(isc.isA.ResultSet(_1)){if(_1.lengthIsKnown()){if(_1.getLength()!=0&&_1.progressiveLoading){var _2=_1.getLength()-1;if(_1.rowIsLoaded(_2))this.rowCount=_1.getLength();else this.rowCount=_1.getLength()+"+ (progressive loading)"}else{this.rowCount=_1.getLength()}}
else this.rowCount="N/A"}else if(isc.isAn.Array(_1)){this.rowCount=_1.getLength()}
this.markForRedraw()});isc.B._maxIndex=isc.C+1;isc.defineClass("ObserverToolStrip","ToolStrip");isc.A=isc.ObserverToolStrip.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.initWidget=function isc_ObserverToolStrip_initWidget(){this.Super("initWidget",arguments);for(var i=0;i<this.members.length;i++){var m=this.members[i];if(isc.isAn.Observer(m)){m.registerObserved(this.grid)}}});isc.B._maxIndex=isc.C+1;isc.defineClass("GridToolStrip","ObserverToolStrip");isc.A=isc.GridToolStrip.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.membersMargin=5;isc.A.addButtonDefaults={_constructor:"Img",size:16,layoutAlign:"center",src:"[SKIN]/actions/add.png",click:"this.creator.grid.startEditingNew()"};isc.A.removeButtonDefaults={_constructor:"Img",size:16,layoutAlign:"center",src:"[SKIN]/actions/remove.png",click:"this.creator.grid.removeSelectedData()"};isc.A.refreshButtonDefaults={_constructor:"Img",size:16,layoutAlign:"center",src:"[SKIN]/actions/refresh.png",click:"this.creator.grid.invalidateCache()"};isc.A.exportButtonDefaults={_constructor:"IButton",title:"Export to CSV",layoutAlign:"center",click:"this.creator.grid.exportData()"};isc.A.totalRowsIndicatorDefaults={_constructor:"GridTotalRowsIndicator",layoutAlign:"center"};isc.A.members=["autoChild:removeButton","autoChild:addButton","autoChild:exportButton","starSpacer","autoChild:refreshButton","autoChild:totalRowsIndicator"];isc.B.push(isc.A.initWidget=function isc_GridToolStrip_initWidget(){this.Super("initWidget",arguments)});isc.B._maxIndex=isc.C+1;isc.ClassFactory.defineClass("FieldPickerField");isc.A=isc.FieldPickerField;isc.A.frozenTitle="Is Frozen";isc.A.precisionTitle="Precision";isc.A.decimalPrecisionTitle="Decimal Precision";isc.A.decimalPadTitle="Decimal Pad";isc.A.alignTitle="Header Text Alignment";isc.A.cellAlignTitle="Data Alignment";isc.ClassFactory.defineInterface("FieldPickerGrid").addInterfaceProperties({clearCriteriaIfPresent:function(){if(!isc.isA.emptyObject(this.getCriteria())){if(this.willFetchData(null,"substring")){this.logWarn("ListGrid.willFetchData() has returned true unexpectedly while trying to clear the filter criteria prior to save.")}
this.filterData()}},getExpansionComponent:function(_1){var _2=this.parentElement,_3=_2.shuttle.changedRecords,_4=_3[_1.name];if(_4){_1=isc.shallowClone(_1);isc.addProperties(_1,_4)}
return _2.createExpansionDynamicForm(this.editableProperties,_1)},saveAndCollapseRecord:function(_1,_2,_3){var _4=this.parentElement,_5=_1.getChangedValues(),_6=_4.shuttle.changedRecords;if(_6[_3.name])isc.addProperties(_6[_3.name],_5);else _6[_3.name]=_5;this.$84t(_3,_2)},setCanExpandRecords:function(_1){var _2=_1&&!this.canExpand;this.Super("setCanExpandRecords",arguments);if(_2)this.setRecordExpansion(0,this.getTotalRows())},setRecordExpansion:function(_1,_2){var _3=0,_4=0,_5=0;var _6=this.parentElement.shuttle,_7=_6.picker.expansionDataSource,_8=_7.getFieldNames(),_9=_7.getFields();for(var i=0;i<_8.length;i++){var _11=_8[i];if(this.editableProperties.contains(_11)){switch(_11){default:_5++;case"precision":_4++;case"decimalPad":case"decimalPrecision":_3++;break}}}
var _12=false,_13=this.canExpandRecordProperty;for(var i=_1;i<_2;i++){var _14=true,_15=this.getFieldRecord(i);if(!_15.userSummary&&!_15.userFormula){if(isc.SimpleType.inheritsFrom(_15.type,"float")){_14=_3>0}else if(isc.SimpleType.inheritsFrom(_15.type,"integer")){_14=_4>0}else{_14=_5>0}}
if(_15[_13]==null||_15[_13]==true){if(!_14){_15[_13]=false;_12=true}}else{if(_14){delete _15[_13];_12=true}}}
if(_12)this.markForRedraw()},collapseRecordList:function(_1,_2){for(var i=0;i<_1.length;i++){var _4=_1[i];if(this.isExpanded(_4))this.collapseRecord(_4);if(_2)_4.$9g=_4.title}},collapseAllRecords:isc.ClassFactory.TARGET_IMPLEMENTS,filterData:function(){this.collapseAllRecords();return this.Super("filterData",arguments)},expandRecord:function(_1){this.Super("expandRecord",arguments);var _2=this.getCurrentExpansionComponent(_1);if(_2!=null)_2.validate()},validateFieldRecord:function(_1){if(this.isExpanded(_1))return this.getCurrentExpansionComponent(_1).validate();var _2=this.parentElement.shuttle,_3=_2.changedRecords[_1.name];if(!_3)return true;return _2.picker.validateDataSourceField(_3)},validateRecordList:function(_1){if(!this.canExpandRecords)return true;var _2=this.canExpandRecordProperty;for(var i=0;i<_1.length;i++){var _4=_1[i];if(_4[_2]!=false&&!this.validateFieldRecord(_4)){if(!this.isExpanded(_4)){this.expandRecord(_4);this.getCurrentExpansionComponent(_4).validate()}
this.scrollToRow(this.getRecordIndex(_4));return false}}
return true},validateAllRecords:isc.ClassFactory.TARGET_IMPLEMENTS,$1021:function(_1,_2,_3){var _4=[],_5=this.creator.dataBoundComponent,_6=!isc.isA.ListGrid(_5)||_5.canReorderFields;for(var i=0;i<_1.length;i++){var _8=_1[i];if(_2){if(_8.canHide==false)_4.add(_8)}else{if(_8.canReorder==null&&!_6||_8.canReorder==false)_4.add(_8)}}
if(_3)return _1.length>_4.length;else{if(_4.length>0)_1.removeList(_4);return _1.length>0}},willAcceptDrop:function(){var _1=this.ns.EH,_2=this.Super("willAcceptDrop");if(!_2)return false;return this.$1021(_1.dragTarget.getDragData(),_1.dragTarget!=this,true)},$1022:function(){},canHover:true,showHover:true,cellHoverHTML:function(_1,_2,_3){if(!this.creator.showFieldPrompts)return null;if(_1&&_1.prompt)return _1.prompt;return null},getContiguousSelection:function(){var _1=this.getSelectedRecords()||[];if(_1.length==0)return null;var _2=this.getRecordSetBounds(_1,-1);var _3=[];for(var i=1;i<_1.length;i++){var _5=_1[i];if(_3.length==0&&this.getRecord(_2+i)!=_5||_3.length>0)_3.add(_5)}
this.deselectRecords(_3);return this.getSelectedRecords()},getRecordSetBounds:function(_1,_2,_3){if(_3==null)_3=0;var _4=this.getTotalRows();switch(_2){case-1:var _5=this.getRecordIndex(_1.first());if(_5>=0){return Math.max(_5-_3,0)}
break;case 1:var _5=this.getRecordIndex(_1.last());if(_5>=0){return Math.min(_5+_3+1,_4)}
break}
return null},getCellValue:function(_1,_2,_3){var _4=this.Super("getCellValue",arguments);var _5=this.getField(_3);if(_5.name!="$9g"||_4!=this.emptyCellValue)return _4;var _6=this.creator.dataBoundComponent;if(isc.isA.Function(_6.getFieldTitle)){var _7=_6.getField(_1.name);if(_7)return _6.getFieldTitle(_7)}
return _1.name}});isc.ClassFactory.defineClass("FieldPickerListGrid","ListGrid","FieldPickerGrid");isc.A=isc.FieldPickerListGrid.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.getFieldRecord=isc.ListGrid.getPrototype().getRecord;isc.A.getTotalFieldRecords=isc.ListGrid.getPrototype().getTotalRows;isc.A.filterData=isc.FieldPickerGrid.getPrototype().filterData;isc.A.expandRecord=isc.FieldPickerGrid.getPrototype().expandRecord;isc.A.willAcceptDrop=isc.FieldPickerGrid.getPrototype().willAcceptDrop;isc.A.setCanExpandRecords=isc.FieldPickerGrid.getPrototype().setCanExpandRecords;isc.A.getExpansionComponent=isc.FieldPickerGrid.getPrototype().getExpansionComponent;isc.A.saveAndCollapseRecord=isc.FieldPickerGrid.getPrototype().saveAndCollapseRecord;isc.A.cellHoverHTML=isc.FieldPickerGrid.getPrototype().cellHoverHTML;isc.A.getCellValue=isc.FieldPickerGrid.getPrototype().getCellValue;isc.B.push(isc.A.clearFieldRecords=function isc_FieldPickerListGrid_clearFieldRecords(){},isc.A.dataArrived=function isc_FieldPickerListGrid_dataArrived(_1,_2){if(this.canExpandRecords&&_1<_2)this.setRecordExpansion(_1,_2)},isc.A.collapseAllRecords=function isc_FieldPickerListGrid_collapseAllRecords(){if(this.canExpandRecords){var _1=this.data.getAllRows();this.collapseRecordList(_1)}},isc.A.validateAllRecords=function isc_FieldPickerListGrid_validateAllRecords(){if(this.canExpandRecords){var _1=this.data.getAllRows();return this.validateRecordList(_1)}
return true},isc.A.requestSyntheticReorder=function isc_FieldPickerListGrid_requestSyntheticReorder(_1,_2){if(this.$100j||!this.canReorderRecords)return;if(!this.isObserving(this.data,"handleUpdate")){this.observe(this.data,"handleUpdate","observer.applySyntheticReorder(arguments[1])")}
var i,_4={};for(i=0;i<_1.length;i++)_4[_1[i].name]=true;this.$100j={target:_2.name,total:_1.length,arrived:0,keys:_4}},isc.A.applySyntheticReorder=function isc_FieldPickerListGrid_applySyntheticReorder(_1){var _2=this.$100j;if(!_2){this.ignore(this.data,"handleUpdate");return}
if(!isc.isAn.Array(_1))_1=[_1];if(_1==null)return;for(var i=0;i<_1.length;i++){if(_2.keys[_1[i].name])_2.arrived++}
if(_2.arrived!=_2.total)return;if(!this.data.lengthIsKnown())return;var _4=[],_5=this.data.getLength(),_6=Math.max(0,_5-_2.total),_7=this.data.findIndex("name",_2.target);for(var i=_6;i<_5;i++){var _8=this.data.get(i)||{};if(_2.keys[_8.name])_4.add(_8)}
this.$100j=null;this.ignore(this.data,"handleUpdate");this.delayCall("$136w",[_2,_4,_7])},isc.A.$136w=function isc_FieldPickerListGrid__finishApplySyntheticReorder(_1,_2,_3){this.transferRecords(_2,_1.target,_3,this,this.$1022)},isc.A.dragComplete=function isc_FieldPickerListGrid_dragComplete(){var _1=this.parentElement;_1.shuttle.markForSave()},isc.A.transferRecords=function isc_FieldPickerListGrid_transferRecords(_1,_2,_3,_4,_5){var _6=this.parentElement,_7=this!=_4,_8=_5==this.$1022;if(!_8)this.$1021(_1,_7);if(_7&&!_4.validateRecordList(_1))_1.clear();if(_1.length>0)_6.shuttle.markForSave();if(_7){_4.collapseRecordList(_1,true)}
if(_7&&_2!=null){this.requestSyntheticReorder(_1,_2)}
return this.Super("transferRecords",arguments)});isc.B._maxIndex=isc.C+9;isc.ClassFactory.defineClass("FieldPickerTreeGrid","TreeGrid","FieldPickerGrid");isc.A=isc.FieldPickerTreeGrid.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.filterData=isc.FieldPickerGrid.getPrototype().filterData;isc.A.expandRecord=isc.FieldPickerGrid.getPrototype().expandRecord;isc.A.willAcceptDrop=isc.FieldPickerGrid.getPrototype().willAcceptDrop;isc.A.setCanExpandRecords=isc.FieldPickerGrid.getPrototype().setCanExpandRecords;isc.A.getExpansionComponent=isc.FieldPickerGrid.getPrototype().getExpansionComponent;isc.A.saveAndCollapseRecord=isc.FieldPickerGrid.getPrototype().saveAndCollapseRecord;isc.A.cellHoverHTML=isc.FieldPickerGrid.getPrototype().cellHoverHTML;isc.A.getCellValue=isc.FieldPickerGrid.getPrototype().getCellValue;isc.B.push(isc.A.createResultTree=function isc_FieldPickerTreeGrid_createResultTree(_1,_2,_3){var _4=this.parentElement.shuttle.picker;if(!_3.dataProperties)_3.dataProperties={};isc.addProperties(_3.dataProperties,{modelType:"parent",defaultIsFolder:true,reportCollisions:false,idField:_4.pickerIdField,parentIdField:"_"+_4.pickerParentIdField});var _5=this.Super("createResultTree",arguments);if(this.isObserving(this.data,"dataSourceDataChanged")){this.ignore(this.data,"dataSourceDataChanged")}
this.observe(_5,"dataSourceDataChanged","observer.invalidateCacheIfMissingNodes()");return _5},isc.A.getTotalFieldRecords=function isc_FieldPickerTreeGrid_getTotalFieldRecords(){this.$990=this.data.getDescendants();return this.$990.length},isc.A.getFieldRecord=function isc_FieldPickerTreeGrid_getFieldRecord(_1){return this.$990[_1]},isc.A.clearFieldRecords=function isc_FieldPickerTreeGrid_clearFieldRecords(){delete this.$990},isc.A.dataArrived=function isc_FieldPickerTreeGrid_dataArrived(_1){if(this.canExpandRecords&&isc.isA.Object(_1)){this.$990=this.data.getChildren(_1);this.setRecordExpansion(0,this.$990.getLength());delete this.$990}},isc.A.collapseAllRecords=function isc_FieldPickerTreeGrid_collapseAllRecords(){if(this.canExpandRecords){var _1=this.data.getDescendants();this.collapseRecordList(_1)}},isc.A.validateAllRecords=function isc_FieldPickerTreeGrid_validateAllRecords(){if(this.canExpandRecords){var _1=this.data.getDescendants();return this.validateRecordList(_1)}
return true},isc.A.dragComplete=function isc_FieldPickerTreeGrid_dragComplete(){var _1=this.parentElement;_1.shuttle.markForSave()},isc.A.transferNodes=function isc_FieldPickerTreeGrid_transferNodes(_1,_2,_3,_4){var _5=this.parentElement,_6=this!=_4;this.$1021(_1,_6);if(_6&&!_4.validateRecordList(_1))_1.clear();if(_1.length>0)_5.shuttle.markForSave();_4.$991=true;if(_6){_4.collapseRecordList(_1,true)}
this.Super("transferNodes",arguments)},isc.A.invalidateCacheIfMissingNodes=function isc_FieldPickerTreeGrid_invalidateCacheIfMissingNodes(){if(this.data.getAllNodes().length<
this.dataSource.cacheData.length){if(!this.$991)return;delete this.$991;this.invalidateCache()}});isc.B._maxIndex=isc.C+10;isc.ClassFactory.defineClass("FieldPickerGridView","VLayout");isc.A=isc.FieldPickerGridView.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.expansionFormDefaults={_constructor:"DynamicForm",width:5,titleAlign:isc.Page.isRTL()?"right":"left",overflow:"visible",wrapItemTitles:false,validateOnExit:true,validateOnChange:true};isc.B.push(isc.A.initWidget=function isc_FieldPickerGridView_initWidget(){this.Super(this.$oc);var _1=isc.SectionStack.create({height:5,overflow:"visible",sections:[{title:this.title,controls:this.controls,controlsLayoutProperties:{membersMargin:2,layoutEndMargin:2},canCollapse:false}]});this.addMember(_1)},isc.A.addMember=function isc_FieldPickerGridView_addMember(_1){this.Super("addMember",arguments);if(isc.isA.ListGrid(_1))this.grid=_1},isc.A.createExpansionDynamicForm=function isc_FieldPickerGridView_createExpansionDynamicForm(_1,_2){var _3=[],_4=this.shuttle.picker.dataBoundComponent,_5=this.shuttle.picker.expansionDataSource,_6=_5.getFieldNames();for(var i=0;i<_6.length;i++){var _8=_6[i],_9=_1.contains(_8);switch(_8){case"decimalPad":case"decimalPrecision":if(!isc.SimpleType.inheritsFrom(_2.type,"float"))_9=false;break;case"precision":if(!isc.SimpleType.inheritsFrom(_2.type,"float")&&!isc.SimpleType.inheritsFrom(_2.type,"integer"))_9=false;break}
if(_9)_3.add({name:_8})}
if(_2.userSummary){_3.add({type:"text",autoFit:true,endRow:false,record:_2,shuttle:this.shuttle,editorType:"ButtonItem",name:"$99k",title:_4.editSummaryFieldText,click:function(){this.shuttle.confirmSaveOK('editSummaryField',this.record)}})}
if(_2.userFormula){_3.add({type:"text",autoFit:true,endRow:false,record:_2,shuttle:this.shuttle,editorType:"ButtonItem",name:"$99l",title:_4.editFormulaFieldText,click:function(){this.shuttle.confirmSaveOK('editFormulaField',this.record)}})}
if(_2.userSummary||_2.userFormula){_3.add({type:"text",autoFit:true,startRow:false,record:_2,shuttle:this.shuttle,editorType:"ButtonItem",name:"$112t",title:"Remove Field",click:function(){this.shuttle.confirmRemoveOK(this.record)}})}
var _10=this.createAutoChild("expansionForm",{dataSource:_3.length>0?_5:null,fields:_3});_10.setValues(_2);return _10},isc.A.cleanup=function isc_FieldPickerGridView_cleanup(){this.grid.collapseAllRecords()});isc.B._maxIndex=isc.C+4;isc.ClassFactory.defineClass("FieldPickerShuttle","HLayout");isc.A=isc.FieldPickerShuttle.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.changedRecords={};isc.A.availableViewDefaults={_constructor:"FieldPickerGridView"};isc.A.currentViewDefaults={_constructor:"FieldPickerGridView"};isc.A.buttonStackDefaults={align:"center",overflow:"visible",layoutAlign:"center"};isc.B.push(isc.A.applyCompleteFields=function isc_FieldPickerShuttle_applyCompleteFields(_1){var i,_3,_4,_5=[];var _6=this.picker.shouldUseTrees(),_7=this.picker.pickerParentIdField;var _8=this.currentView.grid,_9=_8.getTotalFieldRecords();for(i=0;i<_9;i++){_4=_8.getFieldRecord(i);_3=this.picker.getOriginalField(_4);_3.title=_4.$9g;if(_8.isExpanded(_4)){var _10=_8.getCurrentExpansionComponent(_4);if(_10&&_10.valuesHaveChanged()){var _11=_10.getChangedValues();isc.addProperties(_3,_11);_10.setValues(_11)}}
if(_6)_3[_7]=_4["_"+_7];_3.showIf="true";_3.visible=true;_3.hidden=false;_5.add(_3)}
_8.clearFieldRecords();var _12=this.availableView.grid,_13=_12.getTotalFieldRecords();for(i=0;i<_13;i++){_4=_12.getFieldRecord(i);_3=this.picker.getOriginalField(_4);if(_6)_3[_7]=_4["_"+_7];_3.showIf="false";_3.visible=false;_3.hidden=true;_5.add(_3)}
_12.clearFieldRecords();for(i=0;i<_5.length;i++){var _14=this.changedRecords[_5[i].name];if(_14)isc.addProperties(_5[i],_14)}
_1.setFields(_5);this.clearChanges()},isc.A.clearChanges=function isc_FieldPickerShuttle_clearChanges(){this.changedRecords={};this.recordsMoved=false},isc.A.markForSave=function isc_FieldPickerShuttle_markForSave(){this.recordsMoved=true},isc.A.requiresSave=function isc_FieldPickerShuttle_requiresSave(){var _1=this.currentView.grid,_2=_1.getTotalFieldRecords();for(var i=0;i<_2;i++){var _4=_1.getFieldRecord(i);if(_1.isExpanded(_4)){var _5=_1.getCurrentExpansionComponent(_4);if(_5&&_5.valuesHaveChanged())return true}}
_1.clearFieldRecords();var _6=isc.getKeys(this.changedRecords);return this.recordsMoved||_6.length>0},isc.A.confirmRemoveOK=function isc_FieldPickerShuttle_confirmRemoveOK(_1){this.$99n=_1;isc.confirm(this.picker.removeText,{target:this,methodName:"completeConfirmRemoveOK"})},isc.A.completeConfirmRemoveOK=function isc_FieldPickerShuttle_completeConfirmRemoveOK(_1){var _2=this.$99n;delete this.$99n;if(_1)this.currentView.grid.removeData(_2)},isc.A.confirmSaveOK=function isc_FieldPickerShuttle_confirmSaveOK(_1,_2){this.$99m=_1;this.$99n=_2;if(this.requiresSave()){isc.confirm(this.picker.confirmText,{target:this,methodName:"completeSaveOK"})}else{this.completeSaveOK(true)}},isc.A.completeSaveOK=function isc_FieldPickerShuttle_completeSaveOK(_1){var _2=this.$99m,_3=this.$99n;delete this.$99m;delete this.$99n;if(_1)this.saveAndExecuteMethod(_2,_3)},isc.A.saveAndExecuteMethod=function isc_FieldPickerShuttle_saveAndExecuteMethod(_1,_2){var _3=this.picker;if(!_3.currentFieldsGrid.validateAllRecords())return false;_3.currentFieldsGrid.endEditing();_3.currentFieldsGrid.clearCriteriaIfPresent();_3.availableFieldsGrid.clearCriteriaIfPresent();_3.currentFieldsGrid.collapseAllRecords();this.applyCompleteFields(_3.dataBoundComponent);if(_1!=null)this.openEditor(_1,_2);return true},isc.A.openEditor=function isc_FieldPickerShuttle_openEditor(_1,_2){var _3=this.picker.dataBoundComponent;_3[_1](_2);var _4=true;switch(_1){case"addSummaryField":case"addFormulaField":_4=false;case"editSummaryField":case"editFormulaField":var _5=_3.fieldEditorWindow;if(_5){var _6=_5.items[0];if(_4)_5.items[0].saveAddAnotherButton.hide();this.observe(_6,"fireOnClose","observer.picker.refresh(observed)");_6.testRecord=this.picker.sampleRecord}
break;case"editHilites":var _5=_3.hiliteWindow;if(_5){this.observe(_5,"hide","observer.picker.refresh(null, observed)")}
break}},isc.A.initWidget=function isc_FieldPickerShuttle_initWidget(){this.Super(this.$oc);var _1=this.picker,_2=_1.dataBoundComponent;this.availableView=this.createAutoChild("availableView",{shuttle:this,controls:_1.availableFieldsHeaderControls,title:_1.availableFieldsTitle});var _3=[];var _4=_1.currentFieldsHeaderControls;if(_4==null){_4=[];if(_1.showHilitesButton)_4.add("hilitesButton");if(_2.canAddFormulaFields||_2.canAddSummaryFields)_4.add("customFieldsMenuButton")}
for(var i=0;i<_4.length;i++){var _6=_4[i];if(_6=="hilitesButton"){_3.add(isc.IButton.create({shuttle:this,autoFit:true,title:_1.hilitesText,click:"this.shuttle.confirmSaveOK('editHilites')"}))}else if(_6=="customFieldsMenuButton"){var _7=[];if(_2.canAddSummaryFields)_7.add({shuttle:this,title:_2.addSummaryFieldText,click:"item.shuttle.confirmSaveOK('addSummaryField')",icon:"[SKINIMG]ListGrid/formula_menuItem.png"});if(_2.canAddFormulaFields)_7.add({shuttle:this,title:_2.addFormulaFieldText,click:"item.shuttle.confirmSaveOK('addFormulaField')",icon:"[SKINIMG]ListGrid/formula_menuItem.png"});_3.add(isc.MenuButton.create({autoFit:true,title:_1.addCustomFieldsButtonTitle,menu:isc.Menu.create({data:_7})}))}else if(isc.isA.Canvas(_6)){_6.addProperties({shuttle:this,picker:_1});_3.add(_6)}}
this.currentView=this.createAutoChild("currentView",{shuttle:this,controls:_3,title:_1.currentFieldsTitle});this.initTransferArrows();this.addMembers([this.availableView,this.horizontalArrows,this.currentView,this.verticalArrows])},isc.A.initTransferArrows=function isc_FieldPickerShuttle_initTransferArrows(){var _1=this.currentView,_2=this.availableView;this.horizontalArrows=isc.VLayout.create({width:1,members:[isc.ImgButton.create({size:16,showDown:false,align:"center",src:"[SKINIMG]TransferIcons/right.png",click:function(){_1.grid.transferSelectedData(_2.grid)}}),isc.LayoutSpacer.create({height:5}),isc.ImgButton.create({size:16,showDown:false,src:"[SKINIMG]TransferIcons/left.png",click:function(){_2.grid.transferSelectedData(_1.grid)}})]},this.buttonStackDefaults);var _3=function(_8){var _4=_1.grid,_5=_4.getSelection()||[],_6=_8==-1?0:_4.getTotalRows();_4.transferRecords(_5,null,_6,_4);_4.scrollToRow(_6)};var _7=function(_8){var _4=_1.grid,_5=_4.getContiguousSelection();if(_5){var _6=_4.getRecordSetBounds(_5,_8,1);_4.transferRecords(_5,null,_6,_4);_4.scrollToRow(_6-(_8+1)/2)}};this.verticalArrows=isc.VLayout.create({width:1,members:[isc.ImgButton.create({size:16,showDown:false,src:"[SKINIMG]TransferIcons/up_first.png",click:function(){_3(-1)}}),isc.LayoutSpacer.create({height:5}),isc.ImgButton.create({size:16,showDown:false,src:"[SKINIMG]TransferIcons/up.png",click:function(){_7(-1)}}),isc.LayoutSpacer.create({height:5}),isc.ImgButton.create({size:16,showDown:false,src:"[SKINIMG]TransferIcons/down.png",click:function(){_7(1)}}),isc.LayoutSpacer.create({height:5}),isc.ImgButton.create({size:16,showDown:false,src:"[SKINIMG]TransferIcons/down_last.png",click:function(){_3(1)}})]},this.buttonStackDefaults)},isc.A.cleanup=function isc_FieldPickerShuttle_cleanup(){this.currentView.cleanup();this.clearChanges()});isc.B._maxIndex=isc.C+13;isc.ClassFactory.defineClass("FieldPicker","VLayout");isc.A=isc.FieldPicker.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.layoutMargin=10;isc.A.membersMargin=10;isc.A.originalFields={};isc.A.dataBoundComponent=null;isc.A.sampleRecord="first";isc.A.showHilitesButton=true;isc.A.hilitesText="Highlights...";isc.A.availableFieldsTitle="Available Fields";isc.A.currentFieldsTitle="Visible Fields";isc.A.addCustomFieldsButtonTitle="Add Custom Fields";isc.A.availableTitleTitle="Name";isc.A.currentTitleTitle="Field Title";isc.A.sampleValueTitle="Sample Value";isc.A.sampleValueField="$99o";isc.A.showAvailableSampleValue=true;isc.A.showSampleValues=true;isc.A.confirmText="Must save pending changes to proceed. OK?";isc.A.removeText="You are about to remove the field. Are you sure?";isc.A.instructions="Drag and drop or use arrows to move fields.  Drag reorder to change field order.";isc.A.saveAndExitButtonTitle="Apply";isc.A.cancelButtonTitle="Cancel";isc.A.removeItemTitle="Remove";isc.A.emptyTitleHint="[No title specified]";isc.A.showFieldPrompts=true;isc.A.sortAvailableFields=true;isc.A.availableFieldsSortDirection="ascending";isc.A.availableFieldsHeaderControls=null;isc.A.availableFieldsGridDefaults={canGroupBy:false,dataFetchMode:"basic",dragDataAction:"move",canFreezeFields:false,showFilterEditor:true,filterOnKeypress:true,canDragRecordsOut:true,loadDataOnDemand:false,dragRecategorize:"never",keepParentsOnFilter:true,autoFitWidthApproach:"both",useAllDataSourceFields:true,canAcceptDroppedRecords:true,createDefaultTreeField:false,recordEnabledProperty:"$1023",autoFetchTextMatchStyle:"substring"};isc.A.saveAndExitButtonDefaults={_constructor:"IButton",click:"this.picker.saveClick()"};isc.A.cancelChangesButtonDefaults={_constructor:"IButton",click:"this.picker.closeClick()"};isc.B.push(isc.A.getOriginalField=function isc_FieldPicker_getOriginalField(_1){return this.originalFields[_1[this.primaryKeyField]]},isc.A.shouldUseTrees=function isc_FieldPicker_shouldUseTrees(){if(this.dataBoundComponent){var _1=this.dataBoundComponent.dataSource;return _1!=null&&!!_1.showFieldsAsTree}
return false},isc.A.duplicateAndValidateFields=function isc_FieldPicker_duplicateAndValidateFields(_1){var _2=[],_3=this.dataBoundComponent,_4=!isc.isA.ListGrid(_3)||_3.canReorderFields;for(var i=0;i<_1.length;i++){var _6=_1[i];if(!_6.excludeFromState)_2.add(_6);if((_6.canReorder==false||_6.canReorder==null&&!_4)&&_6.canHide==false)_6.$1023=false}
return _2},isc.A.createDataSourceFromFields=function isc_FieldPicker_createDataSourceFromFields(_1,_2,_3,_4){var _5=_4?_1:this.duplicateAndValidateFields(_1);if(_2!=null)_5.removeList(_2);var _1=[],_6=this.dataBoundComponent;if(_3){_5=_5.filter(function(_12){return _12.canHide!=false})}
var _7,_8=_3?this.availableTitleTitle:this.currentTitleTitle;if(isc.isA.String(this.sampleRecord)){if(this.sampleRecord=="first"){if(isc.isA.ListGrid(_6)){if(_6.fieldPickerShowSampleValues){var _9=_6.getOriginalData();this.sampleRecord=_9&&_9.getLength()>0?_9.get(0):null}}else if(this.showSampleValues){this.sampleRecord=_6.getRecord(0)}
if(!isc.isAn.Object(this.sampleRecord))this.sampleRecord=null}else if(this.sampleRecord=="firstOpenLeaf"&&isc.isA.TreeGrid(_6)){var _9=_6.getData();var _10=_9.getOpenList(_9.getRoot(),isc.Tree.LEAVES_ONLY);if(_10.length)this.sampleRecord=_10.get(0);else this.sampleRecord=_6.getRecord(0)}}
if(isc.isA.Object(this.sampleRecord)){for(var i=0;i<_5.length;i++){var _12=_5[i];_12[this.sampleValueField]=_6.getStandaloneFieldValue(this.sampleRecord,_12.name)}
if(!_3||this.showAvailableSampleValue){_1.add({name:this.sampleValueField,title:this.sampleValueTitle,canFilter:false,canEdit:false,type:"any"});_7=true}}
var _13={name:"name",title:_8,autoFitWidth:_7,primaryKey:true},_14={name:"$9g",title:_8,autoFitWidth:_7,editorProperties:{showHintInField:true,hint:this.emptyTitleHint},canEdit:this.canEditTitles&&!_3};if(this.useTitleField){_13.hidden=true;_14.treeField=true}
else{_14.hidden=true;_13.treeField=true}
_1.addListAt([_13,_14],0);if(this.shouldUseTrees()){var _15=this.pickerIdField,_16=this.pickerParentIdField,_17=_6.dataSource.fieldTreeRootValue;_1.addList([{name:_15,hidden:true,primaryKey:true},{name:"_"+_16,hidden:true,foreignKey:_15,rootValue:_17}]);if(this.useTitleField)_14.canFilter=true;else _13.canFilter=true;delete _13.primaryKey;_5.map(function(_12){_12["_"+_16]=_12[_16]})}
for(var i=0;i<_5.length;i++){var _12=_5[i];this.originalFields[_12[this.primaryKeyField]]=_12;if(_12.userSummary||_12.userFormula)this.customFields=true;_12.$9g=_12.title}
var _18=isc.DataSource.create({fields:_1,clientOnly:true,dataProtocol:"clientCustom",transformRequest:function(_20){var _19=this.getClientOnlyResponse(_20,null);this.processResponse(_20.requestId,_19);return _20.data}});_18.setCacheData(_5);return _18},isc.A.createExpansionDataSource=function isc_FieldPicker_createExpansionDataSource(){var _1=[{name:"frozen",title:isc.FieldPickerField.frozenTitle,showTitle:false,type:"boolean"},{name:"precision",validators:[{type:"regexp",errorMessage:"Must be between 1 and 21 inclusive",expression:"^([1-9]|1[0-9]|2[0-1])?$"}],title:isc.FieldPickerField.precisionTitle,type:"integer"},{name:"decimalPrecision",title:isc.FieldPickerField.decimalPrecisionTitle,type:"integer"},{name:"decimalPad",validators:[{type:"regexp",errorMessage:"Must be between 0 and 20 inclusive",expression:"^([0-9]|1[0-9]|20)?$"}],title:isc.FieldPickerField.decimalPadTitle,type:"integer"},{name:"align",title:isc.FieldPickerField.alignTitle,valueMap:["left","center","right"]},{name:"cellAlign",title:isc.FieldPickerField.cellAlignTitle,valueMap:["left","center","right"]}];if(isc.isA.DetailViewer(this.dataBoundComponent)){var _2=function(_3){switch(_3.name){case"frozen":case"align":case"cellAlign":return false;default:return true}};_1=_1.filter(_2)}
this.expansionDataSource=isc.DataSource.create({clientOnly:true,fields:_1})},isc.A.updateFieldConfiguration=function isc_FieldPicker_updateFieldConfiguration(_1){this.useTitleField=_1&&_1.title!=null;this.primaryKeyField=this.shouldUseTrees()?this.pickerIdField:"name"},isc.A.updateEditableProperties=function isc_FieldPicker_updateEditableProperties(){var _1=this.dataBoundComponent.fieldPickerFieldProperties,_2=this.currentFieldsGrid;isc.addProperties(_2,{editableProperties:_1||[],autoFitFieldWidths:isc.isA.Object(this.sampleRecord)});_2.setCanExpandRecords(isc.isA.Array(_1)&&_1.length>0||this.customFields)},isc.A.validateDataSourceField=function isc_FieldPicker_validateDataSourceField(_1){var _2=_1.precision;if(_2!=null&&(_2<1||_2>21))return false;var _3=_1.decimalPad;if(_3!=null&&(_3<0||_3>20))return false;return true},isc.A.refresh=function isc_FieldPicker_refresh(_1,_2){if(_1){var _3=this.shuttle;_3.ignore(_1,"fireOnClose");var _4=this.dataBoundComponent.fieldEditorWindow;if(!_4.destroying&&!_4.destroyed){_3.observe(_4.items[0],"fireOnClose","observer.picker.refresh(observed)")}}
if(_2){this.shuttle.ignore(_2,"hide")}
var _5=this.dataBoundComponent.fields,_6=this.dataBoundComponent.completeFields,_7;this.updateFieldConfiguration(_6[0]);this.availableFieldsGrid.setDataSource(this.createDataSourceFromFields(_6,_5,true));this.availableFieldsGrid.fetchData();this.currentFieldsGrid.setDataSource(this.createDataSourceFromFields(_5));this.currentFieldsGrid.fetchData();this.updateEditableProperties();this.needsRefresh=false},isc.A.initWidget=function isc_FieldPicker_initWidget(){this.Super(this.$oc);if(this.dataBoundComponent==null&&this.dataSource!=null){var _1=this,_2=isc.addProperties({},this.creator.fieldPickerProperties,{autoDraw:false,fieldStateChanged:function(){if(isc.isA.Function(_1.callback)){_1.callback(this.completeFields,this.getHilites())}}});var _3=isc.ListGrid.create(_2);_3.setFields(_3.fields);this.dataBoundComponent=_3}
this.addMember(isc.Label.create({height:5,overflow:"visible",contents:this.instructions}));var _4=isc.FieldPickerShuttle.create({picker:this,membersMargin:10});this.shuttle=_4;this.addMember(_4);var _5=this.shouldUseTrees()?isc.FieldPickerTreeGrid:isc.FieldPickerListGrid;var _6=this.dataBoundComponent.fields,_7=this.dataBoundComponent.completeFields;this.updateFieldConfiguration(_7[0]);var _8;if(this.sortAvailableFields){_8=[{property:"$9g",direction:this.availableFieldsSortDirection}]}
this.addAutoChild("availableFieldsGrid",{autoFetchData:true,initialSort:_8,autoFitExpandField:this.showAvailableSampleValue?this.sampleValueField:null,dataSource:this.createDataSourceFromFields(_7,_6,true),rowDoubleClick:function(_11,_12,_13){var _9=_4.currentView.grid;_9.transferSelectedData(this)}},_5,_4.availableView);this.addAutoChild("currentFieldsGrid",{autoFetchData:true,autoFitExpandField:this.sampleValueField,dataSource:this.createDataSourceFromFields(_6),contextMenu:isc.Menu.create({autoDraw:false,data:[{title:this.removeItemTitle,click:function(){var _9=_4.currentView.grid;var _10=_4.availableView.grid;_10.transferSelectedData(_9)}}]})},_5,_4.currentView);this.createExpansionDataSource();this.updateEditableProperties();this.addMember(isc.HLayout.create({height:5,align:"right",overflow:"visible",membersMargin:10,defaultLayoutAlign:"center",members:[this.createAutoChild("saveAndExitButton",{picker:this,title:this.saveAndExitButtonTitle}),this.createAutoChild("cancelChangesButton",{picker:this,title:this.cancelButtonTitle})]}))},isc.A.setAvailableFields=function isc_FieldPicker_setAvailableFields(_1){var i,_3,_4={};for(i=0;i<_1.length;i++){var _5=_1[i];_4[_5.name]=_5}
var _6=this.currentFieldsGrid,_7=_6.dataSource.cacheData;var _8=[];for(var i=0;i<_7.length;i++){var _9=_7[i];if(_4[_9.name]!==_3){_8.add(_9);delete _4[_9.name]}}
this.currentFieldsGrid.setDataSource(this.createDataSourceFromFields(_8,null,false,true));this.currentFieldsGrid.fetchData();var _10=this.availableFieldsGrid,_11=_10.dataSource.cacheData;var _12=[];for(var i=0;i<_11.length;i++){var _9=_11[i];if(_4[_9.name]!==_3){_12.add(_9);delete _4[_9.name]}}
for(var _13 in _4){if(_4.hasOwnProperty(_13)){var _14=isc.DataSource.getAutoTitle(_13);_12.add({name:_13,title:_14})}}
this.availableFieldsGrid.setDataSource(this.createDataSourceFromFields(_12,null,true,true));this.availableFieldsGrid.fetchData()},isc.A.saveClick=function isc_FieldPicker_saveClick(){if(this.shuttle.saveAndExecuteMethod()){var _1=this.dataBoundComponent;_1.markForRedraw();if(_1.handleFieldStateChanged){_1.handleFieldStateChanged()}
this.creator.closeClick()}},isc.A.closeClick=function isc_FieldPicker_closeClick(){},isc.A.cleanup=function isc_FieldPicker_cleanup(){this.shuttle.cleanup();var _1=this.dataBoundComponent.completeFields,_2=this.currentFieldsGrid.canExpandrecordProperty;for(var i=0;i<_1.length;i++){var _4=_1[i];delete _4[this.sampleValueField];delete _4[_2];delete _4["_"+this.pickerParentIdField];delete _4.$1023;delete _4.$9g}
this.originalFields={}});isc.B._maxIndex=isc.C+14;isc.A=isc.FieldPicker.getPrototype();isc.A.currentFieldsGridDefaults=isc.addProperties(isc.shallowClone(isc.FieldPicker.getPrototype().availableFieldsGridDefaults),{canSort:false,expansionMode:"editor",canReparentNodes:true,canReorderRecords:true,canExpandRecordProperty:"$99q"});if(isc.Window!=null){isc.ClassFactory.defineClass("FieldPickerWindow","Window");isc.A=isc.FieldPickerWindow.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.title="Field Picker";isc.A.width=800;isc.A.height=425;isc.A.isModal=true;isc.A.canDragResize=true;isc.A.autoCenter=true;isc.A.fieldPickerDefaults={autoParent:"none",_constructor:isc.FieldPicker,pickerIdField:"fieldTreeId",pickerParentIdField:"fieldTreeParentId"};isc.B.push(isc.A.initWidget=function isc_FieldPickerWindow_initWidget(){this.Super(this.$oc);this.addAutoChild("fieldPicker");this.addItem(this.fieldPicker);this.observe(this.fieldPicker,"closeClick","observer.closeClick()")},isc.A.show=function isc_FieldPickerWindow_show(){if(this.needsRefresh)this.fieldPicker.refresh();return this.Super("show",arguments)},isc.A.closeClick=function isc_FieldPickerWindow_closeClick(){this.fieldPicker.cleanup();this.needsRefresh=true;return this.Super("closeClick",arguments)});isc.B._maxIndex=isc.C+3}else{isc.Log.logInfo("Source for standard FieldPickerWindow class included in this module, but required related class (Window) is not loaded. This can occur if the Grid module is loaded without the Containers module.","moduleDependencies")}
isc.ClassFactory.defineClass("RecordEditor","ListGrid");isc.A=isc.RecordEditor.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.autoDraw=false;isc.A.cellSpacing=0;isc.A.cellPadding=0;isc.A.selectionType="none";isc.A.showRollOver=false;isc.A.baseStyle="recordEditorCell";isc.A.showHeader=false;isc.A.showEmptyMessage=false;isc.A.bodyOverflow="hidden";isc.A.fixedRecordHeights=true;isc.A.drawAllMaxCells=0;isc.A.skinImgDir="images/RecordEditor/";isc.A.saveImg="[SKIN]add.png";isc.A.filterImg={src:"[SKIN]filter.png",width:50,height:50,showOver:true};isc.A.actionButtonConstructor=isc.Button;isc.A.actionButtonDefaults={title:"",showOver:true,showFocusedAsOver:false};isc.A.actionButtonStyle="normal";isc.A.listEndEditAction="next";isc.A.canEdit=true;isc.A.editByCell=false;isc.A.$jo=false;isc.A.bodyStyleName="normal";isc.A.styleName="normal";isc.B.push(isc.A.shouldAutoFitField=function isc_RecordEditor_shouldAutoFitField(){return false},isc.A.$32t=function isc_RecordEditor__showEditClickMask(){});isc.B._maxIndex=isc.C+2;isc.A=isc.RecordEditor.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$65g="filter";isc.B.push(isc.A.initWidget=function isc_RecordEditor_initWidget(){if(this.sourceWidget!=null){var _1=this.sourceWidget;this.setWidth(_1.getInnerContentWidth(true));this.observe(_1,"resized","observer.sourceWidgetResized(observed)");this.leaveScrollbarGap=this.sourceWidget.leaveScrollbarGap;if(this.isAFilterEditor()){this.actOnCellChange=this.sourceWidget.filterByCell;this.actOnKeypress=this.sourceWidget.filterOnKeypress}else{this.actOnCellChange=this.sourceWidget.saveByCell}
isc.addProperties(this.editFormDefaults,{autoFocus:false});this.fieldIDProperty=this.sourceWidget.fieldIDProperty;this.fields=this.sourceWidget.completeFields.duplicate();this.cellHeight=this.getInnerHeight()}else{this.logWarn("RecordEditor initialized without a sourceWidget property. This widget is not supported as a standalone component.")}
return this.Super(this.$oc)},isc.A.destroy=function isc_RecordEditor_destroy(){this.ignore(this.sourceWidget,"resized");this.Super("destroy",arguments)},isc.A.sourceWidgetResized=function isc_RecordEditor_sourceWidgetResized(_1){this.setWidth(_1.getInnerContentWidth(true))},isc.A.isAFilterEditor=function isc_RecordEditor_isAFilterEditor(){return(this.actionType==this.$65g)},isc.A.$315=function isc_RecordEditor__formatCellValue(_1,_2,_3,_4,_5){if(_3.isRemoveField)return"&nbsp;"
return this.Super("$315",arguments)},isc.A.$425=function isc_RecordEditor__useDisplayFieldValue(_1){return false},isc.A.draw=function isc_RecordEditor_draw(){var _1=this.sourceWidget;this.setWidth(_1.getInnerContentWidth(true));var _2=this.findNextEditCell(0,0,1,true,true,false,true,true);if(_2==null){this.logWarn("No editable fields in this record editor."+(this.isAFilterEditor()?" Check the 'canFilter' property for each field in ":" Check the 'canEdit' property for each field in ")+this.sourceWidget.getID())}else{var _3=this.isAFilterEditor(),_4;if(_3){_4=this.sourceWidget.$32e()}else{var _5;_4={};for(var i=0;i<this.fields.length;i++){var _7=this.fields[i];if(_7.defaultValue!==_5){_4[_7[this.fieldIdProperty]]=_7.defaultValue}}}
if(this.isAFilterEditor())this.setValuesAsCriteria(_4);else this.setEditValues(0,_4);var _8=_2[1];this.$31u(0,_8)}
this.Super("draw",arguments);this.actionButton.bringToFront()},isc.A.setFields=function isc_RecordEditor_setFields(){this.Super("setFields",arguments);this.initializeEdit()},isc.A.initializeEdit=function isc_RecordEditor_initializeEdit(){if(!this.isDrawn()||this.$30a)return;var _1=this.findNextEditCell(0,0,1,true,true);if(_1==null)_1=[0,0];this.$31u(0,_1[1])},isc.A.showField=function isc_RecordEditor_showField(){this.Super("showField",arguments);this.initializeEdit()},isc.A.createChildren=function isc_RecordEditor_createChildren(){this.Super("createChildren",arguments);var _1=this.getEditForm();if(_1!=null&&this.$789){_1.setValuesAsCriteria(this.$789);delete this.$789;if(this.isAFilterEditor())_1.isSearchForm=true}
if(!this.actionButton)this.makeActionButton()},isc.A.makeActionButton=function isc_RecordEditor_makeActionButton(){var _1;if(this.isAFilterEditor()){_1=this.filterImg}else{_1=this.saveImg}
var _2,_3
if(isc.isAn.Object(_1)){_2=_1.showOver;_3=_1.showFocused;_1=_1.src}
var _4={recordEditor:this,left:this.isRTL()?0:this.getInnerWidth()-this.getScrollbarSize(),width:this.getScrollbarSize(),autoDraw:false,baseStyle:this.actionButtonStyle,skinImgDir:this.skinImgDir,icon:_1,iconSize:this.getScrollbarSize(),prompt:this.actionButtonPrompt,click:function(){this.recordEditor.performAction()}}
if(_2!=null)_4.showRollOverIcon=_2;if(_3!=null)_4.showFocusedIcon=_3;if(this.tabIndex!=null&&!this.$sp){_4.tabIndex=this.tabIndex}
this.actionButton=this.createAutoChild("actionButton",_4);this.addChild(this.actionButton)},isc.A.performAction=function isc_RecordEditor_performAction(_1,_2){if(this.isAFilterEditor())this.performFilter(_1,_2);else this.performSave(_1,_2)},isc.A.setValuesAsCriteria=function isc_RecordEditor_setValuesAsCriteria(_1,_2,_3){var _4=this.getEditForm();if(_4==null){this.$789=_1;return}
_4.setValuesAsCriteria(_1,null,_3);if(_2)this.refreshRow(0)},isc.A.makeEditForm=function isc_RecordEditor_makeEditForm(){var _1=this.editFormProperties=this.editFormProperties||{};if(_1.allowExpressions==null&&this.allowFilterExpressions!=null)
_1.allowExpressions=this.allowFilterExpressions;_1.expressionDataSource=this.expressionDataSource;if(this.isAFilterEditor())_1.storeAtomicValues=true;var _2=this.getEditForm(),_3;_1.$125e=true;if(_2==null){_3=this.$789}else{_3=_2.getValuesAsCriteria();_2.expressionDataSource=this.expressionDataSource}
this.Super("makeEditForm",arguments);_2=this.getEditForm();if(_2!=null){_2.setValuesAsCriteria(_3);delete this.$789;if(this.isAFilterEditor())_2.isSearchForm=true}},isc.A.updateDataSource=function isc_RecordEditor_updateDataSource(_1){this.expressionDataSource=_1;var _2=this.getEditForm();if(_2)_2.expressionDataSource=this.expressionDataSource},isc.A.getEditDisplayValue=function isc_RecordEditor_getEditDisplayValue(_1,_2,_3){if(this.isAFilterEditor()&&this.$286!=null){var _4=this.getFieldName(_2);return this.$286.getValue(_4)}
return this.Super("getEditDisplayValue",arguments)},isc.A.getEditDisplayValues=function isc_RecordEditor_getEditDisplayValues(_1,_2){if(this.isAFilterEditor()&&this.$286!=null){return this.$286.getValues()}
return this.Super("getEditDisplayValues",arguments)},isc.A.performFilter=function isc_RecordEditor_performFilter(_1,_2){var _3=this.$74n(this.sourceWidget.autoFetchTextMatchStyle);var _4={};if(_1)_4.showPrompt=false;_3=isc.DS.checkEmptyCriteria(_3);if(_3==null||isc.getKeys(_3).length==0){_4.textMatchStyle=this.sourceWidget.autoFetchTextMatchStyle}
var _5=this.sourceWidget.data;if((isc.isA.ResultSet(_5)&&_5.willFetchData(_3,_4.textMatchStyle))||(isc.isA.Tree(_5)&&this.sourceWidget.dataSource!=null))
{this.fireOnPause("performFilter",{target:this.sourceWidget,methodName:"handleFilterEditorSubmit",args:[_3,_4,_2]},this.fetchDelay)}else{this.sourceWidget.handleFilterEditorSubmit(_3,_4,_2)}},isc.A.$74n=function isc_RecordEditor__getFilterCriteria(_1){var _2=this.getEditForm();if(_2==null){return this.$789}
return _2.getValuesAsCriteria(null,_1)},isc.A.performSave=function isc_RecordEditor_performSave(_1,_2){var _3=this.getEditRow(),_4=this.getEditCol(),_5=this.getFieldName(_4),_6=this.$286.getValue(_5);this.setEditValue(_3,_4,_6);var _7=this.getEditValues(0),_8=this.getFields().getProperty(this.fieldIdProperty);if(!this.validateRowValues(_7,{},0,_8))return;this.$321(0);this.$31u(0,0);for(var _5 in _7){this.refreshCell(0,_4)}
if(_2)this.fireCallback(_2)},isc.A.getValues=function isc_RecordEditor_getValues(){var _1=this.getEditCol(),_2=this.getEditFieldName();this.setEditValue(0,_1,this.$286.getValue(_2));var _3=this.$74n();return _3},isc.A.getValuesAsCriteria=function isc_RecordEditor_getValuesAsCriteria(_1){var _2=this.getEditCol(),_3=this.getEditFieldName();var _4=this.$74n(_1);return _4},isc.A.canEditCell=function isc_RecordEditor_canEditCell(_1,_2){if(this.isAFilterEditor()){var _3=this.getField(_2);if(_3==null)return false;return(_3.canFilter!=false)}else{return this.sourceWidget.canEditCell(_1,_2)}},isc.A.getEditorValueMap=function isc_RecordEditor_getEditorValueMap(_1,_2){if(this.isAFilterEditor()){return this.sourceWidget.getFilterEditorValueMap(_1)}else{return this.sourceWidget.getEditorValueMap(_1,_2)}},isc.A.getEditorType=function isc_RecordEditor_getEditorType(_1,_2){if(this.isAFilterEditor()){return this.sourceWidget.getFilterEditorType(_1)}else{return this.sourceWidget.getEditorType(_1,_2)}},isc.A.$45r=function isc_RecordEditor__editorChanged(){this.form.grid.editorChanged(this)},isc.A.editorChanged=function isc_RecordEditor_editorChanged(_1){var _2=_1.actOnKeypress!=null?_1.actOnKeypress:this.actOnKeypress;if(_2){if(this.sourceWidget.allowFilterExpressions&&!_1.enteredCompleteExpression())return;this.performAction(true)}},isc.A.getEditorProperties=function isc_RecordEditor_getEditorProperties(_1){var _2={height:this.cellHeight};if(!_1.optionDataSource&&!_1.valueMap&&!_1.filterEditorValueMap){if(_1.foreignKey){_2.optionDataSource=isc.DS.getForeignDSName(_1,this.sourceWidget.getDataSource());_2.valueField=isc.DS.getForeignFieldName(_1,this.sourceWidget.getDataSource())}else if(_1.displayField){_2.optionDataSource=this.sourceWidget.dataSource}}
if(this.isAFilterEditor()){_2.allowEmptyValue=true;_2.changed=this.$45r;_2.actOnKeypress=_1.filterOnKeypress;return isc.addProperties(_2,this.sourceWidget.getFieldFilterEditorProperties(_1))}else{return isc.addProperties(_2,this.sourceWidget.getEditorProperties(_1))}},isc.A.getEditItem=function isc_RecordEditor_getEditItem(_1,_2,_3,_4,_5,_6){var _7=this.Super("getEditItem",arguments);if(!this.isAFilterEditor())return _7;var _8=this.sourceWidget.getFieldFilterEditorProperties(_1),_9;if(!_8)_8={};if(_1.defaultValue!=null&&_8.defaultValue===_9){delete _7.defaultValue}
if(_1.change!=null&&_8.change===_9){delete _7.change}
if(_1.defaultDynamicValue!=null&&_8.defaultDynamicValue!=null)
{delete _7.defaultDynamicValue}
if(_1.icons!=null&&_8.icons===_9){delete _7.icons}
if(_1.showPickerIcon!=null&&_8.showPickerIcon===_9){delete _7.showPickerIcon}
return _7},isc.A.getDefaultEditValue=function isc_RecordEditor_getDefaultEditValue(_1,_2){if(this.isAFilterEditor())return null;return this.Super("getDefaultEditValue",arguments)},isc.A.getValueIcon=function isc_RecordEditor_getValueIcon(_1,_2,_3,_4){if(this.isAFilterEditor())return null;return this.Super("getValueIcon",arguments)},isc.A.cellEditEnd=function isc_RecordEditor_cellEditEnd(_1,_2){if(_1!=isc.ListGrid.ENTER_KEYPRESS&&_1!=isc.ListGrid.TAB_KEYPRESS&&_1!=isc.ListGrid.SHIFT_TAB_KEYPRESS&&_1!=isc.ListGrid.EDIT_FIELD_CHANGE)return true;var _3;if(_2===_3)_2=this.getUpdatedEditorValue();var _4=this.getEditRow(),_5=this.getEditCol();this.setEditValue(_4,_5,_2);if(_1==isc.ListGrid.ENTER_KEYPRESS||this.actOnCellChange){this.performAction();if(_1==isc.ListGrid.ENTER_KEYPRESS)return}
var _6=this.getNextEditCell(_4,_5,_1);if(_6==null||_6[0]!=_4){if(this.tabIndex!=null&&!this.$sp){this.$92z=true;return}else{if(_1==isc.ListGrid.TAB_KEYPRESS){this.actionButton.focus()}else{this.$kf(false)}
return}}
return this.Super("cellEditEnd",arguments)},isc.A.editorKeyPress=function isc_RecordEditor_editorKeyPress(_1,_2,_3){var _4=this.Super("editorKeyPress",arguments);if(this.$92z){this.$92z=null;return true}
return _4},isc.A.clearEditValue=function isc_RecordEditor_clearEditValue(_1,_2){return this.Super("clearEditValue",[_1,_2,null,true])},isc.A.layoutChildren=function isc_RecordEditor_layoutChildren(){this.Super("layoutChildren",arguments);if(this.actionButton)
this.actionButton.setLeft(this.isRTL()?0:this.getInnerWidth()-this.getScrollbarSize())
if(this.body){var _1=this.body;if(this.bodyLayout)_1=this.bodyLayout;_1.setWidth(Math.max(1,this.getInnerWidth()-this.getScrollbarSize()));if(this.actionButton&&this.isRTL()){_1.setLeft(this.getScrollbarSize())}}
if(this.actionButton&&this.body)this.actionButton.$sq(this.body)},isc.A.adjustOverflow=function isc_RecordEditor_adjustOverflow(){this.Super("adjustOverflow",arguments);if(this.actionButton){this.actionButton.setHeight(this.body.getVisibleHeight())}},isc.A.bodyScrolled=function isc_RecordEditor_bodyScrolled(_1,_2){this.Super("bodyScrolled",arguments);if(this.$35j!=null){isc.Timer.clear(this.$35j)}
this.$35j=this.delayCall("syncSourceScrolling",[],0)},isc.A.syncSourceScrolling=function isc_RecordEditor_syncSourceScrolling(){var _1=this.sourceWidget,_2;if(!_1||!(_2=_1.body))return;var _3=this.body.getScrollLeft();if(this.isRTL()){var _4=_2.getViewportWidth()-this.body.getViewportWidth();_3-=_4;if(_3<0)_3=0}
if(_2.getScrollLeft()!=_3){_2.scrollTo(_3)}},isc.A.getFieldWidths=function isc_RecordEditor_getFieldWidths(){var _1=this.sourceWidget.getFieldWidths();if(isc.isA.Array(_1))_1=_1.duplicate();return _1},isc.A.$57q=function isc_RecordEditor__correctForActionButtonClipping(){return(this.sourceWidget&&this.sourceWidget.body&&!this.sourceWidget.body.vscrollOn)},isc.A.getEditFormItemFieldWidths=function isc_RecordEditor_getEditFormItemFieldWidths(_1){var _2=this.Super("getEditFormItemFieldWidths",arguments);if(this.$57q()){var _3=_2.sum(),_4=this.getInnerWidth()-this.getScrollbarSize();if(_3>_4){_2[_2.length-1]-=Math.min(this.getScrollbarSize(),(_3-_4))}}
return _2},isc.A.getCellAlign=function isc_RecordEditor_getCellAlign(_1,_2,_3,_4){if(!_4&&_3==this.fields.getLength()-1){return this.isRTL()?"right":"left"}
return this.Super("getCellAlign",arguments)},isc.A.getCellValue=function isc_RecordEditor_getCellValue(_1,_2,_3,_4){var _5=this.fields[_3];if(_5&&(this.isCheckboxField(_5)||this.isExpansionField(_5)||this.isRowNumberField(_5)))
return"&nbsp;"
var _6=this.Super("getCellValue",arguments);if(_3==this.fields.getLength()-1){var _5=this.getField(_3),_7=this.getEditForm(),_8=_7?_7.getItem(_5.name):null,_9=(_8!=null)?_8.getWidth():null;if(_9!=null){_6="<div style='text-align:"+this.getCellAlign(_1,_2,_3,true)+";width:"+_9+"px;'>"+_6+"</div>"}}
return _6},isc.A.rebuildForFreeze=function isc_RecordEditor_rebuildForFreeze(){},isc.A.rowClick=function isc_RecordEditor_rowClick(){},isc.A.rowDoubleClick=function isc_RecordEditor_rowDoubleClick(){});isc.B._maxIndex=isc.C+47;isc.ClassFactory.defineClass("Menu","ListGrid");isc.A=isc.Menu;isc.A.ICON_FIELD={};isc.A.TITLE_FIELD={};isc.A.KEY_FIELD={};isc.A.SUBMENU_FIELD={};isc.A.$kc=[];isc.A.SHIFT=(isc.Browser.isWin?"Shift+":"shift-");isc.A.CTRL=(isc.Browser.isWin?"Ctrl+":"ctrl-");isc.A.ALT=(isc.Browser.isWin?"Alt+":"option-");isc.A.META=(isc.Browser.isWin?"Windows+":"command-");isc.A=isc.Menu.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.iconFieldDefaults={name:"icon",width:25,getCellValue:function(_1,_2){return _1.getIcon(_2)},$109b:true};isc.A.titleFieldDefaults={name:"title",width:"*",getCellValue:function(_1,_2){return _1.getItemTitle(_2)}};isc.A.keyFieldDefaults={name:"key",width:35,getCellValue:function(_1,_2){return _1.getKeyTitle(_2)}};isc.A.submenuFieldDefaults={name:"submenu",width:18,align:"right",getCellValue:function(_1,_2){return _1.getSubmenuImage(_2)}};isc.A.fixedIconWidth=true;isc.A.styleName="normal";isc.A.bodyStyleName="normal";isc.A.submenuDelay=200;isc.A.submenuOffset=-4;isc.A.defaultWidth=150;isc.A.defaultHeight=20;isc.A.enforceMaxHeight=true;isc.A.maxHeight=null;isc.A.backgroundColor=null;isc.A.overflow=isc.Canvas.VISIBLE;isc.A.bodyOverflow=isc.Canvas.VISIBLE;isc.A.arrowKeyAction="focus";isc.A.hiliteRowOnFocus=false;isc.A.selectionType=isc.Selection.NONE;isc.A.autoDraw=false;isc.A.tableStyle="menuTable";isc.A.showRollOver=true;isc.A.showFocusOutline=false;isc.A.showAllRecords=true;isc.A.fixedFieldWidths=false;isc.A.fixedRecordHeights=false;isc.A.leaveScrollbarGap=false;isc.A.baseStyle="menu";isc.A.alternateRecordStyles=false;isc.A.showHeader=false;isc.A.showSortArrow=isc.ListGrid.NONE;isc.A.canDrag=false;isc.A.canAcceptDrop=false;isc.A.canReorderRecords=false;isc.A.useKeys=true;isc.A.showKeys=true;isc.A.showIcons=true;isc.A.showSubmenus=true;isc.A.submenuDirection=null;isc.A.showFieldsSeparately=false;isc.A.emptyMessage="[Empty menu]";isc.A.cellSpacing=0;isc.A.cellPadding=2;isc.A.iconWidth=16;isc.A.iconHeight=16;isc.A.autoSetDynamicItems=true;isc.A.skinImgDir="images/Menu/";isc.A.submenuImage={src:"[SKIN]submenu.gif",width:7,height:7};isc.A.submenuDisabledImage={src:"[SKIN]submenu_disabled.gif",width:7,height:7};isc.A.checkmarkImage={src:"[SKIN]check.gif",width:9,height:9};isc.A.checkmarkDisabledImage={src:"[SKIN]check_disabled.gif",width:9,height:9};isc.A.useBackMask=true;isc.A.submenuInheritanceMask=["submenuConstructor","$35k","className","submenuDelay","submenuOffset","defaultWidth","backgroundColor","tableStyle","showRollOver","baseStyle","emptyMessage","canDrag","canAcceptDrop","canReorderRecords","useKeys","showKeys","showIcons","showSubmenus","submenuDirection","cellPadding","iconWidth","iconHeight","autoSetDynamicItems","skinImgDir","submenuImage","submenuDisabledImage","checkmarkImage","checkmarkDisabledImage","bodyDefaults","itemClick","canSelectParentItems","childrenProperty","inheritedProperties"];isc.A.mergeSingleParent=true;isc.A.autoDismiss=true;isc.A.cascadeAutoDismiss=true;isc.A.autoDismissOnBlur=true;isc.A.fetchSubmenus=true;isc.B.push(isc.A.getIconField=function isc_Menu_getIconField(){return isc.addProperties({},this.iconFieldDefaults,isc.Menu.ICON_FIELD,this.iconFieldProperties)},isc.A.$142p=function isc_Menu__getTitleField(){return isc.addProperties({},this.titleFieldDefaults,isc.Menu.TITLE_FIELD,this.titleFieldProperties)},isc.A.getKeyField=function isc_Menu_getKeyField(){return isc.addProperties({},this.keyFieldDefaults,isc.Menu.KEY_FIELD,this.keyFieldProperties)},isc.A.getSubmenuField=function isc_Menu_getSubmenuField(){return isc.addProperties({},this.submenuFieldDefaults,isc.Menu.SUBMENU_FIELD,this.submenuFieldProperties)},isc.A.getStandardField=function isc_Menu_getStandardField(_1){if(isc.isA.String(_1)){var _2=this.getIconField();if(_2.name==_1)return _2;var _3=this.$142p();if(_3.name==_1)return _3;var _4=this.getKeyField();if(_4.name==_1)return _4;var _5=this.getSubmenuField();if(_5.name==_1)return _5;this.logWarn("Menu field specified as :"+_1+". This is not a recognized standard field name");return null}else{var _6=_1.name;var _2=this.getIconField();if(("menuBuiltin_"+_2.name)==_6)return _2;var _3=this.$142p();if(("menuBuiltin_"+_3.name)==_6)return _3;var _4=this.getKeyField();if(("menuBuiltin_"+_4.name)==_6)return _4;var _5=this.getSubmenuField();if(("menuBuiltin_"+_5.name)==_6)return _5}
return _1},isc.A.getSubmenuDirection=function isc_Menu_getSubmenuDirection(){if(this.submenuDirection!=null)return this.submenuDirection;if(this.isRTL())return"left";return"right"});isc.B._maxIndex=isc.C+6;isc.A=isc.Menu.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$oz="left";isc.A.$o1="right";isc.B.push(isc.A.initWidget=function isc_Menu_initWidget(){this.$35l();this.position=isc.Canvas.ABSOLUTE;var _1=this.$1053;if(this.dataSource!=null&&!this.hasFlatDataSource()){var _2=this.initialCriteria||this.criteria;var _3=this;var _4=this.createResultTree(_2,null,{showPrompt:false,dataProperties:isc.addProperties({autoOpenRoot:false,getOperationId:function(_12,_13,_14){if(_12==_3.dataSource&&_1!==undefined){return _1}else{return this.Super("getOperationId",arguments)}}},this.dataProperties)});if(this.items)_4.addList(this.items,_4.getRoot());if(this.loadDataOnDemand==false){_4.loadChildren(_4.getRoot(),{caller:this,methodName:"treeDataLoaded"})}
this.data=_4}else if(this.dataSource!=null){var _5=isc.DataSource.get(this.dataSource),_6;if(_1!==undefined){_6={operationId:_1}}
_5.fetchData(null,{caller:this,methodName:"flatDataLoaded"},_6)}
if(this.data==null&&this.items!=null)this.data=this.items;if(isc.Tree&&isc.isA.Tree(this.data)){this.setTreeData(this.data,false)}
this.Super(this.$oc);if(!this.fields){this.$51r=true;this.fields=[];var _7,_8;if(this.showSubmenus){_7=(this.getSubmenuDirection()==this.$oz);_8=(_7!=this.isRTL())}
if(_8&&this.showSubmenus)this.fields.add(this.getSubmenuField());if(this.showIcons)this.fields.add(this.getIconField());this.fields.add(this.$142p());if(this.showKeys)this.fields.add(this.getKeyField());if(!_8&&this.showSubmenus)this.fields.add(this.getSubmenuField())}else{this.$51r=false;for(var i=0;i<this.fields.length;i++){var _10=this.fields[i];_10=this.getStandardField(_10);if(_10==null){this.fields.removeAt(i);i-=1}else{this.fields[i]=_10}}}
if(this.iconBodyStyleName!=null&&this.fields!=null){for(var i=0;i<this.fields.length;i++){if(this.fields[i]=="icon"||this.fields[i].$109b===true){var _11=this.iconBodyStyleName;if(this.isRTL())_11+="RTL";this.bodyStyleName=_11;break}}}
if(isc.Browser.isSafari){isc.addProperties(this.submenuImage,{align:"BOTTOM"});isc.addProperties(this.submenuDisabledImage,{align:"BOTTOM"})}
if(isc.Browser.isStrict){isc.addProperties(this.submenuImage,{align:"absmiddle"});isc.addProperties(this.submenuDisabledImage,{align:"absmiddle"})}
if(this.useKeys)this.setUpKeyListening();if(this.$35k){if(!this.treeParentNode)this.treeParentNode=this.$35k.getRoot();this.setTreeNode(this.treeParentNode)}},isc.A.setTreeData=function isc_Menu_setTreeData(_1,_2){this.$35k=_1;this.childrenProperty=_1.childrenProperty;var _3=_1.getChildren(),_4=this.mergeSingleParent&&!isc.isA.ResultTree(this.$35k)&&_3.length==1&&_1.hasChildren(_3[0]);if(_4){var _5=_3[0];this.data=_1.getChildren(_5).duplicate();this.data.add({isSeparator:true});var _6={};isc.addProperties(_6,_5);_6[this.childrenProperty]=null;this.data.add(_6)}else{this.data=null}
if(_2&&this.$35k){this.treeParentNode=this.$35k.getRoot();this.setTreeNode(this.treeParentNode)}},isc.A.hasFlatDataSource=function isc_Menu_hasFlatDataSource(){var _1=isc.DataSource.get(this.dataSource);var _2=_1.getFieldNames();var _3=false,_4=false;for(var i=0;i<_2.length;i++){var _6=_1.getField(_2[i]);if(_6.primaryKey)_3=true;if(_6.foreignKey)_4=true}
return!(_3&&_4)},isc.A.setFields=function isc_Menu_setFields(_1,_2,_3,_4,_5){if(_1&&(_1!=this.fields)){this.$51r=false}
this.invokeSuper(isc.Menu,"setFields",_1,_2,_3,_4,_5)},isc.A.treeDataLoaded=function isc_Menu_treeDataLoaded(){this.treeDataArrived(this.$35m)},isc.A.setTreeNode=function isc_Menu_setTreeNode(_1){var _2=this.$35k.getLoadState(_1);this.$35m=_1;if(_2==isc.Tree.LOADED){this.treeDataArrived(_1)}else if(_2!=isc.Tree.LOADING){this.$35k.loadChildren(_1,this.getID()+".treeDataArrived(node)");this.$35n=true;this.setData(null)}},isc.A.treeDataArrived=function isc_Menu_treeDataArrived(_1){delete this.$35n;if(_1==this.$35m){var _2=this.$35k.getChildren(_1);if(isc.isA.ResultSet(_2)){_2=_2.getAllLoadedRows()}
this.setData(_2);if(this.masterMenu&&this.masterMenu.isVisible())
this.masterMenu.placeSubmenu(_1,this)}
if(this.$124p){delete this.$124p;this.$318(1)}},isc.A.flatDataLoaded=function isc_Menu_flatDataLoaded(_1,_2){this.setData(_2)},isc.A.getEmptyMessage=function isc_Menu_getEmptyMessage(){if(this.$35n){return this.loadingDataMessage==null?"&nbsp;":this.loadingDataMessage.evalDynamicString(this,{loadingImage:this.imgHTML(isc.Canvas.loadingImageSrc,isc.Canvas.loadingImageSize,isc.Canvas.loadingImageSize)})}
return this.Super("getEmptyMessage",arguments)},isc.A.isEmpty=function isc_Menu_isEmpty(){if(this.$35n)return true;return this.Super("isEmpty",arguments)},isc.A.$35l=function isc_Menu__setUpEmptyMessage(){isc.addProperties(this,{emptyMessageTableStyle:this.tableStyle,emptyMessageStyle:this.baseStyle+isc.GridRenderer.standardStyleSuffixes[4]})},isc.A.$31m=function isc_Menu__observeData(_1,_2,_3,_4,_5){var _6;if(this.$35k){_6=this.isObserving(this.$35k,"dataChanged");_1=this.$35k}
if(!_6)this.invokeSuper(isc.Menu,"$31m",_1,_2,_3,_4,_5)},isc.A.rowClick=function isc_Menu_rowClick(_1,_2,_3){this.Super("rowClick",arguments);this.selectMenuItem(_2,_3)},isc.A.selectMenuItem=function isc_Menu_selectMenuItem(_1,_2){if(_1==null)_1=this.getEventRecordNum();_1=this.getItem(_1);var _3=true;if(_1==null||!this.itemIsEnabled(_1)){isc.Menu.hideAllMenus("itemClick");return false}
if(this.hasSubmenu(_1)&&!this.canSelectParentItems&&!_1.canSelectParent){if(this.submenuTimer)this.submenuTimer=isc.Timer.clear(this.submenuTimer);if(this.$35p!=_1)this.hideSubmenu();this.showSubmenu(_1);return false}
var _4=this;while(_4.$35q){_4=_4.$35q}
if(this.autoDismiss&&(_1.autoDismiss||_1.autoDismiss==null)){isc.Menu.hideAllMenus("itemClick")}
if(_1.action){if(!isc.isA.Function(_1.action)){isc.Func.replaceWithMethod(_1,"action","")}
if(_1.action()==false)return false}
if(_1.click){if(!isc.isA.Function(_1.click)){isc.Func.replaceWithMethod(_1,"click","target,item,menu,colNum")}
var _5=(this.target?this.target:this);_3=_1.click(_5,_1,this,_2)}
if(_3!=false){_3=this.itemClick(_1,_2)}
if(!(this.autoDismiss&&(_1.autoDismiss||_1.autoDismiss==null))){this.refreshRow(this.getRecordIndex(_1))}
return _3},isc.A.mouseOver=function isc_Menu_mouseOver(){var _1=this.$35q;if(_1&&_1.body.lastOverRow!=this.$35r){if(_1.submenuTimer)_1.submenuTimer=isc.Timer.clear(_1.submenuTimer);_1.$88(this.$35r)}},isc.A.rowOver=function isc_Menu_rowOver(_1,_2){if(this.submenuTimer)this.submenuTimer=isc.Timer.clear(this.submenuTimer);this.submenuTimer=isc.Timer.setTimeout({target:this,method:this.changeSubmenu},this.submenuDelay)},isc.A.itemClick=function isc_Menu_itemClick(_1,_2){},isc.A.getShowSubmenuKey=function isc_Menu_getShowSubmenuKey(){return this.getSubmenuDirection()=="right"?"Arrow_Right":"Arrow_Left"},isc.A.getHideSubmenuKey=function isc_Menu_getHideSubmenuKey(){return this.getSubmenuDirection()=="right"?"Arrow_Left":"Arrow_Right"},isc.A.bodyKeyPress=function isc_Menu_bodyKeyPress(_1,_2){var _3=isc.EventHandler.lastEvent.keyName;if(_3==this.getHideSubmenuKey()){if(this.$35q!=null){this.$35q.hideSubmenu();this.$35q.focus();return false}}else if(_3==this.getShowSubmenuKey()){var _4=this.getItem(this.getFocusRow());if(this.hasSubmenu(_4)){this.changeSubmenu();var _5=this.$35s;if(_5.$35n)_5.$124p=true;else _5.$318(1);return false}}else if(_3=="Escape"&&this.autoDismissOnBlur!=false){if(this.$35q!=null){this.$35q.hideSubmenu();this.$35q.focus()}else{isc.Menu.hideAllMenus("outsideClick")}
return false}else if(_3=="Enter"){return this.$240()}
return this.Super("bodyKeyPress",arguments)},isc.A.$318=function isc_Menu__navigateToNextRecord(_1){var _2=this.getFocusRow();if(_2==null)_2=0;if(_1==-1){do{_2+=_1;if(_2<0){this.hide();return false}}while(!this.itemIsEnabled(_2))}
return this.Super("$318",arguments)},isc.A.show=function isc_Menu_show(_1){if(this.$35t){this.moveTo(this.$35u[0],this.$35u[1]);this.$35t=null}
if(_1==null)_1=this.showAnimationEffect;var _2=!this.$35v&&(_1!=null)&&(_1!="none");if(_2){this.$35v=true;this.animateShow(_1,"this.$35w()")
return}
if(this.autoSetDynamicItems)this.setDynamicItems()
if(!this.isDrawn()){this.draw(true)}
this.body.focusOnHide=isc.EH.getFocusCanvas();isc.Menu.$kc.add(this);if(this.autoDismissOnBlur){isc.Menu.$781()}
this.bringToFront();this.Super("show",arguments);if(!this.$35v)this.$35w()},isc.A.$35w=function isc_Menu__showComplete(){if(this.$35v)delete this.$35v;if(isc.Browser.isMoz){this.getClipHandle().offsetLeft}
this.body.focus()},isc.A.hide=function isc_Menu_hide(){if(this.visibility==isc.Canvas.HIDDEN)return;this.$91y();this.Super("hide",arguments);this.clearLastHilite();this.$31q=null;if(this.$35p)delete this.$35p;if(this.submenuTimer)isc.Timer.clearTimeout(this.submenuTimer)},isc.A.showContextMenu=function isc_Menu_showContextMenu(_1){if(_1&&(_1.target==this||(this.body&&_1.target==this.body))){if(this.body){if(isc.Browser.isSafari){this.body.$29u=this.getEventRow();this.body.$29v=this.getEventColumn()}
this.body.click()}
return false}
var _2;if(isc.isA.Canvas(_1))_2=_1;if(_1!=null&&_1.target!=null)_2=_1.target;if(_2!=null)this.target=_2;this.positionContextMenu();this.show();return false},isc.A.getMaxHeight=function isc_Menu_getMaxHeight(){if(this.maxHeight!=null)return this.maxHeight;return isc.Page.getHeight()-this.getScrollbarSize()},isc.A.$8h=function isc_Menu__showOffscreen(){if(!this.isDrawn()){this.setVisibility(isc.Canvas.HIDDEN);this.draw()}
this.setVisibility(isc.Canvas.VISIBLE);this.$91y();if(this.isDirty()||this.body.isDirty())this.redraw();if(this.$rm)this.adjustOverflow();if(!this.$35y&&this.enforceMaxHeight){this.doEnforceMaxHeight()}
this.setVisibility(isc.Canvas.HIDDEN)},isc.A.doEnforceMaxHeight=function isc_Menu_doEnforceMaxHeight(){if(this.overflow!=isc.Canvas.VISIBLE){this.leaveScrollbarGap=false;this.setOverflow(isc.Canvas.VISIBLE);this.setHeight(this.defaultHeight);this.setWidth(this.$35z||this.defaultWidth);this.adjustOverflow()}
var _1=this.getVisibleHeight(),_2=this.getVisibleWidth(),_3=this.getMaxHeight();if(this.overflow==isc.Canvas.VISIBLE&&_1>_3){this.leaveScrollbarGap=true;this.setHeight(_3);this.$35z=this.getWidth();this.setWidth(this.getVisibleWidth()+this.getScrollbarSize())
this.setOverflow(isc.Canvas.AUTO);this.adjustOverflow()}
this.$35y=true;if(!this.$123w){this.$123w=isc.Page.setEvent("resize",this,null,"pageResized")}},isc.A.pageResized=function isc_Menu_pageResized(){if(this.enforceMaxHeight)this.doEnforceMaxHeight()},isc.A.dataChanged=function isc_Menu_dataChanged(_1,_2,_3,_4){if(this.$35k&&this.$35m!=null){if(!this.$501(this.$35m)){if(this.$35q==null){this.setTreeNode(this.$35k.getRoot())}else{this.destroy(true);return}}}
var _5=this.invokeSuper(isc.Menu,"dataChanged",_1,_2,_3,_4);delete this.$35y;return _5},isc.A.$501=function isc_Menu__treeContains(_1){while(_1){if(this.$35k.isRoot(_1))return true;_1=this.$35k.getParent(_1)}
return false},isc.A.setData=function isc_Menu_setData(_1,_2,_3,_4){var _5;if(isc.Tree&&isc.isA.Tree(_1)){this.setTreeData(_1,true)}else{_5=this.invokeSuper(isc.Menu,"setData",_1,_2,_3,_4)}
delete this.$35y;return _5},isc.A.setItems=function isc_Menu_setItems(_1,_2,_3,_4){return this.setData(_1,_2,_3,_4)},isc.A.getMenuItem=function isc_Menu_getMenuItem(_1){return isc.Class.getArrayItem(_1,this.data,"name")},isc.A.$91y=function isc_Menu__moveMenuOffscreen(){if(this.parentElement!=null)return;if(this.$35t)return;this.$35u=[this.getLeft(),this.getTop()];this.moveTo(0,-9999);this.$35t=true},isc.A.moveBy=function isc_Menu_moveBy(){var _1=this.Super("moveBy",arguments);if(this.$35t)this.$35t=false;return _1},isc.A.resizeBy=function isc_Menu_resizeBy(_1,_2,_3,_4,_5,_6){if((_1!=null&&_1!=0)||(_2!=null&&_2!=0))delete this.$35y;return this.invokeSuper(isc.Menu,"resizeBy",_1,_2,_3,_4,_5,_6)},isc.A.hideContextMenu=function isc_Menu_hideContextMenu(){this.hide()},isc.A.positionContextMenu=function isc_Menu_positionContextMenu(){this.$8h();var _1=isc.EH.getLastEvent(),_2=_1.x,_3=_1.y;if(this.isRTL()){_2-=this.getVisibleWidth()}
this.placeNear(_2,_3)},isc.A.getItem=function isc_Menu_getItem(_1){return isc.Class.getArrayItem(_1,this.data,"name")},isc.A.setItemProperties=function isc_Menu_setItemProperties(_1,_2){var _1=this.getItem(_1);if(_1!=null){isc.addProperties(_1,_2)}
if(this.isVisible())this.redraw()},isc.A.getItemNum=function isc_Menu_getItemNum(_1){return isc.Class.getArrayItemIndex(_1,this.data,"name")},isc.A.getItems=function isc_Menu_getItems(){return this.getData()},isc.A.addItem=function isc_Menu_addItem(_1,_2){if(_2==null)_2=this.data.getLength();this.data.addAt(_1,_2);this.markForRedraw()},isc.A.removeItem=function isc_Menu_removeItem(_1){this.data.remove(_1);this.markForRedraw()},isc.A.changeSubmenu=function isc_Menu_changeSubmenu(){var _1=this.getItem(this.body.lastOverRow);if(_1&&this.$35p==_1)return;this.hideSubmenu();if(_1!=null)this.showSubmenu(_1)},isc.A.hasSubmenu=function isc_Menu_hasSubmenu(_1){if(!_1)return false;if(_1.submenu)return true;if(this.fetchSubmenus==false||_1.fetchSubmenus==false)return false;if(isc.isA.Tree(this.$35k)){return(this.$35k.isFolder(_1)&&((isc.ResultTree&&isc.isA.ResultTree(this.$35k))||this.$35k.hasChildren(_1)))}
return false},isc.A.showSubmenu=function isc_Menu_showSubmenu(_1){var _2=this.getSubmenu(_1);if(!_2)return;this.placeSubmenu(_1,_2)},isc.A.getSubmenu=function isc_Menu_getSubmenu(_1){_1=this.getItem(_1);if(!this.hasSubmenu(_1))return;var _2=isc.applyMask(this,this.submenuInheritanceMask);if(!this.$51r){var _3=[];for(var i=0;i<this.fields.length;i++){_3[i]=isc.addProperties({},this.fields[i])}
_2.fields=_3}
if(this.cascadeAutoDismiss){_2.autoDismiss=this.autoDismiss}
var _5=_1.submenu;if(!_5){var _6=(this.$350||this),_7=(_6==this?0:this.$351);if(!_6.$352)_6.$352=[];this.logDebug("RootMenu:"+_6.getID()+", submenus:"+_6.$352+", Level:"+_7);_5=_6.$352[_7];if(!_5){isc.addProperties(_2,{ID:(_6.getID()+"_childrenSubMenu_"+_7),$350:_6,$351:_7+1,autoDraw:false,treeParentNode:this.$35k?_1:null,masterMenu:this});var _8=this.submenuConstructor||this.menuConstructor||isc.Menu;_5=isc.ClassFactory.newInstance(_8,_2);_6.$352[_7]=_5;_6.observe(_5,"destroy",function(){this.submenuDestroyed(_7)})}}else if(!isc.isA.Menu(_5)){if(!this.$352)this.$352=[];if(isc.isA.String(_5)){_5=window[_5]}else if(isc.isAn.Array(_5)){_5=this.getMenuConstructor().create({autoDraw:false,data:_5},_2);this.$352.add(_5)}else if(isc.isAn.Object(_5)){_5=this.getMenuConstructor().create(isc.addProperties({autoDraw:false},_2,_5));this.$352.add(_5)}
_1.submenu=_5;if(_5&&_5.__sgwtRelink)_5.__sgwtRelink()}
if(this.$35k)_5.setTreeNode(_1);return _5},isc.A.submenuDestroyed=function isc_Menu_submenuDestroyed(_1){delete this.$352[_1]},isc.A.placeSubmenu=function isc_Menu_placeSubmenu(_1,_2){if(this.$35p==_1&&this.$35s==_2)return;this.$35p=_1;this.$35s=_2;_2.$8h();var _3=this.getItemNum(_1),_4=_2.getPeerRect(),_5=isc.Canvas.$t7(_4[2],_4[3],{left:this.getPageLeft()-this.submenuOffset,width:this.getVisibleWidth()+this.submenuOffset,top:this.body.getRowPageTop(_3)},this.getSubmenuDirection()==this.$oz?this.$oz:this.$o1,false)
_2.setPageRect(_5[0],_5[1]);if(this.target!=this&&_2.target!=_2){_2.target=this.target}
_2.show();_2.$35q=this;_2.$35r=_3;if(isc.Menu.$353)delete isc.Menu.$353[this.getID()]},isc.A.hideMenuTree=function isc_Menu_hideMenuTree(){this.hideSubmenu();this.hide()},isc.A.hideSubmenu=function isc_Menu_hideSubmenu(){if(this.$35s){this.$35s.hideSubmenu();this.$35s.hide();delete this.$35s;delete this.$35p}},isc.A.getSubmenuImage=function isc_Menu_getSubmenuImage(_1){if(!this.hasSubmenu(_1))return"&nbsp;";if(!this.$354){var _2=(this.getSubmenuDirection()==this.$oz),_3=isc.addProperties({},this.submenuImage),_4=isc.addProperties({},this.submenuDisabledImage);_3.src=isc.Img.urlForState(_3.src,null,null,(_2?this.$oz:null));_4.src=isc.Img.urlForState(_4.src,null,null,(_2?this.$oz:null));this.$354=this.imgHTML(_3);this.$355=this.imgHTML(_4)}
return(this.itemIsEnabled(_1)?this.$354:this.$355)},isc.A.itemIsEnabled=function isc_Menu_itemIsEnabled(_1){_1=this.getItem(_1);return(_1&&_1.enabled!=false&&_1.isSeparator!=true)},isc.A.setDynamicItems=function isc_Menu_setDynamicItems(){if(this.enableIf){isc.Func.replaceWithMethod(this,"enableIf","target,menu")}
var _1=false,_2=this.target,_3=this,_4=isc.isA.Function(this.enableIf)&&this.enableIf(_2,_3),_5=isc.isAn.Object(_4)&&isc.getKeys(_4),_6=_5?_5.length:0,_7="target,menu,item"+(_5?","+_5.join(","):""),_8=[_2,_3,null];if(_6>0){_8.addListAt(isc.getValues(_4),3)}
for(var i=0,_10=this.data.length;i<_10;++i){var _11=this.getItem(i);if(!_11)continue;_8[2]=_11;if(_11.enableIf!=null){var _12;if(_11.enableIf===this.$18q){_12=true}else if(_11.enableIf===this.$18r){_12=false}else{isc.Func.replaceWithMethod(_11,"enableIf",_7);_12=_11.enableIf.apply(_11,_8)}
_1|=this.$59g(i,_12)}
if(_11.checkIf){var _13;if(_11.checkIf===this.$18q){_13=true}else if(_11.checkIf===this.$18r){_13=false}else{isc.Func.replaceWithMethod(_11,"checkIf",_7);_13=_11.checkIf.apply(_11,_8)}
_1|=this.$59h(i,_13)}
if(_11.dynamicTitle){isc.Func.replaceWithMethod(_11,"dynamicTitle",_7);_1|=this.setItemTitle(i,_11.dynamicTitle.apply(_11,_8))}
if(_11.dynamicIcon){isc.Func.replaceWithMethod(_11,"dynamicIcon",_7);_1|=this.setItemIcon(i,_11.dynamicIcon.apply(_11,_8))}}
if(_1&&this.isDrawn()){this.redraw("dynamic item change");if(isc.Browser.isIE){this.body.setRowStyle(0)}}},isc.A.refreshRow=function isc_Menu_refreshRow(){if(this.autoSetDynamicItems)this.setDynamicItems();return this.Super("refreshRow",arguments)},isc.A.$59g=function isc_Menu__setItemEnabled(_1,_2){return this.setItemEnabled(_1,!!_2)},isc.A.$59h=function isc_Menu__setItemChecked(_1,_2){return this.setItemChecked(_1,!!_2)},isc.A.setItemEnabled=function isc_Menu_setItemEnabled(_1,_2){if(_2==null)_2=true;_1=this.getItem(_1);if(!_1)return;if(_1.enabled!=_2){_1.enabled=_2;this.markForRedraw("itemEnabled");return true}
return false},isc.A.setItemChecked=function isc_Menu_setItemChecked(_1,_2){if(_2==null)_2=true;_1=this.getItem(_1);if(!_1)return;if(_1.checked!=_2){_1.checked=_2;this.markForRedraw("itemChecked");return true}
return false},isc.A.setItemTitle=function isc_Menu_setItemTitle(_1,_2){_1=this.getItem(_1);if(!_1)return;if(_1.title!=_2){_1.title=_2;this.markForRedraw("item title change");return true}
return false},isc.A.setItemIcon=function isc_Menu_setItemIcon(_1,_2,_3){_1=this.getItem(_1);if(!_1)return;if(_1.icon!=_2){_1.icon=_2;if(_3)_1.disabledIcon=_3;this.markForRedraw("item icon change");return true}
return false},isc.A.getIcon=function isc_Menu_getIcon(_1){var _2=this.fixedIconWidth&&this.getRecordIndex(_1)==0,_3=_2?this.iconWidth:null;var _4;if(_1.icon){var _5=(this.itemIsEnabled(_1)||!_1.disabledIcon?_1.icon:_1.disabledIcon);var _6={src:_5};_6.width=_1.iconWidth||this.iconWidth;_6.height=_1.iconHeight||this.iconHeight;if(isc.Browser.isStrict){_6.align="absmiddle"}
_4=this.imgHTML(_6);if(_2&&(_1.iconWidth==null||_1.iconWidth>=_3)){_2=false}else{_3-=_1.iconWidth}}
if(_1.checked){_4=this.getCheckmarkImage(_1);if(_2){var _7=this.checkmarkImage?this.checkmarkImage.width:this.iconWidth;if(_7<_3){_3-=_7}else{_2=false}}}
if(_2){if(_4)return _4+this.imgHTML("[SKIN]/../blank.gif",_3,1);else return this.imgHTML("[SKIN]/../blank.gif",_3,1)}
return _4||"&nbsp;"},isc.A.getItemTitle=function isc_Menu_getItemTitle(_1){var _2;if(this.$35k){_2=this.$35k.getTitle(_1)}else{_2=_1.title||_1.name||_1.id}
_2=_2||"&nbsp;";return _2},isc.A.getKeyTitle=function isc_Menu_getKeyTitle(_1){if(_1.keyTitle)return _1.keyTitle;return"&nbsp;"},isc.A.getCheckmarkImage=function isc_Menu_getCheckmarkImage(_1){if(!this.$356){if(isc.Browser.isStrict){this.checkmarkImage.align=this.checkmarkDisabledImage.align="absmiddle"}
this.$356=this.imgHTML(this.checkmarkImage);this.$357=this.imgHTML(this.checkmarkDisabledImage)}
return(this.itemIsEnabled(_1)?this.$356:this.$357)},isc.A.setUpKeyListening=function isc_Menu_setUpKeyListening(){var _1="";var _2,_3,_4=this.data.length;for(var i=0;i<_4;i++){_2=this.getItem(i);if(!_2)continue;_3=_2.keys;if(!_3)continue;if(!isc.isAn.Array(_3))_3=[_3];for(var _6,k=0,_8=_3.length;k<_8;k++){_6=_3[k];if(_6==null)continue;isc.Page.registerKey(_6,"target.menuKey("+i+");",this);if(!this.registeredKeys)this.registeredKeys=[];this.registeredKeys.add(_6)}
if(!_2.keyTitle)this.setItemKeyTitle(_2,_3[0])}},isc.A.destroy=function isc_Menu_destroy(_1){if(this.registeredKeys){for(var i=0;i<this.registeredKeys.length;i++){isc.Page.unregisterKey(this.registeredKeys[i],this)}}
if(this.$352)this.$352.map("destroy");if(this.$35k){var _3=this.$35k;if(!_1&&_3.$31k&&isc.isA.Function(_3.destroy)&&(_3.componentId==this.ID))
{_3.destroy()}else{this.$31j(_3)}
delete this.$35k}
if(this.$123w)isc.Page.clearEvent("resize",this.$123w);this.Super("destroy",arguments)},isc.A.menuKey=function isc_Menu_menuKey(_1){if(this.autoSetDynamicItems)this.setDynamicItems();return this.selectMenuItem(_1)},isc.A.setItemKeyTitle=function isc_Menu_setItemKeyTitle(_1,_2){var _3;if(isc.isA.String(_2))_3=_2
else if(isc.isAn.Object(_2)){if(_2.title)_3=_2.title
else _3=_2.keyName}
_1.keyTitle=_3});isc.B._maxIndex=isc.C+71;isc.A=isc.Menu;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.hideAllMenus=function isc_c_Menu_hideAllMenus(_1){var _2=_1=="itemClick",_3=_1=="outsideClick";var _4=true;if(isc.Menu.$kc.length>0){var _5=isc.Menu.$kc,_6=false,_7,_8=isc.EH.getFocusCanvas();isc.Menu.$kc=[];for(var i=_5.length-1;i>=0;i--){var _10=_5[i];if(!_10.isVisible()){continue}
if(_2&&_10.autoDismiss==false){isc.Menu.$kc.addAt(_10,0);_4=false;continue}
if(_3&&_10.autoDismissOnBlur==false){isc.Menu.$kc.addAt(_10,0);_4=false;continue}
if(_10.$sr(_8)){if(_7==null)_7=_10;_6=true}
_10.hide()}
if(_6&&isc.isA.Canvas(_7.body.focusOnHide)){_7.body.focusOnHide.focus()}}
isc.Menu.$353={};if(_4){if(isc.Menu.$35x){isc.EH.hideClickMask(isc.Menu.$35x);isc.Menu.$35x=null}}else{if(!isc.EH.clickMaskUp(isc.Menu.$35x)){this.$781()}}
if(isc.Menu.$358!=null){var _11=isc.Menu.$358;delete isc.Menu.$358;if(isc.EH.lastEvent.eventType==isc.EH.MOUSE_DOWN&&isc.EH.lastEvent.target==_11)
{_11.$359=true;isc.Page.setEvent(isc.EH.CLICK,_11,isc.Page.FIRE_ONCE,"$36a")}}},isc.A.$79j=function isc_c_Menu__getAutoDismissOnBlurMenus(){if(this.$kc==null||this.$kc.length==0)return[];var _1=[];for(var i=0;i<this.$kc.length;i++){if(this.$kc[i].autoDismissOnBlur!=false)_1.add(this.$kc[i])}
return _1},isc.A.$781=function isc_c_Menu__showMenuClickMask(){if(isc.Menu.$79j().length>0&&(isc.Menu.$35x==null||!isc.EH.clickMaskUp(isc.Menu.$35x)))
{isc.Menu.$35x=isc.EH.showClickMask("isc.Menu.hideAllMenus('outsideClick')",true)}},isc.A.menuForValueMap=function isc_c_Menu_menuForValueMap(_1,_2){var _3=[];if(isc.isA.String(_1))_1=this.getPrototype().getGlobalReference(_1);if(isc.isAn.Array(_1)){for(var i=0;i<_1.length;i++){_3[i]={value:_1[i],title:_1[i]}}}else{for(var _5 in _1){_3.add({value:_5,title:_1[_5]})}}
var _6=isc.Menu.$36b;if(_2==false||isc.Menu.$36b==null){_6=isc.Menu.newInstance({autoDraw:false,itemClick:function(_7){if(this.target.valueMapMenuSelected){this.target.valueMapMenuSelected(_7.value)}}})}
if(_2!=false&&isc.Menu.$36b==null)isc.Menu.$36b=_6;_6.setData(_3);return _6});isc.B._maxIndex=isc.C+4;isc.Menu.registerStringMethods({itemClick:"item"})
isc.A=isc.ListGrid.getPrototype();isc.A.showHeaderContextMenu=true;isc.A=isc.ListGrid.getPrototype();isc.A.showHeaderMenuButton=false;isc.$75j={title:"Show Menu",height:22,showMenuButtonImage:true,menuButtonImage:"[SKIN]menu_button.gif",menuButtonImageUp:"[SKIN]menu_button_up.gif",hiliteAccessKey:true,iconWidth:7,iconHeight:7,iconOrientation:"right",iconAlign:"right",align:"left",showMenuBelow:true,alignMenuLeft:true,menu:null,initWidget:function(_1,_2,_3,_4){if(this.showMenuButtonImage)this.$36c();return this.invokeSuper(isc.MenuButton,"initWidget",_1,_2,_3,_4)},autoDestroyMenu:true,destroy:function(_1,_2,_3,_4,_5){if(this.menu!=null&&this.autoDestroyMenu&&this.menu.destroy!=null&&!this.menu.destroyed&&!this.menu.destroying)
{this.menu.destroy();this.menu=null}
return this.invokeSuper(isc.MenuButton,"destroy",_1,_2,_3,_4,_5)},setShowMenuButtonImage:function(_1){if(_1==this.showMenuButtonImage)return;this.showMenuButtonImage=_1;if(_1)this.$36c();else this.icon=null;if(this.isDrawn())this.markForRedraw()},setShowMenuBelow:function(_1){if(_1!=this.showMenuBelow){this.showMenuBelow=_1;if(this.showMenuButtonImage){this.$36c();if(this.isDrawn())this.markForRedraw()}}},$36c:function(){var _1=this.showMenuBelow?this.menuButtonImage:this.menuButtonImageUp;if(isc.isAn.Object(_1)){if(_1.width)this.iconWidth=_1.width;if(_1.height)this.iconHeight=_1.height;this.icon=_1.src}else{this.icon=_1}},handleClick:function(){if(this.Super("handleClick",arguments)==false)return;if(this.$359)return;this.showMenu()},$36a:function(){if(this.$359){var _1=this;isc.Page.setEvent(isc.EH.IDLE,function(){_1.$359=null},isc.Page.FIRE_ONCE)}},keyPress:function(){if(isc.EventHandler.lastEvent.keyName=="Arrow_Down"){this.showMenu();return false}
return this.Super("keyPress",arguments)},$ur:function(){this.Super("$ur",arguments);this.markForRedraw()},$86e:function(_1,_2){if(!_1||!_2)return;_1.rootMenuButton=_2;_1.autoDismissOnBlur=false;_1.mouseOver=function(){var _3=this.rootMenuButton;if(_3.showMenuOnRollOver)_3.checkRollOverMouseOver(_3,this);return this.Super("mouseOver",arguments)};_1.mouseOut=function(){var _3=this.rootMenuButton;if(_3.showMenuOnRollOver)_3.checkRollOverMouseOut(_3,this);return this.Super("mouseOut",arguments)}},checkRollOverMouseOver:function(_1,_2){if(_1.$86f!=null){isc.Timer.clear(_1.$86f)}
if(_1.menu!=null&&!(_1.menu.isVisible()&&_1.menu.isDrawn())){isc.Menu.hideAllMenus();_1.showMenu()}},checkRollOverMouseOut:function(_1,_2){if(_1.$86f!=null){_1.$86f=null}
if(_1.menu!=null&&_1.menu.isVisible()&&_1.menu.isDrawn()){_1.$86f=isc.Timer.setTimeout(function(){if(_1.menu!=null&&_1.menu.isVisible()&&_1.menu.isDrawn()){isc.Menu.hideAllMenus();_1.$86f=null}},_1.rollOverMenuHideDelay)}},showMenu:function(){if(isc.isA.String(this.menu))this.menu=window[this.menu];if(!isc.isA.Menu(this.menu))this.$36d(this.menu);if(!isc.isA.Menu(this.menu))return;isc.Menu.$358=this;var _1=this.menu;if(this.showMenuOnRollOver){var _2=this;this.$86e(_1,this);_1.getSubmenu=function(_4){var _3=this.Super("getSubmenu",arguments);if(_3)_2.$86e(_3,_2);return _3}}
_1.$8h();this.positionMenu(_1);_1.show(this.menuAnimationEffect)},positionMenu:function(_1){if(!_1)return;var _2=this.getPageLeft();if(!this.alignMenuLeft){_2=_2-(_1.getVisibleWidth()-this.getVisibleWidth())}
if(this.isRTL()){_2-=(_1.getVisibleWidth()-this.getVisibleWidth())}
var _3=this.showMenuBelow?this.getPageTop()+this.getVisibleHeight()+1:this.getPageTop()-_1.getVisibleHeight()+2;_1.placeNear(_2,_3)},repositionMenu:function(){var _1=this.menu;if(_1&&isc.isA.Menu(_1)&&_1.isDrawn()&&_1.isVisible()){this.positionMenu(_1)}},$36d:function(_1){if(!_1)return;_1.autoDraw=false;if(this.showMenuOnRollOver){var _2=this;_1.getSubmenu=function(_5){var _3=this.Super("getSubmenu",arguments);_2.$86e(_3,_2);return _3}}
var _4=this.menuConstructor||isc.Menu;this.menu=isc.ClassFactory.newInstance(_4,_1)},handleMoved:function(_1,_2){this.Super("handleMoved",arguments);this.repositionMenu()},handleParentMoved:function(_1,_2,_3){this.Super("handleParentMoved",arguments);this.repositionMenu()},rollOverMenuHideDelay:250,mouseMove:function(){if(this.showMenuOnRollOver)this.mouseOver()},mouseOver:function(){if(this.showMenuOnRollOver)this.checkRollOverMouseOver(this,this);return this.Super("mouseOver",arguments)},mouseOut:function(){if(this.showMenuOnRollOver)this.checkRollOverMouseOut(this,this);return this.Super("mouseOut",arguments)}};isc.ClassFactory.defineClass("MenuButton","Button");isc.MenuButton.addProperties(isc.$75j)
isc.A=isc.MenuButton.getPrototype();isc.A.skinImgDir="images/Menu/";isc.A.baseStyle="menuButton";isc.ClassFactory.defineClass("IMenuButton","StretchImgButton");isc.IMenuButton.addProperties(isc.$75j)
isc.A=isc.IMenuButton.getPrototype();isc.A.labelSkinImgDir="images/Menu/";isc.defineClass("ToolStripMenuButton","IMenuButton");isc.A=isc.ToolStripMenuButton.getPrototype();isc.A.showTitle=true;isc.A.showRollOver=true;isc.A.showDown=true;isc.A.labelVPad=0;isc.A.labelHPad=7;isc.A.autoFit=true;isc.A.src="[SKIN]/ToolStrip/button/button.png";isc.A.capSize=3;isc.A.height=22;isc.ClassFactory.defineClass("SelectionTreeMenu","Menu")
isc.A=isc.SelectionTreeMenu.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.itemClick=function isc_SelectionTreeMenu_itemClick(_1){this.inheritedProperties.button.$21j(_1)},isc.A.getBaseStyle=function isc_SelectionTreeMenu_getBaseStyle(_1,_2,_3){var _4=this.inheritedProperties.button;if(_4.$36e(_1))return _4.selectedBaseStyle;return this.Super("getBaseStyle",arguments)},isc.A.show=function isc_SelectionTreeMenu_show(){if(this.body){for(var i=0;i<this.getTotalRows();i++){this.body.setRowStyle(i)}}
return this.Super("show",arguments)},isc.A.getItemTitle=function isc_SelectionTreeMenu_getItemTitle(_1,_2,_3,_4,_5){var _6=this.inheritedProperties.button;if(_6.displayField){return _1[_6.displayField]}
return this.invokeSuper(isc.SelectionTreeMenu,"getItemTitle",_1,_2,_3,_4,_5)});isc.B._maxIndex=isc.C+4;isc.ClassFactory.defineClass("TreeMenuButton","MenuButton");isc.ClassFactory.defineClass("ITreeMenuButton","IMenuButton");isc.$75k={title:null,unselectedTitle:"Choose a value",showPath:false,pathSeparatorString:"&nbsp;&gt;&nbsp;",selectedBaseStyle:"treeMenuSelected",overflow:isc.Canvas.VISIBLE,menuConstructor:isc.SelectionTreeMenu,getTitle:function(){if(this.title)return this.title;var _1=this.getSelectedItem();if(_1){if(!this.showPath){if(!isc.isA.Menu(this.menu))this.$36d(this.menu);return this.menu.getItemTitle(_1)}else{var _2=this.getTree();var _3=_2.getParents(_1),_4=[];for(var i=_3.length-1;i>=0;i--){if(!_2.showRoot&&i==_3.length-1)continue;_4.add(this.menu.getItemTitle(_3[i]))}
_4.add(this.menu.getItemTitle(_1));return _4.join(this.pathSeparatorString)}}else{return this.unselectedTitle}},$36d:function(_1){_1=isc.addProperties(this.menuDefaults||{},_1,{inheritedProperties:{button:this},submenuConstructor:this.menuConstructor,canSelectParentItems:this.canSelectParentItems,dataSource:this.dataSource,criteria:this.criteria,data:this.data,dataProperties:this.dataProperties});if(this.emptyMenuMessage)_1.emptyMessage=this.emptyMenuMessage;if(this.loadDataOnDemand!=null)_1.loadDataOnDemand=this.loadDataOnDemand;var _2=this.Super("$36d",[_1]);this.observe(this.menu,"treeDataLoaded","observer.$21l()");return _2},$21l:function(){if(this.treeDataLoaded)this.treeDataLoaded()},getTree:function(){if(!isc.isA.Menu(this.menu))this.$36d(this.menu);return this.menu.$35k},setData:function(_1){this.data=_1;if(this.menu!=null){if(!isc.isA.Menu(this.menu))this.$36d(this.menu);this.menu.setData(_1)}},$21j:function(_1){if(this.itemSelected&&this.itemSelected(_1,this.$36f)==false)
return;this.setSelectedItem(_1)},setSelectedItem:function(_1){this.$36f=_1;this.setTitle()},getSelectedItem:function(){return this.$36f},$36e:function(_1){var _2=this.getSelectedItem(),_3=this.getTree();while(_2){if(_1==_2)return true;_2=_3.getParent(_2)}
return false}};isc.TreeMenuButton.addProperties(isc.$75k)
isc.ITreeMenuButton.addProperties(isc.$75k)
isc.TreeMenuButton.registerStringMethods({itemSelected:"item, oldItem"});isc.ITreeMenuButton.registerStringMethods({itemSelected:"item, oldItem"});isc.ClassFactory.defineClass("TileLayout","Canvas");isc.A=isc.TileLayout.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.layoutPolicy="fit";isc.A.tileSize=50;isc.A.tileMargin=10;isc.A.layoutMargin=5;isc.A.paddingAsLayoutMargin=true;isc.A.animateTileChange=true;isc.A.orientation="horizontal";isc.A.overflow="auto";isc.A.canFocus=true;isc.A.expandMargins=true;isc.A.autoWrapLines=true;isc.A.dragLineDefaults={overflow:"hidden",styleName:"layoutDropLine"};isc.A.$66i=true;isc.A.relayoutProperties=["tilesPerLine","orientation","tileWidth","tileHeight","expandMargins"];isc.A.canDrop=true;isc.A.$66e=2;isc.B.push(isc.A.initWidget=function isc_TileLayout_initWidget(){this.$73g();this.invokeSuper(isc.TileLayout,"initWidget");if(!this.tiles)this.tiles=[];this.data=this.tiles},isc.A.draw=function isc_TileLayout_draw(_1,_2,_3,_4){this.invokeSuper(isc.TileLayout,"draw",_1,_2,_3,_4);this.$73k();this.logDebug('calling layoutTiles from draw',"TileLayout");this.layoutTiles()},isc.A.layoutChildren=function isc_TileLayout_layoutChildren(){this.Super("layoutChildren",arguments);this.logDebug('calling layoutTiles from layoutChildren',"TileLayout");this.layoutTiles()},isc.A.childResized=function isc_TileLayout_childResized(_1,_2,_3,_4){this.invokeSuper(isc.TileLayout,"childResized",_1,_2,_3,_4);this.logDebug('calling layoutTiles from childResized',"TileLayout");this.delayCall("layoutTiles",null,100)},isc.A.$73g=function isc_TileLayout__enforceLegalLayoutPolicy(){if(this.layoutPolicy!="fit"&&this.layoutPolicy!="flow"){this.layoutPolicy="fit"}},isc.A.willScroll=function isc_TileLayout_willScroll(){var _1=this.orientation=="horizontal";var _2=this.$td;var _3=this.$te;var _4=this.$tb;var _5=this.$tc;var _6,_7;if(this.$66i){_7=this.getUserVisibleTiles();_6=_7.getLength()}else{_6=this.getLength()}
if(this.layoutPolicy=="flow"){if(this.overflow!="auto"&&this.overflow!="scroll")return false;var _8=_1?this.getInnerWidth()-_5:this.getInnerHeight()-_3;var _9=_1?this.getInnerHeight()-_3:this.getInnerWidth()-_4;var _10=_1?_4:_2;var _11=_1?_2:_4;var _12=0;var _13=0;var _14=_1?this.getTileHMargin():this.getTileVMargin();var _15=_1?this.getTileVMargin():this.getTileHMargin();for(var i=0;i<_6;i++){var _17=_7?_7[i]:this.getTile(i);if(!this.autoWrapLines&&_17.startLine)_10=0;var _18=_1?_17.getVisibleWidth():_17.getVisibleHeight();if((this.autoWrapLines&&_10+_18>_8)||(!this.autoWrapLines&&_17.endLine)){_10=_1?_4:_2;;_11+=_12+_15;_12=0;_13++}
var _19=_1?_17.getVisibleHeight():_17.getVisibleWidth();if(_11+_19>_9)return true;if(_12<_19){_12=_19}
_10+=_18+_14}
return false}else{var _9=_1?this.getVisibleHeight()-(_2+_3):this.getVisibleWidth()-(_5+_4);var _19=_1?this.getTileHeight():this.getTileWidth();var _15=_1?this.getTileVMargin():this.getTileHMargin();var _20=this.getTilesPerLine();var _21=Math.floor(_9/(_19+_15));var _22=_20*_21;return(_6>_22)}},isc.A.layoutTiles=function isc_TileLayout_layoutTiles(_1){if(!this.isDrawn())return;this.$585=[];this.$608=0;this.$619=[this.getScrollLeft(),this.getScrollTop(),this.getInnerWidth(),this.getInnerHeight()];var _2,_3,_4,_5;if(this.paddingAsLayoutMargin){var _6=this.$tq();_4=_6.left;_5=_6.right;_2=_6.top;_3=_6.bottom}
var _7=this.$td=this.$du(this.layoutMargin,_2,0);var _8=this.$te=this.$du(this.layoutMargin,_3,0);var _9=this.$tb=this.$du(this.layoutMargin,_4,0);var _10=this.$tc=this.$du(this.layoutMargin,_5,0);var _11,_12;if(this.$66i){_12=this.getUserVisibleTiles();_11=_12.getLength()}else{_11=this.getLength()}
if(this.layoutPolicy=="flow"){this.logDebug("starting flow layout","TileLayout");var _13=this.orientation=="horizontal";var _14=_13?this.getInnerWidth()-_10:this.getInnerHeight()-_8;if(this.willScroll())_14-=this.getScrollbarSize();var _15=_13?_9:_7;var _16=_13?_7:_9;var _17=0;var _18=0;var _19=_13?this.getTileHMargin():this.getTileVMargin();var _20=_13?this.getTileVMargin():this.getTileHMargin();for(var i=0;i<_11;i++){var _22=_12?_12[i]:this.getTile(i);if(!this.autoWrapLines&&_22.startLine)_15=0;var _23=_13?_22.getVisibleWidth():_22.getVisibleHeight();if((this.autoWrapLines&&_15+_23>_14)||(!this.autoWrapLines&&_22.endLine)){_15=_13?_9:_7;;_16+=_17+(i==0?0:_20);_17=0;_18++}
var _24=_13?_16:_15;var _25=_13?_15:_16;var _26=_12?_12[i]:i;this.processTile(_26,_24,_25);var _27=_13?_22.getVisibleHeight():_22.getVisibleWidth();if(_17<_27){_17=_27}
_15+=_23+_19}}else{this.logDebug("starting fit layout:"+this.$35v,"TileLayout");var _28=this.getTilesPerLine();var _29=this.getTileHeight();var _30=this.getTileWidth();var _13=this.orientation=="horizontal";var _31,_32,_33;var _34,_35,_36,_37,_38,_39;if(this.shouldUseIncrRendering()){this.logDebug("fit layout, using incremental rendering","TileLayout");var _40=this.getVisibleTiles();this.$57r=_40;_35=_40[0];_34=_11;var _41=this.getVisibleLines();_38=_41[0];_39=_41[0]+_41[1];if(!this.hasAllVisibleTiles(_40,true))return}else{this.logDebug("fit layout, rendering all tiles","TileLayout");_34=_11;_35=0;_38=0;_39=Math.ceil(_34/_28);_31=this.getTileHMargin();_32=this.getTileVMargin()}
var _42=Math.ceil(_11/_28);var _32=this.getTileVMargin();var _31=this.getTileHMargin();var _27=_13?_29:_30;var _43=_13?_32:_31;var _44=((_27+_43)*_42)-_43+(_13?_7+_8:_9+_10);_37=this.$58t();_13?_37.setHeight(_44):_37.setWidth(_44);_37.sendToBack();_33=this.getExtraMarginPixels(_28,_29,_30,_31,_32);for(var i=_38;i<_39;i++){var _45=_33;for(var j=0;j<_28;j++){var _47=_13?i:j;var _48=_13?j:i;var _24=(_47*_29)+(_47*_32)+_7;if(!_13&&j+1<=_33)_24+=j+1;var _25=(_48*_30)+(_48*_31)+_9;if(_13&&j+1<=_33)_25+=j+1;var _26=_12?_12[_35]:_35
var _22=this.processTile(_26,_24,_25,this.getTileHeight(),this.getTileWidth());_35++;if(_35>=_34)break}
if(_35>=_34)break}}},isc.A.hasAllVisibleTiles=function isc_TileLayout_hasAllVisibleTiles(){return true},isc.A.getUserVisibleTiles=function isc_TileLayout_getUserVisibleTiles(){var _1=[];for(var i=0;i<this.getLength();i++){var _3=this.getTile(i);if(!_3.$66j)_1.add(_3)}
return _1},isc.A.processTile=function isc_TileLayout_processTile(_1,_2,_3,_4,_5){var _6;if(this.$35v){if(isc.isA.Canvas(_1))_6=_1;else _6=this.getRecordTile(_1);if(!_6)return;if(this.$584!=null&&this.$584.findIndex("ID",_6.ID)==-1)return;if(!_6)return;if(_4)_6.setHeight(_4);if(_5)_6.setWidth(_5);if(_6.getTop()!=_2||_6.getLeft()!=_3){_6.$589=_2;_6.$588=_3;this.$586.add(_6)}
var _7=[_3,_2,_6.getVisibleWidth(),_6.getVisibleHeight()];if(isc.Canvas.rectsIntersect(this.$619,_7)){if(!this.$585.contains(_6))this.$585.add(_6)}}else{if(isc.isA.Canvas(_1))_6=_1;else _6=this.getTile(_1);if(!_6)return;if(_6.isDirty())_6.redraw();if(_4)_6.setHeight(_4);if(_5)_6.setWidth(_5);_6.setTop(_2);_6.setLeft(_3);this.addChild(_6);if(isc.TileGrid&&isc.isA.TileGrid(this)){_6.$114t=true;_6.show();_6.$114t=null}else{if(_6.visibility=="hidden")_6.$66j=true;else _6.$66j=null}
var _7=[_6.getLeft(),_6.getTop(),_6.getVisibleWidth(),_6.getVisibleHeight()];if(isc.Canvas.rectsIntersect(this.$619,_7)){if(!this.$585.contains(_6))this.$585.add(_6)}
this.$608+=1;return _6}},isc.A.$58t=function isc_TileLayout__getSpacerCanvas(){if(!this.$58u){this.$58u=isc.Canvas.create({autoDraw:false,width:1,height:1});this.addChild(this.$58u)}
return this.$58u},isc.A.getDrawnStartIndex=function isc_TileLayout_getDrawnStartIndex(){if(this.$57r)return this.$57r[0];else return null},isc.A.getDrawnEndIndex=function isc_TileLayout_getDrawnEndIndex(){if(this.$57r)return this.$57r[1];else return null},isc.A.shouldUseIncrRendering=function isc_TileLayout_shouldUseIncrRendering(){if(this.$35v){return true}else if(!this.showAllRecords&&this.layoutPolicy=="fit"&&(this.overflow=="auto"||this.overflow=="hidden")){return true}else{return false}},isc.A.getLength=function isc_TileLayout_getLength(){if(!this.tiles)return 0;else return this.tiles.getLength()},isc.A.getTilesPerLine=function isc_TileLayout_getTilesPerLine(){if(this.tilesPerLine)return this.tilesPerLine;else{var _1=this.orientation=="horizontal"?this.getTileWidth():this.getTileHeight();var _2=this.orientation=="horizontal"?(this.tileHMargin||this.tileMargin):(this.tileVMargin||this.tileMargin);var _3=this.orientation=="horizontal"?this.getInnerWidth():this.getInnerHeight();var _4=Math.floor(_3/_1);var _5=this.orientation=="horizontal"?this.$tb+this.$tc:this.$td+this.$te;var _6=_2*(_4-1)+(_4*_1)+_5;if(_6>_3){var _7=Math.ceil((_6-_3)/_1);_4-=_7}
if(_4<1)_4=1;return _4}},isc.A.$73k=function isc_TileLayout__setTileSize(){var _1=this.orientation=="horizontal";if(this.layoutPolicy!="fit"||this.expandMargins||!this.tilesPerLine||(_1&&this.tileWidth)||(!_1&&this.tileHeight))return;var _2=_1?(this.tileHMargin||this.tileMargin):(this.tileVMargin||this.tileMargin);var _3=_1?this.getInnerWidth():this.getInnerHeight();var _4=this.layoutMargin*2;var _5=_3-_4;if(!this.tilesPerLine){if(this.tileSize==null)this.tileSize=50}else{var _6=Math.floor(_5/this.tilesPerLine);_6-=_2;if(this.orientation=="horizontal")this.defaultTileWidth=_6;else this.defaultTileHeight=_6}},isc.A.getVisibleLines=function isc_TileLayout_getVisibleLines(){var _1=(this.orientation=="horizontal");var _2=_1?this.getScrollTop():this.getScrollLeft();var _3=_1?this.getTileHeight()+this.getTileVMargin():this.getTileWidth()+this.getTileHMargin();var _4=_1?this.getInnerHeight():this.getInnerWidth();var _5=Math.floor(_2/_3);if(_5>0)_5--;var _6=Math.ceil(_4/_3)+2;return[_5,_6]},isc.A.getVisibleTiles=function isc_TileLayout_getVisibleTiles(){var _1=this.getVisibleLines();var _2=this.getTilesPerLine();var _3=_1[0]*_2;var _4=(_1[0]+_1[1])*_2;return[_3,_4]},isc.A.scrolled=function isc_TileLayout_scrolled(){if(this.shouldUseIncrRendering()){if(this.$57s)isc.Timer.clear(this.$57s);this.$57s=this.delayCall("layoutAfterScroll")}},isc.A.layoutAfterScroll=function isc_TileLayout_layoutAfterScroll(){this.logDebug('layoutAfterScroll',"TileLayout");if(this.shouldLayoutTiles()){this.logDebug('calling layoutTiles from layoutAfterScroll',"TileLayout");this.layoutTiles()}},isc.A.shouldLayoutTiles=function isc_TileLayout_shouldLayoutTiles(){var _1=this.getVisibleTiles();if(_1[0]==this.getDrawnStartIndex()&&_1[1]==this.getDrawnEndIndex()){return false}else{return true}},isc.A.getTileWidth=function isc_TileLayout_getTileWidth(){if(this.tileWidth){if(isc.isA.String(this.tileWidth)){this.tileWidth=parseInt(this.tileWidth);if(!isc.isA.Number(this.tileWidth))this.tileWidth=this.tileSize}
return this.tileWidth}else if(this.defaultTileWidth){return this.defaultTileWidth}else{return this.tileSize}},isc.A.getTileHeight=function isc_TileLayout_getTileHeight(){if(this.tileHeight){if(isc.isA.String(this.tileHeight)){this.tileHeight=parseInt(this.tileHeight);if(!isc.isA.Number(this.tileHeight))this.tileHeight=this.tileSize}
return this.tileHeight}else if(this.defaultTileHeight!=null){return this.defaultTileHeight}else{return this.tileSize}},isc.A.getInnerBreadth=function isc_TileLayout_getInnerBreadth(){var _1=this.orientation=="horizontal"?this.getInnerWidth():this.getInnerHeight();return _1},isc.A.getTileHMargin=function isc_TileLayout_getTileHMargin(){var _1;if(this.tileHMargin){_1=this.tileHMargin}else{_1=this.tileMargin}
if(this.layoutPolicy=="fit"&&this.expandMargins&&this.orientation=="horizontal"){var _2=this.getTilesPerLine();var _3=this.$tb+this.$tc;var _4=_2-1;if(_4==0)_4=1;var _5=Math.floor((this.getInnerBreadth()-(_2*this.getTileWidth())-_3)/_4);if(_5<_1)return _1;else return _5}else{return _1}},isc.A.getTileVMargin=function isc_TileLayout_getTileVMargin(){var _1;if(this.tileHMargin){_1=this.tileVMargin}else{_1=this.tileMargin}
if(this.layoutPolicy=="fit"&&this.expandMargins&&this.orientation=="vertical"){var _2=this.getTilesPerLine();var _3=this.$td+this.$te;var _4=_2-1;if(_4==0)_4=1;var _5=Math.floor((this.getInnerBreadth()-(_2*this.getTileHeight())-_3)/_4);if(_5<_1)return _1;else return _5}else{return _1}},isc.A.getExtraMarginPixels=function isc_TileLayout_getExtraMarginPixels(_1,_2,_3,_4,_5){if(this.expandMargins&&this.orientation=="horizontal"){var _6=(_1*_3)+((_1-1)*_4)+(this.$tb+this.$tc);return this.getInnerBreadth()-_6}else if(this.expandMargins&&this.orientation=="vertical"){var _6=(_1*_2)+((_1-1)*_5)+(this.$td+this.$te);return this.getInnerBreadth()-_6}else{return 0}},isc.A.getTile=function isc_TileLayout_getTile(_1){return isc.Class.getArrayItem(_1,this.tiles)},isc.A.addTile=function isc_TileLayout_addTile(_1,_2){if(!this.tiles)return;if(_2!==0&&!_2)_2=this.tiles.getLength();this.tiles.addAt(_1,_2);this.reLayout()},isc.A.removeTile=function isc_TileLayout_removeTile(_1){if(!this.tiles)return;if(!isc.isA.Canvas(_1)){var _2=this.tiles.findIndex("ID",_1);if(_2==-1)_1=this.tiles.get(_1);else _1=this.tiles.get(_2)}
this.removeChild(_1)},isc.A.removeChild=function isc_TileLayout_removeChild(_1,_2){this.tiles.removeWhere("ID",_1.ID);if(this.$585){this.$585.removeWhere("ID",_1.ID)}
if(this.$584&&this.$584!=this.$585){this.$584.removeWhere("ID",_1.ID)}
if(this.$586){this.$586.removeWhere("ID",_1.ID)}
this.invokeSuper(isc.TileLayout,"removeChild",_1,_2);this.reLayout()},isc.A.getRecordTile=function isc_TileLayout_getRecordTile(_1){if(_1==null)return null;return this.tiles.get(_1)},isc.A.childVisibilityChanged=function isc_TileLayout_childVisibilityChanged(_1,_2){if(!this.$35v&&!_1.$114t){if(_2=="hidden")_1.$66j=true;else _1.$66j=null;this.reLayout()}},isc.A.propertyChanged=function isc_TileLayout_propertyChanged(_1,_2){this.invokeSuper(isc.TileLayout,"propertyChanged",_1,_2);if(isc.endsWith(_1,"Margin")||this.relayoutProperties.contains(_1))
{this.layoutTiles()}},isc.A.showDragLineForRecord=function isc_TileLayout_showDragLineForRecord(){if(isc.isAn.Array(this.data)||(isc.isA.ResultSet(this.data))){var x=this.getOffsetX(),y=this.getOffsetY(),_3=this.getPageLeft(),_4=this.getPageTop();if(this.data.getLength()==0){return}
var _5=this.findIndexForCoord(x,y);if(this.$66f==null)this.$66f=_5;var _6,_7,_8=this.getRecordTile(_5);if(_8!=null){if((this.orientation=="horizontal"&&x>_8.getLeft()+(_8.getVisibleWidth()/2))||(this.orientation=="vertical"&&y>_8.getTop()+(_8.getVisibleHeight()/2))){_5++;_8=this.getRecordTile(_5)}}
if(_5==null||_8==null){_5=this.data.getLength();_8=this.getRecordTile(_5-1);if(this.orientation=="horizontal"){_6=_8.getLeft()+_8.getVisibleWidth()-this.$66e;_7=_8.getTop()}else{_6=_8.getLeft();_7=_8.getTop()+_8.getVisibleHeight()-this.$66e}}else{_6=_8.getLeft();_7=_8.getTop()}
this.$610=_5;var _9,_10;if(this.orientation=="horizontal"){_10=_8.getVisibleHeight();_9=this.$66e}
else{_9=_8.getVisibleWidth();_10=this.$66e}
this.showDragLine(_3+(_6-this.getScrollLeft()),_4+(_7-this.getScrollTop()),_9,_10)}},isc.A.showDragLine=function isc_TileLayout_showDragLine(_1,_2,_3,_4){this.makeDragLine();var _5=this.getVisibleHeight();var _6=Math.round((_5-this.getInnerHeight())/2);var _7=this.getPageTop();var _8=_7+_6;var _9=_7+_5-_6;if(_2<_8){_4=_4-(_8-_2);_2=_8}else if(_2+_4>_9){if(_2>=_9){_4=0}else{_4=_4-((_2+_4)-_9)}}
this._dragLine.moveTo(_1,_2);this._dragLine.resizeTo(_3,_4);this._dragLine.show()},isc.A.dropOut=function isc_TileLayout_dropOut(){this.hideDragLine()},isc.A.dropMove=function isc_TileLayout_dropMove(){this.showDragLineForRecord()},isc.A.findIndexForCoord=function isc_TileLayout_findIndexForCoord(_1,_2){var _3=this.getDrawnStartIndex(),_4=this.getDrawnEndIndex();if(_3==null||_4==null){_3=0;_4=this.data.getLength()}
var _5=this.ns.EH;var _6=_5.dragTarget,_7;if(_6)_7=_6.ID;for(var i=_3;i<_4;i++){var _9=this.getRecordTile(i);if(!_9)continue;if(_9.ID==_7)continue;if(_9.getLeft()+_9.getVisibleWidth()>_1&&_9.getTop()+_9.getVisibleHeight()>_2)return i}
return null},isc.A.drop=function isc_TileLayout_drop(){var _1=this.$610||0;var _2=this.ns.EH.dragTarget;var _3=this.$66f;this.$66f=null;if(!isc.isAn.Array(_2))_2=[_2];var _4=_2[0].parentElement;var _5=this.data.get(_1);this.transferRecords(_2,_5,_1,_4);this.reLayout()},isc.A.reLayout=function isc_TileLayout_reLayout(){if(this.destroying)return;if(this.animateTileChange){this.delayCall("$583",null,200)}else{this.logDebug('calling layoutTiles from reLayout',"TileLayout");this.layoutTiles()}},isc.A.$583=function isc_TileLayout__animateChange(){this.logDebug("starting $583()","TileLayout");this.$35v=true;this.$0j=[];var _1=this.$584=this.$585;this.$586=[];this.layoutTiles();if(_1!=null){for(var i=0;i<_1.length;i++){if(!this.$585.contains(_1[i])){_1[i].hide()}}}
var _3=this.$586.length;if(_3==0){this.$587();return}
for(var i=0;i<_3;i++){var _4=this.$586[i];_4.show();var _5;if(i==_3-1){_5=_4.animateMove(_4.$588,_4.$589,this.getID()+".$587()")}else{_5=_4.animateMove(_4.$588,_4.$589)}
this.$0j.add({ID:_5,tile:_4})}},isc.A.$587=function isc_TileLayout__finishAnimating(){this.$35v=false;this.$584=null;delete this.$584;this.$586=null;delete this.$586;this.logDebug('calling layoutTiles from $587',"TileLayout");this.layoutTiles()},isc.A.isAnimatingTileLayout=function isc_TileLayout_isAnimatingTileLayout(){return this.$35v===true},isc.A.setTileSize=function isc_TileLayout_setTileSize(_1){this.tileSize=_1;this.layoutTiles()},isc.A.setTileWidth=function isc_TileLayout_setTileWidth(_1){this.tileWidth=_1;this.layoutTiles()},isc.A.setTileHeight=function isc_TileLayout_setTileHeight(_1){this.tileHeight=_1;this.layoutTiles()},isc.A.setTilesPerLine=function isc_TileLayout_setTilesPerLine(_1){this.tilesPerLine=_1;this.$73k();this.layoutTiles()},isc.A.setTileMargin=function isc_TileLayout_setTileMargin(_1){this.tileMargin=_1;this.layoutTiles()},isc.A.setTileHMargin=function isc_TileLayout_setTileHMargin(_1){this.tileHMargin=_1;this.layoutTiles()},isc.A.setTileVMargin=function isc_TileLayout_setTileVMargin(_1){this.tileVMargin=_1;this.layoutTiles()});isc.B._maxIndex=isc.C+52;isc.ClassFactory.defineClass("FlowLayout","TileLayout");isc.A=isc.FlowLayout.getPrototype();isc.A.layoutPolicy="flow";isc.ClassFactory.defineClass("TileGrid","TileLayout","DataBoundComponent");isc.A=isc.TileGrid.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.tileValueStyle="tileValue";isc.A.valuesShowRollOver=false;isc.A.valuesShowSelected=true;isc.A.valuesShowDown=false;isc.A.tileValueAlign="center";isc.A.showLabels=false;isc.A.tileLabelStyle="tileLabel";isc.A.wrapValues=false;isc.A.canSortFields=true;isc.A.autoFetchTextMatchStyle="substring";isc.A.selectionType=isc.Selection.MULTIPLE;isc.A.tileConstructor="SimpleTile";isc.A.detailViewerConstructor="DetailViewer";isc.A.recycleTiles=true;isc.A.animateTileChange=true;isc.A.styleName="tileGrid";isc.A.$66i=false;isc.A.$726=[];isc.A.$727=10;isc.A.$20s="Arrow_Up";isc.A.$20t="Arrow_Down";isc.A.$60n="Arrow_Left";isc.A.$60o="Arrow_Right";isc.A.dragAppearance=isc.EH.TRACKER;isc.A.dragTrackerMode="title";isc.A.tileDragAppearance=isc.EH.TRACKER;isc.B.push(isc.A.initWidget=function isc_TileGrid_initWidget(){this.$73g();if(isc.FormulaBuilder==null)this.canAddFormulaFields=false;if(isc.SummaryBuilder==null)this.canAddSummaryFields=false;if(this.layoutPolicy=="flow"){isc.logWarn("TileGrid does not support layoutPolicy 'flow'; there may be unexpected behavior. Use a TileLayout instead for flow layout.")}
this.$31i();this.invokeSuper(isc.TileLayout,"initWidget");if(!this.tiles)this.tiles=[];if(this.showAllRecords)this.recycleTiles=false;var _1=this.getDataSource();if(isc.isA.DataSource(_1)){this.$601={};if(_1.getPrimaryKeyFieldNames().length==0){this.animateTileChange=false}}
this.detailViewer=this.createAutoChild("detailViewer",{tileGrid:this,showLabel:this.showLabels,showBorder:false,cellStyle:this.tileValueStyle,labelStyle:this.tileLabelStyle,blockStyle:"normal",wrapValues:this.wrapValues,cellPadding:0,valueAlign:this.tileValueAlign,useInnerWidth:false,clipValues:true,width:10,height:10,data:[],dataSource:_1,getCellStyle:function(_3,_4,_5,_6){var _2=(_4.cellStyle||this.cellStyle);if(this.tileGrid.valuesShowRollOver&&this.currentTile.state==isc.StatefulCanvas.STATE_OVER){_2+=this.currentTile.getStateSuffix()}else if(this.tileGrid.valuesShowDown&&this.currentTile.state==isc.StatefulCanvas.STATE_DOWN){_2+=this.currentTile.getStateSuffix()}else if(this.tileGrid.valuesShowSelected&&this.currentTile.isSelected()){_2+=this.currentTile.getStateSuffix()}
return _2}},this.detailViewerProperties);if(this.fieldState!=null)this.setFieldState(this.fieldState);else this.setFields(this.fields,true);this.membersMargin=this.tileMargin;this.setData(this.data)},isc.A.setDataSource=function isc_TileGrid_setDataSource(_1,_2){this.Super("setDataSource",arguments);var _3=this.getDataSource();if(isc.isA.DataSource(_3)){this.$601={};if(_3.getPrimaryKeyFieldNames().length==0){this.animateTileChange=false}}},isc.A.shouldUseField=function isc_TileGrid_shouldUseField(_1,_2){if(this.Super("shouldUseField",arguments))return true;_2=isc.DS.get(_2);if(isc.isA.DataSource(_2)){var _3=_2.getIconField();if(_1==_3||_1.name==_3||(_3&&_1.name==_3.name))
{return true}}
return false},isc.A.setFields=function isc_TileGrid_setFields(_1,_2){var _3=this.getDataSource();if(!_1&&isc.isA.DataSource(_3)){var _4=_3.getIconField();if(_4){_1=[];_1.add({name:_4,type:_4.type});_1.add({name:_3.getTitleField()})}}
if(this.completeFields==null)this.fields=[];this.completeFields=this.bindToDataSource(_1);if(this.completeFields==null)this.completeFields=[];if(!this.completeFields)return;this.deriveVisibleFields();this.invalidateUserCache();this.detailViewer.fields=this.completeFields.duplicate();if(!_2){this.logDebug('calling layoutTiles from setFields',"TileGrid");this.layoutTiles()}},isc.A.deriveVisibleFields=function isc_TileGrid_deriveVisibleFields(){this.fields.setArray(this.getVisibleFields(this.completeFields))},isc.A.getVisibleFields=function isc_TileGrid_getVisibleFields(_1){var _2=this.detailViewer,_3=this.getData(),_4=_1.duplicate();for(var i=0;i<_1.length;i++){var _6=_1.get(i);if(!_2.fieldShouldBeVisible(_6,_3)||_6.visible==false)_4.remove(_6)}
return _4},isc.A.computeTileDimensions=function isc_TileGrid_computeTileDimensions(_1){if(((this.tileHeight&&this.tileWidth)||(this.tileSize))&&!_1)return;if(!((isc.ResultSet&&isc.isA.ResultSet(this.data)&&this.data.resultSize>=this.data.getLength())||isc.isAn.Array(this.data))){return}
if(this.layoutPolicy!="fit")return;var _2=0,_3=0;this.detailViewer.clipValues=false;for(var i=0;i<this.data.getLength();i++){var t=this.getTile(i);var _6=t.overflow;t.setOverflow("visible");t.redraw();t.show();var _7=t.getVisibleHeight();var _8=t.getVisibleWidth();if(_7>_2)_2=_7;if(_8>_3)_3=_8;t.setOverflow(_6);t.hide()}
this.detailViewer.clipValues=true;if(!this.tileHeight&&_2>0)this.tileHeight=_2;if(!this.tileWidth&&_3>0)this.tileWidth=_3},isc.A.getTileID=function isc_TileGrid_getTileID(_1){if(!_1)return null;var _2=this.getDataSource();if(isc.isA.DataSource(_2)&&_2.getPrimaryKeyFieldNames().length>0){var _3=_2.getPrimaryKeyFields();var _4="";for(var _5 in _3){_4+=_1[_5]}
return this.$601[_4]}else{return _1.$57v}},isc.A.setTileID=function isc_TileGrid_setTileID(_1,_2){var _3=this.getDataSource();if(isc.isA.DataSource(_3)&&_3.getPrimaryKeyFieldNames().length>0){var _4=_3.getPrimaryKeyFields();var _5="";for(var _6 in _4){_5+=_1[_6]}
this.$601[_5]=_2}else{_1.$57v=_2}},isc.A.getTileRecord=function isc_TileGrid_getTileRecord(_1){var _2=this;var _3=_2.data;var _4,_5;if(isc.isA.ResultSet(this.data)&&!this.data.lengthIsKnown())return null;if(this.showAllRecords||_2.getDrawnStartIndex()==null||_2.getDrawnEndIndex()==null){_4=0;_5=_3.getLength()}else{_4=_2.getDrawnStartIndex();_5=_2.getDrawnEndIndex()+1;if(_5>_3.getLength())_5=_3.getLength()}
for(var i=_4;i<_5;i++){var _7=_3.get(i);if(_2.getTileID(_7)==_1.ID)return _7}
return null},isc.A.setTileRecord=function isc_TileGrid_setTileRecord(_1,_2){return null},isc.A.setData=function isc_TileGrid_setData(_1){if(this.$35v){return false}
if(!_1)return;if(this.data){this.ignore(this.data,"dataChanged");this.ignore(this.data,"dataArrived")}
if(_1)this.data=_1;if(!this.data)return;if(this.data){if(isc.ResultSet&&isc.isA.ResultSet(this.data)){this.observe(this.data,"dataArrived","observer.dataArrived(arguments[0],arguments[1])");this.observe(this.data,"dataChanged","observer.dataChanged(operationType, originalRecord, rowNum, updateData)")}else{this.observe(this.data,"dataChanged","observer.dataChanged()")}}
if(!this.selection||(this.data!=this.selection.data)){this.createSelectionModel()}
this.dataChanged()},isc.A.getData=function isc_TileGrid_getData(){return this.data},isc.A.getPrimaryKeys=function isc_TileGrid_getPrimaryKeys(_1){var _2=this.data;if(!isc.ResultSet||!isc.isA.ResultSet(_2))return _1;var _3=this.getDataSource(),_4={};if(isc.isA.DataSource(_3)){var _5=_3.getPrimaryKeyFieldNames();for(var i=0;i<_5.length;i++){_4[_5[i]]=_1[_5[i]]}}
return _4},isc.A.setRecordValues=function isc_TileGrid_setRecordValues(_1,_2){if(!this.data)return;var _3=this.data.indexOf(_1);if(_3==-1)return;var _4=this.data.get(_3);isc.combineObjects(_4,_2);this.invalidateUserCache(_4);if(this.valuesManager!=null){this.valuesManager.$71e(_3,null,_4,this)}
this.logDebug('calling layoutTiles from setRecordValues',"TileGrid");this.layoutTiles()},isc.A.dataArrived=function isc_TileGrid_dataArrived(_1,_2){},isc.A.dataChanged=function isc_TileGrid_dataChanged(_1,_2,_3,_4){this.invalidateUserCache();if(!this.data||(isc.ResultSet&&isc.isA.ResultSet(this.data)&&!this.data.lengthIsKnown()))
{this.logDebug("dataChanged: returning due to no data yet","TileGrid");return}
this.computeTileDimensions();if(!this.$257)this.$257=0;this.detailViewer.setHilites(this.hilites);if(_1=="add"){this.logDebug("add","TileGrid");this.layoutTiles()}else if(_1=="remove"){this.logDebug("remove","TileGrid");if((this.recycleTiles&&this.data.getLength()<this.getDrawnEndIndex()-this.getDrawnStartIndex()+1)||!this.recycleTiles){var _5=this.tiles[this.tiles.length-1];this.tiles.remove(_5);_5.destroy()}
this.layoutTiles()}else if(_1=="update"){this.logDebug("update","TileGrid");this.layoutTiles()}else if(this.data.getLength()>=this.$257){this.logDebug("filter or sort, new data same or longer","TileGrid");if(this.$257>0)this.$582();else this.layoutTiles()}else{this.logDebug("filter or sort, new data shorter","TileGrid");this.selection.deselectAll();var _6=this.getDrawnEndIndex()+1;var _7=_6>this.data.getLength()?this.data.getLength():_6;var _8=this.getTilesPerLine();if(Math.floor(_6/_8)>Math.floor(_7/_8)&&this.getScrollTop()!=0&&this.recycleTiles){this.scrollToTop();this.layoutTiles()}else{this.$582()}}
this.$257=this.data.getLength();if(this.data.getLength()==0){this.cleanupExtraTiles(0)}},isc.A.$582=function isc_TileGrid__layoutAfterDataChange(){if(this.destroying)return;if(this.animateTileChange){if(this.$35v){var _1=this.$0j;for(var i=0;i<_1.length;i++){this.finishAnimation(_1[i].ID);_1[i].tile.hide()}
return}
this.fireOnPause("tileGridAnimate",this.$583)}else{this.logDebug('calling layoutTiles from layoutAfterDataChange',"TileGrid");this.layoutTiles()}},isc.A.cleanupExtraTiles=function isc_TileGrid_cleanupExtraTiles(_1){var _2=this.tiles;for(var i=_1;i<_2.length;i++){var _4=_2[i];_4.hide();_4.moveTo(0,0)}},isc.A.destroy=function isc_TileGrid_destroy(){if(this.data){this.ignore(this.data,"dataChanged");this.ignore(this.data,"dataArrived");if(this.data.$31k&&isc.isA.Function(this.data.destroy))
this.data.destroy()}
this.Super("destroy",arguments)},isc.A.$57t=function isc_TileGrid__getTileID(_1){return this.ID+"_tile_"+_1},isc.A.getLength=function isc_TileGrid_getLength(){if(!this.data||(isc.ResultSet&&isc.isA.ResultSet(this.data)&&!this.data.lengthIsKnown()))return 0;else return this.data.getLength()},isc.A.makeTile=function isc_TileGrid_makeTile(_1,_2){var _3={ID:this.$57t(_2),tileNum:_2,canHover:true,handleHover:function(){if(this.creator.itemHover)this.creator.fireCallback("itemHover","item",[this])},mouseDown:function(){this.creator.$673(this);this.creator.focus()},rightMouseDown:function(){var _4=this.creator.$90l(this);if(_4==false)return false;this.creator.focus();return _4},mouseUp:function(){this.creator.$674(this)},doubleClick:function(){var _5=this.creator.getTileRecord(this);return this.creator.recordDoubleClick(this.creator,this,_5)}};if(_1.tileProperties)isc.addProperties(_3,_1.tileProperties);var _6=_1.tileConstructor?_1.tileConstructor:this.tileConstructor;var _7=this.createAutoChild("tile",_3,_6);this.detailViewer.setWidth(_7.getInnerWidth());this.detailViewer.setHeight(_7.getInnerHeight());return _7},isc.A.setHilites=function isc_TileGrid_setHilites(_1){this.Super("setHilites",arguments);this.dataChanged()},isc.A.getTileHTML=function isc_TileGrid_getTileHTML(_1){return this.detailViewer.getBlockHTML([_1])},isc.A.getTile=function isc_TileGrid_getTile(_1){var _2,_3,_4;if(isc.isAn.Object(_1)){_3=_1;_4=this.data.indexOf(_1);_2=this.getTileID(_1)}else{_3=this.data.get(_1);if(!_3)return null;_2=this.$57t(_1);_4=_1}
if(!_2)_2=this.$57t(_4);var _5=null;if(this.canReclaimTile(_4)&&!_3.tileConstructor){_5=this.$57w(_4);if(_5.isA("SimpleTile")){_5.redraw();if(this.selection.isSelected(_3)){_5.setSelected(true)}else{_5.setSelected(false)}}}else if(_2&&window[_2]){_5=this.$57w(_4,window[_2]);if(_5.isA("SimpleTile")){_5.redraw();if(this.selection.isSelected(_3)){_5.setSelected(true)}else{_5.setSelected(false)}}}else{var _6=this.$57t(_4);this.setTileID(_3,_6);_5=this.makeTile(_3,_4);if(!_5.isA("SimpleTile")){if(_5.setFields&&_5.getFields&&(_5.getFields()==null||_5.getFields().length==0)){_5.setFields(isc.clone(this.fields))}}
if(!this.tiles)this.tiles=[];this.tiles.add(_5)}
if(!_5.isA("SimpleTile")){if(_5.setValues){_5.setValues(_3)}else if(_5.setData){_5.setData([_3])}else{_5.record=_3}}
return _5},isc.A.getTileIndex=function isc_TileGrid_getTileIndex(_1){return this.tiles.indexOf(_1)},isc.A.getCurrentTile=function isc_TileGrid_getCurrentTile(){return this.detailViewer.currentTile},isc.A.$728=function isc_TileGrid__clearLogs(){this.$726=[]},isc.A.$729=function isc_TileGrid__limitLog(_1,_2){if(!this.$726.find("key",_2)){this.$726.add({key:_2,logs:this.$727})}
if(this.$726.find("key",_2).logs>0){isc.logWarn(_1);this.$726.find("key",_2).logs-=1}},isc.A.layoutTiles=function isc_TileGrid_layoutTiles(){this.requestVisibleRows();this.computeTileDimensions();this.invokeSuper(isc.TileGrid,"layoutTiles");var _1=this.tiles?this.tiles.length:0;var _2=this.$608;if(!this.$35v&&_2<_1)this.cleanupExtraTiles(_2)},isc.A.invalidateCache=function isc_TileGrid_invalidateCache(){this.Super("invalidateCache",arguments);this.requestVisibleRows()},isc.A.requestVisibleRows=function isc_TileGrid_requestVisibleRows(){var _1=this.data;if(_1==null||!isc.isA.ResultSet(_1))return;if(!_1.lengthIsKnown()){if(this.tileSize==null)_1.get(0);else{var _2=this.getVisibleTiles();_1.getRange(_2[0],_2[1])}}},isc.A.$57w=function isc_TileGrid__reclaimTile(_1,_2){var _3=this.data.get(_1),_4;if(!_2){var _5=_1-this.getDrawnStartIndex();_4=this.tiles[_5]}else{_4=_2}
var _6=this.getTileRecord(_4);if(_6)this.setTileID(_6,null);this.setTileID(_3,_4.ID);_4.tileNum=_1;return _4},isc.A.canReclaimTile=function isc_TileGrid_canReclaimTile(_1){var _2=this.getDrawnStartIndex()||0;if(this.recycleTiles&&this.tiles&&this.tiles.length>_1-_2){return true}else{return false}},isc.A.$90l=function isc_TileGrid__tileRightMouseDown(_1){var _2=this.getTileRecord(_1);if(this.recordContextClick!=null){if(this.recordContextClick(this,_1,_2)==false)return false}
return this.$673(_1)},isc.A.$673=function isc_TileGrid__tileMouseDown(_1){var _2=this.getTileRecord(_1);if(_2)this.selection.selectOnMouseDown(this,_1.tileNum);this.recordClick(this,_1,_2);var _3,_4;if(_1.getTop()<this.getScrollTop()){_4="top"}else if(_1.getTop()+_1.getVisibleHeight()>this.getScrollTop()+this.getInnerHeight()){_4="bottom"}
if(_1.getLeft()<this.getScrollLeft()){_3="left"}else if(_1.getLeft()+_1.getVisibleWidth()>this.getScrollLeft()+this.getInnerWidth()){_3="right"}
if(_3||_4){this.scrollIntoView(_1.getLeft(),_1.getTop(),_1.getVisibleWidth(),_1.getVisibleHeight(),_3,_4,true)}},isc.A.$674=function isc_TileGrid__tileMouseUp(_1){this.selection.selectOnMouseUp(this,_1.tileNum)},isc.A.recordClick=function isc_TileGrid_recordClick(){return true},isc.A.recordDoubleClick=function isc_TileGrid_recordDoubleClick(){return true},isc.A.recordContextClick=function isc_TileGrid_recordContextClick(){},isc.A.selectionChange=function isc_TileGrid_selectionChange(_1,_2){if(this.selectionChanged&&(this.selectionChanged(_1,_2)==false))return false;var _3=this.selection,_4=_3.lastSelectionItem;var _5=window[this.getTileID(_4)];if(_5&&_5.setSelected){_5.setSelected(_2)}},isc.A.widgetHandleKeyPress=function isc_TileGrid_widgetHandleKeyPress(_1,_2){if(this.isAnimating("scroll"))return false;var _3=this.selection.lastSelectionItem;if(!_3)return;var _4=_1.keyName,_5=this.selection.data.indexOf(_3),_6=this.orientation=="horizontal",_7;if(_4==this.$20s){_7=_6?this.$60p(_5,"above"):_5-1}else if(_4==this.$20t){_7=_6?this.$60p(_5,"below"):_5+1}else if(_4==this.$60n){_7=_6?_5-1:this.$60p(_5,"above")}else if(_4==this.$60o){_7=_6?_5+1:this.$60p(_5,"below")}else{return}
if(_7==-1||_7>this.data.getLength()-1)return;if(_7==null)return false;var _8=this.selection.data.get(_7),_9=window[this.getTileID(_8)];if(_9){this.$673(_9)}
return false},isc.A.$60p=function isc_TileGrid__adjacentTileIndex(_1,_2){var _3=this.selection.data,_4=_1,_5=window[this.getTileID(_3.get(_4))],_6=this.orientation=="horizontal",_7=_6?_5.getTop():_5.getLeft(),_8=_6?_5.getLeft():_5.getTop(),_9=_6?_5.getVisibleWidth():_5.getVisibleHeight(),_10=_5;while(_7==(_6?_10.getTop():_10.getLeft())){_4=_2=="above"?_4-1:_4+1;if(_4<0||_4>_3.getLength()-1){return-1}
_10=window[this.getTileID(_3.get(_4))];if(!_10)return-1}
var _11=_6?_10.getTop():_10.getLeft();var _12=-1,_13=0;while((_6?_10.getTop():_10.getLeft())==_11){var _14=_6?_10.getLeft():_10.getTop(),_15=_6?_10.getVisibleWidth():_10.getVisibleHeight(),_16=this.$60q([_8,_8+_9],[_14,_14+_15]);if(_16>_13){_12=_4;_13=_16}
_4=_2=="above"?_4-1:_4+1;if(_4<0||_4>_3.getLength()-1)break;_10=window[this.getTileID(_3.get(_4))];if(!_10)break}
return _12},isc.A.$60q=function isc_TileGrid__getCommonRange(_1,_2){if((_2[0]>=_1[0]&&_2[0]<=_1[1])||(_2[1]>=_1[0]&&_2[1]<=_1[1])||(_2[0]<=_1[0]&&_2[1]>=_1[1]))
{var _3=_2[0]>_1[0]?_2[0]:_1[0];var _4=_2[1]>_1[1]?_1[1]:_2[1];return _4-_3}
return 0},isc.A.addTile=function isc_TileGrid_addTile(){return false},isc.A.removeTile=function isc_TileGrid_removeTile(){return false},isc.A.getRecordTile=function isc_TileGrid_getRecordTile(_1){if(_1==null)return null;if(_1>=this.data.getLength())return null;var _2=this.getTileID(this.data.get(_1));if(!_2)return null;else return window[_2]},isc.A.childVisibilityChanged=function isc_TileGrid_childVisibilityChanged(_1,_2){this.invokeSuper(isc.TileLayout,"childVisibilityChanged",_1,_2)},isc.A.hasAllVisibleTiles=function isc_TileGrid_hasAllVisibleTiles(_1,_2){if(isc.isA.ResultSet(this.data)){if(!this.data.lengthIsKnown())return false;var _3=_1[1]+1;if(_3>this.data.getLength())_3=this.data.getLength();if(this.data.rangeIsLoaded(_1[0],_3)){return true}else{if(_2){this.logDebug("in hasAllVisibleTiles, fetching range: "+_1[0]+" to "+_3+", total length: "+this.data.getLength(),"TileGrid");this.data.getRange(_1[0],_3)}
return false}}else{return true}},isc.A.$31i=function isc_TileGrid__setUpDragProperties(){this.canReorderTiles=(this.canDrag||this.canReorderTiles);this.canDragTilesOut=(this.canDrag||this.canDragTilesOut);this.canAcceptDroppedRecords=(this.canAcceptDrop||this.canAcceptDroppedRecords)
this.canDrag=(this.canDrag||this.canDragTilesOut||this.canReorderTiles);this.canAcceptDrop=(this.canAcceptDrop||this.canAcceptDroppedRecords||this.canReorderTiles)},isc.A.setCanReorderTiles=function isc_TileGrid_setCanReorderTiles(_1){this.canReorderTiles=_1;this.$31i()},isc.A.setCanDragTilesOut=function isc_TileGrid_setCanDragTilesOut(_1){this.canDragTilesOut=_1;this.$31i()},isc.A.setCanAcceptDroppedRecords=function isc_TileGrid_setCanAcceptDroppedRecords(_1){this.canAcceptDroppedRecords=_1;this.$31i()},isc.A.getDragTrackerTitle=function isc_TileGrid_getDragTrackerTitle(_1){var _2=this.getTitleField(),_3=_1[_2];return"<nobr>"+_3+"</nobr>"},isc.A.drop=function isc_TileGrid_drop(){var _1=this.$610||0;if(_1>this.data.getLength())_1=0;var _2=this.ns.EH.dragTarget;var _3=this.$66f;this.$66f=null;var _4=_2.cloneDragData();var _5=this.data.get(_1);this.transferRecords(_4,_5,_1,_2)},isc.A.dropMove=function isc_TileGrid_dropMove(){if(!this.canReorderTiles)return true;if(!this.canAcceptDroppedRecords&&isc.EH.dragTarget!=this)return true;this.showDragLineForRecord()},isc.A.dragMove=function isc_TileGrid_dragMove(){var _1=isc.EH.dropTarget;if(!this.canDragTilesOut&&_1!=null&&_1!=this){return false}
var _2=this.getSelectedRecord();if(this.tileDragAppearance=="outline"){var _3=this.ns.EH;var _4=this.getTileID(_2);var _5=window[_4];var _6="<div style='width:"+_5.getVisibleWidth()+";height:"+_5.getVisibleHeight()+"'>"+_3.getDragOutline(_5).getInnerHTML()+"</div>";_3.setDragTracker(_6)}else if(this.tileDragAppearance=="target"){var _3=this.ns.EH;var _4=this.getTileID(_2);var _5=window[_4];this.detailViewer.clipValues=false;var _6="<div style='width:"+_5.getVisibleWidth()+";height:"+_5.getVisibleHeight()+"'>"+_5.getInnerHTML()+"</div>";this.detailViewer.clipValues=true;_3.setDragTracker(_6);_5.hide();this.$815=_5;if(!_3.dragMoveAction)_3.dragMoveAction=_3.$ll;if(_3.dragTarget.showDragShadow)_3.$lm();if(_3.dragTarget.dragOpacity!=null)_3.$ln()}},isc.A.willAcceptDrop=function isc_TileGrid_willAcceptDrop(){var _1=this.ns.EH;if(!this.Super("willAcceptDrop",arguments))return false;var _2=_1.dragTarget;if(_2==this){if(!this.canReorderTiles)return false}else{if(!this.canAcceptDroppedRecords)return false}
if(!isc.isAn.Object(_2.getDragData()))return false;return true},isc.A.dragStop=function isc_TileGrid_dragStop(){this.Super("dropOut",arguments);if(this.$815){this.$815.show();this.$815=null}},isc.A.getCellValue=function isc_TileGrid_getCellValue(_1,_2){return this.detailViewer.getStandaloneFieldValue(_1,_2[this.fieldIdProperty])},isc.A.getStandaloneFieldValue=function isc_TileGrid_getStandaloneFieldValue(_1,_2){var _3=this.getCellValue(_1,this.getField(_2));return _3},isc.A.getTitleFieldValue=function isc_TileGrid_getTitleFieldValue(_1){var _2=this.getDataSource(),_3=_2.getTitleField(),_4=this.getCellValue(_1,_2.getField(_3));return _4},isc.A.hideField=function isc_TileGrid_hideField(_1){this.getField(_1).showIf="false";this.getField(_1).hidden=true;this.fieldStateChanged()},isc.A.showField=function isc_TileGrid_showField(_1){this.getField(_1).showIf="true";this.getField(_1).hidden=false;this.fieldStateChanged()},isc.A.getField=function isc_TileGrid_getField(_1){if(!this.fields)return null;return isc.Class.getArrayItem(_1,this.fields,this.fieldIdProperty)},isc.A.getFields=function isc_TileGrid_getFields(){return this.fields},isc.A.getAllFields=function isc_TileGrid_getAllFields(){return this.fields},isc.A.setFieldState=function isc_TileGrid_setFieldState(_1){if(isc.isA.String(_1))_1=this.evalViewState(_1,"fieldState")
if(_1){this.completeFields=this.$31y(_1);this.setFields(_1);this.markForRedraw();this.fieldStateChanged()}},isc.A.showActionInPanel=function isc_TileGrid_showActionInPanel(_1){if(_1.name=="sort")return true;return this.Super("showActionInPanel",arguments)},isc.A.getPrintHTML=function isc_TileGrid_getPrintHTML(){if(!this.data.lengthIsKnown()){isc.logWarn("Attempt to print TileGrid "+this.ID+" while data is loading will be ignored");return""}
var _1=this.data.getLength();if(!this.data.rangeIsLoaded(0,_1)){isc.logWarn("Make sure all data is loaded before attempting to print TileGrid: "+this.ID);return""}
var _2;var _3=this.printTilesPerLine?this.printTilesPerLine:this.getTilesPerLine();if(this.orientation=="horizontal"){var _4=this.getInnerWidth();_2="<table width='"+_4+"'>";for(var i=0;i<_1;i++){var _6=this.getTile(i);if(i%_3==0){if(i==0)_2+="<tr>";else if(i<_1-1)_2+="</tr><tr>"}
_2+="<td>"+_6.getPrintHTML()+"</td>"}
_2+="</tr></table>"}else{_2="<table>";for(var i=0;i<_3;i++){_2+="<tr>";for(var j=i;j<_1;j+=_3){var _6=this.getTile(j);_2+="<td>"+_6.getPrintHTML()+"</td>"}
_2+="</tr>"}
_2+="</table>"}
return _2});isc.B._maxIndex=isc.C+71;isc.ClassFactory.defineClass("SimpleTile","StatefulCanvas");isc.A=isc.SimpleTile.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.baseStyle="simpleTile";isc.A.overflow="hidden";isc.A.showRollOver=true;isc.A.redrawOnStateChange=true;isc.A._redrawWithParent=false;isc.B.push(isc.A.initWidget=function isc_SimpleTile_initWidget(){this.invokeSuper(isc.SimpleTile,"initWidget",arguments);this.showDown=this.creator.valuesShowDown},isc.A.getInnerHTML=function isc_SimpleTile_getInnerHTML(){this.creator.detailViewer.currentTile=this;var _1=this.creator.getTileRecord(this);if(!_1)return null;return this.creator.getTileHTML(_1)},isc.A.getRecord=function isc_SimpleTile_getRecord(){return this.creator.getTileRecord(this)});isc.B._maxIndex=isc.C+3;isc.TileGrid.registerStringMethods({dataArrived:"startRecord,endRecord",selectionChanged:"record,state",itemHover:"item",itemClick:"item",recordClick:"viewer,tile,record",recordDoubleClick:"viewer,tile,record",recordContextClick:"viewer,tile,record",fieldStateChanged:""});isc.ClassFactory.defineClass("ColumnTree","Layout","DataBoundComponent");isc.A=isc.ColumnTree;isc.A.TREE_FIELD={name:"treeField",width:"*",getCellValue:function(_1,_2,_3,_4){return _1.creator.getCellValue(_1,_2,_3,_4)}};isc.A=isc.ColumnTree.getPrototype();isc.A.orientation="horizontal";isc.A.animateMemberEffect={effect:"slide",startFrom:"L",endAt:"R"};isc.A.folderIcon="[SKIN]/folder.gif";isc.A.customIconProperty="icon";isc.A.skinImgDir="images/TreeGrid/";isc.A.nodeIcon="[SKIN]file.gif";isc.A.openIconSuffix="open";isc.A.closedIconSuffix="closed";isc.A.showOpenIcons=true;isc.A.showCustomIconOpen=false;isc.A.customIconOpenProperty="showOpenIcon";isc.A.showColumn=true;isc.A.columnConstructor="ListGrid";isc.A.columnDefaults={animateTime:100,animateEffect:"slide",canAddFormulaFields:false,canAddSummaryFields:false,canSort:false,canGroupBy:false,showHeaderMenuButton:false,selectionChanged:function(_1,_2){if(_2){this.creator.nodeSelected(this,_1)}},bodyProperties:{$29h:function(_1,_2,_3,_4,_5){var _6="padding:0px;border:0px;";if(_4==null)_4=this.getTableElement(_2,_3);if(_4==null)return;if(!this.showHiliteInCells)
{if(_1==null)_1=this.getCellRecord(_2,_3);if(_5==null)_5=this.getCellStyle(_1,_2,_3);var _7=_4.firstChild;while(_7&&_7.tagName!="TABLE")_7=_7.firstChild;if(_7){_7.className=_5;if(this.getCellCSSText){_4.style.cssText=isc.StringBuffer.concat(this.$29i(_1,_2,_3,_5),this.zeroBorderPadding)}}}
return isc.GridRenderer.getPrototype().$29h.apply(this,[_1,_2,_3,_4,_5])}}};isc.A.showHeaders=false;isc.A.firstColumnTitle="&nbsp;";isc.A.showNodeCount=false;isc.A.wrapCells=false;isc.A.iconPadding=3;isc.A.ignoreEmptyCriteria=false;isc.A.backButtonTitle="Back";isc.A.backButtonDefaults={_constructor:"IButton",snapTo:"TR",left:5,top:5,autoFit:true,click:function(){this.creator.navigateBack()}};isc.A.overflow="hidden";isc.A=isc.ColumnTree.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$34p=["<table cellpadding=0 cellspacing=0 class='",,"' style='",,"border:0px;padding:0px;'><tr><td>",,"</td>","<td>"+(isc.Browser.isSafari||isc.Browser.isIE?"<nobr>":""),,,,(isc.Browser.isSafari?"</nobr>":"")+"</td><td style='padding-left:",,"px;'>",,,"</td>","</tr></table>"];isc.A.$34q=["<td>"+(isc.Browser.isSafari||isc.Browser.isIE?"<nobr>":""),,,,(isc.Browser.isSafari?"</nobr>":"")+"</td><td style='padding-left:",,"px;'>",,,"</td>"];isc.A.$34r="absmiddle";isc.A.$4s={};isc.B.push(isc.A.getDynamicDefaults=function isc_ColumnTree_getDynamicDefaults(_1){if(_1=="column"){return{autoDraw:false,showHiliteInCells:true,leaveScrollbarGap:false,selectionType:"single",showHeader:false,fields:isc.clone(this.fields)}}},isc.A.initWidget=function isc_ColumnTree_initWidget(){this.Super("initWidget",arguments);if(this.showMultipleColumns==null)
this.showMultipleColumns=!isc.Browser.isHandset;this.columns=[];if(!this.dataSource&&this.data!=null&&this.data.dataSource){this.dataSource=this.data.dataSource}
if(!this.fields||this.fields.length==0){this.fields=[isc.ColumnTree.TREE_FIELD]}
if(this.showMultipleColumns==false&&this.showHeaders&&this.showBackButton!=false){this.backButton=this.createAutoChild("backButton",{title:this.backButtonTitle,disabled:true});this.addChild(this.backButton);this.backButton.bringToFront()}
this.columns[0]=this.createAutoChild("column",this.getColumnProperties(this.data?this.data.getRoot():null,0),null,false);this.addColumn(this.columns[0],0);this.currentColumn=0;if(this.data)this.populateFirstColumn()},isc.A.populateFirstColumn=function isc_ColumnTree_populateFirstColumn(){if(this.data.showRoot){this.columns[0].setData([this.data.getRoot()])}else{var _1=this.data.getChildren(this.data.getRoot());if(isc.isA.ResultSet(_1)){_1=_1.getAllLoadedRows()}
this.columns[0].setData(_1)}
if(this.shouldShowHeader(null,0)){this.columns[0].setShowHeader(true);this.columns[0].setFieldProperties(0,{title:this.getColumnTitle(null,0)})}},isc.A.treeIsTied=function isc_ColumnTree_treeIsTied(_1,_2){return false},isc.A.getSelectedRecord=function isc_ColumnTree_getSelectedRecord(){if(this.currentColumn<=0)return this.data.getRoot();var _1=this.getColumn(this.currentColumn-1);return _1.getSelectedRecord()},isc.A.navigateBack=function isc_ColumnTree_navigateBack(){if(this.currentColumn<=0)return;var _1,_2;if(this.currentColumn>=2){_1=this.getColumn(this.currentColumn-2);_2=_1.getSelectedRecord()}else{_1=this.getColumn(0);_2=this.data.getRoot()}
this.logInfo("navigating to column: "+(this.currentColumn-1)+" to node: "+this.data.getTitle(_2));this.nodeSelected(_1,_2,true)},isc.A.slideTransition=function isc_ColumnTree_slideTransition(_1,_2,_3,_4){if(!isc.Browser.isWebKit){if(_4){_2.deselectAllRecords();_2.animateShow()}else{_1.animateHide();_2.show()}
_2.bringToFront();return}
this.logInfo((_4?"right":"left")+" slideTransition from: "+_1+" to "+_2+" within "+_3);_2.hide();_3.addChild(_2);if(!_2.isDrawn())_2.draw();var _5=_1.getStyleHandle();var _6=_2.getStyleHandle();_6.setProperty("-webkit-transition","none");var _7="translate3d("+(_4?"-":"")+_3.getViewportWidth()+"px, 0%, 0%)";_6.setProperty("-webkit-transform",_7);var _8=_3.overflow;_3.setOverflow("hidden");_2.show();isc.Timer.setTimeout(function(){_5.setProperty("-webkit-transition","-webkit-transform 0.3s ease-in-out");_6.setProperty("-webkit-transition","-webkit-transform 0.3s ease-in-out");_7="translate3d("+(_4?"":"-")+_3.getViewportWidth()+"px, 0%, 0%)";_5.setProperty("-webkit-transform",_7);_6.setProperty("-webkit-transform","translate3d(0px, 0%, 0%)");isc.Timer.setTimeout(function(){_1.hide();_3.setOverflow(_8)},350)},0)},isc.A.nodeSelected=function isc_ColumnTree_nodeSelected(_1,_2,_3){if(this.onNodeSelected!=null&&(this.onNodeSelected(_1,_2)==false)){return}
var _4=this.getColumnIndex(_2),_5=this.data.isFolder(_2);var _6=_4+1;if(!_5)_6-=1;var _7=this.columns[_6];if(!this.treeIsTied(_1,_2)){if(this.showMultipleColumns!=false)this.hideColumnsToRight(_6);if(!_5)return;this.data.openFolder(_2);if(isc.isA.ListGrid(_7)){_7.deselectAllRecords();var _8=this.data.getChildren(_2);if(isc.isA.ResultSet(_8)){_8=_8.getAllLoadedRows()}
_7.setData(_8);this.addColumn(_7,_6)}else{_7=this.columns[_6]=this.createAutoChild("column",this.getColumnProperties(_2,_4+1),null,false);var _8=this.data.getChildren(_2);if(isc.isA.ResultSet(_8)){_8=_8.getAllLoadedRows()}
_7.setData(_8);this.addColumn(_7,_6)}
if(this.shouldShowHeader(_2,_6)){_7.setShowHeader(true);var _9=this.getColumnTitle(_2,_6);_7.setFieldProperties(0,{title:_9})}
if(_7.data.getLength()>0){this.updateHeadingNodeCount(_2)}}
var _10=(_3?this.columns[this.currentColumn]:_1);var _11=_7;if(this.showMultipleColumns==false){this.slideTransition(_10,_11,this,_3?true:false)}else{_11.show()}
this.currentColumn=(_6<0?0:_6);this.logInfo("currentColumn is now: "+this.currentColumn);if(this.backButton){this.backButton.bringToFront();this.backButton.setDisabled(this.currentColumn<=0)}},isc.A.addColumn=function isc_ColumnTree_addColumn(_1,_2){if(this.showMultipleColumns==false){_1.resizeTo("100%","100%");this.addChild(_1,_2)}else{this.addMember(_1,_2)}},isc.A.getCurrentTitle=function isc_ColumnTree_getCurrentTitle(){return this.columns[this.currentColumn].getFieldTitle(0)},isc.A.getPreviousTitle=function isc_ColumnTree_getPreviousTitle(){if(this.currentColumn<=0)return"";return this.columns[this.currentColumn-1].getFieldTitle(0)},isc.A.updateHeadingNodeCount=function isc_ColumnTree_updateHeadingNodeCount(_1){var _2=this.getColumnIndex(_1);if(!this.shouldShowHeader(_1,_2)||!this.showNodeCount)return;if(_2<0)return;if(this.columns[_2+1].data.getLength()==0)return;var _3=this.data.getTitle(_1);if(this.showNodeCount){_3=_3+" ("+this.columns[_2+1].data.getLength()+")"}
this.columns[_2+1].setFieldProperties(0,{title:_3})},isc.A.getColumnIndex=function isc_ColumnTree_getColumnIndex(_1){if(this.data.showRoot){return this.data.getLevel(_1)}else{var _2=this.data.getLevel(_1);return _2-1}},isc.A.hideColumnsToRight=function isc_ColumnTree_hideColumnsToRight(_1){for(var i=_1+1;i<this.columns.length;i++){this.columns[i].hide();this.columns[i].deselectAllRecords()}},isc.A.shouldShowHeader=function isc_ColumnTree_shouldShowHeader(_1,_2){return this.showHeaders},isc.A.getColumnTitle=function isc_ColumnTree_getColumnTitle(_1,_2){if(_2==0){return this.firstColumnTitle}else{return this.data.getTitle(_1)}},isc.A.getRecord=function isc_ColumnTree_getRecord(_1,_2){if(_1==null||_1<0)return null;if(_2!=null){if(_2<0||_2>this.columns.length){return null}
if(_1>this.columns[_2].data.length||!this.columns[_2].isVisible()){return null}
return this.columns[_2].data[_1]}
var _3=0;for(var _4=0;_4<this.columns.length;_4++){if(!this.columns[_4].isVisible())continue;if(_3+this.columns[_4].data.length>_1){return this.columns[_4].data[_1-_3]}
_3+=this.columns[_4].data.length}
return null},isc.A.getTreeCellValue=function isc_ColumnTree_getTreeCellValue(_1,_2,_3,_4,_5){if(_3==null){return _1}
var _6=this.$34p;_6[1]=_2.getCellStyle(_3,_4,_5);_6[3]=_2.getCellCSSText(_3,_4,_5);var _7=this.$342(_1,_3,_4,true);for(var i=0;i<10;i++){_6[6+i]=_7[i]}
return _6.join(isc.emptyString)},isc.A.$342=function isc_ColumnTree__getTreeCellTitleArray(_1,_2,_3,_4){var _5=this.$34q;_5[1]=null;var _6=this.getIcon(_2),_7=(_3!=null?this.$34n+_3:null);_5[2]=null;_5[3]=this.getIconHTML(_6,_7,_2.iconSize);_5[5]=this.iconPadding;_5[7]=this.wrapCells?null:"<NOBR>"
_5[8]=_1;return _5},isc.A.getCellValue=function isc_ColumnTree_getCellValue(_1,_2,_3,_4,_5,_6,_7,_8){var _9=this.getNodeTitle(_2,_3);_9=this.getTreeCellValue(_9,_1,_2,_3,_4);return _9},isc.A.getIcon=function isc_ColumnTree_getIcon(_1,_2){if(isc.isA.Number(_1))_1=this.data.get(_1);if(!_1)return null;var _3=_1[this.customIconProperty],_4=(_3!=null),_5=this.data.isFolder(_1);if(!_4){if(_5)_3=this.folderIcon;else _3=this.nodeIcon}
var _6;if(_5){var _7=_2?false:(this.lastDropFolder==_1&&_1.$347),_8=_2?false:!!this.data.isOpen(_1);if(_7){if(_1.dropIcon!=null)_3=_1.dropIcon;else if(!_4&&this.folderDropImage!=null)_3=this.folderDropImage;else{var _9;if(_4){_9=_1[this.customIconDropProperty];if(_9==null)_9=this.showCustomIconDrop}else{_9=this.showDropIcons}
if(_9)_6=this.dropIconSuffix}}else if(_8){if(_1.openedIcon!=null)_3=_1.openedIcon;else if(!_4&&this.folderOpenImage!=null)_3=this.folderOpenImage;else{var _10;if(_4){_10=_1[this.customIconOpenProperty];if(_10==null)_10=this.showCustomIconOpen}else{_10=this.showOpenIcons}
if(_10)_6=this.openIconSuffix;else if(!_4)_6=this.closedIconSuffix}}else{if(!_4){if(this.folderClosedImage)_3=this.folderClosedImage;else _6=this.closedIconSuffix}}}else{if(!_4&&this.fileImage)_3=this.fileImage}
return isc.Img.urlForState(_3,false,false,_6)},isc.A.getIconHTML=function isc_ColumnTree_getIconHTML(_1,_2,_3){if(_1==null)return isc.emptyString;if(_3==null)_3=this.iconSize;var _4=this.$4s;_4.src=_1;_4.width=_4.height=_3;_4.name=_2;_4.align=this.$34r;var _5=this.$wf(_4);_5[16]=_2;return _5.join(isc.$ad)},isc.A.getNodeTitle=function isc_ColumnTree_getNodeTitle(_1,_2,_3){return this.data.getTitle(_1)},isc.A.getData=function isc_ColumnTree_getData(){return this.data},isc.A.setData=function isc_ColumnTree_setData(_1,_2,_3,_4){if(!isc.isA.Tree(_1))return;this.data=_1;this.data.columnTree=this;this.data.dataArrived="this.columnTree.updateHeadingNodeCount(parentNode);";this.data.separateFolders=this.separateFolders;if(this.showRoot&&isc.isA.ResultTree(this.data)){this.logWarn("showRoot may not be set with a databound columnTree, unexpected results may occur")}
this.data.showRoot=this.showRoot;this.data.openDisplayNodeType=this.displayNodeType;this.data.openFolder(this.data.root);this.hideColumnsToRight(0);this.populateFirstColumn()},isc.A.useExistingDataModel=function isc_ColumnTree_useExistingDataModel(_1,_2,_3){return false},isc.A.createDataModel=function isc_ColumnTree_createDataModel(_1,_2,_3){return this.createResultTree(_1,_3.afterFlowCallback,_3,null)},isc.A.updateDataModel=function isc_ColumnTree_updateDataModel(_1,_2,_3){},isc.A.getColumn=function isc_ColumnTree_getColumn(_1){if(isc.isAn.Object(_1)){var _2=this.getColumnIndex(_1)+1;if(this.columns[_2]&&this.columns[_2].isVisible())return this.columns[_2]}else{if(this.columns[_1]&&_1<=this.currentColumn)return this.columns[_1]}
return null},isc.A.getColumnProperties=function isc_ColumnTree_getColumnProperties(_1,_2){},isc.A.selectAllRecords=function isc_ColumnTree_selectAllRecords(_1){if(_1==null)_1=0;if(!this.columns[_1])return;this.columns[_1].selectAllRecords()},isc.A.deselectAllRecords=function isc_ColumnTree_deselectAllRecords(_1){if(_1==null)_1=0;if(!this.columns[_1])return;this.columns[_1].deselectAllRecords()},isc.A.anySelected=function isc_ColumnTree_anySelected(_1){if(_1==null)_1=0;if(!this.columns[_1])return false;return this.columns[_1].anySelected()},isc.A.getSelection=function isc_ColumnTree_getSelection(_1){if(_1==null)_1=0;if(!this.columns[_1])return[];return this.columns[_1].getSelection()},isc.A.getSelectionObject=function isc_ColumnTree_getSelectionObject(_1){if(_1==null)_1=0;if(!this.columns[_1])return null;return this.columns[_1].selection});isc.B._maxIndex=isc.C+35;isc.ColumnTree.registerStringMethods({nodeSelected:"column, node",onNodeSelected:"column,node"})
isc.ClassFactory.defineClass("TableView","ListGrid");isc.A=isc.TableView;isc.A.PLAIN="plain";isc.A.GROUPED="grouped";isc.A.TITLE_ONLY="titleOnly";isc.A.TITLE_DESCRIPTION="titleAndDescription";isc.A.SUMMARY_INFO="summaryInfo";isc.A.SUMMARY_DATA="summaryData";isc.A.SUMMARY_FULL="summaryFull";isc.A.WHOLE_RECORD="wholeRecord";isc.A.NAVICON_ONLY="navIconOnly";isc.A=isc.TableView.getPrototype();isc.A.iconField="icon";isc.A.showIconField=true;isc.A.titleField="title";isc.A.infoField="info";isc.A.dataField="data";isc.A.descriptionField="description";isc.A.recordNavigationProperty="$79p";isc.A.tableMode=isc.TableView.PLAIN;isc.A.recordLayout=isc.TableView.TITLE_ONLY;isc.A.navIcon="[SKINIMG]/iOS/listArrow_button.png";isc.A.wholeRecordNavIcon="[SKINIMG]/iOS/listArrow.png";isc.A.navigationMode=isc.TableView.WHOLE_RECORD;isc.A.recordTitleStyle="recordTitle";isc.A.recordDescriptionStyle="recordDescription";isc.A.recordDataStyle="recordData";isc.A.recordInfoStyle="recordInfo";isc.A.iconFieldDefaults={width:50,imageSize:30,align:"center",type:"image"};isc.A.titleFieldDefaults={name:"TVtitleField",width:"*",type:"text",formatCellValue:function(_1,_2,_3,_4,_5){if(_5.formatRecord!=null){return _5.formatRecord(_2)}
var _6=_5.$80v(_2,_5.titleField),_7=_5.$80v(_2,_5.descriptionField),_8=_5.$80v(_2,_5.infoField),_9=_5.$80v(_2,_5.dataField),_10="";if(_5.recordLayout==isc.TableView.SUMMARY_INFO||_5.recordLayout==isc.TableView.SUMMARY_FULL)
{_10+="<span class='"+_5.recordInfoStyle+"'>"+_8+"</span>"}
_10+="<span class='"+_5.recordTitleStyle+"'>"+_6+"</span>";if(_5.recordLayout!=isc.TableView.TITLE_ONLY){_10+="<span class='"+_5.recordDescriptionStyle+"'>"+_7+"</span>"}
if(_5.recordLayout==isc.TableView.SUMMARY_DATA||_5.recordLayout==isc.TableView.SUMMARY_FULL)
{_10+="<span class='"+_5.recordDataStyle+"'>"+_9+"</span>"}
return _10}};isc.A.navigationFieldDefaults={name:"TVnavigationField",width:54,align:"right",formatCellValue:function(_1,_2,_3,_4,_5){if(_5.getShowNavigation(_2)){var _6=isc.Img.create({autoDraw:false,autoFit:true,imageType:"normal",src:_5.getNavigationIcon(_2)});return _6.getInnerHTML()}
return _5.$54t}};isc.A.groupByFieldDefaults={showIf:"false"};isc.A.canAddFormulaFields=false;isc.A.canAddSummaryFields=false;isc.A.showHeader=false;isc.A.selectionType="none";isc.A.skinImgDir="images/iOS/";isc.A.baseStyle="tableCell";isc.A.border="0px";isc.A.wrapCells=false;isc.A.cellHeight=44;isc.A.alternateRecordStyles=false;isc.A.canCollapseGroup=false;isc.A.groupStartOpen="all";isc.A.ignoreEmptyCriteria=false;isc.A=isc.TableView.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.initWidget=function isc_TableView_initWidget(){this.Super("initWidget",arguments);this.$80w={};if(this.formatRecord!=null&&!isc.isA.Function(this.formatRecord))
isc.Func.replaceWithMethod(this,"formatRecord","record")},isc.A.setFields=function isc_TableView_setFields(_1){this.invokeSuper(isc.TableView,"setFields",this.$80x(_1))},isc.A.$80x=function isc_TableView__defineTableFields(_1){var _2=_1||[];for(var i=0;i<_2.length;i++){_2[i].showIf="false"}
if(this.showIconField){var _4=_2.find(this.fieldIdProperty,this.iconField);if(_4)_2.remove(_4);this.$79q=_2.length;_2[_2.length]=isc.addProperties({name:this.iconField},this.iconFieldDefaults,this.iconFieldProperties)}
var _4=_2.find(this.fieldIdProperty,this.titleFieldDefaults.name);if(_4)_2.remove(_4);_2[_2.length]=isc.addProperties({},this.titleFieldDefaults,this.titleFieldProperties);var _4=_2.find(this.fieldIdProperty,this.navigationFieldDefaults.name);if(_4)_2.remove(_4);this.$79r=_2.length;_2[_2.length]=isc.addProperties({},this.navigationFieldDefaults,this.navigationFieldProperties);if(this.groupByField){var _5;if(isc.isA.Array(this.groupByField)){_5=this.groupByField}else{_5=[this.groupByField]}
for(var i=0;i<_5.length;i++){var _6=_2.find(this.fieldIdProperty,_5[i]);if(_6){isc.addProperties(_6,this.groupByFieldDefaults,this.groupByFieldProperties)}else{_2[_2.length]=isc.addProperties({name:_5[i]},this.groupByFieldDefaults,this.groupByFieldProperties)}}}
return _2},isc.A.$80v=function isc_TableView__getFormattedFieldValue(_1,_2){var _3=_1[_2]||this.$54t,_4=this.$80w[_2],_5;if(_4==null||_4==_5){_4=isc.Class.getArrayItemIndex(_2,this.getAllFields(),this.fieldIdProperty);this.$80w[_2]=_4}
if(_4>=0){_3=this.getFormattedValue(_1,_2,_3)}
return _3},isc.A.getNavigationIcon=function isc_TableView_getNavigationIcon(_1){return(this.navigationMode==isc.TableView.NAVICON_ONLY?this.navIcon:this.wholeRecordNavIcon)},isc.A.getShowNavigation=function isc_TableView_getShowNavigation(_1){if(_1&&_1[this.recordNavigationProperty]!=null){return _1[this.recordNavigationProperty]}
return this.showNavigation},isc.A.recordClick=function isc_TableView_recordClick(_1,_2,_3,_4,_5,_6,_7){if(_5!=this.$79q&&_5!=this.$79r&&this.canSelectRecord(_2))
{this.selectSingleRecord(_2)}
if(_5==this.$79r||this.navigationMode==isc.TableView.WHOLE_RECORD){if(this.recordNavigationClick){isc.Func.replaceWithMethod(this,"recordNavigationClick","record");this.recordNavigationClick(_2)}}else if(_5==this.$79q){if(this.imageClick){isc.Func.replaceWithMethod(this,"imageClick","record");this.imageClick(_2)}}},isc.A.getBaseStyle=function isc_TableView_getBaseStyle(_1,_2,_3){if(this.isGrouped){var _4=this.data.get(_2),_5=this.data.isFirst(_4),_6=this.data.isLast(_4);if(_5&&_6){return(_3==0?"cellOnlyLeft":(_3==this.fields.length-1?"cellOnlyRight":"cellOnly"))}else if(_5){return(_3==0?"cellTopLeft":(_3==this.fields.length-1?"cellTopRight":"cellTop"))}else if(_6){return(_3==0?"cellBottomLeft":(_3==this.fields.length-1?"cellBottomRight":"cellBottom"))}}
return this.Super("getBaseStyle",arguments)});isc.B._maxIndex=isc.C+8;isc.TableView.registerStringMethods({recordNavigationClick:"record",imageClick:"record",formatRecord:"record"});isc.ClassFactory.defineClass("DOMTree","Tree");isc.A=isc.DOMTree.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.tagNameProperty="tagName";isc.A.elementProperty="$9b";isc.A.loadOnInit=true;isc.A.loadDataOnDemand=true;isc.A.hideTextNodes=true;isc.B.push(isc.A.makeRoot=function isc_DOMTree_makeRoot(){var _1=this.Super("makeRoot",arguments);_1[this.elementProperty]=this.rootElement;return _1},isc.A.getElement=function isc_DOMTree_getElement(_1){return _1[this.elementProperty]},isc.A.getElementTitle=function isc_DOMTree_getElementTitle(_1){var _2=_1.getAttribute(this.titleProperty);if(!this.valueIsEmpty(_2))return _2;_2=_1.getAttribute(this.nameProperty);if(!this.valueIsEmpty(_2))return _2;if(!isc.xml.hasElementChildren(_1)){_2=isc.xml.getElementText(_1);if(!this.valueIsEmpty(_2))return _2}
return _1.tagName||_1.nodeName},isc.A.valueIsEmpty=function isc_DOMTree_valueIsEmpty(_1){return _1==null||isc.isAn.emptyString(_1)},isc.A.isFolder=function isc_DOMTree_isFolder(_1){if(_1==this.root||_1.children!=null)return true;var _2=_1[this.elementProperty];if(!_2||!_2.childNodes||_2.childNodes.length==0)return false;if(!this.hideTextNodes)return true;return isc.xml.hasElementChildren(_2)},isc.A.moveList=function isc_DOMTree_moveList(_1,_2,_3){var _4=_1[0],_5=this.getElement(_4);this.logWarn("moveList: "+this.echoAll(_1)+", newParent: "+this.echo(_2)+", index: "+_3);this.$36g(_5,_2,_3);this.Super("moveList",arguments)},isc.A.remove=function isc_DOMTree_remove(_1){var _2=this.getElement(_1);_2.parentNode.removeChild(_2);return this.Super("remove",arguments)},isc.A.addElement=function isc_DOMTree_addElement(_1,_2,_3){this.$36g(_1,_2,_3);if(this.isLoaded(_2)){var _4=this.nodeForElement(_1);this.add(_4,_2,_3)}else{this.dataChanged()}},isc.A.$36g=function isc_DOMTree__addToDOM(_1,_2,_3){var _4=this.getElement(_2);if(_3==null){this.logWarn("appending: "+this.echoLeaf(_1)+" to: "+this.echoLeaf(_4));_4.appendChild(_1)}else{var _5=this.getChildren(_2)[_3],_6=this.getElement(_5);this.logWarn("inserting into: "+this.echoLeaf(_4)+", before: "+this.echoLeaf(_6));_4.insertBefore(_1,_6)}},isc.A.nodeForElement=function isc_DOMTree_nodeForElement(_1){var _2={};_2[this.elementProperty]=_1;_2[this.titleProperty]=this.getElementTitle(_1);if(this.tagNameProperty){_2[this.tagNameProperty]=_1.tagName||_1.nodeName}
if(this.copyAttributes){for(var j=0;j<this.copyAttributes.length;j++){var _4=this.copyAttributes[j];_2[_4]=_1.getAttribute(_4)}}
return _2},isc.A.loadChildren=function isc_DOMTree_loadChildren(_1){if(this.isLoaded(_1))return;try{var _2=_1.$9b;if(_2==null)return;var _3=_2.childNodes;if(isc.Browser.isMoz&&_2.contentDocument){_3=[_2.contentDocument.documentElement]}else{if(this.loadingBatch()&&!isc.xml.hasElementChildren(_2))return}
_1[this.openProperty]=true;if(_3!=null){for(var i=0;i<_3.length;i++){var _5=_3[i];if(this.hideTextNodes&&_5.nodeName.startsWith("#"))continue;var _6=this.nodeForElement(_5);this.add(_6,_1)}}
this.setLoadState(_1,isc.Tree.LOADED)}catch(e){this.logWarn("parent node: "+this.echo(_1)+", at path: "+this.getPath(_1)+", error: "+this.echo(e)+this.getStackTrace())}});isc.B._maxIndex=isc.C+11;isc.defineClass("DOMGrid","TreeGrid");isc.A=isc.DOMGrid.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.canDragRecordsOut=true;isc.A.canAcceptDroppedRecords=true;isc.A.canReorderRecords=true;isc.A.showRoot=true;isc.A.$36h="&lt;";isc.A.$36i="&gt;";isc.A.$36j=[" ",,'="',,'"'];isc.A.colorMap={table:"#009900",tr:"#333399",td:"#663366",form:"#CC6600",input:"#3333FF",textarea:"#3333FF",div:"#663300",span:"#663300"};isc.A.colorPrefix="color:";isc.A.$36k={};isc.B.push(isc.A.initWidget=function isc_DOMGrid_initWidget(){this.Super(this.$oc);if(this.url){isc.xml.loadXML(this.url,this.getID()+".setRootElement(xmlDoc.documentElement)")}},isc.A.getDefaultData=function isc_DOMGrid_getDefaultData(){return null},isc.A.getElement=function isc_DOMGrid_getElement(_1){return this.data.getElement(_1)},isc.A.setRootElement=function isc_DOMGrid_setRootElement(_1){this.rootElement=_1;var _2=isc.DOMTree.create({rootElement:_1});this.setData(_2)},isc.A.getIcon=function isc_DOMGrid_getIcon(){},isc.A.getNodeTitle=function isc_DOMGrid_getNodeTitle(_1,_2,_3){if(_1==null)return null;if(_1.$9g)return _1.$9g;var _4=this.htmlMode?this.$36l(_1):this.$36m(_1);return(_1.$9g=_4)},isc.A.dataChanged=function isc_DOMGrid_dataChanged(){this.Super("dataChanged",arguments);this.data.getOpenList().setProperty("$9g",null)},isc.A.$36m=function isc_DOMGrid__getXMLNodeTitle(_1){if(_1.$9b==null){this.logWarn("no element for node: "+this.echo(_1))}
var _2=_1.$9b,_3=isc.emptyString,_4=this.$36n;if(_4==null)_4=this.$36n=isc.SB.create();else _4.clear();_4.append(this.$36h,(_2.tagName||_2.nodeName));var _5=_2.attributes;if(_5!=null){var _6=this.$36j;for(var i=0;i<_5.length;i++){var _8=_5[i];_6[1]=_8.name;_6[3]=_8.value;_4.append(_6)}}
if(!isc.xml.hasElementChildren(_2)){_4.append(this.$36i,isc.xml.getElementText(_2),"&lt;/",(_2.tagName||_2.nodeName),this.$36i)}else if(_2.childNodes.length>0){_4.append(this.$36i)}else{_4.append("/&gt;")}
return _4.toString()},isc.A.$36l=function isc_DOMGrid__getHTMLNodeTitle(_1){var _2=_1.$9b,_3=isc.emptyString,_4,_5;if(isc.Browser.isIE&&_2.scopeName=="VML"){_4=(_2.style?_2.style.width:null);_5=(_2.style?_2.style.height:null)}else{_4=_2.width||(_2.style?_2.style.width:null);_5=_2.height||(_2.style?_2.style.height:null)}
var _6=(_2.tagName&&_2.tagName.toLowerCase()=="td");return isc.SB.concat(this.$36h,(_2.tagName||_2.nodeName),(_2.id?" ID="+_2.id:_3),(!this.valueIsEmpty(_4)?" WIDTH="+_4:_3),(!this.valueIsEmpty(_5)?" HEIGHT="+_5:_3),(_6&&_2.rowSpan>1?" ROWSPAN="+_2.rowSpan:_3),(_6&&_2.colSpan>1?" COLSPAN="+_2.colSpan:_3),this.$36i)},isc.A.valueIsEmpty=function isc_DOMGrid_valueIsEmpty(_1){return _1==null||isc.isAn.emptyString(_1)},isc.A.getCellCSSText=function isc_DOMGrid_getCellCSSText(_1,_2,_3){var _4=this.data.getElement(_1);if(_4==null)return null;var _5=_4.tagName;if(_5==null)return null;if(this.$36k[_5]){_5=this.$36k[_5]}else{this.$36k=_5=_5.toLowerCase()}
if(this.colorMap[_5]!=null){return isc.SB.concat(this.colorPrefix,this.colorMap[_5],isc.semi)}});isc.B._maxIndex=isc.C+11;isc.ClassFactory.defineClass("MenuBar","Toolbar");isc.addGlobal("Menubar",isc.MenuBar);isc.A=isc.MenuBar.getPrototype();isc.A.overflow=isc.Canvas.VISIBLE;isc.A.defaultHeight=22;isc.A.menuConstructor="Menu";isc.A.buttonConstructor="MenuBarButton";isc.A.tabIndex=-1;isc.A.tabWithinToolbar=false;isc.A.buttonDefaults={showDown:false,showRollOver:true,showFocused:true,showFocusedAsOver:true};isc.A=isc.MenuBar.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.initWidget=function isc_MenuBar_initWidget(){this.Super("initWidget",arguments)},isc.A.setButtons=function isc_MenuBar_setButtons(){var _1=[];if(this.menus){for(var i=0;i<this.menus.length;i++){var _3=this.menus[i];_1[i]=this.$36o(_3,i)}}
return this.Super("setButtons",[_1],arguments)},isc.A.$36o=function isc_MenuBar__getButtonProperties(_1,_2){return{title:_1.title,width:(_1.menuButtonWidth?_1.menuButtonWidth:_1.width),menuNum:_2,focusChanged:function(_3){if(isc.Browser.isMoz&&_3)this.bringToFront()}}},isc.A.setMenus=function isc_MenuBar_setMenus(_1){if(!isc.isAn.Array(_1))_1=[_1];for(var i=0;i<this.members.length;i++){var _3=this.members[i],_4=this.menus[_3.menuNum];if(_3.isObserving(_4,"hide")){_3.ignore(_4,"hide")}}
this.menus=_1;this.setButtons()},isc.A.$36p=function isc_MenuBar__remapButton(_1,_2){if(!_1)return;if(_2==-1){var _3=_1.menuNum,_4=this.menus[_1.menuNum];if(_1.isObserving(_4,"hide")){_1.ignore(_4,"hide")}}
_1.menuNum=_2},isc.A.addMenus=function isc_MenuBar_addMenus(_1,_2){if(!_1)return;if(!isc.isAn.Array(_1))_1=[_1];if(!this.menus)this.menus=[];if(_2==null)_2=this.menus.length;if(!this.$6c){this.menus.addListAt(_1,_2)}else{for(var i=_2;i<this.members.length;i++){this.$36p(this.members[i],(i+_1.length))}
this.menus.addListAt(_1,_2);var _4=[];for(var i=0;i<_1.length;i++){var _5=this.menus.indexOf(_1[i]);_4[i]=this.$36o(_1[i],_5)}
this.addButtons(_4,_2)}},isc.A.removeMenus=function isc_MenuBar_removeMenus(_1){if(_1==null)return;if(!isc.isAn.Array(_1))_1=[_1];var _2=[],_3=this.menus.duplicate();for(var i=0;i<_1.length;i++){var _5=_1[i];if(isc.isA.Number(_5))_5=this.menus[_5];else if(!this.menus.contains(_5))continue;_3.remove(_5);var _6=this.menus.indexOf(_5);if(this.$6c)_2.add(this.members[_6])}
if(!this.$6c){this.menus=_3;return}
for(var i=0;i<this.menus.length;i++){if(this.menus[i]==_3[i])continue;this.$36p(this.members[i],_3.indexOf(this.menus[i]))}
this.menus=_3;this.removeButtons(_2)},isc.A.showMenu=function isc_MenuBar_showMenu(_1){var _2;if(isc.isA.Number(_1))_2=this.menus[_1];else{_2=_1;_1=this.menus.indexOf(_2)}
if(!_2){this.logWarn("showMenu() called with invalid menu number: "+_1+".  No effect.");return}
var _3;for(var i=0;i<this.members.length;i++){if(this.members[i].menuNum==_1){_3=this.members[i]}}
if(!isc.isA.Canvas(_2)){if(_2.ID==null)_2.ID=this.getID()+"_menu"+_1;_2.autoDraw=false;_2=this.menus[_1]=isc.ClassFactory.newInstance(this.menuConstructor,_2,this.menuDefaults)}
if(this.activeMenu!=null){this.menus[this.activeMenu].hideMenuTree()}
_2.keyEventParent=this;if(!this.vertical){_2.moveTo(_3.getPageLeft(),_3.getPageBottom())}else{_2.moveTo(_3.getPageRight(),_3.getPageTop())}
_2.show();_3.$36q=_3.showRollOver;_3.showRollOver=false;_3.setState(isc.StatefulCanvas.STATE_DOWN);this.activeMenu=_1;if(!_3.isObserving(_2,"hide")){_3.observe(_2,"hide","observer.menuHidden(observed)")}
var _5=isc.EH;if(_5.targetIsMasked(this))this.bringToFront();var _6=_5.clickMaskRegistry.last(),_7=_5.getMaskedFocusCanvas(_6);if(this.members.contains(_7))_5.setMaskedFocusCanvas(null,_6);_2.body.focusOnHide=_3},isc.A.$6d=function isc_MenuBar__focusInNextButton(_1){if(!this.activeMenu==null)return this.Super("$6d",arguments);if(_1==null)_1=true;var _2=this.activeMenu,_3=_1?1:-1,_4=_2+_3,_5=this.getMembers();while(_2!=_4){if(_4<0)_4=_5.length-1;else if(_4>=this.members.length)_4=0;var _6=_5[_4];if(!_6.isDisabled()){_6.showMenu();break}
_4+=_3}},isc.A.getFocusButtonIndex=function isc_MenuBar_getFocusButtonIndex(){if(this.activeMenu!=null)return this.activeMenu;return this.Super("getFocusButtonIndex",arguments)});isc.B._maxIndex=isc.C+10;isc.ClassFactory.defineClass("MenuBarButton","MenuButton");isc.A=isc.MenuBarButton.getPrototype();isc.A.showMenuButtonImage=false;isc.A.showDown=false;isc.A.autoDraw=false;isc.A.align="center";isc.A=isc.MenuBarButton.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.mouseOver=function isc_MenuBarButton_mouseOver(){this.Super("mouseOver",arguments);var _1=this.parentElement.activeMenu;if(_1!=null&&_1!=this.menuNum){this.showMenu()}},isc.A.mouseDown=function isc_MenuBarButton_mouseDown(){if(this.parentElement.activeMenu==this.menuNum){isc.Menu.hideAllMenus()}else{this.showMenu()}},isc.A.mouseUp=function isc_MenuBarButton_mouseUp(){},isc.A.click=function isc_MenuBarButton_click(){},isc.A.mouseOut=function isc_MenuBarButton_mouseOut(){if(this.parentElement.activeMenu!=this.menuNum){this.Super("mouseOut",arguments)}},isc.A.handleKeyPress=function isc_MenuBarButton_handleKeyPress(_1,_2){if(_1.keyName=="Space"||_1.keyName=="Enter")return this.showMenu();if(this.keyPress){this.convertToMethod("keyPress");return this.keyPress(_1,_2)}},isc.A.showMenu=function isc_MenuBarButton_showMenu(){this.parentElement.showMenu(this.menuNum)},isc.A.menuHidden=function isc_MenuBarButton_menuHidden(_1){if(isc.$cv)arguments.$cw=this;if(this.state==isc.StatefulCanvas.STATE_DOWN){if(this.hasFocus&&this.showFocused)this.setState(isc.StatefulCanvas.STATE_OVER);else this.setState(isc.StatefulCanvas.STATE_UP)}
this.showRollOver=this.$36q;delete this.$36q;this.menuIsDown=false;if(this.parentElement.activeMenu==this.menuNum){this.parentElement.activeMenu=null}
delete _1.eventParent;this.ignore(_1,"hide")});isc.B._maxIndex=isc.C+8;isc.ClassFactory.defineClass("CellSelection");isc.A=isc.CellSelection;isc.A.$24e=0;isc.A.COL_SELECTION_FLAGS=null;isc.A=isc.CellSelection;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.generateFlagTable=function isc_c_CellSelection_generateFlagTable(){isc.CellSelection.COL_SELECTION_FLAGS=[];for(var i=0;i<32;i++)
isc.CellSelection.COL_SELECTION_FLAGS[i]=Math.pow(2,i)});isc.B._maxIndex=isc.C+1;isc.A=isc.CellSelection.getPrototype();isc.A.data=null;isc.A.numCols=0;isc.A.selectionProperty=null;isc.A.$q7=true;isc.A.$24f=[];isc.A.lastSelectedCell=[];isc.A.changedCells=[];isc.A=isc.CellSelection.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.cellRecordMode="cell";isc.B.push(isc.A.init=function isc_CellSelection_init(){if(!isc.CellSelection.COL_SELECTION_FLAGS)isc.CellSelection.generateFlagTable();if(!this.selectionProperty)this.selectionProperty="_cellSelection_"+isc.CellSelection.$24e++;this.setData((this.data?this.data:[]))},isc.A.setData=function isc_CellSelection_setData(_1){if(this.data!=null)this.ignoreData(this.data);this.data=_1;if(this.data!=null)this.observeData(this.data)},isc.A.observeData=function isc_CellSelection_observeData(_1){this.observe(_1,"dataChanged","observer.$q7 = true")},isc.A.ignoreData=function isc_CellSelection_ignoreData(_1){this.ignore(_1,"dataChanged")},isc.A.cellIsSelected=function isc_CellSelection_cellIsSelected(_1,_2){var _3=isc.isAn.Object(_1)?_1:this.data.get(_1),_4=(_3?_3[this.selectionProperty]:null),_5=(_4?_4[Math.floor(_2/32)]:null),_6=isc.CellSelection.COL_SELECTION_FLAGS[_2%32];return(_5!=null&&((_5&_6)!=0))},isc.A.rowHasSelection=function isc_CellSelection_rowHasSelection(_1){var _2=this.data.get(_1),_3=(_2?_2[this.selectionProperty]:null),_4=Math.ceil(this.numCols/32);if(!_2||!_2[this.selectionProperty])return false;for(var i=0;i<_4;i++){if(_3[i])return true}
return false},isc.A.colHasSelection=function isc_CellSelection_colHasSelection(_1){if(_1>this.numCols-1)return false;var _2=isc.CellSelection.COL_SELECTION_FLAGS[_1%32],_3=Math.floor(_1/32),_4=this.data;if(isc.isA.ResultSet!=null&&isc.isA.ResultSet(_4)&&!_4.lengthIsKnown()){return false}
var _5=_4.getLength();for(var i=0;i<_5;i++){var _7=_4.getCachedRow(i);if(_7==null)continue;var _8=_7[this.selectionProperty];if(!_8)continue;if(_8&&_8[_3]&&((_8[_3]&_2)!=0)){return true}}
return false},isc.A.anySelected=function isc_CellSelection_anySelected(){if(!this.$q7)return(this.selectedCells!=null&&this.$24f.length>0);var _1=this.data;if(isc.isA.ResultSet!=null&&isc.isA.ResultSet(_1)&&!_1.lengthIsKnown()){return false}
var _2=Math.ceil(this.numCols/32);var _3=_1.getLength();for(var i=0;i<_3;i++){var _5=_1.getCachedRow(i);if(_5==null)continue;var _6=_5[this.selectionProperty];if(!_6)continue;for(var j=0;j<_2;j++){if(_6[j])return true}}
return false},isc.A.getSelectedCells=function isc_CellSelection_getSelectedCells(){if(!this.$q7)return this.$24f;var _1=[],_2=this.data,_3=isc.CellSelection.COL_SELECTION_FLAGS,_4=Math.ceil(this.numCols/32),_5=_2.getLength();if(isc.isA.ResultSet!=null&&isc.isA.ResultSet(_2)&&!_2.lengthIsKnown()){this.$q7=false;return _1}
for(var i=0;i<_5;i++){var _7=_2.getCachedRow(i);if(_7==null)continue;var _8=_7[this.selectionProperty];if(!_8)continue;for(var j=0,_10,_11;j<_4;j++){_10=_8[j];if(!_10)continue;_11=(j==_4-1&&this.numCols%32!=0)?this.numCols%32:32;for(var k=0;k<_11;k++){if((_10&_3[k])!=0){_1[_1.length]=[i,j*32+k]}}}}
this.$24f=_1;this.$q7=false;return _1},isc.A.getSelectionRowNums=function isc_CellSelection_getSelectionRowNums(){var _1=[],_2=Math.ceil(this.numCols/32),_3=this.data,_4=_3.getLength();if(isc.isA.ResultSet!=null&&isc.isA.ResultSet(_3)&&!_3.lengthIsKnown()){return _1}
for(var i=0;i<_4;i++){var _6=_3.getCachedRow(i);if(_6==null)continue;var _7=_6[this.selectionProperty];if(!_7)continue;for(var j=0,_9;j<_2;j++){if(_7[j]){_1[_1.length]=i;break}}}
return _1},isc.A.getSelectedRecord=function isc_CellSelection_getSelectedRecord(){if(this.cellRecordMode=="cell")return this.getSelection()[0];var _1=this.getSelectionRowNums(),_2=_1.length==0?null:_1[0],_3=_2==null?null:this.data.get(_2);return _3},isc.A.getSelection=function isc_CellSelection_getSelection(){if(this.cellRecordMode=="cell"){var _1=this.getSelectedCells();if(_1==null)return null;var _2=[];for(var i=0;i<_1.length;i++){var _4=_1[i],_5=this.target.getCellRecord(_4[0],_4[1]);if(_5==null)continue;_2.add(_5)}
return _2}else{var _6=this.getSelectionRowNums(),_7=[];if(_6&&_6.length>0){for(var i=0;i<_6.length;i++){var _8=this.data.get(_6[i]);if(_8==null)continue;_7.add(_8)}}
return _7}},isc.A.selectList=function isc_CellSelection_selectList(_1,_2){if(_2==null)_2=true;if(!_1)return false;for(var i=0;i<_1.length;i++){var _4=_1.get(i),_5=this.data.indexOf(_4);if(_5==null||_5<0)continue;if(_2)this.selectRow(_5);else this.deselectRow(_5)}},isc.A.getSelectionColNums=function isc_CellSelection_getSelectionColNums(){var _1=[],_2=[],_3=isc.CellSelection.COL_SELECTION_FLAGS,_4=Math.ceil(this.numCols/32),_5=this.data,_6=_5.getLength();if(isc.isA.ResultSet!=null&&isc.isA.ResultSet(_5)&&!_5.lengthIsKnown()){return _1}
for(var i=0;i<_6;i++){var _8=_5.getCachedRow(i);if(_8==null)continue;var _9=_8[this.selectionProperty];if(!_9)continue;for(var j=0,_11;j<_4;j++){if(_9[j]){_2[j]=_2[j]|_9[j]}}}
if(_2.length==0)return _1;for(var i=0,_12=this.numCols;i<_12;i++){if((_2[Math.floor(i/32)]&_3[i%32])!=0)
_1[_1.length]=i}
return _1},isc.A.getSelectionBounds=function isc_CellSelection_getSelectionBounds(){var _1=this.getSelectionRowNums(),_2=this.getSelectionColNums();return[_1.first(),_2.first(),_1.last(),_2.last()]},isc.A.canSelectCell=function isc_CellSelection_canSelectCell(_1,_2){return false},isc.A.$24g=function isc_CellSelection__setCellSelection(_1,_2,_3){if(_3&&!this.cellIsSelected(_1,_2)){if(!this.target.canSelectCell(_1,_2)){return false}}
var _4=this.data.getCachedRow(_1);if(_4==null)return false;var _5=(_4?_4[this.selectionProperty]:null),_6=Math.floor(_2/32),_7=(_5?_5[Math.floor(_2/32)]:0),_8=isc.CellSelection.COL_SELECTION_FLAGS[_2%32];if(!_4||_2>this.numCols-1)return false;if(_4.enabled==false)return false;if(_5==null){_5=_4[this.selectionProperty]=[];for(var i=0,_10=Math.ceil(this.numCols/32);i<_10;i++)_5[i]=0}
else if(_7==null){_5[_6]=0}
if(((_7&_8)!=0)==_3)return false;_5[_6]=_7^_8;if(_3)this.lastSelectedCell=[_1,_2];this.$q7=true;return true},isc.A.setCellRangeSelection=function isc_CellSelection_setCellRangeSelection(_1,_2,_3,_4,_5){this.changedCells=this.$24h(_1,_2,_3,_4,_5);return this.$24i()},isc.A.$24h=function isc_CellSelection__setCellRangeSelection(_1,_2,_3,_4,_5){var _6=[],_7,_8,_9,_10;var _11=this.data;if(isc.isA.ResultSet!=null&&isc.isA.ResultSet(_11)&&!_11.lengthIsKnown()){return _6}
if(_1<=_3){_7=_1;_8=_3}else{_7=_3;_8=_1}
if(_2<=_4){_9=_2;_10=_4}else{_9=_4;_10=_2}
if(this.logIsDebugEnabled()){this.logDebug((_5?"selecting ":"deselecting ")+[_7,_9]+" through "+[_8,_10])}
for(var _12=_7;_12<=_8;_12++){for(var _13=_9;_13<=_10;_13++){if(this.$24g(_12,_13,_5)){_6[_6.length]=[_12,_13]}}}
return _6},isc.A.setCellListSelection=function isc_CellSelection_setCellListSelection(_1,_2){if(!_1)return false;var _3=[];for(var i=0,_5=_1.length,_6,_7;i<_5;i++){_6=_1[i][0];_7=_1[i][1];if(this.$24g(_6,_7,_2))
_3[_3.length]=[_6,_7]}
this.changedCells=_3;return this.$24i()},isc.A.$24i=function isc_CellSelection__cellSelectionsChanged(){if(this.changedCells.length>0){this.selectionChanged();return true}else
return false},isc.A.$94k=function isc_CellSelection__updateSelectionOrigin(_1,_2,_3){var _4=isc.isA.GridRenderer(_1)?_1.grid:_1;var _5=this.originRow,_6=this.originCol;if(_2!=null&&_3!=null){this.originRow=_2;this.originCol=_3;_4.refreshCellStyle(_2,_3)}else{delete this.originRow;delete this.originCol}
if(_5!=null&&_6!=null){_4.refreshCellStyle(_5,_6)}},isc.A.$94l=function isc_CellSelection__validateSelectionOrigin(_1){if(this.originRow==null||this.originCol==null)return false;if(!this.cellIsSelected(this.originRow,this.originCol)){this.$94k(_1);return false}
var _2=isc.isA.GridRenderer(_1)?_1.grid:_1;_2.refreshCellStyle(this.originRow,this.originCol);return true},isc.A.$94h=function isc_CellSelection__isCellSelectionOrigin(_1,_2){if(this.originRow!=_1||this.originCol!=_2)return false;return this.cellIsSelected(_1,_2)},isc.A.selectionChanged=function isc_CellSelection_selectionChanged(){},isc.A.setCellSelection=function isc_CellSelection_setCellSelection(_1,_2,_3){if(this.$24g(_1,_2,_3)){this.changedCells=[[_1,_2]];this.selectionChanged();return true}else
return false},isc.A.selectCell=function isc_CellSelection_selectCell(_1,_2){return this.setCellSelection(_1,_2,true)},isc.A.deselectCell=function isc_CellSelection_deselectCell(_1,_2){return this.setCellSelection(_1,_2,false)},isc.A.selectCellRange=function isc_CellSelection_selectCellRange(_1,_2,_3,_4){this.changedCells=this.$24h(_1,_2,_3,_4,true);return this.$24i()},isc.A.deselectCellRange=function isc_CellSelection_deselectCellRange(_1,_2,_3,_4){this.changedCells=this.$24h(_1,_2,_3,_4,false);return this.$24i()},isc.A.selectRow=function isc_CellSelection_selectRow(_1){return this.selectCellRange(_1,0,_1,this.numCols-1)},isc.A.deselectRow=function isc_CellSelection_deselectRow(_1){return this.deselectCellRange(_1,0,_1,this.numCols-1)},isc.A.selectCol=function isc_CellSelection_selectCol(_1){return this.selectCellRange(0,_1,this.data.getLength()-1,_1)},isc.A.deselectCol=function isc_CellSelection_deselectCol(_1){return this.deselectCellRange(0,_1,this.data.getLength()-1,_1)},isc.A.selectAll=function isc_CellSelection_selectAll(){return this.selectCellRange(0,0,this.data.getLength()-1,this.numCols-1)},isc.A.deselectAll=function isc_CellSelection_deselectAll(){return this.deselectCellRange(0,0,this.data.getLength()-1,this.numCols-1)},isc.A.selectCellList=function isc_CellSelection_selectCellList(_1){return this.setCellListSelection(_1,true)},isc.A.deselectCellList=function isc_CellSelection_deselectCellList(_1){return this.setCellListSelection(_1,false)},isc.A.selectSingleCell=function isc_CellSelection_selectSingleCell(_1,_2){var _3=this.cellIsSelected(_1,_2);this.changedCells=this.$24h(0,0,this.data.getLength()-1,this.numCols-1,false);this.$24g(_1,_2,true);if(!_3&&_1>=0)
this.changedCells[this.changedCells.length]=[_1,_2];return this.$24i()},isc.A.selectSingleRow=function isc_CellSelection_selectSingleRow(_1){var _2=[];if(_1>0)
_2=this.$24h(0,0,_1-1,this.numCols-1,false);_2=_2.concat(this.$24h(_1,0,_1,this.numCols-1,true));if(_1<this.data.getLength()-1)
_2=_2.concat(this.$24h(_1+1,0,this.data.getLength()-1,this.numCols-1,false));this.changedCells=_2;return this.$24i()},isc.A.selectSingleCol=function isc_CellSelection_selectSingleCol(_1){var _2=[];if(_1>0)
_2=this.$24h(0,0,this.data.getLength()-1,_1-1,false);_2=_2.concat(this.$24h(0,_1,this.data.getLength()-1,_1,true));if(_1<this.numCols-1)
_2=_2.concat(this.$24h(0,_1+1,this.data.getLength()-1,this.numCols-1,false));this.changedCells=_2;return this.$24i()},isc.A.selectOnMouseDown=function isc_CellSelection_selectOnMouseDown(_1,_2,_3){var _4=_1.selectionType;if(_4==isc.Selection.NONE)return false;this.deselectCellOnMouseUp=false;this.deselectOthersOnMouseUp=false;var _5=this.cellIsSelected(_2,_3);if(isc.EventHandler.shiftKeyDown()&&_4!=isc.Selection.SINGLE)
{if(this.$94l(_1)){this.startRow=this.originRow;this.startCol=this.originCol;this.selectOnDragMove(_1,_2,_3);return true}
_4=isc.Selection.SIMPLE;_5=false}
this.startRow=_2;delete this.lastRow;this.startCol=_3;delete this.lastCol;if(_4==isc.Selection.SINGLE){this.selectSingleCell(_2,_3);return true}else if(_4==isc.Selection.SIMPLE){if(!_5){this.selectCell(_2,_3);this.$94k(_1,_2,_3);return true}else{this.deselectCellOnMouseUp=true;return false}}else if(isc.EventHandler.modifierKeyDown()){this.setCellSelection(_2,_3,!_5);if(!_5)this.$94k(_1,_2,_3);return true}else{if(!_5){this.selectSingleCell(_2,_3);this.$94k(_1,_2,_3);return true}else if(isc.EventHandler.rightButtonDown()){this.deselectOnDragMove=true;return false}else{if(this.dragSelection){if(this.simpleDeselect){this.deselectAll();this.selectOriginOnDragMove=true;return true}
this.selectSingleCell(_2,_3);this.$94k(_1,_2,_3);return true}else{if(this.simpleDeselect){this.deselectAllOnMouseUp=true}else{var _6=this.getSelectedCells();this.deselectOthersOnMouseUp=(_6.length>1);this.$94k(_1,_2,_3)}
return false}}}},isc.A.selectOnDragMove=function isc_CellSelection_selectOnDragMove(_1,_2,_3){var _4=this.startRow,_5=this.startCol;if(this.lastRow==null)this.lastRow=this.startRow;if(this.lastCol==null)this.lastCol=this.startCol;var _6=this.lastRow,_7=this.lastCol;if(_2<0||_3<0){this.logWarn("selectOnDragMove: aborting due to negative coordinate: "+[_2,_3]);return}
if(_2==_6&&_3==_7)return;if(_1.selectionType!=isc.Selection.SINGLE){this.$94k(_1,_4,_5)}
if(_1.selectionType==isc.Selection.SINGLE){this.selectSingleCell(_2,_3);return}
var _8=[];if(this.selectOriginOnDragMove){this.$24g(_4,_5);_8.add([_4,_5]);this.selectOriginOnDragMove=false}else if(this.deselectOnDragMove||this.deselectAllOnMouseUp||this.deselectOthersOnMouseUp)
{this.selectSingleCell(_4,_5);this.deselectAllOnMouseUp=this.deselectOthersOnMouseUp=this.deselectOnDragMove=false}
if((_2!=_6&&((_6>=_4&&_4>=_2)||(_2>=_4&&_4>=_6)))||(_3!=_7&&((_7>=_5&&_5>=_3)||(_3>=_5&&_5>=_7))))
{var _9=this.$24g(_4,_5,false);_8.addList(this.$24h(_4,_5,_6,_7,false));if(_9)this.$24g(_4,_5,true);_8.addList(this.$24h(_4,_5,_2,_3,true));this.changedCells=_8;this.$24i();this.lastRow=_2;this.lastCol=_3;return}
if(_2>=0&&_2!=_6){if(_4>=_6&&_6>_2){_8.addList(this.$24h(_2,_5,_6-1,_7,true))}else if(_4>=_2&&_2>_6){_8.addList(this.$24h(_6,_5,_2-1,_7,false))}else if(_4<=_2&&_2<_6){_8.addList(this.$24h(_2+1,_5,_6,_7,false))}else if(_4<=_6&&_6<_2){_8.addList(this.$24h(_6+1,_5,_2,_7,true))}
_6=this.lastRow=_2}
if(_3>=0&&_3!=_7){if(_5>=_7&&_7>_3){_8.addList(this.$24h(_4,_3,_6,_7-1,true))}else if(_5>=_3&&_3>_7){_8.addList(this.$24h(_4,_7,_6,_3-1,false))}else if(_5<=_3&&_3<_7){_8.addList(this.$24h(_4,_3+1,_6,_7,false))}else if(_5<=_7&&_7<_3){_8.addList(this.$24h(_4,_7+1,_6,_3,true))}
this.lastCol=_3}
this.changedCells=_8;this.$24i()},isc.A.selectOnMouseUp=function isc_CellSelection_selectOnMouseUp(_1,_2,_3){if(_1.selectionType==isc.Selection.NONE)return false;var _4=isc.isA.GridRenderer(_1)?_1.grid:_1;var _5=false;if(this.deselectOthersOnMouseUp){this.selectSingleCell(_2,_3);this.deselectOthersOnMouseUp=false;_5=true}else if(this.deselectCellOnMouseUp){this.deselectCell(_2,_3);this.deselectCellOnMouseUp=false;_5=true}else if(this.deselectAllOnMouseUp){this.deselectAll();this.deselectAllOnMouseUp=false;_5=true}
var _6=this.$94l(_1);if(_6&&!_5){_4.fireSelectionUpdated()}
return _5},isc.A.getDependentCellSelection=function isc_CellSelection_getDependentCellSelection(_1){var _2=isc.DependentCellSelection.create({numCols:_1,rootSelection:this});_2.observe(this,"selectionChanged","observer.$97m()");return _2});isc.B._maxIndex=isc.C+45;isc.CellSelection.getPrototype().isSelected=isc.CellSelection.getPrototype().cellIsSelected;isc.ClassFactory.defineClass("DependentCellSelection");isc.A=isc.DependentCellSelection.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.$969=function isc_DependentCellSelection__updateDependency(_1,_2){if(this.firstCol!=_1||this.numCols!=_2){this.rootSelection.deselectAll()}
this.firstCol=_1;if(_2!=null)this.numCols=_2},isc.A.cellIsSelected=function isc_DependentCellSelection_cellIsSelected(_1,_2){if(_2<0||_2>=this.numCols)return false;return this.rootSelection.cellIsSelected(_1,_2+this.firstCol)},isc.A.selectOnMouseDown=function isc_DependentCellSelection_selectOnMouseDown(_1,_2,_3){if(_3<0||_3>=this.numCols)return false;return this.rootSelection.selectOnMouseDown(_1,_2,_3+this.firstCol)},isc.A.selectOnDragMove=function isc_DependentCellSelection_selectOnDragMove(_1,_2,_3){if(_3<0||_3>=this.numCols)return false;return this.rootSelection.selectOnDragMove(_1,_2,_3+this.firstCol)},isc.A.selectOnMouseUp=function isc_DependentCellSelection_selectOnMouseUp(_1,_2,_3){if(_3<0||_3>=this.numCols)return false;return this.rootSelection.selectOnMouseUp(_1,_2,_3+this.firstCol)},isc.A.$97m=function isc_DependentCellSelection__selectionChanged(){var _1=this.rootSelection.changedCells;var _2=[];for(var i=0;i<_1.length;i++){var _4=_1[i],_5=_4[1]-this.firstCol;if(_5>=0&&_5<this.numCols){_2.add([_4[0],_5])}}
this.changedCells=_2;this.selectionChanged()},isc.A.destroy=function isc_DependentCellSelection_destroy(){if(this.isObserving(this.rootSelection,"selectionChanged"))
this.ignore(this.rootSelection,"selectionChanged");this.rootSelection.deselectAll();this.Super("destroy",arguments)},isc.A.selectionChanged=function isc_DependentCellSelection_selectionChanged(){});isc.B._maxIndex=isc.C+8;isc.ClassFactory.defineClass("CellListIterator");isc.A=isc.CellListIterator.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.init=function isc_CellListIterator_init(){if(!this.cells)this.cells=[];this.currCell=0;this.currRow=-1},isc.A.getNextRow=function isc_CellListIterator_getNextRow(){if(this.currCell<this.cells.length)this.currRow=this.cells[this.currCell][0];else this.currRow++;while(this.currCell<this.cells.length){if(this.cells[this.currCell][0]!=this.currRow)break;this.currCell++}
return this.currRow});isc.B._maxIndex=isc.C+2;if(isc.Window){isc.ClassFactory.defineClass("FieldEditor","Window");isc.A=isc.FieldEditor.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.isModal=true;isc.A.showMinimizeButton=false;isc.A.autoCenter=true;isc.A.autoSize=true;isc.A.defaultWidth=475;isc.A.visibleFieldsConstructor="ListGrid";isc.A.hiddenFieldsConstructor="ListGrid";isc.A.showFooter=false;isc.A.title="Customize Fields";isc.A.showInstructionsPane=true;isc.A.bodyProperties={layoutMargin:5};isc.A.instructionsPaneDefaults={_constructor:isc.HTMLFlow,padding:5,height:1};isc.A.instructions="Drag fields between grids to control which fields are visible and the order in which fields are displayed";isc.B.push(isc.A.initWidget=function isc_FieldEditor_initWidget(){this.invokeSuper(isc.FieldEditor,"initWidget");if(!this.fields){isc.logWarn('FieldEditor can not be created because no fields were provided');return}
this.addItem(this.addAutoChild("instructionsPane",{contents:this.instructions}));this.visibleFieldsDefaults=this.hiddenFieldsDefaults={height:200,width:200,leaveScrollbarGap:false,canDragRecordsOut:true,canAcceptDroppedRecords:true,canReorderRecords:true,dragDataAction:"move"};var _1=this.visibleFieldsGrid=this.createAutoChild("visibleFields",{fields:[{name:"title",title:"Visible Fields",formatCellValue:"value || record.name"}]});var _2=this.fields;var _3=_2.findAll("visible",null);var _4=_2.findAll("visible",false);_1.setData(_3);var _5=this.hiddenFieldsGrid=this.createAutoChild("hiddenFields",{canReorderRecords:false,fields:[{name:"title",title:"Hidden Fields",formatCellValue:"value || record.name"}]});_5.setData(_4);var _6=isc.HLayout.create({membersMargin:10,layoutMargin:5,height:1,overflow:"visible",members:[_1,isc.VStack.create({width:32,height:74,layoutAlign:"center",membersMargin:10,members:[isc.Img.create({src:"[SKINIMG]actions/back.png",width:16,height:16,visFieldsGrid:_1,hidFieldsGrid:_5,layoutAlign:"center",click:"this.visFieldsGrid.transferSelectedData(this.hidFieldsGrid)"}),isc.Img.create({src:"[SKINIMG]actions/forward.png",width:16,height:16,layoutAlign:"center",visFieldsGrid:_1,hidFieldsGrid:_5,click:"this.hidFieldsGrid.transferSelectedData(this.visFieldsGrid)"})]}),_5]});this.addItem(_6);var _7=this.createAutoChild("okButton",{autoDraw:false,title:"Done",fieldEditor:this,click:function(){this.creator.okClick()},layoutAlign:"center"},isc.IButton);this.addItem(_7)},isc.A.okClick=function isc_FieldEditor_okClick(){var _1=isc.clone(this.visibleFieldsGrid.data);var _2=isc.clone(this.hiddenFieldsGrid.data);_1.setProperty("visible",null);_2.setProperty("visible",false);_1.addList(_2);var _3=_1.getProperties(["name","visible"]);this.done(_1,_3);this.hide();this.destroy()},isc.A.done=function isc_FieldEditor_done(_1,_2){});isc.B._maxIndex=isc.C+3}
isc.ClassFactory.defineClass("FormulaBuilder","VLayout");isc.A=isc.FormulaBuilder.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.vertical=true;isc.A.padding=10;isc.A.showFormulaField=true;isc.A.formulaFieldDefaults={type:"text",formItemType:"AutoFitTextAreaItem",height:20,width:"*",hoverWidth:300,keyPress:function(){if(this.form.creator.autoTest){this.fireOnPause("autoTest",{target:this.form.creator,methodName:"testFunction"},this.form.creator.autoTestDelay)}}};isc.A.showTitleField=true;isc.A.titleFieldDefaults={selectOnFocus:true,type:"text",width:"*"};isc.A.showHelpIcon=true;isc.A.helpIconDefaults={src:"[SKIN]actions/help.png"};isc.A.autoHideCheckBoxLabel="Auto hide fields used in formula";isc.A.showAutoHideCheckBox=true;isc.A.autoHideCheckBoxDefaults={type:"boolean",align:"right"};isc.A.builderTypeText="Formula";isc.A.helpTextIntro="For basic arithmetic, type in symbols (+-/%) directly.<P>The following functions are also available:";isc.A.fieldKeyDefaults={_constructor:"ListGrid",leaveScrollbarGap:false,autoFitData:"both",autoFitMaxRecords:8,autoFitMaxWidth:500,autoFetchData:true,showRollOver:true,selectionType:"none",autoFitFieldWidths:true,autoFitWidthApproach:"both",autoFitExpandField:"title",detailField:"title",canHover:true,hoverMode:"detailField",defaultFields:[{name:"mappingKey",width:40},{name:"title",width:"*"},{name:"sourceDS",width:"*",showIf:"list.creator.dataSources != null"},{name:"name",showIf:"false"},{name:"type",showIf:"false"},{name:"length",showIf:"false"}],recordClick:function(_1,_2){var _3=this.creator.formulaField;if(_3){_3.focusInItem();var _4=this.creator.getInsertValueForRecord(_2);if(_4!=null){if(this.creator.valuePrefix!=null)_4=this.creator.valuePrefix+_4;if(this.creator.valueSuffix!=null)_4+=this.creator.valueSuffix;var _5=_3.getEnteredValue()||"";var _6=_3.getSelectionRange(),_7;if(_6!=null){_5=_5.substring(0,_6[0])+_4+_5.substring(_6[1]);_7=_6[0]+_4.length}else{_5+=_4;_7=_4.length}
_3.setValue(_5);_3.focusInItem();_3.setSelectionRange(_7,_7);if(this.creator.autoTest){this.fireOnPause("autoTest",{target:this.creator,methodName:"testFunction"},this.creator.autoTestDelay)}}}}};isc.A.instructionsTextStart="The following fields are available for use in this \${builderType}";isc.A.instructionsDefaults={_constructor:"Label",height:1,extraSpace:10,overflow:"visible"};isc.A.titleFormDefaults={_constructor:"DynamicForm",extraSpace:5,autoFocus:true};isc.A.formulaFormDefaults={_constructor:"DynamicForm",extraSpace:5};isc.A.hideFieldsFormDefaults={_constructor:"DynamicForm",extraSpace:5};isc.A.sampleHeaderDefaults={_constructor:"Label",height:15,extraSpace:5};isc.A.sampleLabelDefaults={_constructor:"Canvas",height:40,width:"100%",align:"center",valign:"top",extraSpace:10,showHover:true,overflow:"hidden",styleName:"sampleOutput"};isc.A.messageLabelDefaults={_constructor:"Label",height:20,width:"100%",align:"right",valign:"center",overflow:"hidden",showHover:true};isc.A.buttonLayoutDefaults={_constructor:"HLayout",width:"100%",height:20,align:"right"};isc.A.cancelButtonDefaults={_constructor:"IButton",autoParent:"buttonLayout",autoFit:true,extraSpace:10,click:function(){this.creator.completeEditing(true)}};isc.A.testButtonDefaults={_constructor:"IButton",autoParent:"buttonLayout",autoFit:true,extraSpace:10,click:function(){this.creator.testFunction()}};isc.A.saveAddAnotherButtonDefaults={_constructor:"IButton",autoParent:"buttonLayout",autoFit:true,extraSpace:10,click:function(){if(!this.creator.showTitleForm||this.creator.titleForm.validate())this.creator.saveAddAnother()}};isc.A.saveButtonDefaults={_constructor:"IButton",autoParent:"buttonLayout",autoFit:true,click:function(){if(!this.creator.showTitleForm||this.creator.titleForm.validate())this.creator.save()}};isc.A.fieldType="float";isc.A.allowEscapedKeys=false;isc.A.invalidBuilderPrompt="Invalid \${builderType}: \${errorText}";isc.A.defaultErrorText="[No Explicit Error]";isc.A.invalidBlankPrompt="Invalid blank \${builderType}";isc.A.validBuilderPrompt="Valid \${builderType}";isc.A.helpWindowTitle="\${builderType} Help";isc.A.titleFieldTitle="Title";isc.A.defaultNewFieldTitle="New Field";isc.A.keyColumnTitle="Key";isc.A.sourceFieldColumnTitle="Source Field";isc.A.sourceDSColumnTitle="Source DataSource";isc.A.cancelButtonTitle="Cancel";isc.A.saveAddAnotherButtonTitle="Save & Add Another";isc.A.saveButtonTitle="Save";isc.A.saveConfirmationPrompt="Save changes to this \${builderType}?";isc.A.invalidGeneratedFunctionPrompt="The generated function is invalid - Check your \${builderType} and retry.";isc.A.sampleHeaderTitle="Sample:";isc.A.testButtonTitle="Test";isc.B.push(isc.A.getInsertValueForRecord=function isc_FormulaBuilder_getInsertValueForRecord(_1){if(_1==null)return"";var _2=_1.mappingKey;var _3=this.insertEscapedKeys;if(_3==null)_3=this.allowEscapedKeys;if(_3){_2="#{"+_2+"}"}
return _2});isc.B._maxIndex=isc.C+1;isc.A=isc.FormulaBuilder.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.warnDuplicateTitlesMessage="Another field already has the title '${fieldTitle}'.  Continue anyway?";isc.A.autoTest=true;isc.A.autoTestDelay=200;isc.A.samplePrompt="<nobr>For Record: ${title}</nobr><br><nobr>Output: ${output}</nobr>";isc.B.push(isc.A.getValue=function isc_FormulaBuilder_getValue(){return this.formulaField?this.formulaField.getValue():null},isc.A.setValue=function isc_FormulaBuilder_setValue(_1){if(this.formulaField){this.formulaField.setValue(_1)}},isc.A.setFormula=function isc_FormulaBuilder_setFormula(_1){this.setValue(_1)},isc.A.getFieldIdProperty=function isc_FormulaBuilder_getFieldIdProperty(){return this.getClass().getFieldIdProperty(this.component)},isc.A.getTitle=function isc_FormulaBuilder_getTitle(){return this.titleField?this.titleField.getValue():null},isc.A.setTitle=function isc_FormulaBuilder_setTitle(_1){if(this.titleField){this.titleField.setValue(_1)}},isc.A.getFieldFromMappingKey=function isc_FormulaBuilder_getFieldFromMappingKey(_1){var _2=this.getAvailableFields();for(var i=0;i<_2.length;i++){var _4=_2.get(i);if(_4.mappingKey==_1)return _4}
return null},isc.A.getFields=function isc_FormulaBuilder_getFields(){if(this.fields)return this.fields;if(this.component)return this.component.getAllFields();var _1;if(this.dataSources){_1=[];for(var i=0;i<this.dataSources.length;i++){var _3=this.dataSources[i],_4=_3.getFields();for(var _5 in _4){var _6=isc.addProperties({},_4[_5],{name:_3.getID()+"."+_5,sourceDS:_3.getID()});_1.add(_6)}}}else{_1=isc.getValues(this.dataSource.getFields())}
return _1},isc.A.shouldHideUsedFields=function isc_FormulaBuilder_shouldHideUsedFields(){if(this.showAutoHideCheckBox&&this.autoHideCheckBox&&this.autoHideCheckBox.getValue()){return this.autoHideCheckBox.getValue()}else return false},isc.A.getHelpText=function isc_FormulaBuilder_getHelpText(){return this.getHoverText()},isc.A.initWidget=function isc_FormulaBuilder_initWidget(){this.Super("initWidget",arguments);if(this.dataSource)this.dataSource=isc.DataSource.get(this.dataSource);if(this.dataSources){var _1=[];for(var i=0;i<this.dataSources.length;i++){_1[i]=isc.DataSource.get(this.dataSources[i])}}
var _3=this.getAvailableFields();if(!this.field){this.field={name:this.getUniqueFieldName(),title:this.defaultNewFieldTitle,type:this.fieldType,width:"50",canFilter:false,canSortClientOnly:true,originalOrder:this.availableFields.length,summaryFunction:this.defaultSummaryFunction}}
this.instructions=this.createAutoChild("instructions",{contents:this.instructionsTextStart.evalDynamicString(this,{builderType:this.builderTypeText})});this.addMember(this.instructions);this.fieldKeyDS=isc.DataSource.create({ID:this.getID()+"DS",clientOnly:true,testData:_3,fields:[{name:"mappingKey",title:this.keyColumnTitle,width:40},{name:"title",title:this.sourceFieldColumnTitle,width:"*"},{name:"sourceDS",title:this.sourceDSColumnTitle,showIf:"false"},{name:"name",showIf:"false",primaryKey:true},{name:"type",showIf:"false"},{name:"length",showIf:"false"}]});this.fieldKey=this.createAutoChild("fieldKey",{dataSource:this.fieldKeyDS});if(this.fieldKey.showFilterEditor!==false&&this.fieldKey.autoFitMaxRecords&&_3.length>this.fieldKey.autoFitMaxRecords)
{this.fieldKey.setShowFilterEditor(true)}
this.addMember(this.fieldKey);if(this.showTitleField){this.addAutoChild("titleForm",{fields:[isc.addProperties(this.titleFieldDefaults,this.titleFieldProperties,{title:this.titleFieldTitle,name:"titleField"})]});this.titleField=this.titleForm.getField("titleField");this.setTitle(this.field.title||isc.DataSource.getAutoTitle(this.field.name))}
if(this.showFormulaField){this.addAutoChild("formulaForm",{fields:[isc.addProperties({title:this.builderTypeText},this.formulaFieldDefaults,this.formulaFieldProperties,this.showHelpIcon?{icons:[isc.addProperties({prompt:this.getHelpText()},this.helpIconDefaults,this.helpIconProperties,{click:"form.creator.showHelpWindow();"})]}:{},{name:"formulaField"})]});this.formulaField=this.formulaForm.getField("formulaField");if(this.showHelpIcon)this.helpIcon=this.formulaField.icons[0]}
this.addAutoChild("messageLabel");this.addAutoChild("sampleHeader",{contents:this.sampleHeaderTitle});this.addAutoChild("sampleLabel");if(this.showAutoHideCheckBox){this.addAutoChild("hideFieldsForm",{fields:[isc.addProperties({title:this.autoHideCheckBoxLabel},this.autoHideCheckBoxDefaults,this.autoHideCheckBoxProperties,{name:"autoHide"})]});this.autoHideCheckBox=this.hideFieldsForm.getField("autoHide")}
this.addAutoChild("buttonLayout");this.addAutoChild("cancelButton",{title:this.cancelButtonTitle});if(!this.autoTest)this.addAutoChild("testButton",{title:this.testButtonTitle});this.addAutoChild("saveAddAnotherButton",{title:this.saveAddAnotherButtonTitle});this.addAutoChild("saveButton",{title:this.saveButtonTitle});if(this.showTitleField)this.titleForm.focusInItem(this.titleField);else this.formulaForm.focusInItem(this.formulaField);this.setInitialValue();if(this.editMode&&this.autoTest)this.testFunction()},isc.A.getUniqueFieldName=function isc_FormulaBuilder_getUniqueFieldName(){return this.getNewUniqueFieldName("formulaField")},isc.A.getNewUniqueFieldName=function isc_FormulaBuilder_getNewUniqueFieldName(_1){if(!_1||_1=="")_1="field";var _2=this.component,_3=(_2&&_2.fieldNamingStrategy||"simple")=="uuid",_4=this.getFields(),_5=_1.length,_6;if(_3){_6=_1+isc.Math.randomUUID()}else{var _7=_1+"Index";if(_2&&!_2.fieldNameGenerator[_7])_2.fieldNameGenerator[_7]=1;var _8=_2?_2.fieldNameGenerator[_7]:1;for(var i=0;i<_4.length;i++){var _10=_4.get(i);if(_10.name.startsWith(_1)){var _11=_10.name.substr(_5),_12=new Number(_11);if(_12&&_12>=_8)_8=_12+1}}
if(_2)_2.fieldNameGenerator[_7]=_8;_6=_1+_8}
return _6},isc.A.destroy=function isc_FormulaBuilder_destroy(){if(this.fieldKeyDS)this.fieldKeyDS.destroy();this.Super("destroy",arguments)},isc.A.setInitialValue=function isc_FormulaBuilder_setInitialValue(){if(this.editMode&&this.field.userFormula){this.initialValue=this.field.userFormula.text;if(this.field.userFormula.allowEscapedKeys){this.allowEscapedKeys=this.field.userFormula.allowEscapedKeys}}
this.initialValue=this.initialValue||"";this.setValue(this.initialValue)},isc.A.showHelpWindow=function isc_FormulaBuilder_showHelpWindow(){var _1=this.locatorParent,_2=_1?_1.getTop():this.top,_3=_1?_1.getRight():this.left,_4=_1?_1.getVisibleWidth():this.width,_5=_1?_1.getVisibleHeight():this.getVisibleHeight();if(this.helpWindow&&this.helpWindow!=null){this.hideHelpWindow()}else{this.helpIcon.prompt=null;this.formulaField.stopHover();var _6=this;this.helpWindow=isc.Window.create({title:this.helpWindowTitle.evalDynamicString(this,{builderType:this.builderTypeText}),showMinimizeButton:false,showMaximizeButton:false,isModal:false,closeClick:function(){_6.hideHelpWindow()},headerIconProperties:{src:"[SKIN]actions/help.png"},items:[isc.Label.create({contents:this.getHelpText(),canSelectText:true,padding:10})]});this.helpWindow.observe(_1,"bringToFront","observer.bringToFront()");if(_1){var _7=_1.getRight()+_4;var _8=_7-isc.Page.getWidth();if(_8>0){_1.setLeft(_1.getLeft()-_8);_3=_1.getRight()}}
this.helpWindow.resizeTo(_4,_5);this.helpWindow.moveTo(_3,_2);this.helpWindow.show();if(_1){}}},isc.A.hideHelpWindow=function isc_FormulaBuilder_hideHelpWindow(){if(this.helpWindow){this.helpWindow.destroy();this.helpWindow=null}
this.helpIcon.prompt=this.getHelpText();this.formulaField.stopHover()},isc.A.getHoverText=function isc_FormulaBuilder_getHoverText(){var _1=isc.SB.create();_1.append("<b>",this.helpTextIntro,"</b> <P>");_1.append("<ul>");var _2=isc.MathFunction.getRegisteredFunctionIndex(),_3=this.mathFunctions;if(_3&&_3.length>0){for(var i=0;i<_3.length;i++){var _5=_2[_3[i]];_1.append("<li> <b>",_5.name,": </b> ",_5.description,"<p>");_1.append("<i>usage: ",_5.usage,"</i> </li>")}}
_1.append("</ul>");return _1.toString()},isc.A.getAvailableFields=function isc_FormulaBuilder_getAvailableFields(){if(this.availableFields)return this.availableFields;var _1=this.availableFields=[],_2=this.field,_3=this.getFields(),j=0;if(!_3)return _1;for(var i=0;i<_3.getLength();i++){var _6=isc.addProperties({},_3.get(i)),_7=_6.type;_6.originalOrder=i;if(_2){if(_2.name==_6.name)continue;if(_6.userFormula){var _8=false,_9=_6.userFormula.formulaVars||{};for(var _10 in _9){if(_9[_10]==_2.name){_8=true;break}}
if(_8)continue}}
if(_6.userFormula||isc.SimpleType.inheritsFrom(_7,"integer")||isc.SimpleType.inheritsFrom(_7,"float"))
{_6.mappingKey=isc.FormulaBuilder.mappingKeyForIndex(j++);if(!_6.title)_6.title=isc.DataSource.getAutoTitle(_6.name);_1.add(_6)}}
var _9=_2&&_2.userFormula?_2.userFormula.formulaVars:{};var _11=[];for(var _12 in _9){var _13=_1.find("mappingKey",_12),_14=_1.find("name",_9[_12]);if(_14==null){_11.add(_12);continue}
if(_13)_13.mappingKey=_14.mappingKey;_14.mappingKey=_12}
if(_11.length>0){var _15=this.component&&this.component.missingFormulaFieldValue||"-";isc.FormulaBuilder.remapBadVars(_11,_9,_2.userFormula,_15)}
isc.FormulaBuilder.sortFields(_1,true);isc.FormulaBuilder.applyHeaderSpanTitles(this,_1);return _1},isc.A.getUsedFields=function isc_FormulaBuilder_getUsedFields(_1){var _2=[],_3=this.getValue(),_4=this.getAvailableFields().duplicate();if(!_3)return _2;isc.FormulaBuilder.sortFields(_4,!!_1);for(var i=0;i<_4.length;i++){var _6=_4.get(i);if(isc.FormulaBuilder.fieldIsUsed(_3,_6.mappingKey,this.allowEscapedKeys)){_2.add(_6)}}
return _2},isc.A.getCompleteValueObject=function isc_FormulaBuilder_getCompleteValueObject(){var _1=this.getUsedFields(),_2=this.generateFunction(),_3=function(_8,_9,_10){return _2(_8,_10)},_4={sortNormalizer:_3,$65w:_2,type:this.fieldType,userFormula:{text:this.getValue(),formulaVars:{}}},_5=this.getFieldIdProperty();if(this.allowEscapedKeys)_4.userFormula.allowEscapedKeys=true;for(var i=0;i<_1.length;i++){var _7=_1.get(i);_4.userFormula.formulaVars[_7.mappingKey]=_7[_5]}
return _4},isc.A.getBasicValueObject=function isc_FormulaBuilder_getBasicValueObject(){var _1=this.getUsedFields(),_2={text:this.getValue(),formulaVars:{}},_3=this.getFieldIdProperty();if(this.allowEscapedKeys)_2.allowEscapedKeys=true;for(var i=0;i<_1.length;i++){var _5=_1.get(i);_2.formulaVars[_5.mappingKey]=_5[_3]}
return _2},isc.A.getUpdatedFieldObject=function isc_FormulaBuilder_getUpdatedFieldObject(){return isc.addProperties(this.field,{title:this.getTitle()},this.getCompleteValueObject())},isc.A.testFunction=function isc_FormulaBuilder_testFunction(){var _1=this.getClass().testFunction(this.field,this.getBasicValueObject(),this.component,this.getFields(),this.testRecord);var _2="",_3=_1.errorText||this.defaultErrorText;if(_1.failedGeneration||_1.failedExecution){_2=this.invalidBuilderPrompt.evalDynamicString(this,{builderType:this.builderTypeText,errorText:_3})}else if(_1.emptyTestValue){_2=this.invalidBlankPrompt.evalDynamicString(this,{builderType:this.builderTypeText})}else{_2=this.validBuilderPrompt.evalDynamicString(this,{builderType:this.builderTypeText})}
this.setTestMessage(_2);this.setSamplePrompt(this.getSamplePrompt(_1));return _1},isc.A.getTestRecord=function isc_FormulaBuilder_getTestRecord(){if(this.testRecord)return this.testRecord;return this.getClass().getTestRecord(this.component,this.getAvailableFields())},isc.A.setTestMessage=function isc_FormulaBuilder_setTestMessage(_1){this.messageLabel.setContents(_1)},isc.A.setSamplePrompt=function isc_FormulaBuilder_setSamplePrompt(_1){this.sampleLabel.setContents("<center>"+_1+"</center>")},isc.A.generateFunction=function isc_FormulaBuilder_generateFunction(){return this.getClass().generateFunction(this.getBasicValueObject(),this.getUsedFields(),this.component)},isc.A.saveAddAnother=function isc_FormulaBuilder_saveAddAnother(){this.restartBuilder=true;this.save()},isc.A.fieldTitleIsUnique=function isc_FormulaBuilder_fieldTitleIsUnique(_1){var _2=this.component?this.component.getAllFields():null,_3=_2?_2.findAll({"title":_1}):null,_4=true;if(_3&&_3.length>0){for(var i=0;i<_3.length;i++){if(_3[i].name!=this.field.name){_4=false;break}}}
return _4},isc.A.save=function isc_FormulaBuilder_save(){var _1=this.testFunction();if(this.warnDuplicateTitles&&!this.duplicateTitleAccepted){var _2=this.getTitle();if(!this.fieldTitleIsUnique(_2)){var _3=this.warnDuplicateTitlesMessage.evalDynamicString(this,{fieldTitle:_2});var _4=this;isc.confirm(_3,function(_5){if(_5){_4.duplicateTitleAccepted=true;_4.delayCall("save")}else{_4.restartBuilder=false}});return null}}
delete this.duplicateTitleAccepted;if(_1.emptyTestValue){isc.warn(this.invalidBlankPrompt.evalDynamicString(this,{builderType:this.builderTypeText}));return}else if(_1.failedGeneration||_1.failedExecution){isc.warn(this.invalidGeneratedFunctionPrompt.evalDynamicString(this,{builderType:this.builderTypeText}));return}
this.completeEditing(false)},isc.A.completeEditing=function isc_FormulaBuilder_completeEditing(_1,_2){this.cancelled=_1;if(_1){if(this.editMode&&!_2){if(this.getValue()!=this.initialValue){var _3=this;var _4=this.saveConfirmationPrompt.evalDynamicString(this,{builderType:this.builderTypeText});isc.confirm(_4,function(_5){if(_5){_3.save()}else{_3.completeEditing(true,true)}});return}}}
if(this.helpWindow)this.hideHelpWindow();if(this.availableFields){isc.FormulaBuilder.sortFields(this.availableFields,true);this.availableFields.clearProperty("originalOrder")}
this.fireOnClose()},isc.A.fireOnClose=function isc_FormulaBuilder_fireOnClose(){},isc.A.getSamplePrompt=function isc_FormulaBuilder_getSamplePrompt(_1){var _2=this.dataSource?this.dataSource.getTitleField():isc.firstKey(_1.record),_3=_1.result!=null?_1.result:this.invalidBuilderPrompt.evalDynamicString(this,{builderType:this.builderTypeText,errorText:_1.errorText||this.defaultErrorText}),_4=_1.record[_2];return this.samplePrompt.evalDynamicString(this,{title:_4,output:_3})});isc.B._maxIndex=isc.C+34;isc.A=isc.FormulaBuilder;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.mappingKeyForIndex=function isc_c_FormulaBuilder_mappingKeyForIndex(_1){var _2="",_3=Math.floor(_1/(26*27)),_4=_1%(26*26),_5=Math.floor(_4/26);if(_3>=1)_2+=String.fromCharCode(65+(_3-1));if(_5>=1){if(_3>=1){_2+=String.fromCharCode(65+(_5-1));_2+=String.fromCharCode(65+(_1-(26*27))%26)}else{_2+=String.fromCharCode(65+(_5-1));_2+=String.fromCharCode(65+_1%26)}}else{if(_3>=1){_2+=String.fromCharCode(65)}
_2+=String.fromCharCode(65+_1%26)}
return _2},isc.A.getFieldIdProperty=function isc_c_FormulaBuilder_getFieldIdProperty(_1){return _1?_1.fieldIdProperty:"name"},isc.A.applyHeaderSpanTitles=function isc_c_FormulaBuilder_applyHeaderSpanTitles(_1,_2,_3,_4){if(!_1.showHeaderSpanTitles)return;_3=_3||_1.headerSpans;if(!_3)return;for(var i=0;i<_3.length;i++){var _6=_4||"";var _7=_3[i];_6+=_7.title+_1.spanTitleSeparator;if(_7.spans){this.applyHeaderSpanTitles(_1,_2,_7.spans,_6)}else if(_7.fields){for(var j=0;j<_7.fields.length;j++){var _9=_7.fields[j];for(var k=0;k<_2.length;k++){if(_2[k].name==_9){_2[k].title=_6+_2[k].title;break}}}}}},isc.A.sortFields=function isc_c_FormulaBuilder_sortFields(_1,_2){_1.sortByProperty("mappingKey",_2,function(_4,_5,_6){var _3=_4[_5];if(_3.length==1)_3='99'+_3;else if(_3.length==2)_3='9'+_3;return _3})},isc.A.handleKeyExp=function isc_c_FormulaBuilder_handleKeyExp(_1,_2,_3,_4){switch(_3){case"braced":if(_4)return _1.replaceAll("#{"+_2+"}",_4);else return _1.indexOf("#{"+_2+"}")>=0;case"escaped":var _5=new RegExp("#"+_2+"(?=$|[^A-Z]+)","g");if(_4)return _1.replace(_5,_4);else return _5.test(_1);default:case"simple":var _5=new RegExp("(^|[^A-Z]+)"+_2+"(?=$|[^A-Z]+)","g");if(_4)return _1.replace(_5,"$1"+_4);else return _5.test(_1)}},isc.A.fieldIsUsed=function isc_c_FormulaBuilder_fieldIsUsed(_1,_2,_3){if(!_1||!_2)return false;if(this.handleKeyExp(_1,_2))return true;if(!_3)return false;return this.handleKeyExp(_1,_2,"escaped")||this.handleKeyExp(_1,_2,"braced")},isc.A.getFieldDetailsFromValue=function isc_c_FormulaBuilder_getFieldDetailsFromValue(_1,_2,_3,_4,_5){var _6=isc.shallowClone(_2),_7=this.getFieldIdProperty(_4),_8={usedFields:[],missingFields:[]};for(var _9 in _6){var _10=_6[_9],_11=this.fieldIsUsed(_1,_9,_5),_12=_3.findIndex(_7,_10);if(!_3[_12]){if(!_11){isc.logWarn("Field "+_10+" is not in the list of available fields.  However, it is not used in the formula either - ignoring.");delete _2[_9]}else{isc.logWarn("Field "+_10+" is not in the list of available-fields");_8.missingFields.add(_10)}}else{var _13=isc.addProperties({},_3[_12]);_13.mappingKey=_9;_8.usedFields.add(_13)}}
return _8},isc.A.testFunction=function isc_c_FormulaBuilder_testFunction(_1,_2,_3,_4,_5){var _6={};try{_6.component=_3;_6.record=this.getTestRecord(_3,_4,_5);if(!_2.text||_2.text==""){_6.emptyTestValue=true;return _6}
_6.jsFunction=this.generateFunction(_2,_4,_3);_6.result=_6.jsFunction(_6.record,_3)}catch(err){if(!_6.jsFunction)_6.failedGeneration=true;_6.failedExecution=true;_6.errorText=err.message}
return _6},isc.A.getTestRecord=function isc_c_FormulaBuilder_getTestRecord(_1,_2,_3){var _4=this.getFieldIdProperty(_1),_5;if(_3)return _3;if(_1){_5=_1.getSelectedRecord();if(!_5){if(_1.body){var _6=_1.body.getVisibleRows();_5=_6?_1.getRecord(_6[0]):_1.data.get(0)}else{_5=_1.data.get(0)}}}
if(!_5&&_2){_5={};for(var i=0;i<_2.length;i++){var _8=_2.get(i);if(_8.userFormula){_8.$65w=isc.FormulaBuilder.generateFunction(_8.userFormula,_2,_1);var _9=_8.$65w;_8.sortNormalizer=function(_5,_10,_11){return _9(_5,_11)}}
if(_8.$65w){isc.DataSource.setPathValue(_5,_8[_4],null,_8.$65w(_5,_1))}else if(_8.type)
if(isc.SimpleType.inheritsFrom(_8.type,"integer")||isc.SimpleType.inheritsFrom(_8.type,"float"))
{isc.DataSource.setPathValue(_5,_8[_4],null,1)}else{isc.DataSource.setPathValue(_5,_8[_4],null,_8[_4])}
else{isc.DataSource.setPathValue(_5,_8[_4],null,_8[_4])}}}
return _5},isc.A.generateFunction=function isc_c_FormulaBuilder_generateFunction(_1,_2,_3,_4,_5){if(_5==null)_5=true;var _6=isc.SB.create(),_7=_1.text,_8=this.getFieldIdProperty(_3),_9=this.getFieldDetailsFromValue(_7,_1.formulaVars,_2,_3,_1.allowEscapedKeys),_10=_9.usedFields,_11=_9.missingFields;isc.FormulaBuilder.sortFields(_10,false);if(_11.length==0){_6.append("var nullVars = [];\n");if(_10.length>0){for(var i=0;i<_10.length;i++){var _13=_10.get(i),_14=_13.mappingKey;var _15=_13[_8],_16="isc.DataSource.getPathValue(record,'"+_15+"', field)";_6.append("var ");_6.append("field=component==null?null:component.getField('",_15,"');","if (field==null && component && component.completeFields)","field=component.completeFields.find('name','",_15,"');","var ",_14,_13.userFormula?"=component?component.getFormulaFieldValue(field, record):"+_16:_13.userSummary?"=component?component.getSummaryFieldValue(field, record):"+_16:"="+_16,"\n;");_6.append("if (",_14," == null || (component && ",_14," == component.badFormulaResultValue) || (!component && ",_14," == '.')) nullVars.add('",_14,"');");if(_1.allowEscapedKeys){_7=this.handleKeyExp(_7,_14,"escaped",_14);_7=this.handleKeyExp(_7,_14,"braced",_14)}}
_6.append("\n")}
var _17=isc.MathFunction.getRegisteredFunctions();if(_17&&_17.length>0){_6.append("var functions=isc.MathFunction.getRegisteredFunctionIndex(),\n");for(var i=0;i<_17.length;i++){var _13=_17.get(i);_6.append("        ");_6.append(_13.name,"=","functions.",_13.name,".jsFunction");_6.append(i==_17.length-1?";":",","\n")}
_6.append("\n")}
if(_5){_6.append("try{\n")}
_6.append("var value=",_7,";");if(_5){var _18="Attempt to evaluate formulaFunction "+_7+" failed. Error message:";_6.append("\n} catch (e) { (component||isc).logWarn(",_18.asSource(true)," + e.message)}\n")}
_6.append((_4?null:"if (!isFinite(value) || nullVars.length > 0) return (component && component.badFormulaResultValue) || '.'; "),"return value;")}else{this.logWarn("Formula failed due to missing fields: "+_11.join(", ")+".");var _19=(_3&&_3.badFormulaResultValue)||".";if(_19)_19="'"+_19+"'";_6.append("return ",_19,";")}
var _20=_6.toString();var _21;if(_5){try{_21=isc.$aq("record,component",_20)}catch(e){this.logWarn("Error attempting to convert formula text '"+_7+"' to a function:"+e.message);_21=isc.$aq("record,component","return null;")}}else{_21=isc.$aq("record,component",_20)}
return _21},isc.A.remapBadVars=function isc_c_FormulaBuilder_remapBadVars(_1,_2,_3,_4){for(var i=0;i<_1.length;i++){var _6=_1[i],_7=_3.text||"";_3.text=this.handleKeyExp(_7,_6,"simple",_4);if(_3.allowEscapedKeys){_3.text=this.handleKeyExp(_3.text,_6,"escaped",_4);_3.text=this.handleKeyExp(_3.text,_6,"braced",_4)}
isc.logWarn("Formula variable "+_6+" refers to missing field "+_2[_6]);delete _2[_6]}});isc.B._maxIndex=isc.C+11;isc.ClassFactory.defineClass("SummaryBuilder","FormulaBuilder");isc.A=isc.SummaryBuilder.getPrototype();isc.A.builderTypeText="Summary";isc.A.fieldType="text";isc.A.autoHideCheckBoxLabel="Auto hide fields used in Summary";isc.A.helpTextIntro="Building Summary Columns";isc.A.allowBasicMultiCharKeys=false;isc.A=isc.SummaryBuilder.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.insertEscapedKeys=true;isc.B.push(isc.A.setSummary=function isc_SummaryBuilder_setSummary(_1){this.setValue(_1)},isc.A.setInitialValue=function isc_SummaryBuilder_setInitialValue(){if(this.editMode&&this.field.userSummary){this.initialValue=this.field.userSummary.text;if(this.field.userSummary.allowBasicMultiCharKeys){this.allowBasicMultiCharKeys=this.field.userSummary.allowBasicMultiCharKeys}}
this.initialValue=this.initialValue||"";this.setValue(this.initialValue)},isc.A.getUniqueFieldName=function isc_SummaryBuilder_getUniqueFieldName(){return this.getNewUniqueFieldName("summaryField")},isc.A.getHoverText=function isc_SummaryBuilder_getHoverText(){var _1=isc.SB.create(),_2=this.getTestRecord(),_3=this.getFieldIdProperty(),_4=this.getFieldFromMappingKey("A"),_5=_4[_3],_6=_4?_4.title||_4.name:null,_7=this.getFieldFromMappingKey("B"),_8=_7?_7[_3]:null,_9=_7?_7.title||_7.name:null;_1.append("<b>",this.helpTextIntro,"</b> <P>");_1.append("Summary columns are user-created fields that combine dynamic-values from other fields in the current record with static text specified by the user.<P>");_1.append("Dynamic-values are specified by prefixing a mapping-key from the table opposite with #");if(this.getFields().length>26)_1.append(", or by using #{key} when the key is 2 or more characters long,");_1.append(" and everything else is copied directly into the output.<P>");if(this.dataSource){_1.append("For example, in the current DataSource, key <b>A</b> maps to field <i>",_6,"</i> and <b>B</b> is <i>",!_7?"missing":_9,"</i>.<P>");_1.append("So, if we enter the Summary format-string as:<P>","<i>#A is relative to #B</i><P>","then example output using the current data would look like:<P>");if(_2){var _10,_11;if(!_7)_11="{missing}";if(!this.component){_10=_2[_5];if(_7)_11=_2[_8]}else{var _12=this.component,_13=_12.shouldIncludeHiliteInSummaryField("sample",_5);_10=_13?_12.getStandaloneFieldValue(_2,_5):_12.getFormattedValue(_2,_5,_12.getRawValue(_2,_5));if(_7){var _14=_12.shouldIncludeHiliteInSummaryField("sample",_8);_11=_14?_12.getStandaloneFieldValue(_2,_8):_12.getFormattedValue(_2,_8,_12.getRawValue(_2,_8))}}
_1.append("<i>",_10," is relative to ",_11,"</i><P>")}}
return _1.toString()},isc.A.getAvailableFields=function isc_SummaryBuilder_getAvailableFields(){if(this.availableFields)return this.availableFields;var _1=this.availableFields=[],_2=this.field,_3=this.getFields();if(!_3)return _1;for(var i=0,j=0;i<_3.getLength();i++){var _6=isc.addProperties({},_3.get(i));if(_2){if(_2.name==_6.name)continue;if(_6.userSummary){var _7=false,_8=_6.userSummary.summaryVars||{};for(var _9 in _8){if(_8[_9]==_2.name){_7=true;break}}
if(_7)continue}}
_6.originalOrder=i;_6.mappingKey=isc.FormulaBuilder.mappingKeyForIndex(j++);if(!_6.title)_6.title=isc.DataSource.getAutoTitle(_6.name);_1.add(_6)}
var _8=_2&&_2.userSummary?_2.userSummary.summaryVars:{};var _10=[];for(var _11 in _8){var _12=_1.find("mappingKey",_11),_13=_1.find("name",_8[_11]);if(_13==null){_10.add(_11);continue}
if(_12)_12.mappingKey=_13.mappingKey;_13.mappingKey=_11}
if(_10.length>0){var _14=this.component&&this.component.missingSummaryFieldValue||"-";isc.SummaryBuilder.remapBadVars(_10,_8,_2.userSummary,_14)}
isc.FormulaBuilder.sortFields(_1,true);isc.SummaryBuilder.applyHeaderSpanTitles(this,_1);return _1},isc.A.getUsedFields=function isc_SummaryBuilder_getUsedFields(_1){var _2=[],_3=this.getValue(),_4=this.allowBasicMultiCharKeys,_5=this.getAvailableFields().duplicate();isc.FormulaBuilder.sortFields(_5,!!_1);for(var i=0;i<_5.length;i++){var _7=_5.get(i);if(isc.SummaryBuilder.fieldIsUsed(_3,_7.mappingKey,_4)){_2.add(_7)}}
return _2},isc.A.getCompleteValueObject=function isc_SummaryBuilder_getCompleteValueObject(){var _1=this.getUsedFields(),_2=this.generateFunction(),_3=this.getFieldIdProperty(),_4=function(_8,_9,_10){return _2(_8,_10)},_5={sortNormalizer:_4,$652:_2,type:this.fieldType,userSummary:{text:this.getValue()}};if(this.allowBasicMultiCharKeys)_5.userSummary.allowBasicMultiCharKeys=true;if(_1&&_1.length>0){_5.userSummary.summaryVars={};for(var i=0;i<_1.length;i++){var _7=_1.get(i);_5.userSummary.summaryVars[_7.mappingKey]=_7[_3]}}
return _5},isc.A.getBasicValueObject=function isc_SummaryBuilder_getBasicValueObject(){var _1=this.getUsedFields(),_2=this.getFieldIdProperty(),_3={text:this.getValue(),summaryVars:{}};if(this.allowBasicMultiCharKeys)_3.allowBasicMultiCharKeys=true;for(var i=0;i<_1.length;i++){var _5=_1.get(i);_3.summaryVars[_5.mappingKey]=_5[_2]}
return _3},isc.A.generateFunction=function isc_SummaryBuilder_generateFunction(){return this.getClass().generateFunction(this.getBasicValueObject(),this.getUsedFields(),this.component)},isc.A.initWidget=function isc_SummaryBuilder_initWidget(){this.Super("initWidget",arguments)});isc.B._maxIndex=isc.C+10;isc.A=isc.SummaryBuilder;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.testFunction=function isc_c_SummaryBuilder_testFunction(_1,_2,_3,_4,_5){var _6={},_7=this.getFieldIdProperty(_3);try{_6.component=_3;_6.record=this.getTestRecord(_3,_4,_5);if(_2.text==""){_6.emptyTestValue=true;return _6}
_6.jsFunction=this.generateFunction(_2,_4,_3);_6.result=_6.jsFunction(_6.record,_1[_7],_3)}catch(err){if(!_6.jsFunction)_6.failedGeneration=true;_6.failedExecution=true;_6.errorText=err.message}
return _6},isc.A.fieldIsUsed=function isc_c_SummaryBuilder_fieldIsUsed(_1,_2,_3){if(!_1||!_2)return false;if(this.handleKeyExp(_1,_2,"braced"))return true;if(_2.length>1&&!_3)return false;return this.handleKeyExp(_1,_2,"escaped")},isc.A.generateFunction=function isc_c_SummaryBuilder_generateFunction(_1,_2,_3){var _4=isc.SB.create(),_5=_1.text,_6=this.getFieldIdProperty(_3),_7=_1.allowBasicMultiCharKeys,_8=this.getFieldDetailsFromValue(_5,_1.summaryVars,_2,_3,_7),_9=_8.usedFields,_10=_8.missingFields;isc.FormulaBuilder.sortFields(_9,false);if(_9.length>0){for(var i=0;i<_9.length;i++){var _12=_9.get(i),_13=_12[_6],_14="isc.DataSource.getPathValue(record,'"+_13+"')";_4.append("var includeHilites = component ? ","component.shouldIncludeHiliteInSummaryField(fieldName,'",_13,"') :","false;\n");_4.append("var ");_4.append(_12.mappingKey,"= (component ?","(includeHilites ? ","component.getStandaloneFieldValue(record, '",_13,"') :","component.getFormattedValue(record, '",_13,"',component.getRawValue(record,'",_13,"'))) :",_12.userFormula?"component?component.getFormulaFieldValue(field, record):"+_14:_12.userSummary?"component?component.getSummaryFieldValue(field, record):"+_14:_14,")\n");_4.append(";\n");var _15="'+"+_12.mappingKey+"+'";_5=this.handleKeyExp(_5,_12.mappingKey,"braced",_15);if(_12.mappingKey.length==1||_1.allowBasicMultiCharKeys){_5=this.handleKeyExp(_5,_12.mappingKey,"escaped",_15)}}
_4.append("\n")}
var _16=_3&&_3.missingSummaryFieldValue||"-";_5=_5.replace(/#(\{[A-Z][A-Z]?\}|[A-Z])/g,_16);if(_1.allowBasicMultiCharKeys){_5=_5.replace(/#([A-Z][A-Z]?)/g,_16)}
if(_5.substr(0,2)=="'+"){_5=_5.substr(2)}else if(_5.substr(0,1)!="'"){_5="'"+_5}
if(_5.substr(_5.length-2)=="+'"){_5=_5.substr(0,_5.length-2)}else if(_5.substr(_5.length-1)!="'"){_5=_5+"'"}
_4.append("return ",_5,";");var _17=_4.toString(),_18=isc.$aq("record,fieldName,component",_17);return _18},isc.A.remapBadVars=function isc_c_SummaryBuilder_remapBadVars(_1,_2,_3,_4){for(var i=0;i<_1.length;i++){var _6=_1[i],_7=_3.text||"";_3.text=this.handleKeyExp(_7,_6,"braced",_4);if(_6.length==1||_3.allowBasicMultiCharKeys){_3.text=this.handleKeyExp(_3.text,_6,"escaped",_4)}
isc.logWarn("Summary variable "+_6+" refers to missing field "+_2[_6]);delete _2[_6]}});isc.B._maxIndex=isc.C+4;isc.defineClass("HiliteRule","HLayout");isc.A=isc.HiliteRule.getPrototype();isc.A.height=1;isc.A.overflow="visible";isc.A.clauseConstructor="FilterClause";isc.A.clauseDefaults={fieldPickerWidth:"*",overflow:"visible",clauseDefaults:{canEditField:function(){return true}},operatorPickerWidth:140,valueItemWidth:130,excludeNonFilterableFields:false,getDefaultOptionDataSource:function(_1){if(this.creator&&this.creator.rootDataSource){return this.creator.rootDataSource}
var _2=this.dataSource;if(_2&&_2.isHiliteCriteriaDS)return null;return _2}};isc.A.hiliteFormDefaults={_constructor:"DynamicForm",numCols:6,colWidths:[60,60,60,60,60,40],width:300};isc.A.colorFieldTitle="Color";isc.A.advancedClauseLayoutDefaults={_constructor:"HLayout",height:1,overflow:"visible"};isc.A.advancedClauseLabelDefaults={_constructor:"Label",autoParent:"advancedClauseLayout",width:"*",overflow:"hidden",height:18,valign:"center",wrap:false,padding:1};isc.A.advancedClauseEditButtonDefaults={_constructor:"ImgButton",autoParent:"advancedClauseLayout",width:18,height:18,layoutAlign:"center",src:"[SKINIMG]/actions/edit.png",showRollOver:false,showDown:false,showDisabled:false,click:function(){this.creator.editAdvancedRule()}};isc.A.showRemoveButton=true;isc.A.removeButtonPrompt="Remove";isc.A.removeButtonDefaults={_constructor:isc.ImgButton,width:18,height:18,layoutAlign:"center",src:"[SKIN]/actions/remove.png",showRollOver:false,showDown:false,showDisabled:false,hoverWidth:80,click:function(){this.creator.remove()}};isc.A.foregroundColorTitle="Text";isc.A.backgroundColorTitle="Background";isc.A.iconFieldTitle="Icon";isc.A.iconFieldDefaults={type:"SelectItem",width:"*",defaultValue:"",valueMap:{"":""},valueIcons:{"":"[SKINIMG]/blank.gif"},disabled:true,showIf:function(){return!this.isDisabled()}};isc.A=isc.HiliteRule.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.initWidget=function isc_HiliteRule_initWidget(){if(!this.isAdvanced&&this.hilite){var _1=this.hilite.criteria;if(_1&&_1.criteria&&isc.isAn.Array(_1.criteria))
this.isAdvanced=true}
if(isc.isA.String(this.dataSource))this.dataSource=isc.DS.getDataSource(this.dataSource);if(this.hilite)this.checkHiliteProperties(this.hilite);if(this.isAdvanced){var _2=isc.DataSource.getAdvancedCriteriaDescription(this.hilite.criteria,this.dataSource);var _3=(_2.indexOf(isc.FilterBuilder.missingFieldPrompt)>=0);this.membersMargin=2;this.addAutoChild("advancedClauseLayout");this.addAutoChild("removeButton",{autoParent:"advancedClauseLayout"});this.addAutoChild("advancedClauseLabel",{contents:_2,prompt:_2,disabled:_3?true:false});this.addAutoChild("advancedClauseEditButton",{disabled:_3?true:false})}else{var _4=this.dataSource.getField(this.fieldName);if(_4==null)_4=this.dataSource.getFieldForDataPath(this.fieldName);var _3=(_4==null);this.addAutoChild("clause",{dataSource:this.dataSource,fieldDataSource:this.fieldDataSource,field:this.dataSource.getField(this.fieldName),fieldName:this.fieldName,criterion:this.hilite?this.hilite.criteria:null,showRemoveButton:this.showRemoveButton,missingField:_3,remove:function(){this.creator.remove()}});this.addMember(this.clause);this.addAutoChild("hiliteForm",{disabled:_3?true:false,items:[{name:"textColor",title:this.foregroundColorTitle,type:"ColorItem",width:"*"},{name:"backgroundColor",title:this.backgroundColorTitle,type:"ColorItem",width:"*"}]});if(this.hilite){this.hiliteForm.setValues({textColor:this.hilite.textColor,backgroundColor:this.hilite.backgroundColor})}
var _5=this.clause.field;if(_5&&_5.type=="boolean"){var _6=this.hiliteForm.getItem("textColor");_6.disable()}
var _7=isc.addProperties({},this.iconFieldDefaults,this.iconFieldProperties,{name:"icon",title:this.iconFieldTitle});if(this.hiliteIcons){this.hiliteIcons.map(function(_8){_7.disabled=false;_7.valueMap[_8]="";_7.valueIcons[_8]=_8})}
var _8=this.hilite?this.hilite.icon:null;if(_8&&!_7.valueMap[_8]){_7.disabled=false;_7.valueMap[_8]="";_7.valueIcons[_8]=_8}
this.hiliteForm.addItem(_7);this.hiliteForm.setValue("icon",this.hilite?this.hilite.icon:"");this.addMember(this.hiliteForm);this.iconField=this.hiliteForm.getField("icon")}},isc.A.checkHiliteProperties=function isc_HiliteRule_checkHiliteProperties(_1){if(!_1)return;if(_1.cssText){var _2=_1.cssText.split(";");for(var i=0;i<_2.length;i++){var _4=_2[i],_5=_4.split(":");if(_5[0]=="textColor"&&!_1.textColor)
_1.textColor=_5[1];else if(_5[0]=="backgroundColor"&&!_1.backgroundColor)
_1.backgroundColor=_5[1]}}else if(_1.textColor||_1.backgroundColor){_1.cssText="";if(_1.textColor)
_1.cssText+="color:"+_1.textColor+";";if(_1.backgroundColor)
_1.cssText+="background-color:"+_1.backgroundColor+";"}},isc.A.remove=function isc_HiliteRule_remove(){this.markForDestroy()},isc.A.getHilite=function isc_HiliteRule_getHilite(){if(this.isAdvanced){return this.hilite}
if(this.missingField)return this.hilite;var _1=this.hilite=isc.addProperties(this.hilite||{},{fieldName:this.fieldName}),_2=this.hiliteForm.getValue("icon"),_3=this.hiliteForm.getValue("textColor"),_4=this.hiliteForm.getValue("backgroundColor"),_5=this.clause.getCriterion();if(!_5&&!_2&&!_3&&!_4){return null}
if(_5&&!_5._constructor)_5._constructor="AdvancedCriteria";_1.criteria=_5;_1.icon=_2;if(_3!=null||_4!=null)_1.cssText="";if(_3!=null){_1.textColor=_3;_1.cssText+="color:"+_3+";"}
if(_4!=null){_1.backgroundColor=_4;_1.cssText+="background-color:"+_4+";"}
if(this.hilite&&this.hilite.id)_1.id=this.hilite.id;return _1},isc.A.editAdvancedRule=function isc_HiliteRule_editAdvancedRule(){var _1=this.getID()+".editAdvancedRuleReply(hilite)";this.advancedHiliteDialog=isc.Window.create({title:isc.AdvancedHiliteEditor.getInstanceProperty("title"),width:Math.round(isc.Page.getWidth()/2),height:1,isModal:true,showModalMask:true,showResizer:true,autoSize:true,autoCenter:true,items:[isc.AdvancedHiliteEditor.create({width:"100%",height:"100%",dataSource:this.fieldDataSource?null:this.dataSource,fieldDataSource:this.fieldDataSource,rootDataSource:this.rootDataSource,hilite:this.hilite,hiliteIcons:this.hiliteIcons,hiliteCanReplaceValue:this.hiliteCanReplaceValue,hiliteReplaceValueFieldTitle:this.hiliteReplaceValueFieldTitle,callback:_1})]});this.advancedHiliteDialog.show()},isc.A.editAdvancedRuleReply=function isc_HiliteRule_editAdvancedRuleReply(_1){this.advancedHiliteDialog.hide();this.advancedHiliteDialog.markForDestroy();if(_1){this.hilite=_1;var _2=isc.DataSource.getAdvancedCriteriaDescription(this.hilite.criteria,this.dataSource);this.advancedClauseLabel.setContents(_2);this.advancedClauseLabel.setPrompt(_2)}});isc.B._maxIndex=isc.C+6;isc.defineClass("HiliteEditor","VLayout");isc.A=isc.HiliteEditor.getPrototype();isc.A.membersMargin=5;isc.A.mainLayoutDefaults={_constructor:"HLayout",membersMargin:5,overflow:"visible"};isc.A.fieldLayoutDefaults={_constructor:"VLayout",autoParent:"mainLayout",width:1,overflow:"visible"};isc.A.fieldListDefaults={_constructor:"ListGrid",height:"*",autoFitData:"both",autoFitMaxWidth:300,autoFitMaxRecords:5,selectionType:"none",showRollOver:true,width:1,autoFitFieldWidths:true,autoFitWidthApproach:"both",autoFitExpandField:"title",autoParent:"fieldLayout",showHoverComponents:true,detailField:"prompt",hoverMode:"detailField",canHover:true,recordClick:function(_1,_2){this.creator.addRule(_2)}};isc.A.availableFieldsColumnTitle="Available Fields";isc.A.ruleLayoutDefaults={_constructor:"VLayout",membersMargin:1,padding:1,overflow:"auto",autoParent:"mainLayout"};isc.A.hiliteRuleDefaults={_constructor:"HiliteRule"};isc.A.hiliteButtonsDefaults={layoutAlign:"right",_constructor:"HLayout",membersMargin:8,height:1};isc.A.hiliteButtonsSpacerDefaults={_constructor:"LayoutSpacer",width:"*",autoParent:"hiliteButtons"};isc.A.addAdvancedRuleButtonDefaults={_constructor:"IAutoFitButton",autoParent:"hiliteButtons",align:"center",height:22,click:function(){this.creator.addAdvancedRule()}};isc.A.addAdvancedRuleButtonTitle="Add Advanced Rule";isc.A.saveButtonDefaults={_constructor:"IAutoFitButton",autoParent:"hiliteButtons",click:function(){this.creator.saveHilites()}};isc.A.saveButtonTitle="Save";isc.A.cancelButtonDefaults={_constructor:"IAutoFitButton",autoParent:"hiliteButtons",click:function(){this.creator.completeEditing()}};isc.A.cancelButtonTitle="Cancel";isc.A.defaultWidth=900;isc.A.defaultHeight=300;isc.A=isc.HiliteEditor.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.initWidget=function isc_HiliteEditor_initWidget(){this.Super("initWidget",arguments);this.addAutoChildren(["mainLayout","fieldLayout"]);this.addAutoChild("fieldList",{fields:[{name:"name",showIf:"false"},{name:"title",title:this.availableFieldsColumnTitle}]});this.addAutoChildren(["ruleLayout","hiliteButtons","hiliteButtonsSpacer"]);this.addAutoChild("addAdvancedRuleButton",{title:this.addAdvancedRuleButtonTitle});this.addAutoChild("saveButton",{title:this.saveButtonTitle});this.addAutoChild("cancelButton",{title:this.cancelButtonTitle});this.setDataSource(this.dataSource);this.setHilites(this.hilites)},isc.A.setHiliteIcons=function isc_HiliteEditor_setHiliteIcons(_1){this.hiliteIcons=_1},isc.A.setDataSource=function isc_HiliteEditor_setDataSource(_1){this.dataSource=_1;if(this.fieldDataSource&&!this.fieldDataSource.$782){this.setupFieldList()}else if(this.dataSource){this.getClientOnlyFieldDS()}else{this.logWarn("No DataSource present, can't edit hilites")}
this.fieldList.markForRedraw()},isc.A.setFieldDataSource=function isc_HiliteEditor_setFieldDataSource(_1){this.fieldDataSource=_1;this.setupFieldList()},isc.A.setupFieldList=function isc_HiliteEditor_setupFieldList(){this.fieldList.showFilterEditor=true;this.fieldList.setDataSource(this.fieldDataSource);this.fieldList.setFields([{name:"name",showIf:"false"},{name:"title",title:this.availableFieldsColumnTitle},{name:"type",showIf:"false"},{name:"showInSimpleEditor",showIf:"false"}]);var _1={_constructor:"AdvancedCriteria",operator:"or",criteria:[{fieldName:"showInSimpleEditor",operator:"equals",value:true},{fieldName:"showInSimpleEditor",operator:"isNull"}]};this.fieldList.fetchData(_1)},isc.A.getClientOnlyFieldDS=function isc_HiliteEditor_getClientOnlyFieldDS(){var _1=isc.getValues(this.dataSource.getFields());var _2=[];for(var i=0;i<_1.length;i++){var _4=_1[i];if(!_4.hidden&&_4.canHilite!=false&&this.dataSource.fields[_4.name]!=null)
{if(_4.summaryTitle!=null){_4=isc.addProperties({},_4,{title:_4.summaryTitle})}
_2.add(_4)}}
this.fieldDataSource=isc.DataSource.create({$782:true,isClientOnlyFieldDS:true,fields:[{name:"name",showIf:"false"},{name:"title",title:this.availableFieldsColumnTitle},{name:"type",showIf:"false"},{name:"showInSimpleEditor",type:"boolean",showIf:"false"}],cacheData:_2,clientOnly:true});this.setupFieldList()},isc.A.addRule=function isc_HiliteEditor_addRule(_1){var _2=this.createAutoChild("hiliteRule",{rootDataSource:this.rootDataSource,width:"100%",fieldName:_1.dataPath||_1.name,dataSource:this.dataSource,fieldDataSource:this.fieldDataSource,hiliteIcons:this.hiliteIcons});this.showNewHilite(_2)},isc.A.removeRule=function isc_HiliteEditor_removeRule(_1){if(isc.isA.Number(_1))_1=this.ruleLayout.getMember(_1);if(!isc.isA.HiliteRule(_1))return;this.ruleLayout.members.remove(_1);_1.destroy()},isc.A.showNewHilite=function isc_HiliteEditor_showNewHilite(_1){this.ruleLayout.addMember(_1)},isc.A.addAdvancedRule=function isc_HiliteEditor_addAdvancedRule(){var _1=this.getID()+".addAdvancedRuleReply(hilite)";this.advancedHiliteDialog=isc.Window.create({title:isc.AdvancedHiliteEditor.getInstanceProperty("title"),width:Math.round(isc.Page.getWidth()/2),height:1,isModal:true,showModalMask:true,showResizer:true,canDragResize:true,autoSize:true,autoCenter:true,items:[isc.AdvancedHiliteEditor.create({width:"100%",height:"100%",rootDataSource:this.rootDataSource,dataSource:this.fieldDataSource&&!this.fieldDataSource.$782?null:this.dataSource,fieldDataSource:this.fieldDataSource,hiliteIcons:this.hiliteIcons,hiliteCanReplaceValue:this.hiliteCanReplaceValue,hiliteReplaceValueFieldTitle:this.hiliteReplaceValueFieldTitle,callback:_1})]});this.advancedHiliteDialog.show()},isc.A.addAdvancedRuleReply=function isc_HiliteEditor_addAdvancedRuleReply(_1){this.advancedHiliteDialog.hide();this.advancedHiliteDialog.markForDestroy();if(!_1)return;var _2=this.createAutoChild("hiliteRule",{rootDataSource:this.rootDataSource,width:"100%",isAdvanced:true,dataSource:this.dataSource,fieldDataSource:this.fieldDataSource,fieldName:_1.fieldName,hilite:_1,hiliteIcons:this.hiliteIcons,hiliteCanReplaceValue:this.hiliteCanReplaceValue,hiliteReplaceValueFieldTitle:this.hiliteReplaceValueFieldTitle});this.showNewHilite(_2)},isc.A.clearHilites=function isc_HiliteEditor_clearHilites(){for(var i=this.ruleLayout.members.length-1;i>=0;i--)
this.removeRule(this.ruleLayout.getMember(i))},isc.A.setHilites=function isc_HiliteEditor_setHilites(_1){_1=this.hilites=_1||[];this.$119b=this.hilites.duplicate();for(var i=0;i<_1.length;i++){var _3=_1[i],_4=_3.cssText?_3.cssText.replaceAll(" ",""):null,_5=_4?_4.split(";"):[""],_6=_3.textColor,_7=_3.backgroundColor;if(_4){for(var j=0;j<_5.length;j++){var _9=_5[j],_10=_9&&_9.length>0?_9.split(":"):[];if(_10&&_10[0]=="background-color"&&!_7){_3.backgroundColor=_10[1]}
if(_10&&_10[0]=="color"&&!_6){_3.textColor=_10[1]}}}
var _11=false;if(this.dataSource){var _12=isc.DataSource.getCriterionDescription(_3.criteria,this.dataSource);_11=_12.contains(isc.FilterBuilder.missingFieldPrompt)}
var _13=this.createAutoChild("hiliteRule",{rootDataSource:this.rootDataSource,fieldName:_3.fieldName,hilite:_3,dataSource:this.dataSource,fieldDataSource:this.fieldDataSource,missingField:_11,hiliteIcons:this.hiliteIcons});this.showNewHilite(_13)}},isc.A.saveHilites=function isc_HiliteEditor_saveHilites(_1){var _2=this.getHilites();if((!_2||_2.length==0)&&(!this.$119b||this.$119b.length==0))return;this.completeEditing(_2)},isc.A.getHilites=function isc_HiliteEditor_getHilites(){var _1=this.ruleLayout.members,_2=[];for(var i=0;i<_1.length;i++){var _4=_1[i],_5=_4.getHilite();if(_5==null)continue;_2.add(_5)}
return _2},isc.A.getHiliteState=function isc_HiliteEditor_getHiliteState(){var _1=this.getHilites();if(_1==null||_1.length==0)return null;return"("+isc.JSON.encode(_1,{dateFormat:"logicalDateConstructor"})+")"},isc.A.completeEditing=function isc_HiliteEditor_completeEditing(_1){if(this.logIsInfoEnabled())this.logInfo("returning hilites: "+isc.echoFull(_1));if(this.callback)this.fireCallback(this.callback,"hilites",[_1])});isc.B._maxIndex=isc.C+17;isc.defineClass("AdvancedHiliteEditor","VStack");isc.A=isc.AdvancedHiliteEditor.getPrototype();isc.A.padding=10;isc.A.membersMargin=10;isc.A.filterBuilderDefaults={_constructor:"FilterBuilder",isGroup:true,padding:8,maxHeight:200,overflow:"visible"};isc.A.filterGroupTitle="Filter";isc.A.hiliteFormDefaults={_constructor:"DynamicForm",isGroup:true,extraSpace:4,padding:8,width:"100%",numCols:8,colWidths:[200,150,100,150,100,150,40,50]};isc.A.appearanceGroupTitle="Appearance";isc.A.targetFieldsItemTitle="Target Field(s)";isc.A.hiliteButtonsDefaults={_constructor:isc.HLayout,membersMargin:8,height:1};isc.A.hiliteButtonsSpacerDefaults={_constructor:"LayoutSpacer",width:"*",autoParent:"hiliteButtons"};isc.A.saveButtonDefaults={_constructor:"IAutoFitButton",autoParent:"hiliteButtons",click:function(){this.creator.saveHilite()}};isc.A.saveButtonTitle="Save";isc.A.cancelButtonDefaults={_constructor:"IAutoFitButton",autoParent:"hiliteButtons",click:function(){this.creator.cancelEditing()}};isc.A.cancelButtonTitle="Cancel";isc.A.defaultWidth=900;isc.A.defaultHeight=600;isc.A.visibilityMode="multiple";isc.A.invalidHilitePrompt="Enter at least one rule, a color or icon, and a target field, or press 'Cancel' to abandon changes.";isc.A.title="Advanced Hilite Editor";isc.A.iconFieldDefaults=isc.HiliteRule.getInstanceProperty("iconFieldDefaults");isc.defer("isc.AdvancedHiliteEditor.addProperties({foregroundColorTitle: isc.HiliteRule.getInstanceProperty('foregroundColorTitle'),backgroundColorTitle: isc.HiliteRule.getInstanceProperty('backgroundColorTitle'),iconFieldTitle: isc.HiliteRule.getInstanceProperty('iconFieldTitle')})");isc.A=isc.AdvancedHiliteEditor.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.initWidget=function isc_AdvancedHiliteEditor_initWidget(){this.Super("initWidget",arguments);var _1=this.getDataSource(),_2=this;this.addAutoChild("filterBuilder",{groupTitle:this.filterGroupTitle,dataSource:_1,fieldDataSource:this.fieldDataSource,inheritedClauseProperties:{rootDataSource:this.rootDataSource,getDefaultOptionDataSource:function(_12){if(this.rootDataSource){return this.rootDataSource}
var _1=this.Super("getDefaultOptionDataSource",arguments);if(_1&&_1.isHiliteCriteriaDS)return null;return _1}},fieldNameChanged:function(_14){this.Super("fieldNameChanged",arguments);_2.fieldChosen(_14.getFieldName(true))}});var _3=isc.addProperties({},this.iconFieldDefaults,this.iconFieldProperties,{name:"icon",title:this.iconFieldTitle});if(this.hiliteIcons){this.hiliteIcons.map(function(_4){_3.disabled=false;_3.valueMap[_4]="";_3.valueIcons[_4]=_4})}
var _4=this.hilite?this.hilite.icon:null;if(_4&&!_3.valueMap[_4]){_3.disabled=false;_3.valueMap[_4]="";_3.valueIcons[_4]=_4}
var _5=[{title:this.targetFieldsItemTitle,name:"fieldName",multiple:true,allowMultiSelect:true,type:"select"},{title:this.foregroundColorTitle,name:"textColor",type:"color"},{title:this.backgroundColorTitle,name:"backgroundColor",type:"color"},_3];var _6={groupTitle:this.appearanceGroupTitle};if(this.hiliteCanReplaceValue){_6.numCols=10;_6.colWidths=[200,150,100,150,150,150,100,150,40,50];if(this.hiliteReplaceValueFieldTitle==null){this.hiliteReplaceValueFieldTitle=isc.ListGrid.getInstanceProperty("hiliteReplaceValueFieldTitle")}
_5.addAt({title:this.hiliteReplaceValueFieldTitle,name:"replacementValue",type:"text"},2)}
var _7=this.addAutoChild("hiliteForm",_6);this.iconField=_7.getField("icon");if(this.fieldDataSource){_5[0]=isc.addProperties({},_5[0],{valueField:"name",displayField:"title",optionDataSource:this.fieldDataSource,optionCriteria:{_constructor:"AdvancedCriteria",operator:"or",criteria:[{fieldName:"showInSimpleEditor",operator:"equals",value:true},{fieldName:"showInSimpleEditor",operator:"isNull"}]}});delete _5[0].defaultDynamicValue;this.hiliteForm.addItems(_5)}else{var _8=this.fieldNames||_1.getFieldNames(),_9=this.fieldMap={};for(var i=0;i<_8.length;i++){var _11=_8[i],_12=_1.getField(_11),_13=_12.title;if(_12.hidden)continue;_13=_13?_13:_11;_9[_11]=_13}
this.fieldMap=_9;_5[0].valueMap=_9;this.hiliteForm.addItems(_5)}
this.addAutoChildren(["hiliteButtons","hiliteButtonsSpacer"]);this.addAutoChild("saveButton",{title:this.saveButtonTitle});this.addAutoChild("cancelButton",{title:this.cancelButtonTitle});this.addMembers([this.filterBuilder,this.hiliteForm,this.hiliteButtons]);if(this.hilite!=null){this.filterBuilder.setCriteria(this.hilite.criteria);this.hiliteForm.editRecord(this.hilite)}},isc.A.fieldChosen=function isc_AdvancedHiliteEditor_fieldChosen(_1){if(_1&&this.hiliteForm.getValue("fieldName")==null){this.hiliteForm.setValue("fieldName",_1)}},isc.A.saveHilite=function isc_AdvancedHiliteEditor_saveHilite(){this.hiliteForm.setValue("criteria",this.filterBuilder.getCriteria());var _1=this.hiliteForm.getValues();if(_1.criteria.criteria==null||_1.criteria.criteria.length==0||(!_1.textColor&&!_1.backgroundColor&&!_1.icon&&!_1.replacementValue)||_1.fieldName==null)
{isc.say(this.invalidHilitePrompt);return}
var _2="";if(_1.textColor&&_1.textColor!=""){_2+="color:"+_1.textColor+";"}
if(_1.backgroundColor&&_1.backgroundColor!=""){_2+="background-color:"+_1.backgroundColor+";"}
_1.cssText=_2;if(this.hilite&&this.hilite.id)_1.id=this.hilite.id;this.completeEditing(_1)},isc.A.cancelEditing=function isc_AdvancedHiliteEditor_cancelEditing(){this.completeEditing(null)},isc.A.completeEditing=function isc_AdvancedHiliteEditor_completeEditing(_1){if(this.callback)this.fireCallback(this.callback,["hilite"],[_1])});isc.B._maxIndex=isc.C+5;isc.defineClass("MultiGroupPanel","Layout");isc.A=isc.MultiGroupPanel.getPrototype();isc.A.vertical=true;isc.A.overflow="visible";isc.A.addLevelButtonTitle="Add Level";isc.A.deleteLevelButtonTitle="Delete Level";isc.A.copyLevelButtonTitle="Copy Level";isc.A.invalidListPrompt="Columns may only be used once: '\${title}' is used multiple times.";isc.A.propertyFieldTitle="Column";isc.A.groupingFieldTitle="Grouping";isc.A.firstGroupLevelTitle="Group by";isc.A.otherGroupLevelTitle="Then by";isc.A.topLayoutDefaults={_constructor:"HLayout",overflow:"visible",height:22,align:"left",membersMargin:5,extraSpace:5};isc.A.addLevelButtonDefaults={_constructor:"IButton",icon:"[SKINIMG]actions/add.png",autoFit:true,height:22,showDisabled:false,autoParent:"topLayout",click:"this.creator.addLevel()"};isc.A.deleteLevelButtonDefaults={_constructor:"IButton",icon:"[SKINIMG]actions/remove.png",autoFit:true,height:22,showDisabled:false,autoParent:"topLayout",click:"this.creator.deleteSelectedLevel()"};isc.A.copyLevelButtonDefaults={_constructor:"IButton",icon:"[SKINIMG]RichTextEditor/copy.png",autoFit:true,height:22,showDisabled:false,autoParent:"topLayout",click:"this.creator.copySelectedLevel()"};isc.A.levelUpButtonTitle="Move Level Up";isc.A.levelUpButtonDefaults={_constructor:"ImgButton",src:"[SKINIMG]TransferIcons/up.png",height:22,width:24,imageType:"center",showDisabled:false,showRollOver:false,showDown:false,showFocused:false,autoParent:"topLayout",click:"this.creator.moveSelectedLevelUp()"};isc.A.levelDownButtonTitle="Move Level Down";isc.A.levelDownButtonDefaults={_constructor:"ImgButton",src:"[SKINIMG]TransferIcons/down.png",height:22,width:24,imageType:"center",showDisabled:false,showRollOver:false,showDown:false,showFocused:false,autoParent:"topLayout",click:"this.creator.moveSelectedLevelDown()"};isc.A.optionsGridDefaults={_constructor:"ListGrid",width:"100%",height:"*",canSort:false,canReorderFields:false,canResizeFields:false,canEdit:true,canEditNew:true,selectionType:"single",selectionProperty:"$73s",canEditCell:function(_1,_2){var _3=this.getRecord(_1);if(_2==2){if(!this.creator.verifyGroupingModeAvailableField(_3,_1))return false}
return this.Super("canEditCell",arguments)},recordDoubleClick:function(_1,_2,_3,_4,_5,_6,_7){this.creator.getGroupingModeAvailableField(_2,_3)},defaultFields:[{name:"groupSequence",title:"&nbsp;",showTitle:false,canEdit:false,width:80,canHide:false,showDefaultContextMenu:false,formatCellValue:function(_1,_2,_3,_4,_5){return _3==0?_5.creator.firstGroupLevelTitle:_5.creator.otherGroupLevelTitle}},{name:"property",title:" ",type:"select",defaultToFirstOption:true,showDefaultContextMenu:false,changed:"item.grid.creator.getGroupingModeAvailableField(null, null)"},{name:"grouping",title:" ",width:100,showDefaultContextMenu:false,defaultToFirstOption:true,type:"text",editorType:"select",displayField:"groupingTitle",changed:function(_1,_2,_3){var _4=_2.valueMap||_2.editorValueMap;_1.setValue("groupingTitle",_4[_3])}},{name:"groupingTitle",showIf:"false",showDefaultContextMenu:false}],recordClick:function(_1,_2,_3){this.creator.setButtonStates()},bodyKeyPress:function(_1){if(_1.keyName=="Delete"&&this.anySelected())this.removeSelectedData();else this.Super("bodyKeyPress",arguments)},extraSpace:5};isc.A.propertyFieldNum=1;isc.A.directionFieldNum=2;isc.A.topAutoChildren=["topLayout","addLevelButton","deleteLevelButton","copyLevelButton"];isc.A=isc.MultiGroupPanel.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.getNumLevels=function isc_MultiGroupPanel_getNumLevels(){return this.optionsGrid.data.length},isc.A.getGroup=function isc_MultiGroupPanel_getGroup(){var _1=this.optionsGrid,_2=_1.data.duplicate(),_3=_1.getEditRow(),_4=isc.isA.Number(_3)?_1.getEditValues(_3):null;if(_4)_2[_3]=isc.addProperties(_2[_3],_4);return this.getGroupSpecifiers(_2)},isc.A.validate=function isc_MultiGroupPanel_validate(){var _1=this.optionsGrid,_2=_1.data,_3=[];for(var i=0;i<_2.length;i++){var _5=_2.get(i);if(_3.contains(_5.property)){var _6=this,_7=this.optionsGrid.getField("property").valueMap[_5.property],_8=this.invalidListPrompt.evalDynamicString(this,{title:_7});isc.warn(_8,function(){_6.recordFailedValidation(_5,i)});return false}
_3.add(_5.property)}
return true},isc.A.recordFailedValidation=function isc_MultiGroupPanel_recordFailedValidation(_1){var _2=this.optionsGrid,_3=(isc.isA.Number(_1)?_1:_2.getRecordIndex(_1)),_1=(!isc.isA.Number(_1)?_1:_2.data.get(_1));_2.selectSingleRecord(_1);_2.startEditing(_3,1)},isc.A.getGroupSpecifiers=function isc_MultiGroupPanel_getGroupSpecifiers(_1){return this.optionsGrid.removeSelectionMarkers(_1)},isc.A.setInitialGrouping=function isc_MultiGroupPanel_setInitialGrouping(_1){for(var i=0;i<_1.length;i++){var _3=_1[i];if(_3.grouping){var _4=this.fields.find("name",_3.property),_5=this.$117p(_4)||{};_3.groupingTitle=_5[_3.grouping]}}
this.optionsGrid.setData(_1)},isc.A.initWidget=function isc_MultiGroupPanel_initWidget(){this.Super("initWidget",arguments);this.$74x=this.maxLevels;this.addAutoChildren(this.topAutoChildren);this.addAutoChild("levelUpButton",{prompt:this.levelUpButtonTitle});this.addAutoChild("levelDownButton",{prompt:this.levelDownButtonTitle});this.addAutoChild("optionsGrid");this.setGroupFields();this.setGroupingMode();this.setButtonTitles();this.addMember(this.topLayout);this.addMember(this.optionsGrid);this.setButtonStates();if(this.initialGrouping)this.setInitialGrouping(this.initialGrouping);else this.addLevel()},isc.A.setButtonTitles=function isc_MultiGroupPanel_setButtonTitles(_1){if(this.addLevelButton)this.addLevelButton.setTitle(this.addLevelButtonTitle);if(this.deleteLevelButton)this.deleteLevelButton.setTitle(this.deleteLevelButtonTitle);if(this.copyLevelButton)this.copyLevelButton.setTitle(this.copyLevelButtonTitle)},isc.A.setButtonStates=function isc_MultiGroupPanel_setButtonStates(){var _1=this.getNumLevels(),_2=this.maxLevels,_3=this.optionsGrid,_4=_3.anySelected(),_5=_3.getRecordIndex(_3.getSelectedRecord());if(this.addLevelButton)this.addLevelButton.setDisabled(_1>=_2);if(this.deleteLevelButton)this.deleteLevelButton.setDisabled(!_4);if(this.copyLevelButton)this.copyLevelButton.setDisabled(!_4||_1>=_2);if(this.levelUpButton)this.levelUpButton.setDisabled(!_4||_5==0);if(this.levelDownButton)this.levelDownButton.setDisabled(!_4||_5==_1-1)},isc.A.setFields=function isc_MultiGroupPanel_setFields(_1){if(isc.DataSource&&isc.isA.DataSource(_1))_1=isc.getValues(_1.getFields());this.fields=_1;this.setGroupFields();this.optionsGrid.refreshFields();this.setButtonStates()},isc.A.setGroupFields=function isc_MultiGroupPanel_setGroupFields(){var _1=[];this.optionsGrid.getField("property").title=this.propertyFieldTitle;if(!this.fields)return;for(var i=0;i<this.fields.length;i++){var _3=this.fields[i];if(this.optionsGrid.$58g(_3))_1.add(_3)}
this.fields=_1;var _4=this.optionsGrid,_5=this.fields?this.fields.getValueMap(_4.fieldIdProperty,"title"):{none:"No fields"},_6=isc.getKeys(_5).length;for(var _7 in _5){if(isc.DataSource&&(!_5[_7]||isc.isAn.emptyString(_5[_7])))
_5[_7]=isc.DataSource.getAutoTitle(_7)}
this.optionsGrid.setValueMap("property",_5);if(!this.$74x||this.maxLevels>_6)this.maxLevels=_6},isc.A.setGroupingMode=function isc_MultiGroupPanel_setGroupingMode(){var _1=this.optionsGrid.getField("grouping");_1.title=this.groupingFieldTitle;_1.valueMap=this.getGroupingModeFirstItem()},isc.A.getGroupingModeFirstItem=function isc_MultiGroupPanel_getGroupingModeFirstItem(){var _1=this.optionsGrid.getField("grouping");var _2=this.fields[0],_3=this.$117p(_2);_1.editorValueMap=this.$117p(_2)},isc.A.$117p=function isc_MultiGroupPanel__getFieldGroupingModes(_1){if(!_1)return;if(!this.$117q)this.$117q={};var _2=this.$117q[_1.name];if(!_2){_2=_1.groupingModes?_1.groupingModes:(!_1.getGroupValue?(_1.$62?(_1.$62.getGroupingModes?_1.$62.getGroupingModes():_1.$62.groupingModes):false):false);this.$117q[_1.name]=_2}
return _2},isc.A.getGroupingModeAvailableField=function isc_MultiGroupPanel_getGroupingModeAvailableField(_1,_2){var _3=this.optionsGrid,_4=_3.getEditRow(),_5=isc.isA.Number(_4)?_3.getEditValues(_4):null;var _6=(_2==null)?_4:_2;var _7=(_1==null)?_5.property:_1.property;for(var i=0;i<this.fields.length;i++){var _9=this.fields[i];if(_7==_9.name){var _10=this.$117p(_9);if(_10!=null){_3.setValueMap("grouping",_10);if(_2==null){if(_9.groupingMode!=null){_3.setEditValue(_6,2,_9.groupingMode)}else if(_9.defaultGroupingMode!=null){_3.setEditValue(_6,2,_9.defaultGroupingMode)}else{_3.setEditValue(_6,2,_10[0])}
_3.refreshCell(_6,2)}}else{_3.setEditorValueMap("grouping",null);_3.setEditValue(_6,2,null);_3.refreshCell(_6,2)}
break}}},isc.A.verifyGroupingModeAvailableField=function isc_MultiGroupPanel_verifyGroupingModeAvailableField(_1,_2){var _3=this.optionsGrid,_4=isc.isA.Number(_2)?_3.getEditValues(_2):null;var _5=(typeof _4.property==='undefined')?_1.property:_4.property;for(var i=0;i<this.fields.length;i++){var _7=this.fields[i];if(_5==_7.name){var _8=this.$117p(_7);if(_8!=null){var _9=isc.getKeys(_8).length;if(_9==1){return false}else{return true}}else{return false}}}
return true},isc.A.addLevel=function isc_MultiGroupPanel_addLevel(){var _1=this.optionsGrid,_2=_1.getRecordIndex(_1.getSelectedRecord()),_3=_1.getField("property"),_4=_2>=0?_2+1:_1.data.length,_5={property:isc.firstKey(_3.valueMap)};_1.data.addAt(_5,_4);this.editRecord(_4);this.setButtonStates();this.fireChangeEvent();this.getGroupingModeAvailableField(_5,null)},isc.A.deleteSelectedLevel=function isc_MultiGroupPanel_deleteSelectedLevel(){var _1=this.optionsGrid,_2=_1.getRecordIndex(_1.getSelectedRecord());if(_2>=0){_1.data.removeAt(_2);this.setButtonStates();this.fireChangeEvent()}},isc.A.copySelectedLevel=function isc_MultiGroupPanel_copySelectedLevel(){var _1=this.optionsGrid,_2=_1.getEditRow(),_3=_1.getRecordIndex(_1.getSelectedRecord()),_4=isc.shallowClone(_1.getRecord(_3));if(_3>=0){_1.data.addAt(_4,_3+1);this.editRecord(_3+1);this.setButtonStates();this.fireChangeEvent();this.getGroupingModeAvailableField(_4,null);_1.setEditValue(_3+1,2,_4.grouping);_1.refreshCell(_3+1,2)}},isc.A.editRecord=function isc_MultiGroupPanel_editRecord(_1){this.optionsGrid.selectSingleRecord(_1);this.optionsGrid.startEditing(_1,this.propertyFieldNum)},isc.A.moveSelectedLevelUp=function isc_MultiGroupPanel_moveSelectedLevelUp(){var _1=this.optionsGrid,_2=_1.getRecordIndex(_1.getSelectedRecord());if(_2>0){_1.data.slide(_2,_2-1);this.setButtonStates();this.fireChangeEvent();this.optionsGrid.selectSingleRecord(_2-1)}},isc.A.moveSelectedLevelDown=function isc_MultiGroupPanel_moveSelectedLevelDown(){var _1=this.optionsGrid,_2=_1.getRecordIndex(_1.getSelectedRecord());if(_2>=0&&_2<_1.data.length-1){_1.data.slide(_2,_2+1);this.setButtonStates();this.fireChangeEvent();this.optionsGrid.selectSingleRecord(_2+1)}},isc.A.fireChangeEvent=function isc_MultiGroupPanel_fireChangeEvent(){this.groupChanged(isc.shallowClone(this.getGroup()))},isc.A.groupChanged=function isc_MultiGroupPanel_groupChanged(_1){});isc.B._maxIndex=isc.C+24;isc.defineClass("MultiGroupDialog","Window");isc.A=isc.MultiGroupDialog;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.askForGrouping=function isc_c_MultiGroupDialog_askForGrouping(_1,_2,_3){var _4=isc.isAn.Array(_1)?_1:isc.DataSource&&isc.isA.DataSource(_1)?isc.getValues(_1.getFields()):isc.isA.DataBoundComponent(_1)?_1.getFields():null;if(!_4)return;var _5=[];if((typeof _2==='undefined')||(_2==null)){_5=_2}else{for(var i=0;i<_2.length;i++){var _7=_2[i];for(var _8=0;_8<_4.length;_8++){var _9=_4[_8];if(_7==_9.name){var _10={property:_9.name,grouping:_9.groupingMode};_5.add(_10)}}}}
var _11={autoDraw:true,fields:_4,initialGrouping:_5,callback:_3};isc.MultiGroupDialog.create(_11)});isc.B._maxIndex=isc.C+1;isc.A=isc.MultiGroupDialog.getPrototype();isc.A.isModal=true;isc.A.width=500;isc.A.height=250;isc.A.vertical=true;isc.A.autoCenter=true;isc.A.showMinimizeButton=false;isc.A.mainLayoutDefaults={_constructor:"VLayout",width:"100%",height:"100%",layoutMargin:5};isc.A.multiGroupPanelDefaults={_constructor:"MultiGroupPanel",width:"100%",height:"*",autoParent:"mainLayout"};isc.A.title="Group";isc.A.applyButtonTitle="Apply";isc.A.cancelButtonTitle="Cancel";isc.A.bottomLayoutDefaults={_constructor:"HLayout",width:"100%",height:22,align:"right",membersMargin:5,autoParent:"mainLayout"};isc.A.applyButtonDefaults={_constructor:"IButton",autoFit:true,height:22,autoParent:"bottomLayout",click:"this.creator.apply()"};isc.A.cancelButtonDefaults={_constructor:"IButton",autoFit:true,height:22,autoParent:"bottomLayout",click:"this.creator.cancel()"};isc.A.bottomAutoChildren=["bottomLayout","applyButton","cancelButton"];isc.A=isc.MultiGroupDialog.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$783=["fields","initialGrouping","maxLevels","invalidListPrompt","addLevelButtonTitle","addLevelButtonDefaults","addLevelButtonProperties","deleteLevelButtonTitle","deleteLevelButtonDefaults","deleteLevelButtonProperties","levelUpButtonTitle","levelDownButtonTitle","copyLevelButtonTitle","copyLevelButtonDefaults","copyLevelButtonProperties","optionsGridDefaults","optionsGridProperties","firstGroupLevelTitle","propertyFieldTitle","groupingFieldTitle","otherGroupLevelTitle"];isc.A.$105k=["addLevelButtonTitle","deleteLevelButtonTitle","levelUpButtonTitle","levelDownButtonTitle","copyLevelButtonTitle","firstGroupLevelTitle","propertyFieldTitle","groupingFieldTitle","otherGroupLevelTitle","invalidListPrompt"];isc.A.$105l=["applyButtonTitle","cancelButtonTitle","title"];isc.B.push(isc.A.initWidget=function isc_MultiGroupDialog_initWidget(){this.Super("initWidget",arguments);this.copyUnsetProperties();this.addAutoChild("mainLayout");this.addAutoChild("multiGroupPanel",this.getPassthroughProperties());this.addAutoChildren(this.bottomAutoChildren);this.addItem(this.mainLayout);this.optionsGrid=this.multiGroupPanel.optionsGrid;this.setButtonStates()},isc.A.getPassthroughProperties=function isc_MultiGroupDialog_getPassthroughProperties(){var _1=this.$783,_2={};for(var i=0;i<_1.length;i++){var _4=_1[i];if(this[_4]!=null)_2[_4]=this[_4]}
return _2},isc.A.copyUnsetProperties=function isc_MultiGroupDialog_copyUnsetProperties(){var _1=this.$105k,_2={};for(var i=0;i<_1.length;i++){var _4=_1[i];if(isc.MultiGroupPanel.getInstanceProperty(_4)==null){_2[_4]=isc.MultiSortPanel.getInstanceProperty(_4)}}
isc.MultiGroupPanel.addProperties(_2);_1=this.$105l;_2={};for(var i=0;i<_1.length;i++){var _4=_1[i];if(isc.MultiGroupDialog.getInstanceProperty(_4)==null){_2[_4]=isc.MultiSortDialog.getInstanceProperty(_4)}}
isc.MultiGroupDialog.addProperties(_2)},isc.A.setButtonStates=function isc_MultiGroupDialog_setButtonStates(){this.multiGroupPanel.setButtonStates();this.applyButton.setTitle(this.applyButtonTitle);this.cancelButton.setTitle(this.cancelButtonTitle)},isc.A.getNumLevels=function isc_MultiGroupDialog_getNumLevels(){return this.multiGroupPanel.getNumLevels()},isc.A.getGroup=function isc_MultiGroupDialog_getGroup(){return this.multiGroupPanel.getGroup()},isc.A.validate=function isc_MultiGroupDialog_validate(){return this.multiGroupPanel.validate()},isc.A.closeClick=function isc_MultiGroupDialog_closeClick(){this.cancel();return false},isc.A.cancel=function isc_MultiGroupDialog_cancel(){this.hide();this.markForDestroy()},isc.A.apply=function isc_MultiGroupDialog_apply(){if(this.optionsGrid.getEditRow()!=null)this.optionsGrid.endEditing();if(!this.validate())return;if(this.callback){var _1=isc.shallowClone(this.getGroup());this.fireCallback(this.callback,"groupingMode",[_1])}
this.hide();this.markForDestroy()});isc.B._maxIndex=isc.C+10;isc._nonDebugModules=(isc._nonDebugModules!=null?isc._nonDebugModules:[]);isc._nonDebugModules.push('Grids');isc.checkForDebugAndNonDebugModules();isc._moduleEnd=isc._Grids_end=(isc.timestamp?isc.timestamp():new Date().getTime());if(isc.Log&&isc.Log.logIsInfoEnabled('loadTime'))isc.Log.logInfo('Grids module init time: '+(isc._moduleEnd-isc._moduleStart)+'ms','loadTime');delete isc.definingFramework;}else{if(window.isc&&isc.Log&&isc.Log.logWarn)isc.Log.logWarn("Duplicate load of module 'Grids'.");}

// ISC_Forms.js

if(window.isc&&window.isc.module_Core&&!window.isc.module_Forms){isc.module_Forms=1;isc._moduleStart=isc._Forms_start=(isc.timestamp?isc.timestamp():new Date().getTime());if(isc._moduleEnd&&(!isc.Log||(isc.Log&&isc.Log.logIsDebugEnabled('loadTime')))){isc._pTM={message:'Forms load/parse time: '+(isc._moduleStart-isc._moduleEnd)+'ms',category:'loadTime'};if(isc.Log&&isc.Log.logDebug)isc.Log.logDebug(isc._pTM.message,'loadTime');else if(isc._preLog)isc._preLog[isc._preLog.length]=isc._pTM;else isc._preLog=[isc._pTM]}isc.definingFramework=true;if(window.isc&&isc.version!="v9.1p_2014-06-27/LGPL Deployment"){isc.logWarn("SmartClient module version mismatch detected: This application is loading the core module from SmartClient version '"+isc.version+"' and additional modules from 'v9.1p_2014-06-27/LGPL Deployment'. Mixing resources from different SmartClient packages is not supported and may lead to unpredictable behavior. If you are deploying resources from a single package you may need to clear your browser cache, or restart your browser."+(isc.Browser.isSGWT?" SmartGWT developers may also need to clear the gwt-unitCache and run a GWT Compile.":""))}
isc.A=isc.Canvas;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.applyTableResizePolicy=function isc_c_Canvas_applyTableResizePolicy(_1,_2,_3,_4,_5,_6,_7){var _8=this.logIsDebugEnabled("tablePolicy"),_9=this.logIsInfoEnabled("tablePolicy"),_10=this.logIsDebugEnabled("tablePlacement");var _11=_1.$8j;if(!this.$8k(_1)){_11=_1.$8j=[];var _12=0,_13=0;for(var _14=0;_14<_1.length;_14++){var _15=_1[_14];if(!_15.alwaysTakeSpace&&!_15.visible)continue;var _16=_15.getColSpan(),_17=_15.getRowSpan();if(_17==0||_16==0)continue;if(_16==null)_16=1;if(_17==null)_17=1;var _18=_16;if(_16=="*")_18=1;var _19=_15.getTitleOrientation();if(_15.showTitle&&(_19==isc.Canvas.LEFT||_19==isc.Canvas.RIGHT))
{_18+=(_15.getTitleColSpan()||1);if(_16!="*")_16+=(_15.getTitleColSpan()||1)}
var _20=(_15.isStartRow?_15.isStartRow():_15.startRow),_21=(_15.isEndRow?_15.isEndRow():_15.endRow);if(_10){this.logDebug("at: "+["row"+_12,"col"+_13]+", item: "+(_15.name||_15.Class)+(_16=="*"?", colSpan:'*'":"")+", required cols:"+_18+(_17>1?", rowSpan:"+_17:"")+(_20?", startRow:true":"")+(_21?", endRow:true":""),"tablePlacement")}
var _22=null,_23=null;if(_13>=_4||(_20&&_13!=0)){_12++;_13=0;_15.$8l=true}else{_15.$8l=false}
if(_12<_11.length){for(;_12<_11.length;_12++){var _24=_11[_12];if(_24==null)break;for(;_13<_4;_13++){if(_24[_13]!=null)continue;for(var j=_13;j<_4;j++){if(_24[j]!=null)break;if((j-_13)+1>=_18){_22=_12;_23=_13;break}}
if(_23!=null)break}
if(_23!=null)break;_13=0;_15.$8l=true}}
if(_23==null){_22=_12;_23=0;_15.$8l=true}
_13=_23;if(_16=="*")_16=_4-_13;if(!isc.isA.Number(_17))_17=1;for(var r=_12;r<_12+_17;r++){if(!_11[r])_11[r]=[];for(var c=_13;c<_13+_16;c++){_11[r][c]=_14}}
_15.$8m=[_23,_22,_23+_16,_22+_17];_13+=_16;if(_21)_13=_4;if(_10){this.logDebug("item: "+(_15.name||_15.Class)+" placed at: "+["row"+_22,"col"+_23]+(_15.$8l?", marked startRow ":"")+", rowTable: "+this.echoAll(_11),"tablePlacement")}}
var _28=[];for(var r=0;r<_11.length;r++){var _29=_11[r];if(_29==null)break;var _30=0,_31=null;for(var c=0;c<_29.length;c++){if(_29[c]==null){_30++;continue}
if(r>0&&_11[r-1]!=null&&_29[c]==_11[r-1][c])continue;var _14=_29[c],_15=_1[_14];if(_15==_31||_15==null)continue;_15.$8n=_28;_15.$8o=_30;if(_10&&(_30>0||_28.length>0)){this.logDebug("itemNum:"+_14+" ("+(_15.name||_15.Class)+") at: "+["row"+_22,"col"+_23]+" preceded by "+(_30>0?_30+" empty cells":"")+(_28.length>0?" "+_28.length+" empty rows":""),"tablePlacement")}
_30=0;_28=[];_31=_15}
if(_31==null){_28.add(_30+(_4-_29.length));_30=0}}
if(_28!=null&&_11.length>0){var _32=_28.length;var _29=_11[_11.length-1];for(var c=0;c<_29.length;c++){var _14=_29[c];_15=_1[_14];if(_15==null)continue;var _33=_15.$8m[3]-_15.$8m[1];_33-=_32;_15.$135a=_33}}}
if(!_5||!isc.isAn.Array(_5)){if(!isc.isAn.Array(_5)){this.logWarn(" 'colWidths' not an array - Ignoring.","tableResizePolicy")}
_5=[]}
_5=_5.duplicate();for(var c=0;c<_5.length;c++){var _34=_5[c];if(isc.isA.String(_34)){if(_34=="*")_5[c]=[0,10000,0,1];else if(_34.contains("*"))_5[c]=[0,10000,0,parseInt(_34)];else if(_34.contains("%"))_5[c]=[0,10000,parseInt(_34),0];else{var _35=parseInt(_34);if(_35==_34){_5[c]=_35}else{this.logWarn("Failed to understand specified colWidth:"+_34);_5[c]=[0,10000,0,1]}}}}
_1.colWidths=_5;if(!_6){_6=[];for(var r=0;r<_11.length;r++){var _29=_11[r],_36=null,_37=100000,_38=0,_39=0;if(!_29)continue;for(var c=0;c<_29.length;c++){var _15=_1[_29[c]];if(!_15)continue;var _40=_15.getCellHeight(_7);var _17=(_15.$8m[3]-_15.$8m[1]);if(_8)this.logWarn("item at: "+[r,c]+" has height: "+_40+", item is: "+_15);_15.$8p=false;if(isc.isA.Number(_40)){_40=Math.floor(_40/_17);if(_8)this.logWarn("item: "+_15+" has pixel size: "+_40);if(_36==null||_40>_36){_36=_40}
if(_40>_37)_37=_40}else if(isc.isA.String(_40)){if(_40.contains("*")){_15.$8p=true;var _41=(_40=="*"?1:parseFloat(_40))/_17;if(_8)this.logWarn("item: "+_15+" has star size: "+_41);_39=Math.max(_39,_41)}else{_15.$8p=true;var _42=parseFloat(_40)/_17;if(_8)this.logWarn("item: "+_15+" has percent size: "+_42);if(_42>_38)_38=_42}
if(_15.minHeight>_36){_36=_15.minHeight}
if(_15.minHeight>_37){_37=_15.minHeight}
if(_15.maxHeight<_37&&_36<_15.maxHeight)
{_37=_15.maxHeight}}
if(_38>0||_39>0){if(_36==null)_36=0;_6[r]=[_36,_37,_38,_39]}else{if(_36==null){_36=_1.$8q||22}
_6[r]=_36}}}}
_1.rowHeights=_6;if(_9)this.logInfo("\ntotalWidth: "+_2+", totalHeight: "+_3+"\nspecified sizes:\ncols:"+this.echoAll(_1.colWidths)+", rows: "+this.echoAll(_1.rowHeights),"tablePolicy");_1.$8r=_5=isc.Canvas.stretchResizeList(_1.colWidths,_2);_1.$8s=_6=isc.Canvas.stretchResizeList(_1.rowHeights,_3);if(_9)this.logInfo("\nderived sizes:\ncols:"+this.echoAll(_1.$8r)+", rows: "+this.echoAll(_1.$8s),"tablePolicy");for(_14=0;_14<_1.length;_14++){_15=_1[_14];if(!_15.visible)continue;var _43=isc.isA.Canvas(_15),_44=!_43&&isc.isA.CanvasItem(_15),_34=_44?(_15.canvas&&_15.canvas.$pn)||_15.width:_15.getWidth(),_45=_43?_15.getHeight():_15.getCellHeight(_7),_19=_15.getTitleOrientation(),_46=_15.$8m,_47=0;if(_46==null)continue;if(_15.showTitle){if(_19==isc.Canvas.LEFT){_47=_5[_46[0]]}else{_47=_5[_46[2]]}}
if(_34=="*"||_34=="100%"){_34=0;var _48=_15.getTitleColSpan()||1,_49=(_15.showTitle&&_19==isc.Canvas.LEFT)?_48:0,_50=(_15.showTitle&&_19==isc.Canvas.RIGHT)?_48:0,_51=_46[0]+_49,_52=Math.min(_5.length,_46[2]-_50);for(var c=_51;c<_52;c++){_34+=_5[c]}}
if(_15.$8p){_45=0;var _20=_46[1],_21=_46[3];for(var c=_20;c<_21;c++){_45+=_6[c]}}
_15.$8t=[_34,_45];_15.$8u=_47}},isc.A.$8k=function isc_c_Canvas__tableResizePolicyIsValid(_1){if(!_1.$8j)return false;return true},isc.A.invalidateTableResizePolicy=function isc_c_Canvas_invalidateTableResizePolicy(_1){delete _1.$8j;delete _1.$8s;delete _1.$8r},isc.A.stretchResizeList=function isc_c_Canvas_stretchResizeList(_1,_2){var _3=0,_4=0,_5=0,_6=_1.duplicate();for(var i=0;i<_1.length;i++){var _8=_6[i];if(isc.isA.Number(_8)){_8=Math.max(_8,1);_5+=_8;_6[i]=_8}else{var _9=_8[2],_10=_8[3];if(_10==0){_3+=_9}
_4+=_10}}
if(_4){var _11=0;if(_3<100){_11=(100-_3)/_4}
for(var r=0;r<_1.length;r++){var _8=_6[r];if(isc.isA.Number(_8))continue;var _9=_8[2],_10=_8[3],_13=_10*_11;if(_9<_13){_8[2]=_13}
if(_10>0)_3+=_8[2]}}
if(_3<=0)return _6;var _14=Math.max(0,_2-_5);for(var r=0;r<_1.length;r++){var _15=Math.max(0,_14/_3),_8=_6[r];if(isc.isA.Number(_8))continue;var _16=_8[0];if(_16==0)continue;var _17=_8[2],_18=_15*_17;if(_18<_16){_6[r]=_16;_14-=_16;_3-=_17;r=0}}
for(var r=0;r<_1.length;r++){var _15=Math.max(0,_14/_3),_8=_6[r];if(isc.isA.Number(_8))continue;var _19=_8[1],_17=_8[2],_18=_15*_17;if(_18>_19){_6[r]=_19;_14-=_19;_3-=_17;r=0}}
_15=Math.max(0,_14/_3);for(var r=0;r<_1.length;r++){_8=_6[r];if(isc.isA.Number(_8))continue;var _17=_8[2];_6[r]=Math.floor(_17*_15)}
return _6});isc.B._maxIndex=isc.C+4;isc.ClassFactory.defineClass("ButtonTable",isc.Canvas);isc.A=isc.ButtonTable.getPrototype();isc.A.cellSpacing=0;isc.A.cellPadding=2;isc.A.cellBorder=0;isc.A.tableStyle="menuTable";isc.A.baseButtonStyle="button";isc.A.backgroundColor="CCCCCC";isc.A.useEventParts=true;isc.A=isc.ButtonTable.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.setItems=function isc_ButtonTable_setItems(_1){this.items=isc.shallowClone(_1);this.redraw()},isc.A.getInnerHTML=function isc_ButtonTable_getInnerHTML(){var _1=isc.SB.newInstance();_1.append("<TABLE"," CLASS=",this.tableStyle," WIDTH=",this.getWidth()-(this.overflow==isc.Canvas.SCROLL||this.overflow==isc.Canvas.AUTO?this.getScrollbarSize():0)," HEIGHT=",this.getHeight()," CELLSPACING=",this.cellSpacing," CELLPADDING=",this.cellPadding," BORDER=",this.cellBorder,"><TR>");for(var r=0;r<this.items.length;r++){var _3=this.items[r];_1.append("<TR>");if(!isc.isAn.Array(_3))_3=[_3];for(var i=0;i<_3.length;i++){var _5=_3[i];if(_5.eventPart){_1.append(this.getCellButtonHTML(_5.contents,_5.style,_5.disabled,_5.selected,_5.align,_5.extraTagStuff,_5.eventPart,_5.eventId))}else{_1.append(this.getCellHTML(_5.contents,_5.style,_5.align,_5.extraTagStuff))}}
_1.append("</TR>")}
_1.append("</TABLE>");return _1.toString()},isc.A.showModal=function isc_ButtonTable_showModal(){this.showClickMask(this.getID()+".hide()");this.show();this.unmask();this.bringToFront()},isc.A.hide=function isc_ButtonTable_hide(){this.Super("hide",arguments);this.hideClickMask();this.$8v=null},isc.A.getButtonBaseStyle=function isc_ButtonTable_getButtonBaseStyle(_1){var _2;if(_1)_2=_1.getAttribute("basestyle");if(!_2)_2=this.baseButtonStyle;return _2},isc.A.getMouseOutStyle=function isc_ButtonTable_getMouseOutStyle(_1){var _2=this.getButtonBaseStyle(_1);if(this.buttonIsSelected(_1)){_2+="Selected"}
if(this.buttonIsDisabled(_1)){_2+="Disabled"}
return _2},isc.A.buttonIsSelected=function isc_ButtonTable_buttonIsSelected(_1){return _1&&_1.getAttribute("buttonselected")},isc.A.buttonIsDisabled=function isc_ButtonTable_buttonIsDisabled(_1){return _1&&_1.getAttribute("buttondisabled")},isc.A.cellButtonOver=function isc_ButtonTable_cellButtonOver(_1){var _2=this.getButtonBaseStyle(_1);if(this.buttonIsSelected(_1))_2+="Selected";if(_1)_1.className=_2+"Over"},isc.A.cellButtonOut=function isc_ButtonTable_cellButtonOut(_1){if(!_1)return;_1.className=this.getMouseOutStyle(_1)},isc.A.cellButtonDown=function isc_ButtonTable_cellButtonDown(_1){if(_1){var _2=this.getButtonBaseStyle(_1);if(this.buttonIsSelected(_1))_2+="Selected";_2+="Down"
_1.className=_2}},isc.A.getCellHTML=function isc_ButtonTable_getCellHTML(_1,_2,_3,_4){return isc.StringBuffer.concat("<TD ALIGN=",(_3||isc.Canvas.CENTER)," CLASS=",(_2||this.baseButtonStyle+"Disabled"),(_4||_4),">",_1,"</TD>")},isc.A.handleMouseDown=function isc_ButtonTable_handleMouseDown(_1){_1.touchStartReturnValue=false;var _2=_1.nativeTarget;if(_2.tagName!="TD")_2=_2.parentNode;if(!_2.getAttribute||!_2.getAttribute(this.$pk))return;this.cellButtonDown(_2);this.Super("handleMouseDown",arguments)},isc.A.handleMouseUp=function isc_ButtonTable_handleMouseUp(_1){var _2=_1.nativeTarget;if(_2.tagName!="TD")_2=_2.parentNode;if(!_2.getAttribute||!_2.getAttribute(this.$pk))return;this.cellButtonOut(_2);this.Super("handleMouseUp",arguments)},isc.A.getCellButtonHTML=function isc_ButtonTable_getCellButtonHTML(_1,_2,_3,_4,_5,_6,_7,_8){if(_2==null)_2=this.baseButtonStyle;var _9=_2;if(_3)_9+="Selected";if(_4)_9+="Disabled";var _10=" "+this.$pk+"="+(_7?_7:"$95w");if(_8!=null)_10+=" id="+this.getID()+"_"+_7+"_"+_8;return isc.StringBuffer.concat("<TD ALIGN=",(_5||isc.Canvas.CENTER)," CLASS=",_9," ONMOUSEOVER='",this.getID(),".cellButtonOver(this);return false;' "," ONMOUSEOUT='",this.getID(),".cellButtonOut(this);return true;'"," basestyle='",_2,"'",(_3?" buttonselected='true'":null),(_4?" buttondisabled='true'":null),(_6?" "+_6:null),_10+">",_1,"</TD>")});isc.B._maxIndex=isc.C+15;if(isc.ListGrid==null){isc.Log.logInfo("Source for DateGrid included in this module, but required superclass (ListGrid) is not loaded. This can occur if the Forms module is loaded without the Grids module. DateGrid class will not be defined within this page.","moduleDependencies")}else{isc.ClassFactory.defineClass("DateGrid","ListGrid");isc.A=isc.DateGrid.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.width=10;isc.A.height=10;isc.A.cellHeight=20;isc.A.autoFitData="vertical";isc.A.minFieldWidth=21;isc.A.autoFitMaxRows=5;isc.A.useCellRollOvers=true;isc.A.canSelectCells=true;isc.A.leaveScrollbarGap=false;isc.A.canResizeFields=false;isc.A.headerButtonProperties={padding:0};isc.A.headerHeight=20;isc.A.canSort=false;isc.A.canEdit=false;isc.A.showSortArrow=isc.ListGrid.NONE;isc.A.showFiscalYear=false;isc.A.showFiscalWeek=false;isc.A.showCalendarWeek=false;isc.A.loadingDataMessage="";isc.A.alternateRecordStyles=false;isc.A.showHeaderMenuButton=false;isc.A.showHeaderContextMenu=false;isc.A.cellPadding=0;isc.A.wrapCells=false;isc.A.locateRowsBy="targetCellValue";isc.A.fiscalYearFieldTitle="Year";isc.A.weekFieldTitle="Wk";isc.A.canReorderFields=false;isc.A.bodyProperties={canSelectOnRightMouse:false,height:1,overflow:"visible"};isc.A.headerProperties={overflow:"visible"};isc.A.$134s=null;isc.A.alwaysShowFirstFiscalWeek=true;isc.B.push(isc.A.initWidget=function isc_DateGrid_initWidget(){this.shortDayNames=isc.Date.getShortDayNames(3);this.shortDayTitles=isc.Date.getShortDayNames(this.dayNameLength);this.shortMonthNames=isc.Date.getShortMonthNames();this.Super("initWidget",arguments);this.refreshUI()},isc.A.getTitleField=function isc_DateGrid_getTitleField(){return null},isc.A.getCellAlign=function isc_DateGrid_getCellAlign(_1,_2,_3){return"center"},isc.A.formatCellValue=function isc_DateGrid_formatCellValue(_1,_2,_3,_4){if(_1&&_1.getDate)return _1.getDate();return""+_1},isc.A.getCellStyle=function isc_DateGrid_getCellStyle(_1,_2,_3){var _4=this.getField(_3),_5=this.getRecordWeekNumber(_1),_6=_5==this.selectedWeek;if(_4.name=="fiscalYear"){return!_6?this.baseFiscalYearStyle:this.selectedWeekStyle}else if(_4.name=="fiscalWeek"||_4.name=="calendarWeek"){return!_6?this.baseWeekStyle:this.selectedWeekStyle}
var _7=this.getCellDate(_1,_2,_3),_8=this.dateIsDisabled(_7),_9=_7.getMonth()!=this.workingMonth,_10=this.Super("getCellStyle",arguments);;if(_4.isDateField){if((_8||_9)){_10=_4.isWeekend?this.disabledWeekendStyle:this.disabledWeekdayStyle;var _11=this.body.getEventRow(),_12=this.body.getEventColumn(),_13=(_11==_2&&_12==_3),_14=this.selection&&this.selection.lastSelectedCell,_15=_14?_14[0]==_2&&_14[1]==_3:this.cellSelection?this.cellSelection.isSelected(_2,_3):false,_16=_10.indexOf("Over"),_17=_10.indexOf("Selected");if(_16>=0)_10=_10.substring(0,_16);if(_17>=0)_10=_10.substring(0,_17);if(_15)_10+="Selected";if(_13)_10+="Over"}}
return _10},isc.A.cellMouseDown=function isc_DateGrid_cellMouseDown(_1,_2,_3){var _4=this.getCellDate(_1,_2,_3);if(!_4)return true;if(this.dateIsDisabled(_4))return false;return true},isc.A.cellClick=function isc_DateGrid_cellClick(_1,_2,_3){var _4=this.getCellDate(_1,_2,_3);if(!_4)return true;if(this.dateIsDisabled(_4)){return true}
this.dateClick(_4.getFullYear(),_4.getMonth(),_4.getDate())},isc.A.dateClick=function isc_DateGrid_dateClick(_1,_2,_3){},isc.A.getRecordWeekNumber=function isc_DateGrid_getRecordWeekNumber(_1){if(!_1)return-1;return this.showFiscalWeek?_1.fiscalWeek:_1.calendarWeek},isc.A.isSelectedWeek=function isc_DateGrid_isSelectedWeek(_1){return this.getRecordWeekNumber(_1)==this.selectedWeek},isc.A.cellSelectionChanged=function isc_DateGrid_cellSelectionChanged(_1){var _2=this.getCellSelection();for(var i=0;i<_1.length;i++){var _4=_1[i];if(_2.cellIsSelected(_4[0],_4[1])){var _5=this.getRecordWeekNumber(this.getRecord(_4[0]));if(this.selectedWeek!=_5){this.setSelectedWeek(_5)}
return}}
return},isc.A.setSelectedWeek=function isc_DateGrid_setSelectedWeek(_1){this.selectedWeek=_1;this.markForRedraw();this.selectedWeekChanged(this.selectedWeek)},isc.A.selectedWeekChanged=function isc_DateGrid_selectedWeekChanged(_1){},isc.A.getWorkingMonth=function isc_DateGrid_getWorkingMonth(){return this.workingMonth},isc.A.getSelectedDate=function isc_DateGrid_getSelectedDate(){return null},isc.A.disableMarkedDates=function isc_DateGrid_disableMarkedDates(){this.disabledDateStrings=[];if(this.disabledDates&&this.disabledDates.length>0){for(var i=0;i<this.disabledDates.length;i++){this.disabledDateStrings[i]=this.disabledDates[i].toShortDate()}}},isc.A.dateIsDisabled=function isc_DateGrid_dateIsDisabled(_1){if(!_1)return;if(this.disableWeekends&&this.dateIsWeekend(_1))return true;var _2=this.disabledDateStrings.contains(_1.toShortDate());return _2},isc.A.getCellDate=function isc_DateGrid_getCellDate(_1,_2,_3){if(_3<this.dateColumnOffset||!this.getField(_3))return;var _4=_1.rowStartDate,_5=Date.createLogicalDate(_4.getFullYear(),_4.getMonth(),_4.getDate()+(_3-this.dateColumnOffset));return _5},isc.A.selectDateCell=function isc_DateGrid_selectDateCell(_1){var _2=this.getCellSelection(),_3=this.getDateCell(_1);if(!_3)return;if(_3.colNum!=null)_2.selectSingleCell(_3.rowNum,_3.colNum);this.setSelectedWeek(this.showFiscalWeek?_3.record.fiscalWeek:_3.record.calendarWeek)},isc.A.getDateCell=function isc_DateGrid_getDateCell(_1){var _2=this.getCellSelection(),_3=this.data;if(_1&&_3&&_3.length>0){var _4=this.showWeekends==false?5:7;for(var i=0;i<_3.length;i++){var _6=_3[i];if(_6){for(var j=0;j<_4;j++){var _8=_1.getDay();if(Date.compareLogicalDates(_6[this.shortDayNames[_1.getDay()]],_1)==0){var _9=this.shortDayNames[_1.getDay()],_10=this.getField(_9),_11=_10?this.getFieldNum(_10.name):null;if(_10){return{rowNum:i,colNum:_11,record:_6}}
break}}}}}},isc.A.shouldDisableDate=function isc_DateGrid_shouldDisableDate(_1){var _2=this.dateIsDisabled(_1);return _2},isc.A.setStartDate=function isc_DateGrid_setStartDate(_1){var _2=_1.getFullYear(),_3=_1.getMonth(),_4=_1.getDate(),_5=Date.createLogicalDate(_2,_3,1),_6=_5.getDay();var _7=_5.duplicate();var _8=0;if(_6>this.firstDayOfWeek){_8=(_6-this.firstDayOfWeek)*-1}else if(_6<this.firstDayOfWeek){_8=(this.firstDayOfWeek-_6)-7}
var _9=Date.createLogicalDate(_2,_3,1+_8,0);this.workingMonth=_1.getMonth();this.startDate=_9;this.buildCalendarData();var _10=Math.max(this.cellHeight,Math.floor(this.$148m/5));this.setCellHeight(_10);this.markForRedraw()},isc.A.refreshUI=function isc_DateGrid_refreshUI(_1){this.setFields(this.getFieldList());_1=_1||this.startDate;if(_1)this.setStartDate(_1)},isc.A.getFieldList=function isc_DateGrid_getFieldList(){var _1=[];this.dateColumnOffset=0;if(this.showFiscalYear){_1.add({name:"fiscalYear",type:"number",title:this.fiscalYearFieldTitle,width:30,align:"center",cellAlign:"center",showRollOver:false,showDown:false,baseStyle:this.baseFiscalYearStyle,headerBaseStyle:this.fiscalYearHeaderStyle||this.baseFiscalYearStyle});this.dateColumnOffset++}
if(this.showFiscalWeek){_1.add({name:"fiscalWeek",type:"number",title:this.weekFieldTitle,width:25,align:"center",showRollOver:false,showDown:false,baseStyle:this.baseWeekStyle,headerBaseStyle:this.weekHeaderStyle||this.baseWeekStyle});this.dateColumnOffset++}
if(this.showCalendarWeek){_1.add({name:"calendarWeek",type:"number",title:this.weekFieldTitle,width:25,align:"center",showRollOver:false,showDown:false,baseStyle:this.baseWeekStyle,headerBaseStyle:this.weekHeaderStyle||this.baseWeekStyle});this.dateColumnOffset++}
var _2=isc.Date.getWeekendDays();for(var i=0;i<this.shortDayNames.length;i++){var _4=i+this.firstDayOfWeek;if(_4>6)_4-=7;if(!this.showWeekends&&_2.contains(_4))continue;var _5={name:this.shortDayNames[_4],title:this.shortDayTitles[_4],type:"text",align:"center",width:this.dateFieldWidth||"*",padding:0,isDateField:true,dateOffset:i,showRollOver:false,showDown:false};if(_2.contains(_4)){_5.isWeekend=true;_5.baseStyle=this.baseWeekendStyle;_5.headerBaseStyle=this.weekendHeaderStyle}else{_5.baseStyle=this.baseWeekdayStyle;_5.headerBaseStyle=this.headerBaseStyle}
_1.add(_5)}
this.disableMarkedDates();return _1},isc.A.dateIsWeekend=function isc_DateGrid_dateIsWeekend(_1){if(!_1)return false;if(this.$134s==null)this.$134s=isc.Date.getWeekendDays();return this.$134s.contains(_1.getDay())},isc.A.buildCalendarData=function isc_DateGrid_buildCalendarData(_1){if(_1)this.startDate=_1;_1=this.startDate;var _2=[],_3=_1,_4=this.startDate.getMonth(),_5=(_4==11||this.workingMonth==11),_6=Date.createLogicalDate(_1.getFullYear()+(_5?1:0),(this.workingMonth==11?0:this.workingMonth+1),1);var _7=(_6.getTime()-_3.getTime())/1000/60/60/24,_8=_7/7;var _9=Math.floor(_8)+(_7%7>0?1:0);for(var i=0;i<=_9;i++){var _11=Date.createLogicalDate(_3.getFullYear(),_3.getMonth(),_3.getDate()+(i*7));if(i==_9&&_11.getMonth()!=this.workingMonth){break}
_2.add(this.getWeekRecord(_11))}
if(!this.isDrawn())this.draw();this.setData(_2);this.selectDateCell(this.getSelectedDate())},isc.A.getFiscalCalendar=function isc_DateGrid_getFiscalCalendar(){return this.fiscalCalendar||Date.getFiscalCalendar()},isc.A.getWeekRecord=function isc_DateGrid_getWeekRecord(_1){var _2=this.getFiscalCalendar(),_3=_1.getFiscalYear(_2),_4=new Date(_1.getTime()+(6*86400000));if(_1.logicalDate)_4.logicalDate=true;var _5=new Date(_1.getTime()+(4*86400000));var _6={rowStartDate:_1,rowEndDate:_1+7,fiscalYear:_3.fiscalYear,fiscalYearEnd:_4.getFiscalYear(_2).fiscalYear,fiscalWeek:_1.getFiscalWeek(_2,this.firstDayOfWeek),fiscalWeekEnd:_4.getFiscalWeek(_2,this.firstDayOfWeek),calendarWeek:_5.getWeek(this.firstDayOfWeek),weekDate:_5};if(_6.fiscalWeek!=_6.fiscalWeekEnd){var _7=false,_8=false;if(_6.fiscalYear!=_6.fiscalYearEnd){if(!this.alwaysShowFirstFiscalWeek){var _9=Date.getFiscalStartDate(_4,_2).getDay(),_10=_9-this.firstDayOfWeek;if(_10<0)_10+=6;if(_10<3)_7=true}else _7=true}
if(!_7){var _11=Date.getFiscalStartDate(_1,_2).getDay(),_10=_11-this.firstDayOfWeek;if(_10<0)_10+=6;if(_10>0&&_10<3)_8=true}
if(_7){_6.fiscalYear=_6.fiscalYearEnd;_6.fiscalWeek=1}else if(_8){_6.fiscalWeek+=1}}
var _12=_1.getFullYear(),_13=_1.getMonth(),_14=Date.getWeekendDays();for(var i=0;i<7;i++){var _16=Date.createLogicalDate(_12,_13,_1.getDate()+i,0);var _17=this.shortDayNames[_16.getDay()];_6[_17]=_16}
return _6});isc.B._maxIndex=isc.C+28}
isc.ClassFactory.defineClass("DateChooser","VLayout");isc.A=isc.DateChooser.getPrototype();isc.A.width=10;isc.A.height=10;isc.A.overflow="visible";isc.A.showNavigationLayout=true;isc.A.navigationLayoutConstructor="HLayout";isc.A.navigationLayoutDefaults={width:1,height:1,layoutAlign:"center",align:"center"};isc.A.showFiscalYearChooser=false;isc.A.fiscalYearChooserButtonDefaults={width:30,click:function(){this.creator.showFiscalYearMenu()},autoParent:"navigationLayout",align:"center"};isc.A.showWeekChooser=false;isc.A.weekChooserButtonDefaults={width:25,click:function(){this.creator.showWeekMenu()},autoParent:"navigationLayout",align:"center"};isc.A.previousYearButtonDefaults={width:20,click:function(){this.creator.showPrevYear()},autoParent:"navigationLayout",align:"center",noDoubleClicks:true};isc.A.previousMonthButtonDefaults={width:20,click:function(){this.creator.showPrevMonth()},autoParent:"navigationLayout",align:"center",noDoubleClicks:true};isc.A.monthChooserButtonDefaults={width:30,click:function(){this.creator.showMonthMenu()},autoParent:"navigationLayout",align:"center"};isc.A.yearChooserButtonDefaults={width:32,click:function(){this.creator.showYearMenu()},autoParent:"navigationLayout",align:"center"};isc.A.nextMonthButtonDefaults={width:20,click:function(){this.creator.showNextMonth()},autoParent:"navigationLayout",align:"center",noDoubleClicks:true};isc.A.nextYearButtonDefaults={width:20,click:function(){this.creator.showNextYear()},autoParent:"navigationLayout",align:"center",noDoubleClicks:true};isc.A.buttonLayoutConstructor="HLayout";isc.A.buttonLayoutDefaults={width:1,height:1,overflow:"visible",layoutAlign:"center",extraSpace:2};isc.A.dateGridDefaults={_constructor:"DateGrid",autoDraw:false,layoutAlign:"center",dateClick:function(_1,_2,_3){this.creator.dateClick(_1,_2,_3)},getSelectedDate:function(){return this.creator.chosenDate},selectedWeekChanged:function(_1){this.creator.updateWeekChooser(_1,true)}};isc.A.bottomButtonConstructor="IButton";isc.A.todayButtonDefaults={padding:2,autoFit:true,autoParent:"buttonLayout",click:function(){this.creator.todayClick()}};isc.A.cancelButtonDefaults={padding:2,autoFit:true,autoParent:"buttonLayout",click:function(){this.creator.cancelClick()}};isc.A.applyButtonDefaults={padding:2,autoFit:true,autoParent:"buttonLayout",click:function(){this.creator.applyClick()}};isc.A.navigationLayoutHeight=20;isc.A.showYearButtons=true;isc.A.showYearChooser=true;isc.A.showMonthButtons=true;isc.A.showMonthChooser=true;isc.A.skinImgDir="images/common/";isc.A.prevYearIcon="[SKIN]doubleArrow_left.gif";isc.A.prevYearIconWidth=14;isc.A.prevYearIconHeight=7;isc.A.prevMonthIcon="[SKIN]arrow_left.gif";isc.A.prevMonthIconWidth=7;isc.A.prevMonthIconHeight=7;isc.A.nextYearIcon="[SKIN]doubleArrow_right.gif";isc.A.nextYearIconWidth=14;isc.A.nextYearIconHeight=7;isc.A.nextMonthIcon="[SKIN]arrow_right.gif";isc.A.nextMonthIconWidth=7;isc.A.nextMonthIconHeight=7;isc.A.showDoubleYearIcon=true;isc.A.yearMenuStyle="dateChooserYearMenu";isc.A.startYear=1995;isc.A.endYear=2020;isc.A.monthMenuStyle="dateChooserMonthMenu";isc.A.weekMenuStyle="dateChooserWeekMenu";isc.A.showTodayButton=true;isc.A.showCancelButton=false;isc.A.todayButtonTitle="Today";isc.A.cancelButtonTitle="Cancel";isc.A.applyButtonTitle="Apply";isc.A.disableWeekends=false;isc.A.showWeekends=true;isc.A.firstDayOfWeek=0;isc.A.year=new Date().getFullYear();isc.A.month=new Date().getMonth();isc.A.chosenDate=new Date();isc.A.baseButtonStyle="dateChooserButton";isc.A.baseWeekdayStyle="dateChooserWeekday";isc.A.baseWeekendStyle="dateChooserWeekend";isc.A.baseFiscalYearStyle="dateChooserFiscalYearCell";isc.A.baseWeekStyle="dateChooserWeekCell";isc.A.disabledWeekdayStyle="dateChooserDisabledWeekday";isc.A.disabledWeekendStyle="dateChooserDisabledWeekend";isc.A.selectedWeekStyle="dateChooserSelectedWeek";isc.A.alternateStyleSuffix="Dark";isc.A.headerStyle="dateChooserButtonDisabled";isc.A.navButtonConstructor="IButton";isc.A.useBackMask=true;isc.A.canFocus=true;isc.A.useFirstDayOfFiscalWeek=true;isc.A.timeLayoutConstructor="HLayout";isc.A.timeLayoutDefaults={width:1,height:1,overflow:"visible",layoutAlign:"center",extraSpace:1};isc.A.timeFormDefaults={_constructor:"DynamicForm",width:1,overflow:"visible",layoutAlign:"center"};isc.A.closeOnEscapeKeypress=false;isc.A.timeItemDefaults={name:"time",editorType:"TimeItem",useTextField:false,showTitle:false};isc.A.timeItemTitle="Time";isc.A.use24HourTime=true;isc.A.fiscalYearFieldTitle="Year";isc.A.weekFieldTitle="Wk";isc.A=isc.DateChooser.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.dayNameLength=2;isc.B.push(isc.A.initWidget=function isc_DateChooser_initWidget(){this.Super("initWidget",arguments);if(this.showFiscalYearChooser&&this.useFirstDayOfFiscalWeek){var _1=Date.getFiscalStartDate(new Date(),this.getFiscalCalendar());this.firstDayOfWeek=_1.getDay()}
if(this.headerHeight!=null)this.navigationLayoutHeight=this.headerHeight;if(this.showNavigationLayout!=false){this.addAutoChild("navigationLayout",{},this.navigationLayoutConstructor);this.addMember(this.navigationLayout);this.addAutoChild("fiscalYearChooserButton",{baseStyle:(this.baseNavButtonStyle||this.baseButtonStyle),title:this.chosenDate.getFiscalYear(this.getFiscalCalendar()).fiscalYear,autoDraw:false},this.navButtonConstructor);this.addAutoChild("weekChooserButton",{baseStyle:(this.baseNavButtonStyle||this.baseButtonStyle),title:this.showFiscalYearChooser?this.chosenDate.getFiscalWeek(this.getFiscalCalendar()):this.chosenDate.getWeek(this.firstDayOfWeek),autoDraw:false},this.navButtonConstructor);if(this.showYearButtons){this.addAutoChild("previousYearButton",{baseStyle:(this.baseNavButtonStyle||this.baseButtonStyle),title:this.getPreviousYearIconHTML()},this.navButtonConstructor)}
if(this.showMonthButtons){this.addAutoChild("previousMonthButton",{baseStyle:(this.baseNavButtonStyle||this.baseButtonStyle),title:this.getPreviousMonthIconHTML()},this.navButtonConstructor)}
if(this.showMonthChooser!=false){this.addAutoChild("monthChooserButton",{baseStyle:(this.baseNavButtonStyle||this.baseButtonStyle),title:this.chosenDate.getShortMonthName()},this.navButtonConstructor)}
if(this.showYearChooser!=false){this.addAutoChild("yearChooserButton",{baseStyle:(this.baseNavButtonStyle||this.baseButtonStyle),title:this.chosenDate.getFullYear()},this.navButtonConstructor)}
if(this.showMonthButtons){baseStyle:(this.baseNavButtonStyle||this.baseButtonStyle),this.addAutoChild("nextMonthButton",{baseStyle:(this.baseNavButtonStyle||this.baseButtonStyle),title:this.getNextMonthIconHTML()},this.navButtonConstructor)}
if(this.showYearButtons){baseStyle:(this.baseNavButtonStyle||this.baseButtonStyle),this.addAutoChild("nextYearButton",{baseStyle:(this.baseNavButtonStyle||this.baseButtonStyle),title:this.getNextYearIconHTML()},this.navButtonConstructor)}}
var _2=isc.addProperties({},{title:this.timeItemTitle,use24HourTime:this.use24HourTime},this.timeItemDefaults,this.timeItemProperties,{name:"time"});this.addAutoChild("timeLayout");this.addAutoChild("timeForm",{items:[_2]});this.timeLayout.addMember(this.timeForm);this.addMember(this.timeLayout);this.timeLayout.hide();if(this.showTodayButton||this.showCancelButton){var _3={};if(this.todayButtonHeight!=null)_3.height=this.todayButtonHeight;this.addAutoChild("buttonLayout",_3,this.buttonLayoutConstructor);this.addMember(this.buttonLayout);_3.baseStyle=this.baseBottomButtonStyle||this.baseButtonStyle;_3.title=this.todayButtonTitle;this.addAutoChild("todayButton",_3,this.bottomButtonConstructor);_3.title=this.cancelButtonTitle;this.addAutoChild("cancelButton",_3,this.bottomButtonConstructor);_3.title=this.applyButtonTitle;this.addAutoChild("applyButton",_3,this.bottomButtonConstructor);if(this.applyButton)this.applyButton.hide()}
this.markForRedraw();if(this.chosenDate){this.year=this.chosenDate.getFullYear();this.month=this.chosenDate.getMonth()}
this.updateUI()},isc.A.draw=function isc_DateChooser_draw(){this.Super("draw",arguments);if(!this.dateGrid){var _1=0;if(this.navigationLayout&&this.navigationLayout.isVisible()){_1+=this.navigationLayout.getVisibleHeight()}
if(this.timeLayout&&this.timeLayout.isVisible()){_1+=this.timeLayout.getVisibleHeight()}
if(this.buttonLayout&&this.buttonLayout.isVisible()){_1+=this.buttonLayout.getVisibleHeight()}
var _2={startDate:this.chosenDate,dayNameLength:this.dayNameLength,showFiscalYear:this.showFiscalYearChooser,fiscalYearFieldTitle:this.fiscalYearFieldTitle,showFiscalWeek:this.showFiscalYearChooser&&this.showWeekChooser,showCalendarWeek:!this.showFiscalYearChooser&&this.showWeekChooser,weekFieldTitle:this.weekFieldTitle,disabledDates:this.disabledDates,firstDayOfWeek:this.firstDayOfWeek,headerBaseStyle:this.headerStyle,weekendHeaderStyle:this.weekendHeaderStyle||this.headerStyle,baseFiscalYearStyle:this.baseFiscalYearStyle,fiscalYearHeaderStyle:this.fiscalYearHeaderStyle||this.baseFiscalYearStyle,baseWeekStyle:this.baseWeekStyle,weekHeaderStyle:this.weekHeaderStyle||this.baseWeekStyle,baseWeekdayStyle:this.baseWeekdayStyle||this.baseButtonStyle,baseWeekendStyle:this.baseWeekendStyle||this.baseWeekdayStyle||this.baseButtonStyle,alternateRecordStyles:this.alternateWeekStyles,disabledWeekdayStyle:this.disabledWeekdayStyle,disabledWeekendStyle:this.disabledWeekendStyle,selectedWeekStyle:this.selectedWeekStyle,fiscalCalendar:this.getFiscalCalendar(),showWeekends:this.showWeekends,disableWeekends:this.disableWeekends,locatorParent:this,width:"100%",height:"*",$148m:this.getHeight()-_1};this.addAutoChild("dateGrid",_2);this.addMember(this.dateGrid,this.navigationLayout?1:0)}},isc.A.getTimeItem=function isc_DateChooser_getTimeItem(){if(this.timeForm)return this.timeForm.getItem("time")},isc.A.recreateTimeItem=function isc_DateChooser_recreateTimeItem(_1){var _2=isc.addProperties({},{title:this.timeItemTitle,use24HourTime:this.use24HourTime,showSecondItem:!!this.showSecondItem},this.timeItemDefaults,this.timeItemProperties,{name:"time",value:_1});this.timeForm.setItems([_2])},isc.A.resized=function isc_DateChooser_resized(){},isc.A.handleKeyPress=function isc_DateChooser_handleKeyPress(){var _1=this.Super("handleKeyPress",arguments);if(_1!=false){if((this.closeOnEscapeKeypress)&&("Escape"==isc.EH.getKey())){this.cancelClick()}}},isc.A.getPreviousYearIconHTML=function isc_DateChooser_getPreviousYearIconHTML(){var _1,_2=new Date(this.year,this.month,1),_3=_2.getFullYear()==9999;if(this.showDoubleYearIcon){var _4=this.getPreviousMonthIconHTML();_1=_3?"&nbsp;":"<NOBR>"+_4+_4+"<\/NOBR>"}else{var _5=this.isRTL()?this.prevYearIconRTL||this.nextYearIcon:this.prevYearIcon;_1=_3?"&nbsp;":this.imgHTML(_5,this.prevYearIconWidth,this.prevYearIconHeight)}
return _1},isc.A.getPreviousMonthIconHTML=function isc_DateChooser_getPreviousMonthIconHTML(){var _1=this.isRTL()?this.prevMonthIconRTL||this.nextMonthIcon:this.prevMonthIcon,_2=this.imgHTML(_1,this.prevMonthIconWidth,this.prevMonthIconHeight);return _2},isc.A.getNextMonthIconHTML=function isc_DateChooser_getNextMonthIconHTML(){var _1=this.isRTL()?this.nextMonthIconRTL||this.prevMonthIcon:this.nextMonthIcon,_2=this.imgHTML(_1,this.nextMonthIconWidth,this.nextMonthIconHeight);return _2},isc.A.getNextYearIconHTML=function isc_DateChooser_getNextYearIconHTML(){var _1,_2=new Date(this.year,this.month,1),_3=_2.getFullYear()==9999;if(this.showDoubleYearIcon){var _4=this.getNextMonthIconHTML();_1=_3?"&nbsp;":"<NOBR>"+_4+_4+"<\/NOBR>"}else{var _5=this.isRTL()?this.nextYearIconRTL||this.prevYearIcon:this.nextYearIcon;_1=_3?"&nbsp;":this.imgHTML(_5,this.nextYearIconWidth,this.nextYearIconHeight)}
return _1},isc.A.show=function isc_DateChooser_show(){var _1=this.Super("show",arguments);if(this.autoClose){this.showClickMask(this.getID()+".close();",true,this);this.bringToFront()}},isc.A.setData=function isc_DateChooser_setData(_1){if(!isc.isA.Date(_1))_1=new Date();var _2="datetime";if(this.callingFormItem){_2=this.callingFormItem.type}
var _3=Date.getLogicalDateOnly(_1),_4=Date.getLogicalTimeOnly(_1);this.year=_1.getFullYear();this.month=_1.getMonth();var _5=isc.Time.getUTCHoursDisplayOffset(_1),_6=isc.Time.getUTCMinutesDisplayOffset(_1),_7=((_5*60)+_6+_1.getTimezoneOffset())*60000;this.chosenDate=new Date(_1.getTime()+_7);var _8=this.getTimeItem();if(_8)_8.setValue(_4);this.updateUI();if(this.dateGrid)this.dateGrid.setStartDate(this.chosenDate)},isc.A.updateGridData=function isc_DateChooser_updateGridData(_1){if(!this.dateGrid)return;_1.setDate(1);var _2=Date.$100e(_1),_3=_2.startDate;this.dateGrid.showWeekends=this.showWeekends;this.dateGrid.showFiscalYear=this.showFiscalYearChooser;this.dateGrid.showFiscalWeek=this.showFiscalYearChooser&&this.showWeekChooser;this.dateGrid.showCalendarWeek=!this.showFiscalYearChooser&&this.showWeekChooser;if(this.showFiscalYearChooser){if(this.useFirstDayOfFiscalWeek){var _4=Date.getFiscalYear(_2.fiscalYear+1);if(_4.year<_2.fiscalYear)_4=Date.getFiscalYear(_4.fiscalYear+1);this.dateGrid.firstDayOfWeek=this.firstDayOfWeek=_4.startDate.getDay()}}
this.dateGrid.refreshUI(_1)},isc.A.getData=function isc_DateChooser_getData(){return this.chosenDate},isc.A.redraw=function isc_DateChooser_redraw(){this.Super("redraw",arguments);this.updateUI()},isc.A.getDayNames=function isc_DateChooser_getDayNames(){if(isc.DateChooser.$8w==null){isc.DateChooser.$8w=[Date.getShortDayNames(1),Date.getShortDayNames(2),Date.getShortDayNames(3)]}
return isc.DateChooser.$8w[this.dayNameLength-1]},isc.A.getDayCellButtonHTML=function isc_DateChooser_getDayCellButtonHTML(_1,_2,_3){if(_1==null)
return this.getCellButtonHTML("&nbsp;",null,_2,false,false,isc.Canvas.CENTER);var _4=(this.chosenDate&&(Date.compareLogicalDates(_1,this.chosenDate)==0)),_5=(_1.getMonth()!=this.month);var _6="dateFromId",_7=_1.getFullYear()+"_"+_1.getMonth()+"_"+_1.getDate();if(this.disableWeekends&&Date.getWeekendDays().contains(_1.getDay())){_5=true;_6=null}
return this.getCellButtonHTML(_1.getDate(),_2,_4,_5,isc.Canvas.CENTER,null,_6,_7)},isc.A.dateIsSelected=function isc_DateChooser_dateIsSelected(_1){return null},isc.A.showPrevMonth=function isc_DateChooser_showPrevMonth(){if(--this.month==-1){this.month=11;this.year--}
this.updateUI()},isc.A.showNextMonth=function isc_DateChooser_showNextMonth(){if(++this.month==12){this.month=0;this.year++}
this.updateUI()},isc.A.updateHeader=function isc_DateChooser_updateHeader(){if(!this.showNavigationLayout&&this.navigationLayout){this.navigationLayout.hide()}else if(this.showNavigationLayout){this.navigationLayout.show();var _1=this.navigationLayout.members;if(this.weekChooserButton){if(this.showWeekChooser&&!_1.contains(this.weekChooserButton)){this.navigationLayout.addMember(this.weekChooserButton,0);this.weekChooserButton.show()}else if(!this.showWeekChooser&&_1.contains(this.weekChooserButton)){this.navigationLayout.removeMember(this.weekChooserButton);this.weekChooserButton.clear()}}
if(this.fiscalYearChooserButton){if(this.showFiscalYearChooser&&!_1.contains(this.fiscalYearChooserButton)){this.navigationLayout.addMember(this.fiscalYearChooserButton,0);this.fiscalYearChooserButton.show()}else if(!this.showFiscalYearChooser&&_1.contains(this.fiscalYearChooserButton)){this.navigationLayout.removeMember(this.fiscalYearChooserButton);this.fiscalYearChooserButton.clear()}}}},isc.A.updateUI=function isc_DateChooser_updateUI(_1){var _2=new Date(this.year,this.month,this.chosenDate.getDate());if(_2.getMonth()>this.month)_2=isc.DateUtil.getEndOf(new Date(this.year,this.month,1),"M",true);this.updateHeader();this.monthChooserButton.setTitle(_2.getShortMonthName());this.yearChooserButton.setTitle(""+this.year);if(this.fiscalYearChooserButton){this.fiscalYearChooserButton.setTitle(""+_2.getFiscalYear(this.getFiscalCalendar()).fiscalYear)}
this.updateWeekChooser(_1!=null?_1:(this.fiscalYearChooserButton?_2.getFiscalWeek(this.getFiscalCalendar()):new Date(_2.getTime()+(4*86400000)).getWeek(this.firstDayOfWeek)));var _3=this.startYear&&this.startYear==_2.getFullYear(),_4=this.endYear&&this.endYear==_2.getFullYear();this.previousYearButton.setDisabled(_3);this.previousMonthButton.setDisabled(_3&&_2.getMonth()==0);this.nextMonthButton.setDisabled(_4&&_2.getMonth()==11);this.nextYearButton.setDisabled(_4);if(!this.showTimeItem&&this.timeForm){this.timeLayout.hide();if(this.applyButton)this.applyButton.hide()}else if(this.showTimeItem){this.recreateTimeItem(isc.Date.getLogicalTimeOnly(this.chosenDate));this.timeLayout.show();if(this.applyButton)this.applyButton.show()}
this.updateGridData(_2)},isc.A.updateWeekChooser=function isc_DateChooser_updateWeekChooser(_1,_2){if(this.weekChooserButton){this.weekChooserButton.setTitle(""+_1);if(!_2&&this.dateGrid)this.dateGrid.setSelectedWeek(_1)}},isc.A.showMonth=function isc_DateChooser_showMonth(_1){this.month=_1;if(this.monthMenu)this.monthMenu.hide();this.bringToFront();this.updateUI()},isc.A.getFiscalCalendar=function isc_DateChooser_getFiscalCalendar(){return this.fiscalCalendar||Date.getFiscalCalendar()},isc.A.setFiscalCalendar=function isc_DateChooser_setFiscalCalendar(_1){this.fiscalCalendar=_1},isc.A.showWeek=function isc_DateChooser_showWeek(_1){if(this.fiscalYearChooserButton){var _2=Date.createLogicalDate(this.year,this.month,this.chosenDate.getDate());var _3=this.getFiscalCalendar(),_4=Date.getFiscalStartDate(_2),_5=new Date(_4.getFullYear(),_3.defaultMonth,_3.defaultDate+(7*_1))}else{_5=new Date(this.year,0,1+(7*_1))}
this.year=_5.getFullYear();this.month=_5.getMonth();if(this.weekMenu)this.weekMenu.hide();this.bringToFront();this.updateUI(_1)},isc.A.showMonthMenu=function isc_DateChooser_showMonthMenu(){if(!this.monthMenu){var _1=[[]],_2=Date.createLogicalDate(2001,0,1);for(var i=0;i<12;i++){_2.setMonth(i);_1[_1.length-1].add({contents:_2.getShortMonthName(),eventPart:"showMonth",eventId:i});if((i+1)%3==0)_1.add([])}
this.monthMenu=isc.MonthChooser.newInstance({styleName:this.monthMenuStyle,left:this.monthChooserButton.getPageLeft()+5,top:this.getPageTop()+this.navigationLayoutHeight,width:Math.min(this.getVisibleWidth(),120),height:Math.min(this.getVisibleHeight()-this.navigationLayoutHeight,80),items:_1,visibility:isc.Canvas.HIDDEN,baseButtonStyle:this.baseButtonStyle,dateChooser:this});var _4=this.monthChooserButton.getPageLeft()-
((this.monthMenu.getWidth()-this.monthChooserButton.getWidth())/2);this.monthMenu.setPageLeft(Math.max(_4,0))}else{var _5=this.getPageTop()+this.navigationLayoutHeight,_6=Math.min(this.getVisibleWidth(),120),_7=Math.min(this.getVisibleHeight()-this.navigationLayoutHeight,80),_8=this.monthChooserButton.getWidth(),_4=this.monthChooserButton.getPageLeft()-((_6-_8)/2);this.monthMenu.setPageRect(_4,_5,_6,_7)}
this.monthMenu.showModal()},isc.A.showWeekMenu=function isc_DateChooser_showWeekMenu(){if(!this.weekMenu){var _1=[[]],_2=Date.createLogicalDate(2001,0,1);for(var i=1;i<53;i++){_1[_1.length-1].add({contents:""+i,eventPart:"showWeek",eventId:i});if((i)%7==0)_1.add([])}
this.weekMenu=isc.WeekChooser.newInstance({styleName:this.weekMenuStyle,left:this.weekChooserButton.getPageLeft()+5,top:this.getPageTop()+this.navigationLayoutHeight,width:Math.min(this.getVisibleWidth(),120),height:Math.min(this.getVisibleHeight()-this.navigationLayoutHeight,80),items:_1,visibility:isc.Canvas.HIDDEN,baseButtonStyle:this.baseButtonStyle,dateChooser:this});var _4=this.weekChooserButton.getPageLeft()-
((this.weekMenu.getWidth()-this.weekChooserButton.getWidth())/2);this.weekMenu.setPageLeft(Math.max(_4,0))}else{var _5=this.getPageTop()+this.navigationLayoutHeight,_6=Math.min(this.getVisibleWidth(),120),_7=Math.min(this.getVisibleHeight()-this.navigationLayoutHeight,80),_8=this.weekChooserButton.getWidth(),_4=this.weekChooserButton.getPageLeft()-((_6-_8)/2);this.weekMenu.setPageRect(Math.max(_4,0),_5,_6,_7)}
this.weekMenu.showModal()},isc.A.showPrevYear=function isc_DateChooser_showPrevYear(){this.year--;this.updateUI()},isc.A.showNextYear=function isc_DateChooser_showNextYear(){if(this.year<this.endYear){this.year++;this.updateUI()}},isc.A.showYear=function isc_DateChooser_showYear(_1){if(_1<this.startYear||_1>this.endYear)return;this.year=_1;if(this.yearMenu)this.yearMenu.hide();this.updateUI()},isc.A.showFiscalYear=function isc_DateChooser_showFiscalYear(_1){var f=Date.getFiscalYear(_1,this.getFiscalCalendar());this.year=f.year;this.month=f.month;if(this.yearMenu)this.yearMenu.hide();this.updateUI()},isc.A.showFiscalYearMenu=function isc_DateChooser_showFiscalYearMenu(){this.showYearMenu(true)},isc.A.showYearMenu=function isc_DateChooser_showYearMenu(_1){var _2=!_1?this.yearChooserButton:this.fiscalYearChooserButton;var _3=(this.endYear-this.startYear),_4=Math.round(_3/10)>3?Math.round(_3/10):3;var _5=[[]];for(var i=0;i<=(this.endYear-this.startYear);i++){var _7=i+this.startYear;_5[_5.length-1].add({contents:_7,eventPart:"showYear",eventId:_7});if((i+1)%_4==0)_5.add([])}
if(!this.yearMenu){this.yearMenu=isc.YearChooser.newInstance({styleName:this.yearMenuStyle,top:this.getPageTop()+this.navigationLayoutHeight,width:Math.min(this.getVisibleWidth(),(40*_4)),height:Math.min(this.getVisibleHeight()-this.navigationLayoutHeight,80),items:_5,visibility:isc.Canvas.HIDDEN,baseButtonStyle:this.baseButtonStyle,dateChooser:this});var _8=_2.getPageLeft()-((this.yearMenu.getWidth()-_2.getWidth())/2);this.yearMenu.setPageLeft(Math.max(_8,0))}else{var _9=this.getPageTop()+this.navigationLayoutHeight,_10=Math.min(this.getVisibleWidth(),(40*_4)),_11=Math.min(this.getVisibleHeight()-this.navigationLayoutHeight,80),_12=_2.getWidth(),_8=_2.getPageLeft()-((_10-_12)/2);this.yearMenu.items=_5;this.yearMenu.setPageRect(Math.max(_8,0),_9,_10,_11)}
var _13=_1;this.yearMenu.showYearClick=function(_14,_15){if(_13)this.dateChooser.showFiscalYear(parseInt(_15));else this.dateChooser.showYear(parseInt(_15))}
this.yearMenu.showModal()},isc.A.dateClick=function isc_DateChooser_dateClick(_1,_2,_3,_4){var _5=this.chosenDate=Date.createLogicalDate(_1,_2,_3);var _6=this.year!=_1;if(_6)this.year=_1;if(_6||this.month!=_2)this.showMonth(_2);this.month=_2;this.year=_1;if(this.showTimeItem){var _7=this.getTimeItem().getValue();_5=this.chosenDate=Date.combineLogicalDateAndTime(_5,_7)}
if(_4)this.dateGrid.selectDateCell(_5);this.dataChanged();if(window.dateClickCallback){if(isc.isA.String(window.dateClickCallback)){window.dateClickCallback=isc.$aq("date",window.dateClickCallback)}
window.dateClickCallback(_5)}
if(this.autoHide)this.hide();if(this.autoClose)this.close();return _5},isc.A.dataChanged=function isc_DateChooser_dataChanged(){},isc.A.cancelClick=function isc_DateChooser_cancelClick(){this.close()},isc.A.todayClick=function isc_DateChooser_todayClick(){var _1=new Date();this.dateClick(_1.getFullYear(),_1.getMonth(),_1.getDate(),true)},isc.A.applyClick=function isc_DateChooser_applyClick(){var _1=this.chosenDate.duplicate();this.dateClick(_1.getFullYear(),_1.getMonth(),_1.getDate(),true)},isc.A.close=function isc_DateChooser_close(){this.hideClickMask();if(this.yearMenu&&this.yearMenu.isVisible())this.yearMenu.hide();if(this.monthMenu&&this.monthMenu.isVisible())this.monthMenu.hide();if(this.isDrawn())this.clear()},isc.A.dateFromIdClick=function isc_DateChooser_dateFromIdClick(_1,_2){var _3=_2.split("_");if(_3.length!=3)return null;var _4=parseInt(_3[0]),_5=parseInt(_3[1]),_6=parseInt(_3[2]);return this.dateClick(_4,_5,_6)});isc.B._maxIndex=isc.C+42;isc.A=isc.DateChooser;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.getSharedDateChooser=function isc_c_DateChooser_getSharedDateChooser(_1){if(!this.$8x){this.$8x=this.create(_1,{_generated:true,autoHide:true,showCancelButton:true,closeOnEscapeKeypress:true});return this.$8x}
isc.addProperties(this.$8x,_1);return this.$8x});isc.B._maxIndex=isc.C+1;isc.ClassFactory.defineClass("WeekChooser","ButtonTable");isc.A=isc.WeekChooser.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.showWeekClick=function isc_WeekChooser_showWeekClick(_1,_2){this.dateChooser.showWeek(parseInt(_2))});isc.B._maxIndex=isc.C+1;isc.ClassFactory.defineClass("MonthChooser","ButtonTable");isc.A=isc.MonthChooser.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.showMonthClick=function isc_MonthChooser_showMonthClick(_1,_2){this.dateChooser.showMonth(parseInt(_2))});isc.B._maxIndex=isc.C+1;isc.ClassFactory.defineClass("YearChooser","ButtonTable");isc.A=isc.YearChooser.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.showYearClick=function isc_YearChooser_showYearClick(_1,_2){this.dateChooser.showYear(parseInt(_2))});isc.B._maxIndex=isc.C+1;isc.ClassFactory.defineClass("Slider",isc.Canvas);isc.A=isc.Slider;isc.A.DOWN="down";isc.A.UP="";isc.A.EVENTNAME="sliderMove";isc.A=isc.Slider.getPrototype();isc.A.title="Set Value";isc.A.length=200;isc.A.vertical=true;isc.A.thumbThickWidth=23;isc.A.thumbThinWidth=17;isc.A.trackWidth=7;isc.A.skinImgDir="images/Slider/";isc.A.thumbSrc="thumb.gif";isc.A.trackSrc="track.gif";isc.A.trackCapSize=6;isc.A.trackImageType=isc.Img.STRETCH;isc.A.showTitle=true;isc.A.showRange=true;isc.A.showValue=true;isc.A.labelWidth=50;isc.A.labelHeight=20;isc.A.labelSpacing=5;isc.A.titleStyle="sliderTitle";isc.A.rangeStyle="sliderRange";isc.A.valueStyle="sliderValue";isc.A.value=1;isc.A.minValue=1;isc.A.maxValue=100;isc.A.roundValues=true;isc.A.roundPrecision=1;isc.A.flipValues=false;isc.A.canFocus=true;isc.A.stepPercent=5;isc.A.animateThumbTime=250;isc.A.animateThumbAcceleration="slowStartandEnd";isc.A.valueChangedOnDrag=true;isc.A.valueChangedOnRelease=true;isc.A.valueChangedOnClick=true;isc.A=isc.Slider.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.hValueLabelWidth=5;isc.A.trackConstructor="StretchImg";isc.A.thumbConstructor="Img";isc.B.push(isc.A.initWidget=function isc_Slider_initWidget(){this.Super("initWidget",arguments);if(!(this.minValue<=this.maxValue)){this.logWarn("Slider specified with minValue:"+this.minValue+", greater than maxValue:"+this.maxValue+" - reversing max and min value.");var _1=this.minValue;this.minValue=this.maxValue;this.maxValue=_1}
if(this.minValue!=null)this.minValue=this.$85d(this.minValue);if(this.maxValue!=null)this.maxValue=this.$85d(this.maxValue);this.setUpSize();this.$80();if(this.showTitle)this._titleLabel=this.addChild(this.$54());if(this.showRange){this.$50=this.addChild(this.$51("min"));this.$52=this.addChild(this.$51("max"))}
if(this.showValue){this._valueLabel=this._thumb.addPeer(this.$53());this._valueLabel.sendToBack();this.$81()}
this.setValue(this.value,!(this.animateThumbInit==true))},isc.A.setUpSize=function isc_Slider_setUpSize(){var _1=this.$pn,_2=this.$po;if(this.vertical){if(_1==null){var _3=Math.max(this.thumbThickWidth,this.trackWidth);if(this.showValue)_3+=this.labelWidth+this.labelSpacing;if(this.showRange)_3+=this.labelWidth+this.labelSpacing;this.logInfo("defaulting width to "+_3+"px");this.setWidth(_3)}
if(_2==null){var _4=this.length;if(this.showTitle)_4+=this.labelHeight+this.labelSpacing;if(this.showValue&&(this.labelHeight>this.thumbThinWidth)){_4+=(this.labelHeight-this.thumbThinWidth)}
this.logInfo("no specified height on vertical Slider - defaulting to:"+_4+" based on slider.length of "+this.length);this.setHeight(_4)}else{this.length=this.getHeight();if(this.showTitle)this.length-=(this.labelHeight+this.labelSpacing);if(this.showValue&&(this.labelHeight>this.thumbThinWidth)){this.length-=(this.labelHeight-this.thumbThinWidth)}
this.logInfo("setting slider track length to:"+this.length+", based on specified height")}}else{if(_2==null){var _4=Math.max(this.thumbThickWidth,this.trackWidth);if(this.showValue)_4+=this.labelHeight+this.labelSpacing;if(this.showRange)_4+=this.labelHeight+this.labelSpacing;this.logInfo("defaulting height to "+_4+"px");this.setHeight(_4)}
if(_1==null){var _3=(this.length+(this.showTitle?this.labelWidth+this.labelSpacing:0));if(this.showValue&&(this.labelWidth>this.thumbThinWidth)){_3+=(this.labelWidth-this.thumbThinWidth)}
this.logInfo("no specified width on horizontal Slider - defaulting to:"+_3+" based on slider.length of "+this.length);this.setWidth(_3)}else{this.length=this.getWidth();if(this.showTitle)this.length-=(this.labelWidth+this.labelSpacing);if(this.showValue&&(this.hValueLabelWidth>this.thumbThinWidth)){this.length-=(this.hValueLabelWidth-this.thumbThinWidth)}
this.logInfo("setting slider track length to:"+this.length+", based on specified width")}}
this.$8y=this.length-this.thumbThinWidth;if(this.numValues&&this.numValues>1){this.$8z=this.$8y/(this.numValues-1)}},isc.A.resizeBy=function isc_Slider_resizeBy(_1,_2){this.Super("resizeBy",arguments);if(!this._track)return;var _3=this.vertical;if((_3&&_2!=0)||(!_3&&_1!=0)){this.length+=_3?_2:_1;this.$8y=this.length-this.thumbThinWidth;if(_3)this._track.resizeBy(0,_2);else this._track.resizeBy(_1,0);if(this.numValues&&this.numValues>1){this.$8z=this.$8y/(this.numValues-1)}
this.setValue(this.value,true,true);if(this.showRange){if(this.vertical){var _4=this.flipValues?this.$52:this.$50;_4.moveBy(0,_2)}else{var _4=this.flipValues?this.$50:this.$52;_4.moveBy(_1,0)}}}},isc.A.$51=function isc_Slider__createRangeLabel(_1){var _2,_3,_4,_5,_6=(this.vertical?_1=="max":_1=="min");if(this.flipValues)_6=!_6;if(this.vertical){_2=Math.max(this.thumbThickWidth,this.trackWidth)+this.labelSpacing+(this.showValue?this.labelWidth+this.labelSpacing:0);_4=isc.Canvas.LEFT;if(_6){_3=(this.showTitle?this.labelHeight+this.labelSpacing:0);_5=isc.Canvas.TOP}else{_3=(this.showTitle?this.labelHeight+this.labelSpacing:0)+(this.length-this.labelHeight);_5=isc.Canvas.BOTTOM}}else{_3=Math.max(this.thumbThickWidth,this.trackWidth)+this.labelSpacing+(this.showValue?this.labelHeight+this.labelSpacing:0);_5=isc.Canvas.TOP;if(_6){_2=(this.showTitle?this.labelWidth+this.labelSpacing:0);_4=isc.Canvas.LEFT}else{_2=(this.showTitle?this.labelWidth+this.labelSpacing:0)+this.length-this.labelWidth;_4=isc.Canvas.RIGHT}}
return isc.Label.create({ID:this.getID()+"_"+_1+"Label",autoDraw:false,left:_2,top:_3,width:this.labelWidth,height:this.labelHeight,wrap:false,align:_4,valign:_5,className:this.rangeStyle,contents:(_1=="min"?(this.minValueLabel?this.minValueLabel:this.minValue):(this.maxValueLabel?this.maxValueLabel:this.maxValue))})},isc.A.$54=function isc_Slider__createTitleLabel(){var _1=(this.vertical?isc.Canvas.CENTER:isc.Canvas.RIGHT);return isc.Label.create({ID:this.getID()+"_titleLabel",autoDraw:false,left:0,top:0,width:(this.vertical?this.getWidth():this.labelWidth),height:(this.vertical?this.labelHeight:this.getHeight()),align:_1,className:this.titleStyle,contents:this.title})},isc.A.$53=function isc_Slider__createValueLabel(){var _1,_2,_3,_4,_5;if(this.vertical){_1=this._thumb.getLeft()-this.labelWidth-this.labelSpacing;_2=this._thumb.getTop()+parseInt(this._thumb.getHeight()/2-this.labelHeight/2);_4=isc.Canvas.RIGHT;_5=isc.Canvas.CENTER;_3=this.labelWidth}else{_1=this._thumb.getLeft()+parseInt(this._thumb.getWidth()/2-this.labelWidth/2);_2=this._thumb.getTop()-this.labelHeight-this.labelSpacing;_4=isc.Canvas.CENTER;_5=isc.Canvas.BOTTOM;_3=this.hValueLabelWidth}
var _6=isc.Label.create({ID:this.getID()+"_valueLabel",autoDraw:false,left:_1,top:_2,width:_3,height:this.labelHeight,wrap:false,align:_4,className:this.valueStyle,contents:this.value,mouseUp:function(){return false},moveWithMaster:false,observes:[{source:this,message:"valueChanged",action:"this.$81();"}]});if(!this.vertical){isc.addMethods(_6,{draw:function(){var _7=this.visibility
this.hide();this.Super("draw",arguments);this.parentElement.$81();this.setVisibility(this.prevVis)}})};return _6},isc.A.$80=function isc_Slider__createTrackLayout(){var _1=this.$82(),_2,_3,_4=(this.vertical?this.trackWidth:this.length),_5=(this.vertical?this.length:this.trackWidth),_6,_7,_8=(this.vertical?this.thumbThickWidth:this.thumbThinWidth),_9=(this.vertical?this.thumbThinWidth:this.thumbThickWidth);var _10=this.thumbThickWidth>this.trackWidth;if(_10){if(this.vertical){_6=_1[0];_2=_6+parseInt(this.thumbThickWidth/2-this.trackWidth/2);_3=_1[1];_7=_1[1]}else{_7=_1[1];_3=_7+parseInt(this.thumbThickWidth/2-this.trackWidth/2);_2=_1[0];_6=_1[0]}}else{if(this.vertical){_2=_1[0];_6=_2+parseInt(this.trackWidth/2-this.thumbThinWidth/2);_3=_1[1];_7=_1[1]}else{_3=_1[1];_7=_3+parseInt(this.trackWidth/2-this.thumbThinWidth/2);_2=_1[0];_6=_1[0]}}
this.logDebug("calculated coords for track:"+[_2,_3,_4,_5]);this.logDebug("calculated coords for thumb:"+[_6,_7,_8,_9]);this._track=this.addChild(this.$83(_3,_2,_4,_5));this._thumb=this._track.addPeer(this.$84(_7,_6,_8,_9))},isc.A.$82=function isc_Slider__getTrackLayoutPos(){var _1=this.vertical?(this.showValue?this.labelWidth+this.labelSpacing:0):(this.showTitle?this.labelWidth+this.labelSpacing:0),_2=this.vertical?(this.showTitle?this.labelHeight+this.labelSpacing:0):(this.showValue?this.labelHeight+this.labelSpacing:0);if(this.showValue){if(this.vertical&&(this.labelHeight>this.thumbThinWidth))
_2+=Math.round((this.labelHeight-this.thumbThinWidth)/2);if(this.horizontal&&(this.labelWidth>this.thumbThinWidth))
_1+=Math.round((this.labelWidth-this.thumbThinWidth)/2)}
return[_1,_2]},isc.A.$83=function isc_Slider__createTrack(_1,_2,_3,_4){return this.createAutoChild("track",{left:_2,top:_1,width:_3,height:_4,vertical:this.vertical,capSize:this.trackCapSize,src:"[SKIN]"+(this.vertical?"v":"h")+this.trackSrc,skinImgDir:this.skinImgDir,imageType:this.trackImageType,styleName:this[(this.vertical?"v":"h")+"TrackStyle"],overflow:"hidden",showDisabled:true,canFocus:true,tabIndex:-1,cacheImageSizes:false})},isc.A.$84=function isc_Slider__createThumb(_1,_2,_3,_4){var _5
return this.createAutoChild("thumb",{left:_2,top:_1,width:_3,height:_4,src:"[SKIN]"+(this.vertical?"v":"h")+this.thumbSrc,skinImgDir:this.skinImgDir,overflow:"hidden",showDisabled:true,styleName:this[(this.vertical?"v":"h")+"ThumbStyle"],canDrag:true,dragAppearance:isc.EventHandler.NONE,cursor:isc.Canvas.HAND,dragMove:function(){this.parentElement.$85();return false},$jo:false,dragStart:function(){var _6=isc.EventHandler;_6.dragOffsetX=-1*(this.getPageLeft()-_6.mouseDownEvent.x);_6.dragOffsetY=-1*(this.getPageTop()-_6.mouseDownEvent.y);this.parentElement.$86=true;return _6.STOP_BUBBLING},dragStop:function(){this.parentElement.$86=false;this.setState(isc.Slider.UP);if(this.parentElement.valueChangedOnRelease){this.parentElement.valueChanged(this.parentElement.value)}
return false},mouseDown:function(){this.setState(isc.Slider.DOWN)},mouseUp:function(){this.setState(isc.Slider.UP);return false},canFocus:true,tabIndex:-1})},isc.A.$1260=function isc_Slider__getValueFromCoords(_1,_2,_3){var _4,_5,_6=isc.EventHandler;if(this.vertical){var _7=this._track.getTop(),_8=this.$8y+_7;_4=_2[1]-_6.dragOffsetY-this.getPageTop();_4=Math.max(_7,Math.min(_8,_4));var _9=_4-_7;if(this.numValues){_9=Math.round(_9/this.$8z)*this.$8z;_4=Math.round(_9)+_7}
if(_4==this._thumb.getTop())return;this.logDebug("drag-moving thumb to:"+_4)
if(_1&&this.animateThumb){this.$87=this._thumb.animateMove(this._thumb.getLeft(),_4,null,this.animateThumbTime,this.animateThumbAcceleration)}else if(_3){this._thumb.setTop(_4)}
_5=(this.flipValues?_9/this.$8y:1-_9/this.$8y)}else{var _10=this._track.getLeft(),_8=this.$8y+_10;_4=_2[0]-_6.dragOffsetX-this.getPageLeft();_4=Math.max(_10,Math.min(_8,_4));var _9=_4-_10;if(this.numValues){_9=Math.round(_9/this.$8z)*this.$8z;_4=Math.round(_9)+_10}
if(_4==this._thumb.getLeft())return;this.logDebug("drag-moving thumb to:"+_4)
if(_1&&this.animateThumb){this.$87=this._thumb.animateMove(_4,this._thumb.getTop(),null,this.animateThumbTime,this.animateThumbAcceleration)}else if(_3){this._thumb.setLeft(_4)}
_5=(this.flipValues?1-_9/this.$8y:_9/this.$8y)}
if(this.maxValue==this.minValue)return this.minValue;var _11=_5*(this.maxValue-this.minValue)+this.minValue
return this.$85d(_11)},isc.A.$85=function isc_Slider__thumbMove(_1){var _2=this.$1260(_1,[isc.EH.getX(),isc.EH.getY()],true);if(_2!=null)this.value=_2;this.logDebug("slider value from drag-move:"+this.value);if(this.valueChangedOnDrag||!this.$86){this.valueChanged(this.value)}
if(this.sliderTarget)isc.EventHandler.handleEvent(this.sliderTarget,isc.Slider.EVENTNAME,this)},isc.A.$85d=function isc_Slider__getRoundedValue(_1){if(this.roundValues)_1=Math.round(_1);else if(this.roundPrecision!=null){var _2=Math.pow(10,this.roundPrecision);_1=(Math.round(_1*_2))/_2}
return _1},isc.A.$81=function isc_Slider__updateValueLabel(){var _1=this._valueLabel;if(_1==null)return;_1.setContents(this.getValue());var _2=this._thumb;if(this.vertical){_1.setTop(parseInt((_2.getTop()+_2.getHeight()/2)-_1.getHeight()/2))}else{if(_1.isDrawn())_1.redraw("sizing label");var _3=_1.getVisibleWidth(),_4=parseInt((_2.getLeft()+_2.getWidth()/2)-_3/2);if(_4+_3>this.getWidth()){_4=this.getWidth()-_3}
if(_4<0)_4=0;_1.setLeft(_4)}},isc.A.mouseUp=function isc_Slider_mouseUp(){isc.EventHandler.dragOffsetX=isc.EventHandler.dragOffsetY=Math.floor(this.thumbThinWidth/2);if(this.valueChangedOnClick)this.$85(true)},isc.A.$1261=function isc_Slider__getThumbPositionFromValue(_1,_2){var _3,_4;if(!isc.isA.Number(_1))return;_1=Math.max(this.minValue,(Math.min(_1,this.maxValue)));_1=this.$85d(_1);if(_2)this.value=_1;if(this.minValue==this.maxValue)_3=1;else _3=(_1-this.minValue)/(this.maxValue-this.minValue);_4=_3*this.$8y;if(this.vertical){return this._track.getTop()+parseInt(this.flipValues?_4:this.$8y-_4)}else{return this._track.getLeft()+parseInt(this.flipValues?this.$8y-_4:_4)}},isc.A.setValue=function isc_Slider_setValue(_1,_2,_3){var _4=this.$1261(_1,true);if(_4==null)return;if(this.vertical){if(this.animateThumb&&!_2){this.$87=this._thumb.animateMove(this._thumb.getLeft(),_4,null,this.animateThumbTime,this.animateThumbAcceleration)}else{this._thumb.setTop(_4)}}else{if(this.animateThumb&&!_2){this.$87=this._thumb.animateMove(_4,this._thumb.getTop(),null,this.animateThumbTime,this.animateThumbAcceleration)}else{this._thumb.setLeft(_4)}}
if(!_3)this.valueChanged(this.value);if(this.sliderTarget)isc.EventHandler.handleEvent(this.sliderTarget,isc.Slider.EVENTNAME,this)},isc.A.getValue=function isc_Slider_getValue(){return this.value},isc.A.valueChanged=function isc_Slider_valueChanged(_1){},isc.A.valueIsChanging=function isc_Slider_valueIsChanging(){return(this.$86==true)},isc.A.handleKeyPress=function isc_Slider_handleKeyPress(_1,_2){var _3=_1.keyName;if(_3=="Home"){this.setValue(this.minValue,true);return false}
if(_3=="End"){this.setValue(this.maxValue,true);return false}
var _4=(this.maxValue-this.minValue)*this.stepPercent/100;if(this.roundValues&&_4<1)_4=1;if(this.vertical){if((this.flipValues&&_3=="Arrow_Up")||(!this.flipValues&&_3=="Arrow_Down"))
{this.setValue(this.getValue()-_4,true);return false}else if((this.flipValues&&_3=="Arrow_Down")||(!this.flipValues&&_3=="Arrow_Up"))
{this.setValue(this.getValue()+_4,true);return false}}else{if((this.flipValues&&_3=="Arrow_Left")||(!this.flipValues&&_3=="Arrow_Right"))
{this.setValue(this.getValue()+_4,true)
return false}else if((this.flipValues&&_3=="Arrow_Right")||(!this.flipValues&&_3=="Arrow_Left"))
{this.setValue(this.getValue()-_4,true)
return false}}
if(this.keyPress){this.convertToMethod("keyPress");return this.keyPress(_1,_2)}},isc.A.setCanFocus=function isc_Slider_setCanFocus(_1){this.Super("canFocus",arguments);if(this._thumb!=null)this._thumb.setCanFocus(_1);if(this._track!=null)this._track.setCanFocus(_1)},isc.A.setMinValue=function isc_Slider_setMinValue(_1){_1=this.$85d(_1);this.minValue=_1;if(this.$50)this.$50.setContents(_1);if(this.getValue()<this.minValue)this.setValue(this.minValue)},isc.A.setMaxValue=function isc_Slider_setMaxValue(_1){_1=this.$85d(_1);this.maxValue=_1;if(this.$52)this.$52.setContents(_1);if(this.getValue()>this.maxValue)this.setValue(this.maxValue)},isc.A.setNumValues=function isc_Slider_setNumValues(_1){this.numValues=_1;this.$8z=this.$8y/(this.numValues-1);this.setValue(this.minValue)},isc.A.setTitle=function isc_Slider_setTitle(_1){this._titleLabel.setContents(_1)},isc.A.setLength=function isc_Slider_setLength(_1){this.length=_1;this.setUpSize()},isc.A.$74i=function isc_Slider__refreshChildren(){this._titleLabel.destroy();this._track.destroy();this._thumb.destroy();this._valueLabel.destroy();this.$50.destroy();this.$52.destroy();this.initWidget()},isc.A.setVertical=function isc_Slider_setVertical(_1){this.vertical=_1;this.$74i()},isc.A.setThumbThickWidth=function isc_Slider_setThumbThickWidth(_1){this.thumbThickWidth=_1;this.$74i()},isc.A.setThumbThinWidth=function isc_Slider_setThumbThinWidth(_1){this.thumbThinWidth=_1;this.$74i()},isc.A.setTrackWidth=function isc_Slider_setTrackWidth(_1){this.trackWidth=_1;this.$74i()},isc.A.setThumbSrc=function isc_Slider_setThumbSrc(_1){this.thumbSrc=_1;this.$74i()},isc.A.setTrackSrc=function isc_Slider_setTrackSrc(_1){this.trackSrc=_1;this.$74i()},isc.A.setTrackCapSize=function isc_Slider_setTrackCapSize(_1){this.trackCapSize=_1;this.$74i()},isc.A.setTrackImageType=function isc_Slider_setTrackImageType(_1){this.trackImageType=_1;this.$74i()},isc.A.setShowTitle=function isc_Slider_setShowTitle(_1){this.showTitle=_1;this.$74i()},isc.A.setShowRange=function isc_Slider_setShowRange(_1){this.showRange=_1;this.$74i()},isc.A.setShowValue=function isc_Slider_setShowValue(_1){this.showValue=_1;this.$74i()},isc.A.setLabelWidth=function isc_Slider_setLabelWidth(_1){this.labelWidth=_1;this.$74i()},isc.A.setLabelHeight=function isc_Slider_setLabelHeight(_1){this.labelHeight=_1;this.$74i()},isc.A.setLabelSpacing=function isc_Slider_setLabelSpacing(_1){this.labelSpacing=_1;this.$74i()},isc.A.setMaxValueLabel=function isc_Slider_setMaxValueLabel(_1){this.$52.setContents(_1)},isc.A.setRoundValues=function isc_Slider_setRoundValues(_1){this.roundValues=_1;this.$74i()},isc.A.setRoundPrecision=function isc_Slider_setRoundPrecision(_1){this.roundPrecision=_1;this.$74i()},isc.A.setFlipValues=function isc_Slider_setFlipValues(_1){this.flipValues=_1;this.$74i()},isc.A.setStepPercent=function isc_Slider_setStepPercent(_1){this.stepPercent=_1;this.$74i()});isc.B._maxIndex=isc.C+47;isc.Slider.registerStringMethods({valueChanged:"value"})
isc.defineClass("RangeSlider",isc.Canvas);isc.A=isc.RangeSlider;isc.A.$119c=1e-6;isc.A=isc.RangeSlider.getPrototype();isc.A.vertical=false;isc.A.minValue=0;isc.A.maxValue=0;isc.A.startValue=0;isc.A.endValue=0;isc.A.baseStyle="rangeSlider";isc.A.overflow="hidden";isc.A.thumbSize="7px";isc.A.labelStartDefaults={_constructor:isc.Label,wrap:false,overflow:"hidden"};isc.A.startThumbDefaults={_constructor:isc.Snapbar,wrap:false,overflow:"hidden",canDrag:true,keepInParentRect:true,canCollapse:false,showGrip:true,showClosedGrip:false,$1056:true,dragStart:function(){this.creator.oldStartValue=this.creator.startValue;this.creator.dragpoint=this.creator.vertical?isc.Event.mouseDownEvent.y:isc.Event.mouseDownEvent.x;this.creator.isDragging=true;this.creator.fireChangedEvent()},dragMove:function(){var _1=this.creator.vertical?this.creator.getValuesForPixels(isc.Event.lastEvent.y-this.creator.dragpoint):this.creator.getValuesForPixels(isc.Event.lastEvent.x-this.creator.dragpoint);this.creator.setStartValue(this.creator.oldStartValue+_1);this.creator.fireChangedEvent();return true},dragStop:function(){this.creator.isDragging=false;this.creator.fireChangedEvent()}};isc.A.labelDragDefaults={_constructor:isc.Label,overflow:"hidden",canDrag:true,keepInParentRect:true,dragAppearance:"none",dragMove:function(){var _1=this.creator.vertical?this.creator.getValuesForPixels(isc.Event.lastEvent.y-this.creator.dragpoint):this.creator.getValuesForPixels(isc.Event.lastEvent.x-this.creator.dragpoint);this.creator.setValues(this.creator.oldStartValue+_1,this.creator.oldEndValue+_1);this.creator.fireChangedEvent();return true},dragStart:function(){this.creator.oldStartValue=this.creator.startValue;this.creator.oldEndValue=this.creator.endValue;this.creator.dragpoint=this.creator.vertical?isc.Event.mouseDownEvent.y:isc.Event.mouseDownEvent.x;this.creator.isDragging=true;this.creator.fireChangedEvent()},dragStop:function(){this.creator.isDragging=false;this.creator.fireChangedEvent()}};isc.A.labelEndDefaults={_constructor:isc.Label,overflow:"hidden"};isc.A.endThumbDefaults={_constructor:isc.Snapbar,canDrag:true,overflow:"hidden",keepInParentRect:true,canCollapse:false,showGrip:true,$1056:true,dragStart:function(){this.creator.oldEndValue=this.creator.endValue;this.creator.dragpoint=this.creator.vertical?isc.Event.mouseDownEvent.y:isc.Event.mouseDownEvent.x;this.creator.isDragging=true;this.creator.fireChangedEvent()},dragMove:function(){var _1=this.creator.vertical?this.creator.getValuesForPixels(isc.Event.lastEvent.y-this.creator.dragpoint):this.creator.getValuesForPixels(isc.Event.lastEvent.x-this.creator.dragpoint);this.creator.setEndValue(this.creator.oldEndValue+_1);if(this.creator.scrollbar){this.creator.scrollbar.moveThumb()}
this.creator.fireChangedEvent();return true},dragStop:function(){this.creator.isDragging=false;this.creator.fireChangedEvent()}};isc.A.scrollbarDefaults={thumbDragStop:function(){this.Super("thumbDragStop",arguments);this.creator.thumbdragging=false;this.creator.isDragging=false;this.creator.updatePositions();this.creator.fireChangedEvent()},thumbDragStart:function(){this.Super("thumbDragStart",arguments);this.creator.thumbdragging=true;this.creator.isDragging=true;this.creator.oldStartValue=this.creator.startValue;this.creator.oldEndValue=this.creator.endValue;this.creator.dragpoint=this.getEventCoord();this.creator.fireChangedEvent()}};isc.A=isc.RangeSlider.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.initWidget=function isc_RangeSlider_initWidget(){this.Super("initWidget",arguments);if(this.maxValue<this.minValue){var x=this.minValue;this.minValue=this.maxValue;this.maxValue=x}
if(this.startValue<this.minValue){this.startValue=this.minValue}
if(this.endValue>this.maxValue){this.endValue=this.endValue}
if(!this.trackDefaults){isc.RangeSlider.setInstanceProperty("trackDefaults",this.getTrackDefaults())}
if(this.vertical){this.createControls(true)}
else{this.createControls()}},isc.A.getTrackDefaults=function isc_RangeSlider_getTrackDefaults(){return{overflow:"hidden",showDisabled:true,cacheImageSizes:false,_constructor:isc.Slider.getInstanceProperty("trackConstructor"),capSize:isc.Slider.getInstanceProperty("trackCapSize"),skinImgDir:isc.Slider.getInstanceProperty("skinImgDir"),imageType:isc.Slider.getInstanceProperty("trackImageType"),trackSrc:isc.Slider.getInstanceProperty("trackSrc")}},isc.A.resized=function isc_RangeSlider_resized(){this.Super("resized",arguments);if(this.showTrack){if(this.vertical){this.track.setWidth(isc.Slider.getInstanceProperty("trackWidth"));this.track.setHeight(this.height)}else{this.track.setHeight(isc.Slider.getInstanceProperty("trackWidth"));this.track.setWidth(this.width)}}
this.updatePositions()},isc.A.createControls=function isc_RangeSlider_createControls(_1){var _2=this;var _3;var _4=isc.Slider.getInstanceProperty("trackWidth");if(_1){this.scrollbar=this.addAutoChild("scrollbar",{_constructor:this.scrollbarConstructor,vertical:true,height:"100%"});if(this.scrollbar){_3=this.getWidth()-this.scrollbar.getWidth();this.scrollbar.setLeft(_3);this.scrollbar.setTop(0)}else{_3=this.getWidth()}
this.labelStart=this.addAutoChild("labelStart",{width:_3,baseStyle:this.baseStyle+"Start"});this.labelDrag=this.addAutoChild("labelDrag",{width:_3,baseStyle:this.baseStyle+"Selected"});this.labelEnd=this.addAutoChild("labelEnd",{width:_3,baseStyle:_2.baseStyle+"End"});this.startThumb=this.addAutoChild("startThumb",{height:this.thumbSize,width:_3,target:this.labelStart,vertical:false});this.endThumb=this.addAutoChild("endThumb",{height:this.thumbSize,width:_3,target:this.labelEnd,vertical:false,makeLabel:function(){this.Super("makeLabel",arguments);this.label.addMethods({getCustomState:function(){if(isc.Snapbar.getInstanceProperty("showClosedGrip")){return"closed"}}})}});this.track=this.addAutoChild("track",{left:Math.round(_3/2-_4/2),width:_4,height:this.height,vertical:this.vertical,src:"[SKIN]"+(this.vertical?"v":"h")+isc.Slider.getInstanceProperty("trackSrc"),styleName:isc.Slider.getInstanceProperty((this.vertical?"v":"h")+"TrackStyle")})}else{this.scrollbar=this.addAutoChild("scrollbar",{_constructor:isc.Scrollbar,vertical:false,width:"100%"});if(this.scrollbar){_3=this.getHeight()-this.scrollbar.getHeight();this.scrollbar.setLeft(0);this.scrollbar.setTop(_3)}else{_3=this.getHeight()}
this.labelStart=this.addAutoChild("labelStart",{height:_3,baseStyle:this.baseStyle+"Start"});this.labelDrag=this.addAutoChild("labelDrag",{height:_3,baseStyle:this.baseStyle+"Selected"});this.labelEnd=this.addAutoChild("labelEnd",{height:_3,baseStyle:this.baseStyle+"End"});this.startThumb=this.addAutoChild("startThumb",{width:this.thumbSize,height:_3,target:this.labelStart});this.endThumb=this.addAutoChild("endThumb",{width:this.thumbSize,height:_3,target:this.labelEnd,makeLabel:function(){this.Super("makeLabel",arguments);this.label.addMethods({getCustomState:function(){if(isc.Snapbar.getInstanceProperty("showClosedGrip")){return"closed"}}})}});this.track=this.addAutoChild("track",{top:Math.round(_3/2-_4/2),height:_4,width:this.width,vertical:this.vertical,src:"[SKIN]"+(this.vertical?"v":"h")+isc.Slider.getInstanceProperty("trackSrc"),styleName:isc.Slider.getInstanceProperty((this.vertical?"v":"h")+"TrackStyle")})};if(this.track){this.track.sendToBack()}
if(this.scrollbar){this.scrollbar.setScrollTarget(this)}
this.updatePositions()},isc.A.mouseUp=function isc_RangeSlider_mouseUp(){if(this.vertical){var _1=this.getOffsetY()-this.startThumb.getHeight()}else{var _1=this.getOffsetX()-this.startThumb.getWidth()}
this.slideSelectedRangeByPoints(_1);this.fireChangedEvent()},isc.A.slideSelectedRangeByPoints=function isc_RangeSlider_slideSelectedRangeByPoints(_1){var _2=this.getValuesForPixels(_1);var _3=(this.endValue-this.startValue)/2;this.isDragging=true;this.setValues(_2-_3+this.minValue,_2+_3+this.minValue);this.isDragging=false},isc.A.scrollToRatio=function isc_RangeSlider_scrollToRatio(_1,_2,_3){var _4=(this.scrollbar.getEventCoord()-this.dragpoint)/(this.scrollbar.trackSize());var _5=this.getValueForScrollRatio(_4);this.setValues(this.oldStartValue+_5,this.oldEndValue+_5);this.fireChangedEvent()},isc.A.scrollByDelta=function isc_RangeSlider_scrollByDelta(_1,_2,_3){var _4=this.endValue-this.startValue;if(this.vertical){var w=this.getHeight()-this.startThumb.getHeight()-this.endThumb.getHeight()}else{var w=this.getWidth()-this.startThumb.getWidth()-this.endThumb.getWidth()}
var _6=(this.maxValue-this.minValue)/w;var _7=20*_6*_2;var _8=this.startValue+_7;var _9=this.endValue+_7;if(_8<this.minValue){_8=this.minValue;_9=this.minValue+_4}
if(_9>this.maxValue){_9=this.maxValue;_8=this.maxValue-_4}
this.isDragging=true;this.setValues(_8,_9);this.isDragging=false;this.fireChangedEvent()},isc.A.scrollByPage=function isc_RangeSlider_scrollByPage(_1,_2,_3){var _4=Math.max((this.endValue-this.startValue),0)*_2;var _5=this.startValue+_4;var _6=this.endValue+_4;if(_5<this.minValue){_5=this.minValue;_6=this.minValue+Math.abs(_4)}
if(_6>this.maxValue){_6=this.maxValue;_5=this.maxValue-Math.abs(_4)}
this.isDragging=true;this.setValues(_5,_6);this.isDragging=false;this.fireChangedEvent()},isc.A.getViewportRatio=function isc_RangeSlider_getViewportRatio(_1){var _2=this.maxValue-this.minValue,_3=0;if(this.thumbdragging){_3=this.oldEndValue-this.oldStartValue}else{_3=this.endValue-this.startValue}
return(Math.abs(_2)<isc.RangeSlider.$119c?0:_3/_2)},isc.A.getScrollRatio=function isc_RangeSlider_getScrollRatio(_1){var _2=this.maxValue-this.minValue,_3=this.endValue-this.startValue;return(Math.abs(_2-_3)<isc.RangeSlider.$119c?0:(this.startValue-this.minValue)/(_2-_3))},isc.A.getValueForScrollRatio=function isc_RangeSlider_getValueForScrollRatio(_1){return _1*(this.maxValue-this.minValue)},isc.A.getValuesForPixels=function isc_RangeSlider_getValuesForPixels(_1){if(this.vertical){return _1*(this.maxValue-this.minValue)/(this.getHeight())}
else{return _1*(this.maxValue-this.minValue)/(this.getWidth())}},isc.A.updatePositions=function isc_RangeSlider_updatePositions(){if(this.vertical){var w=this.getHeight()-this.startThumb.getHeight()-this.endThumb.getHeight()}else{var w=this.getWidth()-this.startThumb.getWidth()-this.endThumb.getWidth()}
var _2=0;if(this.maxValue-this.minValue>0){_2=w/(this.maxValue-this.minValue)}
var _3=Math.round((this.startValue-this.minValue)*_2);var _4=Math.round((this.endValue-this.startValue)*_2);var _5=Math.round((this.maxValue-this.endValue)*_2);var _6=Math.round((this.startValue-this.minValue+this.endValue-this.startValue)*_2);if(this.vertical){if(_3==0){this.startThumb.target=this.labelDrag}else{this.labelStart.show();this.labelStart.setTop(0);this.labelStart.setHeight(_3)}
if(_4==0){this.labelDrag.hide()}else{this.labelDrag.show();this.labelDrag.setHeight(_4);this.labelDrag.setTop(_3+this.startThumb.getHeight())}
if(_5==0){this.labelEnd.hide()}else{this.labelEnd.show();this.labelEnd.setTop(_6+this.startThumb.getHeight()+this.endThumb.getHeight());this.labelEnd.setHeight(_5)}
this.startThumb.setTop(_3);this.endThumb.setTop(_6+this.startThumb.getHeight())}
else{if(_3==0){this.labelStart.hide()}
else{this.labelStart.show();this.labelStart.setLeft(0);this.labelStart.setWidth(_3)}
if(_4==0){this.labelDrag.hide()}
else{this.labelDrag.show();this.labelDrag.setWidth(_4);this.labelDrag.setLeft(_3+this.startThumb.getWidth())}
if(_5==0){this.labelEnd.hide()}else{this.labelEnd.show();this.labelEnd.setLeft(_6+this.startThumb.getWidth()+this.endThumb.getWidth());this.labelEnd.setWidth(_5)}
this.startThumb.setLeft(_3);this.endThumb.setLeft(_6+this.startThumb.getWidth())}
if(this.scrollbar){this.scrollbar.setThumb()}},isc.A.clampToMinMax=function isc_RangeSlider_clampToMinMax(_1){if(_1<=this.minValue){_1=this.minValue}
if(_1>=this.maxValue){_1=this.maxValue}
return _1},isc.A.isInMinMaxRange=function isc_RangeSlider_isInMinMaxRange(_1){if(_1<this.minValue){return false}
if(_1>this.maxValue){return false}
return true},isc.A.setValues=function isc_RangeSlider_setValues(_1,_2){if(this.isDragging){_1=this.clampToMinMax(_1);_2=this.clampToMinMax(_2);this.startValue=_1;this.endValue=_2;this.updatePositions()}else{if(this.isInMinMaxRange(_1)&&this.isInMinMaxRange(_2)&&_1<=_2){this.startValue=_1;this.endValue=_2;this.updatePositions()}}},isc.A.setStartValue=function isc_RangeSlider_setStartValue(_1){if(this.isDragging){_1=this.clampToMinMax(_1);if(_1>=this.endValue){_1=this.endValue}
this.startValue=_1;this.updatePositions()}else{if(this.isInMinMaxRange(_1)&&_1<=this.endValue){this.startValue=_1;this.updatePositions()}else{isc.logWarn("Ignoring setStartValue to "+_1+" (out of range).")}}},isc.A.setEndValue=function isc_RangeSlider_setEndValue(_1){if(this.isDragging){_1=this.clampToMinMax(_1);if(_1<=this.startValue){_1=this.startValue}
this.endValue=_1;this.updatePositions()}else{if(this.isInMinMaxRange(_1)&&_1>=this.startValue){this.endValue=_1;this.updatePositions()}else{isc.logWarn("Ignoring setEndValue to "+_1+" (out of range).")}}},isc.A.getStartValue=function isc_RangeSlider_getStartValue(){return this.startValue},isc.A.getEndValue=function isc_RangeSlider_getEndValue(){return this.endValue},isc.A.setMinValue=function isc_RangeSlider_setMinValue(_1){this.minValue=_1;this.updatePositions()},isc.A.setMaxValue=function isc_RangeSlider_setMaxValue(_1){this.maxValue=_1;this.updatePositions()},isc.A.getMinValue=function isc_RangeSlider_getMinValue(){return this.minValue},isc.A.getMaxValue=function isc_RangeSlider_getMaxValue(){return this.maxValue},isc.A.fireChangedEvent=function isc_RangeSlider_fireChangedEvent(){this.changed(this.startValue,this.endValue,this.isDragging)},isc.A.changed=function isc_RangeSlider_changed(_1,_2,_3){});isc.B._maxIndex=isc.C+27;if(isc.ListGrid){isc.ClassFactory.defineClass("ScrollingMenu","ListGrid");isc.A=isc.ScrollingMenu.getPrototype();isc.A.useBackMask=true;isc.A.canFocus=true;isc.A.showHeader=false;isc.A.showEdges=false;isc.A.autoDraw=false;isc.A.className="scrollingMenu";isc.A.bodyStyleName="scrollingMenuBody";isc.A.selectionType="single";isc.A.leaveScrollbarGap=false;isc.A.generateClickOnSpace=false;isc.A.generateDoubleClickOnEnter=false;isc.A.generateClickOnEnter=true;isc.A.showModal=true;isc.A.arrowKeyAction="select";isc.A.enableSelectOnRowOver=true;isc.A.filterOnKeypress=true;isc.ScrollingMenu.changeDefaults("filterEditorDefaults",{backgroundColor:"white",editorKeyPress:function(_1,_2,_3){if(_2=="Arrow_Down"){this.sourceWidget.$318(1);return false}
if(_2=="Arrow_Up"){this.sourceWidget.$318(-1);return false}
if(_2=="Enter"){this.sourceWidget.$240();return}
return this.Super("editorKeyPress",arguments)}});isc.A=isc.ScrollingMenu.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$859=true;isc.B.push(isc.A.show=function isc_ScrollingMenu_show(){if(this.showModal)this.showClickMask({target:this,methodName:"cancel"},false,[this]);this.Super("show",arguments);if(this.showModal)this.body.focus()},isc.A.recordClick=function isc_ScrollingMenu_recordClick(_1,_2,_3,_4,_5,_6,_7){this.hide();if(_2!=null)this.itemClick(_2)},isc.A.itemClick=function isc_ScrollingMenu_itemClick(_1){},isc.A.rowOver=function isc_ScrollingMenu_rowOver(_1,_2,_3){if(this.enableSelectOnRowOver)this.selection.selectSingle(_1)},isc.A.createSelectionModel=function isc_ScrollingMenu_createSelectionModel(_1,_2,_3,_4,_5){var _6=this.invokeSuper("ScrollingMenu","createSelectionModel",_1,_2,_3,_4,_5);this.selection.addProperties({selectOnRowOver:function(_7){this.selectSingle(_7);this.selectionFromMouse=true},setSelected:function(_7,_8){this.selectionFromMouse=false;return this.Super("setSelected",arguments)}});return _6},isc.A.bodyKeyPress=function isc_ScrollingMenu_bodyKeyPress(_1,_2){var _3=_1.keyName;if(_3==this.$10j){var _4=this.selection;if(_4&&_4.selectionFromMouse){this.cancel();return false}}
if(_3=="Escape"){this.cancel();return false}
return this.Super("bodyKeyPress",arguments)},isc.A.cancel=function isc_ScrollingMenu_cancel(){this.hide()},isc.A.hide=function isc_ScrollingMenu_hide(){this.hideClickMask();return this.Super("hide",arguments)},isc.A.dataChanged=function isc_ScrollingMenu_dataChanged(){var _1=this.Super("dataChanged",arguments);if(!this.$859)return;if(this.data&&this.data.getLength()>0&&this.selection&&!this.selection.anySelected()&&(isc.isA.ResultSet==null||!isc.isA.ResultSet(this.data)||this.data.rowIsLoaded(0)))
{this.selection.selectItem(0)}
return _1});isc.B._maxIndex=isc.C+9}
isc.ClassFactory.defineClass("DynamicForm","Canvas","DataBoundComponent");isc.addGlobal("FormLayout",isc.DynamicForm);isc.A=isc.DynamicForm;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.GET="GET";isc.A.POST="POST";isc.A.NORMAL="normal";isc.A.MULTIPART="multipart";isc.A.NORMAL_ENCODING="application/x-www-form-urlencoded";isc.A.MULTIPART_ENCODING="multipart/form-data";isc.A.$89="$89";isc.A.$9a="$9a";isc.A.$9b="$9b";isc.A.$9c="$9d";isc.A.$9e="$9f";isc.A.$99r="inlineErrorHandle";isc.A.$9g="$9g";isc.B.push(isc.A.buildOperatorIndex=function isc_c_DynamicForm_buildOperatorIndex(){if(isc.DataSource==null)return;var _1=isc.getValues(isc.DataSource.getSearchOperators());_1=_1.sortByProperties(["symbol"],[false],[function(_4,_5,_6){var _2=_4[_5],_3=isc.isA.String(_2)?_2.length:0;return _3}]);this.$85l=_1.makeIndex("symbol",true)},isc.A.getOperatorIndex=function isc_c_DynamicForm_getOperatorIndex(){return this.$85l},isc.A.$1145=function isc_c_DynamicForm__defaultItemHoverHTMLImpl(_1){if(_1.implementsPromptNatively)return null;var _2=_1.prompt;if(!_2&&_1.parentItem)_2=this.itemHoverHTML(_1.parentItem)
return _2},isc.A.$1146=function isc_c_DynamicForm__defaultValueHoverHTMLImpl(_1){var _2=_1.getDisplayValue();if(_2!=null){_2=""+_2;var _3;if(_2==_1.$54t&&((_3=_1.getValue())==null||_3==isc.emptyString))
{_2=""}else if(!_1.canEscapeHTML){_2=_2.asHTML()}}
return _2});isc.B._maxIndex=isc.C+4;isc.A=isc.DynamicForm.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.flattenItems=false;isc.A.numCols=2;isc.A.fixedColWidths=false;isc.A.fixedRowHeights=false;isc.A.colWidths=null;isc.A.minColWidth=20;isc.A.cellSpacing=0;isc.A.cellPadding=2;isc.A.cellBorder=0;isc.A.defaultRowHeight=22;isc.A.sectionVisibilityMode="multiple";isc.A.allowContentAndChildren=true;isc.A.separateContentInsertion=true;isc.A.$r9=true;isc.A.fieldIdProperty="name";isc.A.titleField="title";isc.A.showDetailFields=true;isc.A.longTextEditorThreshold=255;isc.A.longTextEditorType="textArea";isc.A.titlePrefix="";isc.A.rightTitlePrefix=":&nbsp;";isc.A.titleSuffix="&nbsp;:";isc.A.rightTitleSuffix="";isc.A.exclusiveTitlePrefix="";isc.A.exclusiveRightTitlePrefix="";isc.A.exclusiveTitleSuffix="";isc.A.exclusiveRightTitleSuffix="";isc.A.titleWidth=100;isc.A.clipItemTitles=false;isc.A.showInlineErrors=true;isc.A.showErrorIcons=true;isc.A.showErrorText=false;isc.A.showErrorStyle=true;isc.A.errorOrientation="left";isc.A.errorItemDefaults={type:"blurb",wrap:true,showIf:function(){return!this.form.showInlineErrors&&this.form.hasErrors()},defaultDynamicValue:function(_1,_2,_3){return _2.getErrorsHTML(_2.getErrors())}};isc.A.errorItemCellStyle="formCellError";isc.A.errorsPreamble="The following errors were found.";isc.A.hiliteRequiredFields=true;isc.A.requiredTitlePrefix="<b>";isc.A.requiredRightTitlePrefix="<b>:&nbsp;";isc.A.requiredTitleSuffix="&nbsp;:</b>";isc.A.requiredRightTitleSuffix="</b>";isc.A.exclusiveRequiredTitlePrefix=null;isc.A.exclusiveRequiredRightTitlePrefix=null;isc.A.exclusiveRequiredTitleSuffix=null;isc.A.exclusiveRequiredRightTitleSuffix=null;isc.A.canHover=false;isc.A.itemHoverDelay=500;isc.A.itemHoverStyle="formHover";isc.A.overflow=isc.Canvas.VISIBLE;isc.A.defaultHeight=20;isc.A.validateOnChange=false;isc.A.implicitSaveDelay=2000;isc.A.synchronousValidation=false;isc.A.autoFocus=false;isc.A.autoFocusOnError=true;isc.A.selectOnFocus=false;isc.A.selectOnClick=false;isc.A.canFocus=true;isc.A._useNativeTabIndex=false;isc.A._useFocusProxy=false;isc.A.uniqueMatch=true;isc.A.browserSpellCheck=true;isc.A.cancelParamName="org.apache.struts.taglib.html.CANCEL";isc.A.cancelParamValue="cancel";isc.A.action="#";isc.A.method=isc.DynamicForm.POST;isc.A.encoding=isc.DynamicForm.NORMAL_ENCODING;isc.A.writeFormTag=true;isc.A.autoSendTargetFieldName="__target__";isc.A.useNativeSelectItems=false;isc.A.hideUsingDisplayNone=isc.Browser.isMoz&&isc.Browser.isMac;isc.A.operator="and";isc.A.nestedEditorType="NestedEditorItem";isc.A.nestedListEditorType="NestedListEditorItem";isc.A.canDropItems=false;isc.A.canAddColumns=true;isc.B.push(isc.A.hasInherentHeight=function isc_DynamicForm_hasInherentHeight(){if(this.inherentHeight!=null)return this.inherentHeight;return(this.overflow==isc.Canvas.VISIBLE||this.overflow==isc.Canvas.CLIP_H)});isc.B._maxIndex=isc.C+1;isc.A=isc.DynamicForm.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$9i="upload";isc.A.$94c="UploadItem";isc.A.$94d="TUploadItem";isc.A.$9j="mutex";isc.A.$9k=["name","editorType","readOnlyEditorType","type","valueMap","defaultValue","showTitle","left","top","width","height"];isc.A.dataArity="single";isc.A.storeAtomicValues=false;isc.A.$70l="/";isc.A.$9l="form";isc.A.$9m="$9n";isc.A.$9o="$9p";isc.A.$9q="absolute";isc.A.$9r="showIf";isc.A.$9s="item,value,form,values";isc.A.$9t="</FORM>";isc.A.$9u="tablePolicy";isc.A.$9v="<COL WIDTH=";isc.A.$9w=(isc.Browser.isIE?"<TR STYLE='position:absolute'>":"<TR>");isc.A.$9y=(isc.Browser.isSafari?"</div></TD>":"</TD>");isc.A.$5u="<TD>";isc.A.$5v="</TD>";isc.A.$5s="<TR>";isc.A.$5t="</TR>";isc.A.$9z="<br>";isc.A.$90="</TABLE></FORM>";isc.A.$127r="</TABLE>";isc.A.$91=["<INPUT TYPE=HIDDEN NAME='",,"' VALUE='",,"'>"];isc.A.titleHeight=15;isc.A.$92="height:";isc.A.$93="width:";isc.A.$11j="max-width:";isc.A.$94="max-height:";isc.A.$92="height:";isc.A.$95="<NOBR>";isc.A.$96="</td></tr></TABLE>";isc.A.$97="</DIV>";isc.A.$98="</TD>";isc.A.$99=["<TD ",," CLASS='",,"' ALIGN='",,"' VALIGN='",,"'",,,">"];isc.A.emitOuterTextOverflow=false;isc.A.$o0="top";isc.A.$63z="$428";isc.A.$114x="$114y";isc.A.$114z=[,"<div style='float:right'>",,"</div><div id='",,"' style='overflow:hidden;",isc.Browser.$114w,":ellipsis",(isc.Browser.isIE&&!isc.Browser.isStrict?";width:100%":""),"'>",,,"</div>",null];isc.A.$10c=["<FORM ","ID","=",,," METHOD=",," ACTION='",,"' ENCTYPE=",,,,," ONSUBMIT='return ",,".$10d()' ONRESET='",,".resetValues(); return false;'"," STYLE='margin-bottom:0px'",">"];isc.A.$10e=" STYLE='position:absolute;left:0px;top:0px;'";isc.A.$10f=" TARGET='";isc.A.writeWidthAttribute=false;isc.A.$10g=["<TABLE role='presentation' ID='",,"' WIDTH='",,"' CELLSPACING='",,"' CELLPADDING='",,"' BORDER='",,(isc.Browser.isMoz?"'><TBODY>":"'>")];isc.A.$119i="' WIDTH='";isc.A.$10h="table";isc.A.formSubmitFailedWarning="Form was unable to be submitted. The most likely cause for this is an invalid value in an upload field.";isc.A.$10i="requiredIf";isc.A.$842="required";isc.A.$10j="Enter";isc.A.itemHoverHTML=isc.DynamicForm.$1145;isc.A.valueHoverHTML=isc.DynamicForm.$1146;isc.A.readOnlyDisplay="readOnly";isc.A.readOnlyTextBoxStyle="staticTextItem";isc.B.push(isc.A.initWidget=function isc_DynamicForm_initWidget(){if(isc.$cv)arguments.$cw=this;if(!isc.DynamicForm.$85l)isc.DynamicForm.buildOperatorIndex();this.setColWidths(this.colWidths);this.Super("initWidget",arguments);if(this.showComplexFieldsRecursively)this.showComplexFields=true;if(this.fields&&this.items==null)this.items=this.fields;if(this.defaultItems!=null&&this.items==null){this.items=[];for(var i=0;i<this.defaultItems.length;i++){this.items[i]=isc.addProperties({},this.defaultItems[i])}}
if(this.values==null)this.values={};if(this.action!=isc.DynamicForm.getPrototype().action&&this.action!=null&&!isc.isA.emptyString(this.action))
{this.setAction(this.action)}
if(this.valuesManager!=null){if(isc.isA.String(this.valuesManager)){if(window[this.valuesManager])this.valuesManager=window[this.valuesManager]}
if(isc.isA.ValuesManager(this.valuesManager)){if(this.dataSource==null&&this.valuesManager.dataSource!=null){this.dataSource=this.valuesManager.dataSource}}}
if(!this.dataSource){var _2=this.items||[];for(var i=0;i<_2.length;i++){if(_2[i]==null)continue;if(this.dataPath||_2[i].dataPath){this.$834=isc.shallowClone(_2);break}}}
this.setItems(this.items?this.items:[],true);if(this.isDisabled()){this.setDisabled(true)}
this.setErrors(this.errors?this.errors:{});this.setValues(this.values,true);if(this.selectionComponent!=null)this.setSelectionComponent(this.selectionComponent,true)},isc.A.$10k=function isc_DynamicForm__destroyItems(_1){if(!_1)return;if(!isc.isA.FormItem(_1[0]))return;_1.map("destroy");this.destroyOrphanedItems("containing form destroyed")},isc.A.destroy=function isc_DynamicForm_destroy(){if(this.valuesManager&&this.valuesManager.removeMember){this.valuesManager.removeMember(this)}
this.$10k(this.items);this.Super("destroy",arguments)},isc.A.setHandleDisabled=function isc_DynamicForm_setHandleDisabled(_1){if(this.isDrawn()){if(this.redrawOnDisable)this.markForRedraw("setDisabled");this.disableKeyboardEvents(_1,null,true)}
var _2=this.getItems();for(var i=0;i<_2.length;i++){_2[i].updateDisabled(true)}},isc.A.disableKeyboardEvents=function isc_DynamicForm_disableKeyboardEvents(_1,_2,_3){this.Super("disableKeyboardEvents",arguments);if(!_3){if(_1){this.$551=this.getTabIndex();this.$vk(-1)}else{this.$vk(this.$551)}}},isc.A.applyFieldDefaults=function isc_DynamicForm_applyFieldDefaults(_1){if(_1==null)return;for(var i=0;i<_1.length;i++){var _3=_1[i];if(_3==null)return}},isc.A.getEditorType=function isc_DynamicForm_getEditorType(_1){return this.getClass().getEditorType(_1,this)},isc.A.setItems=function isc_DynamicForm_setItems(_1,_2){if(_1!=null){for(var i=0;i<_1.length;i++){var _4=false;if(_1[i]==null){this.logWarn("Encountered empty entry in items array - removing this entry.")
_4=true}
if(isc.isA.Canvas(_1[i])){this.logWarn("Encountered a Canvas instance:"+_1[i]+" in the items array - the DynamicForm items array should contain only FormItem definitions. Removing this entry.");_4=true}
if(_4){_1.removeAt(i);i-=1}}}
_1=this.bindToDataSource(_1);if(!_1)_1=[];else if(_1==this.items)_1=_1.duplicate();if(this.items!=null&&this.items.length>0&&!_2)this.removeItems(this.items);this.$10l(_1,null,true,_2)},isc.A.setFields=function isc_DynamicForm_setFields(_1){this.setItems(_1)},isc.A.getFields=function isc_DynamicForm_getFields(){return this.items},isc.A.getItems=function isc_DynamicForm_getItems(){return this.items},isc.A.visibleAtPoint=function isc_DynamicForm_visibleAtPoint(_1,_2,_3,_4){if(this.invokeSuper(isc.DynamicForm,"visibleAtPoint",_1,_2,_3,_4))
return true;var _5=this.items||[],_6={},_7=_5.indexOf(this.getFocusSubItem());for(var i=-1;i<_5.length;i++){var _9=i;if(i==-1){_9=_7}else if(_9==_7)continue;if(_9==-1)continue;var _10=_5[_9],_11=_10.containerWidget;if(_11==this||!_10.isDrawn()||!_10.isVisible())continue;var _12=_11.getID();if(_6[_12]==null){_6[_12]=_11.visibleAtPoint(_1,_2,_3,_4)}
if(!_6[_12])continue;var _13=_10.getPageLeft(),_14=_10.getPageTop();if(_13<=_1&&(_13+_10.getVisibleWidth())>=_1&&_14<=_2&&(_14+_10.getVisibleHeight())>=_2){return true}}
return false},isc.A.addItems=function isc_DynamicForm_addItems(_1,_2){if(!isc.isAn.Array(_1))_1=[_1];if(this.dataSource){var _3=isc.DS.get(this.dataSource);for(var i=0;i<_1.length;i++){_1[i]=this.combineFieldData(_1[i]);var _5=_1[i].name;if(_5&&this.getItem(_5)){this.removeItem(_5)}}}
this.addFieldValidators(_1);if(_2==null||_2>this.items.length)_2=this.items.length;this.$10l(_1,_2)},isc.A.$10l=function isc_DynamicForm__addItems(_1,_2,_3,_4){var _5=this.isDrawn(),_6=_5?this.getTabIndexSpan():null;this.applyFieldDefaults(_1);var _7=[];var _8=false,_9=false,_10=(this.sectionVisibilityMode==this.$9j);for(var _11=0;_11<_1.length;_11++){var _12=_1[_11];if(!_12){_1.removeItem(_11);_11--;continue}
var _13=isc.DynamicForm.canEditField(_12,this);if(!_13&&_12.readOnlyEditorProperties){_12=isc.addProperties({},_12,_12.readOnlyEditorProperties)}else if(_12.editorProperties){_12=isc.addProperties({},_12,_12.editorProperties)}
var _14=this.getEditorType(_12);_1[_11]=_12=this.createItem(_12,_14);if(_14==this.$9i||_14==this.$94c||_14==this.$94d)
{_8=true}
if(isc.FileItem&&isc.isA.FileItem(_12)&&_9){this.logWarn("Attempting to creating a form with multiple FileItems. This is not currently supported - only the first file type field value will be committed on submission of this form.")}
if(isc.isA.SectionItem(_12)){_7.add(_12);if(_12.sectionExpanded&&_10)
this.$6l=_12}}
if(_3)this.items=_1
else this.items.addListAt(_1,_2);if(!_4){this.setItemValues(this.getValues(),false,true,_1)}
if(_8)this.encoding=isc.DynamicForm.MULTIPART_ENCODING;for(var i=0;i<_7.length;i++){var _16=_7[i],_17=_16.sectionExpanded;if(_17&&(!_10||(this.$6l==_16))){_16.expandSection()}else{_16.collapseSection()}}
this.$10m=true;if(_5){var _18=this.getTabIndex();if(_18!=-1){this.$10o();var _19=this.getTabIndexSpan();if(_19>_6){var _20=this.$vy();if(_20){var _21=_20.getTabIndex();if(_21<(_18+_19)){_20.$v3((_18+_19)-_21)}}}}}
this.markForRedraw("Form items added")},isc.A.copyKnownProperties=function isc_DynamicForm_copyKnownProperties(_1,_2,_3){var _4;for(var i=0;i<_3.length;i++){var _6=_3[i],_7=_2[_6];if(_7!==_4){_1[_6]=_7;delete _2[_6]}}},isc.A.createItem=function isc_DynamicForm_createItem(_1,_2){if(_1.form!=null&&!(_1.form==this.getID()||_1.form!=this)){this.logWarn("Unsupported 'form' property ["+_1.form+"] set on item:"+_1+".  Ignoring.")}
if(_1.destroyed&&isc.isA.FormItem(_1)){this.logWarn("destroyed FormItem passed to setItems()/addItem(): FormItems cannot be re-used with different DynamicForms")}
var _3=isc.FormItemFactory.getItemClassName(_1,_2,this),_4=isc.FormItemFactory.getItemClass(_3);var _5=!_4;if(_5){this.logWarn("Problem initializing item: "+isc.Log.echo(_1)+" - derived FormItem class is: "+_3+".  If this is  not a typo, please make sure the relevant module is loaded.  A SpacerItem will be created for this FormItem.");_4=isc.ClassFactory.getClass("SpacerItem");if(_1.showTitle==false)_5=false}
if(isc.SGWTFactory&&isc.isA.SGWTFactoryObject(_4)){var _6=_1;if(_6.editorType||_6[isc.gwtRef]){_6=isc.addProperties({},_1);delete _6.editorType;delete _6[isc.gwtRef];delete _6[isc.gwtModule]}
var _7=_4.create(_6);var _8=this.createItem(_7,_7.editorType);_4.setJsObj(_8[isc.gwtRef],_8);return _8}
var _9=_1;_1=_4.createRaw();_1.form=_1.containerWidget=_1.eventParent=this;var _10=null;if(_1["validators"]!=null&&_9["validators"]!=null){_10=_1.validators}
if(isc.Browser.isIE&&this.canAlterItems){this.copyKnownProperties(_1,_9,this.$9k)}
if(this.autoChildItems){if(_1.ID==null)_1.ID=null;this.$d3(_4.Class,_1,_9)}else{_1.completeCreation(_9);if(_10!=null){if(!_1.validators){_1.validators=_10}else{if(!isc.isAn.Array(_1.validators)){_1.validators=[_1.validators]}
if(_1.validators.$69){_1.validators=_1.validators.duplicate()}
_1.validators.addList(_10)}}}
_1.form=this;if(_1.destroyed)_1.destroyed=false;if(_1.shouldSaveValue&&(_1[this.fieldIdProperty]==null||isc.isAn.emptyString(_1[this.fieldIdProperty]))&&(_1.dataPath==null||isc.isAn.emptyString(_1.dataPath)))
{this.logWarn(_1.getClass()+" form item defined with no '"+this.fieldIdProperty+"' property - Value will not be saved. To explicitly exclude a form item from the set of values to be saved, set 'shouldSaveValue' to false for this item.")
_1.shouldSaveValue=false}
if(_5&&_1.titleOrientation!="top")_1.colSpan+=_1.titleColSpan;return _1},isc.A.removeItems=function isc_DynamicForm_removeItems(_1){if(_1==null)return;if(!isc.isAn.Array(_1))_1=[_1];if(_1==this.items)_1=this.items.duplicate();_1=this.map("getItem",_1);this.items.removeList(_1);if(this.$89t==null){this.$89t=[]}
for(var i=0;i<_1.length;i++){if(_4==null)continue;if(_1[i].hasAdvancedCriteria()){var _3=_1[i].getCriterion();if(_3!=null){if(this.$76u==null){this.$76u={_constructor:"AdvancedCriteria",operator:"and",criteria:[]}}
this.$76u.criteria.add(_3);delete this.values[_1[i].name]}}}
for(var i=0;i<_1.length;i++){var _4=_1[i];if(_4==null)continue;if(_4.items!=null){_1.addList(_4.items,i+1)}
if(this.$10n==_4)delete this.$10n;if(!this.items.contains(_4)&&isc.isA.FormItem(_4)){if(this.isDrawn()){if(_4.$112n)_4.$112n();this.$89t.add(_4)}else{_4.destroy()}}}
this.$10m=true;this.markForRedraw("Form items removed")},isc.A.addField=function isc_DynamicForm_addField(_1,_2){this.addItems(_1,_2)},isc.A.removeField=function isc_DynamicForm_removeField(_1){this.removeItems(_1)},isc.A.addItem=function isc_DynamicForm_addItem(_1,_2){this.addItems(_1,_2)},isc.A.removeItem=function isc_DynamicForm_removeItem(_1){this.removeItems(_1)},isc.A.addFields=function isc_DynamicForm_addFields(_1,_2){return this.addItems(_1,_2)},isc.A.removeFields=function isc_DynamicForm_removeFields(_1){return this.removeItems(_1)},isc.A.$kk=function isc_DynamicForm__canFocus(_1,_2,_3,_4){if(this.canFocus==true)return true;var _5=this.getItems();for(var i=0;i<_5.length;i++){if(_5[i].$kk())return true}
return this.invokeSuper(isc.DynamicForm,"$kk",_1,_2,_3,_4)},isc.A.$10o=function isc_DynamicForm__assignTabIndices(){var _1=this.items;if(!_1||_1.length==0)return;var _2=[],_3={};for(var i=0;i<_1.length;i++){var _5=_1[i],_6=_5.tabIndex;if(_6!=null&&_6!=-1){if(_2[_6]!=null&&!_3[_6]){this.logWarn("More than one item in this form have an explicitly specified tabIndex of '"+_6+"'. Tab order cannot be guaranteed within this form.");_3[_6]=true}
_2[_6]=_5}}
var _7=1;for(var i=0;i<_1.length;i++){var _5=_1[i];if(!isc.isA.FormItem(_5)){if(this.logIsDebugEnabled())
this.logDebug("$10o() fired before all form items have been initialized"+this.getStackTrace());continue}
if(!_5.$kk()||_5.tabIndex!=null||_5.globalTabIndex!=null){continue}
_7+=1;while(_2[_7]!=null){_7+=1}
_5.$10p=_7;if(isc.isA.CanvasItem(_5)){var _8=_5.canvas;if(_8&&_8.getTabIndexSpan){_7+=_8.getTabIndexSpan()}}}},isc.A.$v2=function isc_DynamicForm__slotChildrenIntoTabOrder(){return},isc.A.getTabIndexSpan=function isc_DynamicForm_getTabIndexSpan(){var _1=this.items;var _2=1;if(!_1){return _2}
for(var i=0;i<_1.length;i++){var _4=_1[i];if(!isc.isA.FormItem(_4)){return _1.length}
if(!_4.$kk()||_4.globalTabIndex!=null){continue}
var _5=_4.tabIndex||_4.$10p;if(_5==null){this.$10o();_5=_4.$10p}
if(isc.isA.CanvasItem(_4)){var _6=_4.canvas,_7=0;if(_6&&_6.getTabIndexSpan)_7=_6.getTabIndexSpan();_5+=_7}
if(_5!=null&&_5>_2)_2=_5}
return _2},isc.A.$vk=function isc_DynamicForm__setTabIndex(){this.Super("$vk",arguments);if(this.items){for(var i=0;i<this.items.length;i++){if(!isc.isA.FormItem(this.items[i]))continue;this.items[i].updateTabIndex()}}},isc.A.handleMoved=function isc_DynamicForm_handleMoved(_1,_2,_3,_4){this.invokeSuper(isc.DynamicForm,"handleMoved",_1,_2,_3,_4);this.itemsMoved()},isc.A.handleParentMoved=function isc_DynamicForm_handleParentMoved(_1,_2,_3,_4){this.invokeSuper(isc.DynamicForm,"handleParentMoved",_1,_2,_3,_4);this.itemsMoved()},isc.A.zIndexChanged=function isc_DynamicForm_zIndexChanged(_1,_2,_3,_4){this.invokeSuper(isc.DynamicForm,"zIndexChanged",_1,_2,_3,_4);this.itemsZIndexChanged()},isc.A.parentZIndexChanged=function isc_DynamicForm_parentZIndexChanged(_1,_2,_3,_4){this.invokeSuper(isc.DynamicForm,"parentZIndexChanged",_1,_2,_3,_4);this.itemsZIndexChanged()},isc.A.itemsMoved=function isc_DynamicForm_itemsMoved(){var _1=this.getItems();if(!_1)return;for(var i=0;i<_1.length;i++){if(_1[i].isVisible)_1[i].moved()}},isc.A.itemsVisibilityChanged=function isc_DynamicForm_itemsVisibilityChanged(){var _1=this.getItems();if(!_1)return;for(var i=0;i<_1.length;i++){if(_1[i].visibilityChanged)_1[i].visibilityChanged()}},isc.A.itemsZIndexChanged=function isc_DynamicForm_itemsZIndexChanged(){var _1=this.getItems();if(!_1)return;for(var i=0;i<_1.length;i++){_1[i].zIndexChanged()}},isc.A.scrollTo=function isc_DynamicForm_scrollTo(_1,_2,_3){var _4=this.getScrollLeft(),_5=this.getScrollTop();this.Super("scrollTo",arguments);if(_4!=this.getScrollLeft()||_5!=this.getScrollTop())this.itemsMoved()},isc.A.$1f=function isc_DynamicForm__canAnimateClip(){if(this.canAnimateClip!=null)return this.canAnimateClip;return true},isc.A.setTitleOrientation=function isc_DynamicForm_setTitleOrientation(_1){this.titleOrientation=_1;this.$10m=true;this.markForRedraw()},isc.A.setNumCols=function isc_DynamicForm_setNumCols(_1){this.numCols=_1;this.$10m=true;this.markForRedraw()},isc.A.setAutoComplete=function isc_DynamicForm_setAutoComplete(_1){this.autoComplete=_1;for(var i=0;i<this.items.length;i++){this.items[i].$10q()}},isc.A.setValues=function isc_DynamicForm_setValues(_1,_2){delete this.$76u;if(isc.isAn.Array(_1)){var _3=isc.isA.Object(_1[0]);this.logWarn("values specified as an array."+(_3?" Treating the first item in the array as intended values.":" Ignoring specified values (resetting to defaults)."));if(_3)_1=_1[0];else _1=null}
if(_1==null){_1={}}else{var _4={};isc.DynamicForm.$91f(this,_1,_4);_1=_4}
this.$10r(_1);var _5=this.items;for(var i=0;i<_5.length;i++){if(_5[i].shouldSaveValue&&this.$425(_5[i])){_5[i].$426()}}
this.setItemValues(_1,null,_2);this.rememberValues();if(this.rulesEngine!=null){this.rulesEngine.processEditStart(_1)}
if(isc.isA.Function(this.valuesChanged))this.valuesChanged();this.markForRedraw("setValues")},isc.A.$425=function isc_DynamicForm__useDisplayFieldValue(_1){if(!_1||!_1.displayField)return false;if(_1.optionDataSource!=null)return false;if(_1.getValueFieldName()!=_1.getFieldName())return false;return true},isc.A.getDefaultOptionDataSource=function isc_DynamicForm_getDefaultOptionDataSource(_1){return this.dataSource},isc.A.setData=function isc_DynamicForm_setData(_1){this.setValues(_1)},isc.A.setDataSource=function isc_DynamicForm_setDataSource(_1,_2){this.Super("setDataSource",arguments);this.clearErrors()},isc.A.rememberValues=function isc_DynamicForm_rememberValues(){var _1=this.getValues();var _2={},_3=[];isc.DynamicForm.$91f(this,_1,_2,_3);this.$10s=_2;this.$10t=_3;return this.$10s},isc.A.resetValues=function isc_DynamicForm_resetValues(){this.clearErrors();var _1={};isc.DynamicForm.$91f(this,this.$10s,_1);for(var i=0;i<this.$91h;i++){isc.DynamicForm.$70m(this.$91h[i],_1,this)}
this.setValues(_1)},isc.A.clearValues=function isc_DynamicForm_clearValues(){this.setValues();var _1=this.getItems();for(var i=0;i<_1.length;i++){if(_1[i].shouldSaveValue==false)_1[i].setValue(null)}
this.clearErrors();this.rememberValues();this.markForRedraw("clearValues")},isc.A.valuesHaveChanged=function isc_DynamicForm_valuesHaveChanged(_1,_2,_3){if(_2==null)_2=this.getValues();if(_3==null)_3=this.$10s||{};return isc.DynamicForm.valuesHaveChanged(this,_1,_2,_3)},isc.A.getOldValues=function isc_DynamicForm_getOldValues(){var _1={};isc.addProperties(_1,this.$10s);return _1},isc.A.getOldValue=function isc_DynamicForm_getOldValue(_1){return this.getOldValues()[_1]},isc.A.getChangedValues=function isc_DynamicForm_getChangedValues(){return this.valuesHaveChanged(true)},isc.A.getValues=function isc_DynamicForm_getValues(){this.updateFocusItemValue();return this.values},isc.A.updateFocusItemValue=function isc_DynamicForm_updateFocusItemValue(){if(this.$146y)return;var _1=this.getFocusSubItem();if(!this.$10u){var _2=false;if(isc.Browser.isChrome){var _3=this.getItems();for(var i=0;i<_3.length;i++){if(isc.isA.PasswordItem(_3[i])){_2=true;break}}}
if(_2){var _3=this.getItems();for(var i=0;i<_3.length;i++){_3[i].updateValue()}}else if(_1!=null&&_1.$10v()){_1.updateValue()}}},isc.A.getData=function isc_DynamicForm_getData(){return this.getValues()},isc.A.getValuesAsCriteria=function isc_DynamicForm_getValuesAsCriteria(_1,_2,_3){if(_1==null){_1=(this.operator!="and")||this.getItems().map("hasAdvancedCriteria").contains(true)||this.allowExpressions||(this.$76u!=null)}
if(!_1){var _4=this.$76v();if(_3)return _4;return isc.DataSource.filterCriteriaForFormValues(_4)}
var _5=this.$76u?isc.clone(this.$76u):{operator:this.operator,_constructor:"AdvancedCriteria",criteria:[]};var _6=this.$76v(true,_2);_6.removeEmpty();if(_6&&_6.length>0)_5.criteria.addList(_6);var _7=isc.DS.checkEmptyCriteria(_5);return _7},isc.A.$76v=function isc_DynamicForm__getMappedCriteriaValues(_1,_2){var _3=isc.addProperties({},this.getValues()),_4={},_5=[];var _6=this.getFields();for(var i=0;i<_6.length;i++){if(!_6[i].shouldSaveValue)continue;var _8=_6[i],_9=_6[i].getTrimmedDataPath()||_6[i].getFieldName(),_10=_6[i].getCriteriaFieldName();isc.Canvas.$70m(_9,_3);if(!_1){if(_10!=null){if(_3[_6[i].name])delete _3[_6[i].name];_4[_10]=_6[i].getCriteriaValue()}}else{var _11=_8.getCriterion(_2);if(_11!=null)_5.add(_11)}}
if(!_1){return isc.addProperties(_3,_4)}else{for(var _12 in _3){if(_5.find("fieldName",_12))continue;if(_3[_12]==null)continue;_5.add({operator:isc.DataSource.getCriteriaOperator(_3[_12],_2),fieldName:_12,value:_3[_12]})}
return _5}},isc.A.getFilterCriteria=function isc_DynamicForm_getFilterCriteria(){return this.getValuesAsCriteria()},isc.A.removeFieldCriteria=function isc_DynamicForm_removeFieldCriteria(_1,_2,_3,_4){if(!_4||!_4.criteria)return false;var _5=_4.criteria;for(var i=_5.length-1;i>=0;i--){var _7=_5[i];if(_7.criteria){this.removeFieldCriteria(_1,_2,_3,_7);if(_7.criteria.length==0)_5.removeAt(i)}else{if(_7.fieldName==_1){if(_7.operator!=_2||_7.value!=_3){_5.removeAt(i)}}}}},isc.A.removeExtraAdvancedCriteria=function isc_DynamicForm_removeExtraAdvancedCriteria(_1){var _2=isc.getKeys(_1),_3=this.items;for(var i=0;i<_2.length;i++){var _5=_2[i],_6=_1[_5],_7=null,_8=null;_3.map(function(_9){if(_5==_9.getCriteriaFieldName())_8=_9});if(_8){_7=_8.getOperator();this.removeFieldCriteria(_5,_7,_6,this.$76u)}}},isc.A.setValuesAsCriteria=function isc_DynamicForm_setValuesAsCriteria(_1,_2,_3){if(!_2&&!isc.DataSource.isAdvancedCriteria(_1)){this.$144w(_1,_3);var _4=this.items||[];var _5=[];if(_3)delete this.$76u;else if(this.$76u){if(this.$125e){this.removeExtraAdvancedCriteria(_1);var _6=this.$76u;if(!_6||!_6.criteria||_6.criteria.length==0)_6=null}else{delete this.$76u}}
for(var i=0;i<_4.length;i++){var _8=_4[i],_9=_8.getFieldName(),_10=false;if(isc.propertyDefined(_1,_9)&&_8.canEditSimpleCriterion(_9)){_8.setSimpleCriterion(_1[_9],_9);_10=true}else{for(var _11 in _1){if(_11!=_9&&_8.canEditSimpleCriterion(_11)){_8.setSimpleCriterion(_1[_11],_11);_10=true;break}}}
if(!_10){_5.add(_8)}}
for(var i=0;i<_5.length;i++){if(!_5[i].shouldSaveValue)continue;_5[i].clearValue()}
this.rememberValues()}else{var _12=this.values;this.$10r({});_1=isc.clone(_1);var _13=_1.operator;if(_13!=this.operator){this.logInfo("Dynamic Form editing advanced criteria object:"+isc.Comm.serialize(_1)+". Form level operator specified as '"+this.operator+"' - Criteria returned from this form will be nested in an outer "+this.operator+" clause.","AdvancedCriteria");_1._constructor=null;_1={_constructor:"AdvancedCriteria",operator:this.operator,criteria:[_1]}}
var _4=this.getItems(),_14=_1.criteria,_15={},_5={};for(var i=0;i<_4.length;i++){_5[_4[i].getID()]=true}
for(var i=0;i<_14.length;i++){for(var _16=0;_16<_4.length;_16++){if(!_4[_16].shouldSaveValue){_5[_4[_16].getID()]=false;continue}
var _8=_4[_16];if(this.shouldApplyCriterionToItem(_4[_16],_14[i])){var _17=_4[_16].getID();if(_15[_17]==null){_15[_17]=_14[i];_5[_17]=false}else{if(!_4[_16].canEditOpaqueValues){var _18=_15[_17];var _19=isc.DataSource.combineCriteria(_18,_14[i],this.operator,null,true);if(!_8.canEditCriterion(_19)){this.logInfo("setValuesAsCriteria(): criteria include:"+this.echoFull(_18)+" and "+this.echoFull(_14[i])+". Both of these could be applied to item:"+_8+". However, the item is unable to edit a composite criterion resulting from combining these criteria. Therefore "+this.echoFull(_14[i])+" will not be applied to this item","AdvancedCriteria");continue}else{this.logDebug("setValuesAsCriteria(): Combined multiple criteria into composite criterion:"+this.echoFull(_19)+" and assigned to item:"+_8,"AdvancedCriteria");_15[_17]=_19;_5[_17]=false}}else{continue}}
_14[i]=null;break}}}
_14.removeEmpty();for(var _17 in _15){var _8=window[_17];var _20=_15[_17];if(_8.canEditOpaqueValues&&_20){isc.Canvas.$70n(null,_8,_20.value,_12,this,true,"criteria");_20.value=isc.Canvas.$70o(null,_8,_12,this,true,"edit")}
_8.setCriterion(_20)}
for(var _17 in _5){if(!_5[_17])continue;var _8=window[_17];_8.clearValue()}
this.$76u=_1}},isc.A.$144w=function isc_DynamicForm__saveValuesAsCriteria(_1,_2){for(var _3 in _1){var _4=this.getItem(_3);if(_4!=null){isc.Canvas.$70n(_3,_4,_1[_3],this.values,this,true,"criteria")}else{this.setValue(_3,_1[_3])}}
if(_2){var _5;for(var _3 in this.values){if(_1[this.values[_3]]==_5){this.clearValue(_3)}}}
this.$10r(this.values)},isc.A.shouldApplyCriterionToItem=function isc_DynamicForm_shouldApplyCriterionToItem(_1,_2){if(_1.canEditCriterion(_2))return true;if(_2.fieldName!=null&&_2.fieldName==_1.getCriteriaFieldName()){this.logInfo("Editing AdvancedCriteria in a dynamicForm. Criteria includes a value for field:"+_2.fieldName+". This form includes an item "+_1+" with the same fieldName but the specified operator '"+_2.operator+"' does not match the operator for this form item:"+_1.getOperator()+". Original criterion will be retained and combined with any criterion returned from this item.","AdvancedCriteria")}
return false},isc.A.getValuesAsAdvancedCriteria=function isc_DynamicForm_getValuesAsAdvancedCriteria(_1,_2){return this.getValuesAsCriteria(true,_1,_2)},isc.A.getItem=function isc_DynamicForm_getItem(_1,_2){if(isc.isA.FormItem(_1))return _1;var _3=isc.Class.getArrayItem(_1,this.items,this.fieldIdProperty);if(_3!=null)return _3;var _4=isc.DynamicForm.$840(_1,this);for(var i=0;i<this.items.length;i++){var _6=this.items[i].dataPath;_6=isc.DynamicForm.$840(_6,this);if(_6==_4)return this.items[i]}
if(!_2&&isc.isA.Number(_1-1)){return this.items[parseInt(_1)]}
return null},isc.A.getField=function isc_DynamicForm_getField(_1){return this.getItem(_1)},isc.A.getSubItem=function isc_DynamicForm_getSubItem(_1){return this.getItem(_1)},isc.A.getItemById=function isc_DynamicForm_getItemById(_1){var _2;if(isc.isA.String(_1)){_2=window[_1]}else _2=_1;if(isc.isA.FormItem(_2))return _2;return null},isc.A.getValue=function isc_DynamicForm_getValue(_1,_2){var _3=this.getItem(_1);if(_3){var _1=_3.getTrimmedDataPath()||_3.name}
return this.$70p(_1,_2)},isc.A.$70p=function isc_DynamicForm__getValue(_1,_2){return isc.DynamicForm.$70o(_1,null,this.values,this,true,_2)},isc.A.setValue=function isc_DynamicForm_setValue(_1,_2,_3){var _4=this.getItem(_1,_3);if(_4!=null){if(!this.storeAtomicValues&&!_4.canEditOpaqueValues){var _5=_4.type?isc.SimpleType.getType(_4.type):null;if(_5&&_5.getAtomicValue&&_5.updateAtomicValue){_1=_4.getTrimmedDataPath()||_4.name;this.$10w(_1,_2);_2=_5.getAtomicValue(_2)}}
return _4.setValue(_2)}else if(this.values!=null){this.$10w(_1,_2);return _2}},isc.A.clearValue=function isc_DynamicForm_clearValue(_1){var _2=this.getItem(_1);if(_2!=null)_2.clearValue();else if(this.values)isc.DynamicForm.$70m(_1,this.values)},isc.A.showItem=function isc_DynamicForm_showItem(_1){var _2=this.getItem(_1);if(_2!=null)return _2.show()},isc.A.hideItem=function isc_DynamicForm_hideItem(_1){var _2=this.getItem(_1);if(_2!=null)return _2.hide()},isc.A.saveItemValue=function isc_DynamicForm_saveItemValue(_1,_2){if(_1.shouldSaveValue==false)return;var _3=_1.getDataPath()||_1.getFieldName();if(_3==null)return;this.$924(_1,_2);if(this.$425(_1)&&(_1.displayField!=_3)){var _4=_1.mapValueToDisplay(_2);this.setValue(_1.displayField,_4,true)}
_1.$10x()},isc.A.$924=function isc_DynamicForm__saveAtomicValue(_1,_2){this.$10w(_1,_2,true)},isc.A.$10w=function isc_DynamicForm__saveValue(_1,_2,_3){var _4,_5;_5=_4=_1;_1=this.getField(_4);if(this.storeAtomicValues&&(!_1||!_1.canEditOpaqueValues)){if(isc.isAn.Object(_4)){_4=_1.getTrimmedDataPath()||_1[this.fieldIdProperty];_1=null}}else{if(!isc.isA.String(_4)){_4=null}else{if(_3){_1=this.getField(_4);if(_1==null){var _6=this.getDataSource();if(_6)_1=_6.getField(_4)||_6.getFieldForDataPath(_4)}}}}
isc.DynamicForm.$70n(_4,_1,_2,this.values,this,true);var _7=this.selectionComponent;if(!_7&&this.valuesManager!=null){if(isc.isA.ValuesManager(this.valuesManager)&&this.valuesManager.members&&this.valuesManager.members.contains(this))
{if(!isc.isA.String(_5)){_5=_5.dataPath||_5.name}
this.valuesManager.$10y(_5,_2,this)}}});isc.evalBoundary;isc.B.push(isc.A.clearItemValue=function isc_DynamicForm_clearItemValue(_1){var _2=isc.DynamicForm.$702(this.dataPath,_1.getDataPath()||_1.getFieldName());isc.DynamicForm.$70m(_2,this.values);if(!this.selectionComponent&&isc.isA.ValuesManager(this.valuesManager)&&this.valuesManager.members&&this.valuesManager.members.contains(this))
{this.valuesManager.$10z(_2,this)}},isc.A.$10r=function isc_DynamicForm__saveValues(_1){this.values=_1;if(!this.selectionComponent&&isc.isA.ValuesManager(this.valuesManager)&&this.valuesManager.members&&this.valuesManager.members.contains(this))
{var _2=isc.getKeys(this.values);for(var i in _1){this.valuesManager.$10y(i,_1[i],this);_2.remove(i)}
for(var i=0;i<_2.length;i++){this.valuesManager.$10z(_2[i],this)}}},isc.A.getSavedItemValue=function isc_DynamicForm_getSavedItemValue(_1){if(_1.shouldSaveValue==false)return null;var _2=isc.DynamicForm.$702(this.dataPath,_1.getDataPath()||_1.getFieldName());return this.$70p(_2)},isc.A.resetValue=function isc_DynamicForm_resetValue(_1){var _2=this.getItem(_1);return(_2?_2.resetValue():null)},isc.A.getValueMap=function isc_DynamicForm_getValueMap(_1){var _2=this.getItem(_1);return(_2?_2.getValueMap():null)},isc.A.setValueMap=function isc_DynamicForm_setValueMap(_1,_2){var _3=this.getItem(_1);return(_3?_3.setValueMap(_2):null)},isc.A.getOptions=function isc_DynamicForm_getOptions(_1){return this.getValueMap(_1)},isc.A.setOptions=function isc_DynamicForm_setOptions(_1,_2){return this.setValueMap(_1,_2)},isc.A.getForm=function isc_DynamicForm_getForm(_1){var _2=(_1==null?[this.getFormID()]:arguments);return this.Super("getForm",_2)},isc.A.getFormID=function isc_DynamicForm_getFormID(){return this.$qs(this.$9l)},isc.A.getSerializeableFields=function isc_DynamicForm_getSerializeableFields(_1,_2){_1=_1||[];_1.addList(["items"]);return this.Super("getSerializeableFields",[_1,_2],arguments)},isc.A.expandSection=function isc_DynamicForm_expandSection(_1){var _2=this.getItem(_1);if(isc.isA.SectionItem(_2))_2.expandSection()},isc.A.collapseSection=function isc_DynamicForm_collapseSection(_1){var _2=this.getItem(_1);if(isc.isA.SectionItem(_2))_2.collapseSection()},isc.A.$100=function isc_DynamicForm__sectionExpanding(_1){if(this.isDrawn()){this.$86o=this.notifyAncestorsOnReflow;this.notifyAncestorsOnReflow=true}
if(this.sectionVisibilityMode=="mutex"&&this.$6l&&this.$6l!=_1)
{this.$6l.collapseSection()}
this.$6l=_1},isc.A.$101=function isc_DynamicForm__sectionCollapsing(_1){if(this.isDrawn()){this.$86o=this.notifyAncestorsOnReflow;this.notifyAncestorsOnReflow=true}},isc.A.getErrors=function isc_DynamicForm_getErrors(){return this.errors},isc.A.getFieldErrors=function isc_DynamicForm_getFieldErrors(_1){if(!this.errors)return null;var _2;if(isc.isA.FormItem(_1)){var _3=_1;_1=_3.getFieldName();_2=this.buildFieldDataPath(this.getFullDataPath(),_3)}
var _4=this.errors[_1];if(isc.isA.String(_4)||isc.isAn.Array(_4)){return _4}
if(_2!=null){if(isc.isA.String(_4)||isc.isAn.Array(_4))return _4}
return null},isc.A.getDataPathErrors=function isc_DynamicForm_getDataPathErrors(_1){var _2=_1.split("/");var _3=this.errors;for(var i=0;i<_2.length;i++){_3=_3[_2[i]];if(!_3)return null}
return _3},isc.A.setErrors=function isc_DynamicForm_setErrors(_1,_2){this.errors=isc.DynamicForm.formatValidationErrors(_1);var _3=false,_4={};for(var _5 in this.errors){var _6=this.getItem(_5);if(!_6||!_6.visible){_4[_5]=this.errors[_5];_3=true}}
if(_2)this.showErrors(this.errors,_4)},isc.A.setError=function isc_DynamicForm_setError(_1,_2){var _3=this.errors[_1];if(!_3)this.errors[_1]=_2;else{if(isc.isA.String(_3))this.errors[_1]=[_3,_2];else this.errors[_1].add(_2)}},isc.A.addFieldErrors=function isc_DynamicForm_addFieldErrors(_1,_2,_3){if(!this.errors)this.errors={};this.addValidationError(this.errors,_1,_2);if(_3)this.showFieldErrors(_1)},isc.A.setFieldErrors=function isc_DynamicForm_setFieldErrors(_1,_2,_3){if(this.errors==null)this.errors={};this.errors[_1]=_2;if(_3)this.showFieldErrors(_1)},isc.A.clearFieldErrors=function isc_DynamicForm_clearFieldErrors(_1,_2,_3){if(this.errors==null)return;if(!this.errors[_1])return;delete this.errors[_1];if(_2){this.showFieldErrors(_1,_3)}},isc.A.clearFieldError=function isc_DynamicForm_clearFieldError(_1,_2,_3){if(this.errors==null||!this.errors[_1])return;var _4=this.errors[_1];if(!isc.isAn.Array(_4)){if(_4==_2){delete this.errors[_1]}}else{if(_4.contains(_2)){_4.remove(_2)}
if(_4.length==0)delete this.errors[_1]}
if(_3)this.showFieldErrors(_1)},isc.A.clearErrors=function isc_DynamicForm_clearErrors(_1){this.setErrors({},_1)},isc.A.hasErrors=function isc_DynamicForm_hasErrors(){var _1=this.errors;if(!_1)return false;for(var _2 in _1){if(_1[_2]!=null)return true}
return false},isc.A.hasFieldErrors=function isc_DynamicForm_hasFieldErrors(_1){var _2=this.errors;return(_2&&_2[_1]!=null)},isc.A.draw=function isc_DynamicForm_draw(_1,_2,_3,_4){if(isc.$cv)arguments.$cw=this;if(!this.readyToDraw())return this;this.invokeSuper(isc.DynamicForm,this.$ny,_1,_2,_3,_4);this.$102();var _5=this.autoFocus,_6=(!_5?this.$9m:this.$9o);this.$10u=true;isc.Page.setEvent(isc.EH.IDLE,this,isc.Page.FIRE_ONCE,_6);if(this.position==isc.Canvas.RELATIVE){isc.Page.setEvent(isc.EH.LOAD,this,isc.Page.FIRE_ONCE,"$103")}
return this},isc.A.$us=function isc_DynamicForm__adjustOverflowForPageLoad(){if(isc.Browser.isSafari){var _1=this.getItems();if(this.isDrawn()&&_1){for(var i=0;i<_1.length;i++){_1[i].$104();if(this.isDirty())break}}}
return this.Super("$us",arguments)},isc.A.$9n=function isc_DynamicForm__delayedSetValues(){this.setItemValues(null,true);this.rememberValues();delete this.$10u},isc.A.$9p=function isc_DynamicForm__delayedSetValuesFocus(){this.$9n();this.delayCall("focus")},isc.A.redraw=function isc_DynamicForm_redraw(){this.$107();this.$146y=true;this.$106();if(this.$11v!=null)delete this.$11v;this.Super("redraw",arguments);this.$108();this.setItemValues(null,true);this.$146y=false;var _1,_2,_3;if(isc.Browser.isMoz){_3=this.getClipHandle();if(_3){_1=_3.scrollLeft;_2=_3.scrollTop}}
if(isc.Browser.isMoz){if(_1!=null&&_3.scrollLeft!=_1)
_3.scrollLeft=_1;if(_2!=null&&_3.scrollTop!=_2)
_3.scrollTop=_2}
this.itemsMoved();if(this.$86o!=null){this.notifyAncestorsOnReflow=this.$86o;this.$86o=null}},isc.A.$102=function isc_DynamicForm__itemsDrawn(){var _1=this.items;for(var i=0;i<_1.length;i++){if(_1[i]){if(_1[i].visible)_1[i].drawn();else if(isc.CanvasItem&&isc.isA.CanvasItem(_1[i])){_1[i].ensureCanvasCleared()}}}},isc.A.$108=function isc_DynamicForm__itemsRedrawn(){var _1=this.items;for(var i=0;i<_1.length;i++){var _3=_1[i];if(!_3)continue;if(_3.visible){_3.isDrawn()?_3.redrawn():_3.drawn()}else if(_3.isDrawn()){_3.cleared()}}
this.destroyOrphanedItems("Delayed destroy of removed items on form redraw")},isc.A.$11a=function isc_DynamicForm__itemsCleared(){var _1=this.items;for(var i=0;i<_1.length;i++){if(_1[i].isDrawn&&_1[i].isDrawn())_1[i].cleared()}
this.destroyOrphanedItems("Delayed destroy of removed items on clear")},isc.A.destroyOrphanedItems=function isc_DynamicForm_destroyOrphanedItems(_1){if(this.$89t!=null){this.$89t.map("destroy",[_1]);delete this.$89t}},isc.A.$107=function isc_DynamicForm__itemsRedrawing(){var _1=this.items;for(var i=0;i<_1.length;i++){var _3=_1[i];if(!_3)continue;if(_3.visible&&_3.isDrawn())_3.redrawing()}},isc.A.modifyContent=function isc_DynamicForm_modifyContent(){this.$103()},isc.A.$103=function isc_DynamicForm__placeCanvasItems(){return this.$11c("placeCanvas")},isc.A.$11c=function isc_DynamicForm__notifyCanvasItems(_1){if(!isc.CanvasItem)return;for(var i=0;i<this.items.length;i++){var _3=this.items[i];if(_3&&isc.isA.CanvasItem(_3))_3[_1]()}},isc.A.redrawFormItem=function isc_DynamicForm_redrawFormItem(_1,_2){var _3=this.getItems();if(!_1)return;while(_1.parentItem)_1=_1.parentItem;if(!_3.contains(_1))return;this.$10m=true;this.markForRedraw(_1.ID+": "+(_2?_2:"redrawFormItem"))},isc.A.getElementValues=function isc_DynamicForm_getElementValues(){var _1={};for(var i=0;i<this.items.length;i++){var _3=this.items[i],_4=_3.getDataElement()?_3.getDataElement().value:"[no element]";_1[_3[this.fieldIdProperty]]=_4}
return _1},isc.A.setItemValues=function isc_DynamicForm_setItemValues(_1,_2,_3,_4){var _5=(_1==null);if(_5)_1=this.getValues();if(_1==null)_1={};var _6;if(_3){_6=this.$76u?this.$76u.criteria:null}
_4=_4||this.items;var _7;for(var _8=0;_8<_4.length;_8++){var _9=_4[_8],_10=_9.getFieldName(),_11=_9.getTrimmedDataPath(),_12=_9.isSetToDefaultValue(),_13=_7;if(_1!=null&&!isc.isAn.emptyObject(_1)){if(_11){_13=isc.DynamicForm.$70o(_11,(this.storeAtomicValues&&!_9.canEditOpaqueValues?null:_9),_1,this,true,"edit")}else if(_10){_13=isc.DynamicForm.$70o(_10,(this.storeAtomicValues&&!_9.canEditOpaqueValues?null:_9),_1,this,true,"edit")}}
if(_2&&isc.CanvasItem&&isc.isA.CanvasItem(_9)&&!_9.$11d())
{continue}
var _14,_15=((!_10&&!_11)||_13===_14);var _16=null;if(_3&&_15&&_9.value!=null){_16=_9.value;if(_16!=_9._value)_12=false}
var _17=null;if(_15&&_6!=null){for(var i=0;i<_6.length;i++){if(_9.canEditCriterion(_6[i])){_15=false;if(_17==null){_17=_6[i]}else{var _19=isc.DataSource.combineCriteria(_17,_6[i],this.operator,null,true);if(!_9.canEditCriterion(_19)){this.logInfo("setItemValues(): current values include multiple extra criteria that could be applied to form item:"+_9+". Criteria include:"+this.echoFull(_17)+" and "+this.echoFull(_6[i])+". However, the item is unable to edit a composite criterion resulting from combining these criteria. Therefore "+this.echoFull(_6[i])+" will not be applied to this item","AdvancedCriteria");continue}else{this.logInfo("setItemValues(): Combined multiple 'extra' criteria into composite criterion:"+this.echoFull(_19)+" and assigned to item:"+_9,"AdvancedCriteria");_17=_19}}
_6.removeAt(i);if(_6.length==0){delete this.$76u}else{i--}}}}
if(_9.shouldSaveValue==false){if(!_15){this.logInfo("DynamicForm.setValues() passed a value for '"+_9[this.fieldIdProperty]+"'. The corresponding form item was declared with 'shouldSaveValue' set to  false to exclude its value from the form's values object. Setting 'shouldSaveValue' to true for this item.\n[To avoid seeing this message in the future, set 'shouldSaveValue' to true for any form items whose values are to be managed via  form.setValues() / form.getValues().]")
_9.shouldSaveValue=true}else{var _20=(_12?null:_9._value);if(_16!=null)_20=_16;_9.setValue(_20,(_12?false:_2));continue}}
if(_16!=null){_15=false;_13=_16}
if(_15||(_17==null&&_5&&_12)){var _7;if(!_3)_9.clearValue();else if(_3&&_12&&_9._value!==_7){_9.saveValue(_9._value,true)}}else{if(_17!=null){_9.setCriterion(_17)}else{_9.setValue(_13,true)}}}},isc.A.$11e=function isc_DynamicForm__absPos(){return this.itemLayout==this.$9q},isc.A.setColWidths=function isc_DynamicForm_setColWidths(_1){if(_1==null)return;if(isc.isA.String(_1)){var _2=_1.split(/[, ]+/);if(_2==null||_2.length==0){this.logWarn("ignoring invalid colWidths string: "+_1);if(_1==this.colWidths)this.colWidths=null;return}
_1=_2}else if(isc.isAn.Array(_1)&&_1.length==1&&isc.isA.String(_1[0]))
{var _2=_1[0].split(/[, ]+/);if(_2!=null||_2.length>1){_1=_2}}
this.colWidths=_1;if(this.isDrawn())this.markForRedraw()},isc.A.getInnerHTML=function isc_DynamicForm_getInnerHTML(_1){if(this.autoDupMethods)this.duplicateMethod("getInnerHTML");var _2=this.values,_3=this.items;var _4=false;for(var _5=0;_5<_3.length;_5++){var _6=_3[_5],_7=_6.visible;if(_6.showIf){isc.Func.replaceWithMethod(_6,this.$9r,this.$9s);var _8=_6.getValue();_7=(_6.showIf(_6,_8,this,_2)==true)}
if(_7&&this.isPrinting){if(_6.shouldPrint!=null){_7=_6.shouldPrint}else if(_7&&this.currentPrintProperties.omitControls){var _9=this.currentPrintProperties.omitControls;for(var i=0;i<_9.length;i++){var _11=_9[i];if(isc.isA[_11]&&isc.isA[_11](_6)){_7=false}}}}
if(_7!=_6.visible){_6.visible=_7;if(!_6.alwaysTakeSpace)_4=true}}
if(_4||this.$10m)isc.Canvas.invalidateTableResizePolicy(_3);this.$10m=false;this.setRequiredIf();if(this.flattenItems){var _12=null;for(var _5=0;_5<_3.length;_5++){var _6=_3[_5];if(_6.visible||_6.alwaysTakeSpace)_12++;if(_6.showTitle&&_6.titleOrientation!="top")
_12++;_6.$58l=_6.colSpan||null;_6.colSpan=null}
if(_12){this.numCols=_12;this.$10m=true;this.markForRedraw()}}
var _13=isc.StringBuffer.create();if(this.writeFormTag&&!this.isPrinting)_13.append(this.getFormTagStartHTML());if(this.$11e()){_13.append(this.getAbsPosHTML());_13.append(this.$9t);return _13.release()}
_13.append(this.getTableStartHTML());if(this.titleWidth==this.$pa&&!this.colWidths){this.colWidths=[];for(var i=0;i<this.numCols;i++)this.colWidths[i]=this.$pa}
var _14;if(this.colWidths){_14=this.colWidths;if(_14.length>this.numCols){if(!this.$76z){this.logWarn("colWidths Array longer than numCols, using only first "+this.numCols+" column widths")}
_14=_14.slice(0,this.numCols)}else if(_14.length<this.numCols){if(!this.$76z){this.logWarn("colWidths Array shorter than numCols, remaining columns get '*' size")}
_14=_14.duplicate();for(var i=_14.length;i<this.numCols;i++)_14[i]=isc.star}}else{_14=[];var _15=this.getInnerContentWidth();_15-=(this.cellBorder!=null?this.cellBorder:0);var _16=Math.floor(this.numCols/2),_17=_15-(_16*this.titleWidth),_18;if(this.isPrinting){_18="*"}else{_18=Math.floor(_17/(this.numCols-_16));_18=Math.max(this.minColWidth,_18)}
for(var i=0;i<_16;i++){_14.add(this.titleWidth);_14.add(_18)}
if((this.numCols%2)!=0)_14.add(_18);if(this.logIsInfoEnabled(this.$9u)){this.logInfo("totalWidth: "+_15+", generated colWidths: "+_14,this.$9u)}}
var _19=this.getInnerContentWidth(),_20=this.getInnerContentHeight();if(this.cellSpacing!=0){if(isc.Browser.isMoz)_20-=2*this.cellSpacing;else if(isc.Browser.isSafari)_20-=this.cellSpacing}
_3.$8q=this.defaultRowHeight;isc.Canvas.applyTableResizePolicy(_3,_19,_20,this.numCols,_14);var _21=false;if(isc.CanvasItem){for(var i=0;i<_3.length;i++){var _6=_3[i];if(isc.isA.CanvasItem(_6)&&_6.checkCanvasOverflow()){if(!_21&&this.logIsInfoEnabled(this.$9u)){this.logInfo("CanvasItem: "+_6+" overflowed, rerunning policy",this.$9u)}
_21=true}}}
if(_21){isc.Canvas.applyTableResizePolicy(_3,_19,_20,this.numCols,_14,null,true)}
if(!this.isPrinting){_14=_3.$8r}
for(var _22=0;_22<_14.length;_22++){var _23=_14[_22];if(_23=="*"){_13.append("<COL>")}else{_13.append(this.$9v,_23,this.$oa)}}
if(this.isPrinting){_13.append("<tr>")}else{_13.append(this.$9w)}
var _24=isc.DynamicForm.$817();for(var _22=0;_22<_14.length;_22++){if(!isc.isA.Number(_14[_22])){_13.append(_24.join(isc.emptyString),this.$9y)}else{var _19=_14[_22];_19-=(this.cellSpacing!=null?(2*this.cellSpacing):0);if(isc.Browser.isIE8Strict){_19-=this.cellPadding!=null?(2*this.cellPadding):0}
_24[3]=(isc.FormItem?isc.FormItem.getPrototype().baseStyle:null);var _25=isc.Browser.isIE?1:0,_26=_24.join(isc.emptyString);_13.append(_26,this.fixedColWidths?isc.Canvas.spacerHTML(_19,_25):null,this.$9y)}}
_13.append(this.$5t);if(this.autoSendTarget&&this.target)_13.append(this.$11f());var _27=_3.length,_28=false;var _29=this;var _30=function completeInnerHTMLFun(_34){if(_34!=null){var _31=_13.getArray();_31.push.apply(_31,_34)}
if(_27>0)_13.append(_29.$5t);if(_29.writeFormTag&&!_29.isPrinting)_13.append(_29.$90);else _13.append(_29.$127r);var _32=_13.release();if(_28){_29.fireCallback(_1,"HTML",[_32]);return false}else{return _32}};if(_27>0){var _33=[],_34=new Array(_27),_35=0;var _36=function itemCompletedFun(){if(++_35==_27){return _30(_34)}};var _37;for(var _5=0;_5<_27;++_5){var _6=_3[_5],_38=isc.SB.create(),_7,_39,_40,_8,_41,_42;if(!_6){_37=_36();continue}
_7=_6.visible;_6.$10x();if(this.logIsDebugEnabled())this.logDebug("Drawing FormItem: "+_6);if(!_6.alwaysTakeSpace&&!_7){_37=_36();continue}
if((_6.rowSpan==0||_6.colSpan==0)&&_5<_27-1){_33.add(_6);_37=_36();continue}
_39=_6.getFieldName();_40=_6.getErrors();_8=_6.getValue();_41=this.getTitleOrientation(_6);if(isc.is.emptyString(_40))_40=null;if(_6.$8l||_5==0){if(_5!=0){_38.append(this.$5t)}
if(_6.$8n&&_6.$8n.length>0){for(var i=0;i<_6.$8n.length;i++){_38.append(this.$5s);var _43=this.numCols;for(var _44=0;_44<_6.$8n[i];_44++){_38.append(this.$5u,"&nbsp;",this.$5v)}
_38.append(this.$5t)}}
_38.append(this.$5s);if(_6.$8o>0){for(var i=0;i<_6.$8o;i++)_38.append(this.$5u,this.$5v)}}
if(_41==isc.Canvas.LEFT){_38.append(this.getTitleCellHTML(_6,_40))}
_38.append(this.getCellStartHTML(_6,_40));if(_7&&_41==isc.Canvas.TOP){if(this.shouldClipTitle(_6)){_38.append(this.getTitleCellInnerHTML(_6,_40))}else{_38.append(this.getTitleSpanHTML(_6,_40),this.$9z)}}
_42=(_7&&_40&&this.showInlineErrors);if(_42&&_6.getErrorOrientation()==isc.Canvas.TOP){_38.append(this.getItemErrorHTML(_6,_40))}
var _45=(function(_5,_6,_38,_7,_39,_40,_8,_41,_42){var _46=function func(_32){_38.append(_32);if(_42&&_6.getErrorOrientation()==isc.Canvas.BOTTOM){_38.append(_29.getItemErrorHTML(_6,_40))}
_38.append(_29.getCellEndHTML(_6,_40));if(_41==isc.Canvas.RIGHT){_38.append(_29.getTitleCellHTML(_6,_40))}
_34[_5]=_38.release();return _36()};return function(_50){if(_50!=null){var _47=_38.getArray();_47.push.apply(_47,_50)}
if(_7){if(_29.isPrinting){var _48=_6.getPrintHTML(_29.currentPrintProperties,_46);if(_48==null){return false}else{return _46(_48)}}else{return _46(_6.getInnerHTML(_8,true,_29.showInlineErrors))}}else return _46(isc.Canvas.spacerHTML(_6.width,_6.height))}})(_5,_6,_38,_7,_39,_40,_8,_41,_42);var _49=_33.length;if(_49>0){var _50=new Array(_49);var _51=(function(_45,_49,_50){var _52=0;return function(){if(++_52==_49){return _45(_50)}}})(_45,_49,_50);for(var m=0;m<_49;++m){var _54=_33[m];if(!_54.visible){_51();continue}
var _55=(function(_50,_51,m){return function(_32){_50[m]=_32;return _51()}})(_50,_51,m);if(this.isPrinting){var _48=_54.getPrintHTML(_29.currentPrintProperties,_55);if(_48==null){_28=true}else{_37=_55(_48)}}else{_37=_55(_54.getInnerHTML(_54.getValue()))}}
_33.length=0}else{_37=_45()}
if(_37===false)_28=true}
if(_28){return false}else{return _37}}else{return _30()}},isc.A.getPrintChildren=function isc_DynamicForm_getPrintChildren(){return null},isc.A.getCanvasItemCanvii=function isc_DynamicForm_getCanvasItemCanvii(){var _1=this.items||[],_2=[];for(var i=0;i<_1.length;i++){if(_1[i].isA("CanvasItem")&&isc.isA.Canvas(_1[i].canvas)){_2.add(_1[i].canvas)}}
return _2},isc.A.createErrorItem=function isc_DynamicForm_createErrorItem(){var _1=isc.addProperties({cellStyle:this.errorItemCellStyle},this.errorItemDefaults,this.errorItemProperties);this.addItems([_1],0);this.$52o=this.getItem(0)},isc.A.getErrorsHTML=function isc_DynamicForm_getErrorsHTML(_1){if(!_1||isc.isAn.emptyObject(_1))return isc.emptyString;var _2=this.errorsPreamble;_2+="<UL>";for(var _3 in _1){var _4=this.getItem(_3),_5;if(_4)_5=_4.getErrorMessage(_1[_3])
else{_5=_1[_3];if(isc.isAn.Array(_5))
_5="<ul><li>"+_5.join("</li><li>")+"</li></ul>"}
_2+="<LI>"+(_4?_4.getTitle():_3)+" : "+_5+"</LI>"}
_2+="</UL>";return _2},isc.A.getItemErrorHTML=function isc_DynamicForm_getItemErrorHTML(_1,_2){return _1.getErrorHTML(_2)},isc.A.$11f=function isc_DynamicForm__getAutoSendTargetHTML(){this.$91[1]=this.autoSendTargetFieldName;this.$91[3]=this.target;return this.$91.join(isc.emptyString)},isc.A.getCellStartHTML=function isc_DynamicForm_getCellStartHTML(_1,_2){var _3=_1.getColSpan(),_4=_1.$135a!=null?_1.$135a:_1.getRowSpan();if(_3==0)_3=1;if(_4==0)_4=1;if(_3=="*"){var _5=(_1.$8m?_1.$8m[0]:0);_3=(this.numCols-_5)}
var _6=_1.getCellStyle();var _7=this.fixedRowHeights||_1.shouldFixRowHeight();var _8=_1.$8t?_1.$8t[1]:null;if(isc.isA.Number(_8)&&this.cellSpacing!=0)_8-=2*this.cellSpacing;if(isc.Browser.isStrict&&isc.isA.Number(_8)&&this.cellPadding!=0){_8-=2*this.cellPadding}
return this.$11g((_1.align?_1.align:((this.form?this.form.isRTL():this.isRTL())?isc.Canvas.RIGHT:isc.Canvas.LEFT)),_1.vAlign,_6,_4,_3,null,(_7?_8:null),null,_1.cssText,(this.form?this.form.getID():this.getID()),_1.getItemID(),_1.getFormCellID())},isc.A.$11g=function isc_DynamicForm__getCellStartHTML(_1,_2,_3,_4,_5,_6,_7,_8,_9,_10,_11,_12,_13){var _14=isc.StringBuffer.create(),_15=isc.$ad;_14.append("<TD ALIGN=",_1,(_2==null?_15:" VALIGN="+_2),(_3!=null?" CLASS='"+_3+"'":_15)," STYLE='",(_9!=null?_9:_15),"'",(_4>1?" ROWSPAN="+_4:_15),(_5>1?" COLSPAN="+_5:_15),(_6!=null?" WIDTH="+_6:_15),(_7!=null?" HEIGHT="+_7:_15),(_8!=null?_8:_15));if(_12){_14.append(" ID=",_12," ")}
if(_11&&_10){_14.append(isc.DynamicForm.$89,"='",_11,"'")}
_14.append(_13?"><NOBR>":">");return _14.release()},isc.A.getCellEndHTML=function isc_DynamicForm_getCellEndHTML(_1,_2){return this.$11h()},isc.A.$11h=function isc_DynamicForm__getCellEndHTML(_1){return _1?"</NOBR></TD>":"</TD>"},isc.A.getTitleOrientation=function isc_DynamicForm_getTitleOrientation(_1){if(_1&&!_1.shouldShowTitle())return null;return(_1?_1.titleOrientation:null)||this.titleOrientation||isc.Canvas.LEFT},isc.A.getTitleAlign=function isc_DynamicForm_getTitleAlign(_1){var _2=this.form||this;return(_1.titleAlign?_1.titleAlign:this.titleAlign?this.titleAlign:this.isRTL()?isc.Canvas.LEFT:isc.Canvas.RIGHT)},isc.A.getTitleVAlign=function isc_DynamicForm_getTitleVAlign(_1){var _2=(_1.titleVAlign?_1.titleVAlign:this.titleVAlign?this.titleVAlign:isc.Canvas.CENTER);return(_2==isc.Canvas.CENTER?isc.Canvas.MIDDLE:_2)},isc.A.getTitleHeight=function isc_DynamicForm_getTitleHeight(_1){var _2=this.form||this;return(_1.titleHeight!=null?_1.titleHeight:this.titleHeight)},isc.A.getTitleSpanHTML=function isc_DynamicForm_getTitleSpanHTML(_1,_2){var _3=isc.StringBuffer.create();_3.append("<SPAN ",this.$11i(_1)," CLASS='",_1.getTitleStyle(),"' ALIGN=",this.getTitleAlign(_1),">");_3.append(this.getTitleHTML(_1,_2));_3.append("</SPAN>");return _3.release()},isc.A.shouldClipTitle=function isc_DynamicForm_shouldClipTitle(_1){if(!_1||!_1.form==this)return false;return(_1.clipTitle!=null?_1.clipTitle:!!this.clipItemTitles)},isc.A.getTitleCellHTML=function isc_DynamicForm_getTitleCellHTML(_1,_2){var _3=isc.StringBuffer.create(),_4=_1.getTitleStyle(),_5=this.getTitleAlign(_1),_6=this.getTitleVAlign(_1);var _7=this.$99;_7[1]=this.$11i(_1);_7[3]=_4;_7[5]=_5;_7[7]=_6;var _8=_1.$135a;if(_8==null)_8=_1.getRowSpan();if(_8>1)_7[9]=" ROWSPAN="+_8;else _7[9]=null;if(_1.getTitleColSpan()>1)_7[10]=" COLSPAN="+_1.getTitleColSpan();else _7[10]=null;_3.append(_7.join(isc.emptyString));_3.append(this.getTitleCellInnerHTML(_1,_2));_3.append(this.$98);return _3.release()},isc.A.getTitleCellInnerHTML=function isc_DynamicForm_getTitleCellInnerHTML(_1,_2){var _3=isc.StringBuffer.create(),_4=_1.getTitleStyle(),_5=this.getTitleAlign(_1),_6=this.getTitleOrientation(_1),_7=_1.$8u||null,_8=_1.$8t?_1.$8t[1]:null,_9=this.shouldClipTitle(_1),_10=(_1.wrapTitle!=null?_1.wrapTitle:(this.wrapItemTitles!=null?this.wrapItemTitles:!_9));if(_6==this.$o0&&_1.$8t){_7=Math.max(_1.$8t[0],_7==null?0:_7)}
if(_8){if(this.cellSpacing)_8-=2*this.cellSpacing;var _11,_12;if(_4){_11=isc.Element.$tt(_4,true);_12=isc.Element.$tu(_4,true)}
if(_11==null)_11=this.cellPadding||0;if(_12==null)_12=this.cellPadding||0;_8-=(_11+_12)
if(_4)_8-=isc.Element.$ym(_4)}
if(_7){if(this.cellSpacing)_7-=2*this.cellSpacing;var _13,_14;if(_4){_13=isc.Element.$tr(_4,true);_14=isc.Element.$ts(_4,true)}
if(_13==null)_13=this.cellPadding||0;if(_14==null)_14=this.cellPadding||0;_7-=(_13+_14)
_7-=isc.Element.$yn(_4)}
var _15=isc.Browser.isMoz?this.$94:this.$92,_16=isc.Browser.isMoz?this.$11j:this.$93;if(_9){if(this.$10a==null){this.$10a=["<DIV style='overflow:hidden;","white-space:nowrap;",,"' ",isc.DynamicForm.$9a,"='",isc.DynamicForm.$9g,"' ",isc.DynamicForm.$89,"='",,"'>"];if(this.emitOuterTextOverflow){this.$10a[0]+=isc.Browser.$114w+":ellipsis;"}}
var _17=this.$10a;if(_7!=null)_17[2]=_16+_7+"px;";else _17[2]=null;_17[10]=_1.getID();_3.append(_17.join(isc.emptyString))}else if(!_10){_3.append(this.$95)}
_3.append(this.getTitleHTML(_1,_2,_9));if(_9){_3.append(this.$97)}
return _3.release()},isc.A.$11i=function isc_DynamicForm__containsItemTitleAttrHTML(_1){if(!isc.DynamicForm.$11k){isc.DynamicForm.$11l=[" ",isc.DynamicForm.$89,"='",null,"' ",isc.DynamicForm.$9a,"='",isc.DynamicForm.$9g,"' ","ID="]}
isc.DynamicForm.$11l[3]=_1.getItemID();isc.DynamicForm.$11l[10]=this.$427(_1);return isc.DynamicForm.$11l.join(isc.emptyString)},isc.A.$427=function isc_DynamicForm__getTitleCellID(_1){return this.$qs(_1.getID()+this.$63z)},isc.A.getTitleCell=function isc_DynamicForm_getTitleCell(_1){if(!this.isDrawn())return null;_1=this.getItem(_1);if(!_1)return null;return isc.Element.get(this.$427(_1))},isc.A.updateTitleCellState=function isc_DynamicForm_updateTitleCellState(_1){var _2=this.getTitleCell(_1);if(_2==null)return;_1=this.getItem(_1);_2.className=_1.getTitleStyle();_2.innerHTML=this.getTitleCellInnerHTML(_1,_1.getErrors())},isc.A.$1140=function isc_DynamicForm__getTitleClipperID(_1){return this.$qs(_1.getID()+this.$114x)},isc.A.$1141=function isc_DynamicForm__getTitleClipper(_1){if(!this.isDrawn())return null;_1=this.getItem(_1);if(!_1)return null;return isc.Element.get(this.$1140(_1))},isc.A.titleClipped=function isc_DynamicForm_titleClipped(_1){var _2=this.$1141(_1);return(_2!=null&&isc.Element.getClientWidth(_2)<_2.scrollWidth)},isc.A.getTitleHTML=function isc_DynamicForm_getTitleHTML(_1,_2,_3){var _4=isc.StringBuffer.create();var _5=_1.visible?_1.getTitleHTML():null;if(_5){var _6=this.isRequired(_1),_7=this.getTitleOrientation(_1),_8=(_7==isc.Canvas.LEFT||_7==isc.Canvas.TOP);if(_3){var _9=this.$114z;if(_6&&this.hiliteRequiredFields){if(_8){var _10=this.exclusiveRequiredTitlePrefix,_11=this.exclusiveRequiredTitleSuffix;if(_10==null){if(this.requiredTitlePrefix.endsWith(this.titlePrefix)){_10=this.requiredTitlePrefix.substring(0,this.requiredTitlePrefix.length-this.titlePrefix.length)}else{_10=this.requiredTitlePrefix}}
if(_11==null){if(this.requiredTitleSuffix.startsWith(this.titleSuffix)){_11=this.requiredTitleSuffix.substring(this.titleSuffix.length)}else{_11=this.requiredTitleSuffix}}
_9[0]=_10;_9[2]=this.requiredTitleSuffix.substring(0,this.requiredTitleSuffix.length-_11.length);_9[4]=this.$1140(_1);_9[10]=this.requiredTitlePrefix.substring(_10.length);_9[11]=_5;_9[13]=_11}else{var _12=this.exclusiveRequiredRightTitlePrefix,_13=this.exclusiveRequiredRightTitleSuffix;if(_12==null){if(this.requiredRightTitlePrefix.endsWith(this.rightTitlePrefix)){_12=this.requiredRightTitlePrefix.substring(0,this.requiredRightTitlePrefix.length-this.rightTitlePrefix.length)}else{_12=this.requiredRightTitlePrefix}}
if(_13==null){if(this.requiredRightTitleSuffix.startsWith(this.rightTitleSuffix)){_13=this.requiredRightTitleSuffix.substring(this.rightTitleSuffix.length)}else{_13=this.requiredRightTitleSuffix}}
_9[0]=_12;_9[2]=this.requiredRightTitleSuffix.substring(0,this.requiredRightTitleSuffix.length-_13.length);_9[4]=this.$1140(_1);_9[10]=this.requiredRightTitlePrefix.substring(_12.length);_9[11]=_5;_9[13]=_13}}else{if(_8){_9[0]=this.exclusiveTitlePrefix;_9[2]=this.titleSuffix.substring(0,this.titleSuffix.length-this.exclusiveTitleSuffix.length);_9[4]=this.$1140(_1);_9[10]=this.titlePrefix.substring(this.exclusiveTitlePrefix.length);_9[11]=_5;_9[13]=this.exclusiveTitleSuffix}else{_9[0]=this.exclusiveRightTitlePrefix;_9[2]=this.rightTitleSuffix.substring(0,this.rightTitleSuffix.length-this.exclusiveRightTitleSuffix.length);_9[4]=this.$1140(_1);_9[10]=this.rightTitlePrefix.substring(this.exclusiveRightTitlePrefix.length);_9[11]=_5;_9[13]=this.exclusiveRightTitleSuffix}}
_4.append.apply(_4,_9)}else{_4.append((_6&&this.hiliteRequiredFields?(_8?this.requiredTitlePrefix:this.requiredRightTitlePrefix):(_8?this.titlePrefix:this.rightTitlePrefix)),_5,(_6&&this.hiliteRequiredFields?(_8?this.requiredTitleSuffix:this.requiredRightTitleSuffix):(_8?this.titleSuffix:this.rightTitleSuffix)))}}else{_4.append("&nbsp;")}
return _4.release()});isc.evalBoundary;isc.B.push(isc.A.getFormTagStartHTML=function isc_DynamicForm_getFormTagStartHTML(){var _1=this.$10c,_2=this.getFormID(),_3=this.getID();_1[3]=_2;if(this.$11e())_1[4]=this.$10e;else _1[4]=null;_1[6]=this.method;_1[8]=this.action;if(this.isMultipart())_1[10]=isc.DynamicForm.MULTIPART_ENCODING;else _1[10]=isc.DynamicForm.NORMAL_ENCODING;if(this.target!=null){_1[11]=this.$10f;_1[12]=this.target;_1[13]=this.$ob}else{_1[11]=null;_1[12]=null;_1[13]=null}
_1[15]=_3;_1[17]=_3;return _1.join(isc.emptyString)},isc.A.getTableStartHTML=function isc_DynamicForm_getTableStartHTML(){var _1=isc.isA.DynamicForm(this),_2=_1?this.$10g:isc.DynamicForm.getPrototype().$10g;_2[1]=this.$11n();if(this.isPrinting){_2[2]=_1?this.$119i:isc.DynamicForm.getPrototype().$119i;_2[3]="100%"}else if(!!this.writeWidthAttribute){_2[2]=_1?this.$119i:isc.DynamicForm.getPrototype().$119i;_2[3]=(this.getInnerContentWidth!=null?this.getInnerContentWidth():this.getInnerWidth())}else{_2[3]=_2[2]=null}
_2[5]=this.cellSpacing;_2[7]=this.cellPadding;_2[9]=this.cellBorder;return _2.join(isc.emptyString)},isc.A.$11n=function isc_DynamicForm__getTableElementID(){return this.$qs(this.$10h)},isc.A.$11o=function isc_DynamicForm__getTableElement(){return isc.Element.get(this.$11n())},isc.A.layoutChildren=function isc_DynamicForm_layoutChildren(_1,_2,_3,_4){this.invokeSuper(isc.DynamicForm,"layoutChildren",_1,_2,_3,_4);var _5=this.getItems();if(!_5)return;for(var i=0;i<_5.length;i++){var _7=_5[i].width,_8=_5[i].height;if((isc.isA.String(_7)&&(_7.contains("%")||_7.contains("*")))||(isc.isA.String(_8)&&(_8.contains("%")||_8.contains("*"))))
{this.markForRedraw("size change with dynamic size children");break}}},isc.A.getAbsPosHTML=function isc_DynamicForm_getAbsPosHTML(){var _1=isc.SB.create();for(var _2=0,_3=this.items.length;_2<_3;_2++){var _4=this.items[_2];if(!_4)continue;_4.$10x();if(!_4.visible)continue;var _5=!_4.$712(),_6=this.showInlineErrors;_1.append(_4.getStandaloneItemHTML(_4.getValue(),_5,_6))}
return _1.release()},isc.A.getScrollWidth=function isc_DynamicForm_getScrollWidth(_1){if(this.$qz){this.$qz=null;this.adjustOverflow("widthCheckWhileDeferred")}
if(!_1&&this.$su!=null)return this.$su;var _2;if(!isc.Browser.isIE||!this.$11e()||!(this.isDrawn()||this.handleDrawn())||this.items==null)
{_2=isc.Canvas.$b4.getScrollWidth.call(this,_1)}else{_2=0;for(var i=0;i<this.items.length;i++){var _4=this.items[i];if(_4.visible==false||!_4.isDrawn())continue;var _5=_4.getAbsDiv();if(_5){var _6=_5.scrollWidth+_4.$11p(_4.left);if(_6>_2)_2=_6}}}
this.$su=_2;return _2},isc.A.getScrollHeight=function isc_DynamicForm_getScrollHeight(_1){if(this.$qz){this.$qz=null;this.adjustOverflow("heightCheckWhileDeferred")}
if(!_1&&this.$sz!=null)return this.$sz;var _2;if(!isc.Browser.isIE||!this.$11e()||!(this.isDrawn()||this.handleDrawn())||this.items==null)
{_2=isc.Canvas.$b4.getScrollHeight.call(this,_1)}else{_2=0;for(var i=0;i<this.items.length;i++){var _4=this.items[i];if(_4.visible==false||!_4.isDrawn())continue;var _5=_4.getAbsDiv();if(_5){var _6=_5.scrollHeight+_4.$11p(_4.top,true);if(_6>_2)_2=_6}}}
this.$sz=_2;return _2},isc.A.$11q=function isc_DynamicForm__formWillSubmit(){return this.canSubmit||this.isMultipart()||(this.action!=isc.DynamicForm.getPrototype().action)},isc.A.submitForm=function isc_DynamicForm_submitForm(){if(!this.$11q()){this.logWarn("Attempt to perform direct submission on DynamicForm where this.canSubmit is false. Please set this property to true, or use the standard databinding interfaces to send data to the server.")}
if(this.getFileItemForm()!=null){this.logWarn("Performing a direct submission on a DynamicForm containing a FileItem. Note: This item's value will not be submitted to the server.  FileItems are intended for use with databound forms backed by the SmartClient server only.  If you are not using the SmartClient Databinding subsystem, use an UploadItem rather than a FileItem to submit a file as part of a raw HTTP request. Otherwise use saveData() rather than a direct call to submitForm() to save the full set of values for the form.")}
var _1=this.getForm();if(!_1)return;if(_1.action!=this.action)_1.action=this.action;try{return _1.submit()}catch(e){this.logWarn("Form submission was unsuccessful. In some browsers this can occur when an upload item is present and has an invalid value.\n"+e.message);this.formSubmitFailed()}},isc.A.performImplicitSave=function isc_DynamicForm_performImplicitSave(_1,_2){this.implicitSaveInProgress=true;if(_1){if(_1.$887){_1.parentItem.updateValue()}
if(_1.$da!=null)isc.Timer.clear(_1.$da)}
if(this.awaitingImplicitSave)delete this.awaitingImplicitSave;this.logInfo("performImplicitSave called "+(!_2?"by editorExit()":"after implicitSaveDelay ("+this.implicitSaveDelay+"ms)")+" for item "+_1.name+".");if(this.valuesManager){this.valuesManager.saveData(this.getID()+".$888(data)",{showPrompt:false})}else{this.saveData(this.getID()+".$888(data)",{showPrompt:false})}},isc.A.$95x=function isc_DynamicForm__addItemToImplicitSaveUpdateArray(_1){var _2=this.valuesManager?this.valuesManager:this;if(!_2.itemsToUpdateState)_2.itemsToUpdateState=[];_1.awaitingImplicitSave=true;_2.itemsToUpdateState.add(_1);_1.updateState()},isc.A.$888=function isc_DynamicForm__implicitSaveCallback(_1){delete this.implicitSaveInProgress;var _2=this.valuesManager?this.valuesManager:this;if(_2.itemsToUpdateState){for(var i=0;i<_2.itemsToUpdateState.length;i++){var _4=_2.itemsToUpdateState[i];delete _4.awaitingImplicitSave;_4.wasAwaitingImplicitSave=true;_4.updateState()}
delete _2.itemsToUpdateState}
this.implicitSaveCallback(_1)},isc.A.implicitSaveCallback=function isc_DynamicForm_implicitSaveCallback(_1){},isc.A.formSubmitFailed=function isc_DynamicForm_formSubmitFailed(){isc.warn(this.formSubmitFailedWarning);var _1=this.getValues()._transaction;if(_1!=null&&isc.RPCManager&&isc.XMLTools){var _2=isc.XMLTools.parseXML(this.getValues()._transaction),_3;if(_2)_3=isc.XMLTools.selectNumber(_2,"//transactionNum");if(_3!=null){isc.RPCManager.doClearPrompt(_3);isc.RPCManager.clearTransaction(_3)}
var _4=this.getItem("_transaction");if(_4&&isc.isA.HiddenItem(_4)){this.clearValue("_transaction")}}},isc.A.setAction=function isc_DynamicForm_setAction(_1,_2){this.action=_1;var _3=this.getForm();if(_3)_3.action=_1;this.$66g=!_2},isc.A.setTarget=function isc_DynamicForm_setTarget(_1){this.target=_1;var _2=this.getForm();if(_2)_2.target=_1},isc.A.setMethod=function isc_DynamicForm_setMethod(_1){this.method=_1;var _2=this.getForm();if(_2)_2.method=_1},isc.A.getFileItemForm=function isc_DynamicForm_getFileItemForm(){if(!isc.FileItem)return null;var _1=this.getItems()||[];for(var i=0;i<_1.length;i++){if(isc.isA.FileItem(_1[i])){var _3=_1[i].canvas;if(isc.isA.DynamicForm(_3))return _3}}
return null},isc.A.$114v=function isc_DynamicForm__propagateOperationsToFileItem(){var _1=this.getFileItemForm();if(_1!=null){_1.fetchOperation=this.fetchOperation;_1.updateOperation=this.updateOperation;_1.addOperation=this.addOperation;_1.removeOperation=this.removeOperation}},isc.A.$10d=function isc_DynamicForm__handleNativeSubmit(){return false},isc.A.validate=function isc_DynamicForm_validate(_1,_2,_3,_4,_5,_6){if(this.disableValidation)return true;if(this.dataSource&&this.dataSource.useLocalValidators!=null&&this.useLocalValidators==false)return true;var _7=this.hasErrors(),_8=false,_9=this.getForm(),_10=false;var _11={},_12={},_13=this.getValues(),_14=_13,_15=(_1&&!_2&&this.dataSource)?isc.addProperties({},this.getDataSource().getFields()):null;if(this.valuesManager!=null){_14=this.valuesManager.getValues();if(this.dataPath!=null){_14=isc.DynamicForm.$70o(this.dataPath,null,_14,this,true)}}
var _16={unknownErrorMessage:this.unknownErrorMessage,serverValidationMode:"full"};if(_3)
_16.typeValidationsOnly=_3;if(_5)
_16.skipServerValidation=_5;else
_16.deferServerValidation=true;var _17=isc.rpc?isc.rpc.startQueue():false;var _18=[];for(var _19=0;_19<this.items.length;_19++){var _20=false,_21=this.items[_19],_22=_21.getFieldName(),_23=_21.getTrimmedDataPath()||_21.getFieldName(),_24=_21.getValue(),_25=!_21.visible||isc.isA.HiddenItem(_21);if(_25&&!_1)continue;if(_21.validators!=null){if(!isc.isAn.Array(_21.validators)){_21.validators=[_21.validators]}
var _26=this.validateField(_21,_21.validators,_24,_14,_16);if(_26!=null){if(_26.needsServerValidation){_18.add(_21)}
if(_26.errors!=null){_20=this.addValidationError(_11,_22||_23,_26.errors);if(_20)_8=true}
if(_26.resultingValue!=null){_24=_26.resultingValue;if(_23){isc.DynamicForm.$70n(_23,_21,_24,_13,this,true)}else if(_22){_13[_22]=_24}
_10=true}}}
if(_25&&_20)_12[_22||_23]=_11[_22||_23];if(_15)delete _15[_22]}
if(this.rulesEngine!=null){var _27=this.rulesEngine.applyFieldValidators(_11,this);if(_27)_8=true}
if(_15){_16.dontValidateNullValues=true;delete _16.typeValidationsOnly;for(var i in _15){var _29=_15[i],_30=i,_31=_29.validators;if(_31!=null){var _24=_13[_30];var _26=this.validateField(_29,_31,_24,_13,_16);if(_26!=null&&_26.errors!=null){this.addValidationError(_11,_30,_26.errors)}}
if(_11[_30]!=null)_12[_30]=_11[_30]}}
if(_18.length>0){this.validateFieldsOnServer(_18,_13,_16)}
if(!_17&&isc.rpc)isc.rpc.sendQueue();if(_8)this.logInfo("Validation errors: "+isc.Log.echoAll(_11));if(_4)return(_8?_11:true);this.setErrors(_11);if(_10){this.setItemValues(_13);for(var _32 in _13){if(this.getItem(_32)==null)this.$10w(_32,_13[_32])}}
if(!_6&&(_8||_7)){this.showErrors(_11,_12)}
return!_8},isc.A.valuesAreValid=function isc_DynamicForm_valuesAreValid(_1,_2){var _3=this.validate(_1,null,null,true);if(_3===true){return(_2?null:true)}else{return(_2?_3:false)}},isc.A.getValidatedValues=function isc_DynamicForm_getValidatedValues(){if(!this.validate())return null;return this.getValues()},isc.A.showErrors=function isc_DynamicForm_showErrors(_1,_2){var _3=!this.autoFocusOnError||this.$116a;if(this.$116a)delete this.$116a;var _4;if(_2===_4)_2=this.getHiddenErrors();if(_1===_4)_1=this.getErrors();if(_1&&!this.showInlineErrors&&(!this.$52o||this.$52o.destroyed||!this.items.contains(this.$52o)))
{this.createErrorItem()}
this.markForRedraw("Validation Errors Changed");if(_1&&!isc.isAn.emptyObject(_1)&&!_3){for(var _5 in _1){var _6=this.getItem(_5);if(_6&&_6.isVisible()&&_6.isDrawn()){this.$11b(_6);break}}}
if(!this.showInlineErrors){this.delayCall("scrollIntoView",[0,0],100)}
if(_2){this.$21z(_2)}},isc.A.getHiddenErrors=function isc_DynamicForm_getHiddenErrors(){if(!this.errors)return null;var _1=false,_2={};for(var _3 in this.errors){var _4=this.getItem(_3);if(!_4||!_4.visible){_1=true;_2[_3]=this.errors[_3]}}
return(_1?_2:null)},isc.A.showFieldErrors=function isc_DynamicForm_showFieldErrors(_1,_2){var _3;if(_2)this.$116a=true;return this.showErrors()},isc.A.$21z=function isc_DynamicForm__handleHiddenValidationErrors(_1){if(_1==null||isc.isAn.emptyObject(_1))return;var _2;if(this.handleHiddenValidationErrors){_2=this.handleHiddenValidationErrors(_1)}
if(_2==false)return;var _3="Validation errors occurred for the following fields with no visible form items:";for(var _4 in _1){var _5=_1[_4];if(!isc.isAn.Array(_5))_5=[_5];if(_5.length==0)continue;_3+="\n"+_4+":";for(var i=0;i<_5.length;i++){_3+=(i==0?"- ":"\n - ")+_5[i]}}
this.logWarn(_3,"validation")},isc.A.isRequired=function isc_DynamicForm_isRequired(_1){return(isc.DynamicForm.canEditField(_1,this)&&(_1.required||_1.$11m||this.isXMLRequired(_1)))},isc.A.setRequiredIf=function isc_DynamicForm_setRequiredIf(){var _1=this.getValues();for(var _2=0;_2<this.items.length;_2++){var _3=this.items[_2],_4=_3.validators;delete _3.$11m;if(!_3.visible||!_4||_4.length==0)continue;for(var v=0;v<_4.length;v++){var _6=_4[v];if(!_6)continue;var _7=isc.Validator.getValidatorType(_6);if(_7==this.$10i){var _8=_3.getValue();if(_6.expression!=null&&!isc.isA.Function(_6.expression)){isc.Func.replaceWithMethod(_6,"expression","item,validator,value")}
_3.$11m=_6.expression.apply(this,[_3,_6,_8])}else if(_7==this.$842){_3.$11m=true}}}},isc.A.setFocusItem=function isc_DynamicForm_setFocusItem(_1){_1=this.getItem(_1);this.$10n=_1},isc.A.getFocusItem=function isc_DynamicForm_getFocusItem(){var _1=this.getFocusSubItem();while(_1&&_1.parentItem!=null){_1=_1.parentItem}
return _1},isc.A.getFocusSubItem=function isc_DynamicForm_getFocusSubItem(){return this.$10n},isc.A.$vl=function isc_DynamicForm__readyToSetFocus(){return!this.isDisabled()},isc.A.setFocus=function isc_DynamicForm_setFocus(_1){if(!this.$vl())return;var _2=this.isVisible();if(_1){var _3=this.getFocusSubItem();if(_3==null){var _4=this.getItems();if(_4!=null){for(var i=0;i<_4.length;i++){var _6=_4[i];if(_6.$kk()&&_6.isDrawn()&&_6.isVisible()&&!_6.isDisabled())
{_3=_6;break}}}}
var _7=isc.EH.lastEvent;if(_3!=null&&!(_7.target==this&&_7.eventType==isc.EH.MOUSE_DOWN)){return this.focusInItem(_3)}}
this.Super("setFocus",arguments);if(!_1){this.$11r(this.getFocusSubItem())}},isc.A.$kf=function isc_DynamicForm__focusInNextTabElement(_1,_2,_3,_4){if(_3||!this.items||this.items.length==0||(_2&&isc.EH.targetIsMasked(this,_2)))
{this.logInfo("DynamicForm - focusInNextTabElement() running. Delegating to Super()","syntheticTabIndex");return this.Super("$kf",arguments)}
var _5=this.items;if(_4==null)_4=this.getFocusSubItem();if(_4==null){this.logInfo("DynamicForm - focusInNextTabElement() running. Focusing at end.","syntheticTabIndex");this.focusAtEnd(_1);return}
while(_4.parentItem){if(_4.$11s(_1)){this.logInfo("DynamicForm - focusInNextTabElement() - allowed:"+_4+" to shift focus internally.","syntheticTabIndex");return}
_4=_4.parentItem}
if(_4.$11s(_1)){this.logInfo("DynamicForm - focusInNextTabElement() running. allowed:"+_4+" to shift focus internally.","syntheticTabIndex");return}
_4=this.$11t(_4,_1);this.logInfo("DynamicForm - focusInNextTabElement() moving to next item:"+_4+", forward?"+_1,"syntheticTabIndex");if(_4!=null){this.focusInItem(_4,_1)}else{if(isc.EH.$kj==this&&isc.EH.$kl==this){this.focusAtEnd(_1)}else{return this.Super("$kf",arguments)}}},isc.A.$11t=function isc_DynamicForm__getNextFocusItem(_1,_2){var _3=this.items,_4=_1,_5=_1.getGlobalTabIndex(),_6,_7,_8=_3.indexOf(_1);for(var i=0;i<_3.length;i++){var _10=_3[i];if(_10==_1)continue;var _11=_10.getGlobalTabIndex();if(_11<0){continue}
if(!this.$11u(_10,true))continue;if(_2){if(_11==_5&&i>_8){_6=_10;break}
if(_11>_5&&(_7==null||_7>_11))
{_6=_10;_7=_11}}else{if((_11<_5||(_11==_5&&_8>i))&&(_7==null||_7<=_11))
{_6=_10;_7=_11}}}
return _6},isc.A.$120d=function isc_DynamicForm__getStartItemForFocusAtEnd(_1){if(!this.items)return;var _2,_3,_4=this.items;for(var i=0;i<_4.length;i++){var _6=_4[i],_7=_6.getGlobalTabIndex();if(_7<0||!this.$11u(_6,true))continue;if((_3==null)||(_1&&_7<_3)||(!_1&&_7>=_3))
{_2=_6;_3=_7}}
if(_2&&this.$11u(_2,true))return _2},isc.A.focusAtEnd=function isc_DynamicForm_focusAtEnd(_1){var _2=this.$120d(_1);if(_2)this.focusInItem(_2,!!_1);else{var _3,_4=isc.EH.clickMaskRegistry;if(_4){for(var i=_4.length-1;i>=0;i--){if(isc.EH.isHardMask(_4[i])){_3=_4[i];break}}}
this.$kf(_1,_3,true)}},isc.A.$11u=function isc_DynamicForm__canFocusInItem(_1,_2){if(isc.isA.String(_1))_1=this.getItem(_1);return _1&&_1.$kk()&&_1.isDrawn()&&_1.isVisible()&&!_1.isDisabled()&&(!_2||_1.tabIndex!=-1)},isc.A.focusInItem=function isc_DynamicForm_focusInItem(_1,_2){if(_1!=null){var _3=this.getItem(_1)}else{var _3=this.getFocusSubItem()}
if(!_3){if(_1!=null)this.logWarn("couldn't find focus item: "+_1);return}
if(_3.$kk()){_3.focusInItem(_2);this.setFocusItem(_3);if(this.$10u){var _4=this;isc.Page.setEvent("idle",function(){if(!_4.destroyed)_4.focusInItem()},isc.Page.FIRE_ONCE)}}else{this.logWarn("focusInItem: item cannot accept focus: "+_3)}},isc.A.clearFocusItem=function isc_DynamicForm_clearFocusItem(){delete this.$10n},isc.A.blurFocusItem=function isc_DynamicForm_blurFocusItem(){var _1=this.getFocusSubItem();if(_1!=null){this.$11r(_1);this.clearFocusItem()}},isc.A.$11r=function isc_DynamicForm__blurItem(_1){if(_1!=null&&_1.hasFocus)_1.blurItem()},isc.A.$106=function isc_DynamicForm__blurFocusItemWithoutHandler(){var _1=this.getFocusSubItem();if(_1!=null&&_1.hasFocus){if(this.$11v==null)this.$11v=0;else this.$11v+=1;this.$11r(_1)}else{this.logDebug("blur w/o handler: no item to blur")}},isc.A.$11b=function isc_DynamicForm__focusInItemWithoutHandler(_1){if(!_1||!this.$11u(_1)){var _2;if(_1&&_1.parentItem){this.$11b(_1.parentItem);_2=true}
this.logInfo("$11b("+_1+"): not calling focus as item not focusable or item already has focus"+(_2?". Putting focus into containerItem instead.":""),"nativeFocus")
return}
var _3=_1.hasFocus;if(isc.Browser.isIE){var _4=isc.DynamicForm._getItemInfoFromElement(document.activeElement);_3=(_4&&_4.item==_1)}
if(_3)return;this.$65n(_1);this.focusInItem(_1)},isc.A.$65n=function isc_DynamicForm__suppressFocusHandlerForItem(_1){if(this.$11w==null)this.$11w=0;else this.$11w+=1;this.$11x=_1},isc.A.setOpacity=function isc_DynamicForm_setOpacity(_1,_2,_3,_4,_5,_6){var _7=this.opacity;this.invokeSuper(isc.DynamicForm,"setOpacity",_1,_2,_3,_4,_5,_6);_1=this.opacity;if(isc.Browser.isMoz&&this.hasFocus&&(_1!=_7)&&(_1==null||_1==100||_7==null||_7==100))
{var _8=this.getFocusSubItem();if(_8&&_8.$429()){this.$106();this.$11b(_8)}}},isc.A.clearingElement=function isc_DynamicForm_clearingElement(_1){if(this.$11w!=null&&this.$11x==_1){delete this.$11w;delete this.$11x}
if(this.$11v!=null&&(this.getFocusSubItem()==_1)){delete this.$11v}},isc.A.hide=function isc_DynamicForm_hide(){if(isc.Browser.isMoz)this.$11r(this.getFocusSubItem());this.Super("hide",arguments)},isc.A.setVisibility=function isc_DynamicForm_setVisibility(_1,_2,_3,_4){this.invokeSuper(isc.DynamicForm,"setVisibility",_1,_2,_3,_4);this.itemsVisibilityChanged();if(this.isVisible()&&this.isDrawn()&&this.autoFocus)this.focus()},isc.A.clear=function isc_DynamicForm_clear(){this.Super("clear",arguments);this.itemsVisibilityChanged()
this.$11a()},isc.A.$lf=function isc_DynamicForm__focusChanged(_1){this.Super("$lf",arguments);if(!this.hasFocus)this.$11r(this.getFocusSubItem())},isc.A.parentVisibilityChanged=function isc_DynamicForm_parentVisibilityChanged(_1){if(!this.isVisible()&&isc.Browser.isMoz)this.$11r(this.getFocusSubItem());this.Super("parentVisibilityChanged",arguments);this.itemsVisibilityChanged();if(this.isVisible()&&this.autoFocus)this.focus()},isc.A.$kr=function isc_DynamicForm__allowNativeTextSelection(_1){var _2=this.$ne(_1);if(_2.item){var _3=_2.item.$kr(_1,_2);if(_3!=null)return _3}
return this.Super("$kr",arguments)},isc.A.prepareForDragging=function isc_DynamicForm_prepareForDragging(_1,_2,_3,_4){var _5=this.ns.EH;if(_5.dragTarget)return;var _6=_5.lastEvent,_7=this.$ne(_6);if(_7.item&&(_7.overElement||_7.overTextBox||_7.overControlTable))return false;return this.invokeSuper(isc.DynamicForm,"prepareForDragging",_1,_2,_3,_4)},isc.A.$ne=function isc_DynamicForm__getEventTargetItemInfo(_1){if(!_1)_1=isc.EH.lastEvent;var _2=isc.EH.isMouseEvent(_1.eventType)?_1.nativeTarget:_1.nativeKeyTarget;var _3=isc.DynamicForm._getItemInfoFromElement(_2,this);_1.itemInfo=_3;return _3},isc.A.getEventItem=function isc_DynamicForm_getEventItem(){var _1=isc.EH.lastEvent.itemInfo;if(_1!=null&&!_1.inactiveContext&&!_1.overTitle)return _1.item;return null},isc.A.getEventItemInfo=function isc_DynamicForm_getEventItemInfo(){var _1=this.$ne();if(_1==null||_1.inactiveContext)return null;return{item:_1.item,overItem:(_1.overElement||_1.overTextBox||_1.overControlTable),overTitle:_1.overTitle,icon:_1.overIcon}},isc.A.handleMouseStillDown=function isc_DynamicForm_handleMouseStillDown(_1,_2){if(isc.$cv)arguments.$cw=this;var _3=this.$ne(_1),_4=((_3.overTitle||_3.inactiveContext)?null:_3.item);if(_4!=null){if(_4.form!=this)return;if(_4.mouseStillDown){if(_4.handleMouseStillDown(_1)==false)return false}}},isc.A.handleMouseDown=function isc_DynamicForm_handleMouseDown(_1,_2){var _3=this.$ne(_1),_4=(_3.overTitle?null:_3.item);this.$921=_3;if(_4!=null){if(_4.form!=this)return;_4.handleMouseDown(_1);if(isc.Browser.isSafari&&!_3.inactiveContext&&_3.overElement&&isc.isA.CheckboxItem(_4))
{_4.focusInItem()}}},isc.A.$11y=function isc_DynamicForm__itemMouseEvent(_1,_2){var _3=this.$11z,_4=this.$110,_5=this.$1147,_6=this.$111,_7=_1.item,_8=_1.overTitle,_9=_1.overTextBox,_10=_1.overIcon,_11=true;if(!_9&&_7&&_7.hasDataElement()&&_7.$15i){_9=_1.overElement}
if(_1.inactiveContext!=null){_7=null;_8=null;_10=null}
if(_3&&_3.destroyed){_3=null;this.$11z=null;this.$111=null;this.$110=null;this.$1147=null}
if(_7&&_7.destroyed){_7=null;_8=null;_9=null;_10=null}
this.$11z=_7;this.$110=_8;this.$1147=_9;this.$111=_10;if(_2==isc.EH.MOUSE_OVER){if(_7){if(_8)_7.handleTitleOver();else{if(_10)this.$111=null;_7.handleMouseOver();_11=false}}}else if(_2==isc.EH.MOUSE_OUT){if(_3){if(_4)_3.handleTitleOut();else{if(_6)_3.$114(_6);_3.handleMouseOut()}}}else{var _12=(_3!=_7||_4!=_8||_5!=_9);if(_12){if(_3){if(_4)_3.handleTitleOut();else{if(_6)_3.$114(_6);_3.handleMouseOut()}}
if(_7){if(_8)_7.handleTitleOver();else{if(_10)_7.$113(_10);_7.handleMouseOver();_11=false}}}else if(_7){if(_8)_7.handleTitleMove();else{if(_6!=_10){if(_6)_7.$114(_6);if(_10)_7.$113(_10)}else if(_7){if(_10)_7.$115(_10);_7.handleMouseMove()}}}}
return _11},isc.A.handleMouseOver=function isc_DynamicForm_handleMouseOver(_1,_2){if(this.mouseOver&&this.mouseOver(_1,_2)==false)return false;var _3=this.$11y(this.$ne(_1),isc.EH.MOUSE_OVER);return _3},isc.A.handleMouseMove=function isc_DynamicForm_handleMouseMove(_1,_2){if(this.mouseMove&&this.mouseMove(_1,_2)==false)return false;var _3=this.$11y(this.$ne(_1),isc.EH.MOUSE_MOVE);return _3},isc.A.handleMouseOut=function isc_DynamicForm_handleMouseOut(_1,_2){this.$11y({},isc.EH.MOUSE_OUT);if(this.mouseOut&&this.mouseOut(_1,_2)==false)return false},isc.A.bubbleItemHandler=function isc_DynamicForm_bubbleItemHandler(_1,_2,_3,_4,_5,_6){var _7=this.getItemById(_1),_8=null;for(;_7!=null;_7=_7.parentItem){if(_7.form!=this)continue;if(_7[_2]!=null&&!isc.isA.Function(_7[_2])){isc.Func.replaceWithMethod(_7,_2,"arg1,arg2,arg3,arg4")}
if(_7[_2]==null){this.logWarn("handler:"+_2+" is not present on itemID "+_1);return false}
_8=_7[_2](_3,_4,_5,_6);if(_8==false)return _8}
return _8},isc.A.bubbleInactiveEditorEvent=function isc_DynamicForm_bubbleInactiveEditorEvent(_1,_2,_3){return this.bubbleItemHandler(_1,"$680",_2,_3.inactiveContext,_3)},isc.A.elementChanged=function isc_DynamicForm_elementChanged(_1){var _2=this.bubbleItemHandler(_1,"elementChanged",_1);return(_2!=false)},isc.A.handleClick=function isc_DynamicForm_handleClick(_1,_2){var _3=this.$ne(_1);if(this.editingOn){if(!_3||!_3.item||(!_3.inactiveContext&&!_3.overTitle&&!_3.overIcon&&!_3.overElement&&!_3.overTextBox&&!_3.overControlTable)){var _4=false;if(_3&&_3.item&&_3.item.isA("SpacerItem")){_4=true}
this.logWarn("No item clicked upon, passing the click to the DF","EventHandler");if(!_4)return this.Super("handleClick",arguments)}}
var _5;if(_3&&_3.item){var _6=_3.item;var _7=this.$921||{},_8=this.$921?this.$921.item:null;if(_8==_3.item){_5=this.handleItemClick(_3,_7);this.$142h=this.$921}}
delete this.$921;if(_5==false||_5==isc.EH.STOP_BUBBLING)return _5;return this.Super("handleClick",arguments)},isc.A.handleItemClick=function isc_DynamicForm_handleItemClick(_1,_2){var _3;var _4=_1.item;if(_1.inactiveContext){this.logInfo("Bubbling inactive editor event for "+_4.ID,"EventHandler");_3=this.bubbleInactiveEditorEvent("click",_4,_1)}else{if(this.$921.overTitle&&_1.overTitle){this.logInfo("Bubbling handleTitleClick event for "+_4.ID,"EventHandler");_3=this.bubbleItemHandler(_4,"handleTitleClick",_4)}else{var _5=_4.isA("SpacerItem"),_6=_5||(_1.overElement||_1.overTextBox||_1.overControlTable),_7=_5||(_2.overElement||_2.overTextBox||_2.overControlTable)
if(_2.overIcon&&_1.overIcon&&(_4.form==this)){if(_4.$116(_1.overIcon)==false)
return false;var _8=_4.getIcon(_1.overIcon);if(_8&&_8.writeIntoItem){_6=true;_7=true}}
if(_6&&_7){this.logInfo("Bubbling handleClick event for "+_4.ID,"EventHandler");if(this.bubbleItemHandler(_4,"handleClick",_4)==false){_3=false}}
if(_3!=false){this.logInfo("Bubbling handleCellClick event for "+_4.ID,"EventHandler");_3=this.bubbleItemHandler(_4,"handleCellClick",_4)}}}
return _3},isc.A.handleDoubleClick=function isc_DynamicForm_handleDoubleClick(_1,_2){var _3=this.$ne(_1),_4=this.$921,_5=this.$142h;var _6;if(_3&&_3.item&&_4&&(_4.item==_3.item))
{if(_5&&(_5.item==_3.item)){var _7=_3.item;if(_3.inactiveContext){_6=this.bubbleInactiveEditorEvent(_7,"doubleClick",_3)}else if(_3.overTitle&&_4.overTitle){_6=this.bubbleItemHandler(_7,"handleTitleDoubleClick",_7)}else{var _8=(_3.overElement||_3.overTextBox||_3.overControlTable),_9=(_4.overElement||_4.overTextBox||_4.overControlTable)
if(_3.overIcon&&_4.overIcon){if(_7.$116(_3.overIcon)==false)return false;var _10=_7.getIcon(_3.overIcon);if(_10&&_10.writeIntoItem){_8=true;_9=true}}
if(_8&&_9){if(this.bubbleItemHandler(_7,"handleDoubleClick",_7)==false){_6=false}}
if(_6!=false){_6=this.bubbleItemHandler(_7,"handleCellDoubleClick",_7)}}}else{_6=this.handleItemClick(_3,_4||{})}}
delete this.$921;delete this.$142h;if(_6==false||_6==isc.EH.STOP_BUBBLING)return _6;return this.Super("handleDoubleClick",arguments)});isc.evalBoundary;isc.B.push(isc.A.elementFocus=function isc_DynamicForm_elementFocus(_1,_2){if(!this.hasFocus)isc.EventHandler.focusInCanvas(this);var _3=this.getItemById(_2);this.setFocusItem(_3);var _4=true,_5=false;if(this.$11w!=null){if(this.$11x!=_3){delete this.$11w;delete this.$11x}else{_5=true;this.$11w-=1;if(this.$11w<0){delete this.$11w;delete this.$11x}}}
_4=this.bubbleItemHandler(_2,"elementFocus",_5);return(_4!=false)},isc.A.elementBlur=function isc_DynamicForm_elementBlur(_1,_2){if(!isc.isA.FormItem(this.getItemById(_2)))return;var _3=true;if(this.$11v==null)_3=this.bubbleItemHandler(_2,"elementBlur");else{this.$11v-=1;if(this.$11v<0)delete this.$11v}
this.clearPrompt();return(_3!=false)},isc.A.handleKeyPress=function isc_DynamicForm_handleKeyPress(_1,_2){if(_1.keyName==this.$10j){if(this.saveOnEnter){var _3=this.getFocusSubItem();if(_3&&_3.shouldSaveOnEnter()){this.submit()}}}
if(_1.keyName=="Backspace"&&!isc.DynamicForm.canEditField(this.getFocusSubItem(),this))
{return false}
return this.Super("handleKeyPress",arguments)},isc.A.titleHoverHTML=function isc_DynamicForm_titleHoverHTML(_1){if(_1.prompt)return _1.prompt;if(_1.showClippedTitleOnHover&&this.shouldClipTitle(_1)&&this.titleClipped(_1))
{return _1.getTitle()}},isc.A.$119=function isc_DynamicForm__showItemHover(_1,_2){if(_2&&!isc.is.emptyString(_2)&&_1.showHover!=false){var _3=this.$wc(_1);isc.Hover.show(_2,_3,(_1.hoverRect||this.itemHoverRect))}else isc.Hover.clear()},isc.A.$wc=function isc_DynamicForm__getHoverProperties(_1){if(!isc.isA.FormItem(_1))_1=this.getItem(_1);var _2={};if(_1){_2=isc.addProperties({},{align:(_1.hoverAlign!=null?_1.hoverAlign:this.itemHoverAlign),hoverDelay:(_1.hoverDelay!=null?_1.hoverDelay:this.itemHoverDelay),height:(_1.hoverHeight!=null?_1.hoverHeight:this.itemHoverHeight),opacity:(_1.hoverOpacity!=null?_1.hoverOpacity:this.itemHoverOpacity),baseStyle:(_1.hoverStyle!=null?_1.hoverStyle:this.itemHoverStyle),showHover:(_1.showHover!=null?_1.showHover:this.showHover),valign:(_1.hoverVAlign!=null?_1.hoverVAlign:this.itemHoverVAlign),width:(_1.hoverWidth!=null?_1.hoverWidth:this.itemHoverWidth),wrap:(_1.hoverWrap!=null?_1.hoverWrap:this.itemHoverWrap)})}else{_2=isc.addProperties({},{align:this.hoverAlign,hoverDelay:this.hoverDelay,height:this.hoverHeight,opacity:this.hoverOpacity,baseStyle:this.hoverStyle,valign:this.hoverVAlign,width:this.hoverWidth})}
_2.moveWithMouse=this.hoverMoveWithMouse;return _2},isc.A.showPrompt=function isc_DynamicForm_showPrompt(_1){window.status=_1},isc.A.clearPrompt=function isc_DynamicForm_clearPrompt(){window.status=""},isc.A.isMultipart=function isc_DynamicForm_isMultipart(){return!(this.encoding==isc.DynamicForm.NORMAL||this.encoding==isc.DynamicForm.NORMAL_ENCODING)},isc.A.itemIsLastInRow=function isc_DynamicForm_itemIsLastInRow(_1,_2){var _3=this.items.$8j,_4=_3[_2],_5=this.getItems().indexOf(_1);if(!_4||_5<0)return false;if(_4[this.numCols-1]==_5)return true;return false},isc.A.getColumnWidths=function isc_DynamicForm_getColumnWidths(){var _1=this.items.$8j,_2=[];_2.length=this.numCols;for(var j=0;j<_2.length;j++)_2[j]=0;for(var _4=0;_4<_1.length;_4++){var _5=_1[_4];for(var i=0;i<_5.length;i++){var _7=this.items.get(_5[i]);if(_7.colSpan&&_7.colSpan>1)continue;if(_7.showTitle&&(this.titleOrientation=="left"||!this.titleOrientation)){if(_7.getVisibleTitleWidth()>_2[i]){_2[i]=_7.getVisibleTitleWidth()}
i++}
if(_7.width>_2[i])_2[i]=_7.width;if(_7.showTitle&&_7.titleOrientation=="right"&&_7.getVisibleTitleWidth()>_2[i+1]){_2[++i]=_7.getVisibleTitleWidth()}}}
return _2},isc.A.getItemTableOffsets=function isc_DynamicForm_getItemTableOffsets(_1,_2){var _3=_2||this.items.$8j,_4=this.getItems().indexOf(_1),_5={};_5.itemIndex=_4
for(var _6=0;_6<_3.length;_6++){var _7=_3[_6],_8=_7.indexOf(_4),_9=_7.lastIndexOf(_4);if(_8>-1&&_9>-1){if(!_5.left||_8<_5.left)_5.left=_8;if(!_5.width||_5.width<_9-_8)_5.width=_9-_8+1;if(!_5.top||_6<_5.top)_5.top=_6;if(!_5.height||_5.height<_6-_5.top){_5.height=_6-_5.top+1}}}
return _5},isc.A.getItemDropIndex=function isc_DynamicForm_getItemDropIndex(_1,_2){if(!_1)return;if(!_2)_2="L";var _3=this.getItemTableOffsets(_1),_4=this.items.$8j;if(_2=="L")return _3.itemIndex;if(_2=="R"){if(this.itemIsLastInRow(_1)&&this.canAddColumns!=true){return _3.itemIndex+1}
return _3.itemIndex+1}
if(_2=="T"){return this.getItemIndexAtTableLocation(_3.top-(_3.top==0?0:1),_3.left)}
if(_2=="B"){var _5=_3.top+_3.height-1;var _6=this.getItemIndexAtTableLocation(_5+1,_3.left);if(_6==null){_6=this.items.length}
return _6}},isc.A.getItemIndexAtTableLocation=function isc_DynamicForm_getItemIndexAtTableLocation(_1,_2){var _3=this.items.$8j;if(!_3[_1])return;return _3[_1][_2]},isc.A.getItemAtPageOffset=function isc_DynamicForm_getItemAtPageOffset(_1,_2){this.items.$69e=this.getColumnWidths();var _3=this.items.$8j,_4=this.items.$69e,_5=this.items.$8s;var _6=this.inWhichPosition(_4,_1-this.getPageLeft()),_7=this.inWhichPosition(_5,_2-this.getPageTop());_6=_6==-1?0:_6==-2?_4.length:_6;_7=_7==-1?0:_7==-2?_5.length:_7;if(!_3[_7])return null;var _8=_3[_7][_6],_9=this.getItem(_8);if(_9!=null){_9.$69f=_7;_9.$69g=_6;_9.$69d=_8}
return _9},isc.A.getNearestItem=function isc_DynamicForm_getNearestItem(_1,_2){var _3=9999999999,_4;this.logDebug("Computing nearest item to ("+_1+","+_2+")","formItemDragDrop");for(var i=0;i<this.items.length;i++){var _6=this.items[i];var _7=_6.getPageRect(true),_8=_7[0],_9=_7[1],_10=_7[2],_11=_7[3],_12=0,_13=0;if(_1>=_8&&_1<=_8+_10&&_2>=_9&&_2<=_9+_11)
{return _6}
if(_1>_8){if(_1>_8+_10){_12=_1-(_8+_10)}}else{_12=_8-_1}
if(_2>_9){if(_2>_9+_11){_13=_2-(_9+_11)}}else{_13=_9-_2}
var _14=Math.sqrt(_12*_12+_13*_13);this.logDebug("Item "+_6.name+": (l,t,w,h) = "+_7,"formItemDragDrop");this.logDebug("XDelta: "+_12+", yDelta: "+_13+", straight line distance: "+_14,"formItemDragDrop");if(_14<_3){this.logDebug("Item "+_6.name+": distance is shorter than "+_3+", it is now the nearest item","formItemDragDrop");_3=_14;_4=_6}}
return _4},isc.A.showDragLineForItem=function isc_DynamicForm_showDragLineForItem(_1,_2,_3){this.makeDragLine();if(!_1){this._dragLine.hide();return}
var _4=_1.getPageRect(),_5=_4[0],_6=_4[1],_7=_4[2],_8=_1.getVisibleHeight(),_9=this.titleOrientation||"left";if(_1.showTitle!=false){if(_9=="left"||_9=="right")_7+=_1.getVisibleTitleWidth();if(_9=="left")_5-=_1.getVisibleTitleWidth()}
var _10;if(_2<=_5)_2=_5+1;else if(_2>=_5+_7){_2=_5+_7-1;_10=true}
var _11=_7/4;if(_11>20)_11=20;if(_3<=_6)_3=_6+1;else if(_3>=_6+_8)_3=_6+_8-1;var _12=_2-_5,_13=Math.round(_7/_12),_14=_3-_6,_15=Math.round(_8/_14),_16=(_5+_7)-_2,_17=Math.round(_7/_16),_18=(_6+_8)-_3,_19=Math.round(_8/_18),_20="R",_21,_22,_23,_24;_5--;_6--;if(_10||(Math.min(_13,_17)<Math.min(_15,_19)&&((_13>_17&&_12<_11)||(_17>_13&&_16<_11)))){_20=_10?"R":_13>_17?"L":"R";_22=3;_21=_8;_23=_20=="L"?_5:_5+_7-1;_24=_6}else{_20=_15>_19?"T":"B";_22=_7;_23=_5;_21=3;_24=_20=="T"?_6:_6+_8-1}
_1.dropSide=_20;if(this.itemIsLastInRow(_1,_1.$69f)&&!this.canAddColumns&&_1.dropSide=="R"){this.hideDragLine();this.setNoDropIndicator();this.$69h=this.currentCursor;this.setCursor("not-allowed")}
else{if(this.$uh){this.clearNoDropIndicator()
this.setCursor(this.$69h)}
var _25={left:_23,top:_24};this.adjustDragLinePosition(_25,_1,_20);_23=_25.left;_24=_25.top;this._dragLine.resizeTo(_22,_21);this._dragLine.setPageRect(_23,_24);this._dragLine.bringToFront();this._dragLine.show()}},isc.A.adjustDragLinePosition=function isc_DynamicForm_adjustDragLinePosition(_1,_2,_3){var _4=this.items.$8j,_5=this.items.indexOf(_2),_6,_7,_8;for(var i=0;i<_4.length;i++){if(_4[i].indexOf(_5)!=-1){_6=i;_7=_4[i].indexOf(_5);_8=_4[i].lastIndexOf(_5);break}}
if(_6==null||_7==null||_8==null)return;if(_3=="T"){if(_6==0)return;if(_4[_6-1][_7]==_4[_6-1][_8]&&_4[_6-1][_7-1]!=_4[_6-1][_7]&&_4[_6-1][_8+1]!=_4[_6-1][_7])
{var _10=this.items[_4[_6-1][_7]].getPageRect(true);var _11=_10[1]+_10[3];_1.top-=Math.round((_1.top-_11)/2)}}
if(_3=="B"){if(_6==_4.length-1)return;if(_4[_6+1][_7]==_4[_6+1][_8]&&_4[_6+1][_7-1]!=_4[_6+1][_7]&&_4[_6+1][_8+1]!=_4[_6+1][_7])
{var _10=this.items[_4[_6+1][_7]].getPageRect(true);var _11=_10[1];_1.top+=Math.round((_11-_1.top)/2)}}
if(_3=="L"){if(_7==0)return;var _10=this.items[_4[_6][_7-1]].getPageRect(true);var _12=_10[0]+_10[2];_1.left-=Math.round((_1.left-_12)/2)}
if(_3=="R"){if(_8==_4[_6].length-1)return;var _10=this.items[_4[_6][_8+1]].getPageRect(true);var _12=_10[0];_1.left+=Math.round((_12-_1.left)/2)}},isc.A.showDragLineForForm=function isc_DynamicForm_showDragLineForForm(){this.makeDragLine();this._dragLine.resizeTo(3,this.getHeight());this._dragLine.setPageRect(this.getPageLeft(),this.getPageTop());this._dragLine.bringToFront();this._dragLine.show()},isc.A.enableField=function isc_DynamicForm_enableField(_1){if(_1==null||isc.isAn.emptyString(_1))return;var _2=this.getItem(_1);if(_2)_2.enable()},isc.A.disableField=function isc_DynamicForm_disableField(_1){if(_1==null||isc.isAn.emptyString(_1))return;var _2=this.getItem(_1);if(_2)_2.disable()},isc.A.showField=function isc_DynamicForm_showField(_1){if(_1==null||isc.isAn.emptyString(_1))return;var _2=this.getItem(_1);if(_2)_2.show()},isc.A.hideField=function isc_DynamicForm_hideField(_1){if(_1==null||isc.isAn.emptyString(_1))return;var _2=this.getItem(_1);if(_2)_2.hide()},isc.A.getSelectionChain=function isc_DynamicForm_getSelectionChain(){if(!this.selectionComponent)return[];var _1=[];var _2=this;while(_2.selectionComponent){_1.add(_2.selectionComponent);_2=_2.selectionComponent}
var _3=[];for(var i=_1.length-1;i>=0;i--){_3.add(_1[i].getRecordIndex(_1[i].getSelectedRecord()))}
return _3},isc.A.setCanEdit=function isc_DynamicForm_setCanEdit(_1){this.canEdit=_1;if(this.isDrawn())this.markForRedraw("setCanEdit")},isc.A.setFieldCanEdit=function isc_DynamicForm_setFieldCanEdit(_1,_2){if(_1==null||isc.isAn.emptyString(_1))return;var _3=this.getField(_1);if(_3){if(_3.setCanEdit)_3.setCanEdit(_2);else{_3.canEdit=_2;this.redraw()}}},isc.A.setReadOnlyDisplay=function isc_DynamicForm_setReadOnlyDisplay(_1,_2){if(!_2)this.readOnlyDisplay=_1;var _3=this.getItems();if(_3&&_3.length>0){for(var i=0;i<_3.length;i++){if(_3[i].setReadOnlyDisplay)
_3[i].setReadOnlyDisplay(_1,true)}}
if(this.canEdit==false&&this.isDrawn()){this.redraw()}});isc.B._maxIndex=isc.C+247;isc.A=isc.DynamicForm;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.defaultFieldType="text";isc.A.$12a="link";isc.A.$gx="text";isc.A.$12b="select";isc.A.$12c="checkbox";isc.A.$12d="staticText";isc.A.$g2="boolean";isc.A.$gz="integer";isc.A.$12e="binary";isc.A.$12f="blob";isc.A.$52w="multifile";isc.A.$12g="multiupload";isc.A.$9i="upload";isc.A.$52x="file";isc.A.$51x="base64Binary";isc.A.$12h="enum";isc.A.$12i="CycleItem";isc.A.$12j="selectOther";isc.A.$12k="relation";isc.A.$67f="NestedEditorItem";isc.A.$67g="NestedListEditorItem";isc.A.$677="imageFile";isc.A.$678="ViewFileItem";isc.A.$77j="section";isc.A.$77k="SectionItem";isc.A.$77l="button";isc.A.$77m="ButtonItem";isc.A.$450="id";isc.A.compareValuesRecursive=true;isc.B.push(isc.A.getEditorType=function isc_c_DynamicForm_getEditorType(_1,_2){if(_1._constructor==isc.FormItem.Class)_1._constructor=null;var _3=_2.getDataSource();var _4=this.canEditField(_1,_2),_5=this.defaultFieldType,_6=_1.editorType;if(isc.isA.Class(_6)){_6=_6.getClassName()}
var _7=(_4==false&&_1.readOnlyEditorType)||_6||_1.formItemType||_1._constructor||_1.type||_5;if((_4==false&&_1.readOnlyEditorType)||_6||_1.formItemType||_1._constructor)
{return _7}
var _8=_7;var _9=null;var _10=(_7==this.$12e||_7==this.$52x||_7==this.$677);while(_8){if(_7==this.$12a){if(this.canEditField(_1,_2)&&_1.canEdit)_9=this.$gx;else _9=this.$12a}else if(_7==this.$g2){var _11=_1.valueMap;if(!isc.isAn.Array(_11)&&isc.isAn.Object(_11))_9=this.$12b;else _9=this.$12c}else if(_7==this.$12e||_7==this.$12f||_7==this.$52x||_7==this.$677)
{if(_1.dataSource)_9=this.$52w
else _9=this.$52x}else if(_7==this.$12g){_9=this.$52w}else if(_7==this.$51x){_9=this.$51x}else if(_7==this.$12h){if(_1.showValueIconOnly)_9=this.$12i
else _9=this.$12b}else if(isc.DataSource&&isc.isA.DataSource(_3)&&_3.fieldIsComplexType(_1.name)){_9=_1.multiple?_2.nestedListEditorType:_2.nestedEditorType}else{if(_8&&_8!=_5&&_8!=this.$gz&&(_8==this.$12j||(isc.FormItemFactory.getItemClass(_8)!=null)))
{_9=_8}else{_8=isc.SimpleType.getType(_8);if(_9){break}else if(_8==null||_8.inheritsFrom==null){if(_1.dataSource){_9=this.$12k}else if(_1.valueMap||_1.optionDataSource||_1.displayField){_9=(_1.showValueIconOnly?this.$12i:this.$12b)}else if(_2&&(_1.length&&_1.length>_2.longTextEditorThreshold))
{_9=_2.longTextEditorType}else{_9=_5}}else{_8=_8.inheritsFrom;_7=_8;_9=null;continue}}}
break}
return _9},isc.A.canEditField=function isc_c_DynamicForm_canEditField(_1,_2){if(!_1)return true;if(_2&&_2.canEditField){this.logDebug("Component "+_2+" calling 'canEditField()' method for field:"+_1.name,"canEditField");return _2.canEditField()}
if(_1.canEdit!=null)return _1.canEdit;if(_2.canEdit!=null)return _2.canEdit;return true},isc.A._getItemInfoFromElement=function isc_c_DynamicForm__getItemInfoFromElement(_1,_2){var _3=_2?_2.getClipHandle():document,_4={},_5=isc.DynamicForm.$89,_6=isc.DynamicForm.$9a,_7=isc.DynamicForm.$9b,_8=isc.DynamicForm.$9c,_9=isc.DynamicForm.$9e,_10=isc.DynamicForm.$99r,_11=isc.DynamicForm.$9g;while(_1&&_1!=_3&&_1!=document){var _12=_1.getAttribute?_1.getAttribute(_5):null;if(_12!=null&&!isc.isAn.emptyString(_12)){var _13=window[_12];if(_13&&!_13.destroyed){_4.item=_13;var _14=_13.$681(_1);if(_14!=null){if(this.logIsDebugEnabled("inactiveEditorHTML")){this.logDebug("Event occurred over inactive HTML for item:"+_13+" inactiveContext:"+this.echo(_14),"inactiveEditorHTML")}
_4.inactiveContext=_14}
var _15=_1.getAttribute(_6);if(_15==_7)_4.overElement=true;else if(_15==_11)_4.overTitle=true;else if(_15==_8)_4.overTextBox=true;else if(_15==_9)_4.overControlTable=true;else if(_15==_10)_4.overInlineError=true;else if(_15&&!isc.isAn.emptyString(_15))
_4.overIcon=_15;break}}
_1=_1.parentNode}
return _4},isc.A.getSimpleErrors=function isc_c_DynamicForm_getSimpleErrors(_1){var _2={};if(isc.isAn.Array(_1))_1=_1[0];for(var _3 in _1){var _4=_1[_3];if(_3=="recordPath"&&!isc.isAn.Object(_4))continue;if(isc.isAn.Array(_4)){_2[_3]=[];for(var i=0;i<_4.length;i++){var _6=_4[i];_2[_3][i]=isc.isAn.Object(_6)?isc.shallowClone(_6):{errorMessage:_6}}}else{_2[_3]=isc.isAn.Object(_4)?isc.shallowClone(_4):{errorMessage:_4}}}
return _2},isc.A.formatValidationErrors=function isc_c_DynamicForm_formatValidationErrors(_1){var _2={};if(isc.isAn.Array(_1))_1=_1[0];for(var _3 in _1){var _4=_1[_3];if(_3=="recordPath"&&!isc.isAn.Object(_4))continue;if(isc.isAn.Array(_4)){_2[_3]=[];for(var i=0;i<_4.length;i++){var _6=_4[i];if(isc.isAn.Object(_6))_6=_6.errorMessage;_2[_3][i]=_6}}else{_2[_3]=isc.isAn.Object(_4)?_4.errorMessage:_4}}
return _2},isc.A.compareValues=function isc_c_DynamicForm_compareValues(_1,_2){if(_1==_2)return true;if(isc.isA.Date(_1)&&isc.isA.Date(_2))
return(Date.compareDates(_1,_2)==0);else if(isc.isAn.Array(_1)&&isc.isAn.Array(_2)){if(_1.length!=_2.length)return false;for(var i=0;i<_1.length;i++){if(!isc.DynamicForm.compareValues(_1[i],_2[i]))return false}
return true}else{if(isc.isA.Number(_1)||isc.isA.String(_1)||isc.isA.Boolean(_1)){_1=_1.valueOf()}
if(isc.isA.Number(_2)||isc.isA.String(_2)||isc.isA.Boolean(_2)){_2=_2.valueOf()}
if(_1==_2)return true;if(isc.isAn.Object(_1)&&isc.isAn.Object(_2)){var _4=isc.DynamicForm.compareValuesRecursive;var _5=isc.addProperties({},_2);for(var _6 in _1){if(_4){if(!isc.DynamicForm.compareValues(_1[_6],_2[_6])){return false}}else{if(_2[_6]!=_1[_6])return false}
delete _5[_6]}
for(var _6 in _5){return false}
return true}}
return false},isc.A.valuesHaveChanged=function isc_c_DynamicForm_valuesHaveChanged(_1,_2,_3,_4,_5){var _6=false,_7={};for(var _8 in _3){if(isc.isA.Function(_3[_8]))continue;if(_8==isc.gwtRef||_8==isc.gwtModule)continue;if(isc.isAn.Instance(_3[_8])||isc.isA.Class(_3[_8]))continue;var _9=_5==null?_8:_5+"/"+_8;var _10=_1.getItem(_9);if(_10!=null){_6=!_10.compareValues(_3[_8],_4[_8]);if(_6&&_2)_7[_8]=_3[_8]}else{var _11=_3[_8],_12=_4[_8];var _13=isc.isA.Object(_11),_14=isc.isAn.Object(_12);if(_13&&(isc.isA.Number(_11)||isc.isA.String(_11)||isc.isA.Boolean(_11)))
{_11=_11.valueOf();_13=false}
if(_14&&(isc.isA.Number(_12)||isc.isA.String(_12)||isc.isA.Boolean(_12)))
{_12=_12.valueOf();_14=false}
if(_13&&!isc.isAn.Array(_11)&&!isc.isA.Date(_11)&&_14&&!isc.isAn.Array(_12)&&!isc.isA.Date(_12))
{var _15=this.valuesHaveChanged(_1,_2,_3[_8],_4[_8],_9);if(!_2&&_15){_6=true;break}else if(!isc.isAn.emptyObject(_15)){if(_7[_8]==null)_7[_8]={};isc.addProperties(_7[_8],_15)}}else{_6=!isc.DynamicForm.compareValues(_11,_12);if(_6&&_2)_7[_8]=_11}}
if(_6&&!_2){return true}}
return(_2?_7:_6)},isc.A.getFilterCriteria=function isc_c_DynamicForm_getFilterCriteria(){var _1={};for(var i=0;i<arguments.length;i++){var _3=arguments[i];if(_3==null)continue;isc.addProperties(_1,_3.getFilterCriteria())}
return _1},isc.A.$817=function isc_c_DynamicForm__getTopRowCellStart(){if(!this.$819){isc.Canvas.$816.add({target:this,methodName:"$82a"});this.$819=true}
if(this.$9x==null){this.$9x=["<TD style='",isc.Canvas.$42a,"height:0px;overflow:hidden;padding:0px;' class='",null,"'>",(isc.Browser.isSafari?"<div style='overflow:hidden;height:0px'>":"")]}
return this.$9x},isc.A.$818=function isc_c_DynamicForm__getTitleInnerTableTemplate(){if(!this.$819){isc.Canvas.$816.add({target:this,methodName:"$82a"});this.$819=true}
if(this.$10b==null){this.$10b=["<TABLE height=",," border=0 cellspacing=0 cellpadding=0><tr><td class='",,"' style='"+isc.Canvas.$42a+"' ALIGN='",,"'>",null]}
return this.$10b},isc.A.$82a=function isc_c_DynamicForm__doublingStringsChanged(){this.$9x=null;this.$10b=null});isc.B._maxIndex=isc.C+11;isc.defineClass("InlineFormItem","DynamicForm");isc.A=isc.InlineFormItem.getPrototype();isc.A.position="relative";isc.A.writeFormTag=false;isc.A.canSubmit=true;isc.A.numCols=1;isc.A.autoDraw=true;isc.A=isc.InlineFormItem;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.create=function isc_c_InlineFormItem_create(_1,_2,_3,_4,_5,_6,_7,_8,_9,_10,_11,_12,_13){var _14=isc.addProperties({showTitle:false,validate:function(){this.form.validate()},destroy:function(){this.form.destroy();this.Super("destroy",arguments)}},_1,_2,_3,_4,_5,_6,_7,_8,_9,_10,_11,_12,_13);var _15=this.createRaw().completeCreation({fields:[_14],valuesManager:_14.valuesManager},_14.formProperties);return _15.getItem(0)});isc.B._maxIndex=isc.C+1;isc.A=isc.DynamicForm;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.makeInlineItem=function isc_c_DynamicForm_makeInlineItem(_1,_2,_3,_4){return isc.InlineFormItem.create({name:_1,type:_2,formProperties:_4},_3)},isc.A.getFormValues=function isc_c_DynamicForm_getFormValues(_1){return isc.Canvas.getFormValues(_1)});isc.B._maxIndex=isc.C+2;isc.DynamicForm.registerStringMethods({valuesChanged:"",itemChanged:"item,newValue",itemChange:"item,newValue,oldValue",itemKeyPress:"item,keyName,characterValue",submitValues:"values,form",handleHiddenValidationErrors:"errors"});isc.ClassFactory.defineClass("FormItem");isc.A=isc.FormItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$68s=[null,"_inactiveContext",null];isc.A.$557=isc.Canvas.getPrototype().$557;isc.A.$63x=isc.Canvas.getPrototype().$63x;isc.A.reuseDOMIDs=false;isc.B.push(isc.A.$qs=function isc_FormItem__getDOMID(_1,_2,_3,_4){if(_4==null&&this.isInactiveHTML()){_4=this.$68u}
if(_4!=null){this.$68s[0]=_1;this.$68s[2]=_4;_1=this.$68s.join(isc.emptyString);if(this.logIsDebugEnabled("inactiveEditorHTML")){this.logDebug("$qs called for inactive HTML -- generated partName:"+_1,"inactiveEditorHTML")}
_2=false}
return isc.Canvas.getPrototype().$qs.apply(this,[_1,_2,_3])});isc.B._maxIndex=isc.C+1;isc.A=isc.FormItem;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.create=function isc_c_FormItem_create(_1,_2,_3,_4,_5,_6,_7,_8,_9,_10,_11,_12,_13){this.logWarn("Unsupported call to "+this.getClassName()+".create(). FormItems must be created by their containing form. To create form items, use the 'items' property of a DynamicForm instance. See documentation for more details.");return isc.addProperties({},_1,_2,_3,_4,_5,_6,_7,_8,_9,_10,_11,_12,_13)},isc.A.getNewTagID=function isc_c_FormItem_getNewTagID(){if(this.$12m==null)this.$12m=0;this.$12m+=1;return"isc_FormItemElement_ID_"+this.$12m},isc.A.setElementTabIndex=function isc_c_FormItem_setElementTabIndex(_1,_2){_1.tabIndex=_2;if(isc.Browser.isMoz){_1.style.MozUserFocus=(_2<0?"ignore":"normal")}},isc.A.$12n=function isc_c_FormItem__aboutToFireNativeElementFocus(_1){if(!isc.Browser.isIE)return;var _2=this.getActiveElement();if(_2&&_2.tagName==null)_2=null;if(_2&&((_2.tagName.toLowerCase()==this.$12o&&_2.type.toLowerCase()==this.$12p)||_2.tagName.toLowerCase()==this.$12q))
{var _3=_2.createTextRange();_3.execCommand("Unselect")}},isc.A.$12r=function isc_c_FormItem__textBasedItem(_1,_2){if(isc.isA.FormItem(_1))_1=_1.getClassName();if(!this.$12s){this.$12s={text:true,TextItem:true,textItem:true,textArea:true,TextAreaItem:true,textAreaItem:true}
this.$12t={popUpTextArea:true,PopUpTextAreaItem:true,popUpTextAreaItem:true}}
return this.$12s[_1]||(!_2||this.$12t[_1])},isc.A.$12u=function isc_c_FormItem__nativeFocusHandler(){if(!window.isc||!isc.DynamicForm)return;isc.EH.$h1("IFCS");var _1;if(isc.Log.supportsOnError){_1=isc.FormItem.$763(this)}else{try{_1=isc.FormItem.$763(this)}catch(e){isc.Log.$am(e)}}
isc.EH.$h2();return _1},isc.A.$763=function isc_c_FormItem___nativeFocusHandler(_1){var _2=isc.DynamicForm._getItemInfoFromElement(_1),_3=_2.item;if(_3&&_3.isDisabled()){_1.blur();return}
if(_3){return _3.$12v(_1,_3)}
isc.EH.$h2()},isc.A.$12w=function isc_c_FormItem__nativeBlurHandler(){if(!window.isc||!isc.DynamicForm)return;isc.EH.$h1("IBLR");var _1;if(isc.Log.supportsOnError){_1=isc.FormItem.$764(this)}else{try{_1=isc.FormItem.$764(this)}catch(e){isc.Log.$am(e)}}
isc.EH.$h2();return _1},isc.A.$764=function isc_c_FormItem___nativeBlurHandler(_1){var _2=isc.DynamicForm._getItemInfoFromElement(_1),_3=_2.item;if(_3&&_3.hasFocus){return _3.$12x(_1,_3)}},isc.A.$43a=function isc_c_FormItem__nativeCutPaste(){if(!window.isc)return;var _1=this,_2=isc.DynamicForm._getItemInfoFromElement(_1),_3=_2.item;if(_3&&_3.hasFocus){return _3.$43a(_1,_3)}},isc.A.$12y=function isc_c_FormItem__nativeChangeHandler(){if(!window.isc||!isc.DynamicForm)return;var _1=this,_2=isc.DynamicForm._getItemInfoFromElement(_1),_3=_2.item;if(_3)return _3.$12z()},isc.A.$120=function isc_c_FormItem__nativeIconFocus(){var _1=this,_2=isc.DynamicForm._getItemInfoFromElement(_1),_3=_2.item,_4=_2.overIcon;if(_3){if(_3.iconIsDisabled(_4))_1.blur();else return _3.$121(_4,_1)}},isc.A.$122=function isc_c_FormItem__nativeIconBlur(){if(!window.isc)return;var _1=this,_2=isc.DynamicForm._getItemInfoFromElement(_1),_3=_2.item,_4=_2.overIcon;if(_3&&!_3.iconIsDisabled(_4))return _3.$123(_4,_1)},isc.A.$124=function isc_c_FormItem__nativeIconClick(){return false},isc.A.$137y=function isc_c_FormItem__testStuckSelectionAfterRedraw(_1){if(!isc.Browser.isIE)return;this.$137z=_1;this.fireOnPause("testStuckSelection",{target:this,methodName:"$1370"})},isc.A.$1370=function isc_c_FormItem__testStuckSelection(){var _1=this.$137z;if(_1==null||_1.destroyed||!_1.isDrawn()||!_1.isVisible()||!_1.hasFocus)
{return}
if(_1.$100a()){_1.focusInItem()}},isc.A.getErrorPromptString=function isc_c_FormItem_getErrorPromptString(_1){var _2="";if(!isc.isAn.Array(_1))_1=[_1];for(var i=0;i<_1.length;i++){_2+=(i>0?"<br>":"")+_1[i].asHTML()};return _2},isc.A.$82b=function isc_c_FormItem__getOuterTableStartTemplate(){if(!this.$819){isc.Canvas.$816.add({target:this,methodName:"$82a"});this.$819=true}
if(this.$13y==null){this.$13y=["<TABLE role='presentation' CELLSPACING=0 CELLPADDING=0 BORDER=0 ID='",,"' STYLE='"+isc.Canvas.$42a,,"' CLASS='",,"'><TR>",,"<TD style='",,"' VALIGN=",,">"]}
return this.$13y},isc.A.$82c=function isc_c_FormItem__getIconsCellTemplate(){if(!this.$819){isc.Canvas.$816.add({target:this,methodName:"$82a"});this.$819=true}
if(this.$131==null){this.$131=["</TD><TD VALIGN=",," WIDTH=",," style='"+isc.Canvas.$42a+"line-height:",,"px' class='",,"' ID='",,"'>",null]}
return this.$131},isc.A.$82a=function isc_c_FormItem__doublingStringsChanged(){this.$13y=null;this.$131=null});isc.B._maxIndex=isc.C+20;isc.A=isc.FormItem;isc.A.$12o="input";isc.A.$12p="text";isc.A.$12q="textarea";isc.A.$15y={};isc.A.$132s={};isc.A=isc.FormItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.emptyDisplayValue="";isc.A.multipleValueSeparator=", ";isc.A.fetchMissingValues=true;isc.A.alwaysFetchMissingValues=false;isc.A.loadingDisplayValue="Loading...";isc.A.useShortDateFormat=true;isc.A.valueIconSize=16;isc.A.valueIconLeftPadding=0;isc.A.valueIconRightPadding=3;isc.A.showFocusedPickerIcon=false;isc.A.pickerIconHSpace=0;isc.A.pickerIconDefaults={click:function(_1,_2,_3){_2.showPicker()}};isc.A.pickerIconName="picker";isc.A.pickerIconSrc="";isc.A.visible=true;isc.A.disableIconsOnReadOnly=true;isc.A.accessKey=null;isc.A.changeOnKeypress=true;isc.A.maintainSelectionOnTransform=true;isc.A.dirtyOnKeyDown=true;isc.A.showTitle=true;isc.A.clipTitle=null;isc.A.width="*";isc.A.height=20;isc.A.titleColSpan=1;isc.A.colSpan=1;isc.A.rowSpan=1;isc.A.browserInputTypeMap={"digits":"number","phone":"tel"};isc.A.defaultIconSrc="[SKIN]/DynamicForm/default_formItem_icon.gif";isc.A.iconHSpace=3;isc.A.iconVAlign=isc.Canvas.BOTTOM;isc.A.iconHeight=20;isc.A.iconWidth=20;isc.A.iconPrompt="";isc.A.showIcons=true;isc.A.redrawOnShowIcon=false;isc.A.errorIconHeight=16;isc.A.errorIconWidth=16;isc.A.errorIconSrc="[SKIN]/DynamicForm/validation_error_icon.png";isc.A.showHint=true;isc.A.showFocused=false;isc.A.showDisabled=true;isc.A.showRTL=false;isc.A.cellStyle="formCell";isc.A.hintStyle="formHint";isc.A.titleStyle="formTitle";isc.A.editPendingCSSText="color:#0066CC;";isc.A.showFocusedErrorState=false;isc.A.$125=false;isc.A.showClippedTitleOnHover=true;isc.A.showClippedValueOnHover=true;isc.B.push(isc.A.getReadOnlyDisplay=function isc_FormItem_getReadOnlyDisplay(){return this.readOnlyDisplay||(this.form?this.form.readOnlyDisplay:"readOnly")},isc.A.setReadOnlyDisplay=function isc_FormItem_setReadOnlyDisplay(_1,_2){if(!_2){this.readOnlyDisplay=_1;if(isc.isA.CanvasItem(this)&&isc.isA.DynamicForm(this.canvas)){this.canvas.setReadOnlyDisplay(_1)}
if(this.items){for(var i=0;i<this.items.length;i++){this.items[i].setReadOnlyDisplay(_1,_2)}}}
if(!this.getCanEdit()&&this.isDrawn()){if(this.readOnlyDisplayChanged)this.readOnlyDisplayChanged(_1);this.redraw()}},isc.A.getReadOnlyTextBoxStyle=function isc_FormItem_getReadOnlyTextBoxStyle(){return this.readOnlyTextBoxStyle||(this.form?this.form.readOnlyTextBoxStyle:"staticTextItem")},isc.A.getReadOnlyClipValue=function isc_FormItem_getReadOnlyClipValue(){return this.readOnlyClipValue||(this.form?this.form.readOnlyClipValue:false)});isc.B._maxIndex=isc.C+4;isc.A=isc.FormItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$o5="height";isc.A.$o6="width";isc.A.$126="colSpan";isc.A.$127="rowSpan";isc.A.$pa="*";isc.A.$bv="_";isc.A.$128="value";isc.A.$129="dataElement";isc.A.$o9="%";isc.A.errorMessageWidth=80;isc.A.$68w=1;isc.A.$682=new RegExp(".*_inactiveContext(.*)$");isc.A.$13a="<DIV STYLE='position:absolute;left:";isc.A.$13b="px;top:";isc.A.$13c="px;width:";isc.A.$13d="px;height:";isc.A.$13e="px;' ID='";isc.A.$13f="'>";isc.A.$13g="</DIV>";isc.A.$13h=["<SPAN style='white-space:nowrap;' eventProxy=",," "+isc.DynamicForm.$89+"='",,"' ID='",,"'>"];isc.A.$13i="</SPAN>";isc.A.$13j="$13k";isc.A.$13l="$13m";isc.A.$13n=["<DIV isDisabledEventMask='true' style='overflow:hidden;position:absolute;width:",null,"px;height:",null,"px' "+isc.DynamicForm.$89+"='",null,"' "+isc.DynamicForm.$9a+"='"+isc.DynamicForm.$9b+"' ID='",,"'>",null,"</DIV>"];isc.A.$13o="hiddenDataElement";isc.A.$13p="control";isc.A.$13q="textBox";isc.A.$13r="pickerIconCell";isc.A.$59p="hintCell";isc.A.$13s="FormItemStyling";isc.A.$13t="deprecated";isc.A.$13u="Over";isc.A.$13v="Down";isc.A.$13w="Disabled";isc.A.$13x="valueIcon";isc.A.$13z="</TD></TR></TABLE>";isc.A.$130=["<TABLE role='presentation' ID='",,"' "+isc.DynamicForm.$89+"='",,"' "+isc.DynamicForm.$9a+"='"+isc.DynamicForm.$9e,"' CELLPADDING=0 CELLSPACING=0 STYLE='",,"' CLASS='",,"'><TR><TD style='",,"'>",,"</TD><TD ID='",,"' CLASS='",,"' STYLE='",,"'>",,"</TD></TR></TABLE>"];isc.A.$132=["</TD><TD ID='",,"' CLASS='",,"'>"];isc.A.$92q="iconCell";isc.A.$133="$134";isc.A.$135="white-space:normal;";isc.A.$136="white-space:nowrap;";isc.A.$137="min-width:";isc.A.$138="min-height:";isc.A.$93="width:";isc.A.$92="height:";isc.A.$38="px;";isc.A.$39=";";isc.A.$139={};isc.A.$14a="cursor:default;";isc.A.$1148="overflow:hidden;"+isc.Browser.$114w+":ellipsis;";isc.A.$14c="text-align:";isc.A.$1028="line-height:";isc.A.$1103="border-box";isc.A.$1104="-moz-box-sizing:";isc.A.$1105="-webkit-box-sizing:";isc.A.$1106="box-sizing:";isc.A.$14d="font-size:";isc.A.$14e=" ACCESSKEY='";isc.A.$14f=" TABINDEX='";isc.A.$ob="'";isc.A.$14g=["<DIV ID='",,"' "+isc.DynamicForm.$89+"='",,"' "+isc.DynamicForm.$9a+"='"+isc.DynamicForm.$9c,"' CLASS='",,"' STYLE='",,"'",,">",,,"</DIV>"];isc.A.errorIconName="isc_errorIcon";isc.A.$n3="drawing";isc.A.$14h="#";isc.A.$92r=(!isc.Browser.isSafari)&&(!isc.Browser.isMoz);isc.A.$80b="<table role='presentation' cellpadding=0 cellspacing=0 margin=0><tr>";isc.A.$5w="blank";isc.A.$132t="rtl";isc.A.$132u="RTL";isc.A.$14i="vertical-align:";isc.A.$133c=[,,";margin-top:",,"px;margin-bottom:",,"px;",,,null];isc.A.$14j={};isc.A._$_iLink_="_iLink_";isc.A._$_iImg_="_iImg_";isc.A.$18q="true";isc.A.$18r="false";isc.A.$14k="cell";isc.A.$54t="&nbsp;";isc.A.canEscapeHTML=false;isc.A.applyStaticTypeFormat=true;isc.A.$14l="smart";isc.A.$14m={"Tab":true,"Arrow_Left":true,"Arrow_Right":true,"Arrow_Up":true,"Arrow_Down":true,"Home":true,"End":true,"Page_Up":true,"Page_Down":true,"Enter":true};isc.A.shouldSaveValue=true;isc.A.$122s=false;isc.A.$146q="setSelectionRange";isc.A.$14n="character";isc.A.$146r="getSelectionRange";isc.A.$14o="EndToEnd";isc.A.$14p="EndToStart";isc.A.$119n="StartToEnd";isc.A.$119o="StartToStart";isc.A.$14n="character";isc.A.$683={};isc.A.$115=isc.Class.NO_OP;isc.A.$10j="Enter";isc.A.$304="Space";isc.A.$20w="Enter";isc.A.iconClickOnEnter=true;isc.A.iconClickOnSpace=true;isc.A.$54n="img";isc.A.$1160=isc.Class.NO_OP;isc.A.$jf="Tab";isc.A.$145b={"Backspace":true,"Delete":true};isc.A.$145c={"Arrow_Up":true,"Arrow_Left":true,"Home":true};isc.A.$145d={"Arrow_Down":true,"Arrow_Right":true,"End":true};isc.A.stopCharacterKeyPressBubbling=false;isc.A.stopNavKeyPressBubbling=false;isc.A.$14q="$14r";isc.A.$149x="$149y";isc.A.$14s={colSpan:true,rowSpan:true,startRow:true,endRow:true,showTitle:true,showHint:true};isc.A.$59q={baseStyle:true,showErrorStyle:true,showFocused:true,showErrorStyle:true,controlStyle:true,pickerIconStyle:true,textBoxStyle:true};isc.A.$59r="itemCellStyle";isc.A.useWildCardsByDefault=true;isc.A.$87p="ZZZZZZZZZZ";isc.B.push(isc.A.init=function isc_FormItem_init(){if(isc.$cv)arguments.$cw=this;if(this.ID==null||window[this.ID]!=this){isc.ClassFactory.addGlobalID(this)}
if(this.options&&!this.valueMap){this.valueMap=this.options;delete this.options}
this.$14t(this.$o5);this.$14t(this.$o6);this.$14t(this.$126);this.$14t(this.$127);this._value=this.getDefaultValue();this.$14u=true;this.$14v();if((!this.validateOnExit||!this.synchronousValidation)&&this.validators&&this.validators.length>0)
{for(var i=0;i<this.validators.length;i++){if(this.validators[i].stopOnError){this.validateOnExit=true;this.synchronousValidation=true;break}}}
if((!this.validateOnExit||!this.synchronousValidation)&&((this.stopOnError==null&&this.form&&this.form.stopOnError)||this.stopOnError))
{this.validateOnExit=true;this.synchronousValidation=true}
this.onInit(this)},isc.A.onInit=function isc_FormItem_onInit(_1){},isc.A.isRTL=function isc_FormItem_isRTL(){return this.containerWidget==null?isc.Page.isRTL():this.containerWidget.isRTL()},isc.A.$14t=function isc_FormItem__convertRawToMeasure(_1){var _2=this[_1];if(_2==null||isc.isA.Number(_2)||_2==this.$pa)return _2;var _3=parseInt(_2);if(_3==_2){this[_1]=_3;return _2}
return _2},isc.A.destroy=function isc_FormItem_destroy(_1,_2,_3,_4,_5){if(isc.FormItem.$92t==this){isc.FormItem.$92t.checkForEditorExit(true,true)}
this.invalidateDisplayValueCache(true);if(this.isDrawn())this.cleared();var _6=this.pickList;this.pickList=null;if(_6!=null){if(_6.formItem==this)delete _6.formItem;if(_6.isVisible())_6.hide();if(!this.reusePickList())_6.destroy();else if(_6.body)_6.body.$100r=true}
this.destroyed=true;this.form=null;this.$14x=null;var _7;isc.ClassFactory.dereferenceGlobalID(this);this.$63x();if(isc.EH.$52d==this)isc.EH.$52d=null;this.invokeSuper(isc.FormItem,"destroy",_1,_2,_3,_4,_5)},isc.A.clear=function isc_FormItem_clear(){if(this.picker)this.picker.clear()},isc.A.getDataSource=function isc_FormItem_getDataSource(){if(isc.isA.String(this.dataSource))return isc.DS.get(this.dataSource);return this.dataSource},isc.A.registerWithDataView=function isc_FormItem_registerWithDataView(_1){if(!this.inputDataPath)return;if(!_1){_1=this.form;while(_1&&!isc.isA.DataView(_1))_1=_1.parentElement}
if(!_1){this.logWarn("Component initialized with an inputDataPath property, but no DataView was found in the parent hierarchy. inputDataPath is only applicable to DataBoundComponents and FormItems being managed by a DataView");return}
_1.registerItem(this)},isc.A.getFieldName=function isc_FormItem_getFieldName(){return this.name},isc.A.getDataPath=function isc_FormItem_getDataPath(){return this.dataPath},isc.A.getTrimmedDataPath=function isc_FormItem_getTrimmedDataPath(){var _1=this.getDataPath();if(_1&&this.form&&this.form.dataPath){_1=this.form.$840(_1)}
if(_1&&_1.endsWith("/"))_1=_1.substring(0,_1.length-1);return _1},isc.A.getFullDataPath=function isc_FormItem_getFullDataPath(){var _1=this.getDataPath()||this.getFieldName();if(!_1){if(this.shouldSaveValue){this.logWarn("Encountered field with neither name nor dataPath: "+this.echo(this))}
_1=""}
if(!isc.isA.String(_1))_1=_1+"";if(_1.startsWith(isc.Canvas.$70l))return _1;var _2=this.form.getFullDataPath();if(_2&&_2!=isc.Canvas.$70l){return _2+isc.Canvas.$70l+_1}
return _1},isc.A.shouldSaveOnEnter=function isc_FormItem_shouldSaveOnEnter(){var _1=this.saveOnEnter!=null?this.saveOnEnter:false;return _1},isc.A.getItemName=function isc_FormItem_getItemName(){return this.getFieldName()},isc.A.getElementName=function isc_FormItem_getElementName(){if(this.isInactiveHTML())return"";var _1=this.getFieldName();if(this.parentItem){var _2=this.parentItem.getElementName();if(_1==isc.emptyString)_1=_2;else _1=[_2,this.$bv,_1].join(isc.emptyString)}
if(_1==null||_1==this.getID()||_1==isc.emptyString){_1=this.$qs(this.$128)}
return _1},isc.A.getBrowserInputType=function isc_FormItem_getBrowserInputType(){var _1=this.browserInputType;if(_1==null)return null;if(this.browserInputTypeMap.hasOwnProperty(_1)){_1=this.browserInputTypeMap[_1]}
return _1},isc.A.getDataElementId=function isc_FormItem_getDataElementId(){if(this.isInactiveHTML())return this.$qs(this.$129);if(this.$14y==null){this.$14y=this.$qs(this.$129,true)}
return this.$14y},isc.A.getItemID=function isc_FormItem_getItemID(){return this.getID()},isc.A.getID=function isc_FormItem_getID(){if(this.ID==null){isc.ClassFactory.addGlobalID(this)}
return this.ID},isc.A.shouldShowTitle=function isc_FormItem_shouldShowTitle(){return this.showTitle},isc.A.getTitleHTML=function isc_FormItem_getTitleHTML(){var _1=this.getTitle();if(!this.$kk())return _1;if(this.accessKey!=null){_1=isc.Canvas.hiliteCharacter(_1,this.accessKey)}
var _2;if(this.hasDataElement())_2=this.getDataElementId();if(!_2)return _1;return isc.SB.concat("<LABEL FOR=",_2,(this.accessKey!=null?" ACCESSKEY="+this.accessKey:isc.$ad),">",_1,"</LABEL>")},isc.A.getTitle=function isc_FormItem_getTitle(){var _1;if(!this.form)return;if(this[this.form.titleField]!==_1)return this[this.form.titleField];return this[this.form.fieldIdProperty]},isc.A.getTitleOrientation=function isc_FormItem_getTitleOrientation(){return this.form.getTitleOrientation(this)},isc.A.isVisible=function isc_FormItem_isVisible(){if(!this.containerWidget.isVisible())return false;if(this.visible==false)return false;if(this.parentItem&&!this.parentItem.isVisible())return false;return true},isc.A.getRowSpan=function isc_FormItem_getRowSpan(){return this.rowSpan},isc.A.getColSpan=function isc_FormItem_getColSpan(){if(this.colSpan==0)this.colSpan=1;return this.colSpan},isc.A.getTitleColSpan=function isc_FormItem_getTitleColSpan(){if(this.titleColSpan==0)this.titleColSpan=1;return this.titleColSpan},isc.A.isStartRow=function isc_FormItem_isStartRow(){return this.startRow},isc.A.isEndRow=function isc_FormItem_isEndRow(){return this.endRow},isc.A.getRect=function isc_FormItem_getRect(){return[this.getLeft(),this.getTop(),this.getVisibleWidth(),this.getVisibleHeight()]},isc.A.getPageRect=function isc_FormItem_getPageRect(_1){if(_1)return this.getPageRectIncludingTitle();return[this.getPageLeft(),this.getPageTop(),this.getVisibleWidth(),this.getVisibleHeight()]},isc.A.getPeerRect=function isc_FormItem_getPeerRect(){return this.getPageRect()},isc.A.getPageRectIncludingTitle=function isc_FormItem_getPageRectIncludingTitle(){var _1=this.getPageLeft(),_2=this.getPageTop(),_3=this.getVisibleWidth(),_4=this.getVisibleHeight();if(this.showTitle){var _5=this.getTitlePageLeft(),_6=this.getTitlePageTop(),_7=this.getVisibleTitleWidth(),_8=this.form.getTitleHeight(this);;if(this.titleOrientation=="left"||this.titleOrientation=="left"||this.titleOrientation==null)
{_1=_1<_5?_1:_5;_3+=_7}else{_1=_1<_5?_1:_5;_3=_3>_7?_3:_7;if(isc.isA.Number(_8))_4+=_8}}
return[_1,_2,_3,_4]},isc.A.getCellHeight=function isc_FormItem_getCellHeight(_1){if(isc.$cv)arguments.$cw=this;if(this.cellHeight!=null){return this.cellHeight}
var _2=this.getHeight(_1);if(!isc.isA.Number(_2))return _2;var _3=this.getIconsHeight();if(_2<_3){_2=_3}
if(this.$92s()&&this.pickerIconHeight){var _4=this.pickerIconHeight+this.$14z();if(_4>_2)_2=_4}
var _5=this.containerWidget;if(this.$11e()||!isc.isA.DynamicForm(_5))return _2;_2+=this.$140();if(this.showTitle&&this.form.getTitleOrientation(this)==isc.Canvas.TOP){_2+=this.form.getTitleHeight(this)}
return _2},isc.A.shouldFixRowHeight=function isc_FormItem_shouldFixRowHeight(){return this.cellHeight!=null||(!this.shouldApplyHeightToTextBox()&&this.getHeight()!=null)},isc.A.$140=function isc_FormItem__getCellVBorderPadSpacing(){var _1=0,_2=this.form,_3=this.getCellStyle();if(this.parentItem)_2=this.parentItem;_1+=2*_2.cellSpacing;var _4=isc.isA.Number(_2.cellPadding)?_2.cellPadding:0,_5=isc.Element.$tt(_3,true);if(_5==null)_5=_4
var _6=isc.Element.$tu(_3,true);if(_6==null)_6=_4;_1+=_5;_1+=_6;_1+=isc.Element.$ym(_3);return _1},isc.A.$141=function isc_FormItem__getCellHBorderPadSpacing(){var _1=0,_2=this.form,_3=this.getCellStyle();if(this.parentItem)_2=this.parentItem;if(isc.isA.Number(_2.cellSpacing))_1+=2*_2.cellSpacing;var _4=isc.isA.Number(_2.cellPadding)?_2.cellPadding:0,_5=isc.Element.$tr(_3,true);if(_5==null)_5=_4;var _6=isc.Element.$ts(_3,true);if(_6==null)_6=_4;_1+=_5;_1+=_6;_1+=isc.Element.$yn(_3);return _1},isc.A.getInnerHeight=function isc_FormItem_getInnerHeight(){var _1=this.containerWidget;if(this.$11e())return this.$11p(this.height,true);if(this.$8t==null&&this.height!=null&&isc.isA.String(this.height)&&this.containerWidget&&!isc.isA.DynamicForm(this.containerWidget)&&this.containerWidget.sizeFormItem!=null)
{this.containerWidget.sizeFormItem(this)}
if(this.$8t){var _2=this.$8t[1];if(!isc.isA.Number(_2))return _2;if(this.$142()){_2-=this.$140()}
return _2}
return this.getHeight()},isc.A.getInnerWidth=function isc_FormItem_getInnerWidth(_1){var _2=this.containerWidget;if(this.$11e())return this.$11p(this.width);if(this.$8t==null&&this.width!=null&&isc.isA.String(this.width)&&this.containerWidget&&!isc.isA.DynamicForm(this.containerWidget)&&this.containerWidget.sizeFormItem!=null)
{this.containerWidget.sizeFormItem(this)}
var _3=this.$8t?this.$8t[0]:this.width;if(!isc.isA.Number(_3)){return _3}
if(this.$142()){_3-=this.$141()}
return _3},isc.A.getColWidth=function isc_FormItem_getColWidth(){var _1=this.form?this.form.items:null;if(_1&&_1.$8r!=null&&this.$8m!=null){var _2=this.$8m[0],_3=this.$8m[2];if(this.showTitle){var _4=this.getTitleOrientation();if(_4==isc.Canvas.LEFT)_2+=1;else if(_4==isc.Canvas.RIGHT)_3-=1}
var _5=0;for(var c=_2;c<_3;c++){_5+=_1.$8r[c]}
return _5}
return null},isc.A.$11e=function isc_FormItem__absPos(){return(this.containerWidget.$11e&&this.containerWidget.$11e())},isc.A.$142=function isc_FormItem__writtenIntoCell(){return(this.containerItem!=null||(this.form==this.containerWidget&&!this.$11e()))},isc.A.$11p=function isc_FormItem__getPercentCoord(_1,_2){if(isc.isA.String(_1)&&isc.endsWith(_1,this.$o9)){var _3=this.containerWidget,_4=_2?_3.getInnerHeight():_3.getInnerWidth();return Math.round((parseInt(_1,10)/100)*_4)}
return _1},isc.A.getElementWidth=function isc_FormItem_getElementWidth(){var _1=this.getInnerWidth();if(!isc.isA.Number(_1))return null;_1-=this.getTotalIconsWidth();return(isc.isA.Number(_1)?Math.max(_1,1):null)},isc.A.getTextBoxWidth=function isc_FormItem_getTextBoxWidth(_1){var _2=this.getElementWidth();if(!isc.isA.Number(_2))return _2;if(this.textBoxStyle){var _3=this.getTextBoxStyle();_2-=(isc.Element.$tf(_3)+isc.Element.$tg(_3));if(this.$143()){_2-=isc.Element.$yp(_3)}}
if(this.$92s()){_2-=this.getPickerIconWidth();var _4=this.getPickerIcon();if(_4.hspace!=null)_2-=_4.hspace;if(this.pickerIconStyle)
_2-=isc.Element.$yp(this.getPickerIconStyle());if(this.controlStyle)
_2-=isc.Element.$yp(this.getControlStyle())}
if(this.hasDataElement()&&this.$144(_1)){_2-=((this.getValueIconWidth()||0)+(this.valueIconLeftPadding+this.valueIconRightPadding))}
return _2-this.$672()},isc.A.getErrorWidth=function isc_FormItem_getErrorWidth(){var _1=0;if(this.form.showInlineErrors&&this.hasErrors()){var _2=this.getErrorOrientation();if(_2==isc.Canvas.LEFT||_2==isc.Canvas.RIGHT){if(this.shouldShowErrorText()){_1+=this.errorMessageWidth}else if(this.shouldShowErrorIcon()){_1+=this.errorIconWidth+this.iconHSpace}}}
return _1},isc.A.$672=function isc_FormItem__getErrorWidthAdjustment(){var _1=this.getErrorWidth();if(_1!=0&&this.expandHintAndErrors&&(this.getColWidth()!=null)){var _2=this.getColWidth()-this.getInnerWidth();if(_2>0)_1-=_2;if(_1<0)_1=0}
return _1},isc.A.getValueIconHeight=function isc_FormItem_getValueIconHeight(){var _1=this.valueIconHeight;if(_1==null)_1=this.valueIconSize;return _1},isc.A.getValueIconWidth=function isc_FormItem_getValueIconWidth(){var _1=this.valueIconWidth;if(_1==null)_1=this.valueIconSize;return _1},isc.A.shouldApplyHeightToTextBox=function isc_FormItem_shouldApplyHeightToTextBox(){if(this.applyHeightToTextBox!=null)return this.applyHeightToTextBox;if(this.renderAsStatic())return false;return true},isc.A.getTextBoxHeight=function isc_FormItem_getTextBoxHeight(){if(!this.shouldApplyHeightToTextBox())return null;var _1=this.getPixelHeight(true);if(!isc.isA.Number(_1))return _1;if(this.textBoxStyle){var _2=this.getTextBoxStyle();_1-=(isc.Element.$th(_2)+isc.Element.$ti(_2));if(this.$143()){_1-=isc.Element.$yo(_2)}}
if(this.$92s()&&this.controlStyle){_1-=isc.Element.$yo(this.getControlStyle())}
if(this.showTitle&&this.form.getTitleOrientation(this)==isc.Canvas.TOP&&!isc.isA.Number(this.getCellHeight()))
{_1-=this.form.getTitleHeight(this)}
return _1},isc.A.$143=function isc_FormItem__sizeTextBoxAsContentBox(){return!isc.Browser.isBorderBox},isc.A.getPickerIconWidth=function isc_FormItem_getPickerIconWidth(){return(this.pickerIconWidth!=null?this.pickerIconWidth:this.getPickerIconHeight())},isc.A.getPickerIconHeight=function isc_FormItem_getPickerIconHeight(){if(this.pickerIconHeight!=null)return this.pickerIconHeight;else{var _1=(isc.isA.Number(this.getHeight())?this.getHeight():this.getInnerHeight());if(!isc.isA.Number(_1))return null;_1-=this.$14z();this.pickerIconHeight=_1;return _1}},isc.A.$14z=function isc_FormItem__getPickerIconVPad(){var _1=0;if(this.controlStyle){_1+=isc.Element.$yo(this.controlStyle)}
if(this.pickerIconStyle){_1+=isc.Element.$yo(this.pickerIconStyle)}
return _1},isc.A.getHeight=function isc_FormItem_getHeight(){return this.height},isc.A.getPixelHeight=function isc_FormItem_getPixelHeight(_1){var _2=this.getHeight();if(!isc.isA.Number(_2)){var _3=this.getInnerHeight();if(this.cellHeight!=null&&isc.isA.String(_2)&&_2.endsWith("%"))
{var _4=parseInt(_2);if(isc.isA.Number(_3)){_2=Math.round(_3*(_4/100))}else{_2=_3}}else{_2=_3}}
if(!isc.isA.Number(_2))return _1?_2:-1;if(this.valueIcons!=null||this.getValueIcon!=null){var _5=this.getValueIconHeight();if(_5>_2)_2=_5}
return _2},isc.A.getVisibleHeight=function isc_FormItem_getVisibleHeight(){var _1=this.isDrawn()?this.getOuterElement():null;if(_1==null){this.logInfo("getVisibleHeight() - unable to determine drawn height for this item - returning pixel height from specified height","sizing");if(isc.isA.Number(this.height)){return this.height}
this.logWarn("getVisibleHeight() unable to determine height - returning zero","sizing");return 0}
return _1.offsetHeight},isc.A.getIconHeight=function isc_FormItem_getIconHeight(_1){if(_1==null&&this.icons!=null&&this.icons.getLength()>0)_1=this.icons[0];else if(!this.$145(_1)){this.logWarn("getIconHeight() passed invalid icon:"+isc.Log.echoAll(_1));return null}
return(_1.height!=null?_1.height:this.iconHeight)},isc.A.getTitleVisibleHeight=function isc_FormItem_getTitleVisibleHeight(){var _1=this.isDrawn()&&this.form?isc.Element.get(this.form.$427(this)):null;if(_1==null){var _2="getTitleHeight() Unable to determine position for "+(this.name==null?"this item ":this.name)+". ";if(this.isDrawn()){_2+="This method is not supported by items of type "+this.getClass()}else{_2+="Position cannot be determined before the element is drawn"}
_2+=" - returning zero.";this.form.logWarn(_2);return 0}
return isc.Element.getVisibleHeight(_1)},isc.A.getWidth=function isc_FormItem_getWidth(){return this.width},isc.A.getPixelWidth=function isc_FormItem_getPixelWidth(){var _1=this.getWidth();if(!isc.isA.Number(_1)){var _2=this.getInnerWidth();if(_2!=null)_1=_2}
return isc.isA.Number(_1)?_1:-1},isc.A.getVisibleWidth=function isc_FormItem_getVisibleWidth(){var _1=this.isDrawn()?this.getOuterElement():null;if(_1==null){this.logInfo("getVisibleWidth() - unable to determine drawn width for this item - returning pixel width from specified width","sizing");if(isc.isA.Number(this.width)){return this.width}else if(this.form&&this.form.items.$8r!=null){return this.form.items.$8r[this.form.getItems().indexOf(this)]}
this.logWarn("getVisibleWidth() unable to determine width - returning zero","sizing");return 0}
return _1.offsetWidth},isc.A.getVisibleTitleWidth=function isc_FormItem_getVisibleTitleWidth(){var _1=this.isDrawn()&&this.form?isc.Element.get(this.form.$427(this)):null;if(_1==null){this.logInfo("getVisibleTitleWidth() - unable to determine drawn width for this item - returning 0","sizing");return 0}
return _1.offsetWidth},isc.A.getIconWidth=function isc_FormItem_getIconWidth(_1){if(_1==null&&this.icons!=null&&this.icons.getLength()>0)_1=this.icons[0];else if(!this.$145(_1)){this.logWarn("getIconWidth() passed invalid icon:"+isc.Log.echoAll(_1));return null}
return(_1.width!=null?_1.width:this.iconWidth)},isc.A.setHeight=function isc_FormItem_setHeight(_1){if("100%"==_1){this.height="*"}else{this.height=_1}
this.redraw()},isc.A.setWidth=function isc_FormItem_setWidth(_1){if("100%"==_1){this.width="*"}else{this.width=_1}
this.redraw()},isc.A.setLeft=function isc_FormItem_setLeft(_1){this.left=_1;this.redraw()},isc.A.setTop=function isc_FormItem_setTop(_1){this.top=_1;this.redraw()},isc.A.moved=function isc_FormItem_moved(){},isc.A.visibilityChanged=function isc_FormItem_visibilityChanged(){},isc.A.zIndexChanged=function isc_FormItem_zIndexChanged(){},isc.A.getInactiveEditorHTML=function isc_FormItem_getInactiveEditorHTML(_1,_2,_3,_4){this.$68x=true;this.$68u=this.setupInactiveContext(_4);if(this.logIsDebugEnabled("inactiveEditorHTML")){this.logDebug("getInactiveEditorHTML() called - context passed in:"+this.echo(_4)+" generated context ID:"+this.$68u,"inactiveEditorHTML")}
var _5=this.getStandaloneItemHTML(_1,_2,_3);delete this.$68u;delete this.$68x;return _5},isc.A.setupInactiveContext=function isc_FormItem_setupInactiveContext(_1){if(_1==null)_1={};if(this.$68y())_1.isPrintHTML=true;var _2=this.$68w++;_1.inactiveContextID=_2;_1.formItem=this;if(!this.$68v)this.$68v={};this.$68v[_2]=_1;return _2},isc.A.clearAllInactiveEditorContexts=function isc_FormItem_clearAllInactiveEditorContexts(){delete this.$68v},isc.A.clearInactiveEditorContext=function isc_FormItem_clearInactiveEditorContext(_1){if(isc.isAn.Object(_1))_1=_1.inactiveContextID;if(this.$68v)delete this.$68v[_1]},isc.A.$681=function isc_FormItem__getInactiveContextFromElement(_1){if(_1&&_1.id!=null&&this.$68v!=null){var _2=_1.id,_3=this.$557(_2);if(_3){var _4=_3.match(this.$682);if(_4){return this.$68v[_4[1]]}}}
return null},isc.A.isInactiveHTML=function isc_FormItem_isInactiveHTML(){if(this.parentItem&&this.parentItem.isInactiveHTML())return true;return this.$68y()||this.$68x},isc.A.$68y=function isc_FormItem__isPrinting(){return this.containerWidget&&this.containerWidget.isPrinting},isc.A.getStandaloneItemHTML=function isc_FormItem_getStandaloneItemHTML(_1,_2,_3){var _4=isc.SB.create(),_5=this.form;if(_5){if(this.$11e()){var _6=this.$11p(this.left),_7=this.$11p(this.top,true),_8=this.getInnerWidth(),_9=this.getInnerHeight();if(!isc.isA.Number(_6))_6=0;if(!isc.isA.Number(_7))_7=0;_4.append(this.$13a);_4.appendNumber(_6);_4.append(this.$13b);_4.appendNumber(_7);if(isc.isA.Number(_8)){_4.append(this.$13c);_4.appendNumber(_8)}
if(isc.isA.Number(_9)){_4.append(this.$13d);_4.appendNumber(_9)}
_4.append(this.$13e,this.$146(),this.$13f)}
var _10=this.$13h,_11=_5.getID(),_12=this.getID();_10[1]=_11;_10[3]=_12;_10[5]=this.$qs(this.$13j);_4.append(_10);_4.append(this.getInnerHTML(_1,_2,_3,true));_4.append(this.$13i);if(this.$11e()){_4.append(this.$13g)}}
return _4.release()},isc.A.$146=function isc_FormItem__getAbsDivID(){return this.$qs(this.$13l)},isc.A.getAbsDiv=function isc_FormItem_getAbsDiv(){if(this.$13m)return this.$13m;if(!this.isDrawn())return;this.$13m=isc.Element.get(this.$146());return this.$13m},isc.A.$147=function isc_FormItem__hasExternalIcons(){var _1=this.icons;if(!_1)return false;for(var i=0;i<_1.length;i++){if(!_1[i].writeIntoItem)return true}
return false},isc.A.useDisabledEventMask=function isc_FormItem_useDisabledEventMask(){return((isc.Browser.isMoz&&this.hasDataElement())||(isc.Browser.isIE&&isc.isA.TextItem(this)))&&this.getHeight()!=null},isc.A.$148=function isc_FormItem__getEventMaskHTML(){var _1=this.$13n;_1[1]=this.$149();_1[3]=this.getHeight();_1[5]=this.getItemID();_1[7]=this.$qs("eventMask");_1[9]=this.$938();return _1.join(isc.emptyString)},isc.A.$938=function isc_FormItem__getEventMaskSpacerHTML(){return isc.Canvas.spacerHTML(1600,100)},isc.A.$43b=function isc_FormItem__getEventMaskElement(){return isc.Element.get(this.$qs("eventMask"))},isc.A.$149=function isc_FormItem__getEventMaskWidth(){var _1=this.getElementWidth();if(_1==null){if(isc.RadioItem&&isc.isA.RadioItem(this)&&this.parentItem!=null){_1=this.parentItem.getElementWidth()}
if(_1==null)return 0}else{if(this.form.showInlineErrors&&this.hasErrors()&&this.getErrorOrientation()==isc.Canvas.LEFT)
{_1-=this.getErrorWidth()}}
return _1},isc.A.getBrowserSpellCheck=function isc_FormItem_getBrowserSpellCheck(){if(this.browserSpellCheck!=null)return this.browserSpellCheck;return this.form.browserSpellCheck},isc.A.$11d=function isc_FormItem__useHiddenDataElement(){return(this.shouldSaveValue&&!this.hasDataElement()&&this.shouldSubmitValue())},isc.A.$15a=function isc_FormItem__getHiddenDataElementID(){return this.$qs(this.$13o)},isc.A.$15b=function isc_FormItem__getHiddenDataElement(){return this.$15c(this.$13o)},isc.A.$15c=function isc_FormItem__getHTMLPartHandle(_1){if(!this.isDrawn())return null;if(!this.$15d)this.$15d={};var _2=this.$15d[_1];if(_2==null){_2=isc.Element.get(this.$qs(_1));if(_2!=null)this.$15d[_1]=_2}
return _2},isc.A.$15e=function isc_FormItem__getControlTableID(){return this.$qs(this.$13p)},isc.A.$15f=function isc_FormItem__getControlTableElement(){return this.$15c(this.$13p)},isc.A.$15g=function isc_FormItem__getTextBoxID(){return this.$qs(this.$13q)},isc.A.$15h=function isc_FormItem__getTextBoxElement(){if(this.hasDataElement()&&this.$15i)return this.getDataElement();return this.$15c(this.$13q)},isc.A.$15j=function isc_FormItem__getPickerIconCellID(){return this.$qs(this.$13r)},isc.A.$15k=function isc_FormItem__getPickerIconCellElement(){return this.$15c(this.$13r)},isc.A.$15l=function isc_FormItem__getHiddenDataElementHTML(){return"<INPUT type='hidden' name='"+this.getFieldName()+"' ID='"+this.$15a()+"'>"},isc.A.$59s=function isc_FormItem__getHintCellID(){return this.$qs(this.$59p)},isc.A.$59t=function isc_FormItem__getHintCellElement(){return this.$15c(this.$59p)});isc.evalBoundary;isc.B.push(isc.A.updateState=function isc_FormItem_updateState(){if(!this.isDrawn())return;var _1=this.logIsDebugEnabled(this.$13s);if(this.containerWidget==this.form&&!this.$11e()){var _2=this.getCellStyle();if(_1)this.logDebug("About to apply basic cell style:"+_2,"FormItemStyling");var _3=this.getFormCell();if(_3)_3.className=_2;var _4=this.getOuterTableElement();if(_4)_4.className=_2;if(this.showTitle)this.form.updateTitleCellState(this)}
if(this.$92s()){var _5=this.getControlStyle(),_6=this.getPickerIconStyle();if(_1){this.logDebug("About to apply cell styles to control box and picker icon cell:"+[_5,_6],"FormItemStyling")}
var _7=this.$15f();if(_7)_7.className=_5;var _8=this.$15k();if(_8)_8.className=_6}
var _9=!this.$66u?this.getTextBoxStyle():this.$66v();if(_1)this.logDebug("About to apply text box style:"+_9,"FormItemStyling");var _10=this.$15h();if(_10){_10.className=_9;if(this.getImplicitSave()){var _11=_10.style;if(this.awaitingImplicitSave){if(_11&&this.$95y!=true){this.$95y=true;this.$95z=""+_11.cssText;_11.cssText=""+_11.cssText+this.editPendingCSSText}}else{if(this.wasAwaitingImplicitSave==true&&this.$95z){delete this.$95y;delete this.wasAwaitingImplicitSave;_11.cssText=""+this.$95z;delete this.$95z}}}}
if(this.$15m()&&_10){if(!this.$15n){var _12=this.getTextBoxWidth(),_13=this.getTextBoxHeight();_12+=isc.Element.getHBorderSize(_10)-2;if(_13!=null)_13+=isc.Element.getVBorderSize(_10)-2;var _14=this.$qs("focusOutline");isc.Element.insertAdjacentHTML(_10,"beforeBegin","<DIV ID='"+_14+(this.textBoxStyle?"' CLASS='"+this.textBoxStyle+"Focused'":"'")+" STYLE='background-image:none;background-color:transparent;position:absolute;width:"+_12+(_13==null?"px;":"px;height:"+_13)+"px;visibility:hidden;border:1px dotted white;z-index:100;'>&nbsp;</DIV>");this.$15n=isc.Element.get(_14)}
if(this.hasFocus)this.$15n.style.visibility="inherit";else this.$15n.style.visibility="hidden"}},isc.A.$15o=function isc_FormItem__warnDeprecated(_1,_2,_3){if(!this.logIsInfoEnabled(this.$13t))return;if(!this.$15p)this.$15p={};if(this.$15p[_1]==true)return;if(_3==null)_3="5.5";var _4=isc.SB.create();_4.append("Using '",_1,"': ",this[_1]," to style this form item.  This property is deprecated as of SmartClient Version ",_3," - we recommend removing this property and using '",_2,"' instead.");this.logInfo(_4.release(),"deprecated");this.$15p[_1]=true},isc.A.getInnerHTML=function isc_FormItem_getInnerHTML(_1,_2,_3,_4){var _5,_6;if(this.isInactiveHTML()&&this.$68u==null){_5=true;var _7,_8=this.parentItem;if(_8!=null&&_8.isInactiveHTML()){if(_8.$68u==null){_8.setupInactiveContext();_6=true}
_7=_8.$68v[_8.$68u]}
this.$68u=this.setupInactiveContext(_7);if(this.logIsDebugEnabled("inactiveEditorHTML")){this.logDebug("getInnerHTML(): Item is marked as inactive - set up new inactive context ID:"+this.$68u,"inactiveEditorHTML")}}
this.$15q=_2&&!this.$712();var _9;if(this.$11d()){if(!_9)_9=isc.SB.create();_9.append(this.$15l())}
if(this.$712())_2=false;var _10=this.$15r(_1,_2,_3);var _11;if(_9!=null){_9.append(_10);if(_4){_11=_9.getArray().duplicate();_9.release(true)}else{_11=_9.release()}}else{_11=(_4?_10:_10.join(isc.emptyString))}
if(_5)delete this.$68u;if(this.parentItem&&_6)
delete this.parentItem.$68u;return _11},isc.A.$15s=function isc_FormItem__writeOuterTable(_1,_2){if(_2)return true;if(_1&&this.getHint()!=null)return true;if(this.icons&&this.icons.length>0&&!this.renderAsStatic())return true},isc.A.$144=function isc_FormItem__getValueIcon(_1){if(this.suppressValueIcon)return null;var _2,_3;if(_1===_3)_1=this.getValue();if(this.getValueIcon)_2=this.getValueIcon(_1);else{if(_1==null)_2=this.emptyValueIcon;else if(this.valueIcons!=null)_2=this.valueIcons[_1]}
if(_2==null)return null;var _4=((this.isDisabled()||this.isReadOnly())&&this.showValueIconDisabled?this.$13w:this.$15t);if(_4!=null){if(!isc.CheckboxItem.$15u)isc.CheckboxItem.$15u={};var _5=isc.CheckboxItem.$15u[_2];if(!_5){_5={};_5.Over=isc.Img.urlForState(_2,false,false,this.$13u);_5.Down=isc.Img.urlForState(_2,false,false,this.$13v);_5.Disabled=isc.Img.urlForState(_2,false,false,this.$13w);isc.CheckboxItem.$15u[_2]=_5}
_2=_5[_4]}
return _2},isc.A.$xq=function isc_FormItem__getValueIconHTML(_1){var _2=this.$144(_1);if(_2==null){return isc.emptyString}
var _3=this.imageURLPrefix||this.baseURL||this.imgDir,_4=this.imageURLSuffix;if(_4)_2=_2+_4;var _5=this.getValueIconWidth();var _6=this.getValueIconHeight();var _7=this.isRTL(),_8=_7?this.valueIconRightPadding:this.valueIconLeftPadding,_9=_7?this.valueIconLeftPadding:this.valueIconRightPadding;return isc.Canvas.$xq(_2,_3,_5,_6,_8,_9,this.$qs(this.$13x))},isc.A.$15v=function isc_FormItem__getValueIconHandle(){if(!this.isDrawn())return null;var _1=isc.Element.get(this.$qs(this.$13x));return _1},isc.A.$15r=function isc_FormItem__getTableHTML(_1,_2,_3){var _4=this.getErrorOrientation(),_5,_6=_4==isc.Canvas.LEFT,_7,_8=this.isReadOnly();if(_3&&(_6||_4==isc.Canvas.RIGHT))
{var _9=this.getErrors();if(_9){_5=true;_7=this.getErrorHTML(_9)}}
var _10=this.iconVAlign,_11=this.mapValueToDisplay(_1),_12=this.$15s(_2,_5),_13=this.$92s();;var _14=_12?isc.FormItem.$82b():[];if(_12){_14.length=13;_14[1]=this.$15w();_14[3]=this.getOuterTableCSS();if(this.containerWidget==this.form&&!this.$11e()){_14[5]=this.getCellStyle()}else{_14[5]=null}
if(_5&&_6){_14[7]=isc.StringBuffer.concat("<TD STYLE='",isc.Canvas.$42a,"' CLASS='",this.getCellStyle(),"'>",_7,"</TD>")}else _14[7]=null;if(!_13)_14[9]=this.getTextBoxCellCSS();else _14[9]=isc.Canvas.$42a;_14[11]=_10}
if((this.isInactiveHTML()||this.isDisabled())&&this.useDisabledEventMask()){_14[_14.length]=this.$148()}
if(!_13){_14[_14.length]=(_8?this.getReadOnlyHTML(_11,_1):this.getElementHTML(_11,_1))}else{var _15=this.getPickerIconStyle(),_16=this.getID(),_17=this.getControlStyle(),_18=this.$130,_19=this.$15e(),_20=this.$15g(),_21=this.$15j();_18[1]=_19;_18[3]=_16;_18[6]=this.getControlTableCSS();if(_17==null&&this.containerWidget==this.form&&!this.$11e()){_18[8]=this.getCellStyle();_18[6]+=isc.Canvas.$42a}else{_18[8]=_17}
_18[10]=this.getTextBoxCellCSS();_18[12]=(_8?this.getReadOnlyHTML(_11,_1):this.getElementHTML(_11,_1));_18[14]=_21;_18[16]=_15;_18[18]=this.getPickerIconCellCSS();var _22=this.getPickerIcon(),_23=_22&&this.hasFocus&&this.showFocusedPickerIcon&&(_22.showFocusedWithItem!=false);_18[20]=this.getIconHTML(this.getPickerIcon(),_23);for(var i=0;i<_18.length;i++){_14[_14.length]=_18[i]}}
if(_12){if(this.$147()){var _25=isc.FormItem.$82c();_25[1]=_10;_25[3]=this.getTotalIconsWidth();_25[5]=this.iconHeight;_25[7]=this.getCellStyle();_25[9]=this.getIconCellID();_25[11]=this.getIconsHTML();for(var i=0;i<_25.length;i++){_14[_14.length]=_25[i]}}
var _26=(_5&&!_6);var _27;if(_2){_27=this.getHint();if(isc.isA.emptyString(_27))_27=null}
if(_27||_26){var _28=this.$132;_28[1]=this.$59s();_28[3]=_27?this.getHintStyle():null;_28[5]=(_27||"")+(_26?_7||"":"");for(var i=0;i<_28.length;i++){_14[_14.length]=this.$132[i]}}
_14[_14.length]=this.$13z}
return _14},isc.A.getIconCellID=function isc_FormItem_getIconCellID(){return this.$qs(this.$92q)},isc.A.$15w=function isc_FormItem__getOuterTableID(){return this.$qs(this.$133)},isc.A.$15x=function isc_FormItem__getCellStyle(_1){var _2=this.hasErrors(),_3=this.showRTL&&this.isRTL();var _4;if(_3){_4=isc.FormItem.$132s[_1];if(!_4){_4=isc.FormItem.$15y[_1]={Normal:_1+"RTL",Error:_1+"ErrorRTL",ErrorFocused:_1+"ErrorFocusedRTL",Focused:_1+"FocusedRTL",Disabled:_1+"DisabledRTL"}}}else{_4=isc.FormItem.$15y[_1];if(!_4){_4=isc.FormItem.$15y[_1]={Normal:_1,Error:_1+"Error",ErrorFocused:_1+"ErrorFocused",Focused:_1+"Focused",Disabled:_1+"Disabled"}}}
if(_2&&this.shouldShowErrorStyle()&&this.form.showInlineErrors){return this.showFocusedErrorState&&this.hasFocus&&!this.isInactiveHTML()?_4.ErrorFocused:_4.Error}else{if(this.showFocused&&this.hasFocus&&!this.isInactiveHTML())
return _4.Focused;if(this.showDisabled&&this.isDisabled())return _4.Disabled;return _4.Normal}},isc.A.getCellStyle=function isc_FormItem_getCellStyle(){if(this.parentItem!=null){if(this.parentItem.itemCellStyle)return this.$15x(this.parentItem.itemCellStyle)}
var _1=this.$15x(this.cellStyle);if(!this.hasErrors()){if(this.cellClassName!=null){this.$15o("cellClassName","cellStyle");_1=this.cellClassName}}else{if(this.errorCellClassName!=null){this.$15o("errorCellClassname","cellStyle");_1=this.errorCellClassName}}
return _1},isc.A.setCellStyle=function isc_FormItem_setCellStyle(_1){var _2=this.cellStyle;this.cellStyle=_1;if(_2!=_1)this.updateState()},isc.A.getTitleStyle=function isc_FormItem_getTitleStyle(){if(this.$68y()&&this.printTitleStyle){return this.$15x(this.printTitleStyle)}
var _1=this.getErrors();if(_1==isc.emptyString)_1=null;var _2=this.$15x(this.titleStyle);if(!_1){if(this.titleClassName!=null){this.$15o("titleClassName","titleStyle");_2=this.titleClassName}}else{if(this.titleErrorClassName!=null){this.$15o("titleErrorClassName","titleStyle");_2=this.titleErrorClassName}}
return _2},isc.A.getHintStyle=function isc_FormItem_getHintStyle(){if(this.hintClassName!=null){this.$15o("hintClassName","hintStyle");return this.hintClassName}
if(this.hintStyle!=null)return this.hintStyle},isc.A.getTextBoxStyle=function isc_FormItem_getTextBoxStyle(){if(this.$68y()&&this.printTextBoxStyle){return this.$15x(this.printTextBoxStyle)}
var _1=(this.getCanEdit()==false&&this.renderAsStatic()?this.getReadOnlyTextBoxStyle():this.textBoxStyle),_2=this.$15x(_1);if(this.elementClassName!=null){this.$15o("elementClassName","textBoxStyle");_2=this.elementClassName}
return _2},isc.A.getPickerIconStyle=function isc_FormItem_getPickerIconStyle(){if(this.pickerIconStyle!=null)return this.$15x(this.pickerIconStyle);return null},isc.A.getControlStyle=function isc_FormItem_getControlStyle(){if(this.controlStyle!=null)return this.$15x(this.controlStyle);return null},isc.A.getOuterTableCSS=function isc_FormItem_getOuterTableCSS(){return this.$135},isc.A.getControlTableCSS=function isc_FormItem_getControlTableCSS(){var _1=isc.SB.create();_1.append(this.$14a);var _2=this.getElementWidth()-this.$672();if(isc.isA.Number(_2))_1.append(this.$93,_2,this.$38);return _1.release()},isc.A.getTextBoxCellCSS=function isc_FormItem_getTextBoxCellCSS(){return this.textBoxCellCSS!=null?this.textBoxCellCSS:isc.Canvas.$42a},isc.A.getTextBoxCSS=function isc_FormItem_getTextBoxCSS(){var _1=isc.SB.create(),_2=this.$68y();if(!_2||isc.isA.Number(this.width)){var _3=this.getTextBoxWidth();if(isc.isA.Number(_3)){if((isc.Browser.isOpera||isc.Browser.isMoz||isc.Browser.isSafari||isc.Browser.isIE9)&&!this.clipValue){_1.append(this.$137,_3,this.$38)}else{_1.append(this.$93,_3,this.$38)}}}
var _4=this.getTextBoxHeight();if(isc.isA.Number(_4)){if(!_2&&isc.Browser.isMoz&&!this.clipValue){_1.append(this.$138,_4,this.$38)}else{_1.append(this.$92,_4,this.$38);if(_2)_1.append(this.$1028,_4,this.$38)}}
if(this.clipValue)_1.append(this.$1148);if(this.wrap)_1.append(this.$135)
else _1.append(this.$136);if(this.textAlign!=null){_1.append(this.$14c,this.textAlign,this.$39)}
if(isc.Browser.isBorderBox){if(isc.Browser.isMoz){_1.append(this.$1104,this.$1103,this.$39)}else{if(isc.Browser.isWebKit){_1.append(this.$1105,this.$1103,this.$39)}
_1.append(this.$1106,this.$1103,this.$39)}}
return _1.release()},isc.A.getPickerIconCellCSS=function isc_FormItem_getPickerIconCellCSS(){if(isc.Browser.isIE)return isc.emptyString;var _1=this.getPickerIconHeight();if(isc.isA.Number(_1)&&_1<this.getInnerHeight()){return this.$14d+_1+this.$38}
return isc.emptyString},isc.A.getPickerIcon=function isc_FormItem_getPickerIcon(){if(this.$150==null){var _1=this.getPickerIconWidth(),_2=this.getPickerIconHeight();var _3=isc.addProperties({},this.pickerIconDefaults,this.pickerIconProperties,{pickerIcon:true,writeIntoItem:true,showFocused:this.showFocusedPickerIcon,hspace:this.pickerIconHSpace,width:_1,height:_2,src:this.pickerIconSrc,prompt:this.pickerIconPrompt});this.$753(_3,this.pickerIconName);this.$150=_3;if(this.iconIsDisabled(_3))_3.$153=true}
return this.$150},isc.A.getElementHTML=function isc_FormItem_getElementHTML(_1,_2){var _3=isc.SB.create(),_4=this.$15m();var _5=this.$872(),_6,_7,_8=this.getTextBoxStyle();if(this.$127i()&&this.loadingDisplayValue!=null){_8=this.$66v()}
if(_5){var _9=this.$154(),_10=this.isDisabled()?null:this.accessKey;if(_4){_7=isc.Canvas.getFocusProxyString(this.getID(),false,0,0,this.getTextBoxWidth(),this.getTextBoxHeight(),this.isVisible(),!this.isDisabled(),_9,_10,false)}else{var _11=isc.SB.create();if(_10!=null)_11.append(this.$14e,_10,this.$ob);_11.append(this.$14f,_9,this.$ob);_6=_11.release()}}
if(_7!=null)_3.append(_7);var _12=this.$14g;_12[1]=this.$15g();_12[3]=this.getID();_12[6]=_8;_12[8]=this.getTextBoxCSS();_12[10]=_6;_12[12]=this.$xq(_2);_12[13]=(this.showValueIconOnly?null:_1);_3.append(_12);return _3.release()},isc.A.getReadOnlyHTML=function isc_FormItem_getReadOnlyHTML(_1,_2){return this.getElementHTML(_1,_2)},isc.A.getPrintHTML=function isc_FormItem_getPrintHTML(_1,_2){var _3=this.getValue();var _4=this[this.isReadOnly()?"getReadOnlyHTML":"getElementHTML"](this.mapValueToDisplay(_3),_3);if(_4==null)_4=isc.emptyString;return _4},isc.A.$15m=function isc_FormItem__writeOutFocusProxy(){if(this.useFocusProxy!=null)return this.useFocusProxy;return(isc.Browser.isMoz&&isc.Browser.geckoVersion<20051111)&&this.$kk()&&!this.hasDataElement()},isc.A.$155=function isc_FormItem__getItemElementAttributeHTML(){if(!isc.FormItem.$156){isc.FormItem.$156=[" ",isc.DynamicForm.$89,"='",null,"' ",isc.DynamicForm.$9a,"='",isc.DynamicForm.$9b,"'"]}
isc.FormItem.$156[3]=this.getItemID();return isc.FormItem.$156.join(isc.emptyString)},isc.A.isValid=function isc_FormItem_isValid(){var _1=this.getErrors();if(_1==null||isc.isAn.emptyObject(_1)){return true}
return false},isc.A.getErrors=function isc_FormItem_getErrors(){if(this.form)return this.form.getFieldErrors(this)},isc.A.getError=function isc_FormItem_getError(){this.logWarn("call to deprecated method FormItem.getError(). Use FormItem.getErrors() instead.");return this.getErrors()},isc.A.getErrorMessage=function isc_FormItem_getErrorMessage(_1){return(isc.isAn.Array(_1)?"<UL><LI>"+_1.join("</LI><LI>")+"</LI></UL>":_1)},isc.A.shouldShowErrorIcon=function isc_FormItem_shouldShowErrorIcon(){return this.showErrorIcon!=null?this.showErrorIcon:this.form.showErrorIcons},isc.A.shouldShowErrorText=function isc_FormItem_shouldShowErrorText(){return this.showErrorText!=null?this.showErrorText:this.form.showErrorText},isc.A.shouldShowErrorStyle=function isc_FormItem_shouldShowErrorStyle(){return this.showErrorStyle!=null?this.showErrorStyle:this.form.showErrorStyle},isc.A.shouldShowErrorIconPrompt=function isc_FormItem_shouldShowErrorIconPrompt(){return this.shouldShowErrorIcon&&!this.shouldShowErrorText()},isc.A.getErrorOrientation=function isc_FormItem_getErrorOrientation(){return this.errorOrientation!=null?this.errorOrientation:this.form.errorOrientation},isc.A.getErrorHTML=function isc_FormItem_getErrorHTML(_1){var _2=this.shouldShowErrorText(),_3=this.shouldShowErrorIcon();if(!_2&&!_3)return isc.emptyString;var _4=this.form,_5=(isc.Browser.isStrict?_3:_3&&_2),_6=!_5&&_3&&((this.getErrorOrientation()==isc.Canvas.LEFT)||(this.getErrorOrientation()==isc.Canvas.RIGHT)),_7=(_2&&this.form.showTitlesWithErrorMessages&&this.getTitle()!=null?this.getTitle()+": ":null),_8,_9=_2?this.getErrorMessage(_1):null;if(!_5){_8=isc.SB.concat("<DIV ",this.$99s(),(_6?"style='display:inline;'":null)," CLASS='",this.getCellStyle(),"'>",(_3?this.getErrorIconHTML(_1)+"&nbsp;":null),_7,_9,"</DIV>")}else{_8=isc.SB.concat("<TABLE ",this.$99s(),"' role='presentation' WIDTH=100% CELLSPACING=0 CELLPADDING=0><TR>","<TD WIDTH=",this.errorIconWidth,">",this.getErrorIconHTML(_1),"</TD><TD STYLE='",isc.Canvas.$42a,"' CLASS='",this.getCellStyle(),"'>&nbsp;",_7,_9,"</TD></TR></TABLE>")}
return _8},isc.A.$99s=function isc_FormItem__getInlineErrorHandleAttributes(){if(this.$99t==null){this.$99t=isc.SB.concat("ID='",this.$qs('inlineErrorHandle'),"' ",isc.DynamicForm.$89,"='",this.getID(),"' ",isc.DynamicForm.$9a,"='",isc.DynamicForm.$99r,"' ")}
return this.$99t},isc.A.getInlineErrorHandle=function isc_FormItem_getInlineErrorHandle(){return isc.Element.get(this.$qs('inlineErrorHandle'))},isc.A.getErrorIconHTML=function isc_FormItem_getErrorIconHTML(_1){this.$79u=_1;var _2=this.getErrorIconId();var _3="";if(_1!=null&&isc.Canvas.ariaEnabled()&&!isc.Canvas.useLiteAria()){if(isc.isAn.Array(_1))_1=_1.join(",");_3=' aria-label="'+_1.replace("\"","&quot;")+'"'}
return this.$157(_2,this.errorIconWidth,this.errorIconHeight,"top",0,null,null,this.form.getImgURL(this.errorIconSrc),true,isc.DynamicForm.$89+"='"+this.getID()+"' "+isc.DynamicForm.$9a+"='"+this.errorIconName+"'"+_3)},isc.A.getErrorIconId=function isc_FormItem_getErrorIconId(){return this.$qs("error")},isc.A.getHint=function isc_FormItem_getHint(){if(!this.showHint||!this.hint)return null
return this.hint},isc.A.drawn=function isc_FormItem_drawn(){if(this.logIsInfoEnabled(this.$n3)){this.logInfo("Form item drawn "+(this.containerWidget==this.form?"in form "+this.form.getID():"in container widget "+this.containerWidget.getID())+(this.logIsDebugEnabled("drawing")?this.getStackTrace():""),"drawing")}
this.$if=true;if(this.$15q)this.$158=true;this.$15q=null;this.$159();if(isc.screenReader)this.addContentRoles()},isc.A.redrawing=function isc_FormItem_redrawing(){if(this.$16j(true)){this.$516()}
this.form.clearingElement(this);this.$13m=null},isc.A.redrawn=function isc_FormItem_redrawn(){if(this.logIsInfoEnabled("drawing")){this.logInfo("Form item redrawn "+(this.containerWidget==this.form?"in form "+this.form.getID():"in container widget "+this.containerWidget.getID())+(this.logIsDebugEnabled("drawing")?this.getStackTrace():""),"drawing")}
this.$16a();this.$159();if(isc.screenReader)this.addContentRoles();if(this.$16j(true)){this.$109()}},isc.A.$516=function isc_FormItem__storeFocusForRedraw(){this.$105=true;this.rememberSelection();if(this.items){for(var i=0;i<this.items.length;i++){if(this.items[i].hasFocus){return this.items[i].$516()}}}
var _2=this.$166();if(_2!=null&&_2!=this.getFocusElement()){var _3=this.getPickerIcon();if(_3!=null&&this.$16g(_3)==_2){this.$65o=_3}else if(this.icons){for(var i=0;i<this.icons.length;i++){if(this.$16g(this.icons[i])==_2){this.$65o=this.icons[i];break}}}}},isc.A.$109=function isc_FormItem__refocusAfterRedraw(){var _1=this.isDrawn()&&this.isVisible();if(_1){var _2=isc.EH.getFocusCanvas();if(_2!=null&&_2!=this.form){_1=false}else{var _3=this.form.getFocusSubItem();if(_3!=this&&_3!=this.parentItem&&(!this.items||!this.items.contains(_3)))
{_1=false}}}
delete this.$105;if(_1&&isc.Browser.isIE){isc.FormItem.$137y(this)}
if(this.items){for(var i=0;i<this.items.length;i++){if(this.items[i].$16j()){return this.items[i].$109()}}}
if(_1){this.form.$65n(this);this.containerWidget.notifyAncestorsAboutToReflow()}
var _5=false;if(this.$65o){var _6=this.getIcon(this.$65o);delete this.$65o;if(_6){if(_1){this.focusInIcon(_6)}
_5=true}}
if(_1&&!_5){this.$93l=true;this.focusInItem()}
if(_1){this.containerWidget.notifyAncestorsReflowComplete()}},isc.A.$159=function isc_FormItem__applyHandlersToElement(){if(this.$kk()){var _1=this.getFocusElement();if(!_1){if(this.$872()){this.logWarn("Attempting to apply event handlers to this item. Unable to get a pointer to this item's focus element");return}}else{if(this.$105m){if(this.multiple){_1.multiple=this.multiple}else{_1.multiple=false}}
if(this.accept){_1.accept=this.accept}
_1.onfocus=isc.FormItem.$12u;_1.onblur=isc.FormItem.$12w;if(isc.Browser.isIE){_1.onpaste=isc.FormItem.$43a;_1.oncut=isc.FormItem.$43a}
if(this.$16b){for(var _2 in this.$16b){if(this.$16b[_2]==null)continue;_1[_2]=this.$16b[_2]}}}}
this.$16c()},isc.A.$16c=function isc_FormItem__setUpIconEventHandlers(){if(this.$92s())this.$16d(this.getPickerIcon());if(this.showIcons&&this.icons&&this.icons.length>0){for(var i=0;i<this.icons.length;i++){var _2=this.icons[i];if(_2&&(this.$16e(_2)||this.$16f(_2)))
this.$16d(_2)}}},isc.A.$16d=function isc_FormItem__iconDrawn(_1){if(!_1.imgOnly){var _2=this.$16g(_1);if(_2){_2.onfocus=isc.FormItem.$120
_2.onblur=isc.FormItem.$122
if(this.$92r){_2.href=this.$14h;_2.onclick=isc.FormItem.$124}}}},isc.A.cleared=function isc_FormItem_cleared(){if(this.logIsInfoEnabled("drawing")){this.logInfo("Form item cleared "+(this.containerWidget==this.form?"from within form "+this.form.getID():"from within container widget "+this.containerWidget.getID())+(this.logIsDebugEnabled("drawing")?this.getStackTrace():""),"drawing")}
this.form.clearingElement(this);this.$16a();this.$158=false;this.$15q=false;this.$if=false},isc.A.$16a=function isc_FormItem__clearCachedHandles(){this.$14x=null;this.$13m=null;this.$16i=null;this.$15d={}},isc.A.isDrawn=function isc_FormItem_isDrawn(){return this.$if},isc.A.$14v=function isc_FormItem__setUpIcons(){var _1=this.icons;if(_1==null)return;for(var i=0;i<_1.length;i++){var _3=_1[i];this.$36c(_3)}},isc.A.$36c=function isc_FormItem__setUpIcon(_1){this.$753(_1);if(this.iconIsDisabled(_1))_1.$153=true},isc.A.getIconsHTML=function isc_FormItem_getIconsHTML(_1){if(!this.showIcons||(this.icons==null&&(!_1||!this.$92s())))
{return""}
var _2=this.$16j(true);if(this.showIconsOnFocus&&!_2){this.hideAllIcons();return""}
var _3=isc.SB.create(),_4=false;var _5=this.icons;if(_1&&this.$92s()){_5=[this.getPickerIcon()];_5.addList(this.icons)}
for(var i=0;i<_5.length;i++){var _7=_5[i];if(!this.$16f(_7)||this.$16e(_7))continue;if(_4==false){_4=true;_3.append(this.$80b)}
_3.append("<td>");var _8=_2&&this.$54o(_7,true);_3.append(this.getIconHTML(_7,null,this.iconIsDisabled(_7),!!_8));_3.append("</td>")}
if(_4)_3.append("</table>");return _3.release()},isc.A.$16j=function isc_FormItem__hasRedrawFocus(_1){var _2=this.hasFocus||this.$105;if(_1&&!_2&&this.items!=null){for(var i=0;i<this.items.length;i++){if(this.items[i].hasFocus||this.items[i].$105)_2=true;break}}
return _2},isc.A.$753=function isc_FormItem__setupIconName(_1,_2){if(_2==null)_2=_1.name;if(_2==null&&_1.$151!=null){this.logWarn("Attempting to use '$151' property as icon name - this property has been deprecated in favor of 'name'");_2=_1.$151}
if(_2!=null){var _3=this.icons?this.icons.findAll("name",_2):[];if(_3!=null&&_3.length>0&&(_3.length>1||_3[0]!=_1))
{this.logWarn("This form item has more than one icon with the same specified name:"+_2+". Ignoring this name and using an auto-generated one instead.");_2=null}else{_1.name=_2;return _1}}
if(this.$16k==null)this.$16k=0;_1.name="_"+this.$16k++;return _1},isc.A.$16l=function isc_FormItem__getIconVAlign(_1){if(this.$150&&(_1==this.$150))return null;var _2=this.iconVAlign;if(_2==isc.Canvas.TOP){return"top"}else if(_2==isc.Canvas.BOTTOM){return(isc.Browser.isSafari?"bottom":"text-bottom")}else if(_2==isc.Canvas.CENTER){return"middle"}
return _2},isc.A.$16m=function isc_FormItem__getIconVMargin(){return 0},isc.A.getIconPrompt=function isc_FormItem_getIconPrompt(_1){if(this.iconIsDisabled(_1))return null;return _1.prompt||this.iconPrompt},isc.A.getIconURL=function isc_FormItem_getIconURL(_1,_2,_3,_4){var _5=_1.src||this.defaultIconSrc;if(_5==this.$5w)return isc.Canvas.$wz;var _6=(this.showDisabled&&(_3||this.iconIsDisabled(_1)))?isc.StatefulCanvas.STATE_DISABLED:_2?isc.StatefulCanvas.STATE_OVER:null,_7=_1.showRTL&&this.isRTL()?this.$132t:null;_5=isc.Img.urlForState(_5,false,_4,_6,null,_7);return _5},isc.A.getIconStyle=function isc_FormItem_getIconStyle(_1,_2,_3,_4){if(!_1||_1.baseStyle==null)return null;var _5=_1.baseStyle;if(this.showDisabled&&(_3||this.iconIsDisabled(_1))){_5+=isc.StatefulCanvas.STATE_DISABLED}else{if(_4)_5+=isc.StatefulCanvas.FOCUSED;if(_2)_5+=isc.StatefulCanvas.STATE_OVER}
if(_1.showRTL&&this.isRTL())_5+=this.$132u;return _5});isc.evalBoundary;isc.B.push(isc.A.getIconHTML=function isc_FormItem_getIconHTML(_1,_2,_3,_4){var _5=this.getIconURL(_1,_2,_3,_4),_6=this.getIconWidth(_1),_7=this.getIconHeight(_1),_8=(_1.hspace!=null?_1.hspace:this.iconHSpace),_9=_1.backgroundColor,_10=this.form.getID(),_11=this.getItemID(),_12=_1.name,_13=this.getIconStyle(_1,_2,_3,_4),_14=(_13==null?isc.emptyString:" class='"+_13+this.$ob);if(_1.imgOnly){return this.$157(this.$16n(_12),_6,_7,this.$16l(_1),this.$16m(_1),_8,_9,_5,null,_14)}else{if(isc.FormItem.$16o==null){isc.FormItem.$950=" style='margin-left:";isc.FormItem.$951=" style='margin-right:";isc.FormItem.$16o=[(this.$92r?"<a role='button' ID='":"<span role='button' ID='"),,"'",isc.FormItem.$950,,"px;"+(isc.Browser.isMoz?"-moz-user-focus:":""),,,"' tabIndex=",," ",isc.DynamicForm.$89,"='",,"' ",isc.DynamicForm.$9a,"='",,"' handleNativeEvents=false>",,(this.$92r?"</a>":"</span>")]}
var _15=isc.FormItem.$16o;var _3=this.iconIsDisabled(_1),_16=(_3||this.canTabToIcons==false)?-1:this.$16p(_1);_15[1]=this.$16q(_12);var _17=this.$16r(_1);if(_17){if(this.isRTL()){_15[3]=isc.FormItem.$951}else{_15[3]=isc.FormItem.$950}
_15[4]=_8}else{_15[4]="0"}
if(isc.Browser.isMoz)_15[6]=(_16<0?"ignore;":"normal;");_15[7]=_3?"cursor:default;":"cursor:"+isc.Canvas.HAND;_15[9]=_16;if(isc.Canvas.ariaEnabled()&&!isc.Canvas.useLiteAria()){_15[10]=" ";if(_1.prompt){_15[10]=" aria-label='"+_1.prompt.replaceAll("'","&apos;")+"' "}
if(_3)_15[10]+=" aria-disabled='true' "}
_15[13]=_11;_15[17]=_12;_15[19]=this.$157(this.$16n(_12),_6,_7,this.$16l(_1),this.$16m(_1),(!_17?_8:null),_9,_5,null,_14);return _15.join(isc.emptyString)}},isc.A.$16r=function isc_FormItem__applyIconHSpaceToLink(_1){return(!isc.Browser.isIE&&!isc.Browser.isSafari&&!_1.imgOnly&&!isc.Browser.isStrict)},isc.A.$157=function isc_FormItem__getIconImgHTML(_1,_2,_3,_4,_5,_6,_7,_8,_9,_10){var _11=this.$133c;if(_4!=null){_11[0]=this.$14i;_11[1]=_4}else{_11[0]=null;_11[1]=null}
_11[3]=_5;_11[5]=_5;if(_6!=null){_11[7]=(this.isRTL()?"margin-right:":"margin-left:")+_6+"px;"}else{_11[7]=null}
_11[8]=(_7!=null?"background-color:"+_7+";":null);if(isc.Browser.isStrict&&!isc.Browser.isTransitional&&!_9){_11[9]="display:block;"}else{_11[9]=null}
var _12=_11.join(isc.$ad);if(_10==null){_10=" id='"+_1+"'"}else{_10+=" id='"+_1+"'"}
var _13=isc.FormItem.$4s=isc.FormItem.$4s||{align:isc.Browser.isSafari?"absmiddle":"TEXTTOP"};_13.src=_8;_13.width=_2;_13.height=_3;_13.extraCSSText=_12;_13.extraStuff=_10;return isc.Canvas.imgHTML(_13)},isc.A.$16q=function isc_FormItem__getIconLinkId(_1){if(this.isInactiveHTML()){return this.$qs(this._$_iLink_+_1)}
if(!this.$16t)this.$16t={};var _2=this.$16t;if(!_2[_1]){_2[_1]=this.$qs(this._$_iLink_+_1,true)}
return _2[_1]},isc.A.$16n=function isc_FormItem__getIconImgId(_1){if(this.isInactiveHTML()){return this.$qs(this._$_iImg_+_1)}
if(!this.$16u)this.$16u={};var _2=this.$16u;if(!_2[_1]){_2[_1]=this.$qs(this._$_iImg_+_1,true)}
return _2[_1]},isc.A.$16g=function isc_FormItem__getIconLinkElement(_1){_1=this.getIcon(_1);if(_1==null||_1.imgOnly)return null;var _2=this.$16q(_1.name);return isc.Element.get(_2)},isc.A.$16v=function isc_FormItem__getIconImgElement(_1){var _2=this.getIcon(_1);if(_2==null){if(_1==this.errorIconName){return isc.Element.get(this.getErrorIconId())}
return null}
var _3=this.$16n(_2.name);return isc.Element.get(_3)},isc.A.$16w=function isc_FormItem__getTargetIcon(_1){if(!_1||!this.icons)return null;var _2=isc.DynamicForm._getItemInfoFromElement(_1);if(!_2||_2.item!=this)return null;return _2.icon},isc.A.$16f=function isc_FormItem__shouldShowIcon(_1){if(this.$68y()||this.renderAsStatic())return false;if(_1.showIf==null)return true;if(_1.showIf===true||_1.showIf==this.$18q)return true;if(_1.showIf===false||_1.showIf==this.$18r)return false;isc.Func.replaceWithMethod(_1,"showIf","form,item");return!!_1.showIf(this.form,this)},isc.A.$92s=function isc_FormItem__shouldShowPickerIcon(){return this.showPickerIcon&&this.$16f(this.getPickerIcon())&&!this.$68y()},isc.A.$16e=function isc_FormItem__writeIconIntoItem(_1){if(_1.writeIntoItem)return true;return false},isc.A.$16x=function isc_FormItem__mayShowIcons(){if(!this.showIcons||this.icons==null||(this.showIconsOnFocus&&!this.hasFocus))return false;return true},isc.A.getTotalIconsWidth=function isc_FormItem_getTotalIconsWidth(){if(!this.$16x())return 0;var _1=0;for(var i=0;i<this.icons.length;i++){var _3=this.icons[i];if(!this.$16f(_3)||this.$16e(_3))continue;_1+=(_3.width!=null?_3.width:this.iconWidth)+(_3.hspace!=null?_3.hspace:this.iconHSpace)}
return _1},isc.A.getIconsHeight=function isc_FormItem_getIconsHeight(){if(!this.$16x())return 0;var _1=0;for(var i=0;i<this.icons.length;i++){var _3=this.icons[i];if(!this.$16f(_3)||this.$16e(_3))continue;var _4=(_3.height!=null?_3.height:this.iconHeight);_4+=this.$16m()*2;if(_4>_1)_1=_4}
return _1},isc.A.setIcons=function isc_FormItem_setIcons(_1){this.icons=_1;this.$14v();this.redraw()},isc.A.addIcon=function isc_FormItem_addIcon(_1){if(!this.icons)this.icons=[];this.icons.add(_1);this.setIcons(this.icons);return _1},isc.A.getIconByProperty=function isc_FormItem_getIconByProperty(_1,_2){if(this.icons)return this.icons.find(_1,_2)},isc.A.setIconEnabled=function isc_FormItem_setIconEnabled(_1){_1=this.getIcon(_1);if(!_1)return;var _2=!this.iconIsDisabled(_1);if(!!_1.$153!=_2)return;if(!_2)_1.$153=true;else delete _1.$153;if(!this.isDrawn())return;var _3=this.$16g(_1),_4=this.$16v(_1);if(_3){if(!_2){isc.FormItem.setElementTabIndex(_3,-1);_3.style.cursor="default"}else{isc.FormItem.setElementTabIndex(_3,this.$16p(_1))
_3.style.cursor=""}}
if(_4){var _5=this.getIconURL(_1,null,!_2);isc.Canvas.$wg(_4,_5);var _6=this.getIconStyle(_1,null,!_2);if(_6!=null)_4.className=_6}},isc.A.showIcon=function isc_FormItem_showIcon(_1,_2){delete this.$16y;if(isc.isA.String(_1)||isc.isA.Number(_1))_1=this.getIcon(_1);if(!isc.isAn.Object(_1))return;if(_1.name==null){this.$753(_1)}
var _3=this.$16f(_1);_1.showIf=function(){return true}
if(!_3&&this.showIcons&&this.containerWidget.isDrawn()&&this.isVisible())
{if(this.redrawOnShowIcon||_1.writeIntoItem){this.redraw()}else{var _4=isc.Element.get(this.getIconCellID());if(_4!=null){if(_4.childNodes.length==0){_4.innerHTML=this.getIconsHTML(_1==this.getPickerIcon())}else{var _5=this.getIconHTML(_1,null,this.isDisabled(),_2),_6="<td>"+_5+"</td>",_7=_4.firstChild,_8=0;for(var i=0;i<this.icons.length;i++){if(this.icons[i]==_1)break;if(this.$16f(this.icons[i])){_8++}}
if(_8==0){isc.Element.insertAdjacentHTML(_7.rows[0],"afterBegin",_6)}else{isc.Element.insertAdjacentHTML(_7.rows[0].cells[_8-1],"beforeEnd",_6)}}
this.$16z();this.$16d(_1)}else{this.logInfo("showIcon(): Unable to dynamically update icon visibility - redrawing the form","formItemIcons");return this.redraw()}}}},isc.A.hideIcon=function isc_FormItem_hideIcon(_1){if(isc.isA.String(_1)||isc.isA.Number(_1))_1=this.getIcon(_1);if(!isc.isAn.Object(_1))return;var _2=this.$16f(_1);_1.showIf=function(){return false}
if(_2&&this.showIcons&&this.containerWidget.isDrawn()&&this.isVisible())
{if(this.redrawOnShowIcon||_1.writeIntoItem){this.redraw()}
else{var _3=_1.imgOnly?this.$16v(_1):this.$16g(_1);if(_3==null){this.logInfo("hideIcon(): Unable to dynamically update icon visibility - redrawing the form");return this.redraw()}
var _4=_3.parentNode;if(_4.tagName!="TD"){isc.Element.clear(_3)}else{_4.parentNode.removeChild(_4)}
this.$16z()}}},isc.A.$16z=function isc_FormItem__iconVisibilityChanged(){this.$160()},isc.A.showAllIcons=function isc_FormItem_showAllIcons(_1){if(this.$161!=null){isc.Timer.clear(this.$161);delete this.$161}
this.$162(this.icons,_1)},isc.A.hideAllIcons=function isc_FormItem_hideAllIcons(){if(this.$161!=null)delete this.$161;this.$163(this.icons);this.$16y=true},isc.A.$162=function isc_FormItem__showIcons(_1,_2){if(_1==null||_1.length==0)return;for(var i=0;i<_1.length;i++){_2=_2&&this.$54o(_1[i],true);this.showIcon(_1[i],_2)}},isc.A.$163=function isc_FormItem__hideIcons(_1){if(_1==null||_1.length==0)return;for(var i=0;i<_1.length;i++){this.hideIcon(_1[i])}},isc.A.getIcon=function isc_FormItem_getIcon(_1){if(_1==null)return;var _2;if(this.icons){if(isc.isA.Number(_1)){return this.icons[_1]}
for(var i=0;i<this.icons.length;i++){if(this.icons[i]==_1||this.icons[i].name==_1)_2=this.icons[i]}}
if(!_2&&this.showPickerIcon){if(isc.isAn.Object(_1))_1=_1.name;var _4=this.getPickerIcon();if(_4&&_4.name==_1)_2=_4}
if(!_2){this.logInfo("FormItem unable to get pointer to icon with name:"+_1+" - Invalid name, or icons array has been inappropriately modified. To update icon[s] for some form item, use the method 'setIcons()'.")}
return _2},isc.A.$164=function isc_FormItem__setIconImgState(_1,_2,_3){if(this.iconIsDisabled(_1))return;if(_3==null)_3=this.hasFocus&&this.$54o(_1,true)
var _4=this.$16v(_1);if(_4!=null){var _5=this.getIconURL(_1,_2,null,_3);isc.Canvas.$wg(_4,_5);var _6=this.getIconStyle(_1,_2,null,_3);if(_6!=null)_4.className=_6}},isc.A.$165=function isc_FormItem__iconShouldShowOver(_1){if(!_1||this.iconIsDisabled(_1))return false;if(_1.showOver!=null)return _1.showOver;return this.showOverIcons},isc.A.$54o=function isc_FormItem__iconShouldShowFocused(_1,_2){if(!_1||this.iconIsDisabled(_1))return false;if(_2&&_1.showFocusedWithItem==false)return false;if(_1.showFocused!=null)return _1.showFocused;return this.showFocusedIcons},isc.A.setIconBackgroundColor=function isc_FormItem_setIconBackgroundColor(_1,_2){_1.backgroundColor=_2;var _3=this.$16v(_1);if(_3!=null){try{_3.style.backgroundColor=_2}catch(e){}}},isc.A.showPicker=function isc_FormItem_showPicker(_1,_2,_3,_4){var _5=this.picker;_3=isc.addProperties(_3||{},{callingForm:this.form,callingFormItem:this});if(isc.isA.String(_5)&&isc.isA.Canvas(window[_5])){_5=this.picker=window[_5]}
if(!_5){_5=this.picker=this.createPicker(_3);if(!isc.isA.Function(_5.dataChanged)){_5.dataChanged=isc.Class.NO_OP}
_5.observe(_5,"resized","observed.placeNear(observed.lastShowRect)");if(this.pickerDataChanged&&_5.dataChanged){this.observe(_5,"dataChanged","observer.pickerDataChanged(observed)")}}else{isc.addProperties(_5,_3)}
var _6=_5.getID();if(!_4){if(this.getPickerRect){_4=this.getPickerRect()}else if(_2){var _7=this.getIconPageRect(_2);_4=[_7[0],_7[1]]}
else _4=[isc.EH.getX(),isc.EH.getY()]}
_5.lastShowRect=_4;_5.setRect(_4);if(!_5.isDrawn()){_5.moveTo(null,-9999);_5.draw()}
this.picker.placeNear(_4);if(isc.isA.Function(_5.setData)){if(_5.$1275){delete _5.$1275}else{if(isc.isA.Function(this.getPickerData)){_5.setData(this.getPickerData(_5))}else _5.setData(this.getValue(_5))}}
var _8=_1?null:_6+".hide()";if(_1&&isc.isA.Function(_5.clickMaskClicked))
_8=_6+".clickMaskClicked()";_5.showClickMask(_8,!_1,_5);if(_1!=null&&_5.isModal==null)_5.isModal=_1;_5.show();_5.bringToFront();_5.focus();return false},isc.A.createPicker=function isc_FormItem_createPicker(_1){return this.createAutoChild("picker",_1)},isc.A.hidePicker=function isc_FormItem_hidePicker(){if(!this.picker)return;this.picker.hideClickMask();this.picker.hide()},isc.A.redraw=function isc_FormItem_redraw(_1){if(!this.isDrawn())return;if(this.hasFocus)this.$105=true;if(!this.hasFocus&&this.items!=null){for(var i=0;i<this.items.length;i++){if(this.items[i].hasFocus)this.$105=true}}
if(this.containerWidget.redrawFormItem){this.containerWidget.redrawFormItem(this,_1)}else{this.containerWidget.markForRedraw("Form item redrawn"+(_1?": "+_1:isc.emptyString))}},isc.A.adjustOverflow=function isc_FormItem_adjustOverflow(_1){if(!this.$43c){this.$43c=[this.getID(),"  overflow changed: "]}
if(_1==null)this.$43c[2]="No Reason Specified.";else this.$43c[2]=_1;if(isc.isA.DynamicForm(this.containerWidget)){this.containerWidget.$103();this.containerWidget.adjustOverflow(this.$43c.join(isc.emptyString))}},isc.A.show=function isc_FormItem_show(_1){if(this.visible==true)return;this.visible=true;if(!_1)this.showIf=null;if(this.containerWidget.redrawFormItem)this.containerWidget.redrawFormItem(this,"showing form item");else this.containerWidget.markForRedraw("showing form item");this.visibilityChanged(true)},isc.A.hide=function isc_FormItem_hide(_1){if(this.visible==false)return;this.visible=false;if(!_1)this.showIf=null;if(this.containerWidget.redrawFormItem)this.containerWidget.redrawFormItem(this,"hiding form item");else this.containerWidget.markForRedraw("hiding form item");this.visibilityChanged(true)},isc.A.$104=function isc_FormItem__updateHTMLForPageLoad(){if(!isc.Browser.isSafari||!this.isDrawn())return;this.$160()},isc.A.$160=function isc_FormItem__resetWidths(){if(!this.isDrawn())return;var _1=this.clipValue;var _2=this.getOuterTableElement();if(_2)_2.style.width=this.getInnerWidth();if(this.$92s()){var _3=this.$15f();if(_3)_3.style.width=this.getElementWidth();var _4=this.getPickerIcon(),_5=this.$16v(_4);if(_5){_5.style.height=this.getPickerIconHeight();_5.style.width=this.getPickerIconWidth()}}
var _6=this.getTextBoxWidth(),_7=(_6==null?isc.emptyString:_6+isc.px),_8=this.getTextBoxHeight(),_9=(_8==null?isc.emptyString:_8+isc.px),_10=this.$15h();if(_10){if(_1)_10.style.width=_7;else _10.style.minWidth=_7;_10.style.height=_9}
if(this.$15m()){var _11=this.getFocusElement()
if(_11){_11.style.width=_7;_11.style.height=_9}}},isc.A.hasElement=function isc_FormItem_hasElement(){return this.hasDataElement()},isc.A.hasDataElement=function isc_FormItem_hasDataElement(){if(this.showValueIconOnly)return false;return this.$125},isc.A.getElement=function isc_FormItem_getElement(_1){return this.getDataElement(_1)},isc.A.getFocusElement=function isc_FormItem_getFocusElement(){if(!this.isDrawn()||!this.$kk())return null;if(this.hasDataElement())return this.getDataElement();if(this.$15m()){if(!this.$16i){this.$16i=isc.Element.get(this.getID()+"__focusProxy")}
return this.$16i}
return this.$872()?this.$15h():null},isc.A.$166=function isc_FormItem__getCurrentFocusElement(){if(this.hasFocus==null&&!isc.EH.$vm==this){return null}
var _1=this.$167;if(isc.Browser.isIE&&_1!=this.getActiveElement()){this.logInfo("not returning focus element "+this.echoLeaf(_1)+" since it's not active"+isc.EH.$lb(),"nativeFocus");if(this.hasFocus){this.hasFocus=false;this.elementBlur()}
this.$167=null;return null}
return _1},isc.A.getDataElement=function isc_FormItem_getDataElement(_1){if(_1==null){var _2=this}else{var _2=this.form.getItem(_1)}
if(!_2.hasDataElement())return null;if(!this.isDrawn())return;var _3=this.$14x;if(_3==null){_3=(this.$14x=isc.Element.get(this.getDataElementId()))}
return _3},isc.A.getOuterElement=function isc_FormItem_getOuterElement(){if(!this.isDrawn())return null;var _1=this.$158;if(this.$15s(_1)){return this.getOuterTableElement()}
if(this.$92s()){return this.$15f()}
var _2=this.$15h();if(_2==null){_2=this.getHandle()}
return _2},isc.A.getHandle=function isc_FormItem_getHandle(){if(!this.isDrawn())return null;if(this.$11e())return this.getAbsDiv();if(this.containerWidget==this.form)return this.getFormCell();return isc.Element.get(this.$qs(this.$13j))},isc.A.getOuterTableElement=function isc_FormItem_getOuterTableElement(){return this.$15c(this.$133)},isc.A.$168=function isc_FormItem__overElement(_1){if(!_1)_1=isc.EH.lastEvent;var _2=_1.itemInfo;return(_2&&_2.overElement)},isc.A.$169=function isc_FormItem__overTextBox(_1){if(!_1)_1=isc.EH.lastEvent;var _2=_1.itemInfo;return(_2&&(_2.overTextBox||_2.overElement))},isc.A.$17a=function isc_FormItem__overControlTable(_1){if(!_1)_1=isc.EH.lastEvent;var _2=_1.itemInfo;return(_2&&(_2.overControlTable||this.$169(_1)||(_2.overIcon&&this.getIcon(_2.overIcon)==this.getPickerIcon())))},isc.A.getFormCellID=function isc_FormItem_getFormCellID(){return this.$qs(this.$14k)},isc.A.getFormCell=function isc_FormItem_getFormCell(){return isc.Element.get(this.getFormCellID())},isc.A.getDisplayValue=function isc_FormItem_getDisplayValue(_1){var _2;if(this.multiple){var _3=false;if(_1===_2){_1=this.getValue();_3=true}
if(!(_1==null||isc.isAn.Array(_1))){if(_3){this.logWarn("getDisplayValue - this is a multiple FormItem but the value obtained from getValue() was not null and was not an array.");_1=[_1]}else{return this.mapValueToDisplay(_1)}}
if(_1!=null){var _4=[];for(var i=0,_6=_1.length;i<_6;++i){_4.push(this.mapValueToDisplay(_1[i]))}
return _4}}
return this.mapValueToDisplay(_1!==_2?_1:this.getValue())},isc.A.mapValueToDisplay=function isc_FormItem_mapValueToDisplay(_1){var _2=this.canEscapeHTML&&(this.escapeHTML||this.outputAsHTML||this.asHTML);var _3;if(this.multiple&&isc.isAn.Array(_1)){_3="";for(var i=0,_5=_1.length;i<_5;i++){var _6=_1[i],_7=this.$xq(_6);if(_7!=null&&_5>1){_3+=_7}
_3+=this.mapValueToDisplay(_6);if(i!=_5-1){_3+=this.multipleValueSeparator}}}else{_3=this.$17b(_1,true);if(_3==null){var _8=this.getDisplayFieldName();if(_8!=null){var _9=this.getOptionDataSource();var _10=(_9==null?null:_9.getCacheData());if(_10!=null){var _11=_10.find(this.getValueFieldName(),_1);if(_11!=null)_3=_11[_8]}}}
_3=this.$17c(_3!=null?_3:_1);if(_2&&(_1==null||_1==isc.emptyString)&&_3==this.$54t)
{_2=false}
if(_2&&isc.isA.String(_1)){_3=_3.asHTML()}}
return _3},isc.A.shouldApplyStaticTypeFormat=function isc_FormItem_shouldApplyStaticTypeFormat(){if(this.applyStaticTypeFormat)return true;if(this.formatOnBlur){var _1=this.hasFocus;return!_1}
return false},isc.A.$17c=function isc_FormItem__formatDataType(_1,_2){if(_2==null){_2=this.shouldApplyStaticTypeFormat()}
if(_2){if(this.formatValue!=null){var _3=this.form,_4=this.form?this.form.values:{};return this.formatValue(_1,_4,_3,this)}else{if((isc.isA.Number(_1)||isc.isA.Date(_1))&&this.format){return isc.isA.Number(_1)?isc.NumberUtil.format(_1,this.format):isc.DateUtil.format(_1,this.format)}}}else if(this.formatEditorValue!=null){var _3=this.form,_4=this.form?this.form.values:{};return this.formatEditorValue(_1,_4,_3,this)}else if(this.$65!=null){var _3=this.form,_4=this.form?this.form.values:{};if(this.$62&&this.$62.editFormatter){return this.$62.editFormatter(_1,this,_3,_4)}else{return this.$65(_1,this,_3,_4)}}
if(isc.isA.Date(_1)){if(this.$851()){var _5=this.$30o();var _6=isc.SimpleType.inheritsFrom(this.getType(),"time");return isc.Time.toTime(_1,_5,_6)}else{var _5=this.$45i();var _7=this.getType(),_8=isc.SimpleType.inheritsFrom(_7,"date"),_9=isc.SimpleType.inheritsFrom(_7,"datetime");if(_8&&!_9){return _1.toShortDate(_5,false)}else{if(this.useShortDateFormat){return _9?_1.toShortDatetime(_5,true):_1.toShortDate(_5,true)}else{return _1.toNormalDate(_5)}}}}
if(this.$62&&isc.isA.Function(this.$62.normalDisplayFormatter)&&_2)
{_1=this.$62.normalDisplayFormatter(_1,this,this.form,this.form.values)}else if(this.$64&&_2){_1=this.$64(_1,this,this.form,this.form.values)}else if(_1!=null){_1=isc.iscToLocaleString(_1);if(this.emptyDisplayValue!=isc.emptyString&&_1==isc.emptyString)
_1=this.emptyDisplayValue}
if(_1==null)_1=this.emptyDisplayValue;return _1},isc.A.$851=function isc_FormItem__formatAsTime(){var _1=this.getType(),_2=isc.SimpleType.inheritsFrom(_1,"time"),_3=_2;if(this.timeFormatter==null&&this.dateFormatter!=null)_3=false;if(this.dateFormatter==null&&this.timeFormatter!=null)_3=true;return _3},isc.A.$45i=function isc_FormItem__getDateFormatter(){if(this.dateFormatter!=null)return this.dateFormatter;var _1=this.getType(),_2=isc.SimpleType.inheritsFrom(_1,"date"),_3=isc.SimpleType.inheritsFrom(_1,"datetime");if(_2&&this.displayFormat!=null)return this.displayFormat;if(_3&&this.form.datetimeFormatter!=null)return this.form.datetimeFormatter;return this.form.dateFormatter},isc.A.$30o=function isc_FormItem__getTimeFormatter(){if(this.timeFormatter!=null)return this.timeFormatter;if(this.displayFormat!=null&&isc.SimpleType.inheritsFrom(this.type,"time")){return this.displayFormat}
return this.form.timeFormatter},isc.A.mapDisplayToValue=function isc_FormItem_mapDisplayToValue(_1){_1=this.$79d(_1);return this.$17d(_1)},isc.A.forceTimeConversion=function isc_FormItem_forceTimeConversion(){return false},isc.A.$79d=function isc_FormItem__parseDisplayValue(_1){var _2=this.shouldApplyStaticTypeFormat();if(!_2){if(this.parseEditorValue!=null){_1=this.parseEditorValue(_1,this.form,this)}else if(this.$66!=null){var _3=this.form,_4=_3?_3.values:{};if(this.$62&&this.$62.parseInput){_1=this.$62.parseInput(_1,this,_3,_4)}else{_1=this.$66(_1,this,_3,_4)}}
if(_1!=null&&isc.isA.String(_1)){var _5=this.getType();var _6=isc.SimpleType.inheritsFrom(_5,"date"),_7=isc.SimpleType.inheritsFrom(_5,"time"),_8=_6&&isc.SimpleType.inheritsFrom(_5,"datetime"),_9=(_1=="");if(_6||_7){if(this.$851()){if(_9&&this.allowEmptyValue){_1=null}else{var _10;if(!_7&&isc.isA.Date(this._value)){_10=this._value}
var _11=isc.Time.parseInput(_1,!this.forceTimeConversion(),false,!_7,_10);if(isc.isA.Date(_11))_1=_11}}else{var _12=this.inputFormat;if(_12==null){_12=Date.mapDisplayFormatToInputFormat(this.$45i())}
var _13=_6&&!_8;var _14=Date.parseInput(_1,_12,this.centuryThreshold,false,!_13);if(isc.isA.Date(_14))_1=_14}}}}
return _1},isc.A.getType=function isc_FormItem_getType(){if(this.type!=null)return this.type;if(this.criteriaField&&this.form&&this.form.dataSource){var _1=isc.DataSource.get(this.form.dataSource);var _2=_1.getField(this.criteriaField);if(_2)return _2.type}
return null},isc.A.setToZeroTime=function isc_FormItem_setToZeroTime(_1){Date.setToZeroTime(_1)},isc.A.$17b=function isc_FormItem__mapKey(_1,_2){var _3=_2?null:_1;var _4=this.getValueMap();if(!_4)return _3;if(isc.isA.String(_4))_4=this.getGlobalReference(_4);if(isc.isAn.Array(_4))return _3;return isc.getValueForKey(_1,_4,_3)},isc.A.$17d=function isc_FormItem__unmapKey(_1){var _2=this.getValueMap();if(!_2)return _1;if(isc.isA.String(_2))_2=this.getGlobalReference(_2);if(isc.isAn.Array(_2))return _1;var _3=isc.getKeyForValue(_1,_2);if(_3==_1&&_3===this.emptyDisplayValue){_3="";var _4=this.getValueFieldName();if(_4!=null){var _5=this.getOptionDataSource();var _6=(_5==null?null:_5.getCacheData());if(_6!=null){var _7=_6.find(this.getDisplayFieldName(),_1);if(_7!=null)_3=_7[_4]}}}
return _3},isc.A.setValueMap=function isc_FormItem_setValueMap(_1){this.valueMap=_1;this.updateValueMap()},isc.A.setOptionDataSource=function isc_FormItem_setOptionDataSource(_1){if(isc.isA.String(_1))_1=isc.DataSource.get(_1);if(this.getOptionDataSource()==_1){return}
this.ignoreOptionDataSource();this.optionDataSource=_1;this.invalidateDisplayValueCache()},isc.A.setValueIcons=function isc_FormItem_setValueIcons(_1){this.valueIcons=_1;if(this.isDrawn())this.redraw()},isc.A.setOptions=function isc_FormItem_setOptions(_1){return this.setValueMap(_1)},isc.A.updateValueMap=function isc_FormItem_updateValueMap(_1){if(_1!=false&&!this.$66u){this.$952(this.getDisplayValue())}
if(this.hasElement())this.setElementValueMap(this.getValueMap())},isc.A.setElementValueMap=function isc_FormItem_setElementValueMap(_1){},isc.A.getValueMap=function isc_FormItem_getValueMap(){var _1=this.valueMap;if(isc.isA.String(_1)){_1=this.getGlobalReference(_1)}
var _2=this.$43d;if(_2!=null){if(_1==null)_1=_2;else{if(isc.isAn.Array(_1)){var _3=_1;_1={};for(var i=0;i<_3.length;i++){_1[_3[i]]=_3[i]}}
_1=isc.addProperties({},_1);var _5;for(var _6 in _2){if(_1[_6]===_5)_1[_6]=_2[_6]}}}
return _1},isc.A.getValueFieldName=function isc_FormItem_getValueFieldName(){if(this.valueField)return this.valueField;if(this.form&&this.form.dataSource&&this.foreignKey)
return isc.DS.getForeignFieldName(this,this.form.dataSource);var _1=this.getFieldName();return _1||"name"},isc.A.getDisplayFieldName=function isc_FormItem_getDisplayFieldName(){if(this.displayField)return this.displayField;var _1=this.getOptionDataSource();var _2=this.getValueFieldName();if(_1&&_1!=isc.DataSource.getDataSource(this.form.dataSource)&&_1.getField(_2)&&_1.getField(_2).hidden==true){return _1.getTitleField()}},isc.A.$426=function isc_FormItem__displayFieldValueFromFormValues(){if(this.displayField!=null){var _1=this.form.getValues(),_2=_1[this.getFieldName()],_3=_1[this.displayField];if(_3!=null){var _4={};_4[_2]=_3}
this.$43d=_4}},isc.A.getOptions=function isc_FormItem_getOptions(){return this.getValueMap()},isc.A.getOptionDataSource=function isc_FormItem_getOptionDataSource(){var _1=this.optionDataSource;if(_1==null){var _2=this.form?this.form.getDefaultOptionDataSource(this):null;if(this.foreignKey)_1=isc.DS.getForeignDSName(this,_2);if(_1==null&&_2)_1=_2}
if(isc.isA.String(_1))_1=isc.DataSource.getDataSource(_1);return _1});isc.evalBoundary;isc.B.push(isc.A.getValueMapTitle=function isc_FormItem_getValueMapTitle(_1){var _2=this.getValueMap();if(isc.isAn.Array(_2))return(_2.contains(_1)?_1:"");return _2[_1]},isc.A.saveValue=function isc_FormItem_saveValue(_1,_2){var _3;this._value=_1;this.$14u=_2;if(this.isDrawn()){if(this.$11d())this.$17e(_1)}
if(this.form==null)return;if(_1==_3&&this.$17f){this.form.clearItemValue(this)}else{this.form.saveItemValue(this,_1)}},isc.A.$17e=function isc_FormItem__setHiddenDataElementValue(_1){var _2=this.$15b();if(_2)_2.value=_1},isc.A.setValue=function isc_FormItem_setValue(_1,_2,_3,_4){this.$17g=true;var _5=!_4&&(this.maintainSelectionOnTransform&&this.hasFocus&&(this.$17h()!=this.$14l));if(_5&&isc.Browser.isIE){if(!this.$820()){_5=false}}
if(_5)this.rememberSelection(_3);if(this.$17i!=null){isc.Timer.clearTimeout(this.$17i);this.$17i=null}
var _6;if(_1==null&&!_2){var _7=this.getDefaultValue();if(_7!=null){_6=true;_1=_7}}
if(this.multiple&&_1!=null&&!isc.isAn.Array(_1)){_1=[_1]}
if(this.length!=null&&_1!=null&&isc.isA.String(_1)&&_1.length>this.length)
{_1=_1.substring(0,this.length)}
this.saveValue(_1,_6);this.$124t(_1,_5);return _1},isc.A.$124t=function isc_FormItem__showValue(_1,_2){if(_1!=null){if(this.multiple){var _3=[];for(var i=0,_5=_1.length;i<_5;++i){var _6=_1[i];if(_6!=null&&this.shouldFetchMissingValue(_6)){_3.push(_6)}}
this.$78w();this.$43f(_3)}else if(this.shouldFetchMissingValue(_1)){this.$78w();this.$43f(_1)}}else{if(this.$78y==null||!this.compareValues(this.$78y,this._value))
{this.$846()}}
var _7=this.getDisplayValue(_1);this.$952(_7,_1);if(_2)this.resetToLastSelection(true)},isc.A.shouldFetchMissingValue=function isc_FormItem_shouldFetchMissingValue(_1){if(this.fetchMissingValues==false)return false;if(this.getOptionDataSource()==null)return false;var _2=false;if(this.$847!=null&&(this.$43e||this.$847.find(this.getValueFieldName(),_1)!=null))
{_2=true}
if(_2)return false;if(this.alwaysFetchMissingValues)return true;if(this.getDisplayFieldName()==null)return false;var _3=(this.$17b(_1,true)!=null);return!_3},isc.A.setDefaultValue=function isc_FormItem_setDefaultValue(_1){var _2=this.defaultValue,_3;this.defaultValue=_1;if(this.isSetToDefaultValue()||(this._value==null&&_2===_3))
this.clearValue()},isc.A.$43f=function isc_FormItem__checkForDisplayFieldValue(_1){if(this.$127j){delete this.$127j;return}
if(!this.$63l)this.$63l={};var _2=false;if(isc.isAn.Array(_1)){for(var i=0,_4=_1.length;i<_4;++i){var _5=_1[i];if(!this.$63l[_5]){this.$63l[_5]=_2=true}}}else if(!this.$63l[_1]){this.$63l[_1]=_2=true}
if(_2){this.$127k();var _6=isc.addProperties({},this.optionCriteria);if(!this.filterLocally){var _7={};_7[this.getValueFieldName()]=_1;_6=isc.DataSource.combineCriteria(_6,_7)}
var _8=isc.addProperties({},this.optionFilterContext,{showPrompt:false,internalClientContext:{dataValue:_1,filterLocally:this.filterLocally},componentId:this.containerWidget.getID(),componentContext:this.getFieldName()});var _9;if(this.optionOperationId!==_9){_8.operationId=this.optionOperationId}
this.getOptionDataSource().fetchData(_6,{target:this,methodName:"fetchMissingValueReply"},_8)}},isc.A.fetchMissingValueReply=function isc_FormItem_fetchMissingValueReply(_1,_2,_3){var _4=_1.internalClientContext.dataValue,_5=_1.internalClientContext.filterLocally,_6=this.getDisplayFieldName(),_7=this.getValueFieldName();if(!isc.isAn.Array(_4))_4=[_4];var _8;if(!_5){_8=[]}
var _9=0;for(var i=0,_11=_4.length;i<_11;++i){delete this.$63l[_4[i]];var _12=_2?_2.find(_7,_4[i]):null;if(!_12){this.logInfo("Unable to retrieve display value for data value:"+_4[i]+" from dataSource "+this.getOptionDataSource());++_9}else if(!_5){_8.push(_12)}}
var _13=_2?_2.getLength():0,_14=_4.getLength();if(!_5&&(_13>(_14-_9))){this.logWarn("FetchMissingValues - filterLocally is false yet optionDataSource fetch included records that do not match our current data value. Ignoring these values.","fetchMissingValues");this.logDebug("Data returned:"+this.echoAll(_2),"fetchMissingValues");_2=_8}
var _15=(this.$848(_2)||this.$1441)&&this.$849();if(_5)this.$43e=true;this.updateDisplayValueMap(_15);this.$127l(_9)},isc.A.$127m=function isc_FormItem__clearPendingMissingValue(_1){if(this.$63l)delete this.$63l[_1]},isc.A.$127i=function isc_FormItem__fetchMissingValueInProgress(){return(this.$63l&&!isc.isAn.emptyObject(this.$63l))},isc.A.$127k=function isc_FormItem__setLoadingDisplayValue(){if(this.loadingDisplayValue!=null){this.$1441=true;if(!this.isReadOnly()){this.$148w=this.canEdit;this.setCanEdit(false);this.$127n=true}
this.$66s();this.setElementValue(this.loadingDisplayValue)}},isc.A.$127l=function isc_FormItem__clearLoadingDisplayValue(_1){if(!this.$127i()){if(this.$127n){if(_1&&_1>0)this.$127j=true;this.setCanEdit(this.$148w);delete this.$127n}
this.$1441=false}},isc.A.$953=function isc_FormItem__addRecordToDisplayFieldCache(_1){if(_1!=null){return this.$848([_1])}else{return false}},isc.A.$848=function isc_FormItem__addDataToDisplayFieldCache(_1){if(_1!=null){return this.$954(_1,true,true,false,true)}else{return false}},isc.A.$955=function isc_FormItem__removeValueFromDisplayFieldCache(_1){var _2=this.$847;if(_2){var _3=this.getValueFieldName(),_4=_2.find(_3,_1);if(_4!=null){return this.$954([_4],false,false,true,true)}}
return false},isc.A.$954=function isc_FormItem__modifyDataInDisplayFieldCache(_1,_2,_3,_4,_5){if(this.$847==null){this.$847=[]}
var _6=this.$847,_7=this.getValueFieldName(),_8=this.getDisplayFieldName(),_9=_2&&!(_3||_4);if(_5){var _10=this.getValue(),_11=false;if(!isc.isAn.Array(_10))_10=[_10]}
for(var i=0;i<_1.length;i++){var _13=_1[i],_14=_13[_7],j=_6.findIndex(_7,_14),_16=false;if(j==-1){if(_2){_6.push(_13);_16=true}}else if(_3||_4){var _17=_6[j],_18=(_13[_8]!=_17[_8]);if(_3&&_18){_6[j]=_13;_16=true}else if(_4){_6.splice(j,1);_16=true}}
if(_5&&_16&&!_11){_11=(_10.indexOf(_14)!=-1)}}
var _19=this.getOptionDataSource();if(!this.isObserving(_19,"dataChanged")){this.observe(_19,"dataChanged","observer.dataSourceDataChanged(observed,dsRequest,dsResponse)")}
if(_5)return _11},isc.A.$849=function isc_FormItem__refreshForDisplayValueChange(){return true},isc.A.updateDisplayValueMap=function isc_FormItem_updateDisplayValueMap(_1){this.$846();var _2=this.$847,_3=this.getDisplayFieldName(),_4=this.getValueFieldName();var _5=this.$43d={};var _6;for(var i=0;i<_2.length;i++){var _8=_2[i];var _9=_8[_4],_10=_8[_3];if(_5[_9]!==_6){if(_5[_9]!=_10){this.logWarn("Deriving valueMap for '"+_4+"' from dataSource based on displayField '"+_3+"'. This dataSource contains more than one record with "+_4+" set to "+_9+" with differing "+_3+" values. Derived valueMap is therefore unpredictable.","fetchMissingValues")}
continue}
_5[_8[_4]]=_3!=null?_10:_9}
this.updateValueMap(_1)},isc.A.invalidateDisplayValueCache=function isc_FormItem_invalidateDisplayValueCache(_1){this.$43d=null;this.$847=null;this.$78w();this.$43e=false;this.ignoreOptionDataSource();if(_1)return;if(this.form.$425(this)){this.$426()}else if(this._value!=null&&this.shouldFetchMissingValue(this._value)){this.$78w();this.$43f(this._value)}
this.updateValueMap()},isc.A.ignoreOptionDataSource=function isc_FormItem_ignoreOptionDataSource(){var _1=this.getOptionDataSource();if(_1!=null&&this.isObserving(_1,"dataChanged")){this.ignore(_1,"dataChanged")}},isc.A.dataSourceDataChanged=function isc_FormItem_dataSourceDataChanged(_1,_2,_3){var _4=this.logIsDebugEnabled("fetchMissingValues");if(_4){this.logDebug("dataSourceDataChanged is firing for request:"+this.echo(_2),"fetchMissingValues")}
var _5=this.$847;if(_5==null)return;if(_3.invalidateCache){if(_4){this.logDebug("Request had invalidateCache set, dropping cached display values","fetchMissingValues")}
this.invalidateDisplayValueCache()}else{var _6=this.getDisplayFieldName(),_7=this.getValueFieldName();var _8=_1.getUpdatedData(_2,_3,true),_9=_2.operationType=="add",_10=_2.operationType=="update",_11=_2.operationType=="remove";if(_4){this.logDebug("Operation type:"+_2.operationType+", updateData:"+this.echoAll(_8),"fetchMissingValues")}
if(_8==null||(!_9&&!_11&&!_10))return;if(!isc.isAn.Array(_8)){_8=[_8]}
var _12=false,_7=this.getValueFieldName();if(_9){_5.addList(_8);if(this.multiple){var _13=this._value;if(!(_13==null||isc.isAn.Array(_13))){this.logInfo("dataSourceDataChanged - this is a multiple FormItem but this._value is not null and is not an array.");_13=[_13]}
if(_13!=null){var _14=_13.getLength();for(var i=0;!_12&&i<_14;++i){_12=_8.find(_7,_13[i])!=null}}}else{_12=_8.find(_7,this._value)!=null}}else{var _16=_1.getPrimaryKeyFields();for(var i=0;i<_8.length;i++){var _17=_8[i],_18=isc.applyMask(_17,_16);var _19=_1.findByKeys(_18,_5);if(_19==-1){if(_11)continue;_5.add(_17)}else{var _20=_5[_19][_7];if(this.multiple){var _13=this._value;if(!(_13==null||isc.isAn.Array(_13))){this.logWarn("dataSourceDataChanged - this is a multiple FormItem but this._value is not null and is not an array.");_13=[_13]}
if(_13!=null){var _14=_13.getLength();for(var k=0;!_12&&k<_14;++k){_12=_20==_13[k]}}}else if(_20==this._value){_12=true}
if(_11){_5.removeAt(_19)}else{_5[_19]=_17}}}}
this.updateDisplayValueMap(_12&&this.$849())}},isc.A.getSelectedRecord=function isc_FormItem_getSelectedRecord(){if(this.$78y!=null){if(!this.compareValues(this.$78y,this._value)){this.logInfo("getSelectedRecord - cached record doesn't match new value - dropping","fetchMissingValues");this.$78w()}}
return this.$751},isc.A.$846=function isc_FormItem__updateSelectedRecord(){if(this._value==null||this.$847==null){this.$78w()}else{var _1=this.getValueFieldName();this.$78y=this._value;if(this.multiple){var _2=this._value;if(!(_2==null||isc.isAn.Array(_2))){this.logWarn("$846 - this is a multiple FormItem but this._value is not null and is not an array");_2=[_2]}
if(_2==null){this.$751=null}else{this.$751=[];for(var i=0,_4=_2.length;i<_4;++i){this.$751.push(this.$847.find(_1,_2[i]))}}}else{this.$751=this.$847.find(_1,this._value)}}},isc.A.$78w=function isc_FormItem__clearSelectedRecord(){delete this.$751;delete this.$78y},isc.A.clearValue=function isc_FormItem_clearValue(){this.$17f=true;this.setValue();delete this.$17f},isc.A.$952=function isc_FormItem__setElementValue(_1,_2){if(this.multiple&&_1!=null&&isc.isAn.Array(_1)){var _3="";for(var i=0,_5=_1.length;i<_5;i++){if(_3!="")_3+=this.multipleValueSeparator;_3+=_1[i]}
_1=_3}
return this.setElementValue(_1,_2)},isc.A.setElementValue=function isc_FormItem_setElementValue(_1,_2){if(!this.isDrawn())return;var _3;if(_2===_3){_2=this._value}
if(this.$127i()&&this.loadingDisplayValue!=null){if(!this.$1441||_1!=this.loadingDisplayValue){this.logInfo("setElementValue() called while attempting to fetch missing display-value / record from DataSource. "+(_1!=this.loadingDisplayValue?" Specified element value is :"+_1+" (doesn't match this.loadingDisplayValue).":"")+(!this.$1443?"  setLoadingDisplayValue() hasn't yet been called.":"")+" Will set value to loadingDisplayValue and mark showLoadingDisplayValue as true","loadingDisplayValue")}
this.$1441=true;_1=this.loadingDisplayValue}
if(this.hasDataElement()){var _4=this.getDataElement();if(_4!=null){this.$17j(_2);if(_4.value!==_1){var _5=_4.scrollLeft,_6=_4.scrollTop;var _7=isc.Browser.isIE&&isc.isA.TextItem(this);_4.value=(_7&&_1==null)?isc.emptyString:_1;if(isc.Browser.isIE&&isc.Browser.version>=10){_4.scrollLeft=_5;_4.scrollTop=_6}}
if(_1===_3||_1==null||isc.isAn.emptyString(_1)){this.$66u=false}
return _1}}
var _8=this.$15h();if(_8!=null){if(this.showValueIconOnly)_1=isc.emptyString;var _9=this.$xq(_2);if(_9!=null)
_1=_9+(_1!=null?_1:isc.emptyString);if(isc.Browser.isIE){if(_1&&_1.startsWith("<nobr>"))
_1=_1.substring(6);if(_1&&_1.endsWith("</nobr>"))
_1=_1.substring(0,_1.length-7);try{_8.innerHTML=_1}catch(e){var _10=document.createElement("span");_10.innerHTML=_1;_8.innerHTML="";_8.appendChild(_10)}}else{_8.innerHTML=_1}
if(!this.clipValue||this.height==null||this.width==null){this.adjustOverflow("textBox value changed")}}},isc.A.$17j=function isc_FormItem__updateValueIcon(_1){if(this.suppressValueIcon||!this.isDrawn())return;var _2=this.$144(_1),_3=this.$15v();if(_2!=null){if(this.imageURLSuffix!=null)_2+=this.imageURLSuffix;var _4=this.imageURLPrefix||this.baseURL||this.imgDir;if(_3!=null){isc.Canvas.$wg(_3,_2,_4)}else{_2=isc.Canvas.getImgURL(_2,_4);var _5=false;if(this.hasDataElement()){var _6=this.getDataElement();if(_6!=null){isc.Element.insertAdjacentHTML(_6,"beforeBegin",this.$xq(_1));_6.style.width=this.getTextBoxWidth(_1);_5=true}}else{var _7=this.$15h();if(_7!=null){isc.Element.insertAdjacentHTML(_7,"afterBegin",this.$xq(_1));_5=true}}
if(!_5)this.redraw()}}else if(_3!=null&&!(isc.isAn.Array(_1)&&_1.length>1)){isc.Element.clear(_3);if(this.hasDataElement()){var _6=this.getDataElement();_6.style.width=this.getTextBoxWidth(_1)}}},isc.A.setPrompt=function isc_FormItem_setPrompt(_1){this.prompt=_1},isc.A.setHint=function isc_FormItem_setHint(_1){this.hint=_1;if(this.showHint)this.redraw()},isc.A.setHintStyle=function isc_FormItem_setHintStyle(_1){if(!this.$712()&&this.getHint()){var _2=this.$59t();if(_2)_2.className=_1}},isc.A.$66t=function isc_FormItem__showInFieldHint(){if(!this.$66u){var _1=this.getDataElement();if(_1){_1.className=this.$66v();if(this.isA.TextItem){this.$857=_1.type;_1.type="text"}}else{var _2=this.$15h();if(_2!=null){_2.className=this.$66v()}}
var _3=this.getHint();if(_3)_3=_3.unescapeHTML();this.setElementValue(_3);this.$66u=true}},isc.A.$66s=function isc_FormItem__hideInFieldHint(_1){if(this.$66u){var _2=this.getDataElement();if(_2){_2.className=this.getTextBoxStyle();if(this.$857){_2.type=this.$857;delete this.$857}}else{var _3=this.$15h();if(_3!=null){_3.className=this.getTextBoxStyle()}}
if(!_1)this.setElementValue(isc.emptyString);this.$66u=false}},isc.A.$66v=function isc_FormItem__getInFieldHintStyle(){var _1=this.showRTL&&this.isRTL();if(this.showDisabled&&this.isDisabled()){return this.textBoxStyle+(_1?"DisabledHintRTL":"DisabledHint")}else{return this.textBoxStyle+(_1?"HintRTL":"Hint")}},isc.A.$712=function isc_FormItem__getShowHintInField(){return false},isc.A.getDefaultValue=function isc_FormItem_getDefaultValue(){if(this.defaultDynamicValue){this.convertToMethod("defaultDynamicValue");var _1=this,_2=this.form,_3=this.form.getValues();return this.defaultDynamicValue(_1,_2,_3)}
return this.defaultValue},isc.A.setToDefaultValue=function isc_FormItem_setToDefaultValue(){return this.clearValue()},isc.A.isSetToDefaultValue=function isc_FormItem_isSetToDefaultValue(){return(this.$14u==true)},isc.A.updateValue=function isc_FormItem_updateValue(){if(this.$149z!=null)delete this.$149z;if(this.$1441)return;if(!this.hasElement()||this.getDataElement()==null)return;var _1=this.getElementValue();return this.$10y(_1)},isc.A.$10y=function isc_FormItem__updateValue(_1){if(this.$17k){_1=this.$17l(_1)}
_1=this.mapDisplayToValue(_1);return this.storeValue(_1)},isc.A.storeValue=function isc_FormItem_storeValue(_1,_2){if(this.compareValues(_1,this._value)){return true}
if(this.$17m){if(this.compareValues(_1,this.$17n)){return true}}
var _3=this.handleChange(_1,this._value);if(!_3)return false;if(this.destroyed)return;_1=this.$17n;this.updateAppearance(_1);if(!this.compareValues(_1,this._value)){if(!(this._value==null&&_1&&_1==this.emptyDisplayValue))
this.saveValue(_1)}
delete this.$17n;this.handleChanged(this._value);if(_2)this.$124t(_1);return _3},isc.A.handleChanged=function isc_FormItem_handleChanged(_1){if(this.form.rulesEngine!=null){this.form.rulesEngine.processChanged(this.form,this)}
if(this.changed)this.changed(this.form,this,_1);if(this.form){if(!this.suppressItemChanged&&this.form.itemChanged!=null)
this.form.itemChanged(this,_1);this.checkForImplicitSave()}},isc.A.checkForImplicitSave=function isc_FormItem_checkForImplicitSave(){if(this.getImplicitSave()){var _1=this;this.form.$95x(this);this.form.awaitingImplicitSave=true;this.form.fireOnPause("fiImplicitSave",function(){if(_1.form.awaitingImplicitSave){_1.form.performImplicitSave(_1,true)}},this.form.implicitSaveDelay)}},isc.A.updateAppearance=function isc_FormItem_updateAppearance(_1){if(this.valueIcons||this.getValueIcon){this.$17j(_1)}},isc.A.getValue=function isc_FormItem_getValue(){if(this.destroyed||this.destroying)return;var _1;if(this._value!==_1){return this._value}
return this.form.getSavedItemValue(this)},isc.A.getElementValue=function isc_FormItem_getElementValue(){if(this.$66u)return null;var _1=this.getDataElement();if(!_1)return null;var _2="";if(this.$105m&&_1.files&&_1.files.length>1){for(var i=0;i<_1.files.length;i++){if(_2!="")_2+=this.multipleValueSeparator;_2+=_1.files[i].name}}else{_2=_1.value}
return _2},isc.A.resetValue=function isc_FormItem_resetValue(){var _1=this.form.$10s[this.getFieldName()];this.setValue(_1)},isc.A.shouldSubmitValue=function isc_FormItem_shouldSubmitValue(){return this.form.$11q()},isc.A.setCanEdit=function isc_FormItem_setCanEdit(_1){var _2=!this.isReadOnly();this.canEdit=_1;var _3=!this.isReadOnly();if(_2!=_3){this.updateCanEdit();if(this.canEditChanged)this.canEditChanged(_1);this.redraw()}},isc.A.renderAsStatic=function isc_FormItem_renderAsStatic(){return this.getCanEdit()==false&&this.getReadOnlyDisplay()=="static"},isc.A.renderAsReadOnly=function isc_FormItem_renderAsReadOnly(){return this.getCanEdit()==false&&this.getReadOnlyDisplay()=="readOnly"},isc.A.renderAsDisabled=function isc_FormItem_renderAsDisabled(){return this.getCanEdit()==false&&this.getReadOnlyDisplay()=="disabled"},isc.A.getCanEdit=function isc_FormItem_getCanEdit(){return!this.isReadOnly()},isc.A.updateCanEdit=function isc_FormItem_updateCanEdit(){if(this.isDisabled())return;var _1=this.isReadOnly();this.setElementReadOnly(_1);this.$177();this.$17j(this.getValue());this.updateState();if(this.canEditChanged)this.canEditChanged(this.canEdit)},isc.A.setElementReadOnly=function isc_FormItem_setElementReadOnly(_1){if(this.hasDataElement())this.redraw()},isc.A.$86y=function isc_FormItem__setElementReadOnly(_1){if(this.hasDataElement()){var _2=this.getDataElement();if(_2){if(!_1&&!_2.readOnly){_2.disabled=_1}else{_2.readOnly=_1;if(isc.screenReader){if(_2.setAttribute)_2.setAttribute("aria-readonly","true")}}
_2.tabIndex=this.$154()}}else if(this.$kk()){var _2=this.getFocusElement();if(_2)_2.tabIndex=this.$154()}},isc.A.isReadOnly=function isc_FormItem_isReadOnly(){var _1=this.form;var _2=this;while(_2.parentItem){if(_2.canEdit!=null)return!_2.canEdit;_2=_2.parentItem}
return!isc.DynamicForm.canEditField(_2,_1)},isc.A.isEditable=function isc_FormItem_isEditable(){return true},isc.A.getCriteriaFieldName=function isc_FormItem_getCriteriaFieldName(){var _1=this.criteriaField||this.includeFrom||this.getDataPath()||this.getFieldName();if(this.form.dataPath!=null){_1=this.form.$840(_1);if(_1.endsWith("/"))_1=_1.substring(0,_1.length-1)}
return _1},isc.A.getCriteriaValue=function isc_FormItem_getCriteriaValue(){if(this.canEditOpaqueValues){var _1=isc.SimpleType.getType(this.type);if(_1&&_1.getAtomicValue){return _1.getAtomicValue(this.getValue(),"criteria")}}else{return this.getValue()}},isc.A.hasAdvancedCriteria=function isc_FormItem_hasAdvancedCriteria(){var _1=[null,undefined].contains(this._value)?null:this._value;return this.$122s||(_1!=null&&(this.operator!=null||this.$85m()))},isc.A.$85m=function isc_FormItem__shouldAllowExpressions(){var _1=isc.isA.TextItem(this)||isc.isA.TextAreaItem(this)||isc.isA.CanvasItem(this)||isc.isA.ContainerItem(this)||isc.isA.DateItem(this);if(!_1)return false;_1=this.allowExpressions;if(_1==null)_1=this.form.allowExpressions;return _1},isc.A.getOperator=function isc_FormItem_getOperator(_1,_2){var _3;if(this.operator){_3=this.operator}else if(_2){_3="inSet"}else{var _4=this.getType();if(this.valueMap||this.optionDataSource||isc.SimpleType.inheritsFrom(_4,"enum")||isc.SimpleType.inheritsFrom(_4,"boolean")||isc.SimpleType.inheritsFrom(_4,"float")||isc.SimpleType.inheritsFrom(_4,"integer")||isc.SimpleType.inheritsFrom(_4,"time"))
{_3="equals"}else{if(_1==null)_1="substring";var _5=this.form.defaultSearchOperator||(this.form.allowExpressions?"iContainsPattern":"iContains");_3=isc.DataSource.getCriteriaOperator(null,_1,_5)}}
return _3},isc.A.canEditCriterion=function isc_FormItem_canEditCriterion(_1,_2){var _3=this.getOperator(null,isc.isAn.Array(_1.value));if(_1.fieldName!=null&&_1.fieldName==this.getCriteriaFieldName()&&_1.operator==_3)
{return true}
if(this.$85m()){var _4=isc.DS.getCriteriaFields(_1,this.form.expressionDataSource||this.form.dataSource,true);return _4.contains(this.getCriteriaFieldName())}else{var _5=isc.DS.isAdvancedCriteria(_1);if(this.multiple&&_5&&_1.operator=="or"){return true}}
return false},isc.A.canEditSimpleCriterion=function isc_FormItem_canEditSimpleCriterion(_1){var _2=this.getCriteriaFieldName();return _2==_1},isc.A.setSimpleCriterion=function isc_FormItem_setSimpleCriterion(_1,_2){this.setValue(_1)},isc.A.getCriterion=function isc_FormItem_getCriterion(_1){var _2=this.getCriteriaValue();if(_2==null||isc.is.emptyString(_2))return;if(isc.isAn.Array(_2)){var _3=_2.getUniqueItems();if(_2.length==0||(_3.length==1&&isc.isA.String(_2[0])&&isc.is.emptyString(_2[0])))return}
var _4=this.getOperator(_1,isc.isAn.Array(_2)),_5=this.getCriteriaFieldName();var _6={fieldName:_5,operator:_4,value:_2};if(this.$85m()){var _7=this.parseValueExpressions(_2,_5,_4);if(_7!=null)_6=_7}
return _6},isc.A.setCriterion=function isc_FormItem_setCriterion(_1){var _2=this.$85m(),_3=_1?_1.value:null;if(_2){_3=this.buildValueExpressions(_1)}else{if(this.multiple){var _4=isc.DS.isAdvancedCriteria(_1);if(_4&&_1.operator=="or"){var _5=[],_6=_1.criteria,_7=this.getCriteriaFieldName(),_8=_6[0]?_6[0].operator:null,_9=false;for(var i=0;i<_6.length;i++){var _11=_6[i];if(_11.criteria||_11.fieldName!=_7||_11.operator!=_8)
{_9=true;break}
_5.add(_11.value)}
if(!_9)_3=_5}}}
this.setValue(_3)},isc.A.$1156=function isc_FormItem__getTextBoxScrollWidth(_1){return _1.scrollWidth},isc.A.valueClipped=function isc_FormItem_valueClipped(){var _1;return(this.clipValue&&(_1=this.$15h())!=null&&isc.Element.getClientWidth(_1)<this.$1156(_1))},isc.A.clearErrors=function isc_FormItem_clearErrors(_1){var _2=this.getFieldName();if(_2)this.form.clearFieldErrors(_2,true,_1)},isc.A.setError=function isc_FormItem_setError(_1){var _2=this.getFieldName();if(_2)this.form.setError(_2,_1)},isc.A.hasErrors=function isc_FormItem_hasErrors(){if(this.parentItem!=null)return this.parentItem.hasErrors();var _1=this.getFieldName();if(_1&&this.form)return this.form.hasFieldErrors(_1);var _2=this.getDataPath();if(_2&&this.form)return this.form.hasFieldErrors(_2);return false},isc.A.validate=function isc_FormItem_validate(){var _1=this.hasErrors(),_2=[],_3=null,_4=false;var _5=isc.rpc.startQueue();var _6=this.getValue(),_7=isc.addProperties({},this.form.getValues()),_8={unknownErrorMessage:this.form.unknownErrorMessage,typeValidationsOnly:this.form.validateTypeOnly};var _9=this.form.validateFieldAndDependencies(this,this.validators,_6,_7,_8);var _10=this.name;if(_10==null)_10=this.getDataPath();if(_10==null){this.logWarn("item has no specified name or dataPath - unable to meaningfully store validation errors.")}
if(!_5)isc.rpc.sendQueue();if(_9!=null){if(_9.resultingValue!=null){this.setValue(_9.resultingValue)}
if(!_9.valid){_2=_9.errors[_10];if(_2==null)_2=[]}
_4=_9.stopOnError;_3=_9.errors}
var _11=false;if(_2.length>0||_1){if(_2.length>0){this.form.setFieldErrors(_10,_2,false)}else{this.form.clearFieldErrors(_10,false)}
_11=true;if(_4)this.focusInItem()}
if(_3){for(var _12 in _3){if(_12!=_10){var _13=_3[_12];if((_13!=null&&!isc.isAn.emptyObject(_13))||this.form.hasFieldErrors(_12))
{this.form.setFieldErrors(_12,_13,false);_11=true}}}}
if(_11){this.redraw()}
return(_2.length==0)});isc.evalBoundary;isc.B.push(isc.A.setRequired=function isc_FormItem_setRequired(_1){if(_1==this.required)return;this.required=_1;if(this.form==null)return;if(_1){var _2=this.form.getRequiredValidator(this);this.addValidator(_2)}else{this.removeValidator({type:"required"})}
this.redraw()},isc.A.addValidator=function isc_FormItem_addValidator(_1){if(this.validators==null)this.validators=[];else if(!isc.isAn.Array(this.validators))this.validators=[this.validators];if(this.validators.$69){this.validators=this.validators.duplicate()}
this.validators.add(_1)},isc.A.removeValidator=function isc_FormItem_removeValidator(_1){if(this.validators==null)return;if(!isc.isAn.Array(this.validators))this.validators=[this.validators];if(this.validators.$69){this.validators=this.validators.duplicate()}
var _2=this.validators.find(_1);this.validators.remove(_2)},isc.A.setAutoComplete=function isc_FormItem_setAutoComplete(_1){this.autoComplete=_1;this.$10q()},isc.A.$10q=function isc_FormItem__handleAutoCompleteChange(){var _1=this.$17h();if(isc.Browser.isIE&&this.hasDataElement()){var _2=this.getDataElement();if(_2)_2.autoComplete=(_1=="native"?"":"off")}},isc.A.$17h=function isc_FormItem__getAutoCompleteSetting(){if(this.autoComplete!=null)return this.autoComplete;return this.form.autoComplete},isc.A.autoCompleteEnabled=function isc_FormItem_autoCompleteEnabled(){if(isc.Browser.isSafari)return false;return this.$17h()=="smart"},isc.A.uniqueMatchOnly=function isc_FormItem_uniqueMatchOnly(){if(this.uniqueMatch!=null)return this.uniqueMatch;return this.form.uniqueMatch},isc.A.getCandidates=function isc_FormItem_getCandidates(){var _1=this.autoCompleteCandidates;if(_1==null){var _2=this.getValueMap();if(_2!=null){if(isc.isAn.Array(_2))_1=_2;else _1=isc.getValues(_2)}else if(this.form.grid){var _3=this.form.grid.data;if(isc.isA.ResultSet!=null&&isc.isA.ResultSet(_3))_1=_3.getValuesList(this.name);else _1=_3.getProperty(this.name)}}
if(_1!=null)_1=_1.getUniqueItems();return _1},isc.A.getCompletion=function isc_FormItem_getCompletion(_1){if(_1==null)return;var _2=this.getCandidates();if(_2==null||_2.length==0)return;var _3=_1.toUpperCase(),_4=this.uniqueMatchOnly(),_5;for(var i=0;i<_2.length;i++){var _7=_2[i],_8=_7!=null?_7.toUpperCase():null;if(_8==_3)return null;if(isc.startsWith(_8,_3)){if(!_4)return _7;if(_5!=null)return null;_5=_7}}
return _5},isc.A.showCompletion=function isc_FormItem_showCompletion(_1){this.clearCompletion();if(!this.canAutoComplete||!this.hasDataElement()||!this.autoCompleteEnabled())return;var _2=isc.EH.lastEvent.keyName;if(_2=="Backspace"||_2=="Delete")return;var _3=this.getCompletion(_1);if(_3==null){return}
this.form.$106();this.form.$11b(this);this.setElementValue(_1+_3.substring(_1.length));this.$17o=_1;this.$17k=_3;if(this.getClass().isMethodSupported(this.$146q)){this.setSelectionRange(_1.length,_3.length)}},isc.A.$17l=function isc_FormItem__handleChangeWithCompletion(_1){var _2=this.$17k,_3=isc.EH.lastEvent.keyName;if(this.$14m[_3]==true){this.acceptCompletion(_3==this.$10j);return _2}
var _4=_2.substring(this.$17o.length);if(!_1.endsWith(_4)){this.clearCompletion();return _1}
if(this.getSelectedText()==_4){return this.$17o}
this.clearCompletion();return _1},isc.A.clearCompletion=function isc_FormItem_clearCompletion(){delete this.$17k;delete this.$17o},isc.A.acceptCompletion=function isc_FormItem_acceptCompletion(_1){var _2=this.$17k;if(!_2)return;if(this.autoCompleteEnabled()){var _3=_1?[_2.length,_2.length]:null;if(this.getElementValue()!=_2){if(!_1&&this.getClass().isMethodSupported(this.$146r)){_3=this.getSelectionRange()}
this.setElementValue(_2)}
if(this.hasFocus&&_3&&this.getClass().isMethodSupported(this.$146q)){this.setSelectionRange(_3[0],_3[1])}}
this.clearCompletion()},isc.A.setSelectionRange=function isc_FormItem_setSelectionRange(_1,_2){if(!isc.isA.TextItem(this)&&!isc.isA.TextAreaItem(this))return;if(!this.isDrawn())return;if(!isc.isA.Number(_1))_1=0;if(!isc.isA.Number(_2))_2=0;if(_1>_2){var _3=_2;_2=_1;_1=_3}
var _4=this.getDataElement();if(_4==null)return;if(this.logIsInfoEnabled("nativeFocus")&&!this.$820()){this.logInfo("setSelectionRange() about to change focus "+isc.EH.$lb()+(this.logIsDebugEnabled("traceFocus")?this.getStackTrace():""),"nativeFocus")}
if(isc.Browser.isIE){isc.EH.$904=true;var _5=_4.createTextRange();_5.collapse(true);_5.moveStart(this.$14n,_1);_5.moveEnd(this.$14n,(_2-_1));_5.select();delete isc.EH.$904}else{_4.focus();_4.setSelectionRange(_1,_2)}
if(_2>_1)this.$1161=[_1,_2]},isc.A.selectValue=function isc_FormItem_selectValue(){var _1=this.getElementValue(),_2=isc.isA.String(_1)?_1.length:0;this.setSelectionRange(0,_2)},isc.A.deselectValue=function isc_FormItem_deselectValue(_1){if(!this.hasFocus)return;if(_1)this.setSelectionRange(0,0);else{var _2=this.getElementValue(),_3=isc.isA.String(_2)?_2.length:0;this.setSelectionRange(_3,_3)}},isc.A.getSelectionRange=function isc_FormItem_getSelectionRange(_1){if(!isc.isA.TextItem(this)&&!isc.isA.TextAreaItem(this))return;if(isc.isA.UploadItem(this))return;var _2=this.getDataElement();if(_2==null)return;if(isc.Browser.isIE&&isc.Browser.version<10){if(!this.$820())return null;var _3=this.$17p();if(_3==null)return null;if(isc.isA.TextAreaItem(this)){if(!this.supportsSelectionRange)return null;var _4=_3.duplicate();_4.moveToElementText(_2);var _5=_4.text.length;_4.setEndPoint(this.$119o,_3);var i=_5-_4.text.length;return[i,i+_3.text.length]}else{var _7=[],_4=_2.createTextRange();if(_4==null)return null;if(_4.compareEndPoints(this.$14o,_3)==0){_7[1]=_4.text.length}else{_4.setEndPoint(this.$14o,_3);_7[1]=_4.text.length}
_4.setEndPoint(this.$14p,_3);_7[0]=_4.text.length;return _7}}else if(isc.Browser.isMoz||isc.Browser.isSafari||isc.Browser.isOpera||isc.Browser.isIE){return[_2.selectionStart,_2.selectionEnd]}},isc.A.$820=function isc_FormItem__hasNativeFocus(){var _1=this.getFocusElement(),_2=this.getActiveElement();return(_1==_2)},isc.A.getSelectedText=function isc_FormItem_getSelectedText(){if(!isc.isA.TextItem(this)&&!isc.isA.TextAreaItem(this)){return}
if(isc.Browser.isIE){var _1=this.$17p();if(_1)return _1.text}else if(isc.Browser.isMoz||isc.Browser.isSafari){var _2=this.getElement();if(_2!=null){return _2.value.substring(_2.selectionStart,_2.selectionEnd)}}},isc.A.$100a=function isc_FormItem__IESelectionStuck(){if(!isc.Browser.isIE)return false;try{var _1=document.selection?document.selection.typeDetail:null}catch(e){this.logDebug("Internet explorer native 'stuck focus' state detected");return true}
return false},isc.A.$17p=function isc_FormItem__getIESelectionRange(){if(!isc.Browser.isIE)return;if(isc.isA.TextAreaItem(this)&&!this.supportsSelectionRange)return null;var _1=this.getDocument().selection,_2=(_1!=null?_1.createRange():null);if(_2!=null&&_2.parentElement().id==this.getDataElementId())return _2;return null},isc.A.rememberSelection=function isc_FormItem_rememberSelection(_1){if(!this.isDrawn()||!this.getClass().isMethodSupported(this.$146r))return;if(!isc.isA.TextItem(this)&&!isc.isA.TextAreaItem(this))return;var _2=this.getElementValue();if(_2==isc.emptyString)return;this.$17q=_2;var _3=this.getSelectionRange(_1);if(_3){this.$17r=_3[0];this.$17s=_3[1]}},isc.A.resetToLastSelection=function isc_FormItem_resetToLastSelection(_1){if(!this.isDrawn()||this.$17r==null)return;var _2,_3=this.getElementValue(),_4=this.$17q;if(!_1)_2=(_3==_4);else{_2=true;if(this.$17r==0&&this.$17s==_4.length){this.$17s=_3.length}else{if(_3.toLowerCase()!=_4.toLowerCase()){this.$17r=this.$17s=_3.length}}}
if(_2&&this.getClass().isMethodSupported(this.$146q)){this.setSelectionRange(this.$17r,this.$17s)}
delete this.$17r;delete this.$17s;delete this.$17q},isc.A.handleChange=function isc_FormItem_handleChange(_1,_2){var _3=this.form.getFieldErrors(this.name);if(this.$17m&&this.compareValues(_1,this.$17n))return true;this.$17m=true;this.$17n=_1;var _4=_1;if(isc.isA.Date(_4))_4=_4.duplicate();else if(isc.isAn.Array(_4))_4=_4.duplicate();else if(isc.isAn.Object(_4))_4=isc.addProperties({},_4);if(this.transformInput){_1=this.transformInput(this.form,this,_1,_2)}
var _5=this.hasErrors(),_6=false,_7=[],_8=null,_9,_10;this.$17g=false;var _11=this.$1490(_1,_2);if(_11!=_1){_1=_11;_6=(_1==_2)}
if(!_6){var _12=isc.rpc.startQueue();var _13=isc.addProperties({},this.form.values),_14={unknownErrorMessage:this.form.unknownErrorMessage,changing:true},_10=this.form.validateFieldAndDependencies(this,this.validators,_1,_13,_14);if(!_12)isc.rpc.sendQueue();var _15=false;if(_10!=null){_15=!_10.valid;if(_10.resultingValue!=null){_9=_10.resultingValue}
if(!_10.valid){_7=_10.errors[this.name];if(_7==null)_7=[]}
_8=_10.errors}
var _16;if(_15&&_9===_16&&this.$65v())
{_6=true;_9=_2;if(_2==null)_9=null}
if(_9!==_16)_1=_9;var _17;if(_15){if(!isc.isAn.Array(_3)){_3=_3==null?[]:[_3]}
var _18=_7;if(!isc.isAn.Array(_18)){_18=[_18]}
var _17=_18.length!=_3.length;if(!_17){for(var i=0;i<_3.length;i++){if(!_18.contains(_3[i])){_17=true;break}}}
if(_17){this.clearErrors(true);this.setError(_7)}}else if(_10!=null&&_5){_17=true;this.clearErrors(true)}
this.$17g=false;if((!_15||this.changeOnError)){if(this.change!=null){if(this.change(this.form,this,_1,_2)==false){_1=_2;_6=true}}
if(this.destroyed)return;if(!_6&&this.form&&this.form.itemChange!=null){if(this.form.itemChange(this,_1,_2)==false){_1=_2;_6=true}}}}
var _20=this.$17g;var _21=!this.compareValues(_1,_4);if((_6||_21)&&!_20)
{this.setValue(_1,null,true,_6);if(_6&&this.maintainSelectionOnTransform){this.$17t()}}
if(this.$17g)this.$17n=this._value;if(this.redrawOnChange||_17){this.redraw()}
if(_8){for(var _22 in _8){if(_22!=this.name){this.form.setFieldErrors(_22,_8[_22],true)}}}
if(!_6&&this.hasFocus)this.showCompletion(_1);delete this.$17m;return(!_6)},isc.A.$1490=function isc_FormItem__enforceLengthOnEdit(_1,_2){if(this.length!=null&&_1!=null&&isc.isA.String(_1)&&_1.length>this.length)
{var _3=_2!=null&&isc.isA.String(_2)&&_2.length==this.length;if(_3){_1=_2}else{_1=_1.substring(0,this.length)}}
return _1},isc.A.$65v=function isc_FormItem__rejectInvalidValueOnChange(){return(this.rejectInvalidValueOnChange!=null)?this.rejectInvalidValueOnChange:this.form.rejectInvalidValueOnChange},isc.A.compareValues=function isc_FormItem_compareValues(_1,_2){var _3=isc.DynamicForm.compareValues;if(this.multiple){if(!(_1==null||isc.isAn.Array(_1))){if(!this.$105m)this.logWarn("compareValues - this is a multiple FormItem but compareValues was called with a non-null first argument `value1` that is not an array.");_1=[_1]}
if(!(_2==null||isc.isAn.Array(_2))){if(!this.$105m)this.logWarn("compareValues - this is a multiple FormItem but compareValues was called with a non-null second argument `value2` that is not an array.");_2=[_2]}
if(_1==null&&_2==null){return true}else if(_1==null||_2==null){return false}
if(_1.length!=_2.length){return false}
var i=0,_5=_1.length;while(i<_5&&_3(_1[i],_2[i])){++i}
return(i==_5)}
return _3(_1,_2)},isc.A.elementChanged=function isc_FormItem_elementChanged(){var _1=(isc.EH.$lc!=null);if(!_1)isc.EH.$h1("ICHG");this.logDebug("native change");if(isc.Log.supportsOnError){this.updateValue()}else{try{this.updateValue()}catch(e){isc.Log.$am(e)}}
if(!_1)isc.EH.$h2();return true},isc.A.$680=function isc_FormItem__handleInactiveEditorEvent(_1,_2,_3){if(this.logIsDebugEnabled("inactiveEditorHTML")){this.logDebug("handling inactive editor event:"+_1+", inactive context:"+this.echo(_2),"inactiveEditorHTML")}
var _4=this.$683[_1];if(_4==null){_4=this.$683[_1]="inactiveEditor"+_1.substring(0,1).toUpperCase()+_1.substring(1)}
if(this[_4]!=null){return this[_4](_2,_3)}},isc.A.$17u=function isc_FormItem__fireStandardHandler(_1){this.convertToMethod(_1);return this[_1](this.form,this,isc.EH.lastEvent)},isc.A.handleTitleClick=function isc_FormItem_handleTitleClick(){if(this.isDisabled())return;if(this.editingOn){this.editClick();this.handleClick();return false}
return this.$17u("titleClick")},isc.A.handleTitleDoubleClick=function isc_FormItem_handleTitleDoubleClick(){if(this.isDisabled())return;return this.$17u("titleDoubleClick")},isc.A.handleClick=function isc_FormItem_handleClick(){if(this.editingOn){isc.EditContext.selectCanvasOrFormItem(this,true);return false}
if(this.isDisabled())return;return this.$17u("click")},isc.A.handleDoubleClick=function isc_FormItem_handleDoubleClick(){if(this.isDisabled())return;return this.$17u("doubleClick")},isc.A.handleCellClick=function isc_FormItem_handleCellClick(){if(this.isDisabled())return;return this.$17u("cellClick")},isc.A.handleCellDoubleClick=function isc_FormItem_handleCellDoubleClick(){if(this.isDisabled())return;return this.$17u("cellDoubleClick")},isc.A.$12z=function isc_FormItem__handleElementChanged(){return this.form.elementChanged(this.getID())},isc.A.handleMouseMove=function isc_FormItem_handleMouseMove(){var _1=isc.EH.lastEvent.itemInfo;if(!this.isDisabled()&&(this.showValueIconOver||this.showValueIconDown)){var _2=(_1.overElement||_1.overTextBox||_1.overControlTable),_3=this.$15t;if(_2){if(this.$j6&&this.showValueIconDown){if(_3!=this.$13v){this.$15t=this.$13v;this.$17j(this.getValue())}}else if(this.showValueIconOver&&_3!=this.$13u){this.$15t=this.$13u;this.$17j(this.getValue())}}else{var _4=(this.showValueIconFocused&&this.showValueIconOver&&this.hasFocus)?this.$13u:null;if(_3!=_4){this.$15t=_4;this.$17j(this.getValue())}}}
if(this.$17u("mouseMove")==false)return false;if(_1&&(_1.overElement||_1.overTextBox)){if(!this.$142q){if(this.handleTextBoxOver()==false)return false}
if(this.handleTextBoxMove()==false)return false}else if(this.$142q){this.handleTextBoxOut()}},isc.A.handleMouseOver=function isc_FormItem_handleMouseOver(){isc.Hover.setAction(this,this.$wb,null,this.$17v());return this.$17u("mouseOver")},isc.A.handleMouseOut=function isc_FormItem_handleMouseOut(){var _1=(this.showValueIconFocused&&this.showValueIconOver&&this.hasFocus)?this.$13u:null;if(this.$15t!=_1){this.$15t=_1;this.$17j(this.getValue())}
this.stopHover();var _2=this.$17u("mouseOut");if(this.$142q){var _3=this.handleTextBoxOut();_2=_3==null?_2:(_2&&_3)}
return _2},isc.A.handleMouseDown=function isc_FormItem_handleMouseDown(){var _1=isc.EH.lastEvent.itemInfo,_2=_1.inactiveContext;if(_2!=null){return this.form.bubbleInactiveEditorEvent(this,"mouseDown",_1)}
if(!this.isDisabled()&&this.showValueIconDown){var _3=(_1.overElement||_1.overTextBox||_1.overControlTable);if(_3){this.$15t=this.$13v;this.$j6=true;isc.Page.setEvent(isc.EH.MOUSE_UP,this,isc.Page.FIRE_ONCE,"$17w");this.$17j(this.getValue())}}
if(this.mouseDown)return this.$17u("mouseDown")},isc.A.stopHover=function isc_FormItem_stopHover(){isc.Hover.clear()},isc.A.$17w=function isc_FormItem__clearMouseDown(){this.$j6=null;if(this.$15t==this.$13v){this.$15t=this.showValueIconOver?this.$13u:null;this.$17j(this.getValue())}},isc.A.handleMouseStillDown=function isc_FormItem_handleMouseStillDown(_1){if(this.mouseStillDown){return this.$17u("mouseStillDown")}},isc.A.$17v=function isc_FormItem__getHoverDelay(){return this.hoverDelay!=null?this.hoverDelay:this.form.itemHoverDelay},isc.A.handleTitleMove=function isc_FormItem_handleTitleMove(){return this.$17u("titleMove")},isc.A.handleTitleOver=function isc_FormItem_handleTitleOver(){isc.Hover.setAction(this,this.$17x,null,this.$17v());return this.$17u("titleOver")},isc.A.handleTitleOut=function isc_FormItem_handleTitleOut(){this.stopHover();return this.$17u("titleOut")},isc.A.handleTextBoxMove=function isc_FormItem_handleTextBoxMove(){return this.$17u("textBoxMove")},isc.A.handleTextBoxOver=function isc_FormItem_handleTextBoxOver(){isc.Hover.setAction(this,this.$1149,null,this.$17v());this.$142q=true;return this.$17u("textBoxOver")},isc.A.handleTextBoxOut=function isc_FormItem_handleTextBoxOut(){this.stopHover();this.$142q=false;return this.$17u("textBoxOut")},isc.A.$121=function isc_FormItem__iconFocus(_1,_2){var _3=this.getIcon(_1);if(_3!=null){var _4=(_3.prompt!=null?_3.prompt:this.iconPrompt)
window.status=_4;if(this.$54o(_3)){this.$164(_3,false,true)}
else if(this.$165(_3))this.$164(_3,true)}
return this.$12v(_2,this)},isc.A.$123=function isc_FormItem__iconBlur(_1,_2){var _3=this.getIcon(_1);if(_3!=null){window.status="";var _4=this.$54o(_3),_5=_3.showFocusedWithItem!=false,_6=this.showIconsOnFocus;if(_4&&(!_6||!_5)){this.$164(_3,false,false)}
if(this.$165(_3))this.$164(_3,false,false)}
return this.$12x(_2,this)},isc.A.$113=function isc_FormItem__iconMouseOver(_1){if(_1==this.errorIconName)return this.$17y();var _2=this.getIcon(_1);if(_2!=null){if(this.$165(_2))this.$164(_2,true);this.$17z=_2;isc.Hover.setAction(this,this.$170,null,this.$17v());var _3=(_2.prompt!=null?_2.prompt:this.iconPrompt)
window.status=_3;return true}},isc.A.$114=function isc_FormItem__iconMouseOut(_1){if(_1==this.errorIconName)return this.$171();var _2=this.getIcon(_1);if(_2!=null){window.status="";if(this.$165(_2))this.$164(_2,false);delete this.$17z;isc.Hover.setAction(this,this.$wb,null,this.$17v());return true}},isc.A.$116=function isc_FormItem__iconClick(_1){var _2=this.getIcon(_1);if(_2==null)return;if(this.iconIsDisabled(_2))return;if(_2.click!=null){if(!isc.isA.Function(_2.click)){isc.Func.replaceWithMethod(_2,"click","form,item,icon")}
if(_2.click(this.form,this,_2)==false)return false}
if(_2.pickerIcon&&this.pickerIconClick)this.pickerIconClick(this.form,this,_2);if(this.iconClick)this.iconClick(this.form,this,_2)},isc.A.$172=function isc_FormItem__iconKeyPress(_1){var _2=this.getIcon(_1);if(_2){var _3=isc.EH.getKey(),_4=isc.EH.getKeyEventCharacter();if(_2.keyPress){if(!isc.isA.Function(_2.keyPress)){isc.Func.replaceWithMethod(_2,"keyPress","keyName, character,form,item,icon")}
if(_2.keyPress(_3,_4,this.form,this,_2)==false)
return false}
if(this.iconKeyPress)this.iconKeyPress(_3,_4,this.form,this,_2);if((this.iconClickOnEnter&&_3==this.$10j)||(this.iconClickOnSpace&&_3==this.$304))
{if(this.$116(_2)==false)return false}}},isc.A.$17y=function isc_FormItem__handleErrorIconMouseOver(){isc.Hover.setAction(this,this.$79v,null,this.$17v())},isc.A.$171=function isc_FormItem__handleErrorIconMouseOut(){isc.Hover.setAction(this,this.$wb,null,this.$17v())},isc.A.$79v=function isc_FormItem__handleErrorIconHover(){if(this.itemHover&&this.itemHover(this,this.form)==false)return false;var _1=this.shouldShowErrorIconPrompt()?isc.FormItem.getErrorPromptString(this.$79u):isc.emptyString;if(_1&&!isc.is.emptyString(_1))
isc.Hover.show(_1,this.form.$wc(this));else isc.Hover.setAction(this,this.$wb,null,this.$17v())},isc.A.$wb=function isc_FormItem__handleHover(_1){if(this.itemHover&&this.itemHover(this,this.form)==false)return false;var _2;if(this.itemHoverHTML)_2=this.itemHoverHTML(this,this.form);else _2=this.form.itemHoverHTML(this,this.form);this.form.$119(this,_2)},isc.A.$17x=function isc_FormItem__handleTitleHover(_1){if(this.titleHover&&this.titleHover(this,this.form)==false)return false;var _2;if(this.titleHoverHTML)_2=this.titleHoverHTML(this,this.form);else _2=this.form.titleHoverHTML(this,this.form);this.form.$119(this,_2)},isc.A.$1149=function isc_FormItem__handleTextBoxHover(_1){if((this.itemHoverHTML||(this.form.itemHoverHTML!==isc.DynamicForm.$1145))&&!this.valueHover&&this.form.valueHoverHTML===isc.DynamicForm.$1146)
{return this.$wb(_1)}
if(!this.showClippedValueOnHover||!this.valueClipped()){return this.$wb(_1)}
if(this.valueHover&&this.valueHover(this,this.form)==false)return false;var _2;if(this.valueHoverHTML)_2=this.valueHoverHTML(this,this.form);else _2=this.form.valueHoverHTML(this,this.form);this.form.$119(this,_2)},isc.A.$170=function isc_FormItem__handleIconHover(){if(this.itemHover&&this.itemHover(this,this.form)==false)return false;var _1=this.$17z,_2=this.getIconPrompt(_1);if(_2&&!isc.is.emptyString(_2))
isc.Hover.show(_2,this.form.$wc(this));else isc.Hover.setAction(this,this.$wb,null,this.$17v())},isc.A.getGlobalTabIndex=function isc_FormItem_getGlobalTabIndex(){if(this.globalTabIndex==null){if(this.tabIndex==-1)this.globalTabIndex=-1;else{var _1=this.form.getTabIndex(),_2=this.getTabIndex();if(_1==-1)return-1;return(_1+_2)}}
return this.globalTabIndex},isc.A.getTabIndex=function isc_FormItem_getTabIndex(){if(this.tabIndex!=null)return this.tabIndex;if(this.globalTabIndex||!this.$kk())return null;if(this.$10p==null){this.form.$10o()}
return this.$10p},isc.A.setGlobalTabIndex=function isc_FormItem_setGlobalTabIndex(_1){this.globalTabIndex=_1;this.$173(_1)},isc.A.setTabIndex=function isc_FormItem_setTabIndex(_1){this.globalTabIndex=null;this.tabIndex=_1;this.$173(_1)},isc.A.$154=function isc_FormItem__getElementTabIndex(_1){if(this.isInactiveHTML()||(!_1&&this.isDisabled()))
{return-1}
if(this.$174!=null)return this.$174;return this.getGlobalTabIndex()},isc.A.$173=function isc_FormItem__setElementTabIndex(_1){this.$174=_1;if(!this.$kk()||!this.isDrawn())return;if(this.getFocusElement()!=null){isc.FormItem.setElementTabIndex(this.getFocusElement(),_1);this.$175()}else{this.redraw("set tab index")}},isc.A.updateTabIndex=function isc_FormItem_updateTabIndex(){if(!this.$kk()||!this.isDrawn()||this.isDisabled())return;var _1=this.getGlobalTabIndex();if(this.$174!=_1)this.$173(_1)},isc.A.$16p=function isc_FormItem__getIconTabIndex(_1){if(_1.tabIndex==-1||this.iconIsDisabled(_1))return-1;return this.$154(true)},isc.A.$175=function isc_FormItem__updateIconTabIndices(){var _1=[];_1.addList(this.icons);if(this.$92s())_1.add(this.getPickerIcon());for(var i=0;i<_1.length;i++){var _3=_1[i];if(!_3||_3.imgOnly)continue;var _4=this.$16g(_3);if(_4!=null){isc.FormItem.setElementTabIndex(_4,this.$16p(_3))}}},isc.A.setDisabled=function isc_FormItem_setDisabled(_1){var _2=this.isDisabled();this.disabled=_1;var _3=this.isDisabled();if(_2!=_3)this.updateDisabled()},isc.A.setShowDisabled=function isc_FormItem_setShowDisabled(_1){this.showDisabled=_1;this.updateDisabled()},isc.A.updateDisabled=function isc_FormItem_updateDisabled(){var _1=this.isDisabled();this.$176(!_1);this.$177();this.$17j(this.getValue());if(this.showDisabled)this.updateState()},isc.A.setEnabled=function isc_FormItem_setEnabled(_1){return this.setDisabled(!_1)},isc.A.isDisabled=function isc_FormItem_isDisabled(){if(this.form==null)return this.disabled;var _1=this.disabled||this.renderAsDisabled();if(!_1){if(this.parentItem!=null)_1=this.parentItem.isDisabled();else{_1=this.form.isDisabled();if(!_1&&this.containerWidget!=this.form)_1=this.containerWidget.isDisabled()}}
return _1},isc.A.enable=function isc_FormItem_enable(){this.setDisabled(false)},isc.A.disable=function isc_FormItem_disable(){this.setDisabled(true)},isc.A.$176=function isc_FormItem__setElementEnabled(_1){if(this.hasDataElement()){var _2=this.getDataElement();if(_2){_2.disabled=!_1;_2.tabIndex=this.$154();if(this.useDisabledEventMask()){var _3=this.$43b();if(_3&&(!_3.getAttribute||_3.getAttribute("isDisabledEventMask")!="true"))
{_3=null}
if(_1&&_3){isc.Element.clear(_3)}else if(!_1&&!_3){isc.Element.insertAdjacentHTML(_2,"beforeBegin",this.$148())}}}}else if(this.$kk()){var _2=this.getFocusElement();if(_2)_2.tabIndex=this.$154()}},isc.A.$177=function isc_FormItem__setIconsEnabled(){if(this.showPickerIcon){var _1=this.getPickerIcon();this.setIconEnabled(_1)}
if(!this.icons||this.icons.length<1)return;for(var i=0;i<this.icons.length;i++){this.setIconEnabled(this.icons[i])}},isc.A.iconIsDisabled=function isc_FormItem_iconIsDisabled(_1){_1=this.getIcon(_1);if(!_1)return;if(this.containerWidget&&this.containerWidget.isDisabled())return true;if(_1.neverDisable)return false;if(this.isDisabled())return true;var _2=_1.disableOnReadOnly;if(_2==null){_2=this.disableIconsOnReadOnly}
if(_2)return this.isReadOnly();return false},isc.A.$kk=function isc_FormItem__canFocus(){if(this.canFocus!=null)return this.canFocus;return this.hasDataElement()},isc.A.$872=function isc_FormItem__canFocusInTextBox(){return this.$kk()},isc.A.getCanFocus=function isc_FormItem_getCanFocus(){return this.$kk()},isc.A.$884=function isc_FormItem__shouldSelectOnFocus(){var _1=this.selectOnFocus;if(_1==null&&this.form)_1=this.form.selectOnFocus;var _2=this.selectOnClick;if(_2==null&&this.form)_2=this.form.selectOnClick;if(_2)_1=true;if(_1){var _3=isc.EH.isMouseEvent();if(_3&&!_2)_1=false}
return _1},isc.A.focusInItem=function isc_FormItem_focusInItem(){var _1=this.isVisible()&&this.$kk()&&!this.isDisabled(),_2=_1?this.getFocusElement():null;if(!_1||!_2){return}
if(_2.focus){var _3=false;if(this.$100a()){try{document.selection.clear()}catch(e){this.logInfo("Internet explorer error calling document.selection.clear()."+e.message)}
this.logDebug("focusInItem(): Internet Explorer selection is currently wedged due to a native bug tripped by synchronous focus manipulation and redraw. Explicitly clearing selection before resetting native focus.","nativeFocus")}else if(isc.Browser.isIE&&_2==this.getActiveElement()){_3=true}
if(!_3){this.logInfo("about to call element.focus() "+isc.EH.$lb()+(this.logIsDebugEnabled("traceFocus")?this.getStackTrace():""),"nativeFocus");isc.FormItem.$12n(this);isc.EventHandler.$lg=this;_2.focus()}else{this.logInfo("element already focused, not focus()ing","nativeFocus")}
if(isc.Browser.isIE){isc.EH.$vm=this;this.$167=_2}}else{this.logInfo("can't call element focus, no element","nativeFocus")}
var _4=this.$884();if(this.$93l)_4=false;if(_4&&_2.select)_2.select()});isc.evalBoundary;isc.B.push(isc.A.blurItem=function isc_FormItem_blurItem(){if(!this.isVisible()||!(this.hasFocus||isc.EH.$vm==this))return;var _1=this.$166();if(_1&&_1.blur){this.logInfo("about to call element blur"+isc.EH.$lb()+(this.logIsDebugEnabled("traceBlur")?this.getStackTrace():""),"nativeFocus");isc.EH.$ld=this;if(isc.Browser.isIE){try{_1.blur()}catch(e){}}else{_1.blur()}}else{this.logInfo("can't call element blur, no element","nativeFocus")}},isc.A.focusInIcon=function isc_FormItem_focusInIcon(_1){_1=this.getIcon(_1);if(_1==null||_1.imgOnly)return;var _2=this.$16g(_1);if(_2!=null)_2.focus()},isc.A.blurIcon=function isc_FormItem_blurIcon(_1){if(isc.isA.String(_1))_1=this.getIcon(_1);if(_1==null||!this.icons||!this.icons.contains(_1)||_1.imgOnly)return;var _2=this.$16g(_1);if(_2!=null)_2.blur()},isc.A.$12v=function isc_FormItem__nativeElementFocus(_1,_2){if(this.$93l)delete this.$93l;if(isc.EH.$lg==this)delete isc.EH.$lg
isc.EH.$la(this,true);if(isc.Browser.isMoz&&!this.isVisible()){this.logWarn("calling element.blur() to correct focus in hidden item: "+this,"nativeFocus");_1.blur();return}
this.hasFocus=true;this.$167=_1;var _3=this.form.elementFocus(_1,_2);return _3},isc.A.$12x=function isc_FormItem__nativeElementBlur(_1,_2){if(isc.EH.$ld==this)delete isc.EH.$ld
if(this.$17i!=null){isc.Timer.clearTimeout(this.$17i);this.$14r()}
isc.EH.$la(this);this.hasFocus=false;delete this.$167;var _3=this.form.elementBlur(_1,_2);return _3},isc.A.elementFocus=function isc_FormItem_elementFocus(_1){if(this.prompt)this.form.showPrompt(this.prompt);if(this.showIconsOnFocus&&this.showIcons){this.showAllIcons(true)}else{if(this.icons)this.updateIconsForFocus(this.icons,true)}
if(this.formatOnBlur){var _2=this.getDisplayValue()}
if(this.showFocusedPickerIcon&&this.$92s()){var _3=this.getPickerIcon();if(_3)this.updateIconsForFocus(_3,true)}
if(this.showFocused)this.updateState();if(this.showValueIconFocused&&this.showValueIconOver&&this.$15t==null){this.$15t=this.$13u;this.$17j(this.getValue())}
if(_1)return;if((this.grid&&this.grid.blockOnFieldBusy(this))||(!this.grid&&this.form.blockOnFieldBusy(this)))
{return false}
this.handleEditorEnter()
if(this.focus){this.convertToMethod("focus");return this.focus(this.form,this)}
return true},isc.A.updateIconsForFocus=function isc_FormItem_updateIconsForFocus(_1,_2){if(_1==null)return;_2=!!_2;if(!isc.isAn.Array(_1))_1=[_1];for(var i=0;i<_1.length;i++){if(this.$54o(_1[i],true)){var _4=this.$16v(_1[i]);if(_4!=null){isc.Canvas.$wg(_4,this.getIconURL(_1[i],false,null,_2));var _5=this.getIconStyle(_1[i],false,null,_2);if(_5!=null)_4.className=_5}}}},isc.A.elementBlur=function isc_FormItem_elementBlur(){if(this.prompt)this.form.clearPrompt();if(this.showIconsOnFocus&&this.showIcons){if(this.$161==null){this.$161=this.delayCall("hideAllIcons",[],0)}}else if(this.hideIconsOnKeypress&&this.showIcons){this.showAllIcons()}else{if(this.icons)this.updateIconsForFocus(this.icons,false)}
if(this.formatOnBlur){var _1=this.getDisplayValue();this.$952(_1,this._value)}
if(this.showFocusedPickerIcon&&this.$92s()){var _2=this.getPickerIcon();if(_2)this.updateIconsForFocus(_2,false)}
if(this.showFocused){this.updateState()}
if(this.$15t==this.$13u){this.$15t=null
this.$17j(this.getValue())}
this.acceptCompletion();this.checkForEditorExit();if(this.blur){this.convertToMethod("blur");return this.blur(this.form,this)}
return true},isc.A.checkForEditorExit=function isc_FormItem_checkForEditorExit(_1,_2){if(!_1&&!isc.Browser.isIE){isc.FormItem.$92t=this;this.$92u=this.delayCall("checkForEditorExit",[true]);return}
if(_2&&this.$92u!=null){isc.Timer.clearTimeout(this.$92u)}
this.$92u=null;if(isc.FormItem.$92t==this){isc.FormItem.$92t=null}
var _3=this.getActiveElement();if(_3!=null){var _4=isc.DynamicForm._getItemInfoFromElement(_3);if(_4!=null){var _5=_4.item;while(_5){if(_5==this)return;_5=_5.parentItem}}}
this.handleEditorExit()},isc.A.$11s=function isc_FormItem__moveFocusWithinItem(_1){var _2=this.items,_3=this.icons;if(this.$150!=null){_3=[this.$150];_3.addList(this.icons)}
if((_2==null||_2.length==0)&&(_3==null||_3.length==0)){return false}
var _4=this.getFocusIconIndex(true),_5;if(_4==null){var _6=isc.EventHandler.lastEvent.keyTarget;if(_6==this)_5=0;else if(_2){_5=_2.indexOf(_6)}}
if((_5==null||_5==-1)&&_4==null){return false}
if(_1){if(_5!=null&&_2!=null){while(_5<_2.length-1){_5+=1
var _7=_2[_5];if(_7.$kk()){this.logInfo("FormItem.moveFocusWithinItem("+_1+"): Moving to item:"+_7,"syntheticTabIndex");_7.focusInItem();return true}}}
if(_4==null)_4=-1;if(this.canTabToIcons!=false&&this.showIcons&&_3!=null){while(_4<_3.length-1){_4+=1;var _8=_3[_4];if(this.$16f(_8)&&!_8.imgOnly&&_8.tabIndex!=-1){this.logInfo("FormItem.moveFocusWithinItem("+_1+"): Moving to icon:"+this.echo(_8),"syntheticTabIndex");this.focusInIcon(_8);return true}}}
return false}else{if(this.canTabToIcons!=false&&_4!=null){while(_4>0){_4-=1;var _8=_3[_4]
if(this.$16f(_8)&&!this.imgOnly&&_8.tabIndex!=-1){this.logInfo("FormItem.moveFocusWithinItem("+_1+"): Moving to icon:"+this.echo(_8),"syntheticTabIndex");this.focusInIcon(_8);return true}}}
if(_5==null)
_5=_2!=null?_2.length:1;while(_5>0){var _7;_5-=1
if(_2==null){_7=this}else{_7=_2[_5]}
if(_7.$kk()){this.logInfo("FormItem.moveFocusWithinItem("+_1+"): Moving to item:"+_7,"syntheticTabIndex");_7.focusInItem();return true}}
return false}},isc.A.getFocusIconIndex=function isc_FormItem_getFocusIconIndex(_1){var _2=this.$166();var _3;if(_1&&this.$150!=null){_3=[this.$150];_3.addList(this.icons)}else{_3=this.icons}
if(_2==null||_3==null||_3.length==0)return null;for(var i=0;i<_3.length;i++){if(this.$16g(_3[i])==_2)return i}
return null},isc.A.$kr=function isc_FormItem__allowNativeTextSelection(_1,_2){if(_2.overTitle)return;if(_2.overIcon)return false;if(_1==null)_1=isc.EH.lastEvent;if(_1.nativeTarget&&(_1.nativeTarget.tagName.toLowerCase()==this.$54n))
return false;return this.canSelectText!=false},isc.A.handleEditorExit=function isc_FormItem_handleEditorExit(){if(!this.form)return;if(!this.$178)return;this.$178=null;var _1=this.getValue();if(!this.$843)this.$844(_1);if(this.getImplicitSave()&&this.form&&this.form.awaitingImplicitSave&&!this.form.implicitSaveInProgress&&this.$10v()&&this.getImplicitSaveOnBlur()!=false)
{this.form.performImplicitSave(this,false)}
if(this.editorExit)this.editorExit(this.form,this,_1)},isc.A.getImplicitSave=function isc_FormItem_getImplicitSave(){if(this.form==null)return false;return(this.implicitSave!=null?this.implicitSave:this.form.implicitSave)},isc.A.getImplicitSaveOnBlur=function isc_FormItem_getImplicitSaveOnBlur(){if(this.getImplicitSave()==false)return false;return(this.implicitSaveOnBlur!=null?this.implicitSaveOnBlur:this.form.implicitSaveOnBlur)},isc.A.$844=function isc_FormItem__performValidateOnEditorExit(_1){if(this.form==null)return;if(this.validateOnExit||this.form.validateOnExit){if(this.$84r||(this.form.getSaveOperationType&&this.form.getSaveOperationType()!="update")||!this.compareValues(_1,this.$75h))
{this.validate()}
this.$84r=null;this.$75h=null}
var _2=this.form.rulesEngine;if(_2!=null){_2.processEditorExit(this.form,this)}},isc.A.handleEditorEnter=function isc_FormItem_handleEditorEnter(){if(isc.FormItem.$92t!=null){isc.FormItem.$92t.checkForEditorExit(true,true)}
if(this.$178)return;this.$178=true;var _1=this.getValue();if(this.validateOnExit||this.form.validateOnExit)this.$75h=_1;if(this.editorEnter)this.editorEnter(this.form,this,_1);if(this.form.rulesEngine!=null){this.form.rulesEngine.processEditorEnter(this.form,this)}},isc.A.$179=function isc_FormItem__setupFocusCheck(){var _1=this;this.$18a=isc.Page.setEvent(isc.EH.MOUSE_UP,function(){if(!_1.destroyed)_1.$18b()})},isc.A.$18b=function isc_FormItem__checkNativeFocus(){isc.Page.clearEvent(isc.EH.MOUSE_UP,this.$18a);delete this.$18a;if(this.getActiveElement()==document.body){this.focusInItem()}},isc.A.$429=function isc_FormItem__willHandleInput(){return false},isc.A.$43g=function isc_FormItem__handleInput(){isc.EH.$h1("INP");this.$105w();isc.EH.$h2()},isc.A.$105w=function isc_FormItem___handleInput(){if(!this.mask){if(this.changeOnKeypress){if(isc.Log.supportsOnError){this.updateValue()}else{try{this.updateValue()}catch(e){isc.Log.$am(e)}}}else{var _1=this.getElementValue();this.$122m(_1)}}},isc.A.$122m=function isc_FormItem__minimalUpdateValue(_1){var _2=this.$149z;if(_2==null)_2=this._value;var _3=this.$1490(_1,_2);if(_3!=_1){this.setElementValue(_3);if(_3==_2)this.$17t()}
this.$149z=_3},isc.A.$1162=function isc_FormItem__handleSelect(){isc.EH.$h1("SEL");this.$1160();isc.EH.$h2()},isc.A.$43a=function isc_FormItem__nativeCutPaste(_1,_2){if(this.changeOnKeypress)this.$18c()},isc.A.handleKeyPress=function isc_FormItem_handleKeyPress(_1,_2){if(!this.form)return;var _3=this.form.$ne(_1),_4=_1.keyName;if(_3.overIcon){if(this.$172(_3.overIcon)==false)return false}else{if(!this.$429()){if(this.changeOnKeypress)this.$18c();else this.$1491()}else{this.rememberSelectionForUpdate()}
if(this.hideIconsOnKeypress&&!this.$16y&&_4!=this.$jf){this.hideAllIcons()}}
var _5=_1.characterValue;var _6=this.$18d(this,this.form,_4,_5);if(_6!==false&&this.shouldStopKeyPressBubbling(_4,_5)){_6=isc.EH.STOP_BUBBLING}
return _6},isc.A.shouldStopKeyPressBubbling=function isc_FormItem_shouldStopKeyPressBubbling(_1,_2){if(_1=="Tab")return true;var _3=[this.$20w,this.$10j];if(this.stopCharacterKeyPressBubbling&&!isc.EH.ctrlKeyDown()&&!isc.EH.altKeyDown()&&(this.$145b[_1]||(_2!=null&&_2!=0&&(!_3.contains(_1)))))
{return true}
if(this.stopNavKeyPressBubbling&&!isc.EH.altKeyDown()){if(this.$145c[_1]){if(!this.getClass().isMethodSupported(this.$146r))return true;var _4=this.getSelectionRange();if(_4){if(_4[0]==0&&_4[1]==0)return false;return true}}
if(this.$145d[_1]){if(!this.getClass().isMethodSupported(this.$146r))return true;var _4=this.getSelectionRange();if(_4){var _5=this.getElementValue().length;if(_4[0]==_5&&_4[1]==_5)return false;return true}}}},isc.A.$18d=function isc_FormItem__fireKeyPressHandlers(_1,_2,_3,_4){if(this.keyPress!=null&&this.keyPress(_1,_2,_3,_4)==false){return false}
if(!this.form)return false;if(this.$86z!=null&&this.$86z(_1,_2,_3,_4)==false)
{return false}
if(this.parentItem==null&&this.form.itemKeyPress!=null){return this.form.itemKeyPress(_1,_3,_4)}},isc.A.$18c=function isc_FormItem__queueForUpdate(){if(this.$17i!=null){isc.Timer.clearTimeout(this.$17i);this.$14r()}
this.rememberSelectionForUpdate();this.$17i=isc.Timer.setTimeout({target:this,methodName:this.$14q},0)},isc.A.$1491=function isc_FormItem__queueForMinimalUpdate(){if(this.$17i!=null){isc.Timer.clearTimeout(this.$17i);this.$14r()}
if(!this.$1492){this.rememberSelectionForUpdate();this.$1492=isc.Timer.setTimeout({target:this,methodName:this.$149x},0)}},isc.A.$149y=function isc_FormItem__delayedMinimalUpdate(){delete this.$1492;this.$122m(this.getElementValue());this.$18f()},isc.A.rememberSelectionForUpdate=function isc_FormItem_rememberSelectionForUpdate(){if(this.maintainSelectionOnTransform&&(this.$17h()!=this.$14l))
{this.$18e()}},isc.A.$14r=function isc_FormItem__delayedUpdate(){delete this.$17i;this.updateValue();this.$18f()},isc.A.$18e=function isc_FormItem__rememberPreChangeSelection(){if(!this.getClass().isMethodSupported(this.$146r))return;var _1=this.getSelectionRange(true);if(_1){this.$18g=_1[0];this.$18h=_1[1]}},isc.A.$17t=function isc_FormItem__revertToPreChangeSelection(){if(this.$18g==null)return;if(this.getClass().isMethodSupported(this.$146q)){this.setSelectionRange(this.$18g,this.$18h)}},isc.A.$18f=function isc_FormItem__clearPreChangeSelection(){delete this.$18g;delete this.$18h},isc.A.handleKeyDown=function isc_FormItem_handleKeyDown(_1,_2){if(this.dirtyOnKeyDown)this.$18i();var _3=this,_4=this.form,_5=_1.keyName;if(this.keyDown!=null&&this.keyDown(_3,_4,_5)==false)return false},isc.A.$10v=function isc_FormItem__itemValueIsDirty(){return this.$18j==true},isc.A.$18i=function isc_FormItem__markValueAsDirty(){this.$18j=true},isc.A.$10x=function isc_FormItem__markValueAsNotDirty(){this.$18j=false},isc.A.handleKeyUp=function isc_FormItem_handleKeyUp(_1,_2){if(!this.form)return;var _3=this,_4=this.form,_5=_1.keyName;if(this.keyUp!=null&&this.keyUp(_3,_4,_5)==false)return false},isc.A.getSerializeableFields=function isc_FormItem_getSerializeableFields(_1,_2){_1=_1||[];_1.addList(["form"]);return this.Super("getSerializeableFields",[_1,_2],arguments)},isc.A.getLeft=function isc_FormItem_getLeft(){var _1=this.isDrawn()?this.getOuterElement():null;if(_1==null){var _2="getLeft() Unable to determine position for "+(this.name==null?"this item ":this.name)+". ";if(this.isDrawn()){_2+="This method is not supported by items of type "+this.getClass()}else{_2+="Position cannot be determined before the element is drawn"}
_2+=" - returning zero.";this.form.logWarn(_2);return 0}
return this.$18k(_1)},isc.A.getTitleLeft=function isc_FormItem_getTitleLeft(){var _1=this.isDrawn()&&this.form?isc.Element.get(this.form.$427(this)):null;if(_1==null){var _2="getTitleLeft() Unable to determine position for "+(this.name==null?"this item ":this.name)+". ";if(this.isDrawn()){_2+="This method is not supported by items of type "+this.getClass()}else{_2+="Position cannot be determined before the element is drawn"}
_2+=" - returning zero.";this.form.logWarn(_2);return 0}
return this.$18k(_1)},isc.A.$18k=function isc_FormItem__getElementLeft(_1){var _2=_1.offsetParent,_3=this.containerWidget.getClipHandle(),_4=_3.offsetParent,_5=isc.Element.getOffsetLeft(_1);while(_2&&_2!=_3&&_2!=_4){_5+=isc.Element.getOffsetLeft(_2)
_5-=(_2.scrollLeft||0);var _6=parseInt(isc.Element.getComputedStyleAttribute(_2,"borderLeftWidth"));if(isc.isA.Number(_6))_5+=_6;var _7=parseInt(isc.Element.getComputedStyleAttribute(_2,"marginLeft"));if(isc.isA.Number(_7))_5+=_7;_2=_2.offsetParent}
if(_2==_4){_5-=isc.Element.getOffsetLeft(_3)}
return _5},isc.A.$145=function isc_FormItem__isValidIcon(_1){return(_1!=null&&(this.icons&&this.icons.contains(_1)||this.showPickerIcon&&this.getPickerIcon()==_1))},isc.A.getIconLeft=function isc_FormItem_getIconLeft(_1){if(_1==null&&this.icons!=null&&this.icons.getLength()>0)_1=this.icons[0];else if(!this.$145(_1)){this.logWarn("getIconLeft() passed invalid icon:"+isc.Log.echoAll(_1));return null}
var _2=this.$16v(_1);if(_2==null){this.logWarn("getIconLeft() unable to return position of icon - this icon is not currently drawn into the page. Returning null");return null}
return isc.Element.getLeftOffset(_2,this.containerWidget.getClipHandle())},isc.A.getTop=function isc_FormItem_getTop(){var _1=this.isDrawn()?this.getOuterElement():null;if(_1==null){var _2="getTop() Unable to determine position for "+(this.name==null?"this item ":this.name)+". ";if(this.isDrawn()){_2+="This method is not supported by items of type "+this.getClass()}else{_2+="Position cannot be determined before the element is drawn"}
_2+=" - returning zero.";this.form.logWarn(_2);return 0}
var _3=this.$18l(_1);return _3},isc.A.getTitleTop=function isc_FormItem_getTitleTop(){var _1=this.isDrawn()&&this.form?isc.Element.get(this.form.$427(this)):null;if(_1==null){var _2="getTitleTop() Unable to determine position for "+(this.name==null?"this item ":this.name)+". ";if(this.isDrawn()){_2+="This method is not supported by items of type "+this.getClass()}else{_2+="Position cannot be determined before the element is drawn"}
_2+=" - returning zero.";this.form.logWarn(_2);return 0}
return this.$18l(_1)},isc.A.$18l=function isc_FormItem__getElementTop(_1){var _2=this.containerWidget.getClipHandle(),_3=_2.offsetParent,_4=_1.offsetParent,_5=isc.Element.getOffsetTop(_1);while(_4&&_4!=_2&&_4!=_3){_5+=isc.Element.getOffsetTop(_4)
_5-=(_4.scrollTop||0);var _6=(isc.Browser.isMoz?0:(isc.Browser.isIE?parseInt(_4.currentStyle.borderTopWidth):parseInt(isc.Element.getComputedStyleAttribute(_4,"borderTopWidth"))));if(isc.isA.Number(_6))_5+=_6;var _7=(isc.Browser.isIE?parseInt(_4.currentStyle.marginTop):parseInt(isc.Element.getComputedStyleAttribute(_4,"marginTop")));if(isc.isA.Number(_7))_5+=_7;_4=_4.offsetParent}
if(_4==_3){_5-=isc.Element.getOffsetTop(_2)}
return _5},isc.A.getIconTop=function isc_FormItem_getIconTop(_1){if(_1==null&&this.icons!=null&&this.icons.getLength()>0)_1=this.icons[0];else if(!this.$145(_1)){this.logWarn("getIconTop() passed invalid icon:"+isc.Log.echoAll(_1));return null}
var _2=this.$16v(_1);if(_2==null){this.logWarn("getIconTop() unable to return position of icon - this icon is not currently drawn into the page. Returning null");return null}
return isc.Element.getTopOffset(_2,this.containerWidget.getClipHandle())},isc.A.getPageLeft=function isc_FormItem_getPageLeft(){var _1=this.containerWidget;var _2=(this.isRTL()&&_1.overflow!=isc.Canvas.VISIBLE);if(!_2){return this.getLeft()+((this.containerWidget.getPageLeft()+this.containerWidget.getLeftMargin()+this.containerWidget.getLeftBorderSize())
-this.containerWidget.getScrollLeft())}else{var _3=_1.getScrollRight();return this.getLeft()+(this.containerWidget.getPageLeft()+this.containerWidget.getLeftMargin()+this.containerWidget.getLeftBorderSize()+(_1.vscrollOn?_1.getScrollbarSize():0))
-(_1.getScrollLeft()-_3)}},isc.A.getPageTop=function isc_FormItem_getPageTop(){return this.getTop()+((this.containerWidget.getPageTop()+this.containerWidget.getTopMargin()+this.containerWidget.getTopBorderSize())
-this.containerWidget.getScrollTop())},isc.A.getTitlePageLeft=function isc_FormItem_getTitlePageLeft(){return this.getTitleLeft()+((this.containerWidget.getPageLeft()+this.containerWidget.getLeftMargin()+this.containerWidget.getLeftBorderSize())
-this.containerWidget.getScrollLeft())},isc.A.getTitlePageTop=function isc_FormItem_getTitlePageTop(){return this.getTitleTop()+((this.containerWidget.getPageTop()+this.containerWidget.getTopMargin()+this.containerWidget.getTopBorderSize())
-this.containerWidget.getScrollTop())},isc.A.getIconRect=function isc_FormItem_getIconRect(_1){return[this.getIconLeft(_1),this.getIconTop(_1),this.getIconWidth(_1),this.getIconHeight(_1)]},isc.A.getIconPageRect=function isc_FormItem_getIconPageRect(_1){var _2=this.getIconRect(_1);_2[0]+=this.containerWidget.getPageLeft();_2[1]+=this.containerWidget.getPageTop();return _2},isc.A.propertyChanged=function isc_FormItem_propertyChanged(_1,_2){if(this.$14s[_1]==true)this.$18m=true;if(this.$59q[_1]==true)this.updateState();if(_1==this.$59r&&this.items){for(var i=0;i<this.items.length;i++){this.items[i].updateState()}}},isc.A.doneSettingProperties=function isc_FormItem_doneSettingProperties(){if(this.$18m){var _1=this.form,_2=_1.items;_2.$8j=null;_1.markForRedraw()}
delete this.$18m},isc.A.setEditMode=function isc_FormItem_setEditMode(_1,_2,_3){if(_1==null)_1=true;if(this.editingOn==_1)return;this.editingOn=_1;if(this.editingOn){this.editContext=_2}
this.editNode=_3},isc.A.editClick=function isc_FormItem_editClick(){var _1=this.getTitlePageLeft(),_2=this.getVisibleTitleWidth(),_3,_4,_5,_6;_4=this.getTitlePageTop();_6=this.getTitleVisibleHeight();_5=this.getVisibleHeight();_3=(_6==_5)?_4:_4+((_6-_5)/2);isc.EditContext.manageTitleEditor(this,_1,_2,_3,null)},isc.A.parseValueExpressions=function isc_FormItem_parseValueExpressions(_1,_2,_3){var _4=this.getType(),_5=isc.SimpleType.inheritsFrom(_4,"time"),_6=(isc.SimpleType.inheritsFrom(_4,"integer")||isc.SimpleType.inheritsFrom(_4,"float")||isc.SimpleType.inheritsFrom(_4,"date")||_5),_7=isc.DynamicForm.getOperatorIndex(),_8=isc.getKeys(_7),_9={operator:"and",criteria:[]},_10=_9.criteria,_11=[],_12=this.$85m(),_13=isc.DS.get(this.form.expressionDataSource||this.form.dataSource);if(!_1)_1=this.getValue();if(!_1)return;if(!isc.isA.String(_1))_1+="";if(_5){_1=isc.Time.$111q(_1)}
var _14=this.getOperator();if(_14)_8.add(_14);var _15=_13?_13.getSearchOperator(_14):{id:_14};var _16=_15.caseInsensitive;if(_6&&_1.contains(" and ")){_11=_1.split(" and ")}else if(_6&&_1.contains(" or ")){_11=_1.split(" or ");_9.operator="or"}else if(_1.contains("...")){_11=_1.split("...");if(_11.length==2){var _17=_7["..."],_18;if(_17)_18=(_16?_17.find("caseInsensitive",true):_17[0]);var _19=_13?_13.getField(_2):null;if(_19){if(isc.SimpleType.inheritsFrom(_19.type,"date")){_11[0]=new Date(Date.parse(_11[0]));_11[0].logicalDate=true;_11[1]=new Date(Date.parse(_11[1]));_11[1].logicalDate=true}else if(isc.SimpleType.inheritsFrom(_19.type,"time")){var _20=isc.Time.createLogicalTime(0,0,0,0);_11[0]=isc.Time.parseInput(_11[0],false,false,false,_20);_20.setSeconds(59,999);_11[1]=isc.Time.parseInput(_11[1],false,false,false,_20)}else if(_19.type=="text"){if(!_11[1].endsWith(this.$87p)){_11[1]+=this.$87p}}}
return{fieldName:_2,operator:_18.ID,start:_11[0],end:_11[1]}}}else{_11=[_1]}
var _21=[" and "," or "];for(var i=0;i<_11.length;i++){var _23=_11[i],_24={fieldName:_2}
_19=_13?_13.getField(_2):null,_25=(_19?_19&&isc.SimpleType.inheritsFrom(_19.type,"date"):false),_26=(_19?_19&&isc.SimpleType.inheritsFrom(_19.type,"time"):false),_27=false;var _28=null;for(var _29 in _7){if(!_29)continue;if(isc.isA.String(_23)&&_23.startsWith(_29)){_28=_29;break}}
for(var _29 in _7){if(!_29)continue;if(_28&&_29!=_28)continue;var _30=_7[_29],_31=false,_32;if(_29=="=="&&isc.isA.String(_23)&&_23.startsWith("=")&&!_23.startsWith("==")&&!_23.startsWith("=("))
{_31=true}
if(_30&&_30.length){var _33=_30.findAll("caseInsensitive",_16);if(_33==null||_33.length==0)_33=_30;if(_33.length>1){}
_32=_33[0]}
if(!_32||!_32.symbol||_21.contains(_32.symbol)){continue}
if(_8.contains(_32.symbol)&&((isc.isA.String(_23)&&(_23.startsWith(_32.symbol)||(_32.symbol=="..."&&_23.contains(_32.symbol))))||_31))
{_27=true;if(_23.startsWith(_32.symbol)){_23=_23.substring(_32.symbol.length-(_31?1:0))}
if(_32.closingSymbol){if(_23.endsWith(_32.closingSymbol)){_23=_23.substring(0,_23.length-_32.closingSymbol.length)}}
if(_23.contains("...")){var _34=_23.split("...");if(_34.length==2){var _17=_7["..."],_18;if(_17)_18=(_16?_17.find("caseInsensitive",true):_17[0]);var _19=_13?_13.getField(_2):null;if(_19){if(isc.SimpleType.inheritsFrom(_19.type,"date")){_34[0]=new Date(Date.parse(_34[0]));_34[0].logicalDate=true;_34[1]=new Date(Date.parse(_34[1]));_34[1].logicalDate=true}else if(isc.SimpleType.inheritsFrom(_19.type,"time")){var _20=isc.Time.createLogicalTime(0,0,0,0);_34[0]=isc.Time.parseInput(_34[0],false,false,false,_20);_20.setSeconds(59,999);_34[1]=isc.Time.parseInput(_34[1],false,false,false,_20)}else if(_19.type=="text"){if(!_34[1].endsWith(this.$87p)){_34[1]+=this.$87p}}}
_9.criteria.add({fieldName:_2,operator:_18.ID,start:_34[0],end:_34[1]});continue}}
if(_25){_23=new Date(Date.parse(_23));_23.logicalDate=true}else if(_26){var _20=null;if(_32.upperBounds){if(_32.inclusive)_20=isc.Time.createLogicalTime(0,0,59,999);else _20=isc.Time.createLogicalTime(0,0,0,0)}else if(_32.lowerBounds){if(_32.inclusive)_20=isc.Time.createLogicalTime(0,0,0,0);else _20=isc.Time.createLogicalTime(0,0,59,999)}
_23=isc.Time.parseInput(_23,false,false,false,_20)}
_24.operator=_32.ID;if(_32.processValue){_23=_32.processValue(_23,_13)}
if(_32.wildCard&&isc.isA.String(_23)&&_23.contains(_32.wildCard)){var _35=_13?_13.patternMultiWildcard:"*";_35=isc.isA.Array(_35)?_35[0]:_35;var _36=_23.replaceAll(_32.wildCard,_35);var _32=_16?"iMatchesPattern":"matchesPattern";if(_3){_32=_3}
_9.criteria.add({operator:_32,fieldName:_2,value:_36});_24.operator=null;this.$877=true}else{if(_32.valueType!="none")_24.value=_23}
break}}
if(!_27){_24.operator=_14;_24.value=_23}
if(_24.operator)_9.criteria.add(_24)}
if(_9.criteria.length==1)_9=_9.criteria[0];if(_9.criteria&&_9.criteria.length==0)_9=null;return _9});isc.evalBoundary;isc.B.push(isc.A.flattenExpressionCriteria=function isc_FormItem_flattenExpressionCriteria(_1){var _2=[];for(var i=0;i<_1.length;i++){var _4=_1[i];if(!_4.criteria){_2.add(_4)}else{_2.addList(this.flattenExpressionCriteria(_4.criteria))}}
return _2},isc.A.buildValueExpressions=function isc_FormItem_buildValueExpressions(_1){var _2=_1,_3=isc.shallowClone(_2),_4=" "+_3.operator+" ",_5=[_4],_6=[],_7="",_8=isc.DS.get(this.form.expressionDataSource||this.form.dataSource);if(_2.criteria){_3.criteria=this.flattenExpressionCriteria(_2.criteria)}
var _9=isc.DynamicForm.getOperatorIndex(),_10=isc.getKeys(_9),_11=this.validOperators;if(!_11){_11=[];for(var j=0;j<_10.length;j++){var _13=_9[_10[j]];_11.addList(_13.getProperty("ID"))}}
var _14=this.getOperator();if(_14)_11.add(_14);var _15=_8?_8.getSearchOperator(_14):{id:_14};var _16=_15.caseInsensitive,_17=false,_18;if(!_3.criteria){var _19=[_3];_3={criteria:_19}}
var _20=["startsWith","iStartsWith","contains","iContains","endsWith","iEndsWith"];if(this.useWildCardsByDefault&&this.type=="text"&&(_3.criteria.length>1||(_3.criteria.length==1&&_20.contains(_3.criteria[0].operator)&&_3.criteria[0].value&&_3.criteria[0].value.startsWith("=")&&!_3.criteria[0].value.startsWith("==")&&!_3.criteria[0].value.startsWith("=("))||this.$877))
{_17=true;var _13=_9["=="];var _21=_13.find({"ID":"equals"});_18=_21.wildCard;_5[0]=""}
var _22=0;for(var i=0;i<_3.criteria.length;i++){var _24=_3.criteria[i],_25=_24.operator,_26=_24.value,_27=_8?_8.getField(_24.fieldName):null;for(var j=0;j<_10.length;j++){var _13=_9[_10[j]];var _28=_13.find({"ID":_25});if(_28){_25=_28;break}}
if(i>0){_5.add(_4)}
if(isc.isA.String(_25)){this.logWarn("Unknown filter-expression operator: '"+_25+"'")}else if(_17){if(_25.ID=="contains"||_25.ID=="iContains"){if(_6[_6.length-1]!=_18)_6.add(_18);_6.add(_24.value);_6.add(_18)}else if(_25.ID=="startsWith"||_25.ID=="iStartsWith"){_6.add(_24.value);_6.add(_18)}else if(_25.ID=="endsWith"||_25.ID=="iEndsWith"){if(_6[_6.length-1]!=_18)_6.add(_18);_6.add(_24.value)}}else if(_25.ID==_14){_6.add(this.$111i(_24.value))}else if(_25.ID=="betweenInclusive"||_25.ID=="iBetweenInclusive"){if(_3.criteria.length>1)_5.addAt(_25.symbol,_22);else _5[_22]=_25.symbol
_22++;var _29=_24.end;if(_27&&_27.type=="text"){if(_29&&_29.endsWith(this.$87p)){_29=_29.replace(this.$87p,"")}}
var _30=this.$111i(_24.start);_29=this.$111i(_29);if(_30!=_29)_6.addList([_30,_29]);else _6.add(_30)}else if(_25.ID=="isNull"||_25.ID=="notNull"){_6.add(_25.symbol)}else if(_11.contains(_25.ID)){var _31=_25;if(isc.isAn.Array(_26))_26=_26.join(_25.valueSeparator);if(_31.ID!=_15){_26=(_31&&_31.symbol?_31.symbol:"")+this.$111i(_26);if(_31.closingSymbol)_26+=_31.closingSymbol}
_6.add(_26)}else if(_25.ID.startsWith("i")){var _32=_25.ID.substring(1),_33=_32.charAt(0);_32=_33.toLowerCase()+_32.substring(1)
if(_11.contains(_32)){var _34=_10.find("ID",_32);if(_34.ID!=_15){_26=(_31&&_31.symbol?_31.symbol:"")+this.$111i(_26);if(_31.closingSymbol)_26+=_31.closingSymbol}
_6.add(_26)}}
_22++}
if(_17)_6.addAt("=",0);if(_5.length>1){for(var i=0;i<_6.length;i++){_7+=_6[i];if(i<_6.length-1)_7+=_5[i]}}else{_7=_6.join((_6.length>1?_5[0]:""))}
delete this.$877;return _7.length>0?_7:null},isc.A.enteredCompleteExpression=function isc_FormItem_enteredCompleteExpression(){var _1=isc.DynamicForm.getOperatorIndex(),_2=isc.getKeys(_1),_3=this.validOperators,_4=this._value;if(!_3){_3=[];for(var j=0;j<_2.length;j++){var _6=_1[_2[j]];_3.addList(_6.getProperty("symbol"))}}
if(!isc.isA.String(_4)){this.$1464=true;return true}
if(this.$1464&&(_4==null||isc.isAn.emptyString(_4))){delete this.$1464;return true}
var _7=!["#","!#"].contains(_4),_8=true;if(_8&&_3.contains(_4)&&_7){_8=false}
if(_8&&_4.contains("=(")&&!_4.contains(")")){_8=false}
if(_8&&_7){for(var j=0;j<_3.length;j++){var _9=_3[j];if(_9.startsWith(_4)){_8=false;break}}}
this.$1464=_8;return this.$1464},isc.A.$111i=function isc_FormItem__formatCriterionValue(_1){return String(_1)});isc.B._maxIndex=isc.C+476;isc.FormItem.registerStringMethods({showIf:"item,value,form,values",defaultDynamicValue:"item,form,values",focus:"form,item",blur:"form,item",editorEnter:"form,item,value",editorExit:"form,item,value",click:"form,item",doubleClick:"form,item",pickerIconClick:"form,item,pickerIcon",iconClick:"form,item,icon",iconKeyPress:"keyName,character,form,item,icon",change:"form,item,value,oldValue",changed:"form,item,value",transformInput:"form,item,value,oldValue",cellClick:"form,item",cellDoubleClick:"form,item",titleClick:"form,item",titleDoubleClick:"form,item",mouseMove:"form,item",mouseOver:"form,item",mouseOut:"form,item",titleMove:"form,item",titleOver:"form,item",titleOut:"form,item",textBoxMove:"form,item",textBoxOver:"form,item",textBoxOut:"form,item",itemHover:"item,form",titleHover:"item,form",valueHover:"item,form",keyPress:"item, form, keyName, characterValue",keyDown:"item,form,keyName",keyUp:"item,form,keyName",getValueIcon:"value",formSaved:"request,response,data",formatValue:"value,record,form,item",formatEditorValue:"value,record,form,item",parseEditorValue:"value,form,item"});isc.FormItem.getPrototype().toString=function(){return"["+this.Class+" ID:"+this.ID+(this.name!=null?" name:"+this.name:"")+"]"};isc.ClassFactory.defineClass("FormItemFactory");isc.A=isc.FormItemFactory;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$gx="text";isc.A.$18n="Item";isc.A.$18o="TextareaItem";isc.A.$679="TextAreaItem";isc.A.$68a="DatetimeItem";isc.A.$68b="DateTimeItem";isc.A.$18p={};isc.B.push(isc.A.getItemClassName=function isc_c_FormItemFactory_getItemClassName(_1,_2,_3,_4){if(_2==null)_2=_1.editorType||_1.formItemType||_1.type;if(isc.isA.String(_2)){var _5=_2.toLowerCase();if(_5.contains(isc.DynamicForm.$12b)){if(_5=="selectother"||_5=="selectotheritem"){_5="select";if(!_4)_1.isSelectOther=true}
if(_5=="select"||_5=="selectitem"){_3=_1.form||_3;var _6=(!isc.ListGrid||(_1.multiple&&_1.multipleAppearance=="grid")||(_3?_3.useNativeSelectItems:false));if(_6)_2="NativeSelectItem"
else _2="SelectItem"}}
if(_5==isc.DynamicForm.$52w)_2="MultiFileItem";else if(_5==isc.DynamicForm.$12g)_2="MultiUploadItem";else if(_5==isc.DynamicForm.$51x.toLowerCase())_2="SOAPUploadItem"}
return _2},isc.A.getItemClass=function isc_c_FormItemFactory_getItemClass(_1){var _2=isc.ClassFactory.getClass(_1);if(!_2||!isc.isA.FormItem(_2)){if(isc.SGWTFactory&&isc.isA.SGWTFactoryObject(_2))return _2;if(_1!=null&&_1.startsWith("T")){var _3=_1.substring(1),_2=isc.ClassFactory.getClass(_3);if(isc.isA.FormItem(_2))return _2}
if(_1==null)_1=this.$gx;var _4=this.$18p,_5=_4[_1];if(!_5){_5=_4[_1]=_1.substring(0,1).toUpperCase()+_1.substring(1)+this.$18n}
if(_5==this.$18o)_5=this.$679;if(_5==this.$68a)_5=this.$68b;_2=isc.ClassFactory.getClass(_5)}
return _2},isc.A.makeItem=function isc_c_FormItemFactory_makeItem(_1){if(_1==null)return null;if(isc.isA.FormItem(_1)){return _1}
var _2=this.getItemClassName(_1),_3=this.getItemClass(_2);if(!_3){this.logWarn("makeItem(): type "+_1.type+" not recognized, using TextItem");_3=isc.TextItem}
return isc.ClassFactory.newInstance(_3,_1)});isc.B._maxIndex=isc.C+3;isc.ClassFactory.defineClass("Validator");isc.Validator.addProperties({})
isc.A=isc.Validator;isc.A.notABoolean="Must be a true/false value";isc.A.notAString="Must be a string.";isc.A.notAnInteger="Must be a whole number.";isc.A.notADecimal="Must be a valid decimal.";isc.A.notADate="Must be a date.";isc.A.notATime="Must be a time.";isc.A.notAnIdentifier="Identifiers must start with a letter, underscore or $ character, and may contain only letters, numbers, underscores or $ characters.";isc.A.notARegex="Must be a valid regular expression.";isc.A.notAColor="Must be a CSS color identifier.";isc.A.mustBeLessThan="Must be no more than ${max}";isc.A.mustBeGreaterThan="Must be at least ${min}";isc.A.mustBeLaterThan="Must be later than ${min.toShortDate()}";isc.A.mustBeLaterThanTime="Must be later than ${isc.Time.toShortTime(min)}";isc.A.mustBeEarlierThan="Must be earlier than ${max.toShortDate()}";isc.A.mustBeEarlierThanTime="Must be earlier than ${isc.Time.toShortTime(max)}";isc.A.mustBeShorterThan="Must be no more than ${max} characters";isc.A.mustBeLongerThan="Must be at least ${min} characters";isc.A.mustBeExactLength="Must be exactly ${max} characters";isc.A.notAMeasure='Must be a whole number, percentage, "*" or "auto"';isc.A.requiredField="Field is required";isc.A.notOneOf="Not a valid option";isc.A.notAFunction='Must be a function.';isc.A.$18q="true";isc.A.$18r="false";isc.A.$605=".";isc.A.READONLY="readOnly";isc.A.HIDDEN="hidden";isc.A.DISABLED="disabled";isc.A.$74u={isBoolean:{type:"isBoolean",description:"Value is boolean",valueType:"none",dataType:"none",condition:function(_1,_2,_3){if(_3==null||isc.is.emptyString(_3))return true;if(isc.isA.Boolean(_3))return true;if(!_2.errorMessage){_2.defaultErrorMessage=isc.Validator.notABoolean}
if(isc.isA.String(_3)){var _4=isc.Validator;_2.resultingValue=(_3==_4.$18q);return(_3==_4.$18q||_3==_4.$18r)}else if(isc.isA.Number(_3)){_2.resultingValue=(_3!=0);return(_3==0||_3==1)}
_2.resultingValue=!!_3;return false}},isString:{type:"isString",description:"Value is a string",valueType:"none",dataType:"none",condition:function(_1,_2,_3){if(_3==null||isc.isA.String(_3))return true;if(!_2.errorMessage)_2.defaultErrorMessage=isc.Validator.notAString;_2.resultingValue=isc.iscToLocaleString(_3);return true}},isInteger:{type:"isInteger",description:"Value is a whole number",valueType:"none",dataType:"none",condition:function(_1,_2,_3){if(_3==null||isc.is.emptyString(_3))return true;if(!_2.errorMessage)_2.defaultErrorMessage=isc.Validator.notAnInteger;if(isNaN(_3))return false;if(_1.type&&_1.type.startsWith("locale")&&isc.isA.String(_3)){var _4=isc.NumberUtil.parseLocaleInt(_3);if(isNaN(_4)){return false}else{_2.resultingValue=_4;return true}}
var _4=parseInt(_3,10),_5=(_3==_4);if(_2.convertToInteger){var _6=parseFloat(_3),_4=Math.round(_6);_2.resultingValue=_4;return true}else{if(_5){_2.resultingValue=_4;return true}else return false}}},isFloat:{type:"isFloat",description:"Value is a floating point number",valueType:"none",dataType:"none",condition:function(_1,_2,_3){if(_3==null||isc.is.emptyString(_3))return true;if(!_2.errorMessage)_2.defaultErrorMessage=isc.Validator.notADecimal;var _4;if(_3==isc.Validator.$605){_4="0."}else if(_1.type&&_1.type.startsWith("locale")&&isc.isA.String(_3)){_4=isc.NumberUtil.parseLocaleFloat(_3);if(isNaN(_4)){return false}}else{_4=parseFloat(_3);if(isNaN(_4)||_4!=_3)return false}
_2.resultingValue=_4;return true}},isDate:{type:"isDate",description:"Value is a date",valueType:"none",dataType:"none",condition:function(_1,_2,_3){if(_3==null||isc.is.emptyString(_3)||isc.isA.Date(_3))return true;if(!_2.errorMessage)_2.defaultErrorMessage=isc.Validator.notADate;var _4=isc.Validator.$93n?Date.parseInput(_3):Date.parseSchemaDate(_3);if(_4==null||isNaN(_4.getTime()))return false;_2.resultingValue=_4;return true}},isTime:{type:"isTime",description:"Value is a logical Time value",valueType:"none",dataType:"none",condition:function(_1,_2,_3){if(_3==null||isc.is.emptyString(_3)||isc.isA.Date(_3))return true;if(!_2.errorMessage)_2.defaultErrorMessage=isc.Validator.notATime;var _4=isc.Time.parseInput(_3,true);if(_4==null){_4=Date.parseSchemaDate(_3)}
if(_4!=null){_2.resultingValue=_4;return true}
return false}},isIdentifier:{type:"isIdentifier",valueType:"none",dataType:"none",condition:function(_1,_2,_3){if(_3==null||isc.is.emptyString(_3))return true;if(!_2.errorMessage){_2.defaultErrorMessage=isc.Validator.notAnIdentifier}
return _3.match(/^[a-zA-Z_\$][\w\$]*$/)!=null}},isRegexp:{type:"isRegexp",valueType:"none",dataType:"none",condition:function(_1,_2,_3){if(_3==null||isc.is.emptyString(_3))return true;if(!_2.errorMessage)_2.defaultErrorMessage=isc.Validator.notARegex;if(typeof _3=='object'&&_3.constructor==RegExp)return true;if(isc.Browser.isDOM){if(!isc.Validator.$18t){isc.Validator.$18t=isc.$aq("value","try{var regex=new RegExp(value)}catch(e){return false}return true")}
return isc.Validator.$18t(_3)}else{var _4=new RegExp(_3);return true}}},isFunction:{type:"isFunction",valueType:"none",dataType:"none",condition:function(_1,_2,_3){if(_3==null||isc.is.emptyString(_3)||_3==isc.Class.NO_OP||isc.isA.StringMethod(_3))
{return true}
if(!_2.errorMessage)_2.defaultErrorMessage=isc.Validator.notAFunction;try{isc.Func.expressionToFunction("",_3)}catch(e){return false}
if(_3.iscAction)_3=_3.iscAction;_2.resultingValue=isc.StringMethod.create({value:_3});return true}},isColor:{type:"isColor",valueType:"none",dataType:"text",condition:function(_1,_2,_3){if(!_2.errorMessage)_2.defaultErrorMessage=isc.Validator.notAColor;if(!_3)return true;return isc.isA.color(_3)}},isMeasure:{type:"isMeasure",valueType:"none",dataType:["integer","string"],condition:function(_1,_2,_3){if(_3==null||isc.is.emptyString(_3)||_3=="*")return true;if(!_2.errorMessage)_2.defaultErrorMessage=isc.Validator.notAMeasure;if(isc.isA.String(_3)&&_3.charAt(_3.length-1)=='%'){_3=_3.slice(0,-1);return _3.match(/\d+\.?\d*/)!=null}
return isc.Validator.processValidator(_1,_2,_3,"integerOrAuto")}},integerOrAuto:{type:"integerOrAuto",valueType:"none",dataType:["integer","string"],condition:function(_1,_2,_3){if(_3==null||isc.is.emptyString(_3)||(isc.isA.String(_3)&&_3.toLowerCase()=="auto"))return true;return isc.Validator.processValidator(_1,_2,_3,"isInteger")}},integerOrIdentifier:{type:"integerOrIdentifier",valueType:"none",dataType:["integer","string"],condition:function(_1,_2,_3){if(_3==null||isc.is.emptyString(_3))return true;if(_3.match(/^[a-zA-Z_\$][\w\$]*$/)!=null)return true;return isc.Validator.processValidator(_1,_2,_3,"isInteger")}},integerRange:{type:"integerRange",title:"Value in range",description:"Value is an integer within the specified range",valueType:"valueRange",dataType:"integer",rangeStartAttribute:"min",rangeEndAttribute:"max",condition:function(_1,_2,_3){var _4=_3;if(!isc.isA.String(_3))_3=parseInt(_3,10);if(isNaN(_3)||_3!=_4)return true;_2.dynamicErrorMessageArguments={validator:_2,max:_2.max,min:_2.min}
if(isc.isA.Number(_2.max)&&((!_2.exclusive&&_3>_2.max)||(_2.exclusive&&_3>=_2.max)))
{if(!_2.errorMessage){_2.defaultErrorMessage=isc.Validator.mustBeLessThan}
return false}
if(isc.isA.Number(_2.min)&&((!_2.exclusive&&_3<_2.min)||(_2.exclusive&&_3<=_2.min)))
{if(!_2.errorMessage){_2.defaultErrorMessage=isc.Validator.mustBeGreaterThan}
return false}
return true}},lengthRange:{type:"lengthRange",title:"String length in range",description:"Value is a string whose length falls within the specified range",valueType:"valueRange",dataType:"text",rangeStartAttribute:"min",rangeEndAttribute:"max",condition:function(_1,_2,_3){if(_3==null||isc.is.emptyString(_3))return true;if(!isc.isA.String(_3))return true;_2.dynamicErrorMessageArguments={validator:_2,max:_2.max,min:_2.min}
var _4=_3.length,_5=_2.max!=null?parseInt(_2.max,10):null,_6=_2.min!=null?parseInt(_2.min,10):null;if(!isc.isA.Number(_5))_5=null;if(!isc.isA.Number(_6))_6=null;if(_5!=null&&_4>_5){_2.defaultErrorMessage=(_5==_6?isc.Validator.mustBeExactLength:isc.Validator.mustBeShorterThan);return false}
if(_6!=null&&_4<_6){_2.defaultErrorMessage=(_5==_6?isc.Validator.mustBeExactLength:isc.Validator.mustBeLongerThan);return false}
return true}},contains:{type:"contains",title:"String contains substring",description:"Value contains the specified substring",valueType:"fieldType",dataType:"text",valueAttribute:"substring",condition:function(_1,_2,_3){if(_3==null||isc.is.emptyString(_3))return true;if(!isc.isA.String(_3))_3=isc.iscToLocaleString(_3);return _3.indexOf(_2.substring)>-1}},doesntContain:{type:"doesntContain",title:"String does not contain substring",description:"Value does not contain the specified substring",valueType:"fieldType",dataType:"text",valueAttribute:"substring",condition:function(_1,_2,_3){if(_3==null||isc.is.emptyString(_3))return true;if(!isc.isA.String(_3))_3=isc.iscToLocaleString(_3);return _3.indexOf(_2.substring)==-1}},substringCount:{type:"substringCount",title:"String contains substring multple times",description:"Value contains a specified substring multiple times",valueType:"custom",dataType:"text",editorType:"SubstringCountEditor",getAttributesFromEditor:function(_1,_2){var _3=_2.canvas;return _3.getValues()},setEditorAttributes:function(_1,_2,_3){var _4=_2.canvas;if(_3==null){_4.clearValues();return}
_4.setValue("substring",_3.substring);_4.setValue("count",_3.count);_4.setValue("operator",_3.operator)},condition:function(_1,_2,_3){if(_3==null||isc.is.emptyString(_3))return true;var _4=_2.substring;for(var _5=0,_6=0;_5<_3.length;_5++){_5=_3.indexOf(_4,_5);if(_5>-1)_6++;else break}
var _7=_2.operator,_8=_2.count;if(!_7)_7="==";if(!_8)_8=0;switch(_7){case"==":return _6==_8;case"!=":return _6!=_8;case"<":return _6<_8;case"<=":return _6<=_8;case">":return _6>_8;case">=":return _6>=_8}
return false}},regexp:{type:"regexp",title:"Value matches regex",description:"Value matches a regular expression",valueType:"fieldType",dataType:"text",valueAttribute:"expression",condition:function(_1,_2,_3){if(_3==null||isc.is.emptyString(_3))return true;var _4=_2.expression;if(isc.isA.String(_4)){_4=new RegExp(_4)}
return _4.test(_3)}},mask:{type:"mask",title:"Values matches regex mask",description:"Value matches a regular expression mask",valueType:"custom",dataType:"text",editorType:"MaskRuleEditor",getAttributesFromEditor:function(_1,_2){var _3=_2.canvas;return _3.getValues()},setEditorAttributes:function(_1,_2,_3){var _4=_2.canvas;if(_3==null){_4.clearValues();return}
_4.setValue("mask",_3.mask);_4.setValue("transformTo",_3.transformTo)},condition:function(_1,_2,_3){if(_3==null)return true;if(!isc.isA.String(_3)&&isc.isA.Function(_3.toString))
_3=_3.toString();if(isc.is.emptyString(_3))return true;var _4=_2.mask;if(isc.isA.String(_4))_4=_2.mask=new RegExp(_4);if(!_4.test(_3)){return false}else{if(_2.transformTo){_2.resultingValue=_3.replace(_4,_2.transformTo)}}
return true}},dateRange:{type:"dateRange",title:"Value in range",description:"Value is a date within the specified range",valueType:"valueRange",dataType:"date",rangeStartAttribute:"min",rangeEndAttribute:"max",editorType:"RelativeDateItem",condition:function(_1,_2,_3){if(_3==null||isc.is.emptyString(_3))return true;if(!isc.isA.Date(_3))return false;var _4=_2.min,_5=_2.max;if(_4!=null&&!isc.isA.Date(_4))_4=_2.min=Date.parseSchemaDate(_4);if(_5!=null&&!isc.isA.Date(_5))_5=_2.max=Date.parseSchemaDate(_5);_2.dynamicErrorMessageArguments={validator:_2,max:_5,min:_4}
if(isc.isA.Date(_4)&&((!_2.exclusive&&_3.getTime()<_4.getTime())||(_2.exclusive&&_3.getTime()<=_4.getTime())))
{if(!_2.errorMessage){_2.defaultErrorMessage=isc.Validator.mustBeLaterThan}
return false}
if(isc.isA.Date(_5)&&((!_2.exclusive&&_3.getTime()>_5.getTime())||(_2.exclusive&&_3.getTime()>=_5.getTime())))
{if(!_2.errorMessage){_2.defaultErrorMessage=isc.Validator.mustBeEarlierThan}
return false}
return true}},timeRange:{type:"timeRange",title:"Value in range",description:"Value is a logical time value within the specified range",valueType:"valueRange",dataType:"time",rangeStartAttribute:"min",rangeEndAttribute:"max",condition:function(_1,_2,_3){if(_3==null||isc.is.emptyString(_3))return true;if(!isc.isA.Date(_3))return false;var _4=_2.min,_5=_2.max;if(_4!=null&&!isc.isA.Date(_4)){if(isc.isA.String(_4)&&_4.contains(":")){var _6=_4.split(":"),_7=_6[0]||0,_8=_6[1]||0,_9=_6[2]||0,_10=_6[3]||0;_4=_2.min=new Date(0,0,0,_7,_8,_9,_10)}else{_4=_2.min=Date.parseSchemaDate(_4)}}
if(_5!=null&&!isc.isA.Date(_5)){if(isc.isA.String(_5)&&_5.contains(":")){var _6=_5.split(":"),_7=_6[0]||0,_8=_6[1]||0,_9=_6[2]||0,_10=_6[3]||0;_5=_2.max=new Date(0,0,0,_7,_8,_9,_10)}else{_5=_2.max=Date.parseSchemaDate(_5)}}
_2.dynamicErrorMessageArguments={validator:_2,max:_5,min:_4};_4.setFullYear(_3.getFullYear());_4.setMonth(_3.getMonth());_4.setDate(_3.getDate());_5.setFullYear(_3.getFullYear());_5.setMonth(_3.getMonth());_5.setDate(_3.getDate());if(isc.isA.Date(_4)&&((!_2.exclusive&&_3<_4)||(_2.exclusive&&_3<=_4)))
{if(!_2.errorMessage){_2.defaultErrorMessage=isc.Validator.mustBeLaterThanTime}
return false}
if(isc.isA.Date(_5)&&((!_2.exclusive&&_3>_5)||(_2.exclusive&&_3>=_5)))
{if(!_2.errorMessage){_2.defaultErrorMessage=isc.Validator.mustBeEarlierThanTime}
return false}
return true}},floatLimit:{type:"floatLimit",valueType:"custom",dataType:"float",condition:function(_1,_2,_3){var _4;if(_2.precision!=null){if(_2.roundToPrecision==null)_2.roundToPrecision=true;if(!isc.Validator.processValidator(_1,_2,_3,"floatPrecision"))
return false;if(_2.resultingValue!=null)
_3=_4=_2.resultingValue}
if(_2.min!=null||_2.max!=null){if(!isc.Validator.processValidator(_1,_2,_3,"floatRange")){return false}else{if(_4!=null&&_2.resultingValue==null&&_2.roundToPrecision)
_2.resultingValue=_4}}
return true}},floatRange:{type:"floatRange",title:"Value in range",description:"Value is a floating point number within the specified range",valueType:"custom",dataType:"float",editorType:"FloatRangeEditor",getAttributesFromEditor:function(_1,_2){var _3=_2.canvas;return _3.getValues()},setEditorAttributes:function(_1,_2,_3){var _4=_2.canvas;if(_3==null){_4.clearValues();return}
_4.setValue("min",_3.min);_4.setValue("max",_3.max);_4.setValue("exclusive",!!_3.exclusive)},condition:function(_1,_2,_3){if(_3==null||isc.is.emptyString(_3))return true;var _4=_3;if(!isc.isA.String(_3))_4=parseFloat(_4);if(isNaN(_4)||_4!=_3)return true;_2.dynamicErrorMessageArguments={validator:_2,max:_2.max,min:_2.min}
var _5,_6;if(_2.max!=null){_5=isc.isA.Number(_2.max)?_2.max:parseFloat(_2.max)}
if(_2.min!=null){_6=isc.isA.Number(_2.min)?_2.min:parseFloat(_2.min)}
if(isc.isA.Number(_5)&&((!_2.exclusive&&_4>_5)||(_2.exclusive&&_4>=_5)))
{if(!_2.errorMessage){_2.defaultErrorMessage=isc.Validator.mustBeLessThan}
return false}
if(isc.isA.Number(_6)&&((!_2.exclusive&&_4<_6)||(_2.exclusive&&_4<=_6)))
{if(!_2.errorMessage){_2.defaultErrorMessage=isc.Validator.mustBeGreaterThan}
return false}
return true}},floatPrecision:{type:"floatPrecision",title:"Floating point number precision check",description:"Value is a floating point number specified to the appropriate precision",valueType:"custom",dataType:"float",editorType:"FloatPrecisionEditor",getAttributesFromEditor:function(_1,_2){var _3=_2.canvas;return _3.getValues()},setEditorAttributes:function(_1,_2,_3){var _4=_2.canvas;if(_3==null){_4.clearValues();return}
_4.setValue("precision",_3.precision);_4.setValue("roundToPrecision",_3.roundToPrecision)},condition:function(_1,_2,_3){if(_3==null||isc.is.emptyString(_3))return true;var _4=parseFloat(_3);if(isNaN(_4)||_4!=_3)return false;if(isc.isA.Number(_2.precision)){var _5=Math.pow(10,_2.precision);var _6=(Math.round(_4*_5))/_5;if(_2.roundToPrecision){_2.resultingValue=_6;return true}else{return(_4==_6)}}}},requiredIf:{type:"requiredIf",description:"Conditionally required field",valueType:"fieldType",dataType:"none",valueAttribute:"expression",editorType:"TextAreaItem",condition:function(_1,_2,_3,_4){if(_2.expression!=null&&!isc.isA.Function(_2.expression)){isc.Func.replaceWithMethod(_2,"expression","item,validator,value,record")}
var _5=_2.expression(_1,_2,_3,_4);if(_2.errorMessage==null)
_2.errorMessage=isc.Validator.requiredField;return!_5||(_3!=null&&!isc.is.emptyString(_3))}},isOneOf:{type:"isOneOf",title:"Value in list",description:"Is one of list",valueType:"valueSet",dataType:"none",valueAttribute:"list",condition:function(_1,_2,_3,_4){if(_3==null||isc.is.emptyString(_3))return true;var _5=_2.list||(_1?(_1.getValueMap?_1.getValueMap():_1.valueMap):null),_6=_5;if(!isc.isAn.Array(_5)&&isc.isAn.Object(_5)){_6=isc.getKeys(_5)}
if(_6!=null){for(var i=0,_8=_6.length;i<_8;i++){if(_6[i]==_3)return true}}else{isc.Log.logWarn("isOneOf validator specified with no specified list of options or valueMap - validator will always fail. Field definition:"+isc.Log.echo(_1),"validation")}
if(!_2.errorMessage){_2.defaultErrorMessage=isc.Validator.notOneOf}
return false}},required:{type:"required",title:"Required",description:"Required field",valueType:"none",dataType:"none",condition:function(_1,_2,_3,_4){if(_2.errorMessage==null)
_2.errorMessage=isc.Validator.requiredField;return(_3!=null&&!isc.is.emptyString(_3))},action:function(_1,_2,_3,_4,_5){if(!_2.required){_2.$11m=(_1!=null)}}},readOnly:{type:"readOnly",valueType:"custom",dataType:"none",editorType:"ReadOnlyRuleEditor",valueAttribute:"fieldAppearance",title:"Set read-only appearance",description:"Set field read-only state/appearance",isRule:true,supportedTargets:["FormItem","Canvas","Section"],action:function(_1,_2,_3,_4,_5,_6){if(_3.fieldAppearance==isc.Validator.HIDDEN){if(_1==true){if(_5==null){if(_2.hide)_2.hide()}else{if(_6=="Section"){_5.hideSection(_2)}else if(_6=="FormItem"){_5.hideItem(_2)}}}else{if(_5==null){if(_2.show)_2.show()}else{if(_6=="Section"){_5.showSection(_2)}else{_5.showField(_2)}}}}else if(_3.fieldAppearance==isc.Validator.DISABLED){if(_1==true){if(_5==null){_2.disable()}else{if(_6=="Section"){_2.disable();if(_2.items){for(var i=0;i<_2.items.length;i++){_2.items[i].disable()}}}else{_5.disableField(_2)}}}else{if(_5==null){_2.enable()}else{if(_6=="Section"){_2.enable();if(_2.items){for(var i=0;i<_2.items.length;i++){_2.items[i].enable()}}}else{_5.enableField(_2)}}}}else{if(_6!="FormItem"){isc.logWarn("ReadOnly rule with fieldAppearance set to '"+_3.fieldAppearance+"' not supported for specified locator:"+_3.locator)}
if(_1==true)_5.setFieldCanEdit(_2.name,false);else _5.setFieldCanEdit(_2.name,true)}}},matchesField:{type:"matchesField",title:"Match another field",description:"Matches another field value",valueType:"fieldName",dataType:"none",valueAttribute:"otherField",condition:function(_1,_2,_3,_4){if(_2.otherField==null){isc.logWarn("matchesField validator is missing 'otherField' definition. Validator forced false.");return false}
var _5;if(isc.isA.String(_2.otherField)){_5=_2.otherField}else{_5=_2.otherField.dataPath||_2.otherField.name}
var _6=(isc.DataSource!=null?isc.DataSource.getPathValue(_4,_5,_2.otherField):_4[_5]);return(_3==_6)},getDependentFields:function(_1,_2){if(!_1.otherField||_1.otherField=="")return _1.fieldName;return[_1.fieldName,_1.otherField]}},isUnique:{type:"isUnique",valueType:"none",dataType:"none",title:"Value is unique",description:"Validate field value is unique on DataSource",requiresServer:true},hasRelatedRecord:{type:"hasRelatedRecord",valueType:"none",dataType:"none",title:"Value exists on related DataSource",description:"Validate field value exists on a related DataSource",requiresServer:true},serverCustom:{type:"serverCustom",valueType:"none",dataType:"none",description:"Validate field value using a custom server expression",requiresServer:true},message:{type:"message",title:"Display message",description:"Displays an informational or warning message",valueType:"none",dataType:"none",isRule:true,supportedTargets:["FormItem"],action:function(_1,_2,_3,_4,_5){var _6=_3.displayMode,_7=(_3.message==null?"errorMessage":"message"),_8=isc.Validator.getErrorMessage(_3,_7);if(_6=="form"){if(!_5.addFieldErrors){return}
if(_1==true){_5.addFieldErrors(_2.name,_8,true)}else{_5.setFieldErrors(_2.name,null,true)}}else if(_6=="transient"){if(_1==true){var _9=function(){if(_5&&_5.hasFocus)_5.blur();isc.showFadingPrompt(_8,_3.duration)};isc.Page.setEvent("idle",_9,isc.Page.FIRE_ONCE)}}else{var _10=_3.severity;if(_1==true){var _9=function(){if(_5&&_5.hasFocus)_5.blur();if(_10=="warning"){isc.warn(_8)}else{isc.say(_8)}};isc.Page.setEvent("idle",_9,isc.Page.FIRE_ONCE)}}}},populate:{type:"populate",title:"Populate value",description:"Populates a target field with a value calculated based on values in other fields",valueType:"custom",dataType:"none",editorType:"PopulateRuleEditor",getAttributesFromEditor:function(_1,_2){return _2.getValue()},setEditorAttributes:function(_1,_2,_3){if(_3!=null&&_3.formula!=null){_2.setValue({formula:_3.formula,formulaVars:_3.formulaVars})}else{_2.clearValue()}},isRule:true,supportedTargets:["FormItem"],action:function(_1,_2,_3,_4,_5){if(_1!=true)return;if(_3.$89d==null){var _6={};var _7=_6.formulaVars=_3.formulaVars;_6.text=_3.formula;var _8=[];for(var _9 in _7){var _10={};_10.mappingKey=_9;_10.name=_7[_9];_8.add(_10)}
_3.$89d=isc.FormulaBuilder.generateFunction(_6,_8,null,true)}
var _11=_3.$89d(_4,_5);if(_2.setValue){var _12=_2.getValue();_2.setValue(_11);if(_12!=_11&&_2.form&&_2.form.rulesEngine){isc.Class.delayCall("processChanged",[_2.form,_2],0,_2.form.rulesEngine)}}else if(_5&&_5.setValue){var _13=_2.fieldName;if(_13==null)_13=_2.dataPath;_5.setValue(_13,_11)}},getDependentFields:function(_1,_2){if(_1.formulaVars==null||!isc.isAn.Object(_1.formulaVars))return null;var _3=[];for(var _4 in _1.formulaVars){_3.add(_1.formulaVars[_4])}
return _3}},setRequired:{type:"setRequired",title:"Set required",description:"Set field required state",valueType:"none",dataType:"none",isRule:true,supportedTargets:["FormItem"],action:function(_1,_2,_3,_4,_5){var _6=!!_1;var _7=_2;if(!_7.setRequired&&_5.getItem){_7=_5.getItem(_2.name||_2.dataPath)}
if(_7&&_7.setRequired){_7.setRequired(_6)}else{_2.required=_6}}}};isc.A.$93n=false;isc.A=isc.Validator;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.create=function isc_c_Validator_create(_1,_2,_3,_4,_5,_6,_7,_8,_9,_10,_11,_12,_13){this.logWarn("A Validator shouldn't be created directly. Instead pass properties as each Validator in a FormItem's validators property or wherever a Validator is needed.");return isc.addProperties({},_1,_2,_3,_4,_5,_6,_7,_8,_9,_10,_11,_12,_13)},isc.A.getValidatorType=function isc_c_Validator_getValidatorType(_1){var _2=_1.type;if(_2==null&&_1._constructor)_2=_1._constructor;return _2},isc.A.isServerValidator=function isc_c_Validator_isServerValidator(_1){if(_1.serverOnly)return true;var _2=this.$74u[this.getValidatorType(_1)];if(_2!=null&&_2.requiresServer)return true;return false},isc.A.processValidator=function isc_c_Validator_processValidator(_1,_2,_3,_4,_5){if(_2.serverOnly)return true;if(_4==null)_4=isc.Validator.getValidatorType(_2);var _6=true;var _7;if(_4!=null)_7=this.$74u[_4];if(_2.isRule||(_7&&_7.isRule)){return true}
var _8;if(_7==null){if(_2.condition){if(!isc.isA.Function(_2.condition)){this.logDebug("Creating function for validation condition:\r"+_2.condition);isc.Func.replaceWithMethod(_2,"condition","item,validator,value,record")}
_8=_2.condition}}else{if(_7.requiresServer==true){return true}
_8=_7.condition;if(!_2.errorMessage){_2.defaultErrorMessage=_7.defaultErrorMessage}}
if(_8!=null){var _9=_2.validateEachItem;if(_9==null)_9=_1.validateEachItem;if(_1&&_1.multiple&&_9&&isc.isAn.Array(_3)){var _10=[];for(var i=0;i<_3.length;i++){delete _2.resultingValue;_6=_6&&_8(_1,_2,_3[i],_5);_10[i]=(_2.resultingValue!=null?_2.resultingValue:_3[i])}
_2.resultingValue=_10}else{delete _2.resultingValue;_6=_8(_1,_2,_3,_5)}}else{this.logWarn("validator not understood on item: "+isc.echo(_1)+":\r"+isc.echoFull(_2))}
return _6},isc.A.performAction=function isc_c_Validator_performAction(_1,_2,_3,_4,_5,_6){var _7=this.getValidatorType(_3);var _8;if(_7!=null)_8=this.$74u[_7];if(_6==null)_6="FormItem";var _9=_3.isRule,_10=_3.supportedTargets;var _11;if(_8!=null){_11=_8.action;if(_9==null)_9=_8.isRule;if(_9&&_10==null){_10=_8.supportedTargets||["FormItem"]}}
if(_9&&!_10.contains(_6)){this.logWarn("Rule of type:"+_7+" called for target object "+_2+", of type:"+_6+". This is not a valid target for this rule. Ignoring.")}
if(_11==null&&_3.action){if(!isc.isA.Function(_3.action)){this.logDebug("Creating function for validation action:\r"+_3.action);isc.Func.replaceWithMethod(_3,"action","result,item,validator,record,component,targetObjectType")}
_11=_3.action}
if(_11!=null){_11(_1,_2,_3,_4,_5,_6)}},isc.A.getErrorMessage=function isc_c_Validator_getErrorMessage(_1,_2){var _3=_2?_1[_2]:_1.errorMessage;if(_3==null)_3=_1.defaultErrorMessage;if(_3&&_1.dynamicErrorMessageArguments){_3=_3.evalDynamicString(null,_1.dynamicErrorMessageArguments)}
return _3},isc.A.addValidator=function isc_c_Validator_addValidator(_1,_2){if(isc.isA.String(_1)){var _3={};_3[_1]=_2;return this.addValidators(_3)}},isc.A.addValidators=function isc_c_Validator_addValidators(_1){for(var _2 in _1){var _3={};_3.type=_2;_3.condition=_1[_2];if(!isc.isA.Function(_3.condition)){isc.Func.replaceWithMethod(_3,"condition","item,validator,value")}
_1[_2]=_3}
this.addValidatorDefinitions(_1)},isc.A.addValidatorDefinition=function isc_c_Validator_addValidatorDefinition(_1,_2){if(!isc.isAn.Object(_2)){isc.logWarn("Invalid validator in call to addValidatorDefinition. Ignored.")}
var _3={};_3[_1]=_2;return this.addValidatorDefinitions(_3)},isc.A.addValidatorDefinitions=function isc_c_Validator_addValidatorDefinitions(_1){if(!_1||!isc.isAn.Object(_1))return;for(var _2 in _1){if(this.$74u[_2]){isc.logWarn("addValidatorDefinitions: Validator definition already exists for type "+_2+". Replacing.")}}
isc.addProperties(this.$74u,_1)},isc.A.getValidatorDefinition=function isc_c_Validator_getValidatorDefinition(_1){return this.$74u[_1]});isc.B._maxIndex=isc.C+11;isc.Validator.addValidatorDefinition("regex",isc.Validator.getValidatorDefinition("regexp"));isc.ClassFactory.defineClass("ContainerItem","FormItem");isc.A=isc.ContainerItem.getPrototype();isc.A.cellSpacing=0;isc.A.cellPadding=2;isc.A.cellBorder=0;isc.A.recalculateItemsOnRedraw=false;isc.A.$125=false;isc.A.changeOnKeypress=false;isc.ContainerItem.addMethods(isc.applyMask(isc.DynamicForm.getPrototype(),["getTableStartHTML","$11n","$11o","getCellStartHTML","$11g","getCellEndHTML","$11h","getTitleAlign","getItemPromptHTML","getTitleCellHTML","$11i","$427","isRTL","getItem","fieldIdProperty"]))
isc.A=isc.ContainerItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$63z="$428";isc.A.writeOutLabelTag=true;isc.A.$9z="<br>";isc.A.$132=["<TD ID='",,"' CLASS='",,"'>",,"</TD>"];isc.B.push(isc.A.init=function isc_ContainerItem_init(){this.Super("init",arguments);this.setItems(this.items?this.items:null)},isc.A.destroy=function isc_ContainerItem_destroy(){if(this.items){for(var i=0;i<this.items.length;i++){this.items[i].destroy()}}
this.Super("destroy",arguments)},isc.A.setItems=function isc_ContainerItem_setItems(_1){var _2=this.items?this.items:null;if(_1)this.items=_1;else _1=this.items;if(!this.items)return null;this.logDebug("Creating "+this.items.length+" contained items");var _3=false;for(var _4=0;_4<_1.length;_4++){var _5=_1[_4];if(!_5){_1.removeItem(_4--);continue}
isc.addMethods(_5,{$154:function(){return this.parentItem.$154()}});_5.containerWidget=this.containerWidget;_5.parentItem=this;_5.eventParent=this;_5.form=this.form;_5.showTitle=_5.showTitle!=null?_5.showTitle:false;if(!isc.isA.FormItem(_5))_1[_4]=_5=isc.FormItemFactory.makeItem(_5);if(this.accessKey!=null&&!_3&&_5.$kk()){_5.accessKey=this.accessKey;_3=true}
if(_5.name!=null)this[_5.name]=_5}
if(this.isDrawn()){if(_2&&_2!=this.items){this.$60r={};for(var i=0;i<_2.length;i++){var _7=_2[i];if(!_1.contains(_2[i])){this.$60r[_2[i].getID()]=true}}}}
this.redraw()},isc.A.getItems=function isc_ContainerItem_getItems(){return this.items},isc.A.getTitleHTML=function isc_ContainerItem_getTitleHTML(){var _1,_2;var _3=this.getTitle();if(!this.writeOutLabelTag||!this.getCanFocus()){return _3}
if(this.accessKey!=null){_3=isc.Canvas.hiliteCharacter(_3,this.accessKey)}
for(var i=0;i<this.items.length;i++){if(this.items[i].getCanFocus()&&this.items[i].hasDataElement()){_2=this.items[i];break}}
if(!_2){return _3}
return isc.SB.concat("<LABEL FOR=",_2.getDataElementId(),">",_3,"</LABEL>")},isc.A.$173=function isc_ContainerItem__setElementTabIndex(_1){if(!this.isVisible()||!this.containerWidget.isDrawn())return;this.$174=_1;for(var i=0;i<this.items.length;i++){if(this.items[i].$kk())this.items[i].$173(_1)}
if(!this.form.isDirty()){this.$175()}},isc.A.isEditable=function isc_ContainerItem_isEditable(){return false},isc.A.$kk=function isc_ContainerItem__canFocus(){if(!this.items)return false;for(var i=0;i<this.items.length;i++){if(this.items[i].$kk())return true}
return false},isc.A.focusInItem=function isc_ContainerItem_focusInItem(){if(!this.isVisible()||!this.$kk())return;for(var i=0;i<this.items.length;i++){if(this.items[i].$kk()){this.items[i].focusInItem();break}}},isc.A.blurItem=function isc_ContainerItem_blurItem(){for(var i=0;i<this.items.length;i++){if(this.items[i].hasFocus){this.items[i].blurItem();break}}},isc.A.$159=function isc_ContainerItem__applyHandlersToElement(){this.$16c()},isc.A.drawn=function isc_ContainerItem_drawn(){var _1=this.items;if(!_1)return;for(var i=0;i<_1.length;i++){if(_1[i].visible!=false)_1[i].drawn()}
return this.Super("drawn",arguments)},isc.A.redrawn=function isc_ContainerItem_redrawn(){var _1=this.items;if(!_1)return;for(var i=0;i<_1.length;i++){var _3=_1[i];if(_3.visible!=false){if(!_3.isDrawn())_3.drawn();else _3.redrawn()}else{if(_3.isDrawn())_3.cleared()}}
if(this.$60r){for(var _4 in this.$60r){if(window[_4]!=null)window[_4].cleared()}
delete this.$60r}
return this.Super("redrawn",arguments)},isc.A.cleared=function isc_ContainerItem_cleared(){var _1=this.items;if(!_1)return;for(var i=0;i<_1.length;i++){if(_1[i].isDrawn())_1[i].cleared()}
if(this.$60r){for(var _3 in this.$60r){if(window[_3]!=null)window[_3].cleared()}
delete this.$60r}
return this.Super("cleared",arguments)},isc.A.makeNamedItem=function isc_ContainerItem_makeNamedItem(_1,_2){if(!this.itemCache)this.itemCache={};var _3=this.itemCache[_1];if(!_3){_3=(this[_1]||this.getClass()[_1]);if(_2!=null){_3=isc.addProperties({},_3,_2)}
_3=this.itemCache[_1]=isc.FormItemFactory.makeItem(_3)}
return _3},isc.A.getInnerHTML=function isc_ContainerItem_getInnerHTML(_1,_2,_3,_4){if(!_1)_1={};if(!this.items||this.recalculateItemsOnRedraw||!isc.isA.FormItem(this.items[0]))this.setItems();if(!this.items)return"No items set for containerItem "+this;var _5;if(this.isInactiveHTML()&&this.$68u==null){_5=true;this.$68u=this.setupInactiveContext(null);if(this.logIsDebugEnabled("inactiveEditorHTML")){this.logDebug("getInnerHTML(): Item is marked as inactive - set up new inactive context ID:"+this.$68u,"inactiveEditorHTML")}}
var _6=this.getErrorOrientation(),_7,_8=_6==isc.Canvas.LEFT,_9;if(_3&&(_8||_6==isc.Canvas.RIGHT))
{var _10=this.getErrors();if(_10){_7=true;_9=this.getErrorHTML(_10)}}
var _11=isc.StringBuffer.newInstance();if(this.$11d()){_11.append(this.$15l())}
_11.append(this.getTableStartHTML());var _12=this.items;for(var _13=0;_13<_12.length;_13++){var _14=_12[_13];_14.$10x()
_14.form=this.form;if(_14.showIf){if(!isc.isA.Function(_14.showIf)){isc.Func.replaceWithMethod(_14,"showIf","item,value,form")}
var _15=this.getItemValue(_14,_1);var _16=(_14.showIf(_14,_15,this.form)!=false);if(_16!=_14.visible){_14.visible=_16}}}
var _17=true;for(var _13=0,_18=this.items.length;_13<_18;_13++){var _14=this.items[_13];if(!_14)continue;if(!_14.visible)continue;var _15=this.getItemValue(_14,_1);if(_14.$8l||_17){if(!_17)_11.append("</TR>");_11.append("<TR>")}
if(_17&&_7&&_8){var _19=1;for(var _20=1;_20<this.items.length;_20++){if(this.items[_20].$8l)_19++}
_11.append("<TD ROWSPAN=",_19,">",_9,"</TD>")}
_17=false;var _21=_14.getErrors();if(_14.titleOrientation==isc.Canvas.LEFT){_11.append(this.getTitleCellHTML(_14,_21))}
_11.append(this.getCellStartHTML(_14));if(_14.titleOrientation==isc.Canvas.TOP){_11.append(this.getTitleSpanHTML(_14,_21),this.$9z)}
_11.append(_14.getInnerHTML(_15,true));_11.append(this.getCellEndHTML(_14))}
var _22=this.$92s();if(_22||(this.showIcons&&this.icons!=null)){var _23=this.getTotalIconsWidth();if(_22)_23+=this.getPickerIconWidth();var _24=this.icons&&(_22||this.icons.length>1);_11.append(this.$11g((this.form.isRTL()?isc.Canvas.RIGHT:isc.Canvas.LEFT),null,this.getCellStyle(),1,1,_23,null,null,isc.Canvas.$42a,null,null,null,_24));_11.append(this.getIconsHTML(true));_11.append(this.$11h(_24))}
if(_7&&!_8)_2=true;if(_2){var _25=this.getHint(),_26=!_8?_9:null,_27=(_25&&_26)?_25+_26:(_25||_26);if(_27&&!isc.isA.emptyString(_27)){this.$132[1]=this.$59s();this.$132[3]=this.getHintStyle();this.$132[5]=_27;_11.append(this.$132)}}
_11.append("</TR></TABLE>");if(_5)delete this.$68u;return _11.toString()},isc.A.getPickerIcon=function isc_ContainerItem_getPickerIcon(){var _1=this.Super("getPickerIcon",arguments);_1.writeIntoItem=false;return _1},isc.A.getItemValue=function isc_ContainerItem_getItemValue(_1,_2){if(_2==null)_2={};if(!isc.isA.FormItem(_1))_1=this.getItem(_1);if(!_1)return null;var _3=_1.getFieldName(),_4=null;if(_1.value!=null)_4=_1.value;if(_4==null&&_3){_4=_2[_3]}
if(_4==null){_4=_1.getValue()}
return _4},isc.A.$10v=function isc_ContainerItem__itemValueIsDirty(){if(this.items==null)return false;for(var i=0;i<this.items.length;i++){if(this.items[i].$10v())return true}
return this.$18j},isc.A.$10x=function isc_ContainerItem__markValueAsNotDirty(){this.$18j=false;for(var i=0;i<this.items.length;i++){this.items[i].$10x()}},isc.A.updateDisabled=function isc_ContainerItem_updateDisabled(_1){this.Super("updateDisabled",arguments);if(this.items){for(var i=0;i<this.items.length;i++)this.items[i].updateDisabled(_1)}},isc.A.updateCanEdit=function isc_ContainerItem_updateCanEdit(){this.Super("updateCanEdit",arguments);if(this.items){for(var i=0;i<this.items.length;i++)this.items[i].updateCanEdit()}},isc.A.getTextDirection=function isc_ContainerItem_getTextDirection(){return this.form.getTextDirection()},isc.A.getLeft=function isc_ContainerItem_getLeft(){var _1=this.$11o();if(_1==null){this.logWarn("getLeft() Unable to determine position for "+(this.name==null?"this item ":this.name)+". Position cannot be determined before the item is drawn - returning zero");return 0}
return this.$18k(_1)},isc.A.getTop=function isc_ContainerItem_getTop(){var _1=this.$11o();if(_1==null){this.logWarn("getTop() Unable to determine position for "+(this.name==null?"this item ":this.name)+". Position cannot be determined before the item is drawn - returning zero");return 0}
return this.$18l(_1)},isc.A.getVisibleWidth=function isc_ContainerItem_getVisibleWidth(){var _1=this.$11o();if(_1==null)return this.Super("getVisibleWidth",arguments);return _1.offsetWidth},isc.A.getVisibleHeight=function isc_ContainerItem_getVisibleHeight(){var _1=this.$11o();if(_1==null)return this.Super("getVisibleHeight",arguments);return _1.offsetHeight},isc.A.getTitleSpanHTML=function isc_ContainerItem_getTitleSpanHTML(_1,_2){var _3=isc.StringBuffer.create();_3.append("<SPAN ",this.$11i(_1)," CLASS='",_1.getTitleStyle(),"' ALIGN='",this.getTitleAlign(_1),"'>");_3.append(_1.getTitleHTML());_3.append("</SPAN>");return _3.release()},isc.A.setReadOnlyDisplay=function isc_ContainerItem_setReadOnlyDisplay(_1){this.readOnlyDisplay=_1;if(this.items){for(var i=0;i<this.items.length;i++){this.items[i].setReadOnlyDisplay(_1)}}
if(this.canEdit==false&&this.isDrawn()){this.redraw()}},isc.A.setCanEdit=function isc_ContainerItem_setCanEdit(_1){this.Super("setCanEdit",arguments);if(this.items){for(var i=0;i<this.items.length;i++){this.items[i].setCanEdit(_1)}}
if(this.canEdit==false&&this.isDrawn()){this.redraw()}});isc.B._maxIndex=isc.C+30;isc.ClassFactory.defineClass("CanvasItem","FormItem");isc.A=isc.CanvasItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.width="*";isc.A.height=null;isc.A.shouldSaveValue=false;isc.A.autoDestroy=false;isc.B.push(isc.A.$952=function isc_CanvasItem__setElementValue(_1,_2){var _3;if(_2===_3){_2=this._value}
this.showValue(_1,_2,this.form,this)},isc.A.showValue=function isc_CanvasItem_showValue(_1,_2){},isc.A.$18v=function isc_CanvasItem__canvas_resized(_1,_2,_3){this.Super("resized",arguments);if(!this.dragResizing()&&this.canvasItem){this.canvasItem.canvasResized(_1,_2,_3)}},isc.A.$18w=function isc_CanvasItem__canvas_dragResized(){this.canvasItem.canvasResized(1,1);return this.Super("dragResized",arguments)},isc.A.$18x=function isc_CanvasItem__canvas_focusInNextTabElement(_1,_2){if(isc.isA.DynamicForm(this)){return this.Super("$kf",arguments)}else
return this.canvasItem.form.$kf(_1,_2)},isc.A.$89x=function isc_CanvasItem__canvas_getTabIndexSpan(){if(isc.isA.DynamicForm(this)){return this.Super("getTabIndexSpan",arguments)}
var _1=[];this.canvasItem.$89y(this,_1);var _2=0;for(var i=0;i<_1.length;i++){if(_1[i]==this)_2+=1
else _2+=_1[i].getTabIndexSpan()}
return _2});isc.B._maxIndex=isc.C+6;isc.A=isc.CanvasItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.sizeCanvasAsTextBox=true;isc.A.editCriteriaInInnerForm=true;isc.A.applyPromptToCanvas=true;isc.B.push(isc.A.init=function isc_CanvasItem_init(){this.Super("init",arguments);this.$18y(this.form,this);this.canvasInitialized=true},isc.A.isEditable=function isc_CanvasItem_isEditable(){return false},isc.A.$kk=function isc_CanvasItem__canFocus(){if(this.canFocus==true)return this.canFocus;var _1=this.canvas;if(_1&&_1.$kk)return _1.$kk();return false},isc.A.$18y=function isc_CanvasItem__createCanvas(){if(this.createCanvas!=null){var _1=this.canvas;this.canvas=this.fireCallback("createCanvas","form,item",arguments);if(this.canvas==null)this.canvas=_1}
if(!isc.isAn.Object(this.canvas)&&!this.canvasProperties&&!window[this.canvas]){if(isc.designTime)return;this.logWarn("CanvasItem: "+(this.getFieldName()?this.getFieldName():this.getID())+" defined with no canvas property - creating a default canvas for this item.")}
if(!isc.isAn.Object(this.canvas)&&isc.isA.Canvas(window[this.canvas])){this.canvas=window[this.canvas]}
var _2={_redrawWithParent:false,$so:true,destroyWithParent:false,tabIndex:-1,disabled:this.shouldDisableCanvas()};_2.resized=this.$18v;_2.dragResized=this.$18w;_2.handleClick=function(){var _3=this.Super("handleClick",arguments);if(!isc.isA.StatefulCanvas(this)&&this.canvasItem){_3=this.canvasItem.handleClick()&&_3}
return _3}
_2.handleActivate=function(){var _3=this.Super("handleActivate",arguments);if(this.canvasItem)_3=this.canvasItem.handleClick()&&_3;return _3}
_2.handleDoubleClick=function(){var _3=this.Super("handleDoubleClick",arguments);if(this.canvasItem)_3=this.canvasItem.handleDoubleClick()&&_3;return _3}
_2.handleKeyPress=function(){var _3=this.Super("handleKeyPress",arguments);if(this.canvasItem){var _4=this.canvasItem.$18d(this.canvasItem,this.canvasItem.form,isc.EH.getKey(),isc.EH.getKeyEventCharacterValue());if(_4==false)_3=false}
return _3}
_2.handleKeyDown=function(_10,_11){var _3=this.Super("handleKeyDown",arguments);if(this.canvasItem){var _4=this.canvasItem.handleKeyDown(_10,_11);if(_4==false)_3=false}
return _3}
_2.handleKeyUp=function(_10,_11){var _3;if(this.keyUp!=null){_3=this.keyUp(_10,_11)}
if(this.canvasItem){var _4=this.canvasItem.handleKeyUp(_10,_11);if(_4==false)_3=false}
return _3}
_2.$kf=this.$18x;_2.getTabIndexSpan=this.$89x;if(this.dataSource)_2.dataSource=this.dataSource;if(this.prompt&&this.applyPromptToCanvas)_2.prompt=this.prompt;if(this.overflow!=null)_2.overflow=this.overflow;if(this.accessKey!=null)_2.accessKey=this.accessKey;if(this.showFocused!=null)_2.showFocused=this.showFocused;if(this.showFocusedAsOver!=null)_2.showFocusedAsOver=this.showFocusedAsOver;if(isc.isA.String(this.canvas)&&window[this.canvas])this.canvas=window[this.canvas];if(!isc.isA.Canvas(this.canvas)){isc.addProperties(_2,this.canvas,{canvasItem:this});if(_2.ID!=null)_2.ID=null;this.autoDestroy=true;this.addAutoChild("canvas",_2,isc.Canvas,this.containerWidget)}else{var _5={};for(var _6 in _2){_5[_6]=this.canvas[_6]}
this.canvas.$906=_5
this.canvas.setTabIndex(-1);if(this.applyPromptToCanvas)this.canvas.setPrompt(this.prompt);this.canvas.setAccessKey(this.accessKey);isc.addProperties(this.canvas,_2,{canvasItem:this});if(_2.dataSource)this.canvas.bindToDataSource();this.canvas.setDisabled(this.shouldDisableCanvas());this.containerWidget.addChild(this.canvas)}
if(this.canvas!=null){this.canvas.$129a=this.canvas.percentBox;this.canvas.percentBox="custom"}
if(this.containerWidget!=this.form){if(isc.EH.clickMaskUp()){var _7=isc.EH.getAllClickMaskIDs();for(var i=_7.length-1;i>=0;i--){var _9=isc.EH.targetIsMasked(this.containerWidget,_7[i]);if(!_9){isc.EH.addUnmaskedTarget(this.canvas,_7[i]);break}}}}
if(this.canvas)this.observe(this.canvas,"$lf","observer.canvasFocusChanged()");if(isc.isA.DynamicForm(this.canvas)){this.observe(this.canvas,"setFocusItem","observer.nestedFormSetFocusItem()")}},isc.A.setCanvas=function isc_CanvasItem_setCanvas(_1){if(isc.isA.Canvas(this.canvas)){if(this.canvas!=_1){this.$112n()}else{return}}
if(_1)this.canvas=_1;if(this.canvasInitialized){this.$18y();if(this.containerWidget.isDrawn())this.containerWidget.markForRedraw()}},isc.A.redrawn=function isc_CanvasItem_redrawn(_1){this.Super("redrawn",arguments);var _2=this.shouldDisableCanvas();if(this.canvas.isDisabled()!=_2)this.canvas.setDisabled(_2)},isc.A.drawn=function isc_CanvasItem_drawn(){this.Super("drawn",arguments);var _1=this.canvas;if(_1&&_1.parentElement!=this.containerWidget){this.$18y();this.placeCanvas()}},isc.A.destroy=function isc_CanvasItem_destroy(){this.$112n();return this.Super("destroy",arguments)},isc.A.$112n=function isc_CanvasItem__destroyCanvas(){if(this.canvas){delete this.canvas.canvasItem;var _1=this.canvas.getParentCanvas();delete this.canvas.parentElement;if(_1==this.containerWidget){this.containerWidget.removeChild(this.canvas)}
if(this.autoDestroy){this.canvas.destroy(true)}else{isc.$1025=true;isc.addProperties(this.canvas,this.canvas.$906);delete this.canvas.$906;delete isc.$1025;if(this.canvas.isDrawn()){this.canvas.clear()}
this.canvas.deparent();this.ignore(this.canvas,"$lf");if(isc.isA.DynamicForm(this.canvas)){this.ignore(this.canvas,"setFocusItem")}
this.canvas.percentBox=this.canvas.$129a;delete this.canvas.$129a;this.canvas=null}}},isc.A.placeCanvas=function isc_CanvasItem_placeCanvas(_1){var _2=this.canvas;if(_2.destroyed)return;if(this.visible==false){_2.hide();isc.Canvas.moveOffscreen(_2);return}
if(this.form&&!this.form.isDrawn()&&this.form.position==isc.Canvas.RELATIVE){_2.hide();return}
var _3=this.containerWidget,_4=_3.getHandle(),_5=isc.Element.get(this.getID()+"$18z");if(isc.Browser.isIE&&!isc.Browser.isStrict&&isc.Browser.version>=9){_5=_5&&_5.firstChild}
var _6=_5?isc.Element.getOffsets(_5,_4):[0,0],_7=_6[isc.Canvas.LEFT]+_3.getScrollLeft(),_8=_6[isc.Canvas.TOP]+_3.getScrollTop();if(!_3.$113l){var _9=_3.$tj();_7-=_9.left;_8-=_9.top}
if(_2.getParentCanvas()!=_3){_3.addChild(_2)}
_2.moveTo(_7,_8);if(_2.visibility==isc.Canvas.HIDDEN){_2.show()}
if(!_2.isDrawn()){_2.draw()}
if(!_1&&isc.Browser.isMac&&isc.Browser.isMoz&&_7==0&&_8==0){isc.Timer.setTimeout({target:this,methodName:"$180"},0)}},isc.A.$180=function isc_CanvasItem__delayedPlaceCanvas(){this.placeCanvas(true)},isc.A.cleared=function isc_CanvasItem_cleared(){this.Super("cleared",arguments);if(this.canvas&&this.canvas.isDrawn()){this.canvas.clear();this.containerWidget.$t5=true;this.containerWidget.$t6("CanvasItem canvas cleared")}},isc.A.ensureCanvasCleared=function isc_CanvasItem_ensureCanvasCleared(){if(this.canvas&&this.canvas.isDrawn()){this.canvas.clear();this.containerWidget.$t5=true;this.containerWidget.$t6("CanvasItem canvas cleared")}},isc.A.moved=function isc_CanvasItem_moved(){if(this.isDrawn()||(this.containerWidget!=null&&this.containerWidget.isDrawn())){this.placeCanvas()}},isc.A.checkCanvasOverflow=function isc_CanvasItem_checkCanvasOverflow(){return this.sizeCanvas(true)},isc.A.$143=function isc_CanvasItem__sizeTextBoxAsContentBox(){return false},isc.A.sizeCanvas=function isc_CanvasItem_sizeCanvas(_1){var _2=this.canvas;if(_1&&!(_2.overflow==isc.Canvas.VISIBLE||_2.overflow==isc.Canvas.CLIP_H))
{this.logDebug("ignoring first pass, can't overflow","canvasItemSizing");return}
var _3=this.sizeCanvasAsTextBox?this.getTextBoxWidth():this.getInnerWidth(),_4=this.sizeCanvasAsTextBox?this.getTextBoxHeight():this.getInnerHeight(),_5,_6;if(this.heightIncludesTitle&&this.showTitle&&this.getTitleOrientation()==isc.Canvas.TOP)
{_4-=this.form.getTitleHeight(this)}
_6=_4;var _7=_2.$pn||this.width;_5=(_7==null||_7=="*"?_3:_7);var _8=_2._percent_width,_9=_2._percent_height;if(_8!=null&&_8.endsWith("%")){_5=Math.round(_3*(parseInt(_8)/100))}
if(!_2.isDirty()&&(_5==null||_5<=_2.getVisibleWidth())&&_2.getHeight()<_2.getVisibleHeight()&&_6<=_2.getVisibleHeight())
{this.logDebug("not applying height: "+_6+" to overflowed Canvas with height: "+_2.getVisibleHeight(),"canvasItemSizing");_6=null}
if(!isc.isA.Number(_5))_5=null;if(!isc.isA.Number(_6))_6=null;this.$602(_5,_6,_8,_9);this.logDebug("this.$8t: "+this.$8t+", policy size: "+[_3,_4]+", specifiedSize: "+[_7,_2.$po||this.height]+", Resized Canvas to: "+[_5,_6],"canvasItemSizing");if(!_2.isDrawn()){var _10=this.containerWidget.getDrawnState();if(_10==isc.Canvas.COMPLETE||_10==isc.Canvas.HANDLE_DRAWN){isc.Canvas.moveOffscreen(_2);_2.draw()}}else _2.redrawIfDirty("CanvasItem getting new size");var _11=_2.getVisibleWidth(),_12=_2.getVisibleHeight();this.logDebug("visible size of embedded Canvas: "+[_11,_12],"canvasItemSizing");if(!_1)this.minHeight=null;else this.minHeight=_12>_2.getHeight()?_12:null;if(_12>_4)return true},isc.A.$602=function isc_CanvasItem__setCanvasSize(_1,_2,_3,_4){this.$181=true;this.canvas.resizeTo(_1,_2);if(_3!=null)this.canvas._percent_width=_3;if(_4!=null)this.canvas._percent_height=_4;this.$181=false},isc.A.getElementHTML=function isc_CanvasItem_getElementHTML(_1){var _2=this.canvas;this.sizeCanvas();this.$173(this.getGlobalTabIndex());var _3="";if(isc.Browser.isIE&&isc.Browser.isTransitional){_3="border:0px solid transparent;"}
return"<SPAN style='padding:0px;margin:0px;"+_3+"' ID='"+this.getID()+"$18z'>"+isc.Canvas.spacerHTML(_2.getVisibleWidth(),_2.getVisibleHeight())+"</SPAN>"},isc.A.getPrintHTML=function isc_CanvasItem_getPrintHTML(_1,_2){if(this.canvas==null)return isc.nbsp;return this.canvas.getPrintHTML(_1,_2)},isc.A.$159=function isc_CanvasItem__applyHandlersToElement(){this.$16c()},isc.A.getHeight=function isc_CanvasItem_getHeight(_1){var _2=this.canvas;if(_1){var _3=_2.getVisibleHeight();if(_3>_2.getHeight())return _3}
return this.canvas.$po||this.height||this.canvas.defaultHeight},isc.A.getWidth=function isc_CanvasItem_getWidth(){return this.canvas.$pn||this.width||this.canvas.defaultWidth},isc.A.setWidth=function isc_CanvasItem_setWidth(_1){this.Super("setWidth",arguments);this.canvas.setWidth(Math.max(1,this.getInnerWidth()-this.getTotalIconsWidth()))},isc.A.setHeight=function isc_CanvasItem_setHeight(_1){this.Super("setHeight",arguments);this.canvas.setHeight(this.getInnerHeight())},isc.A.canvasResized=function isc_CanvasItem_canvasResized(_1,_2,_3){if(this.$181)return;var _4=this.canvas,_5=Math.max(1,_4.getWidth()),_6=_4.getHeight();if(_3!="init"&&_3!="overflow"&&_3!="Overflow on initial draw")
{if(_1!=null&&_1!=0)_4.$pn=_5;if(_2!=null&&_2!=0)_4.$po=_6}
this.logDebug("canvas resized: new specified sizes: "+[_5,_6],"canvasItemSizing");if(!_4.isDrawn())return;this.redraw()},isc.A.shouldDisableCanvas=function isc_CanvasItem_shouldDisableCanvas(){return this.isDisabled()||this.isReadOnly()},isc.A.setReadOnlyDisplay=function isc_CanvasItem_setReadOnlyDisplay(_1){this.readOnlyDisplay=_1;if(this.canvas){if(isc.isA.DynamicForm(this.canvas)){this.canvas.readOnlyTextBoxStyle=this.getReadOnlyTextBoxStyle();this.canvas.setReadOnlyDisplay(_1)}}
if(this.readOnlyDisplayChanged)this.readOnlyDisplayChanged(_1);if(!this.getCanEdit()&&this.isDrawn())this.redraw()},isc.A.setCanEdit=function isc_CanvasItem_setCanEdit(_1){var _2=!this.isReadOnly();this.canEdit=_1;var _3=!this.isReadOnly();if(_2!=_3){if(this.canvas){if(this.canvas.setCanEdit)this.canvas.setCanEdit(_1)}
this.updateCanEdit();if(this.canEditChanged)this.canEditChanged(_1);this.redraw()}},isc.A.updateDisabled=function isc_CanvasItem_updateDisabled(_1){this.Super("updateDisabled",arguments);if(!_1||this.form==null||!this.form.contains(this.canvas)){this.canvas.setDisabled(this.shouldDisableCanvas())}},isc.A.updateCanEdit=function isc_CanvasItem_updateCanEdit(){this.Super("updateCanEdit",arguments);this.canvas.setDisabled(this.shouldDisableCanvas())},isc.A.setElementReadOnly=function isc_CanvasItem_setElementReadOnly(){this.$176(!this.isReadOnly()&&!this.isDisabled())},isc.A.$173=function isc_CanvasItem__setElementTabIndex(_1){this.$182(_1)},isc.A.$89y=function isc_CanvasItem__getCanvasTabDescendents(_1,_2){if(_1.canvasItem!=null&&_1.canvasItem!=this)return;_2.add(_1);var _3=_1.members||_1.children||{};for(var i=0;i<_3.length;i++){this.$89y(_3[i],_2)}},isc.A.$182=function isc_CanvasItem__setCanvasTabIndex(_1){var _2=this.canvas,_3=[];if(_2)this.$89y(_2,_3);for(var i=0;i<_3.length;i++){_2=_3[i];if(_2!=this.canvas&&_2.tabIndex==-1)continue;_2.$rp();_2.$vk(_1,false);_1+=_2==this.canvas?1:_2.getTabIndexSpan()}},isc.A.focusInItem=function isc_CanvasItem_focusInItem(_1){if(this.canvas){var _2=[],_3;this.$89y(this.canvas,_2);var _4=_1==false?_2.length-1:0,_5=_1==false?0:_2.length-1,_6=_1==false?-1:1;for(var i=_4;_1!=false?i<=_5:i>=_5;i+=_6){if(_2[i].isDrawn()&&_2[i].isVisible()&&!_2[i].isDisabled()&&_2[i].$kk())
{if(this.logIsDebugEnabled("syntheticTabIndex")&&_1!=null){this.logDebug("focusInItem() - shifting focus to "+(_1?"start":"end")+" - moving focus to canvas:"+_3,"syntheticTabIndex")}
_3=_2[i];break}}
if(_3){if(_1!=null){_3.focusAtEnd(_1)}else{_3.focus()}
return}}
var _8=(_1!=null),_9=_8?this.logIsDebugEnabled("syntheticTabIndex"):this.logIsDebugEnabled("nativeFocus");if(_9){this.logDebug("focusInItem() unable to find focusable canvas."+(_8?" Attempting to focus at "+(_1?"start":"end"):""),(_8?"syntheticTabIndex":"nativeFocus"))}
return this.Super("focusInItem",arguments)},isc.A.blurItem=function isc_CanvasItem_blurItem(){if(this.canvas)this.canvas.blur();return this.Super("blurItem",arguments)},isc.A.$11s=function isc_CanvasItem__moveFocusWithinItem(_1){var _2=this.logIsDebugEnabled("syntheticTabIndex");var _3=isc.EH.getFocusCanvas(),_4=this.canvas,_5=[];if(_4)this.$89y(_4,_5);for(var i=0;i<_5.length;i++){if(_3==_5[i]){var _7=_1?1:-1,_8=i+_7;var _9=_5[i],_10=_5[_8];while(_10!=null){if(_10.isDrawn()&&_10.isVisible()&&!_10.isDisabled()&&_10.$kk())
{if(!(!_1&&isc.ListGrid&&((isc.isA.ListGrid(_10.creator)&&(_10.creator.header==_10||_10.creator.frozenHeader==_10))||(isc.isA.ListGrid(_10)&&(_10.header==_9||_10.frozenHeader==_9))))&&(isc.isA.DynamicForm(_10)&&_10.$120d(_1)!=null))
{if(_2){this.logDebug("CanvasItem shifting focus "+(_1?"forward":"backward")+" from "+_3+" to "+_10,"syntheticTabIndex")}
_10.focusAtEnd(_1);return true}}
_9=_10;_8=_8+_7;_10=_5[_8]}
break}}
if(_2){this.logDebug("canvasItem.moveFocusWithinItem() current focus canvas:"+_3+", unable to find next focus canvas","syntheticTabIndex")}
return false},isc.A.canvasFocusChanged=function isc_CanvasItem_canvasFocusChanged(){var _1=this.canvas.hasFocus;if(_1){this.form.setFocusItem(this);this.elementFocus()}else this.elementBlur()},isc.A.nestedFormSetFocusItem=function isc_CanvasItem_nestedFormSetFocusItem(){this.form.setFocusItem(this)},isc.A.hasAdvancedCriteria=function isc_CanvasItem_hasAdvancedCriteria(){if(this.editCriteriaInInnerForm&&isc.isA.DynamicForm(this.canvas))return true;return this.Super("hasAdvancedCriteria",arguments)},isc.A.canEditCriterion=function isc_CanvasItem_canEditCriterion(_1){if(this.editCriteriaInInnerForm&&isc.isA.DynamicForm(this.canvas)){if(_1.operator!=this.canvas.operator)return false;for(var i=0;i<_1.criteria;i++){var _3=this.canvas.getItems(),_4;for(var _5=0;_5<_3.length;_5++){if(_3[_5].canEditCriterion(_1.criteria[i])){_4=true;break}}
if(!_4)return false}
return true}
return this.Super("canEditCriterion",arguments)},isc.A.getCriterion=function isc_CanvasItem_getCriterion(){if(this.editCriteriaInInnerForm&&isc.isA.DynamicForm(this.canvas)){return this.canvas.getValuesAsAdvancedCriteria()}else return this.Super("getCriterion",arguments)},isc.A.setCriterion=function isc_CanvasItem_setCriterion(_1){if(this.editCriteriaInInnerForm&&isc.isA.DynamicForm(this.canvas)){this.canvas.setValuesAsCriteria(_1,true)}else return this.Super("setCriterion",arguments)},isc.A.setPrompt=function isc_CanvasItem_setPrompt(_1){this.Super("setPrompt",_1);if(this.applyPromptToCanvas&&this.canvas){if(isc.isA.Canvas(this.canvas))this.canvas.setPrompt(_1);else this.canvas.prompt=_1}});isc.B._maxIndex=isc.C+45;isc.CanvasItem.registerStringMethods({createCanvas:"form,item",showValue:"displayValue,dataValue,form,item"});isc.ClassFactory.defineClass("TextItem","FormItem");isc.A=isc.TextItem;isc.A.DEFAULT="default";isc.A.UPPER="upper";isc.A.LOWER="lower";isc.A.$713={'0':{charFilter:"[0-9+\\-]"},'#':{charFilter:"[0-9]"},'9':{charFilter:"[0-9 ]"},'L':{charFilter:"[A-Za-z]"},'?':{charFilter:"[A-Za-z ]"},'a':{charFilter:"[0-9A-Za-z]"},'A':{charFilter:"[0-9A-Za-z]"},'C':{charFilter:"."}};isc.A.$126z=isc.Browser.isIE&&isc.Browser.version<=9&&(isc.Browser.version<=7||!isc.Browser.isStrict);isc.A=isc.TextItem.getPrototype();isc.A.width=150;isc.A.height=isc.Browser.isSafari?22:19;isc.A.textBoxStyle="textItem";isc.A.length=null;isc.A.canAutoComplete=true;isc.A.$183="TEXT";isc.A.$125=true;isc.A.$15i=true;isc.A.emptyStringValue=null;isc.A.redrawOnShowIcon=false;isc.A.clipValue=true;isc.A.$16b={onmousedown:(isc.Browser.isIE?function(){var _1=this,_2=isc.DynamicForm._getItemInfoFromElement(_1),_3=_2.item;if(_3)_3.$179()}:isc.Browser.isTouch&&!isc.Browser.isAndroid?function(_1){var _2=isc.EventHandler;_2.DOMevent=_1;var _3=_2.getMouseEventProperties(_1);return _2.handleMouseDown(_1,_3)}:null),onmouseup:(isc.Browser.isTouch&&!isc.Browser.isAndroid?function(_1){var _2=isc.EventHandler;_2.DOMevent=_1;var _3=_2.getMouseEventProperties(_1);return _2.handleMouseUp(_1,_3)}:null)};isc.A.printFullText=false;isc.A.saveOnEnter=true;isc.A=isc.TextItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$1163="$105x";isc.A.$186=[,"<INPUT TYPE=",," NAME='",,"' ID='",,"' handleNativeEvents=false"];isc.A.$14f=" TABINDEX=";isc.A.$oa=">";isc.A.$pi=" DISABLED ";isc.A.$187="native";isc.A.$188=" AUTOCOMPLETE=OFF ";isc.A.$14e=" ACCESSKEY=";isc.A.$19a=[" CLASS='",,"' STYLE='",,,,,,,,,,,,,,,,(isc.Browser.isMoz?"-moz-user-focus:":null),,"' "];isc.A.$19b="normal;";isc.A.$19c="ignore;";isc.A.$78v="margin-top:-1px;margin-bottom:-1px;";isc.A.applyStaticTypeFormat=false;isc.A.characterCasing=isc.TextItem.DEFAULT;isc.A.stopNavKeyPressBubbling=true;isc.A.stopCharacterKeyPressBubbling=true;isc.A.formatOnFocusChange=false;isc.A.maskPadChar=" ";isc.A.maskPromptChar="_";isc.B.push(isc.A.$712=function isc_TextItem__getShowHintInField(){return!!(this.showHint&&this.showHintInField)},isc.A.$429=function isc_TextItem__willHandleInput(){return!isc.Browser.isIE},isc.A.$43a=function isc_TextItem__nativeCutPaste(){if(this.$1164!=null){isc.Timer.clearTimeout(this.$1164)}
this.$1164=isc.Timer.setTimeout({target:this,methodName:this.$1163},0);return this.Super("$43a",arguments)},isc.A.$105w=function isc_TextItem___handleInput(){this.$105x();return this.Super("$105w",arguments)},isc.A.$1160=function isc_TextItem___handleSelect(){if(this.mask){this.$1161=this.getSelectionRange()}
return this.Super("$1160",arguments)},isc.A.$105x=function isc_TextItem__fixMaskAfterCutPaste(){delete this.$1164;if(this.mask!=null){var _1=this.$714(this._value),_2=this.getElementValue();var _3=this.getSelectionRange(),_4=_2.length-_1.length,_5;if(_1!=_2&&this.$1161&&this.$1161[0]<this.$1161[1]){_4+=(this.$1161[1]-this.$1161[0]);if(isc.Browser.isWebKit&&this.$1161[1]==_1.length){_5=_3[0]+_4}else{_5=_3[0]}}else{_5=_3[0];if(isc.Browser.isWebKit&&_5==_2.length){_3[1]=_3[0]=0;_5=_4}}
var _6=_5-_4;this.setElementValue(_2.substring(0,_6));this.$72a(_6);var _7=_2.substring(_6);for(var i=0;i<_7.length;++i){var c=_7[i],_10=_7.charCodeAt(i);if(i==0)this.$1165(_10);this.$1166(_10)}}},isc.A.getTextBoxCellCSS=function isc_TextItem_getTextBoxCellCSS(){return this.$136},isc.A.setElementReadOnly=function isc_TextItem_setElementReadOnly(_1){this.$86y(_1)},isc.A.$15s=function isc_TextItem__writeOuterTable(){var _1=this.Super("$15s",arguments);if(_1)return true;var _2=this.$xq(this.getValue());if(_2!=null&&_2!=""){return true}
return false},isc.A.getElementHTML=function isc_TextItem_getElementHTML(_1,_2){var _3=this.$xq(_2);if(this.showValueIconOnly)return _3;var _4;if(this.$68y()||this.renderAsStatic()){if(this.printFullText){_4=isc.StringBuffer.concat("<SPAN ",this.getElementStyleHTML(),">",_2==null?"&nbsp;":_2.asHTML(),"</SPAN>")}else{_4=isc.StaticTextItem.$b4.getElementHTML.apply(this,arguments)}}else{var _5=this.$186,_6=this.form,_7=_6.getID(),_8=this.getItemID();_5[0]=_3;var _9=this.$183;if(this.inputDataType!=null&&this.browserInputType==null){this.browserInputType=this.inputDataType}
if(this.browserInputType!=null){_9=this.getBrowserInputType()}
_5[2]=_9;_5[4]=this.getElementName();_5[6]=this.getDataElementId();_5[8]=this.$155();if(isc.Browser.isMoz||isc.Browser.isSafari){if(this.getBrowserSpellCheck())_5[_5.length]=" spellcheck=true";else _5[_5.length]=" spellcheck=false"}
if(isc.Browser.isSafari){if(this.browserAutoCapitalize==false){_5[_5.length]=" autocapitalize=off"}
if(this.browserAutoCorrect==false){_5[_5.length]=" autocorrect=off"}
if(this.browserInputType=="digits"){_5[_5.length]=" pattern='\\d*'"}}
if(this.$429()){_5[_5.length]=" ONINPUT='"
_5[_5.length]=this.getID()
_5[_5.length]=".$43g()'"}
_5[_5.length]=" ONSELECT='";_5[_5.length]=this.getID();_5[_5.length]=".$1162()'";if(this.isDisabled()||(this.$183=="FILE"&&this.isReadOnly())){_5[_5.length]=this.$pi}
if(this.isInactiveHTML()||this.isReadOnly()){_5[_5.length]=" READONLY=TRUE";if(isc.screenReader)_5[_5.length]=" aria-readonly=true"}
if(this.isInactiveHTML()&&_1!=null&&_1!=isc.emptyString){_5[_5.length]=" value='"+isc.makeXMLSafe(_1)+"'"}
if(this.$17h()!=this.$187){_5[_5.length]=this.$188}
_5[_5.length]=this.getElementStyleHTML();var _10=this.$154();if(_10!=null){var _11=_5.length;_5[_11]=this.$14f;isc.$bk(_5,_10,_11+1,5)}
if(this.showTitle==false&&this.accessKey!=null){_5[_5.length]=this.$14e;_5[_5.length]=this.accessKey}
_5[_5.length]=this.$oa;_4=_5.join(isc.emptyString);_5.length=8}
return _4},isc.A.$143=function isc_TextItem__sizeTextBoxAsContentBox(){if(this.$68y()){return this.Super("$143",arguments)}
return isc.Browser.isStrict},isc.A.$12x=function isc_TextItem__nativeElementBlur(_1,_2){if(this.form&&!this.form.$10u){this.form.elementChanged(this)}
var _3=this.Super("$12x",arguments);if(this.formatOnFocusChange||this.mask!=null||this.$84f==null||this.$84f!=this.getEnteredValue())
{this.refreshDisplayValue()}
if(this.$712()){var _4;var _5=this.getElementValue();if(_5===_4||_5==null||isc.is.emptyString(_5)){this.$66t()}}
if(this.$85u!=null){isc.Timer.clear(this.$85u);this.$85u=null}
return _3},isc.A.refreshDisplayValue=function isc_TextItem_refreshDisplayValue(){var _1=this.getValue();if(this.mapValueToDisplay){_1=this.mapValueToDisplay(_1)}
if(!this.hasFocus&&this.$712()&&(_1==null||_1=="")){this.$66t()}else{this.setElementValue(_1)}},isc.A.getElementStyleHTML=function isc_TextItem_getElementStyleHTML(){var _1=this.$68y()&&this.printFullText;var _2=this.$19a,_3=this.getTextBoxWidth(),_4=this.getTextBoxHeight(),_5=this.getTextBoxStyle();if((this.$712()&&this._value==null&&this.getHint()!=null)||(this.$127i()&&this.loadingDisplayValue!=null))
{_5=this.$66v()}
_2[1]=_5;if(isc.isA.Number(_3)){_2[3]=this.$93;isc.$bk(_2,_3,4,4);_2[8]=this.$38}else{_2[3]=_2[4]=_2[5]=_2[6]=_2[7]=_2[8]=null}
if(isc.isA.Number(_4)){_2[9]=this.$92;isc.$bk(_2,_4,10,4);_2[14]=this.$38}else{_2[9]=_2[10]=_2[11]=_2[12]=_2[13]=_2[14]=null}
if(this.textAlign){_2[15]=this.$14c;_2[16]=this.textAlign;_2[17]=this.$39}else{_2[15]=_2[16]=_2[17]=null}
if(isc.TextItem.$126z){_2[18]=_1?null:this.$78v}
if(isc.Browser.isMoz&&!_1){_2[19]=(this.$154()>0?this.$19b:this.$19c)}
return _2.join(isc.emptyString)},isc.A.$104v=function isc_TextItem__getMeasureCanvas(){return isc.TextItem.$78l||(isc.TextItem.$78l=isc.Canvas.create({_generated:true,top:-1000,overflow:"visible",autoDraw:true,height:1,width:1,markForRedraw:function(){}}))},isc.A.$1156=function isc_TextItem__getTextBoxScrollWidth(_1,_2,_3,_4){if(isc.Browser.isIE10||isc.Browser.isMoz){var _5=this.getTextBoxStyle(),_6=this.getElementValue();if(_6==null)_6="";else _6=String(_6);if(this.$1157==null||this.$1157.textBoxStyle!=_5||this.$1157.elementValue!=_6)
{var _7=this.$104v();if(_7.styleName!=_5)_7.setStyleName(_5);_7.setContents("<span style='white-space:nowrap'>"+isc.makeXMLSafe(_6)+"</span>");_7.redraw("value scrollWidth measurement: "+_6);var _8=_7.getScrollWidth(true);this.$1157={width:_8,textBoxStyle:_5,elementValue:_6}}
return this.$1157.width}else{return this.invokeSuper(isc.TextItem,"$1156",_1,_2,_3,_4)}},isc.A.getEnteredValue=function isc_TextItem_getEnteredValue(){return this.getElementValue()},isc.A.mapValueToDisplay=function isc_TextItem_mapValueToDisplay(_1){var _2;if(this.mask&&this.hasFocus){_2=this.$715()}else{_2=isc.FormItem.$b4.mapValueToDisplay.call(this,_1);if(_2==null)return isc.emptyString;if(this.mask){_2=this.$714(_2)}}
return _2},isc.A.mapDisplayToValue=function isc_TextItem_mapDisplayToValue(_1){var _2;if(this.mask){_2=this.$716(_1)}else{_2=this.$17d(_1)}
_2=this.$79d(_2);if(isc.is.emptyString(_2))_2=this.emptyStringValue;return _2},isc.A.saveValue=function isc_TextItem_saveValue(_1,_2){if(this.mask)this.$714(_1);this.Super("saveValue",arguments)},isc.A.setValue=function isc_TextItem_setValue(_1,_2,_3,_4){this.$66s();var _5;if(_1!==_5&&(_1==null||isc.is.emptyString(_1)))
this.emptyStringValue=_1;if(_1!==_5&&_1!=null&&this.characterCasing!=isc.TextItem.DEFAULT){if(this.characterCasing==isc.TextItem.UPPER){if(isc.isA.Array(_1))
this.arrayToUpperCase(_1);else
_1=_1.toUpperCase()}else if(this.characterCasing==isc.TextItem.LOWER){if(isc.isA.Array(_1))
this.arrayToLowerCase(_1);else
_1=_1.toLowerCase()}}
_1=this.invokeSuper(isc.TextItem,"setValue",_1,_2,_3,_4);if(!this.hasFocus&&this.$712()&&this.getHint()){var _6=this.getElementValue();if(_6===_5||_6==null||isc.is.emptyString(_6)){this.$66t()}}
return _1},isc.A.arrayToUpperCase=function isc_TextItem_arrayToUpperCase(_1){for(var i=0;i<_1.length;i++){_1[i]=_1[i].toUpperCase()}},isc.A.arrayToLowerCase=function isc_TextItem_arrayToLowerCase(_1){for(var i=0;i<_1.length;i++){_1[i]=_1[i].toLowerCase()}},isc.A.getCriteriaFieldName=function isc_TextItem_getCriteriaFieldName(){if(this.criteriaField)return this.criteriaField;if(this.displayField)return this.displayField;return this.Super("getCriteriaFieldName",arguments)},isc.A.$12v=function isc_TextItem__nativeElementFocus(_1,_2){var _3=this.$93l;var _4=this.Super("$12v",arguments);this.$66s();var _5;if(this.formatOnFocusChange){var _6=this.getElementValue();this.refreshDisplayValue()
if(_6!=this.getElementValue()&&isc.Browser.isIE){_5=true}}
if(this.mask){this.$717(false);var _7=0;var _8=this.$718;var _9=!_3&&this.$884();if(!_9){_7=this.$719();var _10=this.getValue();if(_10!=null&&_7==0&&_10.length>0){_7=this.getSelectionRange()[0]}
_8=_7}
if(!this.$85u){this.$85u=this.delayCall("$85v",[_7,_8],50)}}else{var _9=!_3&&this.$884();var _10=this.getEnteredValue();if(_9){if(_10!=null&&!this.$85u){this.$85u=this.delayCall("$85w")}}else if(_5){var _6=this.getElementValue();if(_6.length>0){this.setSelectionRange(_6.length,_6.length)}}
this.$84f=_10}
return _4},isc.A.$85v=function isc_TextItem__delayed_setSelection(_1,_2){this.$85u=null;if(!this.$820())return;this.$72a(_1,_2)},isc.A.$85w=function isc_TextItem__delayed_selectValue(){this.$85u=null;if(!this.$820())return;this.selectValue()},isc.A.setKeyPressFilter=function isc_TextItem_setKeyPressFilter(_1){if(this.mask){this.logWarn("setKeyPressFilter() ignored because mask is enabled");return}
this.keyPressFilter=_1;this.$66y=null;if(this.keyPressFilter){this.$66y=new RegExp(this.keyPressFilter)}},isc.A.init=function isc_TextItem_init(){this.Super("init",arguments);if(this.mask){if((isc.ComboBoxItem&&isc.isA.ComboBoxItem(this))||(isc.SpinnerItem&&isc.isA.SpinnerItem(this)))
{this.logWarn("item.mask is unsupported for this FormItem type. This item has mask specified as '"+this.mask+"' - ignoring.");this.mask=null}else{this.$72b();if(this.keyPressFilter){this.logWarn("init: keyPressFilter ignored because mask is enabled")}}}else if(this.keyPressFilter){this.$66y=new RegExp(this.keyPressFilter)}},isc.A.handleKeyPress=function isc_TextItem_handleKeyPress(_1,_2){var _3=this.Super("handleKeyPress",arguments);if(_3==false){return false}
if(this.isReadOnly())return _3;var _4=_1.keyName;if((isc.EventHandler.ctrlKeyDown()||isc.EventHandler.altKeyDown()||isc.EH.metaKeyDown())&&(_2.characterValue===null||_2.characterValue<128)){if(this.mask&&(_4.startsWith("Arrow_")||_4=="Home"||_4=="End")&&!isc.EH.shiftKeyDown())
{delete this.$1161}
return _3}
if((!this.characterCasing||this.characterCasing==isc.TextItem.DEFAULT)&&!this.$66y&&!this.mask)
{return _3}
var _5=_1.characterValue;if(this.mask){var _6=this.$72c();var _7=isc.Browser.isSafari;var _8=_6.begin;if(_4=="Backspace"||_4=="Delete"){if((_6.begin-_6.end)!=0||(_7&&this.$72d))
{if(isc.Browser.isSafari&&this.$72d){_6=this.$72d;this.$72d=null}
if(this.maskOverwriteMode){this.$72e(_6.begin,_6.end)}else{var _9=_6.end-_6.begin;this.$72f(_6.begin,_9)}
this.$717(true);this.$73t(_6.begin,0)}else{if(_4=="Backspace"){var _10=_8-1;if(_10>=0){if(this.maskOverwriteMode){while(!this.$72i[_10]&&_10>=0)_10--;this.$72l[_10]=this.maskPromptChar}else{this.$72f(_10)}
this.$717(true);this.$73t(_10,-1)}}else{if(this.maskOverwriteMode){if(_8<this.$718&&_8==this.$72h(_8-1)){this.$72l[_8]=this.maskPromptChar}}else{this.$72f(_8)}
this.$717(true);this.$73t(_8,0)}}
return false}else if((_4.startsWith("Arrow_")||_4=="Home"||_4=="End")&&!isc.EH.shiftKeyDown())
{delete this.$1161}
this.$1165(_5);if(_4=="Escape"){this.$72e(0,this.$718)
this.$717(true);this.$72a(this.$72g);return false}}
return this.$1166(_5)==false?false:_3},isc.A.$1166=function isc_TextItem__insertCharacterValue(_1){var _2=this.$72c(),_3=_2.begin;if((this.mask&&!this.$660(_1))||(!this.mask&&((!this.$66y&&!this.$66z(_1))||(this.$66y&&!this.$660(_1)))))
{return true}
var c=String.fromCharCode(_1);if(this.mask){var p=this.$72h(_3-1);if(p<this.$718){var _6=this.$72i[p];if(_6){if(_6.casing){c=this.$72j(c,_6.casing)}
if(_6.filter.test(c)){if(!this.maskOverwriteMode)this.$72k(p);this.$72l[p]=c;var _7=p;if(this.$717(true)){_7=this.$72h(p)}
this.$72a(_7)}}}
return false}
var _8=c;if(!this.mask)_8=this.$72j(c,this.characterCasing);if(c==_8&&!this.$66y)return true;if(this.$66y){if(this.$660(_1)&&!this.$66y.test(_8)){return false}}
if(c==_8)return true;var _9=this.getValue()||"";_2=this.getSelectionRange();if((_2[0]-_2[1])!=0){_9=_9.substring(0,_2[0])+_8+_9.substring(_2[1]+1)}else{_9=_9.substring(0,_2[0])+_8+_9.substring(_2[1])}
if(this.changeOnKeypress){this.setElementValue(_9);this.updateValue()}else{this.setValue(_9)}
this.setSelectionRange(_2[0]+1,_2[0]+1);return false},isc.A.$1165=function isc_TextItem__setUpInsertCharacterValue(_1){if(this.mask){var _2=this.$72c();var _3=isc.Browser.isSafari;if(this.$660(_1)&&((_2.begin-_2.end)!=0||(_3&&this.$72d)))
{if(isc.Browser.isSafari&&this.$72d){_2=this.$72d;this.$72d=null}
if(this.maskOverwriteMode){this.$72e(_2.begin,_2.end)}else{var _4=_2.end-_2.begin;this.$72f(_2.begin,_4)}}
if(_3&&(_2.begin-_2.end)!=0&&!this.$660(_1))
{this.$72d=_2}else{this.$72d=null}}},isc.A.$660=function isc_TextItem__isTypableCharacter(_1){return((_1>=32&&_1<=126)||_1>127)},isc.A.$66z=function isc_TextItem__isAlphaCharacter(_1){return(_1>=65&&_1<=90)||(_1>=97&&_1<=122)},isc.A.$72j=function isc_TextItem__mapCharacterCase(_1,_2){if(_2==isc.TextItem.UPPER){_1=_1.toUpperCase()}else if(_2==isc.TextItem.LOWER){_1=_1.toLowerCase()}
return _1},isc.A.setMask=function isc_TextItem_setMask(_1){if(isc.isA.ComboBoxItem(this)||isc.isA.SpinnerItem(this)){return}
if(!this.mask!=!_1&&this.$85u!=null){isc.Timer.clear(this.$85u);this.$85u=null}
this.mask=_1;this.$72b();if(this.keyPressFilter){this.$66y=null;this.logWarn("setMask: keyPressFilter ignored because mask is enabled")}
this.setValue("")},isc.A.$72b=function isc_TextItem__parseMask(){if(!this.mask)return;this.$72i=[];this.$72l=[];this.$718=0;var _1=null;var _2=false;var _3=false;var _4="";var _5=this.mask.split("");for(var i=0;i<_5.length;i++){var c=_5[i];if(c=="<"){_1=(_1==isc.TextItem.LOWER?null:isc.TextItem.LOWER)}else if(c==">"){_1=(_1==isc.TextItem.UPPER?null:isc.TextItem.UPPER)}else{if(!_2&&c=="\\"){_2=true}else if(_2){this.$72m(c,_1);_2=false}else{if(!_3&&c=="["){_3=true;_4+=c}else if(_3&&c=="]"){_3=false;_4+=c;this.$72i.push({filter:new RegExp(_4),casing:_1});if(this.$72g==null){this.$72g=this.$72i.length-1}
this.$72l.push(this.maskPromptChar);this.$718++;_4=""}else if(_3){_4+=c}else{this.$72n(c,_1)}}}}},isc.A.$72m=function isc_TextItem__addLiteralToMask(_1,_2){this.$72i.push(null);this.$72l.push(_1);this.$718++},isc.A.$72n=function isc_TextItem__addUnknownToMask(_1,_2){var _3=isc.TextItem.$713[_1];if(_3){this.$72i.push({filter:new RegExp(_3.charFilter),casing:_2});if(this.$72g==null){this.$72g=this.$72i.length-1}
this.$72l.push(this.maskPromptChar)}else{this.$72i.push(null);this.$72l.push(_1)}
this.$718++},isc.A.$72c=function isc_TextItem__getSelection(){var _1=this.getSelectionRange();if(_1==null)_1=[0,0];return{begin:_1[0],end:_1[1]}},isc.A.$72a=function isc_TextItem__setSelection(_1,_2){if(this.hasFocus){_2=(isc.isA.Number(_2)?_2:_1);this.setSelectionRange(_1,_2)}},isc.A.$72h=function isc_TextItem__getNextEntryPosition(_1){while(++_1<this.$718){if(this.$72i[_1])return _1}
return this.$718},isc.A.$719=function isc_TextItem__getEndPosition(){var _1=0;for(var i=this.$718-1;i>=0;i--){if(this.$72i[i]){if(this.$72l[i]==this.maskPromptChar)
_1=i;else
break}}
return _1},isc.A.$714=function isc_TextItem__maskValue(_1){if(_1==null)_1="";if(!isc.isA.String(_1))_1=_1.toString();this.$72e(0,this.$718);var _2=-1;if(this.maskSaveLiterals){for(var i=0,_4=0;i<_1.length;i++){if(this.$72i[i]){var c=_1.charAt(i);if(c==" "){if(!this.hasFocus)
this.$72l[i]=c}else if(this.$72i[i].filter.test(c)){this.$72l[i]=c;_2=i}}}}else{for(var i=0,_4=0;i<this.$718;i++){if(this.$72i[i]){while(_4<_1.length){var c=_1.charAt(_4++);var _6=this.$72i[i];if(c==" "){if(!this.hasFocus){this.$72l[i]=(_6.casing?this.$72j(c,_6.casing):c)}
break}else if(_6.filter.test(c)){this.$72l[i]=(_6.casing?this.$72j(c,_6.casing):c);_2=i;break}}
if(_4>_1.length)break}}}
_1=this.$715();if(!this.hasFocus){if(_2>=0){for(var i=_2+1;i<this.$718;i++){if(this.$72i[i])break;_2++}}
_1=_1.substring(0,_2+1)}
return _1},isc.A.$716=function isc_TextItem__unmaskValue(_1){if(_1==null)_1="";var _2=false;var _3=-1;var _4="";for(var i=0,_6=0;i<_1.length;i++){var c=_1.charAt(i);if(this.$72i[i]){if(c!=this.maskPromptChar&&this.$72i[i].filter.test(c)){_4+=c;_2=true;_3=_6++}else{_4+=this.maskPadChar;_6++}}else if(this.maskSaveLiterals){_4+=c;_3=_6++}}
if(!_2){_4=""}else{_4=_4.substring(0,_3+1)}
return _4},isc.A.$715=function isc_TextItem__getMaskBuffer(){if(this.$72l==null)return"";return this.$72l.join('')},isc.A.$72e=function isc_TextItem__clearMaskBuffer(_1,_2){for(var i=_1;i<_2&&i<this.$718;i++){if(this.$72i[i])this.$72l[i]=this.maskPromptChar}},isc.A.$717=function isc_TextItem__saveMaskBuffer(_1){var _2=this.$715();this.setElementValue(_2);if(_1&&this.changeOnKeypress){var _3=this.$716(_2);var _4=this.handleChange(_3,this._value);if(this.destroyed)return;_3=this.$17n;this.updateAppearance(_3);this.saveValue(_3);this.handleChanged(_3);return _4}
return true},isc.A.$73t=function isc_TextItem__positionCaret(_1,_2){if(_2<0){while(!this.$72i[_1]&&_1>=0)_1--}else{while(!this.$72i[_1]&&_1<this.$718)_1++}
this.$72a(_1)},isc.A.$72f=function isc_TextItem__shiftMaskBufferLeft(_1,_2){if(!_2)_2=1;while(!this.$72i[_1]&&_1>=0)_1--;for(var i=_1,_4=i+_2-1;i<this.$718;i++,_4=j){if(this.$72i[i]){this.$72l[i]=this.maskPromptChar;var j=this.$72h(_4++);var _6=this.$72i[i];var c=this.$72l[j];if(j<this.$718&&_6.filter.test(c)){if(_6.casing){c=this.$72j(c,_6.casing)}
this.$72l[i]=c}else{while(i<j){if(this.$72i[i])this.$72l[i]=this.maskPromptChar;i++}
break}}}},isc.A.$72k=function isc_TextItem__shiftMaskBufferRight(_1){for(var i=_1,c=this.maskPromptChar;i<this.$718;i++){var _4=this.$72i[i];if(_4){if(_4.casing){c=this.$72j(c,_4.casing)}
var j=this.$72h(i);var t=this.$72l[i];this.$72l[i]=c;if(j<this.$718&&this.$72i[j].filter.test(t)){c=t}else{break}}}});isc.B._maxIndex=isc.C+51;isc.ClassFactory.defineClass("IntegerItem","TextItem");isc.A=isc.IntegerItem.getPrototype();isc.A.type="integer";isc.ClassFactory.defineClass("FloatItem","TextItem");isc.A=isc.FloatItem.getPrototype();isc.A.$956=false;isc.A.type="float";isc.A=isc.FloatItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.mapValueToDisplay=function isc_FloatItem_mapValueToDisplay(_1){if(!this.$956){var _2=null;if(isc.isA.String(_1)&&(this.type==null||!this.type.startsWith("locale"))){var _3=window.parseFloat(_1);if(!window.isNaN(_3)&&_3==_1){_2=_3}}else if(isc.isA.Number(_1)){_2=_1}
if(_2!=null){if(this.format){return isc.NumberUtil.format(_2,this.format)}else if(this.$65!=null){return this.$65(_2,this)}else if(this.decimalPrecision!=null||this.decimalPad!=null){return isc.Canvas.getFloatValueAsString(_2,this.decimalPrecision,this.decimalPad)}else if(this.precision!=null){return isc.Canvas.getNumberValueAsString(_2,this.precision,"float")}}}
return this.Super("mapValueToDisplay",arguments)},isc.A.handleEditorEnter=function isc_FloatItem_handleEditorEnter(){this.$956=true;var _1=this.getValue(),_2=this.mapValueToDisplay(_1);var _3=this.getEnteredValue();if(_3!=_2){var _4=this.getSelectionRange(),_5;if(_3.length==_2.length||(_4[0]==0&&_4[1]==0))
{_5=_4}else if(_4[1]==_3.length){if(_4[0]==0){_5=[0,_2.length]}else if(_4[0]==_3.length){_5=[_2.length,_2.length]}}
this.setElementValue(_2,_1);if(_5!=null){this.setSelectionRange(_5[0],_5[1])}}
this.Super("handleEditorEnter",arguments)},isc.A.handleEditorExit=function isc_FloatItem_handleEditorExit(){this.Super("handleEditorExit",arguments);this.$956=false;var _1=this.getValue(),_2=this.mapValueToDisplay(_1);this.setElementValue(_2,_1)});isc.B._maxIndex=isc.C+3;isc.ClassFactory.defineClass("DoubleItem","FloatItem");isc.ClassFactory.defineClass("BlurbItem","FormItem");isc.A=isc.BlurbItem.getPrototype();isc.A.shouldSaveValue=false;isc.A.height=null;isc.A.showTitle=false;isc.A.colSpan="*";isc.A.startRow=true;isc.A.endRow=true;isc.A.textBoxStyle="staticTextItem";isc.A.canSelectText=true;isc.A.emptyDisplayValue="&nbsp;";isc.A.clipValue=false;isc.ClassFactory.defineClass("ButtonItem","CanvasItem");isc.A=isc.ButtonItem.getPrototype();isc.A.canFocus=true;isc.A.shouldSaveValue=false;isc.A.height=null;isc.A.width=null;isc.A.titleStyle=null;isc.A.showTitle=false;isc.A.startRow=true;isc.A.endRow=true;isc.A.buttonConstructor=isc.Button;isc.A.autoFit=true;isc.A.buttonDefaults={getTitle:function(){return this.canvasItem.getTitle()}};isc.A.autoDestroy=true;isc.A.readOnlyDisplay="disabled";isc.A=isc.ButtonItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$19d={width:true,height:true,icon:true};isc.B.push(isc.A.getTitleHTML=function isc_ButtonItem_getTitleHTML(){return this.getTitle()},isc.A.setTitle=function isc_ButtonItem_setTitle(_1){this.title=_1;if(this.canvas)this.canvas.setTitle(_1)},isc.A.$18y=function isc_ButtonItem__createCanvas(){var _1={canFocus:this.$kk(),disabled:this.isDisabled(),width:this.width};if(this.height!=null)_1.height=this.height;if(this.icon)_1.icon=this.icon;if(this.titleStyle)_1.titleStyle=this.titleStyle;if(this.baseStyle)_1.baseStyle=this.baseStyle;if(this.autoFit!=null)_1.autoFit=this.autoFit;this.canvas=this.button=this.createAutoChild("button",_1,this.buttonConstructor);this.Super("$18y",arguments)},isc.A.$602=function isc_ButtonItem__setCanvasSize(_1,_2,_3,_4){if(_1==null&&_2==null)return;return this.invokeSuper(isc.ButtonItem,"$602",_1,_2,_3,_4)},isc.A.readOnlyDisplayChanged=function isc_ButtonItem_readOnlyDisplayChanged(_1){if(this.button){this.button.setDisabled(this.isReadOnly())}},isc.A.canEditChanged=function isc_ButtonItem_canEditChanged(_1){if(this.button){this.button.setCanEdit(!this.isReadOnly());this.button.setDisabled(this.isDisabled())}},isc.A.propertyChanged=function isc_ButtonItem_propertyChanged(_1,_2){if(this.canvas!=null&&this.$19d[_1]){this.canvas.setProperty(_1,_2)}},isc.A.handleClick=function isc_ButtonItem_handleClick(){if(this.editingOn){if(isc.VisualBuilder&&isc.VisualBuilder.titleEditEvent=="click")this.editClick();return false}
return this.Super("handleClick",arguments)},isc.A.handleDoubleClick=function isc_ButtonItem_handleDoubleClick(){if(this.editingOn){if(isc.VisualBuilder&&isc.VisualBuilder.titleEditEvent=="doubleClick")this.editClick();return false}
return this.Super("handleDoubleClick",arguments)},isc.A.$85m=function isc_ButtonItem__shouldAllowExpressions(){return false});isc.B._maxIndex=isc.C+10;if(isc.ListGrid){isc.ClassFactory.defineInterface("PickList");isc.ClassFactory.defineClass("PickListMenu","ScrollingMenu");isc.A=isc.PickListMenu;isc.A.$51t={};isc.A.pickListCacheLimit=50;isc.A=isc.PickListMenu.getPrototype();isc.A.useAllDataSourceFields=false;isc.A.tabIndex=-1;isc.A.canResizeFields=false;isc.A.canFreezeFields=false;isc.A.styleName="pickListMenu";isc.A.bodyStyleName="pickListMenuBody";isc.A.normalCellHeight=16;isc.A.scrollToCellXPosition="left";isc.A.scrollToCellYPosition="top";isc.A=isc.PickListMenu.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.showOverAsSelected=true;isc.A.$19e="background-color:";isc.A.$19f="color:";isc.B.push(isc.A.getValueIcon=function isc_PickListMenu_getValueIcon(_1,_2,_3){var _4=this.formItem;var _5=_4&&!_4.suppressValueIcons&&(_4.valueIcons!=null||_4.getValueIcon!=null);if(_5){var _6=_4.getValueFieldName(),_7=_4.valueIconField||_4.getDisplayFieldName()||_6;if(this.getFieldName(_1)==_7){return _4.$144(_3[_6])}}
return this.Super("getValueIcon",arguments)},isc.A.getArrowKeyAction=function isc_PickListMenu_getArrowKeyAction(){return this.allowMultiSelect?"focus":"select"},isc.A.rowClick=function isc_PickListMenu_rowClick(_1,_2,_3,_4){this.$119p=_4;this.Super("rowClick",arguments);delete this.$119p},isc.A.recordClick=function isc_PickListMenu_recordClick(_1,_2,_3,_4,_5,_6,_7){if(_2[_1.recordCanSelectProperty]==false)return;var _8=!this.allowMultiSelect;if(this.$119p){var _9=(isc.EH.getKey()=="Enter");if(!_9)return;_8=true}
if(_8)this.hide();if(_2!=null)this.itemClick(_2)},isc.A.selectOnGeneratedCellClick=function isc_PickListMenu_selectOnGeneratedCellClick(_1,_2,_3,_4){if(this.allowMultiSelect&&isc.EH.getKey()=="Enter")return false;return this.Super("selectOnGeneratedCellClick",arguments)},isc.A.headerClick=function isc_PickListMenu_headerClick(_1,_2){var _3=this.Super("headerClick",arguments);var _4=this.getField(_1);if(this.isCheckboxField(_4)&&this.allowMultiSelect){this.multiSelectChanged()}
return _3},isc.A.multiSelectChanged=function isc_PickListMenu_multiSelectChanged(){var _1=this.formItem,_2=_1.getValueFieldName(),_3=this.getSelection(),_4=true,_5=[];for(var i=0;i<_3.length;i++){_4=false;var _7=_3[i];_5.add(_7[_2])}
_1.pickValue(_4?null:_5)},isc.A.itemClick=function isc_PickListMenu_itemClick(_1){if(this.allowMultiSelect){this.multiSelectChanged()}else{var _2=this.formItem,_3=_2.getValueFieldName();var _4=_1[_3];_2.pickValue(_4)}},isc.A.hide=function isc_PickListMenu_hide(_1,_2,_3,_4){var _5=this.isVisible()&&this.isDrawn();this.invokeSuper(isc.PickListMenu,"hide",_1,_2,_3,_4);if(!this.formItem)return;if(_5&&this.showModal)this.formItem.focusInItem();this.formItem.$19g=null;if(_5)this.formItem.$19h();delete this.formItem.$19i;this.clearLastHilite()},isc.A.show=function isc_PickListMenu_show(){var _1=this.isVisible()&&this.isDrawn();this.generateClickOnEnter=true;this.generateClickOnSpace=this.allowMultiSelect;this.bringToFront();this.Super("show",arguments);if(!_1){this.formItem.$19j()}},isc.A.showClickMask=function isc_PickListMenu_showClickMask(){if(!this.clickMaskUp(this.getID())){var _1=this.Super("showClickMask",arguments);if(this.formItem){var _2=this.formItem.form,_3=isc.EH.clickMaskRegistry.find("ID",_1);if(_3.$li)_3.$li=null}}},isc.A.getCellCSSText=function isc_PickListMenu_getCellCSSText(_1,_2,_3){if(this.selection!=null&&_1==this.selection.getSelectedRecord()){var _4=[];if(this.hiliteColor!=null)
_4[0]=this.$19e
_4[1]=this.hiliteColor
_4[2]=isc.$19k;if(this.hiliteTextColor!=null)
_4[3]=this.$19f;_4[4]=this.hiliteTextColor;_4[5]=isc.semi;return _4.join(isc.emptyString)}},isc.A.keyDown=function isc_PickListMenu_keyDown(){var _1=isc.EH.lastEvent.keyName;if(_1=="Tab"){this.hide();return false}},isc.A.$315=function isc_PickListMenu__formatCellValue(_1,_2,_3,_4,_5){if(this.formItem==null)return this.Super("$315",arguments);var _6=this.getFieldName(_5);_1=this.formItem.formatPickListValue(_1,_6,_2);return this.Super("$315",[_1,_2,_3,_4,_5])},isc.A.bodyKeyPress=function isc_PickListMenu_bodyKeyPress(_1,_2){var _3=isc.EH.lastEvent.keyName;if(isc.Browser.isSafari){if(_3=="Tab"){this.hide();return false}}
var _4=isc.EH.getKeyEventCharacterValue();if(_4!=null){var _5=this.formItem.getAllLocalOptions();if(isc.isAn.Array(_5)&&_5.length>1){var _6=String.fromCharCode(_4),_6=_6.toLowerCase(),_7=this.formItem,_8=_7.getValueFieldName(),_9=_5.indexOf(this.getSelectedRecord()),_10=_9<(_5.length-1)?_9+1:0;while(_10!=_9){if(_9<0)_9=0;var _11=_5[_10][_8];_11=_7.mapValueToDisplay(_11);if(isc.isA.String(_11)&&_11.length>0&&_11.charAt(0).toLowerCase()==_6){this.scrollRecordIntoView(_10);this.$88(_10);return}
_10+=1;if(_10>=_5.length)_10=0}}}
if(this.getFocusRow()==null&&_3=="Enter"){this.cancel();return false}
return this.Super("bodyKeyPress",arguments)},isc.A.dataChanged=function isc_PickListMenu_dataChanged(_1,_2,_3,_4){var _5=this.data;if(!_5)return;var _5=this.requestVisibleRows();if(_5&&Array.isLoading(_5[0])){return}
this.Super("dataChanged",arguments);var _6=this.formItem;if(_2&&this.getSelectedRecord()==_2&&_6){var _7=this.data.indexOf(_2),_8=_7==-1?null:this.data.get(_7);if(_8){var _9=_6.getValueFieldName();_6.setValue(_8[_9])}else{_6.clearValue()}}},isc.A.createBodies=function isc_PickListMenu_createBodies(){if(this.body&&this.body.$100r)delete this.body.$100r;this.Super("createBodies",arguments)});isc.B._maxIndex=isc.C+17;isc.PickListMenu.changeDefaults("bodyDefaults",{remapOverStyles:[0,2,2,2,4,6,6,6,8,10,10,10,12],getCellStyleName:function(_1,_2,_3,_4){if(this.grid&&this.grid.showOverAsSelected){_1=this.remapOverStyles[_1]}
return this.Super("getCellStyleName",[_1,_2,_3,_4],arguments)}});isc.PickList.addInterfaceProperties({pickListHeight:300,emptyPickListHeight:100,emptyPickListMessage:"No items to show",pickListMaxWidth:400,pickListBaseStyle:"pickListCell",pickListApplyRowNumberStyle:false,pickListAnimationTime:200,fetchDelay:200,pickListCellHeight:16,pickListHeaderHeight:22,allowMultiSelect:true});isc.PickList.addInterfaceMethods({showPickList:function(_1,_2){this.$19g=true;if(!this.pickList)this.makePickList(_1,null,_2);else this.setUpPickList(_1,_2);if(!_1&&(!this.pickList.isDrawn()||!this.pickList.isVisible())){this.$19l()}},$19l:function(){var _1=this.pickList;if(!this.isDrawn()||(this.shouldHideEmptyPickList()&&_1.getTotalRows()<1)){return}
this.placePickList();if(!_1.isDrawn()||!_1.isVisible()){if(this.animatePickList)this.pickList.animateShow("wipe",null,this.pickListAnimationTime);else
this.pickList.show()}},fetchData:function(_1,_2,_3){if(this.getOptionDataSource()==null){this.logWarn("fetchData() called for a non-databound pickList. Ignoring");return}
if(_2==null)_2={};if(_1!=null){_2.internalClientContext={$03:_1}}
_2.componentContext=this.form.ID+"."+this.name;if(!this.pickList){this.makePickList(false,_2,false,true)}else{this.setUpPickList(false,false,_2,!_3)}},mapValueToDisplay:function(_1,_2,_3,_4){if(this.isSelectOther){if(_1==this.otherValue)return this.otherTitle;if(_1==this.separatorValue)return this.separatorTitle}
return this.invokeSuper(isc.SelectItem,"mapValueToDisplay",_1,_2,_3,_4)},makePickList:function(_1,_2,_3,_4){var _5=isc.timeStamp();var _6=this.reusePickList();if(_6){this.pickList=this.getSharedPickList()}
var _7=this.pickList!=null;if(!this.pickList){var _8=this.pickListProperties||{};if(this.multiple){if(_8.noDoubleClicks==null){_8.noDoubleClicks=true}}else{if(_8.noDoubleClicks==null){_8.noDoubleClicks=false}}
this.pickList=isc.PickListMenu.create({headerHeight:this.pickListHeaderHeight},_8);var _9=this.pickList.dataProperties||{};if(this.filterLocally)_9.fetchMode="local";if(this.useClientFiltering!=null){_9.useClientFiltering=this.useClientFiltering}
this.pickList.dataProperties=_9;if(_6)this.storeSharedPickList()}
if(this.fetchDisplayedFieldsOnly&&this.optionDataSource&&(!this.optionFilterContext||!this.optionFilterContext.outputs))
{var _10=this.pickListFields||[];if(this.valueField)_10.add(this.valueField);if(this.displayField)_10.add(this.displayField);if(_10.length>0){if(!this.optionFilterContext)this.optionFilterContext={};var _11=[];for(var i=0;i<_10.length;i++){if(isc.isA.String(_10[i])){_11.add(_10[i])}else{_11.add(_10[i].name)}}
this.optionFilterContext.outputs=_11.getUniqueItems().join(',')}}
this.setUpPickList(_1,_3,_2,_4);if(this.logIsInfoEnabled("timing"))
this.logInfo("Time to initially create pickList:"+(isc.timeStamp()-_5),"timing")},cachePickListResults:true,reusePickList:function(){return this.pickListProperties==null&&this.cachePickListResults},getSharedPickList:function(){if(this.$19m()){var _1=this.getOptionDataSource().getID(),_2=isc.PickListMenu.$51t[_1];if(_2){for(var i=0;i<_2.length;i++){if(_2[i].$51u==this.pickListFields){_2[i].$511=isc.timeStamp();var _4=_2[i].$51v;if(_4.destroyed){_2.removeAt(i);this.$82l(_4);i--;continue}
return _4}}}
return null}else{if(isc.PickList.$14w&&isc.PickList.$14w.destroyed){this.$82l(isc.PickList.$14w);isc.PickList.$14w=null;return null}
return isc.PickList.$14w}},$82l:function(_1){if(_1.$513!=null){for(var _2 in _1.$513){if(window[_2]&&window[_2].pickList==_1){delete window[_2].pickList}}}},storeSharedPickList:function(){if(this.$19m()){var _1=this.getOptionDataSource().getID(),_2=isc.PickListMenu.$51t;if(!_2[_1])_2[_1]=[];var _3={$51v:this.pickList,$51u:this.pickListFields,$511:isc.timeStamp()}
_2[_1].add(_3);if(isc.PickListMenu.$512==null){isc.PickListMenu.$512=1}else{isc.PickListMenu.$512+=1;if(isc.PickListMenu.$512>isc.PickListMenu.pickListCacheLimit){var _4,_5=isc.timeStamp();for(var _1 in _2){var _6=_2[_1];for(var i=0;i<_6.length;i++){var _8=_6[i];if(_8.$511<=_5&&(_8!=_3)){_4=_8;_5=_8.$511}}}
if(_4){isc.PickListMenu.$512-=1;var _9=_4.$51v;var _6=_2[_9.getDataSource().getID()];_6.remove(_4);if(_9.$513!=null){for(var _10 in _9.$513){if(window[_10]&&window[_10].pickList==_9)
delete window[_10].pickList}}
_4.$51v.delayCall("destroy")}}}}else{isc.PickList.$14w=this.pickList}},getPickListCellHeight:function(){var _1=this.pickListCellHeight;if(this.pickListProperties&&this.pickListProperties.cellHeight!=null){_1=this.pickListProperties.cellHeight}
if(this.valueIcons!=null||this.getValueIcon!=null){var _2=this.getValueIconHeight();if(_2>_1)_1=_2}
return _1},setUpPickList:function(_1,_2,_3,_4){var _5=this.pickList;var _6=this.getPickListCellHeight();_5.setCellHeight(_6);this.$19n();this.setUpPickListFields();if(!_5.originalEmptyMessage)_5.originalEmptyMessage=_5.emptyMessage;_5.emptyMessage=this.emptyPickListMessage||_5.originalEmptyMessage;this.pickList.emptyMessageHeight=this.emptyPickListHeight;this.pickList.setWidth(Math.max(1,this.pickListWidth||this.getElementWidth()));var _7,_8=this.pickListProperties;if(_8&&_8.autoFitFieldWidths!=null)_7=_8.autoFitFieldWidths;else _7=this.autoSizePickList&&!this.pickList.showHeader;this.pickList.autoFitFieldWidths=_7;this.pickList.setAutoFitData(_7?"both":"vertical");var _9=1;if(this.pickList.showHeader)_9+=this.pickList.headerHeight;if(this.pickList.showFilterEditor)_9+=this.pickList.filterEditorHeight;this.pickList.setHeight(_9);this.pickList.setAutoFitMaxHeight(this.pickListHeight);this.pickList.setAutoFitMaxWidth(this.pickListMaxWidth);var _10=this.sortField==null?this.sortFieldNum:this.sortField;if(_10!=null){var _11=this.$19m();var _12=false;if(this.pickList.data&&isc.isA.ResultSet(this.pickList.data)){var _13=this.getOptionDataSource();if(this.pickList.getDataSource()!=_13){_12=true}else{var _14=this.getPickListFilterCriteria(),_15={textMatchStyle:this.textMatchStyle,showPrompt:false};if(this.optionFilterContext!=null){isc.addProperties(_15,this.optionFilterContext)}
if(this.optionOperationId!=null){_15.operationId=this.optionOperationId}
if(_3!=null){isc.addProperties(_15,_3)}
if(!this.pickList.useExistingDataModel(_14,_15.operationId,_15))
{_12=true}}}
if(_12)this.pickList.setData([]);this.pickList.sort(_10,this.sortDirection)}
this.filterPickList(_1,_2,_3,_4)},$19n:function(){var _1=this.pickList.formItem;if(_1==this)return;var _2={};isc.addProperties(_2,{formItem:this,normalBaseStyle:this.pickListBaseStyle,tallBaseStyle:(this.pickListTallBaseStyle||this.pickListBaseStyle),applyRowNumberStyle:this.pickListApplyRowNumberStyle,hiliteColor:this.pickListHiliteColor,hiliteTextColor:this.pickListHiliteTextColor,showModal:this.modalPickList,dateFormatter:this.dateFormatter,dataArrived:function(_3,_4){if(isc.$cv)arguments.$cw=this;this.Super("dataArrived",arguments);if(this.formItem)this.formItem.handleDataArrived(_3,_4,this.data)}});if(this.multiple&&this.multipleAppearance=="picklist"&&this.allowMultiSelect)
{_2.selectionAppearance="checkbox";_2.allowMultiSelect=true;_2.enableSelectOnRowOver=false;_2.selectionType="simple";_2.$859=false;_2.className="listGrid";_2.bodyStyleName="gridBody"}else{_2.selectionAppearance="rowStyle";_2.allowMultiSelect=false;_2.enableSelectOnRowOver=true;_2.selectionType="single";_2.$859=true;_2.className="scrollingMenu",_2.bodyStyleName="pickListMenuBody"}
if(this.pickListProperties){isc.addProperties(_2,this.pickListProperties)}
this.pickList.setProperties(_2);if(!this.pickList.$513)this.pickList.$513={};this.pickList.$513[this.getID()]=true;if(_1){if(this.pickList.isObserving(_1.containerWidget,"hide")){this.pickList.ignore(_1.containerWidget,"hide")}
if(this.pickList.isObserving(_1.containerWidget,"clear")){this.pickList.ignore(_1.containerWidget,"clear")}}
if(!this.pickList.isObserving(this.containerWidget,"hide")){this.pickList.observe(this.containerWidget,"hide","observer.hide();")}
if(!this.pickList.isObserving(this.containerWidget,"clear")){this.pickList.observe(this.containerWidget,"clear","if(observer.isDrawn())observer.clear();")}
this.pickList.markForRedraw()},getPickListFields:function(){if(this.pickListFields){var _1=this.emptyDisplayValue;if(_1!=null){var _2=this.pickListFields,_3=this.getValueFieldName(),_4=this.getDisplayFieldName(),_5,_6;if((_5=_2.find("name",_4))!=null&&_5.emptyCellValue===_6)_5.emptyCellValue=_1;else if((_5=_2.find("name",_3))!=null&&_5.emptyCellValue===_6)_5.emptyCellValue=_1}
return this.pickListFields}
var _4=this.getDisplayFieldName(),_7;if(_4!=null){_7={width:"*",name:_4}
_7.formatCellValue=this.$500}else{_7={width:"*",name:this.getValueFieldName(),valueMap:this.getValueMap()}}
if(this.canEscapeHTML&&(this.escapeHTML||this.outputAsHTML||this.asHTML))
{_7.escapeHTML=true}
if(this.emptyDisplayValue!=null)_7.emptyCellValue=this.emptyDisplayValue;if(this.dateFormatter!=null){_7.type="date"}
_7.$720=true;return[_7]},$500:function(_1,_2,_3,_4,_5){if(_1!=null)return _1;var _6=_5.formItem,_7=_6?_6.getValueFieldName():null;if(_2[_7]==null&&_6)return _6.emptyCellValue;return _1},formatPickListValue:function(_1,_2,_3){if(this.pickList.getField(_2).$720){return this.$17c(_1)}
return _1},getPickListFilterCriteria:function(){var _1=isc.addProperties({},this.optionCriteria);return isc.DataSource.combineCriteria(_1,this.pickListCriteria,null,this.textMatchStyle)},getAllLocalOptions:function(){return this.$19m()?null:this.getClientPickListData()},$19o:function(_1,_2,_3){var _4=this.getOptionDataSource(),_5=this.getDisplayFieldName(),_6=this.getValueFieldName();if(_5==null&&_4==null){return}
if((_4==null||!_3)&&(_5==null||_5==_6))return _1;var _7=this.getPickListResultSet();var _8;if(_7!=null){if(isc.isAn.Array(_7)){_8=_7}else{_8=_7.allRows||_7.localData}}
var _9=(_4?_4.getCacheData():null);if(_8==null){_8=_9;if(_8==null)return}
var _10=(_2?_6:_5||_6),_11=(_2?_5||_6:_6);var _12;if(isc.isAn.Array(_1)){_12="";var _13=isc.shallowClone(_1);for(var i=0;i<_1.length;i++){var _15=_13[i];var _16=_8.find(_11,_1[i]);if(_16==null&&_9!=null&&_8!=_9){_16=_9.find(_11,_1[i])}
if(_16!=null){_12+=_16[_10]}else continue;if(i!=_1.length-1)_12+=this.multipleValueSeparator}}else{var _16=_8.find(_11,_1);if(_16==null&&_9!=null&&_8!=_9){_16=_9.find(_11,_1)}
if(_16!=null){_12=_16[_10]}}
return _12},getPickListResultSet:function(){var _1=this.pickList&&this.pickList.formItem==this&&!this.pickList.destroyed?(this.pickList.originalData||this.pickList.data):null;return _1},$18q:"true",setUpPickListFields:function(){var _1=this.getPickListFields(),_2=this.pickList.fields;var _3=!_2||(_2.length!=_1.length);if(!_3){for(var i=0;i<_1.length;i++){var _5=_1[i],_6=_2[i];for(var _7 in _5){if(_5[_7]!=_6[_7]){_3=true;break}}
if(_3)break}}
if(!_3)return;for(var i=0;i<_1.length;i++){if(_1[i].showIf==null){_1[i].showIf=this.$18q}}
if(this.valueIcons!=null||this.getValueIcon!=null){for(var i=0;i<_1.length;i++){var _5=_1[i];if(_5[this.form.fieldIdProperty]==this.getValueFieldName()){if(_5.valueIconHeight==null)
_5.valueIconHeight=this.valueIconHeight;if(_5.valueIconWidth==null)
_5.valueIconWidth=this.valueIconWidth;if(_5.valueIconSize==null)
_5.valueIconSize=this.valueIconSize;if(_5.imageURLPrefix==null)
_5.imageURLPrefix=this.imageURLPrefix||this.baseURL||this.imgDir;if(_5.imageURLSuffix==null)
_5.imageURLSuffix=this.imageURLSuffix}}}
this.pickList.setFields(_1);var _8;if(this.pickListHeaderHeight==0)_8=false;else if(this.pickListProperties){if(this.pickListProperties.showHeader!=null){_8=this.pickListProperties.showHeader}else if(this.pickListProperties.headerHeight==0){_8=false}};if(_8==null){var _9=this.pickList.getFields();var _10=(this.multiple&&this.multipleAppearance=="picklist"&&this.allowMultiSelect==true)?2:1;_8=(_9.length>_10)}
if(_8){this.pickList.setHeaderHeight(this.pickListHeaderHeight);this.pickList.setShowHeader(true)}else{this.pickList.setShowHeader(false)}},$19m:function(){if(this.optionDataSource)return true;if((this.showOptionsFromDataSource||!this.valueMap)&&this.getOptionDataSource()!=null)return true;return false},filterPickList:function(_1,_2,_3,_4){if(!_2)
this.$19p(_1,_3,null,_4);else{this.$82m=true;this.$43i=_1;this.fireOnPause("fetch",{target:this,methodName:"$19p",args:[null,_3,true,_4]},this.fetchDelay)}},$19p:function(_1,_2,_3,_4){this.$82m=null;if(_3)_1=this.$43i;delete this.$43i;this.$19i=_1;var _5=this.$19m();if(_5){var _6=this.getOptionDataSource();if(this.pickList.getDataSource()!=_6){this.pickList.setDataSource(_6,(this.pickList.completeFields||this.pickList.fields))}
this.filterDataBoundPickList(_2,_4)}else{var _7=this.filterClientPickListData();if(this.pickList.data!=_7)this.pickList.setData(_7);this.filterComplete()}},$61x:function(_1){if(!this.$19m()||!_1)return;var _2=this.getOptionDataSource();if(_1.getDataSource()==_2&&_1.data){var _3=_1.data.context,_4=_1.data.criteria;if(_3&&_3.textMatchStyle!=this.textMatchStyle)return true;if(this.optionFilterContext!=null){for(var _5 in this.optionFilterContext){if(this.optionFilterContext[_5]!=_3[_5])return true}}
if(_2.compareCriteria(_4,this.getPickListFilterCriteria(),_3)==0){return false}}
return true},getFirstOptionValue:function(){var _1;if(this.$19m()){var _2=this.pickList||(this.reusePickList()?this.getSharedPickList():null);if(_2&&!this.$61x(_2)){var _3=_2.data.get(0);if(_3==null||Array.isLoading(_3)){_1=null}else{_1=_3[this.getValueFieldName()]}}else{this.fetchData(null,null,true)}}else{var _4=this.valueMap;if(isc.isAn.Array(_4))_1=_4[0];else if(isc.isAn.Object(_4)){for(var _5 in _4){_1=_5;break}}}
return _1},getClientPickListData:function(){return isc.PickList.optionsFromValueMap(this)},$957:function(_1){var _2=["moved","parentMoved","scrolled","parentScrolled"];for(var i=0;i<_2.length;i++){var _4=this.pickList.isObserving(this.containerWidget,_2[i]);if(_1){if(!_4)this.pickList.observe(this.containerWidget,_2[i],_1)}else{if(_4)this.pickList.ignore(this.containerWidget,_2[i])}}},$19h:function(){if(isc.Canvas.ariaEnabled()){this.setAriaState("expanded",false);this.clearAriaState("owns")}
this.$957();if(this.pickListHidden)this.pickListHidden()},$19j:function(){if(isc.Canvas.ariaEnabled()){this.setAriaState("expanded",true);this.setAriaState("owns",this.pickList.getCanvasName())}
this.$957("observer.moveBy(deltaX,deltaY)");if(this.pickListShown)this.pickListShown()},selectDefaultItem:function(){return this.selectItemFromValue(this.getValue())},selectItemFromValue:function(_1,_2){if(!isc.isAn.Array(_1))_1=[_1];var _3=this.pickList.getSelection(),_4=this.getValueFieldName(),_5=true,_6;for(var i=0;i<_1.length;i++){var _8=_1[i],_9;if(_3.find(_4,_8))continue;var _10=this.pickList.getData();if(isc.ResultSet&&isc.isA.ResultSet(_10)){var _11=_10.localData;if(_11)_9=_11.find(_4,_8)}else{_9=_10.find(_4,_8)}
if(_9&&_9!=Array.LOADING){if(this.pickList.allowMultiSelect)this.pickList.selectRecord(_9);else this.pickList.selection.selectSingle(_9);_6=_10.indexOf(_9)}else{_5=false}}
if(!_2&&_6!=null)this.pickList.scrollRecordIntoView(_6);return _5},filterComplete:function(_1,_2,_3,_4){if(!_4&&_3!=null&&_3.clientContext!=null){var _5=this.$84p,_6=_3.clientContext.fetchID;if(_5==null||_5<_6){this.$84p=_6}else{this.logWarn("Server returned out of order responses for databound fetch requests. Ignoring superceded request results");return}}
this.$43j=false;this.$958=true;this.$82n(_1,_2,_3);this.$82o(_1,_2,_3);this.$958=false;var _7=(_3&&_3.internalClientContext?_3.internalClientContext.$03:null);if(_7){this.fireCallback(_7,"item,dsResponse,data,dsRequest",[this,_1,_2,_3]);if(_3&&_3.internalClientContext){delete _3.internalClientContext.$03}}},$82n:function(_1,_2,_3){var _4=this.pickList;if(!_4||_4.destroyed)return;var _5=_4.hasFocus||(_4.body&&_4.body.hasFocus);var _2=_4.getData();var _6=(this.isEntryTooShortToFilter&&this.isEntryTooShortToFilter());if(_6){_4.emptyMessage=this.getEntryTooShortMessage()}
if(_2.getLength()==0&&_4.isVisible()&&_4.isDrawn()){if(this.hideEmptyPickList){_4.hide();if(_5)this.focusInItem()}else if(this.allowPickListToClip){var _7=this.getPickListPosition();_4.setRect([_7[0],_7[1]])}else{isc.PickList.$114o(this,_4)}}else{if(this.$19i)this.$19l();else if(_4.isVisible()&&_4.isDrawn())this.placePickList();_4.setHeight(1);_4.setAutoFitData(_4.autoFitData);delete this.$19i}},$82o:function(_1,_2,_3){this.selectDefaultItem();if(_1!=null&&_2!=null){this.$848(_2,true);this.updateDisplayValueMap(false)}
if(this.$43k){delete this.$43k;this.$43f(this._value)}
this.$19v()},$19v:function(){if(this.isDrawn()&&this.getValueFieldName()!=null&&this.$19m())
{if(this.isA("ComboBoxItem")){if(this.addUnknownValues==true){this.updateValue()}
if(this.hasFocus)return}
var _1;if(!this.$10v())_1=this.getValue();else{if(this.isA("SelectItem"))_1=this.$19w;else _1=this.mapDisplayToValue(this.getElementValue())}
var _2=this.getSelectedRecord();if(_2){var _3=this.mapValueToDisplay(_1);if(this.$19z!=_3){this.$127m(_1);this.setElementValue(_3);this.$127l()}}}},$84q:0,filterDataBoundPickList:function(_1,_2){if(isc.$cv)arguments.$cw=this;if(this.isEntryTooShortToFilter&&this.isEntryTooShortToFilter()){var _3=this.pickList.originalData||this.pickList.data;if(_3&&isc.ResultSet&&isc.isA.ResultSet(_3)){this.pickList.setData([])}
this.filterComplete();return}
var _4=this.getPickListFilterCriteria(),_5={textMatchStyle:this.textMatchStyle,showPrompt:false};if(this.optionFilterContext!=null)isc.addProperties(_5,this.optionFilterContext);if(this.optionOperationId!=null)_5.operationId=this.optionOperationId;if(_1!=null){isc.addProperties(_5,_1)}
var _6=false,_7=false;var _3=this.pickList.originalData||this.pickList.data;if(_3&&isc.ResultSet&&isc.isA.ResultSet(_3)){if(_2){_3.$394()}else{if(!_3.willFetchData(_4,this.textMatchStyle)){if(!_3.lengthIsKnown()||(_3.getLength()!=0&&!_3.rowIsLoaded(0))){_6=true;if(this.pickList.$85a!=this.getID()){if(!this.isObserving(_3,"fetchRemoteDataReply")){this.observe(_3,"fetchRemoteDataReply","observer.$85b(observed, dsResponse, data, request)");this.$85c=_3.$39v}}}else{_7=true}}}
if(!_6){_5.fetchID=this.$84q++;if(this.isObserving(_3,"fetchRemoteDataReply")){this.ignore(_3,"fetchRemoteDataReply")}}}
this.pickList.filterData(_4,{target:this,methodName:"filterComplete"},_5);var _3=this.pickList.getOriginalData();if(_7&&this.pickList.data.getLength()>0&&(this.pickList.data.rowIsLoaded&&!this.pickList.data.rowIsLoaded(0)))
{this.logInfo("filterData with new criteria caused async fetch even though data.willFetchData() returned false.","pickListFilter");_7=false}
if(_7)this.filterComplete();else{this.$43j=true;if(!_6){this.pickList.$85a=this.getID()}}},$85b:function(_1,_2,_3,_4){if(this.$85c!=_4.internalClientContext.requestIndex){return}
this.ignore(_1,"fetchRemoteDataReply");this.filterComplete(_2,_3,_4,true)},handleDataArrived:function(_1,_2,_3){if(this.defaultToFirstOption&&this.getValue()==null&&_1==0){this.setToDefaultValue()}
this.$19v();this.$848(_3.getRange(_1,_2),true);var _4=this.$958;this.$958=true;this.updateDisplayValueMap(false);this.$958=_4;if(this.dataArrived)this.dataArrived(_1,_2,_3)},dataArrived:function(_1,_2,_3){},textMatchStyle:"startsWith",$19q:"substring",separatorRows:[{isSeparator:true}],filterClientPickListData:function(){if(this.isEntryTooShortToFilter&&this.isEntryTooShortToFilter())return null;var _1=this.getClientPickListData();var _2=this.getPickListFilterCriteria();if(_2==null||isc.isA.emptyObject(_2))return _1;var _3=[],_4;if(this.showAllOptions)_4=this.separatorRows.duplicate();var _5=false;for(var _6 in _2){var _7=_2[_6];if(!_7||isc.isA.emptyString(_7))continue;_5=true;if(!isc.isAn.Array(_7))_7=[_7];for(var _8=0;_8<_7.length;_8++){var _9=_7[_8];if(!isc.isA.String(_9))_9+=isc.emptyString;_9=_9.toLowerCase();var _10=_1.getLength(),_11=this.getValueFieldName();for(var i=0;i<_10;i++){var _13=_1[i][_6];if(this.filterDisplayValue&&_6==_11){_13=this.mapValueToDisplay(_13)}
if(!isc.isA.String(_13))_13+="";_13=_13.toLowerCase();if((this.textMatchStyle==this.$19q&&!_13.contains(_9))||(this.textMatchStyle!=this.$19q&&!isc.startsWith(_13,_9)))
{if(this.showAllOptions)_4.add(_1[i])}else{_3.add(_1[i])}}}}
if(!_5)_3=_1.duplicate();if(this.showAllOptions&&_4.length>1)_3.addList(_4);return _3},shouldHideEmptyPickList:function(){if(this.hideEmptyPickList!=null)return this.hideEmptyPickList;return!this.$19m()},getPickListPosition:function(){var _1=this.getPageLeft();if(this.containerWidget.isRTL()&&this.pickList){_1+=this.getWidth();_1-=this.pickList.getVisibleWidth()}
return[this.getPageLeft(),this.getPageTop()+this.getHeight()]},placePickList:function(){var _1=this.pickList;if(_1.isDirty()||(_1.body&&_1.body.isDirty())){_1.redraw("Refreshing stale pickList content before positioning")}else if(!_1.isDrawn()){isc.Canvas.moveOffscreen(_1);_1.setVisibility("hidden");_1.draw()}
if(this.allowPickListToClip){var _2=this.getPickListPosition(),_3=_2[0],_4=_2[1];_1.setRect([_3,_4])}else{isc.PickList.$114o(this,_1)}},pickValue:function(_1){}});isc.A=isc.PickList;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.optionsFromValueMap=function isc_c_PickList_optionsFromValueMap(_1){var _2=_1.getValueMap(),_3=[];if(_2==null)_2=[];var _4=_1.getValueFieldName(),_5=_1.getDisplayFieldName();if(isc.isAn.Array(_2)){for(var i=0;i<_2.length;i++){_3[i]={}
_3[i][_4]=_2[i];if(_5!=null)_3[i][_5]=_2[i]}}else if(isc.isAn.Object(_2)){var i=0;var _7=_1.getType(),_8,_9,_10;if(_7!=null){if(isc.SimpleType.inheritsFrom(_7,"integer"))
{_8=true}else if(isc.SimpleType.inheritsFrom(_7,"float")){_9=true}else if(isc.SimpleType.inheritsFrom(_7,"boolean")){_10=true}}
for(var j in _2){_3[i]={};var _12=j;if(_8){var _13=parseInt(_12);if(_13==_12)_12=_13}else if(_9){var _14=parseFloat(_12);if(_14==_12)_12=_14}else if(_10){var _15=(_12=="true"?true:(_12=="false"?false:null));if(_15!=null)_12=_15}
_3[i][_4]=_12;if(_5!=null)_3[i][_5]=_2[j];i++}
_3.$882=true}
return _3},isc.A.$114p=function isc_c_PickList__placePickListRect(_1,_2,_3,_4,_5,_6){var _7=isc.Page.getWidth(),_8=isc.Page.getHeight(),_9=isc.Page.getScrollLeft(true),_10=isc.Page.getScrollTop(),_11=(_7+_9),_12=(_8+_10),_13=Math.max(_9,Math.min(_11,_3[0])),_14=Math.max(_10,Math.min(_12,_3[1])),_15=Math.max(_9,Math.min(_11,_3[0]+_3[2])),_16=Math.max(_10,Math.min(_12,_3[1]+_3[3]));var _17=0,_18=null,_19=1;for(var i=0;i<4;++i){var _21=((i%2==0)!=_6?_11-_13:_15-_9),_22=(i<2?_12-_16:_14-_10),_23=Math.min(_1,_21),_24=Math.min(_2,_22);if(_23==_1&&_24==_2){_17=i;break}
if(_23>=_4&&_24>=_5){var _25=_23*_24;if(_18==null||_25>_18){_18=_25;_17=i}}}
var _26=((_17%2==0)!=_6?_11-_13:_15-_9),_27=(_17<2?_12-_16:_14-_10),_28=Math.min(_1,_26),_29=Math.min(_2,_27),_30=((_17%2==0)!=_6?_13:_15-_28),_31=(_17<2?_16:_14-_29);return[_30,_31,_28,_29]},isc.A.$114o=function isc_c_PickList__placeAdjacent(_1,_2){var _3=_2.getPeerRect(),_4=_3[2],_5=_3[3],_6=_1.getPeerRect(),_7=((!_1.shouldHideEmptyPickList()&&_2.getTotalRows()<1&&_1.emptyPickListHeight)||0),_8=Math.max(1,_7,_2.getHeaderHeight()),_9=Math.max(1,_1.pickListWidth||0),_10=_1.containerWidget.isRTL(),_11=isc.PickList.$114p(_4,_5,_6,_9,_8,_10);var _12=_11[2],_13=_11[3];if(_4>_12){_2.setAutoFitMaxWidth(_12)}
if(_5>_13){_2.setAutoFitMaxHeight(_13)}
_2.setPageRect(_11)});isc.B._maxIndex=isc.C+3}
isc.ClassFactory.defineClass("NativeSelectItem","FormItem");isc.A=isc.NativeSelectItem;isc.A.DEFAULT_ROW_COUNT=6;isc.A.instances=[];isc.NativeSelectItem.addProperties(isc.$19s)
isc.A=isc.NativeSelectItem.getPrototype();isc.A.height=null;isc.A.$125=true;isc.A.$15i=true;isc.A.textBoxStyle="nativeSelectItem";isc.A.showRTL=true;isc.A.$16b={onchange:isc.FormItem.$12y};isc.A=isc.NativeSelectItem;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.getOptionsHTML=function isc_c_NativeSelectItem_getOptionsHTML(_1,_2){var _3=isc.SB.create();if(isc.isAn.Array(_1)){for(var i=0,_5=_1.length;i<_5;i++){var _6=_1[i];_3.append(this.$196(_6,_6,_2))}}else{for(var _6 in _1){var _7=_1[_6];_3.append(this.$196(_6,_7,_2))}}
return _3.toString()},isc.A.$196=function isc_c_NativeSelectItem__getOptionHTML(_1,_2,_3){var _4=this.$197;if(!_4){this.$198=" SELECTED ";_4=this.$197=[];_4[0]="<OPTION ";_4[2]=' VALUE="';_4[4]='">';_4[6]="</OPTION>"}
_4[1]=(_1==_3?this.$198:null);_4[3]=_1;_4[5]=_2;return _4.join(isc.$ad)},isc.A.getOptionCount=function isc_c_NativeSelectItem_getOptionCount(_1){if(isc.isAn.Array(_1)){return _1.length}else{var _2=0;for(var _3 in _1){_2++}
return _2}});isc.B._maxIndex=isc.C+3;isc.A=isc.NativeSelectItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.textMatchStyle="startsWith";isc.B.push(isc.A.getPickListFilterCriteria=function isc_NativeSelectItem_getPickListFilterCriteria(){var _1=this.optionCriteria||{};return isc.addProperties(_1,this.pickListCriteria)},isc.A.init=function isc_NativeSelectItem_init(){this.Super("init",arguments);isc.NativeSelectItem.instances.add(this);if(this.optionDataSource){var _1=this.getOptionDataSource();var _2=this.getValueFieldName();var _3=this.getDisplayFieldName();var _4=this;var _5={textMatchStyle:this.textMatchStyle,showPrompt:false};if(this.optionFilterContext!=null)isc.addProperties(_5,this.optionFilterContext);if(this.optionOperationId!=null)_5.operationId=this.optionOperationId;var _6=this.getPickListFilterCriteria();_1.fetchData(_6,function(_10,_11){var _7;if(!_3)_7=[];else _7={};for(var i=0;i<_11.getLength();i++){var _9=_11[i];if(!_3){_7.add(_9[_2])}else{_7[_9[_2]]=_9[_3]}}
_4.setValueMap(_7)},_5)}},isc.A.destroy=function isc_NativeSelectItem_destroy(){isc.NativeSelectItem.instances.remove(this);this.Super("destroy",arguments)},isc.A.getTextBoxCellCSS=function isc_NativeSelectItem_getTextBoxCellCSS(){return this.$136},isc.A.setElementReadOnly=function isc_NativeSelectItem_setElementReadOnly(_1){this.$176(!_1&&!this.isDisabled())},isc.A.getElementHTML=function isc_NativeSelectItem_getElementHTML(_1,_2){this.$199=false;var _3=this.form,_4=_3.getID(),_5=isc.StringBuffer.newInstance(),_6=this.getItemID(),_7=isc.$ad,_8=this.$xq(_2),_9="";if(this.showValueIconOnly)return _8;if(_8!=null)_5.append(_8);if(this.$68y()||this.renderAsStatic()){if(this.printFullText){_9=isc.StringBuffer.concat("<SPAN ",this.getElementStyleHTML(),">",_2==null?"&nbsp;":_2.asHTML(),"</SPAN>")}else{_9=isc.StaticTextItem.$b4.getElementHTML.apply(this,arguments)}}else{_5.append("<SELECT"," NAME=",this.getElementName()," ID=",this.getDataElementId(),this.$155(),(!this.showTitle&&this.accessKey!=null?" ACCESSKEY="+this.accessKey:_7),((this.isReadOnly()||this.isDisabled())?" DISABLED ":_7),this.getElementStyleHTML(),(this.multiple?" MULTIPLE":_7)," TABINDEX=",this.$154()," handleNativeEvents=false>");_5.append(this.getOptionsHTML(this.getValueMap()));_5.append("</SELECT>");_9=_5.toString()}
return _9},isc.A.$12z=function isc_NativeSelectItem__handleElementChanged(_1){if(isc.Browser.isIE&&!_1){isc.Timer.setTimeout(this.getID()+".$12z(true)",10);return true}
return this.form.elementChanged(this.getID())},isc.A.$12x=function isc_NativeSelectItem__nativeElementBlur(_1,_2){var _3=this.Super("$12x",arguments);if(this.changeOnBlur)this.form.elementChanged(this)},isc.A.getOptionsHTML=function isc_NativeSelectItem_getOptionsHTML(_1){var _2=isc.NativeSelectItem.getOptionsHTML(_1?_1:this.getValueMap());if(this.isSelectOther){_2+="<OPTION VALUE=\""+this.separatorValue+"\">"+this.separatorTitle+"<OPTION VALUE=\""+this.otherValue+"\">"+this.otherTitle}
return _2},isc.A.getOptionCount=function isc_NativeSelectItem_getOptionCount(_1){return isc.NativeSelectItem.getOptionCount(_1?_1:this.getValueMap())},isc.A.getTextBoxStyle=function isc_NativeSelectItem_getTextBoxStyle(){if(this.$68y())return isc.TextItem.getInstanceProperty("textBoxStyle");else return this.Super("getTextBoxStyle",arguments)},isc.A.getElementStyleHTML=function isc_NativeSelectItem_getElementStyleHTML(){var _1=isc.SB.create(),_2=isc.SB.create();if(this.textBoxStyle!=null)_1.append(" CLASS='",this.getTextBoxStyle(),"' ");if(this.multiple||this.rows){var _3=this.rows;if(!isc.isA.Number(_3)||_3<1)
_3=Math.min(isc.NativeSelectItem.DEFAULT_ROW_COUNT,this.getOptionCount());if(this.height){if(isc.isA.Number(this.height))_2.append("HEIGHT:",this.height,"px;")}
_1.append(" SIZE=",_3)}
if(isc.Browser.isDOM){var _4=this.getElementWidth();if(isc.isA.Number(_4)){_4=Math.max(_4,1);_2.append("WIDTH:",_4,"px;")}
if(isc.Browser.isMoz){_2.append("-moz-user-focus:",(this.$154()>0?"normal;":"ignore;"))}
_2.append("margin-top:0px;margin-bottom:0px;");_2=_2.toString();if(_2.length>0)_1.append(" STYLE='",_2,"'")}
return _1.toString()},isc.A.$16z=function isc_NativeSelectItem__iconVisibilityChanged(){if(!isc.isA.Number(this.width))return;return this.Super("$16z",arguments)},isc.A.$16m=function isc_NativeSelectItem__getIconVMargin(){return 0},isc.A.mapValueToDisplay=function isc_NativeSelectItem_mapValueToDisplay(_1){if(isc.isAn.Array(_1)){var _2=[];for(var i=0;i<_1.length;i++){_2[i]=this.mapValueToDisplay(_1[i])}
return _2}
return this.Super("mapValueToDisplay",arguments)},isc.A.setElementValue=function isc_NativeSelectItem_setElementValue(_1,_2){if(arguments.length==1)_2=_1;var _3=this.getDataElement();if(!_3)return null;var _4=_3.options;if(!_4){this.logDebug("setElementValue(): element.options is null. ???");return null}
this.$17j(_2);if(!this.multiple){if(_2==null)_2="";for(var i=0;i<_4.length;i++){if(_4[i].value==_2){if(_3.selectedIndex!=i){_3.selectedIndex=i}
return _3.selectedIndex}}
for(var i=0;i<_4.length;i++){if(_4[i].text==_2){if(_3.selectedIndex!=i){_3.selectedIndex=i}
_3.selectedIndex=i;return _3.selectedIndex}}
if(this.addUnknownValues){if(isc.Browser.isIE){var _6=0;if(this.$199){_4[_6].text=_1;_4[_6].value=_2}else{_4.add(new Option(_2,_1),_6);this.$199=true}}else{if(this.$199){var _6=_4.length-1;_4[_6].value=_2;_4[_6].text=_1}else{var _6=_4.length;_4[_6]=new Option(_2,_1);this.$199=true}}
if(_3.selectedIndex!=_6){_3.selectedIndex=_6}
return _3.selectedIndex}else{return null}}else{if(_2==null){_2=[]}else if(isc.isA.String(_2)&&_2.contains(",")){_2=_2.split(",")}else if(!isc.isAn.Array(_2)){_2=[_2]}else{_2=_2.duplicate()}
if(_1==null){_1=[]}else if(isc.isA.String(_1)&&_1.contains(",")){_1=_1.split(",")}else if(!isc.isAn.Array(_1)){_1=[_1]}else{_1=_1.duplicate()}
for(var i=0;i<_4.length;i++){var _7=_3.options[i];var _8=_2.indexOf(_7.value);if(_8>-1){if(_7.selected!=true)_7.selected=true;_2.removeItem(_8)}else{if(_7.selected!=false)_7.selected=false}}
if(_2.length!=0){for(var i=0;i<_4.length;i++){var _7=_3.options[i];var _8=_2.indexOf(_7.text);if(_8>-1){if(_7.selected!=true)_7.selected=true;_2.removeItem(_8)}}}
if(_2.length!=0&&this.addUnknownValues){for(var i=0;i<_2.length;i++){var _9=_4[_4.length]=new Option(_2[i],_1[i]);_9.selected=true}}
return _2}},isc.A.getElementValue=function isc_NativeSelectItem_getElementValue(){var _1=this.getDataElement();if(!_1)return null;var _2=_1.options;if(!_2||_2.length==0)return null;if(!this.multiple){var _3=_2[_1.selectedIndex];if(!_3)return null;return(_3.value!=null?_3.value:_3.text)}else{var _4=[];for(var i=0;i<_2.length;i++){var _3=_2[i];if(_3.selected){_4.add(_3.value!=null?_3.value:_3.text)}}
if(_4.length<2)return _4[0];return _4}},isc.A.setElementValueMap=function isc_NativeSelectItem_setElementValueMap(_1){this.$199=false;this.Super("setElementValueMap",arguments);var _2=this.getDataElement();if(_2==null)return;var _3=_2.options;_3.length=0;if(isc.isAn.Array(_1)){for(var i=0;i<_1.length;i++){_3[i]=new Option(_1[i],_1[i])}}else{for(var _5 in _1){_3[_3.length]=new Option(_1[_5],_5)}}
if(this.isSelectOther){_3[_3.length]=new Option(this.separatorTitle,this.separatorValue);_3[_3.length]=new Option(this.otherTitle,this.otherValue)}},isc.A.updateValue=function isc_NativeSelectItem_updateValue(){if(this.isSelectOther){if(!this.hasElement()||this.getDataElement()==null)return;var _1=this._value,_2=this.getElementValue();if(_2==this.separatorValue){this.setValue(_1);return false}
if(_2==this.otherValue){var _3=this.getValueMapTitle(_1);_2=prompt("Other value for \r'"+this.getTitle()+"'?",(_3?_3:""));if(_2==null){this.setValue(_1);return false}
this.setElementValue(_2)}}
return this.Super("updateValue",arguments)});isc.B._maxIndex=isc.C+19;if(isc.ListGrid!=null){isc.ClassFactory.defineClass("SelectItem","FormItem");isc.$19s={textBoxStyle:"selectItemText",printTextBoxStyle:"textItem",height:19,width:150,dirtyOnKeyDown:false,changeOnKeypress:false,redrawOnShowIcon:false,addUnknownValues:true,autoSizePickList:true,multipleAppearance:"picklist",separatorTitle:"--------------------",separatorValue:"----",otherTitle:"Other...",otherValue:"***other***"};isc.SelectItem.addProperties(isc.$19s)
isc.A=isc.SelectItem.getPrototype();isc.A.showPickerIcon=true;isc.A.emptyDisplayValue="&nbsp;";isc.A.controlStyle="selectItemControl";isc.A.pickerIconStyle="selectItemPickerIcon";isc.A.canFocus=true;isc.A.showFocused=true;isc.A.pickerIconSrc="[SKIN]/DynamicForm/SelectItem_PickButton_icon.gif";isc.A.pickerIconDefaults={tabIndex:-1,click:isc.Class.NO_OP};isc.A.clipValue=true;isc.A.showOver=true;isc.A.modalPickList=true;isc.A.changeOnValueChange=true;isc.A.changeOnKeyboardNavigation=true;isc.A.canSelectText=false;isc.A.allowEmptyValue=false;isc.A.autoFetchData=true;isc.A.saveOnEnter=true;isc.A.openOnSpace=false;isc.A.openOnDownArrow=false;isc.A=isc.SelectItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.selectOtherPrompt="Other value for <br>${item.getTitle()}?";isc.A.dialogWidth=250;isc.A.canEscapeHTML=true;isc.B.push(isc.A.init=function isc_SelectItem_init(){if(this.hiliteOnFocus!=null){this.$15o("hiliteOnFocus","showFocused");this.showFocused=this.hiliteOnFocus}
if(this.pickButtonWidth!=null){this.$15o("pickButtonWidth","pickerIconWidth");this.pickerIconWidth=this.pickButtonWidth}
if(this.pickButtonHeight!=null){this.$15o("pickButtonHeight","pickerIconHeight");this.pickerIconHeight=this.pickButtonHeight}
if(this.pickButtonSrc!=null){this.$15o("pickButtonSrc","pickerIconSrc");this.pickerIconSrc=this.pickButtonSrc}
return this.Super("init",arguments)},isc.A.$712=function isc_SelectItem__getShowHintInField(){return!!(this.showHint&&this.showHintInField)},isc.A.drawn=function isc_SelectItem_drawn(_1,_2,_3,_4){this.invokeSuper(isc.SelectItem,"drawn",_1,_2,_3,_4);if(this.autoFetchData&&this.$19m()){this.fetchData(null,null,true)}},isc.A.$16m=function isc_SelectItem__getIconVMargin(){return 0},isc.A.$121=function isc_SelectItem__iconFocus(_1,_2){var _3=this.getIcon(_1);if(_3==this.getPickerIcon()){_2.blur();this.focusInItem();return}
return this.Super("$121",arguments)},isc.A.setElementReadOnly=function isc_SelectItem_setElementReadOnly(_1){},isc.A.handleMouseMove=function isc_SelectItem_handleMouseMove(){if(this.showOver&&!this.isDisabled()){var _1=this.getPickerIcon();if(this.$17a()&&this.$165(_1)){this.$164(_1,true)}else this.$164(_1,false)}
return this.Super("handleMouseMove",arguments)},isc.A.handleMouseOut=function isc_SelectItem_handleMouseOut(){if(this.showOver&&!this.isDisabled()){this.$164(this.getPickerIcon(),false)}
return this.Super("handleMouseOut",arguments)},isc.A.$114=function isc_SelectItem__iconMouseOut(_1,_2,_3,_4,_5){if(this.getIcon(_1)==this.getPickerIcon()&&this.$17a())return;return this.invokeSuper("SelectItem","$114",_1,_2,_3,_4,_5)},isc.A.handleClick=function isc_SelectItem_handleClick(){if(!(this.isDisabled())&&!(this.isReadOnly())){this.focusInItem();this.showPickList()}
return this.Super("handleClick",arguments)},isc.A.handleKeyPress=function isc_SelectItem_handleKeyPress(_1,_2){var _3=this.Super("handleKeyPress",arguments);if(_3==false)return false;if((this.isDisabled())||(this.isReadOnly()))return _3;var _4=_1.keyName;if(_4=="Enter"&&this.isSelectOther){if(this.$19u!=null)this.updateValue()}else if(_4=="Arrow_Down"){if(this.openOnDownArrow){this.showPickList()}else{if(isc.EH.altKeyDown())this.showPickList();else this.moveToNextValue(1)}
_3=false}else if(_4=="Arrow_Up"){if(isc.EH.altKeyDown())this.showPickList();else this.moveToNextValue(-1);_3=false}else if(_4=="Home"){this.moveToFirstValue();_3=false}else if(_4=="End"){this.moveToLastValue();_3=false}else if(_4=="Space"&&this.openOnSpace){this.showPickList()}else{var _5=_1.characterValue;if(_5!=null){this.moveToChar(_5)}}
return _3},isc.A.$12x=function isc_SelectItem__nativeElementBlur(_1,_2){var _3=this.Super("$12x",arguments);if(this.changeOnBlur||this.$10v()||this.$19u){if(isc.Browser.isMoz&&this.$19u==this.otherValue)
this.form.$11w=true;this.updateValue()}
return _3},isc.A.showPickList=function isc_SelectItem_showPickList(_1,_2){var _3=isc.PickList.getPrototype().showPickList;_3.apply(this,arguments);if(this.pickList){this.pickList.deselectAllRecords();if(this.getValue()!=null)this.selectItemFromValue(this.getValue())}},isc.A.handleEditorExit=function isc_SelectItem_handleEditorExit(){if(this.$19g)return;return this.Super("handleEditorExit",arguments)},isc.A.$19j=function isc_SelectItem__pickListShown(){this.handleEditorEnter();var _1=isc.PickList.getPrototype().$19j;_1.apply(this,arguments)},isc.A.$19h=function isc_SelectItem__pickListHidden(){if(this.fireChangeOnSelect==false)this.updateValue();var _1=isc.PickList.getPrototype().$19h;_1.apply(this,arguments)},isc.A.getAllLocalOptions=function isc_SelectItem_getAllLocalOptions(_1){var _2;if(this.$19m()){if(!this.pickList||this.pickList.destroyed)return;var _3=this.pickList.getOriginalData();if(!_3||!_3.lengthIsKnown()||!_3.allMatchingRowsCached())return;var _4=this.getPickListFilterCriteria();if(_3.compareCriteria(_4,_3.criteria)!=0){if(!_3.allRowsCached()||!_3.useClientFiltering)return;this.filterPickList(false,false)}
_2=_3.getAllRows()}else{_2=this.getClientPickListData()}
var _5=[];if(_1){var _6=this.getRecordEnabledProperty(),_7=this.getCanSelectRecordProperty();for(var i=0;i<_2.length;i++){if(_2[i][_6]==false)continue;if(_2[i][_7]==false)continue;_5[_5.length]=_2[i]}}else{_5=_2}
return _5},isc.A.getRecordEnabledProperty=function isc_SelectItem_getRecordEnabledProperty(){if(this.pickList!=null)return this.pickList.recordEnabledProperty;if(this.pickListProperties&&this.pickListProperties.recordEnabledProperty){return this.pickListProperties.recordEnabledProperty}
if(this.pickListDefaults&&this.pickListDefaults.recordEnabledProperty){return this.pickListDefaults.recordEnabledProperty}
return isc.PickListMenu.getPrototype().recordEnabledProperty},isc.A.getCanSelectRecordProperty=function isc_SelectItem_getCanSelectRecordProperty(){if(this.pickList!=null)return this.pickList.recordCanSelectProperty;if(this.pickListProperties&&this.pickListProperties.recordCanSelectProperty){return this.pickListProperties.recordCanSelectProperty}
if(this.pickListDefaults&&this.pickListDefaults.recordCanSelectProperty){return this.pickListDefaults.recordCanSelectProperty}
return isc.PickListMenu.getPrototype().recordCanSelectProperty},isc.A.moveToChar=function isc_SelectItem_moveToChar(_1){var _2=this.getAllLocalOptions(true);if(!_2||_2.length<1)return;var _3=String.fromCharCode(_1);if(_3==null)return;_3=_3.toLowerCase();var _4=(this.isSelectOther&&this.$19u!=null)?this.$19u:(this.$10v()?this.$19w:this.getValue()),_5=this.getValueFieldName(),_6=_2.findIndex(_5,_4),i=(_6==_2.length-1?0:_6+1);while(i!=_6){if(_6<0)_6=0;var _8=_2[i][this.getValueFieldName()],_9=this.mapValueToDisplay(_8);if(isc.isA.String(_9)){var _10=_9.charAt(0).toLowerCase();if(_10==_3){var _11=_8;this.changeToValue(_11,(this.changeOnValueChange&&this.changeOnKeyboardNavigation));return}}
i+=1;if(i>=_2.length)i=0}},isc.A.moveToNextValue=function isc_SelectItem_moveToNextValue(_1){var _2;if(this.isSelectOther&&this.$19u!=null)_2=this.$19u;else _2=(this.$10v()?this.$19w:this.getValue());var _3=this.getValueFieldName();var _4=-1,_5;var _6=this.getAllLocalOptions(true);if(!_6||_6.length<1){if(this.$19m()&&this.pickList&&!this.pickList.destroyed){var _7=this.pickList.getOriginalData();var _8=this.getPickListFilterCriteria();if(_7&&_7.compareCriteria(_8,_7.criteria)!=0){this.filterPickList(false,false)}
_6=_7}}
if(_6==null||_6.length<1)return;var _4=_6.findIndex(_3,_2);_5=_6.getLength();_4+=_1;if(_5==null||_4>=_5||_4<0)return;var _9=_6.get(_4);if(_9!=null&&!Array.isLoading(_9)){var _10=_9[_3]
this.changeToValue(_10,(this.changeOnValueChange&&this.changeOnKeyboardNavigation))}},isc.A.moveToFirstValue=function isc_SelectItem_moveToFirstValue(){if(this.optionDataSource)return;var _1=this.getClientPickListData(),_2=this.getValueFieldName(),_3=_1[0][_2];this.changeToValue(_3,(this.changeOnValueChange&&this.changeOnKeyboardNavigation))},isc.A.moveToLastValue=function isc_SelectItem_moveToLastValue(){if(this.optionDataSource)return;var _1=this.getClientPickListData(),_2=this.getValueFieldName(),_3=_1[_1.length-1][_2]
this.changeToValue(_3,(this.changeOnValueChange&&this.changeOnKeyboardNavigation))},isc.A.$kk=function isc_SelectItem__canFocus(){return true},isc.A.$19x=function isc_SelectItem__getIconMouseDownFunction(){if(!this.$19y){this.$19y=isc.$aq("if(window."+this.getID()+")window."+this.getID()+".$19g=true;")}
return this.$19y},isc.A.$159=function isc_SelectItem__applyHandlersToElement(_1,_2,_3,_4){this.invokeSuper(isc.SelectItem,"$159",_1,_2,_3,_4);if(isc.Browser.isIE){var _5=this.$16v(this.getPickerIcon());if(_5){_5.onmousedown=this.$19x()}}},isc.A.makePickList=function isc_SelectItem_makePickList(_1){if(this.progressiveLoading===true||this.progressiveLoading===false){if(this.pickListProperties==null)this.picklistProperties={};this.picklistProperties.progressiveLoading=this.progressiveLoading}
if(!this.filterLocally&&this.allowEmptyValue&&this.$19m()){if(this.pickListProperties==null)
this.pickListProperties={};if(this.pickListProperties.dataProperties==null)
this.pickListProperties.dataProperties={};this.pickListProperties.dataProperties.fetchMode="basic"}
var _2=isc.PickList.getPrototype().makePickList;return _2.apply(this,arguments)},isc.A.changeToValue=function isc_SelectItem_changeToValue(_1,_2){var _3=(this.$19u||this.$19w||this.getValue());if(_3==_1)return;if(this.isSelectOther&&(_1==this.separatorValue||_1==this.otherValue))
{this.$952(this.getDisplayValue(_1),_1);this.$19u=_1;return}else{delete this.$19u}
this.setLocalValue(_1);if(_2)this.updateValue()},isc.A.setLocalValue=function isc_SelectItem_setLocalValue(_1){this.$19w=_1;if(this.isVisible()&&this.containerWidget.isDrawn()){if(_1==null)_1=null;this.$952(this.getDisplayValue(_1),_1)}
this.$18i()},isc.A.setElementValue=function isc_SelectItem_setElementValue(_1,_2,_3,_4,_5){this.$19z=_1;if(!this.$127p&&!this.$127q&&this.$712()&&this.getHint()){var _6;if(_1===_6||_1==null||isc.is.emptyString(_1)||_1==this.emptyDisplayValue)
{var _7=this.$15h();if(_7!=null)
_7.className=this.$66v();var _8=this.getHint();if(_8)_8=_8.unescapeHTML();_1=_8;this.$66u=true}else{if(this.$66u){var _7=this.$15h();if(_7!=null)_7.className=this.getTextBoxStyle()}
this.$66u=false}}
return this.invokeSuper(isc.SelectItem,"setElementValue",_1,_2,_3,_4,_5)},isc.A.$66t=function isc_SelectItem__showInFieldHint(){if(this.$127p){return}
this.$127p=true;this.Super("$66t",arguments);this.$127p=false},isc.A.$66s=function isc_SelectItem__hideInFieldHint(_1){if(this.$127q){return}
this.$127q=true;this.Super("$66s",arguments);this.$127q=false},isc.A.updateValue=function isc_SelectItem_updateValue(){if(this.isSelectOther&&this.$19u!=null){var _1=this.getSelectOtherValue(this.$19u);delete this.$19u;this.setLocalValue(_1)}
if(!this.$10v())return;var _2=this.$19w;this.$10y(_2)},isc.A.mapDisplayToValue=function isc_SelectItem_mapDisplayToValue(_1){return _1},isc.A.getSelectOtherValue=function isc_SelectItem_getSelectOtherValue(_1){if(_1==this.separatorValue)return true;if(_1==this.otherValue){var _2=this.$19w||this.getValue(),_3=(_2==null?"":this.mapValueToDisplay(_2)),_4=this.selectOtherPrompt.evalDynamicString(null,{item:this,value:_2}),_5=isc.addProperties({width:this.dialogWidth},this.dialogDefaults,this.dialogProperties);isc.askForValue(_4,this.getID()+".getSelectOtherValueCallback(value)",_5);return true}},isc.A.getSelectOtherValueCallback=function isc_SelectItem_getSelectOtherValueCallback(_1){if(_1!=null){_1=this.mapDisplayToValue(_1);this.changeToValue(_1,this.changeOnValueChange)}},isc.A.setValue=function isc_SelectItem_setValue(_1,_2,_3,_4){_1=this.$190(_1);var _5,_6=this.$19w;if(_6===_5)_6=this._value;this.invokeSuper(isc.SelectItem,"setValue",_1,_2,_3,_4);_1=this.getValue();if(_1!=_6)this.setLocalValue(_1);if(this.pickList&&this.pickList.isDrawn()&&this.pickListVisible()){this.setUpPickList(true)}
if(!this.hasFocus&&this.$712()&&this.getHint()){if(_1===_5||_1==null||isc.is.emptyString(_1)){this.$66t()}else{this.$66s(true)}}
return _1},isc.A.saveValue=function isc_SelectItem_saveValue(_1,_2,_3,_4,_5){var _6=this._value;if(this.$191(_6,_1))delete this.$192;return this.invokeSuper(isc.SelectItem,"saveValue",_1,_2,_3,_4,_5)},isc.A.$191=function isc_SelectItem__dropCacheOnValueChange(_1,_2){return(this.addUnknownValues&&this.$192&&((_1!=null&&!this.$193(_1))||(_2!=null&&!this.$193(_2))))},isc.A.$10x=function isc_SelectItem__markValueAsNotDirty(_1,_2,_3,_4){this.invokeSuper(isc.SelectItem,"$10x",_1,_2,_3,_4);delete this.$19w},isc.A.getDefaultValue=function isc_SelectItem_getDefaultValue(){var _1=this.Super("getDefaultValue",arguments);if(_1==null&&this.defaultToFirstOption)_1=this.getFirstOptionValue();return this.$190(_1)},isc.A.$190=function isc_SelectItem__getValidValue(_1){if(!this.$194(_1)){var _2=this.$195;this.$195=true;var _3;if(_2)_3=_1;else _3=this.$19w||this.getValue();if(_1==_3||!this.$194(_3)){_3=null}
_1=_3}
return _1},isc.A.$194=function isc_SelectItem__valueIsValid(_1){if(this.addUnknownValues||this.optionDataSource)return true;if(_1==null)return true;if(isc.isAn.Array(_1)){for(var i=0;i<_1.length;i++){if(!this.$193(_1[i]))return false}
return true}else{return this.$193(_1)}},isc.A.$193=function isc_SelectItem__valueInValueMap(_1){var _2=this.getValueMap(),_3;if(isc.isAn.Array(_2)){return _2.contains(_1)}else if(isc.isAn.Object(_2)){return(_2[_1]!==_3)}
return false},isc.A.mapValueToDisplay=function isc_SelectItem_mapValueToDisplay(_1,_2,_3,_4){if(this.isSelectOther){if(_1==this.otherValue)return this.otherTitle;if(_1==this.separatorValue)return this.separatorTitle}
return this.invokeSuper(isc.SelectItem,"mapValueToDisplay",_1,_2,_3,_4)},isc.A.getSelectedRecord=function isc_SelectItem_getSelectedRecord(){if(this.pickList==null||this.pickList.destroyed)this.makePickList(false);var _1,_2=this.$19w;if(_2===_1)_2=this.getValue();if(this.selectItemFromValue(_2,true)){return this.pickList.getSelectedRecord()}
return this.Super("getSelectedRecord",arguments)},isc.A.getSelectedRecords=function isc_SelectItem_getSelectedRecords(){var _1=this.$19w;this.selectItemFromValue(_1,true);var _2=this.pickList.getSelection();if(_2.length>0)return _2;else return null},isc.A.$17b=function isc_SelectItem__mapKey(_1,_2,_3,_4,_5,_6){var _7=this.invokeSuper(isc.SelectItem,"$17b",_1,true,_3,_4,_5,_6);if(_7==null&&this.getDisplayFieldName()!=null){var _8=this.$19o(_1,false);if(_8!==undefined)_7=_8}
if(_7==null&&!_2)_7=_1;return _7},isc.A.$43f=function isc_SelectItem__checkForDisplayFieldValue(_1,_2){var _3=false;if(this.multiple){for(var i=0,_5=_1.getLength();!_3&&i<_5;++i){_3=(this.$17b(_1[i],true)!=null)}}else{_3=(this.$17b(_1,true)!=null)}
if(_3)return;if(this.$43j){this.$43k=true;return}
this.invokeSuper(isc.SelectItem,"$43f",_1)},isc.A.getClientPickListData=function isc_SelectItem_getClientPickListData(){if(this.$192)return this.$192;var _1=isc.PickList.optionsFromValueMap(this),_2=this.getValueFieldName();if(this.allowEmptyValue&&!this.multiple&&(_1.find(_2,null)==null)){var _3={};_3[_2]=null;_1.addAt(_3,0)}
var _4=this.getValue();if(_4!=null&&!isc.isAn.Array(_4)){if(_1.find(_2,_4)==null){var _5={};_5[_2]=_4;_1.addAt(_5,0)}}
if(this.isSelectOther){var _6={},_7={};_6[_2]=this.separatorValue;_7[_2]=this.otherValue;_1.addListAt([_6,_7],_1.length)}
this.$192=_1;return _1},isc.A.formatPickListValue=function isc_SelectItem_formatPickListValue(_1,_2,_3){if(this.isSelectOther&&(_2==this.getValueFieldName())){if(_1==this.otherValue)return this.otherTitle;if(_1==this.separatorValue)return this.separatorTitle}
if(this.pickList.getField(_2).$720){return this.$17c(_1)}
return _1},isc.A.pickValue=function isc_SelectItem_pickValue(_1){if(this.isSelectOther){if(this.getSelectOtherValue(_1))return}
this.changeToValue(_1,(this.changeOnValueChange&&this.fireChangeOnSelect!=false))},isc.A.getPickListPosition=function isc_SelectItem_getPickListPosition(){var _1=this.getPageTop(),_2=_1+this.getHeight(),_3=this.getPageLeft(),_4=isc.Page.getScrollTop(),_5=isc.Page.getHeight()+_4;var _6;if(!this.pickList.isDrawn()){var _7=this.pickList.data;if(_7==null||_7.getLength()==0){_6=this.emptyPickListHeight}else{_6=Math.min((_7.getLength()*this.pickList.cellHeight)+(this.pickList.showHeader?this.pickList.headerHeight:0)+(this.pickList.showFilterEditor?this.pickList.filterEditorHeight:0),this.pickListHeight)}}else{_6=this.pickList.getVisibleHeight()}
if(_2+_6>_5){_2=Math.max(_4,(_1-_6))}
if(this.containerWidget.isRTL()){_3+=this.getVisibleWidth();_3-=this.pickList.getVisibleWidth()}
return[_3,_2]},isc.A.updateValueMap=function isc_SelectItem_updateValueMap(_1){this.Super("updateValueMap",arguments);if(this.$958)return;if(this.$192)delete this.$192;if(this.hasPickList()){if(this.pickList.isVisible()&&this.pickList.isDrawn()){this.pickList.hide()}
delete this.pickList.formItem}
var _2=this.getValue(),_3=this.$190(_2);if(_2!=_3){this.setValue(_3)}else{this.$952(this.getDisplayValue())}},isc.A.hasPickList=function isc_SelectItem_hasPickList(){return(this.pickList&&!this.pickList.destroyed&&this.pickList.formItem==this)},isc.A.pickListVisible=function isc_SelectItem_pickListVisible(){return(this.hasPickList()&&this.pickList.isDrawn()&&this.pickList.isVisible())},isc.A.cleared=function isc_SelectItem_cleared(){var _1=this.Super("cleared",arguments);if(this.pickListVisible())this.pickList.hide();return _1},isc.A.filterComplete=function isc_SelectItem_filterComplete(){if(this.allowEmptyValue&&!this.multiple&&this.$19m()){var _1=this.pickList.getOriginalData();if(isc.isA.ResultSet(_1)){var _2=_1.addEmptyValueRecord(this.getValueFieldName());if(_2&&this.pickListVisible())this.pickList.markForRedraw()}}
var _3=isc.PickList.getPrototype().filterComplete;_3.apply(this,arguments)});isc.B._maxIndex=isc.C+58;isc.ClassFactory.mixInInterface("SelectItem","PickList");isc.SelectItem.registerStringMethods({dataArrived:"startRow,endRow,data",getPickListFilterCriteria:""})}else{isc.Log.logInfo("Source for standard SelectItem class included in this module, but required related class (ListGrid) is not loaded. This can occur if the Forms module is loaded without the Grids module. SelectItem class will be defined as a subclass of NativeSelectItem.","moduleDependencies");isc.ClassFactory.defineClass("SelectItem","NativeSelectItem")}
isc.defineClass("CycleItem","FormItem");isc.A=isc.CycleItem.getPrototype();isc.A.canSelectText=false;isc.A.canFocus=true;isc.A.iconVAlign="middle";isc.A=isc.CycleItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.handleKeyPress=function isc_CycleItem_handleKeyPress(){var _1=isc.EH.getKey();var _2=this.isReadOnly();if(!_2&&_1=="Space"){this.advanceValue();return false}
return this.Super("handleKeyPress",arguments)},isc.A.handleClick=function isc_CycleItem_handleClick(){if(this.isDisabled()||this.isReadOnly())return;if(!this.hasFocus)this.focusInItem();this.advanceValue()},isc.A.handleDoubleClick=function isc_CycleItem_handleDoubleClick(){if(this.isDisabled()||this.isReadOnly())return;this.advanceValue()},isc.A.advanceValue=function isc_CycleItem_advanceValue(){var _1=this.getValueMap();if(isc.isA.Object(_1)&&!isc.isA.Array(_1)){_1=isc.getKeys(_1)}
if(_1==null||_1.length<2){this.logInfo("CycleItem is non interactive as there are no options for this item.");return}
var _2=this.getValue(),_3=_1.indexOf(_2);if(_3==_1.length-1)_3=-1;var _4=_1[_3+1];if(!this.compareValues(_4,this._value)){var _5=this.mapValueToDisplay(_4);this.setElementValue(_5,_4);if(isc.Canvas.ariaEnabled())this.setAriaState("checked",!!_4);this.$10y(_4)}},isc.A.setElementReadOnly=function isc_CycleItem_setElementReadOnly(_1){this.$176(!_1&&!this.isDisabled())});isc.B._maxIndex=isc.C+5;isc.defineClass("CheckboxItem","CycleItem");isc.addGlobal("BooleanItem",isc.CheckboxItem);isc.A=isc.CheckboxItem;isc.A.trueFalseValueMap=[true,false];isc.A.trueFalseNullValueMap=[true,false,null];isc.A=isc.CheckboxItem.getPrototype();isc.A.type="boolean";isc.A.textBoxStyle="labelAnchor";isc.A.width=150;isc.A.showLabel=true;isc.A.height=20;isc.A.requiredTitlePrefix="<b>";isc.A.requiredTitleSuffix="</b>";isc.A.valueIconLeftPadding=4;isc.A.valueIconRightPadding=3;isc.A.showValueIconOver=true;isc.A.showValueIconFocused=true;isc.A.showValueIconDown=true;isc.A.showValueIconDisabled=true;isc.A.checkedImage="[SKINIMG]/DynamicForm/checked.gif";isc.A.uncheckedImage="[SKINIMG]/DynamicForm/unchecked.gif";isc.A.partialSelectedImage="[SKINIMG]/DynamicForm/partialcheck.gif";isc.A.unsetImage="[SKINIMG]/DynamicForm/unsetcheck.gif";isc.A.valueIconWidth=13;isc.A.valueIconHeight=13;isc.A=isc.CheckboxItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.allowEmptyValue=false;isc.A.$18q="true";isc.A.$18r="false";isc.A.emptyValueKey="**NULL**";isc.A.$13u="Over";isc.A.$13v="Down";isc.A.$13w="Disabled";isc.A.$20a="height:";isc.A.$ph="px";isc.B.push(isc.A.getValueMap=function isc_CheckboxItem_getValueMap(){if(this.$20b)return this.$20b;var _1=this.Super("getValueMap",arguments);if(_1!=null){var _2=false,_3=isc.isAn.Object(_1);if(isc.isAn.Array(_1)){_3=false;if(_1.length!=2){_1=null}else{var _4=_1.indexOf(this.$18r);if(_4!=-1)_1[_4]=false;var _5=_1.indexOf(this.$18q);if(_5!=-1)_1[_5]=true;if(!((_1[0]&&!_1[1])||(!_1[0]&&_1[1]))){this.logInfo("Checkbox item created with valueMap:"+_1+"which has no explicit true/false display values. Mapping the first value to true and the second to false.");var _6={};_6[_1[0]]=true;_6[_1[1]]=false;this.valueMap=_1=_6;_3=true}else{_2=true}}}
if(_3){var _7=[],_8=[],_9;for(var _10 in _1){if(_7.length==2){_9=true;break}
var _11=_1[_10];if(_10==this.$18r)_10=false;else if(_10==this.$18q)_10=true;if(_11==this.$18r){_11=_1[_10]=false}else if(_11==this.$18q){_11=_1[_10]=true}
_8[_8.length]=_10;_7[_7.length]=_11}
if(_7.length!=2)_9=true;if(!_9){if((_7[0]&&!_7[1])||(!_7[0]&&_7[1])){}else if((_8[0]&&!_8[1])||(!_8[0]&&_8[1])){_1=_8}else _9=true}
if(_9)_1=null}else if(!_2){_1=null}}
if(_1&&this.allowEmptyValue){if(_2)_1.add(null);else _1[this.emptyValueKey]=null}
return(this.$20b=_1||(this.allowEmptyValue?isc.CheckboxItem.trueFalseNullValueMap:isc.CheckboxItem.trueFalseValueMap))},isc.A.$17d=function isc_CheckboxItem__unmapKey(){var _1=this.Super("$17d",arguments);if(_1==this.emptyValueKey)_1=null;return _1},isc.A.setValueMap=function isc_CheckboxItem_setValueMap(){this.$20b=null;return this.Super("setValueMap",arguments)},isc.A.init=function isc_CheckboxItem_init(_1,_2,_3,_4){this.invokeSuper(isc.CheckboxItem,"init",_1,_2,_3,_4);if(this.showValueIconOnly==null)this.showValueIconOnly=!this.showLabel;if(this.textAlign==null&&this.align!=null){this.textAlign=this.align}},isc.A.setShowLabel=function isc_CheckboxItem_setShowLabel(_1){this.showLabel=_1;this.showValueIconOnly=!_1;if(this.isDrawn())this.redraw()},isc.A.mapValueToDisplay=function isc_CheckboxItem_mapValueToDisplay(_1,_2,_3,_4){if(this.labelAsTitle)return isc.emptyString;var _5=this.invokeSuper(isc.CheckboxItem,"getTitleHTML",_1,_2,_3,_4);var _6=this.form;if((this.required||this.$11m)&&_6&&_6.hiliteRequiredFields){_5=this.requiredTitlePrefix+_5+this.requiredTitleSuffix}
return _5},isc.A.getValueIcon=function isc_CheckboxItem_getValueIcon(_1){var _2=this.getValueMap();if(!isc.isAn.Array(_2)&&isc.isAn.Object(_2))_1=_2[_1];if(_1)return this.checkedImage;else if(_1===false)return this.uncheckedImage;else{if(this.showUnsetImage!=null){return this.showUnsetImage?this.unsetImage:this.uncheckedImage}
return this.allowEmptyValue?this.unsetImage:this.uncheckedImage}},isc.A.getTitleHTML=function isc_CheckboxItem_getTitleHTML(_1,_2,_3){if(this.labelAsTitle)return this.invokeSuper(isc.CheckboxItem,"getTitleHTML",_1,_2,_3);return isc.emptyString},isc.A.$15s=function isc_CheckboxItem__writeOuterTable(){return true},isc.A.getTextBoxHeight=function isc_CheckboxItem_getTextBoxHeight(){return null},isc.A.getTextBoxWidth=function isc_CheckboxItem_getTextBoxWidth(){if(!this.showValueIconOnly)return this.Super("getTextBoxWidth",arguments);return((this.getValueIconWidth()||0)+(this.valueIconLeftPadding+this.valueIconRightPadding))},isc.A.getTextBoxCellCSS=function isc_CheckboxItem_getTextBoxCellCSS(){var _1=isc.Canvas.$42a;var _2=this.invokeSuper(isc.CheckboxItem,"getTextBoxHeight");if(_2&&isc.isA.Number(_2))
_1+=this.$20a+_2+this.$ph;return _1},isc.A.$85m=function isc_CheckboxItem__shouldAllowExpressions(){return false});isc.B._maxIndex=isc.C+13;isc.ClassFactory.defineClass("NativeCheckboxItem","FormItem");isc.A=isc.NativeCheckboxItem.getPrototype();isc.A.textBoxStyle="labelAnchor";isc.A.implementsPromptNatively=isc.screenReader;isc.A.$183="CHECKBOX";isc.A.$125=true;isc.A.showLabel=true;isc.A.$16b={onclick:isc.FormItem.$12y};isc.A=isc.NativeCheckboxItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$20c=["<TABLE role='presentation' CELLSPACING=0 CELLPADDING=0 BORDER=0 ID='",,"' class='",,"'><TR>","<TD WIDTH=20><INPUT TYPE=",," NAME=",," ID=",,,,,,," handleNativeEvents=false ",,,," TABINDEX=",,(isc.Browser.isMoz?" STYLE='-moz-user-focus:":null),,"></TD>",,"</TR></TABLE>"];isc.A.$20d=["<TD CLASS='",,"' ALIGN=LEFT",,,,," style='"+isc.Canvas.$42a,,"'>",,"</TD>"];isc.A.$20e=["<A HREF='javascript:void ",,".boxTitleClick()' ONMOUSEOVER='window.status = \"",,"\"; return true' ONMOUSEOUT='window.status = \"\"; return true' CLASS='",,"' title=\"",,"\">",,"</A>"];isc.B.push(isc.A.getInnerWidth=function isc_NativeCheckboxItem_getInnerWidth(_1,_2,_3,_4){if(!this.showLabel||this.showValueIconOnly){return 20}
return this.invokeSuper(isc.NativeCheckboxItem,"getInnerWidth",_1,_2,_3,_4)},isc.A.getElementHTML=function isc_NativeCheckboxItem_getElementHTML(_1){var _2=this.form.getID(),_3=this.getItemID(),_4=this.$20c,_5=this.getAnchorTitle();_4[1]=this.$qs("checkboxTable");_4[3]=this.getTextBoxStyle();_4[6]=this.$183;_4[8]=this.getElementName();_4[10]=this.getDataElementId();_4[11]=this.$155();if(this.value!=null){_4[12]=" VALUE='";_4[13]=this.value;_4[14]="'";if(this.containerWidget&&this.containerWidget.isPrinting){if(_1==this.value)_4[14]+=" CHECKED='true'"}}else{_4[12]=null;_4[13]=null;_4[14]=null}
if(this.isDisabled()||this.isReadOnly())_4[15]=" DISABLED";else _4[15]=null;if(this.implementsPromptNatively){if(this.prompt!=null){_4[17]=" TITLE='";_4[18]=this.prompt;_4[19]="'"}else{_4[17]=_4[18]=_4[19]=null}}
var _6=this.$154();_4[21]=_6;if(isc.Browser.isMoz){_4[23]=(_6>0?"normal;'":"ignore;'")}
if(this.showLabel&&!this.showValueIconOnly){var _7=this.getElementWidth(),_8=this.getInnerHeight();if(isc.isA.Number(_7))_7=Math.max(20,_7-20);if(isc.Browser.isSafari&&!this.isDisabled()&&(isc.Browser.isChrome?isc.Browser.safariVersion<535:isc.Browser.safariVersion<534.5))
{var _9=this.$20e;_9[1]=_3;_9[3]=this.prompt;_9[5]=this.getTextBoxStyle();_9[7]=this.prompt;_9[9]=_5;_5=_9.join(isc.emptyString)}
var _10=this.$20d;_10[1]=this.getTextBoxStyle();if(_7!=null){_10[3]=" WIDTH=";_10[4]=_7}else{_10[3]=null;_10[4]=null}
if(_8!=null){_10[5]=" HEIGHT=";_10[6]=_8}else{_10[5]=null;_10[6]=null}
if(this.wrap==false){_10[8]=this.$136}else{_10[8]=null}
_10[10]=_5;_4[25]=_10.join(isc.emptyString)}else{_4[25]=null}
return _4.join(isc.emptyString)},isc.A.getOuterElement=function isc_NativeCheckboxItem_getOuterElement(_1,_2,_3){if(!this.isDrawn())return null;if(!this.$15s(this.$158)&&!this.showPickerIcon){var _4=this.getCheckboxTableElement();if(_4==null){_4=this.getDataElement()}
return _4}
return this.invokeSuper(isc.NativeCheckboxItem,"getOuterElement",_1,_2,_3)},isc.A.getCheckboxTableElement=function isc_NativeCheckboxItem_getCheckboxTableElement(){var _1=this.$qs("checkboxTable");return isc.Element.get(_1)},isc.A.getTitleHTML=function isc_NativeCheckboxItem_getTitleHTML(){return""},isc.A.getAnchorTitle=function isc_NativeCheckboxItem_getAnchorTitle(_1,_2,_3,_4){return this.invokeSuper(isc.NativeCheckboxItem,"getTitleHTML",_1,_2,_3,_4)},isc.A.setElementValue=function isc_NativeCheckboxItem_setElementValue(_1){var _2=this.getDataElement();if(!_2)return null;return _2.checked=(_1&&_1!="false")},isc.A.getElementValue=function isc_NativeCheckboxItem_getElementValue(){var _1=this.getDataElement();if(!_1)return null;return(_1.checked==true)},isc.A.boxTitleClick=function isc_NativeCheckboxItem_boxTitleClick(){var _1=this.getDataElement();if(_1)_1.checked=!_1.checked;this.form.elementChanged(this.getItemID())},isc.A.setElementReadOnly=function isc_NativeCheckboxItem_setElementReadOnly(_1){this.$176(!_1)},isc.A.updateState=function isc_NativeCheckboxItem_updateState(){this.Super("updateState",arguments);var _1=this.getCheckboxTableElement();if(_1){var _2=this.getTextBoxStyle();_1.className=_2;if(this.showLabel&&!this.showValueIconOnly){var _3=_1.rows[0].cells[1];_3.className=_2}}});isc.B._maxIndex=isc.C+11;isc.ClassFactory.defineClass("HeaderItem","FormItem");isc.A=isc.HeaderItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.shouldSaveValue=false;isc.A.defaultValue="Header";isc.A.height=20;isc.A.showTitle=false;isc.A.textBoxStyle="headerItem";isc.A.canSelectText=true;isc.A.colSpan="*";isc.A.startRow=true;isc.A.endRow=true;isc.A.emptyDisplayValue="&nbsp;";isc.B.push(isc.A.isEditable=function isc_HeaderItem_isEditable(){return false});isc.B._maxIndex=isc.C+1;isc.defineClass("SectionItem","CanvasItem");isc.A=isc.SectionItem.getPrototype();isc.A.shouldSaveValue=false;isc.A.defaultValue="Section Header";isc.A.sectionVisible=true;isc.A.sectionExpanded=true;isc.A.sectionHeaderClass="SectionHeader";isc.A.canCollapse=true;isc.A.autoDestroy=true;isc.A.showTitle=false;isc.A.startRow=true;isc.A.endRow=true;isc.A.colSpan="*";isc.A.width="*";isc.A.height=20;isc.addGlobal("GroupItem",isc.SectionItem);isc.A=isc.SectionItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.init=function isc_SectionItem_init(){if(this.sectionVisible==false)this.sectionExpanded=false;this.Super("init",arguments)},isc.A.$18y=function isc_SectionItem__createCanvas(){var _1=isc.ClassFactory.getClass(this.sectionHeaderClass),_2={autoDraw:false,section:this,title:this.value!=null?this.value:this.defaultValue,expanded:this.sectionExpanded,layout:this,height:this.height,canCollapse:this.canCollapse,canDrag:false,getCurrentCursor:function(){if(this.canvasItem&&this.canvasItem.cursor!=null)return this.canvasItem.cursor;return this.canCollapse==false?isc.Canvas.DEFAULT:isc.Canvas.HAND}};if(this.baseStyle!=null)_2.baseStyle=this.baseStyle;if(this.printStyleName!=null)_2.printStyleName=this.printStyleName;isc.addProperties(_2,this.canvasDefaults,this.canvasProperties);var _3=_1.create(_2);this.canvas=_3;this.Super("$18y",arguments)},isc.A.isEditable=function isc_SectionItem_isEditable(){return false},isc.A.isExpanded=function isc_SectionItem_isExpanded(){return this.sectionExpanded==true?true:false},isc.A.setValue=function isc_SectionItem_setValue(_1){this.Super("setValue",arguments);if(this.canvas)this.canvas.setTitle(this.getValue())},isc.A.sectionHeaderClick=function isc_SectionItem_sectionHeaderClick(){this.cellClick();return false},isc.A.getDragResizeTarget=function isc_SectionItem_getDragResizeTarget(_1){return null},isc.A.cellClick=function isc_SectionItem_cellClick(){if(!this.canCollapse)return;if(this.sectionExpanded){this.collapseSection()}else{this.expandSection()}},isc.A.expandSection=function isc_SectionItem_expandSection(){this.form.$100(this);this.$20f();if(this.itemIds==null){this.logWarn("sectionItem defined with no items or itemIds");return}
for(var i=0;i<this.itemIds.length;i++){var _2=this.itemIds[i],_3=this.form.getItem(_2);if(_3==null){this.logWarn("expandSection: no such item: "+_2);continue}
if(_3.showIf==null&&_3.$20g!=null)_3.showIf=_3.$20g;_3.show(true)}
this.canvas.setExpanded(true);this.sectionExpanded=true;this.form.$10m=true},isc.A.$20f=function isc_SectionItem__createItems(){if(this.items!=null&&!this.$20h){this.form.addItems(this.items,this.form.items.indexOf(this)+1);this.itemIds=[];for(var i=0;i<this.items.length;i++){this.itemIds[i]=this.items[i].getFieldName();if(this.itemIds[i]==null){this.logWarn("unable to include item:"+this.items[i]+" with no name in section")}}
this.$20h=true}},isc.A.addItem=function isc_SectionItem_addItem(_1,_2){this.form.addItems(_1,this.form.items.indexOf(this)+1+(_2||0));this.itemIds=this.itemIds||[];this.itemIds.add(_1.name)},isc.A.removeItem=function isc_SectionItem_removeItem(_1){var _2=(isc.isA.Object(_1)?_1.name:_1);this.itemIds.remove(_2);this.form.removeItems(_1)},isc.A.getItem=function isc_SectionItem_getItem(_1){return this.form.getItem(_1)},isc.A.collapseSection=function isc_SectionItem_collapseSection(){this.form.$101(this);if(this.itemIds==null){if(this.items==null||this.$20h){this.logWarn("collapseSection with no sectionItem.itemIds");return}}else{for(var i=0;i<this.itemIds.length;i++){var _2=this.itemIds[i],_3=this.form.getItem(_2);if(_3==null){this.logWarn("collapseSection: no such item: "+_2);continue}
if(_3.showIf!=null)_3.$20g=_3.showIf;_3.hide()}}
this.canvas.setExpanded(false);this.sectionExpanded=false;this.form.$10m=true},isc.A.$85m=function isc_SectionItem__shouldAllowExpressions(){return false},isc.A.shouldDisableCanvas=function isc_SectionItem_shouldDisableCanvas(){return this.isDisabled()});isc.B._maxIndex=isc.C+16;isc.ClassFactory.defineClass("HiddenItem","FormItem");isc.A=isc.HiddenItem.getPrototype();isc.A.showTitle=false;isc.A.cellStyle=null;isc.A.width=0;isc.A.height=0;isc.A.colSpan=0;isc.A.rowSpan=0;isc.A.$125=true;isc.A.canFocus=false;isc.A.shouldPrint=false;isc.A=isc.HiddenItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.isEditable=function isc_HiddenItem_isEditable(){return false},isc.A.getInnerHTML=function isc_HiddenItem_getInnerHTML(_1){var _2=isc.StringBuffer.concat("<INPUT ID='",this.getDataElementId(),"' TYPE=HIDDEN NAME=",this.getElementName(),">");return _2.toString()},isc.A.getRowSpan=function isc_HiddenItem_getRowSpan(){return 0},isc.A.getColSpan=function isc_HiddenItem_getColSpan(){return 0},isc.A.shouldShowTitle=function isc_HiddenItem_shouldShowTitle(){return false},isc.A.getErrorHTML=function isc_HiddenItem_getErrorHTML(_1){this.logError("Error in hidden field '"+this.getFieldName()+"':\r  "+_1);return null},isc.A.isStartRow=function isc_HiddenItem_isStartRow(){return false},isc.A.isEndRow=function isc_HiddenItem_isEndRow(){return false});isc.B._maxIndex=isc.C+8;isc.ClassFactory.defineClass("StaticTextItem","FormItem");isc.A=isc.StaticTextItem.getPrototype();isc.A.height=null;isc.A.applyHeightToTextBox=false;isc.A.width=null;isc.A.wrap=true;isc.A.clipValue=false;isc.A.textBoxStyle="staticTextItem";isc.A.canSelectText=true;isc.A.redrawOnShowIcon=false;isc.A.useShortDateFormat=false;isc.A.canEscapeHTML=true;isc.A.escapeHTML=null;isc.A.emptyDisplayValue="&nbsp;";isc.A=isc.StaticTextItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.isEditable=function isc_StaticTextItem_isEditable(){return false},isc.A.$kk=function isc_StaticTextItem__canFocus(){if(this.canFocus!=null)return this.canFocus;return isc.screenReader},isc.A.mapValueToDisplay=function isc_StaticTextItem_mapValueToDisplay(_1){if(isc.SimpleType.inheritsFrom(this.type,"float")){var _2=null;if(isc.isA.String(_1)){var _3=window.parseFloat(_1);if(!window.isNaN(_3)&&_3==_1){_2=_3}}else if(isc.isA.Number(_1)){_2=_1}
if(_2!=null){if(this.decimalPrecision!=null||this.decimalPad!=null){return isc.Canvas.getFloatValueAsString(_2,this.decimalPrecision,this.decimalPad)}else if(this.precision!=null){return isc.Canvas.getNumberValueAsString(_2,this.precision,"float")}}}
return this.Super("mapValueToDisplay",arguments)});isc.B._maxIndex=isc.C+3;isc.ClassFactory.defineClass("LinkItem","TextItem");isc.A=isc.LinkItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.disableIconsOnReadOnly=false;isc.A.wrap=false;isc.A.height=null;isc.A.canEdit=false;isc.A.readOnlyTextBoxStyle="staticTextItem";isc.B.push(isc.A.shouldApplyStaticTypeFormat=function isc_LinkItem_shouldApplyStaticTypeFormat(){return!this.canEdit});isc.B._maxIndex=isc.C+1;isc.A=isc.LinkItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$14g=["<DIV ID='",,"' "+isc.DynamicForm.$89+"='",,,"' CLASS='",,"' STYLE='",,"'>",,"</DIV>"];isc.A.inactiveEditorLinkDisabled=true;isc.B.push(isc.A.$15m=function isc_LinkItem__writeOutFocusProxy(){return(this.isReadOnly()?false:this.Super("$15m",arguments))},isc.A.$20i=function isc_LinkItem__getLinkElement(){if(!this.isReadOnly())return this.Super("$20i",arguments);if(!this.isDrawn())return null;return(isc.Element.get(this.getID()+"$20j"))},isc.A.getFocusElement=function isc_LinkItem_getFocusElement(){return(this.isReadOnly()?this.$20i():this.Super("getFocusElement",arguments))},isc.A.hasDataElement=function isc_LinkItem_hasDataElement(){return!this.isReadOnly()},isc.A.$kk=function isc_LinkItem__canFocus(){return(this.isReadOnly()?true:this.Super("$kk",arguments))},isc.A.getTextBoxStyle=function isc_LinkItem_getTextBoxStyle(){if(!this.isReadOnly())return this.Super("getTextBoxStyle",arguments);if(this.$68y()&&this.printTextBoxStyle){return this.$15x(this.printTextBoxStyle)}
return(this.readOnlyTextBoxStyle?this.$15x(this.readOnlyTextBoxStyle):null)},isc.A.$94a=function isc_LinkItem__inactiveLinkClicked(_1){if(!this.inactiveEditorLinkDisabled){return this.$30i(_1)}
if(!isc.Browser.isIE){_1.preventDefault()}
return false},isc.A.$30i=function isc_LinkItem__linkClicked(_1){var _2=(this.destroyed||!this.isDrawn()||!this.isVisible()||this.isDisabled());if(!_2){_2=isc.EH.targetIsMasked(this.containerWidget);if(_2&&(this.form!=this.containerWidget)){_2=isc.EH.targetIsMasked(this.form)}}
if(!_2&&this.target=="javascript"){_2=true;this.handleClick()}
if(_2){if(!isc.Browser.isIE){_1.preventDefault()}
return false}
return true},isc.A.getReadOnlyHTML=function isc_LinkItem_getReadOnlyHTML(_1){var _2=this.getLinkHTML(_1);var _3=this.$14g;_3[1]=this.$15g();_3[3]=this.getID();_3[6]=this.getTextBoxStyle();_3[8]=this.getTextBoxCSS();_3[10]=_2;return _3.join(isc.emptyString)},isc.A.getLinkHTML=function isc_LinkItem_getLinkHTML(_1){var _2=this.$xq(this._value);if(this.showValueIconOnly)return _2;if(_1!=null)_1=isc.iscToLocaleString(_1);if(_1==null)_1=isc.emptyString;var _3=this.linkTitle;if(_3==null)_3=_1;var _4=this.target;if(_4=="javascript"){_1="javascript:void"}
var _5=[" onclick='if(window.",this.getID(),") return ",this.getID()];if(this.isInactiveHTML()){_5.add(".$94a(event); else {if (event.preventDefault != null) event.preventDefault(); return false}' ")}else _5.add(".$30i(event);' ");_5=_5.join("");_1=isc.Canvas.linkHTML(_1,_3,_4,(this.getID()+"$20j"),this.getGlobalTabIndex(),this.accessKey,_5,isc.DynamicForm.$9a+"='"+isc.DynamicForm.$9c+"'");if(_2!=null)_1=_2+_1;return _1},isc.A.setElementValue=function isc_LinkItem_setElementValue(_1){if(!this.isDrawn())return;if(!this.isReadOnly())return this.Super("setElementValue",arguments);if(this.hasFocus)this.blurItem();var _2=this.$15h();if(_2){_2.innerHTML=this.getLinkHTML(_1);this.$159()}},isc.A.setLinkTitle=function isc_LinkItem_setLinkTitle(_1){this.linkTitle=_1;this.redraw()},isc.A.setElementReadOnly=function isc_LinkItem_setElementReadOnly(_1){this.redraw()});isc.B._maxIndex=isc.C+13;isc.defineClass("PasswordItem","TextItem");isc.A=isc.PasswordItem;isc.A.$1158="\u2022\u2022\u2022\u2022\u2022\u2022\u2022\u2022";isc.A=isc.PasswordItem.getPrototype();isc.A.$183="PASSWORD";isc.A.showClippedValueOnHover=false;isc.A=isc.PasswordItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.valueHoverHTML=function isc_PasswordItem_valueHoverHTML(){var _1=this.getElementValue();if(_1==null)_1="";var _2=isc.PasswordItem.$1158;while(_2.length<_1.length)isc.PasswordItem.$1158=_2+=_2;return _2.substring(0,_1.length)});isc.B._maxIndex=isc.C+1;isc.ClassFactory.defineClass("RadioGroupItem","ContainerItem");isc.A=isc.RadioGroupItem.getPrototype();isc.A.itemHeight=20;isc.A.vertical=true;isc.A.prompt=null;isc.A.textBoxStyle="labelAnchor";isc.A.writeOutLabelTag=false;isc.A=isc.RadioGroupItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$145e={Arrow_Left:true,Arrow_Right:true,Arrow_Up:true,Arrow_Down:true};isc.B.push(isc.A.init=function isc_RadioGroupItem_init(){if(this.disabledValues!=null){this.$821={};for(var i=0;i<this.disabledValues.length;i++){var _2=this.disabledValues[i];this.$821[_2]=true}}
return this.Super("init",arguments)},isc.A.$11d=function isc_RadioGroupItem__useHiddenDataElement(){return false},isc.A.setItems=function isc_RadioGroupItem_setItems(){var _1=this.getValueMap();if(!this.itemCache)this.itemCache={};var _2=[];if(isc.isAn.Array(_1)){for(var i=0;i<_1.length;i++){var _4=_1[i];_2.add(this.$20k(_4,_4))}}else{for(var _4 in _1){var _5=_1[_4];_2.add(this.$20k(_5,_4))}}
return this.Super("setItems",[_2])},isc.A.$20k=function isc_RadioGroupItem__getRadioItem(_1,_2){var _3=this.itemCache[_2+"|"+_1];if(_3){delete _3._value;delete _3.hasFocus;delete _3.disabled}else{var _4;if(this.itemPrompt){var _5=new RegExp("\\*","g");_4=this.itemPrompt.replace(_5,_1)}
var _6={type:"radio",name:"$540"+_2,_autoAssignedName:true,value:_2,getElementName:function(){return this.parentItem.getElementName()},title:_1,prompt:_4,height:this.itemHeight,$8l:this.vertical,textBoxStyle:this.textBoxStyle,wrap:this.wrap,updateValue:function(){this.parentItem.updatePreviousSelection(this.value);return this.Super("updateValue",arguments)},setDisabled:function(_8){this.parentItem.$822(this.value,_8);return this.Super("setDisabled",arguments)},shouldSaveValue:false,suppressItemChanged:true};isc.addProperties(_6,this.itemProperties);var _7=this;if(!_6.itemHoverHTML&&this.valueHoverHTML){_6.itemHoverHTML=function(){return _7.valueHoverHTML(_2,_7,_7.form)}}
_3=this.itemCache[_2+"|"+_1]=isc.FormItemFactory.makeItem(_6)}
if(this.$821!=null&&this.$821[_2]!=null){_3.disabled=this.$821[_2]}
return _3},isc.A.getItemValue=function isc_RadioGroupItem_getItemValue(_1){var _2=_1.value;if(_2==this.getValue())return _2;return _1.unselectedValue},isc.A.itemForValue=function isc_RadioGroupItem_itemForValue(_1){return this["$540"+_1]},isc.A.setValueDisabled=function isc_RadioGroupItem_setValueDisabled(_1,_2){if(this.$821!=null&&this.$821[_1]==_2)return;var _3=this.itemForValue(_1);if(_3&&this.items.contains(_3)){_3.setDisabled(_2)}else{this.$821[_1]=_2}},isc.A.$822=function isc_RadioGroupItem__itemDisabled(_1,_2){if(this.$821==null)this.$821={};this.$821[_1]=_2},isc.A.getInnerHTML=function isc_RadioGroupItem_getInnerHTML(_1){this.setItems();return this.Super("getInnerHTML",arguments)},isc.A.isEditable=function isc_RadioGroupItem_isEditable(){return true},isc.A.setElementReadOnly=function isc_RadioGroupItem_setElementReadOnly(_1){},isc.A.setValue=function isc_RadioGroupItem_setValue(_1){this.$17g=true;var _2=(this.valueMap==null)||(isc.isAn.Array(this.valueMap)?!this.valueMap.contains(_1):!isc.propertyDefined(this.valueMap,_1));if(_1==null||_2){_1=this.getDefaultValue()}
if(this.items!=null){var _3=this.itemForValue(_1);if(_3!=null){this.itemForValue(_1).setValue(_1)}
if(this._value!=null&&this._value!=_1){var _4=this.itemForValue(this._value);if(_4)_4.setValue(null)}else if(this.$17m){var _4=this.itemForValue(this.$17n);if(_4)_4.setValue(null)}}
this.saveValue(_1)},isc.A.updatePreviousSelection=function isc_RadioGroupItem_updatePreviousSelection(_1){var _2=this.getValue();if(isc.isA.String(_1))_2=_2+"";if(_2==null||_1==_2||this.itemForValue(_2)==null)
{return}
this.itemForValue(_2).updateValue()},isc.A.updateValue=function isc_RadioGroupItem_updateValue(){var _1;for(var i=0;i<this.items.length;i++){_1=this.items[i].getValue();if(_1!=null){break}}
if(_1==this._value)return;if(this.handleChange(_1,this._value)==false){return}
_1=this.$17n;this.saveValue(_1);this.handleChanged(_1)},isc.A.setValueMap=function isc_RadioGroupItem_setValueMap(_1){this.Super("setValueMap",arguments);this.redraw()},isc.A.getHeight=function isc_RadioGroupItem_getHeight(){var _1=isc.isA.Number(this.cellPadding)?this.cellPadding:0;if(!this.vertical)return this.itemHeight+_1*2;var _2=this.getValueMap(),_3=0;if(isc.isAn.Array(_2)){_3=_2.length}else{for(var _4 in _2){_3++}}
return _3*(this.itemHeight+_1*2)},isc.A.shouldStopKeyPressBubbling=function isc_RadioGroupItem_shouldStopKeyPressBubbling(_1,_2){if(this.$145e[_1])return true;return this.Super("shouldStopKeyPressBubbling",arguments)});isc.B._maxIndex=isc.C+17;isc.ClassFactory.defineClass("RadioItem","NativeCheckboxItem");isc.A=isc.RadioItem.getPrototype();isc.A.$183="RADIO";isc.A.value=true;isc.A.defaultValue=null;isc.A=isc.RadioItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.setElementValue=function isc_RadioItem_setElementValue(_1){var _2=this.getDataElement();if(!_2)return null;if(isc.isA.String(this.value))_1=(_1+"");return _2.checked=(this.value==_1)},isc.A.getElementValue=function isc_RadioItem_getElementValue(){var _1=this.getDataElement(),_2=this.value,_3=this.unselectedValue;if(!_1)return _3;return(_1.checked?_2:_3)},isc.A.boxTitleClick=function isc_RadioItem_boxTitleClick(){var _1=this.getDataElement();if(_1&&!_1.checked){_1.checked=true;this.form.elementChanged(this.getItemID())}},isc.A.mapValueToDisplay=function isc_RadioItem_mapValueToDisplay(_1){return _1},isc.A.mapDisplayToValue=function isc_RadioItem_mapDisplayToValue(_1){return _1},isc.A.setElementReadOnly=function isc_RadioItem_setElementReadOnly(_1){this.$176(!_1&&!this.isDisabled())});isc.B._maxIndex=isc.C+6;isc.ClassFactory.defineClass("ResetItem","ButtonItem");isc.A=isc.ResetItem.getPrototype();isc.A.title="Reset";isc.A=isc.ResetItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.handleClick=function isc_ResetItem_handleClick(){if(this.Super("handleClick",arguments)==false)return false;this.form.resetValues()});isc.B._maxIndex=isc.C+1;if(isc.ListGrid){isc.defineClass("NativeDateItem","TextItem");isc.A=isc.NativeDateItem.getPrototype();isc.A.ariaRole="range";isc.A.browserInputType="date";isc.A.textBoxStyle="nativeDateItem";isc.A.inFieldHintStyle="nativeDateItemInFieldHint";isc.A.showClippedValueOnHover=false;isc.A=isc.NativeDateItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$118w="wrapper";isc.A.$118x="hint";isc.A.operaForegroundColor="black";isc.B.push(isc.A.$118y=function isc_NativeDateItem__getWrapperElementId(){if(this.isInactiveHTML())return this.$qs(this.$118w);if(this.$118z==null){this.$118z=this.$qs(this.$118w,true)}
return this.$118z},isc.A.$1180=function isc_NativeDateItem__getHintElementId(){if(this.isInactiveHTML())return this.$qs(this.$118x);if(this.$1181==null){this.$1181=this.$qs(this.$118x,true)}
return this.$1181},isc.A.$1182=function isc_NativeDateItem__getInFieldHintElemStyle(){if(this.showDisabled&&this.isDisabled())return this.inFieldHintStyle+"Disabled";return this.inFieldHintStyle},isc.A.getElementHTML=function isc_NativeDateItem_getElementHTML(_1,_2){if(!this.$712())return this.Super("getElementHTML",arguments);var _3=this.getHeight();return"<div id='"+this.$118y()+"' class='"+this.$15x(this.$118w)+"' style='display:inline-block;position:relative;height:"+_3+"px'>"+this.Super("getElementHTML",arguments)+"<span id='"+this.$1180()+"' class='"+this.$1182()+"' style='line-height:"+_3+"px'></span></div>"},isc.A.getElementStyleHTML=function isc_NativeDateItem_getElementStyleHTML(){var _1=this.Super("getElementStyleHTML",arguments);if(isc.Browser.isOpera){_1=_1.substring(0,_1.length-2)+";color:"+this.operaForegroundColor+_1.substring(_1.length-2)}
var _2=isc.Date.getLogicalDateOnly(this.getStartDate()),_3=isc.Date.getLogicalDateOnly(this.getEndDate());if(_2!=null)_1+="min='"+this.mapValueToDisplay(_2)+"' ";if(_3!=null)_1+="max='"+this.mapValueToDisplay(_3)+"' ";return _1},isc.A.getElementValue=function isc_NativeDateItem_getElementValue(){var _1=this.getDataElement(),_2;if(!_1||!(_2=_1.value))return null;return Date.createLogicalDate(parseInt(_2,10),parseInt(_2.substring(5),10)-1,parseInt(_2.substring(8),10))},isc.A.setElementValue=function isc_NativeDateItem_setElementValue(_1,_2){if(!this.isDrawn())return;if(_2===undefined){_2=this._value}
var _3=this.getDataElement();if(_3!=null){_3.value=_1}},isc.A.getStartDate=function isc_NativeDateItem_getStartDate(){var _1=this.startDate;if(_1!=null&&!isc.isA.Date(_1)){_1=isc.DateItem.DEFAULT_START_DATE}
return _1},isc.A.getEndDate=function isc_NativeDateItem_getEndDate(){var _1=this.endDate;if(_1!=null&&!isc.isA.Date(_1)){_1=isc.DateItem.DEFAULT_END_DATE}
return _1},isc.A.mapValueToDisplay=function isc_NativeDateItem_mapValueToDisplay(_1){if(isc.isA.Date(_1)){_1=isc.Date.getLogicalDateOnly(_1);return _1.toSchemaDate()}
return _1},isc.A.$66t=function isc_NativeDateItem__showInFieldHint(){var _1=isc.Element.get(this.$1180());if(_1){this.getDataElement().className=this.$66v();_1.className=this.$1182();var _2=this.getHint();if(_2)_2=_2.unescapeHTML();_1.innerText=_2;this.$66u=true}},isc.A.$66s=function isc_NativeDateItem__hideInFieldHint(_1){var _2=isc.Element.get(this.$1180());if(_2){this.getDataElement().className=this.getTextBoxStyle();_2.className=this.$1182();_2.innerText=isc.emptyString;this.$66u=false}},isc.A.updateState=function isc_NativeDateItem_updateState(){this.Super("updateState",arguments);if(this.$66u){var _1=isc.Element.get(this.$1180());if(_1)_1.className=this.$1182()}});isc.B._maxIndex=isc.C+13;isc.defineClass("NativeDateTimeItem","NativeDateItem");isc.A=isc.NativeDateTimeItem.getPrototype();isc.A.browserInputType="datetime-local";isc.A.textBoxStyle="nativeDatetimeItem";isc.A.inFieldHintStyle="nativeDatetimeItemInFieldHint";isc.A=isc.NativeDateTimeItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.getElementValue=function isc_NativeDateTimeItem_getElementValue(){var _1=this.getDataElement(),_2;if(!_1||!(_2=_1.value))return null;var _3=parseInt(_2,10),_4=parseInt(_2.substring(5),10)-1,_5=parseInt(_2.substring(8),10),h=parseInt(_2.substring(11),10),m=parseInt(_2.substring(14),10),s=(_2.length>=19?parseInt(_2.substring(17),10):0);return new Date(Date.UTC(_3,_4,_5,h,m,s))},isc.A.mapDisplayToValue=function isc_NativeDateTimeItem_mapDisplayToValue(_1){if(isc.Time.$854&&isc.isA.Date(_1)){return Date.createDatetime(_1.getUTCFullYear(),_1.getUTCMonth(),_1.getUTCDate(),_1.getUTCHours(),_1.getUTCMinutes(),_1.getUTCSeconds(),_1.getUTCMilliseconds())}
return _1},isc.A.mapValueToDisplay=function isc_NativeDateTimeItem_mapValueToDisplay(_1){if(isc.isA.Date(_1)){var _2=_1.toSerializeableDate();return _2.substring(0,10)+"T"+_2.substring(11)}
return _1});isc.B._maxIndex=isc.C+3;isc.defineClass("DateItem","ContainerItem");isc.A=isc.DateItem;isc.A.mapCache={};isc.A.DAY_MONTH_YEAR="DMY";isc.A.MONTH_DAY_YEAR="MDY";isc.A.YEAR_MONTH_DAY="YMD";isc.A.DAY_MONTH="DM";isc.A.MONTH_DAY="MD";isc.A.YEAR_MONTH="YM";isc.A.MONTH_YEAR="MY";isc.A.DEFAULT_START_DATE=Date.createLogicalDate(1995,0,1);isc.A.DEFAULT_END_DATE=Date.createLogicalDate(2020,11,31);isc.A.DEFAULT_CENTURY_THRESHOLD=25;isc.A.chooserWidth=150;isc.A.chooserHeight=171;isc.A=isc.DateItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.type="date";isc.A.textFieldDefaults={name:"dateTextField",type:"text",changeOnBlur:true,$712:function(){return this.parentItem.$712()},getHint:function(){if(this.$712())return this.parentItem.hint;return null},changeOnKeypress:true,changed:function(){this.isDirty=true},blur:function(){this.isDirty=false;if(this.parentItem)this.parentItem.updateValue()},shouldSaveValue:false,getTextBoxStyle:function(){var _1=this.parentItem;return _1&&!_1.$1188()?_1.getTextBoxStyle():this.Super("getTextBoxStyle",arguments)},getTextBoxWidth:function(){if(this.parentItem)return this.parentItem.getTextBoxWidth();return this.Super("getTextBoxWidth",arguments)},$887:true};isc.A.textBoxStyle="textItem";isc.A.daySelectorDefaults={name:"daySelector",title:"Day",prompt:"Choose a day",type:"select",valueMap:"this.parentItem.getDayOptions()",shouldSaveValue:false,saveValue:function(){this.Super("saveValue",arguments);this.parentItem.updateValue()},getErrorWidth:function(){return 0},width:45,suppressItemChanged:true};isc.A.monthSelectorDefaults={name:"monthSelector",title:"Month",prompt:"Choose a month",type:"select",valueMap:"this.parentItem.getMonthOptions()",shouldSaveValue:false,saveValue:function(){this.Super("saveValue",arguments);this.parentItem.updateValue()},getErrorWidth:function(){return 0},width:55,suppressItemChanged:true};isc.A.yearSelectorDefaults={name:"yearSelector",title:"Year",prompt:"Choose a year",type:"select",valueMap:"this.parentItem.getYearOptions()",shouldSaveValue:false,saveValue:function(){this.Super("saveValue",arguments);this.parentItem.updateValue()},getErrorWidth:function(){return 0},width:60,suppressItemChanged:true};isc.A.width=150;isc.A.cellPadding=0;isc.A.useSharedPicker=true;isc.A.pickerConstructor="DateChooser";isc.A.pickerDefaults={width:isc.DateItem.chooserWidth,height:isc.DateItem.chooserHeight,border:"1px solid black;",showCancelButton:true,autoHide:true,closeOnEscapeKeypress:true};isc.A.textAlign=isc.Page.isRTL()?isc.Canvas.LEFT:isc.Canvas.RIGHT;isc.A.enforceDate=false;isc.A.invalidDateStringMessage="Invalid date";isc.A.showPickerIcon=true;isc.A.pickerIconWidth=20;isc.A.pickerIconHeight=20;isc.A.pickerIconSrc="[SKIN]/DynamicForm/DatePicker_icon.gif";isc.A.pickerIconHSpace=3;isc.A.pickerIconPrompt="Show Date Chooser";isc.A.pickerIconProperties={};isc.A.centuryThreshold=isc.DateItem.DEFAULT_CENTURY_THRESHOLD;isc.A.use24HourTime=true;isc.A.showPickerTimeItem=true;isc.B.push(isc.A.$143=function isc_DateItem__sizeTextBoxAsContentBox(){return isc.Browser.isStrict},isc.A.getOperator=function isc_DateItem_getOperator(_1){if(!this.operator)return"equals";return this.operator},isc.A.$92s=function isc_DateItem__shouldShowPickerIcon(){if(this.$1188())return false;if(isc[this.pickerConstructor]==null){this.logWarn("Date Item pickerConstructor class '"+this.pickerConstructor+"' is not loaded. This property may have been modified incorrectly  or a required module may not be loaded. Suppressing the pickerIcon.");return false}
return this.Super("$92s",arguments)});isc.B._maxIndex=isc.C+3;isc.A=isc.DateItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$g4="date";isc.A.$68l="datetime";isc.A.$792="[01][0-9]";isc.A.$793="[0-3]#";isc.A.$794="####";isc.A.$73d="[0-2][0-9]:[0-6][0-9]";isc.A.$73r={"MDY":"toUSShortDate","DMY":"toEuropeanShortDate","YMD":"toJapanShortDate"};isc.A.selectorPadding=2;isc.A.showChooserFiscalYearPicker=false;isc.A.showChooserWeekPicker=false;isc.B.push(isc.A.init=function isc_DateItem_init(){if(this.useTextField==null)this.useTextField=this.useMask||false;if(this.selectorFormat){if(!this.selectorFormat.toUpperCase||this.selectorFormat.length==0){this.selectorFormat=null}else{var _1=this.selectorFormat.toUpperCase();if(!_1.match("^[DMY]*$")){this.selectorFormat=null}}}
return this.Super("init",arguments)},isc.A.$712=function isc_DateItem__getShowHintInField(){return!!(this.useTextField&&this.showHint&&this.showHintInField&&!(isc.Browser.isOpera&&this.$1189()))},isc.A.getHint=function isc_DateItem_getHint(){if(!this.showHint||!this.hint||this.$712())return null;return this.hint},isc.A.$1188=function isc_DateItem__useNativeInput(){var _1=this.getBrowserInputType();return this.useTextField&&(_1==this.$g4||_1==this.$68l)},isc.A.$1189=function isc_DateItem__useNativeDatetimeInput(){return this.useTextField&&this.getBrowserInputType()==this.$68l},isc.A.getSelectorFormat=function isc_DateItem_getSelectorFormat(){if(this.selectorFormat){return this.selectorFormat}else if(this.inputFormat&&isc.isA.String(this.inputFormat)){return this.inputFormat}else{var _1=Date.getInputFormat();if(isc.isA.String(_1))return _1;this.logInfo("DateItem selectorFormat unspecified - assuming US format");return"MDY"}},isc.A.getInputFormatMask=function isc_DateItem_getInputFormatMask(_1){var _2=this.maskDateSeparator||this.$79w();var _3;if(_1=="YMD"){_3=[this.$794,_2,this.$792,_2,this.$793]}else if(_1=="DMY"){_3=[this.$793,_2,this.$792,_2,this.$794]}else{_3=[this.$792,_2,this.$793,_2,this.$794]}
if(isc.isA.DateTimeItem(this)){_3.addList([" ",this.$73d])}
return _3.join("")},isc.A.$79w=function isc_DateItem__getDefaultDateSeparator(){return Date.getDefaultDateSeparator()},isc.A.$79x=function isc_DateItem__getDefaultDateSeparatorRegex(){var _1=this.$79w();return new RegExp(_1,"/g")},isc.A.setItems=function isc_DateItem_setItems(_1){var _2=isc.DateItem,_3=this.getSelectorFormat();if(_1!=null&&_1.length!=0){this.logWarn("setItems() called for dateItem with itemList:"+_1+" - ignoring, and making use of default date fields")}
_1=this.items=[];if(this.useTextField){var _4={textAlign:this.textAlign,emptyDisplayValue:this.emptyDisplayValue,operator:this.operator,title:this.title};var _5={};if(this.$1188()){_5.textAlign=this.isRTL()?isc.Canvas.RIGHT:isc.Canvas.LEFT;_5.editorType=(this.$1189()?isc.NativeDateTimeItem:isc.NativeDateItem);_5.startDate=this.getStartDate(true);_5.endDate=this.getEndDate(true)}else if(this.useMask){var _6=this.getInputFormat();if(!_6)_6="MDY";var _7=this.getInputFormatMask(_6);_5.mask=_7;_5.maskSaveLiterals=true;_5.maskOverwriteMode=true;if(this.inputFormat){this.dateFormatter=this.$73r[_6]}}
var _8=isc.addProperties(_4,this.textFieldDefaults,_2.TEXT_FIELD,this.textFieldProperties,_5);_8.name="dateTextField";if(this.textField){_8.height=this.textField.height}else if(this.height&&(!this.textFieldProperties||!this.textFieldProperties.height))
{_8.height=this.getInnerHeight()}
_1.add(_8);var _9;this.daySelector=this.yearSelector=this.monthSelector=_9}else{for(var i=0;i<_3.length;i++){var _11=_3.charAt(i);var _12,_13,_14,_15=null;if(_11=="D"){var _12;if(this.daySelectorProperties!=null){_12=isc.addProperties({},this.daySelectorDefaults,_2.DAY_SELECTOR,this.daySelectorProperties)}else{_12=isc.addProperties({},this.daySelectorDefaults,_2.DAY_SELECTOR)}
_12.name="daySelector";_15=_12;_1.add(_12)}else if(_11=="M"){var _13;if(this.monthSelectorProperties!=null){_13=isc.addProperties({},this.monthSelectorDefaults,_2.MONTH_SELECTOR,this.monthSelectorProperties)}else{_13=isc.addProperties({},this.monthSelectorDefaults,_2.MONTH_SELECTOR)}
_13.name="monthSelector";_15=_13;_1.add(_13)}else if(_11=="Y"){var _14;if(this.yearSelectorProperties!=null){_14=isc.addProperties({},this.yearSelectorDefaults,_2.YEAR_SELECTOR,this.yearSelectorProperties)}else{_14=isc.addProperties({},this.yearSelectorDefaults,_2.YEAR_SELECTOR)}
_14.name="yearSelector";_15=_14;_1.add(_14)}
if(i>0&&_15){if(_15.cssText==null){_15.cssText="padding-left:3px;"}}}}
this.Super("setItems",[_1]);if(this.useTextField){this.textField=this.dateTextField}},isc.A.getInnerWidth=function isc_DateItem_getInnerWidth(){if(this.useTextField){return this.Super("getInnerWidth",arguments)}
var _1=0,_2=0;if(this.daySelector){_2+=1;_1+=this.daySelector.width}
if(this.monthSelector){_2+=1;_1+=this.monthSelector.width}
if(this.yearSelector){_2+=1;_1+=this.yearSelector.width}
if(this.showPickerIcon)_1+=this.getPickerIconWidth();if(_2>0)_1+=(_2-1)*this.selectorPadding;return _1},isc.A.isEditable=function isc_DateItem_isEditable(){return true},isc.A.getEnteredValue=function isc_DateItem_getEnteredValue(){if(this.useTextField&&this.textField!=null){return this.textField.getEnteredValue()}
return this.getValue()},isc.A.setElementReadOnly=function isc_DateItem_setElementReadOnly(_1){},isc.A.setValue=function isc_DateItem_setValue(_1){this.$17g=true;var _2=false;if(_1==null){var _3=this.getDefaultValue();var _4;if(_3!==_4){_1=_3;_2=true}}
var _5=(isc.isA.Date(_1)&&isc.isA.Date(this._value)?(this.useLogicalDates()?(Date.compareLogicalDates(_1,this._value)==0):(Date.compareDates(_1,this._value)==0)):_1==this._value);var _6,_7;if(isc.is.emptyString(_1))_1=null;if(_1==null){_7=true;_6=_1;if(this.$119h)delete this.$119h}else{_6=this.parseDate(_1);if(_6==null){_7=true;_6=_1}}
if(_7){var _8;if(!this.useTextField){_8=true}else if(this.enforceDate&&_1!=null){var _9=this.dateTextField;_8=!this.$20m||!_9||(_9.getValue()!=_1)}
if(_8){this.logInfo("dateItem.setValue(): invalid date passed: '"+_1+"'.  Ignoring this value. Non date values are only supported  for dateItems where useTextField is true and enforceDate is false.");return false}}
if(!_7&&this.$20m){delete this.$20m;this.clearErrors();this.redraw()}
this.saveValue(_6,_2);this.$20l=true;if(this.useTextField){if(this.dateTextField){if(_5&&this.dateTextField.isDirty){this.dateTextField.setValue(this.dateTextField._value)}else{var _10=_7?_6:this.formatDate(_6);this.dateTextField.setValue(_10);delete this.dateTextField.isDirty}}}
if(this.daySelector)this.daySelector.setValue(_6.getDate());if(this.monthSelector)this.monthSelector.setValue(_6.getMonth());if(this.yearSelector)this.yearSelector.setValue(_6.getFullYear());delete this.$20l;return true},isc.A.$17e=function isc_DateItem__setHiddenDataElementValue(_1){var _2=this.$15b();if(_2!=null){if(isc.isA.Date(_1))_2.value=_1.toDBDate();else _2.value=_1}},isc.A.getCellHeight=function isc_DateItem_getCellHeight(){var _1=this.Super("getCellHeight",arguments);if(isc.Browser.isIE&&this.useTextField&&isc.isA.Number(_1))_1+=2;return _1},isc.A.elementChanged=function isc_DateItem_elementChanged(){return},isc.A.getCriteriaValue=function isc_DateItem_getCriteriaValue(){return this.parseDate(this.getValue())},isc.A.updateValue=function isc_DateItem_updateValue(){if(this.$20l)return;this.$20l=true;var _1;if(this.useTextField){this.dateTextField.updateValue();var _2=this.dateTextField.getValue(),_3=this.$1188(),_4;var _5=_2;if(_2==isc.emptyString||_2==null)_1=null;else if(_3){_1=_2;_5=this.formatDate(_2)}else{_1=this.parseDate(_2);if(_1==null){_4=true;_1=_2}else{_5=this.formatDate(_1);if(_2!=_5){this.dateTextField.setValue(_5)}}}
if(this._value==_1||(isc.isA.Date(this._value)&&(this.formatDate(this._value)==_5)))
{delete this.$20l;return}
if(!_3&&this.enforceDate){if(this.$20m&&!_4){delete this.$20m;this.clearErrors();this.redraw()}else if(_4){this.logWarn("Invalid date string entered in date text field :"+_1);if(!this.$20m){this.$20m=true;this.setError(this.invalidDateStringMessage);this.redraw()}}}}else{_1=(this._value||this.getDefaultValue());_1=_1.duplicate();var _6,_7,_8;_6=(this.daySelector?this.daySelector.getValue():_1.getDate());_1.setDate(1);if(this.yearSelector){_8=this.yearSelector.getValue()
_1.setFullYear(_8)}
if(this.monthSelector){_7=this.monthSelector.getValue();_1.setMonth(_7)}
_1.setDate(_6);if(_7!=_1.getMonth()){_6=_6-_1.getDate();if(this.daySelector)this.daySelector.setValue(_6);_1.setMonth(_7);_1.setDate(_6)}
if(isc.SimpleType.inheritsFrom(this.type,"datetime")){var _9=this.$119h?this.$119h:isc.isA.Date(this._value)?this._value:null;if(_9){var _10=isc.Date.getLogicalTimeOnly(_9);_1=isc.Date.combineLogicalDateAndTime(_1,_10)}}}
delete this.$20l;if(this.compareValues(_1,this._value)==true)return false;if(this.handleChange(_1,this._value)==false)return;_1=this.$17n;this.saveValue(_1);this.handleChanged(_1)},isc.A.saveValue=function isc_DateItem_saveValue(_1){if(isc.isA.Date(_1)&&_1.logicalDate==null&&_1.logicalTime==null){if(this.useLogicalDates())_1.logicalDate=true}
return this.Super("saveValue",arguments)},isc.A.resetValue=function isc_DateItem_resetValue(){var _1=this.form.$10s[this.getFieldName()];if(isc.isA.Date(_1)&&isc.isA.Date(this._value))
_1=this._value.setTime(_1.getTime());this.setValue(_1)},isc.A.getItemValue=function isc_DateItem_getItemValue(_1,_2){if(isc.isAn.emptyObject(_2))_2=null;var _3=isc.isA.Date(_2),_4=isc.isA.Date(this._value);if(_2==this._value||(_3&&_4&&(Date.compareDates(_2,this._value)==0)))
{return _1.getValue()}
if(_1==this.dateTextField)return _3?this.formatDate(_2):_2;else if(_1==this.daySelector)return _3?_2.getDate():null;else if(_1==this.monthSelector)return _3?_2.getMonth():null;else if(_1==this.yearSelector)return _3?_2.getFullYear():null},isc.A.getDisplayValue=function isc_DateItem_getDisplayValue(){var _1=this.getValue();if(!isc.isA.Date(_1))return this.Super("getDisplayValue",arguments);if(this.useTextField||!this.items){return this.formatDate(_1)}else{if(!this.isDrawn()){if(this.yearSelector)this.yearSelector.setValue(_1.getFullYear());if(this.monthSelector)this.monthSelector.setValue(_1.getMonth());if(this.daySelector)this.daySelector.setValue(_1.getDate())}
return this.items.map("getDisplayValue").join(" ")}},isc.A.getDefaultValue=function isc_DateItem_getDefaultValue(){var _1=this.Super("getDefaultValue");if(!isc.isA.Date(_1)){var _2=this.parseDate(_1);if(isc.isA.Date(_2))_1=_2;else if(!this.useTextField||this.enforceDate){var _3;if(_1!=null){this.logWarn("Default DateItem value provided as:"+_1+". This is not recognized as a valid date - defaulting to a new date");_3=this.defaultValue==_1}
if(!this.useTextField)_1=this.$603();if(_3)this.defaultValue=_1}}
return _1},isc.A.$603=function isc_DateItem__getEmptyDate(){var _1=Date.createLogicalDate();return _1},isc.A.useLogicalDates=function isc_DateItem_useLogicalDates(){var _1=this.getType(),_2=isc.SimpleType.inheritsFrom(_1,"date"),_3=isc.SimpleType.inheritsFrom(_1,"datetime");return _1!=null&&_2&&!_3},isc.A.getStartDate=function isc_DateItem_getStartDate(_1){var _2=this.startDate;if(isc.isA.String(_2))_2=this.parseDate(this.startDate);if((_2==null&&!_1)||!isc.isA.Date(_2)){if(_2!=null){this.logWarn("startDate was not in valid date format - using default start date")}
_2=isc.DateItem.DEFAULT_START_DATE}
return _2},isc.A.setStartDate=function isc_DateItem_setStartDate(_1){this.startDate=_1;var _2=this.dateTextField;if(_2&&this.$1188()){_1=this.getStartDate(true);_2.startDate=_1;var _3=_2.getDataElement();if(_1==null)_3.removeAttribute("min");else{_3.min=_2.mapValueToDisplay(_1)}}
this.updateValue()},isc.A.getEndDate=function isc_DateItem_getEndDate(_1){var _2=this.endDate;if(isc.isA.String(_2))_2=this.parseDate(this.endDate);if((_2==null&&!_1)||!isc.isA.Date(_2)){if(_2!=null){this.logWarn("endDate was not in valid date format - using default end date")}
_2=isc.DateItem.DEFAULT_END_DATE}
return _2},isc.A.setEndDate=function isc_DateItem_setEndDate(_1){this.endDate=_1;var _2=this.dateTextField;if(_2&&this.$1188()){_1=this.getEndDate(true);_2.endDate=_1;var _3=_2.getDataElement();if(_1==null)_3.removeAttribute("max");else{_3.max=_2.mapValueToDisplay(_1)}}
this.updateValue()},isc.A.$kk=function isc_DateItem__canFocus(){if(this.canFocus!=null)return this.canFocus;return true},isc.A.focusInItem=function isc_DateItem_focusInItem(){if(!this.isVisible())return;if(this.useTextField){if(this.dateTextField)this.dateTextField.focusInItem()}else{var _1=this.getSelectorFormat(),_2=_1.charAt(0);if(_2=="D"&&this.daySelector)this.daySelector.focusInItem();if(_2=="M"&&this.monthSelector)this.monthSelector.focusInItem();if(_2=="Y"&&this.yearSelector)this.yearSelector.focusInItem()}},isc.A.setSelectionRange=function isc_DateItem_setSelectionRange(_1,_2){if(this.dateTextField)return this.dateTextField.setSelectionRange(_1,_2)},isc.A.getSelectionRange=function isc_DateItem_getSelectionRange(){if(this.dateTextField)return this.dateTextField.getSelectionRange()},isc.A.selectValue=function isc_DateItem_selectValue(){if(this.dateTextField)return this.dateTextField.selectValue()},isc.A.deselectValue=function isc_DateItem_deselectValue(_1){if(this.dateTextField)return this.dateTextField.deselectValue()},isc.A.getDayOptions=function isc_DateItem_getDayOptions(){var _1=this.getStartDate(),_2=this.getEndDate();var _3=1,_4=31;if(_1.getYear()==_2.getYear()&&_1.getMonth()==_2.getMonth())
{_3=_1.getDate()
_4=_2.getDate()}
var _5="day."+_3+"."+_4;if(isc.DateItem.mapCache[_5])return isc.DateItem.mapCache[_5];var _6=isc.DateItem.mapCache[_5]=[];for(var i=_3;i<=_4;i++)_6[i-_3]=i;return _6},isc.A.getMonthOptions=function isc_DateItem_getMonthOptions(){var _1=this.getStartDate(),_2=this.getEndDate();var _3=0,_4=11;if(_1.getYear()==_2.getYear()){_3=_1.getMonth()
_4=_2.getMonth()}
var _5="month."+_3+"."+_4;if(isc.DateItem.mapCache[_5])return isc.DateItem.mapCache[_5];var _6=isc.DateItem.mapCache[_5]={};var _7=Date.getShortMonthNames();for(;_3<=_4;_3++){_6[_3]=_7[_3]}
return _6},isc.A.getYearOptions=function isc_DateItem_getYearOptions(){var _1=this.getStartDate().getFullYear(),_2=this.getEndDate().getFullYear();var _3="year."+_1+"."+_2;if(isc.DateItem.mapCache[_3])return isc.DateItem.mapCache[_3];var _4=isc.DateItem.mapCache[_3]=[];for(var i=_1;i<=_2;i++){_4[i-_1]=i}
return _4},isc.A.parseDate=function isc_DateItem_parseDate(_1,_2){if(isc.isA.Date(_1))return _1;if(this.parseEditorValue!=null){var _3=this.parseEditorValue(_1,this.form,this);return _3}
if(_2==null)_2=this.getInputFormat();var _4=this.useLogicalDates();var _5=Date.parseInput(_1,_2,this.centuryThreshold,true,!_4);return _5},isc.A.formatDate=function isc_DateItem_formatDate(_1){if(this.formatEditorValue!=null){var _2=this.form?this.form.values:{};return this.formatEditorValue(_1,_2,this.form,this)}
if(!isc.isA.Date(_1))return _1;if(this.format&&!this.getCanEdit()){return isc.DateUtil.format(_1,this.format)}
var _3=this.$45i(),_4=this.getType(),_5=isc.SimpleType.inheritsFrom(_4,"date"),_6=isc.SimpleType.inheritsFrom(_4,"datetime");return this.showTime?_1.toShortDatetime(_3,_6||!_5):_1.toShortDate(_3,_6||!_5)},isc.A.getInputFormat=function isc_DateItem_getInputFormat(){if(this.inputFormat)return this.inputFormat;var _1=this.$45i();return Date.mapDisplayFormatToInputFormat(_1)},isc.A.getPickerIcon=function isc_DateItem_getPickerIcon(_1,_2,_3,_4){var _5=this.invokeSuper(isc.DateItem,"getPickerIcon",_1,_2,_3,_4);if(_5.prompt==null)_5.prompt=this.pickerIconPrompt;return _5},isc.A.getFiscalCalendar=function isc_DateItem_getFiscalCalendar(){return this.fiscalCalendar||Date.getFiscalCalendar()},isc.A.setFiscalCalendar=function isc_DateItem_setFiscalCalendar(_1){this.fiscalCalendar=_1},isc.A.showPicker=function isc_DateItem_showPicker(){if(isc[this.pickerConstructor]==null){this.logWarn("Date Item pickerConstructor class '"+this.pickerConstructor+"' is not loaded. This property may have been modified incorrectly  or a required module may not be loaded. Refusing to show picker.");return}
if(!this.form.$10u)this.updateValue();var _1=isc.addProperties({},this.pickerDefaults,this.pickerProperties);if(!this.picker){if(this.useSharedPicker){var _2=isc.addProperties({},{fiscalCalendar:this.getFiscalCalendar(),showFiscalYearChooser:this.showChooserFiscalYearPicker,showWeekChooser:this.showChooserWeekPicker},_1);this.picker=isc[this.pickerConstructor].getSharedDateChooser(_2)}else{this.picker=isc[this.pickerConstructor].create(isc.addProperties({},_1,{border:"none",_generated:true,autoHide:true,showCancelButton:true,closeOnEscapeKeypress:true}))}}else{if(isc.getKeys(_1).length>0){this.picker.setProperties(_1)}}
var _3=this.picker;var _4=_3.callingFormItem;if(_4!=this){if(_4)_4.ignore(_3,"dataChanged");this.observe(_3,"dataChanged","observer.pickerDataChanged(observed)");_3.callingFormItem=this;_3.callingForm=this.form;_3.locatorParent=this.form}
_3.startYear=this.getStartDate().getFullYear();_3.endYear=this.getEndDate().getFullYear();_3.fiscalCalendar=this.getFiscalCalendar();_3.showFiscalYearChooser=this.showChooserFiscalYearPicker;_3.showWeekChooser=this.showChooserWeekPicker;var _5=this.shouldShowPickerTimeItem();_3.showTimeItem=_5;_3.use24HourTime=this.use24HourTime;if(this.pickerTimeItemProperties)_3.timeItemProperties=this.pickerTimeItemProperties;var _6=this.Super("showPicker",arguments);if(_3.updateUI)_3.updateUI();return _6},isc.A.shouldShowPickerTimeItem=function isc_DateItem_shouldShowPickerTimeItem(){if(this.showPickerTimeItem==false)return false;return isc.SimpleType.inheritsFrom(this.type,"datetime")},isc.A.getPickerRect=function isc_DateItem_getPickerRect(){var _1=this.getPageLeft(),_2=this.getPageTop(),_3=isc.DateItem.chooserWidth+3,_4=isc.DateItem.chooserHeight+3;_1+=Math.round((this.getVisibleWidth()-(this.getPickerIconWidth()/2))-
(_3/2));_2+=Math.round((this.getPickerIconHeight()/2)-(_4/2));return[_1,_2]},isc.A.pickerDataChanged=function isc_DateItem_pickerDataChanged(_1){var _2=_1.getData(),_3=_2.getFullYear(),_4=_2.getMonth(),_5=_2.getDate(),_6=_2.getTime();var _7=this.useLogicalDates();if(!_7){}
this.$20l=true;if(this.useTextField){var _8=this.formatDate(_2);this.dateTextField.setValue(_8)}else{var _9=this._value||this.getDefaultValue(),_10;if(this.yearSelector)this.yearSelector.setValue(_3);else{_9.setFullYear(_3);_10=true}
if(this.monthSelector)this.monthSelector.setValue(_4);else{_9.setMonth(_4-1);_10=true}
if(this.daySelector)this.daySelector.setValue(_5);else{_9.setDate(_5);_10=true}
if(isc.SimpleType.inheritsFrom(this.type,"datetime")){var _11=isc.Date.getLogicalTimeOnly(_2);this.$119h=_11}
if(_10){this._value=_9}}
this.$20l=false;this.updateValue();if(!this.hasFocus)this.focusInItem();var _12=this.getErrors();if(_12&&_12.length>0)this.validate();if(this.validateOnExit||this.form.validateOnExit){this.$84r=true}},isc.A.setHint=function isc_DateItem_setHint(_1){if(this.useTextField&&this.$712()){this.dateTextField.setHint(_1)}else{this.Super("setHint",arguments)}},isc.A.getPickerData=function isc_DateItem_getPickerData(){var _1=this.getValue();if(_1!=null){if(!isc.isA.Date(_1)){_1=new Date(_1)}
if(isc.isA.Date(_1)&&!isNaN(_1.getTime()))return _1}
return this.getDefaultChooserDate()},isc.A.getDefaultChooserDate=function isc_DateItem_getDefaultChooserDate(){return this.defaultChooserDate},isc.A.$85m=function isc_DateItem__shouldAllowExpressions(){if(this.useTextField){return this.Super("$85m",arguments)}else{return false}},isc.A.propertyChanged=function isc_DateItem_propertyChanged(_1){if(_1=="useTextField"||_1=="useMask"){this.setItems()}});isc.B._maxIndex=isc.C+55}
if(isc.ListGrid){isc.defineClass("DateTimeItem","DateItem");isc.A=isc.DateTimeItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.useTextField=true;isc.A.showTime=true;isc.A.type="datetime";isc.B.push(isc.A.shouldShowPickerTimeItem=function isc_DateTimeItem_shouldShowPickerTimeItem(){return this.showPickerTimeItem});isc.B._maxIndex=isc.C+1}
isc.ClassFactory.defineClass("SpacerItem","FormItem");isc.A=isc.SpacerItem.getPrototype();isc.A.shouldSaveValue=false;isc.A.showTitle=false;isc.A.width=20;isc.A.height=20;isc.A.showHint=false;isc.A.showIcons=false;isc.A=isc.SpacerItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.isEditable=function isc_SpacerItem_isEditable(){return false},isc.A.getElementHTML=function isc_SpacerItem_getElementHTML(_1){return isc.Canvas.spacerHTML(this.width,this.height)},isc.A.shouldShowTitle=function isc_SpacerItem_shouldShowTitle(){return false});isc.B._maxIndex=isc.C+3;isc.ClassFactory.defineClass("RowSpacerItem","SpacerItem");isc.A=isc.RowSpacerItem.getPrototype();isc.A.showTitle=false;isc.A.colSpan="*";isc.A.startRow=true;isc.A.endRow=true;isc.A.width=20;isc.A.height=20;isc.ClassFactory.defineClass("SubmitItem","ButtonItem");isc.A=isc.SubmitItem.getPrototype();isc.A.title="Submit";isc.A=isc.SubmitItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.handleClick=function isc_SubmitItem_handleClick(){if(this.Super("handleClick",arguments)==false)return false;this.form.submit();this.form.completeEditing()});isc.B._maxIndex=isc.C+1;isc.ClassFactory.defineClass("CancelItem","ButtonItem");isc.A=isc.CancelItem.getPrototype();isc.A.title="Cancel";isc.A=isc.CancelItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.handleClick=function isc_CancelItem_handleClick(){if(this.Super("handleClick",arguments)==false)return false;this.form.cancelEditing()});isc.B._maxIndex=isc.C+1;isc.ClassFactory.defineClass("TextAreaItem","FormItem");isc.A=isc.TextAreaItem;isc.A.OFF="OFF";isc.A.SOFT="SOFT";isc.A.VIRTUAL="SOFT";isc.A.ON="HARD";isc.A.HARD="HARD";isc.A.PHYSICAL="HARD";isc.A=isc.TextAreaItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.wrap=isc.TextAreaItem.VIRTUAL;isc.A.width=150;isc.A.height=100;isc.A.textBoxStyle="textItem";isc.A.redrawOnShowIcon=false;isc.A.clipValue=true;isc.A.$125=true;isc.A.$15i=true;isc.A.emptyStringValue=null;isc.A.lineBreakValue="\n";isc.A.iconVAlign=isc.Canvas.TOP;isc.A.$16b={onmousedown:(isc.Browser.isIE?function(){var _1=this,_2=isc.DynamicForm._getItemInfoFromElement(_1),_3=_2.item;if(_3)_3.$179()}:null)};isc.A.supportsSelectionRange=true;isc.A.printFullText=true;isc.A.showClippedValueOnHover=false;isc.B.push(isc.A.getEnteredValue=function isc_TextAreaItem_getEnteredValue(){return this.getElementValue()});isc.B._maxIndex=isc.C+1;isc.A=isc.TextAreaItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.allowNativeResize=false;isc.A.minHeight=16;isc.A.applyStaticTypeFormat=false;isc.A.stopNavKeyPressBubbling=true;isc.A.stopCharacterKeyPressBubbling=true;isc.A.$145f="Page_Up";isc.A.$145g="Page_Down";isc.A.$10j="Enter";isc.B.push(isc.A.$712=function isc_TextAreaItem__getShowHintInField(){return!!(this.showHint&&this.showHintInField)},isc.A.getTextBoxCellCSS=function isc_TextAreaItem_getTextBoxCellCSS(){return this.$136},isc.A.$143=function isc_TextAreaItem__sizeTextBoxAsContentBox(){return isc.Browser.isStrict},isc.A.$429=function isc_TextAreaItem__willHandleInput(){return!isc.Browser.isIE},isc.A.setElementReadOnly=function isc_TextAreaItem_setElementReadOnly(_1){this.$86y(_1)},isc.A.getElementHTML=function isc_TextAreaItem_getElementHTML(_1,_2){var _3=this.form,_4=_3.getID(),_5=this.getItemID(),_6=isc.StringBuffer.create(),_7=this.$xq(_2);if(_7!=null)_6.append(_7);if(!this.showValueIconOnly){if((!this.printFullText||!this.$68y())&&!this.renderAsStatic()){_6.append("<TEXTAREA NAME=",this.getElementName()," ID=",this.getDataElementId(),this.$155(),this.getElementStyleHTML(),(this.isDisabled()?" DISABLED ":""),(this.$17h()!="native"?" AUTOCOMPLETE=OFF ":""),((isc.Browser.isMoz||isc.Browser.isSafari)?(this.getBrowserSpellCheck()?" spellcheck=true":" spellcheck=false"):null)," WRAP=",this.wrap," TABINDEX=",this.$154(),(this.showTitle==false&&this.accessKey!=null?" ACCESSKEY="+this.accessKey:""),(this.$429()?" ONINPUT='"+this.getID()+".$43g()'":null),(this.isReadOnly()||this.isInactiveHTML()?(isc.screenReader?"aria-readonly=true READONLY=TRUE":" READONLY=TRUE"):null)," handleNativeEvents=false>",(this.isInactiveHTML()?_1:null),"</TEXTAREA>")}else{if(_1==null)_1="";_6.append("<DIV style='",(isc.isA.Number(this.width)?"width:"+this.width+"px;":null),"' class='",this.getTextBoxStyle(),"'>",_1.asHTML(),"</DIV>")}}
return _6.release()},isc.A.handleMouseMove=function isc_TextAreaItem_handleMouseMove(){var _1=this.Super("handleMouseMove",arguments);if(_1==false||!this.allowNativeResize)return false;if(isc.EH.mouseIsDown()&&this.$90g==null){this.$90g=isc.Page.setEvent("idle",this.getID()+".$90h()")}},isc.A.$90h=function isc_TextAreaItem__checkForElementResize(){var _1=false;var _2=this.getDataElement();if(_2){if(_2.offsetWidth!=this.getTextBoxWidth())_1=true;if(_2.offsetHeight!=this.getTextBoxHeight())_1=true}
if(_1)this.$90i();if(!isc.EH.mouseIsDown()){isc.Page.clearEvent("idle",this.$90g);this.$90g=null}},isc.A.$90i=function isc_TextAreaItem__nativeElementResize(){var _1=this.containerWidget;if(_1)_1.$t6("Native textarea resize")},isc.A.$12v=function isc_TextAreaItem__nativeElementFocus(_1,_2){var _3=this.Super("$12v",arguments);this.$66s();this.$84f=this.getEnteredValue();return _3},isc.A.$12x=function isc_TextAreaItem__nativeElementBlur(_1,_2){var _3=this.Super("$12x",arguments);this.form.elementChanged(this);if(this.$84f==null||this.$84f!=this.getEnteredValue())
{var _4=this.getValue();if(this.mapValueToDisplay){_4=this.mapValueToDisplay(_4)}
this.setElementValue(_4)}
if(this.$712()){var _5;var _4=this.getElementValue();if(_4===_5||_4==null||isc.is.emptyString(_4)){this.$66t()}}
return _3},isc.A.getElementStyleHTML=function isc_TextAreaItem_getElementStyleHTML(){var _1=this.getTextBoxWidth(),_2=this.getTextBoxHeight();return isc.StringBuffer.concat(" CLASS='"+this.getTextBoxStyle(),(isc.Browser.isMoz&&isc.isA.String(this.wrap)&&this.wrap.toLowerCase()!="off"?"' ROWS=10 COLS=10":"'")," STYLE='",this.getElementCSSText(_1,_2),"' ")},isc.A.getElementCSSText=function isc_TextAreaItem_getElementCSSText(_1,_2){if(isc.isA.Number(_1)&&_1<=0)_1=1;if(isc.isA.Number(_2)&&_2<this.minHeight)_2=this.minHeight;return isc.StringBuffer.concat(this.allowNativeResize?null:"resize:none;",(isc.TextItem.$126z?"margin-top:-1px;margin-bottom:-1px;margin-left:0px;margin-right:0px;":"margin:0px;"),(isc.isA.Number(_1)?"WIDTH:"+_1+"px;":""),(isc.isA.Number(_2)?"HEIGHT:"+_2+"px;":""),(this.textAlign?"text-align:"+this.textAlign+";":""),(isc.Browser.isChrome?"display:block;":""),(isc.Browser.isMoz?"-moz-user-focus:"+(this.$154()>0?"normal;":"ignore;"):""))},isc.A.mapValueToDisplay=function isc_TextAreaItem_mapValueToDisplay(_1,_2,_3,_4,_5){var _6=this.invokeSuper(isc.TextAreaItem,"mapValueToDisplay",_1,_2,_3,_4,_5);if(_6==null)_6=isc.emptyString;return _6},isc.A.mapDisplayToValue=function isc_TextAreaItem_mapDisplayToValue(_1){var _2=this.$17d(_1);_2=this.$79d(_2);if(isc.is.emptyString(_2))_2=this.emptyStringValue;return _2},isc.A.setValue=function isc_TextAreaItem_setValue(_1){this.$66s();var _2;if(_1!==_2&&(_1==null||isc.is.emptyString(_1)))
this.emptyStringValue=_1;delete this.$20n;_1=this.Super("setValue",arguments);if(!this.hasFocus&&this.$712()&&this.getHint()){if(_1===_2||_1==null||isc.is.emptyString(_1)){this.$66t()}}
return _1},isc.A.updateValue=function isc_TextAreaItem_updateValue(){this.$20n=true;return this.Super("updateValue",arguments)},isc.A.getValue=function isc_TextAreaItem_getValue(){var _1=this.Super("getValue",arguments);if(this.$20n&&isc.isA.String(_1)){if(!this.$20o)
this.$20o=new RegExp("(\\r\\n|[\\r\\n])","g");_1=""+_1;_1=_1.replace(this.$20o,this.lineBreakValue)}
return _1},isc.A.shouldStopKeyPressBubbling=function isc_TextAreaItem_shouldStopKeyPressBubbling(_1,_2){if(_1==this.$10j)return true;if(_1==this.$145f)return this.getScrollTop()!=0;if(_1==this.$145g){var _3=this.$15h();if(_3){return(_3.scrollHeight-_3.clientHeight)>this.getScrollTop()}}
return this.Super("shouldStopKeyPressBubbling",arguments)},isc.A.getScrollHeight=function isc_TextAreaItem_getScrollHeight(){var _1=this.$15h();if(_1==null)return this.getHeight();return _1.scrollHeight},isc.A.getScrollWidth=function isc_TextAreaItem_getScrollWidth(){var _1=this.$15h();if(_1==null)return this.getWidth();return _1.scrollWidth},isc.A.$20p=function isc_TextAreaItem__hscrollOn(){var _1=this.$15h();return _1&&_1.scrollWidth>_1.clientWidth},isc.A.$20q=function isc_TextAreaItem__vscrollOn(){var _1=this.$15h();return _1&&_1.scrollHeight>_1.clientHeight},isc.A.getScrollTop=function isc_TextAreaItem_getScrollTop(){var _1=this.$15h();if(_1==null)return 0;return _1.scrollTop},isc.A.getScrollLeft=function isc_TextAreaItem_getScrollLeft(){var _1=this.$15h();if(_1==null)return 0;return _1.scrollLeft},isc.A.scrollTo=function isc_TextAreaItem_scrollTo(_1,_2){var _3=this.$15h();if(_3==null)return;if(_1!=null)_3.scrollLeft=_1;if(_2!=null)_3.scrollTop=_2},isc.A.scrollToTop=function isc_TextAreaItem_scrollToTop(){this.scrollTo(null,0)},isc.A.scrollToBottom=function isc_TextAreaItem_scrollToBottom(){var _1=this.getScrollHeight()-this.getInnerHeight();if(_1>=0){if(this.$20p())_1+=this.form.getScrollbarSize();this.scrollTo(null,_1)}});isc.B._maxIndex=isc.C+28;isc.ClassFactory.defineClass("AutoFitTextAreaItem","TextAreaItem");isc.A=isc.AutoFitTextAreaItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.supportsSelectionRange=true;isc.B.push(isc.A.getTestBox=function isc_AutoFitTextAreaItem_getTestBox(_1){var _2=this.mapValueToDisplay(this.getValue());var _3=isc.AutoFitTextAreaItem;if(!_3.$552){_3.$552=isc.Canvas.create({autoDraw:true,overflow:"hidden",left:0,top:-100,contents:["<textarea ID='isc_autoFitTextArea_sizeTester'","style='overflow:hidden;",(isc.Browser.isIE?"margin-top:-1px;margin-bottom:-1px;margin-left:0px;margin-right:0px;":"margin:0px;"),"'></textarea>"].join("")})}
var _4=isc.Element.get("isc_autoFitTextArea_sizeTester");if(_3.currentItem!=this||_1){_4.className=this.getTextBoxStyle();if(isc.Browser.isMoz){if(isc.isA.String(this.wrap)&&this.wrap.toLowerCase()!="off"){_4.rows=5;_4.cols=10}else{_4.rows="";_4.cols=""}}
_4.setAttribute("wrap",this.wrap);_3.$552.$u9(_4.style,"width",this.getTextBoxWidth());_3.$552.$u9(_4.style,"height",this.getTextBoxHeight());_4.style.textAlign=this.textAlign||"";_4.cssText=this.getElementCSSText(this.getTextBoxWidth(),this.getTextBoxHeight());_3.currentItem=this}
_4.value=_2;var _5=_4.scrollHeight;return _4},isc.A.getScrollHeight=function isc_AutoFitTextAreaItem_getScrollHeight(_1){var _2=this.getTestBox(_1);return _2.scrollHeight},isc.A.getScrollWidth=function isc_AutoFitTextAreaItem_getScrollWidth(_1){var _2=this.getTestBox(_1);return _2.scrollWidth},isc.A.getElementCSSText=function isc_AutoFitTextAreaItem_getElementCSSText(_1,_2){var _3=this.Super("getElementCSSText",arguments);_3+="overflow:hidden;"
return _3},isc.A.$553=function isc_AutoFitTextAreaItem__getTextBoxHPadding(){if(this.$554!=null)return this.$554;var _1=this.getDataElement();if(!_1)return 0;var _2=parseInt(isc.Element.getComputedStyleAttribute(_1,"paddingLeft")),_3=parseInt(isc.Element.getComputedStyleAttribute(_1,"paddingRight")),_4=(isc.isA.Number(_2)?_2:0)+(isc.isA.Number(_3)?_3:0);this.$554=_4;return _4},isc.A.$555=function isc_AutoFitTextAreaItem__getTextBoxVPadding(){if(this.$556!=null)return this.$556;var _1=this.getDataElement();if(!_1)return 0;if(isc.Browser.isIE&&_1.currentStyle==null)return 0;var _2=parseInt(isc.Element.getComputedStyleAttribute(_1,"paddingTop")),_3=parseInt(isc.Element.getComputedStyleAttribute(_1,"paddingBottom")),_4=(isc.isA.Number(_2)?_2:0)+(isc.isA.Number(_3)?_3:0);this.$556=_4;return _4},isc.A.getMaxHeight=function isc_AutoFitTextAreaItem_getMaxHeight(){return this.maxHeight},isc.A.getMaxWidth=function isc_AutoFitTextAreaItem_getMaxWidth(){return this.maxWidth},isc.A.updateSize=function isc_AutoFitTextAreaItem_updateSize(_1){var _2=this.getDataElement();if(!_2)return;var _3,_4;var _5=this.getTextBoxHeight(),_6=this.$555(),_7=this.getScrollHeight(_1),_8=_2.offsetHeight,_9=_7+_6,_10=this.getMaxHeight();if(_10!=null&&_10<_9){_9=_10}
if(_9>_8){_2.style.height=""+_9+"px";_4=true}else if(_9<_8&&_8>_5){if(_9<_8){_3=true;_2.style.height=""+Math.max(_9,_5)+"px"}
_4=true}
var _11=this.getTextBoxWidth(),_12=isc.Browser.isIE?0:this.$553(),_13=this.getScrollWidth(_1),_14=_2.offsetWidth,_15=_12+_13,_16=this.getMaxWidth();if(_16!=null&&_15>_16)_15=_16;if(_15>_14){_2.style.width=_15;_4=true}else if(_15<_14&&_14>_11){_2.style.width=Math.max(_11,_15);_3=true
_4=true}
if(_3)this.containerWidget.$t5=true;if(_4)this.adjustOverflow("Updated size to fit content")},isc.A.handleChanged=function isc_AutoFitTextAreaItem_handleChanged(){this.updateSize();return this.Super("handleChanged",arguments)},isc.A.drawn=function isc_AutoFitTextAreaItem_drawn(){this.Super("drawn",arguments);delete this.$554;delete this.$556;this.updateSize(true)},isc.A.redrawn=function isc_AutoFitTextAreaItem_redrawn(){this.Super("redrawn",arguments);delete this.$554;delete this.$556;this.updateSize(true)});isc.B._maxIndex=isc.C+12;isc.defineClass("NativeTimeItem","TextItem");isc.A=isc.NativeTimeItem.getPrototype();isc.A.ariaRole="range";isc.A.browserInputType="time";isc.A.textBoxStyle="nativeTimeItem";isc.A.inFieldHintStyle="nativeTimeItemInFieldHint";isc.A.showClippedValueOnHover=false;isc.A=isc.NativeTimeItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$118w="wrapper";isc.A.$118x="hint";isc.B.push(isc.A.getHint=function isc_NativeTimeItem_getHint(){if(this.hint!=null)return this.hint;if(isc.Browser.isChrome)return isc.TimeItem.getInstanceProperty("shortTimeFormat");return isc.TimeItem.getInstanceProperty("short24TimeFormat")},isc.A.$118y=function isc_NativeTimeItem__getWrapperElementId(){if(this.isInactiveHTML())return this.$qs(this.$118w);if(this.$118z==null){this.$118z=this.$qs(this.$118w,true)}
return this.$118z},isc.A.$1180=function isc_NativeTimeItem__getHintElementId(){if(this.isInactiveHTML())return this.$qs(this.$118x);if(this.$1181==null){this.$1181=this.$qs(this.$118x,true)}
return this.$1181},isc.A.$1182=function isc_NativeTimeItem__getInFieldHintElemStyle(){if(this.showDisabled&&this.isDisabled())return this.inFieldHintStyle+"Disabled";return this.inFieldHintStyle},isc.A.getElementHTML=function isc_NativeTimeItem_getElementHTML(_1,_2){if(!this.$712())return this.Super("getElementHTML",arguments);var _3=this.getHeight();return"<div id='"+this.$118y()+"' class='"+this.$15x(this.$118w)+"' style='display:inline-block;position:relative;height:"+_3+"px'>"+this.Super("getElementHTML",arguments)+"<span id='"+this.$1180()+"' class='"+this.$1182()+"' style='line-height:"+_3+"px'></span></div>"},isc.A.getElementValue=function isc_NativeTimeItem_getElementValue(){var _1=this.getDataElement(),_2;if(!_1||!(_2=_1.value))return null;var h=parseInt(_2,10),m=parseInt(_2.substring(3),10),s=(_2.length>=8?parseInt(_2.substring(6),10):0);return isc.Time.createLogicalTime(h,m,s)},isc.A.setElementValue=function isc_NativeTimeItem_setElementValue(_1,_2){if(!this.isDrawn())return;if(_2===undefined){_2=this._value}
var _3=this.getDataElement();if(_3!=null){_3.value=_1}},isc.A.mapValueToDisplay=function isc_NativeTimeItem_mapValueToDisplay(_1){if(isc.isA.Date(_1))return isc.Time.toShortTime(_1,"toTimestamp");return _1},isc.A.$66t=function isc_NativeTimeItem__showInFieldHint(){var _1=isc.Element.get(this.$1180());if(_1){this.getDataElement().className=this.$66v();_1.className=this.$1182();var _2=this.getHint();if(_2)_2=_2.unescapeHTML();_1.innerText=_2;this.$66u=true}},isc.A.$66s=function isc_NativeTimeItem__hideInFieldHint(_1){var _2=isc.Element.get(this.$1180());if(_2){this.getDataElement().className=this.getTextBoxStyle();_2.className=this.$1182();_2.innerText=isc.emptyString;this.$66u=false}},isc.A.updateState=function isc_NativeTimeItem_updateState(){this.Super("updateState",arguments);if(this.$66u){var _1=isc.Element.get(this.$1180());if(_1)_1.className=this.$1182()}});isc.B._maxIndex=isc.C+11;isc.ClassFactory.defineClass("TimeItem","ContainerItem");isc.A=isc.TimeItem;isc.A.DEFAULT_TIME="00:00:00";isc.A=isc.TimeItem.getPrototype();isc.A.textFieldDefaults={name:"timeTextField",type:"text",changeOnBlur:true,$712:function(){return this.parentItem.$712()},getHint:function(){if(this.$712()){return(this.parentItem.hint!=null?this.parentItem.hint:this.parentItem.getDefaultHint())}
return null},changeOnKeypress:false,changed:function(){this.isDirty=true},blur:function(){this.isDirty=false;if(this.parentItem)this.parentItem.updateValue()},shouldSaveValue:false,getTextBoxStyle:function(){var _1=this.parentItem;if(_1!=null&&_1.textBoxStyle!=null){return _1.textBoxStyle}
return this.Super("getTextBoxStyle",arguments)},getTextBoxWidth:function(_1){if(this.parentItem){return this.parentItem.getTextBoxWidth(_1)}
return this.Super("getTextBoxWidth",arguments)},$887:true,handleKeyPress:function(){var _1=this.Super("handleKeyPress",arguments);if(_1!=false){var _2=isc.EH.getKey();if(_2=="Enter"){if(this.parentItem)this.parentItem.updateValue();this.setElementValue(this.mapValueToDisplay(this.getValue()))}}
return _1},init:function(){if(!this.parentItem.$119a()&&this.useMask){var _1=this.formatterMap[this.$30o()];if(!_1){this.useMask=false;this.mask=null;this.logWarn("Mask will not be used because timeFormatter "+this.$30o()+" is not recognized")}else{if(_1.formatter)this.timeFormatter=_1.formatter;this.mask=_1.mask}
if(this.mask){this.maskSaveLiterals=true;this.maskOverwriteMode=true}}else if(this.mask){this.mask=null}
if(this.parentItem.format)this.format=this.parentItem.format;this.Super("init",arguments)},setMask:function(_1){this.logWarn("setMask: custom mask ignored")}};isc.A.showHourItem=true;isc.A.hourItemDefaults={name:"hourItem",type:"select",titleOrientation:"top",showTitle:true,addUnknownValues:false,titleAlign:"center",valueMap:"this.parentItem.getHourValues()",shouldSaveValue:false,align:"center",defaultDynamicValue:"this.parentItem.getHourValues()[0]",saveValue:function(){this.Super("saveValue",arguments);this.parentItem.updateValue()},getValue:function(){var _1=this.Super("getValue",arguments);return new Number(_1)},getErrorWidth:function(){return 0},width:40,suppressItemChanged:true};isc.A.hourItemTitle="Hour";isc.A.hourItemPrompt="Choose hours";isc.A.showMinuteItem=true;isc.A.minuteItemDefaults={name:"minuteItem",type:"select",titleOrientation:"top",showTitle:true,addUnknownValues:false,titleAlign:"center",align:"center",defaultDynamicValue:"this.parentItem.getMinuteValues()[0]",valueMap:"this.parentItem.getMinuteValues()",shouldSaveValue:false,saveValue:function(){this.Super("saveValue",arguments);this.parentItem.updateValue()},getValue:function(){var _1=this.Super("getValue",arguments);return new Number(_1)},getErrorWidth:function(){return 0},width:40,suppressItemChanged:true};isc.A.minuteItemTitle="Min";isc.A.minuteItemPrompt="Choose minutes";isc.A.showSecondItem=true;isc.A.secondItemDefaults={name:"secondItem",type:"select",titleOrientation:"top",showTitle:true,addUnknownValues:false,titleAlign:"center",valueMap:"this.parentItem.getSecondValues()",shouldSaveValue:false,align:"center",defaultDynamicValue:"this.parentItem.getSecondValues()[0]",saveValue:function(){this.Super("saveValue",arguments);this.parentItem.updateValue()},getValue:function(){var _1=this.Super("getValue",arguments);return new Number(_1)},getErrorWidth:function(){return 0},width:40,suppressItemChanged:true};isc.A.secondItemTitle="Sec";isc.A.secondItemPrompt="Choose seconds";isc.A.showMillisecondItem=false;isc.A.showMillisecondItem=false;isc.A.millisecondItemDefaults={name:"millisecondItem",type:"select",titleOrientation:"top",showTitle:true,addUnknownValues:false,titleAlign:"center",align:"center",valueMap:"this.parentItem.getMillisecondValues()",shouldSaveValue:false,saveValue:function(){this.Super("saveValue",arguments);this.parentItem.updateValue()},getErrorWidth:function(){return 0},width:42,suppressItemChanged:true};isc.A.millisecondItemTitle="Ms";isc.A.millisecondItemPrompt="Choose milliseconds";isc.A.ampmItemDefaults={name:"ampmItem",prompt:"Choose AM or PM",type:"select",titleOrientation:"top",showTitle:true,addUnknownValues:false,titleAlign:"center",valueMap:"this.parentItem.getAmpmOptions()",shouldSaveValue:false,align:"center",defaultDynamicValue:"this.parentItem.getAmpmOptions()[0]",saveValue:function(){this.Super("saveValue",arguments);this.parentItem.updateValue()},getErrorWidth:function(){return 0},width:40,suppressItemChanged:true};isc.A.ampmItemTitle="AM/PM";isc.A.timeFormatter="toShort24HourTime";isc.A.allowEmptyValue=true;isc.A.width=120;isc.A.cellPadding=0;isc.A.useTextField=true;isc.A.textAlign=isc.Page.isRTL()?isc.Canvas.RIGHT:isc.Canvas.LEFT;isc.A.invalidTimeStringMessage="Invalid time";isc.A.use24HourTime=true;isc.A=isc.TimeItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.textBoxStyle=null;isc.A.hourMinValue=null;isc.A.hourMaxValue=null;isc.A.hourIncrement=1;isc.A.minuteMinValue=null;isc.A.minuteMaxValue=null;isc.A.minuteIncrement=1;isc.A.secondMinValue=null;isc.A.secondMaxValue=null;isc.A.secondIncrement=1;isc.A.millisecondMinValue=null;isc.A.millisecondMaxValue=null;isc.A.millisecondIncrement=1;isc.A.selectorFormat="HMSL";isc.B.push(isc.A.getTextBoxStyle=function isc_TimeItem_getTextBoxStyle(){if(this.useTextField&&this.textField){return this.textField.getTextBoxStyle()}
return this.Super("getTextBoxStyle",arguments)},isc.A.$143=function isc_TimeItem__sizeTextBoxAsContentBox(){if(this.useTextField&&this.textField){return this.textField.$143()}
return this.Super("$143",arguments)},isc.A.showing24HourTime=function isc_TimeItem_showing24HourTime(){return this.use24HourTime},isc.A.getSubItemValues=function isc_TimeItem_getSubItemValues(_1){var _2=this[_1+"Values"],_3=_1.substring(0,1).toUpperCase()+_1.substring(1,_1.length);if(!_2){_2=[];var _4=this["get"+_3+"MinValue"](),_5=this["get"+_3+"MaxValue"](),_6=0;for(var i=_4;i<=_5;i+=this[_1+"Increment"]){if(i<10)_2.add(isc.NumberUtil.stringify(i,2));else _2.add(isc.NumberUtil.stringify(i));_6++}
this[_1+"Values"]=_2}
return this[_1+"Values"]},isc.A.setHourValues=function isc_TimeItem_setHourValues(_1){this.hourValues=_1;if(this.hourItem)this.hourItem.setValueMap(this.getHourValues())},isc.A.getHourValues=function isc_TimeItem_getHourValues(){return this.getSubItemValues("hour")},isc.A.getHourMinValue=function isc_TimeItem_getHourMinValue(){if(this.hourMinValue==null)this.hourMinValue=(this.showing24HourTime()?0:1);return this.hourMinValue},isc.A.getHourMaxValue=function isc_TimeItem_getHourMaxValue(){if(this.hourMaxValue==null)this.hourMaxValue=(this.showing24HourTime()?23:12);return this.hourMaxValue},isc.A.setMinuteValues=function isc_TimeItem_setMinuteValues(_1){this.minuteValues=_1;if(this.minuteItem)this.minuteItem.setValueMap(this.getMinuteValues())},isc.A.getMinuteValues=function isc_TimeItem_getMinuteValues(){return this.getSubItemValues("minute")},isc.A.getMinuteMinValue=function isc_TimeItem_getMinuteMinValue(){if(this.minuteMinValue==null)this.minuteMinValue=0;return this.minuteMinValue},isc.A.getMinuteMaxValue=function isc_TimeItem_getMinuteMaxValue(){if(this.minuteMaxValue==null)this.minuteMaxValue=59;return this.minuteMaxValue},isc.A.setSecondValues=function isc_TimeItem_setSecondValues(_1){this.secondValues=_1;if(this.secondItem)this.secondItem.setValueMap(this.getSecondValues())},isc.A.getSecondValues=function isc_TimeItem_getSecondValues(){return this.getSubItemValues("second")},isc.A.getSecondMinValue=function isc_TimeItem_getSecondMinValue(){if(this.secondMinValue==null)this.secondMinValue=0;return this.secondMinValue},isc.A.getSecondMaxValue=function isc_TimeItem_getSecondMaxValue(){if(this.secondMaxValue==null)this.secondMaxValue=59;return this.secondMaxValue},isc.A.setMillisecondValues=function isc_TimeItem_setMillisecondValues(_1){this.millisecondValues=_1;if(this.millisecondItem)this.millisecondItem.setValueMap(this.getMillisecondValues())},isc.A.getMillisecondValues=function isc_TimeItem_getMillisecondValues(){return this.getSubItemValues("millisecond")},isc.A.getMillisecondMinValue=function isc_TimeItem_getMillisecondMinValue(){if(this.millisecondMinValue==null)this.millisecondMinValue=0;return this.millisecondMinValue},isc.A.getMillisecondMaxValue=function isc_TimeItem_getMillisecondMaxValue(){if(this.millisecondMaxValue==null)this.millisecondMaxValue=999;return this.millisecondMaxValue},isc.A.getAmpmOptions=function isc_TimeItem_getAmpmOptions(){if(this.ampmValues)return this.ampmValues;var _1=["AM","PM"];return _1},isc.A.setHours=function isc_TimeItem_setHours(_1){if(this.useTextField){var _2=this.textField.getValue();if(_2==null){var _3=isc.Date.create();_2=isc.Date.createLogicalTime(_1,_3.getMinutes(),0)}else{_2.setHours(_1)}
this.textField.setValue(_2)}else{if(!this.getHourValues().contains(_1)){this.logWarn("setHours: "+_1+" is not a valid option")}else{this.hourItem.setValue(_1)}}},isc.A.setMinutes=function isc_TimeItem_setMinutes(_1){if(this.useTextField){var _2=this.textField.getValue();if(_2==null){var _3=isc.Date.create();_2=isc.Date.createLogicalTime(_3.getHours(),_1,0)}else{_2.setMinutes(_1)}
this.textField.setValue(_2)}else{if(!this.getMinuteValues().contains(_1)){this.logWarn("setMinutes: "+_1+" is not a valid option")}else{this.minuteItem.setValue(_1)}}},isc.A.setSeconds=function isc_TimeItem_setSeconds(_1){if(this.useTextField){var _2=this.textField.getValue();_2.setSeconds(_1);this.textField.setValue(_2)}else{if(!this.getSecondValues().contains(_1)){this.logWarn("setSeconds: "+_1+" is not a valid option")}else{this.secondItem.setValue(_1)}}},isc.A.setMilliseconds=function isc_TimeItem_setMilliseconds(_1){if(this.useTextField){var _2=this.textField.getValue();_2.setMilliseconds(_1);this.textField.setValue(_2)}else{if(!this.getMillisecondValues().contains(_1)){this.logWarn("setMilliseconds: "+_1+" is not a valid option")}else{this.millisecondItem.setValue(_1)}}},isc.A.getSelectorFormat=function isc_TimeItem_getSelectorFormat(){return this.selectorFormat},isc.A.getDuration=function isc_TimeItem_getDuration(_1){_1=_1||this.getDefaultDurationTimeUnit();var _2=this.getValue();if(!isc.isA.Date(_2))return null;var _3=_2.getHours(),_4=_2.getMinutes(),_5=_2.getSeconds(),_6=_2.getMilliseconds(),_7=(_3*60*60*1000)+(_4*60*1000)+(_5*1000)+_6;if(_1=="second")return _7/1000;else if(_1=="minute")return _7/1000/60;else if(_1=="hour")return _7/1000/60/60;else return _7},isc.A.getDefaultDurationTimeUnit=function isc_TimeItem_getDefaultDurationTimeUnit(){if(this.millisecondItem&&this.millisecondItem.isVisible())return"millisecond";if(this.secondItem&&this.secondItem.isVisible())return"second";if(this.minuteItem&&this.minuteItem.isVisible())return"minute";if(this.hourItem&&this.hourItem.isVisible())return"hour"},isc.A.setItems=function isc_TimeItem_setItems(_1){var _2=isc.TimeItem,_3=this.getSelectorFormat();if(_1!=null&&_1.length!=0){this.logWarn("setItems() called for timeItem with itemList:"+_1+" - ignoring, and making use of default date fields")}
_1=this.items=[];var _4=this.showing24HourTime();if(this.useTextField){var _5={textAlign:this.textAlign,emptyDisplayValue:this.emptyDisplayValue,invalidTimeStringMessage:this.invalidTimeStringMessage,operator:this.operator,title:this.title,allowEmptyValue:this.allowEmptyValue,getDefaultValue:function(){return this.parentItem.getDefaultValue()},validateOnChange:this.validateOnChange,validators:this.validators,type:this.type,parentItem:this};var _6;if(this.$119a()){_6={textAlign:this.isRTL()?isc.Canvas.RIGHT:isc.Canvas.LEFT,editorType:isc.NativeTimeItem,browserInputType:this.getBrowserInputType()}}else{_6={type:"time",editorType:isc.TextItem,timeFormatter:this.timeFormatter,useMask:this.useMask,formatterMap:this.formatterMap}}
var _7=isc.addProperties(_5,this.textFieldDefaults,_2.TEXT_FIELD,this.textFieldProperties,_6);_7.name="timeTextField";if(this.height&&(!this.textFieldProperties||!this.textFieldProperties.height))
{_7.height=this.getTextBoxHeight()}
if(!this.$119a()){if(this.parseEditorValue){_7.parseEditorValue=function innerTimeTextItem_parseEditorValue(_15,_16,_14){var _8=this.parentItem.parseEditorValue(_15,_16,this.parentItem);if(_8!=null&&!isc.isA.Date(_8)){var _9=_8;_8=isc.Time.parseInput(_8,true);if(_8==null)_8=_9}
return _8}}
if(this.formatEditorValue){_7.formatEditorValue=function innerTimeTextItem_formatEditorValue(_15,_16,_17,_14){var _10=this.parentItem.formatEditorValue(_15,_16,_17,this.parentItem);if(isc.isA.Date(_10)){_10=isc.Time.format(_10,this.$30o())}
return _10}}}
_1.add(_7);var _11;this.hourItem=this.minuteItem=this.secondItem=this.millisecondItem=this.ampmItem=_11}else{for(var i=0;i<_3.length;i++){var _13=_3.charAt(i);var _14=null;if(_13=="H"&&this.showHourItem!=false){_14=isc.addProperties({title:this.hourItemTitle,prompt:this.hourItemPrompt},this.hourItemDefaults,_2.HOUR_ITEM,this.hourItemProperties,{name:"hourItem"})}else if(_13=="M"&&this.showMinuteItem!=false){_14=isc.addProperties({title:this.minuteItemTitle,prompt:this.minuteItemPrompt},this.minuteItemDefaults,_2.MINUTE_ITEM,this.minuteItemProperties,{name:"minuteItem"})}else if(_13=="S"&&this.showSecondItem!=false){_14=isc.addProperties({title:this.secondItemTitle,prompt:this.secondItemPrompt},this.secondItemDefaults,_2.SECOND_ITEM,this.secondItemProperties,{name:"secondItem"})}else if((_13=="L"||_13=="m")&&this.showMillisecondItem!=false){_14=isc.addProperties({title:this.millisecondItemTitle,prompt:this.millisecondItemPrompt},this.millisecondItemDefaults,_2.MILLISECOND_ITEM,this.millisecondItemProperties,{name:"millisecondItem"})}
if(_14){if(_1.length>0){if(_14.cssText==null){_14.cssText="padding-left:3px;"}}
_1.add(_14)}}
if(!this.showing24HourTime()){_14=isc.addProperties({title:this.ampmItemTitle},this.ampmItemDefaults,_2.AMPM_SELECTOR,this.ampmItemProperties,{name:"ampmItem"});if(_14.cssText==null){_14.cssText="padding-left:3px;"}
_1.add(_14)}}
this.Super("setItems",[_1]);if(this.useTextField){this.textField=this.timeTextField}});isc.B._maxIndex=isc.C+29;isc.A=isc.TimeItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.short24TimeFormat="HH:MM";isc.A.shortTimeFormat="HH:MM [am|pm]";isc.A.long24TimeFormat="HH:MM:SS";isc.A.longTimeFormat="HH:MM:SS [am|pm]";isc.A.full24TimeFormat="HH:MM:SS.lll";isc.A.fullTimeFormat="HH:MM:SS.lll [am|pm]";isc.A.$g5="time";isc.A.formatterMap={toTime:{mask:"[0-1]#:[0-6]#:[0-6]# [ap]m",formatter:"toPaddedTime"},to24HourTime:{mask:"[0-2]#:[0-6]#:[0-6]#",formatter:"toPadded24HourTime"},toPaddedTime:{mask:"[0-1]#:[0-6]#:[0-6]# [ap]m"},toPadded24HourTime:{mask:"[0-2]#:[0-6]#:[0-6]#"},toShortTime:{mask:"[0-1]#:[0-6]# [ap]m",formatter:"toShortPaddedTime"},toShort24HourTime:{mask:"[0-2]#:[0-6]#",formatter:"toShortPadded24HourTime"},toShortPaddedTime:{mask:"[0-1]#:[0-6]# [ap]m"},toShortPadded24HourTime:{mask:"[0-2]#:[0-6]#"}};isc.A.validators=[{type:"isTime"}];isc.B.push(isc.A.$85m=function isc_TimeItem__shouldAllowExpressions(){if(!this.useTextField)return false;return(this.allowExpressions!=false)},isc.A.getOperator=function isc_TimeItem_getOperator(_1){if(!this.operator)return"equals";return this.operator},isc.A.$712=function isc_TimeItem__getShowHintInField(){return!!(this.useTextField&&this.showHint&&this.showHintInField)},isc.A.getHint=function isc_TimeItem_getHint(){if(!this.showHint||this.$712())return null;if(this.hint!=null)return this.hint;return this.getDefaultHint()},isc.A.getDefaultHint=function isc_TimeItem_getDefaultHint(){if(!this.useTextField)return null;var _1=this.$30o();switch(_1){case"to24HourTime":case"toPadded24HourTime":return this.long24TimeFormat;case"toTime":case"toPaddedTime":return this.longTimeFormat;case"toShort24HourTime":case"toShortPadded24HourTime":return this.short24TimeFormat;case"toShortTime":case"toShortPaddedTime":return this.shortTimeFormat;case"toFullTime":case"toFullPaddedTime":return this.fullTimeFormat}
return null},isc.A.$119a=function isc_TimeItem__useNativeTimeInput(){return this.useTextField&&this.getBrowserInputType()==this.$g5},isc.A.getDefaultValue=function isc_TimeItem_getDefaultValue(){var _1=this.defaultValue;if(!_1&&!this.allowEmptyValue)_1=isc.TimeItem.DEFAULT_TIME;if(_1&&!isc.isA.Date(_1))
_1=isc.Time.parseInput(_1);return _1},isc.A.getCriteriaValue=function isc_TimeItem_getCriteriaValue(){if(this.$85m())return this.textField.getElementValue();var _1=this.getValue();if(_1==null||isc.is.emptyString(_1))return null;if(!isc.isA.Date(_1))_1=isc.Time.parseInput(String(_1));return _1},isc.A.getCriterion=function isc_TimeItem_getCriterion(_1){var _2,_3=this.getOperator(_1,isc.isAn.Array(_5)),_4=this.getCriteriaFieldName();var _5=this.getCriteriaValue();if(_5==null||isc.is.emptyString(_5))return;if(this.$85m()){_2=this.parseValueExpressions(_5,_4,_3);if(_2!=null){if("equals"!=_2.operator){return _2}
_5=_2.value}}
if(isc.isA.String(_5)){_5=isc.Time.parseInput(_5)}
if(isc.isA.Date(_5)&&"exact"!=_1){_2={_constructor:"AdvancedCriteria",fieldName:_4,operator:"betweenInclusive",start:isc.Time.createLogicalTime(_5.getHours(),_5.getMinutes(),0,0),end:isc.Time.createLogicalTime(_5.getHours(),_5.getMinutes(),59,999),value:_5};return _2}
_2={fieldName:_4,operator:_3,value:_5};return _2},isc.A.canEditCriterion=function isc_TimeItem_canEditCriterion(_1,_2){if(_1.fieldName!=null&&_1.fieldName==this.getCriteriaFieldName()&&isc.isA.Date(_1.value))
{return true}
return this.Super("canEditCriterion",arguments)},isc.A.$111i=function isc_TimeItem__formatCriterionValue(_1){return this.mapValueToDisplay(_1)},isc.A.parseTimeString=function isc_TimeItem_parseTimeString(_1){if(_1==null||isc.isAn.emptyString(_1))return null;var _2=isc.Time.parseInput(_1),h,m,s,_6;h=m=s=_6=0;if(isc.isA.Date(_2)){h=_2.getHours();m=_2.getMinutes();s=_2.getSeconds();_6=_2.getMilliseconds()}
if(h+m+s+_6==0){var _7=_1.split(".");if(_7.length==2)_6=_7[1];_7=_7[0].split(":");if(_7.length>2)s=_7[2];if(_7.length>1)m=_7[1];h=_7[0]}
var _8=isc.Date.createLogicalTime(h,m,s,_6);return _8},isc.A.updateValue=function isc_TimeItem_updateValue(){if(this.$20l)return;this.$20l=true;var _1;if(this.useTextField){this.timeTextField.updateValue();_1=this.timeTextField.getValue();if(_1==isc.emptyString)_1=null}else{var _2,_3,_4,_5;if(this.hourItem){_2=this.hourItem.getValue()}
if(this.minuteItem){_3=this.minuteItem.getValue()}
if(this.secondItem){_4=this.secondItem.getValue()}
if(this.millisecondItem){_5=this.millisecondItem.getValue()}
_1=isc.Date.createLogicalTime(_2,_3,_4,_5)}
delete this.$20l;if(this.compareValues(_1,this._value)==true)return false;if(this.handleChange(_1,this._value)==false)return;_1=this.$17n;this.saveValue(_1);this.handleChanged(_1)},isc.A.setValue=function isc_TimeItem_setValue(_1){var _2=_1;if(isc.isA.String(_2)){if(!this.$85m())_2=this.parseTimeString(_2)}
if(this.useTextField){this.textField.setValue(_1)}else if(isc.isA.Date(_2)){var _3=_2.getHours(),_4=_2.getMinutes(),_5=_2.getSeconds();if(!this.showing24HourTime()){if(_3>11)_3-=12;if(_3==0)_3=12}
if(_3<10)_3=isc.NumberUtil.stringify(_3,2);if(this.hourItem)this.hourItem.setValue(_3);if(_4<10)_4=isc.NumberUtil.stringify(_4,2);if(this.minuteItem)this.minuteItem.setValue(_4);if(_5<10)_5=isc.NumberUtil.stringify(_5,2);if(this.secondItem)this.secondItem.setValue(_5);if(this.millisecondItem)this.millisecondItem.setValue(_2.getMilliseconds());var _6=this.ampmItem,_7=this.getAmpmOptions();if(_6)_6.setValue(_2.getHours()>11?_7[1]:_7[0])}
return this.Super("setValue",[_2])},isc.A.getValue=function isc_TimeItem_getValue(){if(this.useTextField){var _1=this.textField.getValue();var _2=isc.Time.parseInput(String(_1),true);if(_2!=null)_1=_2;return _1}
var h=this.hourItem?this.hourItem.getValue():0,m=this.minuteItem?this.minuteItem.getValue():0,s=this.secondItem?this.secondItem.getValue():0,_6=this.millisecondItem?this.millisecondItem.getValue():0;var _7=this.ampmItem;if(_7){var _8=_7.getValue(),_9=this.getAmpmOptions();if(_8==_9[1]&&h<12)h+=12;else if(_8==_9[0]&&h==12)h=0}
return isc.Date.createLogicalTime(h,m,s,_6)},isc.A.getEnteredValue=function isc_TimeItem_getEnteredValue(){if(this.useTextField&&this.textField!=null){return this.textField.getEnteredValue()}
return this.getValue()},isc.A.compareValues=function isc_TimeItem_compareValues(_1,_2){if(_1==_2)return true;if(isc.isA.Date(_1)&&isc.isA.Date(_2)&&isc.Time.compareTimes(_1,_2))return true;return false},isc.A.init=function isc_TimeItem_init(){if(!this.use24HourTime){this.timeFormatter="toShortTime"}
this.Super("init",arguments)},isc.A.setMask=function isc_TimeItem_setMask(_1){this.logWarn("setMask: custom mask ignored")},isc.A.$kk=function isc_TimeItem__canFocus(){if(this.canFocus!=null)return this.canFocus;return true},isc.A.focusInItem=function isc_TimeItem_focusInItem(){if(!this.isVisible())return;if(this.useTextField){if(this.textField)this.textField.focusInItem()}else{var _1=this.getSelectorFormat(),_2=_1.charAt(0);if(_2=="H"&&this.hourItem)this.hourItem.focusInItem();if(_2=="M"&&this.minuteItem)this.minuteItem.focusInItem();if(_2=="S"&&this.secondItem)this.secondItem.focusInItem();if(_2=="L"&&this.millisecondItem)this.millisecondItem.focusInItem()}},isc.A.setSelectionRange=function isc_TimeItem_setSelectionRange(_1,_2){if(this.textField)return this.textField.setSelectionRange(_1,_2)},isc.A.getSelectionRange=function isc_TimeItem_getSelectionRange(){if(this.textField)return this.textField.getSelectionRange()},isc.A.selectValue=function isc_TimeItem_selectValue(){if(this.textField)return this.textField.selectValue()},isc.A.deselectValue=function isc_TimeItem_deselectValue(_1){if(this.textField)return this.textField.deselectValue()},isc.A.setHint=function isc_TimeItem_setHint(_1){if(this.useTextField&&this.showHintInField){this.textField.setHint(_1)}else{this.Super("setHint",arguments)}});isc.B._maxIndex=isc.C+26;isc.ClassFactory.defineClass("ToolbarItem","CanvasItem");isc.A=isc.ToolbarItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.canFocus=true;isc.A.shouldSaveValue=false;isc.A.showTitle=false;isc.A.buttonSpace=4;isc.A.startRow=true;isc.A.endRow=true;isc.A.colSpan="*";isc.A.canvasConstructor=isc.Toolbar;isc.A.vertical=false;isc.A.buttonConstructor=isc.AutoFitButton;isc.B.push(isc.A.isEditable=function isc_ToolbarItem_isEditable(){return false});isc.B._maxIndex=isc.C+1;isc.A=isc.ToolbarItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.$18y=function isc_ToolbarItem__createCanvas(){var _1=(this.buttons||this.items||[]),_2=this.buttonProperties||{};isc.addProperties(_2,{handleActivate:function(){var _3=this.parentElement.canvasItem,_4=_3.form;if(this.click!=null)return this.click(_4,_3)}});if(this.buttonBaseStyle&&!_2.baseStyle){_2.baseStyle=this.buttonBaseStyle}
if(this.buttonTitleStyle&&!_2.titleStyle){_2.titleStyle=this.buttonTitleStyle}
this.$20r(_1);this.canvas={overflow:isc.Canvas.VISIBLE,buttons:_1,membersMargin:this.buttonSpace,vertical:this.vertical,buttonProperties:_2};var _5=this.height,_6=this.width;if(!isc.isA.Number(_6)&&this.$8t)
_6=isc.isA.Number(this.$8t[0])?this.$8t[0]:null;if(!isc.isA.Number(_5)&&this.$8t)
_5=isc.isA.Number(this.$8t[1])?this.$8t[1]:null;if(_5)this.canvas.height=_5;if(_6)this.canvas.width=_6;if(this.buttonConstructor!=null)
this.canvas.buttonConstructor=this.buttonConstructor;return this.Super("$18y",arguments)},isc.A.$20r=function isc_ToolbarItem__updateButtons(_1){if(!_1||_1.length==0)return;for(var i=0;i<_1.length;i++){if(_1[i].click&&isc.isA.String(_1[i].click)){_1[i].click=isc.Func.expressionToFunction("form,item",_1[i].click)}}},isc.A.getButton=function isc_ToolbarItem_getButton(_1){return isc.Class.getArrayItem(_1,this.buttons,"name")},isc.A.addButton=function isc_ToolbarItem_addButton(_1,_2){this.buttons=this.buttons||[];this.buttons.addAt(_1,_2);this.setButtons(this.buttons)},isc.A.removeButton=function isc_ToolbarItem_removeButton(_1){var _2=isc.Class.getArrayItemIndex(_1,this.buttons,"name");if(_2!=-1){this.buttons.removeAt(_2);this.setButtons(this.buttons)}},isc.A.setButtons=function isc_ToolbarItem_setButtons(_1){this.$20r(_1);this.buttons=_1;if(!this.canvas)return;this.canvas.setButtons(_1)},isc.A.setItems=function isc_ToolbarItem_setItems(_1){return this.setButtons(_1)});isc.B._maxIndex=isc.C+7;isc.ClassFactory.defineClass("UploadItem","TextItem");isc.A=isc.UploadItem.getPrototype();isc.A.$183="FILE";isc.A.$16b={onchange:isc.FormItem.$12y};isc.A.$105m=true;isc.A.multiple=true;isc.A.maintainSelectionOnTransform=false;isc.A=isc.UploadItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.shouldFixRowHeight=function isc_UploadItem_shouldFixRowHeight(){return true},isc.A.shouldWriteTextBoxWidth=function isc_UploadItem_shouldWriteTextBoxWidth(){if(this.writeTextBoxWidth!=null)return this.writeTextBoxWidth;return false},isc.A.shouldWriteTextBoxHeight=function isc_UploadItem_shouldWriteTextBoxHeight(){if(this.writeTextBoxHeight!=null)return this.writeTextBoxHeight;return false},isc.A.getTextBoxWidth=function isc_UploadItem_getTextBoxWidth(){if(!this.shouldWriteTextBoxWidth())return null;return this.Super("getTextBoxWidth",arguments)},isc.A.getTextBoxHeight=function isc_UploadItem_getTextBoxHeight(){if(!this.shouldWriteTextBoxHeight())return null;return this.Super("getTextBoxHeight",arguments)},isc.A.$143=function isc_UploadItem__sizeTextBoxAsContentBox(){return false},isc.A.$149=function isc_UploadItem__getEventMaskWidth(){var _1=this.getElementWidth();if(!isc.isA.Number(_1))_1=185;return _1},isc.A.$10y=function isc_UploadItem__updateValue(_1){_1=this.mapDisplayToValue(_1);if(_1==this._value)return true;var _2=this.handleChange(_1,this._value);if(this.$17n!=_1){this.logWarn("Upload Items do not support programmatically modifying the value entered by the user. Ignoring attempt to update from change handler")}
this.saveValue(this.mapDisplayToValue(this.getElementValue()));delete this.$17n;this.handleChanged(this._value);return _2},isc.A.redrawn=function isc_UploadItem_redrawn(){this.Super("redrawn",arguments);this.updateValue(this.getElementValue())},isc.A.setElementReadOnly=function isc_UploadItem_setElementReadOnly(_1){this.$176(!_1&&!this.isDisabled())},isc.A.setValue=function isc_UploadItem_setValue(_1){var _2=this.getValue();if(_1==null||isc.isAn.emptyString(_1)){if(_2==null||isc.isAn.emptyString(_2))return;return this.Super("setValue",arguments)}
if(_1!=_2){this.logWarn("Attempting to set the value for an upload form item. This is disallowed for security reasons - returning the current value of the form item")}
return _2},isc.A.$12z=function isc_UploadItem__handleElementChanged(){this.Super("$12z",arguments);this.checkForImplicitSave()},isc.A.setElementValue=function isc_UploadItem_setElementValue(_1){if(_1==null||isc.isAn.emptyString(_1)){if(isc.Browser.isIE){this.redraw();return}
return this.Super("setElementValue",arguments)}
var _2=this.getElementValue();if(_1!=_2){this.logInfo("Attempting to set the value for an upload form item. This is disallowed for security reasons - returning the current value of the form item")}
return _2},isc.A.refreshDisplayValue=function isc_UploadItem_refreshDisplayValue(){},isc.A.$85m=function isc_UploadItem__shouldAllowExpressions(){return false},isc.A.$884=function isc_UploadItem__shouldSelectOnFocus(){return false});isc.B._maxIndex=isc.C+16;isc.UploadItem.markUnsupportedMethods(null,["getSelectionRange","setSelectionRange","selectValue","deselectValue"]);isc.defineClass("ComboBoxItem","TextItem","PickList");isc.A=isc.ComboBoxItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.autoSizePickList=true;isc.A.showPickerIcon=true;isc.A.pickerIconWidth=15;isc.A.pickerIconHeight=null;isc.A.textBoxStyle="selectItemText";isc.A.pickerIconSrc="[SKIN]/DynamicForm/ComboBoxItem_PickButton_icon.gif";isc.A.pickerIconProperties={tabIndex:-1,showOver:true};isc.A.modalPickList=false;isc.A.showPickListOnKeypress=true;isc.A.saveOnEnter=true;isc.A.$20s="Arrow_Up";isc.A.$20t="Arrow_Down";isc.A.$20u="Page_Up";isc.A.$20v="Page_Down";isc.A.$20w="Escape";isc.A.$10j="Enter";isc.A.$jf="Tab";isc.A.addUnknownValues=true;isc.A.allowEmptyValue=true;isc.A.filterDisplayValue=true;isc.A.autoFetchData=false;isc.A.searchStringTooShortMessage="Enter a longer search string to search";isc.B.push(isc.A.drawn=function isc_ComboBoxItem_drawn(_1,_2,_3,_4){this.invokeSuper(isc.ComboBoxItem,"drawn",_1,_2,_3,_4);if(this.autoFetchData&&this.$19m()){this.filterWithValue=false;this.fetchData(null,null,true)}},isc.A.pickListShown=function isc_ComboBoxItem_pickListShown(){if(this.pickList.isVisible()){this.$20x=this.ns.Page.setEvent("mouseDown",this,null,"$20y")}},isc.A.$20y=function isc_ComboBoxItem__clickOutside(){var _1=this.pickList;if(!_1||!_1.isVisible())return;var _2=isc.EH.lastEvent.target;if(!_1.contains(_2,true)&&(!_1.$314||!_1.$314.contains(_2,true))&&(!_1.filterEditor||_1.filterEditor.getEditForm()!=_2))
{var _3=false;if(_1.filterEditor){var _4=_1.filterEditor.getEditForm().getItems().getProperty("pickList");_4.addList(_1.filterEditor.getEditForm().getItems().getProperty("picker"));for(var i=0;i<_4.length;i++){if(_4[i]&&_4[i].contains(_2)){_3=true;break}}}
if(!_3){_1.hide()}}
if(!this.$43l){this.$43l=this.ns.Page.setEvent("mouseUp",this,isc.Page.FIRE_ONCE,"$20z")}
if(!this.$43m){this.$43m=this.ns.Page.setEvent("dragStop",this,isc.Page.FIRE_ONCE,"$43n")}},isc.A.$20z=function isc_ComboBoxItem__dismissPickListClick(){if(this.form.$ne().item==this){this.ns.Page.clearEvent("dragStop",this.$43m);delete this.$43m;delete this.$43l;return false}
this.$43n(true)},isc.A.$43n=function isc_ComboBoxItem__refocusFromPLMouseUp(_1){if(_1==true){this.ns.Page.clearEvent("dragStop",this.$43m)}else{this.ns.Page.clearEvent("mouseUp",this.$43l)}
delete this.$43m;delete this.$43l;if(this.pickList&&this.pickList.isVisible()&&this.pickList.contains(isc.EH.getTarget()))
{this.focusInItem()}},isc.A.pickListHidden=function isc_ComboBoxItem_pickListHidden(){if(this.$20x)this.ns.Page.clearEvent("mouseDown",this.$20x);delete this.$20x;delete this.$111h},isc.A.handleKeyPress=function isc_ComboBoxItem_handleKeyPress(){if(!this.hasFocus||this.isReadOnly())return this.Super("handleKeyPress",arguments);var _1=isc.EH.lastEvent.keyName,_2=this.pickList,_3=(_2?(_2.isDrawn()&&_2.isVisible()):false);if(_3&&(_1==this.$20v||_1==this.$20u)){return _2.body.handleKeyPress(isc.EH.lastEvent)}
var _4=this.getEnteredValue(),_5=this.getValue(),_6=(!_4||_4==isc.emptyString);if(_1==this.$20t&&isc.EH.altKeyDown()){this.$84k=_4;this.$200=_6;this.filterWithValue=false;this.showPickList();return false}
if(_1==this.$20w&&this.addUnknownValues==false){var _7=this.getDisplayValue(_5);if(isc.isAn.emptyString(_7)&&this.$712()){this.$66t()}else{this.setElementValue(_7)}}
var _8=_1==this.$10j,_9=false;if(_8&&_3){if(this.addUnknownValues==false)_9=true;else if(this.$823)_9=true;else if(this.completeOnEnter!=null)_9=this.completeOnEnter;else{_9=!this.form.isSearchForm||!this.$19m()}}
var _10=_3&&(_1==this.$20t||_1==this.$20s);this.$823=_10;if(_3){if(_10||(_8&&_9)||_1==this.$20w)
{_2.bodyKeyPress(isc.EH.lastEvent);return false}
if(_8)_2.hide()}
if(!this.addUnknownValues)this.$82s();return this.Super("handleKeyPress",arguments)},isc.A.shouldCompleteOnTab=function isc_ComboBoxItem_shouldCompleteOnTab(){return this.completeOnTab||(this.addUnknownValues==false)},isc.A.handleKeyDown=function isc_ComboBoxItem_handleKeyDown(){if(!this.hasFocus||this.isReadOnly())return this.Super("handleKeyDown",arguments);var _1=isc.EH.lastEvent.keyName,_2=this.pickList,_3=(_2?(_2.isDrawn()&&_2.isVisible()):false);this.$82p=null;if(_1==this.$jf&&(this.shouldCompleteOnTab()||this.$17h()==this.$14l))
{if(this.$82q()){this.$82p=this.getEnteredValue()}else if(_3){this.$82r()}}
return this.Super("handleKeyDown",arguments)},isc.A.$82q=function isc_ComboBoxItem__loadingData(){return(this.$82m||this.$43j)},isc.A.$82r=function isc_ComboBoxItem__fireTabCompletion(){var _1=this.pickList;var _2=_1.getSelectedRecord();if(_2!=null)_1.itemClick(_2)},isc.A.refreshDisplayValue=function isc_ComboBoxItem_refreshDisplayValue(){return;if(this.$82q())return;if(this.$82t)return;return this.Super("refreshDisplayValue",arguments)},isc.A.isUnknownValue=function isc_ComboBoxItem_isUnknownValue(_1){var _2=this.getValueMap();if(_2!=null){if(isc.isAn.Array(_2)){if(_2.contains(_1))return false}else if(isc.isAn.Object(_2)){for(var _3 in _2){if(_2[_3]==_1)return false}}}
var _4=this.getOptionDataSource();if(_4!=null){return this.$19o(_1,true,true)==null}
return true},isc.A.handleEditorExit=function isc_ComboBoxItem_handleEditorExit(){if(this.$84z())return;this.$823=false;var _1=this.getEnteredValue(),_2=this.getValue();if(this.$82p!=null&&this.$82p==_1&&!this.$82q())
{this.$82r();this.$82p=null;_1=this.getEnteredValue()}
if(this.$82p==null){if(this.addUnknownValues){var _3=this.getOptionDataSource();if(_2==_1&&(_3==null||this.getDisplayFieldName!=null)){if(_2!=null&&this.shouldFetchMissingValue(_2)){this.$43f(_2)}
var _4=this.mapValueToDisplay(_2);if(_4!=_2){if(isc.isAn.emptyString(_4)&&this.$712()){this.$66t()}else{this.setElementValue(_4)}}}}else{if(!this.$82q()){if(this.isUnknownValue(_1)){this.setElementValue(this.getDisplayValue())}else{this.$10y(_1,true)}}}}
this.$843=(this.$82p!=null);var _5=this.Super("handleEditorExit",arguments);this.$843=null;return _5},isc.A.$82o=function isc_ComboBoxItem__updateValueForFilterComplete(_1,_2,_3){this.selectDefaultItem();if(!this.hasFocus){if(this.$82p!=null&&this.$82p==this.getEnteredValue())
{this.$82r();this.$82p=null}
if(!this.addUnknownValues){var _4=this.getEnteredValue();if(this.isUnknownValue(_4)){var _5=this.getDisplayValue();if(isc.isAn.emptyString(_5)&&this.$712()){this.$66t()}else{this.setElementValue(_5)}
this.$82u()}else{this.$10y(_4,true);_4=this.getEnteredValue();if(this.$712()&&(_4==null||isc.is.emptyString(_4)))
{this.$66t()}}}
this.$844(this.getValue())}
this.$19v()},isc.A.$82s=function isc_ComboBoxItem__markPending(){var _1=this.$82t;this.$82t=true;this.$824=this.getEnteredValue();if(!_1)this.updateState()},isc.A.$82u=function isc_ComboBoxItem__markNotPending(){if(!this.$82t)return;this.$82t=null;this.$824=null;this.updateState()},isc.A.getTextBoxStyle=function isc_ComboBoxItem_getTextBoxStyle(){if(this.pendingTextBoxStyle==null||!this.$82t||this.$68y()){if(this.$68y())return isc.TextItem.getInstanceProperty("textBoxStyle");return this.Super("getTextBoxStyle",arguments)}
return this.pendingTextBoxStyle},isc.A.$10y=function isc_ComboBoxItem__updateValue(_1,_2){var _3=!_2&&!this.$201&&this.addUnknownValues==false;if(_3&&this.allowEmptyValue&&(_1=="")){_3=false}
if(!_3){this.$82u();var _4=this.mapDisplayToValue(_1);if(this.$201)this.explicitChoice=this.$201;if(this.compareValues(_4,this._value)){return true}
this.explicitChoice=this.$201;return this.Super("$10y",arguments)}else{if(this.changeOnKeypress&&this.length!=null&&isc.isA.String(_1)&&_1.length>this.length){_1=_1.substring(0,this.length);this.setElementValue(_1)}
if(this.$84z())return;if(this.$82t==false)return;if(this.$824==this.$111h)return;this.$111h=this.$824;this.refreshPickList(_1)}},isc.A.$122m=function isc_ComboBoxItem__minimalUpdateValue(_1){this.refreshPickList(_1)},isc.A.handleChanged=function isc_ComboBoxItem_handleChanged(_1,_2){var _3=this.Super("handleChanged",arguments);this.refreshPickList(this.getEnteredValue());return _3},isc.A.refreshPickList=function isc_ComboBoxItem_refreshPickList(_1){var _2=(!_1||_1==isc.emptyString);if(!_2)delete this.$200;var _3=this.pickList,_4=(_3?_3.isVisible():false);if(_2&&!this.$200){if(_4)_3.hide()}else if(this.showPickListOnKeypress||_4){if(!this.$201&&this.hasFocus){if(!this.filterWithValue&&(this.$84k!=_1)){this.filterWithValue=true;delete this.$84k}
this.showPickList(true,true)}}},isc.A.selectDefaultItem=function isc_ComboBoxItem_selectDefaultItem(){if(this.pickList==null||this.pickList.destroyed)return;var _1=this.pickList.selection;if(this.optionDataSource){var _2;if(!this.addUnknownValues&&this.$824!=null){_2=this.getPickListRecordForValue(this.$824)}else{_2=this.getSelectedRecord()}
if(_2){this.pickList.clearLastHilite();this.delayCall("selectItemFromValue",[_2[this.valueField]]);return}}
var _2=this.pickList.getRecord(0);if(_2==null||Array.isLoading(_2)||_2[this.pickList.isSeparatorProperty])return;_1.selectSingle(_2);this.pickList.clearLastHilite();this.pickList.scrollRecordIntoView(0)},isc.A.getSelectedRecord=function isc_ComboBoxItem_getSelectedRecord(){var _1=this.Super("getSelectedRecord",arguments);if(_1==null&&this._value!=null&&this.getOptionDataSource()){_1=this.getPickListRecordForValue(this._value);if(_1!=null){this.$848([_1]);this.$846()}}
return _1},isc.A.getPickListRecordForValue=function isc_ComboBoxItem_getPickListRecordForValue(_1){var _2;if(this.pickList==null||this.pickList.destroyed){if(this.progressiveLoading===true||this.progressiveLoading===false){if(this.pickListProperties==null)this.picklistProperties={};this.picklistProperties.progressiveLoading=this.progressiveLoading}
this.makePickList(false)}
if(this.pickList&&this.pickList.data){_2=this.pickList.data.find(this.getValueFieldName(),_1)}
return _2},isc.A.getPickListFilterOperator=function isc_ComboBoxItem_getPickListFilterOperator(){return(this.textMatchStyle=="startsWith"?"iStartsWith":this.textMatchStyle=="exact"?"iEquals":"iContains")},isc.A.getPickListFilterCriteria=function isc_ComboBoxItem_getPickListFilterCriteria(){var _1=this.optionCriteria,_2=this.pickListCriteria;if(_2!=null){if(_1==null)_1=_2;else{_1=isc.DataSource.combineCriteria(_1,_2)}}
if(this.alwaysFilterWithValue||this.filterWithValue){var _3=this.filterFields;if(_3==null){_3=[this.getDisplayFieldName()||this.getValueFieldName()]}
var _4=this.getEnteredValue();var _5;if(_3.length==1){_5={};_5[_3[0]]=_4}else{_5={_constructor:"AdvancedCriteria",operator:"or",criteria:[]}
for(var i=0;i<_3.length;i++){_5.criteria.add({fieldName:_3[i],value:_4,operator:this.getPickListFilterOperator()})}}
if(_1==null)_1=_5;else _1=isc.DataSource.combineCriteria(_1,_5)}
return _1||{}},isc.A.isEntryTooShortToFilter=function isc_ComboBoxItem_isEntryTooShortToFilter(){var _1=this.getEnteredValue();var _2=(_1!=null&&_1.length<this.minimumSearchLength);var _3=((this.filterWithValue||this.alwaysfilterWithValue)&&_2);return _3},isc.A.getEntryTooShortMessage=function isc_ComboBoxItem_getEntryTooShortMessage(){return this.searchStringTooShortMessage},isc.A.$849=function isc_ComboBoxItem__refreshForDisplayValueChange(){if(!this.hasFocus)return true;if(!this.addUnknownValues)return!this.$82t;return!!this.explicitChoice},isc.A.elementBlur=function isc_ComboBoxItem_elementBlur(){this.Super("elementBlur",arguments);if(isc.Browser.isMobile){this.delayCall("hidePickListOnBlur",[true],100)}else{this.hidePickListOnBlur()}},isc.A.hidePickListOnBlur=function isc_ComboBoxItem_hidePickListOnBlur(_1){if(_1&&((this.hasFocus&&this.containerWidget.hasFocus)||(this.pickList&&this.pickList.body.hasFocus)))
{return}
if(this.pickList&&this.pickList.$93s)return;var _2=this.pickList,_3=isc.EH,_4=_3.lastEvent;if(this.$84z()||(isc.Browser.isIE&&this.getActiveElement()==this.getDataElement()))
{return}
delete this.$19i;delete this.$43i;if(!_2||!_2.isVisible()||_2.formItem!=this)return;_2.hide()},isc.A.$84z=function isc_ComboBoxItem__mouseDownInPickList(){var _1=this.pickList;if(!_1||!_1.isVisible()||!_1.isDrawn())return false;var _2=isc.EH,_3=isc.EH.lastEvent;if((_3.eventType=="selectionChange"&&_1.contains(isc.EH.mouseDownTarget()))||((_3.eventType==_2.MOUSE_DOWN||_3.eventType==_2.CLICK)&&(_1.contains(_3.target,true)||(_1.filterEditor&&_1.filterEditor.getEditForm()==_3.target))))
{return true}
return false},isc.A.editorEnter=function isc_ComboBoxItem_editorEnter(_1,_2,_3){this.$66s()},isc.A.editorExit=function isc_ComboBoxItem_editorExit(_1,_2,_3){var _4;if(this.$82p==null&&this.$712()&&(_3===_4||_3==null||isc.is.emptyString(_3)))
{this.$66t()}},isc.A.showPicker=function isc_ComboBoxItem_showPicker(){this.focusInItem();this.filterWithValue=false;var _1=this.getEnteredValue(),_2=(!_1||_1==isc.emptyString);this.$84k=_1;this.$200=_2;return this.showPickList()},isc.A.pickValue=function isc_ComboBoxItem_pickValue(_1){this.$66s();var _2=this.mapValueToDisplay(_1);this.setElementValue(_2);if(this.hasFocus)this.selectValue();this.$201=true;this.$66x={};this.$66x[_2]=_1;this.updateValue();delete this.$201},isc.A.setValueMap=function isc_ComboBoxItem_setValueMap(){this.Super("setValueMap",arguments);if(this.pickList){if(this.pickList.isVisible())this.pickList.hide();delete this.pickList.formItem
this.setUpPickList(this.pickList.isVisible())}
if(this.addUnknownValues){var _1=this.getDisplayValue();if(isc.isAn.emptyString(_1)&&this.$712()){this.$66t()}else{this.setElementValue(_1)}}},isc.A.setValue=function isc_ComboBoxItem_setValue(_1,_2,_3,_4,_5){var _6=this._value!=_1;if(!_6){if(this.$82t){this.setElementValue(this.$824);return}}
this.$82u();this.$43o=true;this.invokeSuper(isc.ComboBoxItem,"setValue",_1,_2,_3,_4,_5);delete this.$43o;if(!this.hasFocus&&this.$712()&&this.getHint()){var _7;if(_1===_7||_1==null||isc.is.emptyString(_1)){this.$66t()}}
if(_3||_1==null){this.explicitChoice=false}else if(_6){this.explicitChoice=true}},isc.A.getDefaultValue=function isc_ComboBoxItem_getDefaultValue(){var _1=this.Super("getDefaultValue",arguments);if(_1==null&&this.defaultToFirstOption){_1=this.getFirstOptionValue()}
return _1},isc.A.shouldGenerateExactMatchCriteria=function isc_ComboBoxItem_shouldGenerateExactMatchCriteria(){if(this.generateExactMatchCriteria!=null)return this.generateExactMatchCriteria;var _1=this.form.getDataSource();if(_1&&_1.supportsAdvancedCriteria())return true;return false},isc.A.hasAdvancedCriteria=function isc_ComboBoxItem_hasAdvancedCriteria(){if(this.Super("hasAdvancedCriteria",arguments))return true;if(this.addUnknownValues&&this.explicitChoice&&this.shouldGenerateExactMatchCriteria())
return true;return false},isc.A.getCriteriaFieldName=function isc_ComboBoxItem_getCriteriaFieldName(){if(this.criteriaField!=null)return this.criteriaField;if(this.displayField!=null&&this.addUnknownValues&&!this.explicitChoice){return this.displayField}
return this.getDataPath()||this.getFieldName()},isc.A.getCriteriaValue=function isc_ComboBoxItem_getCriteriaValue(){if(this.displayField!=null&&this.addUnknownValues&&!this.$1441&&!this.explicitChoice)
{return this.getEnteredValue()}
return this.Super("getCriteriaValue",arguments)},isc.A.getOperator=function isc_ComboBoxItem_getOperator(_1){var _2;if(this.addUnknownValues&&!this.explicitChoice){_2=this.getPickListFilterOperator()}else{_2=this.Super("getOperator",arguments)}
return _2},isc.A.canEditSimpleCriterion=function isc_ComboBoxItem_canEditSimpleCriterion(_1){if(this.getDataPath()&&_1==this.getDataPath())return true;if(this.criterionField)return _1==this.criterionField;if(this.displayField&&_1==this.displayField)return true;return this.getFieldName()==_1},isc.A.setSimpleCriterion=function isc_ComboBoxItem_setSimpleCriterion(_1,_2){if(this.criterionField==null&&this.displayField!=null&&_2==this.displayField){this.setValue(_1,null,true)}else{this.setValue(_1)}},isc.A.canEditCriterion=function isc_ComboBoxItem_canEditCriterion(_1,_2){if(!this.addUnknownValues){return this.Super("canEditCriterion",arguments)}
if(this.getDataPath()&&_1.fieldName==this.getDataPath())return true;var _3=_1.fieldName,_4=this.criterionField||this.getFieldName(),_5=this.Super("getOperator",[]);if(_3!=null){if(this.displayField==null){if(_3==_4){return _1.operator==_5||_1.operator==this.getPickListFilterOperator()}}else{if(_3==_4){return _1.operator==_5}else if(_3==this.displayField){return _1.operator==this.getPickListFilterOperator()}}}
return false},isc.A.setCriterion=function isc_ComboBoxItem_setCriterion(_1){if(!this.addUnknownValues||this.displayField==null||_1.fieldName!=this.displayField)
{return this.Super("setCriterion",arguments)}
var _2=_1.value;this.setElementValue(_2);this.$43f(_2);var _3=this.mapDisplayToValue(_2);if(!this.compareValues(_3,this._value))this.saveValue(_3)},isc.A.$43f=function isc_ComboBoxItem__checkForDisplayFieldValue(_1,_2){var _3=(this.$17b(_1,true)!=null);if(_3){return}
if(this.$43j){this.$43k=true;return}
if(this.pickList!=null&&this.pickList.formItem==this&&isc.isA.ResultSet(this.pickList.data)&&this.pickList.data.allRowsCached())
{return}
this.invokeSuper(isc.ComboBoxItem,"$43f",_1)},isc.A.$17b=function isc_ComboBoxItem__mapKey(_1,_2,_3,_4,_5,_6){var _7=this.invokeSuper(isc.ComboBoxItem,"$17b",_1,true,_3,_4,_5,_6);if(_7==null&&this.getDisplayFieldName()!=null)
_7=this.$19o(_1,false);if(_7==null&&!_2)_7=_1;return _7},isc.A.mapDisplayToValue=function isc_ComboBoxItem_mapDisplayToValue(_1,_2,_3,_4){if(this.$66x){for(var i in this.$66x){if(i==_1){return this.$66x[i]}}
delete this.$66x}
if(this.getDisplayFieldName()!=null){var _6;_6=this.$19o(_1,true);if(_6!=null)_1=_6}
return this.invokeSuper(isc.ComboBoxItem,"mapDisplayToValue",_1,_2,_3,_4)},isc.A.$85m=function isc_ComboBoxItem__shouldAllowExpressions(){return false},isc.A.setReadOnlyDisplay=function isc_ComboBoxItem_setReadOnlyDisplay(_1){this.Super("setReadOnlyDisplay",arguments)});isc.B._maxIndex=isc.C+54;isc.ComboBoxItem.registerStringMethods({dataArrived:"startRow,endRow,data",getPickListFilterCriteria:""});isc.ClassFactory.defineClass("MultiComboBoxItem","CanvasItem");isc.A=isc.MultiComboBoxItem;isc.A.FLOW="flow";isc.A.HORIZONTAL="horizontal";isc.A.HORIZONTAL_REVERSE="horizontalReverse";isc.A.VERTICAL="vertical";isc.A.VERTICAL_REVERSE="verticalReverse";isc.A.$96a="$96b";isc.A.defaultHint="Enter values";isc.A=isc.MultiComboBoxItem;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.$96c=function isc_c_MultiComboBoxItem__binarySearch(_1,_2,_3,_4){if(!_3){_3=isc.MultiComboBoxItem.$96d}
if(_4===undefined){_4=true}
var _5=0,_6=_2.length,_7=_6-1;var i=0,_9;while(_5<=_7){i=Math.floor((_5+_7)/2);_9=_3(_2[i],_1);if(_9<0){_5=i+1}else if(_9>0){_7=i-1}else{if(_4){var j=i;while(j<_6&&_3(_2[j],_1)==0){if(_2[j]===_1){return j}
++j}}
while(i>0&&_3(_2[i-1],_1)==0){if(_4&&_2[i-1]===_1){return i-1}
--i}
return-i-1}}
if(_9!==undefined&&_9<0){return-(i+1)-1}else{return-i-1}},isc.A.$96d=function isc_c_MultiComboBoxItem__defaultCompareFn(_1,_2){if(_1<_2){return-1}else if(_1>_2){return 1}else{return 0}},isc.A.$96e=function isc_c_MultiComboBoxItem__transferMember(_1,_2,_3,_4,_5){var _6=_1.getMember(_2);if(_1.Class=="FlowLayout"||_3.Class=="FlowLayout"){_1.removeMember(_6,_5)}
_3.addMember(_6,_4,_5)},isc.A.$96f=function isc_c_MultiComboBoxItem__transferMembers(_1,_2,_3,_4,_5,_6){var _7=isc.MultiComboBoxItem.$96e;for(var i=0;i<_1;++i){_7(_2,_3,_4,_5+i,_6)}},isc.A.$96g=function isc_c_MultiComboBoxItem__transferMembersReverse(_1,_2,_3,_4,_5,_6){var _7=isc.MultiComboBoxItem.$96e;for(var i=0;i<_1;++i){_7(_2,_3+(_1-i-1),_4,_5+i,_6)}},isc.A.isOrderReversedForStyle=function isc_c_MultiComboBoxItem_isOrderReversedForStyle(_1){return _1==isc.MultiComboBoxItem.HORIZONTAL||_1==isc.MultiComboBoxItem.VERTICAL_REVERSE});isc.B._maxIndex=isc.C+6;isc.A=isc.MultiComboBoxItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.comboBoxDefaults={showTitle:false,width:"*",hint:isc.MultiComboBoxItem.defaultHint,showHintInField:true,completeOnTab:true,shouldSaveValue:false,editorType:"ComboBoxItem",changed:function(_1,_2){this.creator.$96p.apply(this.creator,arguments)}};isc.A.comboFormDefaults={_constructor:"DynamicForm",autoParent:"none",numCols:1,cellPadding:0,writeFormTag:false};isc.A.buttonDefaults={_constructor:"IButton",align:"left",icon:"[SKIN]actions/remove.png",iconAlign:"right",iconOrientation:"right",click:function(){this.creator.$1289(this)}};isc.A.layoutStyle=isc.MultiComboBoxItem.FLOW;isc.A.comboBoxWidth=130;isc.A.useInsertionOrder=true;isc.B.push(isc.A.sortOrder=function isc_MultiComboBoxItem_sortOrder(_1,_2){var _3=this.getDisplayFieldName(),a=_1[_3],b=_2[_3];return isc.MultiComboBoxItem.$96d(a,b)});isc.B._maxIndex=isc.C+1;isc.A=isc.MultiComboBoxItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$131u="$131v";isc.B.push(isc.A.init=function isc_MultiComboBoxItem_init(){this.multiple=true;this.fetchMissingValues=true;if(this.value==null&&this.defaultValue!=null){this.value=this.defaultValue}
this.$96h=[];this.$96i=[];this.$96j={};this.$96k=[];return this.Super("init",arguments)},isc.A.$96l=function isc_MultiComboBoxItem__storeValue(){this.storeValue(this.$96h.duplicate())},isc.A.$96m=function isc_MultiComboBoxItem__createButtonForValue(_1,_2){var _3=this.createAutoChild("button",{title:_2});this.$96j[_1]=_3;var _4=this.$96o();if(!_4){_3.setWidth(this.canvas.getWidth())}
_3.setAutoFit(_4);_3[isc.MultiComboBoxItem.$96a]=_1;return _3},isc.A.$96p=function isc_MultiComboBoxItem__comboBoxItemChanged(_1,_2){var _3=_2.getValue();var _4=_2.getPickListResultSet();if(_4!=null){var _5=this.getValueFieldName(),_6=_4.find(_5,_3);if(_6!=null){var _7=this.$953(_6);this.updateDisplayValueMap(false)}}
this.$96r(_3);this.$96l();_2.clearValue()},isc.A.$134m=function isc_MultiComboBoxItem__isComboFormFirst(){var _1=this.useInsertionOrder,_2=this.layoutStyle;return(_1&&_2==isc.MultiComboBoxItem.HORIZONTAL)||_2==isc.MultiComboBoxItem.HORIZONTAL_REVERSE||_2==isc.MultiComboBoxItem.VERTICAL||(_1&&_2==isc.MultiComboBoxItem.VERTICAL_REVERSE)},isc.A.$96s=function isc_MultiComboBoxItem__transformIndex(_1,_2,_3){var _4=this.useInsertionOrder,_5=this.layoutStyle,_6=this.$96h.length,_7;if(_4){if(_5==isc.MultiComboBoxItem.FLOW){_7=_6-_1-1;if(_3){++_7}}else{_7=_1}}else{_7=_2}
if(this.$134m()){++_7}
return _7},isc.A.$96t=function isc_MultiComboBoxItem__getSortOrder(){var _1=this.getOptionDataSource();if(_1!=null){var _2=this,_3=this.getValueFieldName();return function(_9,_10){var _4=_2.$847,_5=(_4==null?null:_4.find(_3,_9)),_6=(_4==null?null:_4.find(_3,_10));if(_5==null||_6==null){var _7=_2.getOptionDataSource(),_8=(_7==null?null:_7.getCacheData());if(_8!=null){if(_5==null)_5=_8.find(_3,_9);if(_6==null)_6=_8.find(_3,_10)}}
return _2.sortOrder.call(_2,_5,_6)}}else{return isc.MultiComboBoxItem.$96d}},isc.A.$96r=function isc_MultiComboBoxItem__insertButtonForValue(_1){var _2=this.$96t();var j=isc.MultiComboBoxItem.$96c(_1,this.$96i,_2),_4=(j>=0);if(!_4){j=-(j+1);var _5=this.getDisplayValue(_1),_6=this.$96m(_1,_5),_7=this.$96s(0,j,true);this.$96h.unshift(_1);this.$96i.addAt(_1,j);this.$96u.addMember(_6,_7)}else{var _7=this.$96s(!this.useInsertionOrder||this.$96h.indexOf(_1),j,false);var _8=this.$96u.getMember(_7);_8.animateFade(50,function(){_8.animateFade(100,null,100)},100)}},isc.A.$1289=function isc_MultiComboBoxItem__buttonClick(_1){if(this.isReadOnly()){return}
var _2=_1[isc.MultiComboBoxItem.$96a],_3=this.$96t(),j=isc.MultiComboBoxItem.$96c(_2,this.$96i,_3),k=this.$96h.indexOf(_2);delete this.$96j[_2];var _6=this.$96u;_6.hideMember(_1,{target:this,methodName:this.$131u,args:[_6,_1]});this.$955(_2);this.$96h.splice(k,1);this.$96i.splice(j,1);this.$96l()},isc.A.$131v=function isc_MultiComboBoxItem__finishedHidingButton(_1,_2){_1.removeMember(_2,true);_2.destroy()},isc.A.$96v=function isc_MultiComboBoxItem__removeAllButtons(){var _1=this.$96u,_2=this.layoutStyle,_3=this.useInsertionOrder;if(_2==isc.MultiComboBoxItem.FLOW){for(var _4=_1.tiles.length-1;_4>0;--_4){var _5=_1.tiles[_4-1];_1.removeTile(_5);_5.destroy()}}else{var _6;if(this.$134m()){_6=_1.members.slice(1)}else{_6=_1.members.slice(0,-1)}
_1.removeMembers(_6,true);_6.map("destroy")}
if(!this.isDrawn()){this.invalidateDisplayValueCache(false)}
this.$96j={};this.$96h=[];this.$96i=[];this.$96k=[]},isc.A.drawn=function isc_MultiComboBoxItem_drawn(){var _1=this.Super("drawn",arguments);if(this.$96w!==undefined){var _2=this.getDisplayValue(this.$96w);this.showValue(_2,this.$96w,this.form,this);delete this.$96w}
return _1},isc.A.showValue=function isc_MultiComboBoxItem_showValue(_1,_2,_3,_4){if(!this.isDrawn()){this.$96w=_2}else if(!_2){this.$96v()}else if(isc.isAn.Array(_2)){this.$96v();for(var i=0,_6=_2.length;i<_6;++i){var _7=_2[i];if(this.$959(_7)){this.$96r(_7,_1[i])}else{this.$96k.push(_7)}}}},isc.A.$959=function isc_MultiComboBoxItem__isValueInCache(_1){return(!this.optionDataSource||(this.$17b(_1,true)!==null))},isc.A.setValueMap=function isc_MultiComboBoxItem_setValueMap(_1){this.Super("setValueMap",arguments);this.comboBox.setValueMap.apply(this.comboBox,arguments)},isc.A.updateValueMap=function isc_MultiComboBoxItem_updateValueMap(_1){var _2=this.$96t(),_3=this.$96o(),_4=this.useInsertionOrder,_5=this.$96h.length;var _6=this.canvas.getWidth();var _7=[];for(var i=0;i<_5;++i){var _9=this.$96h[i],_10=this.getDisplayValue(_9),j=isc.MultiComboBoxItem.$96c(_9,_7,_2),_12=this.$96j[_9];_12.setTitle(_10);if(!_3){_12.setWidth(_6)}
_12.setAutoFit(_3);_7.addAt(_9,-(j+1))}
var _13=this.$96i;this.$96i=_7;if(!_4){var _14=this.$96u;for(var i=0;i<_5;++i){var _9=_13[i],j=_7.indexOf(_9);if(i!=j){_14.reorderMember(this.$96s(undefined,i,false),this.$96s(undefined,j,false))}}}
if(!this.$96k.isEmpty()){var _15=this.$96k.length,_16=0;for(var i=0;i<_15;++i){var j=i-_16,_9=this.$96k[j];if(this.$959(_9)){var _10=this.getDisplayValue(_9);this.$96r(_9,_10);this.$96k.splice(j,1);++_16}}}},isc.A.setLayoutStyle=function isc_MultiComboBoxItem_setLayoutStyle(_1){var _2=this.layoutStyle;if(!_1||(_2==_1)){return}
var _3=isc.MultiComboBoxItem.FLOW,_4=isc.MultiComboBoxItem.HORIZONTAL,_5=isc.MultiComboBoxItem.HORIZONTAL_REVERSE,_6=isc.MultiComboBoxItem.VERTICAL,_7=isc.MultiComboBoxItem.VERTICAL_REVERSE,_8=isc.MultiComboBoxItem.$96e,_9=isc.MultiComboBoxItem.$96f,_10=isc.MultiComboBoxItem.$96g,_11=this.useInsertionOrder,_12=this.comboBoxWidth,_13=true,_14=this.$96h.length,_15=_2==_4||_2==_7,_16=isc.MultiComboBoxItem.isOrderReversedForStyle(_1),_17=(_11?_10:_9);if(_1==_3){if(!isc.FlowLayout){isc.Log.logWarn("The ISC_Grids module must be loaded to use layoutStyle:\"flow\".  The MultiComboBoxItem will continue to use the \""+_2+"\" layout style.");return}
var _18=this.$96x(),_19=_18.animateTileChange;_18.animateTileChange=false;_8(this.$96u,(!_11&&_15?_14:0),_18,0,_13);_17(_14,this.$96u,0,_18,0,_13);this.canvas.removeMember(0,_13);this.$96u.destroy();this.$96u=_18;this.canvas.addMember(_18,0,_13)}else if(_1==_4||_1==_5||_1==_6||_1==_7)
{var _20=(_1==_4||_1==_5),_21=(_2==_4||_2==_5),_22=(_20?this.$96y:this.$96z);if(_2==_3||(_20!=_21))
{var _18=_22.call(this);if(_2==_3){this.$96u.animateTileChange=false;_8(this.$96u,_14,_18,0,_13);_17(_14,this.$96u,0,_18,(!_11&&_16?0:1),_13)}else if(_11||(_15==_16)){_9(_14+1,this.$96u,0,_18,0,_13)}else{_8(this.$96u,(_15?_14:0),_18,0,_13);_9(_14,this.$96u,0,_18,(_15?1:0),_13)}
this.canvas.removeMember(this.$96u,_13);this.$96u.destroy();this.$96u=_18;this.canvas.addMember(_18,0,_13);if(_11&&_16){this.$96u.reverseOrder=true;this.$96u.reflow()}}else if(_11){if(_16!=_15){this.$96u.reverseOrder=_16;this.$96u.reflow()}}else{if(!_16){_8(this.$96u,_14,this.$96u,0,_13)}else{_8(this.$96u,0,this.$96u,_14,_13)}}}else{return}
this.layoutStyle=_1;this.comboForm.setWidth(_1==_6||_1==_7?"100%":_12);this.$960(this.$96o(_1));if(_19!==undefined){_18.animateTileChange=_19}},isc.A.destroy=function isc_MultiComboBoxItem_destroy(){if(this.comboForm)this.comboForm.destroy();if(this.$96u)this.$96u.destroy();this.Super("destroy",arguments)},isc.A.$960=function isc_MultiComboBoxItem__setAutoFitButtons(_1){var i=(this.layoutStyle==isc.MultiComboBoxItem.FLOW||(!this.useInsertionOrder&&(this.layoutStyle==isc.MultiComboBoxItem.HORIZONTAL||this.layoutStyle==isc.MultiComboBoxItem.VERTICAL_REVERSE))?0:1),_3=this.$96h.length,_4=i+_3,_5=this.canvas.getWidth();for(;i<_4;++i){var _6=this.$96u.getMember(i);if(!_1){_6.setWidth(_5)}
_6.setAutoFit(_1)}},isc.A.setAutoFitButtons=function isc_MultiComboBoxItem_setAutoFitButtons(_1){var _2=this.$96o(),_3=this.$96o(null,_1);this.autoFitButtons=_1;if(_2!=_3){this.$960(_3)}},isc.A.$18y=function isc_MultiComboBoxItem__createCanvas(){var _1=this;if(this.layoutStyle==isc.MultiComboBoxItem.FLOW&&!isc.FlowLayout){isc.Log.logWarn("The ISC_Grids module must be loaded to use layoutStyle:\"flow\".  The MultiComboBoxItem will default to using the \""+isc.MultiComboBoxItem.VERTICAL_REVERSE+"\" layout style.");this.layoutStyle=isc.MultiComboBoxItem.VERTICAL_REVERSE}
var _2;if(this.layoutStyle==isc.MultiComboBoxItem.FLOW||this.layoutStyle==isc.MultiComboBoxItem.HORIZONTAL||this.layoutStyle==isc.MultiComboBoxItem.HORIZONTAL_REVERSE)
{_2=this.comboBoxWidth}else{_2="100%"}
var _3=isc.addProperties({ID:this.ID+isc.$ag+"comboBox"},this.comboBoxDefaults,this.comboBoxProperties,{creator:this,optionDataSource:this.optionDataSource,valueMap:this.valueMap,displayField:this.displayField,valueField:this.valueField,addUnknownValues:false});var _4=(this.autoFetchData!==undefined?this.autoFetchData:_3.autoFetchData);_3.autoFetchData=_4;var _5=this.addAutoChild("comboForm",{width:_2,fields:[_3]});var _6=this.comboBox=_5.getItem(0);var _7=isc.addProperties({},this.canvasProperties,{autoDraw:false,height:1});var _8=isc.MultiComboBoxItem.isOrderReversedForStyle(this.layoutStyle);if(this.layoutStyle==isc.MultiComboBoxItem.HORIZONTAL||this.layoutStyle==isc.MultiComboBoxItem.HORIZONTAL_REVERSE){this.$96u=this.$96y();this.$96u.reverseOrder=_8}else if(this.layoutStyle==isc.MultiComboBoxItem.VERTICAL||this.layoutStyle==isc.MultiComboBoxItem.VERTICAL_REVERSE)
{this.$96u=this.$96z();this.$96u.reverseOrder=_8}else if(this.layoutStyle==isc.MultiComboBoxItem.FLOW){this.$96u=this.$96x()}
this.$96u.addMember(_5);_7.members=[this.$96u];this.canvas=isc.HLayout.create(_7);this.Super("$18y",arguments)},isc.A.readOnlyDisplayChanged=function isc_MultiComboBoxItem_readOnlyDisplayChanged(_1){if(this.comboForm){this.comboForm.readOnlyTextBoxStyle=this.getReadOnlyTextBoxStyle();this.comboForm.setReadOnlyDisplay(_1)}},isc.A.canEditChanged=function isc_MultiComboBoxItem_canEditChanged(_1){if(this.comboForm)this.comboForm.setCanEdit(_1);var _2=isc.getValues(this.$96j);if(_2&&_2.length>0){_2.map("setCanEdit",_1)}},isc.A.$96o=function isc_MultiComboBoxItem__getAutoFitButtons(_1,_2){var _2=_2||this.autoFitButtons,_1=_1||this.layoutStyle;if(_1==isc.MultiComboBoxItem.HORIZONTAL||_1==isc.MultiComboBoxItem.HORIZONTAL_REVERSE)
{return true}else if(this.autoFitButtons!=null){return this.autoFitButtons}else if(_1==isc.MultiComboBoxItem.FLOW){return true}else{return false}},isc.A.$96y=function isc_MultiComboBoxItem__createHStack(){return isc.HStack.create(this.valueLayoutDefaults,this.valueLayoutProperties,{autoDraw:false,height:1,members:[],animateMembers:true,animateMemberTime:100})},isc.A.$96z=function isc_MultiComboBoxItem__createVStack(){return isc.VStack.create(this.valueLayoutDefaults,this.valueLayoutProperties,{autoDraw:false,height:1,members:[],animateMembers:true,animateMemberTime:100})},isc.A.$96x=function isc_MultiComboBoxItem__createFlowLayout(){return isc.FlowLayout.create(this.valueLayoutDefaults,this.valueLayoutProperties,{autoDraw:false,tiles:[],tileMargin:0,layoutMargin:0,height:1,animateTileChange:false,overflow:"visible",getMember:function(_6){return this.getTile(_6)},getMemberNumber:function(_6){if(isc.isA.Number(_6)){return _6}
var _1=this.getLength();for(var i=0;i<_1;++i){if(_6===this.getTile(i)){return i}}
return-1},getMembers:function(){var _3=[],_4=this.getLength();for(var i=0;i<_4;++i){var _5=this.getTile(i);_3.add(_5)}
return _3},addMember:function(_6,_7){this.addTile(_6,_7);this.layoutTiles()},removeMember:function(_6){this.removeTile(_6)},hideMember:function(_6,_7){_6.hide();this.fireCallback(_7)},reorderMember:function(_6,_7){if(_6!=_7){var _5=this.getTile(_6);this.removeMember(_5);this.addMember(_5,_7)}}})});isc.B._maxIndex=isc.C+27;isc.ClassFactory.defineClass("FileItem","CanvasItem");isc.A=isc.FileItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.shouldSaveValue=true;isc.A.$105m=true;isc.A.multiple=true;isc.A.editFormConstructor="DynamicForm";isc.A.editFormDefaults={autoDraw:false,_redrawWithParent:false,redrawOnResize:false,canSubmit:true,getSaveOperationType:function(){if(this.targetItem&&this.targetItem.form)
return this.targetItem.form.getSaveOperationType();return this.Super("getSaveOperationType",arguments)}};isc.A.uploadItemConstructor=isc.TUploadItem||isc.UploadItem;isc.A.displayFormConstructor="DynamicForm";isc.A.displayFormDefaults={autoDraw:false,_redrawWithParent:false,redrawOnResize:false,canSubmit:true};isc.A.displayItemConstructor="StaticTextItem";isc.A.displayCanvasConstructor="Canvas";isc.A.$12f="blob";isc.B.push(isc.A.$18y=function isc_FileItem__createCanvas(){if(!isc.isA.Canvas(this.canvas)){this.$861=this.isReadOnly();this.canvas=(this.$861?this.$862():this.$863())}
this.containerWidget.addChild(this.canvas)},isc.A.$862=function isc_FileItem__createReadOnlyCanvas(){var _1={},_2;if(this.type==this.$12f){_1=isc.addProperties({width:"100%",height:10},this.displayFormDefaults,this.displayFormProperties,{action:this.action,targetItem:this,items:[isc.addProperties({},this.displayItemDefaults,this.displayItemProperties,{type:"text",editorType:this.displayItemConstructor,width:this.width,height:"*",name:this.getFieldName(),showTitle:false})]});var _3=isc.isA.Class(this.displayFormConstructor)?this.displayFormConstructor:isc[this.displayFormConstructor];_2=this.displayForm=_3.create(_1)}else{_1=isc.addProperties({width:"100%",height:10},this.displayCanvasDefaults,this.displayCanvasProperties);var _3=isc.isA.Class(this.displayCanvasConstructor)?this.displayCanvasConstructor:isc[this.displayCanvasConstructor];_2=this.displayCanvas=_3.create(_1)}
return _2},isc.A.$863=function isc_FileItem__createEditableCanvas(){var _1=isc.addProperties({},this.editFormDefaults,this.editFormProperties,{action:this.action,targetItem:this,addOperation:this.form.addOperation,updateOperation:this.form.updateOperation,removeOperation:this.form.removeOperation,fetchOperation:this.form.fetchOperation,items:[isc.addProperties({},this.uploadItemDefaults,this.uploadItemProperties,{name:this.getFieldName(),showTitle:false,targetItem:this,editorType:this.uploadItemConstructor,width:this.width,height:this.height,multiple:this.multiple,accept:this.accept,getElementName:function(){return this.getFieldName()},changed:function(_4,_5,_6){this.targetItem.storeValue(_6)},$17u:function(){var _2=this.targetItem;return _2.$17u.apply(_2,arguments)}}),{name:"_transaction",type:"HiddenItem"}]});var _3=isc.isA.Class(this.editFormConstructor)?this.editFormConstructor:isc[this.editFormConstructor];this.editForm=_3.create(_1);return this.editForm},isc.A.setElementReadOnly=function isc_FileItem_setElementReadOnly(_1){this.redraw()},isc.A.redraw=function isc_FileItem_redraw(){if(this.$861!=this.isReadOnly()){var _1=this.getValue();if(this.canvas){delete this.canvas.canvasItem;this.canvas.destroy(true)}
this.$861=this.isReadOnly();this.setCanvas(this.$861?this.$862():this.$863());this.setValue(_1)}
this.Super("redraw",arguments)},isc.A.setValue=function isc_FileItem_setValue(_1){if(this.isReadOnly()){var _2=this.form,_3=_2.getValues();if(this.type=="blob"){this.canvas.items[0].setValue(_1)}else{this.setCanvasContent(_1)}
return this.Super("setValue",arguments)}else{if(_1==null||isc.isA.emptyString(_1)){this.canvas.items[0].setValue(_1);return this.Super("setValue",arguments)}
return this.canvas.items[0].setValue(_1)}},isc.A.setCanvasContent=function isc_FileItem_setCanvasContent(_1){var _2=this.getFormRecord();if((this.type=="imageFile"||this.type=="viewFile")&&this.showFileInline!=false){this.canvas.setHeight("*");this.canvas.setWidth("*");this.canvas.setContents(this.getImageHTML()||"&nbsp;")}else{if(this.showFileInline==true){this.logWarn("setValue(): Unsupported field-type for showFileInline: "+this.type)}
this.canvas.setHeight(20);this.canvas.setWidth("*");this.canvas.setContents(this.getViewDownloadHTML(_1,_2)||"&nbsp;")}},isc.A.setWidth=function isc_FileItem_setWidth(_1){if(this.canvas&&!this.isReadOnly()){this.canvas.items[0].setWidth(_1)}
this.Super("setWidth",arguments)},isc.A.setHeight=function isc_FileItem_setHeight(_1){if(this.canvas&&!this.isReadOnly()){this.canvas.items[0].setHeight(_1)}
this.Super("setHeight",arguments)},isc.A.getViewDownloadHTML=function isc_FileItem_getViewDownloadHTML(_1,_2){if(_2==null)return null;var _3=this.form,_4=_3.getDataSource(),_5=_4?_4.getField(this.name):null,_6=(_4?_4.getFilenameField(this.name):null)||this.name+"_filename",_7=_2[_6],_8=_4?_4.getPrimaryKeyFieldNames():null,_9=(_8==null);if(_5&&!_5.filenameSuppressed&&(_7==null||isc.isAn.emptyString(_7))){return this.emptyCellValue}
if(_8){var _10=_3.getValues();for(var i=0;i<_8.length;i++){var _12=_8[i];if(isc.DynamicForm.$70o(_12,this,_10,_3,true)==null){_9=true;break}}}
if(_9){return this.emptyCellValue}
return"<nobr>"+this.$137i()+"&nbsp;"+this.$137j()+(_7?"&nbsp;"+_7:"")+"</nobr>"},isc.A.$137i=function isc_FileItem__getViewIconSrc(){return isc.Canvas.imgHTML({src:this.viewIconSrc,width:16,height:16,extraCSSText:"cursor:"+isc.Canvas.HAND,extraStuff:" onclick='"+this.getID()+".viewFile()'"})},isc.A.$137j=function isc_FileItem__getDownloadIconSrc(){return isc.Canvas.imgHTML({src:this.downloadIconSrc,width:16,height:16,extraCSSText:"cursor:"+isc.Canvas.HAND,extraStuff:" onclick='"+this.getID()+".downloadFile()'"})},isc.A.getFormDataSource=function isc_FileItem_getFormDataSource(){var _1=this.form.getDataSource()||(this.form.valuesManager?this.form.valuesManager.getDataSource():null);return _1},isc.A.getFormRecord=function isc_FileItem_getFormRecord(){var _1=this.form.valuesManager?this.form.valuesManager.getValues():null;if(!_1||isc.isAn.emptyObject(_1))_1=this.form.getValues();return _1},isc.A.getImageHTML=function isc_FileItem_getImageHTML(){var _1=this.getFormRecord();if(!_1||isc.isAn.emptyObject(_1))return;var _2=this.form.getField(this.name),_3=this.name+"$68c",_4=_1?_1[_3]:null,_5=this.getFormDataSource();if(_4==null&&_5){var _6=isc.Canvas.getFieldImageDimensions(_2,_1);_4=_1[_3]=isc.Canvas.imgHTML(_5.streamFile(_1,_2.name),_6.width,_6.height)}
return _4},isc.A.viewFile=function isc_FileItem_viewFile(){isc.DS.get(this.getFormDataSource()).viewFile(this.getFormRecord(),this.name)},isc.A.downloadFile=function isc_FileItem_downloadFile(){isc.DS.get(this.getFormDataSource()).downloadFile(this.getFormRecord(),this.name)},isc.A.$85m=function isc_FileItem__shouldAllowExpressions(){return false});isc.B._maxIndex=isc.C+18;if(isc.ListGrid){isc.ClassFactory.defineClass("RelationItem","CanvasItem");isc.A=isc.RelationItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.canvasConstructor="ListGrid";isc.A.canvasDefaults={canEdit:true};isc.A.pickerConstructor="RelationPicker";isc.A.showEditButton=true;isc.A.editButtonDefaults={click:"item.showPicker(item.showPickerModal(), icon)",prompt:"Edit new/selected item"};isc.A.showRemoveButton=true;isc.A.removeButtonDefaults={src:"[SKIN]DynamicForm/Remove_icon.gif",click:"item.removeSelectedData()",prompt:"Remove selected item"};isc.A.canEditWithNoMasterRecord=false;isc.B.push(isc.A.showPickerModal=function isc_RelationItem_showPickerModal(){return this.form&&!this.form.saveOperationIsAdd()});isc.B._maxIndex=isc.C+1;isc.A=isc.RelationItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.init=function isc_RelationItem_init(){this.hasMasterRecord=false;this.Super("init",arguments);if(this.showEditButton)this.editButton=this.addIcon(this.editButtonDefaults);if(this.showRemoveButton)this.removeButton=this.addIcon(this.removeButtonDefaults)},isc.A.getPickerData=function isc_RelationItem_getPickerData(){var _1=this.canvas.getSelectedRecord();if(_1)return _1;return this.getDataSource().getForeignKeysByRelation(this.form.getValues(),this.form.dataSource)},isc.A.showPicker=function isc_RelationItem_showPicker(_1,_2,_3,_4){if(_3==null)_3={};_3.dataSource=this.dataSource;this.Super("showPicker",[_1,_2,_3,_4],arguments);var _5={};if(!this.form.saveOperationIsAdd())
_5=this.getDataSource().getForeignKeysByRelation(this.form.getValues(),this.form.dataSource);this.picker.setForeignKeyValues(_5)},isc.A.getValue=function isc_RelationItem_getValue(){return},isc.A.removeSelectedData=function isc_RelationItem_removeSelectedData(){this.canvas.removeSelectedData()},isc.A.setValue=function isc_RelationItem_setValue(){this.delayCall("filterRelation")},isc.A.filterRelation=function isc_RelationItem_filterRelation(){var _1=this.form.getValues();var _2=this.isDisabled();if(this.form.saveOperationIsAdd()){this.canvas.setData([]);this.hasMasterRecord=false}else{var _3=this.getDataSource();if(_3){this.canvas.filterData(_3.getForeignKeysByRelation(_1,this.form.dataSource));this.hasMasterRecord=true}}
if(_2!=this.isDisabled())this.updateDisabled();if(this.picker)this.picker.clearData()},isc.A.isDisabled=function isc_RelationItem_isDisabled(){var _1=this.Super("isDisabled",arguments);if(_1)return true;if(this.canEditWithNoMasterRecord)return false;return!!this.hasMasterRecord},isc.A.$85m=function isc_RelationItem__shouldAllowExpressions(){return false});isc.B._maxIndex=isc.C+9;isc.defineClass("RelationPicker","VLayout");isc.A=isc.RelationPicker.getPrototype();isc.A.className="dialogBackground";isc.A=isc.RelationPicker.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.creatorName="picker";isc.B.push(isc.A.initWidget=function isc_RelationPicker_initWidget(){this.Super("initWidget",arguments);this.addAutoChild("editor",{dataSource:this.dataSource},"DynamicForm");this.addAutoChild("toolbar",{membersMargin:2},"HLayout");this.addAutoChild("saveButton",{title:"Save",click:"this.picker.editor.saveData(this.picker.getID()+'.hide()')"},"AutoFitButton",this.toolbar);this.addAutoChild("clearButton",{title:"Clear",click:"this.picker.clearData();"},"AutoFitButton",this.toolbar);this.addAutoChild("cancelButton",{title:"Cancel",click:"this.picker.hide();this.picker.clearData()"},"AutoFitButton",this.toolbar)},isc.A.hide=function isc_RelationPicker_hide(){this.Super("hide",arguments);this.hideClickMask()},isc.A.setData=function isc_RelationPicker_setData(_1){this.editor.setData(_1)},isc.A.getData=function isc_RelationPicker_getData(){return this.editor.getValues()},isc.A.clearData=function isc_RelationPicker_clearData(){this.editor.clearValues();this.setData(this.foreignKeyValues)},isc.A.dataChanged=function isc_RelationPicker_dataChanged(){},isc.A.setForeignKeyValues=function isc_RelationPicker_setForeignKeyValues(_1){this.foreignKeyValues=_1});isc.B._maxIndex=isc.C+7;}
if(isc.ListGrid){isc.ClassFactory.defineClass("MultiFileItem","RelationItem");isc.A=isc.MultiFileItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.pickerConstructor="MultiFilePicker";isc.A.canvasDefaults={showHeader:false,canHover:true,cellHoverHTML:function(_1,_2,_3){if(this.canvasItem.form.saveOperationIsAdd()){var _4=_1[this.getFieldName(_3)];if(_4&&this.displayShortName){_4=_4.replace(/^.*[\\\/]/,isc.emptyString)}
return _4}},getCellValue:function(_1,_2,_3){var _1=this.Super("getCellValue",arguments);if(this.canvasItem.form.saveOperationIsAdd()){if(!this.displayShortName||!_1)return _1;_1=_1.replace(/.*(\\|\/)/g,isc.emptyString)}
return _1}};isc.A.emptyMessage="Click icon to add...";isc.A.editButtonPrompt="Add files";isc.A.removeButtonPrompt="Remove selected files";isc.A.pickerUploadButtonInitialTitle="OK";isc.A.pickerUploadButtonTitle="Save";isc.A.pickerCancelButtonTitle="Cancel";isc.A.pickerAddAnotherFileButtonTitle="<u>Add&nbsp;another</u>";isc.A.pickerUploadProgressLabel="Saving ${fileName} ${formattedFileSize}";isc.A.displayShortName=true;isc.A.iconWidth=16;isc.A.iconHeight=16;isc.A.editButtonDefaults=isc.addProperties({},isc.RelationItem.getInstanceProperty('editButtonDefaults'),{src:"[SKIN]MultiUploadItem/icon_add_files.png",showOver:false});isc.A.removeButtonDefaults=isc.addProperties({},isc.RelationItem.getInstanceProperty('removeButtonDefaults'),{src:"[SKIN]MultiUploadItem/icon_remove_files.png",showOver:false});isc.A.canEditWithNoMasterRecord=true;isc.B.push(isc.A.getDynamicDefaults=function isc_MultiFileItem_getDynamicDefaults(_1){if(_1=="canvas"){var _2={};if(this.emptyMessage!=null)_2.emptyMessage=this.emptyMessage;if(this.displayShortName!=null)_2.displayShortName=this.displayShortName;return _2}
return this.Super("getDynamicDefaults",arguments)},isc.A.showPickerModal=function isc_MultiFileItem_showPickerModal(){return true});isc.B._maxIndex=isc.C+2;isc.A=isc.MultiFileItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.init=function isc_MultiFileItem_init(){this.editButtonDefaults=isc.addDefaults({prompt:this.editButtonPrompt},this.editButtonDefaults);this.removeButtonDefaults=isc.addDefaults({prompt:this.removeButtonPrompt},this.removeButtonDefaults);this.pickerProperties=isc.addProperties({},this.pickerProperties,{uploadWithoutPKButtonName:this.pickerUploadButtonInitialTitle,uploadWithPKButtonName:this.pickerUploadButtonTitle,cancelButtonName:this.pickerCancelButtonTitle,addAnotherFileButtonProperties:{contents:this.pickerAddAnotherFileButtonTitle},progressMeterProperties:{progressLabelProperties:{dynamicContents:false,dynamicContentVars:null,contents:null,getContents:function(){var _1=this.creator,_2=_1.creator.creator,_3=_2.pickerUploadProgressLabel,_4=_3.evalDynamicString(_2,{fileName:_1.fileName,formattedFileSize:_1.getFormattedFileSize()});return"<b><nobr>"+_4+"</nobr></b>"},show:function(){this.setContents(this.getContents());this.Super("show",arguments)}}}});return this.Super("init",arguments)},isc.A.removeSelectedData=function isc_MultiFileItem_removeSelectedData(){if(!this.form.saveOperationIsAdd())return this.Super("removeSelectedData",arguments);var _1=this.canvas.getSelection();for(var i=0;i<_1.length;i++)this.picker.removeUploadField(_1[i]._form,true)},isc.A.formSaved=function isc_MultiFileItem_formSaved(_1,_2,_3){if(this.picker){this.showPicker(true,this.editButton);this.picker.setForeignKeyValues(this.getDataSource().getForeignKeysByRelation(_3,this.form.dataSource));this.picker.saveData(this.getID()+".saveDataCallback()");return false}else{this.saveDataCallback()}},isc.A.saveDataCallback=function isc_MultiFileItem_saveDataCallback(){if(this.picker)this.picker.hide();this.form.formSavedComplete();if(this.picker&&isc.ResultSet&&!isc.isA.ResultSet(this.canvas.data)){this.canvas.setData([]);this.canvas.fetchData(this.picker.foreignKeyValues)}},isc.A.pickerDataChanged=function isc_MultiFileItem_pickerDataChanged(_1){if(!this.form.saveOperationIsAdd())return;this.canvas.setData(this.picker.getData())},isc.A.destroy=function isc_MultiFileItem_destroy(){if(this.picker)this.picker.destroy();this.Super("destroy",arguments)});isc.B._maxIndex=isc.C+6;isc.defineClass("MultiFilePicker","VStack");isc.A=isc.MultiFilePicker.getPrototype();isc.A.height=1;isc.A.layoutMargin=10;isc.A.styleName="windowBackground";isc.A.minUploadFields=1;isc.A.minFileSizeForProgressBar=204800;isc.A.progressCheckFrequency=1000;isc.A.progressMeterConstructor="MultiFileProgressMeter";isc.A.uploadLayoutConstructor="VStack";isc.A.uploadWithPKButtonName="Save";isc.A.uploadWithoutPKButtonName="OK";isc.A.cancelButtonName="Cancel";isc.A.showUploadRemoveButton=true;isc.A.uploadWithoutPK=false;isc.A=isc.MultiFilePicker.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.addAnotherFileButtonDefaults={canFocus:true,contents:"<u>Add&nbsp;another</u>"};isc.A.creatorName="picker";isc.B.push(isc.A.initWidget=function isc_MultiFilePicker_initWidget(){this.Super("initWidget",arguments);this.addAutoChild("uploadLayout",{height:1});this.addAutoChild("addAnotherFileButton",{width:75,height:20,align:"left",cursor:isc.Canvas.HAND,icon:"[SKIN]MultiUploadItem/icon_add_files.png",click:"this.picker.addUploadField()"},"Label");this.addAutoChild("toolbar",{width:1,height:1,membersMargin:10,layoutMargin:10,layoutAlign:"right"},"HStack");this.addAutoChild("saveButton",{title:this.hasKeys()?this.uploadWithPKButtonName:this.uploadWithoutPKButtonName,width:80,updateTitle:function(){var _1=this.parentElement.picker;var _2=_1.hasKeys()?_1.uploadWithPKButtonName:_1.uploadWithoutPKButtonName;if(_2!=this.title)this.setTitle(_2)},click:function(){var _1=this.parentElement.picker;if(!_1.hasKeys()&&!_1.uploadWithoutPK){_1.hide();_1.dataChanged()}else{_1.saveData()}},observes:[{source:this,message:"setForeignKeyValues",action:"observer.updateTitle()"}]},"IButton",this.toolbar);this.addAutoChild("cancelButton",{title:this.cancelButtonName,width:80,click:function(){this.picker.hide();if(this.picker.creator.form.saveOperationIsAdd())this.picker.revertData()}},"IButton",this.toolbar);this.clearData()},isc.A.hasKeys=function isc_MultiFilePicker_hasKeys(){return(this.foreignKeyValues&&!isc.isAn.emptyObject(this.foreignKeyValues))},isc.A.setForeignKeyValues=function isc_MultiFilePicker_setForeignKeyValues(_1){this.foreignKeyValues=_1},isc.A.revertData=function isc_MultiFilePicker_revertData(){this.clearData(true)},isc.A.clearData=function isc_MultiFilePicker_clearData(_1){var _2=this.getForms(),_3=0;for(var i=_2.length-1;i>=0;i--){var _5=false;if(_1)_5=(_2[i].newlyAdded==true);else _5=true;if(isc.isAn.emptyObject(_2[i].getValues()))_5=true;if(_5)this.removeUploadField(_2[i]);else _3++}
for(var i=_3;i<this.minUploadFields;i++)this.addUploadField()},isc.A.addUploadField=function isc_MultiFilePicker_addUploadField(){var _1;if(this.dataSource==null){isc.logWarn("A datasource must be defined on a MultiFileItem ("+this.id+") or it will both not function and elements will not render properly.")}else{var _2=isc.DataSource.get(this.dataSource),_3=_2.getFields();for(var _4 in _3){if(_3[_4].type=="binary"||_3[_4].type=="imageFile"){_1=_4;break}}
if(_1==null){isc.logWarn("The datasource defined on a MultiFileItem ("+this.id+") must define a binary field")}}
var _5=this.createAutoChild("uploadForm",{dataSource:this.dataSource,cellPadding:0,numCols:2,colWidths:['*','*'],width:250,newlyAdded:true,elementChanged:function(){this.Super("elementChanged",arguments);this.picker.dataChanged()},fields:[{name:_1,multiple:false}]},isc.DynamicForm);var _6=this.createAutoChild("uploadFormLayout",{members:[_5],height:21},isc.HLayout);this.uploadLayout.addMember(_6);if(this.showUploadRemoveButton){var _7=this.createAutoChild("uploadRemoveButton",{form:_5,picker:this,contents:isc.emptyString,cursor:isc.Canvas.HAND,icon:"[SKIN]MultiUploadItem/icon_remove_files.png",click:"this.picker.removeUploadField(this.form, true)",iconSpacing:6,width:22,height:20},isc.Label);_6.addMember(_7,0)}
if(this.maxUploadFields&&this.maxUploadFields<=this.uploadLayout.getMembers().length)
this.addAnotherFileButton.hide()},isc.A.removeUploadField=function isc_MultiFilePicker_removeUploadField(_1,_2){if(_1.$203){isc.rpc.cancelQueue(_1.$203);this.transactionNum=null;if(this.progressMeter)this.progressMeter.hide()}
if(_1.parentElement)_1.parentElement.destroy();if(_2&&this.uploadLayout.getMembers().length<this.minUploadFields){this.addUploadField()}
if(this.maxUploadFields&&this.maxUploadFields>this.uploadLayout.getMembers().length){this.addAnotherFileButton.show()}
this.dataChanged()},isc.A.getForms=function isc_MultiFilePicker_getForms(){return this.uploadLayout.getMembers().map("getMember",this.showUploadRemoveButton?1:0)},isc.A.dataChanged=function isc_MultiFilePicker_dataChanged(){},isc.A.show=function isc_MultiFilePicker_show(){var _1=this.getForms();if(_1)_1.setProperty("newlyAdded",false);this.Super("show",arguments)},isc.A.hide=function isc_MultiFilePicker_hide(){this.Super("hide",arguments);this.hideClickMask()},isc.A.getData=function isc_MultiFilePicker_getData(){var _1=[];var _2=this.getForms();for(var i=0;i<_2.length;i++){var _4=_2[i];if(!_4)continue;var _5=_4.getValues();if(isc.isAn.emptyObject(_5))continue;_5._form=_4;_1[_1.length]=_5}
return _1},isc.A.saveData=function isc_MultiFilePicker_saveData(_1){if(!_1)_1=this.saveCallback;if(!_1)_1=this.getID()+".hide()";this.saveCallback=_1;var _2=this.getForms();this.saveButton.setTitle(this.uploadWithPKButtonName);var _3;var _4;while(_2.length>0){_3=_2[0];_4=_3.getFields()[0].getValue();if(!_4){this.removeUploadField(_3);_2.remove(_3)}
else break}
if(_2.length==0){if(this.progressMeter){this.progressMeter.hide()}
this.transactionNum=null;delete this.saveCallback;this.fireCallback(_1);this.clearData();return}
if(!_3.validate())return;if(!this.progressMeter){this.progressMeter=this.createAutoChild("progressMeter",{progressCheckFrequency:this.progressCheckFrequency});this.addMember(this.progressMeter,0)}
_4=_4.replace(/.*(\\|\/)/g,isc.emptyString);this.progressMeter.setFileName(_4);this.progressMeter.hideProgressBar();this.progressMeter.show();if(this.hasKeys()){for(var _5 in this.foreignKeyValues)_3.setValue(_5,this.foreignKeyValues[_5])}
var _6=_3.saveData(this.getID()+".saveDataCallback(dsRequest, dsResponse, data)",{params:{formID:_3.getID()},willHandleError:true,form:_3,showPrompt:false,saveDataCallback:_1,timeout:0});this.transactionNum=_6.transactionNum;_3.$203=this.transactionNum;this.progressCheck(_3.getID(),this.transactionNum)},isc.A.saveDataCallback=function isc_MultiFilePicker_saveDataCallback(_1,_2,_3){var _4=_1.form;if(_2.status!=isc.RPCResponse.STATUS_SUCCESS){this.progressMeter.hide();this.transactionNum=null;if(_2.status==isc.RPCResponse.STATUS_VALIDATION_ERROR){_4.setErrors(_2.errors,true)}else{isc.warn(_3)}
return}
_4.$203=null;this.removeUploadField(_4);this.saveData(_1.saveDataCallback);if(this.callingFormItem.fileUploaded){this.callingFormItem.fileUploaded(_1,_2)}},isc.A.progressCheck=function isc_MultiFilePicker_progressCheck(_1,_2){this.lastProgressCheckTime=new Date().getTime();isc.DMI.callBuiltin({methodName:"uploadProgressCheck",callback:this.getID()+".progressCallback(rpcRequest, rpcResponse, data, "+_2+")",arguments:_1,requestParams:{willHandleError:true,showPrompt:false,formID:_1}})},isc.A.progressCallback=function isc_MultiFilePicker_progressCallback(_1,_2,_3,_4){var _5=_1.formID;var _6=window[_5];if(!_6||this.transactionNum!==_4)return;if(_2.status!=isc.RPCResponse.STATUS_SUCCESS)this.progressCheck(_5);if(_3.errors){isc.rpc.cancelQueue(this.transactionNum);_6.setErrors(_3.errors,true);this.saveButton.show();this.transactionNum=null;this.progressMeter.hide();return}
this.progressMeter.setFileSize(_3.totalBytes);if(_3.totalBytes<this.minFileSizeForProgressBar){this.progressMeter.hideProgressBar();return}
this.progressMeter.setBytesReceived(_3.bytesSoFar);this.progressMeter.showProgressBar();this.progressMeter.setPercentDone(100*_3.bytesSoFar/_3.totalBytes);var _7=this.progressCheckFrequency-(new Date().getTime()-this.lastProgressCheckTime);if(_7<0)_7=0;this.delayCall("progressCheck",[_5,_4],_7)});isc.B._maxIndex=isc.C+16;isc.defineClass("MultiFileProgressMeter","VStack");isc.A=isc.MultiFileProgressMeter;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.formatBytes=function isc_c_MultiFileProgressMeter_formatBytes(_1){var _2;if(_1<1024){_1=Math.round(_1/1024);_2="B"}else if(_1<(1024*1024)){_1=Math.round(_1/1024);_2="KB"}else{_1=Math.round(_1/(1024*1024)*100)/100;_2="MB"}
return _1+"&nbsp;"+_2});isc.B._maxIndex=isc.C+1;isc.A=isc.MultiFileProgressMeter.getPrototype();isc.A.height=50;isc.A=isc.MultiFileProgressMeter.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.initWidget=function isc_MultiFileProgressMeter_initWidget(){this.Super("initWidget",arguments);this.progressLabelProperties=isc.addDefaults(this.progressLabelProperties,{dynamicContentsVars:{progressMeter:this},dynamicContents:true,contents:"<b><nobr>Saving ${progressMeter.fileName} ${progressMeter.getFormattedFileSize()}</nobr></b>"});this.addAutoChild("progressLabel",{height:1},"Canvas")},isc.A.setFileName=function isc_MultiFileProgressMeter_setFileName(_1){this.fileName=_1;delete this.fileSize;this.bytesSoFar=0;this.bytesReceived=0;this.progressLabel.markForRedraw();if(this.progressBar)this.setPercentDone(0)},isc.A.setFileSize=function isc_MultiFileProgressMeter_setFileSize(_1){this.fileSize=_1;this.progressLabel.markForRedraw()},isc.A.setBytesReceived=function isc_MultiFileProgressMeter_setBytesReceived(_1){this.bytesSoFar=this.bytesReceived;;this.bytesReceived=_1;this.progressLabel.markForRedraw()},isc.A.getFormattedFileSize=function isc_MultiFileProgressMeter_getFormattedFileSize(){if(!this.fileSize)return isc.emptyString;var _1="<br>";if(this.bytesReceived){_1+=isc.MultiFileProgressMeter.formatBytes(this.bytesReceived)+" of "}
_1+=isc.MultiFileProgressMeter.formatBytes(this.fileSize);if(this.bytesSoFar&&this.progressCheckFrequency){var _2=this.bytesReceived-this.bytesSoFar;_2=isc.MultiFileProgressMeter.formatBytes(_2*1000/this.progressCheckFrequency);_1+=" ("+_2+"/sec)"}
return _1},isc.A.showProgressBar=function isc_MultiFileProgressMeter_showProgressBar(){this.addAutoChild("progressBar",{overflow:"visible"},"Progressbar");this.progressBar.show()},isc.A.hideProgressBar=function isc_MultiFileProgressMeter_hideProgressBar(){if(this.progressBar)this.progressBar.hide()},isc.A.setPercentDone=function isc_MultiFileProgressMeter_setPercentDone(_1){this.progressBar.setPercentDone(_1)});isc.B._maxIndex=isc.C+8;}
isc.addGlobal("MultiUploadItem",isc.MultiFileItem);isc.addGlobal("MultiUploadPicker",isc.MultiFilePicker);if(isc.ListGrid){isc.defineClass("DialogUploadItem","StaticTextItem");isc.A=isc.DialogUploadItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.iconHeight=16;isc.A.iconWidth=16;isc.A.icons=[{src:"[SKIN]MultiUploadItem/icon_add_files.png",name:"upload",prompt:"Upload File",click:"item.showPicker(true)"},{src:"[SKIN]MultiUploadItem/icon_remove_files.png",name:"remove",prompt:"Remove File",click:"item.removeFile()"}];isc.A.pickerConstructor="DialogUploadPicker";isc.A.noFileString="[NONE]";isc.B.push(isc.A.init=function isc_DialogUploadItem_init(){this.Super("init",arguments);if(!this.pickerDefaults)this.pickerDefaults={};isc.addProperties(this.pickerDefaults,{dataSource:this.dataSource})},isc.A.mapValueToDisplay=function isc_DialogUploadItem_mapValueToDisplay(_1){return _1==null?this.noFileString:this.Super("mapValueToDisplay",arguments)},isc.A.showPicker=function isc_DialogUploadItem_showPicker(){this.Super("showPicker",arguments);var _1=this.getValue('primaryKey');this.picker.foreignKeyValues={primaryKey:_1}},isc.A.removeFile=function isc_DialogUploadItem_removeFile(){var _1=this.getValue();if(_1!=this.defaultValue){var _2=isc.DataSource.get(this.dataSource);_2.removeData({primaryKey:_1},this.getID()+".removeFileCallback(dsResponse)")}},isc.A.removeFileCallback=function isc_DialogUploadItem_removeFileCallback(_1){if(_1.status!=isc.DSResponse.STATUS_SUCCESS){isc.warn("Unable to remove file: "+_1.data);return}
this.setValue(this.defaultValue)},isc.A.fileUploaded=function isc_DialogUploadItem_fileUploaded(_1,_2){var _3=_2.data;var _4={};_4[_3.primaryKey]=_3.file_filename;this.setValueMap(_4);this.setValue(_3.primaryKey)},isc.A.destroy=function isc_DialogUploadItem_destroy(){if(this.picker)this.picker.destroy();this.Super("destroy",arguments)},isc.A.$85m=function isc_DialogUploadItem__shouldAllowExpressions(){return false});isc.B._maxIndex=isc.C+8;isc.defineClass("DialogUploadPicker","MultiFilePicker");isc.A=isc.DialogUploadPicker.getPrototype();isc.A.maxUploadFields=1;isc.A.uploadWithoutPKButtonName="Upload";isc.A.uploadWithPKButtonName="Upload";isc.A.showUploadRemoveButton=false;isc.A.uploadWithoutPK=true}
if(isc.ListGrid){isc.ClassFactory.defineClass("SOAPUploadItem","DialogUploadItem");isc.A=isc.SOAPUploadItem.getPrototype();isc.A.dataSource="sessionFiles"}isc.ClassFactory.defineClass("SpinnerItem","TextItem");isc.A=isc.SpinnerItem;isc.A.INCREASE_ICON={};isc.A.DECREASE_ICON={};isc.A=isc.SpinnerItem.getPrototype();isc.A.changeOnKeypress=false;isc.A.canTabToIcons=false;isc.A.height=18;isc.A.step=1;isc.A.increaseIconDefaults={width:16,height:9,src:"[SKIN]/DynamicForm/Spinner_increase_icon.png",name:"increase",showOver:false,showFocusedWithItem:false,imgOnly:true,hspace:0};isc.A.decreaseIconDefaults={width:16,height:9,src:"[SKIN]/DynamicForm/Spinner_decrease_icon.png",name:"decrease",showOver:false,showFocusedWithItem:false,imgOnly:true,hspace:0};isc.A=isc.SpinnerItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$132h="<td tabIndex='-1'"+(isc.Browser.isIE?" style='font-size:0px'":"");isc.A.$132i=" rowspan='2'>";isc.A.$132j="</td>";isc.B.push(isc.A.init=function isc_SpinnerItem_init(){this.Super("init",arguments);var _1=this.step;if(_1!=null&&!isc.isA.Number(_1)){_1=parseFloat(_1);if(!isc.isA.Number(_1))_1=1;this.step=_1}},isc.A.$14v=function isc_SpinnerItem__setUpIcons(){if(this.icons==null)this.icons=[];var _1=this.increaseIcon=isc.addProperties({},this.increaseIconDefaults,isc.SpinnerItem.INCREASE_ICON,this.increaseIconProperties),_2=this.decreaseIcon=isc.addProperties({},this.decreaseIconDefaults,isc.SpinnerItem.DECREASE_ICON,this.decreaseIconProperties);this.icons.addListAt([_1,_2],0);this.Super("$14v",arguments)},isc.A.getIconsHTML=function isc_SpinnerItem_getIconsHTML(){if(!this.showIcons)return isc.emptyString;var _1=this.$204;if(_1==null){var _2=this.$132h,_3={},_4=this.$16l(_3),_5=this.$16m(_3);_1=this.$204=["<table role='presentation' style='margin-top:",_5,";margin-bottom:",_5,"' border=0 cellpadding=0 cellspacing=0><tbody><tr>",_2,">",null,"</td>","</tr><tr>",_2,">",null,"</td></tr></tbody></table>"];this.$132k=0}
var _6=this.icons.length-2;if(_6<this.$132k){_1.splice(9+4*_6,4*(this.$132k-_6));this.$132k=_6}else{var d=_6-this.$132k;if(d>0){var _8=[9,0];_8[2+4*d-1]=null;_1.splice.apply(_1,_8);this.$132k=_6}}
_1[7]=this.getIconHTML(this.icons[0]);_1[12+4*this.$132k]=this.getIconHTML(this.icons[1]);var i=9;for(var d=2;d<this.icons.length;++d,i+=4){var _10=this.icons[d];if(!this.$16f(_10)||this.$16e(_10)){_1[i]=null;_1[i+1]=null;_1[i+2]=null;_1[i+3]=null}else{_1[i]=this.$132h;_1[i+1]=this.$132i;_1[i+2]=this.getIconHTML(_10);_1[i+3]=this.$132j}}
return _1.join(isc.emptyString)},isc.A.getIconHTML=function isc_SpinnerItem_getIconHTML(_1){if(this.$68y())return null;return this.Super("getIconHTML",arguments)},isc.A.getTextBoxStyle=function isc_SpinnerItem_getTextBoxStyle(){if(this.$68y())return isc.TextItem.getInstanceProperty("textBoxStyle");else return this.Super("getTextBoxStyle",arguments)},isc.A.$16m=function isc_SpinnerItem__getIconVMargin(_1){if(_1==this.icons[0]||_1==this.icons[1])return 0;return this.Super("$16m",arguments)},isc.A.getTotalIconsWidth=function isc_SpinnerItem_getTotalIconsWidth(){var _1=this.Super("getTotalIconsWidth",arguments);if(_1>0){var _2=Math.max(this.icons[0].width,this.icons[1].width);_1-=_2}
return _1},isc.A.mouseStillDown=function isc_SpinnerItem_mouseStillDown(_1,_2,_3){if(this.isDisabled()||this.isReadOnly())return;this.$205++;if(this.$18j)this.updateValue();var _4=_3.nativeTarget;var _5=this.$116r,_6=null;if(_4==this.$16v(this.icons[0])){this.increaseValue();_6=this.icons[0]}else if(_4==this.$16v(this.icons[1])){this.decreaseValue();_6=this.icons[1]}
if(_5!=_6){if(_5!=null){var _7=this.$16v(_5);if(_7){this.$123(_5.name,_7)}}
this.$116r=_6;if(_6!=null){var _7=this.$16v(_6);if(_7){this.$121(_6.name,_7)}}}},isc.A.mouseDown=function isc_SpinnerItem_mouseDown(_1,_2,_3){if(this.isDisabled()||this.isReadOnly())return;if(!this.hasFocus)this.focusInItem();this.$205=0;isc.Page.setEvent(isc.EH.MOUSE_UP,this,isc.Page.FIRE_ONCE,"$116s")},isc.A.$116s=function isc_SpinnerItem__clearLastTargetIcon(){var _1=this.$116r;if(_1!=null){var _2=this.$16v(_1);if(_2){this.$123(_1.name,_2)}}
this.$116r=null},isc.A.handleKeyPress=function isc_SpinnerItem_handleKeyPress(_1,_2){if(this.Super("handleKeyPress",arguments)==false)return false;var _3=_1.keyName,_4=this.isReadOnly();if(!_4&&_3=="Arrow_Up"){this.increaseValue();return false}
if(!_4&&_3=="Arrow_Down"){this.decreaseValue();return false}},isc.A.getNextValue=function isc_SpinnerItem_getNextValue(_1,_2){return this.$118d(_1,_2)},isc.A.getPreviousValue=function isc_SpinnerItem_getPreviousValue(_1,_2){return this.$118d(_1,_2)},isc.A.$118d=function isc_SpinnerItem__defaultGetNextValue(_1,_2){var _3=this.min,_4=this.max;var _5,_6;if(Math.round(_2)==_2){_5=0}else{var _7=_2+"";_5=_7.length-(_7.indexOf(".")+1)}
if(Math.round(_1)==_1){_6=0}else{var _8=_1+"";_6=_8.length-(_8.indexOf(".")+1)}
_1+=_2;var _9=Math.max(_5,_6);if(_9>0){_1=parseFloat(_1.toFixed(_9))}
if(_2>0&&_4!=null&&_1>_4)_1=_4;else if(_2<0&&_3!=null&&_1<_3)_1=_3;return _1},isc.A.increaseValue=function isc_SpinnerItem_increaseValue(){this.updateValue();var _1=this.getValue();if(_1!=null&&this.max==_1)return;var _2=this.$205;var _3=this.step*(_2!=null?Math.pow(2,Math.floor(this.$205/(2000/isc.EH.STILL_DOWN_DELAY))):1);return this.$118e(_1,_3,true)},isc.A.decreaseValue=function isc_SpinnerItem_decreaseValue(){this.updateValue();var _1=this.getValue();if(_1!=null&&this.min==_1)return;var _2=this.$205,_3=(0-this.step)*(_2!=null?Math.pow(2,Math.floor(this.$205/(2000/isc.EH.STILL_DOWN_DELAY))):1);return this.$118e(_1,_3,false)},isc.A.$118e=function isc_SpinnerItem__modifyValue(_1,_2,_3){var _4=this.min,_5=this.max;if(!isc.isA.Number(_1)){_1=0;if((_4!=null&&_1<_4)||(_5!=null&&_1>_5)){_1=(_4!=null?_4:_5)}}
if(_4==null&&_5==null){_1=_3?this.getNextValue(_1,_2):this.getPreviousValue(_1,_2)}else{_1=this.$118d(_1,_2)}
var _6=this.form,_7=this.form?this.form.getValues():null,_8=(this.formatEditorValue!=null)?this.formatEditorValue(_1,_7,_6,this):_1;this.setElementValue(_8);this.updateValue()},isc.A.mapDisplayToValue=function isc_SpinnerItem_mapDisplayToValue(_1){_1=this.Super("mapDisplayToValue",arguments);if(isc.isA.String(_1)){var _2=parseFloat(_1);if(_2==_1)_1=_2}
return _1},isc.A.isInRange=function isc_SpinnerItem_isInRange(_1){if(this.max!=null){if(this.max<_1)return false}else if(this.min==null){if(0<=this.step){if((_1<this.getPreviousValue(_1,-this.step))||(this.getNextValue(_1,this.step)<_1))
{return false}}else{if((_1>this.getPreviousValue(_1,-this.step))||(this.getNextValue(_1,this.step)>_1))
{return false}}}
if(this.min!=null){if(_1<this.min)return false}
return true},isc.A.updateValue=function isc_SpinnerItem_updateValue(){var _1=this.getElementValue();_1=this.mapDisplayToValue(_1);if(_1==this._value)return;if(_1!=null&&(!isc.isA.Number(_1)||!this.isInRange(_1))){var _2=this.mapValueToDisplay(this._value);this.setElementValue(_2);return}
this.Super("updateValue",arguments)},isc.A.setValue=function isc_SpinnerItem_setValue(_1,_2,_3,_4,_5,_6){if(_1!=null&&!isc.isA.Number(_1)){var _7=parseFloat(_1);if(_7==_1)_1=_7;else{this.logWarn("setValue(): passed '"+_1+"'. This is not a valid number - rejecting this value");_1=null}}
if(_1!=null){if(this.max!=null&&_1>this.max){this.logWarn("setValue passed "+_1+" - exceeds specified maximum. Clamping to this.max.");_1=this.max}
if(this.min!=null&&_1<this.min){this.logWarn("setValue passed "+_1+" - less than specified minimum. Clamping to this.min.");_1=this.min}
if(this.max==null&&this.min==null){var _8=this.getNextValue(_1,this.step),_9=this.getPreviousValue(_1,-this.step);if(0<=this.step){if(_1<_9){this.logWarn("setValue passed "+_1+" - less than the previous value "+_9+". Setting to the previous value.");_1=_9}
if(_8<_1){this.logWarn("setValue passed "+_1+" - greater than the next value "+_8+". Setting to the next value.");_1=_8}}else{if(_1>_9){this.logWarn("setValue passed "+_1+" - greater than the previous value "+_9+". Setting to the previous value.");_1=_9}
if(_8>_1){this.logWarn("setValue passed "+_1+" - less than the next value "+_8+". Setting to the next value.");_1=_8}}}}
return this.invokeSuper(isc.SpinnerItem,"setValue",_1,_2,_3,_4,_5,_6)});isc.B._maxIndex=isc.C+21;isc.ClassFactory.defineClass("SliderItem","CanvasItem");isc.A=isc.SliderItem.getPrototype();isc.A.vertical=false;isc.A.minValue=1;isc.A.maxValue=100;isc.A.roundValues=true;isc.A.roundPrecision=1;isc.A.defaultValue=1;isc.A.shouldSaveValue=true;isc.A.sliderConstructor="Slider";isc.A.sliderDefaults={autoDraw:false,showTitle:false,valueChanged:function(){if(this.canvasItem)this.canvasItem.sliderChange()}};isc.A.autoDestroy=true;isc.A=isc.SliderItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.changeOnDrag=true;isc.B.push(isc.A.init=function isc_SliderItem_init(){this.Super("init",arguments);this.$207=this.getDefaultValue()},isc.A.$18y=function isc_SliderItem__createCanvas(){var _1=this.sliderDefaults;var _2=isc.addProperties({},_1,{vertical:this.vertical,minValue:this.minValue,maxValue:this.maxValue,value:this.defaultValue,numValues:this.numValues,roundValues:this.roundValues,roundPrecision:this.roundPrecision,tabIndex:this.getGlobalTabIndex()},this.sliderProperties);this.canvas=this.addAutoChild("slider",_2,this.sliderConstructor,this.container);this.Super("$18y",arguments)},isc.A.isEditable=function isc_SliderItem_isEditable(){return this.getCanEdit()},isc.A.readOnlyDisplayChanged=function isc_SliderItem_readOnlyDisplayChanged(_1){var _2=this.isReadOnly(),c=this.canvas;if(c.children)c.children.map("setDisabled",_2)},isc.A.canEditChanged=function isc_SliderItem_canEditChanged(_1){if(this.canvas){if(_1){this.canvas.setDisabled(false);if(this.canvas.children)this.canvas.children.map("setDisabled",false)}else{this.canvas.setDisabled(true);if(this.canvas.children)this.canvas.children.map("setDisabled",true)}}},isc.A.setValue=function isc_SliderItem_setValue(_1){this.$17g=true;var _2;if(_1==null){_2=this.getDefaultValue();if(_2!=null)_1=_2}
this.$207=_1;this.canvas.setValue(_1,(_2!=null))},isc.A.getValue=function isc_SliderItem_getValue(){return this.canvas.getValue()},isc.A.sliderChange=function isc_SliderItem_sliderChange(){var _1=this.canvas.getValue();if(this.$207!=_1){if(this.changeOnDrag||!this.canvas.valueIsChanging()){this.$10y(_1);this.$207=_1}}else{this.saveValue(_1)}},isc.A.setMinValue=function isc_SliderItem_setMinValue(_1){this.canvas.setMinValue(_1);this.minValue=_1},isc.A.setMaxValue=function isc_SliderItem_setMaxValue(_1){this.canvas.setMaxValue(_1);this.maxValue=_1},isc.A.setNumValues=function isc_SliderItem_setNumValues(_1){this.canvas.setNumValues(_1);this.numValues=_1},isc.A.$85m=function isc_SliderItem__shouldAllowExpressions(){return false});isc.B._maxIndex=isc.C+12;isc.ClassFactory.defineClass("ColorItem","TextItem");isc.addGlobal("ColorPickerItem",isc.ColorItem);isc.A=isc.ColorItem.getPrototype();isc.A.changeOnBlur=true;isc.A.changeOnKeypress=false;isc.A.pickerConstructor="ColorPicker";isc.A.pickerDefaults={colorSelected:function(_1,_2){this.callingFormItem.pickerColorSelected(_1,_2)}};isc.A.showPickerIcon=true;isc.A.pickerIconWidth=18;isc.A.pickerIconHeight=18;isc.A.pickerIconSrc="[SKIN]/DynamicForm/ColorPicker_icon.png";isc.A.pickerIconPrompt="Click to select a new color";isc.A.pickerIconProperties={showOver:false};isc.A.defaultPickerMode="simple";isc.A.allowComplexMode=true;isc.A.supportsTransparency=false;isc.A.browserSpellCheck=false;isc.A.type="color";isc.A=isc.ColorItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.init=function isc_ColorItem_init(){this.pickerDefaults.defaultPickMode=this.defaultPickerMode;this.pickerDefaults.allowComplexMode=this.allowComplexMode;this.pickerDefaults.supportsTransparency=this.supportsTransparency;this.Super("init",arguments)},isc.A.updateValue=function isc_ColorItem_updateValue(){var _1=this._value,_2=this.getElementValue();_2=this.mapDisplayToValue(_2);if(_2==this._value)return;if(_2!=null&&!isc.isA.color(_2)){this.setElementValue(_1);return}
this.Super("updateValue",arguments);if(this.showPickerIcon&&this._value!=_1){this.setIconBackgroundColor(this.getPickerIcon(),this._value)}},isc.A.getDefaultValue=function isc_ColorItem_getDefaultValue(){var _1=this.Super("getDefaultValue",arguments);if(_1&&!isc.isA.color(_1)){this.logWarn("Default value:"+_1+" is not a valid color identifier. Ignoring this default.");_1=this.defaultValue=null}
return _1},isc.A.showPicker=function isc_ColorItem_showPicker(){this.picker=isc.ColorChooser.getSharedColorPicker(this.pickerDefaults);var _1=this.picker;var _2=_1.callingFormItem;if(_2!=this){_1.callingFormItem=this;_1.callingForm=this.form;_1.setSupportsTransparency(this.supportsTransparency)}
_1.setHtmlColor(this._value||"");if(_1.allowComplexMode){if(_1.$56c=='simple'){_1.modeToggleButton.setTitle(_1.moreButtonTitle)}else{_1.modeToggleButton.setTitle(_1.lessButtonTitle)}}
if(!this.isObserving(_1,"visibilityChanged")){this.observe(_1,"visibilityChanged",this.pickerVisibilityChanged)}
return this.Super("showPicker",arguments)},isc.A.pickerColorSelected=function isc_ColorItem_pickerColorSelected(_1,_2){if(!this.mask){_1=this.mapValueToDisplay(_1)}
this.setElementValue(_1);this.updateValue()},isc.A.pickerVisibilityChanged=function isc_ColorItem_pickerVisibilityChanged(_1){if(!_1){this.focusInIcon("picker")}},isc.A.setValue=function isc_ColorItem_setValue(_1){this.Super("setValue",arguments);this.setIconBackgroundColor(this.getPickerIcon(),this._value)});isc.B._maxIndex=isc.C+7;if(isc.ListGrid){isc.ClassFactory.defineClass("ValueMapEditor","VLayout");isc.A=isc.ValueMapEditor.getPrototype();isc.A.mapTypeConstructor=isc.Button;isc.A.mapTypeDefaults={autoDraw:false,width:"100%",click:function(){this.creator.canvasItem.toggleObjectArray()},showIf:function(){return this.creator.canvasItem.showMapTypeButton},getTitle:function(){var _1=this.creator.canvasItem,_2=_1.saveAsObject;if(_2)return _1.saveAsObjectTitle;else return _1.saveAsArrayTitle}};isc.A.selectorConstructor=isc.ListGrid;isc.A.selectorDefaults={height:1,overflow:"visible",bodyOverflow:"visible",inherentHeight:true,showNewRecordRow:true,listEndEditAction:"next",canEdit:true,editEvent:isc.EH.CLICK,cellHeight:22,selectionType:isc.Selection.NONE,selectOnEdit:false,leaveScrollbarGap:false,showSortArrow:isc.ListGrid.NONE,canSort:false,canResizeFields:false,dataChanged:function(){this.Super("dataChanged",arguments);if(this.creator&&this.creator.canvasItem)
this.creator.canvasItem.updateValue()},stopOnErrors:true,validateCellValue:function(_1,_2,_3,_4){var _5=this.getFieldName(_2),_6=this.creator.canvasItem,_7=_6.$208(_5,_1,_3);if(_7)return _7;return this.Super("validateCellValue",arguments)},cellContextClick:function(_1,_2,_3){var _4=this.creator.canvasItem.getSelectorContextMenu(_1);_4.showContextMenu();return false},getHeaderContextMenu:function(){return this.creator.canvasItem.getSelectorContextMenu()}};isc.A=isc.ValueMapEditor.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.initWidget=function isc_ValueMapEditor_initWidget(){if(!this.canvasItem){this.logWarn("ValueMapEditors are not supported as standalone widgets at this time.");return}
this.Super("initWidget",arguments);this.addAutoChild("mapType",{});this.addAutoChild("selector",{newRecordRowMessage:this.canvasItem.newOptionRowMessage,showHeader:this.showHeader,fields:this.canvasItem.$209(),data:this.canvasItem.$21a()})});isc.B._maxIndex=isc.C+1;isc.ClassFactory.defineClass("ValueMapItem","CanvasItem");isc.A=isc.ValueMapItem.getPrototype();isc.A.height=1;isc.A.autoDestroy=true;isc.A.shouldSaveValue=true;isc.A.showMapTypeButton=true;isc.A.showHeader=true;isc.A.newOptionRowMessage="Click to add a new option";isc.A.displayTitle="Display";isc.A.valueTitle="Value";isc.A.undefinedKeyErrorMessage="Each valueMap option must have a defined value";isc.A.duplicateValueErrorMessage="Please enter a unique value for this option";isc.A.saveAsArrayTitle="Stored == Displayed";isc.A.saveAsObjectTitle="Stored != Displayed";isc.A=isc.ValueMapItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.$18y=function isc_ValueMapItem__createCanvas(){if(this.canvas)return;if(this._value==null)this._value=[];this.canvas=isc.ValueMapEditor.create({autoDraw:false,_generated:true,ID:this.getID()+"$21b",canvasItem:this,showMapType:this.showMapTypeButton,showHeader:this.showHeader,height:this.height,overflow:isc.Canvas.VISIBLE});this.Super("$18y",arguments)},isc.A.$21c=function isc_ValueMapItem__getMapTypeButton(){return this.canvas.mapType},isc.A.$21d=function isc_ValueMapItem__getSelectorGrid(){return this.canvas.selector},isc.A.$21a=function isc_ValueMapItem__getSelectorData(_1){var _1=_1||this.getValue();if(!_1)_1=this.saveAsObject?{}:[];var _2=[];if(isc.isAn.Array(_1)){for(var i=0;i<_1.length;i++){_2[i]={value:_1[i]}}}else{var i=0;for(var _4 in _1){_2[i]={value:_4,display:_1[_4]}
i++}}
return _2},isc.A.$209=function isc_ValueMapItem__getSelectorFields(){if(!this.$21e||!this.$21f){this.$21e={name:"display",title:this.displayTitle};this.$21f={name:"value",title:this.valueTitle}}
var _1=[this.$21f];if(this.saveAsObject)_1.add(this.$21e);return _1},isc.A.$208=function isc_ValueMapItem__validateSelectorCellValue(_1,_2,_3){if(_1!="value")return;if(!this.saveAsObject&&this.allowDuplicates)return;var _4=this.$21d(),_5=_2>_4.data.getLength(),_6=this._value,_7;if(this.saveAsObject){if(_3==null||_3==""){return[this.undefinedKeyErrorMessage]}
_7=isc.getKeys(_6)}else{_7=_6||[]}
var _8;if(_5){if(_7.contains(_3))_8=true}else{for(var i=0;i<_7.length;i++){if(_2==i)continue;if(_3==_7[i]){_8=true;break}}}
if(_8)return[this.duplicateValueErrorMessage];return null},isc.A.getSelectorContextMenu=function isc_ValueMapItem_getSelectorContextMenu(_1){if(!this.$21g){var _2=[{title:"Add new option",click:"menu.canvasItem.addOption()"},{title:"Delete option",enableIf:"menu.record != null",click:"menu.canvasItem.removeOption(menu.record)"}];if(this.showMapTypeButton){_2.add({dynamicTitle:"this.canvasItem.$21h()",click:"menu.canvasItem.toggleObjectArray()"})}
this.$21g=this.ns.Menu.create({canvasItem:this,ID:this.getID()+"$21i",data:_2})}
this.$21g.record=_1;return this.$21g},isc.A.addOption=function isc_ValueMapItem_addOption(){this.$21d().startEditingNew()},isc.A.removeOption=function isc_ValueMapItem_removeOption(_1){var _2=this.$21d();_2.data.remove(_1);_2.data.dataChanged()},isc.A.$21h=function isc_ValueMapItem__getToggleObjectArrayTitle(){var _1=this.saveAsObject;return _1?this.saveAsArrayTitle:this.saveAsObjectTitle},isc.A.toggleObjectArray=function isc_ValueMapItem_toggleObjectArray(){this.setSaveAsObject(!this.saveAsObject)},isc.A.setSaveAsObject=function isc_ValueMapItem_setSaveAsObject(_1){if(this.saveAsObject==_1)return;var _2,_3=this.getValue();if(_1){_2={};if(_3!=null){for(var i=0;i<_3.length;i++){_2[_3[i]]=_3[i]}}}else{_2=[];for(var _5 in _3){_2.add(_5)}}
this._value=_2;this.saveAsObject=_1;var _6=this.$21d(),_7=this.$21a();if(!_6)return;_6.setData(_7);_6.setFields(this.$209());if(this.showMapTypeButton)this.$21c().markForRedraw()},isc.A.isEditable=function isc_ValueMapItem_isEditable(){return true},isc.A.updateValue=function isc_ValueMapItem_updateValue(){var _1=this.$21d(),_2=_1.data,_3=this.saveAsObject,_4=_3?{}:[],_5;if(_3){var _6={};if(isc.isAn.Array(this._value)){_5=true}else{isc.addProperties(_6,this._value)}
var _7=isc.getKeys(_6);for(var i=0;i<_2.length;i++){var _9=_2[i],_10=_9.display;_4[_9.value]=_9.display;if(!_7.contains(_10)||(_6[_9.value]!=_10))
_5=true;delete _6[_9.value]}
if(isc.getKeys(_6).length!=0)_5=true}else{if(!isc.isAn.Array(this._value)||(this._value.length!=_2.length)){_5=true}
for(var i=0;i<_2.length;i++){var _9=_2[i],_10=_9.value;_4[i]=_10;if(!_5&&(this._value[i]!=_10))_5=true}}
if(!_5)return;if(this.handleChange(_4,this._value)==false)return;_4=this.$17n;delete this.$17n;this.saveValue(_4)},isc.A.setValue=function isc_ValueMapItem_setValue(_1){this.$17g=true;if(_1!=null&&!isc.isAn.Object(_1)){this.logWarn("setValue() passed an invalid object. Must be a valueMap (either specified as an array or a raw JS object.");return}
var _2=isc.isAn.Array(_1),_3=(!!this.saveAsObject);if(_1!=null&&_2==_3){this.logInfo("setValue() passed a valueMap of type "+(_2?"Array":"Object")+".  Updating this.saveAsObject to match this data type.");this.setSaveAsObject(!_2);_3=this.saveAsObject}
this._value=_1;this.$21d().setData(this.$21a())});isc.B._maxIndex=isc.C+15}
isc.defineClass("ArrayItem",isc.ValueMapItem);isc.A=isc.ArrayItem.getPrototype();isc.A.showMapTypeButton=false;isc.A.showHeader=false;isc.A.saveAsObject=false;isc.A.allowDuplicates=true;isc.A.newOptionRowMessage="Click to add values";isc.defineClass("MappingItem",isc.ValueMapItem);isc.A=isc.MappingItem.getPrototype();isc.A.showMapTypeButton=false;isc.A.saveAsObject=true;if(isc.ListGrid){isc.ClassFactory.defineClass("PickTreeItem","CanvasItem");isc.A=isc.PickTreeItem;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.$21j=function isc_c_PickTreeItem__itemSelected(_1){return this.canvasItem.$21j(_1)},isc.A.$21k=function isc_c_PickTreeItem__getButtonTitle(){var _1=this.getSelectedItem();if(_1==null){var _2=this.canvasItem,_3=this.canvasItem.getValue();if(_3!=null)return _2.mapValueToDisplay(_3)}
return this.Super("getTitle",arguments)},isc.A.$21l=function isc_c_PickTreeItem__treeDataLoaded(){var _1=this.canvasItem;_1.setValue(_1.getValue())});isc.B._maxIndex=isc.C+3;isc.A=isc.PickTreeItem.getPrototype();isc.A.canFocus=true;isc.A.shouldSaveValue=true;isc.A.buttonDefaults={height:19};isc.A.buttonConstructor="TreeMenuButton";isc.A.emptyMenuMessage="No items to display";isc.A.emptyDisplayValue=undefined;isc.A.readOnlyDisplay="disabled";isc.A=isc.PickTreeItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.width=null;isc.B.push(isc.A.init=function isc_PickTreeItem_init(){this.Super("init",arguments);if(this.optionDataSource==null&&this.dataSource==null&&this.valueTree==null){this.logWarn("This form item requires a 'valueTree'.")}},isc.A.getOptionDataSource=function isc_PickTreeItem_getOptionDataSource(){var _1=this.optionDataSource||this.dataSource;if(_1!=null)_1=isc.DataSource.get(_1);return _1},isc.A.getDisplayValue=function isc_PickTreeItem_getDisplayValue(){return this.canvas.getTitle()},isc.A.setValueTree=function isc_PickTreeItem_setValueTree(_1){this.valueTree=_1;if(this.canvas){this.canvas.setData(this.valueTree)}},isc.A.$18y=function isc_PickTreeItem__createCanvas(){var _1={getTitle:isc.PickTreeItem.$21k,canFocus:this.$kk(),disabled:this.isDisabled(),dataSource:this.getOptionDataSource(),criteria:this.optionCriteria,menu:{$1053:this.optionOperationId},data:this.valueTree,canSelectParentItems:this.canSelectParentItems,itemSelected:isc.PickTreeItem.$21j,emptyMenuMessage:this.emptyMenuMessage,unselectedTitle:this.$1054(),loadDataOnDemand:this.loadDataOnDemand,treeDataLoaded:isc.PickTreeItem.$21l,displayField:this.displayField,dataProperties:(this.dataProperties==null?{}:this.dataProperties)};if(_1.width==null&&this.width!=null){var _2=this.getInnerWidth();var _3=0;if(this.icons&&this.icons.length>0){for(var i=0;i<this.icons.length;i++){_3+=this.getIconWidth(this.icons[i])+this.iconHSpace}}
_1.width=Math.max(1,_2-_3)}
this.canvas=this.addAutoChild("button",_1,this.buttonConstructor,this.container);this.autoDestroy=true;this.Super("$18y",arguments);if(this._value!=null)this.setValue(this._value)},isc.A.$21j=function isc_PickTreeItem__itemSelected(_1){var _2=this.$21m(_1);this.$93r=_1;var _3=this.$10y(_2);if(_3==false)delete this.$93r;if(this.getValue()!=_2)_3=false;return _3},isc.A.saveValue=function isc_PickTreeItem_saveValue(_1,_2){if(this.$93r!=null){this.$21n=this.$93r;delete this.$93r}else{this.$21n=this.$21s(_1);if(this.canvas){this.canvas.setSelectedItem(this.$21n)}}
return this.Super("saveValue",arguments)},isc.A.showValue=function isc_PickTreeItem_showValue(_1,_2){var _3=this.$21s(_2);if(_3!=null){this.canvas.setSelectedItem(_3)}else{var _4=this.optionDataSource||this.dataSource;var _5=!_4||(this.$17b(_2,true)!==null),_6=_5?_1:"";this.canvas.setTitle(_6)}},isc.A.$21m=function isc_PickTreeItem__mapNodeToValue(_1){if(this.$21o())return this.valueTree.getPath(_1);return _1[this.$21p()]},isc.A.$21o=function isc_PickTreeItem__usePathAsId(){return(!this.valueField&&this.valueTree&&(this.valueTree.modelType!="parent"))},isc.A.$21p=function isc_PickTreeItem__getValueFieldName(){var _1=this.valueField;if(!_1){_1=this.valueTree?this.valueTree.idField:this.$21q()}
return _1},isc.A.$21q=function isc_PickTreeItem__getPrimaryKeyFieldName(){if(!this.getOptionDataSource())return null;if(!this.$21r){var _1=isc.DataSource.getDataSource(this.getOptionDataSource()),_2=_1.getPrimaryKeyFieldNames(),_3=isc.isAn.Array(_2)?_2[0]:_2;if(isc.isAn.Array(_2)&&_2.length>1){this.logWarn("Multiple primary key fields not supported by PickTreeItem - using '"+_3+"' as single primary key field")}
this.$21r=_3}
return this.$21r},isc.A.getSelectedNode=function isc_PickTreeItem_getSelectedNode(){return this.$21n},isc.A.getSelectedRecord=function isc_PickTreeItem_getSelectedRecord(){return this.getSelectedNode()},isc.A.updateValueMap=function isc_PickTreeItem_updateValueMap(_1){this.Super("updateValueMap",arguments);if(_1)this.canvas.markForRedraw()},isc.A.$21s=function isc_PickTreeItem__getNode(_1){if(!_1)return null;var _2=(this.getOptionDataSource()?this.canvas.getTree():this.valueTree);if(this.$21o())return this.valueTree.find(_1);return _2.find(this.$21p(),_1)},isc.A.$85m=function isc_PickTreeItem__shouldAllowExpressions(){return false},isc.A.fetchData=function isc_PickTreeItem_fetchData(){var _1=this.getOptionDataSource();if(_1==null){this.logWarn("fetchData() called on pickTree item with no option data source. Ignoring.");return}
var _2=this.canvas.getTree();if(!_2||!_2.invalidateCache){return}
_2.invalidateCache()},isc.A.$1054=function isc_PickTreeItem__getEmptyDisplayValue(){if(this.emptyDisplayValue!=null){return this.emptyDisplayValue}else{var _1=isc[this.buttonConstructor],_2=_1&&_1.getInstanceProperty("unselectedTitle");return _2||""}},isc.A.setEmptyDisplayValue=function isc_PickTreeItem_setEmptyDisplayValue(_1){this.emptyDisplayValue=_1;if(this.button!=null){this.button.unselectedTitle=this.$1054()}});isc.B._maxIndex=isc.C+20;isc.defineClass("IPickTreeItem","PickTreeItem");isc.A=isc.IPickTreeItem.getPrototype();isc.A.buttonConstructor="ITreeMenuButton"}
isc.ClassFactory.defineClass("PopUpTextAreaItem","StaticTextItem");isc.A=isc.PopUpTextAreaItem.getPrototype();isc.A.canFocus=true;isc.A.wrap=false;isc.A.width=150;isc.A.clipValue=true;isc.A.popUpOnEnter=false;isc.A.popUpOnAnyClick=true;isc.A.textAreaWidth=100;isc.A.textAreaHeight=100;isc.A.iconOnly=false;isc.A.popUpIconSrc="[SKIN]/DynamicForm/PopUpTextAreaEditor_icon.gif";isc.A.popUpIconWidth=20;isc.A.popUpIconHeight=20;isc.A.iconVAlign=isc.Canvas.CENTER;isc.A=isc.PopUpTextAreaItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.$14v=function isc_PopUpTextAreaItem__setUpIcons(){if(this.icons==null)this.icons=[];var _1={name:"popUpIcon",src:this.popUpIconSrc,showOver:false,width:this.popUpIconWidth,height:this.popUpIconHeight,click:this.$43p};this.icons.addAt(_1,0);this.Super("$14v",arguments)},isc.A.$43p=function isc_PopUpTextAreaItem__popUpIconClick(_1,_2,_3){if(_2.popUpOnAnyClick||_2.isDisabled())return;_2.showPopUp(true)},isc.A.handleCellClick=function isc_PopUpTextAreaItem_handleCellClick(){if(this.Super("handleCellClick")==false)return false;if(this.popUpOnAnyClick&&!this.isDisabled())this.showPopUp(true)},isc.A.showPopUp=function isc_PopUpTextAreaItem_showPopUp(_1){var _2=this.getValue();if(!this.$21t)this.setupPopUpForm();this.placePopUp();var _3=this.$21t.getItem("textArea");_3.setValue(_2);this.$21t.bringToFront();this.$21t.show();if(_1)this.$21t.focusInItem("textArea");this.$21t.showClickMask({target:this,methodName:"hidePopUp"},true,[this.$21t])},isc.A.visibilityChanged=function isc_PopUpTextAreaItem_visibilityChanged(){if(!this.isVisible())this.$21u()},isc.A.$21u=function isc_PopUpTextAreaItem__hiddenObservation(){var _1=this.$21t;if(!_1||!(_1.isVisible()&&_1.isDrawn()))return;_1.hide()},isc.A.moved=function isc_PopUpTextAreaItem_moved(){this.$21v()},isc.A.$21v=function isc_PopUpTextAreaItem__movedObservation(){var _1=this.$21t;if(!_1||!(_1.isVisible()&&_1.isDrawn()))return;var _2=this.getTop(),_3=this.getLeft(),_4=this.getInnerWidth(),_5=this.getInnerHeight(),_6=this.containerWidget,_7=_6.getScrollTop(),_8=_6.getScrollLeft(),_9=_6.getViewportWidth(),_10=_6.getViewportHeight();if(_2<_7||(_2+_5)>(_7+_10)||_3<_8||(_3+_4)>(_8+_9))
{_1.hide()}else{this.placePopUp()}},isc.A.zIndexChanged=function isc_PopUpTextAreaItem_zIndexChanged(){var _1=this.$21t;if(!_1||!(_1.isVisible()&&_1.isDrawn()))return;_1.bringToFront()},isc.A.placePopUp=function isc_PopUpTextAreaItem_placePopUp(){var _1=this.getTextAreaTop(),_2=this.getTextAreaLeft(),_3=this.getTextAreaWidth(),_4=this.getTextAreaHeight();this.$21t.moveTo(_2,_1);this.$21t.resizeTo(_3,_4);var _5=this.$21t.getItem("textArea");_5.setWidth(_3);_5.setHeight(_4)},isc.A.setupPopUpForm=function isc_PopUpTextAreaItem_setupPopUpForm(){if(this.$21t!=null)return;var _1=isc.DynamicForm.create({autoDraw:false,ID:this.getID()+"$21t",_generated:true,separateContentInsertion:false,cellPadding:0,targetItem:this,values:{textArea:this.getValue()},items:[{name:"textArea",showTitle:false,type:"textArea",selectOnFocus:true,targetItem:this,focus:function(_4){this.targetItem.textAreaFocus()},keyDown:function(_4,_5,_6,_7){this.targetItem.$18i();return this.targetItem.textAreaKeyDown(_4,_6,_7)},keyPress:function(_4,_5,_6,_7){return this.targetItem.textAreaKeyPress(_4,_6,_7)},blur:function(){this.targetItem.textAreaBlur()}}],hide:function(_4,_5,_6,_7){var _2=this.invokeSuper(isc.DynamicForm,"hide",_4,_5,_6,_7);this.hideClickMask();return _2}});this.$21t=_1;var _3=this.containerWidget;_1.observe(_3,"destroy","observer.hide();observer.destroy()")},isc.A.hidePopUp=function isc_PopUpTextAreaItem_hidePopUp(){if(this.$21t){this.updateValue();this.$21t.hide()}},isc.A.destroy=function isc_PopUpTextAreaItem_destroy(){if(this.$21t){this.$21t.destroy();delete this.$21t}
return this.Super("destroy",arguments)},isc.A.getTextAreaTop=function isc_PopUpTextAreaItem_getTextAreaTop(){var _1=this.getPageTop();if(isc.Browser.isIE)_1-=1;return _1},isc.A.getTextAreaLeft=function isc_PopUpTextAreaItem_getTextAreaLeft(){return this.getPageLeft()},isc.A.getTextAreaWidth=function isc_PopUpTextAreaItem_getTextAreaWidth(){return Math.max(this.textAreaWidth,this.getInnerWidth())},isc.A.getTextAreaHeight=function isc_PopUpTextAreaItem_getTextAreaHeight(){return this.textAreaHeight},isc.A.mapValueToDisplay=function isc_PopUpTextAreaItem_mapValueToDisplay(){if(this.iconOnly)return"";return this.Super("mapValueToDisplay",arguments)},isc.A.textAreaBlur=function isc_PopUpTextAreaItem_textAreaBlur(){this.hidePopUp()},isc.A.textAreaFocus=function isc_PopUpTextAreaItem_textAreaFocus(){},isc.A.textAreaKeyPress=function isc_PopUpTextAreaItem_textAreaKeyPress(_1,_2,_3){},isc.A.textAreaKeyDown=function isc_PopUpTextAreaItem_textAreaKeyDown(_1,_2,_3){},isc.A.setValue=function isc_PopUpTextAreaItem_setValue(_1){var _2=this.mapValueToDisplay(this.getValue());this.Super("setValue",arguments);var _3=this.mapValueToDisplay(this.getValue());if(_2!=_3){this.setElementValue(_3)
if(this.$21t&&this.$21t.isVisible()){this.$21t.setValue("textArea",_3)}}},isc.A.updateValue=function isc_PopUpTextAreaItem_updateValue(){if(this.$21t&&this.$21t.isVisible()&&!this.$21t.$10u)
{var _1=this.$21t.getItem("textArea");_1.updateValue();var _2=this.$21t.getValue("textArea");this.setElementValue(this.mapValueToDisplay(_2));this.$10y(_2)}else{return this.Super("updateValue",arguments)}},isc.A.setElementValue=function isc_PopUpTextAreaItem_setElementValue(_1){if(this.iconOnly)return;return this.Super("setElementValue",arguments)},isc.A.focusInItem=function isc_PopUpTextAreaItem_focusInItem(){if(this.$21t&&this.$21t.isVisible()){this.$21t.focusInItem('textArea')}else if(this.showIcons){this.focusInIcon(this.icons[0])}else{this.showPopUp(true)}},isc.A.$173=function isc_PopUpTextAreaItem__setElementTabIndex(_1){this.$174=_1;if(!this.isVisible()||!this.containerWidget.isDrawn())return;this.$175()},isc.A.setElementReadOnly=function isc_PopUpTextAreaItem_setElementReadOnly(_1){});isc.B._maxIndex=isc.C+28;isc.defineClass("ExpressionItem","PopUpTextAreaItem");isc.A=isc.ExpressionItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.textAreaWidth=400;isc.A.showActionIcon=true;isc.A.actionIconSrc="[SKIN]/actions/add.png";isc.A.actionIconWidth=20;isc.A.actionIconHeight=20;isc.A.actionIconPosition=1;isc.B.push(isc.A.mapValueToDisplay=function isc_ExpressionItem_mapValueToDisplay(_1){if(isc.isA.StringMethod(_1))return _1.getDisplayValue();else if(isc.isA.Function(_1)){if(_1.iscAction){return"["+_1.iscAction.title+"]"}
return isc.Func.getBody(_1)}
else return this.Super("mapValueToDisplay",arguments)},isc.A.getValue=function isc_ExpressionItem_getValue(){var _1=this.Super("getValue");if(isc.isA.Function(_1))return isc.Func.getBody(_1);else return _1},isc.A.$14v=function isc_ExpressionItem__setUpIcons(){this.Super("$14v",arguments);if(this.showActionIcon){if(this.icons==null)this.icons=[];var _1=this.actionIconPosition;this.icons.addAt({name:"action",src:this.actionIconSrc,showOver:false,width:this.actionIconWidth,height:this.actionIconHeight,click:this.getID()+".showActionMenu();return false;"},_1);this.$36c(this.icons[_1])}},isc.A.updateAppearance=function isc_ExpressionItem_updateAppearance(_1){this.setElementValue(this.mapValueToDisplay(_1))},isc.A.showActionMenu=function isc_ExpressionItem_showActionMenu(){var _1=this,_2=isc.ActionMenu.create({sourceComponent:this.form.currentComponent,sourceMethod:this.name,components:this.form.allComponents,bindingComplete:function(_4){_1.$10y(_4)}});_2.show();var _3=this.getIconPageRect(this.icons[1]);_2.placeNear(_3[0]+this.actionIconWidth,_3[1]+this.actionIconHeight-this.containerWidget.getScrollTop())});isc.B._maxIndex=isc.C+5;isc.ClassFactory.defineClass("SearchForm","DynamicForm");isc.A=isc.SearchForm.getPrototype();isc.A.canEditFieldAttribute="canFilter";isc.A.isSearchForm=true;isc.A.hiliteRequiredFields=false;isc.A.operationType="fetch";isc.A.$66m=true;isc.A.allowEmptyValues=true;isc.A.storeAtomicValues=true;isc.A=isc.SearchForm.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$21w="DateItem";isc.A.defaultDateEditorType="DateRangeItem";isc.B.push(isc.A.createItem=function isc_SearchForm_createItem(_1,_2,_3,_4,_5){var _6=this.getDataSource(),_7=_6?_6.getField(_1[this.fieldIdProperty])!=null:false;if(_7){var _8=isc.FormItemFactory.getItemClassName(_1,_2,this),_9=isc.FormItemFactory.getItemClass(_8);if(_9==isc.DateItem&&_1&&(_1.useTextField==null))
_1.useTextField=true;if(_1.allowEmptyValue==null){_1.allowEmptyValue=this.allowEmptyValues}}
return this.invokeSuper(isc.SearchForm,"createItem",_1,_2,_3,_4,_5)},isc.A.submitValues=function isc_SearchForm_submitValues(_1,_2){if(this.search!=null){return this.search(this.getValuesAsCriteria(),this)}},isc.A.validate=function isc_SearchForm_validate(_1,_2,_3){if(this.validateTypeOnly){return this.invokeSuper(isc.SearchForm,"validate",_1,_2,true)}else{return this.invokeSuper(isc.SearchForm,"validate",_1,_2,_3)}},isc.A.getEditorType=function isc_SearchForm_getEditorType(_1){if(_1.editorType!=null)return _1.editorType;var _2=_1.type;if(_2&&isc.SimpleType.inheritsFrom(_2,"date")){if(_1.editorType==null){return this.defaultDateEditorType}}
var _3=(_2==isc.SearchForm.$12e||_2==isc.SearchForm.$52x||_2==isc.SearchForm.$677);if(_3&&_1.editorType==null){return"StaticTextItem"}
return this.Super("getEditorType",arguments)});isc.B._maxIndex=isc.C+4;isc.A=isc.SearchForm.getPrototype();isc.A.showFilterFieldsOnly=true;isc.A.validateTypeOnly=true;isc.SearchForm.registerStringMethods({search:"criteria,form"});isc.ClassFactory.defineClass("ValuesManager");isc.A=isc.ValuesManager;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.getById=function isc_c_ValuesManager_getById(_1){var _2=window[_1]||null;return _2?(isc.isA.ValuesManager(_2)?_2:null):null});isc.B._maxIndex=isc.C+1;isc.A=isc.ValuesManager.getPrototype();isc.A.unknownErrorMessage=null;isc.A=isc.ValuesManager.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.init=function isc_ValuesManager_init(){this.ns.ClassFactory.addGlobalID(this);if(this.unknownErrorMessage==null){this.unknownErrorMessage=isc.Canvas.getPrototype().unknownErrorMessage}
if(this.dataSource)this.bindToDataSource(this.dataSource);if(this.values==null)this.values={};isc.DynamicForm.$91f(this,this.values,{});if(this.members!=null){var _1=this.members;this.members=null;if(!isc.isAn.Array(_1))_1=[_1];for(var i=0;i<_1.length;i++){this.addMember(_1[i])}}
this.rememberValues()},isc.A.destroy=function isc_ValuesManager_destroy(){var _1=this.members;if(_1){for(var i=_1.length-1;i>=0;i--){this.removeMember(_1[i])}}
window[this.getID()]=null;this.Super("destroy",arguments)},isc.A.$49z=function isc_ValuesManager__saveDataReply(_1,_2,_3){if(!this.suppressServerDataSync&&_2&&_2.status>=0&&_3!=null){if(isc.isAn.Array(_3))_3=_3[0];if(_1.data)_1.data=isc.shallowClone(_1.data);this.setValues(_3);if(this.saveOperationType=="add")delete this.saveOperationType;var _4=(this.members?this.members.duplicate():[]);for(var i=0;i<_4.length;i++){var _6=_4[i];if(!isc.isA.DynamicForm(_6))continue;_6.saveOperationType=null}}
this.$491={request:_1,response:_2,data:_3};this.formSavedComplete()},isc.A.$71e=function isc_ValuesManager__updateMultipleMemberValue(_1,_2,_3,_4){_2=(_2!=null)?this.$702(_1,_2):_1;return this.$10y(_2,_3,_4)},isc.A.$10y=function isc_ValuesManager__updateValue(_1,_2,_3){if(this.$835)return;var _4=isc.isA.Number(_1);if(!_4&&isc.isA.DynamicForm(_3)&&_3.getItem(_1)==null){this.$66q(_3,_1);return}
var _5;var _6=_3.getFullDataPath();var _7;if(_3&&_3.getField){_7=_3.getField(_1)}
if(!_4){if(_1!=null&&!isc.isA.String(_1)){_1=_1.dataPath||_1.name}
if(_1){if(_6==null||_1.startsWith(isc.Canvas.$70l)){_6=_1}else{_6=this.$702(_6,_1)}}
if(_7==null){var _8=this.getDataSource();if(_8)_7=_8.getFieldForDataPath(_6)}}else{if(!_6){_6=_1}else if(!_6.endsWith(isc.Canvas.$70l)){_6+=isc.Canvas.$70l+_1}else{_6+=_1}}
isc.DynamicForm.$70n(_6,_7,_2,this.values,_3,true);var _5=_6.contains(isc.Canvas.$70l);if(_5&&this.autoSynchronize!==false){var _9=_6.split(isc.Canvas.$70l);if(parseInt(_9[_9.length-1])==_9[_9.length-1]){this.synchronizeMembers(_3)}else{var _10=this.getFieldsForDataPath(_6||_1);this.$835=true;for(var i=0;i<_10.length;i++){if(_10[i].form==_3)continue;_10[i].saveValue(_2)}
delete this.$835}}},isc.A.synchronizeMembers=function isc_ValuesManager_synchronizeMembers(_1){if(!this.members)return;this.$835=true;for(var i=0;i<this.members.length;i++){if(!_1||this.members[i].selectionComponent==_1){this.$707(this.members[i])}}
delete this.$835},isc.A.$702=function isc_ValuesManager__combineDataPaths(_1,_2){if(isc.isAn.Object(_2)){_2=_2.dataPath||_2.name}
return isc.DynamicForm.$702(_1,_2)},isc.A.$66q=function isc_ValuesManager__itemlessValueWarning(_1,_2){this.logWarn("Member Form: "+_1+" has explicitly specified value for field[s] '"+_2+"', but has no item associated with this fieldName. Ignoring this value. Values may be set for fields with no associated form item directly on the valuesManager via valuesManager.setValues(), but not on member forms. See ValuesManager documentation for more info.")},isc.A.$10z=function isc_ValuesManager__clearValue(_1,_2){var _3=_2.getFullDataPath();if(_3)_1=this.$702(_3,_1);return isc.DynamicForm.$70m(_1,this.values)},isc.A.bindToDataSource=function isc_ValuesManager_bindToDataSource(_1){if(!isc.isA.DataSource(_1))_1=isc.DataSource.getDataSource(_1);if(_1!=null)this.dataSource=_1},isc.A.setDataSource=function isc_ValuesManager_setDataSource(_1,_2){this.bindToDataSource(_1)},isc.A.getDataSource=function isc_ValuesManager_getDataSource(){if(isc.isA.String(this.dataSource)){if(this.serviceNamespace||this.serviceName){this.dataSource=this.lookupSchema()}else{var _1=isc.DS.get(this.dataSource);if(_1!=null)return _1;_1=this.getWindow()[this.dataSource];if(_1&&isc.isA.DataSource(_1))return(this.dataSource=_1)}}
return this.dataSource},isc.A.lookupSchema=function isc_ValuesManager_lookupSchema(){var _1;if(this.serviceName)_1=isc.WebService.getByName(this.serviceName,this.serviceNamespace);else _1=isc.WebService.get(this.serviceNamespace);if((this.serviceNamespace||this.serviceName)&&_1==null){this.logWarn("Could not find WebService definition: "+(this.serviceName?"serviceName: "+this.serviceName:"")+(this.serviceNamespace?"   serviceNamespace: "+this.serviceNamespace:"")+this.getStackTrace())}
if(!isc.isA.String(this.dataSource)){this.logWarn("this.dataSource was not a String in lookupSchema");return}
if(_1)return _1.getSchema(this.dataSource)},isc.A.getDataSourceField=function isc_ValuesManager_getDataSourceField(_1){var _2=this.getDataSource();if(!_2||!_1)return null;_1=_1.trim("/");var _3=this.getDataSource(),_4=_1.split("/"),_5;for(var i=0;i<_4.length;i++){if(isc.isAn.emptyString(_4[i]))continue;var _7=_4[i];_5=_3.getField(_7);_3=_5?isc.DataSource.getDataSource(_5.type):_3}
return _5},isc.A.getItems=function isc_ValuesManager_getItems(){if(!this.members)return;var _1=[];for(var i=0;i<this.members.length;i++){var _3=this.members[i];if(!_3.getItems)continue;_1.addList(_3.getItems())}
return _1},isc.A.getFields=function isc_ValuesManager_getFields(){return this.getItems()},isc.A.getItem=function isc_ValuesManager_getItem(_1,_2){return this.$706(_1,true,_2)},isc.A.getField=function isc_ValuesManager_getField(_1){return this.getItem(_1)},isc.A.getFieldsForDataPath=function isc_ValuesManager_getFieldsForDataPath(_1){return this.getItem(_1,true)},isc.A.getMembers=function isc_ValuesManager_getMembers(){return this.members},isc.A.getMember=function isc_ValuesManager_getMember(_1){var _2=window[_1];if(this.members&&this.members.contains(_2))return _2;return null},isc.A.getMemberForField=function isc_ValuesManager_getMemberForField(_1,_2){return this.$706(_1,false,_2)},isc.A.$706=function isc_ValuesManager__findMemberByField(_1,_2,_3){if(!this.members||_1==null||isc.isAn.emptyString(_1))return null;var _4=_1.trim(isc.Canvas.$70l);var _5=_4.split(isc.Canvas.$70l);var _6=_3?[]:null;for(var i=0;i<this.members.length;i++){var _8=this.members[i],_9=_8.getFullDataPath();if(_9==isc.Canvas.$70l||isc.isAn.emptyString(_9)){_9=null}else if(_9!=null){_9=_9.trim(isc.Canvas.$70l)}
if(_5&&_5.length>0&&_9!=null){var _10=null;for(var _11=0;_11<_5.length;_11++){_10=!_10?_5[_11]:(_10+isc.Canvas.$70l+_5[_11]);if(_9.endsWith(isc.Canvas.$70l)){_9=_9.substring(0,_9.length-1)}
if(_9==_10){if(!_2&&(_11==_5.length-1)){if(!_3)return _8;_6.add(_8);break}
if(_8.getField){var _12=_5.slice(_11+1).join(isc.Canvas.$70l);var _13=_8.getField(_12);if(_13){if(_2){if(!isc.isA.FormItem(_13))_13=null;if(_3){if(_13)_6.add(_13)}else{return _13}}else{if(_3)_6.add(_8);else return _8}}}}}}else{if(this.members[i].getItem){var _14=this.members[i].getField(_1);if(!_14){if(_1.startsWith(isc.Canvas.$70l)){_14=this.members[i].getField(_1.substring(1))}}
if(_14){if(_2){if(!isc.isA.FormItem(_14))_14=null;if(_3){if(_14)_6.add(_14)}else{return _14}}else{if(_3)_6.add(_8);else return _8}}}}}
return _3?_6:null},isc.A.getFileItemForm=function isc_ValuesManager_getFileItemForm(){if(!this.members)return;var _1=false,_2;for(var i=0;i<this.members.length;i++){if(this.members[i].getFileItemForm==null)continue;var _4=this.members[i].getFileItemForm();if(_4){if(_1){this.logWarn("ValuesManager defined with more than one member form  containing a FileItem. This is not supported - binary data may only be uploaded from one FileItem when saving ValuesManager data")}else{_2=_4;_1=true}}}
return _2},isc.A.validate=function isc_ValuesManager_validate(_1,_2,_3,_4,_5,_6){if(this.disableValidation)return true;if(this.dataSource&&this.dataSource.useLocalValidators!=null&&this.useLocalValidators==false)return true;var _7=this.hasErrors();this.clearHiddenErrors();var _8=true,_9=this.dataSource?isc.addProperties({},this.getDataSource().getFields()):null,_10={},_11={},_12=false;this.buildDataPathsRecursively(_11,"",this.getDataSource());if(this.members){var _13=isc.rpc?isc.rpc.startQueue():false;for(var i=0;i<this.members.length;i++){if(!isc.isA.DynamicForm(this.members[i]))continue;var _15=this.members[i],_16=_15.disableValidation,_17=this.members[i].getItems();if(!_16){if(_15.handleHiddenValidationErrors!=null){this.logInfo("form level 'handleHiddenValidationErrors' method suppressed in favor of valuesManager level handler","validation");_15.$43q=_15.handleHiddenValidationErrors}
_15.handleHiddenValidationErrors=this.$43r}
for(var j=0;j<_17.length;j++){var _19=_17[j].getFullDataPath()||_17[j].getFieldName();_12=_12||(_19&&_19.contains(isc.Canvas.$70l));if(_9&&this.members[i].getDataSource()==this.getDataSource()){delete _9[_19]}
if(_11&&_19){delete _11[_19.trim(isc.Canvas.$70l)]}}
var _20=_16?true:_15.validate(true,true,_3,_4,_5,true);_8=(_8&&_20);if(!_16){if(_15.$43s)_15.handleHiddenValidationErrors=_15.$43s;else delete _15.handleHiddenValidationErrors}
if(!_20){if(!(_15.isDrawn()&&_15.isVisible())){this.addHiddenErrors(_15.errors,_15)}else{this.addHiddenErrors(_15.getHiddenErrors(),_15)}}}
if(!_13&&isc.rpc)isc.rpc.sendQueue()}
var _21=this.getValues(),_22={},_23=_12?_11:_9;for(var _19 in _23){var _24=_23[_19],_10=_24.validators,_25=isc.DynamicForm.$70o(_19,_24,_21,null,true);if(_10!=null){for(var i=0;i<_10.length;i++){var _26=_10[i];if(!_26)continue;if(_25==null&&_26.type!='required'&&_26.type!="requiredIf")
{continue}
if(!this.processValidator(_24,_26,_25,null,_21)){if(_22[_19]==null)_22[_19]=[];var _27=_26.errorMessage||this.unknownErrorMessage;_22[_19].add(_27)}}}
if(_22[_19]&&_22[_19].length==1)_22[_19]=_22[_19][0]}
this.addHiddenErrors(_22);var _28=this.hasErrors();if(_7||_28){this.showErrors(true)}
if(isc.getKeys(_22).length>0)_8=false;return _8},isc.A.buildDataPathsRecursively=function isc_ValuesManager_buildDataPathsRecursively(_1,_2,_3){if(!isc.isA.DataSource(_3))return;if(_3.$85e){this.logWarn("detected ds loop at: "+_2+", refusing to recurse further");return}
_3.$85e=true;var _4=_3.getFields();for(var _5 in _4){_1[_2+_5]=_4[_5];if(_3.fieldIsComplexType(_5)){var _6=_3.getSchema(_4[_5].type);this.buildDataPathsRecursively(_1,_2+_5+isc.Canvas.$70l,_6)}}
delete _3.$85e},isc.A.getValidatedValues=function isc_ValuesManager_getValidatedValues(){if(!this.validate())return null;return this.getValues()},isc.A.$43r=function isc_ValuesManager__handleHiddenFormErrors(_1){var _2=this.valuesManager;_2.addHiddenErrors(_1,this);return false},isc.A.clearHiddenErrors=function isc_ValuesManager_clearHiddenErrors(){delete this.hiddenErrors},isc.A.addHiddenErrors=function isc_ValuesManager_addHiddenErrors(_1,_2){if(_1==null||isc.isAn.emptyObject(_1))return;if(!this.hiddenErrors)this.hiddenErrors={};if(_2){if(isc.isA.Canvas(_2))_2=_2.getID()}else _2=this.getID();if(!this.hiddenErrors[_2])this.hiddenErrors[_2]={};for(var _3 in _1){this.hiddenErrors[_2][_3]=this.$43t(this.hiddenErrors[_2][_3],_1[_3])}},isc.A.getHiddenErrors=function isc_ValuesManager_getHiddenErrors(_1){if(!_1){this.synchHiddenErrors()}
if(!this.hiddenErrors)return null;var _2={};for(var _3 in this.hiddenErrors){this.assembleHiddenErrorsRecursively(_2,this.hiddenErrors[_3])}
return _2},isc.A.assembleHiddenErrorsRecursively=function isc_ValuesManager_assembleHiddenErrorsRecursively(_1,_2,_3,_4){if(_3==null)_3="";var _5=_3;if(_4!=null)_5+="["+_4+"]";if(isc.isA.List(_2)){for(var i=0;i<_2.length;i++){if(_2[i]!==null){if(isc.isAn.Object(_2[i])){this.assembleHiddenErrorsRecursively(_1,_2[i],_5,i)}else{if(_1[_5]==null)_1[_5]=[];_1[_5][i]=_2[i]}}}}else if(isc.isAn.Object(_2)){for(var _7 in _2){if(isc.isAn.Object(_2[_7])){if(_5==""){this.assembleHiddenErrorsRecursively(_1,_2[_7],_7)}else{this.assembleHiddenErrorsRecursively(_1,_2[_7],_5+isc.Canvas.$70l+_7)}}else{if(_5==""){_1[_7]=_2[_7]}else{_1[_5+isc.Canvas.$70l+_7]=_2[_7]}}}}else{_1[_5]=_2}
return _1},isc.A.synchHiddenErrors=function isc_ValuesManager_synchHiddenErrors(){var _1=this.hiddenErrors,_2=this.getID();if(_1&&_1[_2]){for(var _3 in _1[_2]){var _4=_1[_2][_3],_5=this.getItem(_3),_6=_5?_5.form:null;if(_5){_6.addFieldErrors(_3,_4);delete _1[_2][_3]}}}
var _7=_1[_2];_1=this.hiddenErrors={};if(_7)_1[_2]=_7;if(this.members){for(var i=0;i<this.members.length;i++){if(!isc.isA.DynamicForm(this.members[i]))continue;var _9=this.members[i],_10=_9.getID(),_11=_9.errors;if(!_11||isc.isAn.emptyObject(_11))continue;if(!_9.isVisible()||!_9.isDrawn()){_11=isc.addProperties({},_11);_1[_10]=_11}else{for(var _3 in _11){var _5=_9.getItem(_3);if(!_5){if(!_1[_2])_1[_2]={};_1[_2][_3]=_11[_3];delete _11[_3]}else if(!_5.visible){if(!_1[_10])_1[_10]={};_1[_10][_3]=_11[_3]}}}}}},isc.A.processValidator=function isc_ValuesManager_processValidator(_1,_2,_3,_4,_5){return isc.Validator.processValidator(_1,_2,_3,_4,_5)},isc.A.$21z=function isc_ValuesManager__handleHiddenValidationErrors(_1){var _2=this.getHiddenErrors(_1);if(_2==null||isc.getKeys(_2).length==0)return;var _3;if(this.handleHiddenValidationErrors){_3=this.handleHiddenValidationErrors(_2)}
if(_3==false)return;var _4="Validation failed with the following errors:";var _5=isc.isAn.Array(_2)?_2:[_2];for(var i=0;i<_5.length;i++){var _7=_5[i];for(var _8 in _7){var _9=_2[_8];if(!isc.isAn.Array(_9))_9=[_9];if(_9.length==0)continue;_4+="\n"+_8+":";for(var i=0;i<_9.length;i++){_4+=(i==0?"- ":"\n - ")+_9[i]}}}
this.logWarn(_4,"validation")},isc.A.setErrors=function isc_ValuesManager_setErrors(_1,_2){this.clearHiddenErrors();if(isc.isA.List(_1))_1=_1[0];var _3=(this.members?this.members.duplicate():[]);for(var i=0;i<_3.length;i++){if(!isc.isA.DynamicForm(_3[i]))continue;var _5=_3[i],_6=!_5.isVisible()||!_5.isDrawn(),_7=_5.getItems(),_8={},_9={},_10=_5.getSelectionChain();for(var j=0;j<_7.getLength();j++){var _12=_7[j],_13=_12.getFullDataPath(),_14=_12.getFieldName(),_15=this.getItemErrors(_1,_13,_10);if(_15!=null){_8[_14]=_15;if(_6||!_12.visible){_9[_14]=_15}
this.deleteItemErrors(_1,_13,_10)}}
_5.setErrors(_8,false);if(!isc.isAn.emptyObject(_9))
this.addHiddenErrors(_9,_5)}
this.addHiddenErrors(_1);if(_2)this.showErrors(true)},isc.A.getItemErrors=function isc_ValuesManager_getItemErrors(_1,_2,_3){var _4=_2.trim(isc.Canvas.$70l),_5=_4.contains(isc.Canvas.$70l);if(isc.isAn.Array(_1))_1=_1[0];if(!_5){var _6=_1[_2]}else{var _7=_4.split(isc.Canvas.$70l),_6=_1,_8=0;for(var i=0;i<_7.length;i++){_6=_6[_7[i]];if(isc.isAn.Array(_6)){if(_3.length>_8){_6=_6[_3[_8++]]}else{_6=_6[0]}}
if(!_6)break}}
if(_6){if(!isc.isAn.Array(_6))_6=[_6];var _10=[];for(var i=0;i<_6.length;i++){if(_6[i].errorMessage){_10.add(_6[i].errorMessage)}else{_10.add(_6[i])}}
return _10.length>1?_10:_10[0]}},isc.A.deleteItemErrors=function isc_ValuesManager_deleteItemErrors(_1,_2,_3){var _4=_2.trim(isc.Canvas.$70l),_5=_4.contains(isc.Canvas.$70l);if(isc.isAn.Array(_1))_1=_1[0];if(!_5){delete _1[_2]}else{var _6=_4.split(isc.Canvas.$70l);var _7=_1,_8=[],_9=0;for(var i=0;i<_6.length;i++){_8.add(_7);_7=_7[_6[i]];if(isc.isAn.Array(_7)){if(_3.length>_9){_7=_7[_3[_9++]]}else{_7=_7[0]}}
if(!_7)break}
if(_7)delete _7;for(var i=_8.length-1;i>=0;i--){if(isc.isAn.emptyObject(_8[i])){delete _8[i]}}}},isc.A.$43t=function isc_ValuesManager__addFieldErrors(_1,_2){if(!_1)return _2;if(!_2)return _1;if(!isc.isAn.Array(_1))_1=[_1];if(isc.isA.String(_2))_1.add(_2);else _1.addList(_2);return _1},isc.A.addFieldErrors=function isc_ValuesManager_addFieldErrors(_1,_2,_3){var _4=true;var _5=this.getMemberForField(_1);if(_5!=null&&isc.isA.DynamicForm(_5)){_5.addFieldErrors(_1,_2,false);var _6=_5.getItem();if(_5.isVisible()&&_5.isDrawn()&&_6&&_6.visible){_4=false}}
if(_4){if(!this.hiddenErrors)this.hiddenErrors={};var _7=_5?_5.getID():this.getID();if(!this.hiddenErrors[_7])this.hiddenErrors[_7]={};this.hiddenErrors[_7][_1]=this.$43t(this.hiddenErrors[_7][_1],_2)}
if(_3)this.showFieldErrors(_1)},isc.A.setFieldErrors=function isc_ValuesManager_setFieldErrors(_1,_2,_3){var _4=true;var _5=this.getMemberForField(_1);if(_5!=null&&isc.isA.DynamicForm(_5)){_5.setFieldErrors(_1,_2,false);var _6=_5.getItem();if(_5.isVisible()&&_5.isDrawn()&&_6&&_6.visible){_4=false}}
if(_4){if(!this.hiddenErrors)this.hiddenErrors={};this.hiddenErrors[_1]=_2}
if(_3)this.showFieldErrors(_1)},isc.A.clearErrors=function isc_ValuesManager_clearErrors(_1){this.setErrors({},_1)},isc.A.clearFieldErrors=function isc_ValuesManager_clearFieldErrors(_1,_2){var _3=this.getMemberForField(_1);if(_3&&isc.isA.DynamicForm(_3))_3.clearFieldErrors(_1,_2);if(this.hiddenErrors)delete this.hiddenErrors[_1]},isc.A.getErrors=function isc_ValuesManager_getErrors(){var _1=isc.addProperties({},this.getHiddenErrors(true));if(this.members){for(var i=0;i<this.members.length;i++){if(!isc.isA.DynamicForm(this.members[i]))continue;isc.addProperties(_1,this.members[i].getErrors())}}
if(!isc.isA.emptyObject(_1))return _1
return null},isc.A.getFieldErrors=function isc_ValuesManager_getFieldErrors(_1){var _2=this.getMemberForField(_1)
if(_2&&isc.isA.DynamicForm(_2))return _2.getFieldErrors(_1);if(this.hiddenErrors&&this.hiddenErrors[this.getID()])
return this.hiddenErrors[this.getID()][_1]},isc.A.hasErrors=function isc_ValuesManager_hasErrors(){if(this.hiddenErrors&&!isc.isA.emptyObject(this.hiddenErrors)){for(var _1 in this.hiddenErrors){if(this.hiddenErrors[_1]&&!isc.isAn.emptyObject(this.hiddenErrors[_1]))
return true}}
if(this.members==null)return false;for(var i=0;i<this.members.length;i++){if(isc.isA.DynamicForm(this.members[i])&&this.members[i].hasErrors())return true}
return false},isc.A.hasFieldErrors=function isc_ValuesManager_hasFieldErrors(_1){var _2=this.getMemberForField(_1);if(_2&&isc.isA.DynamicForm(_2)&&_2.hasFieldErrors(_1))return true;var _3=this.getHiddenErrors(true);if(_3&&_3[_1]!=null)return true;return false},isc.A.showErrors=function isc_ValuesManager_showErrors(_1){if(this.members){for(var i=0;i<this.members.length;i++){if(!isc.isA.DynamicForm(this.members[i]))continue;if(!this.members[i].isDrawn()||!this.members[i].isVisible())continue;this.members[i].$116a=true;this.members[i].showErrors()}}
if(this.hiddenErrors!=null){this.$21z(_1)}},isc.A.showFieldErrors=function isc_ValuesManager_showFieldErrors(_1){var _2=this.getMemberForField(_1);if(_2&&isc.isA.DynamicForm(_2)&&_2.isVisible()&&_2.isDrawn()){var _3=_2.getItem(_1);if(_3&&_3.visible){_3.redraw("Validation errors modified");return}}
this.$21z()},isc.A.getFilterCriteria=function isc_ValuesManager_getFilterCriteria(){var _1={};if(this.members){for(var i=0;i<this.members.length;i++){isc.addProperties(_1,this.members[i].getFilterCriteria())}}
var _3=this.getValues(),_4;for(var _5 in _3){if(_1[_5]!==_4)delete _3[_5]}
isc.addProperties(_1,isc.DataSource.filterCriteriaForFormValues(_3));return _1},isc.A.getValues=function isc_ValuesManager_getValues(){if(this.members!=null){var _1=isc.EH.getFocusCanvas();if(this.members.contains(_1)&&_1.updateFocusItemValue)_1.updateFocusItemValue()}
return isc.addProperties({},this.values)},isc.A.setValues=function isc_ValuesManager_setValues(_1){if(isc.isAn.Array(_1)){var _2=isc.isA.Object(_1[0]);this.logWarn("values specified as an array."+(_2?" Treating the first item in the array as intended values.":" Ignoring specified values."));if(_2)_1=_1[0];else _1=null}
var _3={};isc.DynamicForm.$91f(this,_1,_3);_1=_3;this.values=_1;if(this.members){for(var i=0;i<this.members.length;i++){this.$707(this.members[i])}}
this.rememberValues()},isc.A.setData=function isc_ValuesManager_setData(_1){return this.setValues(_1)},isc.A.clearValues=function isc_ValuesManager_clearValues(){this.setValues({})},isc.A.getMemberValues=function isc_ValuesManager_getMemberValues(_1){var _2=this.getMember(_1);if(_2!=null)return _2.getValues()},isc.A.setMemberValues=function isc_ValuesManager_setMemberValues(_1,_2){var _3=this.getMember(_1);if(_3!=null)return _3.setValues(_2)},isc.A.rememberValues=function isc_ValuesManager_rememberValues(){var _1=this.getValues();var _2={},_3=[];isc.DynamicForm.$91f(this,_1,_2,_3);this.$10s=_2;this.$10t=_3;return this.$10s},isc.A.getOldValues=function isc_ValuesManager_getOldValues(){var _1={};isc.addProperties(_1,this.$10s);return _1},isc.A.getChangedValues=function isc_ValuesManager_getChangedValues(){return this.valuesHaveChanged(true)},isc.A.resetValues=function isc_ValuesManager_resetValues(){var _1={};isc.DynamicForm.$91f(this,this.$10s,_1);for(var i=0;i<this.$91h;i++){isc.DynamicForm.$70m(this.$91h[i],_1,this)}
this.setValues(_1)},isc.A.valuesHaveChanged=function isc_ValuesManager_valuesHaveChanged(_1){var _2=this.getValues();var _3=this.$10s||{};return isc.DynamicForm.valuesHaveChanged(this,_1,_2,_3)},isc.A.getValue=function isc_ValuesManager_getValue(_1,_2){return isc.DynamicForm.$70o(_1,this.getField(_1),this.values,_2,true,"vm_getvalue")},isc.A.setValue=function isc_ValuesManager_setValue(_1,_2){var _3=false,_4,_5;if(this.members){var _6=this.getItem(_1,true);if(_6&&_6.length>0){for(var i=0;i<_6.length;i++){var _8=_6[i];if(_8&&_8.setValue){var _9=_8.type?isc.SimpleType.getType(_8.type):null,_10=_2,_11=(_2===_5);if(!_11&&_9&&_9.getAtomicValue&&_9.updateAtomicValue){_1=_8.getFullDataPath();isc.DynamicForm.$70n(_1,null,_2,this.values,null,true);_10=_9.getAtomicValue(_2)}
if(_11)_8.clearValue();else _8.setValue(_10);_3=true}}}}
if(!_3){if(_2===_5){isc.DynamicForm.$70m(_1,this.values)}else{isc.DynamicForm.$70n(_1,null,_2,this.values,null,true)}}
var _12=this.$706(_1,false,true);if(_12){for(var i=0;i<_12.length;i++){if(_4&&_4.setData){var _13=_1;if(_1.indexOf(isc.Canvas.$70l)!=-1){_13=_1.substring(0,_1.lastIndexOf(isc.Canvas.$70l));_4.setData(isc.DynamicForm.$70o(_13,null,this.values,_4,true))}}}}},isc.A.clearValue=function isc_ValuesManager_clearValue(_1){this.setValue(_1)},isc.A.addMember=function isc_ValuesManager_addMember(_1,_2){if(isc.isA.String(_1))_1=window[_1];if(!isc.isA.Canvas(_1)){this.logWarn("addMember() passed invalid object: "+this.echo(_1)+" - this should be a Canvas instance");return}
if(_1.valuesManager!=null)_1.valuesManager.removeMember(_1);if(this.members==null)this.members=[];var _3=_1.getDataSource();if(_3!=null&&!_2&&_3!=this.getDataSource()){this.logWarn("addMember(): mismatched DataSources; new member form "+_1+" has dataSource: '"+_3.ID+"', valuesManager has DataSource "+(this.getDataSource()!=null?"'"+this.getDataSource().ID+"'":"[NONE]"))}
if(this.getDataSource()!=null&&_1.isMultipart&&_1.isMultipart()&&_1.isMultipart())
{this.logWarn("addMember(): new member form "+_1+" is flagged as using multipart encoding. Multipart forms require direct form submission to transfer uploaded files to the server - any uploaded files from this member form will be dropped when saving values from this ValuesManager to the server.")}
if(_1.dataArity=="single"&&_1.autoTrackSelection){if(_1.selectionComponent==null||_1.$837){var _4=_1.getFullDataPath(),_5=_4?this.getDataSourceField(_4):null,_6=isc.DynamicForm.$70o(_4,null,this.values,_1,true),_7=isc.isAn.Array(_6)||(_5&&_5.multiple);if(_7){var _8=this.getMemberForField(_4,true);if(_8&&_8.length>0){for(var i=0;i<_8.length;i++){var _10=_8[i];if(_10.dataArity=="multiple"){_1.setSelectionComponent(_10);_1.$837=true;break}}}}}}else{var _4=_1.getFullDataPath(),_11=this.getMemberForField(_4,true);if(_11&&_11.length>0){for(var i=0;i<_11.length;i++){if(_11[i].dataArity=="single"&&_11[i].autoTrackSelection&&(_11[i].selectionComponent==null||_11[i].$837==true))
{_11[i].setSelectionComponent(_1);_11[i].$837=true}}}}
if(_1.dataArity=="multiple"&&_1.autoTrackSelection){var _4=_1.getFullDataPath(),_12=_4&&_4.contains(isc.Canvas.$70l);if(_12){var _13=_4.split(isc.Canvas.$70l);_4="/";for(var i=_13.length-2;i>=0;i--){for(var j=0;j<=i;j++){_4+=_13[j];if(j!=i)_4+="/"}
var _5=this.getDataSourceField(_4),_6=isc.DynamicForm.$70o(_4,null,this.values,_1,true),_7=isc.isAn.Array(_6)||(_5&&_5.multiple);if(_7)break}}
if(_7){var _8=this.getMemberForField(_4,true);if(_8&&_8.length>0){for(var i=0;i<_8.length;i++){var _10=_8[i];if(_10.dataArity=="multiple"){_1.setSelectionComponent(_10);_1.$837=true;break}}}}
var _4=_1.getFullDataPath();if(_4&&_4!=""){var _15=this.members;for(var i=0;i<_15.length;i++){if(_15[i]==_1)continue;if(_15[i].dataArity=="single")continue;var _16=_15[i].getFullDataPath();if(_16&&_16!=_4&&_16.startsWith(_4))
{if(_15[i].selectionComponent!=null){if(_15[i].$837){var _17=_15[i].selectionComponent.getFullDataPath();if(_4.length>_17.length){_15[i].setSelectionComponent(_1);_15[i].$837=true}}}}}}}
this.members.add(_1);_1.valuesManager=this;if(_1.dataSource==null&&this.dataSource!=null&&_1.getFields){var _18=isc.isA.DynamicForm(_1)?_1.$834:_1.getFields();_18=_18||_1.getFields();var _4=_1.getFullDataPath();var _19=this.getDataSource();if(_4){var _19=_19.getDataSourceForDataPath(_4,true)}
_1.setDataSource(_19,_18)}
this.$707(_1,true);_1.$703=_2;this.rememberValues()});isc.evalBoundary;isc.B.push(isc.A.$707=function isc_ValuesManager__setMemberValues(_1,_2){if(_1.getFields==null)return;var _3=_1.getFullDataPath(),_4=this.getField(_3),_5=isc.DynamicForm.$70o(_3,null,this.values,_1,true),_6=isc.isAn.Array(_5)||(_4&&_4.multiple),_7=_1.selectionComponent;if(_6){if(_1.dataArity=="single"){if(_7!=null){var _8=_1.$71d,_9=false;for(var i=0;i<_5.length;i++){if(_5[i]==_8){_9=true;break}}
if(_9){_5=_5[i]}else{_5=null;this.logDebug("Unable to locate selectionComponent's selected record in $707.  Record is: "+isc.Comm.serialize(_8))}}else{if(isc.isAn.Array(_5))_5=_5[0]}}}else{if(_5!=null&&_1.dataArity=="multiple")_5=[_5]}
if(!isc.isA.DynamicForm(_1)){if(!_1.setData)return;var _11=_1.getFullDataPath(),_12=_2?_1.getData():null;if(_5==null){if(_2){isc.DynamicForm.$70n(_11,null,_12,this.values,_1,true)}}else{if(_2&&_12!=null&&!isc.isAn.emptyObject(_12)&&!isc.isAn.emptyArray(_12))
{this.logInfo("ValuesManager member:"+_1.getID()+" has existing values:"+this.echo(_12)+", replacing with values from this valuesManager:"+this.echo(_5))}
_1.setData(_5)}}else{var _13=_1.getItems(),_14=false,_15;for(var i=0;i<_13.getLength();i++){var _16=_13[i];var _17=_16.getTrimmedDataPath()||_16.getFieldName();if(_17==null)continue;var _3=_1.getFullDataPath(),_18=_17.startsWith(isc.Canvas.$70l),_19=_18?_17:this.$702(_3,_17);var _20=isc.DynamicForm.$70o(_19,null,this.values,_1,true);if(!_18){var _21=isc.DynamicForm.$70o(_19,null,_1.values,_1,true);if(_21!==_15){this.logInfo("Member form "+_1+" has specified value for field '"+_19+"' which collides with an already specified value in this ValuesManager. Resetting the value on the member form.")}}
if(_20!==_15){_1.setValue(_17,_20)}else{if(!_2)_1.clearValue(_17)}
if(_16.shouldSaveValue!=false){var _22=_1.getValue(_17);if(_22===_15){isc.DynamicForm.$70m(_19,this.values,_1,true)}else{isc.DynamicForm.$70n(_19,null,_22,this.values,_1,true)}
_14=true}
if(_16.formValuesChanged&&isc.isA.Function(_16.formValuesChanged))
_16.formValuesChanged();if(_14){if(_1.valuesChanged)_1.valuesChanged();if(_1.markForRedraw)_1.markForRedraw()}}
if(_2){this.$709(_1)}}},isc.A.$709=function isc_ValuesManager__findItemlessFormValues(_1,_2,_3,_4,_5){if(_2==null)_2=_1.getValues();if(_4==null)_4=[];for(var _6 in _2){var _7=_3?this.$702(_3,_6):_6;if(!_1.getItem(_7)){var _8=_2[_6];if(!isc.isAn.Object(_8)||isc.isA.Date(_8)||isc.isAn.Array(_8)){_4.add(_7);_1.clearValue(_7)}else{this.$709(_1,_8,_3,_4,true)}}}
if(!_5&&_4.length>0){this.$66q(_1,_4)}},isc.A.addMembers=function isc_ValuesManager_addMembers(_1){if(!isc.isAn.Array(_1))this.addMember(_1);else{for(var i=0;i<_1.length;i++){this.addMember(_1[i])}}},isc.A.removeMember=function isc_ValuesManager_removeMember(_1){if(isc.isA.String(_1)){_1=isc.Class.getArrayItem(_1,this.members);if(_1==null)return}else if(this.members&&!this.members.contains(_1))return;if(this.members)this.members.remove(_1);delete _1.valuesManager},isc.A.removeMembers=function isc_ValuesManager_removeMembers(_1){if(!isc.isAn.Array(_1))this.removeMember(_1);else{for(var i=0;i<_1.length;i++){this.removeMember(_1[i])}}},isc.A.getPrintHTML=function isc_ValuesManager_getPrintHTML(){var _1=this.getValues(),_2=isc.StringBuffer.create();_2.append("<TABLE border=1><TR><TD align='center' style='font-weight:bold;'>Field</TD>","<TD align='center' style='font-weight:bold;'>Value</TD>");for(var _3 in _1){_2.append("<TR><TD>",_3,"</TD><TD>",_1[_3],"</TD></TR>")}
_2.append("</TABLE>");return _2.toString()},isc.A.getAllDBCs=function isc_ValuesManager_getAllDBCs(_1){var _2=[];if(_1==null){for(var i=0;i<this.members.length;i++){_2.addAll(this.getAllDBCs(this.members[i]))}
var _4=[];for(var i=0;i<_2.length;i++){if(!_4.contains(_2[i]))_4.add(_2[i])}
return _4}
if(isc.isA.DataBoundComponent(_1))_2.add(_1);var _5=_1.children;if(!_5)return _2;for(var i=0;i<_5.length;i++){var _1=_5[i];if(isc.isA.DataBoundComponent(_1))_2.add(_1);_2.addAll(this.getAllDBCs(_1))}
return _2});isc.B._maxIndex=isc.C+72;isc.ValuesManager.registerStringMethods({handleHiddenValidationErrors:"errors",submitValues:"values,valuesManager"});if(isc.Window){isc.ClassFactory.defineClass("ColorPicker",isc.Window);isc.A=isc.ColorPicker;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.getSharedColorPicker=function isc_c_ColorPicker_getSharedColorPicker(_1,_2){_1=_1||{};if(!isc.isA.ColorPicker(this.$56b)){this.$56b=isc.ColorPicker.create(_1)}else{if(_1.colorSelected==null)delete this.$56b.colorSelected;if(_1.colorChanged==null)delete this.$56b.colorChanged;this.$56b.setProperties(_1)}
if(!_2){var _3=this.$56b;if(_3.$56c!=_3.defaultPickMode){_3.$56c=_3.defaultPickMode;if(_3.$56c=='simple'){_3.removeComplexElements();if(_3.allowComplexMode){_3.modeToggleButton.setTitle(_3.moreButtonTitle)}}else{if(!_3.$56i){_3.createComplexElements()}
_3.addComplexElements();_3.modeToggleButton.setTitle(_3.lessButtonTitle)}}
_3.setHtmlColor(_3.defaultColor);_3.setOpacity(_3.defaultOpacity)}
return this.$56b});isc.B._maxIndex=isc.C+1;isc.addGlobal("ColorChooser",isc.ColorPicker);isc.A=isc.ColorPicker.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.canFocusInHeaderButtons=true;isc.A.autoSize=true;isc.A.keepInParentRect=true;isc.A.isModal=true;isc.A.autoCenter=true;isc.A.autoDraw=false;isc.A.showMinimizeButton=false;isc.A.layoutMargin=2;isc.A.showOkButton=true;isc.A.okButtonConstructor="IButton";isc.A.okButtonDefaults={width:80,autoParent:"buttonLayout",click:function(){if(this.creator.colorSelected){this.creator.colorSelected(this.creator.getHtmlColor(),this.creator.getOpacity())}
this.creator.hide()}};isc.A.showCancelButton=true;isc.A.cancelButtonConstructor="IButton";isc.A.cancelButtonDefaults={title:"Cancel",width:80,autoParent:"buttonLayout",click:function(){this.creator.hide()}};isc.A.showModeToggleButton=true;isc.A.modeToggleButtonConstructor="IButton";isc.A.modeToggleButtonDefaults={width:80,autoParent:"buttonLayout",click:function(){this.creator.$56e()}};isc.A.showButtonLayout=true;isc.A.buttonLayoutConstructor="HLayout";isc.A.buttonLayoutDefaults={autoParent:"contentLayout"};isc.A.defaultColor="#808080";isc.A.colorButtonSize=20;isc.A.colorButtonBaseStyle="colorChooserCell";isc.A.colorArray=["#000000","#993300","#333300","#003300","#003366","#000080","#333399","#333333","#800000","#FF6600","#808000","#008000","#008080","#0000FF","#666699","#808080","#FF0000","#FF9900","#99CC00","#339966","#33CCCC","#3366FF","#800080","#999999","#FF00FF","#FFCC00","#FFFF00","#00FF00","#00FFFF","#00CCFF","#993366","#C0C0C0","#FF99CC","#FFCC99","#FFFF99","#CCFFCC","#CCFFFF","#99CCFF","#CC99FF","#FFFFFF"];isc.A.numBasicColorRows=5;isc.A.numBasicColorColumns=8;isc.A.basicColorLayoutDefaults={_constructor:"VLayout",autoParent:"none"};isc.A.basicColorRowLayoutDefaults={_constructor:"HLayout",layoutBottomMargin:1,membersMargin:1};isc.A.basicColorSwatchDefaults={_constructor:"StatefulCanvas",overflow:"hidden",title:"",showFocusOutline:false,showTitle:false,showFocused:true,showRollOver:true,showFocusedAsOver:true,canFocus:true,click:function(){var _1=this.creator;_1.setHtmlColor(this.backgroundColor);if(_1.$56c=="simple"){_1.$56g(this.backgroundColor)}}};isc.A.swatchWidth=170;isc.A.swatchHeight=170;isc.A.lumStep=4;isc.A.lumWidth=15;isc.A.supportsTransparency=true;isc.A.opacityText="Lorem ipsum dolor sit amet, consectetuer adipiscing elit.";isc.A.swatchImageURL="[SKIN]ColorPicker/spectrum.png";isc.A.crosshairImageURL="[SKIN]ColorPicker/crosshair.png";isc.A.lessButtonTitle="<< Less";isc.A.moreButtonTitle="More >>";isc.A.basicColorLabel="Basic Colors:";isc.A.selectedColorLabel="Selected Color:";isc.A.opacitySliderLabel="Opacity:";isc.A.defaultOpacity=100;isc.A.redFieldTitle="Red";isc.A.redFieldPrompt="The Red component of the selected color";isc.A.greenFieldTitle="Green";isc.A.greenFieldPrompt="The Green component of the selected color";isc.A.blueFieldTitle="Blue";isc.A.blueFieldPrompt="The Blue component of the selected color";isc.A.htmlFieldTitle="HTML";isc.A.htmlFieldPrompt="The selected color&#39;s HTML coding";isc.A.hueFieldTitle="Hue";isc.A.hueFieldPrompt="The Hue (base tone) of the selected color";isc.A.satFieldTitle="Sat";isc.A.satFieldPrompt="The Saturation (color purity) of the selected color";isc.A.lumFieldTitle="Lum";isc.A.lumFieldPrompt="The Luminosity (brightness) of the selected color";isc.A.okButtonTitle="OK";isc.A.cancelButtonTitle="Cancel";isc.A.autoPosition=true;isc.A.autoCenterOnShow=true;isc.A.defaultPickMode="simple";isc.A.allowComplexMode=true;isc.A.$56f=true;isc.B.push(isc.A.closeClick=function isc_ColorPicker_closeClick(){this.hide()});isc.B._maxIndex=isc.C+1;isc.A=isc.ColorPicker.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.title=null;isc.A.selectTitle="Select a Color";isc.B.push(isc.A.show=function isc_ColorPicker_show(){if(this.autoPosition){this.autoCenter=false;var _1=isc.EH.getLastEvent();this.placeNear(_1.x,_1.y)}else{if(this.autoCenterOnShow)this.autoCenter=true}
this.Super("show",arguments);this.cancelButton.focus()},isc.A.initWidget=function isc_ColorPicker_initWidget(){this.title=this.title||this.selectTitle;this.$56c=this.defaultPickMode;if(!this.allowComplexMode){this.$56c="simple"}
this.addAutoChild("basicColorLayout");var _1=this.numBasicColorRows,_2=this.numBasicColorColumns;var _3={height:this.colorButtonSize};for(var i=0;i<_1;++i){var _5=this.createAutoChild("basicColorRowLayout",_3);for(var j=0;j<_2;++j){var _7=this.createAutoChild("basicColorSwatch",{baseStyle:this.colorButtonBaseStyle,width:this.colorButtonSize,height:this.colorButtonSize,backgroundColor:this.colorArray[i*_2+j]});_5.addMember(_7)}
this.basicColorLayout.addMember(_5)}
this.leftHandLayout=isc.VLayout.create({autoDraw:false});this.leftHandLayout.addMember(this.basicColorLayout);this.innerContentLayout=isc.HLayout.create({autoDraw:false,align:"center",members:[this.leftHandLayout]});this.contentLayout=isc.VLayout.create({autoDraw:false,members:[this.innerContentLayout]});this.addItem(this.contentLayout);if(this.$56c=="simple"){this.showOkButton=false}
if(!this.allowComplexMode){this.showModeToggleButton=false}
this.addAutoChild("buttonLayout");this.addAutoChild("okButton",{title:this.okButtonTitle});this.addAutoChild("cancelButton",{title:this.cancelButtonTitle});this.addAutoChild("modeToggleButton",{title:(this.$56c=="simple"&&this.allowComplexMode?this.moreButtonTitle:this.lessButtonTitle)});if(this.$56c!="simple"){this.createComplexElements();this.addComplexElements()}
this.setHtmlColor(this.defaultColor);this.$56h();this.setOpacity(this.defaultOpacity);this.Super("initWidget",arguments)},isc.A.createComplexElements=function isc_ColorPicker_createComplexElements(){if(this.$56c!='complex'){return}
this.$56i=isc.DynamicForm.create({autoDraw:false,cellPadding:1,padding:10,width:65,fields:[{name:"pickerRedVal",title:this.redFieldTitle,type:"text",width:"40",defaultValue:this.$56j,prompt:this.redFieldPrompt,picker:this,changed:function(_2,_3,_4){this.picker.setRed(_4)}},{name:"pickerGrnVal",title:this.greenFieldTitle,type:"text",width:"40",defaultValue:this.$56k,prompt:this.greenFieldPrompt,picker:this,changed:function(_2,_3,_4){this.picker.setGreen(_4)}},{name:"pickerBluVal",title:this.blueFieldTitle,type:"text",width:"40",defaultValue:this.$56l,prompt:this.blueFieldPrompt,picker:this,changed:function(_2,_3,_4){this.picker.setBlue(_4)}},{name:"pickerHtmlVal",title:this.htmlFieldTitle,type:"text",width:"65",defaultValue:this.$56m,prompt:this.htmlFieldPrompt,picker:this,changed:function(_2,_3,_4){this.picker.setHtmlColor(_4)}}]});this.$56n=isc.DynamicForm.create({autoDraw:false,cellPadding:1,padding:10,width:65,fields:[{name:"pickerHueVal",title:this.hueFieldTitle,type:"text",width:"40",defaultValue:this.$56o,prompt:this.hueFieldPrompt,picker:this,changed:function(_2,_3,_4){this.picker.setHue(_4)}},{name:"pickerSatVal",title:this.satFieldTitle,type:"text",width:"40",defaultValue:this.$56p,prompt:this.satFieldPrompt,picker:this,changed:function(_2,_3,_4){this.picker.setSaturation(_4)}},{name:"pickerLumVal",title:this.lumFieldTitle,type:"text",width:"40",defaultValue:this.$56q,prompt:this.lumFieldPrompt,picker:this,changed:function(_2,_3,_4){this.picker.setLuminosity(_4)}}]});this.$56r=isc.Img.create({autoDraw:false,imageWidth:16,imageHeight:16,src:this.crosshairImageURL,width:16,height:16,imageType:"normal",canDrag:true,canDrop:true,dragAppearance:"target",picker:this,dragMove:function(){this.picker.$56s=true;this.picker.$56t(this.parentElement.getOffsetX(),this.parentElement.getOffsetY())}});this.$56u=isc.Canvas.create({autoDraw:false,width:100,height:40,backgroundColor:this.getHtmlColor()});this.$56v=isc.Canvas.create({autoDraw:false,width:60,height:40,overflow:"hidden",border:"1px black solid",contents:this.opacityText,children:[this.$56u]});this.$56w=isc.VStack.create({lumWidth:15,height:this.swatchHeight,margin:5,border:"1px solid black"});for(var i=0;i<this.swatchHeight/this.lumStep;i++){this.$56w.addMember(isc.Canvas.create({width:this.lumWidth,height:this.lumStep,margin:0,padding:0,overflow:"hidden"}))}
this.$56x=isc.Slider.create({minValue:0,maxValue:240,numValues:240,margin:5,length:this.swatchHeight,width:10,showTitle:false,showValue:false,showRange:false});if(this.supportsTransparency){this.$56y=isc.Slider.create({autoDraw:false,vertical:false,margin:5,minValue:0,maxValue:100,numValues:100,length:100,height:12,width:100,thumbThickWidth:15,thumbThinWidth:10,showTitle:false,showValue:false,showRange:false,value:100});this.$56z=isc.HLayout.create({autoDraw:false,layoutLeftMargin:5,layoutRightMargin:5,membersMargin:5,members:[isc.Label.create({autoDraw:false,margin:5,contents:this.opacitySliderLabel,width:this.swatchWidth-105,height:10}),this.$56y]})}
this.$560=isc.VLayout.create({autoDraw:false,layoutLeftMargin:5,layoutRightMargin:5,membersMargin:5,members:[isc.HLayout.create({autoDraw:false,height:this.swatchHeight,members:[isc.Img.create({autoDraw:false,margin:5,width:this.swatchWidth+12,height:this.swatchHeight+12,src:this.swatchImageURL,overflow:"hidden",border:"1px black solid",picker:this,click:function(){this.picker.$56t(this.getOffsetX(),this.getOffsetY())},children:[this.$56r]}),this.$56w,this.$56x]}),isc.HLayout.create({autoDraw:false,layoutLeftMargin:5,layoutRightMargin:5,membersMargin:5,members:[isc.Label.create({autoDraw:false,margin:5,contents:this.selectedColorLabel,width:this.swatchWidth-63,height:15}),this.$56v]})]});if(this.$56x)this.observe(this.$56x,"valueChanged","observer.$561()");if(this.$56y)this.observe(this.$56y,"valueChanged","observer.$562()")},isc.A.initComplexElements=function isc_ColorPicker_initComplexElements(){this.$56x.setValue(this.$56q);this.$56h();this.$563(this.$56o,this.$56p);if(this.$56m)this.setHtmlColor(this.$56m);this.$56u.setBackgroundColor(isc.ColorUtils.hslToHtml(this.$56o,this.$56p,this.$56q));if(this.supportsTransparency){this.$56u.setOpacity(this.$56d);this.$56y.setValue(this.$56d)}},isc.A.addComplexElements=function isc_ColorPicker_addComplexElements(){if(this.$56c!='complex'){return}
this.showOkButton=true;this.setAutoChild("okButton",{title:this.okButtonTitle});this.buttonLayout.setMembers([this.okButton,this.cancelButton,this.modeToggleButton]);this.basicLabel=isc.Label.create({autoDraw:false,margin:5,contents:this.basicColorLabel,width:100,height:15});this.formLayout=isc.HLayout.create({autoDraw:false,members:[this.$56i,this.$56n]});this.leftHandLayout.addMember(this.basicLabel,0);this.leftHandLayout.addMember(this.formLayout);if(this.supportsTransparency){this.$560.addMember(this.$56z)}
this.innerContentLayout.addMember(this.$560);this.initComplexElements()},isc.A.removeComplexElements=function isc_ColorPicker_removeComplexElements(){if(this.$56c=='complex'){return}
this.showOkButton=false;this.setAutoChild("okButton");if(this.formLayout){this.leftHandLayout.removeMembers([this.basicLabel,this.formLayout]);this.innerContentLayout.removeMember(this.$560)}},isc.A.setSupportsTransparency=function isc_ColorPicker_setSupportsTransparency(_1){this.supportsTransparency=_1;if(this.$56c=='complex'){if(this.supportsTransparency){this.$560.addMember(this.$56z)}else{this.$560.removeMember(this.$56z)}}},isc.A.getRed=function isc_ColorPicker_getRed(){return this.$56j},isc.A.getGreen=function isc_ColorPicker_getGreen(){return this.$56k},isc.A.getBlue=function isc_ColorPicker_getBlue(){return this.$56l},isc.A.getHue=function isc_ColorPicker_getHue(){return this.$56o},isc.A.getSaturation=function isc_ColorPicker_getSaturation(){return this.$56p},isc.A.getLuminosity=function isc_ColorPicker_getLuminosity(){return this.$56q},isc.A.getHtmlColor=function isc_ColorPicker_getHtmlColor(){return this.$56m},isc.A.getOpacity=function isc_ColorPicker_getOpacity(){return this.$56d},isc.A.setRed=function isc_ColorPicker_setRed(_1){if(_1<0)this.$56j=0;else if(_1>255)this.$56j=255;else this.$56j=_1/1;if(this.$56c=='complex'){this.$56i.setValue("pickerRedVal",this.$56j)}
if(this.$56f===true)
this.$564('rgb')},isc.A.setGreen=function isc_ColorPicker_setGreen(_1){if(_1<0)this.$56k=0;else if(_1>255)this.$56k=255;else this.$56k=_1/1;if(this.$56c=='complex'){this.$56i.setValue("pickerGrnVal",this.$56k)}
if(this.$56f===true)
this.$564('rgb')},isc.A.setBlue=function isc_ColorPicker_setBlue(_1){if(_1<0)this.$56l=0;else if(_1>255)this.$56l=255;else this.$56l=_1/1;if(this.$56c=='complex'){this.$56i.setValue("pickerBluVal",this.$56l)}
if(this.$56f===true)
this.$564('rgb')},isc.A.setHue=function isc_ColorPicker_setHue(_1){if(_1<0)this.$56o=0;else if(_1>239)this.$56o=239;else this.$56o=_1/1;if(this.$56c=='complex'){this.$56n.setValue("pickerHueVal",this.$56o)}
if(this.$56f===true)
this.$564('hsl')},isc.A.setSaturation=function isc_ColorPicker_setSaturation(_1){if(_1<0)this.$56p=0;else if(_1>240)this.$56p=240;else this.$56p=_1/1;if(this.$56c=='complex'){this.$56n.setValue("pickerSatVal",this.$56p)}
if(this.$56f===true){this.$564('hsl')}},isc.A.setLuminosity=function isc_ColorPicker_setLuminosity(_1,_2){if(_1<0)this.$56q=0;else if(_1>240)this.$56q=240;else this.$56q=_1/1;this.$105z=!_2;if(this.$56c=='complex'){this.$56n.setValue("pickerLumVal",this.$56q)}
if(this.$56f===true)
this.$564('hsl')},isc.A.setHtmlColor=function isc_ColorPicker_setHtmlColor(_1){if(isc.ColorUtils.encodingIsValid(_1)===true){this.$56m=_1.toUpperCase();if(this.$56c=='complex'){this.$56i.setValue("pickerHtmlVal",this.$56m)}
if(this.$56f===true)
this.$564('html')}},isc.A.setOpacity=function isc_ColorPicker_setOpacity(_1){if(this.$56c=='complex'&&this.supportsTransparency){if(_1<0)this.$56d=0;else if(_1>100)this.$56d=100;else this.$56d=_1/1;if(this.$56f===true){this.$564('opacity')}}},isc.A.$564=function isc_ColorPicker__changeColor(_1){if(_1=='rgb'){var _2=isc.ColorUtils.rgbToHsl(this.$56j,this.$56k,this.$56l);this.$56f=false;this.setHue(_2.h);this.setSaturation(_2.s);this.setLuminosity(_2.l,true);this.setHtmlColor(isc.ColorUtils.rgbToHtml(this.$56j,this.$56k,this.$56l));this.$56f=true;this.$563(this.$56o,this.$56p)}else if(_1=='hsl'){if(!this.$105z)this.$56q=120;var _3=isc.ColorUtils.hslToRgb(this.$56o,this.$56p,this.$56q);this.$56f=false;this.setRed(_3.r);this.setGreen(_3.g);this.setBlue(_3.b);this.setHtmlColor(isc.ColorUtils.rgbToHtml(this.$56j,this.$56k,this.$56l));this.$56f=true;if(this.$56o!=this.$565||this.$56p!=this.$566){this.$563(this.$56o,this.$56p)}}else if(_1=='html'){var _3=isc.ColorUtils.htmlToRgb(this.$56m);this.$56f=false;this.setRed(_3.r);this.setGreen(_3.g);this.setBlue(_3.b);var _2=isc.ColorUtils.rgbToHsl(this.$56j,this.$56k,this.$56l);this.setHue(_2.h);this.setSaturation(_2.s);this.setLuminosity(_2.l,true);this.$56f=true;this.$563(this.$56o,this.$56p)}
if(this.$56c=='complex'){this.$56x.setValue(this.$56q);this.$56n.setValue("pickerLumVal",this.$56q)}
if(this.$56c=='complex'){this.$56u.setBackgroundColor(isc.ColorUtils.hslToHtml(this.$56o,this.$56p,this.$56q))}
if(this.$56o!=this.$565||this.$56p!=this.$566){this.$56h()}
if(this.$56c=='complex'&&this.supportsTransparency){this.$56u.setOpacity(this.$56d);if(this.$56y!=null){var _4=this.$56y,_5=_4.getValue(),_6=this.$56d;if(_6===null)_6=100;if(_5!=_6)this.$56y.setValue(this.$56d)}}
this.$565=this.$56o;this.$566=this.$56p;if(this.colorChanged)this.colorChanged()},isc.A.$56g=function isc_ColorPicker__oneClickColorSelected(_1){this.hide();if(this.colorSelected)this.colorSelected(_1)},isc.A.$563=function isc_ColorPicker__positionCrossHair(_1,_2){if(this.$56c!='complex'){return}
if(this.$56s===true){this.$56s=false;return}
var _3=_1/239.0;var _4=_2/240.0;_3*=this.swatchWidth;_4=this.swatchHeight-(_4*this.swatchHeight);_3=parseInt(_3)-8;_4=parseInt(_4)-8;this.$56r.setLeft(_3);this.$56r.setTop(_4)},isc.A.$56t=function isc_ColorPicker__crosshairMoved(_1,_2){_1-=5;_2-=5;_1/=this.swatchWidth;_2=1.0-_2/this.swatchHeight;this.$56f=false;this.setHue(Math.floor(_1*239.0+0.5));this.$56f=true;this.setSaturation(Math.floor(_2*240.0+0.5))},isc.A.$56h=function isc_ColorPicker__setLumVals(){if(this.$56c!='complex'){return}
for(var i=0;i<this.swatchHeight/this.lumStep;i++){this.$56w.members[i].setBackgroundColor(isc.ColorUtils.hslToHtml(this.$56o,this.$56p,240-(i*240/(this.swatchHeight/this.lumStep))))}},isc.A.$561=function isc_ColorPicker__lumSliderChanged(){var _1=this.$56x.getValue();if(this.$56q!=_1){this.setLuminosity(_1)}},isc.A.$562=function isc_ColorPicker__opSliderChanged(){this.setOpacity(this.$56y.getValue())},isc.A.setCurrentPickMode=function isc_ColorPicker_setCurrentPickMode(_1){if(this.$56c==_1)return;if(_1=="simple"||!this.allowComplexMode){this.$56c="simple";this.removeComplexElements();if(this.allowComplexMode){this.modeToggleButton.setTitle(this.moreButtonTitle)}}else{this.$56c="complex";if(!this.$560){this.createComplexElements()}
this.addComplexElements();this.modeToggleButton.setTitle(this.lessButtonTitle)}
this.modeToggleButton.setState("")},isc.A.$56e=function isc_ColorPicker__togglePickMode(){this.setCurrentPickMode(this.$56c=="simple"?"complex":"simple")});isc.B._maxIndex=isc.C+32;isc.ColorPicker.registerStringMethods({colorChanged:"",colorSelected:"color,opacity"});isc.defineClass("ColorUtils",isc.Class);isc.A=isc.ColorUtils;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.hexToDec=function isc_c_ColorUtils_hexToDec(_1){return parseInt(_1,16)},isc.A.decToHex=function isc_c_ColorUtils_decToHex(_1){var d=_1/1;var h=d.toString(16);if(h.length==1){h="0"+h}
return h},isc.A.brightness=function isc_c_ColorUtils_brightness(_1,_2,_3){var _4=isc.ColorUtils.rgbToHsl(_1,_2,_3);return(_4.l/240.0)},isc.A.encodingIsValid=function isc_c_ColorUtils_encodingIsValid(_1){return(_1.substring(0,1)=='#'&&isc.isA.color(_1))},isc.A.rgbToHtml=function isc_c_ColorUtils_rgbToHtml(_1,_2,_3){var _4='#'+isc.ColorUtils.decToHex(_1)+isc.ColorUtils.decToHex(_2)+isc.ColorUtils.decToHex(_3);return _4},isc.A.hslToHtml=function isc_c_ColorUtils_hslToHtml(_1,_2,_3){var _4=isc.ColorUtils.hslToRgb(_1,_2,_3);var _5='#'+isc.ColorUtils.decToHex(_4.r)+isc.ColorUtils.decToHex(_4.g)+isc.ColorUtils.decToHex(_4.b);return _5},isc.A.htmlToRgb=function isc_c_ColorUtils_htmlToRgb(_1){var r=_1.substring(1,3);var g=_1.substring(3,5);var b=_1.substring(5,7);return{r:isc.ColorUtils.hexToDec(r),g:isc.ColorUtils.hexToDec(g),b:isc.ColorUtils.hexToDec(b)}},isc.A.htmlToHsl=function isc_c_ColorUtils_htmlToHsl(_1){var r=_1.substring(1,3);var g=_1.substring(3,5);var b=_1.substring(5,7);return isc.ColorUtils.rgbToHsl(isc.ColorUtils.hexToDec(r),isc.ColorUtils.hexToDec(g),isc.ColorUtils.hexToDec(b))},isc.A.rgbToHsl=function isc_c_ColorUtils_rgbToHsl(_1,_2,_3){var _4=_1/255.0;var _5=_2/255.0;var _6=_3/255.0;var _7=Math.min(Math.min(_4,_5),_6);var _8=Math.max(Math.max(_4,_5),_6);var _9=_8-_7;var h=0,s=0,l=0;l=(_8+_7)/2.0;if(_8==_7){s=0;h=0}else{if(l<0.5){s=(_8-_7)/(_8+_7)}else{s=(_8-_7)/(2.0-_8-_7)}
if(_4==_8)
h=(_5-_6)/_9;else if(_5==_8)
h=2+(_6-_4)/_9;else
h=4+(_4-_5)/_9}
h=Math.floor(h*40+0.5);if(h<0)h+=240;s=Math.floor(s*240+0.5);l=Math.floor(l*240+0.5);return{h:h,s:s,l:l}},isc.A.hslToRgb=function isc_c_ColorUtils_hslToRgb(_1,_2,_3){var _4=_1/239.0;var _5=_2/240.0;var _6=_3/240.0;var _7,_8,_9,_10,_11;var r=0,g=0,b=0;if(_5==0){r=_6;g=_6;b=_6}else{if(_6<0.5){_8=_6*(1.0+_5)}else{_8=(_6+_5)-(_6*_5)}
_7=(2.0*_6)-_8;_9=_4+0.3333;_10=_4;_11=_4-0.3333;if(_9<0)_9+=1.0;if(_10<0)_10+=1.0;if(_11<0)_11+=1.0;if(_9>1)_9-=1.0;if(_10>1)_10-=1.0;if(_11>1)_11-=1.0;if(_9*6.0<1)
r=_7+(_8-_7)*6.0*_9;else if(_9*2.0<1)
r=_8;else if(_9*3.0<2)
r=_7+(_8-_7)*(0.6667-_9)*6.0;else
r=_7;if(_10*6.0<1)
g=_7+(_8-_7)*6.0*_10;else if(_10*2.0<1)
g=_8;else if(_10*3.0<2)
g=_7+(_8-_7)*(0.6667-_10)*6.0;else
g=_7;if(_11*6.0<1)
b=_7+(_8-_7)*6.0*_11;else if(_11*2.0<1)
b=_8;else if(_11*3.0<2)
b=_7+(_8-_7)*(0.6667-_11)*6.0;else
b=_7}
r=Math.floor(r*255.0+0.5);g=Math.floor(g*255.0+0.5);b=Math.floor(b*255.0+0.5);return{r:r,g:g,b:b}});isc.B._maxIndex=isc.C+10}
isc.ClassFactory.defineClass("NestedEditorItem","CanvasItem");isc.A=isc.NestedEditorItem.getPrototype();isc.A.shouldSaveValue=true;isc.A.isCriteriaEditor=false;isc.A.editorConstructor="DynamicForm";isc.A.editorDefaults={itemChanged:function(_1,_2){var _3=this.creator.isCriteriaEditor?this.getValuesAsCriteria():this.getValues();this.creator.updateValue(_3)}};isc.A=isc.NestedEditorItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.init=function isc_NestedEditorItem_init(){this.$67h();this.Super("init",arguments)},isc.A.isEditable=function isc_NestedEditorItem_isEditable(){return true},isc.A.$67h=function isc_NestedEditorItem__createEditor(){var _1;var _2={};if(this.form.dataSource){_1=isc.DataSource.getDataSource(this.form.dataSource);var _3=_1.getField(this.name);if(_3){_2.dataSource=_1.getFieldDataSource(_3)}}
if(this.form&&this.form.showComplexFieldsRecursively){_2.showComplexFields=true;_2.showComplexFieldsRecursively=true}else{_2.showComplexFields=false}
this.addAutoChild("editor",_2);this.canvas=this.editor},isc.A.setValue=function isc_NestedEditorItem_setValue(_1){this.editor.setValues(_1)},isc.A.updateValue=function isc_NestedEditorItem_updateValue(_1){this.$10y(_1)},isc.A.$85m=function isc_NestedEditorItem__shouldAllowExpressions(){return false});isc.B._maxIndex=isc.C+6;isc.ClassFactory.defineClass("NestedListEditorItem","CanvasItem");isc.A=isc.NestedListEditorItem.getPrototype();isc.A.shouldSaveValue=true;isc.A.editorConstructor="ListEditor";isc.A.editorDefaults={inlineEdit:false,height:155,saveRecord:function(){if(!this.form.validate())return false;var _1=this.form.getValues();this.showList();if(this.inlineEdit){this.grid.setEditValues(this.grid.getEditRow(),_1)}else{if(this.form.saveOperationType=="add"){this.grid.addData(_1)}else{isc.addProperties(this.currentRecord,_1);this.grid.markForRedraw()}
if(!this.inlineEdit){this.form.clearValues()}
this.creator.updateValue(this.grid.data)}
return true}};isc.A=isc.NestedListEditorItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.init=function isc_NestedListEditorItem_init(){this.$67h();this.Super("init",arguments)},isc.A.isEditable=function isc_NestedListEditorItem_isEditable(){return true},isc.A.$67h=function isc_NestedListEditorItem__createEditor(){var _1;var _2={};if(this.form.dataSource){_1=isc.DataSource.getDataSource(this.form.dataSource);var _3=_1.getField(this.name);if(_3){_2.dataSource=_1.getFieldDataSource(_3)}}
if(this.form&&this.form.showComplexFieldsRecursively){_2.formProperties={showComplexFields:true,showComplexFieldsRecursively:true};_2.gridProperties={showComplexFields:true,showComplexFieldsRecursively:true,canRemoveRecords:true,saveLocally:true,data:[]}}else{_2.formProperties={showComplexFields:false};_2.gridProperties={showComplexFields:false,canRemoveRecords:true,saveLocally:true}}
this.addAutoChild("editor",_2);this.canvas=this.editor},isc.A.updateValue=function isc_NestedListEditorItem_updateValue(_1){this.editor.setData(_1);this.$10y(_1)},isc.A.setValue=function isc_NestedListEditorItem_setValue(_1){this.editor.setData(_1);this.Super("setValue",arguments)},isc.A.$85m=function isc_NestedListEditorItem__shouldAllowExpressions(){return false});isc.B._maxIndex=isc.C+6;isc.ClassFactory.defineClass("ViewFileItem","FileItem");isc.A=isc.ViewFileItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.shouldSaveValue=false;isc.A.colSpan="*";isc.A.height=20;isc.A.width="*";isc.A.overflow="visible";isc.A.canEdit=false;isc.A.type="viewFile";isc.B.push(isc.A.isEditable=function isc_ViewFileItem_isEditable(){return false},isc.A.formValuesChanged=function isc_ViewFileItem_formValuesChanged(){this.setCanvasContent(null)});isc.B._maxIndex=isc.C+2;isc.defineClass("PanelHeader","ImgSectionHeader");isc.A=isc.PanelHeader.getPrototype();isc.A.width="100%";isc.A.height=22;isc.A.baseStyle="sectionHeader";isc.A=isc.PanelHeader.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.showSelectedIcon=false;isc.A.showRollOverIcon=false;isc.A.showDisabledIcon=false;isc.A.showDownIcon=false;isc.A.showFocusedIcon=false;isc.B.push(isc.A.initWidget=function isc_PanelHeader_initWidget(){this.setPanelTitleFromCanvas()},isc.A.setPanelTitleFromCanvas=function isc_PanelHeader_setPanelTitleFromCanvas(){if(this.canvas){if(this.canvas.title)this.title=this.canvas.title;if(this.canvas.icon)this.icon=this.canvas.icon}});isc.B._maxIndex=isc.C+2;isc.PanelHeader.registerStringMethods({iconClick:""});isc.A=isc.Canvas.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.panelHeaderDefaults={_constructor:"PanelHeader"};isc.A.panelHeaderProperties={};isc.A.panelHeaderPlacement="peer";isc.B.push(isc.A.setupPanelHeader=function isc_Canvas_setupPanelHeader(){if(!this.showPanelHeader)return;this.panelHeader=this.createAutoChild("panelHeader",{canvas:this,snapTo:"T"});if(isc.isA.Layout(this))this.panelHeaderPlacement="member";else this.panelHeaderPlacement="peer";this.panelHeaderPlacement="peer";if(this.panelHeaderPlacement=="member"){this.addMember(this.panelHeader,0)}
else if(this.panelHeaderPlacement=="peer"){this.addPeer(this.panelHeader);this.panelHeader.moveAbove(this);this.$wi(this.panelHeader,isc.Canvas.TOP)}
else if(this.panelHeaderPlacement=="custom"){}});isc.B._maxIndex=isc.C+1;isc.A=isc.Canvas.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.panelActionControls=[];isc.B.push(isc.A.refreshPanelControls=function isc_Canvas_refreshPanelControls(){var _1=this.panelControls||[];if(!this.panelHeader.controls)this.panelHeader.controls=[];else this.panelHeader.controls.setLength(0);for(var i=0;i<_1.length;i++){var _3=_1.get(i),_4=null;if(isc.isAn.Object(_3)){_4=isc.addProperties({},_3)}else if(_3.startsWith("action:")){var _5=_3.substring(7,_3.length),_6=isc.Canvas.getRegisteredAction(_5);if(this.canPerformAction(_6)){if(this.showActionInPanel(_6))
_4=this.getPanelActionControl(_6)}}else{_4=this.createAutoChild(_3)}
if(_4){this.panelHeader.controls.add(_4)}else{}}
var _7=this.panelHeader;_7.addControls()},isc.A.canPerformAction=function isc_Canvas_canPerformAction(_1){var _2=_1.name,_3=_1.enableProperty||"can"+_2.substring(0,1).toUpperCase()+_2.substring(1,_2.length);return this[_3]&&this[_3]==true?true:false},isc.A.showActionInPanel=function isc_Canvas_showActionInPanel(_1){return _1.showInPanel},isc.A.getPanelActionControl=function isc_Canvas_getPanelActionControl(_1){var _2=this.panelActionControls[_1.name],_3=_1.controlConstructor||"ImgButton";_2=isc.ClassFactory.newInstance(_3,{ID:this.getID()+"_"+_1.name,width:18,height:18,src:_1.icon,showRollOver:false,showDown:false,showDisabled:false,showFocused:false,actionTarget:this,actionObject:_1,prompt:_1.tooltip,click:function(){this.actionTarget[this.actionObject.methodName]()}});this.panelActionControls[_1.name]=_2;return this.panelActionControls[_1.name]},isc.A.showPrintPreview=function isc_Canvas_showPrintPreview(_1,_2,_3,_4){isc.Canvas.showPrintPreview(this,_1,_2,_3,_4)});isc.B._maxIndex=isc.C+5;isc.A=isc.Canvas;isc.A.$71k={};isc.A=isc.Canvas;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.registerAction=function isc_c_Canvas_registerAction(_1){if(!this.$71k[_1.name]){this.$71k[_1.name]=_1}},isc.A.getRegisteredActionNames=function isc_c_Canvas_getRegisteredActionNames(){return isc.getKeys(this.$71k)},isc.A.getRegisteredActions=function isc_c_Canvas_getRegisteredActions(){return isc.getValues(this.$71k)},isc.A.getRegisteredActionIndex=function isc_c_Canvas_getRegisteredActionIndex(){var _1=this.getRegisteredActions(),_2=_1.makeIndex("name",false);return _2},isc.A.getRegisteredAction=function isc_c_Canvas_getRegisteredAction(_1){return this.$71k[_1]},isc.A.isActionRegistered=function isc_c_Canvas_isActionRegistered(_1){return!this.$71k[_1]?false:true});isc.B._maxIndex=isc.C+6;isc.defineClass("Action","Class");isc.A=isc.Action.getPrototype();isc.A.name=null;isc.A.title=null;isc.A.icon=null;isc.A.tooltip=null;isc.A.methodName=null;isc.A.controlConstructor="ImgButton";isc.A.enableProperty=null;isc.A.showInPanel=true;isc.Canvas.registerAction(isc.Action.create({name:"edit",title:"Edit",icon:"[SKINIMG]/actions/edit.png",tooltip:"Put the component into Edit mode",methodName:"startEditing",showInPanel:false}));isc.Canvas.registerAction(isc.Action.create({name:"editNew",title:"Edit New",icon:"[SKINIMG]/SectionHeader/opener_closed.png",tooltip:"Add a new Record to the component",methodName:"startEditingNew",showInPanel:false}));isc.Canvas.registerAction(isc.Action.create({name:"sort",title:"Sort",icon:"[SKINIMG]/actions/sort_ascending.png",tooltip:"Sort the records in the component",methodName:"sort",controlConstructor:"SortActionSelector",enableProperty:"canSortFields",showInPanel:false}));isc.Canvas.registerAction(isc.Action.create({name:"export",title:"Export",icon:"[SKINIMG]/actions/redo.png",tooltip:"Export the data in the component",methodName:"exportData",showInPanel:true}));isc.Canvas.registerAction(isc.Action.create({name:"print",title:"Print",icon:"[SKINIMG]/actions/print.png",tooltip:"Print the data in the component",methodName:"showPrintPreview",showInPanel:true}));isc.defineClass("SortActionSelector","DynamicForm");isc.A=isc.SortActionSelector.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.width=100;isc.A.height=20;isc.A.numCols=4;isc.A.fields=[{name:"sortField",showTitle:false,colSpan:2,type:"select",width:80,prompt:"Sort Field",startRow:false,endRow:false,changed:function(_1,_2,_3){var _4=_1.getField("sortDirection").getValue(),_5=_4?"ascending":"descending";if(_1.actionTarget.sort)_1.actionTarget.sort(_3,_5);else _1.actionTarget.data.sortByProperty(_3,_4)}},{name:"sortDirection",showTitle:true,showLabel:false,type:"checkbox",width:20,prompt:"Sort Direction: Checked is Ascending",startRow:false,endRow:false,changed:function(_1,_2,_3){var _4=_3,_5=_4?"ascending":"descending",_6=_1.getField("sortField").getValue();if(_1.actionTarget.sort)_1.actionTarget.sort(_6,_5);else _1.actionTarget.data.sortByProperty(_6,_4)}}];isc.B.push(isc.A.initWidget=function isc_SortActionSelector_initWidget(){this.Super("initWidget",arguments)},isc.A.draw=function isc_SortActionSelector_draw(){this.Super("draw",arguments);var _1=this.actionTarget.getDataSource(),_2=_1?isc.getValues(_1.getFields()):[],_3={};for(var i=0;i<_2.length;i++){var _5=_2.get(i);_3[_5.name]=_5.title}
this.getField("sortField").setValueMap(_3)});isc.B._maxIndex=isc.C+2;isc.defineClass("DataPathItem","TextItem");isc.A=isc.DataPathItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.operationsTreeDefaults={_constructor:"TTreeGrid",autoDraw:false,recordDoubleClick:function(){this.creator.operationSelected()},getIcon:function(_1){var _2=this.creator.form.creator,_3=(_2&&_2.getServiceElementIcon)?_2.getServiceElementIcon(_1):null;if(_3)return _3;return this.Super("getIcon",arguments)}};isc.A.operationsTreeSelectButtonDefaults={_constructor:"TButton",autoDraw:false,title:"Select",click:function(){if(this.creator.operationsTree.anySelected())
this.creator.operationSelected()}};isc.A.defaultIcons=[{src:"[SKINIMG]/actions/edit.png",click:"item.showOperationsTreeData()",width:16,height:16},{src:"[SKINIMG]/actions/remove.png",click:"item.clearFormValues()",width:16,height:16}];isc.A.baseManagedProperties=["dataPath","schemaDataSource","serviceName","serviceNamespace"];isc.B.push(isc.A.getPropertyName=function isc_DataPathItem_getPropertyName(_1){if(this.isInput)
return"input"+_1.substring(0,1).toUpperCase()+_1.substring(1);else return _1},isc.A.initManagedProperties=function isc_DataPathItem_initManagedProperties(){this.managedProperties=[];var _1=this.baseManagedProperties;for(var i=0;i<_1.length;i++){this.managedProperties.add(this.getPropertyName(_1[i]))}},isc.A.keyPress=function isc_DataPathItem_keyPress(_1,_2,_3){if(_3!="Arrow_Left"&&_3!="Arrow_Right"&&_3!="Home"&&_3!="End")return false;this.Super("keyPress",arguments)},isc.A.init=function isc_DataPathItem_init(){this.icons=isc.clone(this.defaultIcons);this.initManagedProperties();this.Super("init",arguments);if(this.operationsTreeData){this.addAutoChildren(["operationsTree","operationsTreeSelectButton"])}},isc.A.showOperationsTreeData=function isc_DataPathItem_showOperationsTreeData(){if(!this.operationsTreeData)return;if(!this.operationsTree)
this.addAutoChildren(["operationsTree","operationsTreeSelectButton"]);var _1;if(isc.isA.Tree(this.operationsTreeData)){_1=this.operationsTreeData}else{_1=isc.Tree.create({modelType:"children",root:{children:this.operationsTreeData},nameProperty:"name",childrenProperty:"children"});_1.openAll()}
this.operationsTree.setData(_1);var _2=this.isInput?"formInputs":"formOutputs";var _3=_2+"/"+this.getValue(),_4=_1.find(_3);if(_4)this.operationsTree.selectRecord(_4);if(!this.schemaDialog){this.schemaDialog=isc.TWindow.create({title:"Select element from message",autoCenter:true,height:"90%",width:"60%",isModal:true,showModalMask:true,items:[isc.VLayout.create({width:"100%",height:"100%",members:[this.operationsTree,this.operationsTreeSelectButton]})]})}else this.schemaDialog.show()},isc.A.operationSelected=function isc_DataPathItem_operationSelected(){var _1=this.operationsTree,_2=_1.data,_3=_1.getSelectedRecord();this.schemaDialog.hide();this.setDataPathProperties(_3)},isc.A.setDataPathProperties=function isc_DataPathItem_setDataPathProperties(_1){var _2=_1.defaults;this.dataPathProps=isc.applyMask(_2,this.managedProperties);if(this.logIsInfoEnabled()){this.logInfo("setDPProps, editNode: "+this.echoAll(_1)+" defaults: "+this.echo(_2)+", managedProps: "+this.managedProperties+", props: "+this.echo(this.dataPathProps))}
this.saveFormValues()},isc.A.saveFormValues=function isc_DataPathItem_saveFormValues(){for(var i=0;i<this.managedProperties.length;i++){var _2=this.managedProperties[i],_3=this.dataPathProps[_2];this.form.setValue(_2,_3)}
if(this.form.saveProperties){this.form.saveProperties(this.dataPathProps,this.form.currentComponent)}},isc.A.clearFormValues=function isc_DataPathItem_clearFormValues(){for(var i=0;i<this.managedProperties.length;i++){this.form.setValue(this.managedProperties[i],null)}
if(this.form.saveProperties){this.form.saveProperties(this.dataPathProps,this.form.currentComponent)}});isc.B._maxIndex=isc.C+9;if(isc.ListGrid){isc.defineClass("RelativeDateItem","CanvasItem");isc.A=isc.RelativeDateItem;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.getAbsoluteDate=function isc_c_RelativeDateItem_getAbsoluteDate(_1,_2,_3,_4){var _5=false;if(isc.SimpleType.inheritsFrom(_3,"date")&&!isc.SimpleType.inheritsFrom(_3,"datetime"))
{_5=true}
var _6=isc.DateUtil.getAbsoluteDate(_1,_2,_4,_5);return _6},isc.A.getPeriodName=function isc_c_RelativeDateItem_getPeriodName(_1){return isc.DateUtil.getTimeUnitName(_1)},isc.A.getPeriodKey=function isc_c_RelativeDateItem_getPeriodKey(_1){return isc.DateUtil.getTimeUnitKey(_1)},isc.A.getRelativeDateParts=function isc_c_RelativeDateItem_getRelativeDateParts(_1){return isc.DateUtil.getRelativeDateParts(_1)},isc.A.isRelativeDate=function isc_c_RelativeDateItem_isRelativeDate(_1){return isc.DateUtil.isRelativeDate(_1)});isc.B._maxIndex=isc.C+5;isc.A=isc.RelativeDateItem.getPrototype();isc.A.height=20;isc.A.cellHeight=20;isc.A.canFocus=true;isc.A.timeUnitOptions=["day","week","month"];isc.A.showPastOptions=true;isc.A.showFutureOptions=true;isc.A.rangeRoundingGranularity={"year":"day","month":"day","week":"day","day":"day","hour":"minute","minute":"second","second":"second"};isc.A.millisecondsAgoTitle="N milliseconds ago";isc.A.secondsAgoTitle="N seconds ago";isc.A.minutesAgoTitle="N minutes ago";isc.A.hoursAgoTitle="N hours ago";isc.A.daysAgoTitle="N days ago";isc.A.weeksAgoTitle="N weeks ago";isc.A.monthsAgoTitle="N months ago";isc.A.quartersAgoTitle="N quarters ago";isc.A.yearsAgoTitle="N years ago";isc.A.millisecondsFromNowTitle="N milliseconds from now";isc.A.secondsFromNowTitle="N seconds from now";isc.A.minutesFromNowTitle="N minutes from now";isc.A.hoursFromNowTitle="N hours from now";isc.A.daysFromNowTitle="N days from now";isc.A.weeksFromNowTitle="N weeks from now";isc.A.monthsFromNowTitle="N months from now";isc.A.quartersFromNowTitle="N quarters from now";isc.A.yearsFromNowTitle="N years from now";isc.A.defaultValue="$today";isc.A.operator="greaterThan";isc.A.presetOptions={"$today":"Today","$yesterday":"Yesterday","$tomorrow":"Tomorrow","$weekAgo":"Current day of last week","$weekFromNow":"Current day of next week","$monthAgo":"Current day of last month","$monthFromNow":"Current day of next month"};isc.A.saveOnEnter=true;isc.A.$146c=130;isc.A.valueFieldDefaults={editorType:"ComboBoxItem",name:"valueField",width:"*",showTitle:false,shouldSaveValue:false,validateOnChange:false,getInnerWidth:function(_1){var _2=this.Super("getInnerWidth",arguments);var _3=this.form.canvasItem;if(_3==null||this.$11e()||!_3.$142()||!isc.isA.Number(_2)){return Math.max(0,_2)}
return Math.max(0,_2-_3.$141())},keyPress:function(_1,_2,_3,_4){if(_3=="Enter"){var _5=_2.canvasItem;if(_5&&_5.form)
_5.form.handleKeyPress(isc.EH.lastEvent)}},pickValue:function(){this.form.canvasItem.setBaseDate();this.Super("pickValue",arguments)}};isc.A.defaultQuantity=1;isc.A.quantityFieldDefaults={editorType:"SpinnerItem",name:"quantityField",width:50,min:0,step:1,showTitle:false,shouldSaveValue:false,selectOnFocus:true,keyPress:function(_1,_2,_3,_4){if(_3=="Enter"){var _5=_2.canvasItem;if(_5&&_5.form){_5.updateValue();_5.form.handleKeyPress(isc.EH.lastEvent)}}}};isc.A.showChooserIcon=true;isc.A.pickerIconDefaults={name:"chooserIcon",showOver:false,showFocused:false,showFocusedWithItem:false,neverDisable:true,width:16,height:16,src:"[SKIN]/DynamicForm/DatePicker_icon.gif"};isc.A.iconVAlign="center";isc.A.pickerIconPrompt="Show Date Chooser";isc.A.pickerConstructor="DateChooser";isc.A.showCalculatedDateField=true;isc.A.invalidCalculatedDatePrompt="";isc.A.calculatedDateFieldDefaults={editorType:"BlurbItem",name:"calculatedDateField",border:"1px solid black;",width:"*",setValue:function(_1){if(_1==null||_1=="")_1=this.defaultValue;return this.Super("setValue",arguments)},startRow:false,showTitle:false,shouldSaveValue:false};isc.A.startDate=isc.DateItem.DEFAULT_START_DATE;isc.A.endDate=isc.DateItem.DEFAULT_END_DATE;isc.A.centuryThreshold=isc.DateItem.DEFAULT_CENTURY_THRESHOLD;isc.A.shouldSaveValue=true;isc.A.editCriteriaInInnerForm=false;isc.A.editorConstructor="DynamicForm";isc.A.editorDefaults={numCols:4,cellPadding:0,colWidths:["*",50,22,"*"],itemChanged:function(_1,_2){this.creator.updateValue()},itemKeyPress:function(_1,_2,_3){var _1=this.canvasItem;if(_1&&_1.form){return _1.$18d(_1,_1.form,_2,_3)}}};isc.A.useSharedPicker=false;isc.A.pickerDefaults={width:isc.DateItem.chooserWidth,height:isc.DateItem.chooserHeight,closeOnEscapeKeypress:true,showCancelButton:true,autoHide:true};isc.A.showChooserFiscalYearPicker=false;isc.A.showChooserWeekPicker=false;isc.A=isc.RelativeDateItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.autoDestroy=true;isc.A.$113r=null;isc.A.showPickerTimeItem=true;isc.A.use24HourTime=true;isc.A.validators=[{type:"isDate"}];isc.B.push(isc.A.init=function isc_RelativeDateItem_init(){this.$67h();this.Super("init",arguments)},isc.A.isEditable=function isc_RelativeDateItem_isEditable(){return true},isc.A.$67h=function isc_RelativeDateItem__createEditor(){var _1;var _2={$76z:true};this.addAutoChild("editor",_2);this.canvas=this.editor;var _3=this,_4=[],_5=2;if(this.valueFieldWidth==null){var _6=isc.DateTimeItem,_7=Math.max(this.$146c,_6.getInstanceProperty("width"));this.valueFieldWidth=_7}
_4[0]=isc.addProperties({},this.valueFieldDefaults,this.valueFieldProperties,{valueMap:this.getValueFieldOptions()});_4[1]=isc.addProperties({},this.quantityFieldDefaults,this.quantityFieldProperties,{defaultValue:this.defaultQuantity});if(this.showChooserIcon){_5=3;_4[2]={name:"iconPlaceholder",type:"staticText",width:1,showTitle:false,canFocus:true,$872:function(){return false},focusInItem:function(){this.focusInIcon(this.icons[0])},$11s:function(_10){return false},iconVAlign:"center",icons:[isc.addProperties({prompt:this.pickerIconPrompt},this.pickerIconDefaults,this.pickerIconProperties,{click:function(){if(!_3.renderAsStatic()&&!_3.renderAsReadOnly())
_3.showPicker()}})]}}
var _8=this.getType(),_9=false;if(isc.SimpleType.inheritsFrom(_8,"date")&&!isc.SimpleType.inheritsFrom(_8,"datetime"))
{_9=this.isLogicalDate=true}
this.setBaseDate();if(this.showCalculatedDateField){_4[_5]=isc.addProperties({},this.calculatedDateFieldDefaults,this.calculatedDateFieldProperties,{cellStyle:this.getHintStyle(),defaultValue:this.invalidCalculatedDatePrompt})}
this.canvas.setFields(_4);this.valueField=this.canvas.getField("valueField");this.quantityField=this.canvas.getField("quantityField");if(this.showCalculatedDateField)
this.calculatedDateField=this.canvas.getField("calculatedDateField");if(this.showChooserIcon){this.iconPlaceholder=this.canvas.getField("iconPlaceholder");this.pickerIcon=this.iconPlaceholder.icons.find("name","chooserIcon")}
this.setValue(this.value||this.defaultValue)},isc.A.getBaseDate=function isc_RelativeDateItem_getBaseDate(){return this.baseDate},isc.A.setBaseDate=function isc_RelativeDateItem_setBaseDate(_1){this.baseDate=_1||(this.isLogicalDate?isc.Date.createLogicalDate():new Date())},isc.A.updateEditor=function isc_RelativeDateItem_updateEditor(){if(!this.valueField||!this.quantityField)return;var _1,_2,_3=false;if(this.valueField.hasFocus){_1=this.valueField;_2=this.valueField.getSelectionRange()}else if(this.quantityField.hasFocus){_1=this.quantityField;_2=this.quantityField.getSelectionRange()}
var _4=this.valueField.getValue(),_5=this.quantityField.getValue();var _6=(_4&&isc.isA.String(_4)&&this.relativePresets[_4]);if(!_6){if(this.quantityField.isVisible()){_3=true;this.editor.colWidths=[this.valueFieldWidth,22,"*","*"];this.quantityField.hide()}}else{if(!this.quantityField.isVisible()){_3=true;this.editor.colWidths=[this.valueFieldWidth,50,22,"*"];this.quantityField.show()}}
if(this.calculatedDateField){var _4=this.getAbsoluteDate();var _7=this.calculatedDateField.getValue();var _8=!_4?"":"("+this.formatDate(_4)+")";if(_7!=_8){_3=true;this.calculatedDateField.setValue(_8)}}
if(_3&&_1!=null){if(!_6&&_1==this.quantityField){this.valueField.focusInItem()}}},isc.A.getValueFieldOptions=function isc_RelativeDateItem_getValueFieldOptions(_1){if(_1&&this.$113r)return this.$113r;var _2=isc.addProperties({},this.presetOptions);this.relativePresets={};for(var i=0;i<this.timeUnitOptions.length;i++){var _4=this.timeUnitOptions[i];if(this.showPastOptions){_2[_4+"_ago"]=this[_4+"sAgoTitle"];this.relativePresets[_4+"_ago"]=true}
if(this.showFutureOptions){_2[_4+"_fromNow"]=this[_4+"sFromNowTitle"];this.relativePresets[_4+"_fromNow"]=true}}
this.$113r=_2;return _2},isc.A.setValue=function isc_RelativeDateItem_setValue(_1,_2){if(!this.valueField)return this.Super("setValue",arguments);if(_1==null&&!_2){var _3=this.getDefaultValue();if(_3!=null){_1=_3}}
if(isc.isA.Date(_1)&&_1.$84l!=null&&this.compareValues(this.$84m,_1.$84l))
{if(_1.getTime()==_1.$84n){_1=_1.$84l}}
var _4=false;this.setBaseDate();if(_1==null){this.valueField.setValue(null)}else if(isc.isA.Date(_1)||this.valueField.valueMap[_1]||(_1.value&&this.valueField.valueMap[_1.value]))
{var _5=isc.isA.Date(_1);_4=!_5;this.valueField.setValue(_5?this.formatDate(_1):_1.value?_1.value:_1)}else if(this.timeUnitOptions.contains(_1)){_4=true;_1+="_fromNow";this.valueField.setValue(_1)}else if(isc.isA.String(_1)&&isc.isA.Date(this.parseDate(_1,this.getInputFormat()))){_1=this.parseDate(_1,this.getInputFormat());this.valueField.setValue(this.formatDate(_1))}else{var _6,_4=isc.RelativeDateItem.isRelativeDate(_1);if(_4||isc.isA.String(_1)){_6=isc.RelativeDateItem.getAbsoluteDate(_1,this.getBaseDate(),this.getType(),this.rangePosition)}
if(!isc.isA.Date(_6)){_4=false;this.valueField.setValue(null)}else{var _7=_4?_1.value:_1;_7=isc.DateUtil.mapRelativeDateShortcut(_7,this.rangePosition);var _8,_9,_10=isc.RelativeDateItem.getRelativeDateParts(_7),_11=isc.RelativeDateItem.getPeriodName(_10.period),_12=(_10.direction=="+"?"fromNow":"ago");_9=_10?_10.countValue:null;_8=_11?_11.toLowerCase()+"_"+_12:null;if(_8&&this.valueField.valueMap[_8]){this.valueField.setValue(_8);this.quantityField.setValue(_9);_4=true}else{_4=false;this.valueField.setValue(this.formatDate(_6))}}}
if(_4){this.$84m=this.getDataValue();_1=this.$84o(this.$84m)}else{this.$84m=null}
this.Super("setValue",[_1,_2],arguments);this.updateEditor()},isc.A.$84o=function isc_RelativeDateItem__convertToAbsoluteDate(_1){var _2=_1.value?_1.value:_1;var _3=isc.RelativeDateItem.getAbsoluteDate(_2,this.getBaseDate(),this.getType(),this.rangePosition);if(isc.isA.Date(_3)){_3.$84l=_1;_3.$84n=_3.getTime()}
return _3},isc.A.getAbsoluteDate=function isc_RelativeDateItem_getAbsoluteDate(){return this.getDataValue(true)},isc.A.getRelativeDate=function isc_RelativeDateItem_getRelativeDate(){var _1=this.valueField.getValue(),_2=this.quantityField.getValue();if(!_1||!isc.isA.String(_1))return null;var _3=_1.substring(0,1);if(_3=="+"||_3=="-"||(_3=="$"&&this.getValueFieldOptions(true)[_1]))
{return this.getRelativeDateObject(_1)}
var _4=_1.indexOf("_");if(_4>=0){var _5=_1.substring(0,_4),_6=(_1.substring(_4+1)=="ago"),_7=isc.RelativeDateItem.getPeriodKey(_5);if(_7){var _8=(_6?"-":"+")+_2+_7;var _9=this.rangePosition=="end"?"+":"-",_10=this.rangeRoundingGranularity[_5];if(_10!=null&&_10.toLowerCase()!="millisecond"){_10=isc.RelativeDateItem.getPeriodKey(_10).toUpperCase();_8+="["+_9+"0"+_10+"]"}
return this.getRelativeDateObject(_8)}}
return null},isc.A.getRelativeDateObject=function isc_RelativeDateItem_getRelativeDateObject(_1){var _2={_constructor:"RelativeDate",value:_1};if(this.rangePosition)_2.rangePosition=this.rangePosition;return _2},isc.A.getDataValue=function isc_RelativeDateItem_getDataValue(_1){var _2=this.valueField.getValue(),_3;if(_2==null||isc.isAn.emptyString(_2)){_3=null}else{var _4=this.getRelativeDate();if(_4){if(_1){if(!_4.value.startsWith("$")||this.getValueFieldOptions(true)[_4.value]){_3=this.$84o(_4)}}else{_3=_4}}else{_3=this.parseDate(_2,this.getInputFormat())}
if(isc.isA.Date(_3)){var _5=this.getType();if(_5==null||(!isc.SimpleType.inheritsFrom(_5,"datetime")&&!isc.SimpleType.inheritsFrom(_5,"time")))
{_3.logicalDate=true}
if(this.rangePosition){_3.rangePosition=this.rangePosition}}}
return _3},isc.A.updateValue=function isc_RelativeDateItem_updateValue(){if(!this.valueField||!this.quantityField)return;var _1=this._value,_2=this.$84m,_3=this.getDataValue(false);if(!_1&&_3)this.setBaseDate();var _4=(_3==null||isc.isA.Date(_3))?_3:this.$84o(_3);if(_3!=_4){this.$84m=_3}else{this.$84m=null}
if(this.compareValues(_1,_4)&&this.compareValues(_2,this.$84m))return;this.$10y(_4);this.updateEditor()},isc.A.hasAdvancedCriteria=function isc_RelativeDateItem_hasAdvancedCriteria(){return(this.valueField&&this.valueField.getValue()!=null)},isc.A.getCriterion=function isc_RelativeDateItem_getCriterion(_1){var _2=this.getDataValue(_1);if(_2==null)return null;var _3=this.getCriteriaFieldName();return{operator:this.operator,value:_2,fieldName:_3}},isc.A.getCellHeight=function isc_RelativeDateItem_getCellHeight(){var _1=this.Super("getCellHeight",arguments);if(isc.Browser.isIE&&this.useTextField&&isc.isA.Number(_1))_1+=2;return _1},isc.A.getFiscalCalendar=function isc_RelativeDateItem_getFiscalCalendar(){return this.fiscalCalendar||Date.getFiscalCalendar()},isc.A.setFiscalCalendar=function isc_RelativeDateItem_setFiscalCalendar(_1){this.fiscalCalendar=_1},isc.A.showPicker=function isc_RelativeDateItem_showPicker(){if(!this.picker){if(this.useSharedPicker)this.picker=isc.DateChooser.getSharedDateChooser();else{this.picker=isc[this.pickerConstructor].create(isc.addProperties({},this.pickerDefaults,this.pickerProperties,{_generated:true,autoHide:true,showCancelButton:true}))}}
var _1=this.picker;var _2=_1.callingFormItem;if(_2!=this){if(_2)_2.ignore(_1,"dataChanged");this.observe(_1,"dataChanged","observer.pickerDataChanged(observed)");_1.callingFormItem=this;_1.callingForm=this.canvas;_1.locatorParent=this.canvas}
if(this.inputFormat)_1.inputFormat=this.inputFormat;_1.startYear=this.getStartDate().getFullYear();_1.endYear=this.getEndDate().getFullYear();_1.fiscalCalendar=this.getFiscalCalendar();_1.showFiscalYearChooser=this.showChooserFiscalYearPicker;_1.showWeekChooser=this.showChooserWeekPicker;var _3=this.type,_4=false;if(isc.SimpleType.inheritsFrom(_3,"date")&&!isc.SimpleType.inheritsFrom(_3,"datetime"))
{_4=true}
var _5=_4?false:this.showPickerTimeItem;_1.showTimeItem=_5
_1.use24HourTime=this.use24HourTime;if(this.pickerTimeItemProperties)
_1.timeItemProperties=isc.addProperties({},_1.timeItemProperties,this.pickerTimeItemProperties);var _6=this.getAbsoluteDate();if(_1.setData){if(isc.isA.Date(_6)&&!isNaN(_6.getTime())){_1.setData(_6)}else{var _7=new Date();if(this.rangePosition=="start"){_7=isc.DateUtil.getStartOf(_7,"D")}else if(this.rangePosition=="end"){_7=isc.DateUtil.getEndOf(_7,"D")}
_1.setData(_7);_1.$1275=true}}
if(_1.updateUI)_1.updateUI();return this.Super("showPicker",arguments)},isc.A.getPickerRect=function isc_RelativeDateItem_getPickerRect(){var _1=this.getPageLeft(),_2=this.getPageTop(),_3=isc.DateItem.chooserWidth+3,_4=isc.DateItem.chooserHeight+3,_5=this.canvas,_6;_6=_5.getItem("iconPlaceholder");_1+=_6.getLeft();_1+=Math.round((_6.getVisibleWidth()-(this.getPickerIconWidth()/2))-
(_3/2));_2+=Math.round((this.getPickerIconHeight()/2)-(_4/2));return[_1,_2]},isc.A.updateDisabled=function isc_RelativeDateItem_updateDisabled(){this.Super("updateDisabled",arguments);if(this.iconPlaceholder&&this.iconPlaceholder.isVisible()){this.iconPlaceholder.redraw()}},isc.A.pickerDataChanged=function isc_RelativeDateItem_pickerDataChanged(_1){var _2=_1.getData();var _3=this.getType(),_4=isc.SimpleType.inheritsFrom(_3,"date"),_5=isc.SimpleType.inheritsFrom(_3,"datetime");if(!this.showPickerTimeItem&&(!_4||_5)){this.setToZeroTime(_2);if(this.rangePosition=="end")_2=isc.DateUtil.getEndOf(_2,"D")}
this.$20l=true;this.valueField.setValue(this.formatDate(_2));this.$20l=false;this.updateValue();if(!this.hasFocus)this.focusInItem()},isc.A.getStartDate=function isc_RelativeDateItem_getStartDate(){var _1=this.parseDate(this.startDate);if(!isc.isA.Date(_1)){this.logWarn("startDate was not in valid date format - using default start date");_1=isc.DateItem.DEFAULT_START_DATE}
return _1},isc.A.getEndDate=function isc_RelativeDateItem_getEndDate(){var _1=this.parseDate(this.endDate);if(!isc.isA.Date(_1)){this.logWarn("endDate was not in valid date format - using default end date");_1=isc.DateItem.DEFAULT_END_DATE}
return _1},isc.A.parseDate=function isc_RelativeDateItem_parseDate(_1,_2){if(_1==null||isc.isAn.emptyString(_1))return null;if(_2==null)_2=this.getInputFormat();var _3=this.getType(),_4=isc.SimpleType.inheritsFrom(_3,"date"),_5=isc.SimpleType.inheritsFrom(_3,"datetime"),_6=_4&&!_5;var _7=Date.parseInput(_1,_2,this.centuryThreshold,true,!_6);if(isc.isA.Date(_7)&&!_6){var _8=this.getEnteredValue();if(_8!=null&&!isc.isA.Function(_2)){var _9=isc.Date.isDatetimeString(_8,_2);if(!_9){this.setToZeroTime(_7);if(this.rangePosition=="end")_7=isc.DateUtil.getEndOf(_7,"D")}}}
return _7},isc.A.formatDate=function isc_RelativeDateItem_formatDate(_1){if(!isc.isA.Date(_1))return _1;var _2=this.$45i();var _3=this.getType(),_4=false,_5=isc.SimpleType.inheritsFrom(_3,"date");if(!_5||isc.SimpleType.inheritsFrom(_3,"datetime"))_4=true;if(_4){return _1.toShortDatetime(_2,true)}else{return _1.toShortDate(_2,!_5)}},isc.A.getInputFormat=function isc_RelativeDateItem_getInputFormat(){if(this.inputFormat)return this.inputFormat;var _1=this.$45i();if(_1){return Date.mapDisplayFormatToInputFormat(_1)}
return null},isc.A.getEnteredValue=function isc_RelativeDateItem_getEnteredValue(){if(this.valueField)return this.valueField.getValue();return this.getValue()},isc.A.getValue=function isc_RelativeDateItem_getValue(){var _1=this.Super("getValue",arguments);return _1||(this.valueField&&this.valueField.getValue())});isc.B._maxIndex=isc.C+30}
if(isc.ListGrid){isc.defineClass("DateRangeItem","CanvasItem");isc.A=isc.DateRangeItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.shouldSaveValue=true;isc.A.fromTitle="From";isc.A.toTitle="To";isc.A.allowRelativeDates=false;isc.A.validateCriteria=true;isc.A.dateRangeFormConstructor="DynamicForm";isc.A.dateRangeFormDefaults={margin:0,padding:0,itemChanged:function(_1,_2){var _3=this.getValues(),_4={_constructor:"DateRange"};if(_3.fromField!=null)_4.start=_3.fromField;if(_3.toField!=null)_4.end=_3.toField;this.creator.$10y(_4)}};isc.A.relativeItemConstructor="RelativeDateItem";isc.A.absoluteItemConstructor="DateItem";isc.B.push(isc.A.setFromDate=function isc_DateRangeItem_setFromDate(_1){this.fromDate=_1;if(this.fromField)this.fromField.setValue(this.fromDate)},isc.A.setToDate=function isc_DateRangeItem_setToDate(_1){this.toDate=_1;if(this.toField)this.toField.setValue(this.toDate)},isc.A.hasAdvancedCriteria=function isc_DateRangeItem_hasAdvancedCriteria(){return this.fromField&&this.toField&&(this.fromField.getValue()!=null||this.toField.getValue()!=null)},isc.A.getCriterion=function isc_DateRangeItem_getCriterion(_1){if(this.validateCriteria){if(!this.validateRange())return null}
_1=_1||!this.allowRelativeDates;var _2=_1?this.fromField.getValue():this.fromField.getRelativeDate()||this.fromField.getValue(),_3=_2!=null,_4=_1?this.toField.getValue():this.toField.getRelativeDate()||this.toField.getValue(),_5=_4!=null,_6=null;if(_3||_5){_6={_constructor:"AdvancedCriteria",operator:"and",criteria:[]};if(_3){if(isc.DateUtil.isRelativeDate(_2)){_2.rangePosition="start"}
if(this.fromField.isLogicalDate){_2.logicalDate=true}
_6.criteria.add({fieldName:this.getCriteriaFieldName(),operator:"greaterOrEqual",value:_2})}
if(_5){if(isc.DateUtil.isRelativeDate(_4)){_4.rangePosition="end"}
if(this.toField.isLogicalDate){_4.logicalDate=true}
_6.criteria.add({fieldName:this.getCriteriaFieldName(),operator:"lessOrEqual",value:_4})}}
return _6},isc.A.validateRange=function isc_DateRangeItem_validateRange(){var _1=true;if(this.fromField&&!this.fromField.validate())_1=false;if(this.toField&&!this.toField.validate())_1=false;return _1},isc.A.canEditCriterion=function isc_DateRangeItem_canEditCriterion(_1){if(_1==null)return false;var _2=this.getCriteriaFieldName();if(_1.operator=="and"){var _3=_1.criteria;if(_3.length==0||_3.length>2){return false}else if(_3.length==1){var _4=_3[0];if(_4.fieldName!=_2)return false;if(_4.operator=="equals"){this.logWarn("DynamicForm editing Advanced criteria. Includes criterion for field "+_2+". A dateRange editor is showing for this field and the existing criteria has operator: "+_4.operator+". DateRange items can only edit criteria greaterThan/greaterOrEqual or lessThan/lessOrEqual. However, for the 'equals' operator, a dateRange will be constructed for you, as greaterOrEqual to [value] and lessOrEqual to [value], ie, one day.");return true}}
for(var i=0;i<_3.length;i++){var _6=_3[i];if(_6.fieldName!=_2)return false;if(_6.operator!="greaterThan"&&_6.operator!="greaterOrEqual"&&_6.operator!="lessThan"&&_6.operator!="lessOrEqual")
{this.logWarn("DynamicForm editing Advanced criteria. Includes criterion for field "+_2+". A dateRange editor is showing for this field but the existing criteria has operator:"+_6.operator+". DateRange items can only edit criteria greaterThan/greaterOrEqual or lessThan/lessOrEqual so leaving this unaltered.");return false}}
return true}else if(_1.fieldName==_2){var _7="DynamicForm editing Advanced criteria. Includes criterion for field "+_2+". A dateRange editor is showing for this field and the existing criteria has operator:"+_1.operator+". DateRange items can only edit criteria greaterThan/greaterOrEqual or lessThan/lessOrEqual";if(_1.operator=="equals"){this.logWarn(_7+". However, for the 'equals' operator, a dateRange will be constructed for you, as greaterOrEqual to [value] and lessOrEqual to [value], ie, one day.");return true}
if(_1.operator!="greaterThan"&&_1.operator!="greaterOrEqual"&&_1.operator!="lessThan"&&_1.operator!="lessOrEqual")
{this.logWarn(_7+" so leaving this unaltered.");return false}
return true}
return false},isc.A.setCriterion=function isc_DateRangeItem_setCriterion(_1){if(!_1)return;if(_1.operator=="equals"){var _2={_constructor:"AdvancedCriteria",operator:"and",criteria:[{fieldName:_1.fieldName,operator:"greaterOrEqual",value:_1.value},{fieldName:_1.fieldName,operator:"lessOrEqual",value:_1.value}]};_1=_2}
var _3,_4;if(_1.operator=="and"){_3=_1.criteria.find("operator","greaterThan");if(!_3)_3=_1.criteria.find("operator","greaterOrEqual");_4=_1.criteria.find("operator","lessThan");if(!_4)_4=_1.criteria.find("operator","lessOrEqual")}else{if(_1.operator=="greaterThan")_3=_1;else if(_1.operator=="greaterOrEqual")_3=_1;else if(_1.operator=="lessThan")_4=_1;else if(_1.operator=="lessOrEqual")_4=_1}
if(_3!=null){this.fromField.setValue(_3.value)}
if(_4!=null){this.toField.setValue(_4.value)}});isc.B._maxIndex=isc.C+7;isc.A=isc.DateRangeItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.autoDestroy=true;isc.A.invalidRangeErrorMessage="'To' field value cannot be earlier than 'From' field value.";isc.B.push(isc.A.init=function isc_DateRangeItem_init(){if(this.type==null)this.type="date";this.$67h();this.Super("init",arguments)},isc.A.isEditable=function isc_DateRangeItem_isEditable(){return true},isc.A.$67h=function isc_DateRangeItem__createEditor(){var _1;var _2={$76z:true};if(this.form.dataSource){_1=isc.DataSource.getDataSource(this.form.dataSource);var _3=_1.getField(this.name);if(_3){_2.dataSource=_1.getFieldDataSource(_3)}}
if(this.form&&this.form.showComplexFieldsRecursively){_2.showComplexFields=true;_2.showComplexFieldsRecursively=true}else{_2.showComplexFields=false}
_2.height=22;var _4=this.innerTitleOrientation||this.titleOrientation||this.form.titleOrientation||"left";_2.titleOrientation=_4;if(_4=="left"||_4=="right"){_2.numCols=2;_2.colWidths=[50,"*"]}else{_2.numCols=1;_2.colWidths=["*"]}
this.addAutoChild("dateRangeForm",_2);this.canvas=this.dateRangeForm;var _5=this.getType(),_6=false;if(isc.SimpleType.inheritsFrom(_5,"date")&&!isc.SimpleType.inheritsFrom(_5,"datetime"))
{_6=true}
if(!this.baseDate)this.baseDate=new Date();if(_6)this.baseDate=isc.Date.getLogicalDateOnly(this.baseDate);var _7=this,_8=this.allowRelativeDates?this.relativeItemConstructor:this.absoluteItemConstructor,_9=[];_9[0]=isc.addProperties({_constructor:this.fromFieldConstructor||_8},this.fromFieldDefaults,this.fromFieldProperties,{name:"fromField",baseDate:this.baseDate,dateFormatter:(this.dateDisplayFormat||this.dateFormatter),type:this.getType(),inputFormat:(this.dateInputFormat||this.inputFormat),rangePosition:"start",title:this.fromTitle,defaultValue:this.fromDate,useTextField:(!this.allowRelativeDates?true:null)});_9[1]=isc.addProperties({_constructor:this.toFieldConstructor||_8},this.toFieldDefaults,this.toFieldProperties,{name:"toField",baseDate:this.baseDate,dateFormatter:(this.dateDisplayFormat||this.dateFormatter),type:this.getType(),inputFormat:(this.dateInputFormat||this.inputFormat),rangePosition:"end",validators:[{type:"custom",errorMessage:this.invalidRangeErrorMessage,condition:function(_11,_12,_13,_14){if(_13!=null&&isc.isA.Date(_13)){var _10=_14.fromField;if(_10!=null&&isc.isA.Date(_10)&&Date.compareDates(_10,_13)<0)
{return false}}
return true}}],title:this.toTitle,defaultValue:this.toDate,useTextField:(!this.allowRelativeDates?true:null)});this.canvas.setFields(_9);this.toField=this.canvas.getField("toField");this.fromField=this.canvas.getField("fromField");if(this.allowRelativeDates){this.fromField.canvas.$v4=this.toField.canvas;this.toField.canvas.$vw=this.fromField.canvas}
if(this.defaultValue){this.setValue(this.defaultValue)}else{if(this.fromDate)this.setFromDate(this.fromDate);if(this.toDate)this.setToDate(this.toDate)}},isc.A.fieldChanged=function isc_DateRangeItem_fieldChanged(){},isc.A.setValue=function isc_DateRangeItem_setValue(_1){var _2=_1?_1.start:null,_3=_1?_1.end:null,_4=isc.RelativeDateItem;if(!this.allowRelativeDates&&_4.isRelativeDate(_2))this.setFromDate(null);else this.setFromDate(_2);if(!this.allowRelativeDates&&_4.isRelativeDate(_3))this.setToDate(null);else this.setToDate(_3);this.Super("setValue",arguments)},isc.A.getValue=function isc_DateRangeItem_getValue(){if(!this.fromField||!this.toField)return;var _1=this.allowRelativeDates,_2=_1&&this.fromField.getRelativeDate()?this.fromField.getRelativeDate():this.fromField.getValue(),_3=_1&&this.toField.getRelativeDate()?this.toField.getRelativeDate():this.toField.getValue(),_4={_constructor:"DateRange"};if(_2==null&&_3==null)return null;if(_2!=null)_4.start=_2;if(_3!=null)_4.end=_3;return _4},isc.A.destroy=function isc_DateRangeItem_destroy(){if(this.dateRangeForm)this.dateRangeForm.destroy();this.Super("destroy",arguments)});isc.B._maxIndex=isc.C+7;if(isc.Window){isc.defineClass("DateRangeDialog","Window");isc.A=isc.DateRangeDialog;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.askForRange=function isc_c_DateRangeDialog_askForRange(_1,_2,_3,_4){var _5=isc.DateRangeDialog.create({allowRelativeDates:_1!=null?_1:true,rangeItemProperties:_2,callback:_4},_3);_5.show()});isc.B._maxIndex=isc.C+1;isc.A=isc.DateRangeDialog.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.isModal=true;isc.A.showModalMask=true;isc.A.dismissOnEscape=true;isc.A.autoCenter=true;isc.A.autoSize=true;isc.A.vertical="true";isc.A.showMinimizeButton=false;isc.A.headerIconProperties={src:"[SKIN]/DynamicForm/DatePicker_icon.gif"};isc.A.returnCriterion=false;isc.A.headerTitle="Select Date Range";isc.A.mainLayoutDefaults={_constructor:"VLayout",width:380,height:105,layoutMargin:5};isc.A.rangeFormDefaults={_constructor:"DynamicForm",numCols:1,height:"100%",autoParent:"mainLayout"};isc.A.rangeItemConstructor="DateRangeItem";isc.A.rangeItemDefaults={allowRelativeDates:true,showTitle:false};isc.A.buttonLayoutDefaults={_constructor:"HLayout",width:"100%",height:22,layoutAlign:"right",align:"right",membersMargin:5,autoParent:"mainLayout"};isc.A.clearButtonTitle="Clear";isc.A.clearButtonConstructor="IButton";isc.A.clearButtonDefaults={height:22,width:80,canFocus:true,autoParent:"buttonLayout",click:function(){this.creator.clearValues()}};isc.A.okButtonTitle="OK";isc.A.okButtonConstructor="IButton";isc.A.okButtonDefaults={height:22,width:80,canFocus:true,autoParent:"buttonLayout",click:function(){this.creator.accept()}};isc.A.cancelButtonTitle="Cancel";isc.A.cancelButtonConstructor="IButton";isc.A.cancelButtonDefaults={height:22,width:80,canFocus:true,autoParent:"buttonLayout",click:function(){this.creator.cancel()}};isc.A.destroyOnClose=true;isc.B.push(isc.A.closeClick=function isc_DateRangeDialog_closeClick(){this.cancel()},isc.A.destroy=function isc_DateRangeDialog_destroy(){if(this.rangeForm){this.rangeForm.markForDestroy()}
this.Super("destroy",arguments)});isc.B._maxIndex=isc.C+2;isc.A=isc.DateRangeDialog.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.initWidget=function isc_DateRangeDialog_initWidget(){this.title=this.headerTitle;this.Super("initWidget",arguments);this.addAutoChild("mainLayout");this.addAutoChild("rangeForm",{$76z:true,items:[isc.addProperties({_constructor:this.rangeItemConstructor},this.rangeItemDefaults,this.rangeItemProperties,{name:"rangeItem",fromDate:this.fromDate,toDate:this.toDate,dateDisplayFormat:this.dateDisplayFormat})]});var _1=this.rangeItem=this.rangeForm.getField("rangeItem");var _2=_1.innerTitleOrientation||_1.titleOrientation||"left";_1.canvas.titleOrientation=_2;if(_2=="left"||_2=="right"){_1.canvas.numCols=2;_1.canvas.colWidths=[50,"*"]}else{_1.canvas.numCols=1;_1.canvas.colWidths=["*"]}
this.addAutoChild("buttonLayout");this.addAutoChild("clearButton",{canFocus:true,title:this.clearButtonTitle});this.addAutoChild("okButton",{canFocus:true,title:this.okButtonTitle});this.addAutoChild("cancelButton",{canFocus:true,title:this.cancelButtonTitle});this.addItem(this.mainLayout)},isc.A.clearValues=function isc_DateRangeDialog_clearValues(){if(this.rangeItem){this.rangeItem.setValue(null);if(this.autoValidate)this.rangeItem.validateRange()}},isc.A.accept=function isc_DateRangeDialog_accept(){if(this.autoValidate&&!this.rangeItem.validateRange())return;this.finished(this.rangeItem.returnCriterion?this.rangeItem.getCriterion():this.rangeItem.getValue())},isc.A.cancel=function isc_DateRangeDialog_cancel(){this.hide();if(this.destroyOnClose)this.markForDestroy()},isc.A.finished=function isc_DateRangeDialog_finished(_1){if(this.callback)this.fireCallback(this.callback,"value",[_1]);this.hide();if(this.destroyOnClose)this.markForDestroy()});isc.B._maxIndex=isc.C+5;isc.defineClass("MiniDateRangeItem","StaticTextItem");isc.A=isc.MiniDateRangeItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.textBoxStyle="textItem";isc.A.applyHeightToTextBox=true;isc.A.clipValue=true;isc.A.wrap=false;isc.A.iconVAlign="top";isc.A.height=20;isc.A.width=100;isc.A.shouldSaveValue=true;isc.A.rangeDialogConstructor="DateRangeDialog";isc.A.rangeDialogDefaults={autoDraw:false,destroyOnClose:false};isc.A.canFocus=true;isc.A.canTabToIcons=true;isc.A.fromDateOnlyPrefix="Since";isc.A.toDateOnlyPrefix="Before";isc.A.pickerIconPrompt="Show Date Chooser";isc.A.pickerIconDefaults={name:"showDateRange",src:"[SKIN]/DynamicForm/DatePicker_icon.gif",width:16,height:16,showOver:false,showFocused:false,showFocusedWithItem:false,hspace:0,click:function(_1,_2,_3){if(!_2.disabled)_2.showRangeDialog()}};isc.A.iconVAlign="center";isc.A.allowRelativeDates=true;isc.B.push(isc.A.getFocusElement=function isc_MiniDateRangeItem_getFocusElement(){return this.$16g(this.icons[0])},isc.A.$872=function isc_MiniDateRangeItem__canFocusInTextBox(){return false},isc.A.handleClick=function isc_MiniDateRangeItem_handleClick(){if(!this.disabled)this.showRangeDialog()});isc.B._maxIndex=isc.C+3;isc.A=isc.MiniDateRangeItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.autoValidate=true;isc.B.push(isc.A.init=function isc_MiniDateRangeItem_init(){this.addAutoChild("rangeDialog",{autoValidate:this.autoValidate,fromDate:this.fromDate,toDate:this.toDate,rangeItemProperties:{allowRelativeDates:this.allowRelativeDates,type:this.getType()},dateDisplayFormat:this.dateDisplayFormat,callback:this.getID()+".rangeDialogCallback(value)"});this.icons=[isc.addProperties({prompt:this.pickerIconPrompt},this.pickerIconDefaults,this.pickerIconProperties)];this.canTabToIcons=true;this.rangeItem=this.rangeDialog.rangeItem;this.rangeItem.name=this.name;if(this.defaultValue){this.setValue(this.defaultValue)}},isc.A.setAutoValidate=function isc_MiniDateRangeItem_setAutoValidate(_1){this.autoValidate=_1;if(this.rangeDialog)this.rangeDialog.autoValidate=this.autoValidate},isc.A.showRangeDialog=function isc_MiniDateRangeItem_showRangeDialog(){this.rangeDialog.rangeItem.setFromDate(this.fromDate);this.rangeDialog.rangeItem.setToDate(this.toDate);this.rangeDialog.show()},isc.A.rangeDialogCallback=function isc_MiniDateRangeItem_rangeDialogCallback(_1){if(!this.$10y(_1))return;this.displayValue(_1)},isc.A.hasAdvancedCriteria=function isc_MiniDateRangeItem_hasAdvancedCriteria(){return this.rangeItem!=null&&this.rangeItem.hasAdvancedCriteria()},isc.A.getCriterion=function isc_MiniDateRangeItem_getCriterion(){var _1=this.rangeItem?this.rangeItem.getCriterion():null;return _1},isc.A.setCriterion=function isc_MiniDateRangeItem_setCriterion(_1){if(this.rangeItem){this.rangeItem.setCriterion(_1);var _2=this.rangeItem.getValue();this.setValue(_2,null,true)}},isc.A.canEditCriterion=function isc_MiniDateRangeItem_canEditCriterion(_1){return this.rangeItem?this.rangeItem.canEditCriterion(_1):false},isc.A.setValue=function isc_MiniDateRangeItem_setValue(_1,_2,_3){this.updateStoredDates(_1);if(!_3){this.rangeItem.setFromDate(this.fromDate);this.rangeItem.setToDate(this.toDate)}
var _4=[this.getValue()];this.Super("setValue",_4,arguments)},isc.A.updateStoredDates=function isc_MiniDateRangeItem_updateStoredDates(_1){if(_1!=null){if(isc.DataSource.isAdvancedCriteria(_1)){var _2={};for(var i=0;i<_1.criteria.length;i++){var _4=_1.criteria[i];if(_4.operator=="greaterThan"||_4.operator=="greaterOrEqual")
_2.start=_4.value;else if(_4.operator=="lessThan"||_4.operator=="lessOrEqual")
_2.end=_4.value}
_1=_2}
this.fromDate=_1.start;this.toDate=_1.end}else{this.fromDate=null;this.toDate=null;this.prompt=""}},isc.A.saveValue=function isc_MiniDateRangeItem_saveValue(){this.Super("saveValue",arguments);this.updateStoredDates(this._value)},isc.A.displayValue=function isc_MiniDateRangeItem_displayValue(_1){var _2=this.mapValueToDisplay(_1)||"";this.setElementValue(_2,_1)},isc.A.mapValueToDisplay=function isc_MiniDateRangeItem_mapValueToDisplay(_1){if(_1==null)return"";var _2=_1.start,_3=_1.end,_4=isc.RelativeDateItem,_5=(_4.isRelativeDate(_2)?_4.getAbsoluteDate(_2.value,null,null,"start"):_2),_6=(_4.isRelativeDate(_3)?_4.getAbsoluteDate(_3.value,null,null,"end"):_3);var _7;if(_5||_6){if(this.dateDisplayFormat){if(_5)_7=this.formatDate(_5);if(_6){if(_7)_7+=" - "+this.formatDate(_6);else _7=this.formatDate(_6)}}else _7=Date.getFormattedDateRangeString(_5,_6);if(!_5)_7=this.toDateOnlyPrefix+" "+_7;else if(!_6)_7=this.fromDateOnlyPrefix+" "+_7}
this.prompt=_7||"";return this.prompt},isc.A.getValue=function isc_MiniDateRangeItem_getValue(){if(!this.rangeItem)return;return this.rangeItem.getValue()},isc.A.formatDate=function isc_MiniDateRangeItem_formatDate(_1){if(!isc.isA.Date(_1))return _1;var _2=this.getType(),_3=isc.SimpleType.inheritsFrom(_2,"date")&&!isc.SimpleType.inheritsFrom(_2,"datetime");return _1.toShortDate(this.$45i(),!_3)},isc.A.getCriteriaValue=function isc_MiniDateRangeItem_getCriteriaValue(){return this.getCriterion()},isc.A.destroy=function isc_MiniDateRangeItem_destroy(){if(this.rangeDialog)this.rangeDialog.markForDestroy();this.Super("destroy",arguments)});isc.B._maxIndex=isc.C+17}}
if(isc.Portal){isc.defineClass("EntityEditorHeader","VLayout");isc.A=isc.EntityEditorHeader.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.height=1;isc.A.padding=10;isc.A.border="2px solid black";isc.A.headerLayoutDefaults={_constructor:"VLayout",width:"100%",height:1,membersMargin:5};isc.A.headerLabelTitle="<B><H2>Editing ${entityType}</H2><br><H3>This UI lets you edit the entire data-structure for this Entity-type</H3></B>";isc.A.headerLabelDefaults={_constructor:"Label",width:"100%",height:30,autoParent:"headerLayout"};isc.A.showDetailLabel=false;isc.A.defaultDetailLabelTitle="<B><H3>This UI lets you edit the entire data-structure for this Entity-type</H3></B>";isc.A.detailLabelTitle="<B><H3>$entityComment</H3></B>";isc.A.detailLabelDefaults={_constructor:"Label",width:"100%",height:20,autoParent:"headerLayout"};isc.A.unknownEntityTitle="[Unknown Entity-type]";isc.B.push(isc.A.initWidget=function isc_EntityEditorHeader_initWidget(){var _1=this.headerLabelTitle;var _2=this.detailLabelTitle;if(this.dataSource)this.getDataSource(this.dataSource);if(!this.entityName)this.entityName=this.getEntityName(this.dataSource);if(!this.entityComment)this.entityComment=this.getEntityComment(this.dataSource);if(this.entityName)
_1=_1.evalDynamicString(this,{entityType:this.entityName});if(this.entityComment)
_2=_2.evalDynamicString(this,{entityType:this.entityComment});this.headerLayout=this.addAutoChild("headerLayout");this.headerLabel=this.addAutoChild("headerLabel",{contents:_1});this.detailLabel=this.addAutoChild("detailLabel",{contents:_2});this.headerLayout.addMembers([this.headerLabel,this.detailLabel]);this.addMember(this.headerLayout)},isc.A.getEntityName=function isc_EntityEditorHeader_getEntityName(_1){var _2=this.unknownEntityTitle;if(_1){if(isc.isA.Function(_1.getEntityName))
_2=_1.getEntityName();else _2=_1.ID}
return _2},isc.A.getEntityComment=function isc_EntityEditorHeader_getEntityComment(_1){var _2=this.defaultDetailLabelTitle;if(_1){if(isc.isA.Function(_1.getEntityComment))
_2=_1.getEntityComment();else _2="Allows hierarchical editing of data in "+_1.ID+" DataSource"}
return _2});isc.B._maxIndex=isc.C+3;isc.defineClass("EntityEditorForm","Portlet");isc.A=isc.EntityEditorForm.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.addButtonDefaults={_constructor:"IButton",title:"Add",autoFit:true,layoutAlign:"right",click:function(){this.creator.addRecord()}};isc.A.formDefaults={_constructor:"DynamicForm",numCols:6,colWidths:["*","*","*","*","*","*"],width:"100%",implicitSave:true,initWidget:function(){this.Super("initWidget",arguments);if(this.record&&this.relation){var _1={};if(!this.relation.direction){_1[this.relation.baseFieldName]=this.record[this.relation.baseFieldName]}else{_1[this.relation.baseFieldName]=this.record[this.relation.relatedFieldName]}
this.fetchData(_1)}},implicitSaveCallback:function(_1){if(!this.record||!this.record[this.relation.baseFieldName]){this.creator.setRecord(_1);this.setValues(_1);this.saveOperationType="update"}}};isc.B.push(isc.A.initWidget=function isc_EntityEditorForm_initWidget(){this.Super("initWidget",arguments);this.addAutoChild("addButton");this.addAutoChild("form",isc.addProperties({},this.formProperties,{dataSource:this.dataSource,title:this.title,record:this.record,relation:this.relation}));if(isc.isA.Portlet(this))this.addItems([this.addButton,this.form]);else this.addMembers([this.addButton,this.form])},isc.A.fetchData=function isc_EntityEditorForm_fetchData(){var _1={};if(!this.relation.direction){if(this.isTopLevel())
_1[this.relation.baseFieldName]=this.record[this.relation.baseFieldName]}else{_1[this.relation.baseFieldName]=this.record[this.relation.relatedFieldName]}
this.form.fetchData(_1)},isc.A.addRecord=function isc_EntityEditorForm_addRecord(){var _1={};if(!this.relation.direction){if(!this.isTopLevel())
_1[this.relation.baseFieldName]=this.record[this.relation.baseFieldName]}else{_1[this.relation.baseFieldName]=this.record[this.relation.relatedFieldName]}
this.record=_1;this.form.editNewRecord(_1)},isc.A.isTopLevel=function isc_EntityEditorForm_isTopLevel(){return this.relation.relatedDS==null},isc.A.setRecord=function isc_EntityEditorForm_setRecord(_1){if(this.isTopLevel()){this.creator.updateTopLevel()}else{this.fetchData()}
this.record=_1;this.form.record=_1;if(this.addButton)this.addButton.setDisabled(this.record==null)},isc.A.getData=function isc_EntityEditorForm_getData(){return null},isc.A.getCriteria=function isc_EntityEditorForm_getCriteria(){return this.form.getValuesAsCriteria()},isc.A.enterSearchMode=function isc_EntityEditorForm_enterSearchMode(_1){this.addButton.setDisabled(true);this.record=this.form.record=null;this.form.implicitSave=false;this.form.setData([]);if(_1)this.form.setValues(_1)},isc.A.exitSearchMode=function isc_EntityEditorForm_exitSearchMode(){});isc.B._maxIndex=isc.C+9;isc.defineClass("EntityEditorGrid","Portlet");isc.A=isc.EntityEditorGrid.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.addButtonDefaults={_constructor:"IButton",title:"Add",autoFit:true,layoutAlign:"right",click:function(){this.creator.addRecord()}};isc.A.gridDefaults={_constructor:"ListGrid",width:"100%",height:"100%",autoFitMaxRecords:4,autoFetchData:false,canEdit:true,autoSaveEdits:true,initWidget:function(){if(this.record&&this.relation){this.initialCriteria={};this.initialCriteria[this.relation.baseFieldName]=this.record[this.relation.relatedFieldName]}
this.Super("initWidget",arguments)}};isc.B.push(isc.A.initWidget=function isc_EntityEditorGrid_initWidget(){this.addAutoChild("addButton");if(!isc.isA.DataSource(this.dataSource))
this.dataSource=isc.DS.get(this.dataSource);this.addAutoChild("grid",isc.addProperties({},this.gridProperties,{dataSource:this.dataSource,title:this.title,record:this.record,relation:this.relation}));if(this.record)this.fetchData();if(this.addButton)this.addButton.setDisabled(this.record==null);if(isc.isA.Portlet(this))this.addItems([this.addButton,this.grid]);else this.addMembers([this.addButton,this.grid]);this.Super("initWidget",arguments)},isc.A.setData=function isc_EntityEditorGrid_setData(_1){},isc.A.fetchData=function isc_EntityEditorGrid_fetchData(){var _1={};if(this.record){_1[this.relation.baseFieldName]=this.record[this.relation.relatedFieldName]}
this.grid.fetchData(_1)},isc.A.addRecord=function isc_EntityEditorGrid_addRecord(){var _1={};_1[this.relation.baseFieldName]=this.record[this.relation.relatedFieldName];this.grid.startEditingNew(_1)},isc.A.setRecord=function isc_EntityEditorGrid_setRecord(_1){this.record=_1;this.fetchData();if(this.addButton)this.addButton.setDisabled(this.record==null)},isc.A.getData=function isc_EntityEditorGrid_getData(){return null},isc.A.getCriteria=function isc_EntityEditorGrid_getCriteria(){return this.grid.getFilterEditorCriteria()},isc.A.enterSearchMode=function isc_EntityEditorGrid_enterSearchMode(_1){this.addButton.setDisabled(true);this.record=this.grid.record=null;this.grid.setData([]);this.grid.setShowFilterEditor(true);if(_1)this.grid.setCriteria(_1)},isc.A.exitSearchMode=function isc_EntityEditorGrid_exitSearchMode(){});isc.B._maxIndex=isc.C+9;isc.defineClass("EntityEditor","VLayout");isc.A=isc.EntityEditor.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.membersMargin=10;isc.A.padding=10;isc.A.dataSource="";isc.A.modeFormDefaults={_constructor:"DynamicForm",height:1,width:"100%",fields:[{name:"edit",title:"options",defaultToFirstOption:true,valueMap:["Edit","Search"],changed:function(_1,_2,_3){_1.creator.setMode(_3)}}]};isc.A.formEntityDefaults={_constructor:"EntityEditorForm",height:1,width:"100%"};isc.A.gridEntityDefaults={_constructor:"EntityEditorGrid",height:1,width:"100%"};isc.A.showTabset=false;isc.A.tabsetDefaults={_constructor:"TabSet",width:"100%",height:"100%"};isc.A.portalDefaults={_constructor:"PortalLayout",width:"100%",height:"100%",showColumnMenus:false,numColumns:1};isc.B.push(isc.A.getDataSourceHierarchy=function isc_EntityEditor_getDataSourceHierarchy(_1,_2){var _3=[];if(!isc.isA.DataSource(_1))
_1=isc.DS.getDataSource(_1);if(!isc.isA.DataSource(_1)){this.logWarn("No datasource provided..");return _3}
if(!_2)_2=[];if(_2.contains(_1.ID)){return null}
var _4=isc.getValues(_1.getFields()),_5=[];for(var i=0;i<_4.length;i++){if(_4[i].foreignKey!=null){_5.add(_4[i])}}
var _7=_1.ID,_8=[],_9=[];isc.DS.registerDataSource(_1);var _10=_1.getChildDataSources();if(_10){for(var i=0;i<_10.length;i++){var _11=_10[i],_12=isc.getValues(_11.getFields());for(var j=0;j<_12.length;j++){var _14=_12[j];if(!_14.foreignKey||isc.DS.getForeignDSName(_14,_11)!=_1.ID)continue;var _15=isc.DS.getForeignFieldName(_14,_11);var _16=_4.find("name",_15);if(_16&&_14.entityEditMode!="picker"){var _17=_7,_18=_16.name,_19=_11.ID,_20=_14.name,_21=_16.relationArity,_22="out";if(!_2.contains(_19)){_3.add({baseDS:_19,baseFieldName:_20,relatedDS:_17,relatedFieldName:_18,relationArity:_16.relationArity})}}}}}
for(var j=0;j<_5.length;j++){var _16=_5[j];if(!_16.foreignKey)continue;var _23=isc.DS.getForeignFieldName(_16,_1),_11=isc.DS.getDataSource(isc.DS.getForeignDSName(_16,_1)),_12=isc.getValues(_11.getFields());var _14=_12.find("name",_23);if(_14&&_16.entityEditMode!="picker"){var _17=_7,_18=_16.name,_19=this.getDSName(_11),_20=_14.name,_21=_16.relationArity,_22="out";if(!_2.contains(_19)){_3.add({baseDS:_19,baseFieldName:_20,relatedDS:_17,relatedFieldName:_18,relationArity:_21,direction:_22})}}}
return _3},isc.A.getDSName=function isc_EntityEditor_getDSName(_1){if(isc.isA.String(_1))return _1;if(isc.isA.DataSource(_1))return _1.ID;return null});isc.B._maxIndex=isc.C+2;isc.A=isc.EntityEditor.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.initWidget=function isc_EntityEditor_initWidget(){this.vertical=true;if(!isc.isA.DataSource(this.dataSource))
this.dataSource=isc.DS.getDataSource(this.dataSource);if(!this.dataSource)this.logWarn("No dataSource provided - no entity to edit");else this.entityTree=this.getEntityTree();this.addAutoChild("modeForm");this.addAutoChild("tabset");this.addAutoChild("portal");this.addMember(this.modeForm);if(this.tabset)this.addMember(this.tabset);if(this.portal)this.addMember(this.portal)},isc.A.getEntityTree=function isc_EntityEditor_getEntityTree(){if(!isc.isA.DataSource(this.dataSource))
return{baseDS:"NoDSProvided",relations:[]};var _1={baseDS:this.dataSource.ID,baseFieldName:this.dataSource.getPrimaryKeyFieldNames()[0],relations:[]};_1.relations=this.getDataSourceHierarchy(this.dataSource);return _1},isc.A.fetchDataByPK=function isc_EntityEditor_fetchDataByPK(_1){if(!this.dataSource)return;var _2=this;this.dataSource.fetchData(_1,function(_3,_4){_2.fetchDataReply(_4)})},isc.A.fetchDataReply=function isc_EntityEditor_fetchDataReply(_1){this.clearEntity();this.record=_1[0];this.showEntity()},isc.A.clearEntity=function isc_EntityEditor_clearEntity(){if(this.entities&&this.entities.length>0){if(this.showTabset){for(var i=this.tabset.tabs.length-1;i>=0;i--){this.entities[i].markForDestroy();this.tabset.removeTab(i)}}else if(this.portal){this.portal.members.removeAll();for(var i=this.entities.length-1;i>=0;i--){this.entities[i].markForDestroy()}}else{for(var i=this.members.length-1;i>=1;i--){this.removeMember(i);this.entities[i-1].markForDestroy()}}}
this.entities=[];this.record=null},isc.A.showEntity=function isc_EntityEditor_showEntity(){var _1=this.entityTree;if(!this.entities)this.entities=[];if(!this.entityTree)return;this.addEditor(_1);this.topLevelComponent=this.entities[0];if(_1&&_1.relations&&_1.relations.length>0){for(var i=0;i<_1.relations.length;i++){var _3=_1.relations[i];if(this.shouldShowEntity(_3.baseDS)){if(_3.relationArity=="one"){this.addEditor(_3)}else{this.addGrid(_3)}}}}},isc.A.updateTopLevel=function isc_EntityEditor_updateTopLevel(){for(var i=1;i<this.entities.length;i++){this.entities[i].setRecord(this.topLevelComponent.record)}},isc.A.getData=function isc_EntityEditor_getData(){return[]},isc.A.getDataSourceSpec=function isc_EntityEditor_getDataSourceSpec(_1,_2){if(this.dataSources){var _3=this.dataSources[_1];if(!_3)_3=this.dataSources[_1+"!"+_2];return _3}
return null},isc.A.getRelatedEditorProperties=function isc_EntityEditor_getRelatedEditorProperties(_1,_2){var _3=this.getDataSourceSpec(_1,_2);if(_3)return _3.editorProperties;return null},isc.A.shouldShowEntity=function isc_EntityEditor_shouldShowEntity(_1){if(this.dataSources){var _2=this.dataSources[_1],_3;if(_2===_3)return true;return(_2!==null)}
return true},isc.A.addEditor=function isc_EntityEditor_addEditor(_1){var _2=this.createAutoChild("formEntity",{height:"100%",width:"100%",dataSource:_1.baseDS,title:this.getEntityTitle(_1),record:this.record,relation:_1,formProperties:this.getRelatedEditorProperties(_1.baseDS,_1.relatedFieldName)});this.addEntityLink(_2);this.logWarn("adding linked single-record entity")},isc.A.addGrid=function isc_EntityEditor_addGrid(_1){var _2=this.createAutoChild("gridEntity",{height:"100%",width:"100%",dataSource:_1.baseDS,title:this.getEntityTitle(_1),record:this.record,relation:_1,gridProperties:this.getRelatedEditorProperties(_1.baseDS,_1.relatedFieldName)});this.addEntityLink(_2);this.logWarn("added linked multiple-record entity")},isc.A.addEntityLink=function isc_EntityEditor_addEntityLink(_1){this.entities.add(_1);if(this.showTabset){this.addEntityTab(_1)}else{var _2=_1.relation,_3=this.getDataSourceSpec(_2.baseDS,_2.relatedFieldName),_4=(_3&&_3.rowNum!=null?_3.rowNum:-1),_5=(_3&&_3.offsetInRow!=null?_3.offsetInRow:-1);if(this.portal){if(_3&&_3.userHeight!=null)_1.$po=_3.userHeight;if(_4!=-1){this.portal.getColumn(0).addPortletToExistingRow(_1,_4,_5)}else{this.portal.getColumn(0).addPortlet(_1)}}
else this.addMember(_1)}},isc.A.getEntityName=function isc_EntityEditor_getEntityName(_1){var _2=this.getDSName(_1.baseDS),_3=this.getDSName(_1.relatedDS),_4=_1.relatedFieldName||_1.baseFieldName;return _2+"_"+_4},isc.A.getEntityTitle=function isc_EntityEditor_getEntityTitle(_1){var _2=this.getDataSourceSpec(_1.baseDS,_1.baseFieldName),_3=this.getDSName(_1.baseDS),_4=this.getDSName(_1.relatedDS),_5=_1.relatedFieldName||_1.baseFieldName,_6;if(_2&&_2.entityTitle){_6=_2.entityTitle}else if(!_4){_6=isc.DS.getAutoTitle(_3)}else if(_3!=_4){_6=isc.DS.getAutoTitle(_3)}else{_6=isc.DS.getAutoTitle(_5)}
return _6},isc.A.addEntityTab=function isc_EntityEditor_addEntityTab(_1){var _2=this.getEntityName(_1.relation),_3=this.getEntityTitle(_1.relation);if(_1){_1.setWidth("100%");_1.setHeight("100%")}
this.tabset.addTab({name:_2,title:_3,pane:_1,relation:_1.relation})},isc.A.setMode=function isc_EntityEditor_setMode(_1){var i,_3;if(_1=="Search"){if(this.entities&&this.entities.length>0){for(i=0;i<this.entities.length;i++){_3=this.entities[i];if(isc.isA.EntityEditorGrid(_3)){_3.enterSearchMode(this.getEntityCriteria(_3));_3.markForRedraw()}else if(isc.isA.EntityEditorForm(_3)){_3.enterSearchMode(this.getEntityCriteria(_3));_3.markForRedraw()}}}}else{if(!this.entityCriteria)this.entityCriteria={};if(this.entities&&this.entities.length>0){for(i=0;i<this.entities.length;i++){_3=this.entities[i];var _4=_3.getCriteria();if(_4){this.entityCriteria[_3.getID()]={relation:_3.relation,criteria:_4}}}}}},isc.A.getEntityCriteria=function isc_EntityEditor_getEntityCriteria(_1){if(this.entityCriteria){return this.entityCriteria[_1.getID()]}
return null});isc.B._maxIndex=isc.C+19}
if(isc.ListGrid){isc.defineClass("PresetCriteriaItem","SelectItem");isc.PresetCriteriaItem.addClassMethods({})
isc.A=isc.PresetCriteriaItem.getPrototype();isc.A.height=20;isc.A.cellHeight=20;isc.A.canFocus=true;isc.A.customOptionTitle="Custom...";isc.A.shouldSaveValue=true;isc.A=isc.PresetCriteriaItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.init=function isc_PresetCriteriaItem_init(){if(!this.options)this.options={};this.valueMap={};for(var _1 in this.options){this.valueMap[_1]=_1}
if(this.showCustomOption){this.options["customOption"]=null;this.valueMap["customOption"]=this.customOptionTitle}
this.Super("init",arguments)},isc.A.changed=function isc_PresetCriteriaItem_changed(_1,_2,_3){if(_3=="customOption"){if(this.getCustomCriteria&&isc.isA.Function(this.getCustomCriteria))
this.getCustomCriteria(this.getID()+".getCustomCriteriaReply(criteria,title)")}},isc.A.getCustomCriteria=function isc_PresetCriteriaItem_getCustomCriteria(_1){},isc.A.getCustomCriteriaReply=function isc_PresetCriteriaItem_getCustomCriteriaReply(_1,_2){this.valueMap["customOption"]=_2;this.options["customOption"]=_1},isc.A.getCriteriaValue=function isc_PresetCriteriaItem_getCriteriaValue(){return this.getCriterion()},isc.A.hasAdvancedCriteria=function isc_PresetCriteriaItem_hasAdvancedCriteria(){return true},isc.A.getCriterion=function isc_PresetCriteriaItem_getCriterion(){var _1=this.getValue(),_2=this.options[_1];return _2},isc.A.updateCriteriaFieldNames=function isc_PresetCriteriaItem_updateCriteriaFieldNames(_1){for(var _2 in _1){var _3=_1[_2];if(isc.DataSource.isAdvancedCriteria(_3)){_3=this.updateCriteriaFieldNames(_3)}else{if(!_3.fieldName){_3.fieldName=this.getCriteriaFieldName()}}}
return _1},isc.A.setValue=function isc_PresetCriteriaItem_setValue(_1){_1=this.matchCriteria(_1);this.Super("setValue",arguments)},isc.A.setValueMap=function isc_PresetCriteriaItem_setValueMap(_1){return null},isc.A.canEditCriterion=function isc_PresetCriteriaItem_canEditCriterion(_1){var _2=isc.DS.isAdvancedCriteria(_1)?isc.DS.getCriteriaFields(_1).getUniqueItems():_1.criteria?_1.criteria.getProperty("fieldName").getUniqueItems():[_1.fieldName];var _3=this.getCriteriaFieldName();return _2.contains(_3)},isc.A.setCriterion=function isc_PresetCriteriaItem_setCriterion(_1){this.setValue(isc.shallowClone(_1))},isc.A.matchCriteria=function isc_PresetCriteriaItem_matchCriteria(_1,_2){var _3=_2||this.options;for(var _4 in _3){var _5=_3[_4];if(this.objectsAreEqual(_5,_1)){return _4}}
return _1},isc.A.objectsAreEqual=function isc_PresetCriteriaItem_objectsAreEqual(_1,_2){if(!_1&&!_2)return true;if(!_1||!_2)return false;for(var _3 in _1){if(_3=="_constructor")continue;var _4=_1[_3],_5=_2[_3];if(isc.isAn.Array(_4)){for(var i=0;i<_4.length;i++){if(isc.isAn.Object(_4[i])){if(!this.objectsAreEqual(_4[i],_5[i]))return false}else{if(_4[i]!=_5[i])return false}}}else if(isc.isAn.Object(_4)){if(!this.objectsAreEqual(_4,_5))return false}else{if(_1[_3]!=_2[_3])return false}}
return true});isc.B._maxIndex=isc.C+14;isc.defineClass("PresetDateRangeItem","PresetCriteriaItem");isc.A=isc.PresetDateRangeItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.customOptionTitle="Custom Date Range";isc.B.push(isc.A.getCustomCriteria=function isc_PresetDateRangeItem_getCustomCriteria(_1){this.$03=_1;isc.DateRangeDialog.askForRange(true,{returnCriterion:true},null,this.getID()+".showDateRangeDialogReply(value)")},isc.A.showDateRangeDialogReply=function isc_PresetDateRangeItem_showDateRangeDialogReply(_1){var _2=this.$03;delete this.$03;this.fireCallback(_2,"criteria,title",[_1,this.customOptionTitle])},isc.A.getCriterion=function isc_PresetDateRangeItem_getCriterion(){var _1=this.getValue(),_2=this.options[_1];return _2});isc.B._maxIndex=isc.C+3}
isc._nonDebugModules=(isc._nonDebugModules!=null?isc._nonDebugModules:[]);isc._nonDebugModules.push('Forms');isc.checkForDebugAndNonDebugModules();isc._moduleEnd=isc._Forms_end=(isc.timestamp?isc.timestamp():new Date().getTime());if(isc.Log&&isc.Log.logIsInfoEnabled('loadTime'))isc.Log.logInfo('Forms module init time: '+(isc._moduleEnd-isc._moduleStart)+'ms','loadTime');delete isc.definingFramework;}else{if(window.isc&&isc.Log&&isc.Log.logWarn)isc.Log.logWarn("Duplicate load of module 'Forms'.");}

// ISC_DataBinding.js

if(window.isc&&window.isc.module_Core&&!window.isc.module_DataBinding){isc.module_DataBinding=1;isc._moduleStart=isc._DataBinding_start=(isc.timestamp?isc.timestamp():new Date().getTime());if(isc._moduleEnd&&(!isc.Log||(isc.Log&&isc.Log.logIsDebugEnabled('loadTime')))){isc._pTM={message:'DataBinding load/parse time: '+(isc._moduleStart-isc._moduleEnd)+'ms',category:'loadTime'};if(isc.Log&&isc.Log.logDebug)isc.Log.logDebug(isc._pTM.message,'loadTime');else if(isc._preLog)isc._preLog[isc._preLog.length]=isc._pTM;else isc._preLog=[isc._pTM]}isc.definingFramework=true;if(window.isc&&isc.version!="v9.1p_2014-06-27/LGPL Deployment"){isc.logWarn("SmartClient module version mismatch detected: This application is loading the core module from SmartClient version '"+isc.version+"' and additional modules from 'v9.1p_2014-06-27/LGPL Deployment'. Mixing resources from different SmartClient packages is not supported and may lead to unpredictable behavior. If you are deploying resources from a single package you may need to clear your browser cache, or restart your browser."+(isc.Browser.isSGWT?" SmartGWT developers may also need to clear the gwt-unitCache and run a GWT Compile.":""))}
isc.ClassFactory.defineClass("TextSettings");isc.A=isc.TextSettings;isc.A.DOUBLE="double";isc.A.BACKSLASH="backslash";isc.A=isc.TextSettings.getPrototype();isc.A.fieldList=null;isc.A.fieldSeparator=",";isc.A.lineSeparator=null;isc.A.escapingMode=isc.TextSettings.BACKSLASH;isc.A=isc.TextSettings.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.getEscapingModeEscapeChar=function isc_TextSettings_getEscapingModeEscapeChar(){switch(this.escapingMode){case isc.TextSettings.DOUBLE:return"\"";break;case isc.TextSettings.BACKSLASH:return"\\";break}
return""});isc.B._maxIndex=isc.C+1;isc.ClassFactory.defineClass("TextExportSettings","TextSettings");isc.A=isc.TextExportSettings;isc.A.LEADING_SPACE="leadingSpace";isc.A.FORMULA="formula";isc.A=isc.TextExportSettings.getPrototype();isc.A.lineSeparator="\n";isc.A.quoteValues=true;isc.A.nullValueText="";isc.A.useDisplayValue=false;isc.A.forceText=null;isc.A.dateFormat=null;isc.A.dateTimeFormat=null;isc.A.timeFormat=null;isc.ClassFactory.defineClass("TextImportSettings","TextSettings");isc.A=isc.TextImportSettings;isc.A.$935=false;isc.A=isc.TextImportSettings.getPrototype();isc.A.hasHeaderLine=false;isc.A.trim=false;isc.A=isc.TextImportSettings.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.getSpecialCharactersRegExp=function isc_TextImportSettings_getSpecialCharactersRegExp(_1){var _2=this.lineSeparator?"\\"+this.lineSeparator:"(\r)?\n";_2+="|\\"+this.getEscapingModeEscapeChar()+"\"";_2+="|\\"+this.fieldSeparator;_2+="|\\\"";return new RegExp(_2,_1)},isc.A.removeUnescapedQuotes=function isc_TextImportSettings_removeUnescapedQuotes(_1){var _2=this.getEscapingModeEscapeChar();var _3=new RegExp("\\"+_2+"\"","g");var _4=_2=="\""?new RegExp("([^\"]|^)\"(?!\")","g"):new RegExp("\"\"|([^\\"+_2+"]|^)\"","g");return _1.replace(_4,"$1").replace(_3,"\"")},isc.A.addFinalLineSeparatorIfNotPresent=function isc_TextImportSettings_addFinalLineSeparatorIfNotPresent(_1){var _2=this.lineSeparator||"\n";var _3=new RegExp(_2+"$");if(!_1.match(_3,_1))_1+=_2;return _1},isc.A.parseTextAndApplyFunctions=function isc_TextImportSettings_parseTextAndApplyFunctions(_1,_2,_3){var _4=this.fieldSeparator;var _5=this.getEscapingModeEscapeChar()+"\"";var _6=this.getSpecialCharactersRegExp();var _7=0,_8=false;;for(var _9,_10=_1,_11=0;null!=(_9=_10.match(_6));_10=_10.substring(_12),_11+=_12){var _12=_9[0].length+_9.index;switch(_9[0]){case _5:break;case"\"":_8=!_8;break;default:if(_8)continue;var _13=_1.substring(_7,_11+_9.index);if(this.trim)_13=_13.trim();if(_13=="\"\""&&this.escapingMode==isc.TextSettings.DOUBLE){_13=""}
_13=this.removeUnescapedQuotes(_13);_7=_11+_12;_2(_13);if(_9[0]!=_4){if(_3())_10=""}
break}}
return _1.substring(_7)});isc.B._maxIndex=isc.C+4;if(!isc.Comm)isc.defineClass("Comm");isc.A=isc.Comm;isc.A.XML_BACKREF_PREFIX="$$BACKREF$$:";isc.A.$36r=/^([_:A-Za-z])([_:.A-Za-z0-9]|-)*$/;isc.A.serializeBackrefs=true;isc.A=isc.Comm;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.xmlSerialize=function isc_c_Comm_xmlSerialize(_1,_2,_3){return isc.Comm.$ew(_1,_2,_3?"":null)},isc.A.$ew=function isc_c_Comm__xmlSerialize(_1,_2,_3,_4){if(isc.Browser.isSGWT&&window.SmartGWT.isNativeJavaObject(_2)){if(_2==null)_2=null;else{if(window.SmartGWT.warnOnSerializeError){window.SmartGWT.throwUnconvertibleObjectException(_2,window.SmartGWT.serializeErrorMessage)}
_2=String.asSource(_2+"")}}
var _5=_1!=null;if(!_4||!_4.objRefs){_4=isc.addProperties({},_4);_4.objRefs={obj:[],path:[]};if(!_4.objPath){if(_2&&_2.getID)_4.objPath=_2.getID();else _4.objPath=""}
if(_1==null){if(isc.isA.Class(_2))_1=_2.getClassName();else if(isc.isAn.Array(_2))_1="Array";else if(isc.isA.Object(_2))_1=_2.$schemaId||"Object";else _1="ISC_Auto"}}
if(_2==null){if(isc.Comm.xmlSchemaMode||!isc.Comm.$850){return isc.Comm.$ex(_1,"")}else{return isc.Comm.$ex(_1,null,"nil")}}
if(isc.isA.String(_2)){return isc.Comm.$ex(_1,isc.makeXMLSafe(_2),(isc.Comm.xmlSchemaMode?"string":null))}
if(isc.isA.Function(_2)){if(_2.iscAction)return isc.StringMethod.$41u(_2.iscAction);return null}
if(_2==window){this.logWarn("Serializer encountered the window object at path: "+_4.objPath+" - returning null for this slot.");return null}
if(isc.RPCManager.preserveTypes){if(isc.isA.Number(_2)||isc.isA.SpecialNumber(_2)){if(_2.toString().contains("."))
return isc.Comm.$ex(_1,_2,"double");return isc.Comm.$ex(_1,_2,"long")}
if(isc.isA.Boolean(_2))return isc.Comm.$ex(_1,_2,"boolean")}else{if(isc.isA.Number(_2)||isNaN(_2)){return isc.Comm.$ex(_1,_2)}
if(isc.isA.Boolean(_2))return isc.Comm.$ex(_1,_2)}
var _6=isc.JSONEncoder.$zl(_4.objRefs,_2);if(_6!=null&&_4.objPath.contains(_6)){var _7=_4.objPath.substring(_6.length,_6.length+1);if(_7=="."||_7=="["||_7=="]"){if(this.serializeBackrefs){return isc.Comm.$36u(_1)+isc.Comm.XML_BACKREF_PREFIX+_6+isc.Comm.$36v(_1)}
return isc.emptyString}}
isc.JSONEncoder.$zm(_4.objRefs,_2,_4.objPath);if(isc.isA.Function(_2.$ew)){return _2.$ew(_1,null,null,_3,_4.objRefs,_4.objPath)}else if(isc.isA.Class(_2)){this.logWarn("Attempt to serialize class of type: "+_2.getClassName()+" at path: "+_4.objPath+" - returning null for this slot.");return null}
var _8=_4.isRoot==false?false:true;if(isc.isAn.Array(_2))
return isc.Comm.$36s(_1,_2,_4.objPath,_4.objRefs,_3,_8);var _9;if(_2.getSerializeableFields){_9=_2.getSerializeableFields([],[])}else{_9=_2}
return isc.Comm.$36t(_1,_9,_4.objPath,_4.objRefs,_3,_8)},isc.A.$36s=function isc_c_Comm__xmlSerializeArray(_1,_2,_3,_4,_5,_6){var _7=isc.Comm.$36u(_1,"List",null,null,null,_6);for(var i=0,_9=_2.length;i<_9;i++){var _10=_2[i];var _11={objRefs:_4,objPath:isc.JSONEncoder.$zp(_3,i),isRoot:false};_7=isc.StringBuffer.concat(_7,(_5!=null?isc.StringBuffer.concat("\r",_5,"\t"):""),isc.Comm.$ew((_10!=null?_10.$schemaId:null)||"elem",_10,(_5!=null?isc.StringBuffer.concat(_5,"\t"):null),_11))}
_7=isc.StringBuffer.concat(_7,(_5!=null?isc.StringBuffer.concat("\r",_5):""),isc.Comm.$36v(_1));return _7},isc.A.$36w=function isc_c_Comm__isValidXMLIdentifier(_1){return isc.Comm.xmlSchemaMode||_1.match(this.$36r)},isc.A.$36t=function isc_c_Comm__xmlSerializeObject(_1,_2,_3,_4,_5,_6){if(isc.isAn.Instance(_2))_1=_2.getClassName();else if(_2._constructor&&_2._constructor!="AdvancedCriteria"&&_2._constructor!="RelativeDate")_1=_2._constructor;var _7=isc.Comm.$36u(_1,"Object",null,null,null,_6);var _8;_2=isc.JSONEncoder.$42b(_2);for(var _9 in _2){if(_9==null)continue;if(_9==isc.gwtRef||_9==isc.gwtModule)continue;if(_9.startsWith('$'))continue;var _10=_2[_9];if(_10===_8)continue;if(isc.isA.Function(_10)&&!_10.iscAction)continue;var _11=_9.toString();var _12={objRefs:_4,objPath:isc.JSONEncoder.$zp(_3,_9),isRoot:false};_7=isc.StringBuffer.concat(_7,(_5!=null?isc.StringBuffer.concat("\r",_5,"\t"):""),isc.Comm.$ew(_11,_10,(_5!=null?isc.StringBuffer.concat(_5,"\t"):null),_12))}
_7=isc.StringBuffer.concat(_7,(_5!=null?isc.StringBuffer.concat("\r",_5):""),isc.Comm.$36v(_1));return _7},isc.A.$36x=function isc_c_Comm__getPrefix(_1,_2){if(_1[_2]!=null){return _1[_2]}else{if(_1.$36y==null)_1.$36y=0;return(_1[_2]="ns"+_1.$36y++)}},isc.A.$36u=function isc_c_Comm__xmlOpenTag(_1,_2,_3,_4,_5,_6){var _7=isc.SB.create();var _8=_3!=null;if(_3!=null&&isc.isAn.Object(_4)){_8=false;_4=this.$36x(_4,_3)}
var _9='';if(!this.$36w(_1)){_9=' _isc_name="'+isc.makeXMLSafe(_1)+'"';_1="Object"}
if(_3){_4=_4||"schNS";_7.append("<",_4,":",_1);if(_8)_7.append(" xmlns:",_4,"=\"",_3,"\"")}else{_7.append("<",_1)}
if(_9)_7.append(_9);if(_6&&!this.omitXSI){_7.append(" xmlns:xsi=\"http://www.w3.org/2000/10/XMLSchema-instance\"")}
if(_2&&!this.omitXSI){_7.append(" xsi:type=\"xsd:",isc.makeXMLSafe(_2),"\"")}
if(!_5)_7.append(">");return _7.toString()},isc.A.$36v=function isc_c_Comm__xmlCloseTag(_1,_2,_3){if(_2!=null&&isc.isAn.Object(_3)){_3=this.$36x(_3,_2)}
if(!this.$36w(_1))_1="Object";if(_2){_3=_3||"schNS";return isc.SB.concat("</",_3,":",_1,">")}else{return isc.SB.concat("</",_1,">")}},isc.A.$ex=function isc_c_Comm__xmlValue(_1,_2,_3,_4,_5){if(_3=="base64Binary"){_2="<xop:Include xmlns:xop=\"http://www.w3.org/2004/08/xop/include\" href=\""+_2+"\"/>"}
if(_3=="nil"){return isc.Comm.$36u(_1,null,_4,_5,true)+" xsi:nil=\"true\"/>"}
return isc.StringBuffer.concat(isc.Comm.$36u(_1,_3,_4,_5),_2,isc.Comm.$36v(_1,_4,_5))});isc.B._maxIndex=isc.C+9;isc.defineClass("XMLDoc").addMethods({addPropertiesOnCreate:false,init:function(_1,_2){this.nativeDoc=_1;this.namespaces=_2;this.documentElement=this.nativeDoc.documentElement},hasParseError:function(){if(isc.Browser.isIE){var _1=this.nativeDoc.parseError;return _1!=null&&_1!=0}
return this.nativeDoc.documentElement&&this.nativeDoc.documentElement.tagName=="parsererror"},addNamespaces:function(_1){this.namespaces=this.$363(_1);if(this.$364){var _2=isc.xml.xmlResponses.find("ID",this.$364);if(_2)_2.xmlNamespaces=this.namespaces}},$363:function(_1){if(_1==null)return this.namespaces;if(this.namespaces==null)return _1;return isc.addProperties({},this.namespaces,_1)},selectNodes:function(_1,_2,_3){return isc.xml.selectNodes(this.nativeDoc,_1,this.$363(_2),_3)},selectString:function(_1,_2){return isc.xml.selectString(this.nativeDoc,_1,this.$363(_2))},selectNumber:function(_1,_2){return isc.xml.selectNumber(this.nativeDoc,_1,this.$363(_2))},selectScalar:function(_1,_2,_3){return isc.xml.selectScalar(this.nativeDoc,_1,this.$363(_2),_3)},selectScalarList:function(_1,_2){return isc.xml.selectScalarList(this.nativeDoc,_1,this.$363(_2))},getElementById:function(_1){return this.nativeDoc.getElementById(_1)},getElementsByTagName:function(_1){return this.nativeDoc.getElementsByTagName(_1)}});isc.XMLDoc.getPrototype().toString=function(){return"[XMLDoc <"+this.documentElement.tagName+">]"};isc.defineClass("XMLTools").addClassProperties({httpProxyURL:"[ISOMORPHIC]/HttpProxy"});isc.A=isc.XMLTools;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.xmlResponses=[];isc.A.$365=0;isc.A.trimEmptyXMLThreshold=100;isc.A.xmlDOMConstructors=["MSXML2.DOMDocument","MSXML.DOMDocument","Microsoft.XMLDOM"];isc.A.mozAnchorBug=isc.Browser.isMoz&&(isc.Browser.geckoVersion<20080205)&&window.location.href.indexOf("#")!=-1;isc.A.$pa="*";isc.A.$366=":";isc.A.$27c="List";isc.A.$45s="xmlToJS";isc.A.$45t="type";isc.A.$367="xsi:type";isc.A.$71v="ref";isc.A.$gy="number";isc.A.$71f="xmlns:";isc.A.$45u={nil:"xsi:nil","null":"xsi:null",type:"xsi:type"};isc.A.xsiNamespaces=["http://www.w3.org/2001/XMLSchema-instance","http://www.w3.org/1999/XMLSchema-instance"];isc.A.$45v="nil";isc.A.$45w="null";isc.A.$18r="false";isc.A.$w0="0";isc.A.$ho="[";isc.A.useClientXML=true;isc.B.push(isc.A.loadXML=function isc_c_XMLTools_loadXML(_1,_2,_3){_3=_3||{};_3.operationType=_3.operationType||"loadXML";this.getXMLResponse(isc.addProperties({actionURL:_1,httpMethod:"GET",callback:_2},_3))},isc.A.getXMLResponse=function isc_c_XMLTools_getXMLResponse(_1){_1.$37b=_1.callback;_1.callback={target:this,methodName:"$37c"};_1.httpMethod=_1.httpMethod||"POST";this.logInfo("loading XML from: "+_1.actionURL,"xmlComm");isc.rpc.sendProxied(_1)},isc.A.$37c=function isc_c_XMLTools__getXMLResponseReply(_1,_2,_3){if(_1.isStructured&&!_3.isRestRequest){this.fireCallback(_3.$37b,"xmlDoc,xmlText,rpcResponse,rpcRequest",[null,null,_1,_3]);return}
var _4=_3.isRestRequest?_1.results:_1.httpResponseText,_5=this.parseXML(_4);if(this.logIsInfoEnabled("xmlComm")){this.logInfo("XML reply with text: "+(this.logIsDebugEnabled("xmlComm")?_4:this.echoLeaf(_4)),"xmlComm")}
var _6=false;if(_4==null||(_4.length<this.trimEmptyXMLThreshold&&_4.trim()==""))
{_6=true}
if(!_6&&_5.getElementsByTagName("parsererror").length>0){_1.status=-1}else{var _7=this.xmlResponses;var _8=isc.Log.logViewer;if(this.logIsDebugEnabled("xmlComm")||(isc.Page.isLoaded()&&_8&&_8.logWindowLoaded()))
{var _9=this.$365++;_7.add({ID:_9,text:_4});if(_5)_5.$364=_9;if(_7.length>10)_7.shift();if(_8&&_8.logWindowLoaded()&&_8._logWindow!=null){_8._logWindow.updateCommWatcher()}}else{_7.length=0}}
this.fireCallback(_3.$37b,"xmlDoc,xmlText,rpcResponse,rpcRequest",[_5,_4,_1,_3])},isc.A.parseXML=function isc_c_XMLTools_parseXML(_1,_2){if(_1==null)return;_1=this.trimXMLStart(_1);var _3;if(!isc.Browser.isIE){try{if((this.mozAnchorBug||this.useAnchorWorkaround)&&this.useAnchorWorkaround!==false)
{var _4="<IFRAME STYLE='position:absolute;visibility:hidden;top:-1000px' ID='isc_parseXMLFrame'></IFRAME>";if(!isc.Page.isLoaded()){document.write(_4)}else{isc.Element.insertAdjacentHTML(document.getElementsByTagName("body")[0],"beforeEnd",_4)}
var _5=document.getElementById("isc_parseXMLFrame");var _6=_5.contentWindow;window.isc.xmlSource=_1;_6.location.href="javascript:top.isc.parsedXML=new top.isc.XMLTools.getXMLParser().parseFromString(top.isc.xmlSource, 'text/xml')";_3=window.isc.parsedXML;isc.xmlSource=isc.parsedXML=null;_5.parentNode.removeChild(_5)}else{_3=this.getXMLParser().parseFromString(_1,"text/xml")}}catch(e){if(!_2)this.$37d(this.echo(e));return null}
if(!_2&&_3.documentElement&&_3.documentElement.tagName=="parsererror")
{this.$37d(_3.documentElement.textContent);return null}
return isc.XMLDoc.create(_3)}
_3=this.getXMLParser();if(!_3){this.$37a("XMLTools.parseXML()");return}
_3.loadXML(_1);if(_3.parseError!=0){var _7=_3.parseError;if(!_2){this.$37d("\rReason: "+_7.reason+"Line number: "+_7.line+", character: "+_7.linepos+"\rLine contents: "+_7.srcText+(!isc.isA.emptyString(_7.url)?"\rSource URL: "+_7.url:""))}
return null}
return isc.XMLDoc.create(_3)},isc.A.trimXMLStart=function isc_c_XMLTools_trimXMLStart(_1){if(_1.indexOf("<?xml")!=-1)
{var _2=_1.match(new RegExp("^\\s*<\\?[^?]*\\?>"));if(_2){_1=_1.substring(_2[0].length)}}
if(isc.Browser.isIE&&_1.indexOf("<!DOCTYPE")!=-1){var _2=_1.match(new RegExp("^\\s*<!DOCTYPE .*>"));if(_2){_1=_1.substring(_2[0].length)}}
return _1},isc.A.$37d=function isc_c_XMLTools__logParseError(_1,_2){this.logWarn("Error parsing XML: "+_1+(this.logIsDebugEnabled("parseXML")?"\rXML was:\r"+_2+"\rTrace:"+this.getStackTrace():""),"parseXML")},isc.A.getXMLParser=function isc_c_XMLTools_getXMLParser(){if(!isc.Browser.isIE){if(!this.$37e)this.$37e=new DOMParser();return this.$37e}
var _1;if(this.$37f){_1=new ActiveXObject(this.$37f)}else{for(var i=0;i<this.xmlDOMConstructors.length;i++){try{var _3=this.xmlDOMConstructors[i];_1=new ActiveXObject(_3);if(_1){this.logInfo("Using XML DOM constructor: "+_3);this.$37f=_3;break}}catch(e){}}
if(!_1){this.logWarn("Couldn't create XML DOM parser - tried the following constructors: "+this.echoAll(this.xmlDOMConstructors))}}
return _1},isc.A.nativeXMLAvailable=function isc_c_XMLTools_nativeXMLAvailable(){if(isc.Browser.isSafari&&!isc.Browser.isApollo&&(isc.Browser.safariVersion<522))
return false;return this.$37e!=null||this.getXMLParser()!=null},isc.A.$37a=function isc_c_XMLTools__warnIfNativeXMLUnavailable(_1){if(this.nativeXMLAvailable()||!this.logIsWarnEnabled())return false;var _2="Feature "+_1+" requires a native XML parser which is not available ";if(isc.Browser.isSafari){_2+="because this version of Safari does not support native XML processing."}else{_2+="because ActiveX is currently disabled."}
_2+=" Please see the 'Features requiring ActiveX or Native support' topic in the client-side reference under Client Reference/System for more information";this.logWarn(_2);return true},isc.A.serverToJS=function isc_c_XMLTools_serverToJS(_1,_2,_3){isc.DMI.callBuiltin({methodName:"xmlToJS",callback:_2,arguments:_1,requestParams:{evalVars:_3,evalResult:true}})},isc.A.toJSCode=function isc_c_XMLTools_toJSCode(_1,_2){isc.DMI.callBuiltin("xmlToJS",_1,_2)},isc.A.elementToObject=function isc_c_XMLTools_elementToObject(_1){if(_1==null)return null;var _2=this.getAttributes(_1);var _3=_1.getElementsByTagName(this.$pa);for(var i=0;i<_3.length;i++){var _5=_3[i];_2[_5.tagName]=this.getElementText(_5)}
return _2},isc.A.getLocalName=function isc_c_XMLTools_getLocalName(_1){if(!isc.Browser.isIE){var _2=_1.localName;if(_2==null)return _1.nodeName;return _2}
var _3=_1.nodeName,_4=_3.indexOf(this.$366);if(_4!=-1)return _3.substring(_4+1);return _3},isc.A.toJS=function isc_c_XMLTools_toJS(_1,_2,_3,_4,_5){if(_1==null)return null;if(isc.isAn.XMLDoc(_1))_1=_1.nativeDoc;if(_1.documentElement)_1=_1.documentElement;_5=_5||isc.emptyObject;if(isc.isAn.Array(_1)){var _6=[];for(var i=0;i<_1.length;i++){_6[i]=this.toJS(_1[i],_2,_3,_4,_5)}
return _6}
var _8,_9;var _10=this.getExplicitType(_1,_4);if(_4||!_3||(_3&&isc.DS.get(_10)==null)){if(_4){var _11=this.isRefElement(_1);if(_11)
{var _12=isc.Canvas.getById(_11);if(_12!=null)return _12}
var _13=this.firstElementChild(_1),_11=_13?this.isRefElement(_13):null;if(_11&&this.getElementChildren(_1).length==1)
{var _12=isc.Canvas.getById(_11);if(_12!=null)return _12}
if(!_10){var _14=_1.tagName;if(_14==this.$27c||isc.DS.get(_14))_10=_1.tagName}}
if(_10!=null&&_10==this.$27c){var _15=this.getElementChildren(_1);return this.toJS(_15,_2,_3,_4,_5)}
if(_10){if(isc.DS.get(_10)!=null){_3=isc.DS.get(_10)}else if(isc.SimpleType.getType(_10)!=null){return isc.SimpleType.validateValue(_10,this.getElementText(_1))}}}
if(_3&&_3.xmlToJS)return _3.xmlToJS(_1,_5);if(this.elementIsNil(_1))return null;if(_3){_9=_2||_3.getFieldNames();_8={};for(var i=0;i<_9.length;i++){var _16=_9[i],_17=_3.getField(_16);if(_17==null||(_17.valueXPath==null&&_17.getFieldValue==null))continue;var _18=_3.getFieldValue(_1,_16,_17);if(_18!=null){if(this.logIsDebugEnabled(this.$45s)){this.logDebug("valueXPath / getFieldValue() field: "+_3.ID+"."+_16+" on element: "+this.echoLeaf(_1)+" got value: "+_18,"xmlToJS")}
_8[_16]=_18}}}
_8=this.getAttributes(_1,_2,_8,_3!=null,_3);if(!this.$37g(_8)&&!this.hasElementChildren(_1))
{return this.getElementText(_1)}
if(_8[this.$367]&&_8[this.$367]=="xsd:Object"){delete _8[this.$367]}
var _15=_1.childNodes;if(this.logIsDebugEnabled(this.$45s)){this.logDebug("using DataSource: "+_3+" for complex element: "+this.echoLeaf(_1)+" childNodes: "+this.echoLeaf(_15)+" has attributes: "+this.$37g(_8),"xmlToJS")}
var _19=false;for(var i=0;i<_15.length;i++){var _20=_15[i];var _21=this.getLocalName(_20);if(this.isTextNode(_20))continue;_19=true;if(_2&&!_2.contains(_21))continue;var _17=_3?_3.getField(_21):null;if(_17&&(_17.valueXPath||_17.getFieldValue))continue;var _22;if(this.logIsInfoEnabled(this.$45s)){this.logInfo("dataSource: "+_3+", field: "+this.echoLeaf(_17)+(_17!=null?" type: "+_17.type:"")+", XML element: "+this.echoLeaf(_20),"xmlToJS")}
var _23=_20;if(_17&&_17.multiple){var _24=this.getElementChildren(_20);if(_24.length>0)_23=_24}
if(!_3||_17==null||_17.type==null||_17.type=="any"){if(this.logIsDebugEnabled(this.$45s)){this.logDebug("applying schemaless transform at: "+(_3?_3.ID:"[schemaless]")+"."+_21,"xmlToJS")}
_22=this.toJS(_23,null,null,_4,_5)}else{var _25=_3.getSchema(_17.type);if(_25!=null){var _26=_17.propertiesOnly?{propertiesOnly:true}:_5;_22=this.toJS(_23,null,_25,_4,_26);if(this.logIsDebugEnabled(this.$45s)){this.logDebug("complexType field: "+this.echoLeaf(_17)+" got value: "+this.echoLeaf(_22),"xmlToJS")}}else{if(isc.isAn.Array(_23)){_22=[];for(var j=0;j<_23.length;j++){_22.add(_3.validateFieldValue(_17,this.getElementText(_23[j])))}}else{_22=_3.validateFieldValue(_17,this.getElementText(_23))}
if(this.logIsDebugEnabled(this.$45s)){this.logDebug("simpleType field: "+this.echoLeaf(_17)+" got value: "+this.echoLeaf(_22),"xmlToJS")}}}
if(_17&&_17.multiple){if(_22==null||isc.isA.emptyString(_22))_22=[];else if(!isc.isAn.Array(_22))_22=[_22]}
if(_8[_21]){if(!isc.isAn.Array(_8[_21]))_8[_21]=[_8[_21]];if(_17&&_17.multiple&&isc.isAn.Array(_22)){_8[_21].addList(_22)}else{_8[_21].add(_22)}}else{_8[_21]=_22}}
if(!_19){var _28=this.getElementText(_1),_29=_5.textContentProperty||(_3?_3.textContentProperty:"xmlTextContent");if(_3){_17=_3.getTextContentField();if(_17)_28=_3.validateFieldValue(_17,_28)}
if(_28!=null&&!isc.isAn.emptyString(_28)){_8[_29]=_28}}
if(_4){if(!_8._constructor&&_3&&(_3.instanceConstructor||_3.Constructor)){_8._constructor=_3.instanceConstructor||_3.Constructor}
if(!_8.scClassName&&_3&&_3.scClassName){_8.scClassName=_3.scClassName}
if(_8._constructor&&(_5==null||!_5.propertiesOnly)&&isc.ClassFactory.getClass(_8._constructor)){var _30=_8._constructor;delete _8._constructor;return isc.ClassFactory.newInstance(_30,_8)}}
return _8},isc.A.getExplicitType=function isc_c_XMLTools_getExplicitType(_1,_2){if(_1==null||this.isTextNode(_1))return;var _3=this.getXSIAttribute(_1,this.$45t);if(_3){if(_3.contains(isc.colon))_3=_3.substring(_3.indexOf(isc.colon)+1)}else if(_2){_3=_1.getAttribute("constructor");if(_3&&!isc.DS.get(_3))_3=null}
return _3},isc.A.isRefElement=function isc_c_XMLTools_isRefElement(_1){if(_1==null||this.isTextNode(_1)){return false}
var _2=_1.getAttribute(this.$71v);if(_2&&_1.attributes.length==1&&!this.hasElementChildren(_1))return _2},isc.A.toComponents=function isc_c_XMLTools_toComponents(_1,_2){if(isc.DS.get("Canvas")==null){this.logWarn("Can't find schema for Canvas - make sure you've loaded component schema via <isomorphic:loadSystemSchema/> jsp tag or by some other mechanism")}
if(isc.isA.String(_1)){var _3=this.parseXML(_1,true);if(_3.hasParseError()){this.logWarn("xml failed to parse xmlDoc, wrapping in root node");_3=this.parseXML("<isomorphicXML>"+_1+"</isomorphicXML>")}
_1=_3}
return this.toJS(_1,null,null,true,_2)},isc.A.getFieldValue=function isc_c_XMLTools_getFieldValue(_1,_2,_3,_4,_5){if(_1.ownerDocument==null)return _1[_2];_3=_3||(_4?_4.getField(_2):isc.emptyObject);try{var _6;if(_3.valueXPath){var _7=(_4?_4.getSchema(_3.type):isc.DS.get(_3.type));if(_7){var _8=isc.xml.selectNodes(_1,_3.valueXPath,_5),_9=isc.xml.toJS(_8,null,_7);if(!_3.multiple&&_9.length==1)_9=_9[0];return _9}else{_6=isc.xml.selectScalar(_1,_3.valueXPath,_5)}}else{_6=isc.xml.getXMLFieldValue(_1,_2)}
_4=_4||isc.DS.get("Object");_6=_4.validateFieldValue(_3,_6);return _6}catch(e){this.logWarn("error getting value for field: '"+_2+(_3.valueXPath?"', valueXPath: '"+_3.valueXPath:"")+"' in record: "+this.echo(_1)+"\r: "+this.echo(e)+this.getStackTrace());return null}},isc.A.getXMLFieldValue=function isc_c_XMLTools_getXMLFieldValue(_1,_2){var _3=_1.getAttribute(_2);if(_3!=null)return _3;var _4=_1.getElementsByTagName(_2)[0];if(_4==null)return null;return(isc.Browser.isIE?_4.text:_4.textContent)},isc.A.$37g=function isc_c_XMLTools__hasDataAttributes(_1){for(var _2 in _1){if(_2==this.$367)continue;return true}
return false},isc.A.getAttributes=function isc_c_XMLTools_getAttributes(_1,_2,_3,_4,_5){_3=_3||{};var _6;if(_2){if(!isc.isAn.Array(_2))_2=[_2];for(var i=0;i<_2.length;i++){var _8=_2[i];if(_4&&_3[_8]!==_6)continue;var _9=_1.getAttribute(_8);if(_9==null||isc.isAn.emptyString(_9))continue;if(_5&&_5.getField(_8)){_9=_5.validateFieldValue(_5.getField(_8),_9)}
_3[_8]=_9}
return _3}
var _10=_1.attributes;if(_10!=null){for(var i=0;i<_10.length;i++){var _11=_10[i],_8=_11.name;if(_8=="constructor")_8="_constructor";if(_4&&_3[_8]!==_6)continue;if(isc.startsWith(_8,this.$71f)&&_5&&_5.dropNamespaceDeclarations)continue;var _9=_11.value;if(_9==null||isc.isAn.emptyString(_9))continue;if(_5&&_5.getField(_8)){_9=_5.validateFieldValue(_5.getField(_8),_9)}
_3[_8]=_9}}
return _3},isc.A.getXSIAttribute=function isc_c_XMLTools_getXSIAttribute(_1,_2){var _3;if(isc.Browser.isOpera){for(var i=0;i<this.xsiNamespaces.length;i++){_3=_1.getAttributeNS(this.xsiNamespaces[i],_2);if(_3!=null)return _3}
return _3}
return _1.getAttribute(this.$45u[_2])},isc.A.elementIsNil=function isc_c_XMLTools_elementIsNil(_1){if(_1==null||!isc.isA.XMLNode(_1)||_1.nodeType!=1)return false;var _2=this.getXSIAttribute(_1,this.$45v);if(_2&&_2!=this.$18r&&_2!=this.$w0)return true;var _2=this.getXSIAttribute(_1,this.$45w);if(_2&&_2!=this.$18r&&_2!=this.$w0)return true;return false},isc.A.getElementText=function isc_c_XMLTools_getElementText(_1){if(this.elementIsNil(_1))return null;if(!_1)return null;var _2=_1.firstChild;if(!_2){if(isc.Browser.isMoz&&_1.nodeType==2)return _1.value;return isc.emptyString}
var _3=_2.data;if(isc.Browser.isMoz&&_3!=null&&_3.length>4000)return _1.textContent;return _3},isc.A.isTextNode=function isc_c_XMLTools_isTextNode(_1){if(_1==null)return false;var _2=_1.nodeType;return(_2==3||_2==4||_2==8)},isc.A.hasElementChildren=function isc_c_XMLTools_hasElementChildren(_1){return this.firstElementChild(_1)!=null},isc.A.firstElementChild=function isc_c_XMLTools_firstElementChild(_1){if(_1==null||(_1.hasChildNodes!=null&&_1.hasChildNodes()==false))return null;var _2=_1.childNodes;if(!_2)return null;var _3=_2.length;for(var i=0;i<_3;i++){var _5=_2[i];if(!this.isTextNode(_5))return _5}
return null},isc.A.setAttributes=function isc_c_XMLTools_setAttributes(_1,_2){var _3;for(var _4 in _2){var _5=_2[_4];if(_5==null){_1.removeAttribute(_4);continue}
if(isc.Browser.isIE&&(_5===true||_5===false)){_5=isc.emptyString+_5}
_1.setAttribute(_4,_2[_4])}},isc.A.$37h=function isc_c_XMLTools__makeIEDefaultNamespaces(_1,_2){var _3=isc.SB.create(),_4=_1.documentElement,_2=_2||isc.emptyObject,_5;if(!_2["default"]){_5=this.$45x(_4);if(_5)_3.append('xmlns:default="',_5,'" ')}
var _6=_1.documentElement.attributes;for(var i=0;i<_6.length;i++){var _8=_6[i],_9=_8.prefix;if(_9=="xmlns"&&_9!=_8.name){if(_2[_8.baseName]!=null)continue;_3.append(_8.name,'="',_8.value,'" ')}}
return _3.toString()},isc.A.$45x=function isc_c_XMLTools__deriveDefaultNamespace(_1){var _2=this.logIsDebugEnabled("xmlSelect");if((_1.prefix==null||isc.isAn.emptyString(_1.prefix))&&_1.namespaceURI)
{if(_2){this.logWarn("using docElement ns, prefix: "+_1.prefix,"xmlSelect")}
return _1.namespaceURI}else if(_1.firstChild){var _3
for(var i=0;i<_1.childNodes.length;i++){var _5=_1.childNodes[i];if(_5.nodeType==3)continue;var _6=_5.namespaceURI;if(!_6)break;if(_5.prefix==null||isc.isAn.emptyString(_5.prefix)){_3=_5.namespaceURI;break}}
if(_3!=null){if(_2){this.logDebug("using default namespace detected on child: "+_3,"xmlSelect")}}
if(_3==null&&_1.namespaceURI){_3=_1.namespaceURI;if(_2){this.logDebug("using document element's namespace as default namespace: "+_3,"xmlSelect")}}
if(!_3)_3="http://openuri.org/defaultNamespace";return _3}},isc.A.selectObjects=function isc_c_XMLTools_selectObjects(_1,_2,_3){if(isc.contains("|")){var _4=_2.split(/|/),_5=[];for(var i=0;i<_4.length;i++){_5.addList(this.selectObjects(_4[i],_1))}
return _5}
var _7=isc.isAn.Array(_1)?_1:[_1];if(_2!=isc.slash){if(isc.startsWith(_2,isc.slash)){_2=_2.substring(1);if(isc.startsWith(_2,isc.slash)){this.logWarn("Selector \"\\\\\" does not supported. It was truncated.");_2=_2.substring(1)}}
var _8=_2.split(/[\/@]/);_7=this.$37i(_8,_7,isc.slash)}
if(_3&&_7.length<=1)return _7[0];return _7},isc.A.$37i=function isc_c_XMLTools__selectObjects(_1,_2,_3){var _4=_1[0];_1=_1.length>1?_1.slice(1):null;if(_2==null)return null;var _5,_6=_4,_7=_4.indexOf(this.$ho);if(_7!=-1){_6=_4.substring(0,_7);_5=_4.substring(_7+1,_4.length-1)}
var _8=[];for(var i=0;i<_2.length;i++){var _10=_2[i];if(_6!=isc.star){_10=_10[_6]}else{var _11=isc.getValues(_10);_10=[];for(var i=0;i<_11.length;i++){if(!isc.isAn.Array(_11[i]))_10.add(_11[i]);else _10.addList(_11[i])}}
if(_10==null)continue;if(!isc.isAn.Array(_10)){_8.add(_10)}else{_8.addList(_10)}}
if(_5){var _12=this.$37j(_8,_5);_8=_12}
if(_1==null||_1.length==0)return _8;_3+=_4+isc.slash;return this.$37i(_1,_8,_3)},isc.A.$37j=function isc_c_XMLTools__applyPredicateExpression(_1,_2){var _3=parseInt(_2);if(!isNaN(_3)){return[_1[_3-1]]}
if(_2=="last()")return[_1.last()];var _4=_2.match(/^([a-zA-Z_0-9:\-\.\(\)]*)\s*(<|>|!=|=|<=|>=|)\s*(.*)$/),_5,_6,_7;if(_4==null){if(!_2.match(/^[a-zA-Z_0-9:\-\.]*$/)){this.logWarn("couldn't parse predicate expression: "+_2);return null}
_5=_2}else{_5=_4[1],_6=_4[2],_7=_4[3]}
if(_6=="=")_6="==";if(_7=="true()")_7=true;else if(_7=="false()")_7=false;if(_5=="position()")_5="position";var _8=isc.$aq("item,position","return "+(_5!="position"?"item.":"")+_5+(_6?_6+_7:""));var _9=[];for(var i=0;i<_1.length;i++){if(_8(_1[i],i+1))_9.add(_1[i])}
return _9},isc.A.selectNodes=function isc_c_XMLTools_selectNodes(_1,_2,_3,_4){if(isc.isA.String(_1)){_1=this.parseXML(_1)}
if(isc.Browser.isSafari&&(isc.Browser.isApollo||(isc.Browser.safariVersion<522)))
{this.$37a("XPath");return this.safariSelectNodes(_1,_2,_3,_4)}
if(isc.isAn.XMLDoc(_1)){return _1.selectNodes(_2,_3,_4)}
var _5=isc.timestamp();var _6=this.$37k(_1,_2,_3,_4);var _7=isc.timestamp();if(this.logIsInfoEnabled("xmlSelect")){this.logInfo("selectNodes: expression: "+_2+" returned "+this.echoLeaf(_6)+": "+(_7-_5)+"ms","xmlSelect")}
return _6},isc.A.safariSelectNodes=function isc_c_XMLTools_safariSelectNodes(_1,_2,_3,_4){var _5=[];if(!_2){return null}
var _6=_2.substring(_2.indexOf(":")+1);var _7;if(_6.endsWith("/*")){_7=true;_6=_6.substring(0,_6.indexOf("/*"))}
var _8=_1.getElementsByTagName(_6);if(_7&&_8.length>0){var _9=_8[0];_8=_9.childNodes}
for(var i=0;i<_8.length;i++){if(_8[i].nodeType==3)continue;_5.add(_8[i])}
if(_7&&_5.length==1)_5=_5[0];return _5}
,isc.A.$37l=function isc_c_XMLTools__generateNamespaces(_1,_2,_3){if(_1==null)return isc.emptyString;if(_2==null)_2=isc.getKeys(_1);var _4=isc.SB.create(),_3=(_3!=null?"\n"+_3:"");for(var i=0;i<_2.length;i++){var _6=_2[i];_4.append(_3," xmlns:",_6,'="',_1[_6],'"')}
return _4.toString()}
,isc.A.$53z=function isc_c_XMLTools__getDefaultNamespace(_1){var _2=_1.lookupNamespaceURI("");if(isc.Browser.isSafari&&(_2==null||_2=="")){_2=_1.getAttribute("xmlns")}
if(_2==null)_2=_1.namespaceURI;if(_2==null)_2="";return _2}
,isc.A.$37k=function isc_c_XMLTools__selectNodes(_1,_2,_3,_4){if(_1==null)return;var _5=_1.ownerDocument;if(_5==null&&_1.documentElement){_5=_1;_1=_5.documentElement}
if(_5==null)return null;if(isc.Browser.isIE){if(isc.Browser.version>5.5){_5.setProperty("SelectionLanguage","XPath");var _6=this.$37h(_5,_3);if(_3)_6+=this.$37l(_3);if(this.logIsDebugEnabled("xmlSelect")){this.logDebug("selectNodes: expression: "+_2+", using namespaces: "+_6,"xmlSelect")}
_5.setProperty("SelectionNamespaces",_6)}
if(_4)return _1.selectSingleNode(_2);var _7=_1.selectNodes(_2);return this.$37m(_7)}
var _8=_5.createNSResolver(_5.documentElement),_9=this.$53z(_5.documentElement);if(this.logIsDebugEnabled("xmlSelect")){this.logDebug("Using namespaces: "+isc.echo(_3)+", defaultNamespace: '"+_9+"'","xmlSelect")}
var _10=function(_12){if(_3&&_3[_12])return _3[_12];if(_12=="default")return _9;return _8.lookupNamespaceURI(_12)};var _11=_5.evaluate(_2,_1,_10,0,null);if(_4)return _11.iterateNext();return this.$37m(_11)}
,isc.A.$37m=function isc_c_XMLTools__nodeListToArray(_1){var _2=[];if(isc.Browser.isIE||_1.iterateNext==null){for(var i=0;i<_1.length;i++){_2.add(_1.item(i))}
}else{var _4;while(_4=_1.iterateNext()){_2.add(_4)}
}
return _2}
,isc.A.getElementChildren=function isc_c_XMLTools_getElementChildren(_1){var _2=[],_3=_1.childNodes;for(var i=0;i<_3.length;i++){var _5=_3[i];if(this.isTextNode(_5))continue;_2.add(_5)}
return _2}
,isc.A.selectString=function isc_c_XMLTools_selectString(_1,_2,_3){return this.selectScalar(_1,_2,_3)}
,isc.A.selectNumber=function isc_c_XMLTools_selectNumber(_1,_2,_3){return this.selectScalar(_1,_2,_3,true)}
,isc.A.selectScalar=function isc_c_XMLTools_selectScalar(_1,_2,_3,_4){if(isc.isA.String(_1))_1=this.parseXML(_1);if(isc.isAn.XMLDoc(_1))return _1.selectScalar(_2,_3,_4);var _5;if(isc.Browser.isSafari&&isc.Browser.isApollo||(isc.Browser.safariVersion<522)){var _6=_2.substring(_2.indexOf(":")+1);_5=_1.getElementsByTagName(_6)[0]}else{_5=this.selectNodes(_1,_2,_3,true)}
if(_5==null)return null;var _7=this.getElementText(_5);return _4?parseInt(_7):_7}
,isc.A.selectScalarList=function isc_c_XMLTools_selectScalarList(_1,_2,_3){if(isc.isA.String(_1))_1=this.parseXML(_1);if(isc.isAn.XMLDoc(_1))return _1.selectScalarList(_2,_3);var _4=this.selectNodes(_1,_2,_3);for(var i=0;i<_4.length;i++){_4[i]=_4[i].nodeValue}
return _4}
,isc.A.transformNodes=function isc_c_XMLTools_transformNodes(_1,_2){if(isc.isAn.XMLDoc(_1))_1=_1.nativeDoc;if(isc.isAn.XMLDoc(_2))_2=_2.nativeDoc;if(isc.Browser.isIE){return _1.transformNode(_2)}
var _3=new XSLTProcessor();_3.importStylesheet(_2);if(isc.Browser.isMoz&&this.mozAnchorBug&&isc.Browser.geckoVersion<20051107){var _4=document.implementation.createDocument("","test",null);var _5=_3.transformToFragment(_1,_4);return new XMLSerializer().serializeToString(_5)}
if(_1){var _6=_3.transformToDocument(_1);return new XMLSerializer().serializeToString(_6)}
return null}
,isc.A.serializeToString=function isc_c_XMLTools_serializeToString(_1){this.$37n=this.$37n||isc.xml.parseXML('<xsl:stylesheet version=\'1.0\' xmlns:xsl=\'http://www.w3.org/1999/XSL/Transform\'>\r<xsl:output method="xml" indent="yes"/>\r<xsl:strip-space elements="*"/>\r<xsl:template match="/">\r  <xsl:copy-of select="."/>\r</xsl:template>\r</xsl:stylesheet>');return this.transformNodes(_1,this.$37n)}
,isc.A.loadXMLSchema=function isc_c_XMLTools_loadXMLSchema(_1,_2,_3,_4,_5){_3=_3||{};_3.operationType=_3.operationType||"loadXMLSchema";this.loadWSDL(_1,_2,_3,_4,_5,true)}
,isc.A.loadWSDL=function isc_c_XMLTools_loadWSDL(_1,_2,_3,_4,_5,_6){if(!this.$37o){var _7=isc.Page.getIsomorphicClientDir()+"schema/schemaTranslator.xsl";_7=_7.replace(/https?:\/\/[^\/]*\//,"/");this.$37o="LOADING";isc.xml.loadXML(_7,function(_9,_10,_11){isc.xml.logDebug("schema translator loaded");if(isc.Browser.isMoz&&_11.xmlHttpRequest&&_11.xmlHttpRequest.responseXML)
{isc.xml.$37o=isc.XMLDoc.create(_11.xmlHttpRequest.responseXML)}else{isc.xml.$37o=_9}
isc.xml.loadWSDL(_1,_2,_3,_4,_5,_6)});return}
_3=_3||{};_3.operationType=_3.operationType||"loadWSDL";var _8={location:_1,callback:_2,autoLoadImports:_4,wsProperties:_5||{},returnSchemaSet:_6
};isc.xml.loadXML(_1,function(_9,_10,_11,_12){_8.rpcResponse=_11;_8.rpcRequest=_12;isc.xml.$37p(_9,_8)},_3)}
,isc.A.loadWSDLFromXML=function isc_c_XMLTools_loadWSDLFromXML(_1,_2,_3,_4,_5){if(isc.isA.String(_1))_1=isc.xml.parseXML(_1);this.$37p(_1,{callback:_2,autoLoadImports:_3,wsProperties:_4,returnSchemaSet:_5})}
,isc.A.$37p=function isc_c_XMLTools__loadSchemaReply(_1,_2){if(!isc.isAn.XMLDoc(this.$37o)){this.logInfo("deferred schema translator, schema translator not loaded","xmlComm");isc.Timer.setTimeout({methodName:"$37p",target:this,args:[_1,_2]});return}
this.logInfo("transforming schema: "+this.echoLeaf(_1)+" with translator "+this.echoLeaf(this.$37o),"xmlComm");var _3=this.transformNodes(_1,this.$37o);if(this.logIsDebugEnabled("xmlComm")){this.logWarn("XML service definition is: \n"+_3)}
var _4=_2.wsProperties,_5=_4.initiator;if(_4.captureXML){_4.xmlSource=_3;if(_5)_5.addImportXMLSource(_3,_2.location)}
if(this.useClientXML){var _1=isc.xml.parseXML(_3),_6=_1?this.$37m(_1.documentElement.childNodes):null,_7=_6?this.toJS(_6,null,null,true):null
;this.$37q(_2);return}
this.logInfo("about to call serverToJS with: "+this.echoLeaf(_3)+", callback: "+this.echo(_2.callback),"xmlComm");this.serverToJS(_3,function(){isc.Log.logWarn("serverToJS returned");isc.xml.$37q(_2)})}
,isc.A.$37q=function isc_c_XMLTools__loadSchemaToJSReply(_1){var _2;if(_1.returnSchemaSet){_2=isc.SchemaSet.$37r}else{_2=isc.WebService.$37r||isc.SchemaSet.$37r}
isc.WebService.$37r=isc.SchemaSet.$37r=null;if(!_2&&_1.rpcRequest.willHandleError==false)return;if(_2)_2.location=_1.location;if(_1.wsProperties&&_2)_2.setProperties(_1.wsProperties);var _3=(isc.isA.WebService(_2)?"service":"schemaSet")+",rpcRequest";var _4=[_2,_1.rpcRequest];if(_1.autoLoadImports&&_2&&_2.loadImports){var _5=this;_2.loadImports(function(){_5.$41k(_1.callback,_3,_4)})}else{this.$41k(_1.callback,_3,_4)}}
,isc.A.$41k=function isc_c_XMLTools__completeLoad(_1,_2,_3){this.fireCallback(_1,_2,_3)}
,isc.A.getCompleteSource=function isc_c_XMLTools_getCompleteSource(_1,_2,_3){var _4=_1.importSources;if(!_4)return"";_4=_4.getProperty("xmlText");_4.unshift(_1.xmlSource);_4=this.map("trimXMLStart",_4);var _5=_4.join("\n");if(_3){this.fireCallback(_2,"source",[_5]);return}
this.toJSCode(_5,function(_6,_7){this.fireCallback(_2,"source",[_7])})}
);isc.B._maxIndex=isc.C+53;isc.xml=isc.XML=isc.XMLTools;isc.defineClass("DataSource");isc.DS=isc.DataSource;isc.A=isc.DataSource;isc.A.dataSourceObjectSuffix="DS";isc.A._dataSources={};isc.A.$54v={};isc.A.$54w={};isc.A.$532="element";isc.A.$45t="type";isc.A.$99u={};isc.A.$99v={};isc.A.TABLE="table";isc.A.VIEW="view";isc.A.loaderURL="[ISOMORPHIC]/DataSourceLoader";isc.A.deepCloneOnEdit=true;isc.A.DS_FN={};isc.A.$37t="<soap:Envelope xmlns:soap='http://schemas.xmlsoap.org/soap/envelope/' ";isc.A.$37w="</soap:Envelope>";isc.A.$37u="<soap:Header>";isc.A.$51y="</soap:Header>";isc.A.$37v="<soap:Body";isc.A.$51z="</soap:Body>";isc.A=isc.DataSource;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$748="ref:";isc.A.serializeTimeAsDatetime=false;isc.A.$78d=[];isc.A.maxResponsesToCache=100;isc.A.offlineMessage="This data not available while offline";isc.A.maxFileSizeExceededMessage="Size of '${uploadedFileName}' (${uploadedFileSize}) exceeded maximum allowed file size of ${maxFileSize}";isc.B.push(isc.A.create=function isc_c_DataSource_create(_1,_2,_3,_4,_5,_6,_7,_8,_9,_10,_11,_12,_13){var _14=_1?_1.ID:null;if(isc.DataSource.$92w){var _15;if(_14)_15=isc.DataSource.get(_14);if(_15)return _15}
if(this.DS_FN)delete this.DS_FN[_14];return this.invokeSuper(this,"create",_1,_2,_3,_4,_5,_6,_7,_8,_9,_10,_11,_12,_13)}
,isc.A.isLoaded=function isc_c_DataSource_isLoaded(_1){if(!_1)return false;if(isc.isA.DataSource(_1)||this._dataSources[_1])return true;return false}
,isc.A.getDataSource=function isc_c_DataSource_getDataSource(_1,_2,_3,_4){if(!_1)return null;if(isc.isA.DataSource(_1))return _1;if(isc.startsWith(_1,this.$748)){_1=_1.substring(4)}
if(_4&&isc.WebService){if(_4==isc.DS.$532)return this.$54v[_1];if(_4==isc.DS.$45t)return this.$54w[_1];return null}
var _5=this._dataSources[_1];if(!_5){if(isc.DataSource.DS_FN&&isc.DataSource.DS_FN[_1]){var _6=isc.DataSource.DS_FN[_1];delete isc.DataSource.DS_FN[_1];_6.call(null)}
_5=this._dataSources[_1];if(!_5){_5=this.$37x(_1,_2);if(_5)_5.ID=_1}
}
if(_5){if(_2){this.fireCallback(_2,"ds",[_5],_5)}
return _5}
if(_2){this.loadSchema(_1,_2,_3)}
return null}
,isc.A.loadSchema=function isc_c_DataSource_loadSchema(_1,_2,_3){this.logWarn("Attempt to load schema for DataSource '"+_1+"'. This dataSource cannot be found. To load DataSources from the server without explicit inclusion in your application requires optional SmartClient server support - not present in this build.");return null}
,isc.A.get=function isc_c_DataSource_get(_1,_2,_3,_4){return this.getDataSource(_1,_2,_3,_4)}
,isc.A.$37x=function isc_c_DataSource__loadDataSource(_1,_2){if(_2)return null;if(_1!=isc.auto&&this.logIsDebugEnabled()){this.logDebug("isc.DataSource '"+_1+"' not present")}
return null}
,isc.A.getRegisteredDataSources=function isc_c_DataSource_getRegisteredDataSources(){return isc.getKeys(this._dataSources)}
,isc.A.isRegistered=function isc_c_DataSource_isRegistered(_1){if(this._dataSources[_1])return true;return false}
,isc.A.getForeignFieldName=function isc_c_DataSource_getForeignFieldName(_1){var _2=_1.foreignKey,_3=_2.indexOf(".");if(_3==-1)return _2;return _2.substring(_3+1)}
,isc.A.getForeignDSName=function isc_c_DataSource_getForeignDSName(_1,_2){var _3=_1.foreignKey,_4=_3.indexOf(".");if(_4==-1){if(_2==null)return null;return isc.isA.String(_2)?_2:_2.ID}
return _3.substring(0,_4)}
,isc.A.registerDataSource=function isc_c_DataSource_registerDataSource(_1){if(this.logIsInfoEnabled()){this.logInfo("Registered new isc.DataSource '"+_1.ID+"'")}
if(_1.ID){var _2=this._dataSources[_1.ID];if(!_2||!_1.schemaNamespace){this._dataSources[_1.ID]=_1}
if(_1.tableCode){this.$99u[_1.tableCode]=_1.ID;var _3=this.$99v[_1.tableCode];if(_3){for(var i=0;i<_3.length;i++){var _5=_3[i];var _6=isc.DS.get(_5);var _7=_6.getFields();var _8=_1.getFields();for(var _9 in _7){for(var _10 in _8){if(_7[_9].fkColumnCode==_8[_10].columnCode){_7[_9].foreignKey=_1.ID+"."+_8[_10].name;break}
}
}
_6.addChildDataSource(_1);_3.removeAt(i);i--}
if(_3.length==0){delete this.$99v[_1.tableCode]}
}
}
}
if(isc.Schema&&isc.isA.Schema(_1)){if(isc.isAn.XSElement(_1))this.$54v[_1.ID]=_1;else if(isc.isAn.XSComplexType(_1))this.$54w[_1.ID]=_1;return}
var _11=_1.getLocalFields(true);var _12=this.$37z=(this.$37z||{});for(var _13 in _11){var _14=_11[_13];var _15=null;if(_14.fkTableCode){_15=this.$99u[_14.fkTableCode];if(_15==null){if(this.$99v[_14.fkTableCode]==null){this.$99v[_14.fkTableCode]=[]}
this.$99v[_14.fkTableCode].add(_1.ID);continue}
var _16=isc.DS.get(_15);var _8=_16.getFields();for(var _10 in _8){if(_8[_10].columnCode==_14.fkColumnCode){_14.foreignKey=_16.ID+"."+_8[_10].name}
}
}else if(_14.foreignKey){var _15=this.getForeignDSName(_14,_1)}else{continue}
if(isc.DS.isRegistered(_15)){isc.DS.get(_15).addChildDataSource(_1)}else{if(_12[_15]==null){_12[_15]=[]}
_12[_15].add(_1)}
}
var _17=_12[_1.ID];if(_17!=null){_1.map("addChildDataSource",_17);_12[_1.ID]=null}
var _18=this.$370=this.$370||{};if(_1.childRelations){for(var i=0;i<_1.childRelations.length;i++){var _19=_1.childRelations[i],_20=_19.dsName,_21=isc.DS.get(_20);if(_21){this.$371(_1,_21,_19)}else{if(_18[_20]==null){_18[_20]=[]}
_19.parentDS=_1.ID;_18[_20].add(_19)}
}
}
var _22=_18[_1.ID];if(_22){for(var i=0;i<_22.length;i++){var _19=_22[i];this.$371(isc.DS.get(_19.parentDS),_1,_19)}
}
}
,isc.A.$371=function isc_c_DataSource__addChildRelation(_1,_2,_3){_1.addChildDataSource(_2);if(!_3.fieldName)return;var _4=_2.getField(_3.fieldName);if(!_4.foriegnKey){_4.foreignKey=_1.ID+"."+_1.getPrimaryKeyFieldNames()[0]}
}
,isc.A.registerSgwtDS=function isc_c_DataSource_registerSgwtDS(_1,_2){isc.DataSource.DS_FN[_1]=_2}
,isc.A.unregisterSgwtDS=function isc_c_DataSource_unregisterSgwtDS(_1){delete isc.DataSource.DS_FN[_1]}
,isc.A.reregisterSgwtDS=function isc_c_DataSource_reregisterSgwtDS(_1,_2){isc.DataSource.DS_FN[_2]=isc.DataSource.DS_FN[_1];delete isc.DataSource.DS_FN[_1]}
,isc.A.getFieldValue=function isc_c_DataSource_getFieldValue(_1,_2){return isc.Canvas.$70o(null,_1,_2)}
,isc.A.getInheritanceDistance=function isc_c_DataSource_getInheritanceDistance(_1,_2){var _3=isc.ClassFactory.getClass(_1),_4=isc.ClassFactory.getClass(_2)
;if(_3==null||_4==null){this.logWarn("Invalid superclass and/or subclass argument provided");return-1}
if(!_4.isA(_1)){this.logWarn(_2+" is not a subclass of "+_1);return-1}
if(isc.isA.SGWTFactoryObject(_3)){if(!isc.isA.SGWTFactoryObject(_4)){_3=_3.getDefaultScClass();if(!_3){this.logWarn("Could not get defaultScClass for SGWTFactory "+_1);return-1}
}
}else if(isc.isA.SGWTFactoryObject(_4)){_4=_4.getDefaultScClass();if(!_4){this.logWarn("Could not get defaultScClass for SGWTFactory "+_2);return-1}
}
for(var _5=0;_4!=_3;_5++){_4=_4.getSuperClass()}
return _5}
,isc.A.isSimpleTypeValue=function isc_c_DataSource_isSimpleTypeValue(_1){if(_1!=null&&(!isc.isAn.Object(_1)||isc.isA.Date(_1)))return true;return false}
,isc.A.getNearestSchema=function isc_c_DataSource_getNearestSchema(_1){if(_1==null)return null;var _2;if(isc.isA.String(_1))_2=_1;else{_2=isc.isAn.Instance(_1)?_1.getClassName():_1._constructor||_1.type||_1.$schemaId}
var _3=isc.DS.get(_2);var _4=isc.ClassFactory.getClass(_2);var _5=_4;if(_4!=null){var _6=null;while(_3==null&&(_4=_4.getSuperClass())!=null&&_4!=_6)
{_3=isc.DS.get(_4.getClassName());_6=_4}
if(!_3){if(isc.isA.SGWTFactoryObject(_5)){var _7=_5.getDefaultScClassName();if(_7)return this.getNearestSchema(_7)}
}
}
return _3||isc.DS.get("Object")}
,isc.A.getNearestSchemaClass=function isc_c_DataSource_getNearestSchemaClass(_1){if(_1==null)return null;var _2;while(_2==null){var _3=isc.DS.get(_1);if(_3==null){var _4=isc.ClassFactory.getClass(_1);if(_4&&isc.isA.SGWTFactoryObject(_4)){return _4}else{return null}
}
_2=isc.ClassFactory.getClass(_3._constructor||_3.Constructor
||_3.type);if(_2!=null)return _2;_1=_3.inheritsFrom;if(!_1)return null}
return null}
,isc.A.$372=function isc_c_DataSource__getStandardOperationType(_1){switch(_1){case"fetch":case"select":case"filter":return"fetch";case"add":case"insert":return"add";case"update":return"update";case"remove":case"delete":return"remove";default:return _1}
}
,isc.A.isClientOnly=function isc_c_DataSource_isClientOnly(_1){if(isc.isA.String(_1))_1=this.getDataSource(_1);if(!_1)return false;return _1.clientOnly}
,isc.A.makeDefaultOperation=function isc_c_DataSource_makeDefaultOperation(_1,_2,_3){var _4=isc.rpc.app();if(isc.isA.DataSource(_1))_1=_1.ID;if(!_1){_1="auto"}else if(_3){var _5=isc.DataSource.get(_1);if(isc.isA.DataSource(_5)){if(!_5.createdOperations)_5.createdOperations={};var _6=_5.createdOperations[_3];if(_6==null){_6={ID:_3,dataSource:_1,type:_2,filterType:"paged",loadDataOnDemand:true};_5.createdOperations[_3]=_6}
return _6}
}
if(_4.operations==null)_4.operations={};_3=_3||_1+"_"+_2;var _6=_4.operations[_3];if(_6==null){_6={ID:_3,dataSource:_1,type:_2,filterType:"paged",loadDataOnDemand:true,source:"auto"};_4.operations[_3]=_6}
return _6}
,isc.A.handleUpdate=function isc_c_DataSource_handleUpdate(_1,_2){if(!this.isUpdateOperation(_2.operationType))return;var _3=this.get(_2.dataSource);_3.updateCaches(_1,_2)}
,isc.A.isUpdateOperation=function isc_c_DataSource_isUpdateOperation(_1){if(_1=="add"||_1=="update"||_1=="remove"||_1=="replace"
||_1=="delete"||_1=="insert"
)return true}
,isc.A.getUpdatedData=function isc_c_DataSource_getUpdatedData(_1,_2,_3){var _4=this.get(_1.dataSource);return _4.getUpdatedData(_1,_2,_3)}
,isc.A.filterCriteriaForFormValues=function isc_c_DataSource_filterCriteriaForFormValues(_1){if(isc.DS.isAdvancedCriteria(_1))return _1;var _2={};for(var _3 in _1){var _4=_1[_3];if(_4==null||isc.is.emptyString(_4))continue;if(isc.isAn.Array(_4)){if(_4.length==0)continue;for(var i=0;i<_4.length;i++){var _6=_4[i];if(isc.isAn.emptyString(_6))continue}
}
_2[_3]=_4}
return _2}
,isc.A.checkEmptyCriteria=function isc_c_DataSource_checkEmptyCriteria(_1,_2){if((_2||this.isAdvancedCriteria(_1))&&_1.criteria){if(_1.criteria.length==0)return null;for(var i=_1.criteria.length-1;i>=0;i--){var _4=_1.criteria[i],_5=false;if(!_4)_5=true;else{if(!_4.criteria){if(isc.isA.emptyObject(_4))_5=true}else{var _6=this.checkEmptyCriteria(_4,true);if(_6)_1.criteria[i]=_6;else _5=true}
}
if(_5)_1.criteria.removeAt(i)}
}
return _1
}
,isc.A.load=function isc_c_DataSource_load(_1,_2,_3,_4){if(!isc.isAn.Array(_1))_1=[_1];if(_1.length<=0){this.logWarn("No DataSource IDs passed in.");return}
var _5=[];for(var i=0;i<_1.length;i++){if(!this.isLoaded(_1[i])||_3)_5.add(_1[i])}
var _7=_5.join(","),_8=isc.DataSource.loaderURL+"?"+(_4?"loadParents=true&":"")+"dataSource="+_7,_9=_1;;if(_5.length>0){isc.RPCManager.send(null,function(_10,_11,_12){if(_10.httpResponseCode==404){isc.warn("The DataSourceLoader servlet is not installed.");return null}
if(_4&&!_3)isc.DataSource.$92w=true;try{eval(_11)}catch(e){isc.logWarn("Encountered problems trying to load DataSources: "+isc.echoAll(e))}
delete isc.DataSource.$92w;if(_2)this.fireCallback(_2,["dsID"],[_9])},{actionURL:_8,httpMethod:"GET",willHandleError:true
}
)}else{this.logWarn("DataSource(s) already loaded: "+_1.join(",")+"\nUse forceReload to reload such DataSources");if(_2)this.fireCallback(_2,["dsID"],[_9])}
}
,isc.A.loadWithParents=function isc_c_DataSource_loadWithParents(_1,_2,_3){this.load(_1,_2,_3,true)}
,isc.A.getSortBy=function isc_c_DataSource_getSortBy(_1){if(!isc.isA.Array(_1))_1=[_1];var _2=[];for(var i=0;i<_1.length;i++){var _4=_1.get(i);_2.add((!Array.shouldSortAscending(_4.direction)?"-":"")+_4.property)}
return _2}
,isc.A.getSortSpecifiers=function isc_c_DataSource_getSortSpecifiers(_1){if(!isc.isA.Array(_1))_1=[_1];var _2=[];for(var i=0;i<_1.length;i++){var _4=_1.get(i),_5="ascending",_6=_4
;if(_4.substring(0,1)=="-"){_5="descending";_6=_4.substring(1)}
_2.add({property:_6,direction:_5})
}
return _2}
,isc.A.isAdvancedCriteria=function isc_c_DataSource_isAdvancedCriteria(_1,_2){if(!_1)return false;if(!_2){return(_1&&_1._constructor=="AdvancedCriteria")}
if(!isc.isA.DataSource(_2))_2=this.get(_2);if(_1._constructor=="AdvancedCriteria")return true;var _3=false,_4=_2.getSearchOperator(_1.operator)
;if(_2.getField(_1.fieldName)&&_4){_3=true}
else if(_2.getField("fieldName")||_2.getField("operator"))_3=false;else if(_1.fieldName&&(_1.operator&&_4)){_3=true}
else if(_1.fieldName&&_1.value!=null&&_1.operator==null){_3=true}else{var _5;if(_1.operator!=_5){var _6=_4;if(_6!=null&&(_6.isAnd||_6.isOr)){_3=true}
}
}
this.logInfo("Criteria object:"+this.echo(_1)+" not explicitly marked as AdvancedCriteria"+(_3?" but treating as Advanced based on format.":" - treating as SimpleCriteria."),"AdvancedCriteria");return _3}
,isc.A.copyCriteria=function isc_c_DataSource_copyCriteria(_1){if(_1==null)return null;return isc.clone(_1)}
,isc.A.getCriteriaFields=function isc_c_DataSource_getCriteriaFields(_1,_2,_3){if(_2&&!isc.isA.DataSource(_2))_2=this.get(_2);if(_3||(_2?_2.isAdvancedCriteria(_1):this.isAdvancedCriteria(_1))
)
{var _4=[];this.$74s(_1,_4);return _4}
return isc.getKeys(_1)}
,isc.A.$74s=function isc_c_DataSource__getAdvancedCriteriaFields(_1,_2){if(_1.criteria){for(var i=0;i<_1.criteria.length;i++){isc.DS.$74s(_1.criteria[i],_2)}
}else{_2.add(_1.fieldName)}
}
,isc.A.cacheResponse=function isc_c_DataSource_cacheResponse(_1,_2){if(isc.Offline){var _3=isc.Offline.serialize(isc.Offline.trimRequest(_1));var _4=this.$78d.findIndex("requestKey",_3);if(_4!=-1){this.$78d.set(_4,_2)}else{if(this.$78d.length>=this.maxResponsesToCache){this.$78d.removeAt(0)}
this.$78d.add({requestKey:_3,dsResponse:_2
})}
}
}
,isc.A.getCachedResponse=function isc_c_DataSource_getCachedResponse(_1){if(isc.Offline){var _2=isc.Offline.serialize(isc.Offline.trimRequest(_1));return this.$78d.find("requestKey",_2)}
return null}
,isc.A.getPathValue=function isc_c_DataSource_getPathValue(_1,_2,_3){return isc.Canvas.$70o(_2,_3,_1,null,true)}
,isc.A.setPathValue=function isc_c_DataSource_setPathValue(_1,_2,_3,_4){isc.Canvas.$70n(_2,_3,_4,_1,null,true)}
,isc.A.getCombinedDataSourceFields=function isc_c_DataSource_getCombinedDataSourceFields(_1){var _2=[];for(var i=0;i<_1.length;i++){var _4=_1[i];if(isc.isA.String(_4))_4=isc.DataSource.get(_4);if(_4==null){this.logWarn("getCombinedDataSourceFields() - unable to locate dataSource:"
+_1[i]);continue}
var _5=_4.getID(),_6=isc.getKeys(_4.getFields());for(var j=0;j<_6.length;j++){_2[_2.length]=_5+"."+_6[j]}
}
return _2}
,isc.A.getFieldFromDataSources=function isc_c_DataSource_getFieldFromDataSources(_1,_2,_3){var _4=this.getDataSourceForField(_1,_2,_3);if(_4==null){if(!_3){this.logWarn("getFieldFromDataSources() - unable to find dataSource  from combined field ID "+_1)}
return null}
var _5=_1.split("."),_6=_5[0],_7=_5[1];return _4.getField(_7)}
,isc.A.getDataSourceForField=function isc_c_DataSource_getDataSourceForField(_1,_2,_3){var _4=_1.split("."),_5=_4[0],_6=_4[1];if(_5==null||_6==null){if(!_3){this.logWarn("getDataSourceForField() passed invalid field ID:"+_1+". Expected format is to use dot-notation to indicate the dataSource plus fieldName - for example 'countryDS.countryCode'")}
return null}
var _7;if(_2==null)_7=isc.DataSource.get(_5);else{if(!isc.isAn.Array(_2))_2=[_2];for(var i=0;i<_2.length;i++){if(_2[i].getID()==_5){_7=_2[i];break}
}
}
return _7}
,isc.A.$93o=function isc_c_DataSource__getDefaultValueForFieldType(_1){var _2;switch(_1){case"date":case"datetime":case"time":_2=new Date(0);break;case"float":_2=0.0;break;case"integer":_2=0;break;case"boolean":_2=false;break;case"text":default:_2="";break}
return _2}
,isc.A.$93p=function isc_c_DataSource__getTypedValueAsString(_1,_2,_3){if(_3==null)_3={};if(_1==null){var _4=_3.nullValueText;if(_4!=null)return _4;_1=this.$93o(_2)}
switch(_2){case"date":var _5=_3.dateFormat;return _1.toShortDate(_5);case"datetime":var _5=_3.dateTimeFormat;return _1.toShortDateTime(_5);case"time":var _5=_3.timeFormat;return isc.Time.toShortTime(_1,_5);case"float":case"integer":case"boolean":default:return _1.toString();case"text":return _1}
}
,isc.A.isFlatCriteria=function isc_c_DataSource_isFlatCriteria(_1){if(!_1)return false;if(isc.isA.emptyObject(_1)||(_1.fieldName&&_1.operator&&_1.operator!="and"&&_1.operator!="or"))
{return true}
if(_1._constructor=="AdvancedCriteria"&&(_1.operator=="and"||_1.operator=="or")&&_1.criteria)
{var _2=_1.criteria;for(var i=0;i<_2.length;i++){var _4=_2[i];if(_4.operator&&(_4.operator=="and"||_4.operator=="or"||_4.operation=="not"))
{return false}
}
return true}
return false}
,isc.A.flattenCriteria=function isc_c_DataSource_flattenCriteria(_1){if(!_1)return null;var _2=isc.addProperties({},_1);if(_2.criteria){_2.criteria=[];this.$1241(_2.criteria,_1)}
return _2}
,isc.A.$1241=function isc_c_DataSource__addSubCriteriaToList(_1,_2){if(!_2.criteria){_1.add(isc.addProperties({},_2));return}
var _3=_2.criteria;for(var i=0;i<_3.length;i++){var _5=_3[i];this.$1241(_1,_5)}
}
,isc.A.canFlattenCriteria=function isc_c_DataSource_canFlattenCriteria(_1){if(!_1)return false;if(isc.DataSource.isFlatCriteria(_1))return true;var _2=_1.operator;if(this.$1242(_1,_2))return true;return false}
,isc.A.$1242=function isc_c_DataSource__criteriaHasSameLogicalOperators(_1,_2){if(!_1.criteria)return true;if(_1.operator!=_2)return false;var _3=_1.criteria;for(var i=0;i<_3.length;i++){var _5=_3[i];if(!this.$1242(_5,_2))return false}
return true}
,isc.A.getAdvancedCriteriaDescription=function isc_c_DataSource_getAdvancedCriteriaDescription(_1,_2){if(!isc.isAn.Array(_2)){if(!isc.isA.DataSource(_2))_2=isc.DS.getDataSource(_2);if(!_2)return"No dataSource"}
var _3="";if(_1.criteria&&isc.isAn.Array(_1.criteria)){var _4=_1.operator,_5=_1.criteria;for(var i=0;i<_5.length;i++){var _7=_5[i];if(i>0)_3+=" "+_4+" ";if(_7.criteria&&isc.isAn.Array(_7.criteria)){_3+="("
_3+=isc.DataSource.getAdvancedCriteriaDescription(_7,_2);_3+=")"
}else{_3+=isc.DataSource.getCriterionDescription(_7,_2)}
}
}else{_3+=isc.DataSource.getCriterionDescription(_1,_2)}
return _3}
,isc.A.getCriterionDescription=function isc_c_DataSource_getCriterionDescription(_1,_2){if(_1==null)return"";var _3=_1.fieldName,_4=_1.operator,_5=_1.start,_6=_1.end,_7;if(isc.isAn.Array(_2)){_2=isc.DataSource.getDataSourceForField(_3,_2);_7=isc.DataSource.getFieldFromDataSources(_3,[_2])}else{if(!isc.isA.DataSource(_2))_2=isc.DS.getDataSource(_2);if(!_2)return"No DataSource";_7=_2.getField(_3);if(_7==null){_7=_2.getFieldForDataPath(_3)}
}
var _8=_2.getSearchOperator(_4,_7),_9=_2.getFieldOperatorMap(_7,true,_8.valueType,false),_10=""
;if(!_7){if(_1.criteria&&isc.isAn.Array(_1.criteria)){isc.logWarn("DataSource.getCriterionDescription: Passed an AdvancedCriteria - returning through getAdvancedCriteriaDescription.");return isc.DataSource.getAdvancedCriteriaDescription(_1,_2)}
_10=_3+" "+isc.FilterBuilder.missingFieldPrompt+" ";isc.logWarn("DataSource.getCriterionDescription: No such field '"+_3+"' in DataSource '"+_2.ID+"'.")}else{_10=(_7.title?_7.title:_3)+" "}
switch(_4)
{case"lessThan":case"greaterThan":case"lessOrEqual":case"greaterOrEqual":case"between":case"notNull":_10+="is "+_9[_4]||_4;break;case"equals":_10+="is equal to";break;case"notEqual":_10+="is not equal to";break;default:_10+=_9[_4]||_4}
var _11=_1.value;if(isc.DateUtil.isRelativeDate(_11)){var _12=_7?_7.type:null,_13=false,_14=isc.SimpleType
;if(_14.inheritsFrom(_12,"date")&&!_14.inheritsFrom(_12,"datetime")){_13=true}
_11=isc.DateUtil.getAbsoluteDate(_11,null,null,_13)}
if(_8.valueType=="valueRange")_10+=" "+_5+" and "+_6;else if(_4!="notNull"){_10+=" ";if(isc.isA.Date(_11)){if(_11.isLogicalDate)_10+=_11.toShortDate();else _10+=_11.toShortDatetime()}else _10+=_11&&_11.toString?_11.toString():_11}
return _10}
);isc.B._maxIndex=isc.C+52;isc.A=isc.DataSource.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.addGlobalId=true;isc.A.dataFormat="iscServer";isc.A.callbackParam="callback";isc.A.preventHTTPCaching=true;isc.A.sendExtraFields=true;isc.A.patternSingleWildcard=["?","%"];isc.A.patternMultiWildcard="*";isc.A.patternEscapeChar="\\";isc.A.translatePatternOperators=false;isc.A.transformResponseToJS=true;isc.A.supportsRequestQueuing=true;isc.A.copyLocalResults=true;isc.A.deepCopyLocalResults=false;isc.A.criteriaPolicy="dropOnShortening";isc.A.defaultTextMatchStyle="exact";isc.A.ignoreTextMatchStyleCaseSensitive=false;isc.A.showPrompt=true;isc.A.autoDeriveTitles=true;isc.A.canMultiSort=true;isc.A.nullStringValue="";isc.A.nullIntegerValue=0;isc.A.nullFloatValue=0.0;isc.A.nullBooleanValue=false;isc.A.nullDateValue=new Date(0);isc.A.cacheAcrossOperationIds=true;isc.A.cacheMaxAge=60;isc.A.cacheLastFetchTime=0;isc.A.sendParentNode=false;isc.A.autoCacheAllData=false;isc.A.autoConvertRelativeDates=true;isc.A.showFieldsAsTree=false;isc.A.$111m={};isc.A.$111n={};isc.A.$111o={};isc.B.push(isc.A.setCacheAllData=function isc_DataSource_setCacheAllData(_1){if(!_1){if(this.cacheAllData==true){if(this.logIsInfoEnabled("cacheAllData")){this.logInfo("setCacheAllData(false): clearing the cache and any deferred requests","cacheAllData")}
this.cacheAllData=false;delete this.$85n;this.invalidateCache();this.clearDeferredRequests()}
}else{if(this.logIsInfoEnabled("cacheAllData")){this.logInfo("setCacheAllData(true): invalidate the cache","cacheAllData")}
this.cacheAllData=true;this.$85n=isc.timestamp();this.invalidateCache()}
}
,isc.A.cacheNeedsRefresh=function isc_DataSource_cacheNeedsRefresh(){var _1=new Date().getTime(),_2=((_1-this.cacheLastFetchTime)/1000),_3=(this.cacheLastFetchTime==0||_2>this.cacheMaxAge)
;if(this.logIsInfoEnabled("cacheAllData")){this.logInfo("cacheNeedsRefresh returns "+_3,"cacheAllData")}
return _3}
,isc.A.setCacheData=function isc_DataSource_setCacheData(_1){if(this.cacheAllData||this.clientOnly){if(this.logIsInfoEnabled("cacheAllData")){this.logInfo("setCacheData: invalidating the cache","cacheAllData")}
this.invalidateCache();this.clearDeferredRequests();this.cacheData=this.testData=_1;this.cacheLastFetchTime=new Date().getTime();if(this.logIsInfoEnabled("cacheAllData")){this.logInfo("setCacheData: cacheData has been set","cacheAllData")}
}
}
,isc.A.setTestData=function isc_DataSource_setTestData(_1,_2){this.setCacheData(_1,_2)}
,isc.A.clearDeferredRequests=function isc_DataSource_clearDeferredRequests(_1){if(!this.$498)return;_1=_1||"any";if(!isc.isAn.Array(_1))_1=[_1];if(this.logIsInfoEnabled("cacheAllData")){this.logInfo("clearDeferredRequests: "+this.$498.length+" requests, clearing those of type "+isc.echoAll(_1),"cacheAllData")}
if(_1.contains("any"))delete this.$498;else{if(this.$498){var _2=this.$498;for(var i=_2.length;i>=0;i--){var _4=_2[i].operationType||"fetch";if(_1.contains(_4))this.$498.removeAt(i)}
if(this.$498.length==0)delete this.$498}
}
}
,isc.A.processDeferredRequests=function isc_DataSource_processDeferredRequests(){if(!this.$498)return;if(this.logIsInfoEnabled("cacheAllData")){this.logInfo("processDeferredRequests: processing "+this.$498.length+" deferred requests","cacheAllData")}
var _1=this.$498;this.clearDeferredRequests();for(var i=0;i<_1.length;i++){this.sendDSRequest(_1[i])}
}
,isc.A.invalidateCache=function isc_DataSource_invalidateCache(){if(!this.cacheAllData&&!this.clientOnly)return;if(this.logIsInfoEnabled("cacheAllData")){this.logInfo("invalidateCache: invalidating client-side cache","cacheAllData")}
delete this.cacheData;delete this.testData;this.cacheLastFetchTime=0;if(this.cacheResultSet){this.cacheResultSet.destroy();delete this.cacheResultSet}
}
,isc.A.setClientOnly=function isc_DataSource_setClientOnly(_1){if(_1){this.clientOnly=true
if(this.cacheAllData){if(this.cacheResultSet){if(this.logIsInfoEnabled("cacheAllData")){this.logInfo("setClientOnly: sourcing from client-cache","cacheAllData")}
this.cacheData=this.testData=this.cacheResultSet.getAllRows()}
}else{this.clearDeferredRequests();this.invalidateCache();this.performDSOperation("fetch")}
}
}
,isc.A.hasAllData=function isc_DataSource_hasAllData(){if(this.cacheResultSet)return this.cacheResultSet.lengthIsKnown();else return false}
,isc.A.criteriaContainsDates=function isc_DataSource_criteriaContainsDates(_1){var _2=this.getCriteriaFields(_1);if(_2&&_2.length>0){for(var i=0;i<_2.length;i++){var _4=this.getField(_2[i]);if(!_4)continue;if(isc.SimpleType.inheritsFrom(_4.type,"date")||isc.SimpleType.inheritsFrom(_4.type,"datetime")){return true}
}
}
return false}
,isc.A.convertRelativeDates=function isc_DataSource_convertRelativeDates(_1,_2,_3,_4){if(!_1)return null;if(!this.criteriaContainsDates(_1)){return _1}
if(!this.isAdvancedCriteria(_1)&&_1.operator==null){return _1}
var _5=isc.RelativeDate,_6=isc.clone(_1);_4=_4||new Date();if(_3==null)_3=isc.DateChooser?isc.DateChooser.firstDayOfWeek:0;if(_6.criteria&&isc.isAn.Array(_6.criteria)){var _7=_6.criteria;for(var i=_7.length-1;i>=0;i--){var _9=_7[i];if(!_9){if(this.logIsInfoEnabled("relativeDates")){this.logInfo("Removing NULL subcriteria...","relativeDates")}
_6.criteria.removeAt(i)}else{if(_9.criteria&&isc.isAn.Array(_9.criteria)){if(this.logIsInfoEnabled("relativeDates")){this.logInfo("Calling convertRelativeDates from convertRelativeDates - data is:\n\n"+isc.echoFull(_9)+"\n\ncriteria is: \n\n"+isc.echoFull(_1)
,"relativeDates"
)}
_6.criteria[i]=this.convertRelativeDates(_9,_2,_3,_4);if(this.logIsInfoEnabled("relativeDates")){this.logInfo("Called convertRelativeDates from convertRelativeDates - data is\n\n"+isc.echoFull(_6.criteria[i]),"relativeDates")}
}else{_6.criteria[i]=this.mapRelativeDate(_9,_4)}
}
}
}else{_6=this.mapRelativeDate(_6,_4)}
if(this.logIsInfoEnabled("relativeDates")){this.logInfo("Returning from convertRelativeDates - result is:\n\n"+isc.echoFull(_6)+"\n\noriginal criteria is: \n\n"+isc.echoFull(_1)
,"relativeDates"
)}
return _6}
,isc.A.mapRelativeDate=function isc_DataSource_mapRelativeDate(_1,_2){var _3=isc.addProperties({},_1),_4,_5
;_2=_2||new Date();var _6=_3.fieldName,_7=_6?this.getField(_6):null,_8=_7?_7.type:null
;var _9=isc.SimpleType.inheritsFrom(_8,"date")&&!isc.SimpleType.inheritsFrom(_8,"datetime");if(_3.value&&isc.isAn.Object(_3.value)&&_3.value._constructor=="RelativeDate")
{_5=_3.value.value;var _10=isc.DateUtil.getAbsoluteDate(_5,_2,_3.value.rangePosition,_9||_3.value.logicalDate);if(!_9){switch(_3.operator){case"equals":_3.operator="betweenInclusive";_3.start=isc.DateUtil.getStartOf(_10,"D");_3.end=isc.DateUtil.getEndOf(_10,"D");delete _3.value;break;case"notEqual":_3._constructor="AdvancedCriteria";_3.operator="not";_3.criteria=[{operator:"betweenInclusive",fieldName:_3.fieldName,start:isc.DateUtil.getStartOf(_10,"D"),end:isc.DateUtil.getEndOf(_10,"D")
}
];delete _3.value;delete _3.fieldName;break;case"lessThan":case"greaterOrEqual":_3.value=isc.DateUtil.getStartOf(_10,"D");break;case"greaterThan":case"lessOrEqual":_3.value=isc.DateUtil.getEndOf(_10,"D");break;default:_3.value=_10}
}else{_3.value=_10}
}else{if(_3.start&&isc.isAn.Object(_3.start)&&_3.start._constructor=="RelativeDate")
{_5=_3.start.value;_3.start=_4=isc.DateUtil.getAbsoluteDate(_5,_2,"start",_9||_3.start.logicalDate)}
if(_3.end&&isc.isAn.Object(_3.end)&&_3.end._constructor=="RelativeDate")
{_5=_3.end.value;_3.end=isc.DateUtil.getAbsoluteDate(_5,_2,"end",_9||_3.end.logicalDate)}
}
return _3}
);isc.B._maxIndex=isc.C+12;isc.A=isc.DataSource.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$110l=200;isc.A.$41v="Action";isc.A.resultBatchSize=150;isc.A.$2j=[];isc.A.emptyExportMessage="You are attempting to export an empty dataset";isc.A.canExport=true;isc.A.defaultTitleFieldNames=["title","label","name","id"
];isc.A.textContentProperty="xmlTextContent";isc.A.$dq="Defaults";isc.A.$dr="Properties";isc.A.$375="name";isc.A.$45t="type";isc.A.dropUnknownCriteria=true;isc.A.$45y="startsWith";isc.A.$19q="substring";isc.A.$50i="exact";isc.A.$135s="exactCase";isc.A.$50j="iscServer";isc.B.push(isc.A.init=function isc_DataSource_init(){if(this.serverType=="sql")this.dataFormat="iscServer";if(this.dataFormat=="iscServer"&&(this.serviceNamespace!=null||this.recordXPath!=null))this.dataFormat="xml";this.canQueueRequests=(this.dataFormat=="iscServer"||this.clientOnly);if(this.testData&&!this.cacheData)this.cacheData=this.testData;else if(this.clientOnly){this.cacheData=this.testData=this.cacheData||this.testData}
if(this.ID==null&&this.id!=null)this.ID=this.id;if(this.name==null)this.name=this.ID;var _1=isc.DS.get(this.ID);if(_1&&_1.builtinSchema)return _1;var _2=window[this.ID];if(this.addGlobalId&&this.addGlobalId!=isc.$ae&&(!_2||(!isc.isA.ClassObject(_2)&&isc.isA.DataSource(_2))))
{isc.ClassFactory.addGlobalID(this)}
var _3=this.fields;if(isc.isAn.Array(_3)){if(isc.Canvas.validateFieldNames){isc.Canvas.$1027(_3,this)}
var _4={};for(var i=0;i<_3.length;i++){var _6=_3[i];if(_6.includeFrom!=null){var _7=_6.includeFrom.split(".");if(_7==null||_7.length!=2){this.logWarn("Field has includeFrom specified as :"+_6.includeFrom
+" format not understood - clearing this property");_6.includeFrom=null}else{if(_6.name==null)_6.name=_7[1]}
}
if(_4[_6.name]!=null){this.logWarn("field.name collision: first field: "+this.echo(_4[_6.name])+", discarded field: "+this.echo(_6));continue}
_6=this.$93t(_6);if(_6.type){var _8=this.getType(_6.type);if(_8&&_8.fieldProperties){_6=_3[i]=isc.addProperties({},_8.fieldProperties,_6)}
if(!_6.format&&_8&&_8.format){_6.format=_8.format}
}
_4[_6.name]=_6}
this.fields=_4}
if(this.dataSourceType==isc.DataSource.VIEW)this.initViewSources();isc.DataSource.registerDataSource(this)}
,isc.A.$93t=function isc_DataSource__prettyField(_1){if(isc.isA.String(_1.validOperators)){_1.validOperators=[_1.validOperators]}
var _2;if((_1.foreignKey)
&&(_1.nillable==_2)){_1.nillable=true}
return _1}
,isc.A.destroy=function isc_DataSource_destroy(){var _1=this.ID,_2=isc.DS;if(_1&&this==window[_1])window[_1]=null;if(_2._dataSources[_1]==this)_2._dataSources[_1]=null;if(_2.$54v[_1]==this)_2.$54v[_1]=null;if(_2.$54w[_1]==this)_2.$54w[_1]=null;this.Super("destroy",arguments)}
,isc.A.getResultSet=function isc_DataSource_getResultSet(_1){var _2=isc.ClassFactory.getClass(this.resultSetClass||isc.ResultSet);if(!isc.isA.Class(_2)){this.logWarn("getResultSet(): Unrecognized 'resultSetClass' property:"
+_2+", returning a standard isc.ResultSet.");_2=isc.ResultSet}
return _2.create(_1,{$31k:true})}
,isc.A.dataChanged=function(dsResponse,dsRequest){}
,isc.A.updateCaches=function isc_DataSource_updateCaches(_1,_2){if(_2==null){_2={operationType:_1.operationType,dataSource:this
};if(_1.clientContext!=null){_2.clientContext=_1.clientContext}
if(_1.internalClientContext!=null){_2.internalClientContext=_1.internalClientContext}
}else{_2.dataSource=_2.dataSource||_1.dataSource||this}
var _3=_1.data,_4=_1.invalidateCache,_5=_1.httpResponseCode;if(!_3&&!_4
&&!(_5>=200&&_5<300)){this.logWarn("Empty results returned on '"+_2.operationType+"' on dataSource '"+_2.dataSource+"', unable to update resultSet(s) on DataSource "+this.ID+".  Return affected records to ensure cache consistency.");return}
if(!this.clientOnly&&this.cacheAllData&&this.hasAllData()&&!isc.isAn.Array(_3))
{this.invalidateCache()}
this.dataChanged(_1,_2)}
,isc.A.getLegalChildTags=function isc_DataSource_getLegalChildTags(){var _1=this.getFieldNames(),_2=[];for(var i=0;i<_1.length;i++){if(this.fieldIsComplexType(_1[i]))_2.add(_1[i])}
return _2}
,isc.A.getOperationBinding=function isc_DataSource_getOperationBinding(_1,_2){if(_1==null||this.operationBindings==null)return this;if(isc.isAn.Object(_1)){var _3=_1;_1=_3.operationType;_2=_3.operationId}
var _4;if(_2){var _5=this.operationBindings.find("operationId",_2);if(_5)return _5}
if(_1){var _5=this.operationBindings.find("operationType",_1);if(_5)return _5}
return this}
,isc.A.getDataFormat=function isc_DataSource_getDataFormat(_1,_2){return this.getOperationBinding(_1,_2).dataFormat||this.dataFormat}
,isc.A.shouldBypassCache=function isc_DataSource_shouldBypassCache(_1,_2){var _3=this.getOperationBinding(_1,_2).preventHTTPCaching;if(_3==null)_3=this.preventHTTPCaching;return _3}
,isc.A.copyRecord=function isc_DataSource_copyRecord(_1){if(_1==null)return null;var _2={},_3=this.getFieldNames(false);for(var i=0;i<_3.length;i++){var _5=_3.get(i),_6=_1[_5],_7=this.getField(_5);if(isc.isA.Date(_6)){var _8=new Date();_8.setTime(_6.getTime());_8.logicalDate=_6.logicalDate;_8.logicalTime=_6.logicalTime;_2[_5]=_8}else if(isc.isAn.Array(_6)&&_7.multiple==true&&_7.type==null)
{var _9=[];for(var j=0;j<_6.length;j++){if(isc.isA.Date(_6[j])){var _8=new Date();_8.setTime(_6[j].getTime());_8.logicalDate=_6[j].logicalDate;_8.logicalTime=_6[j].logicalTime;_9[j]=_8}else{_9[j]=_6[j]}
}
_2[_5]=_9}else{_2[_5]=_6}
}
return _2}
,isc.A.copyRecords=function isc_DataSource_copyRecords(_1){if(_1==null)return null;var _2=[];for(var i=0;i<_1.length;i++){var _4=_1[i],_5=this.copyRecord(_4);_2[i]=_5}
return _2}
,isc.A.transformRequest=function isc_DataSource_transformRequest(_1){return _1.data}
,isc.A.getUpdatedData=function isc_DataSource_getUpdatedData(_1,_2,_3){var _4=_2.data;if(_3&&_2.status==0&&(_4==null||(isc.isA.Array(_4)&&_4.length==0)||isc.isAn.emptyString(_4))
)
{this.logInfo("dsResponse for successful operation of type "+_1.operationType+" did not return updated record[s]. Using submitted request data to update ResultSet cache.","ResultSet");var _5=_1.data;if(_1.data&&isc.isAn.Object(_1.data)){if(_1.operationType=="update"){_4=isc.addProperties({},_1.oldValues);if(isc.isAn.Array(_5)){_4=isc.addProperties(_4,_5[0])}else{_4=isc.addProperties(_4,_5)}
_4=[_4]}else{if(!isc.isAn.Array(_5))_5=[_5];_4=[];for(var i=0;i<_5.length;i++){_4[i]=isc.addProperties({},_5[i])}
}
if(this.logIsDebugEnabled("ResultSet")){this.logDebug("Submitted data to be integrated into the cache:"
+this.echoAll(_4),"ResultSet")}
}
}
return _4}
,isc.A.serializeFields=function isc_DataSource_serializeFields(_1,_2){if(!_1&&_2!=null)_1=_2.data;if(!_1)return _1;if(isc.DS.isSimpleTypeValue(_1))return _1;if(isc.isAn.Array(_1)){var _3=[];for(var i=0;i<_1.length;i++){_3[i]=this.serializeFields(_1[i],_2)}
return _3}else if(this.isAdvancedCriteria(_1)){return this.serializeAdvancedCriteria(_1)}
_1=isc.addProperties({},_1);if(_1.__ref){delete _1.__ref;delete _1.__module}
var _5=this.getFields();for(var _6 in _5){if(!isc.isAn.Object(_1[_6]))continue;var _7=_5[_6],_8=_7.type,_9=_8!=null?isc.DataSource.get(_8):null;if(_9&&_9.serializeFields){_1[_6]=_9.serializeFields(_1[_6])}else if(isc.isA.Date(_1[_6])){if(isc.SimpleType.getBaseType(_7.type)=="date"&&!isc.SimpleType.inheritsFrom(_7.type,"datetime"))
{_1[_6].logicalDate=true}else if(isc.SimpleType.getBaseType(_7.type)=="time"){_1[_6].logicalTime=true}
}
}
return _1}
,isc.A.serializeAdvancedCriteria=function isc_DataSource_serializeAdvancedCriteria(_1){_1=isc.clone(_1);if(_1.criteria){for(var i=0;i<_1.criteria.length;i++){_1.criteria[i]=this.serializeAdvancedCriteria(_1.criteria[i])}
}else{if(isc.isA.Date(_1.value)||isc.isA.Date(_1.start)||isc.isA.Date(_1.end)){var _3=this.getField(_1.fieldName);if(_3!=null){if(isc.SimpleType.getBaseType(_3.type)=="date"&&!isc.SimpleType.inheritsFrom(_3.type,"datetime"))
{if(_1.value)_1.value.logicalDate=true;if(_1.start)_1.start.logicalDate=true;if(_1.end)_1.end.logicalDate=true}else if(isc.SimpleType.getBaseType(_3.type)=="time"){if(_1.value)_1.value.logicalTime=true;if(_1.start)_1.start.logicalTime=true;if(_1.end)_1.end.logicalTime=true}
}
}
}
return _1}
,isc.A.getDataProtocol=function isc_DataSource_getDataProtocol(_1){var _2=this.getOperationBinding(_1),_3=this.getWebService(_1);return(_2.dataProtocol!=null?_2.dataProtocol:isc.isA.WebService(_3)?"soap":this.dataProtocol||"getParams")}
,isc.A.$754=function isc_DataSource__storeCustomRequest(_1){if(!this.$624)this.$624={};this.$624[_1.requestId]=_1}
,isc.A.getServiceInputs=function isc_DataSource_getServiceInputs(_1){var _2=this.getOperationBinding(_1),_3=this.getWebService(_1),_4=this.getWSOperation(_1);this.addDefaultCriteria(_1,_2);_1.originalData=_1.data;this.$754(_1);this.applySendExtraFields(_1);if(!this.clientOnly){if(this.fulfilledFromOffline(_1))return{dataProtocol:"clientCustom"};_1.unconvertedDSRequest=isc.shallowClone(_1)}
if(this.autoConvertRelativeDates==true){if(this.logIsInfoEnabled("relativeDates")){this.logInfo("Calling convertRelativeDates from getServiceInputs - data is\n\n"+isc.echoFull(_6))}
var _5=this.convertRelativeDates(_1.data);if(this.logIsInfoEnabled("relativeDates")){this.logInfo("Called convertRelativeDates from getServiceInputs - data is\n\n"+isc.echoFull(_6))}
_1.data=_5}
var _6=this.transformRequest(_1);if(_6!==_1){_1.data=_6}
var _7=this.getDataProtocol(_1),_8=_7=="clientCustom";if(_8){return{dataProtocol:"clientCustom"}}else{delete this.$624[_1.requestId]}
if(isc.isA.WebService(_3)){if(_1.wsOperation==null&&isc.isAn.Object(_4)){_1.wsOperation=_4.name}
this.logInfo("web service: "+_3+", wsOperation: "+this.echoLeaf(_4),"xmlBinding")}
_1.$85o=isc.timestamp();var _9=this.getDataURL(_1);_9=_1.actionURL||_1.dataURL||_9;if(_1.useHttpProxy==null){_1.useHttpProxy=this.$du(_2.useHttpProxy,this.useHttpProxy)}
var _10,_11=_2.defaultParams||this.defaultParams,_12=_1.params;if(_11||_12){_10=isc.addProperties({},_11,_12)}
var _13=_7=="getParams"||_7=="postParams";if(_13){_10=isc.addProperties(_10||{},_1.data)}
if(_13){if(_10)_10=this.serializeFields(_10,_1);return{actionURL:_9,httpMethod:_1.httpMethod||(_7=="getParams"?"GET":"POST"),params:_10
}}
var _14={actionURL:_9,httpMethod:_1.httpMethod||"POST"
};if(_10)_14.params=_10;if(_7=="postMessage"){_14.data=(_1.data||"").toString()}
if(_7=="postXML"||_7=="soap"){var _15=this.getSerializeFlags(_1);var _16=_14.data=this.getXMLRequestBody(_1);_14.contentType=_1.contentType||"text/xml";this.logDebug("XML post requestBody is: "+_16,"xmlBinding")}
if(_7=="soap"){var _17=this.$du(_2.soapAction,_4.soapAction);if(_17==null)_17='""';_14.httpHeaders=isc.addProperties({SOAPAction:_17},_1.httpHeaders);var _18=isc.isA.WebService(_3)&&this.$du(_2.spoofResponses,this.spoofResponses);if(_18){_14.spoofedResponse=_3.getSampleResponse(_4.name);this.logInfo("Using spoofed response:\n"+_14.spoofedResponse,"xmlBinding")}
}
if(this.logIsDebugEnabled("xmlBinding")){this.logDebug("serviceInputs are: "+this.echo(_14),"xmlBinding")}
return _14}
,isc.A.addDefaultCriteria=function isc_DataSource_addDefaultCriteria(_1,_2){var _3=_2.defaultCriteria||this.defaultCriteria;if(!_3)return;_3=isc.addProperties({},_3);if(_3&&_1.operationType=="fetch"){if(this.isAdvancedCriteria(_1.data)){var _4=this.mineCriteriaFieldNames(_1.data);for(var _5 in _3){if(_4.contains(_5))delete _3[_5]}
}
if(isc.getValues(_3).length>0){_1.data=isc.DataSource.combineCriteria(_1.data,_3,"and",null)}
}
}
,isc.A.mineCriteriaFieldNames=function isc_DataSource_mineCriteriaFieldNames(_1){var _2=[];if(!_1.criteria)return _2;for(var i=0;i<_1.criteria.length;i++){if(_1.criteria[i].criteria){_2.addList(this.mineCriteriaFieldNames(_1.criteria[i]))}else{_2.add(_1.criteria[i].fieldName)}
}
return _2}
,isc.A.applySendExtraFields=function isc_DataSource_applySendExtraFields(_1){if(!this.sendExtraFields){var _2=_1.data;if(!isc.isAn.Array(_2))_2=[_2];for(var i=0;i<_2.length;i++){var _4=_2[i];if(!isc.isAn.Object(_4))continue;for(var _5 in _4){if(!this.getField(_5))delete _4[_5]}
}
}
}
,isc.A.processResponse=function isc_DataSource_processResponse(_1,_2){var _3=this.$624[_1];if(_3==null){this.logWarn("DataSource.processResponse(): Unable to find request corresponding to ID "
+_1+", taking no action.");return}
delete this.$624[_1];if(_2.status==null)_2.status=0;if(_2.status==0){var _4=_2.data;if(_4==null)_2.data=_4=[];if(_2.startRow==null)_2.startRow=_3.startRow||0;if(_2.endRow==null)_2.endRow=_2.startRow+_4.length;if(_2.totalRows==null){_2.totalRows=Math.max(_2.endRow,_4.length)}
}
this.$38b(_4,_2,_3)}
,isc.A.$50e=function isc_DataSource__handleClientOnlyReply(_1,_2,_3){var _4=this.cacheAllData&&!this.clientOnly&&this.cacheResultSet?this.cacheResultSet.getAllRows():null,_5=_3._dsRequest;var _6=function(_7){_1.clientOnlyData=_7?_7.data:null;this.$38b(_2,_7,_5,_1,_3)};if(this.copyLocalResults&&this.getClientOnlyResponse===isc.DataSource.getInstanceProperty("getClientOnlyResponse"))
{this.$110m(_5,_4,_6)}else{var _7=this.getClientOnlyResponse(_5,_4);_6.call(this,_7)}
}
,isc.A.$110m=function isc_DataSource__asyncGetClientOnlyResponse(_1,_2,_3){var _4=_1.operationType,_5={status:0
};if(!(_4=="fetch"||_4=="select"||_4=="filter")){_3.apply(this,[this.getClientOnlyResponse(_1,_2)]);return}
_2=_2||this.testData;var _6=this.cacheData,_7=this.testData,_8=false;if(_2&&!this.testData&&this.clientOnly){_6=_7=_2;_8=true}
if(!_2||isc.isA.String(_2)){if(isc.isA.String(_2)){this.logInfo(this.ID+" datasource: using testData property as data");_6=_7=isc.eval(_2);_8=true}else if(window[this.ID+"TestData"]){this.logInfo(this.ID+" datasource: using "+this.ID+"TestData object as data");_6=_7=window[this.ID+"TestData"];_8=true}else{this.logInfo(this.ID+" datasource: testData property and "+this.ID+"TestData object not found, using empty list as data");_6=_7=[];_8=true}
_2=_7}
var _9=_1.data;if(isc.isAn.Array(_9))_9=_9[0];var _10=this.applyFilter(_2,_9,_1),_11=_10;if(_1.startRow!=null){var _12=_1.startRow,_13=_1.endRow,_14=_10.length;var _15=isc.shallowClone(_1.sortBy);if(_15){if(!isc.isAn.Array(_15))_15=[_15];if(isc.isAn.Object(_15[0])){_15=isc.DS.getSortBy(_15)
}
var _16=[];for(var i=0;i<_15.length;i++){var _18=true;if(_15[i].startsWith("-")){_15[i]=_15[i].substring(1);_18=false}
_16[i]=_18}
_10.sortByProperties(_15,_16)}
_13=Math.min(_13,_14);_11=_10.slice(_12,_13);_5.startRow=_12;_5.endRow=_13;_5.totalRows=_14}
var _19=function(){_5.data=_11;this.$109x(_5,_4);if(_8){this.cacheData=this.testData=_2}
_3.call(this,_5)};if(this.copyLocalResults){this.$110n(0,_11.length,_11,_19)}else{_19.call(this)}
}
,isc.A.$110n=function isc_DataSource__asyncCopyLocalResults(_1,_2,_3,_4){var _5=_2;_2=Math.min(_2,_1+this.$110l);for(var i=_1;i<_2;++i){if(this.deepCopyLocalResults){_3[i]=isc.clone(_3[i])}else{_3[i]=isc.addProperties({},_3[i])}
}
if(_2==_5){_4.call(this)}else{this.delayCall("$110n",[_2,_5,_3,_4],0)}
}
,isc.A.$38a=function isc_DataSource__handleCustomReply(_1,_2,_3){var _4={data:_2,startRow:0,endRow:0,totalRows:0,status:0
};var _5=_3._dsRequest;this.$38b(_2,_4,_5,_1,_3)}
,isc.A.$377=function isc_DataSource__handleJSONReply(_1,_2,_3){var _4=_3._dsRequest,_5=this.getOperationBinding(_4).recordXPath||this.recordXPath;if((_1.$38c||_1.$69j)&&this.logIsDebugEnabled("xmlBinding")){this.logDebug("Raw response data: "+this.echoFull(_2),"xmlBinding")}
var _6=_2;if(_2){if(_5){_2=isc.xml.selectObjects(_2,_5);this.logInfo("JSON recordXPath: '"+_5+"', selected: "+this.echoLeaf(_2),"xmlBinding")}
_2=this.recordsFromObjects(_2);if(this.logIsDebugEnabled("xmlBinding")){this.logDebug("Validated dsResponse.data: "+isc.echoFull(_2),"xmlBinding")}
var _7={data:_2,startRow:_4.startRow||0,status:0
};_7.endRow=_7.startRow+Math.max(0,_2.length);_7.totalRows=Math.max(_7.endRow,_2.length)}else{var _8=_1.status;if(_8==0||_8==null)_8=-1;var _7={status:_8,data:_1.data
};_6=_1.results}
this.$38b(_6,_7,_4,_1,_3)}
,isc.A.$69k=function isc_DataSource__handleCSVTextReply(_1,_2,_3){if(_1.status!=0)return;var _4=isc.TextImportSettings.create({hasHeaderLine:true,trim:true
});isc.TextImportSettings.$935=true;var _5=this.recordsFromText(_1.data,_4);isc.TextImportSettings.$935=false;_1.$69j=true;this.$377(_1,_5,_3)}
,isc.A.$379=function(rpcResponse,jsonText,rpcRequest){if(rpcRequest.isRestRequest&&!isc.isA.String(jsonText)){var jsonObjects=jsonText}else{if(rpcResponse.status>=0){var evalText=jsonText;if(rpcRequest.transport!="scriptInclude"&&evalText!=null){var re;if(this.jsonPrefix){re=new RegExp(/^\s*/);evalText=evalText.replace(re,"");if(evalText.startsWith(this.jsonPrefix)){evalText=evalText.substring(this.jsonPrefix.length)}else{this.logInfo("DataSource specifies jsonPrefix, but not present in response returned from server. Processing response anyway.")}}
if(this.jsonSuffix){re=new RegExp(/\s*$/)
evalText=evalText.replace(re,"");if(evalText.endsWith(this.jsonSuffix)){evalText=evalText.substring(0,(evalText.length-this.jsonSuffix.length))}else{this.logInfo("DataSource specifies jsonSuffix, but not present in response returned from server. Processing response anyway.")}}}
var wasInvalid=false;try{var jsonObjects;if(rpcRequest.useStrictJSON){jsonObjects=isc.Class.parseStrictJSON(evalText,rpcRequest.jsonReviver)}else{if(evalText&&evalText.match(/^\s*\{/)){evalText="var evalText = "+evalText+";evalText;"}
jsonObjects=isc.eval(evalText)}}catch(e){rpcResponse.status=-1;rpcResponse.data="Error: server returned invalid JSON response";this.logWarn("Error evaluating JSON: "+e.toString()+", JSON text:\r"+jsonText);wasInvalid=true}
if(jsonObjects==null&&!wasInvalid){rpcResponse.status=-1;rpcResponse.data="Error: server returned invalid JSON response";this.logWarn("Evaluating JSON reply resulted in empty value. JSON text:\r"+this.echo(jsonText));jsonObjects=jsonText}
rpcResponse.$38c=true}}
this.$377(rpcResponse,jsonObjects,rpcRequest)},isc.A.recordsFromObjects=function isc_DataSource_recordsFromObjects(_1){if(!isc.isAn.Array(_1))_1=[_1];if(this.skipJSONValidation)return _1;for(var i=0;i<_1.length;i++){_1[i]=this.validateJSONRecord(_1[i])}
return _1},isc.A.validateJSONRecord=function isc_DataSource_validateJSONRecord(_1,_2){var _3=this.getFieldNames(),_4={};for(var i=0;i<_3.length;i++){var _6=_3[i],_7=this.getField(_6),_8;if(_7.valueXPath&&!_2){_8=isc.xml.selectObjects(_1,_7.valueXPath,true)}else{_8=_1[_6]}
if(_7.getFieldValue){if(!isc.isA.Function(_7.getFieldValue)){isc.Func.replaceWithMethod(_7,"getFieldValue","record,value,field,fieldName")}
_8=_7.getFieldValue(_1,_8,_7,_6)}
var _9;if(_8!==_9){var _10=isc.DS.get(_7.type);if(_10&&!(_10.skipJSONValidation)){if(!(isc.isAn.Array(_8))){_8=_10.validateJSONRecord(_8)}else{for(var j=0;j<_8.length;j++){_8[j]=_10.validateJSONRecord(_8[j])}}}
_4[_6]=this.validateFieldValue(_7,_8)}}
if(this.dropExtraFields)return _4;for(var i=0;i<_3.length;i++){var _6=_3[i];_1[_6]=_4[_6]}
return _1},isc.A.getMessageSerializer=function isc_DataSource_getMessageSerializer(_1,_2){var _3=this.getOperationBinding(_1,_2);if(_3.wsOperation){var _4=this.getWebService(_1,_2);return _4.getMessageSerializer(_3.wsOperation)}
return this},isc.A.getXMLRequestBody=function isc_DataSource_getXMLRequestBody(_1,_2){if(isc.$cv)arguments.$cw=this;var _3=isc.SB.create(),_4=this.getDataProtocol(_1);if(_4=="soap"){_3.append(this.getSoapStart(_1),"\r");_3.append(this.getSoapBody(_1,_2));_3.append("\r",this.getSoapEnd(_1))}else{if(this.messageStyle=="template"){_3.append(this.$38d(_1))}else{var _5=this.getMessageSerializer(_1);var _2=this.getSerializeFlags(_1,_2);_3.append(_5.xmlSerialize(_1.data,_2))}}
if(this.logIsDebugEnabled("xmlComm")){this.logDebug("outbound XML message: "+_3,"xmlComm")}
return _3.toString()},isc.A.$38d=function isc_DataSource__createTemplatedRequestBody(_1){var _2=isc.SB.create(),_3=this.soapBodyTemplate,_4;_4=_3.evalDynamicString(this,_1);return _4},isc.A.getSchemaSet=function isc_DataSource_getSchemaSet(){return isc.SchemaSet.get(this.schemaNamespace)},isc.A.hasWSDLService=function isc_DataSource_hasWSDLService(_1){return isc.isA.WebService(this.getWebService(_1))},isc.A.getWebService=function isc_DataSource_getWebService(_1){var _2=this.getOperationBinding(_1),_3=(_1?_1.serviceNamespace:null)||_2.serviceNamespace||this.serviceNamespace,_4=(_1?_1.serviceName:null)||_2.serviceName||this.serviceName;var _5;if(_4)_5=isc.WebService.getByName(_4,_3);else _5=isc.WebService.get(_3);if((_3!=null||_4!=null)&&_5==null){this.logWarn("Could not find WebService definition: "+(_4?"serviceName: "+_4:"")+(_3?"   serviceNamespace: "+_3:"")+this.getStackTrace())}
return _5||this},isc.A.getWSOperation=function isc_DataSource_getWSOperation(_1){var _2=this.getOperationBinding(_1),_3=(isc.isAn.Object(_1)?_1.wsOperation:null)||_2.wsOperation||this.wsOperation,_4=this.getWebService(_1);if(_3!=null&&isc.isA.WebService(_4)){var _5=_4.getOperation(_3);if(!_5){isc.logWarn("DataSource.getWSOperation() : could not retrieve the operation "+_3)}
return _5}
return this},isc.A.getDataURL=function isc_DataSource_getDataURL(_1){var _2=this.getOperationBinding(_1);if(_2!=this&&_2.dataURL)return _2.dataURL;if(this.dataURL!=null)return this.dataURL;if(this.hasWSDLService(_1)){var _3=this.getWebService(_1);return _3.getDataURL(this.getWSOperation(_1).name)}
return this.dataURL},isc.A.getGlobalNamespaces=function isc_DataSource_getGlobalNamespaces(_1){var _2=this.getWebService(_1),_3=this.globalNamespaces;if(_2&&_2.globalNamespaces){_3=isc.addProperties({},_3,_2.globalNamespaces)}
return _3},isc.A.getSoapStart=function isc_DataSource_getSoapStart(_1){var _2=this.getWebService(_1);if(_2.getSoapStart)return _2.getSoapStart(_1);return isc.SB.concat(isc.DataSource.$37t,isc.xml.$37l(this.getGlobalNamespaces(_1),null,"         "),">",isc.DataSource.$37u,this.getSoapHeader(_1),isc.DataSource.$51y)},isc.A.getSoapHeader=function isc_DataSource_getSoapHeader(_1){var _2=this.getWebService(_1);if(_2.getSoapHeader)return _2.getSoapHeader(_1);var _3=_1.headerData||_2.getHeaderData(_1);if(!_3)return;this.logDebug("headerData is: "+this.echo(_3),"xmlBinding");var _4=_2.getInputHeaderSchema(this.getWSOperation(_1))||isc.emptyObject;var _5="",_6=_1.useFlatHeaderFields;for(var _7 in _3){var _8=_4[_7];if(_8!=null){if(isc.isA.DataSource(_8)){_5+=_8.xmlSerialize(_3[_7],{useFlatFields:_6})}else{_5+="\r     "+this.$38g(_7,_8,_3[_7],_8.partNamespace)}}else{this.logWarn("headerData passed for SOAP header partName: "+_7+", no schema available, not outputting")}}
return _5},isc.A.getSoapBody=function isc_DataSource_getSoapBody(_1,_2){if(isc.$cv)arguments.$cw=this;var _3=isc.SB.create(),_4=this.getWebService(_1),_5=this.getSoapStyle(_1),_6=this.getWSOperation(_1),_7=this.xmlNamespaces?isc.makeReverseMap(this.xmlNamespaces):null,_2=isc.addProperties({nsPrefixes:isc.addProperties({},_7)},_2),_8=_2.generateResponse?_4.getResponseMessage(_6.name):_4.getRequestMessage(_6.name),_9=_2.bodyPartNames||_4.getBodyPartNames(_6.name,_2.generateResponse);_2=this.getSerializeFlags(_1,_2);isc.Comm.omitXSI=_6.inputEncoding!="encoded";var _10=isc.Comm.xmlSchemaMode;isc.Comm.xmlSchemaMode=true;var _11="        ";if(_5=="rpc"){_3.append("\n",_11,isc.Comm.$36u(_6.name,null,_6.inputNamespace,"opNS",true),">");_11+="    "}
this.logInfo("soap:body parts in use: '"+_9+"', soapStyle: "+_5,"xmlSerialize");if(this.logIsDebugEnabled("xmlSerialize")){this.logDebug("SOAP data is: "+this.echoFull(_1.data),"xmlSerialize")}
for(var i=0;i<_9.length;i++){var _13=_9[i];var _14=_9.length<2&&_5=="document"?_1.data:(_1.data?_1.data[_13]:null);var _15=_8.getMessagePart(_13,_14,_2,_11);_3.append("\r"+_11+_15)}
if(_5=="rpc"){_3.append("\n","        ",isc.Comm.$36v(_6.name,_6.inputNamespace,"opNS"))}
isc.Comm.omitXSI=null;isc.Comm.xmlSchemaMode=_10;return isc.SB.concat("    ",isc.DS.$37v,this.outputNSPrefixes(_2.nsPrefixes,"        "),">",_3.toString(),"\r    ",isc.DS.$51z)},isc.A.getMessagePart=function isc_DataSource_getMessagePart(_1,_2,_3,_4){if(isc.$cv)arguments.$cw=this;var _5=this.getPartField(_1),_6=this.getSchema(_5.type,_5.xsElementRef?"element":null),_7=this.logIsInfoEnabled("xmlSerialize");if(isc.isA.DataSource(_6)){if(_7){this.logInfo("soap:body part '"+_1+"' is complex type with schema: "+_6+" has value: "+(this.logIsDebugEnabled("xmlSerialize")?this.echo(_2):this.echoLeaf(_2)),"xmlSerialize")}
var _8=_5.xsElementRef?null:_1;return _6.xmlSerialize(_2,_3,_4,_8)}else{if(_2!=null&&!isc.DS.isSimpleTypeValue(_2)){_2=_2[_5.name]||_2[_1]||_2}
if(_7){this.logInfo("soap:body part '"+_1+"' is of simple type '"+_5.type+"' has value: '"+this.echoLeaf(_2)+"'","xmlSerialize")}
var _9=this.getType(_5.type),_10=_5.partNamespace;if(!_10&&_9&&_9.schemaNamespace){_10=_9.schemaNamespace}
return this.$38g(_5.name||_1,_5,_2,_10,_3)}},isc.A.getPartField=function isc_DataSource_getPartField(_1){var _2=isc.getValues(this.getFields()).find("partName",_1);if(_2!=null)return _2;return this.getField(_1)},isc.A.getSoapEnd=function isc_DataSource_getSoapEnd(_1){var _2=this.getWebService(_1);if(_2.getSoapEnd)return _2.getSoapEnd(_1);return isc.DataSource.$37w},isc.A.getSoapStyle=function isc_DataSource_getSoapStyle(_1){if(!this.hasWSDLService(_1))return"document";return this.getWebService(_1).getSoapStyle(this.getWSOperation(_1).name)});isc.evalBoundary;isc.B.push(isc.A.getSerializeFlags=function isc_DataSource_getSerializeFlags(_1,_2){_2=isc.addProperties({soapStyle:this.getSoapStyle(_1)},_2);var _3=this.getOperationBinding(_1);_2.flatData=this.$du(_1.useFlatFields,_3.useFlatFields,this.useFlatFields);_2.recursiveFlatFields=this.$du(_1.recursiveFlatFields,_3.recursiveFlatFields,this.recursiveFlatFields);_2.textContentProperty=this.$du(_1.textContentProperty,_3.textContentProperty);_2.dsRequest=_1;_2.startRowTag=_3.startRowTag||this.startRowTag;_2.endRowTag=_3.endRowTag||this.endRowTag;return _2},isc.A.xmlSerialize=function isc_DataSource_xmlSerialize(_1,_2,_3,_4){if(!_2)_2={};if(_2.useFlatFields)_2.flatData=true;var _5=this.getSchemaSet(),_6=(_2.qualifyAll==null);if(_5&&_5.qualifyAll){_2.qualifyAll=true}
var _7;if(_2.nsPrefixes==null){var _8=this.xmlNamespaces?isc.makeReverseMap(this.xmlNamespaces):null;_2.nsPrefixes=isc.addProperties({},_8);_7=true}
var _9=isc.Comm.xmlSchemaMode;isc.Comm.xmlSchemaMode=true;var _10,_11=null;if(_2.xmlExplicitType){_10=true;_11=isc.Comm.omitXSI;isc.Comm.omitXSI=false}else{if(isc.Comm.omitXSI==null){_10=isc.Comm.omitXSI=true}}
var _12=this.$ew(_1,_2,_3,_4,_7);if(_6)_2.qualifyAll=null;isc.Comm.xmlSchemaMode=_9;if(_10)isc.Comm.omitXSI=_11
return _12},isc.A.$ew=function isc_DataSource__xmlSerialize(_1,_2,_3,_4,_5){if(isc.$cv)arguments.$cw=this;if(this.logIsDebugEnabled("xmlSerialize")){this.logDebug("schema: "+this+" serializing: "+this.echo(_1)+" with flags: "+this.echo(_2),"xmlSerialize")}
var _6=this.mustQualify||_2.qualifyAll,_4=_4||this.tagName||this.ID;if(!_2.ignoreConstructor){var _7;if(_1!=null&&(_1._constructor||isc.isAn.Instance(_1))){var _7=isc.isAn.Instance(_1)?_1.Class:_1._constructor}}
if(isc.DS.isSimpleTypeValue(_1)){if(isc.isA.String(_1)&&isc.startsWith(_1,"ref:")){return"<"+_4+" ref=\""+_1.substring(4)+"\"/>"}
this.logDebug("simple type value: "+this.echoLeaf(_1)+" passed to xmlSerialize on "+this,"xmlSerialize");return isc.Comm.$ew(_4||this.tagName||this.ID,_1)}
if(isc.isAn.Instance(_1))_1=_1.getSerializeableFields();if(isc.isAn.Array(_1)&&!this.canBeArrayValued)return this.map("xmlSerialize",_1,_2,_3).join("\n");var _8=isc.SB.create(),_3=_3||"";_8.append("\r",_3);var _9;if(_6){_9=(this.isA("XSComplexType")?_2.parentSchemaNamespace:null)||this.schemaNamespace}
var _10;if(_2.xmlExplicitType)_10=null;else _10=this.ID;_8.append(isc.Comm.$36u(_4,_10,_9,_2.nsPrefixes,true));_1=this.serializeAttributes(_1,_8,_2);if(_7&&_4!=_7){if(isc[_7]!=null){_8.append(" constructor=\"",_7,"\"")}else{_8.append(" _constructor=\"",_7,"\"")}}
var _11;if(_1!=null){_11=this.xmlSerializeFields(_1,_2,_3+(!_2||_2.indent!=false?"    ":""))}
if(_5){_8.append(this.outputNSPrefixes(_2.nsPrefixes,_3+(!_2||_2.indent!=false?"     ":""),_2))}
var _12=this.$45z;this.$45z=null;if(_11==null||isc.isAn.emptyString(_11)){_8.append("/>");return _8.toString()}
_8.append(">",_11,(_12?"":"\r"+_3));_8.append(isc.Comm.$36v(_4,_9,_2.nsPrefixes));return _8.toString()},isc.A.outputNSPrefixes=function isc_DataSource_outputNSPrefixes(_1,_2,_3){delete _1.$36y;_1=isc.makeReverseMap(_1);var _4=isc.xml.$37l(_1,null,_2+(!_3||_3.indent!=false?"        ":""));return _4},isc.A.serializeAttributes=function isc_DataSource_serializeAttributes(_1,_2,_3){var _4=this.getFieldNames(),_5=true;for(var i=0;i<_4.length;i++){var _7=_4[i],_8=this.getField(_7);if(_8.xmlAttribute&&((_1&&_1[_7]!=null)||_8.xmlRequired)){if(_5){_1=isc.addProperties({},_1);_5=false}
var _9=_1[_7];if(_3&&_3.spoofData)_9=this.getSpoofedData(_8);if(isc.isAn.Instance(_9)){if(_9.ID){_9=_9.ID}else{this.logWarn("Serializing attribute "+_7+" failed to replace object instance with ID")}}
_2.append(" ",_7,"=\"",this.$38f(_8,_9),"\"");delete _1[_7]}}
return _1},isc.A.xmlSerializeFields=function isc_DataSource_xmlSerializeFields(_1,_2,_3){var _4=isc.SB.create(),_2=_2||isc.emptyObject,_5=_2.flatData,_6=_2.spoofData,_3=_3||"";var _1=isc.addProperties({},_1);if(_1.__ref){delete _1.__ref;delete _1.__module}
var _7=this.getFields();for(var _8 in _7){var _9=this.getField(_8),_10=_1[_8],_11=this.fieldIsComplexType(_8);var _12=_1[_8];if(_2.startRowTag==_9.name&&_12==null){_12=_2.dsRequest?_2.dsRequest.startRow:null}else if(_2.endRowTag==_9.name&&_12==null){_12=_2.dsRequest?_2.dsRequest.endRow:null}else if(_11&&_5&&_12==null){_12=_1}
var _13=(_9.xmlRequired&&!_9.xmlAttribute)||(_1[_8]!=null||(_6&&!_9.xmlAttribute));if(_5&&_11){var _14=this.getSchema(_9.type),_15=isc.clone(_2.nsPrefixes),_16=_14.xmlSerializeFields(_12,_2);if(_16!=null&&!isc.isAn.emptyString(_16)){_13=true}
_2.nsPrefixes=_15}
if(_13){if(_5&&_11&&_1[_8]!=null&&!isc.DS.isSimpleTypeValue(_1[_8])&&!_2.recursiveFlatFields)
{_2=isc.addProperties({},_2);_2.flatData=false}
_4.append(this.xmlSerializeField(_8,_12,_2,_3))}
if(!_5&&_1[_8]!=null)delete _1[_8]}
if(!_5&&!isc.isA.Schema(this)){for(var _8 in _1){_4.append(this.xmlSerializeField(_8,_1[_8],_2,_3))}}
return _4.toString()},isc.A.xmlSerializeField=function isc_DataSource_xmlSerializeField(_1,_2,_3,_4){var _5=isc.SB.create(),_6=this.getField(_1);if(_6==null&&(_1.startsWith("_")||_1.startsWith("$")))return;var _7=(_6?_6.type:null),_8=_3&&_3.flatData,_9=_3&&_3.spoofData,_4=_4||"";if(_9)_2=this.getSpoofedData(_6);if(this.logIsDebugEnabled("xmlSerialize")){this.logDebug("serializing fieldName: "+_1+" with type: "+_7+" with value: "+this.echo(_2),"xmlSerialize")}
var _10=((_6&&_6.mustQualify)||_3.qualifyAll?this.getSchemaSet().schemaNamespace:null);var _11=_3.textContentProperty||this.textContentProperty,_12=this.getTextContentField();if(_1==_11&&(_12!=null||!this.hasXMLElementFields(_11)))
{this.$45z=true;return this.$38f(_12,_2)}
if(_7==this.$41v&&_2!=null){if(_2.iscAction){_2=_2.iscAction}else if(isc.isA.StringMethod(_2)){_2=_2.value}}
var _13=!_3.xmlExplicitType||this.shouldWriteSchemaType(_6)?this.$38h(_6?_6.type:null,_2):null;var _14=isc.Comm.$36u(_1,_13,_10,_3.nsPrefixes),_15=isc.Comm.$36v(_1,_10,_3.nsPrefixes);var _16=isc.isAn.Array(_2)?_2:[_2];if(!_6&&_3.schema&&_3.schema.getField){_6=_3.schema.getField(_1)}
if(this.fieldIsComplexType(_1)){var _17=_3.parentSchemaNamespace;_3.parentSchemaNamespace=this.schemaNamespace;var _18=this.getFieldDataSource(_6,_6&&_6.xsElementRef?"element":null);if(_6.multiple){_5.append("\r",_4,_14);for(var i=0;i<_16.length;i++){_5.append(_18.xmlSerialize(_16[i],_3,_4+(!_3||_3.indent!=false?"    ":""),_16[i]==null?_6.childTagName:_16[i].$97p||_6.childTagName))}
_5.append("\r",_4,_15)}else if(_18.canBeArrayValued&&isc.isAn.Array(_2)){_5.append(_18.xmlSerialize(_2,_3,_4,_1))}else{for(var i=0;i<_16.length;i++){var _2=_16[i];if(_2==null){_5.append("\r",_4)
_5.append(_14,_15)}else if(isc.DS.isSimpleTypeValue(_2)){if(isc.isA.String(_2)&&isc.startsWith(_2,"ref:")){_5.append("\r",_4)
_5.append(_14);var _20=(_6?_6.childTagName||_6.type:"value");_5.append("<",_20," ref=\"",_2.substring(4),"\"/>");_5.append(_15)}else{this.logWarn("simple type value "+this.echoLeaf(_2)+" passed to complex field '"+_6.name+"'","xmlSerialize");_5.append("\r",_4)
_5.append(isc.Comm.xmlSerialize(_1,_2))}}else{_5.append(_18.xmlSerialize(_2,_3,_4,_1))}}}
_3.parentSchemaNamespace=_17}else if(_6!=null){if(_6.xsElementRef){var _21=this.getType(_6.type);if(_21&&_21.schemaNamespace)
{_10=_21.schemaNamespace}}
if(_6.multiple){_5.append("\r",_4,_14,"\r");for(var i=0;i<_16.length;i++){_5.append(this.$38g(_6.childTagName,_6,_16[i],_10,_3),"\r",_4)}
_5.append("\r",_4,_15,"\r")}else{for(var i=0;i<_16.length;i++){_5.append("\r",_4,this.$38g(_1,_6,_16[i],_10,_3))}}}else{for(var i=0;i<_16.length;i++){if(_16[i]==null||isc.isAn.emptyObject(_16[i])){_5.append("\r",_4,_14,_15)}else{_5.append("\r",_4,isc.Comm.$ew(_1,_16[i],_4,{isRoot:false}))}}}
return _5.toString()},isc.A.shouldWriteSchemaType=function isc_DataSource_shouldWriteSchemaType(_1){if(!_1)return true;if(_1.serializeXMLType!=null)return _1.serializeXMLType;else{return(_1.type==null||_1.type=="any")}},isc.A.$38g=function isc_DataSource__serializeSimpleTypeTag(_1,_2,_3,_4,_5){var _6=_2.type,_5=_5||{};if(isc.isAn.Object(_3)&&!isc.isA.Function(_3.$ew)){return isc.Comm.xmlSerialize(_1||null,_3)}else{var _6=!_5.xmlExplicitType||this.shouldWriteSchemaType(_2)?this.$38h(_6,_3):null;if(_3==null&&_2.nillable){var _7=_1||"value";return isc.Comm.$36u(_7,null,_4,_5.nsPrefixes,true)+" xsi:nil=\"true\"/>"}
if(isc.isA.Date(_3)){_3=_3.toSchemaDate(_2.type,!!this.trimMilliseconds)}else if(_3!=null&&_3.$ew){return _3.$ew(_1,_6,_4)}else{_3=isc.makeXMLSafe(_3)}
return isc.Comm.$ex(_1||"value",_3,_6,_4,_5.nsPrefixes)}},isc.A.$38f=function isc_DataSource__serializeSimpleTypeValue(_1,_2){if(isc.isA.Date(_2)){return _2.toSchemaDate(_1?_1.type:null)}else{return isc.makeXMLSafe(_2)}},isc.A.$38h=function isc_DataSource__getXMLSchemaType(_1,_2){if(_2!=null&&(_1==null||_1=="any")){if(_2==null)return null;if(isc.isA.Date(_2)){return _2.logicalDate?"date":(_2.logicalTime?"time":"datetime")}else if(isc.isA.Number(_2)){if(parseInt(_2)==_2){return"float"}else{return"integer"}}else if(isc.isA.Boolean(_2)){return"boolean"}else if(isc.isA.String(_2)){return"text"}}
switch(_1){case"integer":return"int";case"number":return"long";default:return _1}},isc.A.xmlSerializeSample=function isc_DataSource_xmlSerializeSample(){return this.xmlSerialize({},{spoofData:true})},isc.A.getSpoofedData=function isc_DataSource_getSpoofedData(_1){if(!_1)return"textValue";if(this.getSchema(_1.type)!=null)return{};if(_1.multiple){_1={type:_1.type};return[this.getSpoofedData(_1),this.getSpoofedData(_1)]}
if(_1.valueMap){var _2=!isc.isAn.Array(_1.valueMap)?isc.getKeys(_1.valueMap):_1.valueMap;return _2[Math.round(Math.random()*(_2.length-1))]}
var _3=isc.SimpleType.getBaseType(_1.type);switch(_3){case"boolean":return(Math.random()>0.5);case"integer":case"int":case"number":var _4=0,_5=10;if(_1.validators){var _6=_1.validators.find("type","integerRange")||_1.validators.find("_constructor","integerRange");if(_6){this.logWarn(_1.name+" has "+_6.type+" validator  with min "+_6.min+" and max "+_6.max);_4=_6.min||0;_5=_6.max||Math.min(_4,10);if(_4>_5)_4=_5}}
return Math.round(_4+(Math.random()*(_5-_4)));case"float":case"decimal":case"double":var _4=0,_5=10,_7=2;if(_1.validators){var _6=_1.validators.find("type","floatRange")||_1.validators.find("_constructor","floatRange");if(_6){this.logWarn(_1.name+" has "+_6.type+" validator  with min "+_6.min+" and max "+_6.max);_4=_6.min||0;_5=_6.max||Math.min(_4,10);if(_4>_5)_4=_5}
var _8=_1.validators.find("type","floatPrecision")||_1.validators.find("_constructor","floatPrecision");if(_8){_7=_8.precision||2}}
return(_4+(Math.random()*(_5-_4))).toFixed(_7);case"date":case"time":case"datetime":var _9=new Date();if(_1.validators){var _6=_1.validators.find("type","dateRange")||_1.validators.find("_constructor","dateRange");if(_6){this.logWarn(_1.name+" has "+_6.type+" validator  with min "+_6.min+" and max "+_6.max);if(_6.min)_9=_6.min;else if(_6.max)_9=_6.max}}
return _9;default:return"textValue"}},isc.A.getSerializeableFields=function isc_DataSource_getSerializeableFields(_1,_2){var _3=this.Super("getSerializeableFields",arguments);var _4=_3.fields;_4=isc.getValues(_4);for(var i=0;i<_4.length;i++){var _6=_4[i]=isc.addProperties({},_4[i]);var _7=_6.validators;if(_7){_6.validators=_7.findAll("_generated",null);if(_6.validators==null)delete _6.validators}}
_3.fields=_4;return _3},isc.A.$378=function isc_DataSource__handleXMLReply(_1,_2,_3,_4){var _5=_1,_6=_4._dsRequest,_7=this.getOperationBinding(_6),_8;if(_3.status<0){var _9=_2||_3.data;this.$38b(_9,{status:_3.status,data:_9},_6,_3,_4);return}
if(_5){if(_7.wsOperation){var _10=this.getWebService(_6),_8=_10.getOutputNamespaces(_7.wsOperation);_5.addNamespaces(_8)}
_5.addNamespaces(this.xmlNamespaces);_5.addNamespaces(_7.xmlNamespaces)}
var _11=isc.addProperties({},_8,this.xmlNamespaces,_7.xmlNamespaces);this.dsResponseFromXML(_5,_6,_11,{target:this,methodName:"$57b",xmlData:_5,dsRequest:_6,rpcRequest:_4,rpcResponse:_3})},isc.A.$57b=function isc_DataSource__completeHandleXMLReply(_1,_2){this.$38b(_2.xmlData,_1,_2.dsRequest,_2.rpcResponse,_2.rpcRequest)},isc.A.dsResponseFromXML=function isc_DataSource_dsResponseFromXML(_1,_2,_3,_4){if(_1){this.selectRecords(_1,_2,{target:this,methodName:"$57c",dsRequest:_2,callback:_4,xmlData:_1,xmlNamespaces:_3})}else{this.$57c([],_2,_3,_4)}},isc.A.$57c=function isc_DataSource__completeDSResponseFromXML(_1,_2,_3,_4){if(!_4&&_2.callback)_4=_2.callback;if(_2.xmlNamespaces)_3=_2.xmlNamespaces;if(_2.dsRequest)_2=_2.dsRequest;if(_3==null)_3=this.xmlNamespaces;var _5={data:_1,startRow:_2.startRow||0,status:0};_5.endRow=_5.startRow+Math.max(0,_1.length);_5.totalRows=Math.max(_5.endRow,_1.length);var _6=_4.xmlData;if(_6){if(this.totalRowsXPath){_5.totalRows=isc.xml.selectNumber(_6,this.totalRowsXPath,_3,true)}
if(this.startRowXPath){_5.startRow=isc.xml.selectNumber(_6,this.startRowXPath,_3,true);_5.endRow=_5.startRow+Math.max(0,_1.length)}
if(this.endRowXPath){_5.endRow=isc.xml.selectNumber(_6,this.endRowXPath,_3,true);if(!this.startRowXPath){_5.startRow=_5.endRow-Math.max(0,_1.length)}}
if(this.statusXPath){_5.status=parseInt(isc.xml.selectScalar(_6,this.statusXPath,_3,true))}
if(this.errorSchema){_5.errors=this.errorSchema.selectRecords(_6,_2)}}
if(_4)this.fireCallback(_4,"dsResponse",[_5,_4])
return _5},isc.A.selectRecords=function isc_DataSource_selectRecords(_1,_2,_3){var _4=this.selectRecordElements(_1,_2);var _5=this.getOperationBinding(_2),_6=this.getSchema(_5.responseDataSchema)||this;return _6.recordsFromXML(_4,_3)},isc.A.recordsFromXML=function isc_DataSource_recordsFromXML(_1,_2){if(_1&&!isc.isAn.Array(_1)){if(_1.length!=null)_1=isc.xml.$37m(_1);else _1=[_1]}
if(_1&&this.transformResponseToJS){if(_1.length>this.resultBatchSize){var _3={startingRow:0,callback:_2,elements:_1};return this.$57d(_3)}
var _4=this.dropExtraFields?this.getFieldNames():null;_1=isc.xml.toJS(_1,_4,this);if(this.logIsDebugEnabled("xmlBinding")){this.logDebug("transformed response: "+this.echoFull(_1)+"xmlBinding")}}
if(_2){this.fireCallback(_2,"records",[_1,_2])}
return _1},isc.A.$57d=function isc_DataSource__asyncRecordsFromXML(_1){var _2=_1.elements,_3=_1.startingRow,_4=_1.callback,_5=Math.min(_2.length,_3+this.resultBatchSize),_6=this.dropExtraFields?this.getFieldNames():null;if(!_1.$57e){_1.$57e=isc.xml.toJS(_2.slice(_3,_5+1),_6,this)}else{var _7=isc.xml.toJS(_2.slice(_3,_5+1),_6,this);_1.$57e.addList(_7)}
if(_5<_2.length){_1.startingRow=_5+1;this.delayCall("$57d",[_1])}else if(_4){this.fireCallback(_4,"records",[_1.$57e,_4])}},isc.A.selectRecordElements=function isc_DataSource_selectRecordElements(_1,_2){if(isc.isA.String(_1))_1=isc.xml.parseXML(_1);var _3=this.getOperationBinding(_2);var _4=_3==this?null:_3.recordXPath,_5=_3==this?null:_3.recordName,_6=this.recordXPath,_7=this.recordName;if(_4==null&&(_5!=null||(_6==null&&_7!=null))&&this.hasWSDLService(_2))
{var _8=this.getWebService(_2);return _8.selectByType(_1,_3.wsOperation||this.wsOperation,_5||_7)}
var _9=_4||_6,_10;if(_9){_10=isc.xml.selectNodes(_1,_9,this.xmlNamespaces);this.logDebug("applying XPath: "+_9+(this.xmlNamespaces?" with namespaces: "+this.echo(this.xmlNamespaces):"")+" got "+(_10?_10.length:null)+" elements","xmlBinding")}else{_10=[];var _11=_5||_7||this.ID;var _12=_1.getElementsByTagName(_11);for(var i=0;i<_12.length;i++)_10.add(_12[i]);this.logDebug("getting elements of tag name: "+_11+" got "+_10.length+" elements","xmlBinding")}
return _10},isc.A.$38b=function isc_DataSource__completeResponseProcessing(_1,_2,_3,_4,_5){if(!_2){_2={status:_4.status,httpResponseCode:_4.httpResponseCode}}
if(_4!=null&&_5!=null){_2.httpResponseCode=_4.httpResponseCode;_2.httpResponseText=_4.httpResponseText;_2.transactionNum=_4.transactionNum;_2.clientContext=_5.clientContext;_2.internalClientContext=_5.internalClientContext;_2.httpHeaders=_4.httpHeaders}else{_2.clientContext=_3.clientContext;_2.internalClientContext=_3.internalClientContext}
if(this.logIsInfoEnabled("xmlBinding")){this.logInfo("dsResponse is: "+this.echo(_2),"xmlBinding")}
_2.context=_5;var _6=this.transformResponse(_2,_3,_1);_2=_6||_2;_2.startRow=this.$52v(_2.startRow,0);var _7=_2.endRow;if(_7==null){if(_2.status<0)_7=0;else if(isc.isAn.Array(_2.data))_7=_2.data.length;else _7=1}
_2.endRow=this.$52v(_7);_2.totalRows=this.$52v(_2.totalRows,_2.endRow);if(!this.cacheAllData&&this.autoCacheAllData&&_3.downloadResult!=true&&_2.operationType=="fetch"&&(_3.data==null||isc.isAn.emptyObject(_3.data))&&_2.startRow==0&&_2.endRow==_2.totalRows)
{if(this.logIsInfoEnabled("cacheAllData")){this.logInfo("Response: switching on cacheAllData","cacheAllData")}
this.cacheAllData=true;this.$85n=isc.timestamp()}
if(this.useOfflineStorage&&_2.status==0&&!this.clientOnly){isc.DataSource.cacheResponse(_3,_2);if(isc.Offline&&!_2.fromOfflineCache){if(_3.unconvertedDSRequest){isc.Offline.storeResponse(_3.unconvertedDSRequest,_2)}else{isc.Offline.storeResponse(_3,_2)}}}
if(_3&&_3.resultSet){if(_2.status==isc.RPCResponse.STATUS_OFFLINE){_3.resultSet.$78c=true}else{_3.resultSet.$78c=false}}else if(_3&&_3.resultTree){if(_2.status==isc.RPCResponse.STATUS_OFFLINE){_3.resultTree.$78c=true}else{_3.resultTree.$78c=false}}
this.fireResponseCallbacks(_2,_3,_4,_5);if(_2.relatedUpdates!=null){for(var i=0;i<_2.relatedUpdates.length;i++){if(_2.relatedUpdates[i].operationType==null){_2.relatedUpdates[i].operationType=_2.operationType}
isc.DS.get(_2.relatedUpdates[i].dataSource).updateCaches(_2.relatedUpdates[i],null)}}},isc.A.fireResponseCallbacks=function isc_DataSource_fireResponseCallbacks(_1,_2,_3,_4){if(!_1.clientContext)_1.clientContext={};if(_1.status>=0){isc.DataSource.handleUpdate(_1,_2)}else if(!_2.willHandleError){isc.RPCManager.$a0(_1,_2)}
var _5=[_2.$376,_2.afterFlowCallback],_6=[];for(var i=0;i<_5.length;i++){var _8=_5[i];if(_6.contains(_8)){this.logWarn("Suppressed duplicate callback: "+_8);continue}
var _9=this.fireCallback(_8,"dsResponse,data,dsRequest",[_1,_1.data,_2]);if(_4&&_4.willHandleError&&_9===false){this.logDebug("performOperationReply: Further processing cancelled by callback");break}
if(_3){var _10=isc.RPCManager.getTransaction(_3.transactionNum);if(_10&&_10.suspended)return}}},isc.A.$52v=function isc_DataSource__parseNumber(_1,_2){if(_1==null)return _2;if(!isc.isA.String(_1))return _1;var _3=parseInt(_1);if(isNaN(_3))return _2!=null?_2:_1;else return _3},isc.A.transformResponse=function isc_DataSource_transformResponse(_1,_2,_3){return _1},isc.A.getFieldValue=function isc_DataSource_getFieldValue(_1,_2,_3){var _4=isc.xml.getFieldValue(_1,_2,_3,this,this.xmlNamespaces);if(!_3.getFieldValue)return _4;if(!isc.isA.Function(_3.getFieldValue)){isc.Func.replaceWithMethod(_3,"getFieldValue","record,value,field,fieldName")}
return _3.getFieldValue(_1,_4,_3,_2)},isc.A.validateFieldValue=function isc_DataSource_validateFieldValue(_1,_2){if(!isc.Validator)return _2;var _3=_1.validators;if(!_3)return _2;if(!isc.isAn.Array(_3)){this.$2j[0]=_3;_3=this.$2j}
var _4=_2;for(var i=0;i<_3.length;i++){var _6=_3[i];var _7=isc.Validator.processValidator(_1,_6,_2,null,null);if(!_7){this.logWarn(this.ID+"."+_1.name+": value: "+this.echoLeaf(_2)+" failed on validator: "+this.echo(_6));return _2}
var _8;if(_6.resultingValue!==_8){_2=_6.resultingValue;_6.resultingValue=_8}
if(!_7&&_6.stopIfFalse)break}
this.$2j.length=0;return _2},isc.A.getCriteriaFields=function isc_DataSource_getCriteriaFields(_1){return isc.DS.getCriteriaFields(_1,this)},isc.A.$74s=function isc_DataSource__getAdvancedCriteriaFields(_1,_2){return isc.DS.$74s(_1,_2)},isc.A.fetchRecord=function isc_DataSource_fetchRecord(_1,_2,_3){var _4={},_5=this.getPrimaryKeyField();if(_5==null){this.logWarn("This datasource has no primary key field. Ignoring fetchRecord call");return}
var _6=_5.name;var _7;if(isc.isAn.Object(_1)&&_1[_6]!==_7){_4=_1}else{_4[_6]=_1}
return this.fetchData(_4,_2,_3)},isc.A.fetchData=function isc_DataSource_fetchData(_1,_2,_3){this.performDSOperation("fetch",_1,_2,_3)},isc.A.filterData=function isc_DataSource_filterData(_1,_2,_3){if(!_3)_3={};if(_3.textMatchStyle==null)_3.textMatchStyle="substring";this.performDSOperation("fetch",_1,_2,_3)},isc.A.exportClientData=function isc_DataSource_exportClientData(_1,_2,_3){if(_2.operationId){if(!this.operationBindings){this.logWarn("exportClientData() was passed operationId '"+_2.operationId+"', but this DataSource has no operationBindings.  Delegating to the static exportClientData() method");delete _2.operationId}
var _4,_5;for(var i=0;i<this.operationBindings.length;i++){if(this.operationBindings[i].operationId==_2.operationId&&this.operationBindings[i].operationType=="clientExport")
{_4=this.operationBindings[i]}}
if(_4===_5){this.logWarn("exportClientData() was passed operationId '"+_2.operationId+"', but this DataSource has no operationBinding of type 'clientExport' with that name.  Delegating to the static exportClientData() method");delete _2.operationId}}
return isc.DataSource.exportClientData(_1,_2,_3,this)},isc.A.exportData=function isc_DataSource_exportData(_1,_2,_3,_4){if(!_2)_2={};if(this.canExport==false){isc.logWarn("Exporting is disabled for this DataSource.  Set DataSource.canExport to true to enable it.");return}
if(_2.exportAs&&_2.exportAs.toLowerCase()=="json"&&_2.exportToClient!==false)
{isc.logWarn("Export in JSON format with download to client is not allowed from a client call - either specify exportToClient: false, or set operationBinding.exportAs on your DataSource instead.  The server will reject this attempt.")}
if(_2.textMatchStyle==null)_2.textMatchStyle="substring";var _5={};_5.exportResults=true;_5.exportAs=_2.exportAs||"csv";_5.exportDelimiter=_2.exportDelimiter||",";_5.exportTitleSeparatorChar=_2.exportTitleSeparatorChar||"";_5.exportFilename=_2.exportFilename||"Results."+(_5.exportAs=="ooxml"?"xlsx":_5.exportAs);_2.exportFilename=_5.exportFilename;_5.exportPath=_2.exportPath;_5.exportDisplay=_2.exportDisplay||"download";_5.lineBreakStyle=_2.lineBreakStyle||"default";_5.exportFields=this.getExportableDSFields(_2.exportFields||this.getVisibleDSFields(),_4);_5.exportHeader=_2.exportHeader;_5.exportHeaderless=_2.exportHeaderless;_5.exportFooter=_2.exportFooter;_5.exportFieldTitles=_2.exportFieldTitles;_5.exportDatesAsFormattedString=_2.exportDatesAsFormattedString;_5.exportRawValues=_2.exportRawValues;_5.exportCurrencySymbol=isc.NumberUtil.currencySymbol;if(!_5.exportFieldTitles){var _6=_5.exportFields;var _7={};for(var i=0;i<_6.length;i++){var _9=_6[i];var _10;if(isc.isA.String(_9)){_10=_9;_9=this.getField(_10)}
if(_9){if(_9.hidden)continue;_7[_9.name]=_9.exportTitle||_9.title}else{_7[_10]=_10}}
_5.exportFieldTitles=_7}
_5.exportHeaderSpans=_2.exportHeaderSpans;_5.exportOtherFields=_2.exportOtherFields;if(_2.exportHeaderHeight!=null){_5.exportHeaderHeight=_2.exportHeaderHeight}
if(_2.exportFieldPixelWidths!=null){_5.exportFieldPixelWidths=_2.exportFieldPixelWidths;_5.exportWidthScale=_2.exportWidthScale}
_5.exportWrapHeaderTitles=_2.exportWrapHeaderTitles;if(_2.exportAlignments!=null){_5.exportAlignments=_2.exportAlignments}
_2.downloadResult=(_2.exportToClient!==false);_2.downloadToNewWindow=_2.exportDisplay=="window"?true:false;if(_2.downloadToNewWindow){if(_5.exportFilename.endsWith(".xml")&&_5.exportAs!="xml"){_5.exportFilename=_5.exportFilename+".txt"}
_2.download_filename=_2.exportFilename;_1=_1||{};_1.download_filename=_2.download_filename}
_2.showPrompt=false;_2.parameters=_5;this.performDSOperation("fetch",_1,_3,_2)},isc.A.getVisibleDSFields=function isc_DataSource_getVisibleDSFields(){var _1=[];var _2=this.fields;if(!isc.isAn.Array(_2)){_2=[];for(var _3 in this.fields){_2.add(this.fields[_3])}}
for(var i=0;i<_2.length;i++){var _5=_2.get(i);if(!_5.hidden)_1.add(_5.name)}
return _1},isc.A.getExportableDSFields=function isc_DataSource_getExportableDSFields(_1,_2){var _3=[];if(this.canExport){for(var i=0;i<_1.length;i++){var _5=this.getField(_1[i]);if(!_5&&_2&&_2.getField){_5=_2.getField(_1[i]);if(_5&&_5.includeFrom&&_5.canExport!=false){_3.add(_1[i])}
continue}
if(_5&&_5.canExport!=false)
_3.add(_5.name)}}
return _3},isc.A.getClientOnlyDataSource=function isc_DataSource_getClientOnlyDataSource(_1,_2,_3,_4){var _5=_1,_6=_2,_7=this;if(this.cacheAllData&&this.hasAllData()){var _8=isc.DataSource.create({inheritsFrom:_7,clientOnly:true,useParentFieldOrder:true,testData:this.cacheResultSet.getAllRows()},_4);_7.fireCallback(_6,"dataSource",[_8]);return _8}else{this.fetchData(_5,function(_10,_11){var _9=_10.totalRows;_7.fetchData(_5,function(_10,_11){var _8=isc.DataSource.create({inheritsFrom:_7,clientOnly:true,useParentFieldOrder:true,testData:_11},_4);_7.fireCallback(_6,"dataSource",[_8])},isc.addProperties({},_3,{startRow:0,endRow:_9}))},isc.addProperties({},_3,{startRow:0,endRow:0}))}});isc.evalBoundary;isc.B.push(isc.A.addData=function isc_DataSource_addData(_1,_2,_3){if(isc.Offline&&isc.Offline.isOffline()&&this.contactsServer()){isc.logWarn("Data cannot be saved because you are not online");return}
this.performDSOperation("add",_1,_2,_3)},isc.A.updateData=function isc_DataSource_updateData(_1,_2,_3){if(isc.Offline&&isc.Offline.isOffline()&&this.contactsServer()){isc.logWarn("Data cannot be saved because you are not online");return}
this.performDSOperation("update",_1,_2,_3)},isc.A.removeData=function isc_DataSource_removeData(_1,_2,_3){if(isc.Offline&&isc.Offline.isOffline()&&this.contactsServer()){isc.logWarn("Data cannot be saved because you are not online");return}
var _4=this.getPrimaryKeyFields(),_1=isc.applyMask(_1,_4);this.performDSOperation("remove",_1,_2,_3)},isc.A.contactsServer=function isc_DataSource_contactsServer(){return!this.clientOnly&&this.dataProtocol!="clientCustom"},isc.A.validateData=function isc_DataSource_validateData(_1,_2,_3){if(!_3)_3={};_3=isc.addProperties(_3,{willHandleError:true});if(_3.validationMode==null)_3.validationMode="full";return this.performDSOperation("validate",_1,_2,_3)},isc.A.performCustomOperation=function isc_DataSource_performCustomOperation(_1,_2,_3,_4){if(!_4)_4={};isc.addProperties(_4,{operationId:_1});this.performDSOperation("custom",_2,_3,_4)},isc.A.performClientExportOperation=function isc_DataSource_performClientExportOperation(_1,_2,_3,_4){if(!_4)_4={};isc.addProperties(_4,{operationId:_1});this.performDSOperation("clientExport",_2,_3,_4)},isc.A.$625=function isc_DataSource__getNextRequestId(){if(!this.$626)this.$626=[this.getID(),"$627"];this.$626[2]=isc.DataSource.$625();return this.$626.join(isc.emptyString)},isc.A.shouldUseStrictJSON=function isc_DataSource_shouldUseStrictJSON(_1){if(_1&&_1.useStrictJSON!=null)return _1.useStrictJSON;if(this.useStrictJSON!=null)return this.useStrictJSON;if(isc.Browser.isIE&&isc.Browser.version>=9&&isc.RPCManager.useJSONParse_IE9&&this.dataFormat=="iscServer")
{return true}
return null},isc.A.shouldFallbackToEval=function isc_DataSource_shouldFallbackToEval(_1){if(_1==null)_1={};if(_1.fallbackToEval!=null)return _1.fallbackToEval;if(_1.useStrictJSON||this.useStrictJSON)return false;return(isc.Browser.isIE&&isc.Browser.version>=9&&isc.RPCManager.useJSONParse_IE9&&this.dataFormat=="iscServer")},isc.A.performDSOperation=function isc_DataSource_performDSOperation(_1,_2,_3,_4){if(isc.$cv)arguments.$cw=this;var _5=isc.addProperties({operationType:_1,dataSource:this.ID,data:_2,callback:_3,requestId:this.$625(),useStrictJSON:this.shouldUseStrictJSON(_4),fallbackToEval:this.shouldFallbackToEval(_4),textMatchStyle:this.defaultTextMatchStyle},_4);isc.DataSource.recordTimingData(_5,"UI event to DSRequest creation","start",isc.EH.$117e);isc.DataSource.recordTimingData(_5,"UI event to DSRequest creation","end");isc.DataSource.recordTimingData(_5,"performDSOperation","start");_5.lastClientEventThreadCode=isc.EH.$lc;var _6=isc.EH.getLastEvent();if(_5.sortBy!=null){if(!isc.isAn.Array(_5.sortBy))_5.sortBy=[_5.sortBy];if(isc.isAn.Object(_5.sortBy[0])){_5.sortBy=isc.DS.getSortBy(_5.sortBy)}
for(var i=0;i<_5.sortBy.length;i++){var _8=_5.sortBy[i];if(!isc.isA.String(_8))continue;var _9=this.getField(_8.charAt(0)=="-"?_8.substring(1):_8);if(_9&&_9.canSortClientOnly)_5.sortBy[i]=null}
_5.sortBy.removeEmpty();if(_5.sortBy.length==0)delete _5.sortBy}
if(this.sendParentNode==false)_5.parentNode=null;return this.sendDSRequest(_5)},isc.A.translatePatternOperatorInAdvancedCriteria=function isc_DataSource_translatePatternOperatorInAdvancedCriteria(_1){if(!this.isAdvancedCriteria(_1)){return _1}
var _2,_3;if(_1.criteria){if(isc.isA.Array(_1.criteria)){for(_2 in _1.criteria){_3=_1.criteria[_2];_1.criteria[_2]=this.translatePatternOperatorInAdvancedCriteria(_3)}}else{_1.criteria=this.translatePatternOperatorInAdvancedCriteria(_1.criteria)}}else{_3=_1;if(_3.operator==="matchesPattern"||_3.operator==="iMatchesPattern"||_3.operator==="containsPattern"||_3.operator==="iContainsPattern")
{var _4=(_3.operator.indexOf('i')===0);var _5=(isc.isA.Array(this.patternMultiWildcard)?this.patternMultiWildcard[0]:this.patternMultiWildcard.substring(0,1));var _6=_3.fieldName;var _7=_3.value;if(isc.isA.Array(this.patternMultiWildcard)){for(var _2=1;_2<this.patternMultiWildcard.length;_2++){_7=_7.replaceAll(this.patternMultiWildcard[_2],_5)}}
var _8=_7.split(_5);var _9;var _10;if(_8.length===1){if(_3.operator==="matchesPattern"||_3.operator==="iMatchesPattern"){_10={fieldName:_6,value:_8[0],operator:_4?"iEquals":"equals"}}else{_10={fieldName:_6,value:_8[0],operator:_4?"iContains":"contains"}}}else if(_8.length>1){_10={_constructor:"AdvancedCriteria",operator:"and",criteria:[]};for(var _11=0;_11<_8.length;_11++){var _12=_8[_11];if(!_12||_12.length==0){continue}
_9={fieldName:_6,value:_12};var _13=_11>0,_14=_8.length-1>_11;if(_13&&_14||(_3.operator==="containsPattern"||_3.operator==="iContainsPattern")){_9.operator=_4?"iContains":"contains"}else if(_13){_9.operator=_4?"iEndsWith":"endsWith"}else if(_14){_9.operator=_4?"iStartsWith":"startsWith"}
_10.criteria.add(_9)}}
_1=_10}}
return _1},isc.A.sendDSRequest=function isc_DataSource_sendDSRequest(_1){isc.addDefaults(_1,this.getOperationBinding(_1.operationType).requestProperties);isc.addDefaults(_1,this.requestProperties);var _2=this.getDataFormat(_1);var _3=this.getDataProtocol(_1);if(_2=="iscServer"&&!(this.clientOnly||_3=="clientCustom")&&!isc.hasOptionalModule("SCServer"))
{if(this.dataURL==null&&this.testFileName==null){this.logError("DataSource: "+this.ID+": attempt to use DataSource of type iscServer without SmartClient Server option. Please either set clientOnly: true for one-time fetch against dataURL/testFileName or upgrade to SmartClient Pro, Power or Enterprise");return}
this.logInfo("Switching to clientOnly - no SmartClient Server installed.");this.clientOnly=true}
if(_1.bypassCache==null){_1.bypassCache=this.shouldBypassCache(_1)}
if(_1.showPrompt==null){_1.showPrompt=_1.downloadResult?false:this.showPrompt}
if(!this.cacheAllData&&this.autoCacheAllData&&_1.downloadResult!=true&&_1.operationType=="fetch"&&_1.startRow==null&&_1.endRow==null&&(_1.data==null||isc.isAn.emptyObject(_1.data)))
{if(this.logIsInfoEnabled("cacheAllData")){this.logInfo("sendDSRequest: switching on cacheAllData","cacheAllData")}
this.cacheAllData=true;this.$85n=isc.timestamp()}
if(_1.operationType=="fetch"&&this.fetchingClientOnlyData(_1))return;if(this.logIsDebugEnabled()){this.logDebug("Outbound DSRequest: "+this.echo(_1))}
_1.$376=_1.callback;var _4=_1.operationType;if((_4=="update"||_4=="add")&&(this.sparseUpdates||this.noNullUpdates))
{isc.DataSource.recordTimingData(_1,"Sparse updates processing","start");_1.data=this.$708(_1.data,this);this.$79c(_1.data,_1.oldValues,_4,this);isc.DataSource.recordTimingData(_1,"Sparse updates processing","end")}
if(_2=="iscServer"){this.$754(_1);_1.unconvertedDSRequest=isc.shallowClone(_1);_1.jsonReviver=isc.DataSource.iscServer_strictJSONReviver;if(this.autoConvertRelativeDates==true){if(this.logIsInfoEnabled("relativeDates")){this.logInfo("Calling convertRelativeDates from sendDSRequest - data is\n\n"+isc.echoFull(_5))}
var _5=this.convertRelativeDates(_1.data);if(this.logIsInfoEnabled("relativeDates")){this.logInfo("Called convertRelativeDates from sendDSRequest - data is\n\n"+isc.echoFull(_5))}
_1.data=_5}
if(this.translatePatternOperators===true&&this.isAdvancedCriteria(_1.data)){_1.data=this.translatePatternOperatorInAdvancedCriteria(_1.data)}
var _6=this.transformRequest(_1);if(_6!==_1){_5=_1.data=_6}
if(_3=="clientCustom")return;if(_1.shouldUseCache===false||(_1.shouldUseCache!==true)&&!this.clientOnly&&(!this.cacheAllData||_1.downloadResult||_1.cachingAllData||(_1.operationType!=null&&_1.operationType!="fetch")||(_1.operationType=="fetch"&&this.cacheAllOperationId&&this.cacheAcrossOperationIds==false&&_1.operationId!=this.cacheAllOperationId)))
{if(this.logIsInfoEnabled("cacheAllData")&&_1.cachingAllData){this.logInfo("sendDSRequest: processing cacheAllData request","cacheAllData")}
this.addDefaultCriteria(_1,this.getOperationBinding(_1));this.applySendExtraFields(_1);var _7=this.getOperationBinding(_1);if(_7==null)_7={};var _8=_7.defaultParams||this.defaultParams;if(_8){_1.data=isc.addProperties({},_8,_1.data)}
_5=_1.data;return this.performSCServerOperation(_1,_5)}}
var _9=this.getServiceInputs(_1);var _10=_1.shouldUseCache===true||(this.cacheAllData&&_1.operationType=="fetch"&&!_1.cachingAllData&&!_1.downloadResult&&!(this.cacheAllOperationId&&this.cacheAcrossOperationIds==false&&_1.operationId!=this.cacheAllOperationId));if(_9.dataProtocol=="clientCustom"&&!_10)return;var _11=isc.addProperties({},_1,_9);_11._dsRequest=_1;if(_9.data==null)_11.data=null;if(this.clientOnly||_10){_11.clientOnly=true;_11.callback={target:this,methodName:"$50e"};isc.RPC.sendRequest(_11);return}
var _12=this.getOperationBinding(_1);_11.transport=_12.dataTransport||this.dataTransport;if(_11.transport=="scriptInclude"){_11.callback={target:this,methodName:"$377"};if(!_11.callbackParam){_11.callbackParam=_12.callbackParam||this.callbackParam}
isc.rpc.sendRequest(_11);return}
var _2=this.getDataFormat(_1);if(_2=="xml"){var _13=_11.spoofedResponse;if(!_13){_11.callback={target:this,method:this.$378};isc.xml.getXMLResponse(_11)}else{var _14=this;isc.Timer.setTimeout(function(){_14.$378(isc.xml.parseXML(_13),_13,{status:0,httpResponseCode:200,data:_13},_11)})}}else if(_2=="json"){_11.callback={target:this,method:this.$379};isc.rpc.sendProxied(_11)}else if(_2=="csv"){_11.callback={target:this,method:this.$69k};isc.rpc.sendProxied(_11)}else{_11.serverOutputAsString=true;_11.callback={target:this,method:this.$38a};isc.rpc.sendProxied(_11)}},isc.A.$79c=function isc_DataSource__applySparseAndNoNullUpdates(_1,_2,_3,_4){var _5=_4||this;if(!_5.noNullUpdates){if(!_5.sparseUpdates)return;if(_2==null)return}
var _6={__ref:true,__module:true};for(var _7 in _1){if(isc.isA.Function(_1[_7]))continue;if(_6[_7]==true)continue;if(isc.isAn.Instance(_1[_7])||isc.isA.Class(_1[_7]))continue;var _8=_1[_7];if(_5.noNullUpdates&&_8===null){if(_3=="add"&&_5.omitNullDefaultsOnAdd==true){delete _1[_7]}else{var _9=_5.getField(_7),_10;if(_9&&_9.nullReplacementValue!==_10){_1[_7]=_9.nullReplacementValue}else{var _11=isc.SimpleType.getBaseType(_9.type,_5);if(_11=="integer"){_1[_7]=_5.nullIntegerValue}else if(_11=="float"){_1[_7]=_5.nullFloatValue}else if(_11=="date"||_11=="time"){_1[_7]=_5.nullDateValue}else if(_11=="boolean"){_1[_7]=_5.nullBooleanValue}else{_1[_7]=_5.nullStringValue}}}}else if(_5.sparseUpdates&&_3=="update"){if(_2==null)continue;var _12=_2[_7];if(_12==null&&!(_8==null))continue;if(_5!=null){var _9=_5.getField(_7);if(_9&&_9.primaryKey)continue}
if(isc.isA.Date(_8)&&Date.compareDates(_8,_12)==0){delete _1[_7]}else if(isc.isAn.Array(_8)){for(var i=0;i<_8.length;i++){this.$79c(_8[i],_12[i],_3,_9==null?null:isc.DataSource.get(_9.type));var _14=0;for(var _15 in _8[i])_14++;if(_14==0)delete _8[i]}
var _16=false;for(var i=0;i<_8.length;i++){if(_8[i]!=null){_16=true;break}}
if(!_16)delete _1[_7]}else if(isc.isAn.Object(_8)){this.$79c(_8,_12,_3,_9==null?null:isc.DataSource.get(_9.type));var _14=0;for(var _15 in _8)_14++;if(_14==0)delete _1[_7]}else if(_8==_12){delete _1[_7]}}}},isc.A.$708=function isc_DataSource__cloneValues(_1,_2,_3){if(_1==null)return;var _4=_2?_2.deepCloneOnEdit:this.deepCloneOnEdit,_5=_4==null?isc.DataSource.deepCloneOnEdit:_4;if(isc.isAn.Array(_1)){var _6=[];for(var i=0;i<_1.length;i++){var _8=_1[i];if(isc.isA.Function(_8))continue;if(isc.isAn.Instance(_1[_10])||isc.isA.Class(_1[_10]))continue;if(_8==null||isc.isA.String(_8)||isc.isA.Boolean(_8)||isc.isA.Number(_8))
{_6[_6.length]=_8}else if(isc.isA.Date(_8)){_6[_6.length]=new Date(_8.getTime())}else if(isc.isAn.Object(_8)){_6[_6.length]=this.$708(_8,_2,_3)}}
return _6}
var _6={};if(_1.$42c!=null){_1=isc.JSONEncoder.$42b(_1)}
var _9={__ref:true,__module:true};if(isc.DataSource.cloneValuesSafely){if(!_3)_3=[];if(_3.contains(_1)){_6=_1;return}
_3.add(_1)}
for(var _10 in _1){if(isc.isA.Function(_1[_10]))continue;if(_9[_10]==true)continue;if(isc.isAn.Instance(_1[_10])||isc.isA.Class(_1[_10]))continue;var _11=_1[_10];if(isc.isA.Date(_11)){_6[_10]=_11.duplicate()}else if(isc.isAn.Object(_11)){var _12=_2?_2.getField(_10):null;if(!_12){_6[_10]=_1[_10]}else{if(_12.deepCloneOnEdit==true||(_12.deepCloneOnEdit==null&&_5))
{if(isc.DataSource.cloneValuesSafely){if(_3.contains(_11)){_6[_10]=_1[_10];continue}
_3.add(_11)}
_6[_10]=this.$708(_11,isc.DataSource.get(_12.type))}else{_6[_10]=_1[_10]}}}else{_6[_10]=_1[_10]}}
return _6},isc.A.fulfilledFromOffline=function isc_DataSource_fulfilledFromOffline(_1){var _2=_1.unconvertedDSRequest?_1.unconvertedDSRequest:_1;if(this.useOfflineStorage&&isc.Offline){var _3=_1.dataSource+"."+_1.operationType;if(isc.Offline.isOffline()){var _4=isc.Offline.getResponse(_2);this.logInfo("currently offline, for request: "+_3+" found cached response: "+this.echoLeaf(_4),"offline");if(this.useOfflineResponse&&!this.useOfflineResponse(_2,_4)){this.logInfo("User-written useOfflineResponse() method returned false; not using cached response","offline");_4=null}
this.processOfflineResponse(_1,_4);return true}else if(_2.useOfflineCache||_2.useOfflineCacheOnly){var _4=isc.Offline.getResponse(_2);if(_4!=null){this.logInfo("request: "+_3+", returning cached offline response","offline");if(this.useOfflineResponse&&!this.useOfflineResponse(_2,_4)){this.logInfo("User-written useOfflineResponse() method returned false; not using cached response","offline");_4=null}
this.processOfflineResponse(_1,_4);return true}else if(_1.useOfflineCacheOnly){this.logInfo("request: "+_3+": useOfflineCacheOnly: no response available","offline");this.processOfflineResponse(_1);return true}
this.logInfo("request: "+_3+", no cached response, proceeding with network request","offline")}}
return false},isc.A.processOfflineResponse=function isc_DataSource_processOfflineResponse(_1,_2){if(!_2){_2={status:isc.RPCResponse.STATUS_OFFLINE,data:isc.DataSource.offlineMessage}}
_2.clientContext=_1.clientContext;_2.internalClientContext=_1.internalClientContext;_2.isCachedResponse=true;this.fireResponseCallbacks(_2,_1)},isc.A.performSCServerOperation=function isc_DataSource_performSCServerOperation(_1,_2){this.logWarn("Attempt to perform iscServer request requires options SmartClient server support - not present in this build.\nRequest details:"+this.echo(_1));return},isc.A.getSchema=function isc_DataSource_getSchema(_1,_2){var _3=this.getSchemaSet();if(_3!=null){var _4=_3.getSchema(_1,_2);if(_4!=null)return _4}
var _5=this.getWebService();if(isc.isA.WebService(_5))return _5.getSchema(_1,_2);return isc.DS.get(_1,null,null,_2)},isc.A.getTitle=function isc_DataSource_getTitle(){return this.title||this.getAutoTitle(this.ID)},isc.A.getPluralTitle=function isc_DataSource_getPluralTitle(){return this.pluralTitle||(this.getTitle()+"s")},isc.A.getTitleField=function isc_DataSource_getTitleField(){if(this.titleField==null){var _1=isc.getKeys(this.getFields());var _2=_1.map("toLowerCase");for(var i=0;i<this.defaultTitleFieldNames.length;i++){var _4=_2.indexOf(this.defaultTitleFieldNames[i]);if(_4!=-1&&!this.getField(_1[_4]).hidden){this.titleField=_1[_4];break}}
if(this.titleField==null){for(var i=0;i<_1.length;i++){if(this.getField(_1[i]).hidden)continue;this.titleField=_1[i];break}
if(this.titleField==null)this.titleField=_1[0]}}
return this.titleField},isc.A.getIconField=function isc_DataSource_getIconField(){var _1;if(this.iconField===_1){this.iconField=null;var _2=isc.getKeys(this.getFields());var _3=["picture","thumbnail","icon","image","img"];for(var i=0;i<_3.length;i++){var _5=_3[i],_6=this.getField(_5);if(_6&&isc.SimpleType.inheritsFrom(_6.type,"image")){this.iconField=_5}}}
return this.iconField},isc.A.initViewSources=function isc_DataSource_initViewSources(){var _1=this.fields={};for(var _2 in this.sources){var _3=isc.DS.get(_2);if(!_3)continue;var _4=this.sources[_2].fields;for(var _5 in _4){var _6=_4[_5],_7=null;if(_6=="*"){_7=_3.fields[_5]}else if(isc.isA.String(_6)){_7=_3.fields[_6]}else if(isc.isAn.Object(_6)){_7=isc.addProperties({},_3.fields[_3.fields[_6.field]]);isc.addProperties(_7,_6)}
if(_7)_1[_5]=_7}}},isc.A.inheritsSchema=function isc_DataSource_inheritsSchema(_1){if(_1==null)return false;if(isc.isA.String(_1))_1=this.getSchema(_1);if(_1==this||_1==isc.DS.get("Object"))return true;if(!this.hasSuperDS())return false;return this.superDS().inheritsSchema(_1)},isc.A.getInheritedProperty=function isc_DataSource_getInheritedProperty(_1){if(this[_1])return this[_1];var _2=this.superDS();return _2?_2.getInheritedProperty(_1):null},isc.A.hasSuperDS=function isc_DataSource_hasSuperDS(){if(this.inheritsFrom)return true;return false},isc.A.superDS=function isc_DataSource_superDS(){if(this.hasSuperDS())return this.getSchema(this.inheritsFrom);return null},isc.A.getField=function isc_DataSource_getField(_1,_2){if(isc.isAn.Object(_1))_1=_1.name;var _3=this.getFields();var _4=_3?_3[_1]:null;if(_4==null&&_2&&_3!=null){for(var i in _3){if(_3[i]==null)continue;if(_3[i].dataPath==_1){_4=_3[i];break}}}
return _4},isc.A.getFieldForDataPath=function isc_DataSource_getFieldForDataPath(_1){if(isc.isAn.Object(_1))_1=_1.dataPath;if(!_1)return null;var _2=_1.trim(isc.Canvas.$70l).split(isc.Canvas.$70l);var _3=this;for(var i=0;i<_2.length;i++){if(_3==null)return null;var _5=_3.getField(_2[i]);if(!_5)return null;_3=isc.DataSource.get(_5.type)}
return _5},isc.A.getDataSourceForDataPath=function isc_DataSource_getDataSourceForDataPath(_1,_2){if(isc.isAn.Object(_1))_1=_1.dataPath;if(!_1)return null;var _3=_1.trim(isc.Canvas.$70l).split(isc.Canvas.$70l);var _4=this;var _5=_2?_3.length:_3.length-1;for(var i=0;i<_5;i++){var _7=_4.getField(_3[i]);if(!_7){this.logInfo("getDataSourceForDataPath() - unable to find nested field:"+_3[i]+" from dataSource:"+_4+". Orginal dataPath:"+_1,"dataBinding");return null}
var _8=_4;_4=isc.DataSource.get(_7.type);if(_4==null){this.logInfo("getDataSourceForDataPath() - unable to find nested dataSource for field:"+_7.name+" of type:"+_7.type+" on dataSource:"+_8+". Original dataPath:"+_1,"dataBinding");break}}
return _4},isc.A.getFieldByTitle=function isc_DataSource_getFieldByTitle(_1){var _2=isc.getValues(this.getFields());for(var i=0;i<_2.length;i++){var _4=_2[i],_5=_4.title||isc.DS.getAutoTitle(_2[i].name);if(_5==_1)return _4}
return null},isc.A.getDisplayValue=function isc_DataSource_getDisplayValue(_1,_2){var _3=this.getField(_1);if(_3==null)return _2;if(isc.isAn.Object(_3.valueMap)&&!isc.isAn.Array(_3.valueMap)&&isc.propertyDefined(_3.valueMap,_2))
{return _3.valueMap[_2]}
return _2},isc.A.getFieldNames=function isc_DataSource_getFieldNames(_1){if(isc.$cv)arguments.$cw=this;if(!_1)return isc.getKeys(this.getFields());var _2=this.getFields(),_3=[],_4=0;for(var _5 in _2){if(_2[_5]!=null&&!_2[_5].hidden){_3[_4++]=_5}}
return _3},isc.A.getLocalFields=function isc_DataSource_getLocalFields(_1){if(this.$38k)return this.fields;if(_1)return this.fields;this.$38l();this.$63p();this.$38k=true;return this.fields},isc.A.getFields=function isc_DataSource_getFields(){if(isc.$cv)arguments.$cw=this;if(this.mergedFields)return this.mergedFields;if(!this.hasSuperDS()||this==this.superDS()){return this.mergedFields=this.getLocalFields()}
if(!this.superDS()){this.logWarn("DataSource "+this.ID+" inheritsFrom "+this.inheritsFrom+", but there is no DataSource of that name currently loaded. Ignoring the inheritsFrom declaration.");return this.mergedFields=this.getLocalFields()}
var _1=this.superDS();if(this.showLocalFieldsOnly||this.restrictToLocalFields){this.useParentFieldOrder=false}
var _2=isc.addProperties({},this.getLocalFields()),_3;if(!this.useParentFieldOrder){_3=_2}else{_3={}}
var _4=(this.restrictToLocalFields?isc.getKeys(this.getLocalFields()):_1.getFieldNames());for(var i=0;i<_4.length;i++){var _6=_4[i],_7=_2[_6];if(_7!=null){var _8=_1.getField(_6);if(_8.hidden&&_7.hidden==null&&!_7.inapplicable&&!this.autoDeriveSchema&&!this.schemaBean)
{_7.hidden=false}
if(_8.visibility!=null&&_7.visibility==null&&!_7.inapplicable&&!_7.hidden&&_8.visibility=="internal")
{_7.visibility="external"}
var _9=isc.addProperties({},_7);_3[_6]=_1.combineFieldData(_7,null,true);if(_9.$76s)_3[_6].title=_8.title}else{if(this.showLocalFieldsOnly){_3[_6]=isc.addProperties({},_1.getField(_6));_3[_6].hidden="true"}else{_3[_6]=_1.getField(_6)}}
if(this.useParentFieldOrder)delete _2[_6]}
if(this.useParentFieldOrder)isc.addProperties(_3,_2);if(this.restrictToLocalFields&&isc.Schema&&isc.isA.Schema(this)){var _10=_1.getFieldNames();for(var i=0;i<_10.length;i++){var _6=_10[i],_11=_1.getField(_6);if(_11.xmlAttribute){_3[_6]=_3[_6]||_11}}}
return this.mergedFields=_3},isc.A.hasFields=function isc_DataSource_hasFields(){if(this.fields)return true;else if(this.inheritsFrom){var _1=this;while(_1.inheritsFrom){_1=isc.DataSource.get(this.inheritsFrom);if(_1.fields)return true}}
return false},isc.A.getFlattenedFields=function isc_DataSource_getFlattenedFields(_1,_2,_3){_1=_1||{};var _4=this.getFieldNames();for(var i=0;i<_4.length;i++){var _6=_4[i],_7=this.getField(_6);if(!this.fieldIsComplexType(_6)){if(_1[_6]==null){_7.sourceDS=this.ID;if(_2){_7=isc.addProperties({},_7);_7[_3]=_2+"/"+_6}
_1[_6]=_7}}else{var _8=this.getFieldDataSource(_7);if(_2!=null)_2=(_2?_2+"/":"")+_6;_8.getFlattenedFields(_1,_2,_3)}}
return _1},isc.A.fieldIsComplexType=function isc_DataSource_fieldIsComplexType(_1){var _2=this.getField(_1);if(_2==null)return false;return(_2.type!=null&&!_2.xmlAttribute&&this.getSchema(_2.type)!=null)||this.fieldIsAnonDataSource(_2)},isc.A.fieldIsAnonDataSource=function isc_DataSource_fieldIsAnonDataSource(_1){if(!_1.fields)return false;var _2=isc.isAn.Array(_1.fields)?_1.fields:isc.getValues(_1.fields);return _2.length>0&&isc.isAn.Object(_2.get(0))},isc.A.getFieldDataSource=function isc_DataSource_getFieldDataSource(_1,_2){if(!_1)return null;if(this.fieldIsAnonDataSource(_1)){if(!_1.$67z){var _3=isc.DataSource.create({"class":"DataSource",fields:_1.fields});_1.$67z=_3}
return _1.$67z}
return _1.type!=null?this.getSchema(_1.type,_2):null},isc.A.findTagOfType=function isc_DataSource_findTagOfType(_1,_2,_3){var _4=this.getFieldNames();for(var i=0;i<_4.length;i++){var _6=_4[i],_7=this.getField(_6);if(_7.type==_1)return[this,_6,_2,_3];if(this.fieldIsComplexType(_6)){var _8=this.getFieldDataSource(_7),_9=_8.findTagOfType(_1,this,_6);if(_9)return _9}}},isc.A.getTextContentField=function isc_DataSource_getTextContentField(){return this.getField(this.textContentProperty)},isc.A.hasXMLElementFields=function isc_DataSource_hasXMLElementFields(_1){_1=_1||this.textContentProperty;var _2=this.getFieldNames();for(var i=0;i<_2.length;i++){if(_2[i]==_1)continue;if(this.getField(_2[i]).xmlAttribute)continue;return true}
return false},isc.A.getGroups=function isc_DataSource_getGroups(){var _1=this;while(_1.groups==null&&_1.hasSuperDS())_1=_1.superDS();return _1.groups},isc.A.getObjectField=function isc_DataSource_getObjectField(_1,_2,_3){if(!_1)return null;var _4=this.getLocalFields(),_5=isc.getKeys(_4).reverse();var _6=isc.DataSource.getNearestSchema(_1),_7=isc.DataSource.getNearestSchemaClass(_6);if(_3==null)_3={};var _8=-1,_9=null;for(var i=0;i<_5.length;i++){var _11=_5[i],_12=_4[_11],_13;if(isc.endsWith(_11,this.$dr)||isc.endsWith(_11,this.$dq))continue;if(!_2&&(_3[_11]||_12.advanced||_12.inapplicable||_12.hidden||(_12.visibility!=null&&_12.visibility=="internal")))
{_3[_11]=_11;continue}
if(!_7&&_12.type==_1)return _11;if(_7&&_7.isA(_12.type)){_13=isc.DS.getInheritanceDistance(_12.type,_1);if(_9==null||_13<_8){_9=_11;_8=_13}}}
if(_9!=null){if(_8==0||!this.hasSuperDS()){return _9}else{var _14=this.superDS().getObjectField(_1,_2,_3);if(_14){var _15=this.getField(_14).type,_16=isc.DS.getInheritanceDistance(_15,_1)}
return(_14&&(_16<_8))?_14:_9}}else if(this.hasSuperDS()){return this.superDS().getObjectField(_1,_2,_3)}
return null},isc.A.getLocalPrimaryKeyFields=function isc_DataSource_getLocalPrimaryKeyFields(){if(!this.primaryKeys){this.primaryKeys={};var _1=this.getFields();for(var _2 in _1){var _3=_1[_2];if(_3.primaryKey){this.primaryKeys[_2]=_3}}}
return this.primaryKeys},isc.A.filterPrimaryKeyFields=function isc_DataSource_filterPrimaryKeyFields(_1){var _2=this.getPrimaryKeyFields();return isc.applyMask(_1,isc.getKeys(_2))},isc.A.filterDSFields=function isc_DataSource_filterDSFields(_1){var _2=this.getFields();return isc.applyMask(_1,isc.getKeys(_2))},isc.A.recordHasAllKeys=function isc_DataSource_recordHasAllKeys(_1){var _2=this.getPrimaryKeyFields();for(var _3 in _2){if(_1[_3]==null)return false}
return true});isc.evalBoundary;isc.B.push(isc.A.getForeignKeysByRelation=function isc_DataSource_getForeignKeysByRelation(_1,_2){var _3=this.getForeignKeyFields(_2);if(!_3)return{};var _4={};for(var _5 in _3){var _6=_3[_5];var _7=isc.DataSource.getForeignFieldName(_6);var _8=_1[_7];if(_8||_8===0)_4[_5]=_8}
return _4},isc.A.getPrimaryKeyFields=function isc_DataSource_getPrimaryKeyFields(){if(!this.mergedPrimaryKeys){this.mergedPrimaryKeys={};if(this.hasSuperDS()){isc.addProperties(this.mergedPrimaryKeys,this.superDS().getPrimaryKeyFields())}
isc.addProperties(this.mergedPrimaryKeys,this.getLocalPrimaryKeyFields())}
return this.mergedPrimaryKeys},isc.A.getForeignKeyFields=function isc_DataSource_getForeignKeyFields(_1){if(isc.isA.DataSource(_1))_1=_1.ID;var _2=this.getFields();if(!_2)return null;var _3={};for(var _4 in _2){var _5=_2[_4];if(_5.foreignKey){if(_1){var _6=isc.DataSource.getForeignDSName(_5,(_1||this));if(_6!=_1)continue}
_3[_5.name]=_5}}
return _3},isc.A.getLocalPrimaryKeyFieldNames=function isc_DataSource_getLocalPrimaryKeyFieldNames(){var _1=this.getLocalPrimaryKeyFields();var _2=[];for(var _3 in _1){_2.add(_3)}
return _2},isc.A.getPrimaryKeyFieldNames=function isc_DataSource_getPrimaryKeyFieldNames(){return isc.getKeys(this.getPrimaryKeyFields())},isc.A.getPrimaryKeyField=function isc_DataSource_getPrimaryKeyField(){var _1=this.getPrimaryKeyFields();for(var _2 in _1){return _1[_2]}},isc.A.getPrimaryKeyFieldName=function isc_DataSource_getPrimaryKeyFieldName(){return this.getPrimaryKeyFieldNames()[0]},isc.A.addChildDataSource=function isc_DataSource_addChildDataSource(_1){var _2=this.$38m=(this.$38m||[]);_2.add(_1)},isc.A.getChildDataSources=function isc_DataSource_getChildDataSources(){return this.$38m},isc.A.getChildDataSource=function isc_DataSource_getChildDataSource(_1){var _2=this.getChildDataSources();if(_2==null)return null;var _3;for(var i=0;i<_2.length;i++){if(!_2[i]||(_1&&_2[i]==this))continue;if(!_3){_3=_2[i]}else if(_3!=_2[i]){this.logInfo("getChildDatasource(): This DataSource has multiple child DataSources defined making getChildDataSource() ambiguous. Returning the first child dataSource only - call getChildDataSources() to retrieve a complete list.");break}}
return _3},isc.A.getTreeRelationship=function isc_DataSource_getTreeRelationship(_1,_2){if(isc.isA.String(_1))_1=this.getSchema(_1);var _3=this.getFields();if(_2==null){for(var _4 in _3){var _5=_3[_4];if(_5.foreignKey!=null){if(!_1||(_1.getID()==isc.DataSource.getForeignDSName(_5,this)))
{_2=_4;break}}}}
var _6;if(_2==null&&_1){_2=_6=isc.getKeys(this.fields).intersect(isc.getKeys(_1.fields))[0];this.logInfo("no foreign key declaration, guessing tree relationship is on field name: "+_2+" which occurs in both DataSources")}
var _7;if(_2)_7=_3[_2];if(_7==null){this.logDebug("getTreeRelationship(): Unable to find foreignKeyField.foreignKeyFieldName specified as:"+_2)}
if(!_1){if(!_7)_1=this;else{var _8=isc.DataSource.getForeignDSName(_7,this);_1=this.getSchema(_8)}}
if(!_6)_6=_7?isc.DataSource.getForeignFieldName(_7):null;if(_6==null){var _9=_1.getPrimaryKeyFieldNames();if(isc.isAn.Array(_9)){if(_9.length>1){this.logWarn("getTreeRelationship: dataSource '"+_1.ID+"' has multi-field primary key, which is not supported for tree viewing.  Using field '"+_9[0]+"' as the only primary key field")}
_9=_9[0]}
_6=_9}
var _10;var _11;if(this.childrenField)_11=this.childrenField;for(_4 in _3){var _7=_3[_4];if(_7.isFolderProperty)_10=_4;if(_7.childrenProperty)_11=_4;if(_11==_4&&(_7.multiple==null)){_7.multiple=true}}
var _12={childDS:this,parentDS:_1,isFolderProperty:_10}
if(_2){_12.parentIdField=_2;_12.idField=_6}
if(_11)_12.childrenProperty=_11;if(_11==null&&_2==null){this.logInfo("getTreeRelationship(): No specified foreignKeyField or childrenProperty.")}
if(_1==this){var _13=_2?this.getField(_2).rootValue:null;if(_13==null)_12.rootValue=null;else _12.rootValue=_13}
return _12},isc.A.combineFieldOrders=function isc_DataSource_combineFieldOrders(_1,_2,_3){var _4=[];this.$38n(_2,0,_1,_4,_3);for(var _5 in _1){var _6=_1[_5],_7=_2.findIndex(this.$375,_5);if(_7!=-1){var _8=_2[_7],_9=this.combineFieldData(_8);if(_3==null||_3(_9,this,true))_4.add(_9);this.$38n(_2,_7+1,_1,_4,_3)}else{if(_3==null||_3(_6,this)){var _9=isc.addProperties({},_6);if(_9.hidden)delete _9.hidden;_4.add(_9)}}}
return _4},isc.A.$38n=function isc_DataSource__addNonDSFields(_1,_2,_3,_4,_5){for(var i=_2;i<_1.length;i++){var _7=_1[i];if(_7.name!=null&&_3[_7.name]!=null)return;if(_5==null||!_5(_7,this,true))continue;isc.SimpleType.addTypeDefaults(_7);_4.add(_7)}},isc.A.combineFieldData=function isc_DataSource_combineFieldData(_1,_2,_3){var _4;if(isc.isAn.Object(_2))_4=_2;else _4=this.getField(_2||_1.name);return isc.DataSource.combineFieldData(_1,_4,_3)},isc.A.$38l=function isc_DataSource__addTypeDefaults(_1){if(_1==null)_1=this.fields;for(var _2 in _1){var _3=_1[_2];if(_3&&_3.required==null&&_3.xmlRequired!=null&&_3.xmlNonEmpty!=null)
{_3.required=_3.xmlRequired&&_3.xmlNonEmpty}
if(_3&&(_3.childrenProperty||_3.name==this.childrenField)){if(!_3.type)_3.type=this.ID}
isc.SimpleType.addTypeDefaults(_3,this);this.$75f(_3)}},isc.A.$75f=function isc_DataSource__addFieldValidators(_1){var _2={type:"required"};if(_1.required){var _3=isc.addProperties({},_2),_4=_1.requiredMessage||this.requiredMessage;if(_4!=null)_3.errorMessage=_4;if(!_1.validators){_1.validators=[_3]}else{if(!isc.isAn.Array(_1.validators)){_1.validators=[_1.validators]}
if(_1.validators.$69){_1.validators=_1.validators.duplicate()}
_1.validators.add(_3)}}},isc.A.$63p=function isc_DataSource__autoDeriveTitles(){if(!this.autoDeriveTitles)return;for(var _1 in this.fields){var _2=this.fields[_1];if(_2.title!=null)continue;_2.title=this.getAutoTitle(_1);_2.$76s=true}},isc.A.getAutoTitle=function isc_DataSource_getAutoTitle(_1){return isc.DataSource.getAutoTitle(_1)},isc.A.getType=function isc_DataSource_getType(_1){if(this.schemaNamespace){var _2=isc.SchemaSet.get(this.schemaNamespace),_3=_2.getSimpleType(_1);if(_3)return _3}
var _3=isc.SimpleType.getType(_1);if(_3!=null)return _3;if(this.types&&this.types[_1])return this.types[_1];return null},isc.A.firstCacheAllDataRequest=function isc_DataSource_firstCacheAllDataRequest(_1){if(this.logIsInfoEnabled("cacheAllData")){this.logInfo("firstCacheAllDataRequest: refreshing cache","cacheAllData")}
this.$498=[_1];if(this.$839==null){var _2=this.transformRequest,_3=this.transformResponse,_4=this.$ba;if(_4){if(_4.transformRequest){_2=this[isc.$ah+"transformRequest"]}
if(_4.transformResponse){_3=this[isc.$ah+"transformResponse"]}}
this.transformServerRequest=_2;this.transformServerResponse=_3;this.addMethods({transformRequest:function(_1){var _5=(_1.cachingAllData||(_1.operationType&&_1.operationType!="fetch"));if(!_5)return _1;return this.transformServerRequest(_1)},transformResponse:function(_9,_1,_10){var _5=(_1.cachingAllData||(_1.operationType&&_1.operationType!="fetch"));if(!_5){var _6=this.$85n,_7=_1.$85o;if(!_6||!_7||_7>=_6)
return _9}
return this.transformServerResponse(_9,_1,_10)}});this.$839=true}
this.cacheResultSet=isc.ResultSet.create({dataSource:this,fetchMode:"local",fetchOperation:this.cacheAcrossOperationIds?_1.operationId:this.cacheAllOperationId,allRows:this.cacheData?this.cacheData:null,cachingAllData:true,componentId:"(cacheAllData fetch)",componentContext:"(from: "+_1.componentId+(_1.componentContext?" &lt;"+_1.componentContext+"&gt;)":")"),dataArrived:function(_9,_10){if(this.logIsInfoEnabled("cacheAllData")){this.logInfo("cacheAllData - cacheResultSet.dataArrived: startRow/endRow: "+_9+"/"+_10)}
if(this.lengthIsKnown()){var _8=this.getDataSource();if(_8.cacheResultSet==null)return;_8.cacheLastFetchTime=new Date().getTime();if(_8.clientOnly)_8.testData=_8.cacheData=this.getAllRows();_8.processDeferredRequests()}}});if(!this.cacheData){if(this.logIsInfoEnabled("cacheAllData")){this.logInfo("firstCacheAllDataRequest: issuing fetch","cacheAllData")}
this.cacheResultSet.get(0);return true}else{if(this.logIsInfoEnabled("cacheAllData")){this.logInfo("firstCacheAllDataRequest: updating last fetch time","cacheAllData")}
this.cacheLastFetchTime=new Date().getTime();if(this.clientOnly)this.testData=this.cacheData;this.processDeferredRequests();return true}},isc.A.getCacheData=function isc_DataSource_getCacheData(){if(this.cacheResultSet!=null){if(this.cacheResultSet.allRows)return this.cacheResultSet.allRows}
if(this.cacheData!=null){return this.cacheData}
if(this.testData!=null){return this.testData}},isc.A.fetchingClientOnlyData=function isc_DataSource_fetchingClientOnlyData(_1){if(_1.cachingAllData){return false}
if(_1.downloadResult){return false}
var _2=(this.useTestDataFetch==null?this.shouldUseTestDataFetch():this.useTestDataFetch);if(this.logIsInfoEnabled("cacheAllData")){this.logInfo("fetchingClientOnlyData: useTestDataFetch is "+_2,"cacheAllData")}
if(this.clientOnly){_1.clientOnly=true;if(this.testData&&!this.cacheData)this.cacheData=this.testData;else if(this.cacheData&&!this.testData)this.testData=this.cacheData}
if(this.$498){this.$498.add(_1);return true}
var _3=this.cacheNeedsRefresh();if(_2==false&&this.clientOnly&&this.hasTestData())
_2=true;if(!_2&&((this.cacheAllData&&_3)||(this.clientOnly&&!this.testData&&this.hasTestData())))
{return this.firstCacheAllDataRequest(_1)}else{if(this.clientOnly&&!this.testData&&(this.testFileName||this.dataURL)||(this.cacheAllData&&_3)){if(this.logIsInfoEnabled("cacheAllData")){this.logInfo("fetchingClientOnlyData: issuing oneTimeDS fetch","cacheAllData")}
this.$498=[_1];var _4=this.dataURL||this.testFileName;var _5=this.getDataFormat(_1);if(_5=="iscServer")_5=_4.match(/\.xml$/i)?"xml":"json";var _6=this.getOperationBinding(_1);var _7=this.transformRequest,_8=this.transformResponse,_9=this.$ba;if(_9){if(_9.transformRequest){_7=this[isc.$ah+"transformRequest"]}
if(_9.transformResponse){_8=this[isc.$ah+"transformResponse"]}}
var _10=_6.recordName||this.recordName||(this.inheritsFrom?(isc.isA.String(this.inheritsFrom)?this.inheritsFrom:this.inheritsFrom.ID):this.ID);var _11=isc[this.Class].create({ID:this.ID+"$499",inheritsFrom:this.ID,dataURL:_4,dataFormat:_5,recordXPath:this.recordXPath,transformRequest:_7,transformResponse:_8,recordName:_10,showPrompt:this.showPrompt});this.logInfo("clientOnly datasource performing one-time "+_5+" fetch via: "+_4);this.addProperties({transformRequest:isc.DataSource.getInstanceProperty("transformRequest"),transformResponse:isc.DataSource.getInstanceProperty("transformResponse")});var _12=this;if(this.cacheAllData){_11.cacheAllData=false}
_11.sendDSRequest({operationType:"fetch",willHandleError:true,componentId:_1.componentId,componentContext:_1.componentContext,callback:function(_14,_15){var _13;if(_14.status!=isc.DSResponse.STATUS_SUCCESS){_12.logWarn("one-time fetch failed with status: "+_14.status+" and messsage: "+(_15?_15:"N/A")+".  Initializing an empty Array as testData.");_13=[]}else{_12.logInfo("One-time fetch complete: "+(_15?_15.length:"null")+" records");_13=_12.initializeSequenceFields(_15)}
if(_12.cacheAllData){_12.cacheLastFetchTime=new Date().getTime();_12.cacheResultSet=isc.ResultSet.create({dataSource:_12.ID,fetchMode:"local",allRows:_13});_12.cacheLastFetchTime=new Date().getTime()}
if(_12.clientOnly){_12.cacheData=_12.testData=_13}
_12.processDeferredRequests();_11.destroy()}});return true}}},isc.A.shouldUseTestDataFetch=function isc_DataSource_shouldUseTestDataFetch(){return this.clientOnly==true&&this.cacheAllData!=true&&(this.dataURL!=null||this.testFileName!=null)},isc.A.hasTestData=function isc_DataSource_hasTestData(){return this.dataURL!=null||this.testFileName!=null},isc.A.getClientOnlyResponse=function isc_DataSource_getClientOnlyResponse(_1,_2){_2=_2||this.testData;if(_2&&!this.testData&&this.clientOnly)
this.cacheData=this.testData=_2;if(!_2||isc.isA.String(_2)){if(isc.isA.String(_2)){this.logInfo(this.ID+" datasource: using testData property as data");this.cacheData=this.testData=isc.eval(_2)}else if(window[this.ID+"TestData"]){this.logInfo(this.ID+" datasource: using "+this.ID+"TestData object as data");this.cacheData=this.testData=window[this.ID+"TestData"]}else{this.logInfo(this.ID+" datasource: testData property and "+this.ID+"TestData object not found, using empty list as data");this.cacheData=this.testData=[]}
_2=this.testData}
var _3=_1.operationType,_4={status:0};switch(_3){case"fetch":case"select":case"filter":var _5=_1.data;if(isc.isAn.Array(_5))_5=_5[0];var _6=this.applyFilter(_2,_5,_1),_7=_6;if(_1.startRow!=null){var _8=_1.startRow,_9=_1.endRow,_10=_6.length;var _11=isc.shallowClone(_1.sortBy);if(_11){if(!isc.isAn.Array(_11))_11=[_11];if(isc.isAn.Object(_11[0])){_11=isc.DS.getSortBy(_11)}
var _12=[];for(var i=0;i<_11.length;i++){var _14=true;if(_11[i].startsWith("-")){_11[i]=_11[i].substring(1);_14=false}
_12[i]=_14}
_6.sortByProperties(_11,_12)}
_9=Math.min(_9,_10);_7=_6.slice(_8,_9);_4.startRow=_8;_4.endRow=_9;_4.totalRows=_10}
if(this.copyLocalResults){for(var i=0;i<_7.length;i++){if(this.deepCopyLocalResults){_7[i]=isc.clone(_7[i])}else{_7[i]=isc.addProperties({},_7[i])}}}
_4.data=_7;break;case"remove":case"delete":if(this.isMissingPrimaryKeys(_1.data)){_4.data="clientOnly remove operation failed for DataSource "+this.ID+": missing primaryKey values(s) "+this.getMissingPrimaryKeys(_1.data);_4.data="clientOnly remove operation failed: missing primaryKey value(s): "+this.getMissingPrimaryKeys(_1.data);_4.status=-1}else{var _15=this.findByKeys(_1.data,_2);if(_15==-1){this.logWarn("clientOnly remove operation: Unable to find record matching criteria:"+this.echo(_1.data));_4.data="clientOnly remove operation failed: unable to find matching record"
_4.status=-1}else{_2.removeAt(_15);_4.data=isc.addProperties({},_1.data)}}
break;case"add":case"insert":var _16=isc.addProperties({},_1.data);if(_16.__ref){delete _16.__ref;delete _16.__module}
_16=this.applySequenceFields(_16);var _15=this.findByKeys(_16,_2);if(_15!=-1){this.logWarn("clientOnly add operation: Duplicate key: "+isc.echoAll(_16));_4.data="clientOnly add operation failed for DataSource "+this.ID+": Duplicate key in record "+isc.echoAll(_16);_4.status=-1}else{_2.add(_16);_4.data=isc.addProperties({},_16)}
break;case"replace":case"update":if(this.isMissingPrimaryKeys(_1.data)){this.logWarn("clientOnly update operation: Missing primaryKey values: "+this.getMissingPrimaryKeys(_1.data));_4.data="clientOnly update operation failed for DataSource "+this.ID+": missing primaryKey values(s) "+this.getMissingPrimaryKeys(_1.data);_4.status=-1}else{var _15=this.findByKeys(_1.data,_2);if(_15==-1){this.logWarn("clientOnly update operation: Unable to find record matching criteria:"+this.echo(_1.data));_4.data="clientOnly update operation failed: unable to find matching record. Did you supply all primaryKeys?"
_4.status=-1}else{var _16=_2[_15];for(var _17 in _1.data){var _18=this.getField(_17);isc.Canvas.$70n(_17,null,_1.data[_17],_16,null,true)}
_4.data=isc.addProperties({},_16)}}
break;case"validate":default:break}
this.$109x(_4,_3);return _4},isc.A.$109x=function isc_DataSource__trackClientOnlyChanges(_1,_2){var _3=this.getPrimaryKeyFieldName();switch(_2){case'add':if(!this.$109y){this.$109y=new Array()}
this.$109y[_1.data[_3]]=_1.data;break;case'update':if(!this.$109z){this.$109z=new Array()}
if(this.$109y&&this.$109y[_1.data[_3]]){this.$109y[_1.data[_3]]=_1.data}else{this.$109z[_1.data[_3]]=_1.data}
break;case'remove':if(!this.$1090){this.$1090=new Array()}
if(this.$109y&&this.$109y[_1.data[_3]]){this.$109y[_1.data[_3]]=null}
if(this.$109z&&this.$109z[_1.data[_3]]){this.$109z[_1.data[_3]]=null}
this.$1090[_1.data[_3]]=_1.data}},isc.A.getChanges=function isc_DataSource_getChanges(){var _1=new Array();var _2=this.getPrimaryKeyFieldName();if(this.$109y){for(var _3 in this.$109y){if(this.$109y[_3]!=null&&isc.isA.Object(this.$109y[_3])){this.$109y[_3][_2]=null;var _4={data:this.$109y[_3],operationType:'add'}
_1.push(_4)}}}
if(this.$109z){for(var _3 in this.$109z){if(this.$109z[_3]!=null&&isc.isA.Object(this.$109z[_3])){var _4={data:this.$109z[_3],operationType:'update'}
_1.push(_4)}}}
if(this.$1090){for(var _3 in this.$1090){if(this.$1090[_3]!=null&&isc.isA.Object(this.$1090[_3])){var _4={data:this.$1090[_3],operationType:'remove'}
_1.push(_4)}}}
if(this.$109y){this.$109y.splice(0,this.$109y.length)}
if(this.$109z){this.$109z.splice(0,this.$109z.length)}
if(this.$1090){this.$1090.splice(0,this.$1090.length)}
return _1},isc.A.getNextSequenceValue=function isc_DataSource_getNextSequenceValue(_1){var _2=this.testData,_3=0;for(var i=0;i<_2.length;i++){var _5=_2[i][_1.name];if(_5!=null&&_5>_3)_3=_5}
return _3+1},isc.A.applySequenceFields=function isc_DataSource_applySequenceFields(_1){if(this.contactsServer()){return _1}
var _2=this.getFields();for(var _3 in _2){var _4=_2[_3];if((_4.type=="sequence"||_4.primaryKey)&&_1[_3]==null){var _5=isc.SimpleType.getType(_4.type);while(_5.inheritsFrom)_5=isc.SimpleType.getType(_5.inheritsFrom);if(_5=="date"||_5=="time"){this.logWarn("clientOnly dataSource encountered a primaryKey of date or time type for which no value was supplied for an 'add' request.  Defaulting to the epoch (midnight on 1 Jan 1970)");_1[_3]=new Date(0)}else{_1[_3]=this.getNextSequenceValue(_4);if(_4.type!="sequence"){this.logWarn("clientOnly dataSource found a missing value for primaryKey field '"+_3+"' during an add request. Derived value "+_1[_3]+" from sequence processing")}}}}
return _1},isc.A.initializeSequenceFields=function isc_DataSource_initializeSequenceFields(_1){if(!isc.isAn.Array(_1))return;var _2=this.getFields();var _3=[];for(var _4 in _2){if(_2[_4].type=="sequence"||_2[_4].primaryKey)_3.add(_4)}
for(var i=0;i<_1.length;i++){for(var j=0;j<_3.length;j++){var _4=_3[j];if(_1[i][_4]==null)_1[i][_4]=i}}
return _1},isc.A.isMissingPrimaryKeys=function isc_DataSource_isMissingPrimaryKeys(_1){return this.getMissingPrimaryKeys(_1).length>0},isc.A.getMissingPrimaryKeys=function isc_DataSource_getMissingPrimaryKeys(_1){var _2=this.getPrimaryKeyFieldNames(),_3=[],_4;if(!_1)return _2;for(var i=0;i<_2.length;i++){if(_1[_2[i]]==_4){_3.add(_2[i])}}
return _3},isc.A.findByKeys=function isc_DataSource_findByKeys(_1,_2,_3,_4){if(_1==null||_2==null)return-1;var _5=this.getPrimaryKeyFieldNames(),_6={},_7=false;if(isc.ResultSet&&isc.isA.ResultSet(_2))_2=_2.localData;for(var i=0;i<_5.length;i++){_6[_5[i]]=_1[_5[i]];if(this.getField(_5[i]).type=="date"||this.getField(_5[i]).type=="time"||this.getField(_5[i]).type=="datetime")
{_7=true}}
if(!_7)return _2.findByKeys(_1,this,_3,_4);var _9=this.recordIndicesMatchingFilter(_2,_6,{},_3,_4);if(!_9||_9.length==0)return-1;if(_9.length>1){this.logWarn("Searching by primaryKey, found "+_9.length+" records when there should only be one - returning the first.  PrimaryKey set was: "+isc.echoAll(_6))}
return _9[0]},isc.A.applyFilter=function isc_DataSource_applyFilter(_1,_2,_3){var _4=[];if(!_1||_1.length==0)return _4;if(this.isAdvancedCriteria(_2)){var _5=this.normalizeAdvancedCriteria(_2);return this.recordsMatchingAdvancedFilter(_1,_5,_3)}
return this.recordsMatchingFilter(_1,_2,_3)},isc.A.recordIndicesMatchingFilter=function isc_DataSource_recordIndicesMatchingFilter(_1,_2,_3,_4,_5){return this.recordsMatchingFilter(_1,_2,_3,_4,_5,true)},isc.A.recordsMatchingFilter=function isc_DataSource_recordsMatchingFilter(_1,_2,_3,_4,_5,_6){var _7=isc.getKeys(_2),_8=_7.length,_9=[],_10,_11,_12,_13,_14,j;_4=_4||0;_5=_5||_1.length;if(_3&&_3.operation&&this.operationBindings){var _16=_3.operation;if(_16.ID==_16.dataSource+"_"+_16.type){var _17=this.operationBindings.find({operationId:null,operationType:_16.type})}else{var _17=this.operationBindings.find({operationId:_3.operation.ID,operationType:_16.type})}
if(_17){var _18=_17.customCriteriaFields;if(isc.isA.String(_18)){_18=_18.split(",");for(var k=0;k<_18.length;k++){_18[k]=_18[k].replace(/^\s+|\s+$/g,'')}}}}
for(var i=_4;i<_5;i++){_10=_1[i];if(_10==null)continue;_11=true;for(j=0;j<_8;j++){_12=_7[j];if(_12==null)continue;var _21=this.getField(_12,true);if(_21==null)_21=this.getFieldForDataPath(_12);if(this.dropUnknownCriteria&&!_21){continue}
var _22=false;if(isc.isA.List(_18)&&_18.contains(_12)){_22=true}
if(!_22&&_21&&_21.customSQL)continue;_13=isc.DataSource.getPathValue(_10,_12,_21);_14=_2[_12];if(!this.fieldMatchesFilter(_13,_14,_3,(_21?_21.ignoreTextMatchStyle:null)))
{_11=false;break}}
if(_11)_9.add(_6?i:_10)}
return _9},isc.A.recordMatchesFilter=function isc_DataSource_recordMatchesFilter(_1,_2,_3){if(this.isAdvancedCriteria(_2)){return this.recordsMatchingAdvancedFilter([_1],_2,_3).length>0}
return this.recordsMatchingFilter([_1],_2,_3).length>0},isc.A.fieldMatchesFilter=function isc_DataSource_fieldMatchesFilter(_1,_2,_3,_4){var _5;if(_4){_5=this.ignoreTextMatchStyleCaseSensitive?this.$135s:this.$50i}else if(_3){_5=_3.textMatchStyle}
if(isc.isAn.Array(_2)||isc.isAn.Array(_1)){if(!isc.isAn.Array(_1)){_1=[_1]}
if(!isc.isAn.Array(_2)){_2=[_2]}
var _6=isc.isA.Date(_2[0]);if(_5==this.$50i||_5==this.$135s||_6){if(_6){return _2.intersectDates(_1).length>0}else if(_5==this.$135s){return _2.intersect(_1).length>0}else{return _2.intersectSubstring(_1,true,this.$50i).length>0}}else{return _2.intersectSubstring(_1,true,_5).length>0}}
if(isc.isA.Date(_1)&&isc.isA.Date(_2)){if(_2.logicalDate)
return(Date.compareLogicalDates(_1,_2)==0);return(Date.compareDates(_1,_2)==0)}
if(!isc.isA.String(_1)&&!isc.isA.String(_2)){if(this.logIsDebugEnabled()){this.logDebug("Direct compare: "+_1+"=="+_2)}
return(_1==_2)}
if(_2==null)_2=isc.emptyString;if(_1==null)_1=isc.emptyString;if(!isc.isA.String(_1))_1=_1.toString();if(!isc.isA.String(_2))_2=_2.toString();if(_5!=this.$135s&&this.filterIsCaseSensitive!==true){_1=_1.toLocaleLowerCase();_2=_2.toLocaleLowerCase()}
if(!this.supportsTextMatchStyle(_5)){if(!this.$63c)this.$63c={};if(!this.$63c[_5]){this.logWarn("Text match style specified as '"+_5+"': This is not supported for this dataSource - performing a substring match instead");this.$63c[_5]=true}
_5=this.getTextMatchStyle(_5)}
if(_5==this.$45y){return isc.startsWith(_1,_2)}else if(_5==this.$19q){return isc.contains(_1,_2)}else{return _1==_2}},isc.A.supportsTextMatchStyle=function isc_DataSource_supportsTextMatchStyle(_1,_2){if(!this.clientOnly&&(this.dataFormat!=this.$50j))return true;return(_1==null||_1==this.$19q||_1==this.$50i||_1==this.$45y||_1==this.$135s)},isc.A.getTextMatchStyle=function isc_DataSource_getTextMatchStyle(_1){if(_1==null)_1=this.$50i;if(!this.supportsTextMatchStyle(_1)){_1=this.$19q}
return _1},isc.A.compareTextMatchStyle=function isc_DataSource_compareTextMatchStyle(_1,_2){_1=this.getTextMatchStyle(_1);_2=this.getTextMatchStyle(_2);if(_1==_2)return 0;if(_1==this.$135s)return 1;if(_2==this.$135s)return-1;if(_2==this.$19q)return 1;if(_1==this.$19q)return-1;if(_1==this.$50i&&_2==this.$45y)return 1;return-1},isc.A.compareCriteria=function isc_DataSource_compareCriteria(_1,_2,_3,_4){if(this.logIsInfoEnabled()){this.logInfo("Comparing criteria, oldCriteria:\n"+this.echo(_2)+"\nnewCriteria:\n"+this.echo(_1)+", policy: "+(_4||this.criteriaPolicy))}
if(_2==null)return-1;var _5=this.getTextMatchStyle(_3?_3.textMatchStyle:null);if(this.isAdvancedCriteria(_1)||this.isAdvancedCriteria(_2)){var _6,_7;if(this.isAdvancedCriteria(_1)){if(this.isAdvancedCriteria(_2)){_7=this.compareAdvancedCriteria(_1,_2,_3)}else{var j=0;for(var i in _2){j++;break}
if(j==0)_7=1}
if(_7==_6){_2=isc.DataSource.convertCriteria(_2,_5);_7=this.compareAdvancedCriteria(_1,_2,_3)}}else{var j=0;for(var i in _1){j++;break}
if(j==0){_7=-1}else{_1=isc.DataSource.convertCriteria(_1,_5);_7=this.compareAdvancedCriteria(_1,_2,_3)}}
if(_7==_6)_7=-1;_4=_4||this.criteriaPolicy;if(_4=="dropOnShortening"){return _7}else{return _7==0?0:-1}}
_4=_4||this.criteriaPolicy;if(_4=="dropOnShortening"){if(_5==this.$50i||_5==this.$135s){return this.dropOnFieldChange(_1,_2,_3)}else{return this.dropOnShortening(_1,_2,_3)}}else{return this.dropOnChange(_1,_2,_3)}});isc.evalBoundary;isc.B.push(isc.A.getFieldCriterion=function isc_DataSource_getFieldCriterion(_1,_2){var _3;if(_1.criteria){for(var i=0;i<_1.criteria.length;i++){_3=this.getFieldCriterion(_1.criteria[i],_2);if(_3)return _3}}else{if(_1.fieldName==_2)return _1}
return null},isc.A.dropOnChange=function isc_DataSource_dropOnChange(_1,_2,_3){if(isc.getKeys(_2).length!=isc.getKeys(_1).length)return-1;for(var _4 in _2){var _5=_2[_4],_6=_1[_4];if(isc.isAn.Array(_5)){if(!isc.isAn.Array(_6))return-1;if(_5.length!=_6.length)return-1;if(_5.intersect(_6).length!=_5.length)
{return-1}}else if(isc.isA.Date(_5)&&isc.isA.Date(_6))
{if(_5.getTime()!=_6.getTime())return-1}else if(_5!=_6){return-1}}
return 0},isc.A.dropOnFieldChange=function isc_DataSource_dropOnFieldChange(_1,_2,_3){var _4=isc.getKeys(_1),_5=isc.getKeys(_2),_6=_4.length-_5.length;if(_6<0)return-1;for(var _7 in _2){var _8=_2[_7],_9=_1[_7];if(_9==null)return-1;if(isc.isAn.Array(_8)){if(!isc.isAn.Array(_9))return-1;if(_8.length!=_9.length)return-1;if(_8.intersect(_9).length!=_8.length)
{return-1}}else if(isc.isA.Date(_8)&&isc.isA.Date(_9))
{if(_8.getTime()!=_9.getTime())return-1}else if(_8!=_9){return-1}}
if(_6>0){_4.removeList(_5);for(var i=0;i<_4.length;i++){if(this.getField(_4[i])==null)return-1}
return 1}
return 0},isc.A.dropOnShortening=function isc_DataSource_dropOnShortening(_1,_2,_3){var _4=isc.getKeys(_1),_5=isc.getKeys(_2),_6=_4.length-_5.length;if(_6<0)return-1;var _7=0;for(var _8 in _2){var _9=_2[_8],_10=_1[_8];if(_10==null)return-1;if((this.getField(_8)==null||this.getField(_8).ignoreTextMatchStyle)&&_9!=_10)
{return-1}
if(isc.isAn.Array(_9)){if(!isc.isAn.Array(_10))return-1;if(_9.length!=_10.length)return-1;if(_9.intersect(_10).length!=_9.length)
{return-1}}else if(isc.isA.String(_9)){if(!isc.isA.String(_10))return-1;if(_10.indexOf(_9)==-1)return-1;if(_9.length>_10.length)return-1;if(_9.length<_10.length)_7=1}else if(isc.isA.Date(_9)&&isc.isA.Date(_10))
{if(_9.getTime()!=_10.getTime())return-1}else if(_9!=_10){return-1}}
if(_6>0){_4.removeList(_5);for(var i=0;i<_4.length;i++){if(this.getField(_4[i])==null)return-1}
return 1}
return _7},isc.A.compareDates=function isc_DataSource_compareDates(_1,_2,_3,_4){var _5=this.getField(_3),_6=_4?this.getField(_4):null;if((_5&&isc.SimpleType.inheritsFrom(_5.type,"datetime"))||(_6&&isc.SimpleType.inheritsFrom(_6.type,"datetime")))
{return Date.compareDates(_1,_2)}else if((_5&&isc.SimpleType.inheritsFrom(_5.type,"time"))||(_6&&isc.SimpleType.inheritsFrom(_6.type,"time")))
{return isc.Time.compareLogicalTimes(_1,_2)}else{return Date.compareLogicalDates(_1,_2)}},isc.A.compareValues=function isc_DataSource_compareValues(_1,_2,_3,_4){if(isc.isA.Date(_1)&&isc.isA.Date(_2)){return this.compareDates(_1,_2,_3)}else{var _5=_4&&_1.toLowerCase?_1.toLowerCase():_1,_6=_4&&_2.toLowerCase?_2.toLowerCase():_2;if(_5==null&&_6!=null)return 1;if(_5!=null&&_6==null)return-1;return _5>_6?-1:(_5<_6?1:(_5==_6?0:2))}},isc.A.recordsAreEqual=function isc_DataSource_recordsAreEqual(_1,_2){var _3=this.getFieldNames();for(var i=0;i<_3.length;i++){if(this.compareValues(_1[_3[i]],_2[_3[i]],_3[i])!=0){return false}}
return true},isc.A.convertDataSourceCriteria=function isc_DataSource_convertDataSourceCriteria(_1,_2){return isc.DataSource.convertCriteria(_1,_2,this)});isc.B._maxIndex=isc.C+186;isc.A=isc.DataSource;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$628=0;isc.A.$135t={exact:"equals",exactCase:"iEquals",substring:"iContains",startsWith:"iStartsWith"};isc.A.$71l={sum:function(_1,_2,_3){var _4=0;for(var i=0;i<_2.length;i++){var _6=_1[_2[i].name],_7=parseFloat(_6);if(isc.isA.Number(_7)&&_7==_6){_4+=_7}else{if(_6!=null&&_6!=isc.emptyString){return null}}}
return _4},avg:function(_1,_2,_3){var _4=0,_5=0;for(var i=0;i<_2.length;i++){var _7=_1[_2[i].name],_8=parseFloat(_7);if(isc.isA.Number(_8)&&(_8==_7)){_5+=1;_4+=_8}else{if(_7!=null&&_7!=isc.emptyString){return null}}}
return _5>0?_4/_5:null},max:function(_1,_2,_3){var _4,_5;for(var i=0;i<_2.length;i++){var _7=_1[_2[i].name];if(isc.isA.Date(_7)){if(_5)return null;if(_4==null)_4=_7.duplicate();else if(_4.getTime()<_7.getTime())_4=_7.duplicate()}else{_5=true;var _8=parseFloat(_7);if(isc.isA.Number(_8)&&(_8==_7)){if(_4==null)_4=_8;else if(_4<_7)_4=_8}else{if(_7!=null&&_7!=isc.emptyString){return null}}}}
return _4},min:function(_1,_2,_3){var _4,_5
for(var i=0;i<_2.length;i++){var _7=_1[_2[i].name];if(isc.isA.Date(_7)){if(_5)return null;if(_4==null)_4=_7.duplicate();if(_7.getTime()<_4.getTime())_4=_7.duplicate()}else{if(_7==null||_7==isc.emptyString)continue;_5=true;var _8=parseFloat(_7);if(isc.isA.Number(_8)&&(_8==_7)){if(_4==null)_4=_8;else if(_4>_7)_4=_8}else{return null}}}
return _4},multiplier:function(_1,_2,_3){var _4=0;for(var i=0;i<_2.length;i++){var _6=_1[_2[i].name],_7=parseFloat(_6);if(isc.isA.Number(_7)&&(_7==_6)){if(i==0)_4=_7;else _4=(_4*_7)}else{return null}}
return _4}};isc.B.push(isc.A.applyFilter=function isc_c_DataSource_applyFilter(_1,_2){var _3=[];if(!_1||_1.length==0)return _3;if(this.$901==null){this.$901=isc.DataSource.create({fields:[{name:"$902"}],dropUnknownCriteria:false,clientOnly:true})}
var _4=this.$901.applyFilter(_1,_2);return _4},isc.A.addSearchOperator=function isc_c_DataSource_addSearchOperator(_1){if(!_1||!_1.ID){isc.logWarn("Attempted to add null search operator, or operator with no ID");return}
if(!isc.DataSource.$57z)isc.DataSource.$57z={};var _2=isc.DataSource.$57z,_3;if(_2[_1.ID]!==_3){isc.logWarn("Attempted to add existing operator "+_1.ID+" - replacing")}
isc.DataSource.$57z[_1.ID]=_1},isc.A.getSearchOperators=function isc_c_DataSource_getSearchOperators(){return isc.DataSource.$57z},isc.A.setTypeOperators=function isc_c_DataSource_setTypeOperators(_1,_2){if(!_2)return;if(!isc.isAn.Array(_2))_2=[_2];if(!isc.DataSource.$570)isc.DataSource.$570={};isc.DataSource.$570[_1||"_all_"]=_2},isc.A.$625=function isc_c_DataSource__getNextRequestId(){return this.$628++},isc.A.getAutoTitle=function isc_c_DataSource_getAutoTitle(_1,_2){_2=_2||new RegExp("[_\$]","g");if(!_1)return"";if(!isc.isA.String(_1))_1=_1.toString();var _3;_4=_1.replace(_2," ");var _4=_4.replace(/^\s+|\s+$/g,"");if(_4==_4.toUpperCase()||_4==_4.toLowerCase()){_4=_4.toLowerCase();var _5=true;_3="";for(var i=0;i<_4.length;i++){var _7=_4.substr(i,1);if(_5){_7=_7.toUpperCase();_5=false}
if(_7==' ')_5=true;_3=_3+_7}}else{_3=_4.substr(0,1).toUpperCase();var _8=_4.substr(0,1)==_4.substr(0,1).toUpperCase();var _9=false;var _10=false;for(var i=1;i<_4.length;i++){var _7=_4.substr(i,1);if(_9&&_7==_7.toLowerCase()){_9=false;_3=_3.substr(0,_3.length-1)+" "+_3.substr(_3.length-1)}
if(_8&&_7==_7.toUpperCase()){_9=true}
if(!_8&&_7==_7.toUpperCase()){_3=_3+" "}
_8=_7==_7.toUpperCase();if(_10)_7=_7.toUpperCase();_10=_7==" ";_3=_3+_7}}
return _3},isc.A.convertCriteria=function isc_c_DataSource_convertCriteria(_1,_2,_3){var _4={_constructor:"AdvancedCriteria",operator:"and"}
if(!_2&&_3)_2=this.$135t[_3.defaultTextMatchStyle];var _5=[];for(var _6 in _1){var _7=_3==null?null:_3.getField(_6),_8=_3==null?null:this.$135t[_3.defaultTextMatchStyle],_9=null;if(_7!=null){if(_7.ignoreTextMatchStyle){_9=_3.ignoreTextMatchStyleCaseSensitive?"equals":"iEquals"}}
if(isc.isAn.Array(_1[_6])){var _10={_constructor:"AdvancedCriteria",operator:"or",criteria:[]}
for(var i=0;i<_1[_6].length;i++){var _12=_1[_6][i];_10.criteria.add({fieldName:_6,operator:_9?_9:this.getCriteriaOperator(_12,_2,_8),value:_12})}
_5.add(_10)}else{_5.add({fieldName:_6,operator:_9?_9:this.getCriteriaOperator(_1[_6],_2,_8),value:_1[_6]})}}
_4.criteria=_5;return _4},isc.A.getCriteriaOperator=function isc_c_DataSource_getCriteriaOperator(_1,_2,_3){var _4;if(isc.isA.Number(_1)||isc.isA.Date(_1)||isc.isA.Boolean(_1)){_4="equals"}else if(_2=="exactCase"){_4="equals"}else if(_2=="equals"||_2=="exact"){_4="iEquals"}else if(_2=="startsWith"){_4="iStartsWith"}else{_4=_3||"iContains"}
return _4},isc.A.combineCriteria=function isc_c_DataSource_combineCriteria(_1,_2,_3,_4,_5){if(!_1)return _2;if(!_2)return _1;if(!_3)_3="and";if(_3!="and"&&_3!="or"){isc.logWarn("combineCriteria called with invalid outerOperator '"+_3+"'");return null}
var _6,_7;if(!_5&&_1._constructor!="AdvancedCriteria"&&_2._constructor!="AdvancedCriteria"&&_3=="and")
{for(var _8 in _1){if(_2[_8]!=_6){_7=true;break}}}else{_7=true}
if(!_7){return isc.addProperties({},_1,_2)}
var _9,_10;if(_5||_1._constructor=="AdvancedCriteria"){_9=_1}else{_9=isc.DataSource.convertCriteria(_1,_4)}
if(_5||_2._constructor=="AdvancedCriteria"){_10=_2}else{_10=isc.DataSource.convertCriteria(_2,_4)}
var _11={operator:_3};if(!_5){_11._constructor="AdvancedCriteria"}
if(_9.operator==_3&&_10.operator==_3){_11.criteria=[];_11.criteria.addAll(_9.criteria);_11.criteria.addAll(_10.criteria)}else{_11.criteria=[_9,_10]}
return _11},isc.A.simplifyAdvancedCriteria=function isc_c_DataSource_simplifyAdvancedCriteria(_1,_2){if(!this.isAdvancedCriteria(_1)){return _1}
_1=this.$79a(_1,_2);if(_1==null)return null;_1._constructor="AdvancedCriteria";return _1},isc.A.$79a=function isc_c_DataSource__simplifyAdvancedCriteria(_1,_2){var _3=_1.operator;if(_3=="and"||_3=="or"){var _4=_1.criteria;if(_4==null||_4.length==0){if(_2)return null;return _1}
if(_4.length==1){_1=_4[0];return this.$79a(_1,true)}
var _5=[];for(var i=0;i<_4.length;i++){var _7=_4[i];_7=this.$79a(_7,true);if(_7!=null){if(_7.operator==_3){_5.addList(_7.criteria)}else{_5.add(_7)}}}
if(_5.length==0&&_2)return null;if(_5.length==1)return _5[0];_1.criteria=_5;return _1}else{return _1}},isc.A.combineFieldData=function isc_c_DataSource_combineFieldData(_1,_2,_3){if(_2==null)return _1;for(var _4 in _2){if(_4=="validators"&&_1.validators!=null&&_2.validators!=_1.validators)
{if(_2.validators.$69){if(isc.SimpleType.getBaseType(_1.type)!=isc.SimpleType.getBaseType(_2.type))
{continue}}
for(var i=0;i<_2.validators.length;i++){var _6=_2.validators[i];if(!_1.validators.contains(_6)){if(_1.validators.$69){_1.validators=_1.validators.duplicate()}
_1.validators.add(_6)}}
continue}
if(_1[_4]!=null)continue;if(_4=="name")continue;if(!_3&&_4=="hidden")continue;_1[_4]=_2[_4]}
return _1},isc.A.applyRecordSummaryFunction=function isc_c_DataSource_applyRecordSummaryFunction(_1,_2,_3,_4){if(!_2||!_3)return;if(isc.isA.String(_1)){if(this.$71l[_1]){_1=this.$71l[_1]}else{_1=isc.Func.expressionToFunction("record,fields,summaryField",_1)}}
if(isc.isA.Function(_1))return _1(_2,_3,_4)},isc.A.registerRecordSummaryFunction=function isc_c_DataSource_registerRecordSummaryFunction(_1,_2){if(isc.isA.String(_2)){_2=isc.Func.expressionToFunction("record,fields,summaryField",_2)}
this.$71l[_1]=_2},isc.A.exportClientData=function isc_c_DataSource_exportClientData(_1,_2,_3,_4){var _5=_2.exportContext||_2||{},_6=_5&&_5.exportAs?_5.exportAs:"csv",_7=_5&&_5.exportFilename?_5.exportFilename:"export",_8=_5&&_5.exportDisplay?_5.exportDisplay:"download",_9=_5.downloadToNewWindow!=null?_5.downloadToNewWindow:(_8=="window");var _10={showPrompt:false,transport:_5.exportToClient===false?"xmlHttpRequest":"hiddenFrame",exportResults:true,exportDisplay:_8,targetMainWindow:_5.targetMainWindow,downloadResult:!(_5.exportToClient===false),downloadToNewWindow:_9,download_filename:(_8=="window"?_7:null),params:_5.params};var _11={exportAs:_5.exportAs,exportDisplay:_8,exportFilename:_7,exportPath:_5.exportPath,exportToClient:_5.exportToClient,exportToFilesystem:_5.exportToFilesystem,exportDelimiter:_5.exportDelimiter,exportFields:_5.exportFields,exportHeader:_5.exportHeader,exportHeaderless:_5.exportHeaderless,exportFooter:_5.exportFooter,exportTitleSeparatorChar:_5.exportTitleSeparatorChar,exportDefaultBGColor:_5.exportDefaultBGColor,exportAlternateRowBGColor:_5.exportAlternateRowBGColor,exportRowBGColors:_5.exportRowBGColors,exportColumnBGColors:_5.exportColumnBGColors,exportRawValues:_5.exportRawValues,exportCurrencySymbol:isc.NumberUtil.currencySymbol,lineBreakStyle:_5.lineBreakStyle};if(_5.headerSpans)_11.headerSpans=_5.headerSpans;if(_5.exportHeaderSpans)_11.exportHeaderSpans=_5.exportHeaderSpans;if(_5.exportOtherFields)_11.exportOtherFields=_5.exportOtherFields;if(_5.exportShowHeaderSpanTitles!=null){_11.exportShowHeaderSpanTitles=_5.exportShowHeaderSpanTitles}
if(_5.exportSpanTitleSeparator!=null){_11.exportSpanTitleSeparator=_5.exportSpanTitleSeparator}
if(_5.formulaFields)_11.formulaFields=_5.formulaFields;if(_5.formulaRemap)_11.formulaRemap=_5.formulaRemap;if(_5.exportHeaderHeight!=null){_11.exportHeaderHeight=_5.exportHeaderHeight}
if(_5.exportFieldPixelWidths){_11.exportFieldPixelWidths=_5.exportFieldPixelWidths;_11.exportWidthScale=_5.exportWidthScale}
_11.exportWrapHeaderTitles=_5.exportWrapHeaderTitles;if(_5.exportAlignments){_11.exportAlignments=_5.exportAlignments}
var _12=_2.operationId;if(_4==null||_12==null){isc.DMI.callBuiltin({methodName:"downloadClientExport",arguments:[_1,_6,_7,_8,_11],requestParams:_10,callback:_3})}else{isc.addProperties(_10,{parameters:_11});_4.performClientExportOperation(_12,_1,_3,_10)}},isc.A.getSimpleErrors=function isc_c_DataSource_getSimpleErrors(_1){var _2=_1?_1.errors:null;if(isc.isAn.Array(_2)){if(_2.length>1){this.logWarn("getSimpleErrors() passed an array of error blocks - dropping all but the first set of errors.")}
_2=_2[0]}
if(_2==null)return null;var _3={};for(var _4 in _2){var _5=_2[_4];if(_4=="recordPath"&&!isc.isAn.Object(_5))continue;var _6=[];if(!isc.isAn.Array(_5))_5=[_5];for(var i=0;i<_5.length;i++){var _8=_5[i];if(isc.isAn.Object(_8)){_6.add(_8.errorMessage)}else if(_8!=null){_6.add(_8)}}
if(_6.length>0){_3[_4]=_6}}
return _3},isc.A.recordTimingData=function isc_c_DataSource_recordTimingData(_1,_2,_3,_4){if(!isc.Log.logIsInfoEnabled("RpcTabTiming")||!_1)return;if(_4==null)_4=isc.timeStamp();var _5;if(_1.clientTimingStack){_5=_1.clientTimingStack[_1.clientTimingStack.length-1]}else{_5=_1.clientTiming={name:"Client processing",start:_4,children:[]};_1.clientTimingStack=[];_1.clientTimingStack.add(_1.clientTiming)}
if(!_5){isc.logWarn("Unexpected failure to find stack entry logging timing data: description: '"+_2+"', type: "+_3);return}
if(_3=="start"){var _6={start:_4,name:_2,children:[]};_5.children.add(_6);_1.clientTimingStack.add(_6)}else if(_3=="end"){_5.end=_4;_1.clientTimingStack.removeAt(_1.clientTimingStack.length-1)}else{_5.children.add({millis:_4,name:_2})}});isc.B._maxIndex=isc.C+17;isc.A=isc.DataSource.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.supportsAdvancedCriteria=function isc_DataSource_supportsAdvancedCriteria(){if(this.clientOnly||this.cacheData)return true;if(this.allowAdvancedCriteria===false)return false;if(this.willHandleAdvancedCriteria===false)return false;return true},isc.A.isAdvancedCriteria=function isc_DataSource_isAdvancedCriteria(_1){return isc.DS.isAdvancedCriteria(_1,this)},isc.A.normalizeAdvancedCriteria=function isc_DataSource_normalizeAdvancedCriteria(_1,_2){var _3={};if(!_2){_3._constructor="AdvancedCriteria";if(_1.strictSQLFiltering)_3.strictSQLFiltering=true}
if(_1.criteria){if(!isc.isAn.Array(_1.criteria)){_1.criteria=[_1.criteria]}
_3.operator=_1.operator;_3.criteria=[];for(var i=0;i<_1.criteria.length;i++){_3.criteria.add(this.normalizeAdvancedCriteria(_1.criteria[i],true))}}else{if(!isc.isAn.Array(_1.value)){isc.addProperties(_3,_1)}else{var _5=this.getSearchOperator(_1.operator);if(!_5||!_5.canNormalize){isc.addProperties(_3,_1)}else{_3.operator=_5.negate?"and":"or";_3.criteria=[];for(var i=0;i<_1.value.length;i++){_3.criteria.add({fieldName:_1.fieldName,operator:_1.operator,value:_1.value[i]})}}}}
if(!_3.operator&&_3.fieldName&&_3.value)_3.operator="equals";return _3},isc.A.addSearchOperator=function isc_DataSource_addSearchOperator(_1,_2){if(!_1||!_1.ID){isc.logWarn("Attempted to add null search operator, or operator with no ID");return}
isc.DataSource.addSearchOperator(_1);if(!this.$570)this.$570={$58d:true};if(_2){for(var _3=0;_3<this.$570.length;_3++){this.$570[_3].remove(_1.ID)}
for(var _3=0;_3<_2.length;_3++){if(!this.$570[_2[_3]]){this.$570[_2[_3]]=[_1.ID]}
if(!this.$570[_2[_3]].contains(_1.ID)){this.$570[_2[_3]].add(_1.ID)}}}else{if(!this.$570["_all_"]){this.$570["_all_"]=[_1.ID]}
if(!this.$570["_all_"].contains(_1.ID)){this.$570["_all_"].add(_1.ID)}}},isc.A.getSearchOperator=function isc_DataSource_getSearchOperator(_1){return isc.DataSource.$57z[_1]},isc.A.getTypeOperators=function isc_DataSource_getTypeOperators(_1){var _2=[];_1=_1||"text";var _3=isc.SimpleType.getType(_1);var _4=_3;if(this.$570){while(_4&&!this.$570[_4.name]){_4=isc.SimpleType.getType(_4.inheritsFrom,this)}
if(_4&&this.$570[_4.name]){_2=this.$570[_4.name]}
_2.addList(this.$570["_all_"]);if(!this.$570.$58d&&_2.length>0){return _2}}
_4=isc.SimpleType.getType(_1);while(_4&&!isc.DataSource.$570[_4.name]){_4=isc.SimpleType.getType(_4.inheritsFrom,this)}
if(_4&&isc.DataSource.$570[_4.name]){_2.addList(isc.DataSource.$570[_4.name])}
_2.addList(isc.DataSource.$570["_all_"]);return _2},isc.A.setTypeOperators=function isc_DataSource_setTypeOperators(_1,_2){if(!_2)return;if(!isc.isAn.Array(_2))_2=[_2];if(!this.$570)this.$570={};this.$570[_1||"_all_"]=_2;this.$570.$58d=false},isc.A.getFieldOperators=function isc_DataSource_getFieldOperators(_1){if(isc.isA.String(_1))_1=this.getField(_1);if(!_1)return[];if(_1&&_1.validOperators)return _1.validOperators;var _2=isc.SimpleType.getType(_1.type);var _3=_1.type||"text";if(!_2)_3="text";return this.getTypeOperators(_3)},isc.A.getFieldOperatorMap=function isc_DataSource_getFieldOperatorMap(_1,_2,_3,_4,_5){if(isc.isA.String(_1))_1=this.getField(_1);var _6={},_5=_5||this.getFieldOperators(_1);_2=_2||_1.validOperators!=null;for(var _7=0;_7<_5.length;_7++){var _8=_5[_7];var _9=this.getSearchOperator(_8);if(!_9)continue;if(_9.hidden&&!_2&&(!isc.isAn.Array(_1.validOperators)||!_1.validators.contains(_8)))continue;if(!_3||(_9.valueType==_3)==!_4){_6[_5[_7]]=_9.titleProperty==null?_9.title:isc.Operators[_9.titleProperty]}}
return _6},isc.A.getTypeOperatorMap=function isc_DataSource_getTypeOperatorMap(_1,_2,_3,_4){var _5={},_6=this.getTypeOperators(_1);for(var _7=0;_7<_6.length;_7++){var _8=this.getSearchOperator(_6[_7]);if(_8&&(!_8.hidden||_2)){if(!_3||(_8.valueType==_3)==!_4)
_5[_6[_7]]=_8.titleProperty==null?_8.title:isc.Operators[_8.titleProperty]}}
return _5},isc.A.recordsAsText=function isc_DataSource_recordsAsText(_1,_2){if(!isc.isA.TextExportSettings(_2)){_2=isc.TextExportSettings.create(_2)}
var i,_4;var _5=[];var _6=_2.fieldList;if(!_6)_6=this.getFieldNames();for(i=0;i<_6.length;i++){var _7=_6[i];_4=this.fields[_7];if(_4)_5.add(_4);else _5.add(_7)}
var _8="";for(i=0;i<_1.length;i++){if(i>0)_8+=_2.lineSeparator;_8+=this.$93q(_1[i],_5,_2)}
return _8},isc.A.$93q=function isc_DataSource__recordAsText(_1,_2,_3){var _4,_5;var _6=_3.forceText;var _7=_3.getEscapingModeEscapeChar();for(var i=0,_9="";i<_2.length;i++,_9+=_4){if(i>0)_9+=_3.fieldSeparator;var _10=_2[i];if(isc.isA.String(_10)){_4=_1[_10];_5="text"}else{_5=_10.type;_4=_1[_10.name];if(_10.exportForceText){_6=_10.exportForceText}}
var _11=false;if(_3.useDisplayValue&&_10.name!=null){_4=this.getDisplayValue(_10.name,_4);if(_4!=null){_4=_4.toString();_11=true}}
if(!_11){_4=isc.DataSource.$93p(_4,_5,_3)}
if(_5=="text")switch(_6){case"leadingSpace":_4=" "+_4;break;case"formula":_4="="+_4}
_4=_4.replace(/(\")/g,_7+"$1");if(_3.quoteValues)_4="\""+_4+"\""}
return _9},isc.A.recordsFromText=function isc_DataSource_recordsFromText(_1,_2){if(!_1)return[];if(!isc.isA.TextImportSettings(_2)){_2=isc.TextImportSettings.create(_2)}
_1=_2.addFinalLineSeparatorIfNotPresent(_1);var _3=_2.fieldList;if(!_3)_3=this.getFieldNames();if(_2.hasHeaderLine){_3=[];_1=this.$93u(_1,_2,_3)}
if(_3.length==0)return[];var _4=this,_5=[];var _6={},_7=0;var _8=function(_10){if(_7<_3.length){_6[_3[_7++]]=_10}};var _9=function(){if(!isc.TextImportSettings.$935){isc.Validator.$93n=true;_4.validateJSONRecord(_6,true);isc.Validator.$93n=false}
_5.add(_6);_6={};_7=0;return false};_2.parseTextAndApplyFunctions(_1,_8,_9);return _5},isc.A.$93u=function isc_DataSource__processAndRemoveHeaderLine(_1,_2,_3){var _4={},_5={};if(!isc.TextImportSettings.$935){var _6=this.getFieldNames();for(var i=0;i<_6.length;i++){var _8=this.getField(_6[i]);if(_8.name!=null)_5[_8.name.toUpperCase()]=_8;if(_8.title!=null)_4[_8.title.toUpperCase()]=_8}}
var _9=function(_12){var _10=_12.toUpperCase().replace(/^(\s)*/,"").replace(/(\s)*$/,"");if(_4[_10])_3.add(_4[_10].name);else if(_5[_10])_3.add(_5[_10].name);else _3.add(_12)};var _11=function(){return true};return _2.parseTextAndApplyFunctions(_1,_9,_11)});isc.B._maxIndex=isc.C+14;isc.A=isc.DataSource.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.evaluateCriterion=function isc_DataSource_evaluateCriterion(_1,_2){if(_2.requiresServer==true)return true;var _3=this.getSearchOperator(_2.operator);if(_3==null){isc.logWarn("Attempted to use unknown operator "+_2.operator);return false}
var _4=true;if(this.$908){for(var i=0;i<this.$909.length;i++){if(this.$909[i]==_2){_4=false;if(this.$91a[i]==true){return true}}}}
if(_4){var _6;if(this.$908){_6=this.$909.length;this.$909[_6]=_2}
if(_2.fieldName){var _7=this,_8=this.getField(_2.fieldName);if(_8==null){_7=this.getDataSourceForDataPath(_2.fieldName);_8=this.getFieldForDataPath(_2.fieldName);if(_7==null){_7=this}}
if(_8==null){if(this.dropUnknownCriteria){this.logInfo("evaluateCriterion passed criterion for field not explicitly listed in this dataSource:"+_2.fieldName+" - dropping this filter","AdvancedCriteria");if(this.$908){this.$91a[_6]=true}
return true}else{this.logInfo("evaluateCriterion passed criterion for field not explicitly listed in this dataSource:"+_2.fieldName+" - continuing with filter","AdvancedCriteria")}}else{var _9=_7.getFieldOperators(_8.name);if(!_9.contains(_3.ID)){this.logWarn("Operator "+_3.ID+" is not valid for field "+_2.fieldName+". Continuing anyway.")}}}}
var _8=this.getField(_2.fieldName);var _10=isc.DataSource.getPathValue(_1,_2.fieldName,_8);var _11=_8&&(isc.SimpleType.inheritsFrom(_8.type,"date")||isc.SimpleType.inheritsFrom(_8.type,"datetime"));var _12=function(_19){if(_11&&!isc.isA.Date(_19)&&isc.DateUtil.isRelativeDate(_19)){return isc.DateUtil.getAbsoluteDate(_19)}
return _19}
var _13={value:_12(_2.value),start:_12(_2.start),end:_12(_2.end)};if(_3.valueType==="fieldName"){var _14=this.getField(_13.value);var _15=isc.DataSource.getPathValue(_1,_13.value,_14);_13.otherValue=_12(_15)}else if(_3.valueType==="criteria"){_13.criterion=_2;_13.record=_1}
var _16=false;if(_8&&_8.multiple){if(isc.isAn.Array(_10)&&!isc.isAn.Array(_13.otherValue)){var _17=isc.DataSource.get(_8.type);for(var i=0;i<_10.length;i++){var _18=_10[i];if(isc.isA.Object(_18)&&_17){if(_18[_17.getPrimaryKeyFieldName()]){_18=_18[_17.getPrimaryKeyFieldName()]}else{isc.logWarn("The field '"+_2.fieldName+"' being tested is a multiple valuefield with a DataSource type but either the DataSource does not existor it does not have a primary key field. Skipping criterion.");break}}
_16=_3.condition(_2.fieldName,_18,_13,this,_11);if(_16){break}}}else{if(isc.isAn.Array(_10)&&isc.isAn.Array(_13.otherValue)&&_3.ID!=="equalsField"&&_3.ID!=="iEqualsField"&&_3.ID!=="notEqualField"&&_3.ID!=="iNotEqualField")
{isc.logWarn("Only 'equalsField', 'iEqualsField', 'notEqualField' and'iNotEqualField' are valid operators when comparing two multiple: truefields. Ignoring criterion with operator '"+_2.operator+"'.");_16=true}else{_16=_3.condition(_2.fieldName,_10,_13,this,_11)}}}else{_16=_3.condition(_2.fieldName,_10,_13,this,_11)}
return(_3.negate?!_16:_16)},isc.A.recordsMatchingAdvancedFilter=function isc_DataSource_recordsMatchingAdvancedFilter(_1,_2,_3){var _4=[];this.$59u=false;this.$59v=_2.strictSQLFiltering;if(this.$59v==null)this.$59v=this.strictSQLFiltering;var _5=false;if(!this.$908){this.$91b()}else{_5=true}
for(var _6=0;_6<_1.length;_6++){if(!_2.operator||this.evaluateCriterion(_1[_6],_2)){_4.add(_1[_6])}}
if(!_5)this.$91c();return _4},isc.A.$91b=function isc_DataSource__startApplyingCriteriaToList(){this.$908=true;this.$909=[];this.$91a=[]},isc.A.$91c=function isc_DataSource__endApplyingCriteriaToList(){delete this.$909;delete this.$91a;delete this.$908},isc.A.compareAdvancedCriteria=function isc_DataSource_compareAdvancedCriteria(_1,_2,_3){_1=isc.DataSource.simplifyAdvancedCriteria(_1,true);_2=isc.DataSource.simplifyAdvancedCriteria(_2,true);if(_2==null)return _1==null?0:1;if(_1==null)return-1;_1=this.normalizeAdvancedCriteria(_1);_2=this.normalizeAdvancedCriteria(_2);var _4=this.getSearchOperator(_2.operator);var _5=this.getSearchOperator(_1.operator);if(!_4&&!_5){return 0}
if(_4!=_5){var _6=-1;if(_4&&_4.ID=="or"){var _7={operator:"or",criteria:[_1]};_6=_4.compareCriteria(_7,_2,_4,this)}
if(_6!=-1)return _6;if(_5&&_5.ID=="and"){var _7={operator:"and",criteria:[_2]};return _5.compareCriteria(_1,_7,_5,this)}
return-1}
return _4.compareCriteria(_1,_2,_4,this)},isc.A.splitCriteria=function isc_DataSource_splitCriteria(_1,_2){var _3={},_4=_1,_5=false;if(_1==null||_2==null)return _3;if(this.isAdvancedCriteria(_1)){_4=this.$867(_1);_5=true}
if(_4==null)return _3;for(var i=0;i<_2.length;i++){var _7=_2[i];if(_4[_7]!=null){_3[_7]=_4[_7];if(!_5){delete _1[_7]}else{if(_1.fieldName){delete _1.fieldName;delete _1.value}else{for(var c=0;c<_1.criteria.length;c++){var _9=_1.criteria[c];if(_9.fieldName==_7){_1.criteria.removeAt(c);break}}}}}}
if(_5&&_1.criteria&&_1.criteria.length==0){delete _1.criteria;delete _1.operator;delete _1._constructor}
return _3},isc.A.$867=function isc_DataSource__convertAdvancedCriteriaToSimple(_1){var _2={};if(_1.fieldName){if(_1.operator!="equals"){isc.logWarn("splitCriteria: advanced criteria operator, "+_1.operator+", not supported.");return null}
_2[_1.fieldName]=_1.value;return _2}
if(_1.operator!="and"){isc.logWarn("splitCriteria: advanced criteria top-level operator, "+_1.operator+", not supported.");return null}
for(var i=0;i<_1.criteria.length;i++){var _4=_1.criteria[i];if(_4.operator!="equals"){isc.logWarn("splitCriteria: advanced criteria second-level operator, "+_1.operator+", not supported.");return null}
_2[_4.fieldName]=_4.value}
return(isc.isAn.emptyObject(_2)?null:_2)});isc.B._maxIndex=isc.C+7;isc.DataSource.registerStringMethods({transformRequest:"dsRequest",transformResponse:"dsResponse,dsRequest,data"});isc.$571=function(){var _1=function(_51,_74,_75,_76,_77){if(_76.$59v){if(_74==null||_75.value==null){return(this.negate?!_76.$59u:_76.$59u)}}
if(isc.isA.Date(_75.value)&&isc.isA.Date(_74)){return(_76.compareDates(_75.value,_74,_51)==0)}else{return(_75.value==_74)}};var _2=function(_51,_74,_75,_76,_77,_78){var _3=_75.start||_75.value;var _4=_75.end||_75.value;if(_76.$59v){if(_74==null||(this.lowerBounds&&_3==null)||(this.upperBounds&&_4==null)){return _76.$59u}}
var _5=true;var _6=true;var _7=isc.isA.Date(_74);var _8=isc.isA.Number(_74);var _9=isc.isA.String(_74);if(this.lowerBounds&&_3&&((_8&&isNaN(_3))||(_3&&_7&&(!isc.isA.Date(_3)))||(_3&&_9&&(!isc.isA.String(_3)&&!isc.isA.Number(_3))))){return false}
if(this.upperBounds&&_4&&((_8&&isNaN(_4))||(_4&&_7&&(!isc.isA.Date(_4)))||(_4&&_9&&(!isc.isA.String(_4)&&!isc.isA.Number(_4))))){return false}
var _10;if(!_78){if(_3===null||_3===_10){_5=false}
if(_4===null||_4===_10){_6=false}
if(_7&&!isc.isA.Date(_3))_5=false;if(_7&&!isc.isA.Date(_4))_6=false}
_7=isc.isA.Date(_3)||isc.isA.Date(_4);_8=isc.isA.Number(_3)||isc.isA.Number(_4);_9=isc.isA.String(_3)||isc.isA.String(_4);var _11=_9&&this.caseInsensitive;if(_74===null||_74===_10){if(_7){_74=new Date(-8640000000000000)}else if(_8){_74=Number.MIN_VALUE}else{_74=""}}else{if(_8&&isNaN(_74)){_3=""+_3;_4=""+_4}
if(_7&&!isc.isA.Date(_74)){return false}}
if(this.lowerBounds&&_5){if(_76.compareValues(_3,_74,_51,_11)<=(this.inclusive?-1:0)){return false}}
if(this.upperBounds&&_6){if(_76.compareValues(_4,_74,_51,_11)>=(this.inclusive?1:0)){return false}}
return true};var _12=function(_51,_74,_75,_76,_77){if(isc.isA.Number(_74)){_74=""+_74}
if(isc.isA.Boolean(_74)){isc.logWarn("Attempt to compare a Boolean as String, testing value "+_75.value+" with operator "+this.ID+". This is an invalid comparison, so we are returning FALSE.");return false}
if(isc.isA.Date(_74)){isc.logWarn("Attempt to compare a Date as String, testing value "+_75.value+" with operator "+this.ID+". This is an invalid comparison, so we are returning FALSE.");return false}
if(_74!=null&&!isc.isA.String(_74)){return true}
if(_74==null){if(_76.$59v){var _13=_76.getField(_51);if(_13&&(_13.type=="number"||_13.type=="integer"||_13.type=="sequence"||_13.type=="float")){if(_75.value==null||isc.isA.Number(_75.value)||isc.isA.Date(_75.value)){return(this.negate?!_76.$59u:_76.$59u)}else{return false}}else{return(this.negate?!_76.$59u:_76.$59u)}}else{return false}}
var _14=_75.value||"";if(isc.isA.Number(_14)){_14=""+_14}
if(!isc.isA.String(_14)||!isc.isA.String(_74)){return false}
if(this.caseInsensitive){_74=_74.toLowerCase();_14=_14.toLowerCase()}
var _15=false;if(this.startsWith){_15=isc.startsWith(_74,_14)}else if(this.endsWith){_15=isc.endsWith(_74,_14)}else if(this.equals){_15=(_74==_14)}else{_15=isc.contains(_74,_14)}
return _15};var _16=function(_51,_74,_75,_76,_77){return(_74==null)};var _17=function(_51,_74,_75,_76,_77){if(!_75.value){return false}
if(isc.isA.Date(_75.value)||isc.isA.Date(_74)||isc.DateUtil.isRelativeDate(_75.value))
{return false}
var _18;if(this.caseInsensitive){_18=new RegExp(_75.value,"i")}else{_18=new RegExp(_75.value)}
return _18.test(_74)};var _19=function(_51,_74,_75,_76,_77,_78){if(!_76.patternEscapeChar||_76.patternEscapeChar.length>1){throw"dataSource.patternEscapeChar cannot be null or undefined"}
var _20=isc.isA.Array(_76.patternSingleWildcard)?_76.patternSingleWildcard:[_76.patternSingleWildcard||"?","%"];var _21=isc.isA.Array(_76.patternMultiWildcard)?_76.patternMultiWildcard:[_76.patternMultiWildcard||"*"];var _22=false;var _23="";var _24=_75.value;for(var i=0;i<_24.length;i++){if(_24[i]===_76.patternEscapeChar){_22=true;continue}
if(_22){_23+=_24[i].replace(/([.*+?^=!:${}()|\[\]\/\\])/g,"\\$1");_22=false}else{if(_21.contains(_24[i])){_23+=".*";continue}
if(_20.contains(_24[i])){_23+=".";continue}
_23+=_24[i]}}
if(_78){_75.value="^.*"+_23+".*$"}else{_75.value="^"+_23+"$"}
return _17.apply(this,[_51,_74,_75,_76,_77])};var _26=function(_51,_74,_75,_76,_77){return _19.apply(this,[_51,_74,_75,_76,_77,true])};var _27=function(_51,_74,_75,_76,_77){var _24=_75.value||[];if(!isc.isAn.Array(_24)){_24=[_24]}
if(isc.isA.Date(_74)){for(var i=0;i<_24.length;i++){var _7=isc.isA.Date(_24[i]);if(_77&&!_7&&isc.DateUtil.isRelativeDate(_24[i])){_24[i]=isc.DateUtil.getAbsoluteDate(_24[i])}
if(isc.isA.Date(_24[i])&&_76.compareDates(_24[i],_74,_51)==0)
{return true}}}else{return _24.contains(_74)}};var _28=function(_51,_74,_75,_76,_77){if(_75.value==null){return true}
var _29=false;if(isc.isAn.Array(_74)&&isc.isAn.Array(_75.otherValue)){_29=_74.equals(_75.otherValue)}else{_29=(_75.otherValue==_74)}
if(isc.isA.Date(_75.otherValue)&&isc.isA.Date(_74)){_29=(_76.compareDates(_75.otherValue,_74,_51,_75.value)==0)}
return _29};var _30=function(_51,_74,_75,_76,_77){if(_75.value==null){return true}
_75.value=_75.otherValue;return _12.apply(this,[_51,_74,_75,_76,_77])};var _31=function(_51,_74,_75,_76,_77){if(_75.value==null){return true}
_75.value=_75.otherValue;return _2.apply(this,[_51,_74,_75,_76,_77,true])};var _32=function(_51,_74,_75,_76,_77){var _33=_75.criterion;var _34=_75.record;var _35;if(!_33.criteria){_33.criteria=[]}
if(!isc.isAn.Array(_33.criteria)){isc.logWarn("AdvancedCriteria: found boolean operator where subcriteria was not an array.  Subcriteria was: "+isc.echoFull(_33.criteria));return false}
if(this.isNot){_76.$59u=!_76.$59u}
for(var _36=0;_36<_33.criteria.length;_36++){var _37=_76.evaluateCriterion(_34,_33.criteria[_36]);if(this.isAnd&&!_37){_35=false}
if(this.isNot&&_37){_35=false}
if(this.isOr&&_37){_35=true}
if(_35!=null){break}}
if(_35==null){_35=!this.isOr}
if(this.isNot){_76.$59u=!_76.$59u}
return _35};var _38=function(_74,_75,_76,_77){if(!_75.criteria)_75.criteria=[];if(!isc.isAn.Array(_75.criteria)){isc.logWarn("AdvancedCriteria: boolean compareCriteria found where old subcriteria was not an array");return-1}
if(!_74.criteria)_74.criteria=[];if(!isc.isAn.Array(_74.criteria)){isc.logWarn("AdvancedCriteria: boolean compareCriteria found where new subcriteria was not an array");return-1}
var _39,_40=0,_41=_75.criteria.length,_42=_74.criteria.length;if(_42>_41&&_76.isOr){return-1}
var _43=isc.clone(_75.criteria);var _44=isc.clone(_74.criteria);for(var i=0;i<_41;i++){var _45=_43[i];var _46=i>_42?null:_44[i];if(!_46||(_46&&_46.fieldName!=_45.fieldName||_46.operator!=_45.operator||_46.processed==true)){_46=null;for(var j=0;j<_42;j++){if(_44[j].processed)continue;if(_44[j].fieldName==_45.fieldName&&_44[j].operator==_45.operator){_46=_44[j];break}}}
if(_46&&_45){_46.processed=true;_39=_77.compareAdvancedCriteria(_46,_45)}else{if(_45&&!_46){if(_76.isOr)_39=1;if(_76.isAnd)_39=-1;if(_76.isNot)_39=-1}}
if(_76.isAnd&&_39==-1)return-1;if(_76.isOr&&_39==-1)return-1;if(_76.isNot&&_39==1)return-1;if(_39!=0)_40=1}
for(var i=0;i<_42;i++){if(!_44[i].processed){if(_76.isOr)return-1;if(_76.isAnd)return 1;if(_76.isNot)return-1}}
return _40};var _48=function(_74,_75,_76,_77){if(_74.fieldName==_75.fieldName){var _49=_77.compareValues(_74.value,_75.value,_74.fieldName)==0;if(_49){return 0}}
return-1};var _50=function(_74,_75,_76,_77){var _51=_74.fieldName;if(_74.fieldName==_75.fieldName){if(_76.upperBounds&&_76.lowerBounds){if(_77.compareValues(_74.start,_75.start,_51)==0){if(_77.compareValues(_74.end,_75.end,_51)==0){return 0}}}else{if(_77.compareValues(_74.value,_75.value,_51)==0){return 0}}
var _52=_74.start==null?_74.value:_74.start,_53=_75.start==null?_75.value:_75.start,_54=_74.start==null?_74.value:_74.end,_55=_75.start==null?_75.value:_75.end;var _7,_56;var _57=true,_58=true,_59=true,_60=true;if(_53==null)_57=false;if(_55==null)_58=false;if(_52==null)_59=false;if(_54==null)_60=false;if(_76.lowerBounds&&!_76.upperBounds&&!_59&&!_57){return 0}
if(_76.lowerBounds&&!_76.upperBounds){if(_59&&!_57){return 1}
if(_57&&!_59){return-1}
var _61=_77.compareValues(_52,_53,_51);if(_61==-1){return 1}else if(_61==0){return 0}}
if(_76.upperBounds&&!_76.lowerBounds&&!_60&&!_58){return 0}
if(_76.upperBounds&&!_76.lowerBounds){if(_60&&!_58){return 1}
if(_58&&!_60){return-1}
var _61=_77.compareValues(_52,_53,_51);if(_61==1){return 1}else if(_61==0){return 0}}
if(_76.lowerBounds&&_76.upperBounds){if(_77.compareValues(_52,_53,_51)<=0&&_77.compareValues(_52,_55,_51)>=0&&_77.compareValues(_54,_55,_51)>=0&&_77.compareValues(_54,_53,_51)<=0)
{return 1}
if((_59&&!_57)||(_60&&!_58)){return 1}
if(!_59&&!_57&&!_60&&!_57){return 0}}}
return-1};var _62=function(_74,_75,_76){var _63=_75.value;var _64=_74.value;if(isc.isA.Number(_63))_63=""+_63;if(isc.isA.Number(_64))_64=""+_64;if(!isc.isA.String(_63)||!isc.isA.String(_64))return-1;if(_76.caseInsensitive){_63=_63.toLowerCase();_64=_64.toLowerCase()}
if(_74.fieldName==_75.fieldName&&_74.value==_75.value&&!_76.equals)
{return 0}
if(_76.equals){return _63==_64?0:-1}
if(_76.startsWith&&!_76.negate&&_64.length>_63.length&&isc.startsWith(_64,_63))
{return 1}
if(_76.startsWith&&_76.negate&&_63.length>_64.length&&isc.startsWith(_63,_64))
{return 1}
if(_76.endsWith&&!_76.negate&&_64.length>_63.length&&isc.endsWith(_64,_63))
{return 1}
if(_76.endsWith&&_76.negate&&_63.length>_64.length&&isc.endsWith(_63,_64))
{return 1}
if(!_76.startsWith&&!_76.endsWith&&!_76.negate&&_64.length>_63.length&&isc.contains(_64,_63))
{return 1}
if(!_76.startsWith&&!_76.endsWith&&_76.negate&&_63.length>_64.length&&isc.contains(_63,_64))
{return 1}
return-1};var _65=function(_74,_75,_76){if(_74.fieldName==_75.fieldName){return 0}
return-1};var _66=function(_74,_75,_76){if(_74.value==_75.value&&_74.fieldName==_75.fieldName){return 0}
return-1};var _67=function(_74,_75,_76){if(_74.value==_75.value&&_74.fieldName==_75.fieldName){return 0}
if(_74.value.length>_75.value.length&&_74.fieldName==_75.fieldName){var _68=0;var _69=0;var _70="*";while(_69<_75.value.length){while(_68<_74.value.length){if(_74.value[_68]==_75.value[_69]){_68++;break}
if(_74.value[_68]==_70){return-1}
_68++}
_69++}
while(_68<_74.value.length){if(_74.value[_68]==_70){return-1}
_68++}
return 1}
return-1};var _71=function(_74,_75,_76){if(_74.fieldName==_75.fieldName){if(!isc.isAn.Array(_75.value)||!isc.isAn.Array(_74.value)){return-1}
if(_74.value.equals(_75.value)){return 0}
if(!_76.negate&&_75.value.containsAll(_74.value)){return 1}
if(_76.negate&&_74.value.containsAll(_75.value)){return 1}}
return-1};var _72=function(_74,_75,_76){if(_74.value==_75.value&&_74.fieldName==_75.fieldName){return 0}
return-1};var _73=[{ID:"equals",titleProperty:"equalsTitle",negate:false,valueType:"fieldType",condition:_1,compareCriteria:_48,symbol:"==",wildCard:"*",canNormalize:true,getCriterion:function(_51,_74){var _15={fieldName:_51,operator:this.ID};if(isc.isA.RelativeDateItem(_74))
_15.value=_74.getRelativeDate()||_74.getValue();else _15.value=_74.getValue();return _15}},{ID:"notEqual",titleProperty:"notEqualTitle",negate:true,valueType:"fieldType",condition:_1,compareCriteria:_48,symbol:"!",wildCard:"*",canNormalize:true,getCriterion:function(_51,_74){var _15={fieldName:_51,operator:this.ID};if(isc.isA.RelativeDateItem(_74))
_15.value=_74.getRelativeDate()||_74.getValue();else _15.value=_74.getValue();return _15}},{ID:"greaterThan",titleProperty:"greaterThanTitle",lowerBounds:true,valueType:"fieldType",condition:_2,compareCriteria:_50,symbol:">",getCriterion:function(_51,_74){var _15={fieldName:_51,operator:this.ID};if(isc.isA.RelativeDateItem(_74))
_15.value=_74.getRelativeDate()||_74.getValue();else _15.value=_74.getValue();return _15}},{ID:"lessThan",titleProperty:"lessThanTitle",upperBounds:true,valueType:"fieldType",condition:_2,compareCriteria:_50,symbol:"<",getCriterion:function(_51,_74){var _15={fieldName:_51,operator:this.ID};if(isc.isA.RelativeDateItem(_74))
_15.value=_74.getRelativeDate()||_74.getValue();else _15.value=_74.getValue();return _15}},{ID:"greaterOrEqual",titleProperty:"greaterOrEqualTitle",lowerBounds:true,inclusive:true,valueType:"fieldType",condition:_2,compareCriteria:_50,symbol:">=",getCriterion:function(_51,_74){var _15={fieldName:_51,operator:this.ID};if(isc.isA.RelativeDateItem(_74))
_15.value=_74.getRelativeDate()||_74.getValue();else _15.value=_74.getValue();return _15}},{ID:"lessOrEqual",titleProperty:"lessOrEqualTitle",upperBounds:true,inclusive:true,valueType:"fieldType",condition:_2,compareCriteria:_50,symbol:"<=",getCriterion:function(_51,_74){var _15={fieldName:_51,operator:this.ID};if(isc.isA.RelativeDateItem(_74))
_15.value=_74.getRelativeDate()||_74.getValue();else _15.value=_74.getValue();return _15}},{ID:"between",titleProperty:"betweenTitle",lowerBounds:true,upperBounds:true,hidden:true,valueType:"valueRange",condition:_2,compareCriteria:_50,getCriterion:function(_51,_74){var _15={fieldName:_51,operator:this.ID};if(isc.isA.RelativeDateItem(_74))
_15.value=_74.getRelativeDate()||_74.getValue();else _15.value=_74.getValue();return _15}},{ID:"iBetween",titleProperty:"iBetweenTitle",lowerBounds:true,upperBounds:true,hidden:true,valueType:"valueRange",condition:_2,caseInsensitive:true,compareCriteria:_50,getCriterion:function(_51,_74){var _15={fieldName:_51,operator:this.ID};if(isc.isA.RelativeDateItem(_74))
_15.value=_74.getRelativeDate()||_74.getValue();else _15.value=_74.getValue();return _15}},{ID:"betweenInclusive",titleProperty:"betweenInclusiveTitle",lowerBounds:true,upperBounds:true,valueType:"valueRange",inclusive:true,condition:_2,compareCriteria:_50,symbol:"...",getCriterion:function(_51,_74){var _15={fieldName:_51,operator:this.ID};if(isc.isA.RelativeDateItem(_74))
_15.value=_74.getRelativeDate()||_74.getValue();else _15.value=_74.getValue();return _15}},{ID:"iBetweenInclusive",titleProperty:"iBetweenInclusiveTitle",lowerBounds:true,upperBounds:true,valueType:"valueRange",inclusive:true,condition:_2,compareCriteria:_50,symbol:"...",caseInsensitive:true,getCriterion:function(_51,_74){var _15={fieldName:_51,operator:this.ID};if(isc.isA.RelativeDateItem(_74))
_15.value=_74.getRelativeDate()||_74.getValue();else _15.value=_74.getValue();return _15}},{ID:"iEquals",titleProperty:"iEqualsTitle",equals:true,caseInsensitive:true,valueType:"fieldType",condition:_12,symbol:"==",wildCard:"*",canNormalize:true,compareCriteria:_62},{ID:"iContains",titleProperty:"iContainsTitle",caseInsensitive:true,valueType:"fieldType",condition:_12,symbol:"~",canNormalize:true,compareCriteria:_62},{ID:"iStartsWith",titleProperty:"iStartsWithTitle",startsWith:true,caseInsensitive:true,valueType:"fieldType",condition:_12,symbol:"^",canNormalize:true,compareCriteria:_62},{ID:"iEndsWith",titleProperty:"iEndsWithTitle",endsWith:true,caseInsensitive:true,valueType:"fieldType",condition:_12,symbol:"|",canNormalize:true,compareCriteria:_62},{ID:"contains",titleProperty:"containsTitle",hidden:true,valueType:"fieldType",condition:_12,symbol:"~",canNormalize:true,compareCriteria:_62},{ID:"startsWith",titleProperty:"startsWithTitle",startsWith:true,hidden:true,valueType:"fieldType",condition:_12,symbol:"^",canNormalize:true,compareCriteria:_62},{ID:"endsWith",titleProperty:"endsWithTitle",endsWith:true,hidden:true,valueType:"fieldType",condition:_12,symbol:"|",canNormalize:true,compareCriteria:_62},{ID:"iNotEqual",titleProperty:"iNotEqualTitle",caseInsensitive:true,equals:true,negate:true,valueType:"fieldType",condition:_12,symbol:"!",wildCard:"*",canNormalize:true,compareCriteria:_62},{ID:"iNotContains",titleProperty:"iNotContainsTitle",caseInsensitive:true,negate:true,valueType:"fieldType",condition:_12,symbol:"!~",canNormalize:true,compareCriteria:_62},{ID:"iNotStartsWith",titleProperty:"iNotStartsWithTitle",startsWith:true,caseInsensitive:true,negate:true,valueType:"fieldType",condition:_12,symbol:"!^",canNormalize:true,compareCriteria:_62},{ID:"iNotEndsWith",titleProperty:"iNotEndsWithTitle",endsWith:true,caseInsensitive:true,negate:true,valueType:"fieldType",condition:_12,symbol:"!@",canNormalize:true,compareCriteria:_62},{ID:"notContains",titleProperty:"notContainsTitle",negate:true,hidden:true,valueType:"fieldType",condition:_12,symbol:"!~",canNormalize:true,compareCriteria:_62},{ID:"notStartsWith",titleProperty:"notStartsWithTitle",startsWith:true,negate:true,hidden:true,valueType:"fieldType",condition:_12,symbol:"!^",canNormalize:true,compareCriteria:_62},{ID:"notEndsWith",titleProperty:"notEndsWithTitle",endsWith:true,negate:true,hidden:true,valueType:"fieldType",condition:_12,symbol:"!@",canNormalize:true,compareCriteria:_62},{ID:"isNull",titleProperty:"isNullTitle",valueType:"none",condition:_16,symbol:"#",compareCriteria:_65},{ID:"notNull",titleProperty:"notNullTitle",negate:true,valueType:"none",condition:_16,symbol:"!#",compareCriteria:_65},{ID:"regexp",titleProperty:"regexpTitle",hidden:true,valueType:"custom",condition:_17,symbol:"/regex/",compareCriteria:_66},{ID:"iregexp",titleProperty:"iregexpTitle",hidden:true,caseInsensitive:true,valueType:"custom",condition:_17,symbol:"/regex/",compareCriteria:_66},{ID:"matchesPattern",titleProperty:"matchesPatternTitle",hidden:true,valueType:"custom",symbol:"==i~",wildcard:"*",condition:_19,compareCriteria:_67},{ID:"iMatchesPattern",titleProperty:"iMatchesPatternTitle",hidden:true,caseInsensitive:true,valueType:"custom",symbol:"==~",wildcard:"*",condition:_19,compareCriteria:_67},{ID:"containsPattern",titleProperty:"containsPatternTitle",hidden:true,valueType:"custom",symbol:"=i~",wildcard:"*",condition:_26,compareCriteria:_67},{ID:"iContainsPattern",titleProperty:"iContainsPatternTitle",hidden:true,caseInsensitive:true,valueType:"custom",symbol:"=~",wildcard:"*",condition:_26,compareCriteria:_67},{ID:"inSet",titleProperty:"inSetTitle",valueType:"valueSet",condition:_27,compareCriteria:_71,symbol:"=(",closingSymbol:")",valueSeparator:"|",processValue:function(_24,_74){return _24.split(this.valueSeparator)}},{ID:"notInSet",titleProperty:"notInSetTitle",negate:true,valueType:"valueSet",condition:_27,compareCriteria:_71,symbol:"!=(",closingSymbol:")",valueSeparator:"|",processValue:function(_24,_74){return _24.split(this.valueSeparator)}},{ID:"equalsField",titleProperty:"equalsFieldTitle",valueType:"fieldName",condition:_28,symbol:"=.",canNormalize:true,compareCriteria:_72,processValue:function(_24,_74){if(!_74)return _24;var _13=_74.getField(_24);if(_13)return _24;_13=_74.getFieldByTitle(_24);if(_13)return _13.name;return null}},{ID:"notEqualField",titleProperty:"notEqualFieldTitle",negate:true,valueType:"fieldName",condition:_28,canNormalize:true,compareCriteria:_72},{ID:"iEqualsField",titleProperty:"iEqualsFieldTitle",equals:true,caseInsensitive:true,valueType:"fieldName",condition:_30,canNormalize:true,compareCriteria:_72},{ID:"iNotEqualField",titleProperty:"iNotEqualFieldTitle",equals:true,caseInsensitive:true,negate:true,valueType:"fieldName",condition:_30,canNormalize:true,compareCriteria:_72},{ID:"greaterThanField",titleProperty:"greaterThanFieldTitle",lowerBounds:true,valueType:"fieldName",condition:_31,compareCriteria:_72},{ID:"lessThanField",titleProperty:"lessThanFieldTitle",upperBounds:true,valueType:"fieldName",condition:_31,compareCriteria:_72},{ID:"greaterOrEqualField",titleProperty:"greaterOrEqualFieldTitle",lowerBounds:true,inclusive:true,valueType:"fieldName",condition:_31,compareCriteria:_72},{ID:"lessOrEqualField",titleProperty:"lessOrEqualFieldTitle",upperBounds:true,inclusive:true,valueType:"fieldName",condition:_31,compareCriteria:_72},{ID:"containsField",titleProperty:"containsFieldTitle",hidden:true,valueType:"fieldName",condition:_30,canNormalize:true,compareCriteria:_72},{ID:"startsWithField",titleProperty:"startsWithTitleField",startsWith:true,hidden:true,valueType:"fieldName",condition:_30,canNormalize:true,compareCriteria:_72},{ID:"endsWithField",titleProperty:"endsWithTitleField",endsWith:true,hidden:true,valueType:"fieldName",condition:_30,canNormalize:true,compareCriteria:_72},{ID:"iContainsField",titleProperty:"iContainsFieldTitle",hidden:true,caseInsensitive:true,valueType:"fieldName",condition:_30,canNormalize:true,compareCriteria:_72},{ID:"iStartsWithField",titleProperty:"iStartsWithTitleField",startsWith:true,hidden:true,caseInsensitive:true,valueType:"fieldName",condition:_30,canNormalize:true,compareCriteria:_72},{ID:"iEndsWithField",titleProperty:"iEndsWithTitleField",endsWith:true,hidden:true,caseInsensitive:true,valueType:"fieldName",condition:_30,canNormalize:true,compareCriteria:_72},{ID:"notContainsField",titleProperty:"notContainsFieldTitle",hidden:true,negate:true,valueType:"fieldName",condition:_30,canNormalize:true,compareCriteria:_72},{ID:"notStartsWithField",titleProperty:"notStartsWithTitleField",startsWith:true,hidden:true,negate:true,valueType:"fieldName",condition:_30,canNormalize:true,compareCriteria:_72},{ID:"notEndsWithField",titleProperty:"notEndsWithTitleField",endsWith:true,hidden:true,negate:true,valueType:"fieldName",condition:_30,canNormalize:true,compareCriteria:_72},{ID:"iNotContainsField",titleProperty:"iNotContainsFieldTitle",hidden:true,caseInsensitive:true,negate:true,valueType:"fieldName",condition:_30,canNormalize:true,compareCriteria:_72},{ID:"iNotStartsWithField",titleProperty:"iNotStartsWithTitleField",startsWith:true,hidden:true,caseInsensitive:true,negate:true,valueType:"fieldName",condition:_30,canNormalize:true,compareCriteria:_72},{ID:"iNotEndsWithField",titleProperty:"iNotEndsWithTitleField",endsWith:true,hidden:true,caseInsensitive:true,negate:true,valueType:"fieldName",condition:_30,canNormalize:true,compareCriteria:_72},{ID:"and",titleProperty:"andTitle",isAnd:true,valueType:"criteria",condition:_32,symbol:" and ",compareCriteria:_38},{ID:"not",titleProperty:"notTitle",isNot:true,valueType:"criteria",condition:_32,compareCriteria:_38},{ID:"or",titleProperty:"orTitle",isOr:true,valueType:"criteria",condition:_32,symbol:" or ",compareCriteria:_38}];for(var _36=0;_36<_73.length;_36++){isc.DataSource.addSearchOperator(_73[_36])}
isc.DataSource.setTypeOperators(null,["equals","notEqual","lessThan","greaterThan","lessOrEqual","greaterOrEqual","between","betweenInclusive","isNull","notNull","equalsField","notEqualField","greaterThanField","lessThanField","greaterOrEqualField","lessOrEqualField","and","or","not"]);isc.DataSource.setTypeOperators("text",["regexp","iregexp","contains","startsWith","endsWith","iEquals","iNotEqual","iBetween","iBetweenInclusive","iContains","iStartsWith","iEndsWith","notContains","notStartsWith","notEndsWith","iNotContains","iNotStartsWith","iNotEndsWith","containsField","startsWithField","endsWithField","iEqualsField","iNotEqualField","iContainsField","iStartsWithField","iEndsWithField","notContainsField","notStartsWithField","notEndsWithField","iNotContainsField","iNotStartsWithField","iNotEndsWithField","matchesPattern","iMatchesPattern","containsPattern","iContainsPattern","inSet","notInSet"]);isc.DataSource.setTypeOperators("integer",["iContains","iStartsWith","iEndsWith","iNotContains","iNotStartsWith","iNotEndsWith","iEqualsField","iNotEqualField","containsField","startsWithField","endsWithField","iContainsField","iStartsWithField","iEndsWithField","notContainsField","notStartsWithField","notEndsWithField","iNotContainsField","iNotStartsWithField","iNotEndsWithField","inSet","notInSet"]);isc.DataSource.setTypeOperators("float",["iContains","iStartsWith","iEndsWith","iNotContains","iNotStartsWith","iNotEndsWith","iEqualsField","iNotEqualField","containsField","startsWithField","endsWithField","iContainsField","iStartsWithField","iEndsWithField","notContainsField","notStartsWithField","notEndsWithField","iNotContainsField","iNotStartsWithField","iNotEndsWithField","inSet","notInSet"])};isc.$571();isc.DataSource.create({ID:"Object",fields:{},addGlobalId:false});isc.DataSource.create({ID:"ValueMap",addGlobalId:false,builtinSchema:true,canBeArrayValued:true,fields:{},$cp:"ID",$450:"id",xmlToJS:function(_1,_2){if(_1==null||isc.xml.elementIsNil(_1))return null;var _3=isc.xml.getElementChildren(_1),_4=isc.xml.getAttributes(_1),_5=!isc.isAn.emptyObject(_4);for(var i=0;i<_3.length;i++){var _7=_3[i],_8=_7.getAttribute(this.$cp)||_7.getAttribute(this.$450),_9=isc.xml.getElementText(_7);if(_8!=null&&_9!=null){_5=true;_4[_8]=_9}else if(_8!=null){_4[_8]=_8}else if(_9!=null){_4[_9]=_9}else{_4[isc.emptyString]=isc.emptyString}}
if(_5)return _4;return isc.getValues(_4)},xmlSerializeFields:function(_1,_2,_3){if(_1==null||isc.DS.isSimpleTypeValue(_1)){return this.Super("xmlSerializeFields",arguments)}
var _4=isc.SB.create(),_3=(_3||"")+(!_2||_2.indent!=false?"    ":"");if(isc.isAn.Array(_1)){for(var i=0;i<_1.length;i++){var _6=_1[i];_4.append("\r",_3,"<value>",isc.makeXMLSafe(_6),"</value>")}}else{for(var _7 in _1){var _6=_1[_7];_4.append("\r",_3,"<value id=\"",isc.makeXMLSafe(_7),"\">",isc.makeXMLSafe(_6),"</value>")}}
return _4.toString()}});isc.ClassFactory.defineInterface("DataModel");isc.DataModel.addInterfaceMethods({getDataSource:function(){if(isc.isA.String(this.dataSource))this.dataSource=isc.DS.get(this.dataSource);return this.dataSource},getOperationId:function(_1){var _2=this.getOperation(_1);return _2==null?null:(isc.isA.String(_2)?_2:_2.ID)},getOperation:function(_1){var _2=isc.rpc.getDefaultApplication(),_3,_4;var _5=_1+"Operation";if(this[_5]){_3=this[_5];if(isc.isAn.Object(_3))return _3;_4=_3}
if(_4==null||isc.isA.String(_4)){var _6=this.getDataSource();if(_6==null){this.logWarn("can't getOperation for type: "+_1+", no "+_5+" specified, and no dataSource to create an auto-operation");return null}
this.logInfo("creating auto-operation for operationType: "+_1);_3=isc.DataSource.makeDefaultOperation(_6,_1,_4);_4=_3.ID;this[_5]=_4}
return _3}});isc.defineClass("XJSONDataSource","DataSource");isc.A=isc.XJSONDataSource.getPrototype();isc.A.dataFormat="json";isc.A.dataTransport="scriptInclude";isc.defineClass("Schema","DataSource");isc.A=isc.Schema.getPrototype();isc.A.dataFormat="xml";isc.A.dropNamespaceDeclarations=true;isc.A.addGlobalId=false;isc.defineClass("WSDLMessage","Schema");isc.A=isc.WSDLMessage.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.getWSOperation=function isc_WSDLMessage_getWSOperation(_1){var _2=this.getWebService(_1);if(_1&&_1.wsOperation)return _2.getOperation(_1.wsOperation);else return _2.getOperationForMessage(this.ID.substring(8))});isc.B._maxIndex=isc.C+1;isc.defineClass("XSElement","Schema");isc.defineClass("XSComplexType","Schema");isc.defineClass("SchemaSet").addMethods({init:function(){this.ns.ClassFactory.addGlobalID(this);var _1=this.schemaNamespace,_2=isc.SchemaSet.schemaSets,_3=_2[_1];if(_3==null||((_3.schema==null&&_3.schema.length==0)&&(this.schema!=null&&this.schema.length!=0)))
{_2[_1]=this}
var _4=this.serviceNamespace;if(this.schema){this.$530={};this.$531={};this.$693={};for(var i=0;i<this.schema.length;i++){var _6=this.schema[i];_6.serviceNamespace=_4;_6.schemaNamespace=_1;_6.location=this.location;if(isc.isA.SimpleType(_6)){if(_6.inheritsFrom&&_6.inheritsFrom==_6.name&&_6.xmlSource=="XSElement")continue;this.$693[_6.name]=_6}else if(_6.ID){if(isc.isAn.XSElement(_6)){this.$531[_6.ID]=_6}else{this.$530[_6.ID]=_6}}}}
isc.SchemaSet.$37r=this},getSchema:function(_1,_2,_3){if(!_3)_3=[this];else _3.add(this);var _4;if(_2==isc.DS.$532)_4=this.$531[_1];else if(_2==isc.DS.$45t)_4=this.$530[_1];if(_2==null){_4=this.$530[_1]||this.$531[_1];if(_4!=null)return _4}
if(!this.$70w){isc.SchemaSet.findLoadedImports(this);this.$70w=true}
var _5=this.$38q;if(_5!=null){for(var i=0;i<_5.length;i++){var _7=_5[i];if(_3.contains(_7))continue;_4=_7.getSchema(_1,_2,_3);if(_4!=null)return _4}}},getSimpleType:function(_1,_2){if(!_2)_2=[this];else _2.add(this);var _3;if(this.$693){_3=this.$693[_1];if(_3)return _3}
if(this.$38q!=null){for(var i=0;i<this.$38q.length;i++){var _5=this.$38q[i];if(_2.contains(_5))continue;_3=_5.getSimpleType(_1,_2);if(_3!=null)return _3}}},setLocation:function(_1){this.location=_1;if(!this.schema)return;for(var i=0;i<this.schema.length;i++){var _3=this.schema[i];_3.location=_1}},loadImports:function(_1){isc.SchemaSet.loadImports(_1,this)},loadImport:function(_1,_2,_3,_4){return isc.SchemaSet.loadImport(_1,_2,_3,_4,this)},doneImporting:function(){this.fireCallback(this.$69o)},addImportXMLSource:function(_1,_2){this.importSources=this.importSources||[];this.importSources.add({xmlText:_1,location:_2})},addSchemaSet:function(_1,_2){this.$69n=this.$69n||[];this.$69n.add(_1)}});isc.A=isc.SchemaSet;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.schemaSets={};isc.A.$69p=["http://www.w3.org/2001/xml.xsd","http://www.w3.org/2001/XMLSchema","http://www.w3.org/XML/1998/namespace"];isc.A.$69q=[];isc.B.push(isc.A.get=function isc_c_SchemaSet_get(_1){return this.schemaSets[_1]},isc.A.findLoadedImports=function isc_c_SchemaSet_findLoadedImports(_1){var _2=this.getAllImports(_1);if(!_2)return;var _3=_1.$38q=_1.$38q||[];var _4=_1.$70x=_1.$70x||[];for(var i=0;i<_2.length;i++){var _6=_2[i],_7=_6.isWSDL,_8=_6.namespace;if(this.$69p.contains(_8))continue;if((_7&&_4.find("serviceNamespace",_8))||(!_7&&_3.find("schemaNamespace",_8)))
continue;var _9=_7?isc.WebService.get(_8):isc.SchemaSet.get(_8);if(_9==null){var _10;if(isc.isA.WebService(_1)){_10="WebService with targetNamespace '"+_1.serviceNamespace}else{_10="SchemaSet with targetNamespace '"+_1.schemaNamespace}
var _11=_6.location?"logWarn":"logInfo";_1[_11](_10+"' could not find "+(_7?"webService":"SchemaSet")+" for namespace: '"+_8+"'. Pass autoLoadImports to loadWSDL()/loadXMLSchema() or separately load via loadWSDL/loadXMLSchema jsp tag or method","schemaLoader");continue}
if(_9.location==null)_9.setLocation(_1.location);_7?_4.add(_9):_3.add(_9)}},isc.A.getAllImports=function isc_c_SchemaSet_getAllImports(_1){var _2=_1.schemaImports;if(_1.wsdlImports){_1.wsdlImports.setProperty("isWSDL",true);_2=_2||[];_2=_2.concat(_1.wsdlImports)}
return _2},isc.A.loadImports=function isc_c_SchemaSet_loadImports(_1,_2){_2.$69o=_1;var _3=this.getAllImports(_2);if(!_3)return _2.doneImporting();_2.$69r=0;for(var i=0;i<_3.length;i++){var _5=_3[i],_6=_5.namespace;if(_6){var _7=(_5.isWSDL?isc.WebService.get(_6):isc.SchemaSet.get(_6));if(_7!=null){_2.logDebug("import already loaded: "+_6+", skipping","schemaLoader");continue}}
if(_5.location&&_5.location!=_2.location){var _8=_2.loadImport(_6,_5.location,function(_9){if(isc.isA.WebService(_9)){_2.addWebService(_9,_6)}else{_2.addSchemaSet(_9,_6)}
_2.$69r--;_2.logInfo(_2+" loaded import: "+_9+" as namespace: "+_6+", remaining imports: "+_2.$69r,"schemaLoader");if(_2.$69r==0)_2.doneImporting()},_5.isWSDL);if(_8)_2.$69r++}}
if(_2.$69r==0)_2.doneImporting()},isc.A.loadImport=function isc_c_SchemaSet_loadImport(_1,_2,_3,_4,_5){var _6=_5.location.substring(0,_5.location.lastIndexOf("/"));if(!_6.endsWith("/"))_6+="/";var _7=isc.Page.combineURLs(_6,_2);if(_7==_5.location){_5.logDebug("skipping self-reference import: "+_7,"schemaLoader");return false}
if(this.$69p.contains(_7)){_5.logDebug("skipping pedantic import: "+_7,"schemaLoader");return false}
if(this.$69q.contains(_7)){_5.logDebug("skipping redundant import: "+_7,"schemaLoader");return false}
this.$69q.add(_7);_5.logInfo("loading import from: "+_7+"\nschema/service base dir: "+_6+"\nimport location: "+_2,"schemaLoader");var _8=_4?"loadWSDL":"loadXMLSchema";isc.xml[_8](_7,function(_9){_5.fireCallback(_3,"schemaSet",[_9])},null,true,{initiator:_5.initiator||_5,captureXML:_5.captureXML});return true});isc.B._maxIndex=isc.C+5;isc.SchemaSet.getPrototype().toString=function(){return"["+this.Class+" ns="+this.echoLeaf(this.schemaNamespace)+(this.location?" location="+isc.Page.getLastSegment(this.location):"")+"]"};isc.defineClass("WebService").addMethods({init:function(){var _1=this.serviceNamespace;if(this.messages){for(var i=0;i<this.messages.length;i++){this.messages[i].serviceNamespace=_1}}
this.logInfo("registered service with serviceNamespace: "+_1+" service name: "+this.name);isc.WebService.services.add(this);isc.WebService.$37r=this},loadImports:function(_1){isc.SchemaSet.loadImports(_1,this)},loadImport:function(_1,_2,_3,_4){return isc.SchemaSet.loadImport(_1,_2,_3,_4,this)},doneImporting:function(){this.fireCallback(this.$69o)},addSchemaSet:function(_1,_2){this.$38q=this.$38q||[];this.$38q.add(_1)},addWebService:function(_1,_2){this.$70x=this.$70x||[];this.$70x.add(_1)},addImportXMLSource:function(_1,_2){this.importSources=this.importSources||[];this.importSources.add({xmlText:_1,location:_2})},getOperation:function(_1,_2){if(isc.isAn.Object(_1))return _1;if(!this.$70w){isc.SchemaSet.findLoadedImports(this);this.$70w=true}
var _3=this.getBindingOperation(_1,_2);var _4=this.getPortTypeOperation(_1,_2);if(!_3&&!_4){this.logWarn(this+": no such operation: '"+_1+"'");return null}
return isc.addProperties({},_4,_3)},findOperation:function(_1,_2,_3,_4){if(!_3)return;if(_2)_3=_3.findAll("portTypeName",_2);if(!_3)return;if(this.$70x){for(var i=0;i<this.$70x.length;i++){var _6=this.$70x[i],_7=_4?"getPortTypeOperation":"getBindingOperation",_8=_6[_7](_1,_2);if(_8!=null)return _8}}
for(var i=0;i<_3.length;i++){var _9=_3[i].operation;if(!isc.isAn.Array(_9))_9=[_9];var _8=_9.find("name",_1);if(_8!=null)return _8}},getPortTypeOperation:function(_1,_2){return this.findOperation(_1,_2,this.portTypes,true)},getBindingOperation:function(_1,_2){return this.findOperation(_1,_2,this.bindings)},getOperationForMessage:function(_1){var _2=this.getOperations();if(!_2)return;var _3=_2.find("inputMessage",_1);if(_3)return _3;_3=_2.find("outputMessage",_1);if(_3)return _3},getOperationNames:function(){var _1=this.operationNames;if(_1)return _1;if(!this.$70w){isc.SchemaSet.findLoadedImports(this);this.$70w=true}
_1=this.operationNames=[];if(this.bindings){for(var i=0;i<this.bindings.length;i++){var _3=this.bindings[i],_4=_3.operation;if(!isc.isAn.Array(_4))_4=[_4];_1.addList(_4.getProperty("name"));for(var j=0;j<_1.length;j++){var _6=this.getPortTypeOperation(_1[j],_3.portTypeName);if(_6)_6.hasBinding=true}}}
if(this.portTypes){for(var i=0;i<this.portTypes.length;i++){var _7=this.portTypes[i],_4=_7.operation;if(!isc.isAn.Array(_4))_4=[_4];var _8=_4.findAll("hasBinding",true);if(_8){_4=_4.duplicate();_4.removeAll(_8)}
_1.addList(_4.getProperty("name"))}}
return(this.operationNames=_1)},getOperations:function(_1){var _2=this.getOperationNames(),_3=[];for(var i=0;i<_2.length;i++){var _5=this.getOperation(_2[i]);if(_1&&!_5.hasBinding)continue;_3.add(_5)}
return _3},getSchema:function(_1,_2){if(!this.$70w){isc.SchemaSet.findLoadedImports(this);this.$70w=true}
var _3=this.$38q;if(_3!=null){for(var i=0;i<_3.length;i++){var _5=_3[i];var _6=_5.getSchema(_1,_2);if(_6)return _6}}
return isc.DS.get(_1,null,null,_2)},getRequestMessage:function(_1){var _2=this.getOperation(_1);return this.getMessage(_2.inputMessage)},getResponseMessage:function(_1){var _2=this.getOperation(_1);return this.getMessage(_2.outputMessage)},getMessage:function(_1){var _2=this.messages.find("ID","message:"+_1);if(_2)return _2;if(!this.$70w){isc.SchemaSet.findLoadedImports(this);this.$70w=true}
if(this.$70x){for(var i=0;i<this.$70x.length;i++){var _4=this.$70x[i];_2=_4.getMessage(_1);if(_2)return _2}}},getBodyPartNames:function(_1,_2){var _3=this.getOperation(_1),_4=_2?_3.outputParts:_3.inputParts;if(_4==null||isc.isAn.emptyString(_4)){var _5=_2?this.getResponseMessage(_1):this.getRequestMessage(_1);return _5.getFieldNames()}else{return _4.split(" ")}},globalNamespaces:{xsi:"http://www.w3.org/2001/XMLSchema-instance",xsd:"http://www.w3.org/2001/XMLSchema"},callOperation:function(_1,_2,_3,_4,_5){var _6=this.getOperation(_1);if(_6==null){this.logWarn("No such operation: "+_1);return}
_5=_5||isc.emptyObject;var _7=isc.addProperties({actionURL:this.getDataURL(_1),httpMethod:"POST",contentType:"text/xml",data:_2,serviceNamespace:this.serviceNamespace,serviceName:this.name,wsOperation:_1},_5);_7.httpHeaders=isc.addProperties({},{SOAPAction:_6.soapAction||'""'},_5.httpHeaders);_7.headerData=_5.headerData||this.getHeaderData(_7);_7.data=this.getSoapMessage(_7);_7.internalClientContext={$38r:_4,$38s:_1,$38u:_3,$38v:_5.xmlResult};if(this.spoofResponses){var _8=this.getSampleResponse(_1);if(this.logIsDebugEnabled("xmlBinding")){this.logDebug("spoofed response:\n"+_8,"xmlBinding")}
this.delayCall("$38w",[isc.xml.parseXML(_8),_8,{status:0,internalClientContext:_7.internalClientContext,httpResponseCode:200,httpResponseText:_8},_7]);return}
_7.callback={target:this,methodName:"$38w"};isc.xml.getXMLResponse(_7)},$38w:function(_1,_2,_3,_4){var _5=_4.internalClientContext,_6=_5.$38s,_7=_5.$38u;if(_3.status<0){this.fireCallback(_5.$38r,"data,xmlDoc,rpcResponse,wsRequest",[_3.data,_1,_3,_4]);return}
_1.addNamespaces(this.getOutputNamespaces(_6));if(_4.xmlNamespaces){_1.addNamespaces(_4.xmlNamespaces)}
var _8=(_7!=null&&_7.contains("/")),_9=(_8?_7:null),_10;if(_8){_10=_1.selectNodes(_9)}else if(_7){_10=this.selectByType(_1,_6,_7)}else{_10=_1.selectNodes("//s:Body/*",{s:"http://schemas.xmlsoap.org/soap/envelope/"});if(_10.length==1)_10=_10[0]}
if(this.logIsDebugEnabled()){this.logDebug("selected response data is: "+this.echoFull(_10))}
if(_5.$38v){this.fireCallback(_5.$38r,"data,xmlDoc,rpcResponse,wsRequest",[_10,_1,_3,_4]);return}
var _11;if(_8){_11=null}else if(_7){_11=this.getSchema(_5.$38u)}else{var _12=this.getSchema("message:"+this.getOperation(_6).outputMessage);if(this.getSoapStyle(_6)!="document"){_11=_12}else{var _13=_12.getFieldNames().first();_11=_12.getSchema(_12.getField(_13).type)}
}
_10=isc.xml.toJS(_10,null,_11);this.fireCallback(_5.$38r,"data,xmlDoc,rpcResponse,wsRequest",[_10,_1,_3,_4])},getOutputNamespaces:function(_1,_2){var _3=this.getDefaultOutputDS(_1);return isc.addProperties({"default":_3.schemaNamespace||this.serviceNamespace,schema:_3.schemaNamespace,service:this.serviceNamespace
},_2)},getDataURL:function(_1){var _2=this.getOperation(_1);if(_2&&_2.dataURL)return _2.dataURL;return this.dataURL},getMessageSerializer:function(_1,_2){var _3=_2?this.getResponseMessage(_1)
:this.getRequestMessage(_1);if(_3==null){this.logWarn("no "+(_2?"response":"request")+" message definition found for operation: '"+_1+"'");return}
if(this.getSoapStyle(_1)!="document")return _3;var _4=_3.getFieldNames();if(_4.length==1&&_3.fieldIsComplexType(_4[0])){var _5=_3.getField(_4[0]);_3=_3.getSchema(_5.type,_5.xsElementRef?"element":null);if(_3==null){this.logWarn("can't find schema: "+_5.type+", part of "+(_2?"response":"request")+" message for operation '"+_1+"'")}
}
return _3},useSimplifiedInputs:function(_1,_2){var _3=_2?this.getResponseMessage(_1)
:this.getRequestMessage(_1);return this.getMessageSerializer(_1,_2)!=_3},getSoapMessage:function(_1,_2){_1.serviceNamespace=_1.serviceNamespace||this.serviceNamespace;var _3=_1.wsOperation;if(this.getOperation(_3)==null){this.logWarn("no such operation: '"+_3+"' in service: "+this.serviceNamespace);return""}
var _4=this.getMessageSerializer(_1.wsOperation,_2&&_2.generateResponse);if(_4==null)return"";return _4.getXMLRequestBody(_1,_2)},getSampleResponse:function(_1,_2,_3,_4){return this.getSoapMessage({wsOperation:_1,data:_2||{}
},isc.addProperties({spoofData:true,generateResponse:!_4
},_3))},getSampleRequest:function(_1,_2,_3){return this.getSampleResponse(_1,_2,_3,true)},getSoapStyle:function(_1){return this.getOperation(_1).soapStyle||this.soapStyle},getInputDS:function(_1){return this.getMessageSerializer(_1)},getHeaderSchema:function(_1,_2){var _3=this.getOperation(_1),_4=_2?_3.inputHeaders:_3.outputHeaders;if(!_4)return null;var _5={};for(var i=0;i<_4.length;i++){var _7=_4[i].part,_8=this.getSchema("message:"+_4[i].message);var _9=_8.getPartField(_7);_5[_7]=this.getSchema(_9.type)||_9}
return _5},getInputHeaderSchema:function(_1){return this.getHeaderSchema(_1,true)},getOutputHeaderSchema:function(_1){return this.getHeaderSchema(_1,false)},getHeaderData:function(_1){},selectByType:function(_1,_2,_3){var _4=this.getOperation(_2),_5=this.getSchema("message:"+_4.outputMessage),_6=this.getSchema(_3);if(_6==null){this.logWarn("selectByType: type '"+_3+"' not present in schema for message: "+_4.outputMessage);return null}
var _7=_5.findTagOfType(_6.ID);if(_7==null){this.logWarn("selectByType: no tag of type '"+_3+"' could be found in message: "+_4.outputMessage);return null}
var _8=_7[0],_9=_7[1],_10=_7[2],_11=_7[3],_12=_8.getField(_9);_9=_9||_6.ID;var _13=_6.mustQualify,_14=_6.schemaNamespace,_15="//"+(_13?"ns0:":"")+_9;if(_12&&_12.multiple)_15=_15+"/*";var _16=isc.xml.selectNodes(_1,_15,{ns0:_14});if(this.logIsDebugEnabled("xmlBinding")){this.logDebug("selecting type: '"+_6+"' within message '"+_4.outputMessage+" via XPath: "+_15+(_13?" using ns0: "+_6.schemaNamespace:"")+" got "+_16.length+" elements","xmlBinding")}
return _16},getDefaultOutputDS:function(_1){var _2=this.getResponseMessage(_1);if(!_2)return null;var _3=_2.getFieldNames();if(_3.length==1&&_2.fieldIsComplexType(_3[0])){return _2.getSchema(_2.getField(_3[0]).type)}
return _2},getFetchDS:function(_1,_2,_3){if(_2==null)_2=this.getDefaultOutputDS(_1);_2=isc.isA.Object(_2)?_2.ID:_2;if(_2!=null&&this.getSchema(_2)==null){this.logWarn("getFetchDS: resultType: '"+_2+"' not present in web service - missing XML files?")}
var _4=isc.DS.create({serviceNamespace:this.serviceNamespace,inheritsFrom:_2,operationBindings:[isc.addProperties({operationType:"fetch",wsOperation:_1,recordName:_2
},_3)
]
});return _4},setLocation:function(_1,_2){if(_2)this.getBindingOperation(_2).dataURL=_1;else this.dataURL=_1}});isc.A=isc.WebService;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.services=[];isc.B.push(isc.A.get=function isc_c_WebService_get(_1){return this.services.find("serviceNamespace",_1)}
,isc.A.getByName=function isc_c_WebService_getByName(_1,_2){if(_1=="")_1=null;if(_2!=null){return this.services.find({name:_1,serviceNamespace:_2})}else{return this.services.find("name",_1)}
}
);isc.B._maxIndex=isc.C+2;isc.WebService.getPrototype().toString=function(){return"["+this.Class+" ns="+this.echoLeaf(this.serviceNamespace)+(this.location?" location="+isc.Page.getLastSegment(this.location):"")+"]"};isc.ClassFactory.defineClass("RPCManager");isc.RPC=isc.rpc=isc.RPCManager;isc.Page.observe(isc,"goOffline","isc.rpc.goOffline()");isc.Page.observe(isc,"goOnline","isc.rpc.goOnline()");isc.ClassFactory.defineClass("LoadScreenCallback");isc.A=isc.LoadScreenCallback.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.execute=function isc_LoadScreenCallback_execute(){}
);isc.B._maxIndex=isc.C+1;isc.ClassFactory.defineClass("RPCRequest");isc.A=isc.RPCRequest;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.create=function isc_c_RPCRequest_create(_1,_2,_3,_4,_5,_6,_7,_8,_9,_10,_11,_12,_13){this.logWarn("An RPCRequest does not need to be created. Instead, pass properties to methods such as RPCManager.send() and RPCManger.sendRequest."
);return isc.addProperties({},_1,_2,_3,_4,_5,_6,_7,_8,_9,_10,_11,_12,_13)}
);isc.B._maxIndex=isc.C+1;isc.ClassFactory.defineClass("RPCResponse");isc.A=isc.RPCResponse;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.create=function isc_c_RPCResponse_create(_1,_2,_3,_4,_5,_6,_7,_8,_9,_10,_11,_12,_13){this.logWarn("RPCResponses shouldn't be created directly. Instances of this class are automatically created and optionally passed to you in the callback you specify as part of your RPCRequest.");return isc.addProperties({},_1,_2,_3,_4,_5,_6,_7,_8,_9,_10,_11,_12,_13)}
);isc.B._maxIndex=isc.C+1;isc.A=isc.RPCResponse;isc.A.errorCodes={STATUS_SUCCESS:0,STATUS_OFFLINE:1,STATUS_FAILURE:-1,STATUS_VALIDATION_ERROR:-4,STATUS_LOGIN_INCORRECT:-5,STATUS_MAX_LOGIN_ATTEMPTS_EXCEEDED:-6,STATUS_LOGIN_REQUIRED:-7,STATUS_LOGIN_SUCCESS:-8,STATUS_UPDATE_WITHOUT_PK_ERROR:-9,STATUS_TRANSACTION_FAILED:-10,STATUS_MAX_FILE_SIZE_EXCEEDED:-11,STATUS_MAX_POST_SIZE_EXCEEDED:-12,STATUS_TRANSPORT_ERROR:-90,STATUS_UNKNOWN_HOST_ERROR:-91,STATUS_CONNECTION_RESET_ERROR:-92,STATUS_SERVER_TIMEOUT:-100};isc.RPCResponse.addClassProperties(isc.RPCResponse.errorCodes)
isc.addGlobal("DSResponse",isc.RPCResponse);isc.A=isc.RPCManager;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.maxErrorMessageLength=1000;isc.A.maxLogMessageLength=25000;isc.A.defaultTimeout=240000;isc.A.defaultPrompt="Contacting server...";isc.A.timeoutErrorMessage="Operation timed out";isc.A.removeDataPrompt="Deleting record(s)...";isc.A.saveDataPrompt="Saving form...";isc.A.validateDataPrompt="Validating...";isc.A.promptStyle=isc.Dialog?"dialog":"cursor";isc.A.useCursorTracker=(isc.Browser.isMoz&&isc.Browser.geckoVersion<20051111);isc.A.cursorTrackerConstructor="Img";isc.A.cursorTrackerDefaults={src:"[SKINIMG]shared/progressCursorTracker.gif",size:16,offsetX:12,offsetY:0,$38x:function(_1){var _2=(isc.EH.getX()+this.offsetX),_3=(isc.EH.getY()+this.offsetY);if(_2+this.size>=isc.Page.getWidth()||_3+this.size>=isc.Page.getHeight()){this.hide();return}
if(isNaN(_2))_2=0;if(isNaN(_3))_3=0;this.setLeft(_2);this.setTop(_3);if(!_1&&!this.isVisible())this.show()},initWidget:function(){this.Super("initWidget",arguments);this.$38x(true);this.$38y=isc.Page.setEvent("mouseMove",this.getID()+".$38x()");this.$69s=isc.Page.setEvent("mouseOut",this.getID()+".hide()");this.bringToFront()},destroy:function(){isc.Page.clearEvent("mouseMove",this.$38y);isc.Page.clearEvent("mouseOut",this.$69s);this.Super("destroy",arguments)}
};isc.A.promptCursor=isc.Browser.isSafari||(isc.Browser.isMoz&&isc.Browser.geckoVersion<20051111)||(isc.Browser.isIE&&isc.Browser.minorVersion<=5.5)?"wait":"progress";isc.A.fetchDataPrompt="Finding records that match your criteria...";isc.A.getViewRecordsPrompt="Loading record...";isc.A.showPrompt=false;isc.A.promptDelay=300;isc.A.neverShowPrompt=false;isc.A.actionURL="[ISOMORPHIC]/IDACall";isc.A.screenLoaderURL="[ISOMORPHIC]/screenLoader";isc.A.ALL_GLOBALS="-ALL_GLOBALS";isc.A.defaultTransport="xmlHttpRequest";isc.A.dataEncoding="XML";isc.A.preserveTypes=true;isc.A.credentialsURL=isc.Page.getIsomorphicDir()+"login/loginSuccessMarker.html";isc.A.loginWindowSettings="WIDTH=550,HEIGHT=250";isc.A.maxLoginPageLength=1048576;isc.A.$38z=Array.create({addTrack:function(_1,_2){this.$451=_1;this.add(_1,_2);this.$451=null},setLastChanged:function(_1){this.$451=_1},clearLastChanged:function(){this.$451=null},getLastChanged:function(){return this.$451}
});isc.A.$452=0;isc.A.$410=[];isc.A.pendingRpcs=0;isc.B.push(isc.A.getTransactions=function isc_c_RPCManager_getTransactions(){return this.$38z}
,isc.A.getActiveTransactions=function isc_c_RPCManager_getActiveTransactions(){return this.$410}
);isc.B._maxIndex=isc.C+2;isc.A=isc.RPCManager;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.allowCrossDomainCalls=false;isc.A.$97n="?";isc.A.$380=0;isc.A.onLine=!isc.isOffline();isc.A.$89f="text/xml";isc.A.loginStatusCodeMarker="<SCRIPT>//'\"]]>>isc_";isc.A.loginRequiredMarker="<SCRIPT>//'\"]]>>isc_loginRequired";isc.A.loginSuccessMarker="<SCRIPT>//'\"]]>>isc_loginSuccess";isc.A.maxLoginAttemptsExceededMarker="<SCRIPT>//'\"]]>>isc_maxLoginAttemptsExceeded";isc.A.$89j="<responses>";isc.A.$89k="</responses>";isc.A.$89l="<response>";isc.A.$89m="</response>";isc.A.allowIE9Leak=true;isc.A.useJSONParse_IE9=true;isc.A.$143q="<HTML><SCRIPT>setInterval(function () {window.opener.isc.Timer.firePendingTimeouts()},1);</SCRIPT></HTML>";isc.A.$113o="return";isc.B.push(isc.A.xmlHttpRequestAvailable=function isc_c_RPCManager_xmlHttpRequestAvailable(){if(isc.Browser.isIE)return(isc.Comm.createXMLHttpRequest()!=null);return true}
,isc.A.getActionURL=function isc_c_RPCManager_getActionURL(){return isc.Page.getURL(this.actionURL)}
,isc.A.send=function isc_c_RPCManager_send(_1,_2,_3){var _4=(_3||{});isc.addProperties(_4,{data:_1,callback:_2
});return this.sendRequest(_4)}
,isc.A.$383=function isc_c_RPCManager__warnIfXmlHttpRequestUnavailable(_1){if(this.xmlHttpRequestAvailable()||!this.logIsWarnEnabled())return false;var _2="Feature "+_1+" requires the xmlHttpRequest transport which is not currently available because ActiveX is disabled. Please see the 'Features requiring ActiveX or Native support' topic in the client-side reference under Client Reference/System for more information.";this.logWarn(_2);return true}
,isc.A.sendProxied=function isc_c_RPCManager_sendProxied(_1,_2){_1.serverOutputAsString=_1.transport!="scriptInclude";if(!_1.isRestRequest)_1.sendNoQueue=true;var _3=_1.actionURL||isc.RPCManager.actionURL;var _4=(_1.useHttpProxy!=null?_1.useHttpProxy:(isc.RPCManager.useHttpProxy&&_3.startsWith("http")&&!this.isLocalURL(_3)));if(!isc.RPCManager.allowCrossDomainCalls){if(!_4&&_3.startsWith("http")&&!this.isLocalURL(_3)){isc.warn("SmartClient can't directly contact URL '"+_3+"' due to browser same-origin policy.  Remove the host and port number (even if localhost) to avoid this problem, or use XJSONDataSource for JSONP protocol (which allows cross-site calls), or use the server-side HttpProxy included with SmartClient Server.<BR>This warning may be suppressed by setting <b>RPCManager.allowCrossDomainCalls</b> to true.")}
}
if(!_4)
{if(!_2)_1.useSimpleHttp=true}else{_1=isc.addProperties({},_1,{actionURL:isc.XMLTools.httpProxyURL,isProxied:true,useSimpleHttp:true,proxiedURL:_3,params:{data:isc.Comm.xmlSerialize("data",{url:_3,httpMethod:_1.httpMethod,params:_1.params,contentType:_1.contentType,requestBody:_1.data,username:_1.username,password:_1.password,httpHeaders:_1.httpHeaders,uploadFileName:_1.uploadFileName,callbackParam:_1.transport=="scriptInclude"?_1.callbackParam:null
})
},transport:_1.transport=="scriptInclude"?"scriptInclude":"xmlHttpRequest",httpMethod:null,data:null,contentType:null
})}
return isc.rpc.sendRequest(_1)}
,isc.A.$59w=function isc_c_RPCManager__getHostAndPort(_1){var _2=isc.Page.getProtocol(_1),_3=_1.indexOf("/",_2.length),_4=_1.substring(_2.length,_3),_5
;var _6=_4.indexOf(":");if(_6!=-1){_5=_4.substring(_6+1);_4=_4.substring(0,_6)}
return[_4,_5]}
,isc.A.isLocalURL=function isc_c_RPCManager_isLocalURL(_1){var _2=this.$59w(_1),_3=_2[0],_4=_2[1]
;if(_4==null||_4=="")_4=80;var _5=this.getWindow().location,_6=_5.hostname,_7=_5.port;if(_7==null||_7=="")_7=80;return(_3=="localhost"||_3==_6)
&&_4==_7
}
,isc.A.sendRequest=function isc_c_RPCManager_sendRequest(_1){if(_1.useHttpProxy&&!_1.isProxied)return this.sendProxied(_1);if(_1.canDropOnDelay&&this.delayingTransactions)return;_1=isc.addProperties({},_1);if(_1.suppressAutoDraw!==false)_1.suppressAutoDraw=true;_1.actionURL=isc.Page.getURL(_1.actionURL||_1.url||_1.URL||this.getActionURL());var _2=_1.transport;if(!_2){if(_1.useXmlHttpRequest!=null||this.useXmlHttpRequest!=null){if(_1.useXmlHttpRequest==null){if(this.useXmlHttpRequest!=null){_1.transport=this.useXmlHttpRequest?"xmlHttpRequest":"hiddenFrame"}else{_1.transport=this.defaultTransport}
}else{_1.transport=_2=_1.useXmlHttpRequest?"xmlHttpRequest":"hiddenFrame"}
}else{_1.transport=this.defaultTransport}
}
this.checkTransportAvailable(_1,(_2!=null));if(_1.useSimpleHttp==null)_1.useSimpleHttp=_1.paramsOnly;isc.addDefaults(_1,{showPrompt:this.showPrompt,promptStyle:this.promptStyle,promptCursor:this.promptCursor,useCursorTracker:this.useCursorTracker,cursorTrackerConstructor:this.cursorTrackerConstructor
});_1.cursorTrackerProperties=isc.addProperties({},this.cursorTrackerDefaults,this.cursorTrackerProperties,_1.cursorTrackerProperties);if(_1.cursorTrackerProperties==null)
_1.cursorTrackerProperties=this.cursorTrackerProperties;if(!_1.operation){_1.operation={ID:"custom",type:"rpc"
}
}
var _3=this.transformRequest(_1);if(_3!==_1){_1.data=_3}
this.pendingRpcs++;if(this.canQueueRequest(_1,(_2!=null))){if(!this.currentTransaction)this.currentTransaction=this.$385();this.$386(_1,this.currentTransaction);if(!this.queuing)return this.sendQueue();return _1}else{return this.sendNoQueue(_1)}
}
,isc.A.checkTransportAvailable=function isc_c_RPCManager_checkTransportAvailable(_1,_2){var _3=this.xmlHttpRequestAvailable();var _4=_1.transport||this.defaultTransport;if(!_3){if(_4=="xmlHttpRequest"){if(_2){this.logWarn("RPC/DS request specifically requesting the xmlHttpRequest transport, but xmlHttpRequest not currently available - switching transport to hiddenFrame.")}else{this.logWarn("RPCManager.defaultTransport specifies xmlHttpRequest, but xmlHttpRequest not currently available - switching transport to hiddenFrame.")}
}
_1.transport="hiddenFrame"}
}
,isc.A.canQueueRequest=function isc_c_RPCManager_canQueueRequest(_1,_2){if(_1.ignoreTimeout)_1.sendNoQueue=true;var _3=_1.transport;if(_1.containsCredentials){return false
}
if(_1.sendNoQueue||_1.transport=="scriptInclude")return false;var _4=(this.currentTransaction&&this.currentTransaction.requestData.operations.length>0);if(_4&&(_1.actionURL!=this.currentTransaction.URL)){this.logWarn("RPCRequest specified (or defaulted to) URL: "+_1.actionURL
+" which is different than the URL for which the RPCManager is currently queuing: "
+this.currentTransaction.URL+" - sending this request to server and continuing to queue");return false}
if(_4&&(!!_1.useStrictJSON!=!!this.currentTransaction.useStrictJSON))
{this.logWarn("RPCManager - attempt to queue request specified 'useStrictJSON:"+_1.useStrictJSON+". This conflicts with this setting for other queued requests - sending the request to server and continuing to queue.");return false}
if(_4&&(this.currentTransaction.transport!=_1.transport))
{this.logWarn("RPCRequest with conflicting transport while queuing, sending request to server and continuing to queue.");return false}
return true}
,isc.A.sendNoQueue=function isc_c_RPCManager_sendNoQueue(_1){var _2=this.currentTransaction;var _3=this.queuing;this.currentTransaction=this.$385();this.$386(_1,this.currentTransaction);var _4=this.sendQueue();this.queuing=_3;this.currentTransaction=_2;return _4}
,isc.A.$385=function isc_c_RPCManager__createTransaction(){var _1=this.$452++;var _2={timeout:this.defaultTimeout,transactionNum:_1,operations:[],responses:[],requestData:{transactionNum:_1,operations:[]},prompt:this.defaultPrompt,showPrompt:false,changed:function(){isc.RPCManager.$38z.setLastChanged(this);isc.RPCManager.$38z.dataChanged();isc.RPCManager.$38z.clearLastChanged()}
}
this.$38z.addTrack(_2);this.$38z.clearLastChanged();return _2}
,isc.A.$386=function isc_c_RPCManager__addRequestToTransaction(_1,_2){_2.URL=_1.actionURL;if(_1.containsCredentials)_2.containsCredentials=true;if(_1.exportFilename)_2.URL+="/"+_1.exportFilename;if(!_2.download_filename)_2.download_filename=_1.download_filename;if(((_1.downloadResult||_1.downloadToNewWindow)&&_1.download_filename)
||_1.$38j)
{_2.download_filename=_1.download_filename;var _3=_2.URL.indexOf(this.$97n)
if(_3!=-1){_2.URL=_2.URL.substring(0,_3)+"/"+encodeURIComponent(_1.download_filename)+_2.URL.substring(_3)}else{_2.URL+="/"+encodeURIComponent(_1.download_filename)}
_2.ignoreError=true}
if(_1.prompt&&!_2.customPromptIsSet){this.logDebug("Grabbed prompt from first request that defined one: "+_1.prompt);_2.prompt=_1.prompt;_2.customPromptIsSet=true}
if(_1.showPrompt&&!_2.showPrompt&&!this.neverShowPrompt){_1.showedPrompt=true;isc.addProperties(_2,{showPrompt:true,promptStyle:_1.promptStyle,promptCursor:_1.promptCursor,useCursorTracker:_1.useCursorTracker,cursorTrackerConstructor:_1.cursorTrackerConstructor,cursorTrackerProperties:_1.cursorTrackerProperties
})}
if(_1.isProxied){isc.addProperties(_2,{isProxied:true,proxiedURL:_1.proxiedURL
})}
_2.transport=_1.transport;_2.useStrictJSON=_1.useStrictJSON;if(_1.ignoreReloginMarkers)_2.ignoreReloginMarkers=true;_2.operations.add(_1);var _4=_1.data;if(_4==null)_4="__ISC_NULL__";else if(_4==="")_4="__ISC_EMPTY_STRING__";if(!_1.clientOnly)_2.requestData.operations.add(_4);if(_2.omitNullMapValuesInResponse!==false&&_1.omitNullMapValuesInResponse!=null){_2.omitNullMapValuesInResponse=_2.requestData.omitNullMapValuesInResponse=_1.omitNullMapValuesInResponse}else{_2.omitNullMapValuesInResponse=false}
if(_1.ignoreTimeout)_2.$387=true;_1.transactionNum=_2.transactionNum;if(_1.timeout||_1.timeout===0)_2.timeout=_1.timeout;_2.changed()}
,isc.A.startQueue=function isc_c_RPCManager_startQueue(_1){var _2=this.queuing;this.queuing=(_1==null?true:_1);return _2}
,isc.A.doShowPrompt=function isc_c_RPCManager_doShowPrompt(_1,_2,_3){if(this.$380++!=0)return;if(_3&&!this.$113i){isc.EH.showClickMask(null,"hard",this.unmaskedTargets?this.unmaskedTargets.duplicate():null,"blockingRPC");this.$113i=true}
var _4=this;var _5=function(){if(_1.promptStyle=="dialog"&&_2!=null){isc.showPrompt(_2);_4.$388=true;if(_4.$113i){isc.EH.hideClickMask("blockingRPC");_4.$113i=null}
}else{if(!_4.$113i){isc.EH.showClickMask(null,"hard",_4.unmaskedTargets?_4.unmaskedTargets.duplicate():null,"blockingRPC");_4.$113i=true}
if(_1.useCursorTracker){_4.$389=isc.ClassFactory.getClass(_1.cursorTrackerConstructor)
.create(_1.cursorTrackerProperties);_4.$389.show()}else{isc.EH.$m8.setCursor(_1.promptCursor)}
}
};if(_3){this.$113j=isc.Timer.setTimeout(_5,_3)}else{_5()}
}
,isc.A.doClearPrompt=function isc_c_RPCManager_doClearPrompt(_1){if(this.$113j){isc.Timer.clear(this.$113j);this.$113j=null}
if(_1.clearedPrompt)return;_1.clearedPrompt=true;if(--this.$380!=0){if(this.$380<0)this.$380=0;return}
if(this.$388){isc.clearPrompt()}else{if(this.$389){this.$389.destroy();this.$389=null}else{if(isc.EH.$m8)isc.EH.$m8.setCursor(isc.Canvas.DEFAULT)}
}
this.$388=null;if(this.$113i){isc.EH.hideClickMask("blockingRPC");this.$113i=null}
}
,isc.A.getCurrentTransactionId=function isc_c_RPCManager_getCurrentTransactionId(){return this.currentTransaction?this.currentTransaction.transactionNum:null}
,isc.A.cancelQueue=function isc_c_RPCManager_cancelQueue(_1){if(_1==null){_1=this.currentTransaction}
var _2=this.getTransaction(_1);if(_2==null)return;else if(_2==this.currentTransaction)this.currentTransaction=null;if(_2.showPrompt)this.doClearPrompt(_2);if(_2.transportRequest&&_2.transportRequest.abort){_2.transportRequest.abort()}
_2.cancelled=true;this.clearTransaction(_2.transactionNum)}
,isc.A.getTransaction=function isc_c_RPCManager_getTransaction(_1){if(_1==null)return null;if(_1.location&&_1.document){var _2=_1;var _3=isc.HiddenFrame.$h6;for(var i=0;i<_3.length;i++){if(_2==_3[i].getHandle()){_1=_3[i].transactionNum;break}
}
if(_1==_2){this.logDebug("Can't find transactionNum in getTransaction from iframe");return null}
}
if(isc.isA.Number(_1)||isc.isA.String(_1)){_1=this.$38z.find({transactionNum:_1})}
if(_1&&_1.cleared)return null;return _1}
,isc.A.getCurrentTransaction=function isc_c_RPCManager_getCurrentTransaction(){return this.currentTransaction}
,isc.A.getLastSubmittedTransaction=function isc_c_RPCManager_getLastSubmittedTransaction(){return this.$38z[this.$38z.length-1]}
,isc.A.clearTransaction=function isc_c_RPCManager_clearTransaction(_1){var _2=this.getTransaction(_1);if(_2==null){this.logWarn("clearTransaction: no such transaction: "+this.echo(_1));return}
this.clearTransactionTimeout(_2);if(!this.$453&&isc.Page.isLoaded()){var _3=isc.LogViewer.getGlobalLogCookie();this.setTrackRPC(_3?_3.trackRPC:false)}
_2.cleared=true;if(!this.$454)this.$38z.remove(_2);else _2.changed();isc.RPCManager.$410.remove(_2.transactionNum)}
,isc.A.setTrackRPC=function isc_c_RPCManager_setTrackRPC(_1){this.$454=_1;if(!_1)this.removeClearedRPC()}
,isc.A.removeClearedRPC=function isc_c_RPCManager_removeClearedRPC(){var _1=this.$38z.findAll("cleared",true);if(_1)this.$38z.removeList(_1)}
,isc.A.delayAllPendingTransactions=function isc_c_RPCManager_delayAllPendingTransactions(){this.delayingTransactions=true;for(var i=0;i<this.$38z.length;i++){var _2=this.$38z[i];this.delayTransaction(_2)}
}
,isc.A.suspendTransaction=function isc_c_RPCManager_suspendTransaction(_1){var _2=this.getTransaction(_1)||this.getCurrentTransaction();if(_2==null){this.logWarn("No transaction to suspend");return}
if(_2.suspended)return;_2.suspended=true;if(_2.$66n)_2.abortCallbacks=true;this.clearTransactionTimeout(_2);if(_2.showPrompt)this.doClearPrompt(_2);_2.changed()}
,isc.A.delayTransaction=function isc_c_RPCManager_delayTransaction(_1){_1=this.getTransaction(_1);if(_1.delayed)return;_1.delayed=true;this.clearTransactionTimeout(_1);_1.changed()}
,isc.A.goOffline=function isc_c_RPCManager_goOffline(){this.logInfo("Going offline...");this.onLine=false}
,isc.A.goOnline=function isc_c_RPCManager_goOnline(){this.logInfo("Going online...");this.offlinePlayback=true;this.playbackNextOfflineTransaction()}
,isc.A.offlineTransactionPlaybackComplete=function isc_c_RPCManager_offlineTransactionPlaybackComplete(){}
,isc.A.playbackNextOfflineTransaction=function isc_c_RPCManager_playbackNextOfflineTransaction(){var _1=this.offlineTransactionLog?this.offlineTransactionLog.removeAt(0):null;if(_1==null){this.logInfo("Offline transaction playback complete");this.offlinePlayback=false;this.onLine=!isc.isOffline();this.offlineTransactionPlaybackComplete();return}
this.resubmitTransaction(_1)}
,isc.A.offlineTransaction=function isc_c_RPCManager_offlineTransaction(_1){if(_1.offline)return;_1=this.getTransaction(_1);_1.offline=true;this.clearTransactionTimeout(_1);if(!this.offlineTransactionLog){this.offlineTransactionLog=[];this.offlineTransactionLog.sortByProperty("timestamp",Array.ASCENDING)}
this.offlineTransactionLog.add(_1);_1.changed();var _2=_1.operations;for(var i=0;i<_2.length;i++){var _4=_2[i];var _5=this.createRPCResponse(_1,_4,{httpResponseCode:200,offlineResponse:true
});this.delayCall("fireReplyCallbacks",[_4,_5],0)}
}
,isc.A.resendTransaction=function isc_c_RPCManager_resendTransaction(_1){this.resendTransactionsFlagged(_1,"suspended")}
,isc.A.resendDelayedTransactions=function isc_c_RPCManager_resendDelayedTransactions(){this.delayingTransactions=false;this.resendTransactionsFlagged(null,"delayed")}
,isc.A.resendTransactionsFlagged=function isc_c_RPCManager_resendTransactionsFlagged(_1,_2){var _3=_1?[this.getTransaction(_1)]:this.$38z;for(var i=0;i<_3.length;i++){_1=_3[i];if(_1[_2]){delete _1[_2];this.resubmitTransaction(_1)}
}
}
,isc.A.getTransactionRequests=function isc_c_RPCManager_getTransactionRequests(_1){return this.getTransaction(_1).operations}
,isc.A.$39a=function isc_c_RPCManager__setTransactionTimeoutTimer(_1){_1=this.getTransaction(_1);var _2=_1.timeout;if(!_2&&_2!==0)_2=this.defaultTimeout;if(_2==0)return;_1.timeoutTimer=isc.Timer.setTimeout("isc.RPCManager.$39b("
+_1.transactionNum+")",_2)}
,isc.A.clearTransactionTimeout=function isc_c_RPCManager_clearTransactionTimeout(_1){_1=this.getTransaction(_1)||this.getCurrentTransaction()||this.getLastSubmittedTransaction();if(!_1)return;isc.Timer.clear(_1.timeoutTimer)}
,isc.A.$39b=function isc_c_RPCManager__timeoutTransaction(_1){_1=this.getTransaction(_1);if(_1.$387){this.clearTransaction(_1);return}
if(!this.onLine){this.offlineTransaction(_1);return}
_1.results=this.$39c(_1,{data:isc.RPCManager.timeoutErrorMessage,status:isc.RPCResponse.STATUS_SERVER_TIMEOUT
});this.$39d(_1.transactionNum)
}
,isc.A.$39c=function isc_c_RPCManager__makeErrorResults(_1,_2){var _3=[];for(var i=0;i<_1.operations.length;i++){if(_1.operations[i].dataFormat=="xml"){_3[i]=isc.Comm.xmlSerialize("response",_2)}else{_3[i]={response:isc.clone(_2)}}
}
return _3}
,isc.A.resubmitTransaction=function isc_c_RPCManager_resubmitTransaction(_1){_1=this.getTransaction(_1)||this.getLastSubmittedTransaction();_1.status=null;var _2=this.currentTransaction;this.currentTransaction=_1;if(_1!=null){this.logInfo("Resubmitting transaction number: "+_1.transactionNum);delete _1.suspended;delete _1.clearedPrompt;var _3=_1.$76k||isc.emptyObject;this.sendQueue(_3.callback,_3.prompt,_3.URL)}else{this.logWarn("No transaction to resubmit: transaction number "
+_1+" does not exist")}
this.currentTransaction=_2}
,isc.A.retryOperation=function isc_c_RPCManager_retryOperation(_1){this.logDebug("Server-initiated operation retry for commFrameID: "+_1);var _2=window[_1];if(!_2){this.logError("comm operation retry failed - can't locate object: "+_1);return}
_2.sendData(true)}
,isc.A.transactionAsGetRequest=function isc_c_RPCManager_transactionAsGetRequest(_1,_2,_3){if(!_1.cleared)_1=this.getTransaction(_1)||this.getCurrentTransaction();_2=(_2||_1.URL||this.getActionURL());if(!_3)_3={};_3._transaction=this.serializeTransaction(_1);return this.addParamsToURL(this.markURLAsRPC(_2),_3)}
,isc.A.encodeParameter=function isc_c_RPCManager_encodeParameter(_1,_2){if(isc.isA.Date(_2)){isc.Comm.xmlSchemaMode=true;_2=_2.toSchemaDate();isc.Comm.xmlSchemaMode=null}else if(isc.isA.Array(_2)){var _3=isc.SB.create();for(var i=0;i<_2.length;i++){_3.append(this.encodeParameter(_1,_2[i]));if(i<_2.length-1)_3.append("&")}
return _3.toString()}if(!isc.isA.String(_2)){_2=isc.JSON.encode(_2,{prettyPrint:false})}
return isc.SB.concat(encodeURIComponent(_1),"=",encodeURIComponent(_2))}
,isc.A.addParamsToURL=function isc_c_RPCManager_addParamsToURL(_1,_2){var _3=_1;if(!_2)return _1;for(var _4 in _2){var _5=_2[_4];_3+=_3.contains("?")?"&":"?";_3+=this.encodeParameter(_4,_5)}
return _3}
,isc.A.serializeTransaction=function isc_c_RPCManager_serializeTransaction(_1){var _2;if(isc.Browser.isSGWT){window.SmartGWT.warnOnSerializeError=true;window.SmartGWT.serializeErrorMessage="Object is part of a request being serialized for transmission to the server. See SmartClient documentation of RPCRequest.data for a table of Java types that can be converted automatically."}
if(this.dataEncoding=="JS"){isc.Comm.$ev=true;if(isc.isAn.Array(_1.operations)){var _3=isc.DataSource.get(_1.operations[0].dataSource);if(_3){isc.Comm.$136q=!!_3.trimMilliseconds}
}
_2=isc.Comm.serialize(_1.requestData);isc.Comm.$136q=null;isc.Comm.$ev=null}else{isc.Comm.$850=true;if(isc.isAn.Array(_1.operations)){var _3=isc.DataSource.get(_1.operations[0].dataSource);if(_3){isc.Comm.$136q=!!_3.trimMilliseconds}
}
_2=isc.Comm.xmlSerialize("transaction",_1.requestData);isc.Comm.$136q=null;isc.Comm.$850=null}
if(isc.Browser.isSGWT){window.SmartGWT.warnOnSerializeError=false;window.SmartGWT.serializeErrorMessage=null}
return _2}
,isc.A.markURLAsRPC=function isc_c_RPCManager_markURLAsRPC(_1){if(!_1.contains("isc_rpc="))_1+=(_1.contains("?")?"&":"?")
+"isc_rpc=1&isc_v="+isc.versionNumber;return _1}
,isc.A.markURLAsXmlHttp=function isc_c_RPCManager_markURLAsXmlHttp(_1){if(!_1.contains("isc_xhr="))_1+=(_1.contains("?")?"&":"?")+"isc_xhr=1";return _1}
,isc.A.addDocumentDomain=function isc_c_RPCManager_addDocumentDomain(_1){if(!_1.contains("isc_dd="))_1+=(_1.contains("?")?"&":"?")+"isc_dd="+document.domain;return _1}
,isc.A.registerUnmaskedTarget=function isc_c_RPCManager_registerUnmaskedTarget(_1){if(!this.unmaskedTargets)this.unmaskedTargets=[];this.unmaskedTargets.add(_1)}
,isc.A.unregisterUnmaskedTarget=function isc_c_RPCManager_unregisterUnmaskedTarget(_1){if(this.unmaskedTargets)this.unmaskedTargets.remove(_1)}
,isc.A.sendQueue=function isc_c_RPCManager_sendQueue(_1,_2,_3,_4){var _5=this.currentTransaction;this.currentTransaction=null;this.queuing=false;if(!_5){this.logInfo("sendQueue called with no current queue, ignoring");return false}
if(_4)this.delayCall("$84s",[_1,_2,_3,_5]);else return this.$84s(_1,_2,_3,_5)}
,isc.A.$84s=function isc_c_RPCManager__sendQueue(_1,_2,_3,_4){var _5=_4.operations[0];if((!isc.Page.isLoaded()||this.delayingTransactions)&&!_5.$38j){_4.$76k={callback:_1,prompt:_2,URL:_3
};if(!this.delayingTransactions){isc.Page.setEvent("load",this,isc.Page.FIRE_ONCE,"resendDelayedTransactions");this.delayingTransactions=true}
this.delayTransaction(_4);return _5}
_4.timestamp=new Date().getTime();if(!this.onLine&&!this.offlinePlayback){this.offlineTransaction(_4);return _5}
var _6=true;for(var i=0;i<_4.operations.length;i++){if(!_4.operations[i].clientOnly){_6=false;break}
}
if(_6){_4.allClientOnly=true;_4.sendTime=isc.timeStamp();if(_1!=null){_4.$40c=_1}
this.delayCall("$39d",[_4.transactionNum],0);return _5}
_3=_4.URL=isc.Page.getURL(_3||_4.URL||this.getActionURL());var _8=false;if(!_5.useSimpleHttp&&_4.transport!="scriptInclude"){_3=this.markURLAsRPC(_3);if(_4.transport=="xmlHttpRequest"){_3=this.markURLAsXmlHttp(_3);_8=true}else{_3=this.addParamsToURL(_3,{isc_tnum:_4.transactionNum})}
if(document.domain!=location.hostname)_3=this.addDocumentDomain(_3)}
_2=_4.prompt=((_4.showPrompt==null||_4.showPrompt)?(_2||_4.prompt||this.defaultPrompt):null);if(_2)this.doShowPrompt(_4,_2,_4.promptDelay||this.promptDelay);var _9={};var _10=false;for(var i=0;i<_4.operations.length;i++){var _11=_4.operations[i];var _12=_11.params,_13=_12!=null;if(_8){_12=_12||{};_12.isc_tnum=_4.transactionNum}
var _14=_11.queryParams;var _15=_12;if(_14&&isc.isAn.Object(_14)){_3=_4.URL=this.addParamsToURL(_3,_14)}
if(_13&&_10){this.logWarn("Multiple RPCRequests with params attribute in one transaction - merging")}
if(_12){if(isc.isA.String(_12)){if(window[_12])_12=window[_12];else if(isc.Canvas.getForm(_12))_12=isc.Canvas.getForm(_12);else{this.logWarn("RPCRequest: "+isc.Log.echo(_11)
+" was passed a params value: "+_12
+" which does not resolve to a component or a native form - request to server will not include these params");_12=null}
}
if(isc.isA.Class(_12)){if(_12.getValues)_12=_12.getValues();else{this.logWarn("RPCRequest: "+isc.Log.echo(_11)
+" was passed an instance of class "+_12.getClassName()
+" (or a global ID that resolved to this class) - this class does not support the getValues() method - request to server will not include these params")}
}
if(_12&&!isc.isAn.Object(_12)){this.logWarn("params value: "+_15+" for RPCrequest: "
+isc.Log.echo(_11)+" resolved to non-object: "
+isc.Log.echo(_12)+" - request to server will not include these params");_12=null}
if(_12){isc.addProperties(_9,_12);_10=true}
}
}
if(this.logIsInfoEnabled()){this.logInfo("sendQueue["+_4.transactionNum+"]: "+_4.operations.length+" RPCRequest(s); transport: "+_4.transport+"; target: "+_3)}
if(isc.DataSource){for(var i=0;i<_4.operations.length;i++){var _11=_4.operations[i];isc.DataSource.recordTimingData(_11,"performDSOperation","end");isc.DataSource.recordTimingData(_11,"Marshall and send request","start")}
}
_4.changed();_4.callback="isc.RPCManager.performTransactionReply(transactionNum,results,wd)";if(_1)_4.$40c=_1;var _12=_9;var _16=_4.transport,_17="send"+(_16.substring(0,1).toUpperCase())+_16.substring(1);if(isc.Comm[_17]==null){this.logWarn("Attempt to send transaction with specified transport '"
+_4.transport+"' failed - unsupported transaction type.");return}
this.$39a(_4);var _18;var _19=[]
for(var i=0;i<_4.operations.length;i++){if(_4.operations[i].isRestRequest){_19.push(_4.operations[i])
}
}
if(_19.length>1){if(_19[0].contentType==this.$89f){_18="<transaction transactionNum=\""+_4.transactionNum+"\">";_18+="<operations>"
for(var i=0;i<_19.length;i++){_18+=_19[i].data}
_18+="</operations>";_18+="</transaction>"}else{_18="{ \"transaction\": { \"transactionNum\": "+_4.transactionNum+", ";_18+="\"operations\": [";for(var i=0;i<_19.length;i++){if(i>0)_18+=", ";var _20=_19[i].data||_19[i].params;if(!isc.isA.String(_20)){_20=isc.JSON.encode(_20)}
_18+=_20}
_18+="]}}"}
}
else if(_19.length==1){_18=_19[0].data}
else if(_5.useSimpleHttp){_18=_5.data}
isc.RPCManager.$410.add(_4.transactionNum);_4.transactionRequest=isc.Comm[_17]({URL:_3,httpMethod:_5.httpMethod,contentType:_5.contentType,httpHeaders:_5.httpHeaders,bypassCache:_5.bypassCache,data:_18,fields:_12,target:_5.target,callbackParam:_5.callbackParam,transport:_4.transport,blocking:_5.blocking,useSimpleHttp:_5.useSimpleHttp,transactionNum:_4.transactionNum,transaction:_4
});if(isc.isA.Function(this.queueSent))this.queueSent(_4.operations);_4.sendTime=isc.timeStamp();if(isc.DataSource){for(var i=0;i<_4.operations.length;i++){var _11=_4.operations[i];isc.DataSource.recordTimingData(_11,"Marshall and send request","end");isc.DataSource.recordTimingData(_11,"Client processing","end")}
}
return _5}
,isc.A.performTransactionReply=function isc_c_RPCManager_performTransactionReply(_1,_2,_3){var _4=this.getTransaction(_1);if(!_4){this.logWarn("performTransactionReply: No such transaction "+_1);return false}
delete _4.$66n;delete _4.abortCallbacks;_4.receiveTime=isc.timeStamp();_4.changed();isc.RPCManager.$410.remove(_1);this.logInfo("transaction "+_1+" arrived after "+(_4.receiveTime-_4.sendTime)+"ms");if(_2==null){this.logFatal("No results for transaction "+_1);return false}
if(_4.transport=="xmlHttpRequest"){var _5=_2;_4.xmlHttpRequest=_5;_2=_5.responseText;var _6;try{_6=_5.status}catch(e){this.logWarn("Unable to access XHR.status - network cable unplugged?");_6=-1}
if(_6==1223)_6=204;if(_6==0&&(location.protocol=="file:"||location.protocol=="app-resource:"))
_6=200;_4.httpResponseCode=_6;_4.httpResponseText=_5.responseText;if(_6!=-1&&!_4.ignoreReloginMarkers&&this.processLoginStatusText(_5,_1))
{return}
if(_6!=-1&&this.responseRequiresLogin(_5,_1)){this.handleLoginRequired(_1);return}
if(_6!=-1&&this.responseIsRelogin(_5,_1)){this.handleLoginRequired(_1);return}
if(_6==12030&&isc.Browser.isIE){this.logWarn("Received HTTP status code 12030, resubmitting request");this.resubmitTransaction(_1);return}
var _7=_4.URL;var _8;if(_4.isProxied){_7=_4.proxiedURL+" (via proxy: "+_7+")";var _9=this.getHttpHeaders(_5,_4);var _10;if(_9){for(var _11 in _9){if(_11.toLowerCase()=="x-isc-httpproxy-status"){_10=_9[_11];break}
}
}
if(_10&&_10=="-91")_8=-91;if(_10&&_10=="-92")_8=-92}
if(_8)_6=500;if(_6>299||_6<200){_2=this.$39c(_4,{data:"Transport error - HTTP code: "+_6
+" for URL: "+_7
+(_6==302?" This error is likely the result of a redirect to a server other than the origin server or a redirect loop.":""),status:_8?_8:isc.RPCResponse.STATUS_TRANSPORT_ERROR
});this.logDebug("RPC request to: "+_7
+" returned with http response code: "
+_6+". Response text:\n"
+_5.responseText);_4.status=_8?_8:isc.RPCResponse.STATUS_TRANSPORT_ERROR;_4.$66n=true;this.handleTransportError(_1,_4.status,_4.httpResponseCode,_4.httpResponseText);if(_4.suspended||_4.abortCallbacks){delete _4.abortCallbacks;delete _4.$66n
return}
delete _4.$66n}
if(_4.httpResponseText!=null&&_4.httpResponseText.contains("parent.isc.RPCManager.handleMaxPostSizeExceeded(window.name);"))
{this.$1327(_1);return}
}else if(_4.transport=="hiddenFrame"){if(!_4.ignoreReloginMarkers&&this.processLoginStatusText(_2,_1))
{return}
}
_4.results=_2;this.$39d(_1);return true}
);isc.evalBoundary;isc.B.push(isc.A.$1327=function isc_c_RPCManager__handleMaxPostSizeExceeded(_1){var _2=this.getTransaction(_1);var _3=this.$39c(_2,{data:"The server did not receive the data that was sent to it.  Please see the documentation for isc.RPCResponse.STATUS_MAX_POST_SIZE_EXCEEDED",status:isc.RPCResponse.STATUS_MAX_POST_SIZE_EXCEEDED
});_2.status=isc.RPCResponse.STATUS_MAX_POST_SIZE_EXCEEDED
_2.results=_3;this.$39d(_1)}
,isc.A.handleMaxPostSizeExceeded=function isc_c_RPCManager_handleMaxPostSizeExceeded(_1){var _2=window[_1];if(!_2){this.logError("Unable to handle max post size exceeded - can't locate object: "+_1);return}
var _3=this.getTransaction(_2);if(!_3){this.logError("Unable to find transaction for comm frame id: "+_1);return}
this.$1327(_3.transactionNum)}
,isc.A.responseIsRelogin=function isc_c_RPCManager_responseIsRelogin(_1,_2){var _3=_1.status;if(document.domain!=location.hostname&&((_3==302&&this.treatRedirectAsRelogin)||(_3==0)||(_3==200&&_1.getAllResponseHeaders()==isc.emptyString&&_1.responseText==isc.emptyString)
))
{this.logDebug("Detected document.domain 302 relogin condition - status: "+_3);return true}
return false}
,isc.A.processLoginStatusText=function isc_c_RPCManager_processLoginStatusText(_1,_2){var _3=_1.responseText||_1;if(_3&&_3.length<this.maxLoginPageLength){if(this.loginSuccessMarker.indexOf(this.loginStatusCodeMarker)!=0
||this.maxLoginAttemptsExceededMarker.indexOf(this.loginStatusCodeMarker)!=0
||this.loginRequiredMarker.indexOf(this.loginStatusCodeMarker)!=0){}else{var _4=_3.indexOf(this.loginStatusCodeMarker);if(_4==-1)return false}
if(_3.indexOf(this.loginRequiredMarker,_4)!=-1){this.handleLoginRequired(_2);return true}else if(_3.indexOf(this.loginSuccessMarker,_4)!=-1){this.handleLoginSuccess(_2);return true}else if(_3.indexOf(this.maxLoginAttemptsExceededMarker,_4)!=-1){this.handleMaxLoginAttemptsExceeded(_2);return true}
}
return false}
,isc.A.processLoginStatusCode=function isc_c_RPCManager_processLoginStatusCode(_1,_2){if(_1.status==isc.RPCResponse.STATUS_LOGIN_REQUIRED){this.handleLoginRequired(_1.transactionNum);return true}else if(_1.status==isc.RPCResponse.STATUS_LOGIN_SUCCESS){this.handleLoginSuccess(_1.transactionNum);return true}else if(_1.status==isc.RPCResponse.STATUS_MAX_LOGIN_ATTEMPTS_EXCEEDED){this.handleMaxLoginAttemptsExceeded(_1.transactionNum);return true}
return false}
,isc.A.responseRequiresLogin=function isc_c_RPCManager_responseRequiresLogin(_1,_2){return false}
,isc.A.createRPCResponse=function isc_c_RPCManager_createRPCResponse(_1,_2,_3){var _4=isc.addProperties({operationId:_2.operation.ID,clientContext:_2.clientContext,internalClientContext:_2.internalClientContext,context:_2,transactionNum:_1.transactionNum,httpResponseCode:_1.httpResponseCode,httpResponseText:_1.httpResponseText,xmlHttpRequest:_1.xmlHttpRequest,transport:_1.transport,status:_1.status,clientOnly:_2.clientOnly
},_3);if(_1.transport=="xmlHttpRequest"){isc.addProperties(_4,{httpHeaders:this.getHttpHeaders(_1.xmlHttpRequest,_1)
})}
return _4}
,isc.A.getHttpHeaders=function isc_c_RPCManager_getHttpHeaders(_1,_2){if(_2.allClientOnly){return}
if(!_1){this.logWarn("getHttpHeaders called with a null XmlHttpRequest object");return}
if(!isc.Browser.isIE&&!_1.getAllResponseHeaders){return null}
var _3;try{_3=_1.getAllResponseHeaders()}catch(e){this.logWarn("Exception thrown by xmlHttpRequest.getAllResponseHeaders(): "+e)}
if(!_3){this.logWarn("xmlHttpRequest.getAllResponseHeaders() returned null");return null}
var _4=_3.split('\n');var _5={};for(var i=0;i<_4.length;i++){if(_4[i].replace(/^\s+|\s+$/g,'')=="")continue;var _7=_4[i].indexOf(':');if(_7==-1){this.logWarn("GetAllResponseHeaders string had malformed entry at line "+1+".  Line reads "+_4[i]);continue}
var _8=_4[i].substring(0,_7);_5[_8]=_4[i].substring(_7+1).replace(/^\s+|\s+$/g,'');if(_5[_8]=="true")_5[_8]=true;if(_5[_8]=="false")_5[_8]=false}
if(_5["X-Proxied-Set-Cookie"]!=null){_5["Set-Cookie"]=_5["X-Proxied-Set-Cookie"]}
return _5}
,isc.A.$89o=function isc_c_RPCManager__stripXMLTransactionTags(_1){var _2=_1.indexOf(this.$89j);if(_2!=-1){return _1.substring(_2+this.$89j.length,_1.lastIndexOf(this.$89k))}
return _1}
,isc.A.$89g=function isc_c_RPCManager__getXMLResponses(_1){_1=this.$89o(_1);var _2=[];var _3=0;if(_1){while(true){var _4=_1.indexOf(this.$89l,_3);if(_4==-1)break;_3=_1.indexOf(this.$89m,_4);if(_3==-1)break;_2.add(_1.substring(_4,_3+this.$89m.length))}
}
return _2}
,isc.A.$89n=function isc_c_RPCManager__stripRestTags(_1,_2){if(!_1||!_2)return _1;var _3=_2.jsonPrefix?_1.indexOf(_2.jsonPrefix):0,_4=_2.jsonPrefix?_2.jsonPrefix.length:0,_5=_2.jsonSuffix?_1.lastIndexOf(_2.jsonSuffix):_1.length;if(_3==-1){this.logWarn("DataSource "+_2.ID+": REST response did not contain the jsonPrefix configured for this DataSource ('"+_2.jsonPrefix+"'). Response evaluation may well fail as a result. Check your server logic and/or DataSource definition.");_3=0}
if(_5==-1){this.logWarn("DataSource "+_2.ID+": REST response did not contain the jsonSuffix configured for this DataSource ('"+_2.jsonSuffix+"'). Response evaluation may well fail as a result. Check your server logic and/or DataSource definition.");_3=_1.length}
return _1.substring(_3+_4,_5)}
,isc.A.$39d=function isc_c_RPCManager__performTransactionReply(_1){var _2=this.getTransaction(_1);this.clearTransactionTimeout(_1);if(!_2)return;if(this.logIsDebugEnabled()){this.logDebug("Result string for transaction "+_1+": "+isc.Log.echoAll(_2.results))}
var _3;var _4=false,_5=false,_6=null;if(_2.operations[0]
&&_2.operations[0].allowIE9Leak!=null)
{_4=_2.operations[0].allowIE9Leak}else if(isc.RPCManager.allowIE9Leak){_4=true}
if(_2.operations[0]&&_2.operations[0].useStrictJSON!=null){_5=_2.operations[0].useStrictJSON;_6=_2.operations[0].jsonReviver}
if(isc.Log.logIsInfoEnabled("RpcTabTiming")){_2.parseOrEvalResponseStart=isc.timeStamp()}
if(_2.transport=="scriptInclude"){}else if(isc.isAn.Array(_2.results)){_3=true}else if(_2.allClientOnly){_2.results={status:0};_2.receiveTime=isc.timeStamp()}else{var _7=_2.operations[0];if(_7&&_7.isRestRequest){var _8=isc.DataSource.get(_7.dataSource);if(_8){if(_7&&_7.dataFormat=="json"&&_8.jsonPrefix==null)
{_3=true}else{var _9=_2.results?_2.results.indexOf(_8.jsonPrefix):-1;_3=_9!=-1}
if(_3){var _10=_2.results;_10=this.$89n(_10,_8);try{if(_5){_2.results=isc.Class.parseStrictJSON(structuredResponse,_6)}else{_2.results=isc.eval("("+_10+")",(_4?false:true))}
}catch(e){this.logWarn("Error evaling REST RPC response: "+e
+" response text: "+_10)}
}
}
}
if(!_3){var _11=isc.isAn.Array(_2.operations)?_2.operations[0]
:null;if(_11&&_11.isRestRequest&&_2.operations.length>1){if(_11.dataFormat=="json"){this.logWarn("Found a REST request that appears to be in JSON format, but the response was not wrapped as configured by the jsonPrefix and jsonSuffix properties - aborting")
return}else{_2.results=this.$89g(_2.results);_3=_2.results!=null}
}
}
}
if(isc.Log.logIsInfoEnabled("RpcTabTiming")){_2.parseOrEvalResponseEnd=isc.timeStamp()}
var _12=_2.results;if(_3&&!isc.isAn.Array(_12))_12=[_12];var _13=_2.operations,_14=[];_2.$66n=true;for(var i=0,j=0;i<_13.length;i++){var _7=_13[i];var _17;if(_3&&_7.clientOnly){_17=isc.addProperties(this.createRPCResponse(_2,_7),{isStructured:false
})}else{_17=isc.addProperties(this.createRPCResponse(_2,_7),{isStructured:_3,callbackArgs:_2.transport=="scriptInclude"?_12:null,results:_3?_12[j]:_12
});if(_3&&_7.isRestRequest){isc.addProperties(_17,{data:_12[j]})}
j++}
if(_17.status==null)_17.status=0;if(_17.isStructured){if(_17.results.errors){var _18=_17.results.errors;if(isc.isAn.Array(_18)&&_18.length==1){_18=_18[0]}
}
if(_17.results&&!_7.isRestRequest){if(!_17.results.response){isc.addProperties(_17,_17.results)}else{isc.addProperties(_17,_17.results.response)}
}
}
_14[i]=_17;_2.responses[i]=_17;_2.changed()}
var _19=0;while(_19<_13.length&&!_2.suspended&&!_2.abortCallbacks)
{var _7=_13[_19],_17=_14[_19];if(isc.DataSource){isc.DataSource.recordTimingData(_17,"Parse/eval response","start",_2.parseOrEvalResponseStart);isc.DataSource.recordTimingData(_17,"Parse/eval response","end",_2.parseOrEvalResponseEnd);isc.DataSource.recordTimingData(_17,"performOperationReply","start")}
this.performOperationReply(_7,_17);if(isc.DataSource){isc.DataSource.recordTimingData(_17,"performOperationReply","end")}
_19++}
if(this.transactionComplete!=null){this.transactionComplete(_2)}
if(_2.showPrompt)this.doClearPrompt(_2);if(!_2.suspended&&!_2.abortCallbacks){this.clearTransaction(_1)}
delete _2.abortCallbacks;delete _2.$66n;if(_2.offline)this.playbackNextOfflineTransaction();if(isc.DataSource){var _20=isc.timeStamp();var _19=0;while(_19<_13.length&&!_2.suspended&&!_2.abortCallbacks)
{isc.DataSource.recordTimingData(_14[_19++],"User callback invoked","start",_20)}
}
if(_2.$40c){var _21=_7.application?_7.application
:this.getDefaultApplication();if(isc.isA.String(_21))_21=window[_21];_21.fireCallback(_2.$40c,"responses",[_2.responses])}
if(isc.DataSource){var _22=isc.timeStamp();var _19=0;while(_19<_13.length&&!_2.suspended&&!_2.abortCallbacks)
{isc.DataSource.recordTimingData(_14[_19],"User callback invoked","end",_22);isc.DataSource.recordTimingData(_14[_19++],"Client processing","end",_22)}
}
}
,isc.A.performOperationReply=function isc_c_RPCManager_performOperationReply(_1,_2){var _3=_2.results,_4=_1.operation;if(this.logIsInfoEnabled()){this.logInfo("rpcResponse(unstructured) results -->"
+isc.Log.echoAll(_3)+"<--")}
this.pendingRpcs--;var _5=isc.RPC.transformResponse(_2,_1,_1.data);_2=_5||_2;if(this.processLoginStatusCode(_2,_2.transactionNum))return;return this.fireReplyCallbacks(_1,_2)}
,isc.A.fireReplyCallback=function isc_c_RPCManager_fireReplyCallback(_1,_2,_3,_4){var _5=_2.application?_2.application
:this.getDefaultApplication();if(isc.isA.String(_5))_5=window[_5];var _6=_5.fireCallback(_1,"rpcResponse,data,rpcRequest",[_3,_4,_2]);return _6}
,isc.A.evalResult=function isc_c_RPCManager_evalResult(_1,_2,_3){var _4=_1.evalVars;this.logDebug("evaling result"+(_4?" with evalVars: "+isc.Log.echo(_4):""));var _5=isc.Canvas.getInstanceProperty("autoDraw");if(_1.suppressAutoDraw)isc.Canvas.setInstanceProperty("autoDraw",false);if(_3.match(/^\s*\{/)){_3="var evalText="+_3+";evalText;"
}
var _6=isc.Class.evalWithVars(_3,_4);if(_1.suppressAutoDraw)isc.Canvas.setInstanceProperty("autoDraw",_5);return _6}
,isc.A.fireReplyCallbacks=function isc_c_RPCManager_fireReplyCallbacks(_1,_2){var _3=_1.operation,_4=_2.results,_5=_1.evalResult&&_1.transport!="scriptInclude"?this.evalResult(_1,_2,_4):null
;var _6;_6=(_1.evalResult?_5:_4);_2.data=_6;var _7=this.getTransaction(_2.transactionNum);var _8=_1.callback;if(_8!=null){this.fireReplyCallback(_8,_1,_2,_6)}
}
,isc.A.$a0=function isc_c_RPCManager__handleError(_1,_2){if(_1.ignoreError)return;if(_2.dataSource){var _3=isc.DataSource.get(_2.dataSource);if(_3&&_3.handleError){var _4=_3.handleError(_1,_2);if(_4==false)return}
}
return this.handleError(_1,_2)}
,isc.A.handleError=function isc_c_RPCManager_handleError(_1,_2){var _3=(_1.context?_1.context:{}),_4;if(isc.isA.String(_1.data)){_4=_1.data;if(isc.isA.String(_4)){var _5=_4;if(_5.length>this.maxErrorMessageLength){var _6=_5.length-this.maxErrorMessageLength;_5=_5.substring(0,this.maxErrorMessageLength)
+"<br><br>...("+_6+" bytes truncated - set isc.RPCManager.maxErrorMessageLength > "
+this.maxErrorMessageLength
+" to see more or check the Developer Console for full error)..."}
this.reportError(_5)}
}else{var _7=isc.getKeyForValue(_1.status,isc.RPCResponse.errorCodes);if(isc.isA.String(_7)){if(_7.startsWith("STATUS_"))_7=_7.substring(7)}else{_7=(_1.status!=null?"error code: "+_1.status
:"unknown error code")}
var _8=_1.operationId||_1.operationType,_9="";if(_7=="MAX_FILE_SIZE_EXCEEDED"){_4=isc.DataSource.maxFileSizeExceededMessage.evalDynamicString(this,{maxFileSize:_1.maxFileSize,uploadedFileName:_1.uploadedFileName,uploadedFileSize:_1.uploadedFileSize
});_9="\nSet rpcRequest.willHandleError:true on your request to handle this error yourself, or add a custom handleError to RPCManager to change system-wide default error reporting"}else if(_7=="VALIDATION_ERROR"){_4="Server returned validation errors: "+isc.echoFull(_1.errors);_9="\nSet rpcRequest.willHandleError:true on your request to handle this error yourself, or add a custom handleError to RPCManager to change system-wide default error reporting"}else{_4="Server returned "+_7+" with no error message"+(_8?" performing operation '"+_8+"'.":".")}
this.reportError(_4)}
this.logWarn(_4+_9+" - response: "+this.echo(_1));return false}
,isc.A.handleTransportError=function isc_c_RPCManager_handleTransportError(_1,_2,_3,_4){}
,isc.A.handleLoginRequired=function isc_c_RPCManager_handleLoginRequired(_1){if(this.$39j&&this.$39j==_1)return;var _2=this.getTransaction(_1);if(_2==null)return;_1=_2.transactionNum;this.clearTransactionTimeout(_2);var _3=_2.operations[0],_4=this.createRPCResponse(_2,_3);this.logInfo("loginRequired for transaction: "+_1+(_2.containsCredentials?", transaction containsCredentials":""));if(_2.containsCredentials){if(_3.callback){_4.status=isc.RPCResponse.STATUS_LOGIN_INCORRECT;this.fireReplyCallbacks(_3,_4);this.clearTransaction(_2);return}
this.clearTransaction(_2)}
this.suspendTransaction(_2);if(this.loginRequired){_4.status=isc.RPCResponse.STATUS_LOGIN_REQUIRED;this.loginRequired(_1,_3,_4);return}
var _5=this.addParamsToURL(this.credentialsURL,{ts:new Date().getTime()});this.$39j=window.open(_5,this.loginWindowSettings)}
,isc.A.handleLoginSuccess=function isc_c_RPCManager_handleLoginSuccess(_1){var _2=this.getTransaction(_1);if(_2&&_2.containsCredentials){this.clearTransactionTimeout(_2);var _3=_2.operations[0];if(_3.callback){var _4=this.createRPCResponse(_2,_3,{status:isc.RPCResponse.STATUS_SUCCESS
});this.fireReplyCallbacks(_3,_4);this.clearTransaction(_2);return}
this.clearTransaction(_2)}
if(this.$39j)this.$39j.close();if(this.loginSuccess&&this.loginSuccess()===false)return;this.resendTransaction()}
,isc.A.handleMaxLoginAttemptsExceeded=function isc_c_RPCManager_handleMaxLoginAttemptsExceeded(_1){var _2=this.getTransaction(_1);if(_2&&_2.containsCredentials){this.clearTransactionTimeout(_2);var _3=_2.operations[0];if(_3.callback){var _4=this.createRPCResponse(_2,_3,{status:isc.RPCResponse.STATUS_MAX_LOGIN_ATTEMPTS_EXCEEDED
});this.fireReplyCallbacks(_3,_4);this.clearTransaction(_2);return}
this.clearTransaction(_2)}
if(this.$39j)this.$39j.close();if(this.maxLoginAttemptsExceeded)this.maxLoginAttemptsExceeded();else{var _5="Max login attempts exceeded.";if(isc.warn)isc.warn(_5);else alert(_5)}
}
,isc.A.exportContent=function isc_c_RPCManager_exportContent(_1,_2){if(_2==null)_2={};var _3=isc.Page.getSkinDir(),_4=_3.trim("/").split("/").last();var _5={pdfName:_2.exportFilename||_2.pdfName||"export",skinName:_2.skinName||_4,defaultSkinName:_3
};var _6=isc.addProperties({showPrompt:false,transport:"hiddenFrame",exportResults:true,downloadResult:true,downloadToNewWindow:false,download_filename:null
},_2);delete _6.pdfName;delete _6.skinName;if(isc.Browser.isMobileSafari&&_6.downloadToNewWindow==true){var _7=_6.newDownloadWindow=_6.download_filename||"request_"+isc.timeStamp();window.open(null,_7).document.write(this.$143q)}
var _8=function(_10){isc.DMI.callBuiltin({methodName:"getPdfObject",arguments:[_10,_5],requestParams:_6
})};var _9=isc.Canvas.getPrintHTML(_1,{printForExport:true
},_8);if(_9!=null){_8(_9)}
}
,isc.A.exportImage=function isc_c_RPCManager_exportImage(_1,_2,_3){var _4=_2||{},_5=(_4.exportDisplay!=this.$113o);var _6={downloadResult:_5
};isc.DMI.callBuiltin({methodName:"exportImage",arguments:[_1,_2],requestParams:_6,callback:function $113p(_7,_8,_9){if(_3){isc.Class.fireCallback(_3,"imageData",[_8.base64])}
}
})}
,isc.A.reportError=function isc_c_RPCManager_reportError(_1){isc.warn(_1.asHTML())}
,isc.A.transformResponse=function isc_c_RPCManager_transformResponse(_1,_2,_3){return _1}
,isc.A.transformRequest=function isc_c_RPCManager_transformRequest(_1){return _1.data}
,isc.A.loadScreen=function isc_c_RPCManager_loadScreen(_1,_2,_3,_4,_5){if(!_1){this.logWarn("No screen names passed in.");this.fireCallback(_2,"data",[null]);return}
if(!isc.isAn.Array(_1))_1=[_1];if(_1.length<=0){this.logWarn("No screen names passed in.");this.fireCallback(_2,"data",[null]);return}
if(!_3)_3=[];if(!isc.isAn.Array(_3))_3=[_3];var _6={};if(_5)isc.addProperties(_6,_5);if(_6.params==null)_6.params={};_6.params.screenName=_1.join(",");if(_4){isc.addProperties(_6.params,{locale:_4})}
if(!_6.actionURL)_6.actionURL=this.screenLoaderURL;_6.useSimpleHttp=true;var _7=this;_6.callback=function(_8,_9,_10){_7.$112r(_8,_9,_10,_2,_3)};this.sendRequest(_6)}
,isc.A.createScreen=function isc_c_RPCManager_createScreen(_1,_2){if(!_1){this.logWarn("No screen names passed in.");return null}
if(!_2)_2=[];if(!isc.isAn.Array(_2))_2=[_2];var _3=this;var _4=_3.$112s[_1];if(!_4){return null}
return this.$112r(null,_4,null,null,_2)}
,isc.A.$112r=function isc_c_RPCManager__makeScreen(_1,_2,_3,_4,_5){if(!_3){_3={}};var _6=isc.Canvas.getInstanceProperty("autoDraw"),_7=_3.suppressAutoDraw==null?true:_3.suppressAutoDraw;if(_7)isc.Canvas.setInstanceProperty("autoDraw",false);var _8=this;if(_5.length==1&&_5[0]==_8.ALL_GLOBALS){var _9=isc.Class.globalEvalWithCapture(_2,function(_5,_17){if(_17!=null)isc.Log.$am(_17,null,null,null,"Error when executing loaded screen");var _10=isc.Canvas.$112q(_5);var _11={};if(_7)isc.Canvas.setInstanceProperty("autoDraw",_6);_8.fireCallback(_4,"screen,rpcResponse,suppressedGlobals",[_10,_1,_11])},null,false);var _10=isc.Canvas.$112q(_9.globals);return _10}else{var _9=isc.Class.globalEvalAndRestore(_2,_5,function(_5,_17,_11){if(_17!=null)isc.Log.$am(_17,null,null,null,"Error when executing loaded screen");var _10=isc.Canvas.$112q(_5);if(_7)isc.Canvas.setInstanceProperty("autoDraw",_6);var _12={};var _13=isc.getKeys(_11)
for(var i=0;i<_13.length;i++){var _15=_13[i];var _16=window[_15];if(_16&&(isc.isA.Canvas(_16)||isc.isA.FormItem(_16))){_12[_15]=_16}
}
_11=_12;_8.fireCallback(_4,"screen,rpcResponse,suppressedGlobals",[_10,_1,_11])},null,false,true);var _10=isc.Canvas.$112q(_9.globals);return _10}
}
,isc.A.cacheScreens=function isc_c_RPCManager_cacheScreens(_1,_2,_3,_4){if(!_1){this.logWarn("No screen names passed in.");this.fireCallback(_2,"data",[null]);return}
if(!isc.isAn.Array(_1))_1=[_1];if(_1.length<=0){this.logWarn("No screen names passed in.");this.fireCallback(_2,"data",[null]);return}
var _5={};if(_4)isc.addProperties(_5,_4);_5.params={screenName:_1.join(",")};if(_3){isc.addProperties(_5.params,{locale:_3})}
isc.addProperties(_5.params,{structuredResponse:true});if(!_5.actionURL)_5.actionURL=this.screenLoaderURL;_5.useSimpleHttp=true;var _6=this;_5.callback=function(_9,_10,_11){isc.Class.globalEvalWithCapture(_10,function(_12,_13){if(_13!=null)isc.Log.$am(_13,null,null,null,"Error when executing cache screen");if(!_6.$112s){_6.$112s={}}
var _7=isc.Class.evaluate(_10);for(var i=0;i<_7.length;i++){if(_6.$112s[_7[i].screenName]){_6.logWarn("Screen "+_7[i].screenName+" is already cached. Replacing.")}
_6.$112s[_7[i].screenName]=_7[i].source}
_6.fireCallback(_2,"data,rpcResponse",[_7,_9])},null,false)};this.sendRequest(_5)}
,isc.A.requestsArePending=function isc_c_RPCManager_requestsArePending(){return this.pendingRpcs!=0}
);isc.B._maxIndex=isc.C+86;isc.RPCManager.rpc_logMessage=isc.RPCManager.logMessage;isc.RPCManager.logMessage=function(_1,_2,_3,_4){if(this.logIsEnabledFor(_1,_3)){if(isc.isA.String(_2)&&_2.length>this.maxLogMessageLength
&&!this.logIsEnabledFor(_1,"RPCManagerResponse"))
{var _5=_2.length-this.maxLogMessageLength;_2=_2.substring(0,this.maxLogMessageLength)
+"\n...("+_5+" bytes truncated).  Enable RPCManagerResponse log at same threshold to see full message."
}
}
this.rpc_logMessage(_1,_2,_3,_4)};isc.addGlobal("InstantDataApp",isc.RPCManager);isc.isA.InstantDataApp=isc.isA.RPCManager;isc.A=isc.InstantDataApp;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.addDefaultOperation=function isc_c_InstantDataApp_addDefaultOperation(_1,_2,_3){if(!_1)_1={};_1.operation=isc.DataSource.makeDefaultOperation(_2,_3,_1.operation);return _1}
,isc.A.setDefaultApplication=function isc_c_InstantDataApp_setDefaultApplication(_1){isc.InstantDataApp.defaultApplication=_1}
,isc.A.getDefaultApplication=function isc_c_InstantDataApp_getDefaultApplication(){if(this.defaultApplication==null){this.create({ID:"builtinApplication",dataSources:[],operations:{},pointersToThis:[{object:this,property:"defaultApplication"}]
})}
return this.defaultApplication}
,isc.A.app=function isc_c_InstantDataApp_app(){return this.getDefaultApplication()}
);isc.B._maxIndex=isc.C+4;isc.A=isc.InstantDataApp.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.init=function isc_InstantDataApp_init(){if(this.ID!="builtinApplication")isc.ClassFactory.addGlobalID(this);if(isc.rpc.defaultApplication==null||isc.rpc.defaultApplication.getID()=="builtinApplication")
{isc.rpc.setDefaultApplication(this)}
}
);isc.B._maxIndex=isc.C+1;isc.defineInterface("IRPCStatusListener").addInterfaceProperties({initInterface:function(){this.observe(isc.RPCManager.$38z,"dataChanged","observer.transactionsChanged()")},destroyInterface:function(){this.ignore(isc.RPCManager.$38z,"dataChanged")},transactionsChanged:function(){},getActiveTransactions:function(){var _1=[];var _2=isc.RPCManager.getTransactions();for(var i=0;i<_2.length;i++){var _4=_2[i];if(_4&&!_4.cleared&&_4.operations){var _5=true;for(var j=0;j<_4.operations.length;j++){var _7=_4.operations[j];if(_7.downloadResult||_7.$38j){_5=false;break}
}
if(_5)_1.add(_4)}
}
return _1},haveActiveTransactions:function(){return this.getActiveTransactions().length>0}});isc.defineInterface("IRPCUnmaskedTarget").addInterfaceProperties({initInterface:function(){isc.RPCManager.registerUnmaskedTarget(this)},destroyInterface:function(){isc.RPCManager.unregisterUnmaskedTarget(this)}});isc.defineClass("UnmaskedTargetLandingPad","Canvas");isc.A=isc.UnmaskedTargetLandingPad.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.overflow="visible";isc.A.height=1;isc.A.width=1;isc.A.observationHooks=["draw","clear","moved","parentMoved","parentResized","parentVisibilityChanged"];isc.B.push(isc.A.initWidget=function isc_UnmaskedTargetLandingPad_initWidget(){this.Super("initWidget",arguments);for(var i=0;i<this.observationHooks.length;i++){this.observe(this,this.observationHooks[i],"observer.manageUnmaskedTarget()")}
this.setUnmaskedTarget(this.unmaskedTarget)}
,isc.A.setUnmaskedTarget=function isc_UnmaskedTargetLandingPad_setUnmaskedTarget(_1){this.unmaskedTarget=_1;if(this.unmaskedTarget){this.observe(this.unmaskedTarget,"resized","observer.manageUnmaskedTarget()")}}
,isc.A.manageUnmaskedTarget=function isc_UnmaskedTargetLandingPad_manageUnmaskedTarget(){if(!this.unmaskedTarget)return;if(this.isVisible()&&this.isDrawn()){if(this.getVisibleWidth()<this.unmaskedTarget.getVisibleWidth())this.setWidth(this.unmaskedTarget.getVisibleWidth());if(this.getVisibleHeight()<this.unmaskedTarget.getVisibleHeight())this.setHeight(this.unmaskedTarget.getVisibleHeight());var _1=this.getPageLeft(),_2=this.getPageTop();this.unmaskedTarget.moveTo(_1,_2);this.unmaskedTarget.bringToFront();this.unmaskedTarget.show()}else{this.unmaskedTarget.hide()}}
,isc.A.destroy=function isc_UnmaskedTargetLandingPad_destroy(){for(var i=0;i<this.obsevationHooks.length;i++){this.ignore(this,this.observationHooks[i])}
if(this.unmaskedTarget)this.ignore(this.unmaskedTarget,"resized");this.Super("destroy",arguments)}
);isc.B._maxIndex=isc.C+4;isc.defineClass("RPCStatusControl","UnmaskedTargetLandingPad");isc.A=isc.RPCStatusControl.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.statusIndicatorDefaults={_constructor:"RPCStatusMenuButton"};isc.B.push(isc.A.initWidget=function isc_RPCStatusControl_initWidget(){this.Super("initWidget",arguments);this.statusIndicator=this.createAutoChild("statusIndicator",{canCancelQueue:this.canCancelQueue
});this.setUnmaskedTarget(this.statusIndicator)}
);isc.B._maxIndex=isc.C+1;if(isc.MenuButton){isc.defineClass("RPCStatusMenuButton","MenuButton",["IRPCStatusListener","IRPCUnmaskedTarget"]);isc.A=isc.RPCStatusMenuButton.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.width=40;isc.A.height=20;isc.A.defaultPrompt="Idle";isc.A.progressImage="[SKINIMG]loadingSmall.gif";isc.A.progressImageWidth=16;isc.A.progressImageHeight=16;isc.A.noProgressImage="[SKINIMG]loadingSmallFrozen.gif";isc.A.noProgressImageWidth=16;isc.A.noProgressImageHeight=16;isc.A.canCancelQueue=false;isc.A.confirmCancelQueue=true;isc.A.cancelQueueConfirmationMessage="Cancelling a request may have unintended consequences.  You should only do this if you requested data that is taking too long to load, but not if you are saving data.<br><br> Are you sure you want to cancel this request?";isc.B.push(isc.A.cancelQueue=function isc_RPCStatusMenuButton_cancelQueue(){var _1=this.getActiveTransactions();for(var i=0;i<_1.length;i++){this.logWarn("cancel queue: "+i+" with value: "+isc.echoFull(_1[i].transactionNum));isc.RPCManager.cancelQueue(_1[i])}}
,isc.A.initWidget=function isc_RPCStatusMenuButton_initWidget(){this.Super("initWidget",arguments);var _1=[];_1.add({title:isc.RPCManager.defaultPrompt,isPrompt:true,enabled:false});if(this.canCancelQueue){var _2=this;_1.add({title:"Cancel all requests",icon:"[SKINIMG]actions/close.png",click:function(){if(_2.confirmCancelQueue){isc.confirm(_2.cancelQueueConfirmationMessage,function(_3){if(_3)_2.cancelQueue()})}else{_2.cancelQueue()}
}})}
this.menu=isc.Menu.create({data:_1
});this.menuButton=this.createAutoChild("menuButton",{menu:this.menu
});this.updateState();this.addAutoChildren(this.autoChildren)}
,isc.A.updateState=function isc_RPCStatusMenuButton_updateState(){var _1=this.getActiveTransactions();var _2=isc.RPCManager.getTransaction(_1[_1.length-1]);var _3="";var _4=this.menu.data.find("isPrompt",true);if(_2){_3+=isc.Canvas.getImgHTML(this.progressImage,this.progresImageWidth,this.progressImageHeight);if(_4)this.menu.setItemTitle(_4,_2.prompt);this.setDisabled(false)}else{_3+=isc.Canvas.getImgHTML(this.noProgressImage,this.noProgresImageWidth,this.noProgressImageHeight);if(_4)this.menu.setItemTitle(_4,this.defaultPrompt);this.setDisabled(true)}
this.setTitle(_3)}
,isc.A.transactionsChanged=function isc_RPCStatusMenuButton_transactionsChanged(){this.updateState()}
);isc.B._maxIndex=isc.C+4}
isc.defineClass("DMI").addClassProperties({actionURL:isc.RPCManager.actionURL,call:function(_1,_2,_3){var _4=[];for(var i=0;i<arguments.length;i++)_4[_4.length]=arguments[i];var _6={};if(isc.isAn.Object(_1)&&_4.length==1){var _7=isc.clone(_1);if(_7.requestParams){isc.addProperties(_6,this.requestParams,_7.requestParams);delete _7.requestParams;if(_7.downloadResult==true){_7.showPrompt=false;_7.transport="hiddenFrame"}
}
_6.callback=_7.callback;delete _7.callback;_6.data=_7}else{_6.data={appID:_1,className:_2,methodName:_3,arguments:_4.slice(3,_4.length-1)
};_6.callback=_4[_4.length-1]
}
_4=_6.data.arguments;if(!isc.isAn.Array(_4)){if(_4==null)_4=[];else _4=[_4]}
_6.data.arguments=_4;_6.data.is_ISC_RPC_DMI=true;if(this.addMetaDataToQueryString){if(!_6.queryParams)_6.queryParams={};isc.addProperties(_6.queryParams,{dmi_appID:_6.data.appID,dmi_class:_6.data.className,dmi_method:_6.data.methodName
})}
return isc.RPCManager.sendRequest(_6)},getURL:function(_1,_2,_3){var _4=[];for(var i=0;i<arguments.length;i++)_4[_4.length]=arguments[i];var _6={};if(isc.isAn.Object(_1)&&_4.length==1){var _7=isc.clone(_1);if(_7.requestParams){isc.addProperties(_6,this.requestParams,_7.requestParams);delete _7.requestParams;if(_7.downloadResult==true){_7.showPrompt=false;_7.transport="hiddenFrame"}
}
_6.data=_7}else{_6.data={appID:_1,className:_2,methodName:_3,arguments:_4.slice(3,_4.length)
}}
_4=_6.data.arguments;if(!isc.isAn.Array(_4)){if(_4==null)_4=[];else _4=[_4]}
_6.data.arguments=_4;_6.data.is_ISC_RPC_DMI=true;_6.$38j=true;_6.showPrompt=false;return isc.RPCManager.sendRequest(_6)},callTemplate:"(function(){var x = function (firstArg) { var isCall = ${isCall};var obj = {};obj.requestParams=this.requestParams;if(isc.isAn.Object(firstArg) && arguments.length == 1){isc.addProperties(obj,{appID:'${appID}',className:'${className}',methodName:'${methodName}'},firstArg);} else {var args = [];for (var i = 0; i < arguments.length; i++) args[args.length] = arguments[i];isc.addProperties(obj,{appID:'${appID}',className:'${className}',methodName:isCall?firstArg:'${methodName}',arguments:args.slice(isCall ? 1 : 0,args.length-1),callback:args[args.length-1]});}isc.DMI.call(obj);};return x})()",bind:function(_1,_2,_3,_4){if(!isc.isAn.Array(_3))_3=[_3];_4=isc.addProperties({},this.requestParams,_4)
var _5=isc.defineClass(_2).addClassProperties({requestParams:_4
});var _6={appID:_1,className:_2,methodName:"firstArg",isCall:true};_5.call=isc.eval(this.callTemplate.evalDynamicString(this,_6));for(var i=0;i<_3.length;i++){var _8={appID:_1,className:_2,methodName:_3[i],isCall:false};_5[_3[i]]=isc.eval(this.callTemplate.evalDynamicString(this,_8))}
window[_2]=_5;return _5},makeDMIMethod:function(_1,_2,_3,_4){var _5={appID:_1,className:_2,isCall:_3,methodName:_3?"firstArg":_4};return isc.eval(this.callTemplate.evalDynamicString(this,_5))},$131a:function(_1,_2,_3){this.call({appID:"isc_builtin",className:"com.isomorphic.rpc.BuiltinRPC",methodName:_1,callback:_2,arguments:_3||["SmartClientLog"],requestParams:{showPrompt:false,willHandleError:true,queryParams:{isc_noLog:"1"}
}
})}});isc.DMI.callBuiltin=isc.DMI.makeDMIMethod("isc_builtin","builtin",true);if(isc.Browser.seleniumPresent&&isc.Browser.isFirefox){document.addEventListener("IscSeleniumConfigureServerLogsEvent",function(_1){var _2=_1.target.getAttribute("arguments");isc.DMI.$131a("setTemporaryLogThreshold",null,_2.split(/,\s*/))},false);document.addEventListener("IscSeleniumClearServerLogsEvent",function(_1){isc.DMI.$131a("clearLogEntries")},false);document.addEventListener("IscSeleniumRequestServerLogsEvent",function(_1){var _2=_1.target.ownerDocument;isc.DMI.$131a("getLogEntries",function(_7){var _3=[],_4=_7.data;if(_4&&_4.length>0)_3=_4.getProperty("logMessage");var _5=_2.createElement("IscSeleniumCaptureLogs");_5.setAttribute("logMessages",_3.join(""));_2.documentElement.appendChild(_5);var _6=_2.createEvent("HTMLEvents");_6.initEvent("IscSeleniumServerLogsCapturedEvent",true,false);_5.dispatchEvent(_6)});isc.DMI.$131a("revertTemporaryLogThresholds")},false)}
isc.ClassFactory.defineClass("ResultSet",null,["List","DataModel"]);isc.A=isc.ResultSet;isc.A.UNKNOWN_LENGTH=1000;isc.A.$121g=["fetchAhead","fetchMode","resultSize","fetchDelay","dataSource","criteriaPolicy","useClientSorting","useClientFiltering","updateCacheFromRequest","dropCacheOnUpdate","dropCacheOnLengthChange","disableCacheSync","progressiveLoading","shouldReorderAllRows","neverDropUpdatedRows","updatePartialCache","transformUpdateResponses"];isc.A=isc.ResultSet;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.getLoadingMarker=function isc_c_ResultSet_getLoadingMarker(){return Array.LOADING},isc.A.$97o=function isc_c_ResultSet__removeNullsAndLoadings(_1){var i=0,n=0,_4=_1.length,_5=Array.LOADING;for(;i<_4;++i){var a=_1[i];if(a==null||a===_5){++n}else if(n>0){_1.splice(i-n,n);i-=n;_4-=n;n=0}}
if(n>0){_1.splice(i-n,n)}
return _1},isc.A.$121h=function isc_c_ResultSet__prepareSparseData(_1){var _2=Array.LOADING,_3=true;for(var i=_1.length;i--;){if(_1[i]==_2){_1[i]=null}else{_3=false}}
return _3});isc.B._maxIndex=isc.C+3;isc.A=isc.ResultSet.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.cachedRows=0;isc.A.fetchAhead=true;isc.A.resultSize=75;isc.A.fetchDelay=0;isc.A.useClientSorting=true;isc.A.useClientFiltering=true;isc.A.updateCacheFromRequest=true;isc.A.shouldReorderAllRows=true;isc.A.updatePartialCache=true;isc.A.alwaysRequestVisibleRows=false;isc.B.push(isc.A.addAt=function isc_ResultSet_addAt(){isc.logWarn('ResultSets are readonly. This operation (addAt) will be ignored.')},isc.A.set=function isc_ResultSet_set(){isc.logWarn('ResultSets are readonly. This operation (set) will be ignored.')},isc.A.removeAt=function isc_ResultSet_removeAt(){isc.logWarn('ResultSets are readonly. This operation (removeAt) will be ignored.')},isc.A.shouldUseClientSorting=function isc_ResultSet_shouldUseClientSorting(){if(!isc.RPCManager.onLine)return true;return this.useClientSorting},isc.A.shouldUseClientFiltering=function isc_ResultSet_shouldUseClientFiltering(){if(!isc.RPCManager.onLine)return true;return this.useClientFiltering},isc.A.shouldNeverDropUpdatedRows=function isc_ResultSet_shouldNeverDropUpdatedRows(){if(!isc.RPCManager.onLine)return true;return this.neverDropUpdatedRows},isc.A.shouldUpdatePartialCache=function isc_ResultSet_shouldUpdatePartialCache(){if(!isc.RPCManager.onLine)return true;return this.updatePartialCache});isc.B._maxIndex=isc.C+7;isc.A=isc.ResultSet.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.dynamicDSFieldValues=false;isc.A.$39r=0;isc.A.notifyOnUnchangedCache=false;isc.B.push(isc.A.init=function isc_ResultSet_init(){isc.ClassFactory.addGlobalID(this);if(this.operation!=null)this.fetchOperation=this.operation;var _1=this.getOperation("fetch");var _2=_1.dataSource;if(!isc.isAn.Array(_2))_2=[_2];for(var i=0;i<_2.length;i++){var _4=isc.DS.get(_2[i]);this.observe(_4,"dataChanged","observer.dataSourceDataChanged(dsRequest,dsResponse)");if(!this.$39s)this.$39s=[];this.$39s.add(_4);if(!this.dataSource)this.dataSource=_4}
if(!this.getDataSource()){this.logError("Invalid dataSource: "+this.echoLeaf(this.dataSource)+", a ResultSet must be created with a valid DataSource")}
var _5=this.context;this.resultSize=(_5&&_5.dataPageSize!=null?_5.dataPageSize:this.resultSize);if(this.allRows){this.fetchMode="local"}else{this.fetchMode=(_5&&_5.dataFetchMode!=null?_5.dataFetchMode:this.fetchMode||"paged")}
if(this.dropCacheOnUpdate==null){this.dropCacheOnUpdate=this.$du(_1.dropCacheOnUpdate,this.getDataSource().dropCacheOnUpdate)}
this.context=this.context||{};var _6=this.criteria||this.filter||{};if(this.$121j){this.criteria=_6;this.$39t=(isc.getKeys(_6).length==0)}else{this.criteria=null;this.setCriteria(_6)}
this.$1317=[];if(this.initialData){isc.ResultSet.$121h(this.initialData);this.fillCacheData(this.initialData);this.setFullLength(this.initialLength||this.totalRows||this.initialData.length);if(this.sortSpecifiers)this.setSort(this.sortSpecifiers,true);if(this.sortBy)this.setSort(isc.DS.getSortSpecifiers(this.sortBy),true)}else if(this.isPaged()){this.$121k([])}
this.observe(isc,"goOffline",function(){this.goOffline()});this.observe(isc.RPCManager,"offlineTransactionPlaybackComplete",function(){this.offlinePlaybackComplete()})},isc.A.goOffline=function isc_ResultSet_goOffline(){},isc.A.offlinePlaybackComplete=function isc_ResultSet_offlinePlaybackComplete(){if(this.haveOfflineRecords){this.invalidateCache();this.haveOfflineRecords=false}},isc.A.destroy=function isc_ResultSet_destroy(){if(window[this.ID]==this)window[this.ID]=null;this.ignore(isc,"goOffline");this.ignore(isc.RPCManager,"offlineTransactionPlaybackComplete");if(this.$39s!=null){for(var i=0;i<this.$39s.length;i++){var _2=this.$39s[i];if(_2){this.ignore(_2,"dataChanged")}}}
this.Super("destroy",arguments)},isc.A.getFirstUsedIndex=function isc_ResultSet_getFirstUsedIndex(){if(!this.lengthIsKnown()){return 0}else{var _1=this.localData,_2=this.$1317,_3=_2.length,k=this.$1318(0),_5=(k%2!=0),j=(k+1<_3?_2[++k]:-1);for(var i=0,_8=_1.length;i<_8;++i){if(i==j){_5=!_5;j=(k+1<_3?_2[++k]:-1)}
if(_1[i]!=null&&_5){return i}}
return 0}},isc.A.isPaged=function isc_ResultSet_isPaged(){return this.fetchMode=="paged"},isc.A.isLocal=function isc_ResultSet_isLocal(){return this.fetchMode=="local"},isc.A.allMatchingRowsCached=function isc_ResultSet_allMatchingRowsCached(){return(this.allRows!=null&&(!this.allRowsCriteria||this.$505))||(this.localData!=null&&(!this.isPaged()||(this.allRows!=null||(this.cachedRows==this.totalRows))))},isc.A.allRowsCached=function isc_ResultSet_allRowsCached(){return((this.allRows!=null&&(!this.allRowsCriteria||this.$505))||(this.allMatchingRowsCached()&&this.$39t))},isc.A.isEmpty=function isc_ResultSet_isEmpty(){if(this.isPaged()){if(this.allMatchingRowsCached()){return this.getLength()==0}else if(this.cachedRows>0)return false}
return!this.lengthIsKnown()||this.getLength()<=0},isc.A.canSortOnClient=function isc_ResultSet_canSortOnClient(){return this.shouldUseClientSorting()&&(this.allMatchingRowsCached()||(isc.Offline&&isc.Offline.isOffline()))},isc.A.canFilterOnClient=function isc_ResultSet_canFilterOnClient(){return this.shouldUseClientFiltering()&&this.allRowsCached()},isc.A.getLength=function isc_ResultSet_getLength(){var _1=this.unknownLength||isc.ResultSet.UNKNOWN_LENGTH;if(!this.lengthIsKnown())return _1;return(this.isPaged()&&!this.allRows?this.totalRows:this.localData.length)},isc.A.$121l=function isc_ResultSet__getCachedLength(){if(this.lengthIsKnown()){return this.getLength()}else if(this.localData!=null){return this.localData.length}else{return 0}},isc.A.$137f=function isc_ResultSet__getCachedRows(){return this.cachedRows},isc.A.indexOf=function isc_ResultSet_indexOf(_1,_2,_3){if(this.localData==null)return-1;if(Array.isLoading(_1))return-1;var _4=this.localData.indexOf(_1,_2,_3);if(_4!=-1)return _4;return this.getDataSource().findByKeys(_1,this.localData,_2,_3)},isc.A.slideList=function isc_ResultSet_slideList(_1,_2){if(!this.allMatchingRowsCached()&&!this.shouldUpdatePartialCache()){isc.logWarn('updatePartialCache is disabled: record position will not be shifted.');return}
var _3=[],i;if(_2<0)_2=0;var _5=this.$1317,_6=_5.length,k=this.$1318(0),_8=(k%2==0),j=(k+1<_6?_5[++k]:-1);var _10=this.localData;for(i=0;i<_2;++i){if(i==j){_8=!_8;j=(k+1<_6?_5[++k]:-1)}
var _11=this.localData[i];if(_11==null&&_8){isc.logWarn('Sliding from a row position that has not yet been loaded, ignoring');return}
if(!_1.contains(_11)){_3.add(_11)}}
for(i=0;i<_1.length;++i){_3.add(_1[i])}
var _12=_10.length;for(i=_2;i<_12;++i){if(i==j){_8=!_8;j=(k+1<_6?_5[++k]:-1)}
var _11=_10[i];if(_11==null&&_8){isc.logWarn('Sliding into a row position that has not yet been loaded, ignoring');return}
if(!_1.contains(_11)){_3.add(_11)}}
this.$121k(_3);if(this.shouldUpdatePartialCache()){this.invalidateRowOrder()}
if(this.shouldReorderAllRows)this.reorderAllRows();this.dataChanged()},isc.A.reorderAllRows=function isc_ResultSet_reorderAllRows(){var i,_2=this.localData;if(!this.allRowsCached()||!this.lengthIsKnown())return;for(i=0;i<_2.length;i++)_2[i].$100o=i;var _3=0,_4=this.allRows,_5=_4.getLength();for(i=0;i<_5;i++){var _6=_4.get(i);if(_6.$100o!=null){_4.set(i,_2[_3++]);delete _6.$100o}}},isc.A.get=function isc_ResultSet_get(_1){if(_1<0){this.logWarn("get: invalid index "+_1);return null}
if(this.localData!=null){var _2=this.localData[_1];if(_2!=null){return _2}else if(this.$1319(_1)){return isc.ResultSet.getLoadingMarker()}}
if(this.fetchStartRow!=null&&_1>=this.fetchStartRow&&_1<=this.fetchEndRow){return Array.LOADING}
return this.getRange(_1,_1+1)[0]},isc.A.getRange=function isc_ResultSet_getRange(_1,_2,_3,_4){if(isc.$cv)arguments.$cw=this;if(_1==null){this.logWarn("getRange() called with no specified range - ignoring.");return}
if(_2==null)_2=_1+1;if(this.isPaged()){return this.$39u(_1,_2,_3,_4)}
if(this.localData==null){this.$121k([]);this.setRangeLoading(_1,_2);this.$121m()}
var _5=this.localData.slice(_1,_2);var _6=isc.ResultSet.getLoadingMarker(),_7=this.$1317,_8=_7.length,k=this.$1318(_1),_10=(k%2==0),j=(k+1<_8?_7[++k]:-1);for(var i=_1;i<_2;++i){if(i==j){_10=!_10;j=(k+1<_8?_7[++k]:-1)}
if(_5[i]==null&&_10){_5[i]=_6}}
return _5},isc.A.getAllRows=function isc_ResultSet_getAllRows(){if(!this.lengthIsKnown())return[];return this.getRange(0,this.getLength())},isc.A.getAllLoadedRows=function isc_ResultSet_getAllLoadedRows(){if(!this.lengthIsKnown())return[];var _1=[];for(var i=0;i<this.getLength();i++){if(this.rowIsLoaded(i))_1.add(this.localData[i])}
return _1},isc.A.getAllVisibleRows=function isc_ResultSet_getAllVisibleRows(){if(!this.lengthIsKnown()){return null}else{return isc.ResultSet.$97o(this.localData.duplicate())}},isc.A.usingFilteredData=function isc_ResultSet_usingFilteredData(){return(this.allMatchingRowsCached()&&(this.localData.length<this.cachedRows))},isc.A.getAllCachedRows=function isc_ResultSet_getAllCachedRows(){if(!this.lengthIsKnown()){return null}else if(!this.allRows){return this.getAllVisibleRows()}else{var _1=this.allRows.duplicate();return _1}},isc.A.getFieldValue=function isc_ResultSet_getFieldValue(_1,_2,_3,_4){if(this.dynamicDSFieldValues){return this.getDataSource().getFieldValue(_1,_2,_3)}else{return isc.Canvas.$70o(_2,_3,_1,_4,true)}},isc.A.duplicate=function isc_ResultSet_duplicate(){var _1=isc.ResultSet.$121g,_2={};for(var i=_1.length;i--;){var _4=_1[i];_2[_4]=this[_4]}
if(isc.isAn.Array(this.sortSpecifiers)){var _5=this.dataSource,_6=_2.sortSpecifiers=new Array(this.sortSpecifiers.getLength());for(var i=_6.length;i--;){_6[i]=isc.DataSource.getSortBy(this.sortSpecifiers[i])}}
_2.fetchOperation=this.getOperationId("fetch");_2.context=isc.addProperties({},this.context);var _7=this.localData&&this.localData.duplicate(),_8=this.allRows&&this.allRows.duplicate();_2.localData=_7;_2.totalRows=this.totalRows;_2.cachedRows=this.cachedRows;_2.allRows=_8;_2.allRowsCriteria=isc.DataSource.copyCriteria(this.allRowsCriteria);_2.criteria=isc.DataSource.copyCriteria(this.criteria);_2.$121j=true;var _9=isc.ResultSet.create(_2);delete _9.$121j;return _9},isc.A.$1318=function isc_ResultSet__getLoadingRangesIndex(_1){var _2=this.$1317;var i=0,j=_2.length-1;while(i+1<j){var k=Math.floor((i+j)/2),v=_2[k];if(_1<v){j=k}else if(_1>v){i=k}else{return k}}
if(j==-1||_1<_2[i]){return i-1}else if(_1==_2[i]||_1<_2[j]){return i}else{return j}},isc.A.$1319=function isc_ResultSet__rowIsLoading(_1){return(this.$1318(_1)%2==0)},isc.A.$132a=function isc_ResultSet__firstLoadingRow(_1,_2,_3){if(!(_1<_2)){return-1}
var _4=this.$1317,j=this.$1318(_1);if(_3==(j%2==0)){return _1}else if(j+1<_4.length&&_4[j+1]<_2){return _4[j+1]}else{return-1}},isc.A.$132b=function isc_ResultSet__lastLoadingRow(_1,_2,_3){if(!(_1<_2)){return-1}
var _4=this.$1317,j=this.$1318(_2-1);if(_3==(j%2==0)){return _2-1}else if(0<=j&&_1<=_4[j]-1){return _4[j]-1}else{return-1}},isc.A.$132c=function isc_ResultSet__setRangeLoading(_1,_2,_3){if(!(0<=_1&&_1<_2)){return}
var _4=this.$1317,i=this.$1318(_1),j=this.$1318(_2-1);var _7=(_3!=(i%2==0)),_8=(_3!=(j%2==0)),_9=(_7&&0<=i&&_1==_4[i]),_10=(_8&&j+1<_4.length&&_2==_4[j+1]),_11=(!_9&&_7),_12=(!_10&&_8),_13=i+(_9?0:1),_14=(j-i+(_9?1:0)+(_10?1:0));if(_11&&_12){_4.splice(_13,_14,_1,_2)}else if(_11){_4.splice(_13,_14,_1)}else if(_12){_4.splice(_13,_14,_2)}else{_4.splice(_13,_14)}},isc.A.lengthIsKnown=function isc_ResultSet_lengthIsKnown(){return this.localData!=null&&(this.isPaged()?this.totalRows!=null:this.$39v==null)},isc.A.fetchIsPending=function isc_ResultSet_fetchIsPending(){return this.$39v!=null||this.pendingActionOnPause("fetchRemoteData")},isc.A.rowIsLoaded=function isc_ResultSet_rowIsLoaded(_1){return(this.localData!=null&&this.localData[_1]!=null)},isc.A.getCachedRow=function isc_ResultSet_getCachedRow(_1){var _2=this.localData[_1];if(_2!=null){return _2}else{return null}},isc.A.rangeIsLoaded=function isc_ResultSet_rangeIsLoaded(_1,_2){var _3=this.localData;if(_3==null){return false}
for(var i=_1;i<_2;i++){if(_3[i]==null){return false}}
return true},isc.A.findLastCached=function isc_ResultSet_findLastCached(_1,_2){if(!this.rowIsLoaded(_1))return null;var _3=this.localData;if(_2){var i=_1;while(i>=0&&_3[i]!=null){--i}
return i+1}else{var _5=this.getLength(),i=_1;while(i<_5&&_3[i]!=null){++i}
return i-1}},isc.A.getCachedRange=function isc_ResultSet_getCachedRange(_1){if(_1==null)_1=this.lastRangeStart;if(_1==null)_1=0;if(!this.rowIsLoaded(_1))return null;var _2=this.getLength();if(this.allMatchingRowsCached())return[0,_2-1];var _3=this.findLastCached(_1,true),_4=this.findLastCached(_1);return[_3,_4]},isc.A.setRangeLoading=function isc_ResultSet_setRangeLoading(_1,_2){if(this.localData==null){this.$121k([])}
this.$132c(_1,_2,true)},isc.A.fillRangeLoading=function isc_ResultSet_fillRangeLoading(_1,_2){var _3=isc.ResultSet.getLoadingMarker();for(var i=0;i<_2;i++){if(_1[i]==null){_1[i]=_3}}
return _1},isc.A.getServerFilter=function isc_ResultSet_getServerFilter(){if(this.isLocal())return null;return isc.shallowClone(this.criteria)},isc.A.$39w=function isc_ResultSet__fetchRemoteData(){var _1=this.fetchStartRow,_2=this.fetchEndRow;if(_1==null||_2==null)return;this.setRangeLoading(_1,_2);this.fetchStartRow=null;this.fetchEndRow=null;this.logInfo("fetching rows "+[_1,_2]+" from server");return this.fetchRemoteData(this.getServerFilter(),_1,_2)},isc.A.$121m=function isc_ResultSet__fetchAllRemoteData(){this.fetchRemoteData(this.getServerFilter())},isc.A.fetchRemoteData=function isc_ResultSet_fetchRemoteData(_1,_2,_3){if(isc.Offline.isOffline()){this.haveOfflineRecords=true}
this.$39r+=1;var _4=isc.addProperties({operationId:this.getOperationId("fetch"),startRow:_2,endRow:_3,sortBy:isc.shallowClone(this.$39x),resultSet:this,componentId:this.componentId||"(created directly)",componentContext:this.componentContext},this.context);var _5={requestIndex:this.$39r};if(this.context&&this.context.internalClientContext){_5=isc.addProperties({},this.context.internalClientContext,_5)}
_4.internalClientContext=_5;if(this.progressiveLoading===true||this.progressiveLoading===false){_4.progressiveLoading=this.progressiveLoading}
_4.internalClientContext.$69t=_4.willHandleError;_4.willHandleError=true;if(this.rowOrderInvalid()){this.logInfo("invalidating rows on fetch due to 'add'/'update' operation  with updatePartialCache");this.invalidateRows()}
if(this.logIsDebugEnabled("fetchTrace")){this.logWarn("ResultSet server fetch with server criteria: "+this.echoFull(_1)+this.getStackTrace())}
if(this.cachingAllData)_4.cachingAllData=true;this.$39v=this.$39r;this.getDataSource().fetchData(_1,{caller:this,methodName:"fetchRemoteDataReply"},_4)},isc.A.fetchRemoteDataReply=function(dsResponse,data,request){var index=dsResponse.internalClientContext.requestIndex;if(!this.$39y)this.$39y=0;if(index!=(this.$39y+1)&&!dsResponse.isCachedResponse){this.logInfo("server returned out-of-sequence response for fetch remote data request  - delaying processing: last processed:"+this.$39y+", returned:"+index);if(!this.$39z)this.$39z=[];this.$39z.add({dsResponse:dsResponse,data:data,request:request});return}
if(this.cachingAllData==true)delete this.cachingAllData;if(this.$39v==index)delete this.$39v;var newData;var hasError=dsResponse.status<0,requestWasInvalidated=index<=this.$122t;if(requestWasInvalidated&&this.logIsWarnEnabled()){this.logWarn(request,"The ResultSet's cache was invalidated while the following request was outstanding: "+isc.echoAll(request)+", request data:"+isc.echoAll(request.data))}
if(hasError||requestWasInvalidated||dsResponse.offlineResponse){newData=[]}else{newData=dsResponse.data}
var numResults=newData.length;this.document=dsResponse.document;this.logInfo("Received "+numResults+" records from server");if(dsResponse.startRow==null)dsResponse.startRow=request.startRow;if(dsResponse.endRow==null)dsResponse.endRow=dsResponse.startRow+numResults;if(dsResponse.totalRows==null&&dsResponse.endRow<request.endRow){dsResponse.totalRows=dsResponse.endRow}
if(requestWasInvalidated){dsResponse.startRow=dsResponse.endRow;if(isc.isAn.Object(dsResponse.data))dsResponse.data=[]}
if(this.transformData){var result=this.transformData(newData,dsResponse);newData=result!=null?result:newData;if(newData.length!=numResults){this.logInfo("Transform applied, "+newData.length+" records resulted, from "+dsResponse.startRow+" to "+dsResponse.endRow);dsResponse.endRow=dsResponse.startRow+newData.length;if(dsResponse.totalRows!=null&&dsResponse.totalRows<dsResponse.endRow){dsResponse.totalRows=dsResponse.endRow}}}
if(!isc.isA.List(newData)){this.logWarn("Bad data returned, ignoring: "+this.echo(newData));return}
if(dsResponse.totalRows!=null&&dsResponse.totalRows<dsResponse.endRow){this.logWarn("fetchData callback: dsResponse.endRow set to:"+dsResponse.endRow+". dsResponse.totalRows set to:"+dsResponse.totalRows+". endRow cannot exceed total dataset size. Clamping endRow to the end of the dataset ("+dsResponse.totalRows+").");dsResponse.endRow=dsResponse.totalRows}
var startRow=dsResponse.startRow,endRow=dsResponse.endRow;this.$521();if(!requestWasInvalidated){this.$390(newData,dsResponse)}
this.$522(startRow,endRow,hasError);delete this.context.afterFlowCallback;this.$39y=index;if(this.$39z&&this.$39z.length>0){for(var i=0;i<this.$39z.length;i++){var reply=this.$39z[i];if(reply==null)continue;var requestIndex=reply.dsResponse.internalClientContext.requestIndex;if(requestIndex==(this.$39y+1)){this.logInfo("Delayed out of sequence data response being processed now "+requestIndex);this.$39z[i]=null;this.fetchRemoteDataReply(reply.dsResponse,reply.data,reply.request);break}}}
var willHandleError=request.internalClientContext.$69t;if(!willHandleError&&hasError){isc.RPCManager.$a0(dsResponse,request)}},isc.A.$390=function isc_ResultSet__handleNewData(_1,_2){if(this.isLocal()){this.$1317=[];this.$78z(_1.duplicate());this.filterLocalData();return}else if(!this.isPaged()){this.$ed();this.$1317=[];this.$121k(_1.duplicate());if(this.canSortOnClient()){this.$391()}
if(this.allRowsCached()){this.$78z(this.localData,this.criteria)}
this.$ee();return}
var _3=_2.context;this.$ed()
if(_2.invalidateCache){this.$394()}else if(this.dropCacheOnLengthChange&&this.lengthIsKnown()&&this.totalRows!=_2.totalRows){this.logInfo("totalRows changed from "+this.totalRows+" to "+_2.totalRows+", invalidating cache");this.$394()}
if(this.localData==null){this.$121k([])}
this.setFullLength(_2.totalRows);this.fillCacheData(_1,_2.startRow);var _4=this.localData;var _5,_6;if(_2.context){_5=_2.context.startRow;_6=_2.context.endRow}
var _7=true;if(_5==null||_6==null){_7=false;_5=_2.startRow;_6=this.totalRows}
var _8=this.$1317,_9=_5+_1.length,i=_6;if(_8.length>0){var k=2*Math.ceil(this.$1318(_9)/2);i=Math.min(i,_8[k])}
if(i>_9){this.logInfo("Fetch request returned range "+[_2.startRow,(_2.startRow+_1.length)]+(_7?" differs from requested range "+[_5,_6]+". ":" but we have subsequent 'loading' markers. ")+"Assuming client/server batch size mismatch and clearing loading markers greater than "+(_2.startRow+_1.length));this.$132c(_9,i,false)}
this.logInfo("cached "+_1.getLength()+" rows, from "+_2.startRow+" to "+_2.endRow+" ("+this.totalRows+" total rows, "+this.cachedRows+" cached)");if(this.allMatchingRowsCached()){if(this.allRowsCached()){this.logInfo("Cache for entire DataSource complete")}else{this.logInfo("Cache for current criteria complete")}
if(this.canSortOnClient())this.$391()}
this.$ee()},isc.A.setContext=function isc_ResultSet_setContext(_1){this.context=_1},isc.A.findByKey=function isc_ResultSet_findByKey(_1){var _2=isc.DataSource.getDataSource(this.dataSource);if(!_2)return;if(!_2.getPrimaryKeyField()||!this.lengthIsKnown())return;var _3;if(isc.isAn.Object(_1)){_3=_1}else{_3={};_3[_2.getPrimaryKeyFieldName()]=_1}
var _4=_2.findByKeys(_3,this.localData);if(_4!=null&&_4!=-1)return this.localData[_4];else return null},isc.A.setCriteria=function isc_ResultSet_setCriteria(_1){if(_1==null)_1={};var _2=this.$780(_1);if(_2==null){if(this.localData==null&&this.allRows!=null)this.filterLocalData();this.logInfo("setCriteria: filter criteria unchanged");return false}
if(!this.getDataSource().isAdvancedCriteria(_1)){_1=isc.clone(_1)}
var _3=this.criteria;this.criteria=_1;this.$39t=(isc.getKeys(_1).length==0);this.$51w=(this.context&&this.context.textMatchStyle)?this.context.textMatchStyle:null;if(_2){this.logInfo("setCriteria: filter criteria changed, invalidating cache");this.invalidateCache()}else{this.logInfo("setCriteria: filter criteria changed, performing local filtering");if(this.allRows==null){this.$78z(this.localData,_3)}
this.filterLocalData()}
return true},isc.A.$78z=function isc_ResultSet__setAllRows(_1,_2){this.allRows=_1;this.allRowsCriteria=_2||{};this.$505=(isc.getKeys(this.allRowsCriteria).length==0)},isc.A.setFilter=function isc_ResultSet_setFilter(_1){return this.setCriteria(_1)},isc.A.getCriteria=function isc_ResultSet_getCriteria(){return this.criteria},isc.A.compareCriteria=function isc_ResultSet_compareCriteria(_1,_2,_3,_4){return this.getDataSource().compareCriteria(_1,_2,_3?_3:this.context,_4?_4:this.criteriaPolicy)},isc.A.compareTextMatchStyle=function isc_ResultSet_compareTextMatchStyle(_1,_2){return this.getDataSource().compareTextMatchStyle(_1,_2)},isc.A.willFetchData=function isc_ResultSet_willFetchData(_1,_2){return(this.$780(_1,_2)==true)},isc.A.$780=function isc_ResultSet__willFetchData(_1,_2){if(this.localData==null&&this.allRows==null)return true;if(_1==null)_1={};var _3=this.criteria||{},_4=this.$51w,_5=this.getDataSource();if(_2==null){_2=(this.context&&this.context.textMatchStyle)?this.context.textMatchStyle:null}
var _6=this.allRows&&this.shouldUseClientFiltering()&&(_3!=this.allRowsCriteria);var _7=isc.isAn.emptyObject(_3)&&!_6?0:this.compareTextMatchStyle(_2,_4);if(_7>=0){var _8=_6?this.allRowsCriteria:_3;if(_8==null)_8={};if(_5.isAdvancedCriteria(_1)&&!_5.isAdvancedCriteria(_8)){_8=isc.DataSource.convertCriteria(_8,_2)}
if(!_5.isAdvancedCriteria(_1)&&_5.isAdvancedCriteria(_8)){_1=isc.DataSource.convertCriteria(_1,_2)}
var _9=isc.addProperties({},this.context);if(_2!=null)_9.textMatchStyle=_2;var _10=this.compareCriteria(_1,_8,_9);if(_10!=0)_7=_10}
if(_7==0){if(_6){if(_5.isAdvancedCriteria(_1)&&!_5.isAdvancedCriteria(_3)){_3=isc.DataSource.convertCriteria(_3,_2)}
if(this.compareCriteria(_1,_3)!=0){return false}}
return null}else{if(!this.allMatchingRowsCached()){return true}
if(this.isLocal()){return false}
if(_7==-1){return true}else if(_7==1){if(this.shouldUseClientFiltering()){return false}
return true}}},isc.A.sortByProperty=function isc_ResultSet_sortByProperty(_1,_2,_3,_4){if(_3==null){var _5=this.getDataSource().getField(_1);if(_5)_3=_5.type}
if(this.$395==_1&&this.$392==_2&&this.$393==_3)return;var _5;if(_4){_5=_4.getField(_1);if(_5&&_5.displayField&&_5.sortByDisplayField!=false){var _6;if(_5.optionDataSource){_6=isc.DataSource.getDataSource(_5.optionDataSource)}
if(!_6||_6==isc.DataSource.getDataSource(this.dataSource)){_1=_5.displayField}}}
this.$395=_1;this.$392=_2;this.$393=_3;this.$45g=_4;if(this.isPaged()||!this.shouldUseClientSorting()){this.$39x=(this.$392?"":"-")+this.$395}
if(this.canSortOnClient()){this.$121s([_1],[_2],[_3],[_4]);if(this.allRows&&(this.localData!==this.allRows)){this.allRows.sortByProperties([_1],[_2],[_3],[_4])}
delete this.$572;delete this.$573;delete this.$574;delete this.$575;if(!this.$52z())this.dataChanged();return}
this.invalidateCache()},isc.A.unsort=function isc_ResultSet_unsort(){if(!this.allMatchingRowsCached())return false;this.$395=null;if(this.localData)this.localData.unsort();return true},isc.A.$391=function isc_ResultSet__doSort(){var _1=this.$73p;if(this.localData==null||!_1||_1.length==0)return;var _2=[],_3=[],_4=[],_5=[];for(var i=0;i<_1.length;i++){var _7=_1[i];_2[i]=_7.property;_3[i]=Array.shouldSortAscending(_7.direction);_4[i]=_7.normalizer;_5[i]=_7.context}
if(this.canSortOnClient()){if(_1&&_1.length>0){this.logInfo("$391: sorting on properties ["+_2.join(",")+"] : directions ["+_3.join(",")+"] : full cache allows local sort");this.$121s(_2,_3,_4,_5);if(!this.$52z()){this.dataChanged()}}
return}
this.logInfo("$391: sorting on properties ["+_2.join(",")+"] : directions ["+_3.join(",")+"] : invalidating cache");this.invalidateCache()},isc.A.getSort=function isc_ResultSet_getSort(){return this.$73p},isc.A.setSort=function isc_ResultSet_setSort(_1,_2){var _3=[],_4=[],_5;if(_1==null)_1=[];for(var i=0;i<_1.length;i++){var _7=_1[i];if(_7.normalizer==null){var _5=this.getDataSource().getField(_7.property);if(_5){_7.normalizer=_5.type;_7.$78e=_7.normalizer}}
if(_7.context&&!isc.isA.String(_7.context)){_5=_7.context.getField(_7.property)||this.getDataSource().getField(_7.property);if(_5&&_5.displayField&&_5.sortByDisplayField!=false){var _8;if(_5.optionDataSource){_8=isc.DataSource.getDataSource(_5.optionDataSource)}
if(!_8||_8==isc.DataSource.getDataSource(this.dataSource)){this.logInfo("Field:"+_5.name+" has displayField:"+_5.displayField+" (with optionDataSource:"+_8+"). Sorting by displayField. Set field.sortByDisplayField to false to disable this.","sorting");_7.property=_5.displayField}}}
if(this.isPaged()||!this.shouldUseClientSorting()){_3[i]=(Array.shouldSortAscending(_7.direction)?"":"-")+_7.property}
if(!this.$126f){if(this.$73p&&this.$73p.length>0){var _9={property:_7.property,direction:_7.direction};if(_7.normalizer!=null&&_7.normalizer!=_7.$78e){_9.normalizer=_7.normalizer}
var _10=this.$73p.findIndex(_9);if(_10==i){_4.add(_7)}}}}
if((this.$73p?this.$73p.length:0)==_1.length&&_1.length==_4.length)
{return}
this.$73p=isc.shallowClone(_1);this.$39x=isc.shallowClone(_3);if(!_2)this.$391()},isc.A.resort=function isc_ResultSet_resort(){this.$126f=true;this.setSort(isc.shallowClone(this.$73p));delete this.$126f},isc.A.$521=function isc_ResultSet__startDataArriving(){var _1;if(this.$523===_1)this.$523=0;this.$523++},isc.A.$522=function isc_ResultSet__doneDataArriving(_1,_2,_3){if(--this.$523==0){if(!_3&&this.dataArrived)this.dataArrived(_1,_2)}},isc.A.$524=function isc_ResultSet__isDataArriving(){return(this.$523!=null&&this.$523>0)},isc.A.dataSourceDataChanged=function isc_ResultSet_dataSourceDataChanged(_1,_2){if(this.disableCacheSync)return;if(this.logIsDebugEnabled())this.logDebug("dataSource data changed firing");var _3=this.getDataSource().getUpdatedData(_1,_2,this.updateCacheFromRequest);if(this.transformData&&this.transformUpdateResponses!==false){var _4=this.transformData(_3,_2);_3=_4==null?_3:_4}
this.handleUpdate(_1.operationType,_3,_2.invalidateCache,_1)},isc.A.handleUpdate=function isc_ResultSet_handleUpdate(_1,_2,_3,_4){if(isc.$cv)arguments.$cw=this;var _5=(this.allMatchingRowsCached()?", allMatchingRowsCached true":(", cached rows: "+this.cachedRows+", total rows: "+this.totalRows));if(this.dropCacheOnUpdate||_3||(_1!="remove"&&!this.allMatchingRowsCached()&&!this.shouldUpdatePartialCache()))
{this.invalidateCache();return}
this.logInfo("updating cache in place after operationType: "+_1+_5);this.$ed();if(!isc.isAn.Array(_2)||_2.length==1){this.$572=_1;this.$573=_2}
this.updateCache(_1,_2,_4);this.$ee();this.$572=this.$573=null},isc.A.$ee=function isc_ResultSet__doneChangingData(_1,_2){var _3;if(!this.notifyOnUnchangedCache&&this.$573&&this.$575==null){_3=true}
var _4,_5,_6;if(!_3&&this.$573){_4=this.$572;_5=this.$574;_6=this.$575}
if(--this.$ef==0&&!_3){this.dataChanged(_4,_5,_6,this.$573,_1,_2);delete this.$572;delete this.$574;delete this.$575;delete this.$576;delete this.$573}},isc.A.updateCache=function isc_ResultSet_updateCache(_1,_2,_3){if(_2==null)return;_1=isc.DS.$372(_1);if(!isc.isAn.Array(_2))_2=[_2];if(this.logIsInfoEnabled()){var _4=(_3.componentId?" submitted by '"+_3.componentId+"'":" (no componentID) ");this.logInfo("Updating cache: operationType '"+_1+"'"+_4+","+_2.length+" rows update data"+(this.logIsDebugEnabled()?":\n"+this.echoAll(_2):""))}
switch(_1){case"remove":this.removeCacheData(_2,_3);break;case"add":this.addCacheData(_2,_3);break;case"replace":case"update":this.updateCacheData(_2,_3);break}
if(this.shouldUpdatePartialCache()&&_1!="remove"&&!this.allMatchingRowsCached())
{this.invalidateRowOrder()}
var _5=((_1=="remove")||(_1=="update"&&this.$576==null));if(this.allRows&&!this.shouldNeverDropUpdatedRows()){this.filterLocalData()}
var _6=this.$576||this.$574;if(!_5&&_6!=null){var _7=this.indexOf(_6);if(_7==-1){delete this.$575;delete this.$576;delete this.$574}else{this.$575=_7}}},isc.A.updateCacheData=function isc_ResultSet_updateCacheData(_1,_2){if(!isc.isAn.Array(_1))_1=[_1];var _3=this.allRows!=null,_4=(!_3&&this.isPaged()&&this.totalRows!=null),_5=(_3?this.allRows:this.localData),_6=0,_7=0,_8=0,_9=(_5==this.localData&&this.$121p!=null),_10=(_5==this.localData&&this.$121q!=null),_11=(_5==this.localData&&this.$121t!=null),_12=(_5==this.localData&&this.$121u!=null),_13=(_5==this.localData&&this.$121n!=null),_14=(_5==this.localData&&this.$121o!=null);if(_9){isc.Func.replaceWithMethod(this,"$121p",isc.ResultSet.getArgString("$121p"))}
if(_10){isc.Func.replaceWithMethod(this,"$121q",isc.ResultSet.getArgString("$121q"))}
if(_11){isc.Func.replaceWithMethod(this,"$121t",isc.ResultSet.getArgString("$121t"))}
if(_12){isc.Func.replaceWithMethod(this,"$121u",isc.ResultSet.getArgString("$121u"))}
if(_13){isc.Func.replaceWithMethod(this,"$121n",isc.ResultSet.getArgString("$121n"))}
if(_14){isc.Func.replaceWithMethod(this,"$121o",isc.ResultSet.getArgString("$121o"))}
var _15=(_3?this.allRowsCriteria:this.criteria),_16=this.shouldNeverDropUpdatedRows(),_17=this.getDataSource(),_18=_17.getPrimaryKeyFields();for(var i=0,_20=_1.length;i<_20;++i){var _21=_1[i],_22=isc.applyMask(_21,_18);var _23=_17.findByKeys(_22,_5);var _24=(this.applyFilter([_21],_15,this.context).length>0);if(_23==-1){var _25=_2.data;if(isc.isAn.Array(_25))_25=_25[0];_25=isc.applyMask(_25,_18);var _26=this.getDataSource().findByKeys(_25,_5);if(_26!=-1){this.logWarn("Update operation - submitted record with primary key value[s]:"+this.echo(_25)+" returned with modified primary key:"+this.echo(_22)+". This may indicate bad server logic. Updating cache to reflect new primary key.");_7++;var _27=_5.get(_26);if(_11){this.$121t(_27,1,_26)}
_5.removeAt(_26);if(_4){--this.totalRows}
--this.cachedRows;if(_12){this.$121u(_27,1,_26)}
delete this.$573}
if(_24&&_5!=null){this.logInfo("updated row returned by server doesn't match any cached row,  adding as new row.  Primary key values: "+this.echo(_22)+", complete row: "+this.echo(_21));_8++;var _28=-1;if(_9){if(_5.sortUnique){_28=_5.lastIndexOf(_21)}
if(_28==-1){_5.add(_21);_28=_5.lastIndexOf(_21);_5.remove(_21)}
this.$121p(_21,1,_28)}
_5.add(_21);if(_4){++this.totalRows}
++this.cachedRows;if(_10){if(!_9){_28=_5.lastIndexOf(_21)}
this.$121q(_21,1,_28)}
if(_20==1){this.$576=_21;this.$575=_5.length-1}}else{}}else{if(_20==1){var _29=_5.get(_23);if(_3){if(this.applyFilter([_29],this.criteria,this.context).length==0){_29=null}}
this.$574=_29;if(_29){this.$575=this.indexOf(_29)}}
if(_24||_16){_6++;var _30=_5.get(_23);if(_13){this.$121n(_30,1,_23,_21,1)}
_5.set(_23,_21);if(_14){this.$121o(_30,1,_23,_21,1)}}else{if(this.logIsDebugEnabled()){this.logDebug("row dropped:\n"+this.echo(_21)+"\ndidn't match filter: "+this.echoFull(_15))}
_7++;var _30=_5.get(_23);if(_11){this.$121t(_30,1,_23)}
_5.removeAt(_23);if(_4){--this.totalRows}
--this.cachedRows;if(_12){this.$121u(_30,1,_23)}}}}
if(this.logIsDebugEnabled()){this.logDebug("updated cache: "+_8+" row(s) added, "+_6+" row(s) updated, "+_7+" row(s) removed.")}
if(!_3&&!this.shouldUpdatePartialCache())this.$391()});isc.evalBoundary;isc.B.push(isc.A.removeCacheData=function isc_ResultSet_removeCacheData(_1){if(!isc.isAn.Array(_1))_1=[_1];var _2=this.allRows!=null,_3=_2?this.allRows:this.localData,_4=0;var _5=(_3==this.localData&&this.isPaged()&&this.totalRows!=null);if(_3!=null){var _6=this.getDataSource(),_7=(_3==this.localData&&this.$121t!=null),_8=(_3==this.localData&&this.$121u!=null);if(_7){isc.Func.replaceWithMethod(this,"$121t",isc.ResultSet.getArgString("$121t"))}
if(_8){isc.Func.replaceWithMethod(this,"$121u",isc.ResultSet.getArgString("$121u"))}
for(var i=0,_10=_1.length;i<_10;++i){var _11=_6.findByKeys(_1[i],_3);if(_11!=-1){var _12=_3[_11];if(_10==1){if(!_2||_6.recordMatchesFilter(_12,this.criteria,this.context))
{this.$574=_12;this.$575=this.indexOf(this.$574)}}
if(_7){this.$121t(_12,1,_11)}
_3.removeAt(_11);if(_5){--this.totalRows}
--this.cachedRows;if(_8){this.$121u(_12,1,_11)}
_4++}else{if(this.allMatchingRowsCached())continue;if(_6.applyFilter([_1[i]],this.criteria,this.context).length>0){if(this.logIsDebugEnabled()){this.logDebug("removed record matches filter criteria: "+this.echo(_1[i]))}
if(this.$574==null)delete this.$573;_4++}else{if(this.logIsDebugEnabled()){this.logIsDebugEnabled("cache sync ignoring 'remove' operation, removed  row doesn't match filter criteria: "+this.echo(_1[i]))}}}}}},isc.A.addCacheData=function isc_ResultSet_addCacheData(_1){if(!isc.isAn.Array(_1))_1=[_1];if(_1==null)return;var _2;if(this.allRows==null||!this.shouldUseClientFiltering()){_2=this.getDataSource().applyFilter(_1,this.criteria,this.context)}else{_2=_1;if(this.allRowsCriteria){_2=this.getDataSource().applyFilter(_2,this.allRowsCriteria,this.context)}}
var _3=_2.length,_4=false;if(_3!=_1.length){this.logInfo("Adding rows to cache, "+_3+" of "+_1.length+" rows match filter criteria")}else if(_3==1){_4=true}
var _5=this.allRows||this.localData;if(!_5)return;var _6=(_5==this.localData&&this.$121p!=null),_7=(_5==this.localData&&this.$121q!=null);if(_6){isc.Func.replaceWithMethod(this,"$121p",isc.ResultSet.getArgString("$121p"))}
if(_7){isc.Func.replaceWithMethod(this,"$121q",isc.ResultSet.getArgString("$121q"))}
var _8=(this.isPaged()&&!this.allRows&&this.totalRows!=null);var _9=(!this.allMatchingRowsCached()&&this.shouldUpdatePartialCache()),_10=_9&&this.getCachedRange();if(_10){var _11;if(_10[1]==this.getLength()-1||!this.rowIsLoaded(0)){_11=_10[1]+1}else{_11=0}
if(_6&&_3>0){this.$121p(_2,_2.length,_11)}
_5.addListAt(_2,_11);if(_8){this.totalRows+=_3}
this.cachedRows+=_3;if(_7&&_3>0){this.$121q(_2,_2.length,_11)}
if(_4)this.$575=_11}else{if(_6||_7){var _12=_5.sortUnique;for(var i=0,_14=_3;i<_14;++i){var _15=_2[i],_16=-1;if(_6){if(_12){_16=_5.lastIndexOf(_15)}
if(_16==-1){_5.add(_15,undefined,true);_16=_5.lastIndexOf(_15);_5.remove(_15)}
this.$121p(_15,1,_16)}
_5.add(_15,undefined,true);if(_8){++this.totalRows}
++this.cachedRows;if(_7){if(!_6){_16=_5.lastIndexOf(_15)}
this.$121q(_15,1,_16)}}}else{_5.addList(_2);if(_8){this.totalRows+=_3}
this.cachedRows+=_3}
if(_4)this.$575=_5.length-1}
if(this.$575!=null)this.$576=_5[this.$575];if(this.canSortOnClient())this.$391()},isc.A.insertCacheData=function isc_ResultSet_insertCacheData(_1,_2,_3){if(!isc.isAn.Array(_1))_1=[_1];if(this.allRows&&this.allRows!=this.localData&&!_3){this.allRows.addListAt(_1,_2)}
var _4=(this.isPaged()&&this.totalRows!=null);var _5=this.localData;if(this.$121p!=null){isc.Func.replaceWithMethod(this,"$121p",isc.ResultSet.getArgString("$121p"));this.$121p(_1,_1.length,_2)}
_5.addListAt(_1,_2);if(_4){this.totalRows+=_1.length}
for(var i=_1.length;i--;){if(_1[i]!=null&&!Array.isLoading(_1[i])){++this.cachedRows}}
if(this.$121q!=null){isc.Func.replaceWithMethod(this,"$121q",isc.ResultSet.getArgString("$121q"));this.$121q(_1,_1.length,_2)}},isc.A.addEmptyValueRecord=function isc_ResultSet_addEmptyValueRecord(_1){var _2=this.allRows,_3=this.localData,_4=this.isLocal()?_2:_3;if(!_4||_4.find(_1,null))return false;var _5=!_2||_2==_3||_2.find(_1,null),_6={};_6[_1]=null;this.insertCacheData(_6,0,_5);return true},isc.A.$121k=function isc_ResultSet__setLocalData(_1){var _2=this.localData,_3=(_2==null||_2.isEmpty()),_4=(_3?0:_2.length),_5=(this.lengthIsKnown()?this.getLength():_4),_6=(_1==null||_1.isEmpty()),_7=(_6?0:_1.length),_8=this.lengthIsKnown(),_9=!(_3&&_6),_10=(_9&&_3&&!_6),_11=(_9&&!_3&&_6),_12=(_9&&!_10&&!_11);this.localData=_1;var _13=(this.lengthIsKnown()?this.getLength():_7);this.localData=_2;var _14=_5-_4,_15=_13-_7;var _9=!(_4+_7==0&&_14==_15),_10=_9&&_5==0,_11=_9&&!_10&&_7==0&&_14>=_15,_12=_9&&!_10&&!_11;var _16,_17,_18,_19;if(_10&&(this.$121p!=null||this.$121q!=null)){if(_7==0){_18=null}else if(_15==0){_18=_1}else{_18=_1.duplicate();_18.length=_13;for(var i=_7;i<_13;++i){_18[i]=null}}
if(this.$121p!=null){isc.Func.replaceWithMethod(this,"$121p",isc.ResultSet.getArgString("$121p"));this.$121p(_18,_13-_5,0)}}else if(_11&&(this.$121t!=null||this.$121u!=null)){_17=_4+_14-_15;if(_4==0){_16=null}else{_16=_2;for(var i=_4;i<_17;++i){_16[i]=null}}
if(this.$121t!=null){isc.Func.replaceWithMethod(this,"$121t",isc.ResultSet.getArgString("$121t"));this.$121t(_16,_17,0)}}else if(_12&&(this.$121n!=null||this.$121o!=null)){_17=_4+Math.max(0,_14-_15);if(_4==0){_16=null}else if(_14==0){_16=_2}else{_16=_2.duplicate();_16.length=_17;for(var i=_4;i<_17;++i){_16[i]=null}}
_19=_7+Math.max(0,_15-_14);if(_7==0){_18=null}else if(_15==0){_18=_1}else{_18=_1.duplicate();_18.length=_19;for(var i=_7;i<_19;++i){_18[i]=null}}
if(this.$121n!=null){isc.Func.replaceWithMethod(this,"$121n",isc.ResultSet.getArgString("$121n"));this.$121n(_16,_17,0,_18,_19)}}
this.localData=_1;if(_10&&this.$121q!=null){isc.Func.replaceWithMethod(this,"$121q",isc.ResultSet.getArgString("$121q"));this.$121q(_18,_13-_5,0)}else if(_11&&this.$121u!=null){isc.Func.replaceWithMethod(this,"$121u",isc.ResultSet.getArgString("$121u"));this.$121u(_16,_17,0)}else if(_12&&this.$121o!=null){isc.Func.replaceWithMethod(this,"$121o",isc.ResultSet.getArgString("$121o"));this.$121o(_16,_17,0,_18,_19)}
this.$121r(_8)},isc.A.$121r=function isc_ResultSet__checkLengthIsKnown(_1){if(this.$121v!=null){var _2=this.lengthIsKnown();if(_1!=_2){isc.Func.replaceWithMethod(this,"$121v",isc.ResultSet.getArgString("$121v"));this.$121v(_1,_2)}}},isc.A.$121s=function isc_ResultSet__sortLocalDataByProperties(_1,_2,_3,_4){var _5=undefined;if(isc.Browser.isFirefox&&isc.isA.ResultTree(this.$121z)&&this.$121z.isPaged()){var _6=this.$121z.$27i,_7=this.$121z.$135d,_8=this.$121z.$135e;for(var i=_3.length;i--;){if(_3[i]===_6){if(_5==null){_5=new Array(_3.length)}
_5[i]=(_2[i]?_7:_8)}}}
var _10=(this.$121w!=null),_11=this.localData.sortByProperties(_1,_2,_3,_4,_5,_10,false);if(_10){isc.Func.replaceWithMethod(this,"$121w",isc.ResultSet.getArgString("$121w"));if(_11!=null){var _12=this.localData;for(var i=0,_13=_12.length;i<_13;){var k=_11[i];if(i<k){var j=i+1,l=k;while(j<_13&&_11[j]==1+l){++j;++l}
var n=j-i,_18=(n>1?_12.getRange(i,j):_12[i]);this.$121w(_18,n,k,i);var _19=i-k,_20=n;for(var m=i+n;m<_13;++m){var p=_11[m];if(i<=p&&p<k){_11[m]+=n}}
i+=n}else{++i}}}}},isc.A.findFirstCachedRow=function isc_ResultSet_findFirstCachedRow(_1){for(var i=_1;i>=0;i--){if(this.localData[i]==null)return i+1}
return 0},isc.A.findLastCachedRow=function isc_ResultSet_findLastCachedRow(_1){for(var i=_1;i<this.totalRows;i++){if(this.localData[i]==null)return i-1}
return this.totalRows-1},isc.A.$39u=function isc_ResultSet__getRangePaged(_1,_2,_3,_4){if(this.$397){var _5=(this.ignoreCache?[]:this.localData)||[];return this.fillRangeLoading(_5.slice(_1,_2),_2-_1)}
this.$397=true;var _6=this.getRangePaged(_1,_2,_3,_4);delete this.$397;return _6},isc.A.getRangePaged=function isc_ResultSet_getRangePaged(_1,_2,_3,_4){if(_1<0||_2<0){this.logWarn("getRange("+_1+", "+_2+"): negative indices not supported, clamping start to 0");if(_1<0)_1=0}
if(_2<=_1){this.logDebug("getRange("+_1+", "+_2+"): returning empty list");return[]}
var _5=this.lengthIsKnown();if(!_3&&_5){var _6=this.getLength();if(_1>_6-1&&_1!=0){this.logWarn("getRange("+_1+", "+_2+"): start beyond end of rows, returning empty list");return[]}else if(_2>_6){_2=_6}}
if(this.localData==null){this.$121k([])}
if(_3){this.realCache=this.localData;this.$121k([])}
var _7=this.localData;this.lastRangeStart=_1;this.lastRangeEnd=_2;var _8=this.$132a(_1,_2,false),_9=false,_10,_11;if(_8==-1){_9=false}else{var _12=_8,_13=1+this.$132b(_1,_2,false);for(var i=_12;i<_13;++i){if(_7[i]==null){_10=i;break}}
_9=(_10!=null);if(_9){for(var i=_13-1;i>=_10;--i){if(_7[i]==null){_11=i;break}}}}
if(!_9){this.logDebug("getRange("+_1+", "+_2+") satisfied from cache");return this.fillRangeLoading(_7.slice(_1,_2),_2-_1)}
var _15,_16;if(this.fetchAhead){var _17=this.$398(_1,_2,_10,_11,_3);_15=_17[0];_16=_17[1]}else{_15=_10;_16=_11+1}
if(this.alwaysRequestVisibleRows){_15=_1;_16=_2}
this.fetchStartRow=_15;this.fetchEndRow=_16;var _18;if(_4||this.fetchDelay==0){this.$39w();_18=this.fillRangeLoading(_7.slice(_1,_2),_2-_1)}else{this.fireOnPause("fetchRemoteData","$39w",this.fetchDelay);_18=this.fillRangeLoading(_7.slice(_1,_2),_2-_1)}
if(_3){this.$121k(this.realCache);this.realCache=null}
return _18},isc.A.$398=function isc_ResultSet__addFetchAhead(_1,_2,_3,_4,_5){var _6=_5?[]:this.localData,_7=_5?Number.MAX_VALUE:this.getLength(),_8=_4-_3,_9=Math.floor((this.resultSize-_8)/2),_10=Math.max(0,_3-_9),_11=Math.min(_7,_4+_9);var _12=this.$1317,_13=_12.length,k=this.$1318(_10),_15=(k%2==0),j=(k+1<_13?_12[++k]:-1);for(var i=_10;i<=_3;i++){if(i==j){_15=!_15;j=(k+1<_13?_12[++k]:-1)}
if(_6[i]==null||_15){break}}
_3=i;k=this.$1318(_11);_15=(k%2==0);j=(k>0?_12[--k]:-1);for(var i=_11;i>=_4;i--){if(i==j){_15=!_15;j=(k>0?_12[--k]:-1)}
if(_6[i]==null||_15){break}}
_4=i;this.logDebug("getRange("+[_1,_2]+"), cache check: "+[_10,_11]+" firstMissingRow: "+_3+" lastMissingRow: "+_4);var _18,_19;if(_3==0||(_3>_10&&_4==_11))
{this.logDebug("getRange: guessing forward scrolling");_18=_3;_19=_18+this.resultSize;if(_19<_2)_19=_2}else if(_3==_10&&_4<_11){this.logDebug("getRange: guessing backward scrolling");_19=_4+1;_18=_19-this.resultSize;if(_18<0)_18=0;if(_18>_1)_18=_1}else{this.logDebug("getRange: no scrolling direction detected");_18=_10;_19=_11;if(_18>_1)_18=_1;if(_19<_2)_19=_2}
k=this.$1318(_18);_15=(k%2==0);j=(k+1<_13?_12[++k]:-1);for(var i=_18;i<_10;i++){if(i==j){_15=!_15;j=(k+1<_13?_12[++k]:-1)}
if(_6[i]==null||_15)break}
_18=i;k=this.$1318(_19-1);_15=(k%2==0);j=(k>0?_12[--k]:-1);for(var i=_19-1;i>_11;i--){if(i==j){_15=!_15;j=(k>0?_12[--k]:-1)}
if(_6[i]==null||_15)break}
_19=i+1;this.logInfo("getRange("+_1+", "+_2+") will fetch from "+_18+" to "+_19);return[_18,_19]},isc.A.filterLocalData=function isc_ResultSet_filterLocalData(){var _1=!this.$52z()
if(_1)this.$ed();this.$121k(this.applyFilter(this.allRows,this.criteria,isc.addProperties({dataSource:this},this.context)));if(this.localData!=null&&this.allRows!=null){this.logInfo("Local filter applied: "+this.localData.length+" of "+this.allRows.length+" records matched filter:"+this.echoFull(this.criteria),"localFilter")}
if(this.allRows!=null&&this.shouldUseClientSorting())this.$391();if(!this.$524()&&this.dataArrived){this.dataArrived(0,this.localData.length,true)}
if(_1)this.$ee(true,true)},isc.A.applyFilter=function isc_ResultSet_applyFilter(_1,_2,_3){return this.getDataSource().applyFilter(_1,_2,_3)},isc.A.getValuesList=function isc_ResultSet_getValuesList(_1){this.logInfo("asked for valuesList for property '"+_1+"'");if(this.isLocal()){if(!this.allRows){this.logWarn("asked for valuesList before data has been loaded");return[]}
var _2=this.allRows.getProperty(_1);if(!_2)return[];return _2.getUniqueItems()}
var _3=this.getCachedRange(),_4=[];for(var i=_3[0];i<=_3[1];i++){var _6=this.get(i);if(!_4.contains(_6[_1]))_4[_4.length]=_6[_1]}
return _4},isc.A.fillCacheData=function isc_ResultSet_fillCacheData(_1,_2){var _3=(this.$121v!=null),_4=_3&&this.lengthIsKnown();if(_2==null)_2=0;this.logDebug("integrating "+_1.length+" rows into cache at position "+_2);var _5=(this.localData==null);if(_5){this.$121k([])}
var _6=this.localData.length,_7=this.$121l(),_8=_1.length;this.$132c(_2,_2+_8,false);if(_8==0){_2=0}
var _9=Math.max(_7,_2+_8),_10=Math.max(0,_2-Math.min(_6,_7)),_11=Math.max(0,_9-Math.max(_6,_2+_8)),_12=_10+_11,_13=(_8>0&&_6<=_7&&_6<=_2),_14=(_8>0&&!_13);if(_14&&_12==0){if(this.$121n!=null){isc.Func.replaceWithMethod(this,"$121n",isc.ResultSet.getArgString("$121n"))}
if(this.$121o!=null){isc.Func.replaceWithMethod(this,"$121o",isc.ResultSet.getArgString("$121o"))}}else{if(this.$121p!=null){isc.Func.replaceWithMethod(this,"$121p",isc.ResultSet.getArgString("$121p"))}
if(this.$121q!=null){isc.Func.replaceWithMethod(this,"$121q",isc.ResultSet.getArgString("$121q"))}}
if(_12>0){var _15=Math.min(_6,_7)+_12,_16=(_14&&(this.$121n!=null||this.$121o!=null)&&this.localData.slice(_7,_6));if(_13&&this.$121p!=null){this.$121p(null,_12,_6)}else if(_14&&this.$121n!=null){this.$121n(_16,_6-_7,_7,null,_12)}
if(_5||_6<_15){this.localData.length=_15}else if(_6!=_15){this.localData=this.localData.slice(0,_7);this.localData.length=_15}
if(_13&&this.$121q!=null){this.$121q(null,_12,_6)}else if(_14&&this.$121n!=null){this.$121o(_16,_6-_7,_7,null,_12)}
_5=false;_13=_13||_14;_14=false;_6=_15;_7+=_12}
var _17=Math.min(_2,_7),_18=Math.min(_8,Math.max(0,_6-_17)),_16=(_14&&(this.$121n!=null||this.$121o!=null)&&this.localData.slice(_17,_17+_18));if(_13&&this.$121p!=null){this.$121p(_1,_8,_2)}else if(_14&&this.$121n!=null){this.$121n(_16,_18,_17,_1,_8)}
if(_5||_6<_7){this.localData.length=_9}else if(_6!=_7){this.localData=this.localData.slice(0,_7);this.localData.length=_9}
for(var i=0;i<_8;i++){var _20=_2+i,_21=this.localData[_20],_22=_1[i];if(_22!=null){++this.cachedRows}
if(_21!=null&&!Array.isLoading(_21)){--this.cachedRows}
this.localData[_20]=_22}
if(_13&&this.$121q!=null){this.$121q(_1,_8,_2)}else if(_14&&this.$121o!=null){this.$121o(_16,_18,_17,_1,_8)}
if(_3){var _23=this.lengthIsKnown();if(_4!=_23){isc.Func.replaceWithMethod(this,"$121v",isc.ResultSet.getArgString("$121v"));this.$121v(_4,_23)}}
if(this.allRowsCached()){this.$78z(this.localData,this.criteria)}},isc.A.setFullLength=function isc_ResultSet_setFullLength(_1){if(!isc.isA.Number(_1))return;this.logDebug("full length set to: "+_1);var _2=this.$1317;if(_2.length>0){this.$132c(_1,_2.last(),false)}
var _3=this.isPaged(),_4=(this.localData&&this.localData.length)||0,_5=this.lengthIsKnown(),_6=(_5?Math.max(_4,this.getLength()):_4);if(_1<_6){var _7=(this.$121t!=null||this.$121u!=null),_8;if(_7&&_1<_4){_8=this.localData.slice(_1,_4);for(var i=_4;i<_6;++i){_8[i]=null}}else{_8=null}
if(this.$121t!=null){isc.Func.replaceWithMethod(this,"$121t",isc.ResultSet.getArgString("$121t"));this.$121t(_8,_6-_1,_1)}
if(_3){this.totalRows=_1}
if(this.localData){this.localData=this.localData.slice(0,_1)}
if(this.$121u!=null){isc.Func.replaceWithMethod(this,"$121u",isc.ResultSet.getArgString("$121u"));this.$121u(_8,_6-_1,_1)}}else{var _7=_1>_6;if(_7&&this.$121p!=null){isc.Func.replaceWithMethod(this,"$121p",isc.ResultSet.getArgString("$121p"));this.$121p(null,_1-_6,_6)}
if(_3){this.totalRows=_1}
if(this.localData){this.localData.length=_1}
if(_7&&this.$121q!=null){isc.Func.replaceWithMethod(this,"$121q",isc.ResultSet.getArgString("$121q"));this.$121q(null,_1-_6,_6)}}
if(this.cachedRows>_1){this.cachedRows=_1}
if(this.$121v!=null){var _10=this.lengthIsKnown();if(_5!=_10){isc.Func.replaceWithMethod(this,"$121x",isc.ResultSet.getArgString("$121v"));this.$121v(_5,_10)}}},isc.A.invalidateCache=function isc_ResultSet_invalidateCache(){this.$122t=this.$39v;if(this.neverDropCache){isc.logWarn("invalidateCache() called on ResultSet populated with local data (not from dataSource). Ignoring.");return}
delete this.$572;delete this.$576;delete this.$573;delete this.$574;delete this.$575;this.$394();if(!this.$52z())this.dataChanged(null,null,null,null,true)},isc.A.$394=function isc_ResultSet__invalidateCache(){this.invalidateRows();this.totalRows=null;this.logInfo("Invalidating cache")},isc.A.invalidateRows=function isc_ResultSet_invalidateRows(){var _1=this.localData,_2=(_1&&_1.length)||0,_3=this.lengthIsKnown(),_4=Math.max(_2,(_3?this.getLength():_2));this.localData=null;var _5=(this.lengthIsKnown()?this.getLength():0);this.localData=_1;var _6=(_4>0&&_5==0),_7=(_2>0&&_5>0),_8;if(_6&&(this.$121t!=null||this.$121u!=null)){if(_2>0){_8=_1;for(var i=_2;i<_4;++i){_1[i]=null}}else{_8=null}
if(this.$121t!=null){isc.Func.replaceWithMethod(this,"$121t",isc.ResultSet.getArgString("$121t"));this.$121t(_8,_4,0)}}else if(_7&&this.$121n!=null){isc.Func.replaceWithMethod(this,"$121n",isc.ResultSet.getArgString("$121n"));this.$121n(_1,_2,0,null,_2)}
this.localData=this.allRows=null;if(_6&&this.$121u!=null){isc.Func.replaceWithMethod(this,"$121u",isc.ResultSet.getArgString("$121u"));this.$121u(_8,_4,0)}else if(_7&&this.$121o!=null){isc.Func.replaceWithMethod(this,"$121o",isc.ResultSet.getArgString("$121o"));this.$121o(_1,_2,0,null,_2)}
if(this.$121v!=null&&_3){isc.Func.replaceWithMethod(this,"$121v",isc.ResultSet.getArgString("$121v"));this.$121v(true,false)}
this.allRowsCriteria=null;delete this.$505;this.cachedRows=0;this.$50k=null;this.$1317=[]},isc.A.invalidateRowOrder=function isc_ResultSet_invalidateRowOrder(){this.$50k=true},isc.A.rowOrderInvalid=function isc_ResultSet_rowOrderInvalid(){return this.$50k},isc.A.dataChanged=function isc_ResultSet_dataChanged(){if(this.onDataChanged)this.onDataChanged()},isc.A.dataArrived=function isc_ResultSet_dataArrived(){},isc.A.getNewSelection=function isc_ResultSet_getNewSelection(_1){var _2=this.getDataSource().selectionClass;if(_2)return isc.ClassFactory.getClass(_2).create(_1)});isc.B._maxIndex=isc.C+96;isc.ResultSet.registerStringMethods({transformData:"newData,dsResponse",dataArrived:"startRow,endRow,dataFromCache",dataChanged:"operationType,originalRecord,rowNum,updateData,filterChanged,dataFromCache",$121p:"records,length,rowNum",$121q:"records,length,rowNum",$121t:"records,length,rowNum",$121u:"records,length,rowNum",$121n:"originalRecords,originalLength,rowNum,updatedRecords,updatedLength",$121o:"originalRecords,originalLength,rowNum,updatedRecords,updatedLength",$121w:"records,length,originalRowNum,updatedRowNum",$121v:"originalValue,updatedValue"});isc.ResultSet.getPrototype().toString=isc.$63a;isc.ResultSet.getPrototype().logMessage=isc.$63b;isc.ClassFactory.defineClass("LocalResultSet",isc.ResultSet);isc.A=isc.LocalResultSet.getPrototype();isc.A.fetchMode="local";isc.ClassFactory.defineClass("WindowedResultSet",isc.ResultSet);isc.ResultSet.addMethods(isc.ClassFactory.makePassthroughMethods(["find","findIndex","findNextIndex","findAllIndices","findAll","getProperty"],"localData",true,"ResultSet.${methodName} called with no cached local data. Calling code can use ResultSet.lengthIsKnown() to determine whether the ResultSet has loaded any data.","dataSource"))
isc.ClassFactory.defineClass("ResultTree",isc.Tree);isc.A=isc.ResultTree;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.getLoadingMarker=function isc_c_ResultTree_getLoadingMarker(){return(isc.ResultSet!=null?isc.ResultSet.getLoadingMarker():Array.LOADING)});isc.B._maxIndex=isc.C+1;isc.A=isc.ResultTree.getPrototype();isc.A.nameProperty="$399";isc.A.nodeTypeProperty="nodeType";isc.A.childTypeProperty="childType";isc.A.modelType="parent";isc.A.loadDataOnDemand=true;isc.A.autoPreserveOpenState="whenUnique";isc.A.fetchMode="basic";isc.A.resultSize=75;isc.A.$121y={fetchMode:"paged",$121p:function(_1,_2,_3){var _4=this.$121z,_5=this.$97q;_4.$1210(this,_5,_1,_2,_3,true)},$121q:function(_1,_2,_3){var _4=this.$121z,_5=this.$97q;_4.$1210(this,_5,_1,_2,_3,false)},$121t:function(_1,_2,_3){var _4=this.$121z,_5=this.$97q;_4.$1211(this,_5,_1,_2,_3,true)},$121u:function(_1,_2,_3){var _4=this.$121z,_5=this.$97q;_4.$1211(this,_5,_1,_2,_3,false)},$121n:function(_1,_2,_3,_4,_5){var _6=this.$121z,_7=this.$97q;_6.$1212(this,_7,_1,_2,_3,_4,_5,true)},$121o:function(_1,_2,_3,_4,_5){var _6=this.$121z,_7=this.$97q;_6.$1212(this,_7,_1,_2,_3,_4,_5,false)},$121w:function(_1,_2,_3,_4){var _5=this.$121z,_6=this.$97q;_5.$1213(this,_6,_1,_2,_3,_4)},$121v:function(_1,_2){var _3=this.$121z,_4=this.$97q;_3.$1214(this,_4,_1,_2)}};isc.A.childCountProperty="childCount";isc.A.canReturnOpenSubfoldersProperty="canReturnOpenSubfolders";isc.A.canReturnOpenFolders=false;isc.A.defaultNewNodesToRoot=false;isc.A.updateCacheFromRequest=true;isc.A=isc.ResultTree.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.currentFetch=0;isc.A.$131x=new Array(1);isc.A.$131y={};isc.B.push(isc.A.add=function isc_ResultTree_add(_1,_2,_3){if(this.isPaged()){isc.logWarn("ResultTrees with fetchMode \"paged\" are read-only.  This operation (add) will be ignored.")}else{return this.invokeSuper(isc.ResultTree,"add",_1,_2,_3)}},isc.A.addList=function isc_ResultTree_addList(_1,_2,_3){if(this.isPaged()){isc.logWarn("ResultTrees with fetchMode \"paged\" are read-only.  This operation (addList) will be ignored.")}else{return this.invokeSuper(isc.ResultTree,"addList",_1,_2,_3)}},isc.A.linkNodes=function isc_ResultTree_linkNodes(_1,_2,_3,_4,_5,_6,_7){if(this.isPaged()){isc.logWarn("ResultTrees with fetchMode \"paged\" are read-only.  This operation (linkNodes) will be ignored.")}else{return this.invokeSuper(isc.ResultTree,"linkNodes",_1,_2,_3,_4,_5,_6,_7)}},isc.A.move=function isc_ResultTree_move(_1,_2,_3){if(this.isPaged()){isc.logWarn("ResultTrees with fetchMode \"paged\" are read-only.  This operation (move) will be ignored.")}else{return this.invokeSuper(isc.ResultTree,"move",_1,_2,_3)}},isc.A.remove=function isc_ResultTree_remove(_1,_2){if(this.isPaged()){isc.logWarn("ResultTrees with fetchMode \"paged\" are read-only.  This operation (remove) will be ignored.")}else{return this.invokeSuper(isc.ResultTree,"remove",_1,_2)}},isc.A.removeList=function isc_ResultTree_removeList(_1){if(this.isPaged()){isc.logWarn("ResultTrees with fetchMode \"paged\" are read-only.  This operation (removeList) will be ignored.")}else{return this.invokeSuper(isc.ResultTree,"removeList",_1)}},isc.A.init=function isc_ResultTree_init(_1,_2,_3,_4,_5,_6){isc.ClassFactory.addGlobalID(this);if(!this.criteria)this.criteria={};if(!this.operation)this.operation={operationType:"fetch"};if(!this.dataSource)this.dataSource=this.operation.dataSource;if(!this.operation.dataSource)this.operation.dataSource=this.dataSource;if(isc.isAn.Array(this.dataSource)){this.dataSource=this.dataSource[0];this.operation.dataSource=this.dataSource}
if(!this.isMultiDSTree()){if(!this.root)this.root=this.makeRoot();var _7=this.getTreeRelationship(this.root);var _8;if(this.rootValue===_8)this.rootValue=_7.rootValue;if(!this.loadDataOnDemand&&(this.rootValue!=null||(this.root!=null&&this.root[this.idField]!=null))&&this.discardParentlessNodes==null)
{this.discardParentlessNodes=true}
if(this.idField==null)this.idField=_7.idField;if(this.parentIdField==null)this.parentIdField=_7.parentIdField;if(_7.childrenProperty)this.childrenProperty=_7.childrenProperty;this.root[this.idField]=this.rootValue}
this.setupProperties();if(this.isPaged()){var _9=this.context;this.resultSize=(_9&&_9.dataPageSize!=null?_9.dataPageSize:this.resultSize);this.$121y=isc.addProperties({},this.$121y,{resultSize:this.resultSize})}
if(this.keepParentsOnFilter&&!(this.isPaged()||this.isLocal())){this.fetchMode="local"}
if(this.initialData){if("parent"==this.modelType)this.data=this.initialData;else if("children"==this.modelType)this.root=this.initialData}
var _10=isc.DataSource.getDataSource(this.dataSource);this.observe(_10,"dataChanged","observer.dataSourceDataChanged(dsRequest,dsResponse);");this.dropCacheOnUpdate=this.operation.dropCacheOnUpdate;if(this.defaultIsFolder==null)this.defaultIsFolder=this.loadDataOnDemand;this.invokeSuper(isc.ResultTree,"init",_1,_2,_3,_4,_5,_6);this.setDefaultLoadState(this.loadDataOnDemand?isc.Tree.UNLOADED:isc.Tree.LOADED)},isc.A.setupProperties=function isc_ResultTree_setupProperties(){this.invokeSuper(isc.ResultTree,"setupProperties");if(this.isPaged()){this.$1215=("_visibleDescendantsCached_"+this.ID)}},isc.A.duplicate=function isc_ResultTree_duplicate(_1,_2){if(!this.isPaged()){return this.invokeSuper(isc.ResultTree,"duplicate",_1,_2)}
var _3=this.serverFilterFields;if(isc.isAn.Array(_3)){_3=_3.duplicate()}
var _4={fetchMode:this.fetchMode,dataSource:this.dataSource,loadDataOnDemand:this.loadDataOnDemand,childCountProperty:this.childCountProperty,defaultIsFolder:this.defaultIsFolder,discardParentlessNodes:this.discardParentlessNodes,defaultNewNodesToRoot:this.defaultNewNodesToRoot,updateCacheFromRequest:this.updateCacheFromRequest,disableCacheSync:this.disableCacheSync,keepParentsOnFilter:this.keepParentsOnFilter,serverFilterFields:_3,canReturnOpenFolders:this.canReturnOpenFolders};this.$1201(_4);_4.autoOpenRoot=false;var _5=isc.ResultTree.create(_4),_6=this.getRoot(),_7=this.isOpen(_6),_8=this.isFolder(_6),_9=_6[this.$111w],_10=_6[this.$1200],_11=_6[this.$1215],_12=this.getCleanNodeData(_6,false,false,_2);_12[_5.openProperty]=_7;_12[_5.isFolderProperty]=_8;_12[_5.$111w]=_9;_12[_5.$1200]=_10;_12[_5.$1215]=_11;this.$1216(_6,_5,_12,_2);_5.setRoot(_12);return _5},isc.A.$61g=function isc_ResultTree__getCleanNodeData(_1,_2,_3){var _4=this.$111w,_5=this.$1200,_6=this.$1215,_7=_1.openProperty,_8=_1.isFolderProperty,_9=_1.$111w,_10=_1.$1200,_11=_1.$1215;if(_2==null){return null}else if(isc.isAn.Array(_2)){var _12=new Array(_2.length);for(var i=_2.length;i--;){var _14=_2[i],_15=null;if(_14!=null){var _16=this.isOpen(_14),_17=this.isFolder(_14),_18=_14[_4],_19=_14[_5],_20=_14[_6];_15=this.getCleanNodeData(_14,false,false,_3);_15[_7]=_16;_15[_8]=_17;_15[_9]=_18;_15[_10]=_19;_15[_11]=_20}
_12[i]=_15}
return _12}else{var _16=this.isOpen(_2),_17=this.isFolder(_2),_18=_2[_4],_19=_2[_5],_20=_2[_6],_15=this.getCleanNodeData(_2,false,false,_3);_15[_7]=_16;_15[_8]=_17;_15[_9]=_18;_15[_10]=_19;_15[_11]=_20;return _15}},isc.A.$1216=function isc_ResultTree__duplicate(_1,_2,_3,_4){if(this.isLeaf(_1)){return}
var _5=this.getChildren(_1),_6=0;if(isc.isA.ResultSet(_5)){_6=_5.getLength();_3[_2.childCountProperty]=_6;var _7=_3[_2.childrenProperty]=new Array(_6);for(var i=_6;i--;){_7[i]=_5.getCachedRow(i)}}else if(isc.isAn.Array(_5)){_6=_5.length;_3[_2.childrenProperty]=_5}else if(_5){_6=1;_3[_2.childrenProperty]=[_5]}
var _9=(this.modelType==isc.Tree.PARENT),_10=this.parentIdField,_7=_3[_2.childrenProperty]=this.$61g(_2,_3[_2.childrenProperty],_4);for(var i=0;i<_6;++i){var _11=_5.getCachedRow(i);if(_11==null){continue}
if(_9){_7[i][_10]=_11[_10]}
var _12=_11[this.childrenProperty];if(_12&&!_12.isEmpty()){this.$1216(_11,_2,_7[i],_4)}}},isc.A.destroy=function isc_ResultTree_destroy(){if(this.isPaged()){this.$1217(this.getRoot(),false)}
var _1=isc.DataSource.getDataSource(this.dataSource);if(_1)this.ignore(_1,"dataChanged");this.Super("destroy",arguments)},isc.A.isLocal=function isc_ResultTree_isLocal(){return this.fetchMode=="local"},isc.A.isPaged=function isc_ResultTree_isPaged(){return this.fetchMode=="paged"},isc.A.haveCriteria=function isc_ResultTree_haveCriteria(_1){return!(_1==null||isc.isAn.emptyObject(_1)||(_1._constructor==="AdvancedCriteria"&&_1.operator==="and"&&isc.isAn.Array(_1.criteria)&&_1.criteria.length==0))},isc.A.setContext=function isc_ResultTree_setContext(_1){this.context=_1;if(this.isPaged()&&this.$122c!=null){for(var i=this.$122c.length;i--;){var _3=_1&&isc.addProperties({},_1);if(_1){delete _3.clientContext;delete _3.internalClientContext}
this.$122c[i].setContext(_3)}}},isc.A.getTreeRelationship=function isc_ResultTree_getTreeRelationship(_1){var _2=this.getChildDataSource(_1);var _3=_2.getTreeRelationship();return _3},isc.A.getChildDataSource=function isc_ResultTree_getChildDataSource(_1,_2){var _3=_1[this.childTypeProperty];if(_3!=null)return isc.DS.get(_3);var _2=_2||this.getNodeDataSource(_1);if(_2==null||!this.isMultiDSTree())return this.getRootDataSource();var _4=this.treeRelations,_5=_2.getChildDataSources();if(_4){_3=_4[_2.ID];if(_3!=null)return isc.DS.get(_3)}
if(_5!=null)return _5[0]},isc.A.getNodeDataSource=function isc_ResultTree_getNodeDataSource(_1){var _2=_1[this.nodeTypeProperty];if(_2==null){var _3=this.getParent(_1);if(_3==null){return null}else if(_3==this.root){_2=this.getRootDataSource().ID}else{_2=_3.$40a;if(_2==null)_2=this.getRootDataSource().ID}}
return isc.DS.get(_2)||this.getRootDataSource()},isc.A.isMultiDSTree=function isc_ResultTree_isMultiDSTree(){return this.multiDSTree||this.treeRelations!=null},isc.A.getRootDataSource=function isc_ResultTree_getRootDataSource(){if(this.operation&&this.operation.dataSource)return isc.DS.get(this.operation.dataSource);else return isc.DS.get(this.dataSource)},isc.A.getCriteria=function isc_ResultTree_getCriteria(_1,_2,_3){if(this.getRootDataSource()==_1)return this.criteria;return null},isc.A.getOperationId=function isc_ResultTree_getOperationId(_1,_2,_3){return this.operation?this.operation.ID:null},isc.A.$1218=function isc_ResultTree__getRelationship(_1,_2){var _3=(_1==null||_1==this.root),_4;var _5,_6;if(_3&&this.isMultiDSTree()){_5=this.getRootDataSource();_6=null;_4={childDS:_5}}else{_4=this.getTreeRelationship(_1);_5=_4.childDS;_6=_4.parentDS}
if(!this.isMultiDSTree()){_4.idField=this.idField;_4.parentIdField=this.parentIdField;_4.rootValue=_4.rootValue}
if(_2&&this.logIsDebugEnabled()){this.logDebug("parent id: "+(_3?"[root]":_1[_4.idField])+" (type: "+(_3?"[root]":(_6?_6.ID:"null"))+") has childDS: "+_5.ID+", relationship: "+this.echo(_4))}
return _4},isc.A.$1219=function isc_ResultTree__getLoadChildrenCriteria(_1,_2,_3){var _4=(_1==null||_1==this.root),_5=_2.childDS,_6=_2.parentDS,_7={};if(!this.isLocal()){_7=isc.addProperties({},this.getCriteria(_5,_6,_1))}else if(this.$868!=null){_7=isc.addProperties({},this.$868)}
if(_4&&this.isMultiDSTree()){}else if(this.loadDataOnDemand||this.isPaged()){var _8=_1[_2.idField];var _9;if(_4&&_8===_9){_8=_2.rootValue}
if(_7._constructor=="AdvancedCriteria"){_7=isc.DataSource.combineCriteria(_7,{_constructor:"AdvancedCriteria",fieldName:_2.parentIdField,value:_8,operator:"equals"},"and")}else{_7[_2.parentIdField]=_8}}
return _7},isc.A.$121b=function isc_ResultTree__loadChildren(_1,_2,_3,_4){var _5=this.$1218(_1,true),_6=_5.childDS,_7=_5.parentDS;_1.$40a=_6.ID;var _8=(_1==null||_1==this.root),_9=this.$1219(_1,_5,true);if(!((_8&&this.isMultiDSTree())||this.loadDataOnDemand)){this.setDefaultLoadState(isc.Tree.LOADED)}
var _10={parentNode:_1,relationship:_5,childrenReplyCallback:_4};if(!this.$84a){_10.$84b=true;this.$84a=true}
_10.fetchCount=++this.currentFetch;var _11=isc.addProperties({parentNode:_1,resultTree:this},this.context);if(this.context&&this.context.internalClientContext){_10=isc.addProperties({},this.context.internalClientContext,_10)}
_11.internalClientContext=_10;var _12=this.getOperationId(_6,_7,_1);if(_12)_11.operationId=_12;_11.willHandleError=true;if(this.isPaged()){_11.startRow=_2;_11.endRow=_3;if(this.keepParentsOnFilter){_11.keepParentsOnFilter=true}}
if(_1!=null)this.setLoadState(_1,isc.Tree.LOADING);var _13=this.$124u(),_14=null;if(_13!==false){var _15=true;for(var n=_1,p=null;_15&&n!=null;n=p){p=this.getParent(n);if(p==null){_15=true}else{var c=this.getChildren(p);_15=(c.getLength()==1+c.indexOf(n))}}
_13=_15&&_13;if(_13===true||_13===false){_14={progressiveLoading:_13}}}else{_14={progressiveLoading:false}}
_6.fetchData(_9,{caller:this,methodName:"loadChildrenReply"},isc.addProperties(_11,_14))},isc.A.loadChildrenReply=function isc_ResultTree_loadChildrenReply(_1,_2,_3){var _4=_1.internalClientContext;var _5=_4.fetchCount;if(this.invalidatedFetchCount!=null&&_5<=this.invalidatedFetchCount){return}
var _6=_4.parentNode;var _7=_6,_8;while((_8=this.getParent(_7))!=null){_7=_8}
if(_7!==this.getRoot()){return}
var _9=(this.isLocal()&&this.haveCriteria(this.$869||this.criteria));var _10=_4.relationship,_11=_1.data;if(_1.status<0)_11=null;if(_1.status==isc.RPCResponse.STATUS_OFFLINE){_11=[];if(_6!=null&&!this.isRoot(_6)){isc.say(window[_3.componentId].offlineNodeMessage)}}
var _12=this;if(_9){if(!this.completeTree)this.completeTree=this.duplicate(true,true);_12=this.completeTree;var _13=this.getPath(_6);_6=_12.find(_13)}
if(_11==null||_11.length==0){if(_1.status==isc.RPCResponse.STATUS_OFFLINE){_12.setLoadState(_6,isc.Tree.UNLOADED);_12.delayCall("closeFolder",[_6],0)}else{_12.setLoadState(_6,isc.Tree.LOADED)}
if(_11==null){if(_1.status<0){isc.RPCManager.$a0(_1,_3)}else{this.logWarn("null children returned; return empty List instead")}
_11=[]}}
if(this.isPaged()){var _14=_11.length;var _15=(_1.startRow!=null?_1.startRow:_3.startRow);var _16=(_1.endRow!=null?_1.endRow:_15+_14);var _17=(_1.totalRows==null&&_16<_3.endRow?_16:_1.totalRows);var _18=_6[this.childrenProperty];if(isc.isA.ResultSet(_18)){}else if(_16<_17){_6[this.childCountProperty]=_17;var _19=this.getParent(_6),_20=_19!=null&&this.$111x(_6,_19);_18=this.$1202(_6,_6[this.childrenProperty],false);_18.fillCacheData(_11,_15)}else{if(_18!=null){var _21=_18.getRange(_15,_16);for(var i=_21.length;i--;){this.$786(_21[i])}}
this.$27k(_11,_6,_15)}}else if(_12.isMultiDSTree()){for(var i=0;i<_11.length;i++){var _23=_11[i];var _24=this.getChildDataSource(_23,_10.childDS);if(_24!=null)this.convertToFolder(_23);_12.$27e(_23,_6)}}else{if(_1.status==isc.RPCResponse.STATUS_OFFLINE){_12.setLoadState(_6,isc.Tree.UNLOADED);_12.delayCall("closeFolder",[_6],0)}else{var _25=_9;_12.$1369(_11,_10.idField,_10.parentIdField,_10.rootValue,_10.isFolderProperty,_6,_25)}}
if(_9){if(this.$87a==null)this.$87a=this.$87b();this.filterLocalData()}
if(this.$87a){this.$87c(this.$87a,true);delete this.$87a}
if(_4.childrenReplyCallback){this.fireCallback(_4.childrenReplyCallback,"node",[_6],this)}
if(this.dataArrived!=null){isc.Func.replaceWithMethod(this,"dataArrived","parentNode");this.dataArrived(_6)}},isc.A.getDataSource=function isc_ResultTree_getDataSource(){return isc.DataSource.getDataSource(this.dataSource)},isc.A.invalidateCache=function isc_ResultTree_invalidateCache(){if(!this.isLoaded(this.root))return;this.invalidatedFetchCount=this.currentFetch;this.$87a=this.$87b(true);this.$27d=0;this.setRoot(this.makeRoot(),true);if(!this.loadDataOnDemand){this.reloadChildren(this.root)}},isc.A.dataSourceDataChanged=function isc_ResultTree_dataSourceDataChanged(_1,_2){if(this.disableCacheSync)return;var _3=isc.DataSource.getUpdatedData(_1,_2,this.updateCacheFromRequest);this.handleUpdate(_1.operationType,_3,_2.invalidateCache)},isc.A.handleUpdate=function isc_ResultTree_handleUpdate(_1,_2,_3){if(isc.$cv)arguments.$cw=this;var _4=(this.dropCacheOnUpdate||_3||(this.isPaged()&&this.keepParentsOnFilter));if(_4){this.invalidateCache();if(!this.getDataSource().canQueueRequests)this.dataChanged();return}
this.updateCache(_1,_2);this.dataChanged()},isc.A.updateCache=function isc_ResultTree_updateCache(_1,_2){if(_2==null)return;_1=isc.DS.$372(_1);if(!isc.isAn.Array(_2))_2=[_2];if(this.logIsInfoEnabled()){this.logInfo("Updating cache: operationType '"+_1+"', "+_2.length+" rows update data"+(this.logIsDebugEnabled()?":\n"+this.echoAll(_2):""))}
switch(_1){case"remove":this.removeCacheData(_2);break;case"add":this.addCacheData(_2);break;case"replace":case"update":this.updateCacheData(_2);break}},isc.A.addCacheData=function isc_ResultTree_addCacheData(_1){if(!isc.isAn.Array(_1))_1=[_1];var _2=this.getDataSource().applyFilter(_1,this.criteria,this.context);this.logInfo("Adding rows to cache: "+_2.length+" of "+_1.length+" rows match filter criteria");var _3=(this.idField!=undefined&&this.parentIdField!=undefined),_4=this.getDataSource().getPrimaryKeyFieldNames()[0];for(var i=0;i<_2.length;i++){var _6=_2[i];if(_3&&_6!=null&&_6[this.idField]==_6[this.parentIdField])
{this.logWarn("Invalid attempt to add a node that is specified to be its own parent (the '"+this.idField+"' + and '"+this.parentIdField+"' properties of the node are both set to "+(_6[this.idField]==null?"null":_6[this.idField].toString())+").  Skipping this node.");continue}
if(this.completeTree){this.$651(this.completeTree,_6,_4)}
this.$651(this,_6,_4)}},isc.A.$651=function isc_ResultTree__addNodeToCache(_1,_2,_3){var _4=_2[this.parentIdField],_5;if(_4!=null)_5=_1.find(_3,_4);else{if(this.defaultNewNodesToRoot||_1.rootValue==null)_5=_1.getRoot();else _5=null}
var _6=(_5!=null&&(_1.getLoadState(_5)==isc.Tree.LOADED)&&!(this.isPaged()&&isc.isA.ResultSet(this.getChildren(_5))));if(_6){_2=isc.clone(_2);_1.$27e(_2,_5)}
return _6},isc.A.updateCacheData=function isc_ResultTree_updateCacheData(_1){if(!isc.isAn.Array(_1))_1=[_1];var _2={addedRows:0,updatedRows:0,removedRows:0};var _3=(this.$87d||this.criteria),_4=this.haveCriteria(_3);var _5=(this.idField!=undefined&&this.parentIdField!=undefined),_6=this.getDataSource();for(var i=0;i<_1.length;i++){var _8=_1[i];var _9=true;if(_4){var _10=_6.applyFilter([_8],_3,this.context);_9=(_10!=null&&_10.length>0)}
if(this.logIsDebugEnabled()&&!_9){this.logDebug("updated node :\n"+this.echo(_8)+"\ndidn't match filter: "+this.echo(_3))}
if(_8==null){continue}
if(_5&&_8[this.idField]==_8[this.parentIdField])
{this.logWarn("Invalid attempt to update a node where the '"+this.idField+"' and '"+this.parentIdField+"' properties of the record are both set to "+(_8[this.idField]==null?"null":_8[this.idField].toString())+" (this would reparent the node to itself).  Skipping this node.");continue}
if(this.completeTree){this.$87e(this.completeTree,_8,true,null)}
this.$87e(this,_8,_9,_2)}
if(this.logIsDebugEnabled()){this.logDebug("updated cache: "+_2.addedRows+" row(s) added, "+_2.updatedRows+" row(s) updated, "+_2.removedRows+" row(s) removed.")}},isc.A.$87e=function isc_ResultTree__updateNodeInCache(_1,_2,_3,_4){var _5=this.getDataSource(),_6=_5.getPrimaryKeyFieldNames()[0],_7=_1.find(_6,_2[_6]);if(_7==null){if(_3){if(this.$651(_1,_2,_6)){this.logInfo("updated row returned by server doesn't match any cached row,  adding as new row.  Primary key value: "+this.echo(_2[_6])+", complete row: "+this.echo(_2));if(_4)_4.addedRows++}}
return}
var _8=this.isPaged(),_9=_8&&this.getChildren(this.getParent(_7));if(_3){if(_2[this.parentIdField]!=_7[this.parentIdField]){var _10=_1.find(_6,_2[this.parentIdField]);if(_10==null&&(this.defaultNewNodesToRoot||this.rootValue==null))
{_10=_1.getRoot()}
if(_10==null||(_1.getLoadState(_10)!=isc.Tree.LOADED)){if(!(_8&&isc.isA.ResultSet(_9))){_1.$786(_7);if(_4)_4.removedRows++}
return}else{var _11=_8&&this.getChildren(_10),_12=!(_8&&isc.isA.ResultSet(_11)),_13=!(_8&&isc.isA.ResultSet(_9));if(_12&&_13){_1.$1083(_7,_10)}else if(_12){_1.$27e(_7,_10)}else if(_13){_1.$786(_7)}}}
isc.addProperties(_7,_2);var _14=_5.getFieldNames();for(var i=0;i<_14.length;i++){var _16=_14[i];if(!_2.hasOwnProperty(_16))delete _7[_16]}
if(_4)_4.updatedRows++}else if(!(_8&&isc.isA.ResultSet(_9))){_1.$786(_7);if(_4)_4.removedRows++}},isc.A.removeCacheData=function isc_ResultTree_removeCacheData(_1){if(!isc.isAn.Array(_1))_1=[_1];var _2=this.getDataSource().getPrimaryKeyFieldNames()[0];if(this.completeTree){this.$87f(this.completeTree,_1,_2)}
this.$87f(this,_1,_2)},isc.A.$87f=function isc_ResultTree__removeNodesFromCache(_1,_2,_3){var _4=this.isPaged(),_5=[];for(var i=0;i<_2.length;i++){var _7=_1.find(_3,_2[i][_3]);if(_7==null){this.logWarn("Cache synch: couldn't find deleted node:"+this.echo(_2[i]))}else if(!(_4&&isc.isA.ResultSet(this.getChildren(this.getParent(_7))))){_5.add(_7)}}
_1.$137c(_5)},isc.A.getTitle=function isc_ResultTree_getTitle(_1){var _2=this.getNodeDataSource(_1);if(!_2)return"root";var _3=_1[_2.getTitleField()];if(_3!=null)return _3;return this.Super("getTitle",arguments)},isc.A.indexOf=function isc_ResultTree_indexOf(_1,_2,_3,_4,_5){var _6=this.getDataSource().getPrimaryKeyFieldNames();for(var i=0;i<_6.length;i++){var _8=_6[i];if(_1[_8]!=null)return this.findIndex(_8,_1[_8])}
return this.invokeSuper(isc.ResultTree,"indexOf",_1,_2,_3,_4,_5)},isc.A.contains=function isc_ResultTree_contains(_1,_2,_3){if(this.isPaged()&&_1!=null&&_2===undefined&&_3===undefined){var _4=this.idField;return(_1[this.treeProperty]==this.ID&&this.nodeIndex[_1[_4]]==_1)}else{return this.invokeSuper(isc.ResultTree,"contains",_1,_2,_3)}},isc.A.getLength=function isc_ResultTree_getLength(){var _1=this.invokeSuper(isc.ResultTree,"getLength");if(this.isPaged()&&this.$122c!=null){var _2=this.getRoot(),_3=(this.openDisplayNodeType==isc.Tree.FOLDERS_AND_LEAVES?1:0);for(var i=this.$122c.length;i--;){var _5=this.$122c[i],_6=_5.$97q,_7=(_6[this.canReturnOpenSubfoldersProperty]!=null?_6[this.canReturnOpenSubfoldersProperty]:this.canReturnOpenFolders),_8=!(_7||_3==0);if(!_8){var _9=true;for(var p=_6;_9&&p!=_2;p=this.getParent(p)){_9=p!=null&&this.isOpen(p)}
if(_9){_1+=Math.max(0,_5.$121l()-_5.$137f())}}}}
return _1},isc.A.get=function isc_ResultTree_get(_1){if(_1<0){return undefined}else{return this.getRange(_1,_1+1,false,this.$131x)[0]}},isc.A.getCachedRow=function isc_ResultTree_getCachedRow(_1){if(_1<0){return null}else{var _2=this.getRange(_1,_1+1,true,this.$131x)[0];if(_2!=null&&_2!==isc.ResultTree.getLoadingMarker()){return _2}else{return null}}},isc.A.getRange=function isc_ResultTree_getRange(_1,_2,_3,_4){if(_1==null){this.logWarn("getRange() called with no specified range - ignoring.");return}else if(_2==null){_2=_1+1}
if(_1<0||_2<0){this.logWarn("getRange("+_1+", "+_2+"): negative indices not supported, clamping start to 0");_1=Math.max(_1,0)}
if(_2<=_1){this.logDebug("getRange("+_1+", "+_2+"): returning empty list");return[]}
var _5=this.$122a;if(_5!=null&&_5.length>0){var _6=_5[_5.length-1],_7=_6.start;if(_7<=_1&&_2<=_6.end){return _6.range.slice(_1-_7,_2-_7)}}
if(!this.isPaged()){return this.invokeSuper(isc.ResultTree,"getRange",_1,_2)}
var _8=isc.ResultTree.getLoadingMarker(),_9=this.$111w,_10=this.getRoot(),_11=this.$131y;_11.range=_4||[];_11.rangeLength=0;_11.rangeLoading=false;_11.needQueue=false;_11.wasAlreadyQueuing=false;_11.dontFetch=(_3===true);if(_2>_1){if(!(this.openDisplayNodeType!=isc.Tree.LEAVES_ONLY&&this.showRoot)){++_1;++_2}
var _12=this.$124u();this.$122b(_10,_10,[_10],0,_1,_2,true,_12,false,_11);if(_4!=null){_11.range.length=_11.rangeLength}}
return _11.range},isc.A.$121e=function isc_ResultTree__pushCachedRange(_1,_2){if(this.isPaged()){if(this.$122a==null){this.$122a=[]}
this.$122a.push({start:_1,end:_2,range:this.getRange(_1,_2)})}},isc.A.$121f=function isc_ResultTree__popCachedRange(_1,_2){if(this.isPaged()){this.$122a.pop();if(this.$122a.length==0){delete this.$122a}}},isc.A.$122b=function isc_ResultTree__getRange(_1,_2,_3,_4,_5,_6,_7,_8,_9,_10){var _11=this.separateFolders,_12=_11&&this.sortFoldersBeforeLeaves,_13=_11&&!this.sortFoldersBeforeLeaves,_14=_10.range,_15=_10.rangeLoading,_16=_10.needQueue,_17=_10.dontFetch;var _18=(this.openDisplayNodeType==isc.Tree.FOLDERS_AND_LEAVES?1:0);var _19=this.$1215,_20=this.$111w,_21=isc.ResultTree.getLoadingMarker(),_22=(_2[this.canReturnOpenSubfoldersProperty]!=null?_2[this.canReturnOpenSubfoldersProperty]:this.canReturnOpenFolders),_23=isc.isA.ResultSet(_3),j=_4;var _25=(_3==null?0:(_23?_3.$121l():_3.getLength()));for(var z=0;z<(_11?2:1);++z){var _27=(z==0),_28=(_27==_12),_29=(_27==_13),_30=false,_31=0,p=0;for(;j<_6&&p<_25;++p){var _33=_3.getCachedRow(p);var _34=(_33!=null&&(!this.isOpen(_33)||_33[_19]));if(_33==null){var _35=(_22||_15||_18==0);if(_27&&(_35||_11||j>=_5)){if(_35){if(!_15){for(var r=Math.max(_5,j);r<_6;++r){_14[r-_5]=_21}
_15=_10.rangeLoading=true;_10.rangeLength=(_6-_5);if(_17){return}}}else{_9=_11;if(j>=_5){_14[j-_5]=_21;++_10.rangeLength}}
if(!(_17||_30)){_30=true;_31=p;if(!_16){_10.wasAlreadyQueuing=isc.RPCManager.startQueue();_16=_10.needQueue=true}}}
j+=(_11&&_27?0:_18)}else{if(_30){_30=false;var _37=_3.progressiveLoading;_3.progressiveLoading=false;_3.getRange(_31,p);_3.progressiveLoading=_37}
if(this.isFolder(_33)?!_29:!_28){var _38,_39;if(_33==_1){_38=_33[_20];_39=true}else{_38=this.$111x(_33,_2);_39=this.$121c(_33,_2)}
var _40=_38-(_39?1:0);if(j>=_5&&_39&&!_15){_14[j-_5]=(_9?_21:_33);++_10.rangeLength}
var k=j+(_39?1:0),l=j+_38;if(k<_6&&(!_34||(l>=_5&&_40>0))){var _43=this.getChildren(_33);this.$122b(_1,_33,_43,k,_5,_6,false,(p==_25-1&&_8),_9,_10);_15=_10.rangeLoading;_16=_10.needQueue;if(_17&&_15){return}}
j=l}}}
if(_30){_30=false;var _37=_3.progressiveLoading;_3.progressiveLoading=_8;_3.getRange(_31,p);_3.progressiveLoading=_37}}
if(_25==0||(_23&&!_3.lengthIsKnown())){if(!_15){for(var r=Math.max(_5,j);r<_6;++r){_14[r-_5]=_21}
_15=_10.rangeLoading=true;_10.rangeLength=(_6-_5);if(_17){return}}
if(!_16){_10.wasAlreadyQueuing=isc.RPCManager.startQueue();_16=_10.needQueue=true}
var _37;if(_23){_37=_3.progressiveLoading;_3.progressiveLoading=_8}
if(_11||(_18==0)){if(_23){_3.$121m()}else{this.$121b(_2,null,null,null)}}else if(_23){_3.getRange(0,_6-j)}else{this.$121b(_2,null,null,null)}
if(_23){_3.progressiveLoading=_37}}
if(_7&&_16&&!_10.wasAlreadyQueuing){isc.RPCManager.sendQueue()}},isc.A.$124u=function isc_ResultTree__getProgressiveLoading(){return(this.isPaged()&&this.progressiveLoading)},isc.A.$1202=function isc_ResultTree__canonicalizeChildren(_1,_2,_3){if(isc.isA.ResultSet(_2)){_1[this.childrenProperty]=_2;return _2}else if(this.$132d===true){return _2}
var _4=_1[this.childCountProperty],_5=(isc.isAn.Array(_2)?_2.length:0),_6=(_4!=null&&isc.isA.Number(_4)&&Math.floor(_4)==_4&&_4>=0);if(_6&&_4<_5){isc.logWarn("The child count of a record was set to "+_4+".  The number of children was "+_5+".  The number of children cannot exceed the child count.  Clamping the number of children to the child count.");_2=_1[this.childrenProperty]=_2.slice(0,_4)}
if(_6){this.$122c=this.$122c||[];if(this.dataArrived!=null){isc.Func.replaceWithMethod(this,"dataArrived","parentNode")}
var _7=this.$27i,_8=this.$73p,_9=false;if(isc.isAn.Array(_8)&&_7!=null){for(var i=_8.length;i--;){var _11=_8[i];if(_11!=null&&_11.normalizer===_7){if(!_9){_8=_8.duplicate();_9=true}
_8[i]=isc.addProperties({},_11,{normalizer:null})}}}
var _12=this.getDataSource(),_13;if(this.keepParentsOnFilter){_13=(_2?_2.duplicate():[])}else{_13=_12.applyFilter(_2,this.criteria,this.context)}
var _14=Math.max(_13.length,_1[this.childCountProperty]+(_13.length-_5));var _15=this.context&&isc.addProperties({},this.context);if(_15){delete _15.clientContext;delete _15.internalClientContext}
if(this.keepParentsOnFilter){_15=_15||{};_15.keepParentsOnFilter=true}
var _16={init:function(){var _17=this.$121z;this.$97q[_17.childrenProperty]=this;if(!_17.$122c.contains(this)){_17.$122c.add(this)}
if(_17.dataArrived!=null){_17.observe(this,"dataArrived","observer.dataArrived(observed.$97q)")}
var _1=this.$97q,_18=_17.$1218(_1,false);this.$134h=_17.$1219(_1,_18,false);var _19=this.Super("init",arguments);var _20=this.$97q,_21=_20!=_17.root&&_17.getParent(_20),_22=(_20[_17.canReturnOpenSubfoldersProperty]!=null?_20[_17.canReturnOpenSubfoldersProperty]:_17.canReturnOpenFolders),_23=(_17.openDisplayNodeType==isc.Tree.FOLDERS_AND_LEAVES?1:0),_24=!(_22||_23==0);if(_24){var _25=(_21&&_17.$111x(_20,_21));_20[_17.$111w]=_17.$1112(_20);if(_21){var _26=(_17.$111x(_20,_21)-_25);_17.$111z(_21,_26)}}
if(this.$122d){this.addProperties(_17.$121y)}
delete this.$122d;return _19},$121z:this,$97q:_1,$122d:_3,dataSource:_12,criteria:this.criteria,context:_15,disableCacheSync:this.disableCacheSync,updateCacheFromRequest:this.updateCacheFromRequest,sortSpecifiers:_8,initialData:_13,initialLength:_14,setCriteria:function(_27){var _17=this.$121z;_27=arguments[0]=_17.$122e(_27,this.$134h);return this.Super("setCriteria",arguments)}};if(this.keepParentsOnFilter){_16.dropCacheOnUpdate=true}
if(!_3){isc.addProperties(_16,this.$121y)}
_2=_1[this.childrenProperty]=isc.ResultSet.create(_16);this.setLoadState(_1,isc.Tree.LOADED_PARTIAL_CHILDREN);this.$1203(_1,false,null,false)}
return _2});isc.evalBoundary;isc.B.push(isc.A.$122e=function isc_ResultTree__combineCriteria(_1,_2){var _3=(_1==null||isc.isAn.emptyObject(_1)),_4=(_2==null||isc.isAn.emptyObject(_2));if(_3||_4){if(!_3){return _1}else if(!_4){return _2}else{return(_1||_2)}}
var _5=(_1._constructor=="AdvancedCriteria"||_2._constructor=="AdvancedCriteria");if(!_5){var _6=false;for(var _7 in _1){if(_2[_7]!=undefined){if(_2[_7]!==_1[_7]){_5=true}else{if(!_6){_2=isc.addProperties({},_2);_6=true}
delete _2[_7]}}}}
var _8=isc.DataSource.combineCriteria(_1,_2,"and");_5=(_8._constructor=="AdvancedCriteria");if(_5&&isc.isAn.Array(_8.criteria)){var _9=_8.criteria;for(var i=_9.length;i--;){var _11=_9[i];if(_11.operator=="iContains"&&_11.value==null){_11.operator="isNull";delete _11.value}}}
return _8},isc.A.setSort=function isc_ResultTree_setSort(_1){var _2=this.invokeSuper(isc.ResultTree,"setSort",_1);_1=this.$73p;if(this.isPaged()){var _3=this.$122c;if(_3!=null&&_3.length>0){var _4=isc.RPCManager.startQueue();for(var i=_3.length;i--;){var _6=_3[i];_6.setSort(_1)}
if(!_4){isc.RPCManager.sendQueue()}}}
return _2},isc.A.$122f=function isc_ResultTree__getStartRow(_1){if(_1==null){return null}
var _2=this.getRoot(),_3=null,_4=0;for(;_1!=_2;_1=_3){_3=this.getParent(_1);if(_3!=null){if(!this.$1111(_1,_3)){return null}
var _5=this.getChildren(_3),j=_5.indexOf(_1);if(j==-1){return null}
for(var i=0;i<j;++i){var _8=_5.getCachedRow(i);if(_8!=null){_4+=this.$111x(_8,_3)}}
if(this.$121c(_1,_3)){++_4}}else if(_1!=_2){return undefined}}
return _4},isc.A.$1203=function isc_ResultTree__setVisibleDescendantsCached(_1,_2,_3,_4){var _5=this.$1215,_6=_1[_5];if(_2==null){var _7=this.getLoadState(_1);_2=(_7===isc.Tree.LOADED||_7===isc.Tree.LOADED_PARTIAL_CHILDREN);var _8=this.getChildren(_1,undefined,undefined,undefined,undefined,undefined,true,undefined),_9=isc.isA.ResultSet(_8);if(_2&&(_9||isc.isAn.Array(_8))){_2=_2&&((!_9||(_8.allMatchingRowsCached()&&_8.lengthIsKnown())));for(var i=0,_11=_8.getLength();_2&&i<_11;++i){var _12=_8.getCachedRow(i);_2=(_12!=null&&(!this.isOpen(_12)||_12[_5]||false))}}}
_1[_5]=_2;_3=_3||this.getParent(_1);if((_4||!_6)&&_2){if(_3!=null&&this.isOpen(_1)){var _7=this.getLoadState(_3),_8=this.getChildren(_3),_9=isc.isA.ResultSet(_8),_13=((_7===isc.Tree.LOADED||_7===isc.Tree.LOADED_PARTIAL_CHILDREN)&&(!_9||(_8.allMatchingRowsCached()&&_8.lengthIsKnown())));if(_13&&(_9||isc.isAn.Array(_8))){var _14=_8.indexOf(_1);for(var i=_8.getLength();_13&&i-->0;){if(i!=_14){var _12=_8.getCachedRow(i);_13=(_12!=null&&(!this.isOpen(_12)||_12[_5]))}}}
if(_13){this.$1203(_3,true,null,false)}else{}}}else if((_4||_6)&&!_2){while(_3!=null&&_3[_5]&&this.isOpen(_1)){_3[_5]=false;_1=_3;_3=this.getParent(_3)}}},isc.A.$137a=function isc_ResultTree___add(_1,_2,_3){if(this.isPaged()&&!this.keepParentsOnFilter){var _4=this.getDataSource().applyFilter([_1],this.criteria,this.context);if(_4.length==0){return}}
return this.invokeSuper(isc.ResultTree,"$137a",_1,_2,_3)},isc.A.$1205=function isc_ResultTree__preAdd(_1,_2,_3,_4){var _5=this.invokeSuper(isc.ResultTree,"$1205",_1,_2,_3,_4);if(this.isPaged()){var _6=this.getLoadState(_1),_7=(_6===isc.Tree.LOADED||_6===isc.Tree.LOADED_PARTIAL_CHILDREN);this.$1203(_1,_7,_2,true)}
return _5},isc.A.setRoot=function isc_ResultTree_setRoot(_1,_2){if(this.isPaged()){var _3=(_1&&isc.endsWith(this.parentProperty,this.ID));this.$1217(_3?_1:this.getRoot(),true)}
return this.invokeSuper(isc.ResultTree,"setRoot",_1,_2)},isc.A.$1209=function isc_ResultTree__preRemove(_1,_2,_3){if(this.isPaged()){this.$1203(_1,true,_2,false);delete _1[this.$1215];this.$1217(_1,false)}
return this.invokeSuper(isc.ResultTree,"$1209",_1,_2,_3)},isc.A.unloadChildren=function isc_ResultTree_unloadChildren(_1,_2){if(this.isPaged()){this.$1217(_1,false)}
return this.invokeSuper(isc.ResultTree,"unloadChildren",_1,_2)},isc.A.$1217=function isc_ResultTree__cleanResultSetChildren(_1,_2){var _3=this.$122c;for(var i=(_3!=null?_3.length:0);i--;){var _5=_3[i],_6=_5.$97q;if(_2^(_6==_1||this.isDescendantOf(_6,_1))){_3.removeAt(i);if(this.isObserving(_5,"dataArrived")){this.ignore(_5,"dataArrived")}
delete _5.$97q;delete _5.$121z;delete _5.context.keepParentsOnFilter;_5.setCriteria=isc.ResultSet.getInstanceProperty("setCriteria");delete _5.$121p;delete _5.$121q;delete _5.$121t;delete _5.$121u;delete _5.$121n;delete _5.$121o;delete _5.$121w;delete _5.$121v}}},isc.A.changeDataVisibility=function(node,newState,callback){if(this.isPaged()){var parent=this.getParent(node),state=node[this.openProperty],changed=(!this.isLeaf(node)&&(state^newState)),closedToOpen=(changed&&!state&&newState),openToClosed=(changed&&!closedToOpen),visibleCached=node[this.$1215],parentVisibleCached=(parent!=null&&parent[this.$1215]);var ret=this.invokeSuper(isc.ResultTree,"changeDataVisibility",node,newState,callback);if(parent!=null&&!visibleCached&&((closedToOpen&&parentVisibleCached)||(openToClosed&&!parentVisibleCached)))
{this.$1203(parent,null,null,false)}
return ret}else{return this.invokeSuper(isc.ResultTree,"changeDataVisibility",node,newState,callback)}},isc.A.$1210=function isc_ResultTree__childrenDataAdd(_1,_2,_3,_4,_5,_6){var _7=isc.ResultSet.getLoadingMarker();var _8=(_2[this.canReturnOpenSubfoldersProperty]!=null?_2[this.canReturnOpenSubfoldersProperty]:this.canReturnOpenFolders),_9=(this.openDisplayNodeType==isc.Tree.FOLDERS_AND_LEAVES?1:0),_10=(!(_8||_9==0)&&!_6&&this.$1111(null,_2));if(_3==null||_3==_7){if(_10){this.$111z(_2,_4)}
return}
if(_4==1&&!isc.isAn.Array(_3)){_3=[_3]}
var _11=this.$122f(_2);if(_11===undefined){return}
if(_6){_2[this.$1200]=1+(_2[this.$1200]||0)}
var _12=(this.$122g=this.$122g||[]),_13=(this.$125t=this.$125t||[]),_14,_15=[],_16=0,_17,_18;if(_6){_14=[];_13.push(_14)}else{_14=_13.pop()}
var _19=(_6?0:_4-1),_20=(_6?1:-1);for(var i=_19;(_6?i<_4:i>=0);i+=_20){var _22=_3[i];if(_22!=null&&_22!=_7){if(_6){var _23={};_12.push(_23);var _24=this.$1208(_22);if(_24){_14.add(_24)}
this.$1205(_22,_2,false,_23)}else{var _23=_12.pop();this.$1206(_22,_2,_5,_23);_15.push(_23.grandChildren);_16+=_23.deltaParentLength;_17=_23.grandParent;_18=_23.origParentLength}}else if(_10){++_2[this.$111w]}}
if(!_6){var _25=(_2[this.canReturnOpenSubfoldersProperty]!=null),_26=!_8;for(var i=0;i<_4;++i){var _22=_3[i];if(_22!=null&&_22!=_7){var _27=this.$1202(_22,_15.pop(),false);if(_26&&this.isOpen(_22)&&_27!=null&&!_27.isEmpty())
{this.logWarn("Adding the open folder node '"+this.getPath(_22)+"' as a child of the parent node '"+this.getPath(_2)+"' is contradictory to the setting of the "+(_25?"'"+this.canReturnOpenSubfoldersProperty+"' property of the parent node.":"'canReturnOpenFolders' property of the tree."))}
if(_27!=null){if(isc.isA.ResultSet(_27)){if(!(_27.lengthIsKnown()&&_27.allMatchingRowsCached())){this.$1203(_22,false,_2,false)}}else if(!isc.isAn.Array(_27)){this.$137a(_27,_22)}else{this.$137b(_27,_22)}}}}
if((--_2[this.$1200])==0){delete _2[this.$1200];if(_17){_16+=(this.$111x(_2,_17)-_18);this.$111z(_17,_16)}}
this.$1203(_2,null,null,false);if(_14.length>0){for(var i=_14.length;i--;){var _24=_14.pop();this.$1207(_24)}}}},isc.A.$1211=function isc_ResultTree__childrenDataRemove(_1,_2,_3,_4,_5,_6){var _7=isc.ResultSet.getLoadingMarker();var _8=(_2[this.canReturnOpenSubfoldersProperty]!=null?_2[this.canReturnOpenSubfoldersProperty]:this.canReturnOpenFolders),_9=(this.openDisplayNodeType==isc.Tree.FOLDERS_AND_LEAVES?1:0),_10=(!(_8||_9==0)&&!_6&&this.$1111(null,_2));if(_3==null||_3==_7){if(_10){this.$111z(_2,-_4)}
return}
if(_4==1&&!isc.isAn.Array(_3)){_3=[_3]}
var _11=this.$122f(_2);if(_11===undefined){return}
if(_6){_2[this.$1200]=1+(_2[this.$1200]||0)}
var _12=(this.$122g=this.$122g||[]),_13,_14;var _15=(_6?0:_4-1),_16=(_6?1:-1);for(var i=_15;(_6?i<_4:i>=0);i+=_16){var _18=_3[i];if(_18!=null&&_18!=_7){if(_6){var _19={};_12.push(_19);this.$1209(_18,_2,_19)}else{var _19=_12.pop();this.$121a(_18,_2,_19);_13=_19.grandParent;_14=_19.origParentLength}}else if(_10){--_2[this.$111w]}}
if(!_6){if((--_2[this.$1200])==0){delete _2[this.$1200];if(_13){var _20=(this.$111x(_2,_13)-_14);this.$111z(_13,_20)}}
this.$1203(_2,null,null,false)}},isc.A.$1212=function isc_ResultTree__childrenDataSplice(_1,_2,_3,_4,_5,_6,_7,_8){var _9=isc.ResultSet.getLoadingMarker();var _10=(_2[this.canReturnOpenSubfoldersProperty]!=null?_2[this.canReturnOpenSubfoldersProperty]:this.canReturnOpenFolders),_11=(this.openDisplayNodeType==isc.Tree.FOLDERS_AND_LEAVES?1:0),_12=(!(_10||_11==0)&&!_8&&this.$1111(null,_2));var _13=!(_3==null||_3==_9),_14=!(_6==null||_6==_9);if(!(_13||_14)){if(_12){this.$111z(_2,_7-_4)}
return}else if(!_14){if(_12){this.$111z(_2,_7)}
this.$1211(_1,_2,_3,_4,_5,_8);return}else if(!_13){if(_12){this.$111z(_2,-_4)}
this.$1210(_1,_2,_6,_7,_5,_8);return}
var _15=this.$122f(_2);if(_15===undefined){return}
if(_8){_2[this.$1200]=1+(_2[this.$1200]||0)}
var _16=(this.$122g=this.$122g||[]),_17=(this.$125t=this.$125t||[]),_18,_19=[],_20=0,_21,_22;if(_8){_18=[];_17.push(_18)}else{_18=_17.pop()}
var _23=(_8?0:_7+_4-1),_24=(_8?1:-1);for(var i=_23;(_8?i<_7+_4:i>=0);i+=_24){var _26=(_4<=i),_27=(_26?_6[i-_4]:_3[i]);if(_27!=null&&_27!=_9){if(_8){var _28={};_16.push(_28);if(_26){var _29=this.$1208(_27);if(_29&&!(_13&&_3.contains(_29))){_18.add(_29)}
this.$1205(_27,_2,false,_28)}else{this.$1209(_27,_2,_28)}}else{var _28=_16.pop();if(_26){this.$1206(_27,_2,_5,_28);_19.push(_28.grandChildren);_20+=_28.deltaParentLength}else{this.$121a(_27,_2,_28)}
_21=_28.grandParent;_22=_28.origParentLength}}else if(_12){if(_26){++_2[this.$111w]}else{--_2[this.$111w]}}}
if(!_8){var _30=(_2[this.canReturnOpenSubfoldersProperty]!=null),_31=!_10;for(var i=0,j=0;i<_7;++i){var _33=_6[i];if(_33!=null&&_33!=_9){var _34=this.$1202(_33,_19.pop(),false);if(_31&&this.isOpen(_33)&&_34!=null&&!_34.isEmpty())
{this.logWarn("Adding the open folder node '"+this.getPath(_33)+"' as a child of the parent node '"+this.getPath(_2)+"' is contradictory to the setting of the "+(_30?"'"+this.canReturnOpenSubfoldersProperty+"' property of the parent node.":"'canReturnOpenFolders' property of the tree."))}
if(_34!=null){if(isc.isA.ResultSet(_34)){if(!(_34.lengthIsKnown()&&_34.allMatchingRowsCached())){this.$1203(_33,false,_2,false)}}else if(!isc.isAn.Array(_34)){this.$137a(_34,_33)}else{this.$137b(_34,_33)}}}}
if((--_2[this.$1200])==0){delete _2[this.$1200];if(_21){_20+=(this.$111x(_2,_21)-_22);this.$111z(_21,_20)}}
this.$1203(_2,null,null,false);if(_18.length>0){for(var i=_18.length;i--;){var _29=_18.pop();this.$1207(_29)}}}},isc.A.$1213=function isc_ResultTree__childrenDataMoved(_1,_2,_3,_4,_5,_6){var _7=isc.ResultSet.getLoadingMarker()},isc.A.$1214=function isc_ResultTree__childrenDataLengthIsKnownChanged(_1,_2,_3,_4){var _5=isc.ResultSet.getLoadingMarker();this.$1203(_2,null,null,false)},isc.A.setDefaultLoadState=function isc_ResultTree_setDefaultLoadState(_1){var _2=this.defaultLoadState;this.defaultLoadState=_1;if(this.isPaged()&&(_2!==_1||(_2==null)^(_1==null)))
{var _3=(_2===isc.Tree.LOADED||_2===isc.Tree.LOADED_PARTIAL_CHILDREN),_4=(_1===isc.Tree.LOADED||_1===isc.Tree.LOADED_PARTIAL_CHILDREN);if(_3^_4){var _5=this.getRoot(),_6=this.findAll("$27g",null);if(_5.$27g==null){if(_6==null){_6=[_5]}else{_6.add(_5)}}
if(_6!=null){for(var i=_6.length;i--;){var _8=_6[i],_9=this.getParent(_8);this.$1203(_8,null,_9,true)}}}}},isc.A.setCriteria=function isc_ResultTree_setCriteria(_1){var _2=this.criteria||{},_3=!this.haveCriteria(_2),_4=this.$868||{},_5=this.getDataSource();if(!_5.isAdvancedCriteria(_1)){_1=isc.clone(_1)}
this.criteria=_1;if(_5.isAdvancedCriteria(_1)&&!_5.isAdvancedCriteria(_2)){_2=isc.DataSource.convertCriteria(_2)}
if(!_5.isAdvancedCriteria(_1)&&_5.isAdvancedCriteria(_2)){_1=isc.DataSource.convertCriteria(_1);this.criteria=_1}
if(this.isLocal()&&this.serverFilterFields!=null&&this.serverFilterFields.length>0)
{this.$87d=isc.DataSource.copyCriteria(_1);this.$868=_5.splitCriteria(this.$87d,this.serverFilterFields)}else{delete this.$87d;delete this.$868}
var _6=this.compareCriteria(_1,_2);if(_6!=0){if(!this.isLocal()){this.logInfo("setCriteria: filter criteria changed, invalidating cache");this.invalidateCache();if(this.isPaged()&&this.$122c!=null){var _7=this.$122c.duplicate();for(var i=_7.length;i--;){var _9=_7[i];if(this.$122c.contains(_9)){var _10=_9.$97q,_11=this.$1218(_10,false),_12=this.$1219(_10,_11,false);_9.setCriteria(isc.DataSource.combineCriteria(_12,this.criteria))}}}}else{if(this.haveCriteria(this.$868)?(this.compareCriteria(this.$868,_4)!=0):this.haveCriteria(_4))
{this.logInfo("setCriteria: filter criteria changed, invalidating cache");this.invalidateCache()}else{var _13=this.$87b();if(_3){this.completeTree=this.duplicate(true,true)}
this.filterLocalData();this.$87c(_13);if(this.dataArrived!=null){isc.Func.replaceWithMethod(this,"dataArrived","parentNode");this.dataArrived(this.getRoot())}}}}},isc.A.filterLocalData=function isc_ResultTree_filterLocalData(_1){if(!_1)_1=this.getRoot();var _2=this.$87d||this.criteria,_3=this.completeTree;if(this.haveCriteria(_2)){var _4=(this.keepParentsOnFilter?isc.Tree.KEEP_PARENTS:isc.Tree.STRICT),_5=this.getDataSource();_3=this.applyFilter(this.completeTree,_2,_4,_5,this.context);this.logInfo("Local filter applied: "+_3.getNodeList().length+" of "+this.completeTree.getNodeList().length+" records matched filter:"+this.echoFull(_2))}else{this.logInfo("Local filter applied: all "+_3.getNodeList().length+" records matched filter: none");delete this.completeTree}
var _6=_3.getAllNodes();_6=_3.getCleanNodeData(_6,false,false,true);this.data=_6;this.setRoot(this.getCleanNodeData(this.getRoot(),false,false,true));this.$736(true)},isc.A.applyFilter=function isc_ResultTree_applyFilter(_1,_2,_3,_4,_5){return _1.getFilteredTree(_2,_3,_4,_5)},isc.A.compareCriteria=function isc_ResultTree_compareCriteria(_1,_2,_3,_4){return this.getDataSource().compareCriteria(_1,_2,(_3?_3:this.context),(_4?_4:"dropOnChange"))},isc.A.willFetchData=function isc_ResultTree_willFetchData(_1){var _2;var _3=this.criteria||{},_4=this.$868||{},_5=this.getDataSource();if(!_5.isAdvancedCriteria(_1)){_1=isc.DataSource.copyCriteria(_1)}
if(_5.isAdvancedCriteria(_1)&&!_5.isAdvancedCriteria(_3)){_3=isc.DataSource.convertCriteria(_3)}
if(!_5.isAdvancedCriteria(_1)&&_5.isAdvancedCriteria(_3)){_1=isc.DataSource.convertCriteria(_1)}
var _6=this.compareCriteria(_1,_3);if(_6==0)return false;if(!this.isLocal())return true;var _7={};if(this.isLocal()&&this.serverFilterFields!=null&&this.serverFilterFields.length>0)
{var _8=isc.DataSource.copyCriteria(_1);_7=_5.splitCriteria(_8,this.serverFilterFields)}
return(this.haveCriteria(_7)?(this.compareCriteria(_7,_4)!=0):this.haveCriteria(_4))},isc.A.getOpenState=function isc_ResultTree_getOpenState(){var _1=this.$87b();return isc.Comm.serialize(_1)},isc.A.$87b=function isc_ResultTree__getOpenState(_1){var _2=this.getRoot(),_3=[];this.$45q(this,_2,_3,_1);return _3},isc.A.setOpenState=function isc_ResultTree_setOpenState(_1){_1=isc.Canvas.evalViewState(_1,"openState",false,this)
if(!_1)return;this.$87c(_1)},isc.A.$87c=function isc_ResultTree__setOpenState(_1,_2){if(!_1)return;if(!_2){this.closeAll()}
this.openFolders(_1)},isc.A.$45q=function isc_ResultTree__addNodeToOpenState(_1,_2,_3,_4){if(!_1.isOpen(_2)||!_1.isLoaded(_2))return false;if(_4){_1.getName(_2);if(this.autoPreserveOpenState=="never"||(this.autoPreserveOpenState=="whenUnique"&&_2._autoAssignedName))
{return false}}
var _5=_1.getFolders(_2),_6=false;if(_5!=null){for(var i=0;i<_5.length;i++){_6=this.$45q(_1,_5[i],_3,_4)||_6}}
_3[_3.length]=_1.getPath(_2);return true});isc.B._maxIndex=isc.C+77;isc.ResultTree.getPrototype().toString=isc.$63a;isc.ResultTree.getPrototype().logMessage=isc.$63b;isc.ResultTree.registerStringMethods({dataArrived:"parentNode"});isc.A=isc.Canvas.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.buildRequest=function isc_Canvas_buildRequest(_1,_2,_3){if(!_1)_1={};if(_3)_1.afterFlowCallback=_3;if(_2=="filter"){_2="fetch";if(_1.textMatchStyle==null)_1.textMatchStyle="substring"}
if(this.textMatchStyle!=null)_1.textMatchStyle=this.textMatchStyle;_2=isc.DS.$372(_2);if(this.dataPageSize)_1.dataPageSize=this.dataPageSize;if(this.dataFetchMode)_1.dataFetchMode=this.dataFetchMode;var _4=_1.operationId||_1.operation;if(_4==null){switch(_2){case"fetch":_4=this.fetchOperation;break;case"add":_4=this.addOperation||this.saveOperation;break;case"update":_4=this.updateOperation||this.saveOperation;break;case"remove":_4=this.removeOperation||this.deleteOperation;break;case"validate":_4=this.validateOperation;break}}
_1.operation=_4||this.operation;if(_1.operationId==null){_1.operationId=_1.operation}
_1.componentId=this.ID;return isc.rpc.addDefaultOperation(_1,this.dataSource,_2)},isc.A.createResultTree=function isc_Canvas_createResultTree(_1,_2,_3,_4){if(_4==null)_4="fetch";this.$117s(_3,_2);if(_3==null)_3={};var _5=isc.addProperties({initialData:this.initialData},this.dataProperties,_3.dataProperties,this.treeProperties,_3.treeProperties);delete _5.ID;_5.criteria=_1;if(_3.operation!=null){_5.operation=_3.operation}
_5.context=_3;_5.dataSource=this.dataSource;_5.componentId=this.ID;_5.$31k=true;if(this.loadDataOnDemand!=null)_5.loadDataOnDemand=this.loadDataOnDemand;if(this.keepParentsOnFilter!=null)_5.keepParentsOnFilter=this.keepParentsOnFilter;if(this.dataFetchMode!=null)_5.fetchMode=this.dataFetchMode;if(this.serverFilterFields!=null)_5.serverFilterFields=this.serverFilterFields;if(this.treeRootValue!=null)_5.rootValue=this.treeRootValue;if(this.treeDataRelations)_5.treeRelations=this.treeDataRelations;if(this.multiDSTree!=null)_5.multiDSTree=this.multiDSTree;if(this.progressiveLoading===true||this.progressiveLoading===false){isc.addProperties(_5,{progressiveLoading:this.progressiveLoading})}
var _6=this.getDataSource().resultTreeClass||"ResultTree";return isc.ClassFactory.getClass(_6).create(_5)},isc.A.$117s=function isc_Canvas__setupResultTreeFetchCallback(_1,_2){if(_1==null)_1={};var _3=_1.internalClientContext={$53w:_2};if(_1.afterFlowCallback!=null){if(_3.$53w==null){_3.$53w=_1.afterFlowCallback}else if(_3.$53w!=_1.afterFlowCallback){this.logWarn("createResultTree called with request.afterFlowCallback:"+this.echo(_1.afterFlowCallback)+" as well as explicit callback parameter "+this.echo(_2)+". The request.afterFlowCallback will not be fired.")}}
_1.afterFlowCallback={target:this,methodName:"$53x"}},isc.A.$53x=function isc_Canvas__fireFetchCallback(_1,_2,_3){var _4=_3.internalClientContext;if(_4&&_4.$84b&&_4.$53w!=null){var _5=_4.$53w;this.fireCallback(_5,"dsResponse,data,dsRequest",arguments)}});isc.B._maxIndex=isc.C+4;if(isc.ValuesManager){isc.A=isc.ValuesManager.getPrototype();isc.A.buildRequest=isc.Canvas.getInstanceProperty("buildRequest")}
isc.ClassFactory.defineInterface("EditorActionMethods");isc.EditorActionMethods.addInterfaceMethods({save:function(_1){return this.saveData(_1)},editSelected:function(_1,_2){return this.editSelectedData(_1,_2)},editNew:function(_1,_2){return this.editNewRecord(_1,_2)},editNewRecord:function(_1){this.setSaveOperationType("add");this.$39m(_1)},editRecord:function(_1){var _2=(_1==null?"add":"update");this.setSaveOperationType(_2);this.$39m(_1)},$39m:function(_1){delete this.$50l;delete this.$39l;var _1=isc.addProperties({},_1);this.setData(_1);if(this.getFileItemForm!=null){var _2=this.getFileItemForm();if(_2){_2.editNewRecord();_2.clearErrors(true)}}},editSelectedData:function(_1){if(isc.isA.String(_1))_1=window[_1];if(!_1)return;var _2=_1.selection.getSelection();if(_2&&_2.length>0){var _3=[];for(var i=0;i<_2.length;i++){_3[i]=_1.getCleanRecordData(_2[i])}
this.editList(_3)}},editList:function(_1){this.setSaveOperationType("update");this.$50b(_1)},$50b:function(_1){this.$50l=0;this.$39l=_1;var _2=isc.addProperties({},_1[this.$50l]);this.editRecord(_2)},editNextRecord:function(){this.editOtherRecord(true)},editPrevRecord:function(){this.editOtherRecord(false)},editOtherRecord:function(_1){if(!this.$39l)return;if(this.isVisible()&&this.valuesHaveChanged()){this.$39n=_1;this.saveData({target:this,methodName:"editOtherReply"});return};if(_1&&this.$50l>=this.$39l.length-1){this.logWarn("Unable to edit next record - this is the last selected record");return false}
if(!_1&&this.$50l<=0){this.logWarn("Unable to edit previous record - this is the first selected record");return false}
this.$50l+=(_1?1:-1);var _2=isc.addProperties({},this.$39l[this.$50l]);this.setData(_2)},editOtherReply:function(_1,_2,_3){var _4=this.$39n;delete this.$39n;if(_1.status<0&&_1.errors){return this.setErrors(_1.errors,true)}
if(_1.status<0)return isc.RPCManager.$a0(_1,_3);this.rememberValues();this.$39l[this.$50l]=this.getValues();this.editOtherRecord(_4)
return true},validateData:function(_1,_2){if(!this.validate())return false;var _3=this.getValues();var _4=this.buildRequest(_2,"validate");_4.editor=this;if(_4.valuesAsParams){if(!_4.params)_4.params={};isc.addProperties(_4.params,_3)}
var _5=this.getDataSource();return _5.validateData(_3,_1?_1:{target:this,methodName:"saveEditorReply"},_4)},reset:function(){this.resetValues()},cancel:function(_1){var _2={actionURL:this.action,target:window,sendNoQueue:true,ignoreTimeout:true,useXmlHttpRequest:false,params:{},useSimpleHttp:true};_2.params[this.cancelParamName]=this.cancelParamValue;if(!_2.actionURL){this.logWarn("No actionURL defined for the cancel RPC - set 'action' on your form orprovide an actionURL in the requestProperties to cancel()");return}
isc.addProperties(_2,_1);isc.rpc.sendRequest(_2)},cancelEditing:function(){if(this.valuesManager!=null){this.valuesManager.cancelEditing()}
if(this.userTask!=null){this.userTask.cancelEditing()}},completeEditing:function(){if(this.valuesManager!=null){this.valuesManager.completeEditing()}
if(this.userTask!=null){this.userTask.completeEditing()}},submit:function(_1,_2){if(this.saveToServer==false)return;if(this.valuesManager!=null){return this.valuesManager.submit(_1,_2)}
if(this.submitValues!=null){return this.submitValues(this.getValues(),this)}
if(this.canSubmit)return this.submitForm();else return this.saveData(_1,_2)},saveOperationIsAdd:function(){if(this.saveOperationType)return this.saveOperationType=="add";if(this.dataSource){var _1=isc.DataSource.getDataSource(this.dataSource);return!_1.recordHasAllKeys(this.getValues())}
return false},saveData:function(_1,_2,_3){if(this.selectionComponent!=null){var _4=this.$71d;if(_4&&this.selectionComponent.setRecordValues){this.selectionComponent.setRecordValues(_4,this.getValues())}
return}
if(this.dataSource==null){this.logWarn("saveData() called on a non-databound "+this.Class+". This is not supported.  for information on databinding of components look at the documentation for the DataSource class.  If this was intended to be a native HTML form submission, set the canSubmit property to true on this form.");return}
if(isc.ValuesManager&&isc.isA.ValuesManager(this.valuesManager)&&this.dataPath){var _5=this.getFields();for(var i=0;i<_5.length;i++){var _7;if(_5[i].getTrimmedDataPath){_7=_5[i].getTrimmedDataPath()}
if(_7==null){_7=_5[i].dataPath||_5[i].name}
var _8=this.getValue(_7);this.valuesManager.$10y(_7,_8,this)}
return}
if(isc.Offline&&isc.Offline.isOffline()&&!this.dataSource.clientOnly){isc.warn(this.offlineSaveMessage);return}
if(_2==null&&isc.isAn.Object(_1)&&_1.methodName==null)
{_2=_1;_1=_2.afterFlowCallback}
if(_2==null)_2={};var _9=this.getSaveOperationType(_2);if(!_2.oldValues){_2.oldValues=_9!="add"?this.$10s:{}}
if(this.validationURL&&!_3){var _10={};isc.addProperties(_10,_2);isc.addProperties(_10,{actionURL:this.validationURL,valuesAsParams:true,sendNoQueue:true});_10.$40b=_2;_10.$40c=_1;this.performingServerValidation=true;this.validateData(this.getID()+".$40d(rpcRequest,rpcResponse,data)",_10);return}
var _11=this.getFileItemForm();if(_11&&_11.isDrawn()){this.updateFileItemForm();if(!this.validate())return false;return _11.saveData(_1,_2,_3)}
this.$40c=_1;_1=this.getID()+".$49z(dsRequest, dsResponse, data)";_2=this.buildRequest(_2,_9,_1);var _12=false;if(this.submitParamsOnly)_2.useSimpleHttp=true;if(isc.DynamicForm&&isc.isA.DynamicForm(this)){if(this.$66g){_2.actionURL=this.action;_2.target=this.target?this.target:window;_12=true}
if(this.method!=isc.DynamicForm.getInstanceProperty("method")){_2.httpMethod=this.method}}
if(this.disableValidation)this.clearErrors(true);else{if(!this.validate(null,null,null,null,true))return false}
if(this.rulesEngine){var _13=this.rulesEngine.processSubmit(this);if(_13==false)return}
var _14=this.getDataSource().$708(this.getValues());if((isc.DynamicForm&&isc.isA.DynamicForm(this)&&this.isMultipart())||this.canSubmit||_12)
{return this.submitEditorValues(_14,_2.operation,_2.callback,_2)}else{return this.saveEditorValues(_14,_2.operation,_2.callback,_2)}},updateFileItemForm:function(){var _1=this.getFileItemForm();if(_1==null)return;var _2=_1.getValues(),_3=this.getValues(),_4=_1.getItem(0).getFieldName();for(var _5 in _2){if(_5==_4)continue;_1.setValue(_5,null)}
for(var _5 in _3){if(_5==_4)continue;_1.setValue(_5,_3[_5])}
if(this.$66g)_1.setAction(this.action);_1.dataSource=this.dataSource;_1.fileItemFormParentForm=this},isNewRecord:function(){return this.getSaveOperationType()=="add"},setSaveOperationType:function(_1){this.saveOperationType=_1},getSaveOperationType:function(_1){var _2;if(!_1||!_1.operation){if(!_1)_1={};_2=_1.operationType?_1.operationType:this.saveOperationType;if(!_2&&this.dataSource!=null){var _3=isc.DataSource.getDataSource(this.dataSource).getPrimaryKeyFieldNames(),_4=this.getValues(),_5;if(this.valuesManager&&this.dataPath==null){_4=this.valuesManager.getValues()}
for(var i=0;i<_3.length;i++){var _7=_3[i],_8=_4[_3];if(_8==null){_2="add";break}
if(this.$10s[_7]!==_5&&this.$10s[_7]!=_8){_2="add"}
var _9=this.getItem(_7);if(_9&&_9.isVisible()&&(_9.shouldSaveValue&&_9.isEditable())){_2="add";break}}
if(_2==null){_2="update"}}}
return _2},$49z:function(_1,_2,_3){if(isc.isA.DynamicForm(this.fileItemFormParentForm)){this.fileItemFormParentForm.$49z(_1,_2,_3)}
this.$490=0;if(!this.suppressServerDataSync&&_2&&_2.status>=0&&_3!=null){if(isc.isAn.Array(_3))_3=_3[0];if(_1.originalData)_1.originalData=isc.shallowClone(_1.originalData);if(_1.data)_1.data=isc.shallowClone(_1.data);var _4=(_1.originalData||_1.data),_5=this.getValues();var _6=false,_7=true,_8;for(var i in _3){var _10=_4[i]===_8?this.$10s[i]:_4[i];var _11=this.getField(i);if(this.fieldValuesAreEqual(_11,_5[i],_10)){if(!this.fieldValuesAreEqual(_11,_10,_3[i])){_5[i]=_3[i];_6=true}}else{_7=false}}
if(_6){this.$10r(_5)}
for(var i=0;i<this.items.length;i++){var _12=this.items[i];if(isc.isAn.UploadItem(_12))continue;var _13=_12.dataPath||_12.name;if(_13==null)continue;var _14=isc.DynamicForm.$70o(_13,_12,_4,this,true);if(_14===_8||this.fieldValuesAreEqual(_12,_14,_12.getValue()))
{if(_6){var _15=isc.DynamicForm.$70o(_13,_12,_3,this,true);if(!this.fieldValuesAreEqual(_12,_14,_15)){_12.setValue(_15)}}}else{_7=false}}
if(_7){this.rememberValues()}
if(this.saveOperationType=="add")delete this.saveOperationType}
this.$491={request:_1,response:_2,data:_3};this.formSavedComplete();var _16=this.getItem("_transaction");if(_16&&isc.isA.HiddenItem(_16)){_16.clearValue()}},formSavedComplete:function(){var _1=this.getFields();for(var i=this.$490;i<_1.length;i++){this.$490++;var _3=_1[i];if(isc.isA.Function(_3.formSaved)&&_3.formSaved(this.$491.request,this.$491.response,this.$491.data)===false)return}
if(this.$40c){this.fireCallback(this.$40c,"dsResponse,data,dsRequest",[this.$491.response,this.$491.data,this.$491.request])}
delete this.$492;delete this.$40c},saveEditorValues:function(_1,_2,_3,_4){var _5;if(!_4)_4={};isc.addProperties(_4,{prompt:(_4.prompt||isc.RPCManager.saveDataPrompt),editor:this});_4.internalClientContext={$69t:_4.willHandleError};_4.willHandleError=true;if(_4.valuesAsParams){if(!_4.params)_4.params={};isc.addProperties(_4.params,_1)}
var _6=this.getDataSource();return _6.performDSOperation(_2.type,_1,_3?_3:{target:this,methodName:"saveEditorReply"},_4)},submitEditorValues:function(_1,_2,_3,_4){if(!_4)_4={};isc.addProperties(_4,{directSubmit:true,submitForm:this});return this.saveEditorValues(_1,_2,_3,_4)},saveEditorReply:function(_1,_2,_3){if(_3.internalClientContext){_3.willHandleError=_3.internalClientContext.$69t}
if(_1.status==isc.RPCResponse.STATUS_VALIDATION_ERROR&&_1.errors){if(isc.isA.FileItem(this.targetItem))
this.parentElement.setErrors(_1.errors,true);else this.setErrors(_1.errors,true);return this.suppressValidationErrorCallback?false:_3.willHandleError==true}
if(_1.status<0&&!_3.willHandleError)
return isc.RPCManager.$a0(_1,_3);return true},$40d:function(_1,_2,_3){if(_2.status==isc.RPCResponse.STATUS_SUCCESS){this.performingServerValidation=false;this.markForRedraw("serverValidationSuccess");this.saveData(_1.$40c,_1.$40b,true);_1.$40c=null;_1.$40b=null}else{this.setErrors(_2.errors,true)}}});if(isc.DynamicForm){isc.ClassFactory.mixInInterface("DynamicForm","EditorActionMethods");isc.A=isc.DynamicForm.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.selectionComponentSelectionChanged=function isc_DynamicForm_selectionComponentSelectionChanged(_1,_2,_3){if(!_3)_2={};this.$71d=_1.getPrimaryKeys(_2);this.clearErrors(true);if(this.valuesManager&&this.valuesManager.$707){this.valuesManager.$707(this)}else{this.editRecord(isc.addProperties({},_2))}},isc.A.selectionComponentCellSelectionChanged=function isc_DynamicForm_selectionComponentCellSelectionChanged(_1,_2){for(var i=0;i<_2.length;i++){var _4=_2[i],_5=this.selectionComponent.getCellRecord(_4[0],_4[1]);if(_1.cellIsSelected(_5))break;_5=null}
if(_5){this.$71d=_1.getPrimaryKeys(_5);if(this.valuesManager&&this.valuesManager.$707){this.valuesManager.$707(this)}else{this.editRecord(isc.addProperties({},_5))}}});isc.B._maxIndex=isc.C+2}
isc.$457={fetchData:function(_1,_2,_3){var _4=this.getDataSource();if(!_4){this.logWarn("Ignoring call to fetchData() on a DynamicForm with no valid dataSource");return}
if(this.$458==null)this.$458=[];this.$458.add(_2);_3=this.buildRequest(_3,"fetch");_4.fetchData(_1,{target:this,methodName:"fetchDataReply"},_3)},fetchDataReply:function(_1,_2,_3){if(_2==null||isc.isAn.emptyObject(_2)||(isc.isAn.Array(_2)&&_2.getLength()==0))
{if(_1.status==isc.RPCResponse.STATUS_OFFLINE){isc.say(this.offlineMessage)}}
var _4;if(isc.isAn.Array(_2)){_4=_2.get(0)}else{_4=_2}
if(_1.status==isc.RPCResponse.STATUS_SUCCESS||_1.status==isc.RPCResponse.STATUS_VALIDATION_ERROR)
{this.editRecord(_4)}
var _5=this.$458.pop();if(_5)this.fireCallback(_5,"dsResponse,data,dsRequest",[_1,_2,_3])},filterData:function(_1,_2,_3){var _4=this.getDataSource();if(!_4){this.logWarn("Ignoring call to filterData() on a DynamicForm with no valid dataSource");return}
if(this.$458==null)this.$458=[];this.$458.add(_2);_4.filterData(_1,{target:this,methodName:"fetchDataReply"},_3)}}
if(isc.DynamicForm)isc.DynamicForm.addMethods(isc.$457)
if(isc.ValuesManager)isc.ClassFactory.mixInInterface("ValuesManager","EditorActionMethods");if(isc.ValuesManager)isc.ValuesManager.addMethods(isc.$457)
if(isc.ValuesManager){isc.A=isc.ValuesManager.getPrototype();isc.A.fieldValuesAreEqual=isc.Canvas.getPrototype().fieldValuesAreEqual}
if(isc.TreeGrid){isc.A=isc.TreeGrid.getPrototype();isc.A.ignoreEmptyCriteria=true;isc.A=isc.TreeGrid.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.alwaysCreateNewResultTree=false;isc.B.push(isc.A.useExistingDataModel=function isc_TreeGrid_useExistingDataModel(_1,_2,_3){if(this.alwaysCreateNewResultTree)return false;return this.Super("useExistingDataModel",arguments)},isc.A.createDataModel=function isc_TreeGrid_createDataModel(_1,_2,_3){return this.createResultTree(_1,_3.afterFlowCallback,_3,null)},isc.A.filterWithCriteria=function isc_TreeGrid_filterWithCriteria(_1,_2,_3){var _4=false;if(this.useExistingDataModel(_1,_2,_3)&&isc.ResultTree&&isc.isA.ResultTree(this.data))
{this.$117s(_3);delete this.data.$84a}
return this.Super("filterWithCriteria",arguments)});isc.B._maxIndex=isc.C+3}
if(isc.DetailViewer){isc.A=isc.DetailViewer.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.viewSelectedData=function isc_DetailViewer_viewSelectedData(_1,_2,_3){if(isc.isA.String(_1))_1=window[_1];_3=_3||{};var _4=_1.selection.getSelection();if(_4&&_4.length>0){if(!_3.operation){this.setData(_4)}else{var _5=_3.operation,_6=this.getDataSource(),_7=_6.filterPrimaryKeyFields(_4);if(_3.prompt==null)
_3.prompt=isc.RPCManager.getViewRecordsPrompt;_3.viewer=this;return _6.performDSOperation(_5.type,_7,(_2?_2:{target:this,methodName:"viewSelectedDataReply"}),_3)}}
return false},isc.A.viewSelected=function isc_DetailViewer_viewSelected(_1,_2){return this.viewSelectedData(_1,_2)},isc.A.viewSelectedDataReply=function isc_DetailViewer_viewSelectedDataReply(_1,_2,_3){this.setData(_2)});isc.B._maxIndex=isc.C+3}
isc.defineClass("MockDataSource","DataSource");isc.A=isc.MockDataSource;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.parseTextWikiSymbols=function isc_c_MockDataSource_parseTextWikiSymbols(_1){var _2=false;var _3=false;var _4=false;var _5=[];for(var i=0;i<_1.length;i++){var c=_1.charAt(i);if(c=='\\'){if((i+1)<_1.length&&_1.charAt(i+1)=='r'){c="<br/>";i++}}else if(c=='['&&_1.indexOf("]",i+1)>0){c="<a href='#'>";_4=true}else if(c==']'){if(_4){c="</a>";_4=false}}else if(c=='*'){if(_3){_3=false;c="</b>"}else{_3=true;c="<b>"}}else if(c=='_'){if(_2){_2=false;c="</i>"}else{_2=true;c="<i>"}}
_5.push(c)}
return _5.join("")},isc.A.parseTableFields=function isc_c_MockDataSource_parseTableFields(_1,_2){var _3=_1.split("\n");var _4=_3[0].split(","),_5=[];var _6=_3[_3.length-1];if(_6.startsWith("[")&&_6.endsWith("]")&&_6!="[]"&&_6!="[ ]"&&_6!="[x]"){var _7=_6.substring(1,_6.length-1).split(",")}
for(var j=0;j<_4.length;j++){var _9=_4[j].trim().replace(/(\\r|\r)/g,"<br/>");var _10=isc.MockDataSource.convertTitleToName(_4[j],_2);var _11=_10;var _12=0;do{var _13=false;for(var i=0;i<_5.length;i++){if(_5[i].name==_11){_12++;_11=_10+_12;_13=true;break}}}while(_13);if(_9==""){_9="&nbsp;"}
var _15={name:_11,title:_9};if(_15.title.length<=3){_15.align="center"}
if(_7&&_7[j]){_15.width=_7[j];var _16=_15.width[_15.width.length-1];if(!isc.MockDataSource.$871(_16)){_15.width=_15.width.substring(0,_7[j].length-1);if(_16=='R'||_16=='r'){_15.align="right"}else if(_16=='L'||_16=='l'){_15.align="left"}else if(_16=='C'||_16=='c'){_15.align="center"}}
_15.width+="%"}
_5.add(_15)}
return _5},isc.A.convertTitleToName=function isc_c_MockDataSource_convertTitleToName(_1,_2){var _3=_1.trim().replace(/(\\r|\r)/g,"_").replace(/[^a-zA-Z0-9_ ]/g,"_");if(_3==""||(_3.charAt(0)>='0'&&_3.charAt(0)<='9')){_3='_'+_3}
var _4=_3.split(" ");_3="";if("underscores"==_2){for(var i=0;i<_4.length;i++){_3+=_4[i].toLowerCase();if(i!=(_4.length-1)){_3+="_"}}}else if("underscoresAllCaps"==_2){for(var i=0;i<_4.length;i++){_3+=_4[i].toUpperCase();if(i!=(_4.length-1)){_3+="_"}}}else if("underscoresKeepCase"==_2){for(var i=0;i<_4.length;i++){_3+=_4[i];if(i!=(_4.length-1)){_3+="_"}}}else{_3=_4[0].toLowerCase();for(var i=1;i<_4.length;i++){_3+=_4[i].substring(0,1).toUpperCase();_3+=_4[i].substring(1).toLowerCase()}}
return _3},isc.A.$871=function isc_c_MockDataSource__isDigit(_1){var _2=_1.charCodeAt(0);if((_2>47)&&(_2<58)){return true}
return false},isc.A.parseTable=function isc_c_MockDataSource_parseTable(_1){var _2=_1.split("\n");var _3=isc.MockDataSource.parseTableFields(_1);var _4=[];for(var i=1;i<_2.length;i++){if(_2[i].startsWith("[")&&_2[i].endsWith("]")&&_2[i]!="[]"&&_2[i]!="[ ]"&&_2[i]!="[x]"){continue}
var _6={};var _7=isc.MockDataSource.splitComma(_2[i]);for(var j=0;j<_3.length;j++){var _9=_7[j];if(_9==null){_9=""}
_9=_9.replace(/\r/g,"<br/>");_9=_9.replace("[]","<input type='checkbox' />");_9=_9.replace("[ ]","<input type='checkbox' />");_9=_9.replace("[x]","<input type='checkbox' checked='true' />");_6[_3[j].name]=isc.MockDataSource.parseTextWikiSymbols(_9)}
_4.add(_6)}
return _4},isc.A.splitComma=function isc_c_MockDataSource_splitComma(_1){var _2=_1.split(","),_3=[];for(var i=0,_5=_2.length,_6;i<_5;++i){_6="";while(_2[i].slice(-1)=="\\"){_6+=_2[i++].slice(0,-1)+","}
_3.push(_6+_2[i])}
return _3},isc.A.parseTree=function isc_c_MockDataSource_parseTree(_1){var _2=_1.split("\n");var _3=[];var _4;var _5=0;for(var i=0;i<_2.length;i++){var _7={};var _8=_2[i].split("");var _9=0;for(var j=0;j<_8.length;j++){if(_8[j]==" "||_8[j]=="."){_9+=1}else{break}}
var _11=_2[i].substr(_9);if(_11.startsWith("f")||_11.startsWith(">")||_11.startsWith("[x")||_11.startsWith("[+")){_7.isFolder=true}else if(_11.startsWith("F")||_11.startsWith("v")||_11.startsWith("[ ")||_11.startsWith("[-")){_7.isFolder=true;_7.isOpen=true}
var _12=isc.CheckboxItem.getInstanceProperty("checkedImage");var _13=isc.CheckboxItem.getInstanceProperty("uncheckedImage");if(_11.startsWith("f")){}else if(_11.startsWith(">")){}else if(_11.startsWith("[x")){_7.icon=_12}else if(_11.startsWith("[+")){}else if(_11.startsWith("F")){}else if(_11.startsWith("v")){}else if(_11.startsWith("[ ")){_7.icon=_13}else if(_11.startsWith("[-")){}else if(_11.startsWith("-")||_11.startsWith("_")){_7.isFolder=false}
if(_11.startsWith("["))_11=_11.substr(3);else if(_7.isFolder)_11=_11.substr(1);else if(_11.startsWith("-")||_11.startsWith("_"))_11=_11.substr(2);_7.name=isc.MockDataSource.parseTextWikiSymbols(_11);_7.children=[];if(_9==0){_3.add(_7)}else if(_9>_5){_4.children.add(_7);_7.parent=_4}else if(_9==_5){_4.parent.children.add(_7);_7.parent=_4.parent}else{var _14=_5;var _15=_4.parent;while(_14>_9){_15=_15.parent;_14-=1}
_15.children.add(_7);_7.parent=_15}
_4=_7;_5=_9}
return _3});isc.B._maxIndex=isc.C+7;isc.A=isc.MockDataSource.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.mockData="md";isc.A.clientOnly=true;isc.A.cacheData=[];isc.A.fields=[];isc.A.mockDataType="grid";isc.B.push(isc.A.init=function isc_MockDataSource_init(){if(this.mockDataType=="grid"){this.fields=isc.MockDataSource.parseTableFields(this.mockData);this.cacheData=isc.MockDataSource.parseTable(this.mockData)}else if(this.mockDataType=="tree"){this.fields=[{name:"name",type:"text"}];this.cacheData=isc.MockDataSource.parseTree(this.mockData)}
return this.Super("init",arguments)});isc.B._maxIndex=isc.C+1;isc.defineClass("DataView",isc.VLayout);isc.A=isc.DataView.getPrototype();isc.A.autoLoadServices=true;isc.A.autoBindDBCs=true;isc.A=isc.Canvas.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.dataViewInit=function isc_Canvas_dataViewInit(){var _1=this.operations;if(_1==null){this.bindToServices();return}
this.operations.setProperty("dataView",this);if(!this.autoLoadServices)return;var _2=_1.getProperty("location").getUniqueItems();this.logInfo("loading services: "+_2);this.$72q=_2.length;var _3=this;for(var i=0;i<_2.length;i++){isc.xml.loadWSDL(_2[i],function(_5){_3.$72q--;_3.logInfo("service loaded: "+_5+", remaining: "+_3.$72q);if(_3.$72q==0){_3.dataViewLoaded();_3.bindToServices()}},null,true)}},isc.A.addVM=function isc_Canvas_addVM(_1){this.addedVMs=this.addedVMs||[];this.addedVMs.add(_1)},isc.A.bindToServices=function isc_Canvas_bindToServices(){if(!this.autoBindDBCs)return;var _1=this.getAllDBCs(this);if(!_1)return;var _2=this.getAllVMs();if(this.logIsDebugEnabled("DataView")){this.logDebug("vms: "+this.echoAll(_2.getProperties(["dataSource","serviceNamespace","serviceName"]))+", all dbcs: "+this.echoAll(_1.getProperties(["dataSource","serviceNamespace","serviceName"])),"DataView")}
for(var i=0;i<_1.length;i++){var _4=_1[i];if(_4.dataSource){if(this.canEdit!=null&&_4.canEdit==null)_4.setCanEdit(this.canEdit);var _5=this.findVM(_4,_2);if(_5){if(this.logIsInfoEnabled("dataRegistration")){this.logWarn("dbc: "+_4+" binding to dataSource: "+_4.dataSource+" and vm: "+_5+", with fields: "+this.echoAll(_4.originalFields),"dataRegistration")}
if(_4.originalFields)_4.setDataSource(_4.dataSource,_4.originalFields);_5.addMember(_4)}else{this.logInfo("no VM for DBC: "+this.echoLeaf(_4),"DataView")}}
if(isc.isA.DynamicForm(_4)&&_4.items){_4.items.map("registerWithDataView",this)}}},isc.A.getAllVMs=function isc_Canvas_getAllVMs(){var _1=[];var _2=this.operations;if(_2){_1.addAll(_2.getProperty("inputVM"));_1.addAll(_2.getProperty("outputVM"))}
_1.addAll(this.addedVMs);_1.removeList([null]);return _1},isc.A.findVM=function isc_Canvas_findVM(_1,_2){if(!_2)_2=this.getAllVMs();var _3=(isc.isA.DataSource(_1)?_1:_1.getDataSource());for(var i=0;i<_2.length;i++){var _5=_2[i];if(_3==_5.getDataSource())return _5}},isc.A.getAllDBCs=function isc_Canvas_getAllDBCs(_1){var _2=_1.children;if(!_2)return null;var _3=[];for(var i=0;i<_2.length;i++){var _1=_2[i];if(isc.isA.DataBoundComponent(_1))_3.add(_1);_3.addAll(this.getAllDBCs(_1))}
return _3},isc.A.registerItem=function isc_Canvas_registerItem(_1){if(!_1.inputDataPath)return;var _2=isc.WebService.getByName(_1.inputServiceName,_1.inputServiceNamespace);if(!_2){this.logWarn("Member: "+_1+" could not find webService with name '"+_1.inputServiceName+"', namespace '"+_1.inputServiceNamespace+"'. Has it been loaded?");return}
var _3=_1.inputSchemaDataSource;var _4=this.itemRegistry=this.itemRegistry||{};var _5=_4[_3]=_4[_3]||[];_5.add(_1)},isc.A.populateListeners=function isc_Canvas_populateListeners(_1){var _2=_1.getDataSource().getID();var _3=this.itemRegistry;if(this.logIsInfoEnabled("DataView")){this.logInfo("message: "+_2+", registry: "+this.echo(_3)+", data: "+this.echo(_1.getValues()),"DataView")}
if(!_3)return;var _4=_3[_2];if(!_4)return;for(var i=0;i<_4.length;i++){var _6=_4[i];var _7=_1.getValue(_6.inputDataPath);this.logWarn("component: "+_6+" with inputDataPath: "+_6.inputDataPath+" got data: "+this.echo(_7));if(isc.isA.FormItem(_6)){_6.setValue(_7)}else{_6.setData(_7)}}},isc.A.dataViewLoaded=function isc_Canvas_dataViewLoaded(){});isc.B._maxIndex=isc.C+9;isc.DataView.registerStringMethods({dataViewLoaded:""});isc.defineClass("ServiceOperation").addClassMethods({getServiceOperation:function(_1,_2,_3){if(this.$725)return this.$725.find({operationName:_1,serviceName:_2,serviceNamespace:_3})}});isc.A=isc.ServiceOperation.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.init=function isc_ServiceOperation_init(){isc.ClassFactory.addGlobalID(this);this.Super("init",arguments);if(!isc.ServiceOperation.$725)isc.ServiceOperation.$725=[];isc.ServiceOperation.$725.add(this)},isc.A.invoke=function isc_ServiceOperation_invoke(){var _1=this.service=isc.WebService.getByName(this.serviceName,this.serviceNamespace);if(!_1){this.logWarn("Unable to find web service with serviceName '"+this.serviceName+"' and serviceNamespace '"+this.serviceNamespace+"'. Has it been loaded?");return}
var _2=this.inputVM.getValues();if(_1.useSimplifiedInputs(this.operationName)){_2=_2[isc.firstKey(_2)]}
var _3=this;_1.callOperation(this.operationName,_2,null,function(_2,_4,_5,_6){_3.invocationCallback(_2,_4,_5,_6)})},isc.A.invocationCallback=function isc_ServiceOperation_invocationCallback(_1,_2,_3,_4){if(!this.outputVM)return;if(this.service.getSoapStyle(this.operationName)=="document"){var _5=this.outputVM.getDataSource().getFieldNames();if(_5.length==1){var _6=_5.first(),_7={};_7[_6]=_1;_1=_7}}
this.outputVM.setValues(_1);if(this.logIsInfoEnabled()){this.logInfo("populating listeners on dataView: "+this.dataView+", vm has values: "+this.echo(this.outputVM.getValues()))}
if(this.dataView)this.dataView.populateListeners(this.outputVM)});isc.B._maxIndex=isc.C+3;(function(){var Offline={explicitOffline:null,isOffline:function(){if(this.explicitOffline!==null)return this.explicitOffline;var offline=window.navigator.onLine?false:true;return offline},goOffline:function(){this.explicitOffline=true},goOnline:function(){this.explicitOffline=false},useNativeOfflineDetection:function(){this.explicitOffline=null},KEY_PREFIX:"isc-",LOCAL_STORAGE:"localStorage",GLOBAL_STORAGE:"globalStorage",DATABASE_STORAGE:"databaseStorage",GEARS_DATABASE_API:"gears database api",USERDATA_PERSISTENCE:"userData persistence",GOOGLE_GEARS:"google gears",NO_MECHANISM:"no discovered mechanism",maxResponsesToPersist:100,userDataPersistenceInIE8:false,localStorageType:function(){if(window.localStorage){if(!this.userDataPersistenceInIE8||!isc.Browser.isIE){return this.LOCAL_STORAGE}}
if(window.globalStorage)return this.GLOBAL_STORAGE;if(window.openDatabase)return this.DATABASE_STORAGE;if(isc.Browser.isIE&&isc.Browser.version>=5){if(!UserDataPersistence.isInitialized)UserDataPersistence.init();return this.USERDATA_PERSISTENCE}
return this.NO_MECHANISM},getNativeStoredValuesCount:function(){switch(this.localStorageType()){case this.LOCAL_STORAGE:return localStorage.length;break;case this.USERDATA_PERSISTENCE:return UserDataPersistence.getNativeStoredValuesCount();break;case this.GLOBAL_STORAGE:case this.DATABASE_STORAGE:case this.GEARS_DATABASE_API:case this.GOOGLE_GEARS:break}},getSCStoredValuesCount:function(){var entries=this.get(this.countKey);entries=entries?entries*1:0;return entries},getKeyForNativeIndex:function(index){switch(this.localStorageType()){case this.LOCAL_STORAGE:return localStorage.key(index);case this.USERDATA_PERSISTENCE:return UserDataPersistence.getKeyForNativeIndex(index);break;case this.GLOBAL_STORAGE:case this.DATABASE_STORAGE:case this.GEARS_DATABASE_API:case this.GOOGLE_GEARS:break}},clearCache:function(){var count=this.getSCStoredValuesCount();while(this.getSCStoredValuesCount()>0){this.removeOldestEntry();if(this.getSCStoredValuesCount()==count)break;count=this.getSCStoredValuesCount()}},clearCacheNatively:function(){if(this.localStorageType()==this.USERDATA_PERSISTENCE){UserDataPersistence.clearCacheNatively();return}
var count=this.getNativeStoredValuesCount();this.logDebug("Removing all "+count+" entries from local storage");for(var i=0;i<count;i++){this.$786(this.getKeyForNativeIndex(0),false)}},logCacheContents:function(maxEntryLength){var contents=this.getCacheContents();this.logDebug("Dumping the contents of the browser's local storage:");for(var key in contents){var value=contents[key];if(value&&value.length>maxEntryLength){value=value.substring(0,maxEntryLength)}
this.logDebug(key+" ===> "+value)}},getCacheContents:function(){var index=0,contents={},count=this.getSCStoredValuesCount();while(index<count){var key=this.getPriorityQueueKey(index);if(key.indexOf(this.KEY_PREFIX)==0)key=key.substring(this.KEY_PREFIX.length);contents[key]=this.get(key);index++}
return contents},getCacheKeys:function(){var index=0,keys=[],count=this.getSCStoredValuesCount();while(index<count){var obj=this.getPriorityQueueKey(index);keys[keys.length]=key;index++}
return keys},removeOldestEntry:function(){var key=this.getAndRemoveOldestFromPriorityQueue();if(key==null)return;this.remove(key,true)},$787:function(maxEntryLength){var doc=this.userDataSpan.xmlDocument;var maxEntryLength=100;this.logDebug("Dumping the contents of raw userData storage:");for(var i=0;i<this.userDataSpan.xmlDocument.firstChild.attributes.length;i++){var key=this.userDataSpan.xmlDocument.firstChild.attributes[i].name;var value=this.userDataSpan.getAttribute(key);if(value&&value.length>maxEntryLength){value=value.substring(0,maxEntryLength)+"..."}
this.logDebug(key+" ===> "+value)}},put:function(key,value,recycleEntries){var ts=new Date().getTime();var oldValue=this.get(key);while(true){try{this.$788(key,value);break}catch(e){if(recycleEntries!==false&&this.isStorageException(e)){var entries=this.getStorageMetrics().storedEntries;if(entries>0){this.logDebug("Cache full; removing oldest entry and trying again");this.removeOldestEntry()}else{this.logDebug("Can't add this entry to browser-local storage, even though the cache is empty - the item must be larger than the browser's permitted cache space.");break}}else{throw e}}}
var end=new Date().getTime();var pqOK=false,metricsOK=false;while(!pqOK||!metricsOK){try{if(!pqOK)this.addToPriorityQueue(key);pqOK=true;if(!metricsOK)this.updateMetrics("put",key,value,oldValue);metricsOK=true}catch(e){if(this.isStorageException(e)){if(recycleEntries!==false){var entries=this.getStorageMetrics().storedEntries;if(entries>0){this.logDebug("Cache full when updating priority queue or metrics; removing oldest entry and trying again");this.removeOldestEntry();continue}}
this.logDebug("Cache full when updating priority queue or metrics; rolling back the entire update");this.$786(key);if(pqOK)this.removeFromPriorityQueue(key);this.rebuildMetrics();throw e}else{throw e}}}
this.logDebug("put() with key: "+key+"\nitem: "+this.echoLeaf(value)+": "+(end-ts)+"ms. Maintaining the priority queue and metrics took a further "+new Date().getTime()-end+"ms")},$788:function(key,value,applyPrefix){key=(applyPrefix===false?"":this.KEY_PREFIX)+key;switch(this.localStorageType()){case this.LOCAL_STORAGE:localStorage.setItem(key,value);break;case this.USERDATA_PERSISTENCE:UserDataPersistence.putValue(key,value);break;case this.GLOBAL_STORAGE:case this.DATABASE_STORAGE:case this.GEARS_DATABASE_API:case this.GOOGLE_GEARS:this.logError("Persistence method '"+this.localStorageType()+"' not yet supported");break}},isStorageException:function(e){switch(this.localStorageType()){case this.LOCAL_STORAGE:if(isc.Browser.isIE){return(e.number==-2147024882)}else if(isc.Browser.isMoz){return(e.name=="NS_ERROR_DOM_QUOTA_REACHED")}else{return(e.name=="QUOTA_EXCEEDED_ERR")}
break;case this.USERDATA_PERSISTENCE:return(e.number==-2147024857)}},get:function(key){var ts=new Date().getTime(),item;switch(this.localStorageType()){case this.LOCAL_STORAGE:item=localStorage.getItem(this.KEY_PREFIX+key);break;case this.USERDATA_PERSISTENCE:item=UserDataPersistence.getValue(this.KEY_PREFIX+key);break;case this.GLOBAL_STORAGE:case this.DATABASE_STORAGE:case this.GEARS_DATABASE_API:case this.GOOGLE_GEARS:break}
if(item)item=isc.clone(item);var end=new Date().getTime();this.logDebug("get() with key: "+key+"\nitem is: "+this.echoLeaf(item)+": "+(end-ts)+"ms");return item},remove:function(key,skipPriorityQueueUpdate){this.logDebug("Removing item for key: "+key);this.updateMetrics("remove",key);if(!skipPriorityQueueUpdate)this.removeFromPriorityQueue(key);this.$786(key)},$786:function(key,applyPrefix){key=(applyPrefix===false?"":this.KEY_PREFIX)+key;switch(this.localStorageType()){case this.LOCAL_STORAGE:localStorage.removeItem(key);break;case this.USERDATA_PERSISTENCE:UserDataPersistence.removeValue(key);break;case this.GLOBAL_STORAGE:case this.DATABASE_STORAGE:case this.GEARS_DATABASE_API:case this.GOOGLE_GEARS:break}},getUndecoratedKey:function(key){if(key&&key.startsWith(this.KEY_PREFIX)){key=key.substring(this.KEY_PREFIX.length)}
return key},priorityQueueKey:"pq",addToPriorityQueue:function(userKey){this.removeFromPriorityQueue(userKey);var key=this.toInternalKey(userKey);var pqText=this.get(this.priorityQueueKey);if(pqText){eval("var pq = "+pqText)}else{var pq=[]}
pq.push(key);this.$788(this.priorityQueueKey,this.serialize(pq))},removeFromPriorityQueue:function(userKey){var key=this.toInternalKey(userKey);var pqText=this.get(this.priorityQueueKey);if(pqText){eval("var pq = "+pqText)}else{var pq=[]}
for(var i=0;i<pq.length;i++){if(pq[i]==key){var leading=pq.slice(0,i);var trailing=pq.slice(i+1);pq=leading.concat(trailing);break}}
this.$788(this.priorityQueueKey,this.serialize(pq))},getAndRemoveOldestFromPriorityQueue:function(){var pqText=this.get(this.priorityQueueKey);if(pqText){eval("var pq = "+pqText)}else{var pq=[]}
var oldest=pq.shift();this.$788(this.priorityQueueKey,this.serialize(pq));return this.toUserKey(oldest)},getPriorityQueueEntry:function(index){var key=this.getPriorityQueueKey(index);var value=this.get(key);var entry={};entry[key]=value;return entry},getPriorityQueueValue:function(index){var key=this.getPriorityQueueKey(index);return this.get(key)},getPriorityQueueKey:function(index){var pqText=this.get(this.priorityQueueKey);if(pqText){eval("var pq = "+pqText)}else{var pq=[]}
return this.toUserKey(pq[index])},getPriorityQueue:function(){var pqText=this.get(this.priorityQueueKey);if(pqText){eval("var pq = "+pqText)}else{var pq=[]}
return pq},toInternalKey:function(userKey){if(this.localStorageType()==this.USERDATA_PERSISTENCE){return UserDataPersistence.getDataStoreKey(this.KEY_PREFIX+userKey)}
return userKey},toUserKey:function(internalKey){if(this.localStorageType()==this.USERDATA_PERSISTENCE){return this.getUndecoratedKey(UserDataPersistence.getUserKey(internalKey))}
return internalKey},countKey:"storedEntryCount__",keyKey:"storedKeyBytes__",valueKey:"storedValueBytes__",updateMetrics:function(mode,key,value,oldValue){var realKey=this.KEY_PREFIX+key,storedEntries=this.get(this.countKey)||0,storedKeyBytes=this.get(this.keyKey)||0,storedValueBytes=this.get(this.valueKey)||0;storedKeyBytes=1*storedKeyBytes;storedValueBytes=1*storedValueBytes;if(mode=="remove"){var item=this.get(key);storedEntries--;storedKeyBytes-=realKey.length;storedValueBytes-=item.length}else{if(oldValue==null){storedEntries++;storedKeyBytes+=realKey.length;storedValueBytes+=value.length}else{storedValueBytes+=value.length-oldValue.length}}
this.$788(this.countKey,storedEntries);this.$788(this.keyKey,storedKeyBytes);this.$788(this.valueKey,storedValueBytes)},rebuildMetrics:function(){var pq=this.getPriorityQueue(),entries=0,keyBytes=0,valueBytes=0;for(var i=0;i<pq.length;i++){var value=this.get(pq[i]);entries++;keyBytes+=pq[i].length;valueBytes+=value.length}
this.$788(this.countKey,entries);this.$788(this.keyKey,keyBytes);this.$788(this.valueKey,valueBytes)},getStorageMetrics:function(){var storedEntries=this.get(this.countKey)||0,storedKeyBytes=this.get(this.keyKey)||0,storedValueBytes=this.get(this.valueKey)||0,countLen=0,keyLen=0,valueLen=0;if(storedEntries)countLen=storedEntries.length;if(storedKeyBytes)keyLen=storedKeyBytes.length;if(storedValueBytes)valueLen=storedValueBytes.length;storedEntries=1*storedEntries;storedKeyBytes=1*storedKeyBytes;storedValueBytes=1*storedValueBytes;var pqText=this.get(this.priorityQueueKey);var overhead=this.countKey.length+this.keyKey.length+this.valueKey.length+countLen+keyLen+valueLen;var pqLength=pqText==null?0:pqText.length+(this.KEY_PREFIX+this.priorityQueueKey).length;return{storedEntries:storedEntries,storedKeyBytes:storedKeyBytes,storedValueBytes:storedValueBytes,metricsOverhead:overhead,priorityQueue:pqLength,total:storedKeyBytes+storedValueBytes+overhead+pqLength}},getTotalStorageUsed:function(){var metrics=this.getStorageMetrics();return metrics.storedKeyBytes+metrics.storedValueBytes+metrics.metricsOverhead+metrics.priorityQueue},storeResponse:function(dsRequest,dsResponse){var ts=new Date().getTime();dsResponse.offlineTimestamp=ts;var trimmedRequest=this.trimRequest(dsRequest),key=this.serialize(trimmedRequest),value=this.serialize(this.trimResponse(dsResponse));this.logDebug("storeResponse serializing: "+(new Date().getTime()-ts)+"ms");if(this.get(key)==null){if(this.getSCStoredValuesCount()>=this.maxResponsesToPersist){this.removeOldestEntry()}}
this.put(key,value)},trimRequest:function(dsRequest){var keyProps=["dataSource","operationType","operationId","textMatchStyle","values","sortBy","startRow","endRow","data"],trimmed={},undef;for(var i=0;i<keyProps.length;i++){if(dsRequest[keyProps[i]]!==undef){trimmed[keyProps[i]]=dsRequest[keyProps[i]]}}
return trimmed},trimResponse:function(dsResponse){var keyProps=["dataSource","startRow","endRow","totalRows","data","offlineTimestamp","status","errors","invalidateCache","cacheTimestamp"],trimmed={},undef;for(var i=0;i<keyProps.length;i++){if(dsResponse[keyProps[i]]!==undef){trimmed[keyProps[i]]=dsResponse[keyProps[i]]}}
return trimmed},getResponse:function(dsRequest){var trimmedRequest=this.trimRequest(dsRequest),key=this.serialize(trimmedRequest),value=this.get(key),returnValue;eval('returnValue = '+value);if(returnValue)returnValue.fromOfflineCache=true;return returnValue},serialize:function(obj){return isc.Comm.serialize(obj,false)},showStorageInfo:function(){if(!this.storageBrowser){if(isc.Offline.localStorageType()==isc.Offline.USERDATA_PERSISTENCE){isc.Timer.setTimeout(function(){isc.say("WARNING:  This browser uses an old storage mechanism that does not permit arbitrary key/value pair storage.  This means we have to store extra management data, with the upshot that the metrics reported for 'priority queue' and 'overhead' are indicative, but not accurate")},0)}
this.metricsDF=isc.DynamicForm.create({width:"100%",numCols:6,fields:[{name:"storedEntries",title:"No. entries",disabled:true},{name:"storedKeyBytes",title:"Used by keys",disabled:true},{name:"storedValueBytes",title:"Used by values",disabled:true},{name:"priorityQueue",title:"Used by Priority Queue",disabled:true},{name:"metricsOverhead",title:"Metrics overhead",disabled:true},{name:"total",title:"Total Bytes",disabled:true}]});this.storageLG=isc.ListGrid.create({width:"100%",height:"*",canRemoveRecords:true,removeData:function(record){isc.ask("Remove this entry?",function(value){if(value){isc.Offline.remove(record.key);isc.Offline.refreshStorageInfo()}})},rowDoubleClick:function(record){isc.Offline.createStorageEditorWindow();isc.Offline.storageEditorWindow.show();isc.Offline.storageEditor.editRecord(record)},fields:[{name:"key",width:"25%",title:"Key"},{name:"value",title:"Value"}]});this.storageBrowser=isc.Window.create({autoCenter:true,canDragResize:true,width:Math.floor(isc.Page.getWidth()*0.5),height:Math.floor(isc.Page.getHeight()*0.5),title:"Offline Storage",items:[this.metricsDF,this.storageLG,isc.HLayout.create({width:"100%",height:1,members:[isc.LayoutSpacer.create({width:"*"}),isc.Button.create({title:"Add Entry",click:function(){isc.Offline.createStorageEditorWindow();isc.Offline.storageEditorWindow.show();isc.Offline.storageEditor.editNewRecord()}})]})]})}
this.storageBrowser.show();this.refreshStorageInfo()},createStorageEditorWindow:function(){if(!isc.Offline.storageEditorWindow){isc.Offline.storageEditor=isc.DynamicForm.create({fields:[{name:"key",title:"Key",editorType:"TextAreaItem",width:400},{name:"value",title:"Value",editorType:"TextAreaItem",width:400},{name:"saveButton",type:"button",title:"Save",click:function(){var form=isc.Offline.storageEditor;if(form.saveOperationType=="update"&&form.getValue("key")!=form.getOldValue("key"))
{isc.ask("Key has changed - this will create a new entry. Do you want to retain the old entry as well? (if you answer 'No', it will be removed",function(value){if(value===false){isc.Offline.remove(form.getOldValue("key"))}
if(value!=null){isc.Offline.put(form.getValue("key"),form.getValue("value"));isc.Offline.storageEditorWindow.hide();isc.Offline.refreshStorageInfo()}})}else{isc.Offline.put(form.getValue("key"),form.getValue("value"));isc.Offline.storageEditorWindow.hide();isc.Offline.refreshStorageInfo()}}}]});isc.Offline.storageEditorWindow=isc.Window.create({bodyProperties:{margin:5},title:"Edit Offline Storage Entry",isModal:true,autoCenter:true,height:280,width:480,items:[isc.Offline.storageEditor]})}},refreshStorageInfo:function(){this.metricsDF.editRecord(isc.Offline.getStorageMetrics());var dataObj=isc.Offline.getCacheContents();var data=[];for(var key in dataObj){data.add({key:key,value:dataObj[key]})}
this.storageLG.setData(data)}};var UserDataPersistence={isInitialized:false,poolSize:10,keyIndexKey:"keyIndex",reverseKeyIndexKey:"reverseKeyIndex",init:function(){this.userDataSpan=[];for(var i=0;i<this.poolSize;i++){this.userDataSpan[i]=document.createElement('span');this.userDataSpan[i].ID='isc_userData_'+i;this.userDataSpan[i].style.behavior='url(#default#userdata)';document.body.appendChild(this.userDataSpan[i]);this.userDataSpan[i].load("isc_userData_"+i)}
this.keyIndexStore=document.createElement('span');this.keyIndexStore.ID='isc_userData_keyIndex';this.keyIndexStore.style.behavior='url(#default#userdata)';document.body.appendChild(this.keyIndexStore);this.keyIndexStore.load("isc_userData_keyIndex");this.keyIndex=this.getKeyIndexFromStore();this.reverseKeyIndex=this.getReverseKeyIndexFromStore();if(!this.keyIndex){this.keyIndex={};this.reverseKeyIndex={}}else if(!this.reverseKeyIndex)this.buildReverseKeyIndex();this.buildNextAttributeInfo();this.isInitialized=true},clearCacheNatively:function(){for(var i=0;i<this.poolSize;i++){var attrs=this.userDataSpan[i].xmlDocument.firstChild.attributes;while(attrs.length>0){this.userDataSpan[i].removeAttribute(attrs[0].name)}}
this.keyIndex={};this.reverseKeyIndex={};this.saveKeyIndex()},getNativeStoredValuesCount:function(){var count=0;for(var i=0;i<this.poolSize;i++){count+=this.userDataSpan[i].xmlDocument.firstChild.attributes.length}
return count},getKeyForNativeIndex:function(index){var iCounter=0;for(var i=0;i<this.poolSize;i++){if(iCounter+this.userDataSpan[i].xmlDocument.firstChild.attributes.length>index){var offsetIndex=index-iCounter;var attrName=this.userDataSpan[i].xmlDocument.firstChild.attributes[offsetIndex].name,attrNum=attrName.substring(1),dsKey=this.getKeyIndexValue(i,attrNum);return this.getUserKey(dsKey)}}},getKeyIndexValue:function(index,attrName){var attrNum=attrName.substring(1);if(index==0){return"00000".substring(attrNum.length)+attrNum}
return index*10000+(1*attrNum)},getUserKey:function(userKey){return this.reverseKeyIndex[userKey]},getDataStoreKey:function(key){return this.keyIndex[key]},$70p:function(dataStore,attr){return this.userDataSpan[dataStore].getAttribute(attr)},getValue:function(userKey){var key=this.getDataStoreKey(userKey),undef;if(key===undef)return null;var dataStore=(""+key).substring(0,1),attr="v"+((""+key).substring(1)*1);return this.$70p(dataStore,attr)},putValue:function(userKey,value){var key=this.getDataStoreKey(userKey);if(key){var dataStore=(""+key).substring(0,1),attr="v"+((""+key).substring(1)*1),savedValue=this.$70p(dataStore,attr)}else{var dataStore=this.getDataStoreForNewItem(),attr=this.getNextAttributeName(dataStore)}
this.userDataSpan[dataStore].setAttribute(attr,value);try{this.userDataSpan[dataStore].save("isc_userData_"+dataStore);this.addToKeyIndex(userKey,dataStore,attr)}catch(e){if(isc.Offline.isStorageException(e)){if(savedValue){this.userDataSpan[dataStore].setAttribute(attr,savedValue)}else{this.userDataSpan[dataStore].removeAttribute(attr);this.removeFromKeyIndex(userKey)}}
throw e}},removeValue:function(userKey){var key=this.getDataStoreKey(userKey),undef;if(key===undef){Offline.logDebug("userData: in removeValue, no value for key '"+userKey+"' was found");return}
var dataStore=(""+key).substring(0,1),attr="v"+((""+key).substring(1)*1);this.userDataSpan[dataStore].removeAttribute(attr);this.userDataSpan[dataStore].save("isc_userData_"+dataStore);this.removeFromKeyIndex(userKey);this.unusedAttributeNumbers[dataStore].push(attr.substring(1)*1)},getDataStoreForNewItem:function(){var undef;if(this.nextDataStoreToUse===undef){this.nextDataStoreToUse=Math.floor(Math.random()*this.poolSize)}
var rtnValue=this.nextDataStoreToUse++;if(this.nextDataStoreToUse>=this.poolSize)this.nextDataStoreToUse=0;return rtnValue},buildNextAttributeInfo:function(){this.nextAttributeNumber=[];this.unusedAttributeNumbers=[];for(var i=0;i<this.poolSize;i++){this.unusedAttributeNumbers[i]=[];var attrs=this.userDataSpan[i].xmlDocument.firstChild.attributes;var work=[];for(var j=0;j<attrs.length;j++){var num=attrs[j].name.substring(1)*1;if(!isNaN(num))work.add(attrs[j].name.substring(1)*1)}
if(work.sort)work.sort();else this.sort(work);var counter=0;for(j=0;j<work.length;j++){if(work[j]==counter){counter++;continue}
while(work[j]!=counter&&counter<=9999){this.unusedAttributeNumbers[i].push(counter++)}
counter++}
this.nextAttributeNumber[i]=counter}},sort:function(array){for(var i=0;i<array.length;i++){var swapped=false;for(var j=1;j<array.length-i;j++){if(array[j]<array[j-1]){var temp=array[j];array[j]=array[j-1];array[j-1]=temp;swapped=true}}
if(!swapped)break}},getNextAttributeName:function(dataStore){if(this.unusedAttributeNumbers[dataStore]&&this.unusedAttributeNumbers[dataStore].length>0)
{return"v"+this.unusedAttributeNumbers[dataStore].shift()}
if(this.nextAttributeNumber[dataStore]==null){this.nextAttributeNumber[dataStore]=1}
return"v"+this.nextAttributeNumber[dataStore]++},addToKeyIndex:function(userKey,dataStore,attr){var keyIndexValue=this.getKeyIndexValue(dataStore,attr);this.keyIndex[userKey]=keyIndexValue;this.reverseKeyIndex[keyIndexValue]=userKey;this.saveKeyIndex()},removeFromKeyIndex:function(userKey){var keyIndexValue=this.keyIndex[userKey];delete this.keyIndex[userKey];delete this.reverseKeyIndex[keyIndexValue];this.saveKeyIndex()},saveKeyIndex:function(){this.keyIndexStore.setAttribute(this.keyIndexKey,Offline.serialize(this.keyIndex));this.keyIndexStore.setAttribute(this.reverseKeyIndexKey,Offline.serialize(this.reverseKeyIndex));this.keyIndexStore.save("isc_userData_keyIndex")},buildReverseKeyIndex:function(){this.reverseKeyIndex={};for(var key in this.keyIndex){this.reverseKeyIndex[keyIndex[key]]=key}},getKeyIndexFromStore:function(){var kiText=this.keyIndexStore.getAttribute(this.keyIndexKey);if(kiText){eval("var ki = "+kiText)}else{var ki=null}
return ki},getReverseKeyIndexFromStore:function(){var kiText=this.keyIndexStore.getAttribute(this.reverseKeyIndexKey);if(kiText){eval("var ki = "+kiText)}else{var ki=null}
return ki}};if(window.isc){isc.defineClass("Offline").addClassProperties(Offline);isc.defineClass("UserDataPersistence").addClassProperties(UserDataPersistence)}else{isc.addProperties=function(objOne,objTwo){for(var propName in objTwo)objOne[propName]=objTwo[propName]}
isc.addProperties(isc.Offline,{serialize:function(object){return isc.OfflineJSONEncoder.encode(object)},logDebug:function(message){if(console)console.log(message)},logError:function(message){if(console){console.log(message)}else{alert(message)}},echoLeaf:function(obj){var output="",undefined;if(obj===undefined)return"undef";try{if(typeof obj=="Array"){output+="Array["+obj.length+"]"}else if(typeof obj=="Date"){output+="Date("+obj.toShortDate()+")"}else if(typeof obj=="Function"){output+=isc.Func.getName(obj,true)+"()"}else{switch(typeof obj){case"string":if(obj.length<=40){output+='"'+obj+'"';break}
output+='"'+obj.substring(0,40)+'..."['+obj.length+']';output=output.replaceAll("\n","\\n").replaceAll("\r","\\r");break;case"object":if(obj==null){output+="null";break}
if(obj.tagName!=null){output+="["+obj.tagName+"Element]";break}
var toString=""+obj;if(toString!=""&&toString!="[object Object]"&&toString!="[object]")
{output+=toString;break}
output+="Obj";break;default:output+=""+obj}}
return output}catch(e){var message="[Error in echoLeaf: "+e+"]";output+=message;return output}},echo:function(object){return this.serialize(object)}});isc.OfflineJSONEncoder={$zm:function(objRefs,object,path){objRefs.obj.add(object);objRefs.path.add(path)},$42b:function(object){var treeId=object["$42c"];if(treeId!=null){var theTree=window[treeId];if(theTree&&theTree.parentProperty&&object[theTree.parentProperty]){object=theTree.getCleanNodeData(object)}}
return object},$zl:function(objRefs,object){var rowNum=objRefs.obj.indexOf(object);if(rowNum==-1)return null;return objRefs.path[rowNum]},$zp:function(objPath,newIdentifier){if(isc.isA.Number(newIdentifier)){return objPath+"["+newIdentifier+"]"}else if(!isc.Comm.$zk.test(newIdentifier)){return objPath+'["'+newIdentifier+'"]'}else{return objPath+"."+newIdentifier}},encode:function(object){this.objRefs={obj:[],path:[]};var retVal=this.$eu(object,this.prettyPrint?"":null,null);this.objRefs=null;return retVal},dateFormat:"xmlSchema",encodeDate:function(date){if(this.dateFormat=="dateConstructor"){return"new Date("+date.getTime()+")"}else{return'"'+this.toSchemaDate(date)+'"'}},toSchemaDate:function(date){var dd=""+date.getDate(),mm=""+(date.getMonth()+1),yyyy=""+(date.getyear()+1900),hh=""+date.getHours(),mi=""+date.getMinutes(),ss=""+date.getSeconds();dd=dd.length==1?"0"+dd:dd;mm=mm.length==1?"0"+mm:mm;hh=hh.length==1?"0"+hh:ff;mi=mi.length==1?"0"+mi:mi;ss=ss.length==1?"0"+ss:ss;return yyyy+"-"+mm+"-"+dd+"T"+hh+":"+mi+":"+ss},strictQuoting:true,circularReferenceMode:"path",circularReferenceMarker:"$$BACKREF$$",prettyPrint:false,$eu:function(object,prefix,objPath){if(!objPath){if(object&&object.getID)objPath=object.getID();else objPath=""}
if(object==null)return null;if(this.isAString(object))return this.asSource(object);if(this.isAFunction(object))return null;if(this.isANumber(object)||this.isASpecialNumber(object))return object;if(this.isABoolean(object))return object;if(this.isADate(object))return this.encodeDate(object);if(this.isAnInstance(object))return null;var prevPath=this.$zl(this.objRefs,object);if(prevPath!=null&&objPath.contains(prevPath)){var nextChar=objPath.substring(prevPath.length,prevPath.length+1);if(nextChar=="."||nextChar=="["||nextChar=="]"){var mode=this.circularReferenceMode;if(mode=="marker"){return"'"+this.circularReferenceMarker+"'"}else if(mode=="path"){return"'"+this.circularReferenceMarker+":"+prevPath+"'"}else{return null}}}
if(this.isAClassObject(object))return null;if(object==window)return null;this.$zm(this.objRefs,object,objPath);if(this.isAFunction(object.$eu)){return object.$eu(prefix,this.objRefs,objPath)}
if(this.isAnArray(object)){return this.$zn(object,objPath,this.objRefs,prefix)}
var data;if(object.getSerializeableFields){data=object.getSerializeableFields([],[])}else{data=object}
return this.$zo(data,objPath,this.objRefs,prefix)},$zn:function(object,objPath,objRefs,prefix){var output="[";for(var i=0,len=object.length;i<len;i++){var value=object[i];if(prefix!=null)output+="\r"+prefix;var objPath=this.$zp(objPath,i);var serializedValue=this.$eu(value,(prefix!=null?prefix:null),objPath);output+=serializedValue+",";if(prefix!=null)output+=" "}
var commaChar=output.lastIndexOf(",");if(commaChar>-1)output=output.substring(0,commaChar);if(prefix!=null)output+="\r"+prefix;output+="]";return output},$zo:function(object,objPath,objRefs,prefix){var output="{",undef;object=this.$42b(object);try{for(var key in object)break}catch(e){return null}
for(var key in object){if(key==null)continue;if(key=="xmlHttpRequest")continue;if(key.substring(0,1)=="_"||key.substring(0,1)=="$")continue;var value=object[key];if(this.isAFunction(value))continue;if(this.isAnInstance(value))continue;var keyStr=key.toString();keyStr='"'+keyStr+'"';var objPath=this.$zp(objPath,key);var serializedValue;if(key!="__ref"&&key!="__module"){serializedValue=this.$eu(value,(prefix!=null?prefix:null),objPath)}
if(prefix!=null)output+="\r"+prefix;output+=keyStr+":"+serializedValue+",";if(prefix!=null)output.append(" ")}
var commaChar=output.lastIndexOf(",");if(commaChar>-1)output=output.substring(0,commaChar);if(prefix!=null)output+="\r"+prefix;output+="}";return output},isAString:function(object){if(object==null)return false;if(typeof object==this.$a7)return false;if(object.constructor&&object.constructor.$k!=null){return object.constructor.$k==4}
if(object.Class!=null&&object.Class==this.$73x)return true;return typeof object=="string"},isAnArray:function(object){if(object==null)return false;if(typeof object==this.$a7)return false;if(object.constructor&&object.constructor.$k!=null){return object.constructor.$k==2}
if(isc.Browser.isSafari)return""+object.splice=="(Internal function)";return""+object.constructor==""+Array},isAFunction:function(object){if(object==null)return false;if(isc.Browser.isIE&&typeof object==this.$a7)return true;var cons=object.constructor;if(cons&&cons.$k!=null){if(cons.$k!=1)return false;if(cons===Function)return true}
return isc.Browser.isIE?(isc.emptyString+object.constructor==Function.toString()):(typeof object==this.$a7)},isANumber:function(object){if(object==null)return false;if(object.constructor&&object.constructor.$k!=null){if(object.constructor.$k!=5)return false}else{if(typeof object!="number")return false}
return!isNaN(object)&&object!=Number.POSITIVE_INFINITY&&object!=Number.NEGATIVE_INFINITY},isASpecialNumber:function(object){if(object==null)return false;if(object.constructor&&object.constructor.$k!=null){if(object.constructor.$k!=5)return false}else{if(typeof object!="number")return false}
return(isNaN(object)||object==Number.POSITIVE_INFINITY||object==Number.NEGATIVE_INFINITY)},isABoolean:function(object){if(object==null)return false;if(object.constructor&&object.constructor.$k!=null){return object.constructor.$k==6}
return typeof object=="boolean"},isADate:function(object){if(object==null)return false;if(object.constructor&&object.constructor.$k!=null){return object.constructor.$k==3}
return(""+object.constructor)==(""+Date)&&object.getDate&&isc.isA.Number(object.getDate())},isAnXMLNode:function(object){if(object==null)return false;if(isc.Browser.isIE){return object.specified!=null&&object.parsed!=null&&object.nodeType!=null&&object.hasChildNodes!=null}
var doc=object.ownerDocument;if(doc==null)return false;return doc.contentType==this.$bm},isAnInstance:function(object){return(object!=null&&object.$76y!=null)},isAClassObject:function(object){return(object!=null&&object.$bp==true)},asSource:function(string,singleQuote){if(!this.isAString(string))string=""+string;var quoteRegex=singleQuote?String.$ez:String.$e0,outerQuote=singleQuote?"'":'"';return outerQuote+string.replace(/\\/g,"\\\\").replace(quoteRegex,'\\'+outerQuote).replace(/\t/g,"\\t").replace(/\r/g,"\\r").replace(/\n/g,"\\n")+outerQuote}}}})();isc.defineClass("RulesEngine");isc.A=isc.RulesEngine.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.init=function isc_RulesEngine_init(){this.Super("init",arguments);isc.ClassFactory.addGlobalID(this);if(this.members==null)this.members=[];else{for(var i=0;i<this.members.length;i++){var _2=this.members[i];if(isc.isA.String(_2)){this.members[i]=_2=window[_2]}
this.$889(_2,true)}}},isc.A.addMember=function isc_RulesEngine_addMember(_1){if(!this.members.contains(_1)){this.members.add(_1);this.$889(_1)}},isc.A.$889=function isc_RulesEngine__addMember(_1){if(_1.rulesEngine!=this){if(_1.rulesEngine!=null){_1.rulesEngine.removeMember(_1)}
_1.rulesEngine=this}},isc.A.processEditStart=function isc_RulesEngine_processEditStart(_1){this.$89b("editStart",_1);this.$89b("editStartAndChanged",_1)},isc.A.processEditorEnter=function isc_RulesEngine_processEditorEnter(_1,_2){this.$89c("editorEnter",_1,_2)},isc.A.processChanged=function isc_RulesEngine_processChanged(_1,_2){this.$89c("changed",_1,_2);this.$89c("editStartAndChanged",_1,_2)},isc.A.processEditorExit=function isc_RulesEngine_processEditorExit(_1,_2){this.$89c("editorExit",_1,_2)},isc.A.processSubmit=function isc_RulesEngine_processSubmit(_1){return this.$89b("submit",_1)},isc.A.$89b=function isc_RulesEngine__processComponentTriggerEvent(_1,_2){var _3=this.rulesData;if(!_3||_3.length==0)return;var _4=[];for(var i=0;i<_3.length;i++){if(_3[i].triggerEvent==_1){_4[_4.length]=_3[i]}}
if(_4.length>0)return this.processRules(_4);return null},isc.A.$89c=function isc_RulesEngine__processFieldTriggerEvent(_1,_2,_3){var _4=this.rulesData;if(!_4||_4.length==0)return;var _5=[];for(var i=0;i<_4.length;i++){if(_4[i].triggerEvent==_1){var _7=_4[i],_8=isc.Validator.getValidatorDefinition(_4[i].type),_9=null;if(!_8){this.logWarn("RulesEngine unable to process rule with invalid type: "+_4[i].type);continue}
if(_7.dependentFields!=null){_9=_7.dependentFields}else if(_8.getDependentFields!=null){_9=_8.getDependentFields(_7,_1)}
if(_9==null||isc.isAn.emptyArray(_9)){_9=(isc.isAn.Array(_7.fieldName)?_7.fieldName.duplicate():_7.fieldName)}
if(_9!=null&&!isc.isAn.Array(_9)){_9=_9.split(",")}
if(_7.applyWhen!=null){var _10=true;if(_7.dependsOnApplyWhenFields!=null){_10=_7.dependsOnApplyWhenFields}else if(_8.dependsOnApplyWhenFields!=null){_10=_7.dependsOnApplyWhenFields}
if(_10){var _11=isc.DataSource.getCriteriaFields(_7.applyWhen);if(_9==null){_9=_11}else{_9.addList(_11)}}}
if(_9){for(var j=0;j<_9.length;j++){var _13=_9[j].indexOf("."),_14=_9[j].substring(0,_13),_15=_9[j].substring(_13+1);if(_2.getDataSource()==isc.DataSource.get(_14)&&_15==_3.name)
{_5.add(_4[i]);break}}}}}
if(_5.length>0)return this.processRules(_5);return null},isc.A.getValues=function isc_RulesEngine_getValues(){var _1={};for(var i=0;i<this.members.length;i++){var _3=this.members[i];var _4=_3.getValues(),_5=_3.getDataSource(),_6=_5?_5.getID():null;if(_6!=null){_1[_6]=isc.addProperties(_1[_6]||{},_4)}else{_1.addProperties(_4)}}
return _1},isc.A.processRules=function isc_RulesEngine_processRules(_1){if(_1==null)return;var _2=this.getValues(),_3=null;if(!isc.isAn.Array(_1)){_1=[_1]}
for(var i=0;i<_1.length;i++){var _5=_1[i],_6=_5.fieldName,_7=_5.locator,_8=true;if(_5.applyWhen){var _9=_5.applyWhen;var _10=isc.DataSource.applyFilter([_2],_9);if(_10.length==0){_8=false}}
if(_7!=null){if(isc.isA.String(_7))_7=_7.split(",");for(var j=0;j<_7.length;j++){var _12=_7[j],_13=isc.AutoTest.isRelativeLocator(_12),_14;if(!_13){_14=isc.AutoTest.getObject(_7)}else{if(this.baseComponent==null){this.logWarn("RulesEngine has no specified baseComponent. Unable to process rule with specified relative locator:"+_12);continue}
_14=isc.AutoTest.resolveRelativeObjectLocator(this.baseComponent,_12)}
if(_14==null){this.logWarn("RulesEngine unable to resolve locator specified on rule. "+(this.baseComponent?"\nBase Component: "+this.baseComponent:"")+"\nLocator in question:\n"+_12);continue}
var _15,_16=null;if(isc.isA.FormItem(_14)){_15="FormItem";_16=_14.containerWidget}else if(_14.isSectionHeader){_15="Section";if(_14.getSectionHeader){_14=_14.getSectionHeader()}
_16=_14.parentElement}else if(isc.isA.Canvas(_14)){_15="Canvas"}
isc.Validator.performAction(_8?true:null,_14,_5,_2,_16,_15)}}
if(isc.isA.String(_6)){_6=_6.split(",")}else if(_6==null){_6=[]}
for(var j=0;j<_6.length;j++){var _17=_6[j],_18=_17.substring(0,_17.indexOf(".")),_19=_18?isc.DataSource.get(_18):null,_20=_17.substring(_18.length+1),_21=isc.DataSource.getPathValue(_2,_17),_22=this.getComponentInfo(_17),_23=_22?_22.component:null,_24=_22?_22.item:(_19?_19.getField(_20):null);;if(_23==null||_24==null){this.logWarn("RulesEngine contains rule definition with specified fieldName:"+_17+" - unable to find associated "+(_23==null?"member component":"field")+" for this rule.");continue}
var _25=null;if(_8){_25=(isc.Validator.processValidator(_24,_5,_21,null,_2)==true)}
isc.Validator.performAction(_25,_24,_5,_2,_23);if(_25==false){_3=false;var _26=isc.Validator.getErrorMessage(_5);_23.addFieldErrors(_24.name,_26,true);this.rememberRuleFieldError(_5,_23,_24,_26)}else{var _27=this.getRuleFieldError(_5,_23,_24);if(_27&&_23.clearFieldError){_23.clearFieldError(_24.name,_27,true);this.clearRememberedRuleFieldError(_5,_23,_24)}
if(_3==null)_3=true}}}
return _3},isc.A.rememberRuleFieldError=function isc_RulesEngine_rememberRuleFieldError(_1,_2,_3,_4){if(_1.$927==null){_1.$927={}}
var _5=_2.getID();if(_1.$927[_5]==null){_1.$927[_5]={}}
_1.$927[_5][_3.name]=_4},isc.A.getRuleFieldError=function isc_RulesEngine_getRuleFieldError(_1,_2,_3){var _4=_2.getID();if(_1.$927&&_1.$927[_4]&&_1.$927[_4][_3.name]!=null)
{return _1.$927[_4][_3.name]}},isc.A.clearRememberedRuleFieldError=function isc_RulesEngine_clearRememberedRuleFieldError(_1,_2,_3){var _4=_2.getID();if(_1.$927&&_1.$927[_4]&&_1.$927[_4][_3.name]!=null)
{delete _1.$927[_4][_3.name]}},isc.A.applyFieldValidators=function isc_RulesEngine_applyFieldValidators(_1,_2){var _3=this.rulesData;var _4=this.getValues();var _5=false;for(var i=0;i<_3.length;i++){var _7=_3[i],_8=_7.fieldName;if(_8==null)continue;var _9=this.getComponentInfo(_8);if(_9==null||_9.component!=_2)continue;var _10=_9.item,_11=isc.DataSource.getPathValue(_4,_8);if(!_10)return;this.clearRememberedRuleFieldError(_7,_2,_10);var _12=true;if(_7.applyWhen){var _13=_7.applyWhen;var _14=isc.DataSource.applyFilter([_4],_13);if(_14.length==0){_12=false}}
if(!_12)continue;var _15=isc.Validator.processValidator(_10,_7,_11,null,_4)==true;if(!_15){var _16=isc.Validator.getErrorMessage(_7);if(_1[_10.name]==null)_1[_10.name]=_16;else{if(!isc.isAn.Array(_1[_10.name])){_1[_10.name]=[_1[_10.name]]}
_1[_10.name].add(_16)}
this.rememberRuleFieldError(_7,_2,_10,_16);_5=true}}
return _5},isc.A.getComponentInfo=function isc_RulesEngine_getComponentInfo(_1){var _2,_3=_1.indexOf("."),_4;if(_3!=-1){_4=isc.DataSource.get(_1.substring(0,_3));_1=_1.substring(_3+1)}
for(var i=0;i<this.members.length;i++){if(this.members[i].getDataSource()==_4){_2=this.members[i].getItem(_1);if(_2!=null){return{component:this.members[i],item:_2}}}}},isc.A.removeMember=function isc_RulesEngine_removeMember(_1){if(this.members.contains(_1)){this.$89a(_1)}},isc.A.$89a=function isc_RulesEngine__removeMember(_1){this.members.remove(_1);_1.rulesEngine=null},isc.A.setRulesData=function isc_RulesEngine_setRulesData(_1){this.rulesData=_1});isc.B._maxIndex=isc.C+20;isc.A=isc.Canvas;isc.A.resizeThumbConstructor=isc.Canvas;isc.A.resizeThumbDefaults={width:8,height:8,overflow:"hidden",styleName:"resizeThumb",canDrag:true,canDragResize:true,getEventEdge:function(){return this.edge},autoDraw:false};isc.A.minimumDropMargin=2;isc.A.minimumDropTargetSize=10;isc.A=isc.Canvas;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.$40f=function isc_c_Canvas__makeResizeThumbs(){var _1=isc.Canvas.getInstanceProperty("edgeCursorMap"),_2={},_3=isc.ClassFactory.getClass(this.resizeThumbConstructor);for(var _4 in _1){_2[_4]=_3.create({ID:"isc_resizeThumb_"+_4,edge:_4},this.resizeThumbDefaults,this.resizeThumbProperties)}
isc.Canvas.$40g=_2},isc.A.showResizeThumbs=function isc_c_Canvas_showResizeThumbs(_1){if(!_1)return;if(!isc.Canvas.$40g)isc.Canvas.$40f();var _2=isc.Canvas.resizeThumbDefaults.width,_3=isc.Canvas.$40g;var _4=_1.getPageRect(),_5=_4[0],_6=_4[1],_7=_4[2],_8=_4[3],_9=Math.floor(_5+(_7/2)-(_2/2)),_10=Math.floor(_6+(_8/2)-(_2/2));_3.T.moveTo(_9,_6-_2);_3.B.moveTo(_9,_6+_8);_3.L.moveTo(_5-_2,_10);_3.R.moveTo(_5+_7,_10);_3.TL.moveTo(_5-_2,_6-_2);_3.TR.moveTo(_5+_7,_6-_2);_3.BL.moveTo(_5-_2,_6+_8);_3.BR.moveTo(_5+_7,_6+_8);for(var _11 in _3){var _12=_3[_11];_12.dragTarget=_1;_12.bringToFront();_12.show()}
this.$rl=_1},isc.A.hideResizeThumbs=function isc_c_Canvas_hideResizeThumbs(){var _1=this.$40g;for(var _2 in _1){_1[_2].hide()}
this.$rl=null});isc.B._maxIndex=isc.C+3;isc.A=isc.Canvas.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.editMaskDefaults={draw:function(){this.Super("draw",arguments);this.observe(this.masterElement,"setZIndex","observer.moveAbove(observed)");isc.Canvas.showResizeThumbs(this);this.observe(this.masterElement,"setPrompt","observer.setPrompt(observed.prompt)");return this},parentVisibilityChanged:function(){this.Super("parentVisibilityChanged",arguments);if(isc.Canvas.$rl==this)isc.Canvas.hideResizeThumbs()},click:function(){isc.Canvas.showResizeThumbs(this);return isc.EH.STOP_BUBBLING},bringToFront:function(){},mouseDown:function(){this.Super("mouseDown",arguments);return isc.EH.STOP_BUBBLING},mouseUp:function(){this.Super("mouseUp",arguments);return isc.EH.STOP_BUBBLING},doubleClick:function(){this.$jr.bringToFront();return this.click()},canDrag:true,canDragReposition:true,setDragTracker:function(){return isc.EH.STOP_BUBBLING},moved:function(){this.Super("moved",arguments);var _1=this.masterElement;if(_1){var _2=this.getOffsetLeft()-_1.getLeft();var _3=this.getOffsetTop()-_1.getTop();this.$ns=false;_1.moveTo(this.getOffsetLeft(),this.getOffsetTop());this.$ns=true}
if(isc.Canvas.$rl==this)isc.Canvas.showResizeThumbs(this)},resized:function(){this.Super("resized",arguments);this.updateDropMargin();if(this.$40h)return;this.$40h=true;var _1=this.masterElement;if(_1){this.$jo=false;_1.resizeTo(this.getWidth(),this.getHeight());this.$jo=true;_1.redrawIfDirty();this.resizeTo(_1.getVisibleWidth(),_1.getVisibleHeight())}
isc.Canvas.showResizeThumbs(this);this.$40h=false},showContextMenu:function(){if(!this.editContext)return;var _1=this.masterElement,_2;if(this.editContext.selectedComponents.length>0){_2=(_1.editMultiMenuItems||[]).concat(this.multiSelectionMenuItems)}else{_2=(_1.editMenuItems||[]).concat(this.standardMenuItems)}
if(!this.contextMenu)this.contextMenu=this.getMenuConstructor().create({});this.contextMenu.setData(_2);this.contextMenu.showContextMenu(_1);return false},standardMenuItems:[{title:"Remove",click:"target.destroy()"},{title:"Bring to Front",click:"target.bringToFront()"},{title:"Send to Back",click:"target.sendToBack()"}],multiSelectionMenuItems:[{title:"Remove Selected Items",click:function(_1){if(_1!=null&&isc.isAn.EditPane(_1.editContext)){_1.editContext.removeSelection(_1)}}}]};isc.A.useEditMask=true;isc.A.defaultDropMargin=10;isc.A.defaultDynamicFormDropMargin=5;isc.A.dropMargin=10;isc.B.push(isc.A.addedToEditContext=function isc_Canvas_addedToEditContext(_1,_2,_3,_4){},isc.A.updateEditNode=function isc_Canvas_updateEditNode(_1,_2){},isc.A.wrapChildNode=function isc_Canvas_wrapChildNode(_1,_2,_3,_4){if(_2.useEditMask==null&&this.autoMaskComponents){_2.useEditMask=true}
return _3},isc.A.setEditMode=function isc_Canvas_setEditMode(_1,_2,_3){if(_1==null)_1=true;if(this.editingOn==_1)return;this.editingOn=_1;if(this.editingOn){this.editContext=_2}else{this.hideEditMask()}
this.editNode=_3;if(this.editingOn){this.saveToOriginalValues(["click","doubleClick","willAcceptDrop","clearNoDropIndicator","setNoDropCursor","canAcceptDrop","canDropComponents","drop","dropMove","dropOver","setDataSource"]);this.setProperties({click:this.editModeClick,doubleClick:this.editModeDoubleClick,willAcceptDrop:this.editModeWillAcceptDrop,clearNoDropIndicator:this.editModeClearNoDropIndicator,setNoDropIndicator:this.editModeSetNoDropIndicator,canAcceptDrop:true,canDropComponents:true,drop:this.editModeDrop,dropMove:this.editModeDropMove,dropOver:this.editModeDropOver,baseSetDataSource:this.setDataSource,setDataSource:this.editModeSetDataSource});this.updateDropMargin()}else{this.restoreFromOriginalValues(["click","doubleClick","willAcceptDrop","clearNoDropIndicator","setNoDropCursor","canAcceptDrop","canDropComponents","drop","dropMove","dropOver","setDataSource"])}
this.markForRedraw()},isc.A.showEditMask=function isc_Canvas_showEditMask(){var _1=this.getID()+":<br>"+this.src;if(!this.$40i){var _2={};if(isc.SVG&&isc.isA.SVG(this)&&isc.Browser.isIE){isc.addProperties(_2,{backgroundColor:"gray",mouseOut:function(){this.$jr.Super("$mc")},contents:isc.Canvas.spacerHTML(10000,10000,_1)})}
var _3=isc.addProperties({},this.editMaskDefaults,this.editMaskProperties,{editContext:this.editContext||this.parentElement,keepInParentRect:this.keepInParentRect},_2);this.$40i=isc.EH.makeEventMask(this,_3)}
this.$40i.show();if(isc.SVG&&isc.isA.SVG(this)){if(isc.Browser.isIE)this.showNativeMask();else{this.setBackgroundColor("gray");this.setContents(_1)}}},isc.A.hideEditMask=function isc_Canvas_hideEditMask(){if(this.$40i)this.$40i.hide()},isc.A.editModeClick=function isc_Canvas_editModeClick(){if(this.editNode){isc.EditContext.selectCanvasOrFormItem(this,true);return isc.EH.STOP_BUBBLING}},isc.A.editModeDoubleClick=function isc_Canvas_editModeDoubleClick(){},isc.A.editModeWillAcceptDrop=function isc_Canvas_editModeWillAcceptDrop(_1){this.logInfo("editModeWillAcceptDrop for "+this.ID,"editModeDragTarget");var _2=this.ns.EH.dragTarget.getDragData(),_3,_4=true;if(_2==null||(isc.isAn.Array(_2))&&_2.length==0){_4=false;this.logInfo("dragData is null - using the dragTarget itself","editModeDragTarget");_2=this.ns.EH.dragTarget;if(isc.isA.FormItemProxyCanvas(_2)){this.logInfo("The dragTarget is a FormItemProxyCanvas for "+_2.formItem,"editModeDragTarget");_2=_2.formItem}
_3=_2._constructor||_2.Class}else{if(isc.isAn.Array(_2))_2=_2[0];_3=_2.type||_2.className}
this.logInfo("Using dragType "+_3,"editModeDragTarget");if(!this.canAdd(_3)){this.logInfo(this.ID+" does not accept drop of type "+_3,"editModeDragTarget");var _5=this.parentElement;while(_5&&!_5.editorRoot){if(_5.editingOn){var _6=_5.editModeWillAcceptDrop();if(!_6){this.logInfo("No ancestor accepts drop","editModeDragTarget");if(_1!=false){if(_4)isc.EditContext.hideDragHandle();isc.SelectionOutline.hideOutline();this.setNoDropIndicator()}
return false}
this.logInfo("An ancestor accepts drop","editModeDragTarget");return true}
_5=_5.parentElement}
this.logInfo(this.ID+" has no parentElement in editMode","editModeDragTarget");if(_1!=false){if(_4)isc.EditContext.hideDragHandle();isc.SelectionOutline.hideOutline();this.setNoDropIndicator()}
return false}
this.logInfo(this.ID+" is accepting the "+_3+" drop","editModeDragTarget");var _7=this.findEditNode(_3);if(_7){if(_1!=false){this.logInfo(this.ID+": selecting editNode object "+_7.ID);if(_4)isc.EditContext.hideDragHandle();isc.SelectionOutline.select(_7,false);_7.clearNoDropIndicator()}
return true}else{this.logInfo("findEditNode() returned null for "+this.ID,"editModeDragTarget")}
if(_1!=false){this.logInfo("In editModeWillAcceptDrop, '"+this.ID+"' was willing to accept a '"+_3+"' drop but we could not find an ancestor with an editNode")}},isc.A.findEditNode=function isc_Canvas_findEditNode(_1){if(!this.editNode){this.logInfo("Skipping '"+this+"' - has no editNode","editModeDragTarget");if(this.parentElement&&this.parentElement.findEditNode){return this.parentElement.findEditNode(_1)}else{return null}}
return this},isc.A.canAdd=function isc_Canvas_canAdd(_1){if(this.getObjectField(_1)==null){var _2=isc.ClassFactory.getClass(_1);if(_2){if(_2.isA("FormItem")){return(this.getObjectField("DynamicForm")!=null)}else if(_2.isA("DrawItem")){return(this.getObjectField("DrawPane")!=null)}}
return false}else{return true}},isc.A.editModeClearNoDropIndicator=function isc_Canvas_editModeClearNoDropIndicator(_1){if(this.$uh)delete this.$uh;this.$k2()},isc.A.editModeSetNoDropIndicator=function isc_Canvas_editModeSetNoDropIndicator(){this.$uh=true;this.$v8(this.noDropCursor)},isc.A.updateDropMargin=function isc_Canvas_updateDropMargin(){var _1=(isc.isA.DynamicForm(this)?this.defaultDynamicFormDropMargin:this.defaultDropMargin);if(_1*2>this.getVisibleHeight()-isc.Canvas.minimumDropTargetSize){_1=Math.round((this.getVisibleHeight()-isc.Canvas.minimumDropTargetSize)/2);if(_1<isc.Canvas.minimumDropMargin)_1=isc.Canvas.minimumDropMargin}
this.dropMargin=_1},isc.A.shouldPassDropThrough=function isc_Canvas_shouldPassDropThrough(){var _1=isc.EH.dragTarget,_2,_3;if(!_1.isA("Palette")){_3=_1.isA("FormItemProxyCanvas")?_1.formItem.Class:_1.Class}else{_2=_1.getDragData();if(isc.isAn.Array(_2))_2=_2[0];_3=_2.type||_2.className}
this.logInfo("Dropping a "+_3,"formItemDragDrop");if(!this.canAdd(_3)){this.logInfo("This canvas cannot accept a drop of a "+_3,"formItemDragDrop");return true}
if(this.parentElement&&!this.parentElement.editModeWillAcceptDrop(false)){this.logInfo(this.ID+" is not passing drop through - no ancestor is willing to accept the drop","editModeDragTarget");return false}
var x=isc.EH.getX(),y=isc.EH.getY(),_6=this.getPageRect(),_7={left:_6[0],top:_6[1],right:_6[0]+_6[2],bottom:_6[1]+_6[3]}
if(!this.orientation||this.orientation=="vertical"){if(x<_7.left+this.dropMargin||x>_7.right-this.dropMargin){this.logInfo("Close to right or left edge - passing drop through to parent for "+this.ID,"editModeDragTarget");return true}}
if(!this.orientation||this.orientation=="horizontal"){if(y<_7.top+this.dropMargin||y>_7.bottom-this.dropMargin){this.logInfo("Close to top or bottom edge - passing drop through to parent for "+this.ID,"editModeDragTarget");return true}}
this.logInfo(this.ID+" is not passing drop through","editModeDragTarget");return false},isc.A.editModeDrop=function isc_Canvas_editModeDrop(){if(this.shouldPassDropThrough()){return}
var _1=isc.EH.dragTarget,_2,_3;if(!_1.isA("Palette")){if(_1.isA("FormItemProxyCanvas")){_1=_1.formItem}
_3=_1._constructor||_1.Class}else{_2=_1.transferDragData();if(isc.isAn.Array(_2))_2=_2[0];_2.dropped=true;_3=_2.type||_2.className}
if(!_1.isA("Palette")){if(isc.EditContext.$70r)isc.EditContext.$70r.hide();if(_1==this)return;var _4=this.editContext.getEditNodeTree(),_5=_4.getParent(_1.editNode);this.editContext.removeNode(_1.editNode);var _6;if(_1.isA("FormItem")){if(_1.isA("CanvasItem")){_6=this.editContext.addNode(_1.canvas.editNode,this.editNode)}else{_6=this.editContext.addWithWrapper(_1.editNode,this.editNode)}}else if(_1.isA("DrawItem")){_6=this.editContext.addWithWrapper(_1.editNode,this.editNode,true)}else{_6=this.editContext.addNode(_1.editNode,this.editNode)}
if(_6&&_6.liveObject){isc.EditContext.selectCanvasOrFormItem(_6.liveObject,true)}}else{if(_2.loadData&&!_2.isLoaded){var _7=this;_2.loadData(_2,function(_8){_8=_8||_2;_8.isLoaded=true;_7.completeItemDrop(_8)
_8.dropped=_2.dropped});return isc.EH.STOP_BUBBLING}
this.completeItemDrop(_2);return isc.EH.STOP_BUBBLING}},isc.A.completeItemDrop=function isc_Canvas_completeItemDrop(_1){if(!this.editContext)return;var _2=_1.type||_1.className;var _3=isc.ClassFactory.getClass(_2);if(_3&&_3.isA("FormItem")){this.editContext.addWithWrapper(_1,this.editNode)}else if(_3&&_3.isA("DrawItem")){this.editContext.addWithWrapper(_1,this.editNode,true)}else{this.editContext.addNode(_1,this.editNode)}},isc.A.editModeDropMove=function isc_Canvas_editModeDropMove(){if(!this.editModeWillAcceptDrop())return false;if(!this.shouldPassDropThrough()){this.Super("dropMove",arguments);if(this.parentElement&&this.parentElement.hideDropLine){this.parentElement.hideDropLine();if(this.parentElement.isA("FormItem")){this.parentElement.form.hideDragLine()}else if(this.parentElement.isA("DrawItem")){this.parentElement.drawPane.hideDragLine()}}
return isc.EH.STOP_BUBBLING}},isc.A.editModeDropOver=function isc_Canvas_editModeDropOver(){if(!this.editModeWillAcceptDrop())return false;if(!this.shouldPassDropThrough()){this.Super("dropOver",arguments);if(this.parentElement&&this.parentElement.hideDropLine){this.parentElement.hideDropLine();if(this.parentElement.isA("FormItem")){this.parentElement.form.hideDragLine()}else if(this.parentElement.isA("DrawItem")){this.parentElement.drawPane.hideDragLine()}}
return isc.EH.STOP_BUBBLING}},isc.A.editModeSetDataSource=function isc_Canvas_editModeSetDataSource(_1,_2,_3){if(isc.$75u){this.baseSetDataSource(_1,_2);return}
if(_1==null)return;if(_1==this.dataSource&&!_3)return;var _2=this.getFields(),_4=[],_5=[];if(_2){var _6=this.editContext.getEditNodeTree(),_7=_6.findById(this.ID),_8=_6.getChildren(_7);for(var i=0;i<_2.length;i++){var _10=_2[i],_11=null;for(var j=0;j<_8.length;j++){var _13=_8[j];if(_10.name==_13.name){_11=_13;break}}
if(_11&&_11.autoGen&&!this.fieldEdited(this,_11)){_5.add(_11)}else if(_11){_4.add(_10)}}
this.setFields(_4);for(var i=0;i<_5.length;i++){this.editContext.removeNode(_5[i],true)}}
var _14,_2=_1.fields;if(_2&&isc.getKeys(_2).length==1&&_1.fieldIsComplexType(_2[isc.firstKey(_2)].name))
{_14=_1.getSchema(_2[isc.firstKey(_2)].type)}else{_14=_1}
var _15=_14.getFields();_2={};for(var _16 in _15){var _10=_15[_16];if(!this.shouldUseField(_10,_1))continue;_2[_16]=_15[_16];_2[_16]=isc.addProperties({},_15[_16])}
_4.addList(isc.getValues(_2));this.baseSetDataSource(_1,_4);for(var _16 in _2){var _10=_2[_16];var _17=this.getFieldEditNode(_10,_14);var _11=this.editContext.makeEditNode(_17);this.editContext.addNode(_11,this.editNode,null,null,true)}},isc.A.fieldEdited=function isc_Canvas_fieldEdited(_1,_2){var _3=false;if(_2.defaults){var _4=_2.defaults,_5=false;for(var _6 in _4){if(_6=="name"||_6=="title"||_6.startsWith("_"))continue;_5=true;break}
if(!_5){var _7=_4["name"],_8=_4["title"];if(_8){var _9;if(_1&&_1.dataSource){var _10=_1.dataSource;if(isc.isA.String(_10))_10=isc.DS.getDataSource(_10);if(_10){var _11=_10.getField(_7)
if(_11)_9=_11.title}}
if((!_9&&_8!=isc.DataSource.getAutoTitle(_7))||(_9&&_8!=_9))
{_3=true}}}else{_3=true}}
return _3},isc.A.getFieldEditNode=function isc_Canvas_getFieldEditNode(_1,_2){var _3=this.Class+"Field";var _4={type:_3,autoGen:true,defaults:{name:_1.name,title:_1.title||_2.getAutoTitle(_1.name)}}
return _4});isc.B._maxIndex=isc.C+22;isc.A=isc.Class.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.getSchema=function isc_Class_getSchema(){if(this.schemaName)return isc.DS.get(this.schemaName);var _1=this.getSGWTClassName();if(_1){var _2=isc.DS.get(_1);if(_2)return _2}
return isc.DS.get(this.Class)},isc.A.getSchemaField=function isc_Class_getSchemaField(_1){return this.getSchema().getField(_1)},isc.A.getObjectField=function isc_Class_getObjectField(_1){if(!isc.SGWTFactory.getFactory(_1)&&_1.contains("."))_1=_1.split(/\./).pop();var _2=this.$40j;if(isc.isA.Canvas(this)){var _3;if(_2&&_2[_1]!==_3){return _2[_1]}}
var _4=this.getSchema();if(!_4){this.logWarn("getObjectField: no schema exists for: "+this);return}
var _5=_4.getObjectField(_1);if(isc.isA.Canvas(this)){if(!_2)this.$40j=_2={};_2[_1]=_5}
return _5},isc.A.addChildObject=function isc_Class_addChildObject(_1,_2,_3,_4){return this.$40k("add",_1,_2,_3,_4)},isc.A.removeChildObject=function isc_Class_removeChildObject(_1,_2,_3){return this.$40k("remove",_1,_2,_3)},isc.A.$40k=function isc_Class__doVerbToChild(_1,_2,_3,_4,_5){var _6=_5||this.getObjectField(_2);var _7=this.getSchemaField(_6);if(!_7.multiple){var _8={};if(_1=="remove"){_8[_6]=null}else{_8[_6]=_3}
this.logInfo(_1+"ChildObject calling setProperties for fieldName '"+_6+"'","editing");this.setProperties(_8);return true}
var _9=this.getFieldMethod(_2,_6,_1);if(_9!=null){this.logInfo("calling "+_9+"("+this.echoLeaf(_3)+(_4!=null?","+_4+")":")"),"editing");this[_9](_3,_4);return true}
return false},isc.A.getChildObject=function isc_Class_getChildObject(_1,_2,_3){var _4=_3||this.getObjectField(_1),_5=this.getSchemaField(_4);if(_5==null){if(_3){this.logWarn("getChildObject: no such field '"+_3+"' in schema: "+this.getSchema())}else{this.logWarn("getChildObject: schema for Class '"+this.Class+"' does not have a field accepting type: "+_1)}
return null}
if(!_5.multiple)return this.getPropertyValue(_4);var _6;if(isc.isA.ListGrid(this)&&_4=="fields"){_6="getSpecifiedField"}else{_6=this.getFieldMethod(_1,_4,"get")}
if(_6==null)var _6=this.getFieldMethod(_1,_4,"get");if(_6&&this[_6]){this.logInfo("getChildObject calling: "+_6+"('"+_2+"')","editing");return this[_6](_2)}else{this.logInfo("getChildObject calling getArrayItem('"+_2+"',this."+_4+")","editing");return isc.Class.getArrayItem(_2,this[_4])}},isc.A.getFieldMethod=function isc_Class_getFieldMethod(_1,_2,_3){var _4=_3+_1;if(isc.isA.Function(this[_4])&&isc.Func.getArgs(this[_4]).length>0)
{return _4}
if(_2.endsWith("s")){_4=_3+this.$123a(_2.slice(0,-1));if(isc.isA.Function(this[_4])&&isc.Func.getArgs(this[_4]).length>0)
{return _4}}},isc.A.$123a=function isc_Class__withInitialCaps(_1){return _1.substring(0,1).toLocaleUpperCase()+_1.substring(1)},isc.A.getEditableProperties=function isc_Class_getEditableProperties(_1){var _2={},_3;if(!this.editModeOriginalValues)this.editModeOriginalValues={};if(!isc.isAn.Array(_1))_1=[_1];for(var i=0;i<_1.length;i++){var _5=isc.isAn.Object(_1[i])?_1[i].name:_1[i];var _6=null;if(this.editModeOriginalValues[_5]===_3){this.logInfo("Field "+_5+" - value ["+this[_5]+"] is coming from live values","editModeOriginalValues");_6=this[_5];if(isc.isA.Function(_6)&&_6.$dw){_6=this[_6.$c1]}}else{this.logInfo("Field "+_5+" - value ["+this.editModeOriginalValues[_5]+"] is coming from original values","editModeOriginalValues");_6=this.editModeOriginalValues[_5]}
_2[_5]=_6}
return _2},isc.A.setEditableProperties=function isc_Class_setEditableProperties(_1){var _2;if(!this.editModeOriginalValues)this.editModeOriginalValues={};for(var _3 in _1){if(this.editModeOriginalValues[_3]===_2){this.logInfo("Field "+_3+" - value is going to live values","editModeOriginalValues");this.setProperty(_3,_1[_3])}else{this.logInfo("Field "+_3+" - value is going to original values","editModeOriginalValues");this.editModeOriginalValues[_3]=_1[_3]}}
this.editablePropertiesUpdated()},isc.A.setChildEditableProperties=function isc_Class_setChildEditableProperties(_1,_2,_3,_4){isc.addProperties(_1,_2)},isc.A.saveToOriginalValues=function isc_Class_saveToOriginalValues(_1){var _2;if(!this.editModeOriginalValues)this.editModeOriginalValues={};for(var i=0;i<_1.length;i++){var _4=isc.isAn.Object(_1[i])?_1[i].name:_1[i];if(this[_4]===_2){this.editModeOriginalValues[_4]=null}else{if(this[_4]&&this[_4].$dw){var _5=isc.$ah+_4;this.editModeOriginalValues[_4]=this[_5]}else{this.editModeOriginalValues[_4]=this[_4]}}}},isc.A.restoreFromOriginalValues=function isc_Class_restoreFromOriginalValues(_1){var _2;if(!this.editModeOriginalValues)this.editModeOriginalValues={};var _3="Retrieving fields from original values:"
var _4={};for(var i=0;i<_1.length;i++){var _6=isc.isAn.Object(_1[i])?_1[i].name:_1[i];if(this.editModeOriginalValues[_6]!==_2){_4[_6]=this.editModeOriginalValues[_6];delete this.editModeOriginalValues[_6]}else{}}
this.setProperties(_4)},isc.A.propertyHasBeenEdited=function isc_Class_propertyHasBeenEdited(_1){var _2;if(!this.editModeOriginalValues)return false;if(isc.isAn.Object(_1))_1=_1.name;if(this.editModeOriginalValues[_1]!==_2){if(isc.isA.Function(this.editModeOriginalValues[_1]))return false;if(this.editModeOriginalValues[_1]!=this[_1])return true}
return false},isc.A.editablePropertiesUpdated=function isc_Class_editablePropertiesUpdated(){if(this.parentElement)this.parentElement.editablePropertiesUpdated()});isc.B._maxIndex=isc.C+16;isc.A=isc.DataSource;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.getSchema=function isc_c_DataSource_getSchema(_1){if(isc.isA.Class(_1))return _1.getSchema();return isc.DS.get(_1.schemaName||_1._constructor||_1.Class)},isc.A.getObjectField=function isc_c_DataSource_getObjectField(_1,_2){if(_1==null)return null;if(isc.isA.Class(_1))return _1.getObjectField(_2);var _3=isc.DS.getSchema(_1);if(_3)return _3.getObjectField(_2)},isc.A.getSchemaField=function isc_c_DataSource_getSchemaField(_1,_2){var _3=isc.DS.getSchema(_1);if(_3)return _3.getField(_2)},isc.A.addChildObject=function isc_c_DataSource_addChildObject(_1,_2,_3,_4,_5){return this.$40k(_1,"add",_2,_3,_4,_5)},isc.A.removeChildObject=function isc_c_DataSource_removeChildObject(_1,_2,_3,_4){return this.$40k(_1,"remove",_2,_3,_4)},isc.A.$40k=function isc_c_DataSource__doVerbToChild(_1,_2,_3,_4,_5,_6){var _7=_6||isc.DS.getObjectField(_1,_3);if(_7==null){this.logWarn("No field for child of type "+_3);return false}
this.logInfo(_2+" object "+this.echoLeaf(_4)+" in field: "+_7+" of parentObject: "+this.echoLeaf(_1),"editing");var _8=isc.DS.getSchemaField(_1,_7);if(isc.isA.Class(_1)){if(_1.$40k(_2,_3,_4,_5,_6))return true}
if(!_8.multiple){if(_2=="add")_1[_7]=_4;else if(_2=="remove"){if(_1[_7]!=null)delete _1[_7]}else{this.logWarn("unrecognized verb: "+_2);return false}
return true}
this.logInfo("using direct Array manipulation for field '"+_7+"'","editing");var _9=_1[_7];if(_2=="add"){if(_9!=null&&!isc.isAn.Array(_9)){this.logWarn("unexpected field value: "+this.echoLeaf(_9)+" in field '"+_7+"' when trying to add child: "+this.echoLeaf(_4));return false}
if(_9==null)_1[_7]=_9=[];if(_5!=null)_9.addAt(_4,_5);else _9.add(_4)}else if(_2=="remove"){if(!isc.isAn.Array(_9))return false;if(_5!=null)_9.removeAt(_4,_5);else _9.remove(_4)}else{this.logWarn("unrecognized verb: "+_2);return false}
return true},isc.A.getChildObject=function isc_c_DataSource_getChildObject(_1,_2,_3,_4){if(isc.isA.Class(_1))return _1.getChildObject(_2,_3,_4);var _5=isc.DS.getObjectField(_1,_2),_6=isc.DS.getSchemaField(_1,_5);var _7=_1[_5];if(!_6.multiple)return _7;if(!isc.isAn.Array(_7))return null;return isc.Class.getArrayItem(_3,_7)},isc.A.getAutoIdField=function isc_c_DataSource_getAutoIdField(_1){var _2=this.getNearestSchema(_1);return _2?_2.getAutoIdField():"ID"},isc.A.getAutoId=function isc_c_DataSource_getAutoId(_1){var _2=this.getAutoIdField(_1);return _2?_1[_2]:null});isc.B._maxIndex=isc.C+9;isc.A=isc.DataSource.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.getAutoIdField=function isc_DataSource_getAutoIdField(){return this.getInheritedProperty("autoIdField")||"ID"},isc.A.shouldCreateStandalone=function isc_DataSource_shouldCreateStandalone(){if(this.createStandalone!=null)return this.createStandalone;if(!this.superDS())return true;return this.superDS().shouldCreateStandalone()});isc.B._maxIndex=isc.C+2;var sharedEditModeFunctions={editModeClick:function(){if(isc.VisualBuilder&&isc.VisualBuilder.titleEditEvent=="click")this.editClick();return this.Super("editModeClick",arguments)},editModeDoubleClick:function(){if(isc.VisualBuilder&&isc.VisualBuilder.titleEditEvent=="doubleClick")this.editClick();return this.Super("editModeDoubleClick",arguments)}}
isc.Button.addProperties(sharedEditModeFunctions)
isc.ImgButton.addMethods(sharedEditModeFunctions)
isc.StretchImgButton.addMethods(sharedEditModeFunctions)
isc.SectionHeader.addMethods(sharedEditModeFunctions)
isc.ImgSectionHeader.addMethods(sharedEditModeFunctions)
isc.A=isc.ImgSectionHeader.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.setEditMode=function isc_ImgSectionHeader_setEditMode(_1,_2,_3){if(_1==null)_1=true;if(_1==this.editingOn)return;this.invokeSuper(isc.TabSet,"setEditMode",_1,_2,_3);if(this.editingOn){var _4=this;isc.Timer.setTimeout(function(){_4.saveToOriginalValues(["background"]);_4.background.setProperties({iconClick:_4.editModeIconClick})},0)}else{this.restoreFromOriginalValues(["background"])}},isc.A.editModeIconClick=function isc_ImgSectionHeader_editModeIconClick(){var _1=this.creator;if(_1){var _2=_1.layout;if(_2.sectionIsExpanded(_1))_2.collapseSection(_1);else _2.expandSection(_1);var _3=_1.editContext;if(_3){_3.setNodeProperties(_1.editNode,{"expanded":_2.sectionIsExpanded(_1)})}}
return this.Super("editModeClick",arguments)},isc.A.editClick=function isc_ImgSectionHeader_editClick(){var _1=this.getPageLeft()+this.getLeftBorderSize()+this.getLeftMargin()+1
-this.getScrollLeft(),_2=this.getVisibleWidth()-this.getLeftBorderSize()-this.getLeftMargin()
-this.getRightBorderSize()-this.getRightMargin()-1;isc.Timer.setTimeout({target:isc.EditContext,methodName:"manageTitleEditor",args:[this,_1,_2]},100)});isc.B._maxIndex=isc.C+3;isc.A=isc.StatefulCanvas.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.editClick=function isc_StatefulCanvas_editClick(){var _1,_2;if(isc.isA.Button(this)){_1=this.getPageLeft()+this.getLeftBorderSize()+this.getLeftMargin()+1
-this.getScrollLeft();_2=this.getVisibleWidth()-this.getLeftBorderSize()-this.getLeftMargin()
-this.getRightBorderSize()-this.getRightMargin()-1}else if(isc.isA.StretchImgButton(this)){_1=this.getPageLeft()+this.capSize;_2=this.getVisibleWidth()-this.capSize*2}else{isc.logWarn("Ended up in editClick with a StatefulCanvas of type '"+this.getClass()+"'.  This is neither a Button nor a StretchImgButton - editor will work, but will hide the entire component it is editing");_1=this.getPageLeft();_2=this.getVisibleWidth()}
isc.Timer.setTimeout({target:isc.EditContext,methodName:"manageTitleEditor",args:[this,_1,_2]},0)},isc.A.repositionTitleEditor=function isc_StatefulCanvas_repositionTitleEditor(){var _1=this.getPageLeft()+this.capSize,_2=this.getVisibleWidth()-this.capSize*2;isc.EditContext.positionTitleEditor(this,_1,_2)});isc.B._maxIndex=isc.C+2;if(isc.TabSet){isc.A=isc.TabSet;isc.A.addTabEditorHint="Enter tab titles (comma separated)";isc.A=isc.TabSet.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.defaultPaneDefaults={_constructor:"VLayout"};isc.B.push(isc.A.setEditMode=function isc_TabSet_setEditMode(_1,_2,_3){if(_1==null)_1=true;if(_1==this.editingOn)return;this.invokeSuper(isc.TabSet,"setEditMode",_1,_2,_3);if(this.editingOn){for(var i=0;i<this.tabs.length;i++){var _5=this.tabs[i];this.saveOriginalValues(_5);this.setCanCloseTab(_5,true)}
this.closeClick=function(_5){this.editContext.removeNode(_5.editNode);var _6=this;isc.Timer.setTimeout(function(){_6.manageAddIcon()},200)}}else{for(var i=0;i<this.tabs.length;i++){var _5=this.tabs[i];this.restoreOriginalValues(_5);var _7=this.getTab(_5);this.setCanCloseTab(_5,_7.editNode.defaults.canClose)}}
this.tabBar.setEditMode(_1,_2,null);this.paneContainer.setEditMode(_1,_2,null);this.manageAddIcon()},isc.A.saveOriginalValues=function isc_TabSet_saveOriginalValues(_1){var _2=this.getTab(_1);if(_2){_2.saveToOriginalValues(["closeClick","canClose","icon","iconSize","iconOrientation","iconAlign","disabled"])}},isc.A.restoreOriginalValues=function isc_TabSet_restoreOriginalValues(_1){var _2=this.getTab(_1);if(_2){_2.restoreFromOriginalValues(["closeClick","canClose","icon","iconSize","iconOrientation","iconAlign","disabled"])}},isc.A.showAddTabEditor=function isc_TabSet_showAddTabEditor(){var _1=this.tabBarPosition,_2=this.tabBarAlign,_3,_4,_5,_6,_7=this.tabBar;if(_1==isc.Canvas.TOP||_1==isc.Canvas.BOTTOM){_3=this.tabBar.getPageTop();_5=this.tabBar.getHeight();if(_2==isc.Canvas.LEFT){_4=this.addIcon.getPageLeft();_6=this.tabBar.getVisibleWidth()-this.addIcon.left;if(_6<150)_6=150}else{_6=this.tabBar.getVisibleWidth();_6=_6-(_6-(this.addIcon.left+this.addIcon.width));if(_6<150)_6=150;_4=this.addIcon.getPageLeft()+this.addIcon.width-_6}}else{_4=this.tabBar.getPageLeft();_6=150;_3=this.addIcon.getPageTop();_5=20}
this.manageAddTabEditor(_4,_6,_3,_5)},isc.A.manageAddIcon=function isc_TabSet_manageAddIcon(){if(this.editingOn){if(this.addIcon==null){this.addIcon=isc.Img.create({autoDraw:false,width:16,height:16,cursor:"hand",tabSet:this,src:"[SKIN]/actions/add.png",click:function(){this.tabSet.showAddTabEditor()}});this.tabBar.addChild(this.addIcon)}
var _1=this.tabs.length==0?null:this.getTab(this.tabs[this.tabs.length-1]);var _2=this.tabBarPosition,_3=this.tabBarAlign,_4,_5;if(_1==null){if(_2==isc.Canvas.TOP||_2==isc.Canvas.BOTTOM){if(_3==isc.Canvas.LEFT){_4=this.tabBar.left+10;_5=this.tabBar.top+(this.tabBar.height/2)-(8)}else{_4=this.tabBar.left+this.tabBar.width-10-(16);_5=this.tabBar.top+(this.tabBar.height/2)-(8)}}else{if(_3==isc.Canvas.TOP){_4=this.tabBar.left+(this.tabBar.width/2)-(8);_5=this.tabBar.top+10}else{_4=this.tabBar.left+(this.tabBar.width/2)-(8);_5=this.tabBar.top+this.tabBar.height-10-(16)}}}else{if(_2==isc.Canvas.TOP||_2==isc.Canvas.BOTTOM){if(_3==isc.Canvas.LEFT){_4=_1.left+_1.width+10;_5=_1.top+(_1.height/2)-(8)}else{_4=_1.left-10-(16);_5=_1.top+(_1.height/2)-(8)}}else{if(_3==isc.Canvas.TOP){_4=_1.left+(this.width/2)-(8);_5=_1.top+(_1.height)+10}else{_4=_1.left+(this.width/2)-(8);_5=_1.top+(_1.height/2)-(8)}}}
this.addIcon.setTop(_5);this.addIcon.setLeft(_4);this.addIcon.show()}else{if(this.addIcon&&this.addIcon.hide)this.addIcon.hide()}},isc.A.manageAddTabEditor=function isc_TabSet_manageAddTabEditor(_1,_2,_3,_4){if(!isc.isA.DynamicForm(isc.TabSet.addTabEditor)){isc.TabSet.addTabEditor=isc.DynamicForm.create({autoDraw:false,margin:0,padding:0,cellPadding:0,fields:[{name:"addTabString",type:"text",hint:isc.TabSet.addTabEditorHint,showHintInField:true,showTitle:false,keyPress:function(_6,_7,_8){if(_8=="Escape"){_7.discardUpdate=true;_7.hide();return}
if(_8=="Enter")_6.blurItem()},blur:function(_7,_6){if(!_7.discardUpdate){_7.targetComponent.editModeAddTabs(_6.getValue())}
_7.hide()}}]})}
var _5=isc.TabSet.addTabEditor;_5.addProperties({targetComponent:this});_5.discardUpdate=false;var _6=_5.getItem("addTabString");_6.setHeight(_4);_6.setWidth(_2);_6.setValue(_6.hint);_5.setTop(_3);_5.setLeft(_1);_5.show();_6.focusInItem();_6.delayCall("selectValue",[],100)},isc.A.editModeAddTabs=function isc_TabSet_editModeAddTabs(_1){if(!_1||_1==isc.TabSet.addTabEditorHint)return;var _2=_1.split(",");for(var i=0;i<_2.length;i++){var _4={type:"Tab",defaults:{title:_2[i]}};var _5=this.editContext.addNode(this.editContext.makeEditNode(_4),this.editNode);this.editModeAddDefaultPane(_5)}},isc.A.editModeAddDefaultPane=function isc_TabSet_editModeAddDefaultPane(_1){if(!_1)return;var _2=isc.addProperties({},this.defaultPaneDefaults);if(!_2.type&&!_2.className){_2.type=_2._constructor}
this.editContext.addNode(this.editContext.makeEditNode(_2),_1)},isc.A.addTabsEditModeExtras=function isc_TabSet_addTabsEditModeExtras(_1){this.delayCall("manageAddIcon");if(this.editingOn){for(var i=0;i<_1.length;i++){this.saveOriginalValues(_1[i]);this.setCanCloseTab(_1[i],true)}}},isc.A.removeTabsEditModeExtras=function isc_TabSet_removeTabsEditModeExtras(){this.delayCall("manageAddIcon")},isc.A.reorderTabsEditModeExtras=function isc_TabSet_reorderTabsEditModeExtras(_1,_2){if(this.editContext&&this.editContext.reorderNode){this.editContext.reorderNode(this.editNode,_1,_2)}},isc.A.editablePropertiesUpdated=function isc_TabSet_editablePropertiesUpdated(){this.delayCall("manageAddIcon");this.invokeSuper(isc.TabSet,"editablePropertiesUpdated")},isc.A.tabScrolledIntoView=function isc_TabSet_tabScrolledIntoView(){if(!this.editingOn)return;for(var i=0;i<this.tabs.length;i++){var _2=this.getTab(this.tabs[i]);if(_2.titleEditor&&_2.titleEditor.isVisible()){_2.repositionTitleEditor()}}},isc.A.findEditNode=function isc_TabSet_findEditNode(_1){this.logInfo("In TabSet.findEditNode, dragType is "+_1,"editModeDragTarget");if(_1!="Tab"){var _2=this.getTab(this.getSelectedTabNumber());if(_2&&_2.editNode)return _2;for(var i=0;i<this.tabs.length;i++){_2=this.getTab(i);if(_2.editNode)return _2}
if(this.parentElement)return this.parentElement.findEditNode(_1)}
return this.Super("findEditNode",arguments)},isc.A.completeItemDrop=function isc_TabSet_completeItemDrop(_1,_2,_3,_4,_5,_6){this.Super("completeItemDrop",arguments);if(_1&&(_1.type||_1.className)=="Tab"){var _7=_1.liveObject;this.editModeAddDefaultPane(_1);this.selectTab(_7);_7.delayCall("editClick")}});isc.B._maxIndex=isc.C+15;isc.A=isc.TabBar.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.findEditNode=function isc_TabBar_findEditNode(_1){if(_1=="Tab"){return this.parentElement.findEditNode(_1)}else if(this.parentElement&&isc.isA.Layout(this.parentElement.parentElement)){return this.parentElement.parentElement.findEditNode(_1)}
return this.Super("findEditNode",arguments)});isc.B._maxIndex=isc.C+1}
isc.A=isc.Layout.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.editModeDrop=function isc_Layout_editModeDrop(){if(this.shouldPassDropThrough()){this.hideDropLine();return}
isc.EditContext.hideAncestorDragDropLines(this);var _1=isc.EH.dragTarget,_2,_3;if(!_1.isA("Palette")){if(_1.isA("FormItemProxyCanvas")){_1=_1.formItem}
_3=_1._constructor||_1.Class}else{_2=_1.transferDragData();if(isc.isAn.Array(_2))_2=_2[0];_2.dropped=true;_3=_2.type||_2.className}
var _4=this.findEditNode(_3);if(_4){_4=_4.editNode}
if(this.modifyEditNode){_4=this.modifyEditNode(_2,_4,_3);if(!_4){this.hideDropLine();return isc.EH.STOP_BUBBLING}}
if(!_1.isA("Palette")){if(isc.EditContext.$70r)isc.EditContext.$70r.hide();if(_1==this)return;var _5=this.editContext.getEditNodeTree(),_6=_5.getParent(_1.editNode),_7=_5.getChildren(_6).indexOf(_1.editNode),_8=this.getDropPosition(_3);this.editContext.removeNode(_1.editNode);if(_6==this.editNode&&_8>_7)_8--;var _9;if(_1.isA("FormItem")){if(_1.isA("CanvasItem")){_9=this.editContext.addNode(_1.canvas.editNode,_4,_8)}else{_9=this.editContext.addWithWrapper(_1.editNode,_4)}}else if(_1.isA("DrawItem")){_9=this.editContext.addWithWrapper(_1.editNode,_4,true)}else{_9=this.editContext.addNode(_1.editNode,_4,_8)}
if(isc.isA.TabSet(_4.liveObject)){_4.liveObject.selectTab(_1)}else if(_9&&_9.liveObject){isc.EditContext.delayCall("selectCanvasOrFormItem",[_9.liveObject,true],200)}}else{var _10;var _11=isc.ClassFactory.getClass(_3);if(_11&&_11.isA("FormItem")){_10=this.editContext.addWithWrapper(_2,_4)}else if(_11&&_11.isA("DrawItem")){_10=this.editContext.addWithWrapper(_2,_4,true)}else{_10=this.editContext.addNode(_2,_4,this.getDropPosition(_3))}
if(_10!=null){var _12=_2.liveObject;if(isc.isA.TabSet(_12)){_12.delayCall("showAddTabEditor")}else if(isc.isA.ImgTab(_12)||isc.isA.Button(_12)||isc.isA.StretchImgButton(_12)||isc.isA.SectionHeader(_12)||isc.isA.ImgSectionHeader(_12)){_12.delayCall("editClick")}}}
this.hideDropLine();return isc.EH.STOP_BUBBLING},isc.A.editModeDropMove=function isc_Layout_editModeDropMove(){if(!this.editModeWillAcceptDrop())return false;if(!this.shouldPassDropThrough()){this.Super("dropMove",arguments);if(this.parentElement&&this.parentElement.hideDropLine){this.parentElement.hideDropLine();if(this.parentElement.isA("FormItem")){this.parentElement.form.hideDragLine()}else if(this.parentElement.isA("DrawItem")){this.parentElement.drawPane.hideDragLine()}}
return isc.EH.STOP_BUBBLING}else{this.hideDropLine()}},isc.A.editModeDropOver=function isc_Layout_editModeDropOver(){if(!this.editModeWillAcceptDrop())return false;if(!this.shouldPassDropThrough()){this.Super("dropOver",arguments);if(this.parentElement&&this.parentElement.hideDropLine){this.parentElement.hideDropLine();if(this.parentElement.isA("FormItem")){this.parentElement.form.hideDragLine()}else if(this.parentElement.isA("DrawItem")){this.parentElement.drawPane.hideDragLine()}}
return isc.EH.STOP_BUBBLING}else{this.hideDropLine()}});isc.B._maxIndex=isc.C+3;isc.A=isc.Portlet.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.canAdd=function isc_Portlet_canAdd(_1){if(_1=="Portlet")return false;return this.Super("canAdd",arguments)},isc.A.updateEditNode=function isc_Portlet_updateEditNode(_1,_2){if(_1.persistCoordinates){var _3=this._percent_width||this.$pn;if(_3){_1.setNodeProperties(_2,{width:_3},true)}else{_1.removeNodeProperties(_2,"width")}}});isc.B._maxIndex=isc.C+2;isc.A=isc.PortalRow.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.updateEditNode=function isc_PortalRow_updateEditNode(_1,_2){if(_1.persistCoordinates){var _3=this._percent_height||this.$po;if(_3){_1.setNodeProperties(_2,{height:_3},true)}else{_1.removeNodeProperties(_2,"height")}}},isc.A.wrapChildNode=function isc_PortalRow_wrapChildNode(_1,_2,_3,_4){var _5=_2.liveObject;if(isc.isA.Portlet(_5)){return _3}else{var _6=_1.makeEditNode({type:"Portlet",defaults:{title:_2.title,destroyOnClose:true}});_1.addNode(_6,_3,_4);return _6}},isc.A.handleDroppedEditNode=function isc_PortalRow_handleDroppedEditNode(_1,_2){var _3=this.editContext;var _4=this.editNode;if(isc.isA.Palette(_1)){var _5=_1.transferDragData(),_6=(isc.isAn.Array(_5)?_5[0]:_5);if(_3&&_4){_3.addNode(_6,_4,_2);return false}else{if(isc.isA.Portlet(_6.liveObject)){_1=_6.liveObject}else{_1=isc.Portlet.create({autoDraw:false,title:_6.title,items:[_6.liveObject],destroyOnClose:true})}}}
return _1});isc.B._maxIndex=isc.C+3;isc.A=isc.PortalColumnBody.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.handleDroppedEditNode=function isc_PortalColumnBody_handleDroppedEditNode(_1,_2){var _3=this.creator.editContext;var _4=this.creator.editNode;if(isc.isA.Palette(_1)){var _5=_1.transferDragData(),_6=(isc.isAn.Array(_5)?_5[0]:_5);if(_3&&_4){_3.addNode(_6,_4,_2);return false}else{if(isc.isA.Portlet(_6.liveObject)){_1=_6.liveObject}else{_1=isc.Portlet.create({autoDraw:false,title:_6.title,items:[_6.liveObject],destroyOnClose:true})}}}
if(_1){var _7=_1.portalRow;if(_7&&_7.parentElement==this&&_7.getMembers().length==1){if(_3&&_4&&_7.editNode){var _8=this.getMemberNumber(_7);if(_2==_8||_2==_8+1)return;_3.removeNode(_7.editNode);if(_8<_2)_2-=1;_3.addNode(_7.editNode,_4,_2);return null}}else{if(_3&&_4&&_1.editNode){_3.addNode(_1.editNode,_4,_2);return null}}}
return _1});isc.B._maxIndex=isc.C+1;isc.A=isc.PortalColumn.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.wrapChildNode=function isc_PortalColumn_wrapChildNode(_1,_2,_3,_4){var _5=_2.liveObject;if(isc.isA.PortalRow(_5)||_2.type=="PortalRow"){return _3}else if(isc.isA.Portlet(_5)){var _6=_1.makeEditNode({type:this.rowConstructor,defaults:{}});_1.addNode(_6,_3,_4);return _6}else{var _7=_1.makeEditNode({type:"Portlet",defaults:{title:_2.title,destroyOnClose:true}});_1.addNode(_7,_3,_4);return _7}},isc.A.updateEditNode=function isc_PortalColumn_updateEditNode(_1,_2){if(_1.persistCoordinates){var _3=this._percent_width||this.$pn;if(_3){_1.setNodeProperties(_2,{width:_3},true)}else{_1.removeNodeProperties(_2,"width")}}},isc.A.canAdd=function isc_PortalColumn_canAdd(_1){return false},isc.A.setEditMode=function isc_PortalColumn_setEditMode(_1,_2,_3){this.Super("setEditMode",arguments);this.rowLayout.setEditMode(_1,_2,null)});isc.B._maxIndex=isc.C+4;isc.A=isc.PortalLayout.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.addedToEditContext=function isc_PortalLayout_addedToEditContext(_1,_2){for(var i=0;i<this.getNumColumns();i++){var _4=this.getPortalColumn(i);if(!_4.editContext){var _5=_1.makeEditNode({type:this.columnConstructor,liveObject:_4,defaults:{ID:_4.ID,_constructor:this.columnConstructor}});_1.addNode(_5,_2,i,null,true)}}
_2.defaults.numColumns=0});isc.B._maxIndex=isc.C+1;if(isc.DynamicForm){isc.A=isc.DynamicForm.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.setEditMode=function isc_DynamicForm_setEditMode(_1,_2,_3){if(_1==null)_1=true;if(_1==this.editingOn)return;this.invokeSuper(isc.DynamicForm,"setEditMode",_1,_2,_3);if(this.editingOn){this.saveToOriginalValues(["canDropItems","canAddColumns","dropOut"]);this.setProperties({canDropItems:true,canAddColumns:true,dropOut:this.editModeDropOut});this.resetValues()}else{this.restoreFromOriginalValues(["canDropItems","canAddColumns","dropOut"]);this.resetValues()}},isc.A.editModeDropOver=function isc_DynamicForm_editModeDropOver(){if(this.canDropItems!=true)return false;if(!this.editModeWillAcceptDrop())return false;this.$69c=null;this.hideDragLine();return isc.EH.STOP_BUBBLING},isc.A.editModeDropMove=function isc_DynamicForm_editModeDropMove(){if(!this.ns.EH.getDragTarget())return false;if(this.canDropItems!=true)return false;if(!this.editModeWillAcceptDrop())return false;var _1=this.ns.EH.getDragTarget().getDragData();if(isc.isAn.Array(_1))_1=_1[0];if(_1&&(_1.type||_1.className)=="DataSource"){this.hideDragLine();return isc.EH.STOP_BUBBLING}
if(this.shouldPassDropThrough()){this.hideDragLine();return}
if(this.getItems().length==0){isc.EditContext.hideAncestorDragDropLines(this);this.showDragLineForForm();return isc.EH.STOP_BUBBLING}
var _2=this.ns.EH.lastEvent,_3=this.getNearestItem(_2.x,_2.y);if(_3){isc.EditContext.hideAncestorDragDropLines(this);this.showDragLineForItem(_3,_2.x,_2.y)}else{this.hideDragLine()}
this.$69c=_3;return isc.EH.STOP_BUBBLING},isc.A.editModeDropOut=function isc_DynamicForm_editModeDropOut(){this.hideDragLine();return isc.EH.STOP_BUBBLING},isc.A.editModeDrop=function isc_DynamicForm_editModeDrop(){var _1=this.ns.EH.getDragTarget().getDragData();if(isc.isAn.Array(_1))_1=_1[0];if((_1&&(_1.type||_1.className)=="DataSource")||this.getItems().length==0)
{if(this.shouldPassDropThrough()){this.hideDragLine();return}
this.itemDrop(this.ns.EH.getDragTarget(),0,0,0);return isc.EH.STOP_BUBBLING}
if(!this.$69c){isc.logWarn("lastDragOverItem not set, cannot drop","dragDrop");return}
var _2=this.$69c,_3=this.getItemTableOffsets(_2),_4=_2.dropSide,_5=_2.$69d,_6=this.getItemDropIndex(_2,_4);this.$69c=null;if(this.shouldPassDropThrough()){this.hideDragLine();return}
if(_6!=null&&_6>=0){if(this.parentElement){if(this.parentElement.hideDragLine)this.parentElement.hideDragLine();if(this.parentElement.hideDropLine)this.parentElement.hideDropLine()}
var _7=this.items.$8j.duplicate();this.modifyFormOnDrop(_2,_3.top,_3.left,_4,_7)}
this.hideDragLine();return isc.EH.STOP_BUBBLING},isc.A.itemDrop=function isc_DynamicForm_itemDrop(_1,_2,_3,_4,_5,_6){var _7=_1.getDragData();if(_7==null){_7=isc.EH.dragTarget;if(isc.isA.FormItemProxyCanvas(_7)){this.logInfo("The dragTarget is a FormItemProxyCanvas for "+_7.formItem,"editModeDragTarget");_7=_7.formItem}}
if(!_1.isA("Palette")){if(isc.EditContext.$70r)isc.EditContext.$70r.hide();var _8=this.editContext.getEditNodeTree(),_9=_8.getParent(_7.editNode),_10=_8.getChildren(_9).indexOf(_7.editNode),_11=_7.editNode;if(isc.isA.Function(this.itemDropping)){_11=this.itemDropping(_11,_2,true);if(!_11)return}
this.editContext.removeNode(_11);if(_9==this.editNode&&_2>_10)_2--;var _12=this.editContext.addNode(_7.editNode,this.editNode,_2);if(_12&&_12.liveObject){isc.EditContext.delayCall("selectCanvasOrFormItem",[_12.liveObject,true],200)}
return _12}else{var _13=_1.transferDragData();if(isc.isAn.Array(_13))_13=_13[0];if(_13.loadData&&!_13.isLoaded){var _14=this;_13.loadData(_13,function(_15){_15=_15||_13
_15.isLoaded=true;_14.completeItemDrop(_15,_2,_3,_4,_5,_6)
_15.dropped=_13.dropped});return}
this.completeItemDrop(_13,_2,_3,_4,_5,_6)}},isc.A.completeItemDrop=function isc_DynamicForm_completeItemDrop(_1,_2,_3,_4,_5,_6){var _7=_1.liveObject,_8;if(!isc.isA.FormItem(_7)){if(isc.isA.Button(_7)||isc.isAn.IButton(_7)){_1=this.editContext.makeEditNode({type:"ButtonItem",title:_7.title,defaults:_1.defaults})}else if(isc.isA.Canvas(_7)){_8=_1;_1=this.editContext.makeEditNode({type:"CanvasItem"});isc.addProperties(_1.defaults,{showTitle:false,startRow:true,endRow:true,width:"*",colSpan:"*"})}}
_1.dropped=true;if(isc.isA.Function(this.itemDropping)){_1=this.itemDropping(_1,_2,true);if(!_1)return}
var _9=this.editContext.addNode(_1,this.editNode,_2);if(_9){isc.EditContext.clearSchemaProperties(_9);if(_8){_9=this.editContext.addNode(_8,_9,0);if(isc.isA.TabSet(_7)){_7.delayCall("showAddTabEditor",[],1000)}}
if(_9.liveObject.dataSource){_9.liveObject.setDataSource(_9.liveObject.dataSource,null,true)}
isc.EditContext.delayCall("selectCanvasOrFormItem",[_1.liveObject,true],200);if(_9.showTitle!=false){_1.liveObject.delayCall("editClick")}}
if(_6)this.fireCallback(_6,"node",[_9])},isc.A.modifyFormOnDrop=function isc_DynamicForm_modifyFormOnDrop(_1,_2,_3,_4,_5){if(this.canAddColumns==false)return;var _6=this.ns.EH.getDragTarget().getDragData(),_7,_8,_9,_10=this;if(!_6){_6=this.ns.EH.getDragTarget();if(!isc.isA.FormItemProxyCanvas(_6)){this.logWarn("In modifyFormOnDrop the drag target was not a FormItemProxyCanvas");return}
_6=_6.formItem;var _11=-1;for(var i=0;i<_5.length;i++){for(var j=0;j<_5[i].length;j++){if(_5[i][j]==_11)continue;_11=_5[i][j];if(this.items[_11]==_6){_8=i;_9=_11;break}}}
var _14=true}else{if(isc.isAn.Array(_6))_6=_6[0];var _15=_6.type||_6.className;var _16=isc.ClassFactory.getClass(_15);if(isc.isA.FormItem(_16)){_6=this.createItem(_6,_15)}else{_6=this.createItem({type:"CanvasItem",showTitle:false},"CanvasItem")}
var _14=false}
_7=this.getAdjustedColSpan(_6);if((_6.startRow&&_6.$71r)||(_6.endRow&&_6.$71n)){_6.editContext.setNodeProperties(_6.editNode,{startRow:null,$71r:null,endRow:null,$71n:null})}
var _17=[];if(_14&&_8){var _18=_5[_8],_11=-1;for(var i=0;i<_18.length;i++){if(_18[i]!=_11){_11=_18[i];if(this.items[_11]==_6)continue;if(isc.isA.SpacerItem(this.items[_11])&&this.items[_11].$71m)
{this.logDebug("Marking spacer "+this.items[_11].name+" for removal","formItemDragDrop");_17.add(this.items[_11]);continue}
this.logDebug("Found a non-spacer item on row "+_8+", no spacers will be deleted","formItemDragDrop");_17=null;break}}}
var _19=0;if(_4=="L"||_4=="R"){var _20=true;if(_6.startRow)_20=false;if(_6.endRow&&(_4=="L"||_3<_5[_2].length)){_20=false}
if(_14&&_8==_2)_20=false;if(_20){var _21=_7;var _22=_5[_2][_3];if(_5[_2].contains(_22)){var _23=this.items[_22];if(!isc.isA.SpacerItem(_23)||!_23.$71m){_22+=_4=="L"?-1:1;_23=this.items[_22]}
if(_5[_2].contains(_22)){if(isc.isA.SpacerItem(_23)&&_23.$71m){if(_23.colSpan&&_23.colSpan>_21){_23.editContext.setNodeProperties(_23.editNode,{colSpan:_23.colSpan-_21});_21=0}else{_21-=_23.colSpan;_23.editContext.removeNode(_23.editNode);if(_4=="R")_19=-1}}}}
if(_21<=0){_20=false}else if(_5[_2].length+_7<=this.numCols){_20=false}else{this.editContext.setNodeProperties(this.editNode,{numCols:this.numCols+_21})}}
for(var i=0;i<_5.length;i++){var _22=_5[i][_3];if(_22==null)_22=this.items.length;else _22+=_19+(_4=="L"?0:1);if(i!=_2){if(!_20)continue;if(_14&&_8&&_2<_8&&i==_8)
{_19--}
if(_17&&_17.length>0&&i==_8){continue}
if(_22>0){var _23=this.items[_22-1];if(!_23||_23==_6||_23.endRow){continue}}
var _24=this.getAdjustedColSpan(_23);if(_4=="R"&&_3+_24>=_5[i].length){if(!_23.endRow){_23.editContext.setNodeProperties(_23.editNode,{endRow:true,$71n:true})}
continue}
var _25=this.editContext.makeEditNode({type:"SpacerItem"});isc.addProperties(_25.defaults,{colSpan:_21,height:0,$71m:true});var _26=this.editContext.addNode(_25,this.editNode,_22);_19++}else{if(_4=="L"){var _23=this.items[_22];if(_23&&_23.startRow&&_23.$71r){_23.editContext.setNodeProperties(_23.editNode,{startRow:null,$71r:null})}}else{var _23=this.items[_22-1];if(_23&&_23.endRow&&_23.$71n){_23.editContext.setNodeProperties(_23.editNode,{endRow:null,$71n:null})}}
this.itemDrop(this.ns.EH.getDragTarget(),_22,i,_3,_4,function(_36){_10.$72s=_36});if(_8==null||_2<_8)_19++}}}else{var _27,_28;if(isc.isA.SpacerItem(_1)&&_1.$71m){_27=_2}else{_27=_2+(_4=="B"?1:0)}
if(_5[_27])_28=_5[_27][_3];var _29;if(_27>=_5.length)_29=this.items.length;else _29=_5[_27][0];var _30=_28==null?null:this.items[_28];if(_30==null||(isc.isA.SpacerItem(_30)&&_30.$71m)){if(_27>_5.length-1||_27<0){if(_3!=0&&!_6.startRow){var _25=this.editContext.makeEditNode({type:"SpacerItem"});isc.addProperties(_25.defaults,{colSpan:_3,height:0,$71m:true});this.editContext.addNode(_25,this.editNode,_29)}
this.itemDrop(this.ns.EH.getDragTarget(),_29+(_3!=0?1:0),_27,_3,_4,function(_36){_10.$72s=_36})}else if(_30==null){var _31=_5[_27].length-1;if(_31<0){isc.logWarn("Found completely empty row in DynamicForm at position ("+_27+","+(_3)+")");return}
var _32=_5[_27][_31];var _23=this.items[_32];if(_23==null){isc.logWarn("Null item in DynamicForm at position ("+_27+","+(_3-1)+")");return}
if(_23.endRow&&_23!=_6){_23.editContext.setNodeProperties(_23.editNode,{endRow:false})}
var _33=(_3-_31)-1;if(_14&&_23==_6){_33+=_7}
if(_33>0){var _25=this.editContext.makeEditNode({type:"SpacerItem"});isc.addProperties(_25.defaults,{colSpan:_33,height:0,$71m:true});this.editContext.addNode(_25,this.editNode,_32+1)}
this.itemDrop(this.ns.EH.getDragTarget(),_32+(_33>0?2:1),_27,_3,_4,function(_36){_10.$72s=_36})}else{var _34=_30.colSpan?_30.colSpan:1,_35=_7;if(_34>_35){_30.editContext.setNodeProperties(_30.editNode,{colSpan:_34-_35});this.itemDrop(this.ns.EH.getDragTarget(),_28,_27,_3,_4,function(_36){_10.$72s=_36})}else{this.itemDrop(this.ns.EH.getDragTarget(),_28,_27,_3,_4,function(_36){_10.$72s=_36});_30.editContext.removeNode(_30.editNode)}}}else{if(_3!=0){var _25=this.editContext.makeEditNode({type:"SpacerItem"});isc.addProperties(_25.defaults,{colSpan:_3,height:0,$71m:true});this.editContext.addNode(_25,this.editNode,_29)}
this.itemDrop(this.ns.EH.getDragTarget(),_29+(_3==0?0:1),_27,_3,_4,function(_36){if(_36&&_36.liveObject&&_36.liveObject.editContext){_36.liveObject.editContext.setNodeProperties(_36,{endRow:true,$71n:true})}
_10.$72s=_36})}}
if(_14&&_17){for(var i=0;i<_17.length;i++){this.logDebug("Removing spacer item "+_17[i].name,"formItemDragDrop");_17[i].editContext.removeNode(_17[i].editNode)}}
if(!_14)_6.destroy();if(this.$72s&&this.$72s.liveObject){isc.EditContext.delayCall("selectCanvasOrFormItem",[this.$72s.liveObject],200)}},isc.A.getAdjustedColSpan=function isc_DynamicForm_getAdjustedColSpan(_1){if(!_1)return 0;var _2=_1.colSpan!=null?_1.colSpan:1;if(_2=="*")_2=1;if(_1.showTitle!=false&&(_1.titleOrientation=="left"||_1.titleOrientation=="right"||_1.titleOrientation==null))
{_2++}
return _2},isc.A.canAdd=function isc_DynamicForm_canAdd(_1){if(this.getObjectField(_1)!=null)return true;var _2=isc.ClassFactory.getClass(_1);if(_2&&_2.isA("Canvas"))return true;return false},isc.A.setEditorType=function isc_DynamicForm_setEditorType(_1,_2){if(!_1.editContext)return;var _3=_1.editContext.getEditNodeTree(),_4=_3.getParent(_1.editNode),_5=_3.getChildren(_4).indexOf(_1.editNode),_6=_1.editContext,_7={type:_2,defaults:_1.editNode.defaults},_8=_6.makeEditNode(_7);_6.removeNode(_1.editNode);_6.addNode(_8,_4,_5)},isc.A.itemDropping=function isc_DynamicForm_itemDropping(_1,_2,_3){var _4=_1.liveObject,_5=isc.EditContext.getSchemaInfo(_1);if(!_5.dataSource)return _1;if(!this.dataSource){this.setDataSource(_5.dataSource);this.serviceNamespace=_5.serviceNamespace;this.serviceName=_5.serviceName;return _1}
if(_5.dataSource==isc.DataSource.getDataSource(this.dataSource).ID&&_5.serviceNamespace==this.serviceNamespace&&_5.serviceName==this.serviceName){return _1}
var _6=this.editContext.makeEditNode({type:"CanvasItem",defaults:{cellStyle:"nestedFormContainer"}});isc.addProperties(_6.defaults,{showTitle:false,colSpan:2});_6.dropped=true;this.editContext.addNode(_6,this.editNode,_2);var _7=this.editContext.makeEditNode({type:"DynamicForm",defaults:{numCols:2,canDropItems:false,dataSource:_5.dataSource,serviceNamespace:_5.serviceNamespace,serviceName:_5.serviceName,doNotUseDefaultBinding:true}});_7.dropped=true;this.editContext.addNode(_7,_6,0);var _8=this.editContext.addNode(_1,_7,0);isc.EditContext.clearSchemaProperties(_8)},isc.A.getFieldEditNode=function isc_DynamicForm_getFieldEditNode(_1,_2){var _3=this.getEditorType(_1);_3=_3.substring(0,1).toUpperCase()+_3.substring(1)+"Item";var _4={type:_3,autoGen:true,defaults:{name:_1.name,title:_1.title||_2.getAutoTitle(_1.name)}}
return _4});isc.B._maxIndex=isc.C+13;isc.A=isc.FormItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.setEditMode=function isc_FormItem_setEditMode(_1,_2,_3){if(_1==null)_1=true;if(this.editingOn==_1)return;this.editingOn=_1;if(this.editingOn){this.editContext=_2}
this.editNode=_3;if(this.editingOn){this.saveToOriginalValues(["click","doubleClick","changed"]);this.setProperties({click:this.editModeClick,doubleClick:this.editModeDoubleClick,changed:this.editModeChanged})}else{this.restoreFromOriginalValues(["click","doubleClick","changed"])}},isc.A.editModeChanged=function isc_FormItem_editModeChanged(_1,_2,_3){this.editContext.setNodeProperties(this.editNode,{defaultValue:_3})},isc.A.setEditorType=function isc_FormItem_setEditorType(_1){if(this.form)this.form.setEditorType(this,_1)});isc.B._maxIndex=isc.C+3;isc.A=isc.ButtonItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.editClick=function isc_ButtonItem_editClick(){var _1=this.canvas.getPageLeft(),_2=this.canvas.getVisibleWidth(),_3=this.canvas.getPageTop(),_4=this.canvas.getHeight();isc.EditContext.manageTitleEditor(this,_1,_2,_3,_4)});isc.B._maxIndex=isc.C+1}
isc.A=isc.SectionStack.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.canAdd=function isc_SectionStack_canAdd(_1){if(_1=="SectionStackSection")return true;var _2=isc.ClassFactory.getClass(_1);if(_2&&(_2.isA("Canvas")||_2.isA("FormItem")||_2.isA("DrawItem")))
{return true}
return false},isc.A.modifyEditNode=function isc_SectionStack_modifyEditNode(_1,_2,_3){if(_3=="SectionStackSection")return _2;var _4=this.getDropPosition();if(_4==0){isc.warn("Cannot drop before the first section header");return false}
var _5=this.$700();for(var i=_5.length-1;i>=0;i--){if(_4>_5[i]){return this.getSectionHeader(i).editNode}}
return _2},isc.A.getEditModeDropPosition=function isc_SectionStack_getEditModeDropPosition(_1){var _2=this.invokeSuper(isc.SectionStack,"getDropPosition");if(!_1||_1=="SectionStackSection"){return _2}
var _3=this.$700();for(var i=_3.length-1;i>=0;i--){if(_2>_3[i]){return _2-_3[i]-1}}
return 0},isc.A.$700=function isc_SectionStack__getHeaderPositions(){var _1=[],j=0;for(var i=0;i<this.getMembers().length;i++){if(this.getMember(i).isA(this.sectionHeaderClass)){_1[j++]=i}}
return _1});isc.B._maxIndex=isc.C+4;if(isc.ListGrid!=null){isc.A=isc.ListGrid.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.setEditMode=function isc_ListGrid_setEditMode(_1,_2,_3){if(_1==null)_1=true;if(_1==this.editingOn)return;this.invokeSuper(isc.ListGrid,"setEditMode",_1,_2,_3);if(this.editingOn){this.saveToOriginalValues(["setNoDropIndicator","clearNoDropIndicator","headerClick"]);this.setProperties({setNoDropIndicator:this.editModeSetNoDropIndicator,clearNoDropIndicator:this.editModeClearNoDropIndicator,headerClick:this.editModeHeaderClick})}else{this.restoreFromOriginalValues(["setNoDropIndicator","clearNoDropIndicator","headerClick"])}},isc.A.editModeClearNoDropIndicator=function isc_ListGrid_editModeClearNoDropIndicator(_1){this.Super("clearNoDropIndicator",arguments);this.body.editModeClearNoDropIndicator()},isc.A.editModeSetNoDropIndicator=function isc_ListGrid_editModeSetNoDropIndicator(){this.Super("setNoDropIndicator",arguments);this.body.editModeSetNoDropIndicator()},isc.A.editModeHeaderClick=function isc_ListGrid_editModeHeaderClick(_1){var _2=this.editContext.getEditNodeTree(),_3=_2.getChildren(_2.findById(this.ID)),_4=this.getField(_1),_5;for(var i=0;i<_3.length;i++){var _7=_3[i];if(_7.name==_4.name){_5=_7;break}}
if(_5){_5.liveObject.$73a=this.header.getButton(_1);isc.EditContext.selectCanvasOrFormItem(_5.liveObject)}
this.$73b=true;return isc.EH.STOP_BUBBLING},isc.A.editModeClick=function isc_ListGrid_editModeClick(){if(this.editNode){if(this.$73b)delete this.$73b;else isc.EditContext.selectCanvasOrFormItem(this,true);return isc.EH.STOP_BUBBLING}});isc.B._maxIndex=isc.C+5}
if(isc.TreeGrid!=null){isc.A=isc.TreeGrid.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.setEditMode=function isc_TreeGrid_setEditMode(_1,_2,_3){if(_1==null)_1=true;if(_1==this.editingOn)return;this.invokeSuper(isc.TreeGrid,"setEditMode",_1,_2,_3);if(this.editingOn){this.editModeCreateDefaultTreeFieldEditNode();this.saveToOriginalValues(["addField"]);this.setProperties({addField:this.editModeAddField})}else{this.restoreFromOriginalValues(["addField"])}},isc.A.editModeCreateDefaultTreeFieldEditNode=function isc_TreeGrid_editModeCreateDefaultTreeFieldEditNode(){if(isc.$75u)return;if(this.dataSource)return;var _1=this.fields;for(var i=0;i<_1.length;i++){if(_1[i].name=="nodeTitle"){var _3={type:"TreeGridField",autoGen:true,defaults:{name:_1[i].name,title:_1[i].title}};var _4=this.editContext.makeEditNode(_3);this.editContext.addNode(_4,this.editNode,null,null,true);return}}},isc.A.editModeAddField=function isc_TreeGrid_editModeAddField(_1,_2){this.Super("addField",arguments);if(isc.$75u){if(_1.treeField){var _3=this.getFields();for(var i=0;i<_3.length;i++){if(_3[i].name!=_1.name&&_3[i].treeField){this.removeField(_3[i]);break}}}}},isc.A.editModeSetDataSource=function isc_TreeGrid_editModeSetDataSource(_1,_2,_3){if(isc.$75u){this.baseSetDataSource(_1,_2);return}
if(_1==null)return;if(_1==this.dataSource&&!_3)return;var _2=this.getFields();if(_2){for(var i=0;i<_2.length;i++){var _5=_2[i];if(_5.treeField){_5.treeField=null;var _6=_5.editNode;break}}}
var _7=this.getFields();_7.remove(_5);var _8,_2=_1.fields;if(_2&&isc.getKeys(_2).length==1&&_1.fieldIsComplexType(_2[isc.firstKey(_2)].name))
{_8=_1.getSchema(_2[isc.firstKey(_2)].type)}else{_8=_1}
var _2=_8.getFields(),_9=_1.titleField;if(!isc.isAn.Array(_2))_2=isc.getValues(_2);for(var _10=0;_10<_2.length;_10++){if(!this.shouldUseField(_2[_10],_1))continue;if(_9==null||_9==_2[_10].name){var _11=_2[_10];break}}
if(_11)_7.addAt(_11,0);this.baseSetDataSource(_1,_7);var _12=this.getFieldEditNode(_11,_8);_12.defaults.treeField=true;var _13=this.editContext.makeEditNode(_12);this.editContext.addNode(_13,this.editNode,0,null);if(_6)this.editContext.removeNode(_6,true)});isc.B._maxIndex=isc.C+4}
var basicSetEditMode=function(_1,_2,_3){if(_1==null)_1=true;if(this.editingOn==_1)return;this.editingOn=_1;if(this.editingOn)this.editContext=_2;this.editNode=_3}
isc.A=isc.ServiceOperation.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.setEditMode=basicSetEditMode;isc.B.push(isc.A.getActionTargetTitle=function isc_ServiceOperation_getActionTargetTitle(){return"Operation: ["+this.operationName+"]"});isc.B._maxIndex=isc.C+1;if(isc.ValuesManager!=null){isc.A=isc.ValuesManager.getPrototype();isc.A.setEditMode=basicSetEditMode}
isc.ClassFactory.defineInterface("EditContext");isc.A=isc.EditContext;isc.A.$72t=18;isc.A.$72u=18;isc.A.$70s=-18;isc.A.$70t=0;isc.A=isc.EditContext;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.manageTitleEditor=function isc_c_EditContext_manageTitleEditor(_1,_2,_3,_4,_5){if(!isc.isA.DynamicForm(this.titleEditor)){this.titleEditor=isc.DynamicForm.create({autoDraw:false,margin:0,padding:0,cellPadding:0,fields:[{name:"title",type:"text",showTitle:false,keyPress:function(_9,_11,_12){if(_12=="Escape"){_11.discardUpdate=true;_11.hide();return}
if(_12=="Enter")_9.blurItem()},blur:function(_11,_9){if(!_11.discardUpdate){var _6=_11.targetComponent,_7=_6.editContext;if(_7){_7.setNodeProperties(_6.editNode,{"title":_9.getValue()});_7.nodeClick(_7,_6.editNode)}}
_11.hide()}}]})}
var _8=this.titleEditor;_8.setProperties({targetComponent:_1});_8.discardUpdate=false;var _9=_8.getItem("title");var _10=_1.title;if(!_10){_10=_1.name}
_9.setValue(_10);this.positionTitleEditor(_1,_2,_3,_4,_5);_8.show();_9.focusInItem();_9.delayCall("selectValue",[],100)},isc.A.positionTitleEditor=function isc_c_EditContext_positionTitleEditor(_1,_2,_3,_4,_5){if(_4==null)_4=_1.getPageTop();if(_5==null)_5=_1.height;if(_2==null)_2=_1.getPageLeft();if(_3==null)_3=_1.getVisibleWidth();var _6=this.titleEditor;var _7=_6.getItem("title");_7.setHeight(_5);_7.setWidth(_3);_6.setTop(_4);_6.setLeft(_2)},isc.A.deselect=function isc_c_EditContext_deselect(){isc.SelectionOutline.deselect();this.hideDragHandle()},isc.A.setEditMode=function isc_c_EditContext_setEditMode(_1){var _2=isc.SelectionOutline.getSelectedObject();if(_2==null)return;if(_1){this.setupDragProperties(_2);this.showSelectedObjectDragHandle();isc.SelectionOutline.showOutline()}else{this.resetDragProperties(_2);this.hideDragHandle();isc.SelectionOutline.hideOutline()}},isc.A.setupDragProperties=function isc_c_EditContext_setupDragProperties(_1){if(_1.saveToOriginalValues){_1.saveToOriginalValues(["canDrag","canDrop","dragAppearance","dragStart","dragMove","dragStop","setDragTracker"])}
if(_1.setProperties){_1.setProperties({canDrop:true,dragAppearance:"outline",dragStart:function(){return true},dragMove:function(){return true},setDragTracker:function(){isc.EH.setDragTracker("");return false},dragStop:function(){isc.EditContext.hideProxyCanvas();isc.EditContext.positionDragHandle()}})}},isc.A.resetDragProperties=function isc_c_EditContext_resetDragProperties(_1){if(this.observer)this.observer.ignore(_1,"dragMove");_1.restoreFromOriginalValues(["canDrag","canDrop","dragAppearance","dragStart","dragMove","dragStop","setDragTracker"])},isc.A.selectCanvasOrFormItem=function isc_c_EditContext_selectCanvasOrFormItem(_1,_2){if(!isc.isA.Canvas(_1)&&!isc.isA.FormItem(_1)&&!_1.$73a){return}
if(isc.isA.Menu(_1)){return}
if(this.$70r)this.$70r.hide();var _3=isc.SelectionOutline.getSelectedObject();if(_3)this.resetDragProperties(_3);var _4,_5;if(_1.$73a){var _6=_1.type||_1._constructor;_5="["+_6+" "+(_1.name?"name:":"ID");_5+=_1.name||_1.ID;_5+="]"
_4=_1;_1=_1.$73a}
var _7=_4?_4.editContext:_1.editContext;if(!_7)return;var _8=_1.editNode,_9=_7.getEditNodeTree().getParent(_8),_10;if(_9){var _11=_9.liveObject;if(_11){if(isc.isA.Layout(_11)){var _12=_11.vertical,_13=((_12?_11.vPolicy:_11.hPolicy)==isc.Layout.FILL),_14=_11.getMembers().length,_15=_11.getMemberNumber(_1),_16=(_15==(_14-1)),_17=(!_13||!_16);if(_17){_10=(_12?"B":"R")}}}}
var _18=_7.creator;isc.SelectionOutline.select(_1,false,!(_2&&_18&&_18.hideLabelWhenSelecting),_5,_10);if(_4)_1=_4;if(_1.editingOn){this.setupDragProperties(_1);this.showSelectedObjectDragHandle();var _19=_1.editContext;if(_19.selectRecord){_19.deselectAllRecords();var _20=_19.getEditNodeTree();if(isc.isA.Canvas(_1)){if(isc.isA.SectionHeader(_1)||isc.isA.ImgSectionHeader(_1)){_19.selectRecord(_20.findById(_1.$42i))}else{_19.selectRecord(_20.findById(_1.ID))}}else{_19.selectRecord(_20.find({ID:_1.name}))}}
if(_19.creator&&_19.creator.editComponent)_19.creator.editComponent(_1.editNode,_1)}},isc.A.showSelectedObjectDragHandle=function isc_c_EditContext_showSelectedObjectDragHandle(){if(!this.$70r){var _1=this;this.$70r=isc.Img.create({src:"[SKIN]/../../ToolSkin/images/controls/dragHandle.gif",prompt:"Grab here to drag component",width:this.$72u,height:this.$72t,cursor:"move",backgroundColor:"white",opacity:80,canDrag:true,canDrop:true,isMouseTransparent:true,mouseDown:function(){this.dragIconOffsetX=isc.EH.getX()-
isc.EditContext.draggingObject.getPageLeft();this.dragIconOffsetY=isc.EH.getY()-
isc.EditContext.draggingObject.getPageTop();_1.$53r=true;this.Super("mouseDown",arguments)},mouseUp:function(){_1.$53r=false}})}
if(this.draggingObject){this.observer.ignore(this.draggingObject,"dragMove");this.observer.ignore(this.draggingObject,"dragStop");this.observer.ignore(this.draggingObject,"hide");this.observer.ignore(this.draggingObject,"destroy")}
var _2=isc.SelectionOutline.getSelectedObject();if(isc.isA.FormItem(_2)){if(!this.$70y){this.$70y=isc.FormItemProxyCanvas.create()}
this.$70y.delayCall("setFormItem",[_2]);_2=this.$70y}
this.$70r.setProperties({dragTarget:_2});isc.Timer.setTimeout("isc.EditContext.positionDragHandle()",0);if(!this.observer)this.observer=isc.Class.create();this.draggingObject=_2;this.observer.observe(this.draggingObject,"dragMove","isc.EditContext.positionDragHandle(true)");this.observer.observe(this.draggingObject,"dragStop","isc.EditContext.$53r = false");this.observer.observe(this.draggingObject,"hide","isc.EditContext.$70r.hide()");this.observer.observe(this.draggingObject,"destroy","isc.EditContext.$70r.hide()");this.$70r.show()},isc.A.hideProxyCanvas=function isc_c_EditContext_hideProxyCanvas(){if(this.$70y)this.$70y.hide()},isc.A.positionDragHandle=function isc_c_EditContext_positionDragHandle(_1){if(!this.$70r)return;var _2=this.draggingObject;if(_2.destroyed||_2.destroying){this.logWarn("target of dragHandle: "+isc.Log.echo(_2)+" is invalid: "+_2.destroyed?"already destroyed":"currently in destroy()");return}
var _3=_2.getVisibleHeight();if(_3<this.$72t*2){this.$70t=Math.round((_3-this.$70r.height)/2)-1}else{this.$70t=-1}
if(_2.isA("FormItemProxyCanvas")&&!this.$53r){_2.syncWithFormItemPosition()}
if(!_2)return;var _4=_2.getPageLeft()+this.$70s;if(_1){_4+=_2.getOffsetX()-this.$70r.dragIconOffsetX}
this.$70r.setPageLeft(_4);var _5=_2.getPageTop()+this.$70t;if(_1){_5+=_2.getOffsetY()-this.$70r.dragIconOffsetY}
this.$70r.setPageTop(_5);this.$70r.bringToFront()},isc.A.hideDragHandle=function isc_c_EditContext_hideDragHandle(){if(this.$70r)this.$70r.hide()},isc.A.showDragHandle=function isc_c_EditContext_showDragHandle(){if(this.$70r)this.$70r.show()},isc.A.hideAncestorDragDropLines=function isc_c_EditContext_hideAncestorDragDropLines(_1){while(_1&&_1.parentElement){if(_1.parentElement.hideDragLine)_1.parentElement.hideDragLine();if(_1.parentElement.hideDropLine)_1.parentElement.hideDropLine();_1=_1.parentElement;if(isc.isA.FormItem(_1))_1=_1.form}},isc.A.getSchemaInfo=function isc_c_EditContext_getSchemaInfo(_1){var _2={},_3=_1.liveObject;if(!_3)return _2;if(isc.isA.FormItem(_3)){if(_3.form&&_3.form.dataSource){var _4=_3.form;_2.dataSource=isc.DataSource.getDataSource(_4.dataSource).ID;_2.serviceName=_4.serviceName;_2.serviceNamespace=_4.serviceNamespace}else{_2.dataSource=_3.schemaDataSource;_2.serviceName=_3.serviceName;_2.serviceNamespace=_3.serviceNamespace}}else if(isc.isA.Canvas(_3)){_2.dataSource=isc.DataSource.getDataSource(_3.dataSource).ID;_2.serviceName=_3.serviceName;_2.serviceNamespace=_3.serviceNamespace}else{_2.dataSource=_3.schemaDataSource;_2.serviceName=_3.serviceName;_2.serviceNamespace=_3.serviceNamespace}
return _2},isc.A.clearSchemaProperties=function isc_c_EditContext_clearSchemaProperties(_1){if(_1&&_1.defaults&&isc.isA.FormItem(_1.liveObject)){delete _1.defaults.schemaDataSource;delete _1.defaults.serviceName;delete _1.defaults.serviceNamespace;var _2=_1.liveObject.form;if(_2&&_2.inputSchemaDataSource&&isc.DataSource.get(_2.inputSchemaDataSource).ID==_1.defaults.inputSchemaDataSource&&_2.inputServiceName==_1.defaults.inputServiceName&&_2.inputServiceNamespace==_1.defaults.inputServiceNamespace)
{delete _1.defaults.inputSchemaDataSource;delete _1.defaults.inputServiceName;delete _1.defaults.inputServiceNamespace}}},isc.A.serializeDefaults=function isc_c_EditContext_serializeDefaults(_1){if(_1==null)return null;if(!isc.isAn.Array(_1))_1=[_1];var _2=isc.SB.create();isc.Comm.omitXSI=true;for(var i=0;i<_1.length;i++){var _4=_1[i],_5=_4.$97p,_6=isc.DS.getNearestSchema(_4);_2.append(_6.xmlSerialize(_4,null,null,_5),"\n\n")}
isc.Comm.omitXSI=null;return _2.toString()},isc.A.convertActions=function isc_c_EditContext_convertActions(_1,_2,_3){for(var _4 in _2){var _5=_2[_4];if(!isc.isAn.Object(_5)||isc.isA.StringMethod(_5))continue;var _6;if(_3&&_3.getField)_6=_3.getField(_4).type;if(_6&&(_6!="StringMethod"))continue;var _7=_1.liveObject[_4],_8=_7?_7.iscAction:null,_9;if(_8)_9=true;if(_9)_2[_4]=isc.StringMethod.create({value:_5})}});isc.B._maxIndex=isc.C+17;isc.EditContext.addInterfaceProperties({getDefaultPalette:function(){if(this.defaultPalette)return this.defaultPalette;return(this.defaultPalette=isc.HiddenPalette.create())},setDefaultPalette:function(_1){this.defaultPalette=_1;if(_1&&!_1.defaultEditContext){_1.defaultEditContext=this}},persistCoordinates:true,findPaletteNode:function(_1,_2){var _3=this.getDefaultPalette().findPaletteNode(_1,_2);if(_3)return _3;if(this.extraPalettes){if(!isc.isAn.Array(this.extraPalettes))this.extraPalettes=[this.extraPalettes];for(var i=0;i<this.extraPalettes.length;i++){_3=this.extraPalettes[i].findPaletteNode(_1,_2);if(_3)return _3}}
return null},addNode:function(_1,_2,_3,_4,_5){var _6=isc.ClassFactory.getClass(_1.type);if(_6&&_6.isA(isc.DataSource)){if(_1.loadData&&!_1.isLoaded){var _7=this;_1.loadData(_1,function(){_7.addNode(_1,_2,_3,_4,_5)});return}}
var _8=this.getEditNodeTree();if(_2==null)_2=this.getDefaultParent(_1);var _9=this.getLiveObject(_2);this.logInfo("addNode will add newNode of type: "+_1.type+" to: "+this.echoLeaf(_9),"editing");if(_9.wrapChildNode){_2=_9.wrapChildNode(this,_1,_2,_3);if(!_2)return;_9=this.getLiveObject(_2)}
var _10=_4||isc.DS.getObjectField(_9,_1.type);var _11=isc.DS.getSchemaField(_9,_10);if(!_11){this.logWarn("can't addNode: can't find a field in parent: "+_9+" for a new child of type: "+_1.type+", parent property:"+_10+", newNode is: "+this.echo(_1));return}
if(!_11.multiple){var _12=isc.DS.getChildObject(_9,_1.type,_4);if(_12){var _13=_8.getChildren(_2).find("ID",isc.DS.getAutoId(_12));this.logWarn("destroying existing child: "+this.echoLeaf(_12)+" in singular field: "+_10);_8.remove(_13);if(isc.isA.Class(_12)&&!isc.isA.DataSource(_12))_12.destroy()}}
var _14;if(_1.generatedType){_14=isc.addProperties({},_1.defaults);this.serializeChildData(_14,_8.getChildren(_1))}else{_14=_1.liveObject}
_14.editContext=this;_14.editNode=_1;if(!_5){var _15=isc.DS.addChildObject(_9,_1.type,_14,_3,_4);if(!_15){this.logWarn("addChildObject failed, returning");return}}
if(!_1.liveObject)_1.liveObject=isc.DS.getChildObject(_9,_1.type,isc.DS.getAutoId(_1.defaults),_4);this.logDebug("for new node: "+this.echoLeaf(_1)+" liveObject is now: "+this.echoLeaf(_1.liveObject),"editing");if(_1.liveObject==null){this.logWarn("wasn't able to retrieve live object after adding node of type: "+_1.type+" to liveParent: "+_9+", does liveParent have an appropriate getter() method?")}
_8.add(_1,_2,_3);_8.openFolder(_1);this.logInfo("added node "+this.echoLeaf(_1)+" to EditTree at path: "+_8.getPath(_1)+" with live object: "+this.echoLeaf(_1.liveObject),"editing");if(this.nodeAdded)this.nodeAdded(_1);if(_1.liveObject.addedToEditContext)_1.liveObject.addedToEditContext(this,_1,_2,_3);return _1},addComponent:function(_1,_2,_3,_4,_5){return this.addNode(_1,_2,_3,_4,_5)},reorderNode:function(_1,_2,_3){var _4=this.getEditNodeTree();var _5=_4.getChildren(_1).get(_2);_4.remove(_5);_4.add(_5,_1,_3)},nodeAdded:function(_1){},getDefaultParent:isc.ClassFactory.TARGET_IMPLEMENTS,addFromPaletteNode:function(_1,_2){var _3=this.makeEditNode(_1,_2);return this.addNode(_3,_2)},makeEditNode:function(_1){var _2=this.getDefaultPalette();return _2.makeEditNode(_1)},getLiveObject:function(_1){var _2=this.getEditNodeTree();var _3=_2.getParent(_1);if(_3==null)return _1.liveObject;var _4=_3.liveObject;var _5=isc.DS.getChildObject(_4,_1.type,isc.DS.getAutoId(_1));if(_5)_1.liveObject=_5;return _1.liveObject},requestLiveObject:function(_1,_2,_3){var _4=this;if(_1.loadData&&!_1.isLoaded){_1.loadData(_1,function(_6){_6=_6||_1
_6.isLoaded=true;_6.dropped=_1.dropped;_4.fireCallback(_2,"node",[_6])},_3);return}
if(_1.wizardConstructor){this.logInfo("creating wizard with constructor: "+_1.wizardConstructor);var _5=isc.ClassFactory.newInstance(_1.wizardConstructor,_1.wizardDefaults);_5.getResults(_1,function(_6){if(!_6.liveObject){_6=_3.makeEditNode(_6)}
_4.fireCallback(_2,"node",[_6])},_3);return}
this.fireCallback(_2,"node",[_1])},getEditNodeTree:function(){if(!this.editNodeTree){var _1=this.rootComponent||{_constructor:"Object"},_2=isc.isA.Class(_1)?_1.Class:_1._constructor,_3=this.rootLiveObject||_1;var _4={type:_2,_constructor:_2,defaults:_1,liveObject:_3};this.editNodeTree=isc.Tree.create({idField:"ID",root:_4,isFolder:function(){return true}})}
return this.editNodeTree},getEditNodeArray:function(){return this.getEditNodeTree().getAllNodes()},getEditComponents:function(){return this.getEditNodeArray()},canAddToParent:function(_1,_2){var _3=_1.liveObject;if(isc.isA.Class(_3)){return(_3.getObjectField(_2)!=null)}
return(isc.DS.getObjectField(_1,_2)!=null)},removeAll:function(){var _1=this.getEditNodeTree();var _2=_1.getChildren(_1.getRoot()).duplicate();for(var i=0;i<_2.length;i++){this.removeNode(_2[i])}},destroyAll:function(){var _1=this.getEditNodeTree();var _2=_1.getChildren(_1.getRoot()).duplicate();for(var i=0;i<_2.length;i++){this.destroyNode(_2[i])}},removeNode:function(_1,_2){var _3=this.getEditNodeTree();var _4=_3.getParent(_1);var _5=this.getLiveObject(_1);var _6=this.getLiveObject(_4);_3.remove(_1);if(_2)return;if(_6&&_5){isc.DS.removeChildObject(_6,_1.type,_5)}},removeComponent:function(_1,_2){return this.removeNode(_1,_2)},destroyNode:function(_1){var _2=this.getLiveObject(_1);this.removeNode(_1);if(_2.destroy)_2.destroy()},destroyComponent:function(_1){return this.destroyNode(_1)},getEditDataSource:function(_1){return isc.DataSource.getDataSource(_1.editDataSource||_1.Class||this.editDataSource)},$40l:function(_1){var _2=[];_2.addList(_1.baseEditFields);_2.addList(_1.editFields);for(var i=0;i<_2.length;i++){var _4=_2[i];if(_4.visible==null)_4.visible=true}
if(_2.length==0){_2=this.getEditDataSource(_1).getFields();_2=isc.getValues(_2)}
return _2},getEditFieldsList:function(_1){var _2=[],_3=this.$40l(_1);for(var i=0;i<_3.length;i++){var _5=_3[i];if(isc.isAn.Object(_5)){_2.add(_5.name)}else{_2.add(_5)}}
return _2},getEditFields:function(_1){var _2=this.$40l(_1);for(var i=0;i<_2.length;i++){var _4=_2[i];if(isc.isA.String(_4))_4={name:_4};if(_4.visible==null)_4.visible=true;_2[i]=_4}
return _2},serializeComponents:function(_1,_2){return this.serializeAllEditNodes(_1,_2)},serializeAllEditNodes:function(_1,_2){var _3=this.getEditNodeTree();var _4=_2?[_3.root]:_3.getChildren(_3.root).duplicate();return this.serializeEditNodes(_4,_1)},serializeAllEditNodesAsJSON:function(_1,_2){var _3=this.getEditNodeTree();var _4=_2?[_3.root]:_3.getChildren(_3.root).duplicate();return this.serializeEditNodesAsJSON(_4,_1)},serializeEditNodes:function(_1,_2){if(!_1)return null;return this.$1285(_1,_2)},serializeEditNodesAsJSON:function(_1,_2){if(!_1)return null;return this.$1285(_1,_2,"json")},$1285:function(_1,_2,_3){if(!isc.isAn.Array(_1))_1=[_1];for(var i=0;i<_1.length;i++){var _5=_1[i]=isc.addProperties({},_1[i]),_6=isc.ClassFactory.getClass(_5.type),_7=_5.defaults=isc.addProperties({},_5.defaults);if(_6&&_6.isA("Canvas")&&_7&&_7.visibility!=isc.Canvas.HIDDEN&&_7.autoDraw!==false)
{_7.autoDraw=true}}
this.serverless=_2;this.defaultsBlocks=[];this.map("getSerializeableTree",_1);this.serverless=null;var _8=(_3=="json"?isc.JSON.encode(this.defaultsBlocks):isc.EditContext.serializeDefaults(this.defaultsBlocks));return _8},getSerializeableTree:function(_1,_2){var _3=_1.liveObject;if(_3&&_3.updateEditNode&&_3.editContext&&_3.editNode){_1.liveObject.updateEditNode(_1.liveObject.editContext,_1.liveObject.editNode)}
var _4=_1.type,_5=isc.addProperties({},_1.defaults);var _6=isc.ClassFactory.getClass(_4);this.logInfo("node: "+this.echoLeaf(_1)+" with type: "+_4);if(_6&&_6.isA("DataSource")&&!_6.isA("MockDataSource")){if(this.defaultsBlocks){var _7=this.defaultsBlocks.find("ID",_5.ID)||this.defaultsBlocks.find("loadID",_5.ID);if(_7&&_7.$schemaId=="DataSource")return}
if(!this.serverless){_5={_constructor:"DataSource",$schemaId:"DataSource",loadID:_5.ID}}else{var _8=_1.liveObject;_5=_8.getSerializeableFields();_5._constructor=_8.Class;_5.$schemaId="DataSource"}}
isc.EditContext.convertActions(_1,_5,_6);var _9=this.getEditNodeTree().getChildren(_1);if(!_9){if(this.defaultsBlocks)this.defaultsBlocks.add(_5);return}
this.serializeChildData(_5,_9);if(_2)return _5;if(this.defaultsBlocks)this.defaultsBlocks.add(_5)},addChildData:function(_1,_2){return this.serializeChildData(_1,_2)},serializeChildData:function(_1,_2){var _3=isc.DS.get(_1._constructor);for(var i=0;i<_2.length;i++){var _5=_2[i],_6=_5.defaults._constructor,_7=isc.addProperties({},_5.defaults),_8=_7.parentProperty||_3.getObjectField(_6),_9=_3.getField(_8);this.logInfo("serializing: child of type: "+_6+" goes in parent field: "+_8,"editing");if((isc.isA.Canvas(_5.liveObject)&&!_5.liveObject._generated)||isc.isA.DataSource(_5.liveObject))
{if(isc.isA.DataSource(_5.liveObject)&&_8=="dataSource"){_7=_7.ID}else{_7="ref:"+_7.ID}
this.getSerializeableTree(_5)}else{_7=this.getSerializeableTree(_5,true)}
var _10=_1[_8];if(_9.multiple){if(!_10)_10=_1[_8]=[];_10.add(_7)}else{_1[_8]=_7}}},serializeEditComponents:function(){return this.serializeLiveObjects()},serializeLiveObjects:function(){var _1=this.getEditNodeArray(),_2=[];if(!_1)return[];for(var i=0;i<_1.length;i++){var _4=_1[i].liveObject,_5=_4.getUniqueProperties(),_6=this.getEditFieldsList(_4);_5._constructor=_4.Class;_5=isc.applyMask(_5,_6);_2.add(_5)}
return _2},loadNodeTreeFromXML:function(_1){this.addPaletteNodesFromXML(_1)},addPaletteNodesFromXML:function(_1,_2,_3,_4){var _5=this;isc.DMI.callBuiltin({methodName:"xmlToJS",arguments:[_1],callback:function(_6){_5.addPaletteNodesFromJS(_6.data,_2,_3,_4)}})},addPaletteNodesFromJSON:function(_1,_2,_3,_4){if(_3==null)_3=[];else if(!isc.isAn.Array(_3))_3=[_3];isc.captureDefaults=true;var _5=isc.JSON.decode(_1);var _6=(_3.length==1&&_3[0]==isc.RPC.ALL_GLOBALS);for(var i=0;i<_5.length;i++){var _8=_5[i],_9=_8._constructor;this.$1287(_8,_3);if(_9){delete _8._constructor;if(_8.ID&&!_6&&!_3.contains(_8.ID))_8.ID="_"+_8.ID;var _10=isc.ClassFactory.newInstance(_9,_8)}}
isc.captureDefaults=null;var _11=this.getCapturedComponents();this.$1288(_11,_3);this.addFromPaletteNodes(_11,_2);this.fireCallback(_4,["paletteNodes"],[_11])},$1287:function(_1,_2){var _3=(_2.length==1&&_2[0]==isc.RPC.ALL_GLOBALS);for(var _4 in _1){var _5=_1[_4];if(isc.isAn.Array(_5)){for(var i=0;i<_5.length;i++){if(isc.isA.String(_5[i])&&_5[i].startsWith("ref:")){var _7=_5[i].replace("ref:","");if(!_3&&!_2.contains(_7))_7="_"+_7;_5[i]=window[_7]}else if(isc.isAn.Object(_5[i])){this.$1287(_5[i],_2)}}}else if(isc.isAn.Object(_5)){this.$1287(_5,_2)}}},$1288:function(_1,_2){var _3=(_2.length==1&&_2[0]==isc.RPC.ALL_GLOBALS);if(_1.ID&&!_3&&!_2.contains(_1.ID))delete _1.ID;for(var _4 in _1){if(_4=="defaults")continue;var _5=_1[_4];if(isc.isAn.Array(_5)){for(var i=0;i<_5.length;i++){if(isc.isAn.Object(_5[i])){this.$1288(_5[i],_2)}}}else if(isc.isAn.Object(_5)){this.$1288(_5,_2)}}},getPaletteNodesFromXML:function(_1,_2){var _3=this;isc.DMI.callBuiltin({methodName:"xmlToJS",arguments:[_1],callback:function(_4){_3.getPaletteNodesFromJS(_4.data,_2)}})},loadNodeTreeFromJS:function(_1){return this.addPaletteNodesFromJS(_1)},addPaletteNodesFromJS:function(_1,_2,_3,_4){if(_3==null)_3=[];else if(!isc.isAn.Array(_3))_3=[_3];var _5=this;this.getPaletteNodesFromJS(_1,function(_6){this.$1288(_6,_3);_5.addFromPaletteNodes(_6,_2);_5.fireCallback(_4,["paletteNodes"],[_6])},_3)},getPaletteNodesFromJS:function(_1,_2,_3){if(_3==null)_3=[];else if(!isc.isAn.Array(_3))_3=[_3];var _4=this;isc.captureDefaults=true;if(_3.length==1&&_3[0]==isc.RPC.ALL_GLOBALS){isc.Class.globalEvalWithCapture(_1,function(_6,_7){isc.captureDefaults=null;var _5=_4.getCapturedComponents(_7);_4.fireCallback(_2,["paletteNodes"],[_5])},null,false)}else{isc.Class.globalEvalAndRestore(_1,_3,function(_6,_7){isc.captureDefaults=null;var _5=_4.getCapturedComponents(_7);_4.fireCallback(_2,["paletteNodes"],[_5])},null,false)}
isc.captureDefaults=null},getCapturedComponents:function(_1){if(_1){isc.warn("The following error occurred during loading of your view<br><br>: "+_1+".<br><br>  The portion of the view that loaded succesfully will be shown.")}
var _2=isc.capturedComponents;isc.capturedComponents=null;var _3=(_2?_2.getProperty("defaults").getProperty("ID"):null);this.logInfo("capturedComponents are: "+_3,"loadProject");return _2},addNodeTree:function(_1){this.addFromPaletteNodes(_1)},addFromPaletteNodes:function(_1,_2){var _3=this.getEditNodeTree();if(!_2)_2=_3.getRoot();this.componentsToCreate=[];this.addComponentCalls=[];this.requiredDataSources=[];for(var i=0;i<_1.length;i++){this.findChildPaletteNodes(null,_1[i],null,_1)}
for(var i=0;i<_1.length;i++){if(!_1[i].hasParent){this.findChildPaletteNodes(_2,_1[i],null,_1)}}
var _5,_6;for(var i=0;i<_1.length;i++){_5=_1[i];_5.component=this.makeEditNode(_5)}
for(var i=0;i<this.componentsToCreate.length;i++){_5=this.componentsToCreate[i];if(!_5.component){_5.component=this.makeEditNode(_5)}}
var _7=-1,_8=this.addComponentCalls,_9=[];isc.$75u=true;var _10=[];while(_8.length>0&&_7!=_8.length){_7=_8.length;var _11=_8.duplicate();for(var i=0;i<_11.length;i++){var _12=_11[i],_6=_12[1],_5=_12[0],_13=_12[2];if(_6.name=="/"){var _14=this.addNode(_5.component,_2);_10.add(_16);_8.remove(_12);_9.add(_12)}else if(_3.contains(_6.component)){var _15=_5.component;if(_3.contains(_15)){_15=isc.addProperties({},_15)}
var _16=this.addNode(_15,_6.component,null,_13);if(_6.component==_2){_10.add(_16)}
_8.remove(_12);_9.add(_12)}}}
delete isc.$75u;if(this.logIsDebugEnabled("loadProject")){this.logDebug("addComponent() calls during project loading:","loadProject");for(var i=0;i<_9.length;i++){var _12=_9[i],_6=_12[1],_5=_12[0];this.logDebug("addComponent("+this.echoLeaf(_5)+","+this.echoLeaf(_6),"loadProject")}}
if(_8.length>0){this.logWarn("the following components could not be added to the project tree: "+isc.echoAll(_8.getProperty("0")))}
return _10},makeDSPaletteNode:function(_1,_2){var _3={ID:_1,type:"DataSource",dsType:_2||"DataSource",title:_1,icon:"DataSource.png",iconSize:16,loadData:function(_3,_4){isc.DS.get(_3.ID,function(_5){_3.liveObject=_5;_3.defaults={_constructor:"DataSource",ID:_5.ID};_3.isLoaded=true;isc.Class.fireCallback(_4,"",[_3])})}};return _3},findChildPaletteNodes:function(_1,_2,_3,_4){var _5=_2.type||_2.className;var _6=this.logIsInfoEnabled("loadProject"),_7=this.logIsDebugEnabled("loadProject");if(_6){this.logInfo("inspecting defaults of component: "+this.echoLeaf(_2)+" of type: "+_5,"loadProject")}
var _8=_2.defaults,_9=this;var _10=[],_11=[],_12=isc.DS.get(_5);for(var _13 in _8){var _14=_8[_13];if(!isc.isAn.Array(_14)){_11[0]=_14;_14=_11}else if(_7){this.logDebug("checking Array property: "+_13+", value: "+this.echoLeaf(_14)+(_17?" with schema: "+_17:""),"loadProject")}
var _15=_12?_12.getField(_13):null,_16=_15?_15.type:null,_17=isc.DS.get(_16),_18=false;for(var i=0;i<_14.length;i++){var _20=_14[i];if(_7){this.logDebug("checking property: "+_13+", value: "+this.echoLeaf(_20),"loadProject")}
if(_4.contains(_20)){if(_6){this.logInfo("found capturedComponent: "+this.echoLeaf(_20)+" under property: "+_13+" of component: "+this.echoLeaf(_2),"loadProject")}
_10.add([_13,_20]);_18=true;continue}
if(_20==null){this.logInfo("null property: "+_13+" on component: "+this.echoLeaf(_2))}
var _21=(_20?_20._constructor:null)||_16,_22=isc.ClassFactory.getClass(_21);if(_17&&((_22&&_22.isA(isc.Canvas))||(_22&&_22.isA(isc.DataSource))||(_22&&_22.isA(isc.FormItem))||(this.findPaletteNode("type",_21))||(this.findPaletteNode("className",_21)))){if(_6){this.logInfo("found palettized component: "+this.echoLeaf(_20)+" of type: "+_21+" under property: "+_13+" of component: "+this.echoLeaf(_2),"loadProject")}
if(isc.isA.String(_20)){var _23=_4.find("ID",_20);if(_23==null){if(isc.DataSource.isA(_16)){var _24=this.findPaletteNode("ID",_20);if(true){_23=this.makeDSPaletteNode(_20)}}
if(_23==null)continue}
_10.add([_13,_23])}else{var _25=_20;_10.add([_13,{ID:_25.ID,name:_25.name,type:_21,defaults:_25}])}
_18=true}}
if(_18)delete _8[_13]}
var _26=this.findPaletteNode("type",_5)||this.findPaletteNode("className",_5);if(_26){_2.icon=_2.icon||_26.icon;_2.iconSize=_2.iconSize||_26.iconSize;_2.showDropIcon=_2.showDropIcon||_26.showDropIcon}
this.componentsToCreate.add(_2);if(_1!=null){_2.hasParent=true;this.addComponentCalls.add([_2,_1,_3])}
if(_10.length>0){for(var i=0;i<_10.length;i++){this.findChildPaletteNodes(_2,_10[i][1],_10[i][0],_4)}}},enableEditing:function(_1){var _2=_1.liveObject;if(_2.setEditMode){_2.setEditMode(true,this,_1)}else{_2.editContext=this;_2.editNode=_1;_2.editingOn=true}},setNodeProperties:function(_1,_2,_3){if(this.logIsDebugEnabled("editing")){this.logDebug("with editNode: "+this.echoLeaf(_1)+" applying properties: "+this.echo(_2),"editing")}
if(!_1.defaults)_1.defaults={}
isc.addProperties(_1.defaults,_2);if(_1.defaults.ID!=null)_1.ID=_1.defaults.ID;var _4=_1.liveObject;if(_4&&!_3){var _5=this.getEditNodeTree(),_6=this.getEditNodeTree().getParent(_1),_7=(_6?isc.DS.get(_6.type):null),_8=(_6?_6.liveObject:null),_9=(_8?isc.DS.getObjectField(_8,_1.type):null),_10=(_9?_7.fields[_9]:null);if(_2.name!=null&&_10&&_10.rebuildOnChange&&_10.rebuildOnChange.toLowerCase()=="true"){var _11=_5.getChildren(_6).findIndex(_1);this.logInfo("using remove/re-add cycle to modify liveObject: "+isc.echoLeaf(_4)+" within parent node "+isc.echoLeaf(_6));this.removeNode(_1);_1.name=_1.ID=_2.name;delete _2.name;this.addNode(_1,_6,_11);_4=this.getLiveObject(_1)}
if(_4.setEditableProperties){_4.setEditableProperties(_2);if(_4.markForRedraw)_4.markForRedraw();else if(_4.redraw)_4.redraw()}else{var _6=this.getEditNodeTree().getParent(_1),_8=_6?_6.liveObject:null;if(_8&&_8.setChildEditableProperties)
{_8.setChildEditableProperties(_4,_2,_1,this)}else{isc.addProperties(_4,_2)}}
this.markForRedraw()}},removeNodeProperties:function(_1,_2){if(!isc.isAn.Array(_2))_2=[_2];_2.map(function(_3){delete _1[_3]})},wrapperFormDefaults:{_constructor:"DynamicForm"},wrapperDrawPaneDefaults:{_constructor:"DrawPane"},addWithWrapper:function(_1,_2,_3){var _4=!_3,_5=(_3?this.wrapperDrawPaneDefaults:this.wrapperFormDefaults),_6=isc.addProperties({},_5),_7={type:_5._constructor,defaults:_6};if(_4&&_1.liveObject.schemaDataSource){var _8=_1.liveObject;_6.doNotUseDefaultBinding=true;_6.dataSource=_8.schemaDataSource;_6.serviceNamespace=_8.serviceNamespace;_6.serviceName=_8.serviceName}
var _9=this.makeEditNode(_7);this.addNode(_9,_2);return this.addNode(_1,_9)}});isc.ClassFactory.defineInterface("Palette");isc.Palette.addInterfaceProperties({setDefaultEditContext:function(_1){this.defaultEditContext=_1;if(_1&&!_1.defaultPalette){_1.defaultPalette=this}},makeEditNode:function(_1){if(!_1)_1=this.getDragData();if(isc.isAn.Array(_1))_1=_1[0];var _2=_1.type||_1.className;if(!isc.SGWTFactory.getFactory(_2)&&_2.contains("."))_2=_2.split(/\./).pop();var _3={type:_2,_constructor:_2,title:_1.title,icon:_1.icon,iconSize:_1.iconSize,showDropIcon:_1.showDropIcon,useEditMask:_1.useEditMask,autoGen:_1.autoGen};if(isc.isAn.Object(_1.editNodeProperties)){for(var _4 in _1.editNodeProperties){_3[_4]=_1.editNodeProperties[_4]}}
if(_1.makeComponent){_3.liveObject=_1.makeComponent(_3);return _3}
var _5=_1.defaults;_3.ID=_1.ID||(_5?isc.DS.getAutoId(_5):null);var _6=true;if(_1.loadData){_3.loadData=_1.loadData}else if(_1.wizardConstructor){_3.wizardConstructor=_1.wizardConstructor;_3.wizardDefaults=_1.wizardDefaults}else if(_1.liveObject){var _7=_1.liveObject;if(isc.isA.String(_7))_7=window[_7];_3.liveObject=_7}else{_3=this.createLiveObject(_1,_3);_6=false}
if(_6){_3.defaults=isc.addProperties({},_1.defaults);delete _3.defaults[isc.gwtRef];delete _3.defaults[isc.gwtModule];delete _3.defaults["xsi:type"]}
return _3},makeNewComponent:function(_1){return this.makeEditNode(_1)},generateNames:true,typeCount:{},getNextAutoId:function(_1){if(_1==null){_1="Object"}else{if(_1.contains("."))_1=_1.split(/\./).pop()}
var _2;this.typeCount[_1]=this.typeCount[_1]||0;while(window[(_2=_1+this.typeCount[_1]++)]!=null){}
return _2},findPaletteNode:function(_1,_2){return null},createLiveObject:function(_1,_2){var _3=_1.type||_1.className;if(_3.contains(".")&&!isc.SGWTFactory.getFactory(_3))_3=_3.split(/\./).pop();var _4=isc.ClassFactory.getClass(_3),_5=isc.DS.getNearestSchema(_3),_6={},_7=(_5?_5.shouldCreateStandalone():true),_8=_1.defaults||{};if(_4&&_4.isA("Canvas"))_6.autoDraw=false;if(_8.title){_6.title=_8.title}
if(this.generateNames){var _9=_2.ID||_8[_5.getAutoIdField()];if(_9==null){_9=this.getNextAutoId(_3);if(isc.isA.Class(_4)){_6.hasStableID=function(){return false}}}
_2.ID=_9;_6[_5.getAutoIdField()]=_9;if(_5&&_5.getField("title")&&!isc.isA.FormItem(_4)&&!_6.title){_6.title=_9}}
_6=_2.defaults=isc.addProperties(_6,this.componentDefaults,_8);delete _6[isc.gwtRef];delete _6[isc.gwtModule];delete _6["xsi:type"];_6._constructor=_3;var _4=isc.ClassFactory.getClass(_3);for(var _10 in _6){var _11=_6[_10];if(isc.isAn.Array(_11)&&(!_4||_4.getInstanceProperty(_10)!==_11)){_11=_6[_10]=_11.duplicate();for(var i=_11.length;i--;){if(isc.isAn.Array(_11[i])){_11[i]=_11[i].duplicate()}}}}
var _13;if(_4&&_7){_13=isc.ClassFactory.newInstance(_6)}else{_2.generatedType=true;_13=isc.shallowClone(_6)}
_2.liveObject=_13;this.logInfo("palette created component, type: "+_3+", ID: "+_9+(this.logIsDebugEnabled("editing")?", defaults: "+this.echo(_6):"")+", liveObject: "+this.echoLeaf(_13),"editing");return _2}});isc.defineClass("HiddenPalette","Class","Palette");if(isc.TreeGrid){isc.defineClass("TreePalette","TreeGrid","Palette");isc.A=isc.TreePalette.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.canDragRecordsOut=true;isc.B.push(isc.A.recordDoubleClick=function isc_TreePalette_recordDoubleClick(){var _1=this.defaultEditContext;if(_1){if(isc.isA.String(_1)&&this.creator)_1=this.creator[_1];if(isc.isAn.EditContext(_1)){var _2=this.makeEditNode(this.getDragData());if(_2){if(_1.getDefaultParent(_2,true)==null){isc.warn("No default parent can accept a component of this type")}else{_1.addNode(_2);isc.EditContext.selectCanvasOrFormItem(_2.liveObject,true)}}}}},isc.A.findPaletteNode=function isc_TreePalette_findPaletteNode(_1,_2){return this.data?this.data.find(_1,_2):null},isc.A.transferDragData=function isc_TreePalette_transferDragData(_1){return[this.makeEditNode(this.getDragData())]});isc.B._maxIndex=isc.C+3}
if(isc.ListGrid){isc.defineClass("ListPalette","ListGrid","Palette");isc.A=isc.ListPalette.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.canDragRecordsOut=true;isc.A.defaultFields=[{name:"title",title:"Title"}];isc.B.push(isc.A.recordDoubleClick=function isc_ListPalette_recordDoubleClick(){var _1=this.defaultEditContext;if(_1){if(isc.isA.String(_1))_1=isc.Canvas.getById(_1);if(isc.isAn.EditContext(_1)){_1.addNode(this.makeEditNode(this.getDragData()))}}},isc.A.findPaletteNode=function isc_ListPalette_findPaletteNode(_1,_2){return this.data?this.data.find(_1,_2):null},isc.A.transferDragData=function isc_ListPalette_transferDragData(){return[this.makeEditNode(this.getDragData())]});isc.B._maxIndex=isc.C+3}
if(isc.TileGrid){isc.defineClass("TilePalette","TileGrid","Palette");isc.A=isc.TilePalette.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.canDragRecordsOut=true;isc.A.defaultFields=[{name:"title",title:"Title"}];isc.B.push(isc.A.recordDoubleClick=function isc_TilePalette_recordDoubleClick(){var _1=this.defaultEditContext;if(_1){if(isc.isA.String(_1))_1=isc.Canvas.getById(_1);if(isc.isAn.EditContext(_1)){_1.addNode(this.makeEditNode(this.getDragData()))}}},isc.A.findPaletteNode=function isc_TilePalette_findPaletteNode(_1,_2){return this.data?this.data.find(_1,_2):null},isc.A.transferDragData=function isc_TilePalette_transferDragData(){return[this.makeEditNode(this.getDragData())]});isc.B._maxIndex=isc.C+3}
if(isc.Menu){isc.defineClass("MenuPalette","Menu","Palette");isc.A=isc.MenuPalette.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.canDragRecordsOut=true;isc.A.selectionType="single";isc.B.push(isc.A.itemClick=function isc_MenuPalette_itemClick(_1){var _2=this.defaultEditContext;if(_2){if(isc.isA.String(_2))_2=isc.Canvas.getById(_2);if(isc.isAn.EditContext(_2)){_2.addNode(this.makeEditNode(this.getDragData()))}}},isc.A.findPaletteNode=function isc_MenuPalette_findPaletteNode(_1,_2){return this.data?this.data.find(_1,_2):null},isc.A.transferDragData=function isc_MenuPalette_transferDragData(){return[this.makeEditNode(this.getDragData())]});isc.B._maxIndex=isc.C+3}
if(!isc.DataSource.get("EditPane")){isc.DataSource.create({ID:"EditPane",Contructor:"EditPane",addGlobalId:false,fields:[{name:"children",type:"Canvas",multiple:true}]})}
isc.ClassFactory.defineClass("EditPane","Canvas","EditContext");isc.A=isc.EditPane.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.canAcceptDrop=true;isc.A.contextMenu={autoDraw:false,data:[{title:"Clear",click:"target.removeAll()"}]};isc.A.editingOn=true;isc.A.canDrag=true;isc.A.dragAppearance="none";isc.A.overflow="hidden";isc.A.selectedComponents=[];isc.A.canMultiSelect=true;isc.A.outlineBorderStyle="2px dashed red";isc.B.push(isc.A.initWidget=function isc_EditPane_initWidget(){this.rootLiveObject=this;this.rootComponent={_constructor:"EditPane"};this.Super("initWidget",arguments)},isc.A.getObjectField=function isc_EditPane_getObjectField(_1){var _2=isc.ClassFactory.getClass(_1);if(isc.isA.Canvas(_2)){return"children"}else{return null}},isc.A.drop=function isc_EditPane_drop(){var _1=isc.EH.dragTarget;if(!_1.isA("Palette"))return this.Super("drop",arguments);var _2=_1.transferDragData(),_3=(isc.isAn.Array(_2)?_2[0]:_2);if(!_3)return false;var _4=this;this.requestLiveObject(_3,function(_3){if(_3)_4.addNodeAtCursor(_3)},_1)
return isc.EH.STOP_BUBBLING},isc.A.nodeAdded=function isc_EditPane_nodeAdded(_1){if(this.creator&&this.creator.editingOn)this.enableEditing(_1);if(_1.useEditMask)_1.liveObject.showEditMask()},isc.A.addNodeAtCursor=function isc_EditPane_addNodeAtCursor(_1){this.addNode(_1);var _2=_1.liveObject;_2.moveTo(this.getOffsetX(),this.getOffsetY())},isc.A.getDefaultParent=function isc_EditPane_getDefaultParent(_1,_2){return this.getEditNodeTree().getRoot()},isc.A.removeChild=function isc_EditPane_removeChild(_1,_2){this.Super("removeChild",arguments);var _3=this.getEditNodeArray().find("liveObject",_1);if(_3){this.removeNode(_3,true)}
this.selectedComponents.remove(_1)},isc.A.removeSelection=function isc_EditPane_removeSelection(_1){if(this.selectedComponents.length>0){while(this.selectedComponents.length>0){this.selectedComponents[0].destroy()}}else{_1.destroy()}},isc.A.click=function isc_EditPane_click(){isc.Canvas.hideResizeThumbs()},isc.A.setEditMode=function isc_EditPane_setEditMode(_1){if(_1==null)_1=true;if(this.editingOn==_1)return;this.editingOn=_1;var _2=this.getEditNodeArray().getProperty("liveObject");_2.map("setEditMode",_1,this)},isc.A.childResized=function isc_EditPane_childResized(_1){var _2=this.Super("childResized",arguments);this.saveCoordinates(_1);return _2},isc.A.childMoved=function isc_EditPane_childMoved(_1,_2,_3){var _4=this.Super("childMoved",arguments);this.saveCoordinates(_1);if(!this.$128p){var _5=this.selectedComponents;if(_5.length>0&&_5.contains(_1)){this.$128p=true;for(var i=0;i<_5.length;i++){if(_5[i]!=_1){_5[i].moveBy(_2,_3)}}
this.$128p=false}}
return _4},isc.A.saveCoordinates=function isc_EditPane_saveCoordinates(_1){if(!this.persistCoordinates)return;var _2=this.getEditNodeArray().find("liveObject",_1);if(!_2)return;this.setNodeProperties(_2,{left:_1.getLeft(),top:_1.getTop(),width:_1._percent_width||_1.$pn||_1.getWidth(),height:_1._percent_height||_1.$po||_1.getHeight()},true)},isc.A.getSaveData=function isc_EditPane_getSaveData(){var _1=this.getEditNodeTree(),_2=_1.getChildren(_1.getRoot()),_3=[];for(var i=0;i<_2.length;i++){var _5=_2[i],_6=_5.liveObject;var _7={type:_5.type,defaults:_5.defaults};if(_6.getSaveData)_7=_6.getSaveData(_7);_3.add(_7)}
return _3},isc.A.mouseDown=function isc_EditPane_mouseDown(){if(!this.editingOn||!this.canMultiSelect||isc.EH.getTarget()!=this)return;var _1=isc.EH.getTarget();if(this.selector==null){this.selector=isc.Canvas.create({autoDraw:false,keepInParentRect:true,left:isc.EH.getX(),top:isc.EH.getY(),redrawOnResize:false,overflow:"hidden",border:"1px solid blue"});this.addChild(this.selector)}
this.startX=this.getOffsetX();this.startY=this.getOffsetY();this.resizeSelector();this.selector.show()},isc.A.dragMove=function isc_EditPane_dragMove(){if(this.selector)this.resizeSelector()},isc.A.mouseUp=function isc_EditPane_mouseUp(){if(this.selector)this.selector.hide()},isc.A.dragStop=function isc_EditPane_dragStop(){if(this.selector)this.selector.hide()},isc.A.setOutline=function isc_EditPane_setOutline(_1){if(!_1)return;if(!isc.isAn.Array(_1))_1=[_1];for(var i=0;i<_1.length;i++){_1[i].$40i.setBorder(this.outlineBorderStyle)}},isc.A.clearOutline=function isc_EditPane_clearOutline(_1){if(!_1)return;if(!isc.isAn.Array(_1))_1=[_1];for(var i=0;i<_1.length;i++){_1[i].$40i.setBorder("none")}},isc.A.updateCurrentSelection=function isc_EditPane_updateCurrentSelection(){if(!this.children)return;var _1=this.selectedComponents;this.selectedComponents=[];for(var i=0;i<this.children.length;i++){var _3=this.children[i];if(this.selector.intersects(_3)){_3=this.deriveSelectedComponent(_3);if(_3&&!this.selectedComponents.contains(_3)){this.selectedComponents.add(_3)}}}
this.setOutline(this.selectedComponents);_1.removeList(this.selectedComponents);this.clearOutline(_1);var _4=this.selectedComponents.getProperty("ID");window.status=_4.length?"Current Selection: "+_4:""},isc.A.deriveSelectedComponent=function isc_EditPane_deriveSelectedComponent(_1){if(_1.masterElement)return this.deriveSelectedComponent(_1.masterElement);if(!_1.parentElement||_1.parentElement==this){if(_1.$40i)return _1;return null}
return this.deriveSelectedComponent(_1.parentElement)},isc.A.resizeSelector=function isc_EditPane_resizeSelector(){var x=this.getOffsetX(),y=this.getOffsetY();if(this.selector.keepInParentRect){if(x<0)x=0;var _3=this.selector.parentElement.getVisibleHeight();if(y>_3)y=_3}
this.selector.resizeTo(Math.abs(x-this.startX),Math.abs(y-this.startY));if(x<this.startX)this.selector.setLeft(x);else this.selector.setLeft(this.startX);if(y<this.startY)this.selector.setTop(y);else this.selector.setTop(this.startY);this.updateCurrentSelection()},isc.A.getSelectedComponents=function isc_EditPane_getSelectedComponents(){return this.selectedComponents.duplicate()});isc.B._maxIndex=isc.C+24;if(isc.TreeGrid){isc.ClassFactory.defineClass("EditTree","TreeGrid","EditContext");isc.A=isc.EditTree.getPrototype();isc.A.canDragRecordsOut=false;isc.A.canAcceptDroppedRecords=true;isc.A.canReorderRecords=true;isc.A.fields=[{name:"ID",title:"ID",width:"*"},{name:"type",title:"Type",width:"*"}];isc.A.selectionType=isc.Selection.SINGLE;isc.A.autoShowParents=true;isc.A=isc.EditTree.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.initWidget=function isc_EditTree_initWidget(){this.Super("initWidget",arguments);this.setData(this.getEditNodeTree())},isc.A.willAcceptDrop=function isc_EditTree_willAcceptDrop(){if(!this.Super("willAcceptDrop",arguments))return false;var _1=this.getEventRow(),_2=this.getDropFolder(),_3=this.ns.EH.dragTarget.getDragData();if(_3==null)return false;if(isc.isAn.Array(_3)){if(_3.length==0)return false;_3=_3[0]}
if(_2==null)_2=this.data.getRoot();var _4=_3.type||_3.className;this.logInfo("checking dragType: "+_4+" against dropLiveObject: "+_2.liveObject,"editing");return this.canAddToParent(_2,_4)},isc.A.folderDrop=function isc_EditTree_folderDrop(_1,_2,_3,_4){if(_4!=this&&!_4.isA("Palette")){return this.Super("folderDrop",arguments)}
if(_4!=this){_1=_4.transferDragData()}
var _5=(isc.isAn.Array(_1)?_1[0]:_1);_5.dropped=true;this.logInfo("sourceWidget is a Palette, dropped node of type: "+_5.type,"editing");var _6=this;this.requestLiveObject(_5,function(_11){if(_11==null)return;var _7=_4==_6;if(_7){var _8=this.data.getParent(_5);if(_2==_8){var _9=this.data.getChildren(_8).indexOf(_5);if(_9!=null&&_9<=_3)_3--}
_6.removeNode(_5)}
_6.addNode(_11,_2,_3);if(!_7&&_11&&_2&&(_11.type||_11.className)=="Tab"&&(_2.type||_2.className)=="TabSet"){var _10=_2.liveObject;if(_10)_10.editModeAddDefaultPane(_11)}},_4)},isc.A.nodeAdded=function isc_EditTree_nodeAdded(_1){this.selection.selectSingle(_1);if(this.autoShowParents)this.showParents(_1);if(this.creator&&this.creator.editingOn)this.enableEditing(_1)},isc.A.getDefaultParent=function isc_EditTree_getDefaultParent(_1,_2){var _3=_1.type||_1.className,_4=this.getSelectedRecord();while(_4&&!this.canAddToParent(_4,_3))_4=this.data.getParent(_4);var _5=this.data.getRoot()
if(_2){if(!_4&&this.canAddToParent(_5,_3))return _5;return _4}
return _4||_5},isc.A.showParents=function isc_EditTree_showParents(_1){var _2=this.data.getParents(_1),_3=_2.findAll("type","Tab");if(_3){for(var i=0;i<_3.length;i++){var _5=_3[i],_6=this.data.getParent(_5),_7=this.getLiveObject(_5),_8=this.getLiveObject(_6);_8.selectTab(_7)}}});isc.B._maxIndex=isc.C+6}
isc.ClassFactory.defineClass("FormItemProxyCanvas","Canvas");isc.A=isc.FormItemProxyCanvas.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.autoDraw=false;isc.A.canDrop=true;isc.B.push(isc.A.setFormItem=function isc_FormItemProxyCanvas_setFormItem(_1){this.formItem=_1;this.syncWithFormItemPosition();this.sendToBack();this.show()},isc.A.syncWithFormItemPosition=function isc_FormItemProxyCanvas_syncWithFormItemPosition(){if(!this.formItem||!this.formItem.form)return;this.setPageLeft(this.formItem.getPageLeft());this.setPageTop(this.formItem.getPageTop());this.setWidth(this.formItem.getVisibleWidth());this.setHeight(this.formItem.getVisibleHeight())});isc.B._maxIndex=isc.C+2;if(!(isc.licenseType=="Enterprise"||isc.licenseType=="Eval"||isc.licenseType=="AllModules"||isc.licenseType.contains("licenseType")))
{["EditContext","Palette","HiddenPalette","TreePalette","ListPalette","TilePalette","MenuPalette","EditPane","EditTree","FormItemProxyCanvas"].map(function(_1){isc[_1].$1226=true})}
if(isc.DynamicForm){isc.defineClass("PropertySheet","DynamicForm");isc.A=isc.PropertySheet.getPrototype();isc.A.autoChildItems=true;isc.A.browserSpellCheck=false;isc.A.autoChildDefaults={cellStyle:"propSheetValue",titleStyle:"propSheetTitle",showHint:false};isc.A.GroupItemDefaults={cellStyle:null};isc.A.ExpressionItemDefaults={width:"*",height:18,showActionIcon:true};isc.A.ActionMenuItemDefaults={width:"*",height:18};isc.A.SelectItemDefaults={height:20,width:"*"};isc.A.DateItemDefaults={width:"*"};isc.A.TextItemDefaults={width:"*",height:20};isc.A.StaticTextItemDefaults={width:"*",height:20,textBoxStyle:"propSheetField"};isc.A.ColorItemDefaults={width:"*",height:16,pickerIconHeight:16,pickerIconWidth:16,pickerIconSrc:"[SKIN]/DynamicForm/PropSheet_ColorPicker_icon.png",textBoxStyle:"propSheetField"};isc.A.HeaderItemDefaults={cellStyle:"propSheetHeading"};isc.A.TextAreaItemProperties={width:"*"};isc.A.CheckboxItemDefaults={showTitle:true,showLabel:false,getTitleHTML:function(){if(this[this.form.titleField]!=null)return this[this.form.titleField];return this[this.form.fieldIdProperty]}};isc.A.SectionItemDefaults={cellStyle:"propSheetSectionHeaderCell"};isc.A.titleAlign="left";isc.A.titleWidth=120;isc.A.cellSpacing=0;isc.A.cellPadding=0;isc.A.backgroundColor="white";isc.A.requiredTitlePrefix="<span style='color:green'>";isc.A.requiredTitleSuffix="</span>";isc.A.titleSuffix="";isc.A.clipItemTitles=true}
if(isc.ListGrid&&isc.DynamicForm){isc.defineClass("ListEditor",isc.Layout);isc.A=isc.ListEditor.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.vertical=false;isc.A.gridConstructor=isc.ListGrid;isc.A.gridDefaults={editEvent:"click",listEndEditAction:"next",autoParent:"gridLayout",selectionType:isc.Selection.SINGLE,recordClick:"this.creator.recordClick(record)",editorEnter:"if (this.creator.moreButton) this.creator.moreButton.enable()",selectionChanged:function(){if(this.anySelected()&&this.creator.moreButton){this.creator.moreButton.enable()}},contextMenu:{data:[{title:"Remove",click:"target.creator.removeRecord()"}]}};isc.A.gridButtonsDefaults={_constructor:isc.HLayout,autoParent:"gridLayout",height:10,width:10,layoutMargin:6,membersMargin:10,overflow:isc.Canvas.VISIBLE};isc.A.newButtonTitle="New";isc.A.newButtonDefaults={_constructor:isc.AutoFitButton,autoParent:"gridButtons",click:"this.creator.newRecord()"};isc.A.moreButtonTitle="More..";isc.A.moreButtonDefaults={_constructor:isc.AutoFitButton,autoParent:"gridButtons",click:"this.creator.editMore()",disabled:true};isc.A.removeButtonTitle="Remove";isc.A.removeButtonDefaults={_constructor:isc.AutoFitButton,autoParent:"gridButtons",click:"this.creator.removeRecord()"};isc.A.formDefaults={_constructor:isc.DynamicForm,autoParent:"formLayout",overflow:isc.Canvas.AUTO};isc.A.formButtonsDefaults={_constructor:isc.HLayout,autoParent:"formLayout",height:10,width:10,layoutMargin:6,membersMargin:10,overflow:isc.Canvas.VISIBLE};isc.A.saveButtonTitle="Save";isc.A.saveButtonDefaults={_constructor:isc.AutoFitButton,autoParent:"formButtons",click:"this.creator.saveRecord();"};isc.A.cancelButtonTitle="Cancel";isc.A.cancelButtonDefaults={_constructor:isc.AutoFitButton,autoParent:"formButtons",click:"this.creator.cancelChanges()"};isc.A.resetButtonTitle="Reset";isc.A.resetButtonDefaults={_constructor:isc.AutoFitButton,autoParent:"formButtons",click:"this.creator.form.resetValues()"};isc.A.gridLayoutDefaults={_constructor:isc.VLayout};isc.A.gridButtonsOrientation="left";isc.A.formLayoutDefaults={_constructor:isc.VLayout,autoFocus:true};isc.A.animateMembers=true;isc.A.membersMargin=10;isc.A.confirmLoseChangesMessage="Discard changes?";isc.A.formGroup=["formLayout","form","formButtons","saveButton","cancelButton","resetButton"];isc.A.gridButtonsGroup=["gridButtons","newButton","moreButton"];isc.B.push(isc.A.draw=function isc_ListEditor_draw(){if(isc.$cv)arguments.$cw=this;if(!this.readyToDraw())return this;return this.Super("draw",arguments)},isc.A.initWidget=function isc_ListEditor_initWidget(){this.Super("initWidget",arguments);if(!this.inlineEdit)this.showMoreButton=this.showMoreButton||false;this.addAutoChild("gridLayout");this.addAutoChild("grid",{_constructor:this.gridConstructor});this.addAutoChildren(this.gridButtonsGroup);this.addAutoChildren(this.formGroup)},isc.A.configureAutoChild=function isc_ListEditor_configureAutoChild(_1,_2){if(isc.isA.Button(_1))_1.title=this[_2+"Title"];if(_1==this.grid){_1.dataSource=this.dataSource;_1.fields=this.fields;_1.saveLocally=this.saveLocally;_1.canEdit=this.inlineEdit}
if(this.gridButtonsOrientation==isc.Canvas.RIGHT){if(_1==this.gridLayout)_1.vertical=false;if(_1==this.formLayout)_1.vertical=false;if(_1==this.gridButtons)_1.vertical=true;if(_1==this.formButtons)_1.vertical=true}
if(_1==this.form){_1.dataSource=this.dataSource;_1.fields=this.formFields}
if(this.inlineEdit){if(_1==this.formLayout)_1.visibility=isc.Canvas.HIDDEN}else{if(_1==this.gridLayout)_1.showResizeBar=true}},isc.A.setDataSource=function isc_ListEditor_setDataSource(_1,_2){this.dataSource=_1||this.dataSource;if(this.grid!=null){this.grid.setDataSource(_1,_2);this.form.setDataSource(_1,_2)}},isc.A.setData=function isc_ListEditor_setData(_1){if(_1==null)_1=[];if(_1.dataSource)this.setDataSource(_1.dataSource);if(this.grid!=null){this.grid.setData(_1);this.form.clearValues()}else{isc.addProperties(this.gridDefaults,this.gridProperties||{},{data:_1})}},isc.A.getData=function isc_ListEditor_getData(){if(this.inlineEdit)this.grid.endEditing();return this.grid.getData()},isc.A.cancelChanges=function isc_ListEditor_cancelChanges(){this.form.clearValues();this.showList()},isc.A.showList=function isc_ListEditor_showList(){if(this.inlineEdit){this.formLayout.animateHide({effect:"wipe",startFrom:"R"});this.gridLayout.animateShow({effect:"wipe",startFrom:"R"})}},isc.A.showForm=function isc_ListEditor_showForm(){if(this.inlineEdit){this.gridLayout.animateHide({effect:"wipe",startFrom:"R"});this.formLayout.animateShow({effect:"wipe",startFrom:"R"})}},isc.A.recordClick=function isc_ListEditor_recordClick(_1){if(this.inlineEdit)return;var _2=this;var _3=function(_4){if(_4){_2.currentRecord=_1;if(!_2.inlineEdit)_2.form.editRecord(_1);_2.form.setValues(isc.addProperties({},_2.grid.getSelectedRecord()))}}
if(!this.form.valuesHaveChanged())_3(true);else this.confirmLoseChanges(_3)},isc.A.getEditRecord=function isc_ListEditor_getEditRecord(){var _1=this.grid.getEditRow();if(_1!=null){return this.grid.getEditedRecord(_1)}else{return isc.addProperties({},this.grid.getSelectedRecord())}},isc.A.editMore=function isc_ListEditor_editMore(){this.currentRecord=this.getEditRecord();this.showForm();this.form.setValues(this.currentRecord)},isc.A.newRecord=function isc_ListEditor_newRecord(){if(this.inlineEdit)return this.grid.startEditingNew();var _1=this;var _2=function(_3){if(_3){_1.grid.deselectAllRecords();_1.showForm();_1.form.editNewRecord()}}
if(!this.form.valuesHaveChanged())_2(true);else this.confirmLoseChanges(_2)},isc.A.removeRecord=function isc_ListEditor_removeRecord(){this.form.clearValues();this.grid.removeSelectedData()},isc.A.saveRecord=function isc_ListEditor_saveRecord(){if(!this.form.validate())return false;var _1=this.form.getValues();this.showList();if(this.form.saveOperationType=="add"){this.grid.addData(_1)}else{if(this.inlineEdit&&this.grid.getEditRow()!=null){var _2=this.grid.getEditRow();if(this.grid.data[_2]!=null)this.grid.updateData(_1)
else this.grid.setEditValues(_2,_1)}else{this.grid.updateData(_1)}}
return true},isc.A.confirmLoseChanges=function isc_ListEditor_confirmLoseChanges(_1){isc.confirm(this.confirmLoseChangesMessage,_1)},isc.A.validate=function isc_ListEditor_validate(){if(this.form.isVisible()&&this.form.valuesHaveChanged()){return this.form.validate()}
return true});isc.B._maxIndex=isc.C+17}
isc.ClassFactory.defineClass("ViewLoader",isc.Label);isc.A=isc.ViewLoader.getPrototype();isc.A.loadingMessage="Loading View...&nbsp;${loadingImage}";isc.A.align=isc.Canvas.CENTER;isc.A.allowContentAndChildren=true;isc.A.httpMethod="GET";isc.A.useSimpleHttp=true;isc.A.transformXML=true;isc.A.overflow="hidden";isc.A=isc.ViewLoader.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.initWidget=function isc_ViewLoader_initWidget(){this.Super(this.$oc);if(this.placeholder)this.addChild(this.placeholder);else this.contents=this.getLoadingMessage()},isc.A.draw=function isc_ViewLoader_draw(){if(!this.readyToDraw())return this;this.Super("draw",arguments);if(this.view){this.addChild(this.view);this.view.show()}else if(this.viewURL&&!this.loadingView()){this.setViewURL()}
return this},isc.A.layoutChildren=function isc_ViewLoader_layoutChildren(){this.Super("layoutChildren",arguments);var _1=this.children;if(!_1||_1.length==0)return;var _2=this.children[0],_3=this.getWidth(),_4=this.getHeight();if(_2.$pn!=null)_3=null;if(_2.$po!=null)_4=null;_2.setRect(0,0,_3,_4)},isc.A.destroy=function isc_ViewLoader_destroy(){if(this.placeholder)this.placeholder.destroy();if(this.view)this.view.destroy();this.Super("destroy",arguments)},isc.A.setPlaceholder=function isc_ViewLoader_setPlaceholder(_1){if(this.placeholder)this.placeholder.destroy();this.placeholder=_1;this.addChild(_1);this.placeholder.sendToBack()},isc.A.setViewURL=function isc_ViewLoader_setViewURL(_1,_2,_3){if(_1!=null)this.viewURL=_1;_1=this.viewURL;if(this.placeholder){this.placeholder.show();this.placeholder.bringToFront()}
if(this.view!=null){this.view.hide();this.setContents(this.getLoadingMessage())}
var _4={},_5=this.useSimpleHttp,_6=this.httpMethod,_7=false;if(!isc.rpc.xmlHttpRequestAvailable()){this.logInfo("XMLHttpRequest not available, using frames comm and expecting RPCResponse");_4={};_5=false;_6="POST";_7=false}
var _8=isc.addProperties({showPrompt:false,actionURL:this.viewURL,httpMethod:_6,useSimpleHttp:_5,bypassCache:!this.allowCaching,params:isc.addProperties(_4,this.viewURLParams,_2)},this.viewRPCProperties,_3,{evalResult:_7,suppressAutoDraw:true,willHandleError:true,callback:"if(window."+this.getID()+")"+this.getID()+".$40p(rpcRequest, rpcResponse, data)"});if(!_8.evalVars)_8.evalVars={};_8.evalVars.viewLoader=this;this.$40t=isc.rpc.sendProxied(_8,true).transactionNum},isc.A.loadingView=function isc_ViewLoader_loadingView(){return this.$40t!=null},isc.A.$40p=function isc_ViewLoader__loadViewReply(_1,_2,_3){if(_1.transactionNum!=this.$40t){return}
delete this.$40t;this.$40q=false;if(_2.status!=isc.RPCResponse.STATUS_SUCCESS){if(this.handleError(_1,_2)===false)return}
try{if(_1.actionURL.endsWith(".xml")&&this.transformXML){var _4=isc.Canvas._canvasList;var _5=_4.length;isc.xml.toComponents(_3);if(!this.$40q){for(var i=_4.length;i>=_5;i--){var _7=_4[i];if(_7!=null&&isc.isA.Canvas(_7)&&_7.parentElement==null&&_7.masterElement==null)
{this.setView(this.transformView(_7));break}}}
this.$40r()}else{var _8=this;isc.Class.globalEvalWithCapture(_3,function(_9,_10){isc.Log.logWarn("firing the callback from global eval with...");isc.Log.logWarn('viewLoader is:'+_8);if(_10){_8.handleError(_1,_2,_10)}else{_8.$40r(_9)}},_1.evalVars)}}catch(e){this.handleError(_1,_2,e)}},isc.A.$40r=function isc_ViewLoader__loadViewReplyComplete(_1){if(!this.$40q&&_1){for(var i=_1.length;i>=0;i--){var _3=_1[i];var _4=window[_3];if(_4&&isc.isA.Canvas(_4)&&_4.parentElement==null&&_4.masterElement==null)
{this.setView(this.transformView(_4));break}}}
if(!this.$40q){this.logWarn("setView() not explicitly called by loaded view and could not be autodetected for view: "+this.getID())}
this.viewLoaded(this.view)},isc.A.transformView=function isc_ViewLoader_transformView(_1){return _1},isc.A.handleError=function isc_ViewLoader_handleError(_1,_2,_3){this.logWarn("ViewLoader received bad response:\n"+isc.echo(_2.data));this.setView(isc.Label.create({contents:_3?_3.toString():_2.data}));return false},isc.A.setView=function isc_ViewLoader_setView(_1){if(_1!=null&&_1==this.view)return;this.$40q=true;this.setContents("&nbsp;");if(this.view)this.view.destroy();this.view=_1;if(_1==null)return;this.addChild(_1,null,false);this.layoutChildren();_1.draw();this.logInfo("showing view: "+_1);if(this.placeholder)this.placeholder.hide();this.contents="&nbsp;"},isc.A.getView=function isc_ViewLoader_getView(){return this.view},isc.A.viewLoaded=function isc_ViewLoader_viewLoaded(_1){},isc.A.getLoadingMessage=function isc_ViewLoader_getLoadingMessage(){return this.loadingMessage==null?"&nbsp;":this.loadingMessage.evalDynamicString(this,{loadingImage:this.imgHTML(isc.Canvas.loadingImageSrc,isc.Canvas.loadingImageSize,isc.Canvas.loadingImageSize)})});isc.B._maxIndex=isc.C+15;isc.ClassFactory.defineClass("HTMLFlow","Canvas");isc.A=isc.HTMLFlow;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$49v=0;isc.A.$49w=[];isc.B.push(isc.A.executeScript=function isc_c_HTMLFlow_executeScript(_1,_2,_3){this.$49w[this.$49v]={callback:_2,displayErrors:_3};this.$49v++;this.getScript(_1,"isc.HTMLFlow.$49x("+this.$49v+",htmlFragments, scripts);")},isc.A.$49x=function isc_c_HTMLFlow__completeExecuteScript(_1,_2,_3){var _4=this.$49w[_1];delete this.$49w[_1];var _5=true;for(var i=0;i<this.$49w.length;i++){if(this.$49w[i]!=null){_5=false;break}}
if(_5)this.$49v=0;isc.Class.globalEvalWithCapture(_3,_4.callback,null,_4.displayErrors)},isc.A.getScript=function isc_c_HTMLFlow_getScript(_1,_2,_3,_4){var _5=_1;var _6,_7,_8,_9;while((_6=_1.match(/<!--/i))!=null){_7=_1.match(/-->/i);if(_7==null||(_7.index<_6.index)){this.logWarn('HTMLFlow content contains an opening comment tag "<!--" with no closing tag "-->", or vice versa. We recommend you review this HTML (original HTML follows):\n'+_5);if(_7){_8=_7.index;_9=_8+3}else{_8=_6.index;_9=_8+4}}else{_8=_6.index;_9=_7.index+3}
_1=_1.slice(0,_8)+_1.slice(_9,_1.length)}
var _10=[];var _11=[];var _12=[];var _13=_1;_1=null;var _14;while((_14=_13.match(/(<script([^>]*)?>)/i))!=null){var _15=_14[1];_12.add(_13.slice(0,_14.index));_10.add(null);_11.add(null);_13=_13.slice(_14.index+_15.length,_13.length)
var _16=_13.match(/<\/script>/i),_17=_13.match(/(<script([^>]*)?>)/i);if(_16==null||(_17&&(_16.index>_17.index))){this.logWarn("HTMLFlow content contains an opening <script ...> tag with no closing tag, or vice versa. Stripping out this tag:"+_15);continue}
var _18=_13.slice(0,_16.index);_13=_13.slice(_16.index+9,_13.length);var _19=(_15.match(/<script\s*(language|type)/i)==null)||(_15.match(/<script\s*(language|type)\s*=["']?[^'"]*(javascript|ecmascript|jscript)[^'"]*["']?/i)
!=null);if(!this.shouldLoadScript(_15))continue;if(_19){var _20;if(_20=_15.match(/src=('|")?([^'"> ]*)/i)){_11.add(_20[2]);_10.add(null)}else{if(!isc.isA.String(_18)||isc.isAn.emptyString(_18))continue;_10.add(_18);_11.add(null)}
_12.add(null)}else{this.logWarn("html to be evaluated contains non-JS script tags - these will be ignored.  Tag: "+_15)}}
if(_12.length==0)
_12=[_13];else
_12.push(_13);if(_11.length>0&&!_4){if(isc.RPCManager){var _21=false;for(var i=0;i<_11.length;i++){if(_11[i]==null){continue}
isc.RPCManager.sendRequest({actionURL:_11[i],serverOutputAsString:true,httpMethod:"GET",internalClientContext:{scriptIndex:i,scripts:_10,scriptIncludes:_11,callback:_2,htmlFragments:(_3?_12:[_5])},callback:"isc.HTMLFlow.loadedRemoteScriptBlock(data, rpcResponse.internalClientContext)"});_21=true}
if(_21)return}else{this.logWarn("html contains <script src=> blocks with the following target URLs: "+_11+" If you want these to be dynamically loaded, please include the DataBinding module or include the contents of these files in inline <script> blocks.")}}
var _23=_10.join("\n");this.fireCallback(_2,"htmlFragments,dontFetchScripts,scripts",[(_3?_12:[_5]),_4,_10])},isc.A.shouldLoadScript=function isc_c_HTMLFlow_shouldLoadScript(_1){var _2=_1.match(/ISC_([^.]*)\.js/i);if(_2&&isc["module_"+_2[1]])return false;var _2=_1.match(/load_skin\.js/i);if(_2)return false;return true},isc.A.loadedRemoteScriptBlock=function isc_c_HTMLFlow_loadedRemoteScriptBlock(_1,_2){var _3=_2.scriptIndex,_4=_2.scripts,_5=_2.scriptIncludes;_4[_3]=_1;delete _5[_3];for(var i=0;i<_5.length;i++){if(_5[i]!=null)return}
this.fireCallback(_2.callback,"htmlFragments,dontFetchScripts,scripts",[_2.htmlFragments,false,_4])});isc.B._maxIndex=isc.C+5;isc.A=isc.HTMLFlow.getPrototype();isc.A.defaultWidth=200;isc.A.defaultHeight=1;isc.A.allowContentAndChildren=true;isc.A.cursor="auto";isc.A.loadingMessage="&nbsp;${loadingImage}";isc.A.httpMethod="GET";isc.A.useSimpleHttp=true;isc.A.evalScriptBlocks=null;isc.A.captureSCComponents=true;isc.A=isc.HTMLFlow.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$525=0;isc.B.push(isc.A.initWidget=function isc_HTMLFlow_initWidget(){if(this.contentsType=="page"&&this.overflow=="visible")this.setOverflow("auto")},isc.A.draw=function isc_HTMLFlow_draw(){if(!this.readyToDraw())return this;this.Super("draw",arguments);var _1;if(this.containsIFrame())return this;else if(this.canSelectText===_1)this.canSelectText=true;if(this.contentsURL&&!(this.$533==this.contentsURL||this.loadingContent()))
{this.setContentsURL()}
return this},isc.A.setContentsURL=function isc_HTMLFlow_setContentsURL(_1,_2,_3){if(this.contentsType=="page"){return this.invokeSuper(isc.HTMLFlow,"setContentsURL",_1,_2)}
if(_1!=null)this.contentsURL=_1;if(this.loadingMessage){var _4=this.loadingMessage==null?"&nbsp;":this.loadingMessage.evalDynamicString(this,{loadingImage:this.imgHTML(isc.Canvas.loadingImageSrc,isc.Canvas.loadingImageSize,isc.Canvas.loadingImageSize)});this.$23j(_4)}
var _5=isc.addProperties({},this.contentsURLParams,_2),_6=this.useSimpleHttp,_7=this.httpMethod,_8=true;var _9=isc.addProperties({showPrompt:false,actionURL:this.contentsURL,httpMethod:_7,useSimpleHttp:_6,bypassCache:!this.allowCaching,params:_5},this.contentRPCProperties,_3,{willHandleError:true,serverOutputAsString:_8,callback:this.getID()+".$40s(rpcRequest, rpcResponse)"});this.$40t=isc.rpc.sendProxied(_9,true).transactionNum},isc.A.loadingContent=function isc_HTMLFlow_loadingContent(){return this.$40t!=null},isc.A.$40s=function isc_HTMLFlow__loadContentReply(_1,_2){var _3=_2.data;if(_2.status!=isc.RPCResponse.STATUS_SUCCESS){if(this.handleError(_1,_2)===false)return}
if(_1.transactionNum!=this.$40t){return}
this.$939(_3,(this.evalScriptBlocks==null?true:this.evalScriptBlocks))},isc.A.setContents=function isc_HTMLFlow_setContents(_1){if(_1!=null)this.contents=_1;this.$939(this.contents,(this.evalScriptBlocks==null?false:this.evalScriptBlocks))},isc.A.$23j=function isc_HTMLFlow__setContents(_1){this.Super("setContents",arguments)},isc.A.$939=function isc_HTMLFlow__evalContents(_1,_2){if(!_1)return;isc.HTMLFlow.getScript(_1,{target:this,methodName:"$49y"},true,!_2)},isc.A.$526=function isc_HTMLFlow__captureSCComponentsRelPos(_1){if(!_1.parentElement)this.addChild(_1);var _2="HTMLFlow"+this.$525++;_1.htmlElement=_2;var _3='<DIV id="'+_2+'"></DIV>';return _3},isc.A.$527=function isc_HTMLFlow__captureSCComponentsAbsPos(_1){if(!_1.parentElement)this.addChild(_1);return null},isc.A.$49y=function isc_HTMLFlow__setContentsAndExecute(_1,_2,_3){this.$23j(this.transformHTML(_1.join("")));if(_1.length>1){if(!(_2)){if(this.isDirty())this.redraw();if(this.captureSCComponents){this.$528=isc.Canvas.autoDraw;isc.setAutoDraw(false)}
for(var i=0;i<_1.length;i++){var _5=null;var _6=this;if(this.captureSCComponents)_5=function(_9,_10){if(!_9.length)return;_1[i]=_9.map(function(_11){var _7=window[_11];if(!_7||!isc.isA.Canvas(_7))return null;if(_7.position==isc.Canvas.RELATIVE)
return _6.$526(_7);else return _6.$527(_7)}).join("")};if(_3[i])isc.Class.globalEvalWithCapture(_3[i],_5)}
if(this.captureSCComponents){this.$23j(this.transformHTML(_1.join("")));if(this.$528){isc.setAutoDraw(true);for(var _8 in window)
if(isc.isA.Canvas(_8)&&_8.autoDraw)
_8.markForRedraw()}}}
else{this.logWarn("html returned by server appears to contain <script> blocks.  If you want these to be evaluated, you must set evalScriptBlocks:true.")}}
this.$40u()},isc.A.handleError=function isc_HTMLFlow_handleError(_1,_2){this.logWarn(_2.data)},isc.A.$40u=function isc_HTMLFlow__loadContentsReplyComplete(){this.$533=this.contentsURL;this.$40t=null;this.contentLoaded()},isc.A.transformHTML=function isc_HTMLFlow_transformHTML(_1){return _1},isc.A.contentLoaded=function isc_HTMLFlow_contentLoaded(){},isc.A.modifyContent=function isc_HTMLFlow_modifyContent(){});isc.B._maxIndex=isc.C+16;isc.HTMLFlow.registerStringMethods({contentLoaded:""})
isc.defineClass("HTMLPane",isc.HTMLFlow);isc.A=isc.HTMLPane.getPrototype();isc.A.overflow=isc.Canvas.AUTO;isc.A.defaultHeight=200;isc.defineClass("WSDataSource","DataSource");isc.A=isc.WSDataSource.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.serviceNamespace="urn:operations.smartclient.com";isc.A.operationBindings=[{operationType:"fetch",wsOperation:"fetch",recordXPath:"//data/*"},{operationType:"add",wsOperation:"add",recordXPath:"//data/*"},{operationType:"remove",wsOperation:"remove",recordXPath:"//data/*"},{operationType:"update",wsOperation:"update",recordXPath:"//data/*"}];isc.B.push(isc.A.transformRequest=function isc_WSDataSource_transformRequest(_1){var _2={dataSource:_1.dataSource,operationType:_1.operationType,data:_1.data};if(_1.startRow!=null){_2.startRow=_1.startRow;_2.endRow=_1.endRow}
if(_1.textMatchStyle!=null)_2.textMatchStyle=_1.textMatchStyle;if(_1.operationId!=null)_2.operationId=_1.operationId;if(_1.sortBy!=null)_2.sortBy=_1.sortBy;return _2},isc.A.transformResponse=function isc_WSDataSource_transformResponse(_1,_2,_3){if(!_3||!_3.selectString)return;_1.status=_3.selectString("//status");if(isc.isA.String(_1.status)){var _4=isc.DSResponse[_1.status];if(_1.status==null){this.logWarn("Unable to map response code: "+_4+" to a DSResponse code, setting status to DSResponse.STATUS_FAILURE.");_4=isc.DSResponse.STATUS_FAILURE;_1.data=_3.selectString("//data")}else{_1.status=_4}}
if(_1.status==isc.DSResponse.STATUS_VALIDATION_ERROR){var _5=_3.selectNodes("//errors/*");_1.errors=isc.xml.toJS(_5,null,this)}
_1.totalRows=_3.selectNumber("//totalRows");_1.startRow=_3.selectNumber("//startRow");_1.endRow=_3.selectNumber("//endRow")});isc.B._maxIndex=isc.C+2;isc.defineClass("RestDataSource","DataSource");isc.A=isc.RestDataSource.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.serverType="generic";isc.A.dataFormat="xml";isc.A.xmlRecordXPath="/response/data/*";isc.A.xmlNamespaces={xsi:"http://www.w3.org/2001/XMLSchema-instance"};isc.A.jsonRecordXPath="/response/data";isc.A.prettyPrintJSON=true;isc.A.dataFormatParamName="isc_dataFormat";isc.A.jsonPrefix="<SCRIPT>//'\"]]>>isc_JSONResponseStart>>";isc.A.jsonSuffix="//isc_JSONResponseEnd";isc.A.operationBindings=[{operationType:"fetch",dataProtocol:"getParams"},{operationType:"add",dataProtocol:"postParams"},{operationType:"remove",dataProtocol:"postParams"},{operationType:"update",dataProtocol:"postParams"}];isc.A.sendMetaData=true;isc.A.metaDataPrefix="_";isc.B.push(isc.A.init=function isc_RestDataSource_init(){this.serverType="generic";this.recordXPath=this.recordXPath||(this.dataFormat=="xml"?this.xmlRecordXPath:this.jsonRecordXPath);return this.Super("init",arguments)},isc.A.getDataURL=function isc_RestDataSource_getDataURL(_1){var _2=_1.operationType;if(_2=="fetch"&&this.fetchDataURL!=null)
return this.fetchDataURL;if(_2=="update"&&this.updateDataURL!=null)
return this.updateDataURL;if(_2=="add"&&this.addDataURL!=null)
return this.addDataURL;if(_2=="remove"&&this.removeDataURL!=null)
return this.removeDataURL;return this.Super("getDataURL",arguments)},isc.A.getDataProtocol=function isc_RestDataSource_getDataProtocol(_1){var _2=this.Super("getDataProtocol",arguments);if(_2=="postXML")_2="postMessage";return _2},isc.A.transformRequest=function isc_RestDataSource_transformRequest(_1){var _2=this.getDataProtocol(_1);_1.isRestRequest=!(this.disableQueuing||this.clientOnly);_1.dataFormat=(this.clientOnly?"json":this.dataFormat);if(_2=="postMessage"){if(_1.params==null){_1.params={}}
_1.params[this.dataFormatParamName]=this.dataFormat;var _3={dataSource:this.getID()};if(_1.operationType!=null)_3.operationType=_1.operationType;if(_1.operationId!=null)_3.operationId=_1.operationId;if(_1.startRow!=null)_3.startRow=_1.startRow;if(_1.endRow!=null)_3.endRow=_1.endRow;if(_1.sortBy!=null)_3.sortBy=_1.sortBy;if(_1.textMatchStyle!=null)_3.textMatchStyle=_1.textMatchStyle;if(_1.parentNode!=null)_3.parentNode=isc.Tree.getCleanNodeData(_1.parentNode);if(_1.useStrictJSON!=null)_3.useStrictJSON=_1.useStrictJSON;if(this.sendClientContext)_3.clientContext=_1.clientContext;if(_1.componentId)_3.componentId=_1.componentId;if(isc.DataSource.get("$89s")==null){isc.DataSource.create({ID:"$89s",fields:[{name:"_constructor",xmlAttribute:false},{name:"criteria",multiple:true,type:"$89s",childTagName:"criterion"},{name:"oldValues"}]})}
var _4=isc.DataSource.create({fields:[{name:"data",type:"$89s"},{name:"oldValues"}]});if(this.autoConvertRelativeDates==true){if(this.logIsInfoEnabled("relativeDates")){this.logInfo("Calling convertRelativeDates from getServiceInputs - data is\n\n"+isc.echoFull(_1.data))}
var _5=this.convertRelativeDates(_1.data);if(this.logIsInfoEnabled("relativeDates")){this.logInfo("Called convertRelativeDates from getServiceInputs - data is\n\n"+isc.echoFull(_5))}
_1.data=_5}
if(_1.summaryFunctions!=null)_3.summaryFunctions=_1.summaryFunctions;if(_1.groupBy!=null)_3.groupBy=_1.groupBy;_3.data=_1.data;_3.oldValues=_1.oldValues;if(!_1.contentType){_1.contentType=(this.dataFormat=="json"?"application/json":"text/xml")}
var _6;_1.$92v=_1.data;if(_1.dataFormat=="json"){if(_3.data!=null)_3.data=this.serializeFields(_3.data);if(_3.oldValues!=null)_3.oldValues=this.serializeFields(_3.oldValues);var _7={prettyPrint:this.prettyPrintJSON,trimMilliseconds:!!this.trimMilliseconds};_6=isc.JSON.encode(_3,_7)}else{var _8={ignoreConstructor:true,schema:this};_6=_4.xmlSerialize(_3,_8,null,"request")}
_4.destroy();return _6}else{if(_2!="getParams"&&_2!="postParams"){this.logWarn("RestDataSource operation:"+_1.operationID+", of type "+_1.operationType+" has dataProtocol specified as '"+_2+"'. Supported protocols are 'postParams', 'getParams' and 'postMessage' only. Defaulting to 'getParams'.");_1.dataProtocol='getParams'}
var _3=isc.addProperties({},_1.data,_1.params);if(_1.summaryFunctions!=null)_3.summaryFunctions=_1.summaryFunctions;if(_1.groupBy!=null)_3.groupBy=_1.groupBy;if(this.sendMetaData){if(!this.parameterNameMap){var _9={};_9[this.metaDataPrefix+"operationType"]="operationType";_9[this.metaDataPrefix+"operationId"]="operationId";_9[this.metaDataPrefix+"startRow"]="startRow";_9[this.metaDataPrefix+"endRow"]="endRow";_9[this.metaDataPrefix+"sortBy"]="sortBy";_9[this.metaDataPrefix+"useStrictJSON"]="useStrictJSON";_9[this.metaDataPrefix+"textMatchStyle"]="textMatchStyle";_9[this.metaDataPrefix+"oldValues"]="oldValues";_9[this.metaDataPrefix+"componentId"]="componentId";_9[this.metaDataPrefix+"parentNode"]="parentNode";this.parameterNameMap=_9}
for(var _10 in this.parameterNameMap){var _11=_1[this.parameterNameMap[_10]];if(_11!=null){if(_10=="$97q"){_3[_10]=isc.Tree.getCleanNodeData(_11)}else{_3[_10]=_11}}}
_3[this.metaDataPrefix+"dataSource"]=this.getID();_3["isc_metaDataPrefix"]=this.metaDataPrefix}
_3[this.dataFormatParamName]=this.dataFormat;return _3}},isc.A.getUpdatedData=function isc_RestDataSource_getUpdatedData(_1,_2,_3){var _4=_2?_2.data:null;if(_3&&(!_4||isc.isAn.emptyString(_4)||(isc.isA.Array(_4)&&_4.length==0))&&_2.status==0&&this.getDataProtocol(_1)=="postMessage")
{this.logInfo("dsResponse for successful operation of type "+_1.operationType+" did not return updated record[s]. Using submitted request data to update ResultSet cache.","ResultSet");var _5={},_6=_1.originalData;if(_6&&isc.isAn.Object(_6)){if(_1.operationType=="update"){_5=isc.addProperties({},_1.oldValues);if(isc.isAn.Array(_6)){_5=isc.addProperties(_5,_6[0])}else{_5=isc.addProperties(_5,_6)}
_5=[_5]}else{if(!isc.isAn.Array(_6))_6=[_6];_5=[];for(var i=0;i<_6.length;i++){_5[i]=isc.addProperties({},_6[i])}}
if(this.logIsDebugEnabled("ResultSet")){this.logDebug("Submitted data to be integrated into the cache:"+this.echoAll(_5),"ResultSet")}}
return _5}else{return this.Super("getUpdatedData",arguments)}},isc.A.getValidStatus=function isc_RestDataSource_getValidStatus(_1){if(isc.isA.String(_1)){if(parseInt(_1)==_1)_1=parseInt(_1);else{_1=isc.DSResponse[_1];if(_1==null){this.logWarn("Unable to map response code: "+_1+" to a DSResponse code, setting status to DSResponse.STATUS_FAILURE.");_1=isc.DSResponse.STATUS_FAILURE}}}
if(_1==null)_1=isc.DSResponse.STATUS_SUCCESS;return _1},isc.A.getValidInvalidateCache=function isc_RestDataSource_getValidInvalidateCache(_1){if(_1==null)return false;switch(_1.toLowerCase()){case"true":case"yes":case"1":return true;case"false":case"no":case"0":case null:return false;default:return Boolean(_1)}},isc.A.transformResponse=function isc_RestDataSource_transformResponse(_1,_2,_3){if(_1.status<0||!_3){_1.queueStatus=-1;return _1}
if(_2.dataFormat=="json"){if(isc.isAn.Array(_3)){var _4=_3.length==1&&_3[0]&&_3[0].response!=null;this.logWarn("RestDataSource transformResponse(): JSON response text is incorrectly formatted as an Array rather than a simple response object."+(_4?" Array contains a single entry which appears to be a validly formatted response object - using this.":""));if(_4)_3=_3[0]}else if(_3.response==null){this.logWarn("RestDataSouce transformResponse(): JSON response text does not appear to be in standard response format.")}
var _5=_3.response||{};_1.status=this.getValidStatus(_5.status);_1.invalidateCache=_5.invalidateCache==null?false:_5.invalidateCache;_1.queueStatus=this.getValidStatus(_5.queueStatus);if(_1.status==isc.DSResponse.STATUS_VALIDATION_ERROR){var _6=_5.errors;if(isc.isAn.Array(_6)){if(_6.length>1){this.logWarn("server returned an array of errors - ignoring all but the first one")}
_6=_6[0]}
_1.errors=_6;if(_5.data!=null)_1.data=_5.data}else if(_1.status<0){_1.data=_5.data;_1.totalRows=_1.startRow;_1.endRow=_1.startRow}
if(_5.totalRows!=null)_1.totalRows=_5.totalRows;if(_5.startRow!=null)_1.startRow=_5.startRow;if(_5.endRow!=null)_1.endRow=_5.endRow}else{if(_2.clientOnly)return _1;_1.status=this.getValidStatus(_3.selectString("//status"));_1.invalidateCache=this.getValidInvalidateCache(_3.selectString("//invalidateCache"));_1.queueStatus=this.getValidStatus(_3.selectString("//queueStatus"));if(_1.status==isc.DSResponse.STATUS_VALIDATION_ERROR){var _6=_3.selectNodes("//errors");_6=isc.xml.toJS(_6);if(_6.length>1){this.logWarn("server returned an array of errors - ignoring all but the first one")}
_6=_6[0];_1.errors=_6;var _7=_3.selectString("//data");if(_7)_1.data=_7}else if(_1.status<0){_1.data=_3.selectString("//data")}
var _8=_3.selectNumber("//totalRows");if(_8!=null)_1.totalRows=_8;var _9=_3.selectNumber("//startRow");if(_9!=null)_1.startRow=_9;var _10=_3.selectNumber("//endRow");if(_10!=null)_1.endRow=_10}
return _1},isc.A.shouldUseTestDataFetch=function isc_RestDataSource_shouldUseTestDataFetch(){return this.clientOnly==true&&this.cacheAllData!=true&&this.testFileName!=null},isc.A.hasTestData=function isc_RestDataSource_hasTestData(){return this.testFileName!=null},isc.A.getClientOnlyResponse=function isc_RestDataSource_getClientOnlyResponse(_1,_2){if(_1.$92v)_1.data=_1.$92v;var _3=this.Super("getClientOnlyResponse",arguments);if(!isc.isAn.Array(_3.data))_3.data=[_3.data];return _3});isc.B._maxIndex=isc.C+11;isc.DataSource.create({allowAdvancedCriteria:true,ID:"DataSource",addGlobalId:"false",Constructor:"DataSource",fields:[{xmlAttribute:"true",type:"string",name:"ID"},{title:"Superclass",type:"string",name:"inheritsFrom"},{type:"boolean",name:"useParentFieldOrder"},{type:"boolean",name:"useLocalFieldsOnly"},{type:"boolean",name:"restrictToParentFields"},{xmlAttribute:"true",title:"DataFormat",valueMap:{custom:"Custom Binding",iscServer:"ISC Java Server",json:"JSON Web Service",xml:"XML / WSDL Web Service"},type:"string",name:"dataFormat"},{xmlAttribute:"true",type:"boolean",name:"useStrictJSON"},{xmlAttribute:"true",type:"boolean",name:"noAutoFetch"},{xmlAttribute:"true",title:"Server Type",valueMap:{custom:"Custom Server Binding",sql:"ISC Server SQL Connectors"},type:"string",name:"serverType"},{xmlAttribute:"true",title:"Callback Parameter",type:"string",name:"callbackParam"},{type:"Object",name:"requestProperties"},{propertiesOnly:"true",childTagName:"field",type:"DataSourceField",multiple:"true",name:"fields"},{title:"Add Global ID",type:"boolean",name:"addGlobalId"},{type:"boolean",name:"showPrompt"},{xmlAttribute:"true",title:"DataSource Version",visibility:"internal",type:"number",name:"dataSourceVersion"},{xmlAttribute:"true",title:"Database Name",type:"string",name:"dbName"},{xmlAttribute:"true",title:"Schema",type:"string",name:"schema"},{xmlAttribute:"true",title:"Table Name",type:"string",name:"tableName"},{xmlAttribute:"true",title:"Quote Table Name?",type:"boolean",name:"quoteTableName"},{type:"ServerObject",name:"serverObject"},{type:"OperationBinding",multiple:"true",name:"operationBindings"},{hidden:"true",propertiesOnly:"true",type:"DataSourceField",moveTo:"fields",name:"field"},{hidden:"true",type:"OperationBinding",moveTo:"operationBindings",name:"operationBinding"},{xmlAttribute:"true",type:"string",name:"serviceNamespace"},{xmlAttribute:"true",type:"string",name:"dataURL"},{xmlAttribute:"true",type:"string",name:"dataProtocol"},{xmlAttribute:"true",type:"string",name:"dataTransport"},{type:"Object",name:"defaultParams"},{type:"string",name:"soapAction"},{type:"string",name:"jsonPrefix"},{type:"string",name:"jsonSuffix"},{type:"string",name:"messageTemplate"},{visibility:"internal",propertiesOnly:"true",type:"Object",name:"defaultCriteria"},{visibility:"xmlBinding",type:"string",name:"tagName"},{type:"XPath",name:"recordXPath"},{type:"string",name:"recordName"},{type:"Object",name:"xmlNamespaces"},{type:"boolean",name:"dropExtraFields"},{xmlAttribute:"true",visibility:"internal",type:"string",name:"schemaNamespace"},{visibility:"internal",type:"boolean",name:"mustQualify"},{visibility:"internal",type:"boolean",name:"xsdSimpleContent"},{visibility:"internal",type:"boolean",name:"xsdAnyElement"},{visibility:"internal",type:"boolean",name:"xsdAbstract"},{title:"Title",type:"string",name:"title"},{title:"Title Field",type:"string",name:"titleField"},{title:"Plural Title",type:"string",name:"pluralTitle"},{xmlAttribute:"true",title:"Client Only",type:"boolean",name:"clientOnly"},{xmlAttribute:"true",title:"Test File Name",type:"URL",name:"testFileName"},{type:"Object",multiple:"true",name:"testData"},{type:"Object",multiple:"true",name:"cacheData"},{xmlAttribute:"true",type:"boolean",name:"cacheAllData"},{xmlAttribute:"true",type:"boolean",name:"cacheAcrossOperationIds"},{visibility:"internal",propertiesOnly:"true",type:"DataSourceField",multiple:"true",uniqueProperty:"ID",name:"types"},{visibility:"internal",type:"string",multiple:"true",name:"groups"},{visibility:"internal",type:"MethodDeclaration",multiple:"true",name:"methods"},{type:"boolean",name:"showSuperClassActions"},{type:"boolean",name:"createStandalone"},{type:"boolean",name:"useFlatFields"},{xmlAttribute:"true",type:"boolean",name:"showLocalFieldsOnly"},{type:"Object",name:"globalNamespaces"},{xmlAttribute:"true",type:"boolean",name:"autoDeriveSchema"},{xmlAttribute:"true",type:"boolean",name:"autoDeriveFKs"},{type:"boolean",name:"useLocalValidators"},{type:"boolean",name:"autoDeriveTitles"},{xmlAttribute:"true",type:"boolean",name:"qualifyColumnNames"},{type:"boolean",name:"validateRelatedRecords"},{type:"boolean",name:"requiresAuthentication"},{type:"boolean",name:"requiresRoles"},{type:"string",name:"requires"},{xmlAttribute:"true",type:"string",name:"beanClassName"},{xmlAttribute:"true",type:"boolean",name:"autoJoinTransactions"},{type:"boolean",name:"sparseUpdates"},{type:"boolean",name:"noNullUpdates"},{type:"boolean",name:"canExport"},{type:"boolean",name:"progressiveLoading"},{type:"boolean",name:"allowAdvancedCriteria"},{type:"string",name:"scriptImport"},{idAllowed:"true",type:"Object",name:"script"},{type:"boolean",name:"allowClientRequestedSummaries"},{type:"boolean",name:"translatePatternOperators"}]})
isc.DataSource.create({allowAdvancedCriteria:true,ID:"DataSourceField",addGlobalId:"false",fields:[{xmlAttribute:"true",title:"Name",basic:"true",primaryKey:"true",type:"string",required:"true",name:"name"},{xmlAttribute:"true",title:"Type",basic:"true",type:"string",name:"type"},{title:"Disabled",type:"boolean",name:"disabled"},{xmlAttribute:"true",title:"ID Allowed",type:"boolean",name:"idAllowed"},{xmlAttribute:"true",title:"Required",type:"boolean",name:"required"},{type:"ValueMap",name:"valueMap"},{propertiesOnly:"true",type:"Validator",multiple:"true",name:"validators"},{xmlAttribute:"true",title:"Length",type:"integer",name:"length"},{xmlAttribute:"true",title:"Decimal Pad",type:"integer",name:"decimalPad"},{xmlAttribute:"true",title:"Decimal Precision",type:"integer",name:"decimalPrecision"},{visibility:"internal",type:"boolean",name:"xmlRequired"},{visibility:"internal",type:"string",name:"xmlMaxOccurs"},{visibility:"internal",type:"integer",name:"xmlMinOccurs"},{visibility:"internal",type:"boolean",name:"xmlNonEmpty"},{visibility:"internal",type:"boolean",name:"xsElementRef"},{title:"User can hide",type:"boolean",name:"canHide"},{visibility:"internal",type:"boolean",name:"xmlAttribute"},{visibility:"internal",type:"boolean",name:"mustQualify"},{xmlAttribute:"true",title:"Value XPath",type:"XPath",name:"valueXPath"},{type:"boolean",name:"childrenProperty"},{xmlAttribute:"true",title:"Title",type:"string",name:"title"},{xmlAttribute:"true",type:"string",name:"prompt"},{xmlAttribute:"true",title:"Detail",type:"boolean",name:"detail"},{xmlAttribute:"true",title:"Can Edit",type:"boolean",name:"canEdit"},{xmlAttribute:"true",title:"Can Save",type:"boolean",name:"canSave"},{xmlAttribute:"true",title:"Can View",type:"boolean",name:"canView"},{title:"Inapplicable",inapplicable:"true",type:"boolean",name:"inapplicable"},{title:"Advanced",inapplicable:"true",type:"boolean",name:"advanced"},{title:"Visibility",inapplicable:"true",type:"string",name:"visibility"},{xmlAttribute:"true",title:"Hidden",inapplicable:"true",type:"boolean",name:"hidden"},{xmlAttribute:"true",title:"Is Primary Key",type:"boolean",name:"primaryKey"},{xmlAttribute:"true",title:"Foreign Key",type:"string",name:"foreignKey"},{xmlAttribute:"true",title:"Tree Root Value",type:"string",name:"rootValue"},{xmlAttribute:"true",title:"Include From",type:"string",name:"includeFrom"},{xmlAttribute:"true",title:"Include Via",type:"string",name:"includeVia"},{xmlAttribute:"true",title:"Related Table Alias",type:"string",name:"relatedTableAlias"},{xmlAttribute:"true",type:"boolean",name:"showFileInline"},{xmlAttribute:"true",type:"boolean",name:"escapeHTML"},{xmlAttribute:"true",type:"integerOrIdentifier",name:"imageWidth"},{xmlAttribute:"true",type:"integerOrIdentifier",name:"imageHeight"},{title:"Native Name",hidden:"true",type:"string",name:"nativeName"},{xmlAttribute:"true",title:"Native Foreign Key",hidden:"true",type:"string",name:"nativeFK"},{xmlAttribute:"true",hidden:"true",type:"boolean",name:"autoDeriveFKs"},{title:"Field Name",hidden:"true",type:"string",name:"fieldName"},{hidden:"true",propertiesOnly:"true",childTagName:"field",type:"DataSourceField",multiple:"true",uniqueProperty:"name",name:"fields"},{xmlAttribute:"true",type:"boolean",name:"multiple"},{xmlAttribute:"true",type:"boolean",name:"validateEachItem"},{type:"Object",multiple:"true",name:"pickListFields"},{xmlAttribute:"true",type:"boolean",name:"canFilter"},{type:"boolean",name:"ignore"},{xmlAttribute:"true",type:"boolean",name:"unknownType"},{xmlAttribute:"true",type:"boolean",name:"canSortClientOnly"},{xmlAttribute:"true",type:"string",name:"childTagName"},{type:"boolean",name:"basic"},{type:"integer",name:"maxFileSize"},{xmlAttribute:"true",title:"Frozen",type:"boolean",name:"frozen"},{xmlAttribute:"true",type:"boolean",name:"canExport"},{xmlAttribute:"true",type:"string",name:"sqlStorageStrategy"},{xmlAttribute:"true",type:"boolean",name:"encodeInResponse"},{xmlAttribute:"true",type:"string",name:"mimeType"},{xmlAttribute:"true",type:"boolean",name:"ignoreTextMatchStyle"},{xmlAttribute:"true",type:"boolean",name:"lenientXPath"},{xmlAttribute:"true",type:"string",name:"summaryFunction"},{xmlAttribute:"true",type:"string",name:"joinString"},{xmlAttribute:"true",type:"string",name:"joinPrefix"},{xmlAttribute:"true",type:"string",name:"joinSuffix"},{type:"boolean",name:"allowClientRequestedSummaries"}]})
isc.DataSource.create({allowAdvancedCriteria:true,ID:"Validator",addGlobalId:"false",fields:[{type:"string",name:"type"},{type:"string",name:"name"},{type:"string",name:"description"},{type:"boolean",name:"stopIfFalse"},{type:"boolean",name:"stopOnError"},{type:"boolean",name:"validateOnChange"},{type:"boolean",name:"clientOnly"},{type:"string",name:"errorMessage"},{type:"float",name:"max"},{type:"float",name:"min"},{type:"boolean",name:"exclusive"},{type:"regexp",name:"mask"},{type:"regexp",name:"transformTo"},{type:"integer",name:"precision"},{type:"string",name:"expression"},{type:"string",name:"otherField"},{type:"text",multiple:"true",name:"list"},{type:"ValueMap",name:"valueMap"},{type:"text",name:"substring"},{type:"text",name:"operator"},{type:"integer",name:"count"},{type:"AdvancedCriteria",name:"applyWhen"},{type:"string",multiple:"true",name:"dependentFields"},{type:"string",name:"scriptImport"},{idAllowed:"true",type:"Object",name:"serverCondition"},{type:"ServerObject",name:"serverObject"},{type:"string",name:"fieldName"},{type:"string",name:"triggerEvent"},{type:"string",name:"message"},{type:"string",name:"severity"},{type:"string",name:"displayMode"},{type:"integer",name:"duration"},{type:"string",name:"formula"},{type:"ValueMap",name:"formulaVars"}]})
isc.DataSource.create({allowAdvancedCriteria:true,ID:"SimpleType",addGlobalId:false,Constructor:"SimpleType",fields:[{name:"inheritsFrom",type:"string"},{name:"editorType",type:"string"}],inheritsFrom:"DataSourceField"})
isc.DataSource.create({allowAdvancedCriteria:true,ID:"XSComplexType",addGlobalId:false,Constructor:"XSComplexType",fields:[],inheritsFrom:"DataSource"})
isc.DataSource.create({allowAdvancedCriteria:true,ID:"XSElement",addGlobalId:false,Constructor:"XSElement",fields:[],inheritsFrom:"DataSource"})
isc.DataSource.create({allowAdvancedCriteria:true,ID:"SchemaSet",addGlobalId:false,Constructor:"SchemaSet",fields:[{name:"schemaNamespace",type:"url"},{name:"schemaImports",type:"Object",multiple:true},{name:"qualifyAll",type:"boolean"},{name:"schema",type:"DataSource",multiple:true}]})
isc.DataSource.create({allowAdvancedCriteria:true,ID:"WSDLMessage",addGlobalId:false,Constructor:"WSDLMessage",fields:[],inheritsFrom:"DataSource"})
isc.DataSource.create({allowAdvancedCriteria:true,ID:"WebService",addGlobalId:false,Constructor:"WebService",fields:[{name:"location",type:"url"},{name:"targetNamespace",type:"url"},{name:"schemaImports",type:"Object",multiple:true},{name:"wsdlImports",type:"Object",multiple:true},{name:"operations",type:"WebServiceOperation",multiple:true},{name:"portTypes",type:"Object",multiple:true},{name:"bindings",type:"Object",multiple:true},{name:"messages",type:"WSDLMessage",multiple:true},{name:"globalNamespaces",type:"Object"}]})
isc.DataSource.create({allowAdvancedCriteria:true,ID:"WebServiceOperation",addGlobalId:false,fields:[{title:"Operation Name",name:"name",required:true},{title:"SOAPAction Header",name:"soapAction"},{title:"Input Message",name:"inputMessage"},{title:"Output Message",name:"outputMessage"},{name:"inputHeaders",type:"WSOperationHeader",multiple:true},{name:"outputHeaders",type:"WSOperationHeader",multiple:true}]})
isc.DataSource.create({allowAdvancedCriteria:true,ID:"WSOperationHeader",addGlobalId:false,fields:[{name:"encoding"},{name:"message"},{name:"part"}]})
isc.defineClass("Operators","Class");isc.A=isc.Operators;isc.A.equalsTitle="equals";isc.A.notEqualTitle="not equal";isc.A.iEqualsTitle="equals (ignore case)";isc.A.iNotEqualTitle="not equal (ignore case)";isc.A.greaterThanTitle="greater than";isc.A.lessThanTitle="less than";isc.A.greaterOrEqualTitle="greater than or equal to";isc.A.lessOrEqualTitle="less than or equal to";isc.A.betweenTitle="between (match case)";isc.A.iBetweenTitle="between";isc.A.betweenInclusiveTitle="between (inclusive, match case)";isc.A.iBetweenInclusiveTitle="between (inclusive)";isc.A.iContainsTitle="contains";isc.A.iStartsWithTitle="starts with";isc.A.iEndsWithTitle="ends with";isc.A.containsTitle="contains (match case)";isc.A.startsWithTitle="starts with (match case)";isc.A.endsWithTitle="ends with (match case)";isc.A.iNotContainsTitle="does not contain";isc.A.iNotStartsWithTitle="does not start with";isc.A.iNotEndsWithTitle="does not end with";isc.A.notContainsTitle="does not contain (match case)";isc.A.notStartsWithTitle="does not start with (match case)";isc.A.notEndsWithTitle="does not end with (match case)";isc.A.isNullTitle="is null";isc.A.notNullTitle="not null";isc.A.regexpTitle="matches expression (exact case)";isc.A.iregexpTitle="matches expression";isc.A.matchesPatternTitle="matches pattern (exact case)";isc.A.iMatchesPatternTitle="matches pattern";isc.A.containsPatternTitle="contains pattern (exact case)";isc.A.iContainsPatternTitle="contains pattern";isc.A.inSetTitle="is one of";isc.A.notInSetTitle="is not one of";isc.A.equalsFieldTitle="matches other field (match case)";isc.A.notEqualFieldTitle="differs from field (match case)";isc.A.iEqualsFieldTitle="matches other field (case insensitive)";isc.A.iNotEqualFieldTitle="differs from field (case insensitive)";isc.A.greaterThanFieldTitle="greater than field";isc.A.lessThanFieldTitle="less than field";isc.A.greaterOrEqualFieldTitle="greater than or equal to field";isc.A.lessOrEqualFieldTitle="less than or equal to field";isc.A.containsFieldTitle="contains (match case) another field value";isc.A.startsWithFieldTitle="starts with (match case) another field value";isc.A.endsWithFieldTitle="ends with (match case) another field value";isc.A.iContainsFieldTitle="contains (case insensitive) another field value";isc.A.iStartsWithFieldTitle="starts with (case insensitive) another field value";isc.A.iEndsWithFieldTitle="ends with (case insensitive) another field value";isc.A.notContainsFieldTitle="does not contain (match case) another field value";isc.A.notStartsWithFieldTitle="does not start with (match case) another field value";isc.A.notEndsWithFieldTitle="does not end with (match case) another field value";isc.A.iNotContainsFieldTitle="does not contain (case insensitive) another field value";isc.A.iNotStartsWithFieldTitle="does not start with (case insensitive) another field value";isc.A.iNotEndsWithFieldTitle="does not end with (case insensitive) another field value";isc.A.andTitle="and";isc.A.notTitle="not";isc.A.orTitle="or";if(isc.DynamicForm){isc.defineClass("DynamicFilterForm","SearchForm");isc.A=isc.DynamicFilterForm.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.$10j="Enter";isc.B.push(isc.A.handleKeyPress=function isc_DynamicFilterForm_handleKeyPress(_1,_2){var _3=this.getFocusSubItem();if(isc.isA.TextItem(_3))_2.firedOnTextItem=true;if(_1.keyName!=this.$10j){return this.Super("handleKeyPress",[_1,_2])}},isc.A.itemChanged=function isc_DynamicFilterForm_itemChanged(_1,_2,_3){if(this.creator.itemChanged)this.creator.itemChanged()},isc.A.getDefaultOptionDataSource=function isc_DynamicFilterForm_getDefaultOptionDataSource(_1){if(this.creator&&this.creator.getDefaultOptionDataSource){return this.creator.getDefaultOptionDataSource(_1)}
return this.Super("getDefaultOptionDataSource",arguments)});isc.B._maxIndex=isc.C+3;isc.defineClass("FilterClause","HStack");isc.A=isc.FilterClause.getPrototype();isc.A.height=20;isc.A.showFieldTitles=true;isc.A.validateOnChange=true;isc.A.fieldPickerWidth="*";isc.A.operatorPickerWidth=150;isc.A.valueItemWidth=150;isc.A.fieldPickerDefaults={type:"SelectItem",name:"fieldName",showTitle:false,textMatchStyle:"startsWith",changed:function(){this.form.creator.fieldNameChanged(this.form)}};isc.A.fieldPickerTitle="Field Name";isc.A.operatorPickerDefaults={name:"operator",type:"select",showTitle:false,addUnknownValues:false,defaultToFirstOption:true,changed:function(){this.form.creator.operatorChanged(this.form)}};isc.A.operatorPickerTitle="Operator";isc.A.valueItemTitle="Value";isc.A.valueSetHint="Enter values separated by comma";isc.A.clauseConstructor=isc.DynamicFilterForm;isc.A.showRemoveButton=true;isc.A.removeButtonPrompt="Remove";isc.A.excludeNonFilterableFields=true;isc.A.removeButtonDefaults={_constructor:isc.ImgButton,width:18,height:18,layoutAlign:"center",src:"[SKIN]/actions/remove.png",showRollOver:false,showDown:false,showDisabled:false,click:function(){this.creator.remove()}};isc.A.flattenItems=true;isc.A=isc.FilterClause.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.customGetValuesFunction="getCriterion";isc.A.valueAttribute="value";isc.A.rangeStartAttribute="start";isc.A.rangeEndAttribute="end";isc.A.operatorAttribute="operator";isc.A.setCustomValuseFunction="setCriterion";isc.B.push(isc.A.initWidget=function isc_FilterClause_initWidget(){this.Super("initWidget",arguments);this.setupClause()},isc.A.getFilterBuilder=function isc_FilterClause_getFilterBuilder(){return this.filterBuilder},isc.A.getPrimaryDS=function isc_FilterClause_getPrimaryDS(_1){if(this.dataSources){if(_1==null){return isc.DataSource.get(this.dataSources[0])}
if(isc.isAn.Object(_1)){if(_1.$93k!=null){_1=_1.$93k}
for(var i=0;i<this.dataSources.length;i++){var _3=isc.getValues(this.dataSources[i].getFields());if(_3.contains(_1))return this.dataSources[i]}
_1=_1.name}
return isc.DataSource.getDataSourceForField(_1,this.dataSources)}
if(this.dataSource)return this.getDataSource();else if(this.fieldDataSource)return this.fieldDataSource},isc.A.getDefaultOptionDataSource=function isc_FilterClause_getDefaultOptionDataSource(_1){return this.getPrimaryDS(_1)},isc.A.getField=function isc_FilterClause_getField(_1){if(_1==null)return null;if(isc.isAn.Object(_1))return _1;var _2;if(this.dataSources){_2=isc.DataSource.getFieldFromDataSources(_1,this.dataSources)}else if(this.dataSource){_2=this.getDataSource().getField(_1);if(_2==null){_2=this.getDataSource().getFieldForDataPath(_1)}}else{if(this.clause){_2=this.fieldData?this.fieldData[_1]:null;if(!_2)_2=this.clause.getField("fieldName").getSelectedRecord();if(!_2)_2=this.field;else this.field=_2}}
return _2},isc.A.getFieldNames=function isc_FilterClause_getFieldNames(){if(this.dataSources){return isc.DataSource.getCombinedDataSourceFields(this.dataSources)}
if(this.dataSource)return this.getDataSource().getFieldNames(true)},isc.A.getFieldOperatorMap=function isc_FilterClause_getFieldOperatorMap(_1,_2,_3,_4){var _5=this.getFieldOperators(_1),_6=this.getPrimaryDS(_1),_7=_6.getFieldOperatorMap(_1,_2,_3,_4,_5);return _7},isc.A.getSearchOperator=function isc_FilterClause_getSearchOperator(_1,_2){return this.getPrimaryDS(_2).getSearchOperator(_1)},isc.A.combineFieldData=function isc_FilterClause_combineFieldData(_1,_2){var _3=this.getPrimaryDS(_2),_4=this.getField(_2);if(_4)
return _3.combineFieldData(_1,_2);else return _1},isc.A.setupClause=function isc_FilterClause_setupClause(){this.$85y=true;if(this.dataSource&&!isc.isA.DataSource(this.dataSource))
this.dataSource=isc.DataSource.get(this.dataSource);if(this.fieldDataSource&&!isc.isA.DataSource(this.fieldDataSource))
this.fieldDataSource=isc.DataSource.get(this.fieldDataSource);if(this.showRemoveButton){this.addAutoChild("removeButton",{prompt:this.removeButtonPrompt})}
this.fieldPickerDefaults.title=this.fieldPickerTitle;this.operatorPickerDefaults.title=this.operatorPickerTitle;var _1={};if(this.showClause!=false){if(this.topOperatorAppearance=="inline"){if(this.topOperator=="and"){var _2={and:this.creator.inlineAndTitle,not:this.creator.inlineAndNotTitle}}else{var _2={or:this.creator.inlineOrTitle,not:this.creator.inlineAndNotTitle}}
var _3=0;this.topOperatorFormProperties={layoutAlign:"top"};if(this.creator.showSelectionCheckbox){isc.addProperties(this.topOperatorFormProperties,{numCols:2,width:120,colWidths:["20%","80%"]});this.topOperatorFormProperties.items=[{name:"select",type:"checkbox",showTitle:false,showLabel:false,defaultValue:false,showIf:function(){return this.form.creator.showSelectionCheckbox}},isc.addProperties({width:this.topOperatorItemWidth},this.topOperatorItemDefaults,this.topOperatorItemProperties)];_3=1}else{this.topOperatorFormProperties.items=[isc.addProperties({width:this.topOperatorItemWidth},this.topOperatorItemDefaults,this.topOperatorItemProperties)]}
this.addAutoChild("topOperatorForm");this.topOperatorForm.items[_3].valueMap=_2;this.topOperatorForm.items[_3].defaultValue=this.negated?"not":this.topOperator;this.updateInlineTopOperator()}
var _4=[];_4.add(isc.addProperties({},this.fieldPickerDefaults,{width:this.fieldPickerWidth,sortField:(this.sortFields?"fieldName":null)},this.fieldPickerProperties,{name:"fieldName"}));_4.add(isc.addProperties({},this.operatorPickerDefaults,{width:this.operatorPickerWidth},this.operatorPickerProperties,{name:"operator",showIf:this.missingField?"false":"true"}));var _5=this.criterion,_6=this.getFieldNames(),_7;if(this.fieldName&&(this.dataSource||this.dataSources)){var _8=this.fieldName;var _9=this.getField(_8),_10;isc.addProperties(_4[0],{type:"staticText",clipValue:true,wrap:false});if(this.missingField){_10=isc.DataSource.getCriterionDescription(this.criterion,this.dataSource||this.dataSources)}else if(!_9||(this.excludeNonFilterableFields&&_9.canFilter==false)){_8=_6[0]}else if(this.showFieldTitles){_10=_9.summaryTitle||_9.title||_8}
_4[0].defaultValue=_8;if(_10!=null){var _11={};_11[_8]=_10;_4[0].valueMap=_11}
_7=_8}else{if(this.fieldDataSource){isc.addProperties(_4[0],{type:"ComboBoxItem",completeOnTab:true,addUnknownValues:false,optionDataSource:this.fieldDataSource,valueField:"name",displayField:this.showFieldTitles?"title":"name",pickListProperties:{reusePickList:function(){return false}}});if(this.field)_4[0].defaultValue=this.field.name}else if(_6){for(var i=0;i<_6.length;i++){var _13=_6[i],_9=this.getField(_13);if(this.excludeNonFilterableFields&&_9.canFilter==false)continue;if(this.showFieldTitles){_1[_13]=_9.summaryTitle||_9.title||_13}else{_1[_13]=_13}}
_4[0].valueMap=_1;_4[0].defaultValue=isc.firstKey(_1)}}
this.fieldPicker=_4[0];var _14=_4[0],_15=_4[1];if(!this.fieldName){if(_5&&_5.fieldName){if(this.fieldDataSource){_14.defaultValue=_5.fieldName}else{if(_6.contains(_5.fieldName)){_14.defaultValue=_5.fieldName}else{isc.logWarn("Criterion specified field "+_5.fieldName+", which is not in the record. Using the first record field ("+(_1?isc.firstKey(_1):_6[0])+") instead");_14.defaultValue=_1?isc.firstKey(_1):_6[0]}}}
_7=_14.defaultValue}
if(_7){var _9=this.field||this.getField(_7);if(!this.missingField&&_9){var _11=_9?this.getFieldOperatorMap(_9,false,"criteria",true):null;_15.valueMap=_11;if(_11){if(_5&&_5.operator){_15.defaultValue=_5.operator}else{_15.defaultValue=isc.firstKey(_11)}}
this.$74o=_7;var _16=this.getSearchOperator(_15.defaultValue,_9);if(!_16&&_11.length>0){isc.logWarn("Criterion specified unknown operator "+(_5?_5.operator:"[null criterion]")+". Using the first valid operator ("+isc.firstKey(_11)+") instead");_15.defaultValue=isc.firstKey(_11);_16=this.getSearchOperator(_15.defaultValue,_9)}
var _17=this.buildValueItemList(_9,_16,_7);if(_5){if(_5.value!=null&&_17.containsProperty("name","value")){_17.find("name","value").defaultValue=_5.value}
if(_5.start!=null&&_17.containsProperty("name","start")){_17.find("name","start").defaultValue=_5.start}
if(_5.end!=null&&_17.containsProperty("name","end")){_17.find("name","end").defaultValue=_5.end}}
if(_17)_4.addList(_17)}}else{_15.disabled=true}
this.addAutoChild("clause",{sortFields:this.sortFields,flattenItems:this.flattenItems,items:_4});this.fieldPicker=this.clause.getItem("fieldName");this.operatorPicker=this.clause.getItem("operator")}
this.addMembers([this.topOperatorForm,this.removeButton,this.clause])},isc.A.updateInlineTopOperator=function isc_FilterClause_updateInlineTopOperator(){if(this.topOperatorAppearance!="inline")return;var _1=this.creator.showSelectionCheckbox?1:0;if(this.creator.isFirstClause(this)){this.topOperatorForm.items[_1].hide()}else{this.topOperatorForm.items[_1].show()}},isc.A.getEditorType=function isc_FilterClause_getEditorType(_1,_2){if(isc.isA.FilterBuilder(this.filterBuilder)){return this.filterBuilder.getEditorType(_1,_2)}else{return isc.FilterBuilder.getDefaultEditorType(_1,this.getPrimaryDS(),_2)}},isc.A.buildValueItemList=function isc_FilterClause_buildValueItemList(_1,_2,_3){if(_2==null)this.logWarn("buildValueItemList passed null operator");var _4=this.getEditorType(_1,_2.ID);var _5=_2?_2.valueType:"text",_6,_7,_8=[],_9;if(_1==null){_6="text"}else{if(_3==null)_3=_1.name;_6=_1.type}
_7=isc.SimpleType.getType(_6)||isc.SimpleType.getType("text");var _10=isc.SimpleType.inheritsFrom(_6,"date")||isc.SimpleType.inheritsFrom(_6,"datetime");while(_7.getAtomicValue!=null){var _11=_7.inheritsFrom||"text";_7=isc.SimpleType.getType(_11)}
_7=_7.name;if(_1){var _12={$93k:_1};isc.addProperties(_12,_1);_12.canEdit=_1.canFilter;_1=_12;if(_1.userFormula||_1.userSummary){_1.canFilter=true;_1.canEdit=true}}
_4=this.getEditorType(_1,_2.ID);if(_4=="staticText"&&!this.excludeNonFilterableFields)_4="text";if(_5=="fieldType"||_5=="custom"||_5=="valueSet"){var _13=_7;var _14=isc.addProperties({type:_13,valueType:_5,name:_1?_1.name:null,showTitle:false,title:this.valueItemTitle,width:this.valueItemWidth,changed:function(){this.form.creator.valueChanged(this,this.form)}},this.getValueFieldProperties(_6,_3,_2.ID,"value"));if(_4)_14.editorType=_4;if(_5=="valueSet"){_14.multiple=true;_14.showHintInField=true;_14.hint=this.valueSetHint;_14.parseEditorValue=function(_22,_23,_24){if(_22==null)return _22;return _22.split(",")};_14.formatEditorValue=function(_22,_23,_24,_25){if(_22==null)return"";if(isc.isAn.Array(_22)){return _22.join(",")}
return _22}}
if(_1!=null&&_5!="custom"){_14=this.combineFieldData(_14,_1)}
_14.name="value";_14.dataPath=null;if(_6=="enum"){_14=isc.addProperties(_14,{valueMap:_1.valueMap})}
if(_7=="boolean"){_14=isc.addProperties(_14,{showLabel:false,defaultValue:true,align:this.isRTL()?"right":"left"})}
if(_1&&_1.editorProperties){if(_1.editorType=="SelectItem"||_1.editorType=="ComboBoxItem"||_1.editorType=="select"||_1.editorType=="MultiComboBoxItem")
{_9=_1.editorProperties;if(_9.optionDataSource!=null)_14.optionDataSource=_9.optionDataSource;if(_9.valueField!=null)_14.valueField=_9.valueField;if(_9.displayField!=null)_14.displayField=_9.displayField}else{_14=isc.addProperties({},_14,_1.editorProperties)}}
if(_1.displayField!=null||_1.optionDataSource!=null){if(_1.foreignKey){var _15=_1.foreignKey,_16=_15.indexOf(".");if(!_1.optionDataSource)_14.optionDataSource=_15.substring(0,_16);if(!_1.valueField)_14.valueField=_15.substring(_16+1)}else{if(!_1.valueField)_14.valueField=_1.name}}
_8.add(_14)}else if(_5=="fieldName"){_9=isc.addProperties({},this.fieldPickerDefaults,{showTitle:false,addUnknownValues:false,editorType:this.fieldDataSource?"ComboBoxItem":"SelectItem",valueType:_5,width:this.valueItemWidth,textMatchStyle:this.fieldPicker.textMatchStyle,changed:function(){this.form.creator.valueChanged(this,this.form)}});if(this.sortFields)_9.sortField="value";if(this.fieldDataSource){_9=isc.addProperties(_9,{completeOnTab:true,optionDataSource:this.fieldDataSource,valueField:"name",displayField:this.showFieldTitles?"title":"name",pickListProperties:{reusePickList:function(){return false}}})}else{var _17=this.getFieldNames(true);_17.remove(_3);var _18={};for(var i=0;i<_17.length;i++){var _20=_17[i];if(this.showFieldTitles){var _21=this.getField(_20);_18[_20]=_21.summaryTitle||_21.title||_20}else{_18[_20]=_20}}
_9=isc.addProperties(_9,{valueMap:_18})}
_8.add(isc.addProperties(_9,this.getValueFieldProperties(_6,_3,_2.ID,"name"),this.fieldPickerProperties,{name:"value"}))}else if(_5=="valueRange"){_9=this.combineFieldData(isc.addProperties({type:_7,editorType:_4,showTitle:false,width:this.valueItemWidth,changed:function(){this.form.creator.valueChanged(this,this.form)}}),_1);_8.addList([isc.addProperties({},_9,{name:"start"},this.getValueFieldProperties(_6,_3,_2.ID,"start"),!_10?{}:{rangePosition:"start"}),isc.addProperties({type:"staticText",name:"rangeSeparator",showTitle:false,width:1,shouldSaveValue:false,defaultValue:this.filterBuilder?this.filterBuilder.rangeSeparator:null,changed:function(){this.form.creator.valueChanged(this,this.form)}},this.getRangeSeparatorProperties(_6,_3,_2.ID)),isc.addProperties({},_9,{name:"end"},this.getValueFieldProperties(_6,_3,_2.ID,"end"),!_10?{}:{rangePosition:"end"})])}
if(this.validateOnChange){for(var i=0;i<_8.length;i++){isc.addProperties(_8[i],{blur:function(_22,_23){if(!_22.creator.itemsInError)_22.creator.itemsInError=[];if(!_22.validate(null,null,true)){_23.focusInItem();if(!_22.creator.itemsInError.contains(_23)){_22.creator.itemsInError.add(_23)}}else{if(_22.creator.itemsInError.contains(_23)){_22.creator.itemsInError.remove(_23)}}}})}}
for(var i=0;i<_8.length;i++){if(_8[i].showIf!=null)delete _8[i].showIf}
return _8},isc.A.getValueFieldProperties=function isc_FilterClause_getValueFieldProperties(_1,_2,_3,_4){if(this.filterBuilder){return this.filterBuilder.getValueFieldProperties(_1,_2,_3,_4)}},isc.A.getRangeSeparatorProperties=function isc_FilterClause_getRangeSeparatorProperties(_1,_2,_3){if(this.filterBuilder)return this.filterBuilder.getRangeSeparatorProperties(_1,_2,_3)},isc.A.remove=function isc_FilterClause_remove(){this.markForDestroy()},isc.A.getValues=function isc_FilterClause_getValues(){var _1=this.clause;return _1.getValues()},isc.A.getFieldName=function isc_FilterClause_getFieldName(_1){if(this.fieldPicker){var _2=this.fieldPicker.optionDataSource!=null;if(!_2)return this.fieldPicker.getValue();var _3=this.fieldPicker.getSelectedRecord();if(_3)return _1?_3.name:(_3.dataPath||_3.name);var _4=this.fieldPicker.getValue();if(_4)return _4}
return this.fieldName},isc.A.getCriterion=function isc_FilterClause_getCriterion(_1){if(!this.clause)return null;var _2=this.getFieldName(),_3=this.operatorPicker?this.operatorPicker.getValue():null;if(!_2)return null;if(isc.isA.String(_3))_3=this.getSearchOperator(_3,_2);if(_3==null){return}
var _4=this.getClauseValues(_2,_3);if(!_1){if(!_3||(_3.valueType!="none"&&_3.valueType!="valueRange"&&!isc.DS.isAdvancedCriteria(_4)&&(_4.value==null||(isc.isA.String(_4.value)&&_4.value==""))))
{return null}}
return _4},isc.A.getClauseValues=function isc_FilterClause_getClauseValues(_1,_2){var _3=this.clause,_4={},_5=_3.getField("value"),_6=_3.getField("start"),_7=_3.getField("end"),_8=_2.valueAttribute||this.valueAttribute,_9=_2.rangeStartAttribute||this.rangeStartAttribute,_10=_2.rangeEndAttribute||this.rangeEndAttribute;_4[this.operatorAttribute]=_3.getValue("operator");if(_1!=null)_4.fieldName=_1;if(_2[this.customGetValuesFunction]&&isc.isA.Function(_2[this.customGetValuesFunction]))
{if(_5){_4=_2[this.customGetValuesFunction](_1,_5)}else{var _11=_2[this.customGetValuesFunction](_1,_6),_12=_2[this.customGetValuesFunction](_1,_7);_4.fieldName=_11.fieldName;_4[this.operatorAttribute]=_11.operator;_4[_9]=_11.value;_4[_10]=_12.value}}else{if(_5)_4[_8]=_5.getValue();if(_6)_4[_9]=_6.getValue();if(_7)_4[_10]=_7.getValue()}
var _13=this.getField(_1);if(isc.isA.Date(_4[this.valueAttribute])&&(!_13||!isc.SimpleType.inheritsFrom(_13.type,"datetime")))
{_4[_8].logicalDate=true}
return _4},isc.A.setClauseValues=function isc_FilterClause_setClauseValues(_1,_2,_3){if(this.clause==null)return;var _4=this.clause,_5=_4.getField("value"),_6=_4.getField("start"),_7=_4.getField("end"),_8=_2.valueAttribute||this.valueAttribute,_9=_2.rangeStartAttribute||this.rangeStartAttribute,_10=_2.rangeEndAttribute||this.rangeEndAttribute;if(_2[this.customSetValuesFunction]&&isc.isA.Function(_2[this.customSetValuesFunction]))
{if(_5){_2[this.customSetValuesFunction](_1,_5,_3)}else{_2[this.customSetValuesFunction](_1,_6,_3);_2[this.customSetValuesFunction](_1,_7,_3)}}else{if(_5)_5.setValue(_3[_8]);if(_6)_6.setValue(_3[_9]);if(_7)_7.setValue(_3[_10])}},isc.A.setDefaultFocus=function isc_FilterClause_setDefaultFocus(){if(!this.clause)return;if(isc.isA.Function(this.clause.focusInItem))this.clause.focusInItem("fieldName")},isc.A.validate=function isc_FilterClause_validate(){return this.clause?this.clause.validate(null,null,true):true},isc.A.itemChanged=function isc_FilterClause_itemChanged(){if(this.creator&&isc.isA.Function(this.creator.itemChanged))this.creator.itemChanged()},isc.A.valueChanged=function isc_FilterClause_valueChanged(_1,_2){},isc.A.fieldNameChanged=function isc_FilterClause_fieldNameChanged(){var _1=this.clause.getValue("fieldName")!=null&&this.clause.getValue("fieldName")!="";this.clause.getItem("operator").disabled=!_1;this.updateFields()},isc.A.removeValueFields=function isc_FilterClause_removeValueFields(_1){if(!this.clause)return;this.removeValueField("value",_1);this.removeValueField("rangeSeparator",_1);this.removeValueField("start",_1);this.removeValueField("end",_1)},isc.A.removeValueField=function isc_FilterClause_removeValueField(_1,_2){var _3=this.clause;if(_3.getItem(_1)){_3.removeItem(_1);if(_2)_3.clearValue(_1)}},isc.A.operatorChanged=function isc_FilterClause_operatorChanged(){if(!this.clause)return;var _1=this.clause,_2=this.fieldName||_1.getValue("fieldName");if(_2==null)return;var _3=this.getField(_2);var _4=this.getSearchOperator(_1.getValue("operator"),_3);this.updateValueItems(_3,_4,_2)},isc.A.updateValueItems=function isc_FilterClause_updateValueItems(_1,_2,_3){var _4=this.clause;var _5=_4.getItem("value");var _6=_5?_5.valueType:null;this.removeValueFields();var _7=this.buildValueItemList(_1,_2,_3)
_4.addItems(_7);var _8=_4.getItem("value");if(_8&&((_8.valueType!=_6)||(_8.getValueMap()&&_8.$193&&!_8.$193(_8.getValue())||_8.optionDataSource||!this.retainValuesAcrossFields)))
{_8.clearValue()}},isc.A.updateFields=function isc_FilterClause_updateFields(){if(!this.clause)return;var _1=this.clause,_2=this.$74o,_3=this.fieldName||_1.getValue("fieldName");if(_3==null)return;if(_3==_2)return;var _4=this.getField(_3),_5=this.getField(_2);if(!_4)return;_1.getItem("operator").setValueMap(this.getFieldOperatorMap(_4,false,"criteria",true));var _6=_1.getValue("operator");if(_6==null||_1.getValue("operator")!=_6){if(_1.getValue("operator")==null){_1.getItem("operator").setValue(_1.getItem("operator").getFirstOptionValue())}
_6=_1.getValue("operator")}
_6=this.getSearchOperator(_6,_4);var _7;if(_1.getItem("value")){var _8=_1.getItem("value").type,_9=_4.type||"text";_7=(_8!=_9)}
this.removeValueFields(_7);_1.addItems(this.buildValueItemList(_4,_6,_3));if(!_7){var _10=_1.getItem("value"),_11=((_4.valueMap||_4.optionDataSource)||(_5&&(_5.valueMap||_5.optionDataSource))||!this.retainValuesAcrossFields);if(_10&&_11)_10.clearValue()}
if(_1.getItem("start"))_1.setValue("start",null);if(_1.getItem("end"))_1.setValue("end",null);this.$74o=_3},isc.A.getFieldOperators=function isc_FilterClause_getFieldOperators(_1){var _2=this.getField(_1);var _3=this.getFilterBuilder();return _3&&_3.getFieldOperators(_1,_2)},isc.A.topOperatorChanged=function isc_FilterClause_topOperatorChanged(_1){});isc.B._maxIndex=isc.C+33;isc.FilterClause.registerStringMethods({remove:""});isc.defineClass("FilterBuilder","Layout");isc.A=isc.FilterBuilder;isc.A.missingFieldPrompt="[missing field definition]";isc.A=isc.FilterBuilder;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.getFilterDescription=function isc_c_FilterBuilder_getFilterDescription(_1,_2){return isc.DataSource.getAdvancedCriteriaDescription(_1,_2)});isc.B._maxIndex=isc.C+1;isc.A=isc.FilterBuilder.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.vertical=false;isc.A.vPolicy="none";isc.A.height=1;isc.A.defaultWidth=400;isc.A.sortFields=true;isc.A.fieldPickerDefaults={type:"SelectItem",name:"fieldName",textMatchStyle:"startsWith",showTitle:false,changed:function(){this.form.creator.fieldNameChanged(this.form)}};isc.A.fieldPickerTitle="Field Name";isc.A.operatorPickerDefaults={name:"operator",type:"select",showTitle:false,addUnknownValues:false,defaultToFirstOption:true,changed:function(){this.form.creator.operatorChanged(this.form)}};isc.A.operatorPickerTitle="Operator";isc.A.fieldPickerWidth="*";isc.A.operatorPickerWidth=150;isc.A.valueItemWidth=150;isc.A.showFieldTitles=true;isc.A.validateOnChange=true;isc.A.showRemoveButton=true;isc.A.removeButtonPrompt="Remove";isc.A.removeButtonDefaults={_constructor:isc.ImgButton,width:18,height:18,layoutAlign:"center",src:"[SKIN]/actions/remove.png",showRollOver:false,showDown:false,showDisabled:false,click:function(){this.creator.removeButtonClick(this.clause)}};isc.A.showAddButton=true;isc.A.addButtonPrompt="Add";isc.A.addButtonDefaults={_constructor:isc.ImgButton,autoParent:"buttonBar",width:18,height:18,src:"[SKIN]/actions/add.png",showRollOver:false,showDown:false,click:function(){this.creator.addButtonClick(this.clause)}};isc.A.buttonBarDefaults={_constructor:isc.HStack,autoParent:"clauseStack",membersMargin:4,defaultLayoutAlign:"center",height:1};isc.A.retainValuesAcrossFields=true;isc.A.topOperatorOptions=["and","or","not"];isc.A.topOperator="and";isc.A.topOperatorAppearance="bracket";isc.A.radioOperatorLayoutDefaults={autoParent:"clauseStack",_constructor:isc.HLayout,height:1,width:1};isc.A.radioOperatorFormDefaults={autoParent:"radioOperatorLayout",height:1,numCols:1,colWidths:["*"],width:275,items:[{name:"operator",type:"radioGroup",showTitle:false,title:"Overall Operator",vertical:false,changed:function(_1,_2,_3){_1.creator.topOperatorChanged(_3)}}]};isc.A.radioOperatorFormConstructor=isc.DynamicForm;isc.A.modeSwitcherDefaults={height:30,autoFit:true,wrap:false,cursor:"pointer",click:function(){this.creator.switchMode()}};isc.A.modeSwitcherConstructor=isc.Label;isc.A.radioOperatorTitle="Overall Operator";isc.A.topOperatorFormDefaults={height:1,width:80,numCols:1,colWidths:["*"],layoutAlign:"center",_constructor:isc.DynamicForm};isc.A.topOperatorItemDefaults={name:"operator",type:"select",showTitle:false,changed:function(_1,_2,_3){_1.creator.topOperatorChanged(_3)}};isc.A.topOperatorItemWidth="*";isc.A.topOperatorTitle="Clause Operator";isc.A.defaultSubClauseOperator="or";isc.A.matchAllTitle="Match All";isc.A.matchNoneTitle="Match None";isc.A.matchAnyTitle="Match Any";isc.A.inlineAndTitle="and";isc.A.inlineOrTitle="or";isc.A.inlineAndNotTitle="and not";isc.A.modeSwitcherAdvancedMessage="Advanced..";isc.A.modeSwitcherSimpleMessage="Simple Mode..";isc.A.modeSwitcherFlattenWarningMessage="Criteria will be modified to fit in simpler editing interface";isc.A.clauseStackDefaults={_constructor:isc.VStack,height:1,membersMargin:1,animateMembers:true,animateMemberTime:150};isc.A.clauseConstructor="FilterClause";isc.A.rangeSeparator="and";isc.A.subClauseButtonTitle="+()";isc.A.subClauseButtonPrompt="Add Subclause";isc.A.subClauseButtonDefaults={_constructor:"IButton",autoParent:"buttonBar",autoFit:true,click:function(){this.creator.addSubClause(this.clause)}};isc.A.bracketDefaults={styleName:"bracketBorders",width:10};isc.A.$10j="Enter";isc.A.allowEmptyValues=false;isc.B.push(isc.A.setDataSource=function isc_FilterBuilder_setDataSource(_1){var _2=isc.DataSource.get(_1);if(!this.dataSource||(isc.DataSource.get(this.dataSource).ID!=_2.ID)){this.dataSource=_2;if(this.clauses)this.clearCriteria();else this.rebuild()}},isc.A.setDataSources=function isc_FilterBuilder_setDataSources(_1){this.dataSources=_1;if(this.clauses)this.clearCriteria();else this.rebuild()},isc.A.addButtonClick=function isc_FilterBuilder_addButtonClick(){this.addNewClause()},isc.A.removeButtonClick=function isc_FilterBuilder_removeButtonClick(_1){if(!_1)return;this.removeClause(_1)},isc.A.removeClause=function isc_FilterBuilder_removeClause(_1){this.clauses.remove(_1);if(this.clauseStack)this.clauseStack.hideMember(_1,function(){_1.destroy()});this.updateFirstRemoveButton();if(this.clauses[0]&&this.clauses[0].updateInlineTopOperator)this.clauses[0].updateInlineTopOperator();_1.filterBuilder=null;if(isc.isA.Function(this.filterChanged))this.filterChanged()},isc.A.updateFirstRemoveButton=function isc_FilterBuilder_updateFirstRemoveButton(){var _1=this.clauses[0];if(!_1||!_1.removeButton)return;if(this.clauses.length==1&&!this.allowEmpty){_1.removeButton.disable();_1.removeButton.setOpacity(50)}else if(this.clauses.length>1){_1.removeButton.enable();_1.removeButton.setOpacity(100)}},isc.A.isFirstClause=function isc_FilterBuilder_isFirstClause(_1){return this.clauses[0]==_1},isc.A.setTopOperator=function isc_FilterBuilder_setTopOperator(_1){this.topOperator=_1;var _2=this.topOperatorAppearance;if(_2=="bracket"){this.topOperatorForm.setValue("operator",_1)}else if(_2=="radio"){this.radioOperatorForm.setValue("operator",_1)}},isc.A.topOperatorChanged=function isc_FilterBuilder_topOperatorChanged(_1){this.topOperator=_1;if(isc.isA.Function(this.filterChanged))this.filterChanged()},isc.A.setTopOperatorAppearance=function isc_FilterBuilder_setTopOperatorAppearance(_1){if(this.topOperatorAppearance==_1)return;var _2=this.getCriteria(true);if(this.topOperatorAppearance=="bracket"&&_1=="radio"){_2=isc.DataSource.flattenCriteria(_2)}
this.topOperatorAppearance=_1;this.$1243(_2)},isc.A.getPrimaryDS=function isc_FilterBuilder_getPrimaryDS(_1){if(this.dataSources){if(_1==null){return isc.DataSource.get(this.dataSources[0])}
if(isc.isAn.Object(_1)){if(_1.$93k!=null){_1=_1.$93k}
for(var i=0;i<this.dataSources.length;i++){var _3=isc.getValues(this.dataSources[i].getFields());if(_3.contains(_1))return this.dataSources[i]}
_1=_1.name}
return isc.DataSource.getDataSourceForField(_1,this.dataSources)}
if(this.dataSource)return this.getDataSource();else if(this.fieldDataSource)return this.fieldDataSource},isc.A.getTopOperatorMap=function isc_FilterBuilder_getTopOperatorMap(_1){var _2=this.getPrimaryDS(),_3=_1=="bracket"?_2?_2.getTypeOperatorMap("text",true,"criteria"):null:null;if(!_3){_3={"and":this.matchAllTitle,"or":this.matchAnyTitle,"not":this.matchNoneTitle}}
var _4=this.topOperator,_5=this.topOperatorOptions,_6={};if(!_5.contains(_4))this.topOperator=_5[0];if(_3){for(var i=0;i<_5.length;i++){if(_3[_5[i]])_6[_5[i]]=_3[_5[i]]}}
return _6},isc.A.initWidget=function isc_FilterBuilder_initWidget(){this.Super("initWidget",arguments);this.rebuild()},isc.A.rebuild=function isc_FilterBuilder_rebuild(){if(isc.isA.String(this.fieldDataSource))
this.fieldDataSource=isc.DS.get(this.fieldDataSource);if(isc.isA.String(this.dataSource))
this.dataSource=isc.DS.get(this.dataSource);var _1=this.getPrimaryDS();if(!_1){this.logWarn("No available DataSources.");return}
if(this.fieldDataSource&&this.criteria)this.$75v=true;this.fieldPickerDefaults.title=this.fieldPickerTitle;if(this.radioOptions)this.topOperatorOptions=this.radioOptions.duplicate();delete this.radioOptions;this.addButtonDefaults.prompt=this.addButtonPrompt;this.removeButtonDefaults.prompt=this.removeButtonPrompt;this.subClauseButtonDefaults.prompt=this.subClauseButtonPrompt;this.subClauseButtonDefaults.title=this.subClauseButtonTitle;this.$211()},isc.A.$1243=function isc_FilterBuilder__recreateForm(_1){this.criteria=_1;delete this.showSubClauseButton;this.topOperatorForm=this.bracket=this.clauseStack=null;this.radioOperatorForm=this.radioOperatorLayout=this.modeSwitcher=null;this.buttonBar=this.addButton=this.subClauseButton=null;for(var i=0,_3=this.clauses;i<_3.length;i++){_3[i].destroy()}
var _4=this.getMembers().duplicate();for(var i=0;i<_4.length;i++){this.removeMember(_4[i]);_4[i].destroy()}
this.$211()},isc.A.$211=function isc_FilterBuilder__createForm(){var _1;if(this.showSubClauseButton==_1){this.showSubClauseButton=(this.topOperatorAppearance!="radio"&&this.topOperatorAppearance!="inline")}
this.clauses=[];var _2=this.topOperatorAppearance;var _3=this.getPrimaryDS(),_4=this.getTopOperatorMap(_2);if(this.showModeSwitcher){var _5="<span style='color:blue;text-decoration:underline;'>"+(_2=="radio"?this.modeSwitcherAdvancedMessage:this.modeSwitcherSimpleMessage)+"</span>";this.modeSwitcher=this.createAutoChild("modeSwitcher",{contents:_5})}
if(_2=="bracket"){if(this.showTopRemoveButton){var _6=this.removeButton=this.createAutoChild("removeButton",{click:function(){this.creator.parentClause.removeButtonClick(this.creator)}});this.addMember(_6)}
var _7={items:[isc.addProperties({width:this.topOperatorItemWidth},this.topOperatorItemDefaults,this.topOperatorItemProperties)]};this.addAutoChild("topOperatorForm",_7);this.topOperatorForm.items[0].title=this.topOperatorTitle;this.topOperatorForm.items[0].valueMap=_4;this.topOperatorForm.items[0].defaultValue=this.topOperator;this.addAutoChild("bracket")}
this.addAutoChild("clauseStack");this.clauseStack.hide();if(_2=="radio"){this.addAutoChild("radioOperatorLayout");this.addAutoChild("radioOperatorForm");var _8=_4;this.radioOperatorForm.items[0].title=this.radioOperatorTitle;this.radioOperatorForm.items[0].valueMap=_8;this.radioOperatorForm.items[0].defaultValue=this.topOperator;if(this.showModeSwitcher)this.radioOperatorLayout.addMember(this.modeSwitcher)}
this.addAutoChildren(["buttonBar","addButton","subClauseButton"]);if(this.showModeSwitcher&&_2=="bracket"){this.buttonBar.addMember(isc.LayoutSpacer.create({width:20}));this.buttonBar.addMember(this.modeSwitcher)}
this.stripNullCriteria(this.criteria);this.setCriteria(this.criteria)},isc.A.switchMode=function isc_FilterBuilder_switchMode(){if(this.topOperatorAppearance=="bracket"){var _1=this.getCriteria(true);if(!isc.DataSource.canFlattenCriteria(_1)){var _2=this;isc.confirm(this.modeSwitcherFlattenWarningMessage,function(_3){if(_3)_2.setTopOperatorAppearance("radio")});return}
this.setTopOperatorAppearance("radio")}else{this.setTopOperatorAppearance("bracket")}},isc.A.addNewClause=function isc_FilterBuilder_addNewClause(_1,_2,_3){var _4=this.createAutoChild("clause",isc.addProperties({},this.inheritedClauseProperties,{visibility:"hidden",flattenItems:true,criterion:_1,dataSources:this.dataSources,dataSource:this.dataSource,fieldDataSource:this.fieldDataSource,sortFields:this.sortFields,validateOnChange:this.validateOnChange,showFieldTitles:this.showFieldTitles,showRemoveButton:this.showRemoveButton,removeButtonPrompt:this.removeButtonPrompt,retainValuesAcrossFields:this.retainValuesAcrossFields,field:_2,fieldData:this.fieldData,fieldPickerDefaults:this.fieldPickerDefaults,fieldPickerProperties:this.fieldPickerProperties,fieldPickerWidth:this.fieldPickerWidth,operatorPickerWidth:this.operatorPickerWidth,valueItemWidth:this.valueItemWidth,operatorPickerDefaults:this.operatorPickerDefaults,operatorPickerProperties:this.operatorPickerProperties,remove:function(){this.creator.removeClause(this)},fieldNameChanged:function(){this.Super("fieldNameChanged",arguments);this.creator.fieldNameChanged(this)},topOperatorAppearance:this.topOperatorAppearance,topOperator:this.topOperator,topOperatorOptions:this.topOperatorOptions,topOperatorFormDefaults:this.topOperatorFormDefaults,topOperatorFormProperties:this.topOperatorFormProperties,topOperatorItemDefaults:this.topOperatorItemDefaults,topOperatorItemProperties:this.topOperatorItemProperties,topOperatorItemWidth:this.topOperatorItemWidth,showSelectionCheckbox:this.showSelectionCheckbox,negated:_3,filterBuilder:this,inheritedClauseProperties:this.inheritedClauseProperties}));var _5=this.$74e(_4);_4.updateInlineTopOperator();return _5},isc.A.addClause=function isc_FilterBuilder_addClause(_1){if(!_1)return _1;var _2=this;_1.fieldDataSource=this.fieldDataSource;_1.remove=function(){_2.removeClause(this)};_1.fieldNameChanged=function(){this.Super("fieldNameChanged",arguments);_2.fieldNameChanged(this)};var _3=this.$74e(_1);_1.updateInlineTopOperator();return _3},isc.A.$74e=function isc_FilterBuilder__addClause(_1){_1.filterBuilder=this;_1.updateFields();this.clauses.add(_1);var _2=this.clauseStack,_3=Math.max(0,_2.getMemberNumber(this.buttonBar)),_4=this;_2.addMember(_1,_3);_2.showMember(_1,function(){if(!_4.$845)_1.setDefaultFocus()});this.updateFirstRemoveButton();if(isc.isA.Function(this.filterChanged))this.filterChanged();return _1},isc.A.getChildFilters=function isc_FilterBuilder_getChildFilters(){var _1=[];for(var i=0;i<this.clauses.length;i++){var _3=this.clauses[i];if(isc.isA.FilterBuilder(_3))_1.add(_3)}
return _1},isc.A.getFilterDescription=function isc_FilterBuilder_getFilterDescription(){return isc.DataSource.getAdvancedCriteriaDescription(this.getCriteria(),(this.dataSources||this.dataSource))},isc.A.validate=function isc_FilterBuilder_validate(){var _1=true;for(var i=0;i<this.clauses.length;i++){if(!this.clauses[i].validate(null,null,true))_1=false}
return _1},isc.A.getFieldOperators=function isc_FilterBuilder_getFieldOperators(_1,_2){var _3=this.getPrimaryDS(_1);return _3?_3.getFieldOperators(_2||_1):null},isc.A.getValueFieldProperties=function isc_FilterBuilder_getValueFieldProperties(_1,_2,_3,_4){if(this.filterBuilder){return this.filterBuilder.getValueFieldProperties(_1,_2,_3,_4)}},isc.A.getRangeSeparatorProperties=function isc_FilterBuilder_getRangeSeparatorProperties(_1,_2,_3){return this.rangeSeparatorProperties},isc.A.childResized=function isc_FilterBuilder_childResized(){this.Super("childResized",arguments);if(this.clauseStack&&this.bracket)this.bracket.setHeight(this.clauseStack.getVisibleHeight())},isc.A.draw=function isc_FilterBuilder_draw(){this.Super("draw",arguments);if(this.clauseStack&&this.bracket)this.bracket.setHeight(this.clauseStack.getVisibleHeight())},isc.A.resized=function isc_FilterBuilder_resized(){if(this.clauseStack&&this.bracket)this.bracket.setHeight(this.clauseStack.getVisibleHeight())},isc.A.addSubClause=function isc_FilterBuilder_addSubClause(_1){var _2;if(_1){_2=_1.operator}
var _3=this.createAutoChild("subClause",{dataSource:this.dataSource,dataSources:this.dataSources,showFieldTitles:this.showFieldTitles,filterBuilder:this,parentClause:this,topOperatorAppearance:"bracket",topOperator:_2||this.defaultSubClauseOperator||this.topOperator,topOperatorOptions:this.topOperatorOptions,clauseConstructor:this.clauseConstructor,topOperatorFormDefaults:this.topOperatorFormDefaults,topOperatorFormProperties:this.topOperatorFormProperties,topOperatorItemDefaults:this.topOperatorItemDefaults,topOperatorItemProperties:this.topOperatorItemProperties,topOperatorItemWidth:this.topOperatorItemWidth,fieldPickerDefaults:this.fieldPickerDefaults,fieldPickerProperties:this.fieldPickerProperties,subClauseButtonTitle:this.subClauseButtonTitle,subClauseButtonPrompt:this.subClauseButtonPrompt,fieldPickerWidth:this.fieldPickerWidth,operatorPickerWidth:this.operatorPickerWidth,valueItemWidth:this.valueItemWidth,operatorPickerProperties:this.operatorPickerProperties,operatorPickerDefaults:this.operatorPickerDefaults,fieldDataSource:this.fieldDataSource,fieldData:this.fieldData,sortFields:this.sortFields,showRemoveButton:this.showRemoveButton,showAddButton:this.showAddButton,showSubClauseButton:this.showSubClauseButton,showTopRemoveButton:this.showSubClauseButton,visibility:"hidden",saveOnEnter:this.saveOnEnter,validateOnChange:this.validateOnChange,dontCreateEmptyChild:_1!=null,filterChanged:function(){var _4=this.filterBuilder;while(_4.filterBuilder!=null){_4=_4.filterBuilder}
if(isc.isA.Function(_4.filterChanged)){_4.filterChanged()}},getFieldOperators:function(_5,_6){var _4=this.filterBuilder;while(_4.filterBuilder!=null){_4=_4.filterBuilder}
if(isc.isA.Function(_4.getFieldOperators)){return _4.getFieldOperators(_5,_6)}},inheritedClauseProperties:this.inheritedClauseProperties},this.Class);this.clauses.add(_3);this.clauseStack.addMember(_3,this.clauses.length-1);this.clauseStack.showMember(_3,function(){_3.topOperatorForm.focusInItem("operator");_3.bracket.setHeight(_3.getVisibleHeight())});this.updateFirstRemoveButton();return _3},isc.A.getCriteria=function isc_FilterBuilder_getCriteria(_1){if(this.$75v){return this.criteria}
if(this.topOperatorAppearance=="inline"){return this.getInlineCriteria(_1)}
var _2={_constructor:"AdvancedCriteria",operator:this.topOperator,criteria:[]};for(var i=0;i<this.clauses.length;i++){var _4=this.clauses[i],_5,_6=false;if(isc.isA.FilterBuilder(_4)){_5=_4.getCriteria(_1)}else{_5=_4.getCriterion(_1);_6=(_5==null)}
if(!_6){_2.criteria.add(_5)}}
return isc.clone(_2)},isc.A.getInlineCriteria=function isc_FilterBuilder_getInlineCriteria(_1){var _2={_constructor:"AdvancedCriteria",operator:this.topOperator,criteria:[]};if(this.topOperator=="or"){var _3;for(var i=0;i<this.clauses.length;i++){if(this.clauses[i].topOperatorForm.getValue("operator")=="not"){_3=true;break}}
if(_3){_2.operator="and";var _5={operator:"or",criteria:[]}
_2.criteria.add(_5)}}
for(var i=0;i<this.clauses.length;i++){var _6=this.clauses[i];var _7=_6.topOperatorForm.getValue("operator");if(!_7||_7==this.topOperator){if(_3){_5.criteria.add(_6.getCriterion(_1))}else{_2.criteria.add(_6.getCriterion(_1))}}else{_2.criteria.add({operator:"not",criteria:[_6.getCriterion(_1)]})}}
return _2},isc.A.filterReady=function isc_FilterBuilder_filterReady(){},isc.A.setCriteria=function isc_FilterBuilder_setCriteria(_1){this.clearCriteria(true);var _2=this.clauseStack?this.clauseStack.animateMembers:null;if(this.clauseStack)this.clauseStack.animateMembers=false;this.stripNullCriteria(_1);this.$845=true;if(!this.$76t&&this.fieldDataSource&&_1){if(isc.isA.String(this.fieldDataSource)){this.fieldDataSource=isc.DS.getDataSource(this.fieldDataSource)}
var _3=this,_4=this.fieldDataSource.getCriteriaFields(_1),_5={};if(_4&&_4.length>0){_5={_constructor:"AdvancedCriteria",operator:"or",criteria:[]};for(i=0;i<_4.length;i++){var _6=_4[i],_7=this.fieldData?this.fieldData[_6]:null;if(!_7){_5.criteria[_5.criteria.length]={fieldName:"name",operator:"equals",value:_6}}}
if(_5.criteria.length!=0){this.$76t=true;this.fieldDataSource.fetchData(_5,function(_11){_3.fetchFieldsReply(_11,_1)});return}}}
if(!_1){if(!this.allowEmpty&&!this.dontCreateEmptyChild)this.addNewClause();this.clauseStack.show();this.redraw();this.filterReady();return}
if(!this.getPrimaryDS().isAdvancedCriteria(_1)){_1=isc.DataSource.convertCriteria(_1,"substring")}
if(this.topOperatorAppearance=="inline"){return this.setInlineCriteria(_1,_2)}
this.setTopOperator(_1.operator);if((!_1.criteria||_1.criteria.length==0)&&!this.topOperatorOptions.contains(_1.operator))
{this.logWarn("Found top-level AdvancedCriteria with no sub-criteria. Converting to a top-level 'and' with a single sub-criterion");this.setTopOperator(this.topOperator);this.addNewClause(_1)}else{for(var i=0;i<_1.criteria.length;i++){var _9=_1.criteria[i],_10=this.fieldData?this.fieldData[_9.fieldName]:null;this.addCriterion(_9,_10)}
if(this.clauses.length==0&&!this.allowEmpty)this.addNewClause()}
delete this.$75v;this.$76t=false;this.$845=false;this.clauseStack.show();this.delayCall("redraw");if(this.clauseStack)this.clauseStack.animateMembers=_2;this.filterReady()},isc.A.setInlineCriteria=function isc_FilterBuilder_setInlineCriteria(_1,_2){var _3=true,_4=false,_5=false;if(_1.operator=="and"){for(var i=0;i<_1.criteria.length;i++){var _7=_1.criteria[i];if(!_7.criteria){_4=true}else{if(_7.operator=="or"){_5=true;for(var j=0;j<_7.criteria.length;j++){var _9=_7.criteria[j];if(_9.criteria){_3=false;break}}}else{if(_7.operator=="not"){if(_7.criteria.length!=1||_7.criteria[0].criteria){_3=false}}else{_3=false}}}}}else{_3=false}
if(_3)_3=!(_4&&_5);if(_3)_3=_4||_5;if(!_3){isc.logWarn("Trying to load an AdvancedCriteria into an 'inline' FilterBuilder, but the criteria is too complex to be represented in 'inline' format");return}
this.setTopOperator(_4?"and":"or");if(_4){for(var i=0;i<_1.criteria.length;i++){var _7=_1.criteria[i],_10=this.fieldData?this.fieldData[_7.fieldName]:null;if(!_7.criteria){this.addCriterion(_7,_10)}else{_10=this.fieldData?this.fieldData[_7.criteria[0].fieldName]:null;this.addNewClause(_7.criteria[0],_10,true)}}}else{for(var i=0;i<_1.criteria.length;i++){var _7=_1.criteria[i],_10=this.fieldData?this.fieldData[_7.fieldName]:null;if(_7.operator=="or"){for(var j=0;j<_7.criteria.length;j++){var _9=_7.criteria[j];_10=this.fieldData?this.fieldData[_9.fieldName]:null;this.addCriterion(_9,_10)}}else{_10=this.fieldData?this.fieldData[_7.criteria[0].fieldName]:null;this.addNewClause(_7.criteria[0],_10,true)}}}
delete this.$75v;this.$76t=false;this.$845=false;this.clauseStack.show();this.delayCall("redraw");if(this.clauseStack)this.clauseStack.animateMembers=_2;this.filterReady()},isc.A.stripNullCriteria=function isc_FilterBuilder_stripNullCriteria(_1){if(_1&&_1.criteria&&_1.criteria.length>0){for(var i=_1.criteria.length-1;i>=0;i--){if(_1.criteria[i]==null){_1.criteria.removeAt(i)}else{if(_1.criteria[i].criteria)this.stripNullCriteria(_1.criteria[i])}}}},isc.A.fetchFieldsReply=function isc_FilterBuilder_fetchFieldsReply(_1,_2){if(this.fieldData){var _3=isc.getValues(this.fieldData);_3.addList(_1.data);this.fieldData=_3.makeIndex("name")}else this.fieldData=_1.data.makeIndex("name");this.setCriteria(_2)},isc.A.clearCriteria=function isc_FilterBuilder_clearCriteria(_1){var _2=this.clauseStack?this.clauseStack.animateMembers:null;if(this.clauseStack)this.clauseStack.animateMembers=false;while(this.clauses.length>0){this.removeClause(this.clauses[0])}
if(!_1&&!this.allowEmpty)this.addNewClause();if(this.clauseStack)this.clauseStack.animateMembers=_2},isc.A.addCriterion=function isc_FilterBuilder_addCriterion(_1,_2){if(_1.criteria){var _3=this.addSubClause(_1);for(var _4=0;_4<_1.criteria.length;_4++){_2=this.fieldData?this.fieldData[_1.criteria[_4].fieldName]:null;_3.addCriterion(_1.criteria[_4],_2)}}else{this.addNewClause(_1,_2)}},isc.A.handleKeyPress=function isc_FilterBuilder_handleKeyPress(_1,_2){if(_1.keyName==this.$10j){if(this.saveOnEnter){if(_2.firedOnTextItem){if(!this.creator&&this.search){this.search(this.getCriteria());return isc.EH.STOP_BUBBLING}}}}},isc.A.itemChanged=function isc_FilterBuilder_itemChanged(){if(this.creator&&isc.isA.Function(this.creator.itemChanged)){this.creator.itemChanged()}else{if(!this.creator&&isc.isA.Function(this.filterChanged)){this.filterChanged()}}},isc.A.fieldNameChanged=function isc_FilterBuilder_fieldNameChanged(_1){},isc.A.getEditorType=function isc_FilterBuilder_getEditorType(_1,_2){var _3=this.getPrimaryDS(_1);return isc.FilterBuilder.getDefaultEditorType(_1,_3,_2)},isc.A.getSelectedClauses=function isc_FilterBuilder_getSelectedClauses(){var _1=[];if(this.showSelectionCheckbox){for(var i=0;i<this.clauses.length;i++){var c=this.clauses[i];if(c.topOperatorForm&&c.topOperatorForm.getValue("select")){_1.add(c)}}}
return _1});isc.B._maxIndex=isc.C+44;isc.A=isc.FilterBuilder;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.getDefaultEditorType=function isc_c_FilterBuilder_getDefaultEditorType(_1,_2,_3){var _4;var _5={};isc.addProperties(_5,_1);_5.canEdit=_1.canFilter;_1=_5;var _6=_2.getSearchOperator(_3,_1);if(_6.editorType){_4=_6.editorType}else if(_6.getEditorType&&isc.isA.Function(_6.getEditorType)){_4=_6.getEditorType()}else{var _7=_6?_6.valueType:"text";if(_7=="fieldName"){_4=null}else if(_7=="valueSet"){_4="TextAreaItem"}else if(_7=="custom"&&_6&&_6.editorType){_4=_6.editorType}
if(_1){var _8=(_3=="equals"||_3=="notEqual"||_3=="lessThan"||_3=="greaterThan"||_3=="iBetween"||_3=="iBetweenInclusive"||_3=="between"||_3=="betweenInclusive"||_3=="greaterOrEqual"||_3=="lessOrEqual")?"RelativeDateItem":"DateRangeItem";if(!this.internalSearchForm){this.internalSearchForm=isc.SearchForm.create({visibility:"hidden",autoDraw:false,useAllDataSourceFields:false,dataSource:_2,fields:[_1],defaultDateEditorType:_8})}else{this.internalSearchForm.defaultDateEditorType=_8;this.internalSearchForm.setDataSource(_2,[_1])}
_4=this.internalSearchForm.getEditorType(_1)}else{_4=isc.FormItemFactory.getItemClassName({},"text",null)}}
return _4});isc.B._maxIndex=isc.C+1;isc.FilterBuilder.registerStringMethods({search:"criteria",filterChanged:""})}
isc.overwriteClass("MockupElement","Img");isc.A=isc.MockupElement.getPrototype();isc.A.controlName="MockupElement";isc.A.defaultWidth=16;isc.A.defaultHeight=28;isc.A.measuredW=-1;isc.A.measuredH=-1;isc.A=isc.MockupElement.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.initWidget=function isc_MockupElement_initWidget(){this.Super(this.$oc);var _1="/tools/visualBuilder/mockups/";var _2=this.controlName.substr(this.controlName.indexOf("::")+2,this.controlName.length)+".png";this.src=_1+_2;if(this.title!=null){this.addChild(isc.Label.create({ID:this.getID()+"_titleLabel",autoDraw:true,left:10,top:0,width:this.width,height:this.height,zIndex:this.getZIndex(true)+1,contents:this.title}))}});isc.B._maxIndex=isc.C+1;isc.defineClass("RuleEditor","VLayout");isc.A=isc.RuleEditor.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.height=100;isc.A.validatorIsRule=true;isc.A.availableTypes=["matchesField","isOneOf","lengthRange","contains","doesntContain","substringCount","regexp","mask","floatPrecision","readOnly","isUnique","hasRelatedRecord","range","message","populate","setRequired"];isc.A.nameItemTitle="Name";isc.A.descriptionItemTitle="Description";isc.A.triggerEventTitle="On event";isc.A.fieldPickerTitle="For field";isc.A.applyWhenTitle="If";isc.A.applyWhenPlaceholder=".. conditional ..";isc.A.validatorTitle="Do";isc.A.errorMessageTitle="Message";isc.A.width=400;isc.A.components=["nameForm","mainForm","applyWhenForm","validatorForm","messageForm"];isc.A.showNameForm=false;isc.A.nameFormConstructor="DynamicForm";isc.A.nameFormDefaults={numCols:2};isc.A.nameItemDefaults={editorType:"TextItem"};isc.A.descriptionItemDefaults={editorType:"TextAreaItem"};isc.A.mainFormConstructor="DynamicForm";isc.A.mainFormDefaults={numCols:2,height:20};isc.A.fieldPickerConstructor="SelectItem";isc.A.fieldPickerDefaults={name:"fieldName",multiple:true,showIf:function(){return this.creator.shouldShowFieldPicker()},pickListProperties:{showHeader:true,canSelectAll:false},getClientPickListData:function(){var _1=[];var _2=this.form.creator.locatorMap;if(_2!=null){if(isc.isAn.Array(_2)){for(var i=0;i<_2.length;i++){_1.add({name:_2[i],title:_2[i],type:"locator"})}}else{for(var _4 in _2){_1.add({name:_4,title:_2[_4],type:"locator"})}}}
var _5=this.form.creator.getFieldData();_1.addList(_5);return _1},valueField:"name",displayField:"title",pickListWidth:300,pickListFields:[{name:"title",title:"Target",width:80},{name:"type",title:"Type",width:80},{name:"name",title:"Identifier",autoFitWidth:true}],changed:function(_1,_2,_3){if(this.pickList&&this.pickList.isVisible())this.filterPickList();var _4=null,_5=null;if(_3!=null){if(!isc.isAn.Array(_3))_3=[_3];for(var i=0;i<_3.length;i++){var _7=this.form.creator.getField(_3[i],true);if(_7==null){if(_4==null)_4=[];_4.add(_3[i])}else{if(_5==null)_5=[];_5.add(_3[i])}}}
if(this.creator.warnOnInvalidFieldSelection&&_3!=null&&!isc.isAn.emptyArray(_3)&&(this.creator.getSupportedTypes(_5,_4).length==0))
{isc.warn(this.creator.invalidFieldSelectionWarning)}
this.creator.updateFieldName(_5,_4)}};isc.A.warnOnInvalidFieldSelection=true;isc.A.invalidFieldSelectionWarning="None of the available validators can be applied to the selected set of fields.";isc.A.editStartEventTitle="Edit start";isc.A.editStartAndChangedEventTitle="Edit start/changed";isc.A.editorEnterEventTitle="Editor enter";isc.A.editorExitEventTitle="Editor exit";isc.A.changedEventTitle="Changed";isc.A.submitEventTitle="Submit";isc.A.manualEventTitle="Manual";isc.A.triggerEventPickerConstructor="SelectItem";isc.A.triggerEventPickerDefaults={name:"event",startRow:true,changed:function(_1,_2,_3){this.creator.updateTriggerEvent(_3)},showIf:function(){return this.creator.shouldShowTriggerEventPicker()}};isc.A.applyWhenFormConstructor="DynamicForm";isc.A.applyWhenFormDefaults={numCols:2,fixedColWidths:true,height:20};isc.A.applyWhenItemDefaults={showLabel:true,editorType:"CheckboxItem",width:20,showTitle:false,align:"right",vAlign:"top",changed:"this.form.creator.updateConditionalForm(value)",init:function(){if(this.form){var _1=this.form,_2=_1.getTitleOrientation(),_3=(_2=="right"?_1.rightTitlePrefix:_1.titlePrefix),_4=(_2=="right"?_1.rightTitleSuffix:_1.titleSuffix);this.title=_3+this.title+_4}
this.Super("init",arguments)}};isc.A.filterTopOperatorAppearance="radio";isc.A.conditionalFormConstructor="FilterBuilder";isc.A.conditionalFormDefaults={showFieldTitles:false,fieldPickerProperties:{},showModeSwitcher:true};isc.A.validatorFormConstructor="DynamicForm";isc.A.validatorFormDefaults={numCols:2,fixedColWidths:true,height:20};isc.A.typePickerConstructor="SelectItem";isc.A.typePickerDefaults={name:"type",width:"*",pickListProperties:{sortField:0},showIf:function(){var _1=this.form.creator;return _1.showTypePicker==false?false:true},getValueMap:function(){return this.creator.getTypeValueMap()},changed:function(_1,_2,_3){this.creator.updateValidatorType(_3)}};isc.A.messageFormConstructor="DynamicForm";isc.A.messageFormDefaults={numCols:2,width:"100%",height:20};isc.A.errorMessageItemDefaults={editorType:"TextItem",width:"*"};isc.A.valuesFormConstructor="FilterClause";isc.A.valuesFormDefaults={customGetValuesFunction:"getAttributesFromEditor",customSetValuesFunction:"setEditorAttributes",operatorAttribute:"type",fieldPickerProperties:{showIf:"return false"},getEditorType:function(_1,_2){var _3=this.creator.getValidatorDefinition(_2);if(_3&&_3.valueType=="custom"&&_3.editorType)
{return _3.editorType}
if(_1&&isc.SimpleType.inheritsFrom(_1.type,"date"))return"RelativeDateItem";if(_2=="readOnly"){return"ReadOnlyRuleEditor"}
return null}};isc.B.push(isc.A.initWidget=function isc_RuleEditor_initWidget(){var _1=this.rule||this.validator;if(_1!=null){this.setRule(_1,true)}
if(this.showTypePicker==null&&this.validatorType!=null){this.showTypePicker=false}
this.addAutoChildren(this.components);if(this.nameForm!=null&&_1!=null){this.nameForm.setValue("name",_1.name);this.nameForm.setValue("description",_1.description)}
if(this.mainForm){this.fieldPicker=this.mainForm.getItem("fieldName");if(this.fieldName!=null)this.fieldPicker.setValue(this.fieldName);this.triggerEventPicker=this.mainForm.getItem("event");if(this.triggerEvent)this.triggerEventPicker.setValue(this.triggerEvent);if(!this.validatorIsRule){this.mainForm.setVisibility(isc.Canvas.HIDDEN)}}
if(this.applyWhenForm){if(this.applyWhen!=null){this.applyWhenForm.setValue("applyWhen",true);this.updateConditionalForm(true)}}
if(this.validatorForm){this.typePicker=this.validatorForm.getItem("type");if(this.validatorType!=null)this.typePicker.setValue(this.validatorType);if(this.validatorType!=null){this.updateValidatorType(this.validatorType,true)}}
if(this.messageForm){if(this.rule&&this.rule.errorMessage){this.messageForm.setValue("errorMessage",this.rule.errorMessage)}}
if(_1!=null){this.setClauseAttributes(_1)}
return this.Super("initWidget",arguments)},isc.A.getDynamicDefaults=function isc_RuleEditor_getDynamicDefaults(_1){switch(_1){case"nameForm":var _2=(this.nameItemTitle?{title:this.nameItemTitle}:null),_3=(this.descriptionItemTitle?{title:this.descriptionItemTitle}:null),_4=isc.addProperties({name:"name"},this.nameItemDefaults,this.nameItemProperties,_2),_5=isc.addProperties({name:"description"},this.descriptionItemDefaults,this.descriptionItemProperties,_3);return{items:[_4,_5]};case"mainForm":var _6=(this.fieldPickerTitle?{title:this.fieldPickerTitle}:null),_7=(this.triggerEventTitle?{title:this.triggerEventTitle}:null),_8={valueMap:{"editStart":this.editStartEventTitle,"editStartAndChanged":this.editStartAndChangedEventTitle,"editorEnter":this.editorEnterEventTitle,"editorExit":this.editorExitEventTitle,"changed":this.changedEventTitle,"submit":this.submitEventTitle,"manual":this.manualEventTitle}},_9=isc.addProperties({creator:this,editorType:this.fieldPickerConstructor},this.fieldPickerDefaults,this.fieldPickerProperties,_6),_10=isc.addProperties({creator:this,editorType:this.triggerEventPickerConstructor},this.triggerEventPickerDefaults,_8,this.triggerEventPickerProperties,_7)
return{items:[_9,_10]};case"applyWhenForm":var _11=(this.applyWhenTitle?{title:this.applyWhenTitle}:null),_12=isc.addProperties({name:"applyWhen"},this.applyWhenItemDefaults,this.applyWhenItemDefaults,_11),_13={type:"StaticTextItem",name:"placeholder",showTitle:false,value:this.applyWhenPlaceholder},_14={type:"CanvasItem",showTitle:false,name:"conditionalItem",showIf:"false",createCanvas:function(){return this.form.creator.createConditionalForm()}};return{items:[_12,_13,_14]};case"validatorForm":var _11=(this.validatorTitle?{title:this.validatorTitle}:null);var _15=isc.addProperties({creator:this,editorType:this.typePickerConstructor},this.typePickerDefaults,this.typePickerProperties,_11);var _16={name:"valuesItem",editorType:"CanvasItem",showTitle:true,title:null,showIf:"false",canvas:this.getValuesForm(this.validatorType)}
return{disabled:(this.fieldName==null),items:[_15,_16]};case"messageForm":var _11=(this.errorMessageTitle?{title:this.errorMessageTitle}:null),_17=isc.addProperties({name:"errorMessage"},this.errorMessageItemDefaults,this.errorMessageItemDefaults,_11);return{items:[_17]}}},isc.A.shouldShowFieldPicker=function isc_RuleEditor_shouldShowFieldPicker(){if(this.showFieldPicker!=null)return this.showFieldPicker;return this.validatorIsRule},isc.A.getField=function isc_RuleEditor_getField(_1,_2){return this.dataSource?this.dataSource.getField(_1):isc.DataSource.getFieldFromDataSources(_1,this.dataSources,_2)},isc.A.getFieldData=function isc_RuleEditor_getFieldData(){if(this.$89u==null){var _1=this.dataSources;if(_1!=null){this.$89u=isc.DataSource.getCombinedDataSourceFields(this.dataSources)}else if(this.dataSource){var _2=isc.getKeys(this.dataSource.getFields());this.$89u=_2.duplicate()}
this.$896=[];for(var i=0;i<this.$89u.length;i++){var _4=this.$89u[i],_5=this.getField(_4);this.$896[i]={name:_4,title:_5.title||_5.name,type:_5.type||"text"}}}
return this.$896},isc.A.updateFieldName=function isc_RuleEditor_updateFieldName(_1,_2){this.fieldName=_1;this.locator=_2;var _3=_1!=null&&(!isc.isAn.Array(_1)||_1.length>0),_4=_2!=null&&(!isc.isAn.Array(_2)||_2.length>0),_5=(_3||_4)?this.getSupportedTypes(_1,_2):[],_6;if(this.validatorType!=null&&_5.length>0){_6=_5.contains(this.validatorType)}
if(this.validatorForm){if(!_6){this.validatorForm.setValue("type",null);this.validatorType=null}
if(_5.length==0){this.validatorForm.setDisabled(true)}else{this.typePicker.setValueMap(_5);this.validatorForm.setDisabled(false)}}
if((_4||_3)&&this.validatorType!=null){var _7=false;if(!_4){var _8=this.$91p;if(_8==null){_7=true}else{_7=true;for(var i=0;i<_8.length;i++){var _10=_8[i];if(isc.isAn.Array(_1)?(_1.contains(_10)):(_1==_10))
{_7=false;break}}}}
this.$91p=(_1==null)?null:(isc.isAn.Array(_1)?_1:[_1]);if(this.valuesForm.clause.getValue("operator")!=this.validatorType){_7=true}
if(isc.isAn.Array(_1))_1=_1[0];this.valuesForm.fieldName=_1;this.valuesForm.clause.setValue("fieldName",_1);this.valuesForm.clause.setValue("operator",this.validatorType);if(_7){var _11=this.getValidatorDefinition(this.validatorType);this.valuesForm.updateValueItems(this.valuesForm.getField(_1),_11,_1)}}
this.updateValuesFormVisibility()},isc.A.updateValuesFormVisibility=function isc_RuleEditor_updateValuesFormVisibility(){if(this.valuesForm){if((this.fieldName==null&&this.locator==null)||this.validatorType==null){this.validatorForm.getItem("valuesItem").hide()}else{if(!this.valuesForm.isVisible()){this.validatorForm.getItem("valuesItem").show()}}}},isc.A.shouldShowTriggerEventPicker=function isc_RuleEditor_shouldShowTriggerEventPicker(){if(this.showTriggerEventPicker!=null)return this.showTriggerEventPicker;return this.validatorIsRule},isc.A.createConditionalForm=function isc_RuleEditor_createConditionalForm(){var _1=this.filterTopOperatorAppearance||"radio";this.conditionalForm=this.createAutoChild("conditionalForm",{dataSource:this.dataSource,dataSources:this.dataSources,topOperatorAppearance:_1});this.conditionalForm.fieldPickerProperties.pickListWidth=this.conditionalForm.getWidth();return this.conditionalForm},isc.A.updateConditionalForm=function isc_RuleEditor_updateConditionalForm(_1){var _2=this.applyWhenForm.getItem("placeholder"),_3=this.applyWhenForm.getItem("conditionalItem");if(!_1){_2.show();_3.hide()}else{var _4=this.applyWhen||{};this.conditionalForm.setCriteria(_4);_2.hide();_3.show()}
this.conditionalForm.setTopOperatorAppearance(isc.DataSource.isFlatCriteria(_4)?"radio":"bracket")},isc.A.getTypeValueMap=function isc_RuleEditor_getTypeValueMap(){return this.getSupportedTypes(this.fieldName,this.locator)},isc.A.getSupportedTypes=function isc_RuleEditor_getSupportedTypes(_1,_2){var _3=this.availableTypes,_4={};_1=_1||[];_2=_2||[];if(!isc.isAn.Array(_1))_1=[_1];if(!isc.isAn.Array(_2))_2=[_2];if(_3.length==0||_1.length==0&&_2.length==0){return[]}
var _5=null,_6={date:true,float:true,integer:true,time:true};for(var i=0;i<_3.length;i++){var _8=this.getValidatorDefinition(_3[i])||{},_9=true;if(_2.length>0){if(!_8.isRule){_9=false}else{for(var _10=0;_10<_2.length;_10++){var _11=isc.AutoTest.getLocatorObjectType(_2[_10]),_12=_8.supportedTargets||["FormItem"];if(!_12.contains(_11)){_9=false;break}}}}
if(!_9)continue;if(_1.length>0){for(var _10=0;_10<_1.length;_10++){var _13=this.getField(_1[_10]);if(_13==null){this.logWarn("unable to retrieve field for:"+_1[_10]);continue}
var _14=isc.SimpleType.getBaseType(_13.type||"text");if(_3[i]=="range"){if(!_6[_14]||(_5!=null&&_5!=_14))
{_9=false;break}else{_5=_14}}else{if(_8.dataType!=null&&_8.dataType!="none"&&_8.dataType!=_14){_9=false;break}}}}
if(_9){var _15=this.getValidatorDefinition(_3[i]);var _16=_15.description||isc.DataSource.getAutoTitle(_3[i]);_4[_3[i]]=_16}}
return _4},isc.A.updateValidatorType=function isc_RuleEditor_updateValidatorType(_1,_2){if(this.validatorType==_1&&!_2)return;this.validatorType=_1;if(_1!=null){var _3=this.valuesForm,_4=this.getValuesForm(_1);if(_3!=_4){this.valuesForm=_4;this.validatorForm.getItem("valuesItem").setCanvas(this.valuesForm)}}
this.updateValuesFormVisibility()},isc.A.resolveValidatorType=function isc_RuleEditor_resolveValidatorType(_1){if(_1==null)_1=this.validatorType;if(_1==null)return null;if(_1=="range"){var _2=this.fieldName,_3;if(_2!=null){if(!isc.isAn.Array(_2))_2=[_2];var _4=false;for(var i=0;i<_2.length;i++){var _6=this.getField(_2[i]),_7=_6.type||"integer";_7=isc.SimpleType.getBaseType(_7);if(_3==null){_3=_7}else{if(_7!=_3&&(_7!="date"&&_3!="datetime"&&_7!="datetime"&&_3!="date"))
{_4=true;_3="integer"}}}
if(_4){this.logWarn("'range' validator for fields with differing types:"+this.echo(this.fieldName)+". Defaulting to integer type data","RuleEditor")}else{this.logDebug("'range' validator for field[s]:"+this.echo(this.fieldName)+". Assuming "+_3+" type data","RuleEditor")}}else{this.logInfo("Attempting to get 'range' validator with no field type - defaulting to integer","RuleEditor");_3="integer"}
if(_3=="date"||_3=="datetime"){_1="dateRange"}else if(_3=="time"){_1="timeRange"}else if(_3=="float"){_1="floatRange"}else{_1="integerRange"}}
return _1},isc.A.getValidatorDefinition=function isc_RuleEditor_getValidatorDefinition(_1){_1=this.resolveValidatorType(_1);return isc.Validator.$74u[_1]},isc.A.getValuesForm=function isc_RuleEditor_getValuesForm(_1){if(_1!=null){var _2=this.getValidatorDefinition(_1),_3=_2.valueType;_2.ID=_1}
var _4=this.fieldName;if(isc.isAn.Array(_4))_4=_4[0];if(this.valuesForm){var _5=_4?this.valuesForm.getField(_4):null;this.valuesForm.updateValueItems(_5,_2,_4);this.valuesForm.clause.setValue("operator",_1);return this.valuesForm}else{var _6=this.valuesForm=this.createAutoChild("valuesForm",{visibility:([this.fieldName||this.locator]?"inherit":"hidden"),showRemoveButton:false,dataSources:this.dataSources,dataSource:this.dataSource,fieldName:_4,operatorType:_1});var _7=_6.clause;_7.getItem("operator").hide();_7.getItem("operator").addUnknownValues=true;return _6}},isc.A.setValidatorType=function isc_RuleEditor_setValidatorType(_1){this.validatorForm.setValue("type",_1);this.updateValidatorType(_1)},isc.A.setFieldName=function isc_RuleEditor_setFieldName(_1){var _2=this.locator;if(this.fieldPicker){var _3=_1
if(_2!=null){if(!isc.isAn.Array(_2))_3=[_2];else _3=_2.duplicate();if(isc.isAn.Array(_1)){_3.addList(_1)}else if(_1!=null){_3.add(_1)}}
this.fieldPicker.setValue(_3)}
this.updateFieldName(_1,this.locator)},isc.A.setLocator=function isc_RuleEditor_setLocator(_1){if(this.fieldPicker){var _2=this.fieldName,_3=_1;if(_2!=null){if(!isc.isAn.Array(_2))_3=[_2];else _3=_2.duplicate();if(isc.isAn.Array(_1)){_3.addList(_1)}else if(_1!=null){_3.add(_1)}}
this.fieldPicker.setValue(_3)}
this.updateFieldName(this.fieldName,_1)},isc.A.setTriggerEvent=function isc_RuleEditor_setTriggerEvent(_1){if(this.triggerEventPicker){this.triggerEventPicker.setValue(_1)}
this.updateTriggerEvent(_1)},isc.A.updateTriggerEvent=function isc_RuleEditor_updateTriggerEvent(_1){this.triggerEvent=_1},isc.A.setApplyWhen=function isc_RuleEditor_setApplyWhen(_1){this.applyWhen=_1;this.applyWhenForm.setValue("applyWhen",(this.applyWhen!=null));this.updateConditionalForm(_1!=null)},isc.A.getApplyWhen=function isc_RuleEditor_getApplyWhen(){if(this.applyWhenForm.getValue("applyWhen")){this.applyWhen=this.conditionalForm.getCriteria()}else{this.applyWhen=null}
return this.applyWhen},isc.A.getAttributesFromClause=function isc_RuleEditor_getAttributesFromClause(){var _1=this.getValidatorDefinition();var _2=this.fieldName,_3=this.valuesForm;if(isc.isAn.Array(_2))_2=_2[0];var _4=_3.getClauseValues(_2,_1);return _4},isc.A.setClauseAttributes=function isc_RuleEditor_setClauseAttributes(_1){if(this.valuesForm==null)return;var _2=this.getValidatorDefinition();var _3=this.fieldName;if(isc.isAn.Array(_3))_3=_3[0];this.valuesForm.setClauseValues(_3,_2,_1)},isc.A.getValidator=function isc_RuleEditor_getValidator(){return this.getRule()},isc.A.getRule=function isc_RuleEditor_getRule(){if(this.validatorType==null||(this.fieldName==null&&this.locator==null))return null;var _1={};_1.type=this.resolveValidatorType(this.validatorType);if(this.nameForm!=null){var _2=this.nameForm.getValue("name");if(_2!=null)_1.name=_2;var _3=this.nameForm.getValue("description");if(_3!=null)_1.description=_3}
if(this.valuesForm!=null){var _4=this.getAttributesFromClause();for(var _5 in _4){if(_5=="type")continue;_1[_5]=_4[_5]}}
if(this.validatorIsRule){if(this.fieldName)_1.fieldName=this.fieldName;if(this.locator)_1.locator=this.locator;if(this.triggerEvent)_1.triggerEvent=this.triggerEvent}else{delete _1.fieldName}
_1.errorMessage=this.messageForm.getValue("errorMessage");var _6=this.getApplyWhen();if(_6!=null)_1.applyWhen=_6;if(!this.showNameForm){_1.description=this.createRuleDescription(_1)}
return _1},isc.A.createRuleDescription=function isc_RuleEditor_createRuleDescription(_1){if(!_1.type)return null;var _2=this.getValidatorDefinition(_1.type),_3=_2.title||isc.DataSource.getAutoTitle(_1.type),_4=this.triggerEventPicker.valueMap,_5=_3+" for field "+_1.fieldName+" on "+_4[_1.triggerEvent];if(_1.applyWhen){_5+=" if "+isc.DataSource.getAdvancedCriteriaDescription(_1.applyWhen,this.dataSources||this.dataSource)}
return _5},isc.A.validate=function isc_RuleEditor_validate(){var _1=false;if(this.nameForm)_1=this.nameForm.validate()==false;if(this.mainForm)_1=(this.mainForm.validate()==false)||_1;if(this.applyWhenForm&&this.applyWhenForm.getValue("applyWhen")){_1=(this.conditionalForm.validate()==false)||_1}
if(this.validatorForm){_1=(this.validatorForm.validate()==false)||_1;if(this.valuesForm)_1=(this.valuesForm.validate()==false)||_1}
if(this.messageForm)_1=(this.messageForm.validate()==false)||_1;return!_1},isc.A.setRule=function isc_RuleEditor_setRule(_1,_2){this.validator=this.rule=_1;if(_2){this.validatorType=_1.type;this.applyWhen=_1.applyWhen;this.fieldName=_1.fieldName;this.locator=_1.locator;this.triggerEvent=_1.triggerEvent}else{if(this.nameForm){this.nameForm.setValue("name",_1.name);this.nameForm.setValue("description",_1.description)}
if(_1.fieldName!=null||_1.locator!=null){this.setFieldName(_1.fieldName);this.setLocator(_1.locator)}
this.setTriggerEvent(_1.triggerEvent);this.setValidatorType(_1.type);this.setApplyWhen(_1.applyWhen);this.messageForm.setValue("errorMessage",_1.errorMessage);this.setClauseAttributes(_1)}},isc.A.setValidator=function isc_RuleEditor_setValidator(_1){this.setRule(_1)},isc.A.clearRule=function isc_RuleEditor_clearRule(){this.rule=this.validator=null;this.setFieldName(null);this.setValidatorType(null);this.setApplyWhen(null);this.setTriggerEvent(null);if(this.nameForm)this.nameForm.clearValues();if(this.messageForm)this.messageForm.clearValue("errorMessage")},isc.A.clearValidator=function isc_RuleEditor_clearValidator(){return this.clearRule()});isc.B._maxIndex=isc.C+33;if(isc.DynamicForm){isc.defineClass("SubstringCountEditor","CanvasItem");isc.A=isc.SubstringCountEditor.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.canvasConstructor="DynamicForm";isc.A.canvasDefaults={numCols:3};isc.A.substringFieldDefaults={name:"substring",showTitle:false,type:"text",colSpan:"*",width:"*"};isc.A.countFieldDefaults={name:"count",showTitle:false,hint:"Count",showHintInField:true,width:50,type:"integer"};isc.A.operatorFieldDefaults={name:"operator",title:"Operator",editorType:"SelectItem",width:50,defaultValue:"==",allowEmptyValue:false,valueMap:["==","!=","<","<=",">",">="]};isc.B.push(isc.A.createCanvas=function isc_SubstringCountEditor_createCanvas(_1,_2){var _3=isc.addProperties({},this.substringFieldDefaults,this.substringFieldProperties),_4=isc.addProperties({},this.countFieldDefaults,this.countFieldProperties),_5=isc.addProperties({},this.operatorFieldDefaults,this.operatorFieldProperties);return this.canvas=this.createAutoChild("canvas",{items:[_3,_4,_5]})});isc.B._maxIndex=isc.C+1;isc.defineClass("FloatRangeEditor","CanvasItem");isc.A=isc.FloatRangeEditor.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.canvasConstructor="DynamicForm";isc.A.canvasDefaults={numCols:2};isc.A.minFieldDefaults={name:"min",showTitle:false,type:"float",hint:"Min",showHintInField:true};isc.A.maxFieldDefaults={name:"max",showTitle:false,type:"float",hint:"Max",showHintInField:true};isc.A.exclusiveFieldDefaults={name:"exclusive",title:"Exclusive",colSpan:"*",prompt:"Range is exclusive (does not include min/max values)",type:"boolean",editorType:"CheckboxItem",defaultValue:false};isc.B.push(isc.A.createCanvas=function isc_FloatRangeEditor_createCanvas(_1,_2){var _3=isc.addProperties({},this.minFieldDefaults,this.minFieldProperties),_4=isc.addProperties({},this.maxFieldDefaults,this.maxFieldProperties),_5=isc.addProperties({},this.exclusiveFieldDefaults,this.exclusiveFieldProperties);return this.canvas=this.createAutoChild("canvas",{items:[_3,_4,_5]})});isc.B._maxIndex=isc.C+1;isc.defineClass("FloatPrecisionEditor","CanvasItem");isc.A=isc.FloatPrecisionEditor.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.canvasConstructor="DynamicForm";isc.A.canvasDefaults={numCols:1};isc.A.precisionFieldDefaults={name:"precision",showTitle:false,type:"float",hint:"Precision",showHintInField:true};isc.A.roundFieldDefaults={showTitle:false,name:"roundToPrecision",title:"Round to precision",type:"boolean",editorType:"CheckboxItem",defaultValue:false};isc.B.push(isc.A.createCanvas=function isc_FloatPrecisionEditor_createCanvas(_1,_2){var _3=isc.addProperties({},this.precisionFieldDefaults,this.precisionFieldProperties),_4=isc.addProperties({},this.roundFieldDefaults,this.roundFieldProperties);return this.canvas=this.createAutoChild("canvas",{items:[_3,_4]})});isc.B._maxIndex=isc.C+1;isc.defineClass("MaskRuleEditor","CanvasItem");isc.A=isc.MaskRuleEditor.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.canvasConstructor="DynamicForm";isc.A.canvasDefaults={numCols:1};isc.A.maskFieldDefaults={name:"mask",editorType:"TextItem",showTitle:false,hint:"mask",showHintInField:true};isc.A.transformFieldDefaults={name:"transformTo",editorType:"TextItem",showTitle:false,hint:"transformTo",showHintInField:true};isc.B.push(isc.A.createCanvas=function isc_MaskRuleEditor_createCanvas(_1,_2){var _3=isc.addProperties({},this.maskFieldDefaults,this.maskFieldProperties),_4=isc.addProperties({},this.transformFieldDefaults,this.transformFieldProperties);return this.canvas=this.createAutoChild("canvas",{items:[_3,_4]})});isc.B._maxIndex=isc.C+1;isc.defineClass("PopulateRuleEditor","BlurbItem");isc.A=isc.PopulateRuleEditor.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.emptyFormulaText="Click the icon to select a formula";isc.A.formulaVarsTitle="Formula Variables:";isc.A.formulaTitle="Formula:";isc.A.editFormulaPrompt="Click to edit formula";isc.A.icons=[{click:"item.showFormulaWindow()"}];isc.A.formulaWindowConstructor="Window";isc.A.formulaWindowDefaults={title:"Formula Editor",showMinimizeButton:false,showMaximizeButton:false,isModal:true,showModalMask:true,autoSize:true,autoCenter:true,autoDraw:true,headerIconProperties:{padding:1,src:"[SKINIMG]ListGrid/formula_menuItem.png"},closeClick:function(){this.items.get(0).completeEditing(true)}};isc.A.formulaBuilderConstructor="FormulaBuilder";isc.A.formulaBuilderDefaults={width:300,showTitleField:false,showAutoHideCheckBox:false,showSaveAddAnotherButton:false,fireOnClose:function(){this.creator.userEditComplete(!this.cancelled)}};isc.B.push(isc.A.formatValue=function isc_PopulateRuleEditor_formatValue(_1,_2,_3,_4){if(_1==null||_1.formula==null){return this.emptyFormulaText}
var _5=_1.formulaVars,_6=isc.getKeys(_5).sort(),_7="";for(var i=0;i<_6.length;i++){var _9=_6[i];_7+=_9+":&nbsp;"+_5[_9]+"\n"}
return"<table class="+this.getTextBoxStyle()+"><tr><td>"+this.formulaVarsTitle+"</td><td>"+_7+"</td></tr><tr><td>"+this.formulaTitle+"</td><td>"+_1.formula+"</td></tr></table>"},isc.A.init=function isc_PopulateRuleEditor_init(){this.icons[0].prompt=this.editFormulaPrompt;return this.Super("init",arguments)},isc.A.showFormulaWindow=function isc_PopulateRuleEditor_showFormulaWindow(){if(this.formulaBuilder==null){this.formulaBuilder=this.createAutoChild("formulaBuilder",{dataSource:this.form.creator.dataSource,dataSources:this.form.creator.dataSources,mathFunctions:isc.MathFunction.getDefaultFunctionNames()});this.formulaWindow=this.createAutoChild("formulaWindow",{items:[this.formulaBuilder]})}
this.formulaBuilder.setValue("");this.formulaWindow.show()},isc.A.userEditComplete=function isc_PopulateRuleEditor_userEditComplete(_1){if(_1){var _2=this.formulaBuilder.getBasicValueObject(),_3,_4;if(_2!=null){_3=_2.text;_4=_2.formulaVars}
if(_3!=null){this.storeValue({formula:_3,formulaVars:_4})}else{this.storeValue(null)}
this.redraw()}
this.formulaWindow.clear()});isc.B._maxIndex=isc.C+4;isc.defineClass("ReadOnlyRuleEditor","SelectItem");isc.A=isc.ReadOnlyRuleEditor.getPrototype();isc.A.defaultValue=isc.Validator.READONLY;isc.A.valueMap=[isc.Validator.HIDDEN,isc.Validator.DISABLED,isc.Validator.READONLY]}
isc.setScreenReaderMode=function(_1){isc.screenReader=_1}
isc.liteAria=null;isc.A=isc.Canvas;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.ariaEnabled=function isc_c_Canvas_ariaEnabled(){return isc.screenReader||isc.screenReader!==false&&((isc.Browser.isIE&&isc.Browser.version>=8)||!isc.Browser.isIE)},isc.A.useLiteAria=function isc_c_Canvas_useLiteAria(){if(isc.liteAria!=null)return isc.liteAria;if(isc.screenReader==true)return false;return(isc.Browser.isIE&&isc.Browser.version<9)},isc.A.setAriaRole=function isc_c_Canvas_setAriaRole(_1,_2){if(this.logIsDebugEnabled("aria")){this.logDebug("ARIA role changed to: "+_2+" on element: "+this.echoLeaf(_1),"aria")}
_1.setAttribute("role",_2)},isc.A.setAriaState=function isc_c_Canvas_setAriaState(_1,_2,_3){if(!_1)return;if(this.logIsInfoEnabled("aria")){this.logInfo("ARIA state: "+_2+": "+_3+", set on element: "+isc.echoLeaf(_1),"aria")}
_3=isc.makeXMLSafe(_3,false,true,true,false,true,true);_1.setAttribute("aria-"+_2,_3)},isc.A.setAriaStates=function isc_c_Canvas_setAriaStates(_1,_2){if(!_1)return;if(_2==null)return;for(var _3 in _2){this.setAriaState(_1,_3,_2[_3])}},isc.A.clearAriaState=function isc_c_Canvas_clearAriaState(_1,_2){if(!_1)return;_1.removeAttribute("aria-"+_2)},isc.A.getAriaStateAttributes=function isc_c_Canvas_getAriaStateAttributes(_1){var _2="";if(_1){for(var _3 in _1){var _4=_1[_3];if(isc.isA.String(_4)){_4=isc.makeXMLSafe(_4,false,true,true,false,true,true)}
_2+=" aria-"+_3+"='"+_4+"'"}}
return _2});isc.B._maxIndex=isc.C+7;isc.A=isc.Canvas.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.setAriaRole=function isc_Canvas_setAriaRole(_1){isc.Canvas.setAriaRole(this.getClipHandle(),_1)},isc.A.setAriaState=function isc_Canvas_setAriaState(_1,_2){isc.Canvas.setAriaState(this.getClipHandle(),_1,_2)},isc.A.setAriaStates=function isc_Canvas_setAriaStates(_1){isc.Canvas.setAriaStates(this.getClipHandle(),_1)},isc.A.clearAriaState=function isc_Canvas_clearAriaState(_1){isc.Canvas.clearAriaState(this.getClipHandle(),_1)},isc.A.getAriaStateAttributes=function isc_Canvas_getAriaStateAttributes(){return isc.Canvas.getAriaStateAttributes(this.ariaState)});isc.B._maxIndex=isc.C+5;if(isc.DynamicForm){isc.A=isc.DynamicForm.getPrototype();isc.A.rightTitlePrefix="<span aria-hidden='true'>:&nbsp;</span>";isc.A.titleSuffix="<span aria-hidden='true'>&nbsp;:</span>";isc.A.requiredRightTitlePrefix="<b><span aria-hidden='true'>:&nbsp;</span>";isc.A.requiredTitleSuffix="<span aria-hidden='true'>&nbsp;:</span></b>";isc.A=isc.FormItem.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.B.push(isc.A.setAriaRole=function isc_FormItem_setAriaRole(_1){var _2=this.getFocusElement();if(_2!=null)isc.Canvas.setAriaRole(_2,_1)},isc.A.setAriaState=function isc_FormItem_setAriaState(_1,_2){var _3=this.getFocusElement();if(_3!=null)isc.Canvas.setAriaState(_3,_1,_2)},isc.A.setAriaStates=function isc_FormItem_setAriaStates(_1){var _2=this.getFocusElement();if(_2!=null)isc.Canvas.setAriaStates(_2,_1)},isc.A.clearAriaState=function isc_FormItem_clearAriaState(_1){var _2=this.getFocusElement();if(_2!=null)isc.Canvas.clearAriaState(_2,_1)},isc.A.getAriaState=function isc_FormItem_getAriaState(){var _1={};if(this.required&&this.form&&this.form.hiliteRequiredFields)_1.required=true;if(this.hasErrors()){_1.invalid=true;var _2=this.getErrorIconId();_1.describedby=_2}
if(this.isDisabled())_1.disabled=true;if(isc.isA.CheckboxItem(this))_1.checked=!!this.getValue();return _1},isc.A.addContentRoles=function isc_FormItem_addContentRoles(){if(!isc.Canvas.ariaEnabled()||isc.Canvas.useLiteAria())return;if(!this.$kk()||!this.ariaRole)return;this.setAriaRole(this.ariaRole);var _1;if(this.outerAriaRole){_1=this.getHandle();if(_1!=null)isc.Canvas.setAriaRole(_1,this.outerAriaRole)}
if(this.title){var _2;if(this.hasDataElement()){_2=this.getDataElement()}else if(this.outerAriaRole){_2=_1!=null?_1:this.getHandle()}else{_2=this.$15h()}
if(_2!=null){isc.Canvas.setAriaState(_2,"label",this.title)}}
if(this.ariaState)this.setAriaStates(this.ariaState);this.setAriaStates(this.getAriaState())});isc.B._maxIndex=isc.C+6;isc.A=isc.TextAreaItem.getPrototype();isc.A.ariaState={multiline:true};isc.A=isc.ComboBoxItem.getPrototype();isc.A.ariaState={autocomplete:"list"};isc.A.ariaRole="combobox";isc.A=isc.SelectItem.getPrototype();isc.A.ariaRole="option";isc.A.outerAriaRole="listbox";isc.A.ariaState={expanded:false,selected:true};isc.A=isc.StaticTextItem.getPrototype();isc.A.ariaRole="textbox";isc.A.ariaState={disabled:true}}
if(isc.GridRenderer){isc.A=isc.GridRenderer.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.screenReaderCellSeparator="/";isc.B.push(isc.A.setRowAriaState=function isc_GridRenderer_setRowAriaState(_1,_2,_3){var _4=this.getTableElement(_1);if(_4==null)return;isc.Canvas.setAriaState(_4,_2,_3)},isc.A.setRowAriaStates=function isc_GridRenderer_setRowAriaStates(_1,_2){var _3=this.getTableElement(_1);if(_3==null)return;isc.Canvas.setAriaStates(_3,_2)});isc.B._maxIndex=isc.C+2;isc.A=isc.ListGrid.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.ariaRole="list";isc.A.rowRole="listitem";isc.B.push(isc.A.getRowRole=function isc_ListGrid_getRowRole(_1,_2){if(_2&&_2.isSeparator)return"separator";return this.rowRole},isc.A.getRowAriaState=function isc_ListGrid_getRowAriaState(_1,_2){if(!isc.Canvas.ariaEnabled()||isc.Canvas.useLiteAria())return;var _3;if(!this.showAllRecords&&this.data!=null){_3={setsize:this.getTotalRows(),posinset:_1+1}}
if(this.selection&&this.selection.isSelected&&this.selection.isSelected(_1)){if(_3==null)_3={}
_3.selected=true}
return _3});isc.B._maxIndex=isc.C+2;isc.A=isc.TreeGrid.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.ariaRole="tree";isc.A.rowRole="treeitem";isc.B.push(isc.A.getRowRole=function isc_TreeGrid_getRowRole(_1,_2){return this.rowRole},isc.A.getRowAriaState=function isc_TreeGrid_getRowAriaState(_1,_2){if(!isc.Canvas.ariaEnabled()||isc.Canvas.useLiteAria())return;var _3=this.data,_4=!!(this.selection&&this.selection.isSelected&&this.selection.isSelected(_2)),_5=_3.getLevel(_2);var _6={selected:_4,level:_5,setsize:this.getTotalRows(),posinset:_1+1};if(_3.isFolder(_2))_6.expanded=!!_3.isOpen(_2);return _6});isc.B._maxIndex=isc.C+2;isc.A=isc.Menu.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.ariaRole="menu";isc.A.screenReaderCellSeparator=null;isc.B.push(isc.A.getRowRole=function isc_Menu_getRowRole(_1,_2){if(!_2||_2.isSeparator)return"separator";if(_2.checked||_2.checkIf||_2.checkable)return"menuitemcheckable";if(_2.radio)return"menuitemradio";return"menuitem"},isc.A.getRowAriaState=function isc_Menu_getRowAriaState(_1){if(this.hasSubmenu(this.getItem(_1)))return{haspopup:true}});isc.B._maxIndex=isc.C+2;isc.A=isc.MenuButton.getPrototype();isc.A.ariaRole="button";isc.A.ariaState={haspopup:true};isc.A=isc.MenuBar.getPrototype();isc.A.ariaRole="menubar"}
if(isc.RichTextEditor){isc.A=isc.ListPropertiesSampleTile.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.ariaState={};isc.A.$118a={"disc":"Bullets","circle":"Circles","square":"Filled squares","decimal":"Numbers","upper-roman":"Uppercase Roman numerals","lower-roman":"Lowercase Roman numerals","upper-alpha":"Uppercase letters","lower-alpha":"Lowercase letters"};isc.A.$118b="Other bulleted style";isc.A.$118c="Other numbered style";isc.B.push(isc.A.getAriaState=function isc_ListPropertiesSampleTile_getAriaState(){var _1=isc.addProperties({},this.ariaState);var _2=this.$1177,_3=_2.style;if(_3=="custom-image"){var _4=_2.image;var _5=_4.lastIndexOf('/');if(_5>=0){_4=_4.substring(_5+1)}
_1.label="Custom bullet image '"+_4+"'"}else if(this.$118a.hasOwnProperty(_3)){_1.label=this.$118a[_3]}else{var _6=isc.ListPropertiesPane.getListType(_2)=="unordered";_1.label=_6?this.$118b:this.$118c}
return _1},isc.A.getAriaStateAttributes=function isc_ListPropertiesSampleTile_getAriaStateAttributes(){return isc.Canvas.getAriaStateAttributes(this.getAriaState())});isc.B._maxIndex=isc.C+2;isc.A=isc.ListPropertiesPane.getPrototype();isc.A.sampleTileLayoutAriaLabel="List style";isc.ListPropertiesPane.changeDefaults("sampleTileLayoutDefaults",{ariaRole:"radiogroup",ariaState:{haspopup:false},init:function(){this.Super("init",arguments);this.ariaState=isc.addProperties({},this.ariaState,{label:this.creator.sampleTileLayoutAriaLabel})}});isc.ListPropertiesPane.changeDefaults("sampleTileDefaults",{ariaRole:"radio",setSelected:function(){this.Super("setSelected",arguments);this.setAriaState("checked",this.isSelected())}})}
(function(){var _1={Button:"button",StretchImgButton:"button",ImgButton:"button",Label:"label",SectionHeader:"heading",ImgSectionHeader:"heading",CheckboxItem:"checkbox",Slider:"slider",TextItem:"textbox",TextAreaItem:"textbox",Window:"dialog",Toolbar:"toolbar",HTMLFlow:"article",HTMLPane:"article",TabBar:"tablist",PaneContainer:"tabpanel",ImgTab:"tab",EdgedCanvas:"presentation",BackMask:"presentation"}
for(var _2 in _1){var _3=isc.ClassFactory.getClass(_2);if(_3)_3.addProperties({ariaRole:_1[_2]})}})();if(isc.ListGrid!=null&&isc.DynamicForm!=null){isc.ClassFactory.defineClass("DataSourceFieldPicker","DynamicForm");isc.A=isc.DataSourceFieldPicker;isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.FOREIGN_KEY_WARNING="Could not guess which foreignKey to use. Determine which of your fields is the foreign key, and make its foreignKey property point to a field in ";isc.B.push(isc.A.getForeignKeyWarning=function isc_c_DataSourceFieldPicker_getForeignKeyWarning(_1){return isc.DataSourceFieldPicker.FOREIGN_KEY_WARNING+"'"+_1+"'."});isc.B._maxIndex=isc.C+1;isc.A=isc.DataSourceFieldPicker.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.fields=[{name:"DataSource",type:"Select",titleStyle:"formTitle",allowEmptyValue:true,valueField:"ID",getClientPickListData:function(){return this.form.getDatasourcePickListData()},changed:function(_1,_2,_3){_1.handleDsNameChanged(_3)}},{name:"Field",type:"Select",titleStyle:"formTitle",changed:function(_1,_2,_3){_1.handleChanged()}}];isc.B.push(isc.A.getDatasourcePickListData=function isc_DataSourceFieldPicker_getDatasourcePickListData(){if(!this.$97r){this.$97r=[""];if(this.validDsNames&&this.validDsNames.getLength()>0){this.$97r.addList(this.validDsNames.map(function(_1){return{ID:_1}}))}
if(this.allDsRecords&&this.allDsRecords.getLength()>0){if(this.$97r.getLength()>0){this.$97r.add({isSeparator:true})}
this.$97r.addList(this.allDsRecords)}}
return this.$97r},isc.A.setValidDsNames=function isc_DataSourceFieldPicker_setValidDsNames(_1){this.validDsNames=_1;this.$97r=null},isc.A.setAllDsRecords=function isc_DataSourceFieldPicker_setAllDsRecords(_1){this.allDsRecords=_1;this.$97r=null},isc.A.setWarnIfNoForeignKey=function isc_DataSourceFieldPicker_setWarnIfNoForeignKey(_1){this.warnIfNoForeignKey=_1},isc.A.setCombinedValue=function isc_DataSourceFieldPicker_setCombinedValue(_1){var _2=this.getItem("DataSource");var _3=this.getItem("Field");var _4=(_1||"").split(".");_2.setValue(_4[0]);_3.setValue(_4[1]);this.handleDsNameChanged(_4[0])},isc.A.getCombinedValue=function isc_DataSourceFieldPicker_getCombinedValue(){var _1=this.getValue("DataSource");var _2=this.getValue("Field");if(_2)_1=_1+"."+_2;return _1},isc.A.initWidget=function isc_DataSourceFieldPicker_initWidget(){this.Super("initWidget",arguments);if(this.combinedValue)this.setCombinedValue(this.combinedValue)},isc.A.$97s=function isc_DataSourceFieldPicker__warnIfCannotGuessForeignKey(_1){var _2=this.warnIfNoForeignKey;if(!_2||!_2.fields)return;var _3=_2.fields.map(function(_4){return _4.foreignKey?_4.foreignKey.split('.')[0]:null});if(_3.contains(_1.ID))return;_3=_1.getFieldNames().map(function(_7){var _4=_1.getField(_7);return _4.foreignKey?_4.foreignKey.split('.')[0]:null});if(_3.contains(_2.ID))return;var _5=_2.fields.getProperty("name");var _6=_1.getFieldNames();if(_5.intersect(_6).getLength()>0)return;this.addFieldErrors("DataSource",isc.DataSourceFieldPicker.getForeignKeyWarning(this.getValue("DataSource")),true)},isc.A.handleLiveDs=function isc_DataSourceFieldPicker_handleLiveDs(_1){var _2=[];var _3=this.getField("Field");if(_1){_2=_1.getFieldNames();if(this.requiredBaseType){var _4=this;_2=_2.findAll(function(_3){var _5=isc.SimpleType.getBaseType(_1.getField(_3).type,_1);return _5==_4.requiredBaseType})}
if(_2.getLength()==1){_3.setValue(_2[0]);this.handleChanged()}
if(!_2.contains(_3.getValue())){_3.setValue("");this.handleChanged()}
if(this.warnIfNoForeignKey)this.$97s(_1)}
_3.setValueMap(_2)},isc.A.handleDsNameChanged=function isc_DataSourceFieldPicker_handleDsNameChanged(_1){if(!_1)this.getField("Field").setValue("");this.handleChanged();this.getField("Field").setValueMap([]);this.clearFieldErrors("DataSource",true);if(_1){var _2=isc.DS.get(_1);if(_2){this.handleLiveDs(_2)}else{var _3=this;isc.DS.load(_1,function(){_2=isc.DS.get(_1);if(!_2)_3.logWarn("Loading dataSource from server was unsuccessful for "+_1);_3.handleLiveDs(_2)})}}},isc.A.handleChanged=function isc_DataSourceFieldPicker_handleChanged(){if(this.changed)this.changed(this,this.getCombinedValue())});isc.B._maxIndex=isc.C+11;isc.DataSourceFieldPicker.registerStringMethods({changed:"form, value"});isc.ClassFactory.defineClass("DataSourceEditor","VLayout");isc.A=isc.DataSourceEditor.getPrototype();isc.B=isc._allFuncs;isc.C=isc.B._maxIndex;isc.D=isc._funcClasses;isc.D[isc.C]=isc.A.Class;isc.A.overflow="visible";isc.A.mainEditorDefaults={_constructor:"ComponentEditor",autoDraw:false,numCols:8,overflow:"visible",dataSource:"DataSource",fields:[{name:"ID",title:"ID",required:true},{name:"dropExtraFields"},{name:"autoDeriveSchema"},{type:"section",defaultValue:"XPath Binding",showIf:"values.dataFormat != 'iscServer'",itemIds:["dataURL","selectBy","recordXPath","recordName"]},{name:"dataURL",showIf:"values.dataFormat != 'iscServer'"},{name:"selectBy",title:"Select Records By",shouldSaveValue:false,valueMap:{tagName:"Tag Name",xpath:"XPath Expression"},defaultValue:"xpath",redrawOnChange:true,showIf:"values.dataFormat == 'xml'"},{name:"recordXPath",showIf:"values.dataFormat != 'iscServer' && form.getItem('selectBy').getValue() == 'xpath'"},{name:"recordName",showIf:"values.dataFormat == 'xml' && values.selectBy == 'tagName'"},{type:"section",defaultValue:"SQL Binding",showIf:"values.serverType == 'sql' || values.serverType == 'hibernate'",itemIds:["dbName","schemaName","tableName"]},{name:"dbName",showIf:"values.serverType == 'sql'"},{name:"schema",showIf:"values.serverType == 'sql'"},{name:"tableName",showIf:"values.serverType == 'sql' || values.serverType == 'hibernate'"},{name:"beanClassName",showIf:"values.serverType == 'sql' || values.serverType == 'hibernate'"},{type:"section",defaultValue:"Record Titles",sectionExpanded:false,itemIds:["title","pluralTitle","titleField"]},{name:"title"},{name:"pluralTitle"},{name:"titleField"}]};isc.A.fieldEditorDefaults={_constructor:"ListEditor",autoDraw:false,inlineEdit:true,dataSource:"DataSourceField",saveLocally:true,gridButtonsOrientation:"right",fields:[{name:"name",treeField:true,formatCellValue:function(_1,_2,_3,_4,_5){var _6=this.$97t(_1,_2.includeFrom);if(_2.includeFrom){_6+=" <i>["+_2.includeFrom+"]</i>"}
return _6},$97t:function(_1,_2){if(_1){return _1}else{var _3=_2.lastIndexOf(".");if(_3==-1){return _1}else{return _2.substring(_3+1)}}},formatEditorValue:function(_1,_2,_3,_4){return this.$97t(_1,_2.includeFrom)},parseEditorValue:function(_1,_2,_3,_4,_5){return this.$97t(_1,_2.includeFrom)}},{name:"title"},{name:"type",width:60},{name:"required",title:"Req.",width:40,canToggle:true},{name:"hidden",width:40},{name:"length",width:60},{name:"primaryKey",title:"is PK",width:40}],formProperties:{numCols:4,initialGroups:10},formFields:[{name:"name",canEdit:false},{name:"type"},{name:"title"},{name:"primaryKey"},{name:"valueXPath",colSpan:2,showIf:function(){var _1=this.form.creator,_2=_1?_1.creator.mainEditor:null;return(_2&&_2.getValues().dataFormat!='iscServer')}},{type:"section",defaultValue:"Value Constraints",itemIds:["required","length","valueMap"]},{name:"valueMap",rowSpan:2},{name:"required"},{name:"length"},{type:"section",defaultValue:"Component Binding",itemIds:["hidden","detail","canEdit"]},{name:"canEdit"},{name:"hidden"},{name:"detail"},{type:"section",defaultValue:"Relations",sectionExpanded:true,itemIds:["foreignKey","rootValue","includeFrom"]},{name:"foreignKey",type:"staticText",showPickerIcon:true,pickerConstructor:"DataSourceFieldPicker",pickerProperties:{width:160,changed:function(_1,_2){_1.creator.setValue(_2)}},showPicker:function(){var _1=this;while(_1&&!isc.isA.DataSourceEditor(_1))_1=_1.creator;if(!_1){this.logWarn("Could not find the DataSourceEditor");return}
if(!_1.knownDataSources){this.logWarn("DataSourceEditor.knownDataSources has not been set");return}
this.Super("showPicker",arguments);var _2=_1.getDatasourceData();var _3=_1.knownDataSources.findAll({dsType:_2.serverType});this.picker.setValidDsNames(_3.getProperty("ID"));var _4=isc.DS.get(_2.ID);this.picker.requiredBaseType=isc.SimpleType.getBaseType(this.form.getValue("type"),_4);this.picker.setCombinedValue(this.getValue())},destroy:function(){if(this.picker)this.picker.destroy();this.Super("destroy",arguments)}},{name:"rootValue"},{name:"includeFrom",type:"staticText",showPickerIcon:true,pickerConstructor:"DataSourceFieldPicker",pickerProperties:{changed:function(_1,_2){_1.creator.setValue(_2)}},showPicker:function(){var _1=this;while(_1&&!isc.isA.DataSourceEditor(_1))_1=_1.creator;if(!_1){this.logWarn("Could not find the DataSourceEditor");return}
var _2=_1.getDatasourceData();var _3=_2.fields;var _4=_3.findAll(function(_8){return _8.foreignKey})||[];var _5=_4.map(function(_8){return _8.foreignKey.split(".")[0]}).getUniqueItems();var _6=null;if(_1.knownDataSources){var _7=_2.serverType;if(_7){_6=_1.knownDataSources.findAll({dsType:_7})}else{_6=_1.knownDataSources}}
this.Super("showPicker",arguments);this.picker.setValidDsNames(_5);if(_6)this.picker.setAllDsRecords(_6);this.picker.setWarnIfNoForeignKey(_2);this.picker.setCombinedValue(this.getValue())},destroy:function(){if(this.picker)this.picker.destroy();this.Super("destroy",arguments)}}],gridDefaults:{editEvent:"click",listEndEditAction:"next",autoParent:"gridLayout",selectionType:isc.Selection.SINGLE,recordClick:"this.creator.recordClick(record)",modalEditing:true,editorEnter:"if (this.creator.moreButton) this.creator.moreButton.enable()",selectionChanged:function(){if(this.anySelected()&&this.creator.moreButton){this.creator.moreButton.enable()}},contextMenu:{data:[{title:"Remove",click:"target.creator.removeRecord()"}]},styleName:"rightBorderOnly",validateByCell:true,leaveScrollbarGap:false,alternateRecordStyles:true,canRemoveRecords:true,canEdit:true,canEditCell:function(_1,_2){var _3=this.getRecord(_1),_4=this.getField(_2),_5=_4[this.fieldIdProperty],_6=(_5=="name"||_5=="title");if(isc.isA.TreeGrid(this)){if(_3.isFolder&&!(_6||_5=="required"||_5=="hidden")){return false}}
else{if(this.getDataSource().fieldIsComplexType(_4)&&!_6)
return false}
return this.Super('canEditCell',arguments)}},newRecord:function(){if(this.creator.canEditChildSchema){var _1=this.grid,_2=_1.data,_3=this.getSelectedNode();if(!_3)_3=_2.root;var _4=_2.getParent(_3)
if(_3){if(!_3.isFolder)_3=_4;var _5={name:this.getNextUniqueFieldName(_3,"field"),id:this.getNextUnusedNodeId(),parentId:_3?_3.id:null};this.addNode(_5,_3)}}else this.Super("newRecord",arguments)},getSelectedNode:function(){return this.grid.getSelectedRecord()},addNode:function(_1,_2){var _3=this.grid.data;_3.linkNodes([_1])},getNextUniqueFieldName:function(_1,_2){var _3=_1?_1.fields||[]:[],_4=1;if(!_2||_2.length==0)_2="field";if(_3&&_3.length>0){for(var i=0;i<_3.length;i++){var _6=_3.get(i),_7=_6.name;if(_7.substring(0,_2.length)==_2&&_7.length>_2.length){var _8=parseInt(_7.substring(_2.length));if(!isNaN(_8)&&_8>=_4)
_4=_8+1}}}
return _2+_4},getNextUnusedNodeId:function(){var _1=this.grid.data;for(var i=1;i<10000;i++){var _3=_1.findById(i);if(!_3)return i}
return 1}};isc.A.newButtonDefaults={_constructor:isc.AutoFitButton,autoParent:"gridButtons",title:"New Field",click:"this.creator.newRecord()"};isc.A.moreButtonDefaults={_constructor:isc.AutoFitButton,autoParent:"gridButtons",click:"this.creator.editMore()",disabled:true};isc.A.buttonLayoutDefaults={_constructor:"HLayout",width:"100%"};isc.A.saveButtonDefaults={_constructor:"IButton",autoDraw:false,title:"Save",autoFit:true,autoParent:"buttonLayout",click:function(){var _1=true;if(this.creator.showMainEditor!=false)_1=this.creator.mainEditor.validate();if(_1&&this.creator.fieldEditor.validate())this.creator.save()}};isc.A.addChildButtonDefaults={_constructor:"IButton",autoDraw:false,title:"Add Child Object",autoFit:true,click:function(){var _1=this.creator.fieldEditor,_2=_1.grid,_3=_2.data,_4=_2.getSelectedRecord()||_3.root,_5=_3.getParent(_4),_6={isFolder:true,children:[],multiple:true,childTagName:"item"};if(_4){if(!_4.isFolder)_4=_5;_6.name=_1.getNextUniqueFieldName(_4,"child"),_6.id=_1.getNextUnusedNodeId(),_6.parentId=_4.id;_3.linkNodes([_6],_5);_3.openFolder(_6)}}};isc.A.mainStackDefaults={_constructor:"SectionStack",overflow:"visible",width:"100%",height:"100%",visibilityMode:"multiple"};isc.A.instructionsSectionDefaults={_constructor:"SectionStackSection",title:"Instructions",expanded:true,canCollapse:true};isc.A.instructionsDefaults={_constructor:"HTMLFlow",autoFit:true,padding:10};isc.A.mainSectionDefaults={_constructor:"SectionStackSection",title:"DataSource Properties",expanded:true,canCollapse:false,showHeader:false};isc.A.fieldSectionDefaults={_constructor:"SectionStackSection",title:"DataSource Fields &nbsp;<span style='color:#BBBBBB'>(click to edit or press New)</span>",expanded:true,canCollapse:true};isc.A.deriveFieldsSectionDefaults={_constructor:"SectionStackSection",title:"Derive Fields From SQL",expanded:false,canCollapse:true};isc.A.bodyProperties={overflow:"auto",layoutMargin:10};isc.A.deriveFormDefaults={_constructor:"DynamicForm"};isc.A.previewGridDefaults={_constructor:"ListGrid",showFilterEditor:true};isc.A.canEditChildSchema=false;isc.A.canAddChildSchema=false;isc.B.push(isc.A.editNew=function isc_DataSourceEditor_editNew(_1,_2,_3){if(_1.defaults){this.paletteNode=_1;this.start(_1.defaults,_2,true,_3)}else{this.start(_1,_2,true,_3)}},isc.A.editSaved=function isc_DataSourceEditor_editSaved(_1,_2,_3){this.start(_1,_2,false,_3)},isc.A.start=function isc_DataSourceEditor_start(_1,_2,_3,_4){if(_4){this.mainStack.showSection(0);this.instructions.setContents(_4)}else{this.mainStack.hideSection(0)}
if(this.mainEditor)this.mainEditor.clearValues();if(this.fieldEditor)this.fieldEditor.setData(null);this.saveCallback=_2;this.logWarn("editing "+(_3?"new ":"")+"DataSource: "+this.echo(_1));if(!_1){return this.show()}
this.dsClass=_1.Class;if(_3){if(isc.isA.DataSource(_1)){var _5=_1.sfName;_1=_1.getSerializeableFields();if(_5)_1.sfName=_5;this.logWarn("editing new DataSource from live DS, data: "+this.echo(_1))}else{_1.ID=this.getUniqueDataSourceID()}
this.$31u(_1)}else{isc.DMI.callBuiltin({methodName:"loadSharedXML",callback:this.getID()+".$37p(data)",arguments:["DS",_1.ID]})}},isc.A.getUniqueDataSourceID=function isc_DataSourceEditor_getUniqueDataSourceID(){return"newDataSource"},isc.A.$37p=function isc_DataSourceEditor__loadSchemaReply(_1){isc.captureDefaults=true;var _2=isc.eval(_1.js);isc.captureDefaults=null;var _3=_2.defaults;this.logWarn("captured DS defaults: "+this.echo(_3));if(_3.serverType=="sql")_3.dataFormat="iscServer";if(_3.recordXPath!=null&&_3.dataFormat==null){_3.dataFormat="xml"}
this.$31u(_3)},isc.A.$31u=function isc_DataSourceEditor__startEditing(_1){if(this.mainEditor)this.mainEditor.setValues(_1);else this.mainEditorValues=_1;var _2=_1.fields;if(!isc.isAn.Array(_2))_2=isc.getValues(_1.fields);if(this.fieldEditor){if(this.canEditChildSchema){this.setupIDs(_2,1,null);var _3=isc.Tree.create({modelType:"parent",childrenProperty:"fields",titleProperty:"name",idField:"id",nameProperty:"id",root:{id:0,name:"root"},data:_2});_3.openAll();this.fieldEditor.setData(_3)}else this.fieldEditor.setData(_2)}
this.show()},isc.A.setupIDs=function isc_DataSourceEditor_setupIDs(_1,_2,_3){var _4=_2,_5,_6;if(!_4)_4=1;for(var i=0;i<_1.length;i++){var _5=_1.get(i);_5.parentId=_3;_5.id=_4++;if(_5.fields){if(!isc.isAn.Array(_5.fields))_5.fields=isc.getValues(_5.fields);_4=this.setupIDs(_5.fields,_4,_5.id)}}
return _4},isc.A.getDatasourceData=function isc_DataSourceEditor_getDatasourceData(){var _1=this.dsClass||"DataSource",_2=isc.addProperties({},this.mainEditor?this.mainEditor.getValues():this.mainEditorValues);if(this.canEditChildSchema){var _3=this.fieldEditor.grid.data,_4=_3.getCleanNodeData(_3.getRoot(),true).fields;_2.fields=this.getExtraCleanNodeData(_4)}else{_2.fields=this.fieldEditor.getData()}
return _2},isc.A.save=function isc_DataSourceEditor_save(){var _1=this.getDatasourceData();if(_1.serverType=="sql"||_1.serverType=="hibernate"){if(!_1.fields.getProperty("primaryKey").or()){isc.warn("SQL / Hibernate DataSources must have a field marked as the primary key");return}}
this.doneEditing(_1)},isc.A.getExtraCleanNodeData=function isc_DataSourceEditor_getExtraCleanNodeData(_1,_2){if(_1==null)return null;var _3=[],_4=false;if(!isc.isAn.Array(_1)){_1=[_1];_4=true}
for(var i=0;i<_1.length;i++){var _6=_1[i],_7={};for(var _8 in _6){if(_8=="id"||_8=="parentId"||_8=="isFolder")continue;_7[_8]=_6[_8];if(_8==this.fieldEditor.grid.data.childrenProperty&&isc.isAn.Array(_7[_8])){_7[_8]=this.getExtraCleanNodeData(_7[_8])}}
_3.add(_7)}
if(_4)return _3[0];return _3},isc.A.doneEditing=function isc_DataSourceEditor_doneEditing(_1){var _2=this.dsClass||"DataSource",_3;if(isc.DS.isRegistered(_2)){_3=isc.DS.get(_2)}else{_3=isc.DS.get("DataSource");_1._constructor=_2}
var _4=_3.xmlSerialize(_1);this.logWarn("saving DS with XML: "+_4);isc.DMI.callBuiltin({methodName:"saveSharedXML",arguments:["DS",_1.ID,_4]});var _5=isc.ClassFactory.getClass(_2).create(_1);this.fireCallback(this.saveCallback,"dataSource",[_5]);this.saveCallback=null},isc.A.clear=function isc_DataSourceEditor_clear(){if(this.mainEditor)this.mainEditor.clearValues();else this.mainEditorValues=null;this.fieldEditor.setData([])},isc.A.initWidget=function isc_DataSourceEditor_initWidget(){this.Super('initWidget',arguments);this.addAutoChildren(["mainStack","instructions","mainEditor","buttonLayout","saveButton"]);if(this.canAddChildSchema){this.canEditChildSchema=true;this.addAutoChild("addChildButton")}
this.addAutoChild("fieldEditor",{formConstructor:isc.TComponentEditor||isc.ComponentEditor,gridConstructor:this.canEditChildSchema?isc.TreeGrid:isc.ListGrid,showMoreButton:this.showMoreButton,newButtonTitle:"New Field",newButtonDefaults:this.newButtonDefaults,newButtonProperties:this.newButtonProperties,moreButtonDefaults:this.moreButtonDefaults,moreButtonProperties:this.moreButtonProperties});this.moreButton=this.fieldEditor.moreButton;this.newButton=this.fieldEditor.newButton;if(this.canAddChildSchema)this.fieldEditor.gridButtons.addMember(this.addChildButton);var _1=this.mainStack;_1.addSections([isc.addProperties(this.instructionsSectionDefaults,this.instructionsSectionProperties,{items:[this.instructions]})]);_1.addSections([isc.addProperties(this.mainSectionDefaults,this.mainSectionProperties,{items:[this.mainEditor]})]);if(this.showMainEditor==false)_1.hideSection(1);_1.addSections([isc.addProperties(this.fieldSectionDefaults,this.fieldSectionProperties,{items:[this.fieldEditor]})]);var _2=this;this.deriveForm=this.createAutoChild("deriveForm",{fields:[{name:"sql",showTitle:false,formItemType:"AutoFitTextAreaItem",width:"*",height:40,colSpan:"*",keyPress:function(_3,_4,_5){if(_5=='Enter'&&isc.EH.ctrlKeyDown()){if(isc.Browser.isSafari)_3.setValue(_3.getElementValue());_2.execSQL();if(isc.Browser.isSafari)return false}}},{type:"button",title:"Execute",startRow:true,click:this.getID()+".execSQL()"}]});_1.addSections({expanded:true,showHeader:false,items:[this.saveButton]})},isc.A.execSQL=function isc_DataSourceEditor_execSQL(){var _1=this.deriveForm.getValue("sql");if(_1){_1=_1.trim().replace(/(.*);+/,"$1");var _2=isc.DataSource.get("DataSourceStore");_2.performCustomOperation("dsFromSQL",{dbName:this.mainEditor.getValue("dbName"),sql:_1},this.getID()+".deriveDSLoaded(data)")}},isc.A.deriveDSLoaded=function isc_DataSourceEditor_deriveDSLoaded(_1){var _2=_1.ds;this.dsLoaded(_1.ds)},isc.A.dsLoaded=function isc_DataSourceEditor_dsLoaded(_1){var _2=isc.DataSource.create(_1);this.currentDS=_2;this.deriveFields(_2);this.previewGrid.setDataSource(_2)},isc.A.deriveFields=function isc_DataSourceEditor_deriveFields(_1){var _2=_1.getFieldNames();var _3=[];for(var i=0;i<_2.length;i++){var _5=_2[i]
var _6={};var _7=_1.getField(_5);for(var _8 in _7){if(isc.isA.String(_8)&&_8.startsWith("_"))continue;_6[_8]=_7[_8]}
_3.add(_6)}
var _9=isc.Tree.create({modelType:"parent",childrenProperty:"fields",titleProperty:"name",idField:"id",nameProperty:"id",root:{id:0,name:"root"},data:_3});this.fieldEditor.setData(_9)});isc.B._maxIndex=isc.C+17}
isc._nonDebugModules=(isc._nonDebugModules!=null?isc._nonDebugModules:[]);isc._nonDebugModules.push('DataBinding');isc.checkForDebugAndNonDebugModules();isc._moduleEnd=isc._DataBinding_end=(isc.timestamp?isc.timestamp():new Date().getTime());if(isc.Log&&isc.Log.logIsInfoEnabled('loadTime'))isc.Log.logInfo('DataBinding module init time: '+(isc._moduleEnd-isc._moduleStart)+'ms','loadTime');delete isc.definingFramework;}else{if(window.isc&&isc.Log&&isc.Log.logWarn)isc.Log.logWarn("Duplicate load of module 'DataBinding'.");}

/*
 * Isomorphic SmartClient
 * Version v9.1p_2014-06-27 (2014-06-27)
 * Copyright(c) 1998 and beyond Isomorphic Software, Inc. All rights reserved.
 * "SmartClient" is a trademark of Isomorphic Software, Inc.
 *
 * licensing@smartclient.com
 *
 * http://smartclient.com/license
 */

